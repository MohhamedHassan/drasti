"use strict";var fT=Object.defineProperty,pT=Object.defineProperties,gT=Object.getOwnPropertyDescriptors,uC=Object.getOwnPropertySymbols,mT=Object.prototype.hasOwnProperty,yT=Object.prototype.propertyIsEnumerable,cC=(Zn,It,j)=>It in Zn?fT(Zn,It,{enumerable:!0,configurable:!0,writable:!0,value:j}):Zn[It]=j,dC=(Zn,It)=>{for(var j in It||(It={}))mT.call(It,j)&&cC(Zn,j,It[j]);if(uC)for(var j of uC(It))yT.call(It,j)&&cC(Zn,j,It[j]);return Zn},hC=(Zn,It)=>pT(Zn,gT(It));(self.webpackChunkdrasti=self.webpackChunkdrasti||[]).push([[179],{6217:(Zn,It,j)=>{j.d(It,{nm:()=>ts});var g=j(2122);j(5e3),j(259);var xe=j(5861),Ge=j(9681),wt=j(4859),on=j(2090),Ht=j(1877);const Oe=new Map,Bt={activated:!1,tokenObservers:[]},Re={initialized:!1,enabled:!1};function bt(Et){return Oe.get(Et)||Object.assign({},Bt)}function Ft(){return Re}class br{constructor(ct,At,vn,Kn,Ar){if(this.operation=ct,this.retryPolicy=At,this.getWaitDuration=vn,this.lowerBound=Kn,this.upperBound=Ar,this.pending=null,this.nextErrorWaitInterval=Kn,Kn>Ar)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ct){var At=this;return(0,xe.Z)(function*(){At.stop();try{At.pending=new on.BH,yield function mr(Et){return new Promise(ct=>{setTimeout(ct,Et)})}(At.getNextRun(ct)),At.pending.resolve(),yield At.pending.promise,At.pending=new on.BH,yield At.operation(),At.pending.resolve(),yield At.pending.promise,At.process(!0).catch(()=>{})}catch(vn){At.retryPolicy(vn)?At.process(!1).catch(()=>{}):At.stop()}})()}getNextRun(ct){if(ct)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const At=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),At}}}const Ot=new on.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function St(Et){if(!bt(Et).activated)throw Ot.create("use-before-activation",{appName:Et.name})}function xt(Et,ct){return en.apply(this,arguments)}function en(){return(en=(0,xe.Z)(function*({url:Et,body:ct},At){const vn={"Content-Type":"application/json"},Kn=At.getImmediate({optional:!0});if(Kn){const ps=yield Kn.getHeartbeatsHeader();ps&&(vn["X-Firebase-Client"]=ps)}const Ar={method:"POST",body:JSON.stringify(ct),headers:vn};let Qr,Wi;try{Qr=yield fetch(Et,Ar)}catch(ps){throw Ot.create("fetch-network-error",{originalErrorMessage:null==ps?void 0:ps.message})}if(200!==Qr.status)throw Ot.create("fetch-status-error",{httpStatus:Qr.status});try{Wi=yield Qr.json()}catch(ps){throw Ot.create("fetch-parse-error",{originalErrorMessage:null==ps?void 0:ps.message})}const Di=Wi.ttl.match(/^([\d.]+)(s)$/);if(!Di||!Di[2]||isNaN(Number(Di[1])))throw Ot.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Wi.ttl}`});const ws=1e3*Number(Di[1]),Jr=Date.now();return{token:Wi.token,expireTimeMillis:Jr+ws,issuedAtTimeMillis:Jr}})).apply(this,arguments)}function dr(Et,ct){const{projectId:At,appId:vn,apiKey:Kn}=Et.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${At}/apps/${vn}:exchangeDebugToken?key=${Kn}`,body:{debug_token:ct}}}const er="firebase-app-check-store";let Mr=null;function Rr(){return Mr||(Mr=new Promise((Et,ct)=>{try{const At=indexedDB.open("firebase-app-check-database",1);At.onsuccess=vn=>{Et(vn.target.result)},At.onerror=vn=>{var Kn;ct(Ot.create("storage-open",{originalErrorMessage:null===(Kn=vn.target.error)||void 0===Kn?void 0:Kn.message}))},At.onupgradeneeded=vn=>{0===vn.oldVersion&&vn.target.result.createObjectStore(er,{keyPath:"compositeKey"})}}catch(At){ct(Ot.create("storage-open",{originalErrorMessage:null==At?void 0:At.message}))}}),Mr)}function Gt(){return(Gt=(0,xe.Z)(function*(Et,ct){const vn=(yield Rr()).transaction(er,"readwrite"),Ar=vn.objectStore(er).put({compositeKey:Et,value:ct});return new Promise((Qr,Wi)=>{Ar.onsuccess=Di=>{Qr()},vn.onerror=Di=>{var ws;Wi(Ot.create("storage-set",{originalErrorMessage:null===(ws=Di.target.error)||void 0===ws?void 0:ws.message}))}})})).apply(this,arguments)}const Xr=new Ht.Yd("@firebase/app-check");function ls(Et,ct){return(0,on.hl)()?function Xi(Et,ct){return function dt(Et,ct){return Gt.apply(this,arguments)}(function Yn(Et){return`${Et.options.appId}-${Et.name}`}(Et),ct)}(Et,ct).catch(At=>{Xr.warn(`Failed to write token to IndexedDB. Error: ${At}`)}):Promise.resolve()}function Hn(){return Ft().enabled}function wi(){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,xe.Z)(function*(){const Et=Ft();if(Et.enabled&&Et.token)return Et.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Fn={error:"UNKNOWN_ERROR"};function zt(Et){return on.US.encodeString(JSON.stringify(Et),!1)}function Qn(Et){return yr.apply(this,arguments)}function yr(){return(yr=(0,xe.Z)(function*(Et,ct=!1){const At=Et.app;St(At);const vn=bt(At);let Ar,Kn=vn.token;if(Kn&&!un(Kn)&&(vn.token=void 0,Kn=void 0),!Kn){const Di=yield vn.cachedTokenPromise;Di&&(un(Di)?Kn=Di:yield ls(At,void 0))}if(!ct&&Kn&&un(Kn))return{token:Kn.token};let Wi,Qr=!1;if(Hn()){vn.exchangeTokenPromise||(vn.exchangeTokenPromise=xt(dr(At,yield wi()),Et.heartbeatServiceProvider).finally(()=>{vn.exchangeTokenPromise=void 0}),Qr=!0);const Di=yield vn.exchangeTokenPromise;return yield ls(At,Di),vn.token=Di,{token:Di.token}}try{vn.exchangeTokenPromise||(vn.exchangeTokenPromise=vn.provider.getToken().finally(()=>{vn.exchangeTokenPromise=void 0}),Qr=!0),Kn=yield bt(At).exchangeTokenPromise}catch(Di){"appCheck/throttled"===Di.code?Xr.warn(Di.message):Xr.error(Di),Ar=Di}return Kn?Ar?Wi=un(Kn)?{token:Kn.token,internalError:Ar}:Ut(Ar):(Wi={token:Kn.token},vn.token=Kn,yield ls(At,Kn)):Wi=Ut(Ar),Qr&&ft(At,Wi),Wi})).apply(this,arguments)}function Lr(Et,ct){const At=bt(Et),vn=At.tokenObservers.filter(Kn=>Kn.next!==ct);0===vn.length&&At.tokenRefresher&&At.tokenRefresher.isRunning()&&At.tokenRefresher.stop(),At.tokenObservers=vn}function Xe(Et){const{app:ct}=Et,At=bt(ct);let vn=At.tokenRefresher;vn||(vn=function Ue(Et){const{app:ct}=Et;return new br((0,xe.Z)(function*(){let vn;if(vn=bt(ct).token?yield Qn(Et,!0):yield Qn(Et),vn.error)throw vn.error;if(vn.internalError)throw vn.internalError}),()=>!0,()=>{const At=bt(ct);if(At.token){let vn=At.token.issuedAtTimeMillis+.5*(At.token.expireTimeMillis-At.token.issuedAtTimeMillis)+3e5;return vn=Math.min(vn,At.token.expireTimeMillis-3e5),Math.max(0,vn-Date.now())}return 0},3e4,96e4)}(Et),At.tokenRefresher=vn),!vn.isRunning()&&At.isTokenAutoRefreshEnabled&&vn.start()}function ft(Et,ct){const At=bt(Et).tokenObservers;for(const vn of At)try{"EXTERNAL"===vn.type&&null!=ct.error?vn.error(ct.error):vn.next(ct)}catch(Kn){}}function un(Et){return Et.expireTimeMillis-Date.now()>0}function Ut(Et){return{token:zt(Fn),error:Et}}class Be{constructor(ct,At){this.app=ct,this.heartbeatServiceProvider=At}_delete(){const{tokenObservers:ct}=bt(this.app);for(const At of ct)Lr(this.app,At.next);return Promise.resolve()}}const hs="app-check-internal";!function $r(){(0,Ge._registerComponent)(new wt.wA("app-check",Et=>function Me(Et,ct){return new Be(Et,ct)}(Et.getProvider("app").getImmediate(),Et.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Et,ct,At)=>{Et.getProvider(hs).initialize()})),(0,Ge._registerComponent)(new wt.wA(hs,Et=>function Ae(Et){return{getToken:ct=>Qn(Et,ct),addTokenListener:ct=>function Fr(Et,ct,At,vn){const{app:Kn}=Et,Ar=bt(Kn);if(Ar.tokenObservers=[...Ar.tokenObservers,{next:At,error:vn,type:ct}],Ar.token&&un(Ar.token)){const Wi=Ar.token;Promise.resolve().then(()=>{At({token:Wi.token}),Xe(Et)}).catch(()=>{})}Ar.cachedTokenPromise.then(()=>Xe(Et))}(Et,"INTERNAL",ct),removeTokenListener:ct=>Lr(Et.app,ct)}}(Et.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ge.registerVersion)("@firebase/app-check","0.6.0")}();class ts{constructor(){return(0,g.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Zn,It,j)=>{j.d(It,{zQ:()=>Dt,ww:()=>Lt,rT:()=>Re,f7:()=>Je,L6:()=>Oe,_Q:()=>Bt,lh:()=>bt,Qv:()=>Ht,nw:()=>Ft});var g=j(5e3),k=j(7579),he=j(9646),oe=j(8306),je=j(8996),He=j(6451),ht=j(6063);class We extends k.x{constructor(sr=1/0,lr=1/0,yn=ht.l){super(),this._bufferSize=sr,this._windowTime=lr,this._timestampProvider=yn,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=lr===1/0,this._bufferSize=Math.max(1,sr),this._windowTime=Math.max(1,lr)}next(sr){const{isStopped:lr,_buffer:yn,_infiniteTimeWindow:br,_timestampProvider:mr,_windowTime:Vt}=this;lr||(yn.push(sr),!br&&yn.push(mr.now()+Vt)),this._trimBuffer(),super.next(sr)}_subscribe(sr){this._throwIfClosed(),this._trimBuffer();const lr=this._innerSubscribe(sr),{_infiniteTimeWindow:yn,_buffer:br}=this,mr=br.slice();for(let Vt=0;Vt<mr.length&&!sr.closed;Vt+=yn?1:2)sr.next(mr[Vt]);return this._checkFinalizedStatuses(sr),lr}_trimBuffer(){const{_bufferSize:sr,_timestampProvider:lr,_buffer:yn,_infiniteTimeWindow:br}=this,mr=(br?1:2)*sr;if(sr<1/0&&mr<yn.length&&yn.splice(0,yn.length-mr),!br){const Vt=lr.now();let Ot=0;for(let it=1;it<yn.length&&yn[it]<=Vt;it+=2)Ot=it;Ot&&yn.splice(0,Ot+1)}}}var at=j(3099);function Ne(Yt,sr,lr){let yn,br=!1;return Yt&&"object"==typeof Yt?({bufferSize:yn=1/0,windowTime:sr=1/0,refCount:br=!1,scheduler:lr}=Yt):yn=null!=Yt?Yt:1/0,(0,at.B)({connector:()=>new We(yn,sr,lr),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:br})}var Pe=j(3900),vt=j(576);function wn(Yt,sr){return(0,vt.m)(sr)?(0,Pe.w)(()=>Yt,sr):(0,Pe.w)(()=>Yt)}var _t=j(5363),ln=j(4004),Dn=j(590),Nt=j(9468),Jt=j(9300),Un=j(2122),dn=j(2011),xe=j(9808),Ge=j(6217),wt=j(9260);const Ht=new g.OlP("angularfire2.auth.use-emulator"),Oe=new g.OlP("angularfire2.auth.settings"),Bt=new g.OlP("angularfire2.auth.tenant-id"),Re=new g.OlP("angularfire2.auth.langugage-code"),bt=new g.OlP("angularfire2.auth.use-device-language"),Je=new g.OlP("angularfire.auth.persistence"),Ft=(Yt,sr,lr,yn,br,mr,Vt,Ot)=>(0,dn.cc)(`${Yt.name}.auth`,"AngularFireAuth",Yt.name,()=>{const it=sr.runOutsideAngular(()=>Yt.auth());if(lr&&it.useEmulator(...lr),yn&&(it.tenantId=yn),it.languageCode=br,mr&&it.useDeviceLanguage(),Vt)for(const[St,ut]of Object.entries(Vt))it.settings[St]=ut;return Ot&&it.setPersistence(Ot),it},[lr,yn,br,mr,Vt,Ot]);let Dt=(()=>{class Yt{constructor(lr,yn,br,mr,Vt,Ot,it,St,ut,Qt,xt,en){const Wn=new k.x,or=(0,he.of)(void 0).pipe((0,_t.Q)(Vt.outsideAngular),(0,Pe.w)(()=>mr.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9169)))),(0,ln.U)(()=>(0,dn.on)(lr,mr,yn)),(0,ln.U)(dr=>Ft(dr,mr,Ot,St,ut,Qt,it,xt)),Ne({bufferSize:1,refCount:!1}));if((0,xe.PM)(br))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,he.of)(null);else{or.pipe((0,Dn.P)()).subscribe();const Yr=or.pipe((0,Pe.w)(Gr=>Gr.getRedirectResult().then(Mr=>Mr,()=>null)),Un.iC,Ne({bufferSize:1,refCount:!1})),ii=or.pipe((0,Pe.w)(Gr=>new oe.y(Mr=>({unsubscribe:mr.runOutsideAngular(()=>Gr.onAuthStateChanged(Rr=>Mr.next(Rr),Rr=>Mr.error(Rr),()=>Mr.complete()))})))),er=or.pipe((0,Pe.w)(Gr=>new oe.y(Mr=>({unsubscribe:mr.runOutsideAngular(()=>Gr.onIdTokenChanged(Rr=>Mr.next(Rr),Rr=>Mr.error(Rr),()=>Mr.complete()))}))));this.authState=Yr.pipe(wn(ii),(0,Nt.R)(Vt.outsideAngular),(0,_t.Q)(Vt.insideAngular)),this.user=Yr.pipe(wn(er),(0,Nt.R)(Vt.outsideAngular),(0,_t.Q)(Vt.insideAngular)),this.idToken=this.user.pipe((0,Pe.w)(Gr=>Gr?(0,je.D)(Gr.getIdToken()):(0,he.of)(null))),this.idTokenResult=this.user.pipe((0,Pe.w)(Gr=>Gr?(0,je.D)(Gr.getIdTokenResult()):(0,he.of)(null))),this.credential=(0,He.T)(Yr,Wn,this.authState.pipe((0,Jt.h)(Gr=>!Gr))).pipe((0,ln.U)(Gr=>(null==Gr?void 0:Gr.user)?Gr:null),(0,Nt.R)(Vt.outsideAngular),(0,_t.Q)(Vt.insideAngular))}return(0,dn.pX)(this,or,mr,{spy:{apply:(dr,Yr,ii)=>{(dr.startsWith("signIn")||dr.startsWith("createUser"))&&ii.then(er=>Wn.next(er))}}})}}return Yt.\u0275fac=function(lr){return new(lr||Yt)(g.LFG(dn.Dh),g.LFG(dn.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Un.HU),g.LFG(Ht,8),g.LFG(Oe,8),g.LFG(Bt,8),g.LFG(Re,8),g.LFG(bt,8),g.LFG(Je,8),g.LFG(Ge.nm,8))},Yt.\u0275prov=g.Yz7({token:Yt,factory:Yt.\u0275fac,providedIn:"any"}),Yt})(),Lt=(()=>{class Yt{constructor(){wt.Z.registerVersion("angularfire",Un.q4.full,"auth-compat")}}return Yt.\u0275fac=function(lr){return new(lr||Yt)},Yt.\u0275mod=g.oAB({type:Yt}),Yt.\u0275inj=g.cJS({providers:[Dt]}),Yt})()},2095:(Zn,It,j)=>{j.d(It,{ST:()=>i_,yb:()=>s_});var g=j(5e3),k=j(4986),he=j(8306),oe=j(8996),je=j(9646),He=j(2122),ht=j(4482),We=j(5403);function at(){return(0,ht.e)((i,e)=>{let t,s=!1;i.subscribe((0,We.x)(e,u=>{const m=t;t=u,s&&e.next([m,u]),s=!0}))})}var Ne=j(4671);function vt(i,e){return i===e}var Re,wn=j(8675),_t=j(4004),ln=j(5026),Dn=j(9300),Nt=j(2011),Jt=j(9808),dn=(j(9169),j(3942)),xe=j(5861),Ge=j(9681),wt=j(4859),on=j(1877),Ht=j(2090),Oe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Bt={},bt=bt||{},Je=Oe||self;function Ft(){}function Dt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Lt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var sr="closure_uid_"+(1e9*Math.random()>>>0),lr=0;function yn(i,e,t){return i.call.apply(i.bind,arguments)}function br(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function mr(i,e,t){return(mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yn:br).apply(null,arguments)}function Vt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function Ot(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,u,m){for(var E=Array(arguments.length-2),R=2;R<arguments.length;R++)E[R-2]=arguments[R];return e.prototype[u].apply(s,E)}}function it(){this.s=this.s,this.o=this.o}it.prototype.s=!1,it.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Yt(i){Object.prototype.hasOwnProperty.call(i,sr)&&i[sr]||(i[sr]=++lr)}(this)},it.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ut=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Qt(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function xt(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Dt(s)){const u=i.length||0,m=s.length||0;i.length=u+m;for(let E=0;E<m;E++)i[u+E]=s[E]}else i.push(s)}}function en(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}en.prototype.h=function(){this.defaultPrevented=!0};var Wn=function(){if(!Je.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Je.addEventListener("test",Ft,e),Je.removeEventListener("test",Ft,e)}catch(t){}return i}();function or(i){return/^[\s\xa0]*$/.test(i)}var dr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Yr(i,e){return i<e?-1:i>e?1:0}function ii(){var i=Je.navigator;return i&&(i=i.userAgent)?i:""}function er(i){return-1!=ii().indexOf(i)}function Gr(i){return Gr[" "](i),i}Gr[" "]=Ft;var tn,i,Rr=er("Opera"),is=er("Trident")||er("MSIE"),Xi=er("Edge"),cn=Xi||is,nt=er("Gecko")&&!(-1!=ii().toLowerCase().indexOf("webkit")&&!er("Edge"))&&!(er("Trident")||er("MSIE"))&&!er("Edge"),dt=-1!=ii().toLowerCase().indexOf("webkit")&&!er("Edge");function Gt(){var i=Je.document;return i?i.documentMode:void 0}e:{var bn="",Yn=(i=ii(),nt?/rv:([^\);]+)(\)|;)/.exec(i):Xi?/Edge\/([\d\.]+)/.exec(i):is?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):dt?/WebKit\/(\S+)/.exec(i):Rr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Yn&&(bn=Yn?Yn[1]:""),is){var Xr=Gt();if(null!=Xr&&Xr>parseFloat(bn)){tn=String(Xr);break e}}tn=bn}var Br={};var di=Je.document&&is&&(Gt()||parseInt(tn,10))||void 0;function Hn(i,e){if(en.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(nt){e:{try{Gr(e.nodeName);var u=!0;break e}catch(m){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:wi[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Hn.X.h.call(this)}}Ot(Hn,en);var wi={2:"touch",3:"pen",4:"mouse"};Hn.prototype.h=function(){Hn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Dr="closure_listenable_"+(1e6*Math.random()|0),$i=0;function Fn(i,e,t,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=u,this.key=++$i,this.ba=this.ea=!1}function zt(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Qn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function yr(i){const e={};for(const t in i)e[t]=i[t];return e}const Fr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lr(i,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)i[t]=s[t];for(let m=0;m<Fr.length;m++)t=Fr[m],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Xe(i){this.src=i,this.g={},this.h=0}function Ue(i,e){var t=e.type;if(t in i.g){var m,s=i.g[t],u=ut(s,e);(m=0<=u)&&Array.prototype.splice.call(s,u,1),m&&(zt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function ft(i,e,t,s){for(var u=0;u<i.length;++u){var m=i[u];if(!m.ba&&m.listener==e&&m.capture==!!t&&m.ha==s)return u}return-1}Xe.prototype.add=function(i,e,t,s,u){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var E=ft(i,e,s,u);return-1<E?(e=i[E],t||(e.ea=!1)):((e=new Fn(e,this.src,m,!!s,u)).ea=t,i.push(e)),e};var un="closure_lm_"+(1e6*Math.random()|0),Ut={};function Be(i,e,t,s,u){if(s&&s.once)return pt(i,e,t,s,u);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Be(i,e[m],t,s,u);return null}return t=Ns(t),i&&i[Dr]?i.N(e,t,Lt(s)?!!s.capture:!!s,u):Me(i,e,t,!1,s,u)}function Me(i,e,t,s,u,m){if(!e)throw Error("Invalid event type");var E=Lt(u)?!!u.capture:!!u,R=Zi(i);if(R||(i[un]=R=new Xe(i)),(t=R.add(e,t,s,E,m)).proxy)return t;if(s=function Ae(){const e=oi;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Wn||(u=E),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(Jn(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function pt(i,e,t,s,u){if(Array.isArray(e)){for(var m=0;m<e.length;m++)pt(i,e[m],t,s,u);return null}return t=Ns(t),i&&i[Dr]?i.O(e,t,Lt(s)?!!s.capture:!!s,u):Me(i,e,t,!0,s,u)}function sn(i,e,t,s,u){if(Array.isArray(e))for(var m=0;m<e.length;m++)sn(i,e[m],t,s,u);else s=Lt(s)?!!s.capture:!!s,t=Ns(t),i&&i[Dr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=ft(m=i.g[e],t,s,u))&&(zt(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=Zi(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ft(e,t,s,u)),(t=-1<i?e[i]:null)&&_r(t))}function _r(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Dr])Ue(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Jn(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Zi(e))?(Ue(t,i),0==t.h&&(t.src=null,e[un]=null)):zt(i)}}}function Jn(i){return i in Ut?Ut[i]:Ut[i]="on"+i}function oi(i,e){if(i.ba)i=!0;else{e=new Hn(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&_r(i),i=t.call(s,e)}return i}function Zi(i){return(i=i[un])instanceof Xe?i:null}var us="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ns(i){return"function"==typeof i?i:(i[us]||(i[us]=function(e){return i.handleEvent(e)}),i[us])}function Gi(){it.call(this),this.i=new Xe(this),this.P=this,this.I=null}function li(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new en(e,i);else if(e instanceof en)e.target=e.target||i;else{var u=e;Lr(e=new en(s,i),u)}if(u=!0,t)for(var m=t.length-1;0<=m;m--){var E=e.g=t[m];u=as(E,s,!0,e)&&u}if(u=as(E=e.g=i,s,!0,e)&&u,u=as(E,s,!1,e)&&u,t)for(m=0;m<t.length;m++)u=as(E=e.g=t[m],s,!1,e)&&u}function as(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,m=0;m<e.length;++m){var E=e[m];if(E&&!E.ba&&E.capture==t){var R=E.listener,X=E.ha||E.src;E.ea&&Ue(i.i,E),u=!1!==R.call(X,s)&&u}}return u&&!s.defaultPrevented}Ot(Gi,it),Gi.prototype[Dr]=!0,Gi.prototype.removeEventListener=function(i,e,t,s){sn(this,i,e,t,s)},Gi.prototype.M=function(){if(Gi.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)zt(t[s]);delete i.g[e],i.h--}}this.I=null},Gi.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Gi.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Si=Je.JSON.stringify;function _n(){var i=Ii;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ds,hi=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Ci,i=>i.reset());class Ci{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gs(i){Je.setTimeout(()=>{throw i},0)}function zi(i,e){ds||function Ri(){var i=Je.Promise.resolve(void 0);ds=function(){i.then(zr)}}(),Yi||(ds(),Yi=!0),Ii.add(i,e)}var Yi=!1,Ii=new class Tr{constructor(){this.h=this.g=null}add(e,t){const s=hi.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function zr(){for(var i;i=_n();){try{i.h.call(i.g)}catch(t){gs(t)}var e=hi;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Yi=!1}function Cs(i,e){Gi.call(this),this.h=i||1,this.g=e||Je,this.j=mr(this.lb,this),this.l=Date.now()}function es(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function hs(i,e,t){if("function"==typeof i)t&&(i=mr(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=mr(i.handleEvent,i)}return 2147483647<Number(e)?-1:Je.setTimeout(i,e||0)}function $r(i){i.g=hs(()=>{i.g=null,i.i&&(i.i=!1,$r(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ot(Cs,Gi),(Re=Cs.prototype).ca=!1,Re.R=null,Re.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),li(this,"tick"),this.ca&&(es(this),this.start()))}},Re.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Re.M=function(){Cs.X.M.call(this),es(this),delete this.g};class wr extends it{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$r(this)}M(){super.M(),this.g&&(Je.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(i){it.call(this),this.h=i,this.g={}}Ot(Ir,it);var ts=[];function Vr(i,e,t,s){Array.isArray(t)||(t&&(ts[0]=t.toString()),t=ts);for(var u=0;u<t.length;u++){var m=Be(e,t[u],s||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function bi(i){Qn(i.g,function(e,t){this.g.hasOwnProperty(t)&&_r(e)},i),i.g={}}function Ws(){this.g=!0}function si(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ji(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var m=u[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var E=1;E<u.length;E++)u[E]=""}}}return Si(t)}catch(R){return e}}(i,t)+(s?" "+s:"")})}Ir.prototype.M=function(){Ir.X.M.call(this),bi(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ws.prototype.Aa=function(){this.g=!1},Ws.prototype.info=function(){};var bs={},ys=null;function Pi(){return ys=ys||new Gi}function jo(i){en.call(this,bs.Pa,i)}function lo(i){const e=Pi();li(e,new jo(e))}function Ts(i,e){en.call(this,bs.STAT_EVENT,i),this.stat=e}function rs(i){const e=Pi();li(e,new Ts(e,i))}function Et(i,e){en.call(this,bs.Qa,i),this.size=e}function ct(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Je.setTimeout(function(){i()},e)}bs.Pa="serverreachability",Ot(jo,en),bs.STAT_EVENT="statevent",Ot(Ts,en),bs.Qa="timingevent",Ot(Et,en);var At={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},vn={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Kn(){}function Qr(){}Kn.prototype.h=null;var Jr,Wi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Di(){en.call(this,"d")}function ws(){en.call(this,"c")}function ps(){}function Is(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new Ir(this),this.O=_s,this.T=new Cs(i=cn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Xo}function Xo(){this.i=null,this.g="",this.h=!1}Ot(Di,en),Ot(ws,en),Ot(ps,Kn),ps.prototype.g=function(){return new XMLHttpRequest},ps.prototype.i=function(){return{}},Jr=new ps;var _s=45e3,ho={},Ss={};function Eo(i,e,t){i.K=1,i.v=Ti(so(e)),i.s=t,i.P=!0,Li(i,null)}function Li(i,e){i.F=Date.now(),Ds(i),i.A=so(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),Ji(t.i,"t",s),i.C=0,t=i.l.H,i.h=new Xo,i.g=Rt(i.l,t?e:null,!i.s),0<i.N&&(i.L=new wr(mr(i.La,i,i.g),i.N)),Vr(i.S,i.g,"readystatechange",i.ib),e=i.H?yr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),lo(),function Fi(i,e,t,s,u,m){i.info(function(){if(i.g)if(m)for(var E="",R=m.split("&"),X=0;X<R.length;X++){var se=R[X].split("=");if(1<se.length){var Se=se[0];se=se[1];var st=Se.split("_");E=2<=st.length&&"type"==st[1]?E+(Se+"=")+se+"&":E+(Se+"=redacted&")}}else E=null;else E=m;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+E})}(i.j,i.u,i.A,i.m,i.U,i.s)}function $s(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Os(i,e,t){let u,s=!0;for(;!i.I&&i.C<t.length;){if(u=qs(i,t),u==Ss){4==e&&(i.o=4,rs(14),s=!1),si(i.j,i.m,null,"[Incomplete Response]");break}if(u==ho){i.o=4,rs(15),si(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}si(i.j,i.m,u,null),Fs(i,u)}$s(i)&&u!=Ss&&u!=ho&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,rs(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),En(e),e.K=!0,rs(11))):(si(i.j,i.m,t,"[Invalid Chunked Response]"),ks(i),js(i))}function qs(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Ss:(t=Number(e.substring(t,s)),isNaN(t)?ho:(s+=1)+t>e.length?Ss:(e=e.substr(s,t),i.C=s+t,e))}function Ds(i){i.V=Date.now()+i.O,Lo(i,i.O)}function Lo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ct(mr(i.gb,i),e)}function Qs(i){i.B&&(Je.clearTimeout(i.B),i.B=null)}function js(i){0==i.l.G||i.I||Mn(i.l,i)}function ks(i){Qs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,es(i.T),bi(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Fs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||fo(t.h,i)))if(!i.J&&fo(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch(se){s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0])e:if(t.u)t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=ct(mr(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;mn(t),ue(t)}mt(t),rs(18)}if(1>=No(t.h)&&t.ja){try{t.ja()}catch(se){}t.ja=void 0}}else vr(t,11)}else if((i.J||t.g==i)&&mn(t),!or(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let se=u[e];if(t.T=se[0],se=se[1],2==t.G)if("c"==se[0]){t.I=se[1],t.ka=se[2];const Se=se[3];null!=Se&&(t.ma=Se,t.j.info("VER="+t.ma));const st=se[4];null!=st&&(t.Ca=st,t.j.info("SVER="+t.Ca));const qt=se[5];null!=qt&&"number"==typeof qt&&0<qt&&(t.J=s=1.5*qt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const kn=i.g;if(kn){const Xn=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xn){var m=s.h;m.g||-1==Xn.indexOf("spdy")&&-1==Xn.indexOf("quic")&&-1==Xn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(Co(m,m.h),m.h=null))}if(s.D){const Nr=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nr&&(s.za=Nr,Hi(s.F,s.D,Nr))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var E=i;if((s=t).sa=rn(s,s.H?s.ka:null,s.V),E.J){Y(s.h,E);var R=E,X=s.J;X&&R.setTimeout(X),R.B&&(Qs(R),Ds(R)),s.g=E}else et(s);0<t.i.length&&ze(t)}else"stop"!=se[0]&&"close"!=se[0]||vr(t,7);else 3==t.G&&("stop"==se[0]||"close"==se[0]?"stop"==se[0]?vr(t,7):ce(t):"noop"!=se[0]&&t.l&&t.l.wa(se),t.A=0)}lo()}catch(se){}}function Xs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Dt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function vs(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(Dt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Vo(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Dt(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),u=s.length,m=0;m<u;m++)e.call(void 0,s[m],t&&t[m],i)}(Re=Is.prototype).setTimeout=function(i){this.O=i},Re.ib=function(i){i=i.target;const e=this.L;e&&3==z(i)?e.l():this.La(i)},Re.La=function(i){try{if(i==this.g)e:{const Se=z(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Se)&&(3!=Se||cn||this.g&&(this.h.h||this.g.fa()||J(this.g)))){this.I||4!=Se||7==e||lo(),Qs(this);var t=this.g.aa();this.Y=t;t:if($s(this)){var s=J(this.g);i="";var u=s.length,m=4==z(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ks(this),js(this);var E="";break t}this.h.i=new Je.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:m&&e==u-1});s.splice(0,u),this.h.g+=i,this.C=0,E=this.h.g}else E=this.g.fa();if(this.i=200==t,function fs(i,e,t,s,u,m,E){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+m+" "+E})}(this.j,this.u,this.A,this.m,this.U,Se,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var R,X=this.g;if((R=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!or(R)){var se=R;break t}}se=null}if(!(t=se)){this.i=!1,this.o=3,rs(12),ks(this),js(this);break e}si(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fs(this,t)}this.P?(Os(this,Se,E),cn&&this.i&&3==Se&&(Vr(this.S,this.T,"tick",this.hb),this.T.start())):(si(this.j,this.m,E,null),Fs(this,E)),4==Se&&ks(this),this.i&&!this.I&&(4==Se?Mn(this.l,this):(this.i=!1,Ds(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,rs(12)):(this.o=0,rs(13)),ks(this),js(this)}}}catch(Se){}},Re.hb=function(){if(this.g){var i=z(this.g),e=this.g.fa();this.C<e.length&&(Qs(this),Os(this,i,e),this.i&&4!=i&&Ds(this))}},Re.cancel=function(){this.I=!0,ks(this)},Re.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Zr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(lo(),rs(17)),ks(this),this.o=2,js(this)):Lo(this,this.V-i)};var Ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function io(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof io){this.h=void 0!==e?e:i.h,Hs(this,i.j),this.s=i.s,this.g=i.g,Gs(this,i.m),this.l=i.l,e=i.i;var t=new jr;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),As(this,t),this.o=i.o}else i&&(t=String(i).match(Ms))?(this.h=!!e,Hs(this,t[1]||"",!0),this.s=B(t[2]||""),this.g=B(t[3]||"",!0),Gs(this,t[4]),this.l=B(t[5]||"",!0),As(this,t[6]||"",!0),this.o=B(t[7]||"")):(this.h=!!e,this.i=new jr(null,this.h))}function so(i){return new io(i)}function Hs(i,e,t){i.j=t?B(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Gs(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function As(i,e,t){e instanceof jr?(i.i=e,function ki(i,e){e&&!i.j&&(ei(i),i.i=null,i.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(ti(this,s),Ji(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=pe(e,Sn)),i.i=new jr(e,i.h))}function Hi(i,e,t){i.i.set(e,t)}function Ti(i){return Hi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function B(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function pe(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,q),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function q(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}io.prototype.toString=function(){var i=[],e=this.j;e&&i.push(pe(e,ve,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(pe(e,ve,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(pe(t,"/"==t.charAt(0)?nn:qe,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",pe(t,pr)),i.join("")};var ve=/[#\/\?@]/g,qe=/[#\?:]/g,nn=/[#\?]/g,Sn=/[#\?@]/g,pr=/#/g;function jr(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ei(i){i.g||(i.g=new Map,i.h=0,i.i&&function Ai(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),u=null;if(0<=s){var m=i[t].substring(0,s);u=i[t].substring(s+1)}else m=i[t];e(m,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ti(i,e){ei(i),e=Ni(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function fi(i,e){return ei(i),e=Ni(i,e),i.g.has(e)}function Ji(i,e,t){ti(i,e),0<t.length&&(i.i=null,i.g.set(Ni(i,e),Qt(t)),i.h+=t.length)}function Ni(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ns(i){this.l=i||Wr,i=Je.PerformanceNavigationTiming?0<(i=Je.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Je.g&&Je.g.Ga&&Je.g.Ga()&&Je.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Re=jr.prototype).add=function(i,e){ei(this),this.i=null,i=Ni(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Re.forEach=function(i,e){ei(this),this.g.forEach(function(t,s){t.forEach(function(u){i.call(e,u,s,this)},this)},this)},Re.oa=function(){ei(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const u=i[s];for(let m=0;m<u.length;m++)t.push(e[s])}return t},Re.W=function(i){ei(this);let e=[];if("string"==typeof i)fi(this,i)&&(e=e.concat(this.g.get(Ni(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Re.set=function(i,e){return ei(this),this.i=null,fi(this,i=Ni(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Re.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const m=encodeURIComponent(String(s)),E=this.W(s);for(s=0;s<E.length;s++){var u=m;""!==E[s]&&(u+="="+encodeURIComponent(String(E[s]))),i.push(u)}}return this.i=i.join("&")};var Wr=10;function Js(i){return!!i.h||!!i.g&&i.g.size>=i.j}function No(i){return i.h?1:i.g?i.g.size:0}function fo(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Co(i,e){i.g?i.g.add(e):i.h=e}function Y(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function G(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Qt(i.i)}function L(){}function ye(){this.g=new L}function Qe(i,e,t){const s=t||"";try{Xs(i,function(u,m){let E=u;Lt(u)&&(E=Si(u)),e.push(s+m+"="+encodeURIComponent(E))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function ee(i,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch(m){}}function K(i){this.l=i.ac||null,this.j=i.jb||!1}function be(i,e){Gi.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=ke,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ns.prototype.cancel=function(){if(this.i=G(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},L.prototype.stringify=function(i){return Je.JSON.stringify(i,void 0)},L.prototype.parse=function(i){return Je.JSON.parse(i,void 0)},Ot(K,Kn),K.prototype.g=function(){return new be(this.l,this.j)},K.prototype.i=function(i){return function(){return i}}({}),Ot(be,Gi);var ke=0;function rt(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Kt(i){i.readyState=4,i.l=null,i.j=null,i.A=null,xn(i)}function xn(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Re=be.prototype).open=function(i,e){if(this.readyState!=ke)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,xn(this)},Re.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Je).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kt(this)),this.readyState=ke},Re.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Je.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rt(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Re.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Kt(this):xn(this),3==this.readyState&&rt(this)}},Re.Va=function(i){this.g&&(this.response=this.responseText=i,Kt(this))},Re.Ua=function(i){this.g&&(this.response=i,Kt(this))},Re.ga=function(){this.g&&Kt(this)},Re.setRequestHeader=function(i,e){this.v.append(i,e)},Re.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Re.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(be.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Sr=Je.JSON.parse;function jn(i){Gi.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qr,this.K=this.L=!1}Ot(jn,Gi);var qr="",_i=/^https?$/i,pi=["POST","PUT"];function ss(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,l(i),I(i)}function l(i){i.D||(i.D=!0,li(i,"complete"),li(i,"error"))}function A(i){if(i.h&&void 0!==bt&&(!i.C[1]||4!=z(i)||2!=i.aa()))if(i.v&&4==z(i))hs(i.Ha,0,i);else if(li(i,"readystatechange"),4==z(i)){i.h=!1;try{const R=i.aa();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===R){var u=String(i.H).match(Ms)[1]||null;if(!u&&Je.self&&Je.self.location){var m=Je.self.location.protocol;u=m.substr(0,m.length-1)}s=!_i.test(u?u.toLowerCase():"")}t=s}if(t)li(i,"complete"),li(i,"success");else{i.m=6;try{var E=2<z(i)?i.g.statusText:""}catch(X){E=""}i.j=E+" ["+i.aa()+"]",l(i)}}finally{I(i)}}}function I(i,e){if(i.g){P(i);const t=i.g,s=i.C[0]?Ft:null;i.g=null,i.C=null,e||li(i,"ready");try{t.onreadystatechange=s}catch(u){}}}function P(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Je.clearTimeout(i.A),i.A=null)}function z(i){return i.g?i.g.readyState:0}function J(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case qr:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ge(i){let e="";return Qn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function we(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ge(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Hi(i,e,t))}function ae(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function me(i){this.Ca=0,this.i=[],this.j=new Ws,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ae("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ae("baseRetryDelayMs",5e3,i),this.bb=ae("retryDelaySeedMs",1e4,i),this.$a=ae("forwardChannelMaxRetries",2,i),this.ta=ae("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ns(i&&i.concurrentRequestLimit),this.Fa=new ye,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ce(i){if(Te(i),3==i.G){var e=i.U++,t=so(i.F);Hi(t,"SID",i.I),Hi(t,"RID",e),Hi(t,"TYPE","terminate"),Fe(i,t),(e=new Is(i,i.j,e,void 0)).K=2,e.v=Ti(so(t)),t=!1,Je.navigator&&Je.navigator.sendBeacon&&(t=Je.navigator.sendBeacon(e.v.toString(),"")),!t&&Je.Image&&((new Image).src=e.v,t=!0),t||(e.g=Rt(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ds(e)}Ln(i)}function ue(i){i.g&&(En(i),i.g.cancel(),i.g=null)}function Te(i){ue(i),i.u&&(Je.clearTimeout(i.u),i.u=null),mn(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Je.clearTimeout(i.m),i.m=null)}function ze(i){Js(i.h)||i.m||(i.m=!0,zi(i.Ja,i),i.C=0)}function De(i,e){var t;t=e?e.m:i.U++;const s=so(i.F);Hi(s,"SID",i.I),Hi(s,"RID",t),Hi(s,"AID",i.T),Fe(i,s),i.o&&i.s&&we(s,i.o,i.s),t=new Is(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=yt(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),Co(i.h,t),Eo(t,s,e)}function Fe(i,e){i.ia&&Qn(i.ia,function(t,s){Hi(e,s,t)}),i.l&&Xs({},function(t,s){Hi(e,s,t)})}function yt(i,e,t){t=Math.min(i.i.length,t);var s=i.l?mr(i.l.Ra,i.l,i):null;e:{var u=i.i;let m=-1;for(;;){const E=["count="+t];-1==m?0<t?(m=u[0].h,E.push("ofs="+m)):m=0:E.push("ofs="+m);let R=!0;for(let X=0;X<t;X++){let se=u[X].h;const Se=u[X].g;if(se-=m,0>se)m=Math.max(0,u[X].h-100),R=!1;else try{Qe(Se,E,"req"+se+"_")}catch(st){s&&s(Se)}}if(R){s=E.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function et(i){i.g||i.u||(i.Z=1,zi(i.Ia,i),i.A=0)}function mt(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=ct(mr(i.Ia,i),nr(i,i.A)),i.A++,0))}function En(i){null!=i.B&&(Je.clearTimeout(i.B),i.B=null)}function An(i){i.g=new Is(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=so(i.sa);Hi(e,"RID","rpc"),Hi(e,"SID",i.I),Hi(e,"CI",i.L?"0":"1"),Hi(e,"AID",i.T),Hi(e,"TYPE","xmlhttp"),Fe(i,e),i.o&&i.s&&we(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Ti(so(e)),t.s=null,t.P=!0,Li(t,i)}function mn(i){null!=i.v&&(Je.clearTimeout(i.v),i.v=null)}function Mn(i,e){var t=null;if(i.g==e){mn(i),En(i),i.g=null;var s=2}else{if(!fo(i.h,e))return;t=e.D,Y(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;li(s=Pi(),new Et(s,t)),ze(i)}else et(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==s&&function tt(i,e){return!(No(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=ct(mr(i.Ja,i,e),nr(i,i.C)),i.C++,0)))}(i,e)||2==s&&mt(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:vr(i,5);break;case 4:vr(i,10);break;case 3:vr(i,6);break;default:vr(i,2)}}function nr(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function vr(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=mr(i.kb,i);t||(t=new io("//www.google.com/images/cleardot.gif"),Je.location&&"http"==Je.location.protocol||Hs(t,"https"),Ti(t)),function Nn(i,e){const t=new Ws;if(Je.Image){const s=new Image;s.onload=Vt(ee,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Vt(ee,t,s,"TestLoadImage: error",!1,e),s.onabort=Vt(ee,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Vt(ee,t,s,"TestLoadImage: timeout",!1,e),Je.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else rs(2);i.G=0,i.l&&i.l.va(e),Ln(i),Te(i)}function Ln(i){if(i.G=0,i.la=[],i.l){const e=G(i.h);(0!=e.length||0!=i.i.length)&&(xt(i.la,e),xt(i.la,i.i),i.h.i.length=0,Qt(i.i),i.i.length=0),i.l.ua()}}function rn(i,e,t){var s=t instanceof io?so(t):new io(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Gs(s,s.m);else{var u=Je.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var m=new io(null,void 0);s&&Hs(m,s),e&&(m.g=e),u&&Gs(m,u),t&&(m.l=t),s=m}return e=i.za,(t=i.D)&&e&&Hi(s,t,e),Hi(s,"VER",i.ma),Fe(i,s),s}function Rt(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jn(t&&i.Da&&!i.ra?new K({jb:!0}):i.ra)).Ka(i.H),e}function hn(){}function cr(){if(is&&!(10<=Number(di)))throw Error("Environmental error: no available transport.")}function ur(i,e){Gi.call(this),this.g=new me(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!or(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!or(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new tr(this)}function Wt(i){Di.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function hr(){ws.call(this),this.status=1}function tr(i){this.g=i}(Re=jn.prototype).Ka=function(i){this.L=i},Re.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jr.g(),this.C=function Ar(i){return i.h||(i.h=i.i())}(this.u?this.u:Jr),this.g.onreadystatechange=mr(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void ss(this,m)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)t.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const m of s.keys())t.set(m,s.get(m))}s=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),u=Je.FormData&&i instanceof Je.FormData,!(0<=ut(pi,e))||s||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,E]of t)this.g.setRequestHeader(m,E);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{P(this),0<this.B&&((this.K=function Vi(i){return is&&function kr(){return function Mr(i){var e=Br;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=dr(String(tn)).split("."),t=dr("9").split("."),s=Math.max(e.length,t.length);for(let E=0;0==i&&E<s;E++){var u=e[E]||"",m=t[E]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==u[0].length&&0==m[0].length)break;i=Yr(0==u[1].length?0:parseInt(u[1],10),0==m[1].length?0:parseInt(m[1],10))||Yr(0==u[2].length,0==m[2].length)||Yr(u[2],m[2]),u=u[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.qa,this)):this.A=hs(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){ss(this,m)}},Re.qa=function(){void 0!==bt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},Re.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,li(this,"complete"),li(this,"abort"),I(this))},Re.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),I(this,!0)),jn.X.M.call(this)},Re.Ha=function(){this.s||(this.F||this.v||this.l?A(this):this.fb())},Re.fb=function(){A(this)},Re.aa=function(){try{return 2<z(this)?this.g.status:-1}catch(i){return-1}},Re.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Re.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Sr(e)}},Re.Ea=function(){return this.m},Re.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Re=me.prototype).ma=8,Re.G=1,Re.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new Is(this,this.j,i,void 0);let m=this.s;if(this.S&&(m?(m=yr(m),Lr(m,this.S)):m=this.S),null!==this.o||this.N||(u.H=m,m=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yt(this,u,e),Hi(t=so(this.F),"RID",i),Hi(t,"CVER",22),this.D&&Hi(t,"X-HTTP-Session-Id",this.D),Fe(this,t),m&&(this.N?e="headers="+encodeURIComponent(String(ge(m)))+"&"+e:this.o&&we(t,this.o,m)),Co(this.h,u),this.Ya&&Hi(t,"TYPE","init"),this.O?(Hi(t,"$req",e),Hi(t,"SID","null"),u.Z=!0,Eo(u,t,null)):Eo(u,t,e),this.G=2}}else 3==this.G&&(i?De(this,i):0==this.i.length||Js(this.h)||De(this))},Re.Ia=function(){if(this.u=null,An(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=ct(mr(this.eb,this),i)}},Re.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,rs(10),ue(this),An(this))},Re.cb=function(){null!=this.v&&(this.v=null,ue(this),mt(this),rs(19))},Re.kb=function(i){i?(this.j.info("Successfully pinged google.com"),rs(2)):(this.j.info("Failed to ping google.com"),rs(1))},(Re=hn.prototype).xa=function(){},Re.wa=function(){},Re.va=function(){},Re.ua=function(){},Re.Ra=function(){},cr.prototype.g=function(i,e){return new ur(i,e)},Ot(ur,Gi),ur.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;rs(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=rn(i,null,i.V),ze(i)},ur.prototype.close=function(){ce(this.g)},ur.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Si(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&ze(e)},ur.prototype.M=function(){this.g.l=null,delete this.j,ce(this.g),delete this.g,ur.X.M.call(this)},Ot(Wt,Di),Ot(hr,ws),Ot(tr,hn),tr.prototype.xa=function(){li(this.g,"a")},tr.prototype.wa=function(i){li(this.g,new Wt(i))},tr.prototype.va=function(i){li(this.g,new hr)},tr.prototype.ua=function(){li(this.g,"b")},cr.prototype.createWebChannel=cr.prototype.g,ur.prototype.send=ur.prototype.u,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,vn.COMPLETE="complete",Qr.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",Gi.prototype.listen=Gi.prototype.N,jn.prototype.listenOnce=jn.prototype.O,jn.prototype.getLastError=jn.prototype.Oa,jn.prototype.getLastErrorCode=jn.prototype.Ea,jn.prototype.getStatus=jn.prototype.aa,jn.prototype.getResponseJson=jn.prototype.Sa,jn.prototype.getResponseText=jn.prototype.fa,jn.prototype.send=jn.prototype.da,jn.prototype.setWithCredentials=jn.prototype.Ka;var gi=Bt.createWebChannelTransport=function(){return new cr},xi=Bt.getStatEventTarget=function(){return Pi()},Zs=Bt.ErrorCode=At,ia=Bt.EventType=vn,po=Bt.Event=bs,Z=Bt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},C=Bt.FetchXmlHttpFactory=K,T=Bt.WebChannel=Qr,F=Bt.XhrIo=jn;const le="@firebase/firestore";class Ce{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ce.UNAUTHENTICATED=new Ce(null),Ce.GOOGLE_CREDENTIALS=new Ce("google-credentials-uid"),Ce.FIRST_PARTY=new Ce("first-party-uid"),Ce.MOCK_USER=new Ce("mock-user");let Ze="9.15.0";const Ke=new on.Yd("@firebase/firestore");function Tt(){return Ke.logLevel}function Pt(i,...e){if(Ke.logLevel<=on.in.DEBUG){const t=e.map(mi);Ke.debug(`Firestore (${Ze}): ${i}`,...t)}}function rr(i,...e){if(Ke.logLevel<=on.in.ERROR){const t=e.map(mi);Ke.error(`Firestore (${Ze}): ${i}`,...t)}}function Cr(i,...e){if(Ke.logLevel<=on.in.WARN){const t=e.map(mi);Ke.warn(`Firestore (${Ze}): ${i}`,...t)}}function mi(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function In(i="Unexpected state"){const e=`FIRESTORE (${Ze}) INTERNAL ASSERTION FAILED: `+i;throw rr(e),new Error(e)}function Bn(i,e){i||In()}function Gn(i,e){return i}const jt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Cn extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Uo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ce.UNAUTHENTICATED))}shutdown(){}}class O{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class M{constructor(e){this.t=e,this.currentUser=Ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const m=se=>this.i!==u?(u=this.i,t(se)):Promise.resolve();let E=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new Qi,e.enqueueRetryable(()=>m(this.currentUser))};const R=()=>{const se=E;e.enqueueRetryable((0,xe.Z)(function*(){yield se.promise,yield m(s.currentUser)}))},X=se=>{Pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=se,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(se=>X(se)),setTimeout(()=>{if(!this.auth){const se=this.t.getImmediate({optional:!0});se?X(se):(Pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new Qi)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Bn("string"==typeof s.accessToken),new bo(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Bn(null===e||"string"==typeof e),new Ce(e)}}class S{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u,this.type="FirstParty",this.user=Ce.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Bn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class W{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u}getToken(){return Promise.resolve(new S(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ne{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _e{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=m=>{null!=m.error&&Pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const E=m.token!==this.A;return this.A=m.token,Pt("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>s(m))};const u=m=>{Pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>u(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?u(m):Pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Bn("string"==typeof t.token),this.A=t.token,new ne(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ot(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class pn{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=ot(40);for(let m=0;m<u.length;++m)s.length<20&&u[m]<t&&(s+=e.charAt(u[m]%e.length))}return s}}function kt(i,e){return i<e?-1:i>e?1:0}function qn(i,e,t){return i.length===e.length&&i.every((s,u)=>t(s,e[u]))}function On(i){return i+"\0"}class ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Cn(jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Cn(jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Cn(jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Cn(jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ar.fromMillis(Date.now())}static fromDate(e){return ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new ar(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vn(e)}static min(){return new Vn(new ar(0,0))}static max(){return new Vn(new ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ls{constructor(e,t,s){void 0===t?t=0:t>e.length&&In(),void 0===s?s=e.length-t:s>e.length-t&&In(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Ls.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ls?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const m=e.get(u),E=t.get(u);if(m<E)return-1;if(m>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pr extends Ls{construct(e,t,s){return new Pr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Cn(jt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new Pr(t)}static emptyPath(){return new Pr([])}}const Do=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yi extends Ls{construct(e,t,s){return new yi(e,t,s)}static isValidIdentifier(e){return Do.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yi(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const m=()=>{if(0===s.length)throw new Cn(jt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let E=!1;for(;u<e.length;){const R=e[u];if("\\"===R){if(u+1===e.length)throw new Cn(jt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[u+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new Cn(jt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=X,u+=2}else"`"===R?(E=!E,u++):"."!==R||E?(s+=R,u++):(m(),u++)}if(m(),E)throw new Cn(jt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yi(t)}static emptyPath(){return new yi([])}}class ir{constructor(e){this.path=e}static fromPath(e){return new ir(Pr.fromString(e))}static fromName(e){return new ir(Pr.fromString(e).popFirst(5))}static empty(){return new ir(Pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ir(new Pr(e.slice()))}}class Oo{constructor(e,t,s,u){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=u}}function Ys(i){return i.fields.find(e=>2===e.kind)}function Vs(i){return i.fields.filter(e=>2!==e.kind)}Oo.UNKNOWN_ID=-1;class da{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ll{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ll(0,sa.min())}}function yu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=Vn.fromTimestamp(1e9===s?new ar(t+1,0):new ar(t,s));return new sa(u,ir.empty(),e)}function uo(i){return new sa(i.readTime,i.key,-1)}class sa{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new sa(Vn.min(),ir.empty(),-1)}static max(){return new sa(Vn.max(),ir.empty(),-1)}}function Ta(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=ir.comparator(i.documentKey,e.documentKey),0!==t?t:kt(i.largestBatchId,e.largestBatchId))}const Ic="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function oa(i){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,xe.Z)(function*(i){if(i.code!==jt.FAILED_PRECONDITION||i.message!==Ic)throw i;Pt("LocalStore","Unexpectedly lost primary lease")}),Xl.apply(this,arguments)}class Xt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&In(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xt((s,u)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(s,u)},this.catchCallback=m=>{this.wrapFailure(t,m).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Xt?t:Xt.resolve(t)}catch(t){return Xt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Xt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Xt.reject(t)}static resolve(e){return new Xt((t,s)=>{t(e)})}static reject(e){return new Xt((t,s)=>{s(e)})}static waitFor(e){return new Xt((t,s)=>{let u=0,m=0,E=!1;e.forEach(R=>{++u,R.next(()=>{++m,E&&m===u&&t()},X=>s(X))}),E=!0,m===u&&t()})}static or(e){let t=Xt.resolve(!1);for(const s of e)t=t.next(u=>u?Xt.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,m)=>{s.push(t.call(this,u,m))}),this.waitFor(s)}static mapArray(e,t){return new Xt((s,u)=>{const m=e.length,E=new Array(m);let R=0;for(let X=0;X<m;X++){const se=X;t(e[se]).next(Se=>{E[se]=Se,++R,R===m&&s(E)},Se=>u(Se))}})}static doWhile(e,t){return new Xt((s,u)=>{const m=()=>{!0===e()?t().next(()=>{m()},u):s()};m()})}}class Xa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Qi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ia(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const u=Jo(s.target.error);this.P.reject(new Ia(e,u))}}static open(e,t,s,u){try{return new Xa(t,e.transaction(u,s))}catch(m){throw new Ia(t,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Pt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Gu(t)}}class wa{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===wa.D((0,Ht.z$)())&&rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pt("SimpleDb","Removing database:",e),la(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ht.hl)())return!1;if(wa.N())return!0;const e=(0,Ht.z$)(),t=wa.D(e),s=0<t&&t<10,u=wa.k(e),m=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,xe.Z)(function*(){return t.db||(Pt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=E=>{s(E.target.result)},m.onblocked=()=>{u(new Ia(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=E=>{const R=E.target.error;u("VersionError"===R.name?new Cn(jt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Cn(jt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Ia(e,R))},m.onupgradeneeded=E=>{Pt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.S.$(E.target.result,m.transaction,E.oldVersion,t.version).next(()=>{Pt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var m=this;return(0,xe.Z)(function*(){const E="readonly"===t;let R=0;for(;;){++R;try{m.db=yield m.F(e);const X=Xa.open(m.db,e,E?"readonly":"readwrite",s),se=u(X).next(Se=>(X.V(),Se)).catch(Se=>(X.abort(Se),Xt.reject(Se))).toPromise();return se.catch(()=>{}),yield X.v,se}catch(X){const se=X,Se="FirebaseError"!==se.name&&R<3;if(Pt("SimpleDb","Transaction failed with error:",se.message,"Retrying:",Se),m.close(),!Se)return Promise.reject(se)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class To{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return la(this.q.delete())}}class Ia extends Cn{constructor(e,t){super(jt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function aa(i){return"IndexedDbTransactionError"===i.name}class Gu{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Pt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Pt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),la(s)}add(e){return Pt("SimpleDb","ADD",this.store.name,e,e),la(this.store.add(e))}get(e){return la(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pt("SimpleDb","DELETE",this.store.name,e),la(this.store.delete(e))}count(){return Pt("SimpleDb","COUNT",this.store.name),la(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const u=this.cursor(s),m=[];return this.H(u,(E,R)=>{m.push(R)}).next(()=>m)}{const u=this.store.getAll(s.range);return new Xt((m,E)=>{u.onerror=R=>{E(R.target.error)},u.onsuccess=R=>{m(R.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Xt((u,m)=>{s.onerror=E=>{m(E.target.error)},s.onsuccess=E=>{u(E.target.result)}})}Y(e,t){Pt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const u=this.cursor(s);return this.H(u,(m,E,R)=>R.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.H(u,t)}tt(e){const t=this.cursor({});return new Xt((s,u)=>{t.onerror=m=>{const E=Jo(m.target.error);u(E)},t.onsuccess=m=>{const E=m.target.result;E?e(E.primaryKey,E.value).next(R=>{R?E.continue():s()}):s()}})}H(e,t){const s=[];return new Xt((u,m)=>{e.onerror=E=>{m(E.target.error)},e.onsuccess=E=>{const R=E.target.result;if(!R)return void u();const X=new To(R),se=t(R.primaryKey,R.value,X);if(se instanceof Xt){const Se=se.catch(st=>(X.done(),Xt.reject(st)));s.push(Se)}X.isDone?u():null===X.G?R.continue():R.continue(X.G)}}).next(()=>Xt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function la(i){return new Xt((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=Jo(s.target.error);t(u)}})}let Ao=!1;function Jo(i){const e=wa.D((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new Cn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ao||(Ao=!0,setTimeout(()=>{throw s},0)),s}}return i}class Jl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Pt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,xe.Z)(function*(){t.task=null;try{Pt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){aa(s)?Pt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield oa(s)}yield t.nt(6e4)}))}}class _u{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,xe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let u=t,m=!0;return Xt.doWhile(()=>!0===m&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!s.has(E))return Pt("IndexBackiller",`Processing collection: ${E}`),this.rt(e,E,u).next(R=>{u-=R,s.add(E)});m=!1})).next(()=>t-u)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,s).next(m=>{const E=m.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.ot(u,m)).next(R=>(Pt("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>E.size)}))}ot(e,t){let s=e;return t.changes.forEach((u,m)=>{const E=uo(m);Ta(E,s)>0&&(s=E)}),new sa(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let go=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=u=>this.ut(u),this.ct=u=>s.writeSequenceNumber(u))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class dl{constructor(e,t,s,u,m,E,R,X){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=m,this.forceLongPolling=E,this.autoDetectLongPolling=R,this.useFetchStreams=X}}class ea{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ea("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}function Dl(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function $a(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function vu(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ha(i){return null==i}function mo(i){return 0===i&&1/i==-1/0}function Ja(i){return"number"==typeof i&&Number.isInteger(i)&&!mo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class oo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oo(t)}static fromUint8Array(e){const t=function(s){let u="";for(let m=0;m<s.length;++m)u+=String.fromCharCode(s[m]);return u}(e);return new oo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oo.EMPTY_BYTE_STRING=new oo("");const Ha=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ga(i){if(Bn(!!i),"string"==typeof i){let e=0;const t=Ha.exec(i);if(Bn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:eo(i.seconds),nanos:eo(i.nanos)}}function eo(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function el(i){return"string"==typeof i?oo.fromBase64String(i):oo.fromUint8Array(i)}function Vl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tl(i){const e=i.mapValue.fields.__previous_value__;return Vl(e)?tl(e):e}function Sa(i){const e=Ga(i.mapValue.fields.__local_write_time__.timestampValue);return new ar(e.seconds,e.nanos)}const ta={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hl={nullValue:"NULL_VALUE"};function nl(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Vl(i)?4:Mt(i)?9007199254740991:10:In()}function ao(i,e){if(i===e)return!0;const t=nl(i);if(t!==nl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Sa(i).isEqual(Sa(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const m=Ga(s.timestampValue),E=Ga(u.timestampValue);return m.seconds===E.seconds&&m.nanos===E.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,el(i.bytesValue).isEqual(el(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,u){return eo(s.geoPointValue.latitude)===eo(u.geoPointValue.latitude)&&eo(s.geoPointValue.longitude)===eo(u.geoPointValue.longitude)}(i,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return eo(s.integerValue)===eo(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const m=eo(s.doubleValue),E=eo(u.doubleValue);return m===E?mo(m)===mo(E):isNaN(m)&&isNaN(E)}return!1}(i,e);case 9:return qn(i.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(s,u){const m=s.mapValue.fields||{},E=u.mapValue.fields||{};if(Dl(m)!==Dl(E))return!1;for(const R in m)if(m.hasOwnProperty(R)&&(void 0===E[R]||!ao(m[R],E[R])))return!1;return!0}(i,e);default:return In()}var u}function za(i,e){return void 0!==(i.values||[]).find(t=>ao(t,e))}function wo(i,e){if(i===e)return 0;const t=nl(i),s=nl(e);if(t!==s)return kt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(i.booleanValue,e.booleanValue);case 2:return function(u,m){const E=eo(u.integerValue||u.doubleValue),R=eo(m.integerValue||m.doubleValue);return E<R?-1:E>R?1:E===R?0:isNaN(E)?isNaN(R)?0:-1:1}(i,e);case 3:return zu(i.timestampValue,e.timestampValue);case 4:return zu(Sa(i),Sa(e));case 5:return kt(i.stringValue,e.stringValue);case 6:return function(u,m){const E=el(u),R=el(m);return E.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(u,m){const E=u.split("/"),R=m.split("/");for(let X=0;X<E.length&&X<R.length;X++){const se=kt(E[X],R[X]);if(0!==se)return se}return kt(E.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,m){const E=kt(eo(u.latitude),eo(m.latitude));return 0!==E?E:kt(eo(u.longitude),eo(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,m){const E=u.values||[],R=m.values||[];for(let X=0;X<E.length&&X<R.length;++X){const se=wo(E[X],R[X]);if(se)return se}return kt(E.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,m){if(u===ta.mapValue&&m===ta.mapValue)return 0;if(u===ta.mapValue)return 1;if(m===ta.mapValue)return-1;const E=u.fields||{},R=Object.keys(E),X=m.fields||{},se=Object.keys(X);R.sort(),se.sort();for(let Se=0;Se<R.length&&Se<se.length;++Se){const st=kt(R[Se],se[Se]);if(0!==st)return st;const qt=wo(E[R[Se]],X[se[Se]]);if(0!==qt)return qt}return kt(R.length,se.length)}(i.mapValue,e.mapValue);default:throw In()}}function zu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return kt(i,e);const t=Ga(i),s=Ga(e),u=kt(t.seconds,s.seconds);return 0!==u?u:kt(t.nanos,s.nanos)}function fl(i){return Al(i)}function Al(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=Ga(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?el(i.bytesValue).toBase64():"referenceValue"in i?ir.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let u="[",m=!0;for(const E of s.values||[])m?m=!1:u+=",",u+=Al(E);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let m="{",E=!0;for(const R of u)E?E=!1:m+=",",m+=`${R}:${Al(s.fields[R])}`;return m+"}"}(i.mapValue):In();var e}function Da(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ul(i){return!!i&&"integerValue"in i}function Na(i){return!!i&&"arrayValue"in i}function U(i){return!!i&&"nullValue"in i}function Q(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function de(i){return!!i&&"mapValue"in i}function $e(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return $a(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=$e(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$e(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Mt(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Zt(i){return"nullValue"in i?hl:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Da(ea.empty(),ir.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:In()}function $n(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Da(ea.empty(),ir.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ta:In()}function Ur(i,e){const t=wo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Kr(i,e){const t=wo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Hr{constructor(e,t){this.position=e,this.inclusive=t}}function qi(i,e,t){let s=0;for(let u=0;u<i.position.length;u++){const m=e[u],E=i.position[u];if(s=m.field.isKeyField()?ir.comparator(ir.fromName(E.referenceValue),t.key):wo(E,t.data.field(m.field)),"desc"===m.dir&&(s*=-1),0!==s)break}return s}function vi(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ao(i.position[t],e.position[t]))return!1;return!0}class Go{}class ni extends Go{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Bl(e,t,s):"array-contains"===t?new qd(e,s):"in"===t?new Eu(e,s):"not-in"===t?new Wu(e,s):"array-contains-any"===t?new dd(e,s):new ni(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ud(e,s):new cd(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wo(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.matchesComparison(wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return In()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class os extends Go{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new os(e,t)}matches(e){return Aa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Aa(i){return"and"===i.op}function Oa(i){return"or"===i.op}function xo(i){return Io(i)&&Aa(i)}function Io(i){for(const e of i.filters)if(e instanceof os)return!1;return!0}function Wa(i){if(i instanceof ni)return i.field.canonicalString()+i.op.toString()+fl(i.value);{const e=i.filters.map(t=>Wa(t)).join(",");return`${i.op}(${e})`}}function ld(i,e){return i instanceof ni?(t=i,(s=e)instanceof ni&&t.op===s.op&&t.field.isEqual(s.field)&&ao(t.value,s.value)):i instanceof os?function(t,s){return s instanceof os&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((u,m,E)=>u&&ld(m,s.filters[E]),!0)}(i,e):void In();var t,s}function xl(i,e){const t=i.filters.concat(e);return os.create(t,i.op)}function Ml(i){return i instanceof ni?`${(e=i).field.canonicalString()} ${e.op} ${fl(e.value)}`:i instanceof os?function(e){return e.op.toString()+" {"+e.getFilters().map(Ml).join(" ,")+"}"}(i):"Filter";var e}class Bl extends ni{constructor(e,t,s){super(e,t,s),this.key=ir.fromName(s.referenceValue)}matches(e){const t=ir.comparator(e.key,this.key);return this.matchesComparison(t)}}class ud extends ni{constructor(e,t){super(e,"in",t),this.keys=ka(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cd extends ni{constructor(e,t){super(e,"not-in",t),this.keys=ka(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ka(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>ir.fromName(s.referenceValue))}class qd extends ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Na(t)&&za(t.arrayValue,this.value)}}class Eu extends ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&za(this.value.arrayValue,t)}}class Wu extends ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!za(this.value.arrayValue,t)}}class dd extends ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Na(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>za(this.value.arrayValue,s))}}class Mo{constructor(e,t="asc"){this.field=e,this.dir=t}}function qu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class to{constructor(e,t){this.comparator=e,this.root=t||na.EMPTY}insert(e,t){return new to(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,na.BLACK,null,null))}remove(e){return new to(this.comparator,this.root.remove(e,this.comparator).copy(null,null,na.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cu(this.root,e,this.comparator,!0)}}class Cu{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?s(e.key,t):1,t&&u&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class na{constructor(e,t,s,u,m){this.key=e,this.value=t,this.color=null!=s?s:na.RED,this.left=null!=u?u:na.EMPTY,this.right=null!=m?m:na.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,m){return new na(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=u?u:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const m=s(e,u.key);return u=m<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===m?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return na.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return na.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,na.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,na.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw In();const e=this.left.check();if(e!==this.right.check())throw In();return e+(this.isRed()?0:1)}}na.EMPTY=null,na.RED=!0,na.BLACK=!1,na.EMPTY=new class{constructor(){this.size=0}get key(){throw In()}get value(){throw In()}get color(){throw In()}get left(){throw In()}get right(){throw In()}copy(i,e,t,s,u){return this}insert(i,e,t){return new na(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class no{constructor(e){this.comparator=e,this.data=new to(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $l(this.data.getIterator())}getIteratorFrom(e){return new $l(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(0!==this.comparator(u,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new no(this.comparator);return t.data=e,t}}class $l{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pl(i){return i.hasNext()?i.getNext():void 0}class zo{constructor(e){this.fields=e,e.sort(yi.comparator)}static empty(){return new zo([])}unionWith(e){let t=new no(yi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new zo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qn(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Bo{constructor(e){this.value=e}static empty(){return new Bo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!de(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$e(t)}setAll(e){let t=yi.emptyPath(),s={},u=[];e.forEach((E,R)=>{if(!t.isImmediateParentOf(R)){const X=this.getFieldsMap(t);this.applyChanges(X,s,u),s={},u=[],t=R.popLast()}E?s[R.lastSegment()]=$e(E):u.push(R.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,s,u)}delete(e){const t=this.field(e.popLast());de(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];de(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){$a(t,(u,m)=>e[u]=m);for(const u of s)delete e[u]}clone(){return new Bo($e(this.value))}}function Ku(i){const e=[];return $a(i.fields,(t,s)=>{const u=new yi([t]);if(de(s)){const m=Ku(s.mapValue).fields;if(0===m.length)e.push(u);else for(const E of m)e.push(u.child(E))}else e.push(u)}),new zo(e)}class Rs{constructor(e,t,s,u,m,E,R){this.key=e,this.documentType=t,this.version=s,this.readTime=u,this.createTime=m,this.data=E,this.documentState=R}static newInvalidDocument(e){return new Rs(e,0,Vn.min(),Vn.min(),Vn.min(),Bo.empty(),0)}static newFoundDocument(e,t,s,u){return new Rs(e,1,t,Vn.min(),s,u,0)}static newNoDocument(e,t){return new Rs(e,2,t,Vn.min(),Vn.min(),Bo.empty(),0)}static newUnknownDocument(e,t){return new Rs(e,3,t,Vn.min(),Vn.min(),Bo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zu{constructor(e,t=null,s=[],u=[],m=null,E=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=m,this.startAt=E,this.endAt=R,this.ft=null}}function eu(i,e=null,t=[],s=[],u=null,m=null,E=null){return new Zu(i,e,t,s,u,m,E)}function jl(i){const e=Gn(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Wa(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),ha(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>fl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>fl(s)).join(",")),e.ft=t}return e.ft}function Hl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!qu(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!ld(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!vi(i.startAt,e.startAt)&&vi(i.endAt,e.endAt)}function Yu(i){return ir.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ea(i,e){return i.filters.filter(t=>t instanceof ni&&t.field.isEqual(e))}function Gl(i,e,t){let s=hl,u=!0;for(const m of Ea(i,e)){let E=hl,R=!0;switch(m.op){case"<":case"<=":E=Zt(m.value);break;case"==":case"in":case">=":E=m.value;break;case">":E=m.value,R=!1;break;case"!=":case"not-in":E=hl}Ur({value:s,inclusive:u},{value:E,inclusive:R})<0&&(s=E,u=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=t.position[m];Ur({value:s,inclusive:u},{value:E,inclusive:t.inclusive})<0&&(s=E,u=t.inclusive);break}return{value:s,inclusive:u}}function tu(i,e,t){let s=ta,u=!0;for(const m of Ea(i,e)){let E=ta,R=!0;switch(m.op){case">=":case">":E=$n(m.value),R=!1;break;case"==":case"in":case"<=":E=m.value;break;case"<":E=m.value,R=!1;break;case"!=":case"not-in":E=ta}Kr({value:s,inclusive:u},{value:E,inclusive:R})>0&&(s=E,u=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=t.position[m];Kr({value:s,inclusive:u},{value:E,inclusive:t.inclusive})>0&&(s=E,u=t.inclusive);break}return{value:s,inclusive:u}}class gl{constructor(e,t=null,s=[],u=[],m=null,E="F",R=null,X=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=m,this.limitType=E,this.startAt=R,this.endAt=X,this.dt=null,this._t=null}}function Dc(i,e,t,s,u,m,E,R){return new gl(i,e,t,s,u,m,E,R)}function nu(i){return new gl(i)}function ru(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Qu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function iu(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ml(i){return null!==i.collectionGroup}function Ca(i){const e=Gn(i);if(null===e.dt){e.dt=[];const t=iu(e),s=Qu(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new Mo(t)),e.dt.push(new Mo(yi.keyField(),"asc"));else{let u=!1;for(const m of e.explicitOrderBy)e.dt.push(m),m.field.isKeyField()&&(u=!0);if(!u){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Mo(yi.keyField(),m))}}}return e.dt}function fa(i){const e=Gn(i);if(!e._t)if("F"===e.limitType)e._t=eu(e.path,e.collectionGroup,Ca(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of Ca(e))t.push(new Mo(m.field,"desc"===m.dir?"asc":"desc"));const s=e.endAt?new Hr(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Hr(e.startAt.position,e.startAt.inclusive):null;e._t=eu(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e._t}function bu(i,e){e.getFirstInequalityField(),iu(i);const t=i.filters.concat([e]);return new gl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function su(i,e,t){return new gl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Tu(i,e){return Hl(fa(i),fa(e))&&i.limitType===e.limitType}function Fa(i){return`${jl(fa(i))}|lt:${i.limitType}`}function Xu(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Ml(s)).join(", ")}]`),ha(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>fl(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>fl(s)).join(",")),`Target(${t})`}(fa(i))}; limitType=${i.limitType})`}function La(i,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):ir.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,s){for(const u of Ca(t))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(u,m,E){const R=qi(u,m,E);return u.inclusive?R<=0:R<0}(t.startAt,Ca(t),s)||t.endAt&&!function(u,m,E){const R=qi(u,m,E);return u.inclusive?R>=0:R>0}(t.endAt,Ca(t),s)));var t,s}function xa(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ju(i){return(e,t)=>{let s=!1;for(const u of Ca(i)){const m=wu(u,e,t);if(0!==m)return m;s=s||u.field.isKeyField()}return 0}}function wu(i,e,t){const s=i.field.isKeyField()?ir.comparator(e.key,t.key):function(u,m,E){const R=m.data.field(u),X=E.data.field(u);return null!==R&&null!==X?wo(R,X):In()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return In()}}function zl(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mo(e)?"-0":e}}function Ac(i){return{integerValue:""+i}}function xc(i,e){return Ja(e)?Ac(e):zl(i,e)}class Mc{constructor(){this._=void 0}}function Iu(i,e,t){return i instanceof Au?function(s,u){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(m.fields.__previous_value__=u),{mapValue:m}}(t,e):i instanceof yl?ec(i,e):i instanceof _l?hd(i,e):function(s,u){const m=Du(s,u),E=xu(m)+xu(s.gt);return Ul(m)&&Ul(s.gt)?Ac(E):zl(s.yt,E)}(i,e)}function Su(i,e,t){return i instanceof yl?ec(i,e):i instanceof _l?hd(i,e):t}function Du(i,e){return i instanceof Wo?Ul(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Au extends Mc{}class yl extends Mc{constructor(e){super(),this.elements=e}}function ec(i,e){const t=qa(e);for(const s of i.elements)t.some(u=>ao(u,s))||t.push(s);return{arrayValue:{values:t}}}class _l extends Mc{constructor(e){super(),this.elements=e}}function hd(i,e){let t=qa(e);for(const s of i.elements)t=t.filter(u=>!ao(u,s));return{arrayValue:{values:t}}}class Wo extends Mc{constructor(e,t){super(),this.yt=e,this.gt=t}}function xu(i){return eo(i.integerValue||i.doubleValue)}function qa(i){return Na(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ma{constructor(e,t){this.field=e,this.transform=t}}class vl{constructor(e,t){this.version=e,this.transformResults=t}}class ro{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ro}static exists(e){return new ro(void 0,e)}static updateTime(e){return new ro(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function co(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class rl{}function Kd(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new qo(i.key,ro.none()):new ou(i.key,i.data,ro.none());{const t=i.data,s=Bo.empty();let u=new no(yi.comparator);for(let m of e.fields)if(!u.has(m)){let E=t.field(m);null===E&&m.length>1&&(m=m.popLast(),E=t.field(m)),null===E?s.delete(m):s.set(m,E),u=u.add(m)}return new El(i.key,s,new zo(u.toArray()),ro.none())}}function Mu(i,e,t){i instanceof ou?function(s,u,m){const E=s.value.clone(),R=Pu(s.fieldTransforms,u,m.transformResults);E.setAll(R),u.convertToFoundDocument(m.version,E).setHasCommittedMutations()}(i,e,t):i instanceof El?function(s,u,m){if(!co(s.precondition,u))return void u.convertToUnknownDocument(m.version);const E=Pu(s.fieldTransforms,u,m.transformResults),R=u.data;R.setAll(Yd(s)),R.setAll(E),u.convertToFoundDocument(m.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ru(i,e,t,s){return i instanceof ou?function(u,m,E,R){if(!co(u.precondition,m))return E;const X=u.value.clone(),se=tc(u.fieldTransforms,R,m);return X.setAll(se),m.convertToFoundDocument(m.version,X).setHasLocalMutations(),null}(i,e,t,s):i instanceof El?function(u,m,E,R){if(!co(u.precondition,m))return E;const X=tc(u.fieldTransforms,R,m),se=m.data;return se.setAll(Yd(u)),se.setAll(X),m.convertToFoundDocument(m.version,se).setHasLocalMutations(),null===E?null:E.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(Se=>Se.field))}(i,e,t,s):(E=t,co(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):E);var m,E}function Rc(i,e){let t=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),m=Du(s.transform,u||null);null!=m&&(null===t&&(t=Bo.empty()),t.set(s.field,m))}return t||null}function Zd(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&qn(t,s,(u,m)=>function Va(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof yl&&s instanceof yl||t instanceof _l&&s instanceof _l?qn(t.elements,s.elements,ao):t instanceof Wo&&s instanceof Wo?ao(t.gt,s.gt):t instanceof Au&&s instanceof Au);var t,s}(u,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class ou extends rl{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class El extends rl{constructor(e,t,s,u,m=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Yd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Pu(i,e,t){const s=new Map;Bn(i.length===t.length);for(let u=0;u<t.length;u++){const m=i[u],E=m.transform,R=e.data.field(m.field);s.set(m.field,Su(E,R,t[u]))}return s}function tc(i,e,t){const s=new Map;for(const u of i){const m=u.transform,E=t.data.field(u.field);s.set(u.field,Iu(m,E,e))}return s}class qo extends rl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ko extends rl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nc{constructor(e){this.count=e}}var ko,ms;function ua(i){switch(i){default:return In();case jt.CANCELLED:case jt.UNKNOWN:case jt.DEADLINE_EXCEEDED:case jt.RESOURCE_EXHAUSTED:case jt.INTERNAL:case jt.UNAVAILABLE:case jt.UNAUTHENTICATED:return!1;case jt.INVALID_ARGUMENT:case jt.NOT_FOUND:case jt.ALREADY_EXISTS:case jt.PERMISSION_DENIED:case jt.FAILED_PRECONDITION:case jt.ABORTED:case jt.OUT_OF_RANGE:case jt.UNIMPLEMENTED:case jt.DATA_LOSS:return!0}}function au(i){if(void 0===i)return rr("GRPC error has no .code"),jt.UNKNOWN;switch(i){case ko.OK:return jt.OK;case ko.CANCELLED:return jt.CANCELLED;case ko.UNKNOWN:return jt.UNKNOWN;case ko.DEADLINE_EXCEEDED:return jt.DEADLINE_EXCEEDED;case ko.RESOURCE_EXHAUSTED:return jt.RESOURCE_EXHAUSTED;case ko.INTERNAL:return jt.INTERNAL;case ko.UNAVAILABLE:return jt.UNAVAILABLE;case ko.UNAUTHENTICATED:return jt.UNAUTHENTICATED;case ko.INVALID_ARGUMENT:return jt.INVALID_ARGUMENT;case ko.NOT_FOUND:return jt.NOT_FOUND;case ko.ALREADY_EXISTS:return jt.ALREADY_EXISTS;case ko.PERMISSION_DENIED:return jt.PERMISSION_DENIED;case ko.FAILED_PRECONDITION:return jt.FAILED_PRECONDITION;case ko.ABORTED:return jt.ABORTED;case ko.OUT_OF_RANGE:return jt.OUT_OF_RANGE;case ko.UNIMPLEMENTED:return jt.UNIMPLEMENTED;case ko.DATA_LOSS:return jt.DATA_LOSS;default:return In()}}(ms=ko||(ko={}))[ms.OK=0]="OK",ms[ms.CANCELLED=1]="CANCELLED",ms[ms.UNKNOWN=2]="UNKNOWN",ms[ms.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ms[ms.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ms[ms.NOT_FOUND=5]="NOT_FOUND",ms[ms.ALREADY_EXISTS=6]="ALREADY_EXISTS",ms[ms.PERMISSION_DENIED=7]="PERMISSION_DENIED",ms[ms.UNAUTHENTICATED=16]="UNAUTHENTICATED",ms[ms.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ms[ms.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ms[ms.ABORTED=10]="ABORTED",ms[ms.OUT_OF_RANGE=11]="OUT_OF_RANGE",ms[ms.UNIMPLEMENTED=12]="UNIMPLEMENTED",ms[ms.INTERNAL=13]="INTERNAL",ms[ms.UNAVAILABLE=14]="UNAVAILABLE",ms[ms.DATA_LOSS=15]="DATA_LOSS";class il{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,m]of s)if(this.equalsFn(u,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,t]],void this.innerSize++;for(let m=0;m<u.length;m++)if(this.equalsFn(u[m][0],e))return void(u[m]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){$a(this.inner,(t,s)=>{for(const[u,m]of s)e(u,m)})}isEmpty(){return vu(this.inner)}size(){return this.innerSize}}const rc=new to(ir.comparator);function pa(){return rc}const ic=new to(ir.comparator);function sc(...i){let e=ic;for(const t of i)e=e.insert(t.key,t);return e}function lu(i){let e=ic;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Cl(){return Rl()}function ga(){return Rl()}function Rl(){return new il(i=>i.toString(),(i,e)=>i.isEqual(e))}const fd=new to(ir.comparator),pd=new no(ir.comparator);function Ki(...i){let e=pd;for(const t of i)e=e.add(t);return e}const gd=new no(kt);function uu(){return gd}class Nu{constructor(e,t,s,u,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const u=new Map;return u.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Nu(Vn.min(),u,uu(),pa(),Ki())}}class Ou{constructor(e,t,s,u,m){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ou(s,t,Ki(),Ki(),Ki())}}class Ra{constructor(e,t,s,u){this.It=e,this.removedTargetIds=t,this.key=s,this.Tt=u}}class Pc{constructor(e,t){this.targetId=e,this.Et=t}}class Qd{constructor(e,t,s=oo.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class md{constructor(){this.At=0,this.Rt=ma(),this.bt=oo.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Ki(),t=Ki(),s=Ki();return this.Rt.forEach((u,m)=>{switch(m){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:In()}}),new Ou(this.bt,this.Pt,e,t,s)}xt(){this.vt=!1,this.Rt=ma()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Fh{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=pa(),this.qt=Nc(),this.Ut=new no(kt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const s=this.Wt(t);switch(e.state){case 0:this.zt(t)&&s.Dt(e.resumeToken);break;case 1:s.Mt(),s.Vt||s.xt(),s.Dt(e.resumeToken);break;case 2:s.Mt(),s.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(s.Ft(),s.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),s.Dt(e.resumeToken));break;default:In()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((s,u)=>{this.zt(u)&&t(u)})}Jt(e){const t=e.targetId,s=e.Et.count,u=this.Yt(t);if(u){const m=u.target;if(Yu(m))if(0===s){const E=new ir(m.path);this.Qt(t,E,Rs.newNoDocument(E,Vn.min()))}else Bn(1===s);else this.Xt(t)!==s&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((m,E)=>{const R=this.Yt(E);if(R){if(m.current&&Yu(R.target)){const X=new ir(R.target.path);null!==this.Lt.get(X)||this.te(E,X)||this.Qt(E,X,Rs.newNoDocument(X,e))}m.St&&(t.set(E,m.Ct()),m.xt())}});let s=Ki();this.qt.forEach((m,E)=>{let R=!0;E.forEachWhile(X=>{const se=this.Yt(X);return!se||2===se.purpose||(R=!1,!1)}),R&&(s=s.add(m))}),this.Lt.forEach((m,E)=>E.setReadTime(e));const u=new Nu(e,t,this.Ut,this.Lt,s);return this.Lt=pa(),this.qt=Nc(),this.Ut=new no(kt),u}Gt(e,t){if(!this.zt(e))return;const s=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,s),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,s){if(!this.zt(e))return;const u=this.Wt(e);this.te(e,t)?u.Nt(t,1):u.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),s&&(this.Lt=this.Lt.insert(t,s))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new md,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new no(kt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Pt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new md),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Nc(){return new to(ir.comparator)}function ma(){return new to(ir.comparator)}const yd={asc:"ASCENDING",desc:"DESCENDING"},Oc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kc={and:"AND",or:"OR"};class sl{constructor(e,t){this.databaseId=e,this.wt=t}}function ol(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fc(i,e){return i.wt?e.toBase64():e.toUint8Array()}function Lc(i,e){return ol(i,e.toTimestamp())}function Ro(i){return Bn(!!i),Vn.fromTimestamp(function(e){const t=Ga(e);return new ar(t.seconds,t.nanos)}(i))}function al(i,e){return(t=i,new Pr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ka(i){const e=Pr.fromString(i);return Bn(lt(e)),e}function ku(i,e){return al(i.databaseId,e.path)}function Pl(i,e){const t=Ka(e);if(t.get(1)!==i.databaseId.projectId)throw new Cn(jt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Cn(jt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ir(y(t))}function Vc(i,e){return al(i.databaseId,e)}function b(i){const e=Ka(i);return 4===e.length?Pr.emptyPath():y(e)}function p(i){return new Pr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function y(i){return Bn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function D(i,e,t){return{name:ku(i,e),fields:t.value.mapValue.fields}}function re(i,e,t){const s=Pl(i,e.name),u=Ro(e.updateTime),m=e.createTime?Ro(e.createTime):Vn.min(),E=new Bo({mapValue:{fields:e.fields}}),R=Rs.newFoundDocument(s,u,m,E);return t&&R.setHasCommittedMutations(),t?R.setHasCommittedMutations():R}function gn(i,e){let t;if(e instanceof ou)t={update:D(i,e.key,e.value)};else if(e instanceof qo)t={delete:ku(i,e.key)};else if(e instanceof El)t={update:D(i,e.key,e.data),updateMask:Ye(e.fieldMask)};else{if(!(e instanceof Ko))return In();t={verify:ku(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,m){const E=m.transform;if(E instanceof Au)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof yl)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof _l)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof Wo)return{fieldPath:m.field.canonicalString(),increment:E.gt};throw In()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Lc(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:In()),t;var u}function fr(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?ro.updateTime(Ro(u.updateTime)):void 0!==u.exists?ro.exists(u.exists):ro.none():ro.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(m,E){let R=null;"setToServerValue"in E?(Bn("REQUEST_TIME"===E.setToServerValue),R=new Au):"appendMissingElements"in E?R=new yl(E.appendMissingElements.values||[]):"removeAllFromArray"in E?R=new _l(E.removeAllFromArray.values||[]):"increment"in E?R=new Wo(m,E.increment):In();const X=yi.fromServerFormat(E.fieldPath);return new Ma(X,R)}(i,u)):[];var u;if(e.update){const u=Pl(i,e.update.name),m=new Bo({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new zo((e.updateMask.fieldPaths||[]).map(se=>yi.fromServerFormat(se)));return new El(u,m,E,t,s)}return new ou(u,m,t,s)}if(e.delete){const u=Pl(i,e.delete);return new qo(u,t)}if(e.verify){const u=Pl(i,e.verify);return new Ko(u,t)}return In()}function Ei(i,e){return{documents:[Vc(i,e.path)]}}function ai(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Vc(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Vc(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(X){if(0!==X.length)return Ie(os.create(X,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const m=function(X){if(0!==X.length)return X.map(se=>{return{field:H((Se=se).field),direction:d(Se.dir)};var Se})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const E=(se=e.limit,i.wt||ha(se)?se:{value:se});var se,R,X;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),t}function Zo(i){let e=b(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){Bn(1===s);const Se=t.from[0];Se.allDescendants?u=Se.collectionId:e=e.child(Se.collectionId)}let m=[];t.where&&(m=function(Se){const st=c(Se);return st instanceof os&&xo(st)?st.getFilters():[st]}(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(Se=>{return new Mo(te((st=Se).field),function(qt){switch(qt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(st.direction));var st}));let R=null;t.limit&&(R=function(Se){let st;return st="object"==typeof Se?Se.value:Se,ha(st)?null:st}(t.limit));let X=null;var Se;t.startAt&&(X=new Hr((Se=t.startAt).values||[],!!Se.before));let se=null;return t.endAt&&(se=function(Se){return new Hr(Se.values||[],!Se.before)}(t.endAt)),Dc(e,u,E,m,R,"F",X,se)}function c(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=te(e.unaryFilter.field);return ni.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=te(e.unaryFilter.field);return ni.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=te(e.unaryFilter.field);return ni.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=te(e.unaryFilter.field);return ni.create(m,"!=",{nullValue:"NULL_VALUE"});default:return In()}}(i):void 0!==i.fieldFilter?ni.create(te((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return In()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return os.create(e.compositeFilter.filters.map(t=>c(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return In()}}(e.compositeFilter.op))}(i):In();var e}function d(i){return yd[i]}function v(i){return Oc[i]}function x(i){return kc[i]}function H(i){return{fieldPath:i.canonicalString()}}function te(i){return yi.fromServerFormat(i.fieldPath)}function Ie(i){return i instanceof ni?function(e){if("=="===e.op){if(Q(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NAN"}};if(U(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Q(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NOT_NAN"}};if(U(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:H(e.field),op:v(e.op),value:e.value}}}(i):i instanceof os?function(e){const t=e.getFilters().map(s=>Ie(s));return 1===t.length?t[0]:{compositeFilter:{op:x(e.op),filters:t}}}(i):In()}function Ye(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lt(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function an(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Rn(e)),e=Tn(i.get(t),e);return Rn(e)}function Tn(i,e){let t=e;const s=i.length;for(let u=0;u<s;u++){const m=i.charAt(u);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function Rn(i){return i+"\x01\x01"}function Er(i){const e=i.length;if(Bn(e>=2),2===e)return Bn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Pr.emptyPath();const t=e-2,s=[];let u="";for(let m=0;m<e;){const E=i.indexOf("\x01",m);switch((E<0||E>t)&&In(),i.charAt(E+1)){case"\x01":const R=i.substring(m,E);let X;0===u.length?X=R:(u+=R,X=u,u=""),s.push(X);break;case"\x10":u+=i.substring(m,E),u+="\0";break;case"\x11":u+=i.substring(m,E+1);break;default:In()}m=E+2}return new Pr(s)}const ui=["userId","batchId"];function xs(i,e){return[i,an(e)]}function ca(i,e,t){return[i,an(e),t]}const Fu={},Uc=["prefixPath","collectionGroup","readTime","documentId"],Wl=["prefixPath","collectionGroup","documentId"],Lh=["collectionGroup","readTime","prefixPath","documentId"],em=["canonicalId","targetId"],g_=["targetId","path"],Vh=["path","targetId"],m_=["collectionId","parent"],tm=["indexId","uid"],nm=["uid","sequenceNumber"],rm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jf=["indexId","uid","orderedDocumentKey"],im=["userId","collectionPath","documentId"],Uh=["userId","collectionPath","largestBatchId"],Bh=["userId","collectionGroup","largestBatchId"],ep=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tp=[...ep,"documentOverlays"],np=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$h=np,Xd=[...$h,"indexConfiguration","indexState","indexEntries"];class rp extends Sc{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function ya(i,e){const t=Gn(i);return wa.M(t.se,e)}class ip{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const m=this.mutations[u];m.key.isEqual(e.key)&&Mu(m,e,s[u])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ru(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ru(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ga();return this.mutations.forEach(u=>{const m=e.get(u.key),E=m.overlayedDocument;let R=this.applyToLocalView(E,m.mutatedFields);R=t.has(u.key)?null:R;const X=Kd(E,R);null!==X&&s.set(u.key,X),E.isValidDocument()||E.convertToNoDocument(Vn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ki())}isEqual(e){return this.batchId===e.batchId&&qn(this.mutations,e.mutations,(t,s)=>Zd(t,s))&&qn(this.baseMutations,e.baseMutations,(t,s)=>Zd(t,s))}}class sp{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){Bn(e.mutations.length===s.length);let u=fd;const m=e.mutations;for(let E=0;E<m.length;E++)u=u.insert(m[E].key,s[E].version);return new sp(e,t,s,u)}}class jh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cu{constructor(e,t,s,u,m=Vn.min(),E=Vn.min(),R=oo.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=R}withSequenceNumber(e){return new cu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new cu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new cu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class op{constructor(e){this.ie=e}}function ap(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:ku(u=i.ie,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:ol(u,m.version.toTimestamp()),createTime:ol(u,m.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:oc(e.version)};else{if(!e.isUnknownDocument())return In();s.unknownDocument={path:t.path.toArray(),version:oc(e.version)}}var u,m;return s}function Hh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function oc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bc(i){const e=new ar(i.seconds,i.nanoseconds);return Vn.fromTimestamp(e)}function $c(i,e){const t=(e.baseMutations||[]).map(m=>fr(i.ie,m));for(let m=0;m<e.mutations.length-1;++m){const E=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(E.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const s=e.mutations.map(m=>fr(i.ie,m)),u=ar.fromMillis(e.localWriteTimeMs);return new ip(e.batchId,u,t,s)}function Za(i){const e=Bc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Bc(i.lastLimboFreeSnapshotVersion):Vn.min();let s;var u;return void 0!==i.query.documents?(Bn(1===(u=i.query).documents.length),s=fa(nu(b(u.documents[0])))):s=fa(Zo(i.query)),new cu(s,i.targetId,0,i.lastListenSequenceNumber,e,t,oo.fromBase64String(i.resumeToken))}function sm(i,e){const t=oc(e.snapshotVersion),s=oc(e.lastLimboFreeSnapshotVersion);let u;u=Yu(e.target)?Ei(i.ie,e.target):ai(i.ie,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Gh(i){const e=Zo({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?su(e,e.limit,"L"):e}function lp(i,e){return new jh(e.largestBatchId,fr(i.ie,e.overlayMutation))}function om(i,e){const t=e.path.lastSegment();return[i,an(e.path.popLast()),t]}function am(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:oc(s.readTime),documentKey:an(s.documentKey.path),largestBatchId:s.largestBatchId}}class y_{getBundleMetadata(e,t){return up(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:Bc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return up(e).put({bundleId:(s=t).id,createTime:oc(Ro(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return lm(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:Gh(u.bundledQuery),readTime:Bc(u.readTime)};var u})}saveNamedQuery(e,t){return lm(e).put({name:(s=t).name,readTime:oc(Ro(s.readTime)),bundledQuery:s.bundledQuery});var s}}function up(i){return ya(i,"bundles")}function lm(i){return ya(i,"namedQueries")}class zh{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new zh(e,t.uid||"")}getOverlay(e,t){return Jd(e).get(om(this.userId,t)).next(s=>s?lp(this.yt,s):null)}getOverlays(e,t){const s=Cl();return Xt.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){const u=[];return s.forEach((m,E)=>{const R=new jh(t,E);u.push(this.oe(e,R))}),Xt.waitFor(u)}removeOverlaysForBatchId(e,t,s){const u=new Set;t.forEach(E=>u.add(an(E.getCollectionPath())));const m=[];return u.forEach(E=>{const R=IDBKeyRange.bound([this.userId,E,s],[this.userId,E,s+1],!1,!0);m.push(Jd(e).Y("collectionPathOverlayIndex",R))}),Xt.waitFor(m)}getOverlaysForCollection(e,t,s){const u=Cl(),m=an(t),E=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Jd(e).W("collectionPathOverlayIndex",E).next(R=>{for(const X of R){const se=lp(this.yt,X);u.set(se.getKey(),se)}return u})}getOverlaysForCollectionGroup(e,t,s,u){const m=Cl();let E;const R=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jd(e).Z({index:"collectionGroupOverlayIndex",range:R},(X,se,Se)=>{const st=lp(this.yt,se);m.size()<u||st.largestBatchId===E?(m.set(st.getKey(),st),E=st.largestBatchId):Se.done()}).next(()=>m)}oe(e,t){return Jd(e).put(function(s,u,m){const[E,R,X]=om(u,m.mutation.key);return{userId:u,collectionPath:R,documentId:X,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:gn(s.ie,m.mutation)}}(this.yt,this.userId,t))}}function Jd(i){return ya(i,"documentOverlays")}class Ui{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(eo(e.integerValue));else if("doubleValue"in e){const s=eo(e.doubleValue);isNaN(s)?this.he(t,13):(this.he(t,15),mo(s)?t.le(0):t.le(s))}else if("timestampValue"in e){const s=e.timestampValue;this.he(t,20),"string"==typeof s?t.fe(s):(t.fe(`${s.seconds||""}`),t.le(s.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(el(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.he(t,45),t.le(s.latitude||0),t.le(s.longitude||0)}else"mapValue"in e?Mt(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):In()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const s=e.fields||{};this.he(t,55);for(const u of Object.keys(s))this.de(u,t),this.ce(s[u],t)}ye(e,t){const s=e.values||[];this.he(t,50);for(const u of s)this.ce(u,t)}me(e,t){this.he(t,37),ir.fromName(e).path.forEach(s=>{this.he(t,60),this.pe(s,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function um(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function cp(i){const e=64-function(t){let s=0;for(let u=0;u<8;++u){const m=um(255&t[u]);if(s+=m,8!==m)break}return s}(i);return Math.ceil(e/8)}Ui.Ie=new Ui;class cm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ee(s.value),s=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.be(s.value),s=t.next();this.Pe()}ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ee(s);else if(s<2048)this.Ee(960|s>>>6),this.Ee(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s);else{const u=t.codePointAt(0);this.Ee(240|u>>>18),this.Ee(128|63&u>>>12),this.Ee(128|63&u>>>6),this.Ee(128|63&u)}}this.Ae()}Ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.be(s);else if(s<2048)this.be(960|s>>>6),this.be(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.be(480|s>>>12),this.be(128|63&s>>>6),this.be(128|63&s);else{const u=t.codePointAt(0);this.be(240|u>>>18),this.be(128|63&u>>>12),this.be(128|63&u>>>6),this.be(128|63&u)}}this.Pe()}Se(e){const t=this.De(e),s=cp(t);this.Ce(1+s),this.buffer[this.position++]=255&s;for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=255&t[u]}xe(e){const t=this.De(e),s=cp(t);this.Ce(1+s),this.buffer[this.position++]=~(255&s);for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(u){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,u,!1),new Uint8Array(m.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let u=1;u<t.length;++u)t[u]^=s?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Wh{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class ql{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class _d{constructor(){this.$e=new cm,this.Be=new Wh(this.$e),this.Le=new ql(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class jc{constructor(e,t,s,u){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=u}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new jc(this.indexId,this.documentKey,this.arrayValue,s)}}function du(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=hu(i.arrayValue,e.arrayValue),0!==t?t:(t=hu(i.directionalValue,e.directionalValue),0!==t?t:ir.comparator(i.documentKey,e.documentKey)))}function hu(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class dp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const s=t;s.isInequality()?this.Qe=s:this.Ge.push(s)}}je(e){Bn(e.collectionGroup===this.collectionId);const t=Ys(e);if(void 0!==t&&!this.We(t))return!1;const s=Vs(e);let u=0,m=0;for(;u<s.length&&this.We(s[u]);++u);if(u===s.length)return!0;if(void 0!==this.Qe){const E=s[u];if(!this.ze(this.Qe,E)||!this.He(this.Ke[m++],E))return!1;++u}for(;u<s.length;++u){const E=s[u];if(m>=this.Ke.length||!this.He(this.Ke[m++],E))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hp(i){var e,t;if(Bn(i instanceof ni||i instanceof os),i instanceof ni){if(i instanceof Eu){const u=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(m=>ni.create(i.field,"==",m)))||[];return os.create(u,"or")}return i}const s=i.filters.map(u=>hp(u));return os.create(s,i.op)}function fp(i){if(0===i.getFilters().length)return[];const e=vd(hp(i));return Bn(__(e)),dm(e)||qh(e)?[e]:e.getFilters()}function dm(i){return i instanceof ni}function qh(i){return i instanceof os&&xo(i)}function __(i){return dm(i)||qh(i)||function(e){if(e instanceof os&&Oa(e)){for(const t of e.getFilters())if(!dm(t)&&!qh(t))return!1;return!0}return!1}(i)}function vd(i){if(Bn(i instanceof ni||i instanceof os),i instanceof ni)return i;if(1===i.filters.length)return vd(i.filters[0]);const e=i.filters.map(s=>vd(s));let t=os.create(e,i.op);return t=Cd(t),__(t)?t:(Bn(t instanceof os),Bn(Aa(t)),Bn(t.filters.length>1),t.filters.reduce((s,u)=>Ed(s,u)))}function Ed(i,e){let t;return Bn(i instanceof ni||i instanceof os),Bn(e instanceof ni||e instanceof os),t=i instanceof ni?e instanceof ni?os.create([i,e],"and"):Kh(i,e):e instanceof ni?Kh(e,i):function(s,u){if(Bn(s.filters.length>0&&u.filters.length>0),Aa(s)&&Aa(u))return xl(s,u.getFilters());const m=Oa(s)?s:u,E=Oa(s)?u:s,R=m.filters.map(X=>Ed(X,E));return os.create(R,"or")}(i,e),Cd(t)}function Kh(i,e){if(Aa(e))return xl(e,i.getFilters());{const t=e.filters.map(s=>Ed(i,s));return os.create(t,"or")}}function Cd(i){if(Bn(i instanceof ni||i instanceof os),i instanceof ni)return i;const e=i.getFilters();if(1===e.length)return Cd(e[0]);if(Io(i))return i;const t=e.map(u=>Cd(u)),s=[];return t.forEach(u=>{u instanceof ni?s.push(u):u instanceof os&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:os.create(s,i.op)}class pp{constructor(){this.Je=new hm}addToCollectionParentIndex(e,t){return this.Je.add(t),Xt.resolve()}getCollectionParents(e,t){return Xt.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Xt.resolve()}deleteFieldIndex(e,t){return Xt.resolve()}getDocumentsMatchingTarget(e,t){return Xt.resolve(null)}getIndexType(e,t){return Xt.resolve(0)}getFieldIndexes(e,t){return Xt.resolve([])}getNextCollectionGroupToUpdate(e){return Xt.resolve(null)}getMinOffset(e,t){return Xt.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,t){return Xt.resolve(sa.min())}updateCollectionGroup(e,t,s){return Xt.resolve()}updateIndexEntries(e,t){return Xt.resolve()}}class hm{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new no(Pr.comparator),m=!u.has(s);return this.index[t]=u.add(s),m}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new no(Pr.comparator)).toArray()}}const Zh=new Uint8Array(0);class v_{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new hm,this.Xe=new il(s=>jl(s),(s,u)=>Hl(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const m={collectionId:s,parent:an(u)};return fm(e).put(m)}return Xt.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[On(t),""],!1,!0);return fm(e).W(u).next(m=>{for(const E of m){if(E.collectionId!==t)break;s.push(Er(E.parent))}return s})}addFieldIndex(e,t){const s=th(e),u={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var E;delete u.indexId;const m=s.add(u);if(t.indexState){const E=Yh(e);return m.next(R=>{E.put(am(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const s=th(e),u=Yh(e),m=eh(e);return s.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=eh(e);let u=!0;const m=new Map;return Xt.forEach(this.Ze(t),E=>this.tn(e,E).next(R=>{u&&(u=!!R),m.set(E,R)})).next(()=>{if(u){let E=Ki();const R=[];return Xt.forEach(m,(X,se)=>{var Se;Pt("IndexedDbIndexManager",`Using index ${Se=X,`id=${Se.indexId}|cg=${Se.collectionGroup}|f=${Se.fields.map(Us=>`${Us.fieldPath}:${Us.kind}`).join(",")}`} to execute ${jl(t)}`);const st=function(Us,Qo){const Bs=Ys(Qo);if(void 0===Bs)return null;for(const zs of Ea(Us,Bs.fieldPath))switch(zs.op){case"array-contains-any":return zs.value.arrayValue.values||[];case"array-contains":return[zs.value]}return null}(se,X),qt=function(Us,Qo){const Bs=new Map;for(const zs of Vs(Qo))for(const _a of Ea(Us,zs.fieldPath))switch(_a.op){case"==":case"in":Bs.set(zs.fieldPath.canonicalString(),_a.value);break;case"not-in":case"!=":return Bs.set(zs.fieldPath.canonicalString(),_a.value),Array.from(Bs.values())}return null}(se,X),kn=function(Us,Qo){const Bs=[];let zs=!0;for(const _a of Vs(Qo)){const Ph=0===_a.kind?Gl(Us,_a.fieldPath,Us.startAt):tu(Us,_a.fieldPath,Us.startAt);Bs.push(Ph.value),zs&&(zs=Ph.inclusive)}return new Hr(Bs,zs)}(se,X),Xn=function(Us,Qo){const Bs=[];let zs=!0;for(const _a of Vs(Qo)){const Ph=0===_a.kind?tu(Us,_a.fieldPath,Us.endAt):Gl(Us,_a.fieldPath,Us.endAt);Bs.push(Ph.value),zs&&(zs=Ph.inclusive)}return new Hr(Bs,zs)}(se,X),Nr=this.en(X,se,kn),ci=this.en(X,se,Xn),_o=this.nn(X,se,qt),Fo=this.sn(X.indexId,st,Nr,kn.inclusive,ci,Xn.inclusive,_o);return Xt.forEach(Fo,Us=>s.J(Us,t.limit).next(Qo=>{Qo.forEach(Bs=>{const zs=ir.fromSegments(Bs.documentKey);E.has(zs)||(E=E.add(zs),R.push(zs))})}))}).next(()=>R)}return Xt.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:fp(os.create(e.filters,"and")).map(s=>eu(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,s,u,m,E,R){const X=(null!=t?t.length:1)*Math.max(s.length,m.length),se=X/(null!=t?t.length:1),Se=[];for(let st=0;st<X;++st){const qt=t?this.rn(t[st/se]):Zh,kn=this.on(e,qt,s[st%se],u),Xn=this.un(e,qt,m[st%se],E),Nr=R.map(ci=>this.on(e,qt,ci,!0));Se.push(...this.createRange(kn,Xn,Nr))}return Se}on(e,t,s,u){const m=new jc(e,ir.empty(),t,s);return u?m:m.Ue()}un(e,t,s,u){const m=new jc(e,ir.empty(),t,s);return u?m.Ue():m}tn(e,t){const s=new dp(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(m=>{let E=null;for(const R of m)s.je(R)&&(!E||R.fields.length>E.fields.length)&&(E=R);return E})}getIndexType(e,t){let s=2;const u=this.Ze(t);return Xt.forEach(u,m=>this.tn(e,m).next(E=>{E?0!==s&&E.fields.length<function(R){let X=new no(yi.comparator),se=!1;for(const Se of R.filters)for(const st of Se.getFlattenedFilters())st.field.isKeyField()||("array-contains"===st.op||"array-contains-any"===st.op?se=!0:X=X.add(st.field));for(const Se of R.orderBy)Se.field.isKeyField()||(X=X.add(Se.field));return X.size+(se?1:0)}(m)&&(s=1):s=0})).next(()=>null!==t.limit&&u.length>1&&2===s?1:s)}cn(e,t){const s=new _d;for(const u of Vs(e)){const m=t.data.field(u.fieldPath);if(null==m)return null;const E=s.qe(u.kind);Ui.Ie.ue(m,E)}return s.Fe()}rn(e){const t=new _d;return Ui.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const s=new _d;return Ui.Ie.ue(Da(this.databaseId,t),s.qe(function(u){const m=Vs(u);return 0===m.length?0:m[m.length-1].kind}(e))),s.Fe()}nn(e,t,s){if(null===s)return[];let u=[];u.push(new _d);let m=0;for(const E of Vs(e)){const R=s[m++];for(const X of u)if(this.hn(t,E.fieldPath)&&Na(R))u=this.ln(u,E,R);else{const se=X.qe(E.kind);Ui.Ie.ue(R,se)}}return this.fn(u)}en(e,t,s){return this.nn(e,t,s.position)}fn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Fe();return t}ln(e,t,s){const u=[...e],m=[];for(const E of s.arrayValue.values||[])for(const R of u){const X=new _d;X.seed(R.Fe()),Ui.Ie.ue(E,X.qe(t.kind)),m.push(X)}return m}hn(e,t){return!!e.filters.find(s=>s instanceof ni&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=th(e),u=Yh(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(m=>{const E=[];return Xt.forEach(m,R=>u.get([R.indexId,this.uid]).next(X=>{E.push(function(se,Se){const st=Se?new Ll(Se.sequenceNumber,new sa(Bc(Se.readTime),new ir(Er(Se.documentKey)),Se.largestBatchId)):Ll.empty(),qt=se.fields.map(([kn,Xn])=>new da(yi.fromServerFormat(kn),Xn));return new Oo(se.indexId,se.collectionGroup,qt,st)}(R,X))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,u)=>{const m=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==m?m:kt(s.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const u=th(e),m=Yh(e);return this.dn(e).next(E=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>Xt.forEach(R,X=>m.put(am(X.indexId,this.user,E,s)))))}updateIndexEntries(e,t){const s=new Map;return Xt.forEach(t,(u,m)=>{const E=s.get(u.collectionGroup);return(E?Xt.resolve(E):this.getFieldIndexes(e,u.collectionGroup)).next(R=>(s.set(u.collectionGroup,R),Xt.forEach(R,X=>this._n(e,u,X).next(se=>{const Se=this.wn(m,X);return se.isEqual(Se)?Xt.resolve():this.mn(e,m,X,se,Se)}))))})}gn(e,t,s,u){return eh(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.an(s,t.key),documentKey:t.key.path.toArray()})}yn(e,t,s,u){return eh(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.an(s,t.key),t.key.path.toArray()])}_n(e,t,s){const u=eh(e);let m=new no(du);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.an(s,t)])},(E,R)=>{m=m.add(new jc(s.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>m)}wn(e,t){let s=new no(du);const u=this.cn(t,e);if(null==u)return s;const m=Ys(t);if(null!=m){const E=e.data.field(m.fieldPath);if(Na(E))for(const R of E.arrayValue.values||[])s=s.add(new jc(t.indexId,e.key,this.rn(R),u))}else s=s.add(new jc(t.indexId,e.key,Zh,u));return s}mn(e,t,s,u,m){Pt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(R,X,se,Se,st){const qt=R.getIterator(),kn=X.getIterator();let Xn=pl(qt),Nr=pl(kn);for(;Xn||Nr;){let ci=!1,_o=!1;if(Xn&&Nr){const Fo=se(Xn,Nr);Fo<0?_o=!0:Fo>0&&(ci=!0)}else null!=Xn?_o=!0:ci=!0;ci?(Se(Nr),Nr=pl(kn)):_o?(st(Xn),Xn=pl(qt)):(Xn=pl(qt),Nr=pl(kn))}}(u,m,du,R=>{E.push(this.gn(e,t,s,R))},R=>{E.push(this.yn(e,t,s,R))}),Xt.waitFor(E)}dn(e){let t=1;return Yh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,m)=>{m.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((E,R)=>du(E,R)).filter((E,R,X)=>!R||0!==du(E,X[R-1]));const u=[];u.push(e);for(const E of s){const R=du(E,e),X=du(E,t);if(0===R)u[0]=e.Ue();else if(R>0&&X<0)u.push(E),u.push(E.Ue());else if(X>0)break}u.push(t);const m=[];for(let E=0;E<u.length;E+=2){if(this.pn(u[E],u[E+1]))return[];m.push(IDBKeyRange.bound([u[E].indexId,this.uid,u[E].arrayValue,u[E].directionalValue,Zh,[]],[u[E+1].indexId,this.uid,u[E+1].arrayValue,u[E+1].directionalValue,Zh,[]]))}return m}pn(e,t){return du(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pm)}getMinOffset(e,t){return Xt.mapArray(this.Ze(t),s=>this.tn(e,s).next(u=>u||In())).next(pm)}}function fm(i){return ya(i,"collectionParents")}function eh(i){return ya(i,"indexEntries")}function th(i){return ya(i,"indexConfiguration")}function Yh(i){return ya(i,"indexState")}function pm(i){Bn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;Ta(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new sa(e.readTime,e.documentKey,t)}const E_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ya{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Ya(e,Ya.DEFAULT_COLLECTION_PERCENTILE,Ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gp(i,e,t){const s=i.store("mutations"),u=i.store("documentMutations"),m=[],E=IDBKeyRange.only(t.batchId);let R=0;const X=s.Z({range:E},(Se,st,qt)=>(R++,qt.delete()));m.push(X.next(()=>{Bn(1===R)}));const se=[];for(const Se of t.mutations){const st=ca(e,Se.key.path,t.batchId);m.push(u.delete(st)),se.push(Se.key)}return Xt.waitFor(m).next(()=>se)}function Qh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw In();e=i.noDocument}return JSON.stringify(e).length}Ya.DEFAULT_COLLECTION_PERCENTILE=10,Ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ya.DEFAULT=new Ya(41943040,Ya.DEFAULT_COLLECTION_PERCENTILE,Ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ya.DISABLED=new Ya(-1,0,0);class bd{constructor(e,t,s,u){this.userId=e,this.yt=t,this.indexManager=s,this.referenceDelegate=u,this.In={}}static re(e,t,s,u){Bn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new bd(m,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hc(e).Z({index:"userMutationsIndex",range:s},(u,m,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const m=nh(e),E=Hc(e);return E.add({}).next(R=>{Bn("number"==typeof R);const X=new ip(R,t,s,u),se=function(qt,kn,Xn){const Nr=Xn.baseMutations.map(_o=>gn(qt.ie,_o)),ci=Xn.mutations.map(_o=>gn(qt.ie,_o));return{userId:kn,batchId:Xn.batchId,localWriteTimeMs:Xn.localWriteTime.toMillis(),baseMutations:Nr,mutations:ci}}(this.yt,this.userId,X),Se=[];let st=new no((qt,kn)=>kt(qt.canonicalString(),kn.canonicalString()));for(const qt of u){const kn=ca(this.userId,qt.key.path,R);st=st.add(qt.key.path.popLast()),Se.push(E.put(se)),Se.push(m.put(kn,Fu))}return st.forEach(qt=>{Se.push(this.indexManager.addToCollectionParentIndex(e,qt))}),e.addOnCommittedListener(()=>{this.In[R]=X.keys()}),Xt.waitFor(Se).next(()=>X)})}lookupMutationBatch(e,t){return Hc(e).get(t).next(s=>s?(Bn(s.userId===this.userId),$c(this.yt,s)):null)}Tn(e,t){return this.In[t]?Xt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let m=null;return Hc(e).Z({index:"userMutationsIndex",range:u},(E,R,X)=>{R.userId===this.userId&&(Bn(R.batchId>=s),m=$c(this.yt,R)),X.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Hc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,m,E)=>{s=m.batchId,E.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hc(e).W("userMutationsIndex",t).next(s=>s.map(u=>$c(this.yt,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=xs(this.userId,t.path),u=IDBKeyRange.lowerBound(s),m=[];return nh(e).Z({range:u},(E,R,X)=>{const[se,Se,st]=E,qt=Er(Se);if(se===this.userId&&t.path.isEqual(qt))return Hc(e).get(st).next(kn=>{if(!kn)throw In();Bn(kn.userId===this.userId),m.push($c(this.yt,kn))});X.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new no(kt);const u=[];return t.forEach(m=>{const E=xs(this.userId,m.path),R=IDBKeyRange.lowerBound(E),X=nh(e).Z({range:R},(se,Se,st)=>{const[qt,kn,Xn]=se,Nr=Er(kn);qt===this.userId&&m.path.isEqual(Nr)?s=s.add(Xn):st.done()});u.push(X)}),Xt.waitFor(u).next(()=>this.En(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,m=xs(this.userId,s),E=IDBKeyRange.lowerBound(m);let R=new no(kt);return nh(e).Z({range:E},(X,se,Se)=>{const[st,qt,kn]=X,Xn=Er(qt);st===this.userId&&s.isPrefixOf(Xn)?Xn.length===u&&(R=R.add(kn)):Se.done()}).next(()=>this.En(e,R))}En(e,t){const s=[],u=[];return t.forEach(m=>{u.push(Hc(e).get(m).next(E=>{if(null===E)throw In();Bn(E.userId===this.userId),s.push($c(this.yt,E))}))}),Xt.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return gp(e.se,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Xt.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Xt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return nh(e).Z({range:s},(m,E,R)=>{if(m[0]===this.userId){const X=Er(m[1]);u.push(X)}else R.done()}).next(()=>{Bn(0===u.length)})})}containsKey(e,t){return C_(e,this.userId,t)}Rn(e){return b_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function C_(i,e,t){const s=xs(e,t.path),u=s[1],m=IDBKeyRange.lowerBound(s);let E=!1;return nh(i).Z({range:m,X:!0},(R,X,se)=>{const[Se,st,qt]=R;Se===e&&st===u&&(E=!0),se.done()}).next(()=>E)}function Hc(i){return ya(i,"mutations")}function nh(i){return ya(i,"documentMutations")}function b_(i){return ya(i,"mutationQueues")}class Td{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Td(0)}static vn(){return new Td(-1)}}class E0{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const s=new Td(t.highestTargetId);return t.highestTargetId=s.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Vn.fromTimestamp(new ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(s=>(s.targetCount+=1,this.Cn(t,s),this.Sn(e,s))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(s=>(Bn(s.targetCount>0),s.targetCount-=1,this.Sn(e,s)))}removeTargets(e,t,s){let u=0;const m=[];return rh(e).Z((E,R)=>{const X=Za(R);X.sequenceNumber<=t&&null===s.get(X.targetId)&&(u++,m.push(this.removeTargetData(e,X)))}).next(()=>Xt.waitFor(m)).next(()=>u)}forEachTarget(e,t){return rh(e).Z((s,u)=>{const m=Za(u);t(m)})}Vn(e){return T_(e).get("targetGlobalKey").next(t=>(Bn(null!==t),t))}Sn(e,t){return T_(e).put("targetGlobalKey",t)}Dn(e,t){return rh(e).put(sm(this.yt,t))}Cn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=jl(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let m=null;return rh(e).Z({range:u,index:"queryTargetsIndex"},(E,R,X)=>{const se=Za(R);Hl(t,se.target)&&(m=se,X.done())}).next(()=>m)}addMatchingKeys(e,t,s){const u=[],m=Gc(e);return t.forEach(E=>{const R=an(E.path);u.push(m.put({targetId:s,path:R})),u.push(this.referenceDelegate.addReference(e,s,E))}),Xt.waitFor(u)}removeMatchingKeys(e,t,s){const u=Gc(e);return Xt.forEach(t,m=>{const E=an(m.path);return Xt.waitFor([u.delete([s,E]),this.referenceDelegate.removeReference(e,s,m)])})}removeMatchingKeysForTargetId(e,t){const s=Gc(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=Gc(e);let m=Ki();return u.Z({range:s,X:!0},(E,R,X)=>{const se=Er(E[1]),Se=new ir(se);m=m.add(Se)}).next(()=>m)}containsKey(e,t){const s=an(t.path),u=IDBKeyRange.bound([s],[On(s)],!1,!0);let m=0;return Gc(e).Z({index:"documentTargetsIndex",X:!0,range:u},([E,R],X,se)=>{0!==E&&(m++,se.done())}).next(()=>m>0)}ne(e,t){return rh(e).get(t).next(s=>s?Za(s):null)}}function rh(i){return ya(i,"targets")}function T_(i){return ya(i,"targetGlobal")}function Gc(i){return ya(i,"targetDocuments")}function w_([i,e],[t,s]){const u=kt(i,t);return 0===u?kt(e,s):u}class ac{constructor(e){this.xn=e,this.buffer=new no(w_),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();w_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mp{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Pt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,xe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){aa(s)?Pt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield oa(s)}yield t.Fn(3e5)}))}}class I_{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Xt.resolve(go.at);const s=new ac(t);return this.$n.forEachTarget(e,u=>s.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>s.On(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.$n.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pt("LruGarbageCollector","Garbage collection skipped; disabled"),Xt.resolve(E_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E_):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let s,u,m,E,R,X,se;const Se=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(st=>(st>this.params.maximumSequenceNumbersToCollect?(Pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${st}`),u=this.params.maximumSequenceNumbersToCollect):u=st,E=Date.now(),this.nthSequenceNumber(e,u))).next(st=>(s=st,R=Date.now(),this.removeTargets(e,s,t))).next(st=>(m=st,X=Date.now(),this.removeOrphanedDocuments(e,s))).next(st=>(se=Date.now(),Tt()<=on.in.DEBUG&&Pt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-Se}ms\n\tDetermined least recently used ${u} in `+(R-E)+`ms\n\tRemoved ${m} targets in `+(X-R)+`ms\n\tRemoved ${st} documents in `+(se-X)+`ms\nTotal Duration: ${se-Se}ms`),Xt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:m,documentsRemoved:st})))}}class gm{constructor(e,t){this.db=e,this.garbageCollector=new I_(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Un(e){let t=0;return this.Ln(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(s,u)=>t(u))}addReference(e,t,s){return wd(e,s)}removeReference(e,t,s){return wd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return wd(e,t)}Gn(e,t){return function(s,u){let m=!1;return b_(s).tt(E=>C_(s,E,u).next(R=>(R&&(m=!0),Xt.resolve(!R)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let m=0;return this.Kn(e,(E,R)=>{if(R<=t){const X=this.Gn(e,E).next(se=>{if(!se)return m++,s.getEntry(e,E).next(()=>(s.removeEntry(E,Vn.min()),Gc(e).delete([0,an(E.path)])))});u.push(X)}}).next(()=>Xt.waitFor(u)).next(()=>s.apply(e)).next(()=>m)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return wd(e,t)}Kn(e,t){const s=Gc(e);let u,m=go.at;return s.Z({index:"documentTargetsIndex"},([E,R],{path:X,sequenceNumber:se})=>{0===E?(m!==go.at&&t(new ir(Er(u)),m),m=se,u=X):m=go.at}).next(()=>{m!==go.at&&t(new ir(Er(u)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wd(i,e){return Gc(i).put((s=i.currentSequenceNumber,{targetId:0,path:an(e.path),sequenceNumber:s}));var s}class yp{constructor(){this.changes=new il(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Xt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _p{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return zc(e).put(s)}removeEntry(e,t,s){return zc(e).delete(function(u,m){const E=u.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],Hh(m),E[E.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Qn(e,s)))}getEntry(e,t){let s=Rs.newInvalidDocument(t);return zc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Wc(t))},(u,m)=>{s=this.jn(t,m)}).next(()=>s)}Wn(e,t){let s={size:0,document:Rs.newInvalidDocument(t)};return zc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Wc(t))},(u,m)=>{s={document:this.jn(t,m),size:Qh(m)}}).next(()=>s)}getEntries(e,t){let s=pa();return this.zn(e,t,(u,m)=>{const E=this.jn(u,m);s=s.insert(u,E)}).next(()=>s)}Hn(e,t){let s=pa(),u=new to(ir.comparator);return this.zn(e,t,(m,E)=>{const R=this.jn(m,E);s=s.insert(m,R),u=u.insert(m,Qh(E))}).next(()=>({documents:s,Jn:u}))}zn(e,t,s){if(t.isEmpty())return Xt.resolve();let u=new no(Ep);t.forEach(X=>u=u.add(X));const m=IDBKeyRange.bound(Wc(u.first()),Wc(u.last())),E=u.getIterator();let R=E.getNext();return zc(e).Z({index:"documentKeyIndex",range:m},(X,se,Se)=>{const st=ir.fromSegments([...se.prefixPath,se.collectionGroup,se.documentId]);for(;R&&Ep(R,st)<0;)s(R,null),R=E.getNext();R&&R.isEqual(st)&&(s(R,se),R=E.hasNext()?E.getNext():null),R?Se.j(Wc(R)):Se.done()}).next(()=>{for(;R;)s(R,null),R=E.hasNext()?E.getNext():null})}getAllFromCollection(e,t,s){const u=[t.popLast().toArray(),t.lastSegment(),Hh(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zc(e).W(IDBKeyRange.bound(u,m,!0)).next(E=>{let R=pa();for(const X of E){const se=this.jn(ir.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);R=R.insert(se.key,se)}return R})}getAllFromCollectionGroup(e,t,s,u){let m=pa();const E=ym(t,s),R=ym(t,sa.max());return zc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,R,!0)},(X,se,Se)=>{const st=this.jn(ir.fromSegments(se.prefixPath.concat(se.collectionGroup,se.documentId)),se);m=m.insert(st.key,st),m.size===u&&Se.done()}).next(()=>m)}newChangeBuffer(e){return new lc(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vp(e).get("remoteDocumentGlobalKey").next(t=>(Bn(!!t),t))}Qn(e,t){return vp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const s=function v0(i,e){let t;if(e.document)t=re(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=ir.fromSegments(e.noDocument.path),u=Bc(e.noDocument.readTime);t=Rs.newNoDocument(s,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return In();{const s=ir.fromSegments(e.unknownDocument.path),u=Bc(e.unknownDocument.version);t=Rs.newUnknownDocument(s,u)}}return e.readTime&&t.setReadTime(function(s){const u=new ar(s[0],s[1]);return Vn.fromTimestamp(u)}(e.readTime)),t}(this.yt,t);if(!s.isNoDocument()||!s.version.isEqual(Vn.min()))return s}return Rs.newInvalidDocument(e)}}function mm(i){return new _p(i)}class lc extends yp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new il(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new no((m,E)=>kt(m.canonicalString(),E.canonicalString()));return this.changes.forEach((m,E)=>{const R=this.Xn.get(m);if(t.push(this.Yn.removeEntry(e,m,R.readTime)),E.isValidDocument()){const X=ap(this.Yn.yt,E);u=u.add(m.path.popLast()),s+=Qh(X)-R.size,t.push(this.Yn.addEntry(e,m,X))}else if(s-=R.size,this.trackRemovals){const X=ap(this.Yn.yt,E.convertToNoDocument(Vn.min()));t.push(this.Yn.addEntry(e,m,X))}}),u.forEach(m=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Yn.updateMetadata(e,s)),Xt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(s=>(this.Xn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:s,Jn:u})=>(u.forEach((m,E)=>{this.Xn.set(m,{size:E,readTime:s.get(m).readTime})}),s))}}function vp(i){return ya(i,"remoteDocumentGlobal")}function zc(i){return ya(i,"remoteDocumentsV14")}function Wc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ym(i,e){const t=e.documentKey.path.toArray();return[i,Hh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ep(i,e){const t=i.path.toArray(),s=e.path.toArray();let u=0;for(let m=0;m<t.length-2&&m<s.length-2;++m)if(u=kt(t[m],s[m]),u)return u;return u=kt(t.length,s.length),u||(u=kt(t[t.length-2],s[s.length-2]),u||kt(t[t.length-1],s[s.length-1]))}class S_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _m{constructor(e,t,s,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(null!==s&&Ru(s.mutation,u,zo.empty(),ar.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ki()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ki()){const u=Cl();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,s).next(m=>{let E=sc();return m.forEach((R,X)=>{E=E.insert(R,X.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const s=Cl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ki()))}populateOverlays(e,t,s){const u=[];return s.forEach(m=>{t.has(m)||u.push(m)}),this.documentOverlayCache.getOverlays(e,u).next(m=>{m.forEach((E,R)=>{t.set(E,R)})})}computeViews(e,t,s,u){let m=pa();const E=Rl(),R=Rl();return t.forEach((X,se)=>{const Se=s.get(se.key);u.has(se.key)&&(void 0===Se||Se.mutation instanceof El)?m=m.insert(se.key,se):void 0!==Se&&(E.set(se.key,Se.mutation.getFieldMask()),Ru(Se.mutation,se,Se.mutation.getFieldMask(),ar.now()))}),this.recalculateAndSaveOverlays(e,m).next(X=>(X.forEach((se,Se)=>E.set(se,Se)),t.forEach((se,Se)=>{var st;return R.set(se,new S_(Se,null!==(st=E.get(se))&&void 0!==st?st:null))}),R))}recalculateAndSaveOverlays(e,t){const s=Rl();let u=new to((E,R)=>E-R),m=Ki();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const R of E)R.keys().forEach(X=>{const se=t.get(X);if(null===se)return;let Se=s.get(X)||zo.empty();Se=R.applyToLocalView(se,Se),s.set(X,Se);const st=(u.get(R.batchId)||Ki()).add(X);u=u.insert(R.batchId,st)})}).next(()=>{const E=[],R=u.getReverseIterator();for(;R.hasNext();){const X=R.getNext(),se=X.key,Se=X.value,st=ga();Se.forEach(qt=>{if(!m.has(qt)){const kn=Kd(t.get(qt),s.get(qt));null!==kn&&st.set(qt,kn),m=m.add(qt)}}),E.push(this.documentOverlayCache.saveOverlays(e,se,st))}return Xt.waitFor(E)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return ir.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ml(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var u}getNextDocuments(e,t,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,u).next(m=>{const E=u-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,u-m.size):Xt.resolve(Cl());let R=-1,X=m;return E.next(se=>Xt.forEach(se,(Se,st)=>(R<st.largestBatchId&&(R=st.largestBatchId),m.get(Se)?Xt.resolve():this.remoteDocumentCache.getEntry(e,Se).next(qt=>{X=X.insert(Se,qt)}))).next(()=>this.populateOverlays(e,se,m)).next(()=>this.computeViews(e,X,se,Ki())).next(Se=>({batchId:R,changes:lu(Se)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ir(t)).next(s=>{let u=sc();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const u=t.collectionGroup;let m=sc();return this.indexManager.getCollectionParents(e,u).next(E=>Xt.forEach(E,R=>{const X=(se=t,Se=R.child(u),new gl(Se,null,se.explicitOrderBy.slice(),se.filters.slice(),se.limit,se.limitType,se.startAt,se.endAt));var se,Se;return this.getDocumentsMatchingCollectionQuery(e,X,s).next(se=>{se.forEach((Se,st)=>{m=m.insert(Se,st)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,s){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(m=>(u=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(m=>{m.forEach((R,X)=>{const se=X.getKey();null===u.get(se)&&(u=u.insert(se,Rs.newInvalidDocument(se)))});let E=sc();return u.forEach((R,X)=>{const se=m.get(R);void 0!==se&&Ru(se.mutation,X,zo.empty(),ar.now()),La(t,X)&&(E=E.insert(R,X))}),E})}}class ih{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Xt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:Ro(s.createTime)}),Xt.resolve()}getNamedQuery(e,t){return Xt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(s=t).name,query:Gh(s.bundledQuery),readTime:Ro(s.readTime)}),Xt.resolve();var s}}class Id{constructor(){this.overlays=new to(ir.comparator),this.es=new Map}getOverlay(e,t){return Xt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Cl();return Xt.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((u,m)=>{this.oe(e,t,m)}),Xt.resolve()}removeOverlaysForBatchId(e,t,s){const u=this.es.get(s);return void 0!==u&&(u.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(s)),Xt.resolve()}getOverlaysForCollection(e,t,s){const u=Cl(),m=t.length+1,E=new ir(t.child("")),R=this.overlays.getIteratorFrom(E);for(;R.hasNext();){const X=R.getNext().value,se=X.getKey();if(!t.isPrefixOf(se.path))break;se.path.length===m&&X.largestBatchId>s&&u.set(X.getKey(),X)}return Xt.resolve(u)}getOverlaysForCollectionGroup(e,t,s,u){let m=new to((se,Se)=>se-Se);const E=this.overlays.getIterator();for(;E.hasNext();){const se=E.getNext().value;if(se.getKey().getCollectionGroup()===t&&se.largestBatchId>s){let Se=m.get(se.largestBatchId);null===Se&&(Se=Cl(),m=m.insert(se.largestBatchId,Se)),Se.set(se.getKey(),se)}}const R=Cl(),X=m.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((se,Se)=>R.set(se,Se)),!(R.size()>=u)););return Xt.resolve(R)}oe(e,t,s){const u=this.overlays.get(s.key);if(null!==u){const E=this.es.get(u.largestBatchId).delete(s.key);this.es.set(u.largestBatchId,E)}this.overlays=this.overlays.insert(s.key,new jh(t,s));let m=this.es.get(t);void 0===m&&(m=Ki(),this.es.set(t,m)),this.es.set(t,m.add(s.key))}}class sh{constructor(){this.ns=new no($o.ss),this.rs=new no($o.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const s=new $o(e,t);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.cs(new $o(e,t))}hs(e,t){e.forEach(s=>this.removeReference(s,t))}ls(e){const t=new ir(new Pr([])),s=new $o(t,e),u=new $o(t,e+1),m=[];return this.rs.forEachInRange([s,u],E=>{this.cs(E),m.push(E.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ir(new Pr([])),s=new $o(t,e),u=new $o(t,e+1);let m=Ki();return this.rs.forEachInRange([s,u],E=>{m=m.add(E.key)}),m}containsKey(e){const t=new $o(e,0),s=this.ns.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class $o{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ir.comparator(e.key,t.key)||kt(e._s,t._s)}static os(e,t){return kt(e._s,t._s)||ir.comparator(e.key,t.key)}}class oh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new no($o.ss)}checkEmpty(e){return Xt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,u){const m=this.ws;this.ws++;const E=new ip(m,t,s,u);this.mutationQueue.push(E);for(const R of u)this.gs=this.gs.add(new $o(R.key,m)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return Xt.resolve(E)}lookupMutationBatch(e,t){return Xt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),m=u<0?0:u;return Xt.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Xt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new $o(t,0),u=new $o(t,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([s,u],E=>{const R=this.ys(E._s);m.push(R)}),Xt.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new no(kt);return t.forEach(u=>{const m=new $o(u,0),E=new $o(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,E],R=>{s=s.add(R._s)})}),Xt.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let m=s;ir.isDocumentKey(m)||(m=m.child(""));const E=new $o(new ir(m),0);let R=new no(kt);return this.gs.forEachWhile(X=>{const se=X.key.path;return!!s.isPrefixOf(se)&&(se.length===u&&(R=R.add(X._s)),!0)},E),Xt.resolve(this.Is(R))}Is(e){const t=[];return e.forEach(s=>{const u=this.ys(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){Bn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let s=this.gs;return Xt.forEach(t.mutations,u=>{const m=new $o(u.key,t.batchId);return s=s.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,t){const s=new $o(t,0),u=this.gs.firstAfterOrEqual(s);return Xt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return Xt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sd{constructor(e){this.Es=e,this.docs=new to(ir.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,u=this.docs.get(s),m=u?u.size:0,E=this.Es(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:E}),this.size+=E-m,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Xt.resolve(s?s.document.mutableCopy():Rs.newInvalidDocument(t))}getEntries(e,t){let s=pa();return t.forEach(u=>{const m=this.docs.get(u);s=s.insert(u,m?m.document.mutableCopy():Rs.newInvalidDocument(u))}),Xt.resolve(s)}getAllFromCollection(e,t,s){let u=pa();const m=new ir(t.child("")),E=this.docs.getIteratorFrom(m);for(;E.hasNext();){const{key:R,value:{document:X}}=E.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||Ta(uo(X),s)<=0||(u=u.insert(X.key,X.mutableCopy()))}return Xt.resolve(u)}getAllFromCollectionGroup(e,t,s,u){In()}As(e,t){return Xt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new D_(this)}getSize(e){return Xt.resolve(this.size)}}class D_ extends yp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(s)}),Xt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class vm{constructor(e){this.persistence=e,this.Rs=new il(t=>jl(t),Hl),this.lastRemoteSnapshotVersion=Vn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new sh,this.targetCount=0,this.vs=Td.Pn()}forEachTarget(e,t){return this.Rs.forEach((s,u)=>t(u)),Xt.resolve()}getLastRemoteSnapshotVersion(e){return Xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Xt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),Xt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Td(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Xt.resolve()}updateTargetData(e,t){return this.Dn(t),Xt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Xt.resolve()}removeTargets(e,t,s){let u=0;const m=[];return this.Rs.forEach((E,R)=>{R.sequenceNumber<=t&&null===s.get(R.targetId)&&(this.Rs.delete(E),m.push(this.removeMatchingKeysForTargetId(e,R.targetId)),u++)}),Xt.waitFor(m).next(()=>u)}getTargetCount(e){return Xt.resolve(this.targetCount)}getTargetData(e,t){const s=this.Rs.get(t)||null;return Xt.resolve(s)}addMatchingKeys(e,t,s){return this.Ps.us(t,s),Xt.resolve()}removeMatchingKeys(e,t,s){this.Ps.hs(t,s);const u=this.persistence.referenceDelegate,m=[];return u&&t.forEach(E=>{m.push(u.markPotentiallyOrphaned(e,E))}),Xt.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Xt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ps.ds(t);return Xt.resolve(s)}containsKey(e,t){return Xt.resolve(this.Ps.containsKey(t))}}class Cp{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new go(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new vm(this),this.indexManager=new pp,this.remoteDocumentCache=new Sd(s=>this.referenceDelegate.xs(s)),this.yt=new op(t),this.Ns=new ih(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Id,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Vs[e.toKey()];return s||(s=new oh(t,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,s){Pt("MemoryPersistence","Starting transaction:",e);const u=new bp(this.Ss.next());return this.referenceDelegate.ks(),s(u).next(m=>this.referenceDelegate.Os(u).next(()=>m)).toPromise().then(m=>(u.raiseOnCommittedEvent(),m))}Ms(e,t){return Xt.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,t)))}}class bp extends Sc{constructor(e){super(),this.currentSequenceNumber=e}}class Dd{constructor(e){this.persistence=e,this.Fs=new sh,this.$s=null}static Bs(e){return new Dd(e)}get Ls(){if(this.$s)return this.$s;throw In()}addReference(e,t,s){return this.Fs.addReference(s,t),this.Ls.delete(s.toString()),Xt.resolve()}removeReference(e,t,s){return this.Fs.removeReference(s,t),this.Ls.add(s.toString()),Xt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Xt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(m=>this.Ls.add(m.toString()))}).next(()=>s.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xt.forEach(this.Ls,s=>{const u=ir.fromPath(s);return this.qs(e,u).next(m=>{m||t.removeEntry(u,Vn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(s=>{s?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Xt.or([()=>Xt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Em{constructor(e){this.yt=e}$(e,t,s,u){const m=new Xa("createOrUpgrade",t);var R;s<1&&u>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ui,{unique:!0}),R.createObjectStore("documentMutations"),ah(e),function(R){R.createObjectStore("remoteDocuments")}(e));let E=Xt.resolve();return s<3&&u>=3&&(0!==s&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),ah(e)),E=E.next(()=>function(R){const X=R.store("targetGlobal"),se={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vn.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",se)}(m))),s<4&&u>=4&&(0!==s&&(E=E.next(()=>function(R,X){return X.store("mutations").W().next(se=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ui,{unique:!0});const Se=X.store("mutations"),st=se.map(qt=>Se.put(qt));return Xt.waitFor(st)})}(e,m))),E=E.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(E=E.next(()=>this.Us(m))),s<6&&u>=6&&(E=E.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),s<7&&u>=7&&(E=E.next(()=>this.Gs(m))),s<8&&u>=8&&(E=E.next(()=>this.Qs(e,m))),s<9&&u>=9&&(E=E.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(E=E.next(()=>this.js(m))),s<11&&u>=11&&(E=E.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(E=E.next(()=>{!function(R){const X=R.createObjectStore("documentOverlays",{keyPath:im});X.createIndex("collectionPathOverlayIndex",Uh,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",Bh,{unique:!1})}(e)})),s<13&&u>=13&&(E=E.next(()=>function(R){const X=R.createObjectStore("remoteDocumentsV14",{keyPath:Uc});X.createIndex("documentKeyIndex",Wl),X.createIndex("collectionGroupIndex",Lh)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(E=E.next(()=>this.zs(e,m))),s<15&&u>=15&&(E=E.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:tm}).createIndex("sequenceNumberIndex",nm,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:rm}).createIndex("documentKeyIndex",Jf,{unique:!1})}(e))),E}Ks(e){let t=0;return e.store("remoteDocuments").Z((s,u)=>{t+=Qh(u)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Us(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(u=>Xt.forEach(u,m=>{const E=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",E).next(R=>Xt.forEach(R,X=>{Bn(X.userId===m.userId);const se=$c(this.yt,X);return gp(e,m.userId,se).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const m=[];return s.Z((E,R)=>{const X=new Pr(E),se=[0,an(X)];m.push(t.get(se).next(Se=>Se?Xt.resolve():t.put({targetId:0,path:an(X),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Xt.waitFor(m))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:m_});const s=t.store("collectionParents"),u=new hm,m=E=>{if(u.add(E)){const R=E.lastSegment(),X=E.popLast();return s.put({collectionId:R,parent:an(X)})}};return t.store("remoteDocuments").Z({X:!0},(E,R)=>{const X=new Pr(E);return m(X.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([E,R,X],se)=>{const Se=Er(R);return m(Se.popLast())}))}js(e){const t=e.store("targets");return t.Z((s,u)=>{const m=Za(u),E=sm(this.yt,m);return t.put(E)})}Ws(e,t){const s=t.store("remoteDocuments"),u=[];return s.Z((m,E)=>{const R=t.store("remoteDocumentsV14"),X=(se=E,se.document?new ir(Pr.fromString(se.document.name).popFirst(5)):se.noDocument?ir.fromSegments(se.noDocument.path):se.unknownDocument?ir.fromSegments(se.unknownDocument.path):In()).path.toArray();var se;const Se={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};u.push(R.put(Se))}).next(()=>Xt.waitFor(u))}zs(e,t){const s=t.store("mutations"),u=mm(this.yt),m=new Cp(Dd.Bs,this.yt.ie);return s.W().next(E=>{const R=new Map;return E.forEach(X=>{var se;let Se=null!==(se=R.get(X.userId))&&void 0!==se?se:Ki();$c(this.yt,X).keys().forEach(st=>Se=Se.add(st)),R.set(X.userId,Se)}),Xt.forEach(R,(X,se)=>{const Se=new Ce(se),st=zh.re(this.yt,Se),qt=m.getIndexManager(Se),kn=bd.re(Se,this.yt,qt,m.referenceDelegate);return new _m(u,kn,st,qt).recalculateAndSaveOverlaysForDocumentKeys(new rp(t,go.at),X).next()})})}}function ah(i){i.createObjectStore("targetDocuments",{keyPath:g_}).createIndex("documentTargetsIndex",Vh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",em,{unique:!0}),i.createObjectStore("targetGlobal")}const Tp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Xh{constructor(e,t,s,u,m,E,R,X,se,Se,st=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Hs=m,this.window=E,this.document=R,this.Js=se,this.Ys=Se,this.Xs=st,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=qt=>Promise.resolve(),!Xh.C())throw new Cn(jt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gm(this,u),this.ii=t+"main",this.yt=new op(X),this.ri=new wa(this.ii,this.Xs,new Em(this.yt)),this.Cs=new E0(this.referenceDelegate,this.yt),this.remoteDocumentCache=mm(this.yt),this.Ns=new y_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Se&&rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Cn(jt.FAILED_PRECONDITION,Tp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new go(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var s=(0,xe.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,xe.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,xe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(aa(e))return Pt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Jh(e).get("owner").next(t=>Xt.resolve(this.mi(t)))}gi(e){return lh(e).delete(this.clientId)}yi(){var e=this;return(0,xe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=ya(s,"clientMetadata");return u.W().next(m=>{const E=e.Ii(m,18e5),R=m.filter(X=>-1===E.indexOf(X));return Xt.forEach(R,X=>u.delete(X.clientId)).next(()=>R)})}).catch(()=>[]);if(e.oi)for(const s of t)e.oi.removeItem(e.Ti(s.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Xt.resolve(!0):Jh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Cn(jt.FAILED_PRECONDITION,Tp);return!1}}return!(!this.networkEnabled||!this.inForeground)||lh(e).W().next(s=>void 0===this.Ii(s,5e3).find(u=>{if(this.clientId!==u.clientId){const E=!this.inForeground&&u.inForeground,R=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||E&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,xe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new rp(t,go.at);return e._i(s).next(()=>e.gi(s))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(s=>this.pi(s.updateTimeMs,t)&&!this.Ei(s.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>lh(e).W().next(t=>this.Ii(t,18e5).map(s=>s.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return bd.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new v_(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return zh.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,s){Pt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",m=15===(E=this.Xs)?Xd:14===E?$h:13===E?np:12===E?tp:11===E?ep:void In();var E;let R;return this.ri.runTransaction(e,u,m,X=>(R=new rp(X,this.Ss?this.Ss.next():go.at),"readwrite-primary"===t?this.fi(R).next(se=>!!se||this.di(R)).next(se=>{if(!se)throw rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Cn(jt.FAILED_PRECONDITION,Ic);return s(R)}).next(se=>this.wi(R).next(()=>se)):this.Vi(R).next(()=>s(R)))).then(X=>(R.raiseOnCommittedEvent(),X))}Vi(e){return Jh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Cn(jt.FAILED_PRECONDITION,Tp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jh(e).put("owner",t)}static C(){return wa.C()}_i(e){const t=Jh(e);return t.get("owner").next(s=>this.mi(s)?(Pt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Xt.resolve())}pi(e,t){const s=Date.now();return!(e<s-t||e>s&&(rr(`Detected an update time that is in the future: ${e} > ${s}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const s=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return rr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){rr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jh(i){return ya(i,"owner")}function lh(i){return ya(i,"clientMetadata")}function ef(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class wp{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Si=s,this.Di=u}static Ci(e,t){let s=Ki(),u=Ki();for(const m of t.docChanges)switch(m.type){case 0:s=s.add(m.doc.key);break;case 1:u=u.add(m.doc.key)}return new wp(e,t.fromCache,s,u)}}class Ip{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,s,u){return this.ki(e,t).next(m=>m||this.Oi(e,t,u,s)).next(m=>m||this.Mi(e,t))}ki(e,t){if(ru(t))return Xt.resolve(null);let s=fa(t);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=su(t,null,"F"),s=fa(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(m=>{const E=Ki(...m);return this.Ni.getDocuments(e,E).next(R=>this.indexManager.getMinOffset(e,s).next(X=>{const se=this.Fi(t,R);return this.$i(t,se,E,X.readTime)?this.ki(e,su(t,null,"F")):this.Bi(e,se,t,X)}))})))}Oi(e,t,s,u){return ru(t)||u.isEqual(Vn.min())?this.Mi(e,t):this.Ni.getDocuments(e,s).next(m=>{const E=this.Fi(t,m);return this.$i(t,E,s,u)?this.Mi(e,t):(Tt()<=on.in.DEBUG&&Pt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Xu(t)),this.Bi(e,E,t,yu(u,-1)))})}Fi(e,t){let s=new no(Ju(e));return t.forEach((u,m)=>{La(e,m)&&(s=s.add(m))}),s}$i(e,t,s,u){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(u)>0)}Mi(e,t){return Tt()<=on.in.DEBUG&&Pt("QueryEngine","Using full collection scan to execute query:",Xu(t)),this.Ni.getDocumentsMatchingQuery(e,t,sa.min())}Bi(e,t,s,u){return this.Ni.getDocumentsMatchingQuery(e,s,u).next(m=>(t.forEach(E=>{m=m.insert(E.key,E)}),m))}}class A_{constructor(e,t,s,u){this.persistence=e,this.Li=t,this.yt=u,this.qi=new to(kt),this.Ui=new il(m=>jl(m),Hl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _m(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function Cm(i,e,t,s){return new A_(i,e,t,s)}function ll(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,xe.Z)(function*(i,e){const t=Gn(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let u;return t.mutationQueue.getAllMutationBatches(s).next(m=>(u=m,t.Qi(e),t.mutationQueue.getAllMutationBatches(s))).next(m=>{const E=[],R=[];let X=Ki();for(const se of u){E.push(se.batchId);for(const Se of se.mutations)X=X.add(Se.key)}for(const se of m){R.push(se.batchId);for(const Se of se.mutations)X=X.add(Se.key)}return t.localDocuments.getDocuments(s,X).next(se=>({ji:se,removedBatchIds:E,addedBatchIds:R}))})})}),Sp.apply(this,arguments)}function x_(i,e){const t=Gn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),m=t.Gi.newChangeBuffer({trackRemovals:!0});return function(E,R,X,se){const Se=X.batch,st=Se.keys();let qt=Xt.resolve();return st.forEach(kn=>{qt=qt.next(()=>se.getEntry(R,kn)).next(Xn=>{const Nr=X.docVersions.get(kn);Bn(null!==Nr),Xn.version.compareTo(Nr)<0&&(Se.applyToRemoteDocument(Xn,X),Xn.isValidDocument()&&(Xn.setReadTime(X.commitVersion),se.addEntry(Xn)))})}),qt.next(()=>E.mutationQueue.removeMutationBatch(R,Se))}(t,s,e,m).next(()=>m.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(E){let R=Ki();for(let X=0;X<E.mutationResults.length;++X)E.mutationResults[X].transformResults.length>0&&(R=R.add(E.batch.mutations[X].key));return R}(e))).next(()=>t.localDocuments.getDocuments(s,u))})}function M_(i){const e=Gn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function C0(i,e){const t=Gn(i),s=e.snapshotVersion;let u=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const E=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.qi;const R=[];e.targetChanges.forEach((Se,st)=>{const qt=u.get(st);if(!qt)return;R.push(t.Cs.removeMatchingKeys(m,Se.removedDocuments,st).next(()=>t.Cs.addMatchingKeys(m,Se.addedDocuments,st)));let kn=qt.withSequenceNumber(m.currentSequenceNumber);var Xn,Nr,ci;e.targetMismatches.has(st)?kn=kn.withResumeToken(oo.EMPTY_BYTE_STRING,Vn.min()).withLastLimboFreeSnapshotVersion(Vn.min()):Se.resumeToken.approximateByteSize()>0&&(kn=kn.withResumeToken(Se.resumeToken,s)),u=u.insert(st,kn),Nr=kn,ci=Se,(0===(Xn=qt).resumeToken.approximateByteSize()||Nr.snapshotVersion.toMicroseconds()-Xn.snapshotVersion.toMicroseconds()>=3e8||ci.addedDocuments.size+ci.modifiedDocuments.size+ci.removedDocuments.size>0)&&R.push(t.Cs.updateTargetData(m,kn))});let X=pa(),se=Ki();if(e.documentUpdates.forEach(Se=>{e.resolvedLimboDocuments.has(Se)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(m,Se))}),R.push(Dp(m,E,e.documentUpdates).next(Se=>{X=Se.Wi,se=Se.zi})),!s.isEqual(Vn.min())){const Se=t.Cs.getLastRemoteSnapshotVersion(m).next(st=>t.Cs.setTargetsMetadata(m,m.currentSequenceNumber,s));R.push(Se)}return Xt.waitFor(R).next(()=>E.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,X,se)).next(()=>X)}).then(m=>(t.qi=u,m))}function Dp(i,e,t){let s=Ki(),u=Ki();return t.forEach(m=>s=s.add(m)),e.getEntries(i,s).next(m=>{let E=pa();return t.forEach((R,X)=>{const se=m.get(R);X.isFoundDocument()!==se.isFoundDocument()&&(u=u.add(R)),X.isNoDocument()&&X.version.isEqual(Vn.min())?(e.removeEntry(R,X.readTime),E=E.insert(R,X)):!se.isValidDocument()||X.version.compareTo(se.version)>0||0===X.version.compareTo(se.version)&&se.hasPendingWrites?(e.addEntry(X),E=E.insert(R,X)):Pt("LocalStore","Ignoring outdated watch update for ",R,". Current version:",se.version," Watch version:",X.version)}),{Wi:E,zi:u}})}function b0(i,e){const t=Gn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ad(i,e){const t=Gn(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.Cs.getTargetData(s,e).next(m=>m?(u=m,Xt.resolve(u)):t.Cs.allocateTargetId(s).next(E=>(u=new cu(e,E,0,s.currentSequenceNumber),t.Cs.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.qi.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.qi=t.qi.insert(s.targetId,s),t.Ui.set(e,s.targetId)),s})}function uc(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,xe.Z)(function*(i,e,t){const s=Gn(i),u=s.qi.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",m,E=>s.persistence.referenceDelegate.removeTarget(E,u)))}catch(E){if(!aa(E))throw E;Pt("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}s.qi=s.qi.remove(e),s.Ui.delete(u.target)}),tf.apply(this,arguments)}function nf(i,e,t){const s=Gn(i);let u=Vn.min(),m=Ki();return s.persistence.runTransaction("Execute query","readonly",E=>function(R,X,se){const Se=Gn(R),st=Se.Ui.get(se);return void 0!==st?Xt.resolve(Se.qi.get(st)):Se.Cs.getTargetData(X,se)}(s,E,fa(e)).next(R=>{if(R)return u=R.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(E,R.targetId).next(X=>{m=X})}).next(()=>s.Li.getDocumentsMatchingQuery(E,e,t?u:Vn.min(),t?m:Ki())).next(R=>(Ap(s,xa(e),R),{documents:R,Hi:m})))}function bm(i,e){const t=Gn(i),s=Gn(t.Cs),u=t.qi.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",m=>s.ne(m,e).next(E=>E?E.target:null))}function Tm(i,e){const t=Gn(i),s=t.Ki.get(e)||Vn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,yu(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Ap(t,e,u),u))}function Ap(i,e,t){let s=i.Ki.get(e)||Vn.min();t.forEach((u,m)=>{m.readTime.compareTo(s)>0&&(s=m.readTime)}),i.Ki.set(e,s)}function rf(){return rf=(0,xe.Z)(function*(i,e,t,s){const u=Gn(i);let m=Ki(),E=pa();for(const se of t){const Se=e.Ji(se.metadata.name);se.document&&(m=m.add(Se));const st=e.Yi(se);st.setReadTime(e.Xi(se.metadata.readTime)),E=E.insert(Se,st)}const R=u.Gi.newChangeBuffer({trackRemovals:!0}),X=yield Ad(u,(se=s,fa(nu(Pr.fromString(`__bundle__/docs/${se}`)))));var se;return u.persistence.runTransaction("Apply bundle documents","readwrite",se=>Dp(se,R,E).next(Se=>(R.apply(se),Se)).next(Se=>u.Cs.removeMatchingKeysForTargetId(se,X.targetId).next(()=>u.Cs.addMatchingKeys(se,m,X.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(se,Se.Wi,Se.zi)).next(()=>Se.Wi)))}),rf.apply(this,arguments)}function P_(i,e){return xp.apply(this,arguments)}function xp(){return xp=(0,xe.Z)(function*(i,e,t=Ki()){const s=yield Ad(i,fa(Gh(e.bundledQuery))),u=Gn(i);return u.persistence.runTransaction("Save named query","readwrite",m=>{const E=Ro(e.readTime);if(s.snapshotVersion.compareTo(E)>=0)return u.Ns.saveNamedQuery(m,e);const R=s.withResumeToken(oo.EMPTY_BYTE_STRING,E);return u.qi=u.qi.insert(R.targetId,R),u.Cs.updateTargetData(m,R).next(()=>u.Cs.removeMatchingKeysForTargetId(m,s.targetId)).next(()=>u.Cs.addMatchingKeys(m,t,s.targetId)).next(()=>u.Ns.saveNamedQuery(m,e))})}),xp.apply(this,arguments)}function Mp(i,e){return`firestore_clients_${i}_${e}`}function Rp(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Pp(i,e){return`firestore_targets_${i}_${e}`}class bl{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static Zi(e,t,s){const u=JSON.parse(s);let m,E="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return E&&u.error&&(E="string"==typeof u.error.message&&"string"==typeof u.error.code,E&&(m=new Cn(u.error.code,u.error.message))),E?new bl(e,t,u.state,m):(rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qc{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let u,m="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return m&&s.error&&(m="string"==typeof s.error.message&&"string"==typeof s.error.code,m&&(u=new Cn(s.error.code,s.error.message))),m?new qc(e,s.state,u):(rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,m=uu();for(let E=0;u&&E<s.activeTargetIds.length;++E)u=Ja(s.activeTargetIds[E]),m=m.add(s.activeTargetIds[E]);return u?new sf(e,m):(rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Np{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Np(t.clientId,t.onlineState):(rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wm{constructor(){this.activeTargetIds=uu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class af{constructor(e,t,s,u,m){this.window=e,this.Hs=t,this.persistenceKey=s,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new to(kt),this.started=!1,this.cr=[];const E=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=Mp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new wm),this.lr=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,xe.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const m=e.getItem(Mp(e.persistenceKey,u));if(m){const E=sf.Zi(u,m);E&&(e.ur=e.ur.insert(E.clientId,E))}}e.gr();const s=e.storage.getItem(e.wr);if(s){const u=e.yr(s);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,s){this.Tr(e,t,s),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pp(this.persistenceKey,e));if(s){const u=qc.Zi(e,s);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Rr(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.Er(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pt("SharedClientState","READ",e,t),t}setItem(e,t){Pt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Pt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ar)return void rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,xe.Z)(function*(){if(t.started){if(null!==s.key)if(t.lr.test(s.key)){if(null==s.newValue){const u=t.vr(s.key);return t.Vr(u,null)}{const u=t.Sr(s.key,s.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const u=t.Dr(s.key,s.newValue);if(u)return t.Cr(u)}}else if(t._r.test(s.key)){if(null!==s.newValue){const u=t.Nr(s.key,s.newValue);if(u)return t.kr(u)}}else if(s.key===t.wr){if(null!==s.newValue){const u=t.yr(s.newValue);if(u)return t.pr(u)}}else if(s.key===t.hr){const u=function(m){let E=go.at;if(null!=m)try{const R=JSON.parse(m);Bn("number"==typeof R),E=R}catch(R){rr("SharedClientState","Failed to read sequence number from WebStorage",R)}return E}(s.newValue);u!==go.at&&t.sequenceNumberHandler(u)}else if(s.key===t.mr){const u=t.Or(s.newValue);yield Promise.all(u.map(m=>t.syncEngine.Mr(m)))}}else t.cr.push(s)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,s){const u=new bl(this.currentUser,e,t,s),m=Rp(this.persistenceKey,this.currentUser,e);this.setItem(m,u.tr())}Er(e){const t=Rp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,s){const u=Pp(this.persistenceKey,e),m=new qc(e,t,s);this.setItem(u,m.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const s=this.vr(e);return sf.Zi(s,t)}Dr(e,t){const s=this.dr.exec(e),u=Number(s[1]);return bl.Zi(new Ce(void 0!==s[2]?s[2]:null),u,t)}Nr(e,t){const s=this._r.exec(e),u=Number(s[1]);return qc.Zi(u,t)}yr(e){return Np.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Pt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const s=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),m=this.Ir(s),E=[],R=[];return m.forEach(X=>{u.has(X)||E.push(X)}),u.forEach(X=>{m.has(X)||R.push(X)}),this.syncEngine.Br(E,R).then(()=>{this.ur=s})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=uu();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class Im{constructor(){this.Lr=new wm,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,s){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new wm,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class N_{Ur(e){}shutdown(){}}class Sm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Op={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O_{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class k_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,s,u,m){const E=this.ho(e,t);Pt("RestConnection","Sending: ",E,s);const R={};return this.lo(R,u,m),this.fo(e,E,R,s).then(X=>(Pt("RestConnection","Received: ",X),X),X=>{throw Cr("RestConnection",`${e} failed with error: `,X,"url: ",E,"request:",s),X})}_o(e,t,s,u,m,E){return this.ao(e,t,s,u,m)}lo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ze,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,m)=>e[m]=u),s&&s.headers.forEach((u,m)=>e[m]=u)}ho(e,t){return`${this.oo}/v1/${t}:${Op[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,s,u){return new Promise((m,E)=>{const R=new F;R.setWithCredentials(!0),R.listenOnce(ia.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case Zs.NO_ERROR:const se=R.getResponseJson();Pt("Connection","XHR received:",JSON.stringify(se)),m(se);break;case Zs.TIMEOUT:Pt("Connection",'RPC "'+e+'" timed out'),E(new Cn(jt.DEADLINE_EXCEEDED,"Request time out"));break;case Zs.HTTP_ERROR:const Se=R.getStatus();if(Pt("Connection",'RPC "'+e+'" failed with status:',Se,"response text:",R.getResponseText()),Se>0){let st=R.getResponseJson();Array.isArray(st)&&(st=st[0]);const qt=null==st?void 0:st.error;if(qt&&qt.status&&qt.message){const kn=function(Xn){const Nr=Xn.toLowerCase().replace(/_/g,"-");return Object.values(jt).indexOf(Nr)>=0?Nr:jt.UNKNOWN}(qt.status);E(new Cn(kn,qt.message))}else E(new Cn(jt.UNKNOWN,"Server responded with status "+R.getStatus()))}else E(new Cn(jt.UNAVAILABLE,"Connection failed."));break;default:In()}}finally{Pt("Connection",'RPC "'+e+'" completed.')}});const X=JSON.stringify(u);R.send(t,"POST",X,s,15)})}wo(e,t,s){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=gi(),E=xi(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new C({})),this.lo(R.initMessageHeaders,t,s),R.encodeInitMessageHeaders=!0;const X=u.join("");Pt("Connection","Creating WebChannel: "+X,R);const se=m.createWebChannel(X,R);let Se=!1,st=!1;const qt=new O_({Hr:Xn=>{st?Pt("Connection","Not sending because WebChannel is closed:",Xn):(Se||(Pt("Connection","Opening WebChannel transport."),se.open(),Se=!0),Pt("Connection","WebChannel sending:",Xn),se.send(Xn))},Jr:()=>se.close()}),kn=(Xn,Nr,ci)=>{Xn.listen(Nr,_o=>{try{ci(_o)}catch(Fo){setTimeout(()=>{throw Fo},0)}})};return kn(se,T.EventType.OPEN,()=>{st||Pt("Connection","WebChannel transport opened.")}),kn(se,T.EventType.CLOSE,()=>{st||(st=!0,Pt("Connection","WebChannel transport closed"),qt.io())}),kn(se,T.EventType.ERROR,Xn=>{st||(st=!0,Cr("Connection","WebChannel transport errored:",Xn),qt.io(new Cn(jt.UNAVAILABLE,"The operation could not be completed")))}),kn(se,T.EventType.MESSAGE,Xn=>{var Nr;if(!st){const ci=Xn.data[0];Bn(!!ci);const _o=ci,Fo=_o.error||(null===(Nr=_o[0])||void 0===Nr?void 0:Nr.error);if(Fo){Pt("Connection","WebChannel received error:",Fo);const Us=Fo.status;let Qo=function(zs){const _a=ko[zs];if(void 0!==_a)return au(_a)}(Us),Bs=Fo.message;void 0===Qo&&(Qo=jt.INTERNAL,Bs="Unknown error status: "+Us+" with message "+Fo.message),st=!0,qt.io(new Cn(Qo,Bs)),se.close()}else Pt("Connection","WebChannel received:",ci),qt.ro(ci)}}),kn(E,po.STAT_EVENT,Xn=>{Xn.stat===Z.PROXY?Pt("Connection","Detected buffering proxy"):Xn.stat===Z.NOPROXY&&Pt("Connection","Detected no buffering proxy")}),setTimeout(()=>{qt.so()},0),qt}}function uh(){return"undefined"!=typeof window?window:null}function xd(){return"undefined"!=typeof document?document:null}function ch(i){return new sl(i,!0)}class dh{constructor(e,t,s=1e3,u=1.5,m=6e4){this.Hs=e,this.timerId=t,this.mo=s,this.yo=u,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-s);u>0&&Pt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class lf{constructor(e,t,s,u,m,E,R,X){this.Hs=e,this.vo=s,this.Vo=u,this.connection=m,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=R,this.listener=X,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new dh(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,xe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,xe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var s=this;return(0,xe.Z)(function*(){s.Lo(),s.qo(),s.xo.cancel(),s.So++,4!==e?s.xo.reset():t&&t.code===jt.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),s.xo.Ao()):t&&t.code===jt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Uo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.So===t&&this.Go(s,u)},s=>{e(()=>{const u=new Cn(jt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(u)})})}Go(e,t){const s=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{s(()=>this.Qo(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,xe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Pt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dm extends lf{constructor(e,t,s,u,m,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,u,E),this.yt=m}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Ct(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:In(),u=e.targetChange.targetIds||[],m=function(X,se){return X.wt?(Bn(void 0===se||"string"==typeof se),oo.fromBase64String(se||"")):(Bn(void 0===se||se instanceof Uint8Array),oo.fromUint8Array(se||new Uint8Array))}(i,e.targetChange.resumeToken),E=e.targetChange.cause,R=E&&function(X){const se=void 0===X.code?jt.UNKNOWN:au(X.code);return new Cn(se,X.message||"")}(E);t=new Qd(s,u,m,R||null)}else if("documentChange"in e){const s=e.documentChange,u=Pl(i,s.document.name),m=Ro(s.document.updateTime),E=s.document.createTime?Ro(s.document.createTime):Vn.min(),R=new Bo({mapValue:{fields:s.document.fields}}),X=Rs.newFoundDocument(u,m,E,R);t=new Ra(s.targetIds||[],s.removedTargetIds||[],X.key,X)}else if("documentDelete"in e){const s=e.documentDelete,u=Pl(i,s.document),m=s.readTime?Ro(s.readTime):Vn.min(),E=Rs.newNoDocument(u,m);t=new Ra([],s.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const s=e.documentRemove,u=Pl(i,s.document);t=new Ra([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return In();{const s=e.filter,m=new nc(s.count||0);t=new Pc(s.targetId,m)}}var X;return t}(this.yt,e),s=function(u){if(!("targetChange"in u))return Vn.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?Vn.min():m.readTime?Ro(m.readTime):Vn.min()}(e);return this.listener.Wo(t,s)}zo(e){const t={};t.database=p(this.yt),t.addTarget=function(u,m){let E;const R=m.target;return E=Yu(R)?{documents:Ei(u,R)}:{query:ai(u,R)},E.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?E.resumeToken=Fc(u,m.resumeToken):m.snapshotVersion.compareTo(Vn.min())>0&&(E.readTime=ol(u,m.snapshotVersion.toTimestamp())),E}(this.yt,e);const s=function f(i,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return In()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Bo(t)}Ho(e){const t={};t.database=p(this.yt),t.removeTarget=e,this.Bo(t)}}class T0 extends lf{constructor(e,t,s,u,m,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,u,E),this.yt=m,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Bn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Or(i,e){return i&&i.length>0?(Bn(void 0!==e),i.map(t=>function(s,u){let m=Ro(s.updateTime?s.updateTime:u);return m.isEqual(Vn.min())&&(m=Ro(u)),new vl(m,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ro(e.commitTime);return this.listener.Zo(s,t)}return Bn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=p(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>gn(this.yt,s))};this.Bo(t)}}class w0 extends class{}{constructor(e,t,s,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.yt=u,this.nu=!1}su(){if(this.nu)throw new Cn(jt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.connection.ao(e,t,s,u,m)).catch(u=>{throw"FirebaseError"===u.name?(u.code===jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Cn(jt.UNKNOWN,u.toString())})}_o(e,t,s,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,E])=>this.connection._o(e,t,s,m,E,u)).catch(m=>{throw"FirebaseError"===m.name?(m.code===jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Cn(jt.UNKNOWN,m.toString())})}terminate(){this.nu=!0}}class F_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(rr(t),this.ou=!1):Pt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class xm{constructor(e,t,s,u,m){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=m,this.mu.Ur(R=>{s.enqueueAndForget((0,xe.Z)(function*(){var X;fu(E)&&(Pt("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,xe.Z)(function*(se){const Se=Gn(se);Se._u.add(4),yield Kc(Se),Se.gu.set("Unknown"),Se._u.delete(4),yield Md(Se)}),function(se){return X.apply(this,arguments)})(E))}))}),this.gu=new F_(s,u)}}function Md(i){return uf.apply(this,arguments)}function uf(){return uf=(0,xe.Z)(function*(i){if(fu(i))for(const e of i.wu)yield e(!0)}),uf.apply(this,arguments)}function Kc(i){return cf.apply(this,arguments)}function cf(){return cf=(0,xe.Z)(function*(i){for(const e of i.wu)yield e(!1)}),cf.apply(this,arguments)}function Nl(i,e){const t=Gn(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),hh(t)?Rm(t):Od(t).ko()&&Fp(t,e))}function cc(i,e){const t=Gn(i),s=Od(t);t.du.delete(e),s.ko()&&Mm(t,e),0===t.du.size&&(s.ko()?s.Fo():fu(t)&&t.gu.set("Unknown"))}function Fp(i,e){i.yu.Ot(e.targetId),Od(i).zo(e)}function Mm(i,e){i.yu.Ot(e),Od(i).Ho(e)}function Rm(i){i.yu=new Fh({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),Od(i).start(),i.gu.uu()}function hh(i){return fu(i)&&!Od(i).No()&&i.du.size>0}function fu(i){return 0===Gn(i)._u.size}function df(i){i.yu=void 0}function fh(i){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,xe.Z)(function*(i){i.du.forEach((e,t)=>{Fp(i,e)})}),Lp.apply(this,arguments)}function Vp(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,xe.Z)(function*(i,e){df(i),hh(i)?(i.gu.hu(e),Rm(i)):i.gu.set("Unknown")}),hf.apply(this,arguments)}function Pm(i,e,t){return ff.apply(this,arguments)}function ff(){return ff=(0,xe.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Qd&&2===e.state&&e.cause)try{yield(s=(0,xe.Z)(function*(u,m){const E=m.cause;for(const R of m.targetIds)u.du.has(R)&&(yield u.remoteSyncer.rejectListen(R,E),u.du.delete(R),u.yu.removeTarget(R))}),function(u,m){return s.apply(this,arguments)})(i,e)}catch(s){Pt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield pf(i,s)}else if(e instanceof Ra?i.yu.Kt(e):e instanceof Pc?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(Vn.min()))try{const s=yield M_(i.localStore);t.compareTo(s)>=0&&(yield function(u,m){const E=u.yu.Zt(m);return E.targetChanges.forEach((R,X)=>{if(R.resumeToken.approximateByteSize()>0){const se=u.du.get(X);se&&u.du.set(X,se.withResumeToken(R.resumeToken,m))}}),E.targetMismatches.forEach(R=>{const X=u.du.get(R);if(!X)return;u.du.set(R,X.withResumeToken(oo.EMPTY_BYTE_STRING,X.snapshotVersion)),Mm(u,R);const se=new cu(X.target,R,1,X.sequenceNumber);Fp(u,se)}),u.remoteSyncer.applyRemoteEvent(E)}(i,t))}catch(s){Pt("RemoteStore","Failed to raise snapshot:",s),yield pf(i,s)}var s}),ff.apply(this,arguments)}function pf(i,e,t){return ph.apply(this,arguments)}function ph(){return ph=(0,xe.Z)(function*(i,e,t){if(!aa(e))throw e;i._u.add(1),yield Kc(i),i.gu.set("Offline"),t||(t=()=>M_(i.localStore)),i.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){Pt("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Md(i)}))}),ph.apply(this,arguments)}function Nm(i,e){return e().catch(t=>pf(i,t,e))}function Rd(i){return gf.apply(this,arguments)}function gf(){return gf=(0,xe.Z)(function*(i){const e=Gn(i),t=dc(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Pd(e);)try{const u=yield b0(e.localStore,s);if(null===u){0===e.fu.length&&t.Fo();break}s=u.batchId,Om(e,u)}catch(u){yield pf(e,u)}km(e)&&Fm(e)}),gf.apply(this,arguments)}function Pd(i){return fu(i)&&i.fu.length<10}function Om(i,e){i.fu.push(e);const t=dc(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function km(i){return fu(i)&&!dc(i).No()&&i.fu.length>0}function Fm(i){dc(i).start()}function Nd(i){return Up.apply(this,arguments)}function Up(){return Up=(0,xe.Z)(function*(i){dc(i).eu()}),Up.apply(this,arguments)}function L_(i){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,xe.Z)(function*(i){const e=dc(i);for(const t of i.fu)e.Xo(t.mutations)}),Bp.apply(this,arguments)}function V_(i,e,t){return Ol.apply(this,arguments)}function Ol(){return Ol=(0,xe.Z)(function*(i,e,t){const s=i.fu.shift(),u=sp.from(s,e,t);yield Nm(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Rd(i)}),Ol.apply(this,arguments)}function $p(i,e){return mf.apply(this,arguments)}function mf(){return mf=(0,xe.Z)(function*(i,e){var t;e&&dc(i).Yo&&(yield(t=(0,xe.Z)(function*(s,u){if(ua(m=u.code)&&m!==jt.ABORTED){const E=s.fu.shift();dc(s).Mo(),yield Nm(s,()=>s.remoteSyncer.rejectFailedWrite(E.batchId,u)),yield Rd(s)}var m}),function(s,u){return t.apply(this,arguments)})(i,e)),km(i)&&Fm(i)}),mf.apply(this,arguments)}function jp(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,xe.Z)(function*(i,e){const t=Gn(i);t.asyncQueue.verifyOperationInProgress(),Pt("RemoteStore","RemoteStore received new credentials");const s=fu(t);t._u.add(3),yield Kc(t),s&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Md(t)}),yf.apply(this,arguments)}function _f(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,xe.Z)(function*(i,e){const t=Gn(i);e?(t._u.delete(2),yield Md(t)):e||(t._u.add(2),yield Kc(t),t.gu.set("Unknown"))}),Hp.apply(this,arguments)}function Od(i){return i.pu||(i.pu=function(e,t,s){const u=Gn(e);return u.su(),new Dm(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:fh.bind(null,i),Zr:Vp.bind(null,i),Wo:Pm.bind(null,i)}),i.wu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.pu.Mo(),hh(i)?Rm(i):i.gu.set("Unknown")):(yield i.pu.stop(),df(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function dc(i){return i.Iu||(i.Iu=function(e,t,s){const u=Gn(e);return u.su(),new T0(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:Nd.bind(null,i),Zr:$p.bind(null,i),tu:L_.bind(null,i),Zo:V_.bind(null,i)}),i.wu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.Iu.Mo(),yield Rd(i)):(yield i.Iu.stop(),i.fu.length>0&&(Pt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Gp{constructor(e,t,s,u,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=m,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,s,u,m){const E=Date.now()+s,R=new Gp(e,t,E,u,m);return R.start(s),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Cn(jt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zc(i,e){if(rr("AsyncQueue",`${e}: ${i}`),aa(i))return new Cn(jt.UNAVAILABLE,`${e}: ${i}`);throw i}class gh{constructor(e){this.comparator=e?(t,s)=>e(t,s)||ir.comparator(t.key,s.key):(t,s)=>ir.comparator(t.key,s.key),this.keyedMap=sc(),this.sortedSet=new to(this.comparator)}static emptySet(e){return new gh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(!u.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new gh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class zp{constructor(){this.Tu=new to(ir.comparator)}track(e){const t=e.doc.key,s=this.Tu.get(t);s?0!==e.type&&3===s.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==s.type?this.Tu=this.Tu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Tu=this.Tu.remove(t):1===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):In():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,s)=>{e.push(s)}),e}}class kd{constructor(e,t,s,u,m,E,R,X,se){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=m,this.fromCache=E,this.syncStateChanged=R,this.excludesMetadataChanges=X,this.hasCachedResults=se}static fromInitialDocuments(e,t,s,u,m){const E=[];return t.forEach(R=>{E.push({type:0,doc:R})}),new kd(e,t,gh.emptySet(t),E,s,u,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class U_{constructor(){this.Au=void 0,this.listeners=[]}}class I0{constructor(){this.queries=new il(e=>Fa(e),Tu),this.onlineState="Unknown",this.Ru=new Set}}function Lm(i,e){return mh.apply(this,arguments)}function mh(){return mh=(0,xe.Z)(function*(i,e){const t=Gn(i),s=e.query;let u=!1,m=t.queries.get(s);if(m||(u=!0,m=new U_),u)try{m.Au=yield t.onListen(s)}catch(E){const R=Zc(E,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(R)}t.queries.set(s,m),m.listeners.push(e),e.bu(t.onlineState),m.Au&&e.Pu(m.Au)&&Tl(t)}),mh.apply(this,arguments)}function Wp(i,e){return vf.apply(this,arguments)}function vf(){return vf=(0,xe.Z)(function*(i,e){const t=Gn(i),s=e.query;let u=!1;const m=t.queries.get(s);if(m){const E=m.listeners.indexOf(e);E>=0&&(m.listeners.splice(E,1),u=0===m.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)}),vf.apply(this,arguments)}function Vm(i,e){const t=Gn(i);let s=!1;for(const u of e){const E=t.queries.get(u.query);if(E){for(const R of E.listeners)R.Pu(u)&&(s=!0);E.Au=u}}s&&Tl(t)}function S0(i,e,t){const s=Gn(i),u=s.queries.get(e);if(u)for(const m of u.listeners)m.onError(t);s.queries.delete(e)}function Tl(i){i.Ru.forEach(e=>{e.next()})}class Um{constructor(e,t,s){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new kd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class D0{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class qp{constructor(e){this.yt=e}Ji(e){return Pl(this.yt,e)}Yi(e){return e.metadata.exists?re(this.yt,e.document,!1):Rs.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ro(e)}}class Bm{constructor(e,t,s){this.Mu=e,this.localStore=t,this.yt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const s=Pr.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,s=new qp(this.yt);for(const u of e)if(u.metadata.queries){const m=s.Ji(u.metadata.name);for(const E of u.metadata.queries){const R=(t.get(E)||Ki()).add(m);t.set(E,R)}}return t}complete(){var e=this;return(0,xe.Z)(function*(){const t=yield function R_(i,e,t,s){return rf.apply(this,arguments)}(e.localStore,new qp(e.yt),e.documents,e.Mu.id),s=e.$u(e.documents);for(const u of e.queries)yield P_(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Kp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class $m{constructor(e){this.key=e}}class B_{constructor(e){this.key=e}}class Zp{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ki(),this.mutatedKeys=Ki(),this.Gu=Ju(e),this.Qu=new gh(this.Gu)}get ju(){return this.qu}Wu(e,t){const s=t?t.zu:new zp,u=t?t.Qu:this.Qu;let m=t?t.mutatedKeys:this.mutatedKeys,E=u,R=!1;const X="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,se="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Se,st)=>{const qt=u.get(Se),kn=La(this.query,st)?st:null,Xn=!!qt&&this.mutatedKeys.has(qt.key),Nr=!!kn&&(kn.hasLocalMutations||this.mutatedKeys.has(kn.key)&&kn.hasCommittedMutations);let ci=!1;qt&&kn?qt.data.isEqual(kn.data)?Xn!==Nr&&(s.track({type:3,doc:kn}),ci=!0):this.Hu(qt,kn)||(s.track({type:2,doc:kn}),ci=!0,(X&&this.Gu(kn,X)>0||se&&this.Gu(kn,se)<0)&&(R=!0)):!qt&&kn?(s.track({type:0,doc:kn}),ci=!0):qt&&!kn&&(s.track({type:1,doc:qt}),ci=!0,(X||se)&&(R=!0)),ci&&(kn?(E=E.add(kn),m=Nr?m.add(Se):m.delete(Se)):(E=E.delete(Se),m=m.delete(Se)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const Se="F"===this.query.limitType?E.last():E.first();E=E.delete(Se.key),m=m.delete(Se.key),s.track({type:1,doc:Se})}return{Qu:E,zu:s,$i:R,mutatedKeys:m}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Eu();m.sort((se,Se)=>function(st,qt){const kn=Xn=>{switch(Xn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return In()}};return kn(st)-kn(qt)}(se.type,Se.type)||this.Gu(se.doc,Se.doc)),this.Ju(s);const E=t?this.Yu():[],R=0===this.Ku.size&&this.current?1:0,X=R!==this.Uu;return this.Uu=R,0!==m.length||X?{snapshot:new kd(this.query,e.Qu,u,m,e.mutatedKeys,0===R,X,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:E}:{Xu:E}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new zp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ki(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const t=[];return e.forEach(s=>{this.Ku.has(s)||t.push(new B_(s))}),this.Ku.forEach(s=>{e.has(s)||t.push(new $m(s))}),t}tc(e){this.qu=e.Hi,this.Ku=Ki();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return kd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Yp{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class $_{constructor(e){this.key=e,this.nc=!1}}class Qp{constructor(e,t,s,u,m,E){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=m,this.maxConcurrentLimboResolutions=E,this.sc={},this.ic=new il(R=>Fa(R),Tu),this.rc=new Map,this.oc=new Set,this.uc=new to(ir.comparator),this.cc=new Map,this.ac=new sh,this.hc={},this.lc=new Map,this.fc=Td.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function j_(i,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,xe.Z)(function*(i,e){const t=Sf(i);let s,u;const m=t.ic.get(e);if(m)s=m.targetId,t.sharedClientState.addLocalQueryTarget(s),u=m.view.ec();else{const E=yield Ad(t.localStore,fa(e));t.isPrimaryClient&&Nl(t.remoteStore,E);const R=t.sharedClientState.addLocalQueryTarget(E.targetId);s=E.targetId,u=yield Jp(t,e,s,"current"===R,E.resumeToken)}return u}),Xp.apply(this,arguments)}function Jp(i,e,t,s,u){return eg.apply(this,arguments)}function eg(){return eg=(0,xe.Z)(function*(i,e,t,s,u){i._c=(st,qt,kn)=>{return(Xn=(0,xe.Z)(function*(Nr,ci,_o,Fo){let Us=ci.view.Wu(_o);Us.$i&&(Us=yield nf(Nr.localStore,ci.query,!1).then(({documents:zs})=>ci.view.Wu(zs,Us)));const Qo=Fo&&Fo.targetChanges.get(ci.targetId),Bs=ci.view.applyChanges(Us,Nr.isPrimaryClient,Qo);return pc(Nr,ci.targetId,Bs.Xu),Bs.snapshot}),function(Nr,ci,_o,Fo){return Xn.apply(this,arguments)})(i,st,qt,kn);var Xn};const m=yield nf(i.localStore,e,!0),E=new Zp(e,m.Hi),R=E.Wu(m.documents),X=Ou.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,u),se=E.applyChanges(R,i.isPrimaryClient,X);pc(i,t,se.Xu);const Se=new Yp(e,t,E);return i.ic.set(e,Se),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),se.snapshot}),eg.apply(this,arguments)}function H_(i,e){return tg.apply(this,arguments)}function tg(){return tg=(0,xe.Z)(function*(i,e){const t=Gn(i),s=t.ic.get(e),u=t.rc.get(s.targetId);if(u.length>1)return t.rc.set(s.targetId,u.filter(m=>!Tu(m,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield uc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),cc(t.remoteStore,s.targetId),Kl(t,s.targetId)}).catch(oa))):(Kl(t,s.targetId),yield uc(t.localStore,s.targetId,!0))}),tg.apply(this,arguments)}function hc(){return hc=(0,xe.Z)(function*(i,e,t){const s=lg(i);try{const u=yield function(m,E){const R=Gn(m),X=ar.now(),se=E.reduce((qt,kn)=>qt.add(kn.key),Ki());let Se,st;return R.persistence.runTransaction("Locally write mutations","readwrite",qt=>{let kn=pa(),Xn=Ki();return R.Gi.getEntries(qt,se).next(Nr=>{kn=Nr,kn.forEach((ci,_o)=>{_o.isValidDocument()||(Xn=Xn.add(ci))})}).next(()=>R.localDocuments.getOverlayedDocuments(qt,kn)).next(Nr=>{Se=Nr;const ci=[];for(const _o of E){const Fo=Rc(_o,Se.get(_o.key).overlayedDocument);null!=Fo&&ci.push(new El(_o.key,Fo,Ku(Fo.value.mapValue),ro.exists(!0)))}return R.mutationQueue.addMutationBatch(qt,X,ci,E)}).next(Nr=>{st=Nr;const ci=Nr.applyToLocalDocumentSet(Se,Xn);return R.documentOverlayCache.saveOverlays(qt,Nr.batchId,ci)})}).then(()=>({batchId:st.batchId,changes:lu(Se)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(m,E,R){let X=m.hc[m.currentUser.toKey()];X||(X=new to(kt)),X=X.insert(E,R),m.hc[m.currentUser.toKey()]=X}(s,u.batchId,t),yield cl(s,u.changes),yield Rd(s.remoteStore)}catch(u){const m=Zc(u,"Failed to persist write");t.reject(m)}}),hc.apply(this,arguments)}function jm(i,e){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,xe.Z)(function*(i,e){const t=Gn(i);try{const s=yield C0(t.localStore,e);e.targetChanges.forEach((u,m)=>{const E=t.cc.get(m);E&&(Bn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?E.nc=!0:u.modifiedDocuments.size>0?Bn(E.nc):u.removedDocuments.size>0&&(Bn(E.nc),E.nc=!1))}),yield cl(t,s,e)}catch(s){yield oa(s)}}),Yc.apply(this,arguments)}function Hm(i,e,t){const s=Gn(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.ic.forEach((m,E)=>{const R=E.view.bu(e);R.snapshot&&u.push(R.snapshot)}),function(m,E){const R=Gn(m);R.onlineState=E;let X=!1;R.queries.forEach((se,Se)=>{for(const st of Se.listeners)st.bu(E)&&(X=!0)}),X&&Tl(R)}(s.eventManager,e),u.length&&s.sc.Wo(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function G_(i,e,t){return yh.apply(this,arguments)}function yh(){return yh=(0,xe.Z)(function*(i,e,t){const s=Gn(i);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.cc.get(e),m=u&&u.key;if(m){let E=new to(ir.comparator);E=E.insert(m,Rs.newNoDocument(m,Vn.min()));const R=Ki().add(m),X=new Nu(Vn.min(),new Map,new no(kt),E,R);yield jm(s,X),s.uc=s.uc.remove(m),s.cc.delete(e),gc(s)}else yield uc(s.localStore,e,!1).then(()=>Kl(s,e,t)).catch(oa)}),yh.apply(this,arguments)}function pu(i,e){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,xe.Z)(function*(i,e){const t=Gn(i),s=e.batch.batchId;try{const u=yield x_(t.localStore,e);fc(t,s,null),_h(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield cl(t,u)}catch(u){yield oa(u)}}),Qc.apply(this,arguments)}function Ua(i,e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,xe.Z)(function*(i,e,t){const s=Gn(i);try{const u=yield function(m,E){const R=Gn(m);return R.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let se;return R.mutationQueue.lookupMutationBatch(X,E).next(Se=>(Bn(null!==Se),se=Se.keys(),R.mutationQueue.removeMutationBatch(X,Se))).next(()=>R.mutationQueue.performConsistencyCheck(X)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(X,se,E)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,se)).next(()=>R.localDocuments.getDocuments(X,se))})}(s.localStore,e);fc(s,e,t),_h(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield cl(s,u)}catch(u){yield oa(u)}}),Lu.apply(this,arguments)}function ul(){return ul=(0,xe.Z)(function*(i,e){const t=Gn(i);fu(t.remoteStore)||Pt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(m){const E=Gn(m);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>E.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===s)return void e.resolve();const u=t.lc.get(s)||[];u.push(e),t.lc.set(s,u)}catch(s){const u=Zc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),ul.apply(this,arguments)}function _h(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function fc(i,e,t){const s=Gn(i);let u=s.hc[s.currentUser.toKey()];if(u){const m=u.get(e);m&&(t?m.reject(t):m.resolve(),u=u.remove(e)),s.hc[s.currentUser.toKey()]=u}}function Kl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.rc.get(e))i.ic.delete(s),t&&i.sc.wc(s,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(s=>{i.ac.containsKey(s)||Xc(i,s)})}function Xc(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(cc(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),gc(i))}function pc(i,e,t){for(const s of t)s instanceof $m?(i.ac.addReference(s.key,e),Fd(i,s)):s instanceof B_?(Pt("SyncEngine","Document no longer in limbo: "+s.key),i.ac.removeReference(s.key,e),i.ac.containsKey(s.key)||Xc(i,s.key)):In()}function Fd(i,e){const t=e.key,s=t.path.canonicalString();i.uc.get(t)||i.oc.has(s)||(Pt("SyncEngine","New document in limbo: "+t),i.oc.add(s),gc(i))}function gc(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new ir(Pr.fromString(e)),s=i.fc.next();i.cc.set(s,new $_(t)),i.uc=i.uc.insert(t,s),Nl(i.remoteStore,new cu(fa(nu(t.path)),s,2,go.at))}}function cl(i,e,t){return mc.apply(this,arguments)}function mc(){return mc=(0,xe.Z)(function*(i,e,t){const s=Gn(i),u=[],m=[],E=[];var R;s.ic.isEmpty()||(s.ic.forEach((R,X)=>{E.push(s._c(X,e,t).then(se=>{if((se||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(X.targetId,(null==se?void 0:se.fromCache)?"not-current":"current"),se){u.push(se);const Se=wp.Ci(X.targetId,se);m.push(Se)}}))}),yield Promise.all(E),s.sc.Wo(u),yield(R=(0,xe.Z)(function*(X,se){const Se=Gn(X);try{yield Se.persistence.runTransaction("notifyLocalViewChanges","readwrite",st=>Xt.forEach(se,qt=>Xt.forEach(qt.Si,kn=>Se.persistence.referenceDelegate.addReference(st,qt.targetId,kn)).next(()=>Xt.forEach(qt.Di,kn=>Se.persistence.referenceDelegate.removeReference(st,qt.targetId,kn)))))}catch(st){if(!aa(st))throw st;Pt("LocalStore","Failed to update sequence numbers: "+st)}for(const st of se){const qt=st.targetId;if(!st.fromCache){const kn=Se.qi.get(qt),Nr=kn.withLastLimboFreeSnapshotVersion(kn.snapshotVersion);Se.qi=Se.qi.insert(qt,Nr)}}}),function(X,se){return R.apply(this,arguments)})(s.localStore,m))}),mc.apply(this,arguments)}function Ld(i,e){return bf.apply(this,arguments)}function bf(){return bf=(0,xe.Z)(function*(i,e){const t=Gn(i);if(!t.currentUser.isEqual(e)){Pt("SyncEngine","User change. New user:",e.toKey());const s=yield ll(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(E=>{E.forEach(R=>{R.reject(new Cn(jt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield cl(t,s.ji)}var u}),bf.apply(this,arguments)}function Gm(i,e){const t=Gn(i),s=t.cc.get(e);if(s&&s.nc)return Ki().add(s.key);{let u=Ki();const m=t.rc.get(e);if(!m)return u;for(const E of m){const R=t.ic.get(E);u=u.unionWith(R.view.ju)}return u}}function zm(i,e){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,xe.Z)(function*(i,e){const t=Gn(i),s=yield nf(t.localStore,e.query,!0),u=e.view.tc(s);return t.isPrimaryClient&&pc(t,e.targetId,u.Xu),u}),Tf.apply(this,arguments)}function Wm(i,e){return wf.apply(this,arguments)}function wf(){return wf=(0,xe.Z)(function*(i,e){const t=Gn(i);return Tm(t.localStore,e).then(s=>cl(t,s))}),wf.apply(this,arguments)}function qm(i,e,t,s){return If.apply(this,arguments)}function If(){return If=(0,xe.Z)(function*(i,e,t,s){const u=Gn(i),m=yield function(E,R){const X=Gn(E),se=Gn(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",Se=>se.Tn(Se,R).next(st=>st?X.localDocuments.getDocuments(Se,st):Xt.resolve(null)))}(u.localStore,e);var R;null!==m?("pending"===t?yield Rd(u.remoteStore):"acknowledged"===t||"rejected"===t?(fc(u,e,s||null),_h(u,e),R=e,Gn(Gn(u.localStore).mutationQueue).An(R)):In(),yield cl(u,m)):Pt("SyncEngine","Cannot apply mutation batch with id: "+e)}),If.apply(this,arguments)}function ng(){return ng=(0,xe.Z)(function*(i,e){const t=Gn(i);if(Sf(t),lg(t),!0===e&&!0!==t.dc){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield rg(t,s.toArray());t.dc=!0,yield _f(t.remoteStore,!0);for(const m of u)Nl(t.remoteStore,m)}else if(!1===e&&!1!==t.dc){const s=[];let u=Promise.resolve();t.rc.forEach((m,E)=>{t.sharedClientState.isLocalQueryTarget(E)?s.push(E):u=u.then(()=>(Kl(t,E),uc(t.localStore,E,!0))),cc(t.remoteStore,E)}),yield u,yield rg(t,s),function(m){const E=Gn(m);E.cc.forEach((R,X)=>{cc(E.remoteStore,X)}),E.ac.fs(),E.cc=new Map,E.uc=new to(ir.comparator)}(t),t.dc=!1,yield _f(t.remoteStore,!1)}}),ng.apply(this,arguments)}function rg(i,e,t){return ig.apply(this,arguments)}function ig(){return ig=(0,xe.Z)(function*(i,e,t){const s=Gn(i),u=[],m=[];for(const E of e){let R;const X=s.rc.get(E);if(X&&0!==X.length){R=yield Ad(s.localStore,fa(X[0]));for(const se of X){const Se=s.ic.get(se),st=yield zm(s,Se);st.snapshot&&m.push(st.snapshot)}}else{const se=yield bm(s.localStore,E);R=yield Ad(s.localStore,se),yield Jp(s,sg(se),E,!1,R.resumeToken)}u.push(R)}return s.sc.Wo(m),u}),ig.apply(this,arguments)}function sg(i){return Dc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Zm(i){const e=Gn(i);return Gn(Gn(e.localStore).persistence).vi()}function z_(i,e,t,s){return og.apply(this,arguments)}function og(){return og=(0,xe.Z)(function*(i,e,t,s){const u=Gn(i);if(u.dc)return void Pt("SyncEngine","Ignoring unexpected query state notification.");const m=u.rc.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const E=yield Tm(u.localStore,xa(m[0])),R=Nu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,oo.EMPTY_BYTE_STRING);yield cl(u,E,R);break}case"rejected":yield uc(u.localStore,e,!0),Kl(u,e,s);break;default:In()}}),og.apply(this,arguments)}function Ym(i,e,t){return ag.apply(this,arguments)}function ag(){return ag=(0,xe.Z)(function*(i,e,t){const s=Sf(i);if(s.dc){for(const u of e){if(s.rc.has(u)){Pt("SyncEngine","Adding an already active target "+u);continue}const m=yield bm(s.localStore,u),E=yield Ad(s.localStore,m);yield Jp(s,sg(m),E.targetId,!1,E.resumeToken),Nl(s.remoteStore,E)}for(const u of t)s.rc.has(u)&&(yield uc(s.localStore,u,!1).then(()=>{cc(s.remoteStore,u),Kl(s,u)}).catch(oa))}}),ag.apply(this,arguments)}function Sf(i){const e=Gn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G_.bind(null,e),e.sc.Wo=Vm.bind(null,e.eventManager),e.sc.wc=S0.bind(null,e.eventManager),e}function lg(i){const e=Gn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ua.bind(null,e),e}class q_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,xe.Z)(function*(){t.yt=ch(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Cm(this.persistence,new Ip,e.initialUser,this.yt)}yc(e){return new Cp(Dd.Bs,this.yt)}gc(e){return new Im}terminate(){var e=this;return(0,xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qm extends q_{constructor(e,t,s){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e),yield s.Ac.initialize(s,e),yield lg(s.Ac.syncEngine),yield Rd(s.Ac.remoteStore),yield s.persistence.li(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Cm(this.persistence,new Ip,e.initialUser,this.yt)}Tc(e,t){return new mp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const s=new _u(t,this.persistence);return new Jl(e.asyncQueue,s)}yc(e){const t=ef(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ya.withCacheSize(this.cacheSizeBytes):Ya.DEFAULT;return new Xh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,uh(),xd(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Im}}class ug extends Qm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e);const u=s.Ac.syncEngine;s.sharedClientState instanceof af&&(s.sharedClientState.syncEngine={Fr:qm.bind(null,u),$r:z_.bind(null,u),Br:Ym.bind(null,u),vi:Zm.bind(null,u),Mr:Wm.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.li(function(){var m=(0,xe.Z)(function*(E){yield function Km(i,e){return ng.apply(this,arguments)}(s.Ac.syncEngine,E),s.gcScheduler&&(E&&!s.gcScheduler.started?s.gcScheduler.start():E||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(E&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():E||s.indexBackfillerScheduler.stop())});return function(E){return m.apply(this,arguments)}}())})()}gc(e){const t=uh();if(!af.C(t))throw new Cn(jt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=ef(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new af(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class vh{initialize(e,t){var s=this;return(0,xe.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>Hm(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ld.bind(null,s.syncEngine),yield _f(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new I0}createDatastore(e){const t=ch(e.databaseInfo.databaseId),s=new k_(e.databaseInfo);return new w0(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,m=R=>Hm(this.syncEngine,R,0),E=Sm.C()?new Sm:new N_,new xm(t,s,u,m,E);var t,s,u,m,E}createSyncEngine(e,t){return function(s,u,m,E,R,X,se){const Se=new Qp(s,u,m,E,R,X);return se&&(Se.dc=!0),Se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,xe.Z)(function*(t){const s=Gn(t);Pt("RemoteStore","RemoteStore shutting down."),s._u.add(5),yield Kc(s),s.mu.shutdown(),s.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cg(i,e,t){if(!t)throw new Cn(jt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function K_(i,e,t,s){if(!0===e&&!0===s)throw new Cn(jt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Z_(i){if(!ir.isDocumentKey(i))throw new Cn(jt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Y_(i){if(ir.isDocumentKey(i))throw new Cn(jt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Df(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":In()}function Es(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Cn(jt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Df(i);throw new Cn(jt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Q_(i,e){if(e<=0)throw new Cn(jt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Xm=new Map;class Jc{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Cn(jt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Cn(jt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,K_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,t,s,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Cn(jt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Cn(jt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jc(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Uo;switch(t.type){case"gapi":return new W(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Cn(jt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xm.get(e);t&&(Pt("ComponentProvider","Removing Datastore"),Xm.delete(e),t.terminate())}(this),Promise.resolve()}}class Po{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Po(this.firestore,e,this._key)}}class ba{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ba(this.firestore,e,this._query)}}class wl extends ba{constructor(e,t,s){super(e,t,nu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Po(this.firestore,null,new ir(e))}withConverter(e){return new wl(this.firestore,e,this._path)}}function Jm(i,e,...t){if(i=(0,Ht.m9)(i),cg("collection","path",e),i instanceof Eh){const s=Pr.fromString(e,...t);return Y_(s),new wl(i,null,s)}{if(!(i instanceof Po||i instanceof wl))throw new Cn(jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Pr.fromString(e,...t));return Y_(s),new wl(i.firestore,null,s)}}function Af(i,e,...t){if(i=(0,Ht.m9)(i),1===arguments.length&&(e=pn.R()),cg("doc","path",e),i instanceof Eh){const s=Pr.fromString(e,...t);return Z_(s),new Po(i,null,new ir(s))}{if(!(i instanceof Po||i instanceof wl))throw new Cn(jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Pr.fromString(e,...t));return Z_(s),new Po(i.firestore,i instanceof wl?i.converter:null,new ir(s))}}function ty(i,e){return i=(0,Ht.m9)(i),e=(0,Ht.m9)(e),(i instanceof Po||i instanceof wl)&&(e instanceof Po||e instanceof wl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function hg(i,e){return i=(0,Ht.m9)(i),e=(0,Ht.m9)(e),i instanceof ba&&e instanceof ba&&i.firestore===e.firestore&&Tu(i._query,e._query)&&i.converter===e.converter}function ny(i,e=10240){let t=0;return{read:()=>(0,xe.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ry{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Qi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.ku)}`))},s=>this.metadata.reject(s))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,xe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,xe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const s=e.vc.decode(t),u=Number(s);isNaN(u)&&e.Dc(`length string (${s}) is not valid number`);const m=yield e.Cc(u);return new D0(JSON.parse(m),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,xe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Cc(e){var t=this;return(0,xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const s=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Cn(jt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,xe.Z)(function*(m,E){const R=Gn(m),X=p(R.yt)+"/documents",se={documents:E.map(kn=>ku(R.yt,kn))},Se=yield R._o("BatchGetDocuments",X,se,E.length),st=new Map;Se.forEach(kn=>{const Xn=function Ee(i,e){return"found"in e?function(t,s){Bn(!!s.found);const u=Pl(t,s.found.name),m=Ro(s.found.updateTime),E=s.found.createTime?Ro(s.found.createTime):Vn.min(),R=new Bo({mapValue:{fields:s.found.fields}});return Rs.newFoundDocument(u,m,E,R)}(i,e):"missing"in e?function(t,s){Bn(!!s.missing),Bn(!!s.readTime);const u=Pl(t,s.missing),m=Ro(s.readTime);return Rs.newNoDocument(u,m)}(i,e):In()}(R.yt,kn);st.set(Xn.key.toString(),Xn)});const qt=[];return E.forEach(kn=>{const Xn=st.get(kn.toString());Bn(!!Xn),qt.push(Xn)}),qt}),function(m,E){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new qo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const m=ir.fromPath(u);e.mutations.push(new Ko(m,e.precondition(m)))}),yield(s=(0,xe.Z)(function*(u,m){const E=Gn(u),R=p(E.yt)+"/documents",X={writes:m.map(se=>gn(E.yt,se))};yield E.ao("Commit",R,X)}),function(u,m){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw In();t=Vn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Cn(jt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Vn.min())?ro.exists(!1):ro.updateTime(t):ro.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vn.min()))throw new Cn(jt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ro.updateTime(t)}return ro.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class x0{constructor(e,t,s,u,m){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=u,this.deferred=m,this.kc=s.maxAttempts,this.xo=new dh(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,xe.Z)(function*(){const t=new fg(e.datastore),s=e.Mc(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(m=>{e.Fc(m)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!ha(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ua(t)}return!1}}class pg{constructor(e,t,s,u){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=u,this.user=Ce.UNAUTHENTICATED,this.clientId=pn.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var E=(0,xe.Z)(function*(R){Pt("FirestoreClient","Received user=",R.uid),yield m.authCredentialListener(R),m.user=R});return function(R){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(s,E=>(Pt("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Cn(jt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const u=Zc(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function oy(i,e){return ay.apply(this,arguments)}function ay(){return ay=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Pt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,xe.Z)(function*(m){s.isEqual(m)||(yield ll(e.localStore,m),s=m)});return function(m){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),ay.apply(this,arguments)}function Vd(i,e){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Ch(i);Pt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(u=>jp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,m)=>jp(e.remoteStore,m)),i.onlineComponents=e}),Mf.apply(this,arguments)}function Ch(i){return bh.apply(this,arguments)}function bh(){return bh=(0,xe.Z)(function*(i){return i.offlineComponents||(Pt("FirestoreClient","Using default OfflineComponentProvider"),yield oy(i,new q_)),i.offlineComponents}),bh.apply(this,arguments)}function Rf(i){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,xe.Z)(function*(i){return i.onlineComponents||(Pt("FirestoreClient","Using default OnlineComponentProvider"),yield Vd(i,new vh)),i.onlineComponents}),Ud.apply(this,arguments)}function Th(i){return Ch(i).then(e=>e.persistence)}function Bd(i){return Ch(i).then(e=>e.localStore)}function ly(i){return Rf(i).then(e=>e.remoteStore)}function gg(i){return Rf(i).then(e=>e.syncEngine)}function Vu(i){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,xe.Z)(function*(i){const e=yield Rf(i),t=e.eventManager;return t.onListen=j_.bind(null,e.syncEngine),t.onUnlisten=H_.bind(null,e.syncEngine),t}),Pf.apply(this,arguments)}function yg(i,e,t={}){const s=new Qi;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(u,m,E,R,X){const se=new xf({next:st=>{m.enqueueAndForget(()=>Wp(u,Se));const qt=st.docs.has(E);!qt&&st.fromCache?X.reject(new Cn(jt.UNAVAILABLE,"Failed to get document because the client is offline.")):qt&&st.fromCache&&R&&"server"===R.source?X.reject(new Cn(jt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(st)},error:st=>X.reject(st)}),Se=new Um(nu(E.path),se,{includeMetadataChanges:!0,Nu:!0});return Lm(u,Se)}(yield Vu(i),i.asyncQueue,e,t,s)})),s.promise}function vg(i,e,t={}){const s=new Qi;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(u,m,E,R,X){const se=new xf({next:st=>{m.enqueueAndForget(()=>Wp(u,Se)),st.fromCache&&"server"===R.source?X.reject(new Cn(jt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(st)},error:st=>X.reject(st)}),Se=new Um(E,se,{includeMetadataChanges:!0,Nu:!0});return Lm(u,Se)}(yield Vu(i),i.asyncQueue,e,t,s)})),s.promise}class Eg{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new dh(this,"async_queue_retry"),this.Wc=()=>{const t=xd();t&&Pt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=xd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=xd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Qi;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,xe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!aa(t))throw t;Pt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{throw this.Kc=s,this.Gc=!1,rr("INTERNAL UNHANDLED ERROR: ",function(m){let E=m.message||"";return m.stack&&(E=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),E}(s)),s}).then(s=>(this.Gc=!1,s))));return this.Bc=t,t}enqueueAfterDelay(e,t,s){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=Gp.createAndSchedule(this,e,t,s,m=>this.Yc(m));return this.Uc.push(u),u}zc(){this.Kc&&In()}verifyOperationInProgress(){}Xc(){var e=this;return(0,xe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Nf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class J_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class So extends Eh{constructor(e,t,s,u){super(e,t,s,u),this.type="firestore",this._queue=new Eg,this._persistenceKey=(null==u?void 0:u.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cg(this),this._firestoreClient.terminate()}}function Yo(i){return i._firestoreClient||Cg(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Cg(i){var e;const t=i._freezeSettings(),s=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new dl(i._databaseId,m,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var m,R;i._firestoreClient=new pg(i._authCredentials,i._appCheckCredentials,i._queue,s)}function bg(i,e,t){const s=new Qi;return i.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield oy(i,t),yield Vd(i,e),s.resolve()}catch(u){const m=u;if(!("FirebaseError"===(E=m).name?E.code===jt.FAILED_PRECONDITION||E.code===jt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&E instanceof DOMException)||22===E.code||20===E.code||11===E.code))throw m;Cr("Error enabling offline persistence. Falling back to persistence disabled: "+m),s.reject(m)}var E})).then(()=>s.promise)}function Cy(i){if(i._initialized||i._terminated)throw new Cn(jt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yo(oo.fromBase64String(e))}catch(t){throw new Cn(jt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yo(oo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Cn(jt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ed{constructor(e){this._methodName=e}}class Ih{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Cn(jt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Cn(jt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const nv=/^__.*__$/;class by{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new El(e,this.data,this.fieldMask,t,this.fieldTransforms):new ou(e,this.data,t,this.fieldTransforms)}}class Tg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new El(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function td(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw In()}}class Of{constructor(e,t,s,u,m,E){this.settings=e,this.databaseId=t,this.yt=s,this.ignoreUndefinedProperties=u,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=E||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Of(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.ua(e),u}ca(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return jd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(td(this.sa)&&nv.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class rv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=s||ch(e)}da(e,t,s,u=!1){return new Of({sa:e,methodName:t,fa:s,path:yi.emptyPath(),oa:!1,la:u},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function yc(i){const e=i._freezeSettings(),t=ch(i._databaseId);return new rv(i._databaseId,!!e.ignoreUndefinedProperties,t)}function kf(i,e,t,s,u,m={}){const E=i.da(m.merge||m.mergeFields?2:0,e,t,u);Dg("Data must be an object, but it was:",E,s);const R=Ig(s,E);let X,se;if(m.merge)X=new zo(E.fieldMask),se=E.fieldTransforms;else if(m.mergeFields){const Se=[];for(const st of m.mergeFields){const qt=Ag(e,st,t);if(!E.contains(qt))throw new Cn(jt.INVALID_ARGUMENT,`Field '${qt}' is specified in your field mask but missing from your input data.`);Hd(Se,qt)||Se.push(qt)}X=new zo(Se),se=E.fieldTransforms.filter(st=>X.covers(st.field))}else X=null,se=E.fieldTransforms;return new by(new Bo(R),X,se)}class $d extends ed{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function iv(i,e,t){return new Of({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Sh extends ed{_toFieldTransform(e){return new Ma(e.path,new Au)}isEqual(e){return e instanceof Sh}}class wg extends ed{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=iv(this,e,!0),s=this._a.map(m=>Pa(m,t)),u=new yl(s);return new Ma(e.path,u)}isEqual(e){return this===e}}class Zl extends ed{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=iv(this,e,!0),s=this._a.map(m=>Pa(m,t)),u=new _l(s);return new Ma(e.path,u)}isEqual(e){return this===e}}class sv extends ed{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Wo(e.yt,xc(e.yt,this.wa));return new Ma(e.path,t)}isEqual(e){return this===e}}function Ff(i,e,t,s){const u=i.da(1,e,t);Dg("Data must be an object, but it was:",u,s);const m=[],E=Bo.empty();$a(s,(X,se)=>{const Se=Lf(e,X,t);se=(0,Ht.m9)(se);const st=u.ca(Se);if(se instanceof $d)m.push(Se);else{const qt=Pa(se,st);null!=qt&&(m.push(Se),E.set(Se,qt))}});const R=new zo(m);return new Tg(E,R,u.fieldTransforms)}function kl(i,e,t,s,u,m){const E=i.da(1,e,t),R=[Ag(e,s,t)],X=[u];if(m.length%2!=0)throw new Cn(jt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let qt=0;qt<m.length;qt+=2)R.push(Ag(e,m[qt])),X.push(m[qt+1]);const se=[],Se=Bo.empty();for(let qt=R.length-1;qt>=0;--qt)if(!Hd(se,R[qt])){const kn=R[qt];let Xn=X[qt];Xn=(0,Ht.m9)(Xn);const Nr=E.ca(kn);if(Xn instanceof $d)se.push(kn);else{const ci=Pa(Xn,Nr);null!=ci&&(se.push(kn),Se.set(kn,ci))}}const st=new zo(se);return new Tg(Se,st,E.fieldTransforms)}function Fl(i,e,t,s=!1){return Pa(t,i.da(s?4:3,e))}function Pa(i,e){if(Sg(i=(0,Ht.m9)(i)))return Dg("Unsupported field value:",e,i),Ig(i,e);if(i instanceof ed)return function(t,s){if(!td(s.sa))throw s.ha(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,s){const u=[];let m=0;for(const E of t){let R=Pa(E,s.aa(m));null==R&&(R={nullValue:"NULL_VALUE"}),u.push(R),m++}return{arrayValue:{values:u}}}(i,e)}return function(t,s){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xc(s.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=ar.fromDate(t);return{timestampValue:ol(s.yt,u)}}if(t instanceof ar){const u=new ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ol(s.yt,u)}}if(t instanceof Ih)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yo)return{bytesValue:Fc(s.yt,t._byteString)};if(t instanceof Po){const u=s.databaseId,m=t.firestore._databaseId;if(!m.isEqual(u))throw s.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:al(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ha(`Unsupported field value: ${Df(t)}`)}(i,e)}function Ig(i,e){const t={};return vu(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$a(i,(s,u)=>{const m=Pa(u,e.ra(s));null!=m&&(t[s]=m)}),{mapValue:{fields:t}}}function Sg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ar||i instanceof Ih||i instanceof yo||i instanceof Po||i instanceof ed)}function Dg(i,e,t){if(!Sg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Df(t);throw e.ha("an object"===s?i+" a custom object":i+" "+s)}var s}function Ag(i,e,t){if((e=(0,Ht.m9)(e))instanceof gu)return e._internalPath;if("string"==typeof e)return Lf(i,e);throw jd("Field path arguments must be of type string or ",i,!1,void 0,t)}const ov=new RegExp("[~\\*/\\[\\]]");function Lf(i,e,t){if(e.search(ov)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new gu(...e.split("."))._internalPath}catch(s){throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function jd(i,e,t,s,u){const m=s&&!s.isEmpty(),E=void 0!==u;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let X="";return(m||E)&&(X+=" (found",m&&(X+=` in field ${s}`),E&&(X+=` in document ${u}`),X+=")"),new Cn(jt.INVALID_ARGUMENT,R+i+X)}function Hd(i,e){return i.some(t=>t.isEqual(e))}class Dh{constructor(e,t,s,u,m){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Po(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ty(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ty extends Dh{data(){return super.data()}}function Vf(i,e){return"string"==typeof e?Lf(i,e):e instanceof gu?e._internalPath:e._delegate._internalPath}function xg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Cn(jt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class _c extends Uf{}function vc(i,e,...t){let s=[];e instanceof Uf&&s.push(e),s=s.concat(t),function(u){const m=u.filter(R=>R instanceof Ec).length,E=u.filter(R=>R instanceof Gd).length;if(m>1||m>0&&E>0)throw new Cn(jt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class Gd extends _c{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Gd(e,t,s)}_apply(e){const t=this._parse(e);return Ny(e._query,t),new ba(e.firestore,e.converter,bu(e._query,t))}_parse(e){const t=yc(e.firestore);return function(u,m,E,R,X,se,Se){let st;if(X.isKeyField()){if("array-contains"===se||"array-contains-any"===se)throw new Cn(jt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${se}' queries on documentId().`);if("in"===se||"not-in"===se){Py(Se,se);const qt=[];for(const kn of Se)qt.push(Ry(R,u,kn));st={arrayValue:{values:qt}}}else st=Ry(R,u,Se)}else"in"!==se&&"not-in"!==se&&"array-contains-any"!==se||Py(Se,se),st=Fl(E,"where",Se,"in"===se||"not-in"===se);return ni.create(X,se,st)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ec extends Uf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ec(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:os.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let m=s;const E=u.getFlattenedFilters();for(const R of E)Ny(m,R),m=bu(m,R)}(e._query,t),new ba(e.firestore,e.converter,bu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bf extends _c{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bf(e,t)}_apply(e){const t=function(s,u,m){if(null!==s.startAt)throw new Cn(jt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Cn(jt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new Mo(u,m);return function(R,X){if(null===Qu(R)){const se=iu(R);null!==se&&Oy(0,se,X.field)}}(s,E),E}(e._query,this._field,this._direction);return new ba(e.firestore,e.converter,function(s,u){const m=s.explicitOrderBy.concat([u]);return new gl(s.path,s.collectionGroup,m,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Ah extends _c{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ah(e,t,s)}_apply(e){return new ba(e.firestore,e.converter,su(e._query,this._limit,this._limitType))}}class xh extends _c{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new xh(e,t,s)}_apply(e){const t=My(e,this.type,this._docOrFields,this._inclusive);return new ba(e.firestore,e.converter,(u=t,new gl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class $f extends _c{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new $f(e,t,s)}_apply(e){const t=My(e,this.type,this._docOrFields,this._inclusive);return new ba(e.firestore,e.converter,(u=t,new gl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function My(i,e,t,s){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof Dh)return function(u,m,E,R,X){if(!R)throw new Cn(jt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const se=[];for(const Se of Ca(u))if(Se.field.isKeyField())se.push(Da(m,R.key));else{const st=R.data.field(Se.field);if(Vl(st))throw new Cn(jt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Se.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===st){const qt=Se.field.canonicalString();throw new Cn(jt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${qt}' (used as the orderBy) does not exist.`)}se.push(st)}return new Hr(se,X)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const u=yc(i.firestore);return function(m,E,R,X,se,Se){const st=m.explicitOrderBy;if(se.length>st.length)throw new Cn(jt.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const qt=[];for(let kn=0;kn<se.length;kn++){const Xn=se[kn];if(st[kn].field.isKeyField()){if("string"!=typeof Xn)throw new Cn(jt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof Xn}`);if(!ml(m)&&-1!==Xn.indexOf("/"))throw new Cn(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${Xn}' contains a slash.`);const Nr=m.path.child(Pr.fromString(Xn));if(!ir.isDocumentKey(Nr))throw new Cn(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${Nr}' is not because it contains an odd number of segments.`);const ci=new ir(Nr);qt.push(Da(E,ci))}else{const Nr=Fl(R,X,Xn);qt.push(Nr)}}return new Hr(qt,Se)}(i._query,i.firestore._databaseId,u,e,t,s)}}function Ry(i,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new Cn(jt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ml(e)&&-1!==t.indexOf("/"))throw new Cn(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Pr.fromString(t));if(!ir.isDocumentKey(s))throw new Cn(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Da(i,new ir(s))}if(t instanceof Po)return Da(i,t._key);throw new Cn(jt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(t)}.`)}function Py(i,e){if(!Array.isArray(i)||0===i.length)throw new Cn(jt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Cn(jt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ny(i,e){if(e.isInequality()){const s=iu(i),u=e.field;if(null!==s&&!s.isEqual(u))throw new Cn(jt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${u.toString()}'`);const m=Qu(i);null!==m&&Oy(0,u,m)}const t=function(s,u){for(const m of s)for(const E of m.getFlattenedFilters())if(u.indexOf(E.op)>=0)return E.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Cn(jt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Oy(i,e,t){if(!t.isEqual(e))throw new Cn(jt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Rg{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return eo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(el(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw In()}}convertObject(e,t){const s={};return $a(e.fields,(u,m)=>{s[u]=this.convertValue(m,t)}),s}convertGeoPoint(e){return new Ih(eo(e.latitude),eo(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=tl(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Sa(e));default:return null}}convertTimestamp(e){const t=Ga(e);return new ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Pr.fromString(e);Bn(lt(s));const u=new ea(s.get(1),s.get(3)),m=new ir(s.popFirst(5));return u.isEqual(t)||rr(`Document ${m} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function jf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class cv extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Po(this.firestore,null,t)}}class nd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uu extends Dh{constructor(e,t,s,u,m,E){super(e,t,s,u,E),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Mh extends Uu{data(e={}){return super.data(e)}}class Cc{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new nd(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Mh(this._firestore,this._userDataWriter,s.key,s,new nd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Cn(jt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let m=0;return s._snapshot.docChanges.map(E=>({type:"added",doc:new Mh(s._firestore,s._userDataWriter,E.doc.key,E.doc,new nd(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:m++}))}{let m=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(E=>u||3!==E.type).map(E=>{const R=new Mh(s._firestore,s._userDataWriter,E.doc.key,E.doc,new nd(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter);let X=-1,se=-1;return 0!==E.type&&(X=m.indexOf(E.doc.key),m=m.delete(E.doc.key)),1!==E.type&&(m=m.add(E.doc),se=m.indexOf(E.doc.key)),{type:dv(E.type),doc:R,oldIndex:X,newIndex:se}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return In()}}function Pg(i,e){return i instanceof Uu&&e instanceof Uu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Cc&&e instanceof Cc&&i._firestore===e._firestore&&hg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Bu extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Po(this.firestore,null,t)}}function Ng(i,e,t){i=Es(i,Po);const s=Es(i.firestore,So),u=jf(i.converter,e,t);return Yl(s,[kf(yc(s),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,ro.none())])}function Og(i,e,t,...s){i=Es(i,Po);const u=Es(i.firestore,So),m=yc(u);let E;return E="string"==typeof(e=(0,Ht.m9)(e))||e instanceof gu?kl(m,"updateDoc",i._key,e,t,s):Ff(m,"updateDoc",i._key,e),Yl(u,[E.toMutation(i._key,ro.exists(!0))])}function jy(i,...e){var t,s,u;i=(0,Ht.m9)(i);let m={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||Nf(e[E])||(m=e[E],E++);const R={includeMetadataChanges:m.includeMetadataChanges};if(Nf(e[E])){const st=e[E];e[E]=null===(t=st.next)||void 0===t?void 0:t.bind(st),e[E+1]=null===(s=st.error)||void 0===s?void 0:s.bind(st),e[E+2]=null===(u=st.complete)||void 0===u?void 0:u.bind(st)}let X,se,Se;if(i instanceof Po)se=Es(i.firestore,So),Se=nu(i._key.path),X={next:st=>{e[E]&&e[E](Hy(se,i,st))},error:e[E+1],complete:e[E+2]};else{const st=Es(i,ba);se=Es(st.firestore,So),Se=st._query;const qt=new Bu(se);X={next:kn=>{e[E]&&e[E](new Cc(se,qt,st,kn))},error:e[E+1],complete:e[E+2]},xg(i._query)}return function(st,qt,kn,Xn){const Nr=new xf(Xn),ci=new Um(qt,Nr,kn);return st.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Lm(yield Vu(st),ci)})),()=>{Nr.bc(),st.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Wp(yield Vu(st),ci)}))}}(Yo(se),Se,R,X)}function Yl(i,e){return function(t,s){const u=new Qi;return t.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Ef(i,e,t){return hc.apply(this,arguments)}(yield gg(t),s,u)})),u.promise}(Yo(i),e)}function Hy(i,e,t){const s=t.docs.get(e._key),u=new Bu(i);return new Uu(i,u,e._key,s,new nd(t.hasPendingWrites,t.fromCache),e.converter)}const zy={maxAttempts:5};class Fg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yc(e)}set(e,t,s){this._verifyNotCommitted();const u=id(e,this._firestore),m=jf(u.converter,t,s),E=kf(this._dataReader,"WriteBatch.set",u._key,m,null!==u.converter,s);return this._mutations.push(E.toMutation(u._key,ro.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const m=id(e,this._firestore);let E;return E="string"==typeof(t=(0,Ht.m9)(t))||t instanceof gu?kl(this._dataReader,"WriteBatch.update",m._key,t,s,u):Ff(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(E.toMutation(m._key,ro.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=id(e,this._firestore);return this._mutations=this._mutations.concat(new qo(t._key,ro.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Cn(jt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function id(i,e){if((i=(0,Ht.m9)(i)).firestore!==e)throw new Cn(jt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Oi extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yc(e)}get(e){const t=id(e,this._firestore),s=new cv(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return In();const m=u[0];if(m.isFoundDocument())return new Dh(this._firestore,s,m.key,m,t.converter);if(m.isNoDocument())return new Dh(this._firestore,s,t._key,null,t.converter);throw In()})}set(e,t,s){const u=id(e,this._firestore),m=jf(u.converter,t,s),E=kf(this._dataReader,"Transaction.set",u._key,m,null!==u.converter,s);return this._transaction.set(u._key,E),this}update(e,t,s,...u){const m=id(e,this._firestore);let E;return E="string"==typeof(t=(0,Ht.m9)(t))||t instanceof gu?kl(this._dataReader,"Transaction.update",m._key,t,s,u):Ff(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,E),this}delete(e){const t=id(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=id(e,this._firestore),s=new Bu(this._firestore);return super.get(e).then(u=>new Uu(this._firestore,s,t._key,u._document,new nd(!1,!1),t.converter))}}function Vg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Cn("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ug(){if("undefined"==typeof Uint8Array)throw new Cn("unimplemented","Uint8Arrays are not available in this environment.")}function Bg(){if(!function ja(){return"undefined"!=typeof atob}())throw new Cn("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Ze=Ge.SDK_VERSION,(0,Ge._registerComponent)(new wt.wA("firestore",(t,{instanceIdentifier:s,options:u})=>{const m=t.getProvider("app").getImmediate(),E=new So(new M(t.getProvider("auth-internal")),new _e(t.getProvider("app-check-internal")),function(R,X){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new Cn(jt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(R.options.projectId,X)}(m,s),m);return u=Object.assign({useFetchStreams:e},u),E._setSettings(u),E},"PUBLIC").setMultipleInstances(!0)),(0,Ge.registerVersion)(le,"3.8.0",i),(0,Ge.registerVersion)(le,"3.8.0","esm2017")}();class zd{constructor(e){this._delegate=e}static fromBase64String(e){return Bg(),new zd(yo.fromBase64String(e))}static fromUint8Array(e){return Ug(),new zd(yo.fromUint8Array(e))}toBase64(){return Bg(),this._delegate.toBase64()}toUint8Array(){return Ug(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zf(i){return function vv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class Ev{enableIndexedDbPersistence(e,t){return function gy(i,e){Cy(i=Es(i,So));const t=Yo(i),s=i._freezeSettings(),u=new vh;return bg(t,u,new Qm(u,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function my(i){Cy(i=Es(i,So));const e=Yo(i),t=i._freezeSettings(),s=new vh;return bg(e,s,new ug(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yy(i){if(i._initialized&&!i._terminated)throw new Cn(jt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield(t=(0,xe.Z)(function*(s){if(!wa.C())return Promise.resolve();const u=s+"main";yield wa.delete(u)}),function(s){return t.apply(this,arguments)})(ef(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class qy{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof ea||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function dg(i,e,t,s={}){var u;const m=(i=Es(i,Eh))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&Cr("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let E,R;if("string"==typeof s.mockUserToken)E=s.mockUserToken,R=Ce.MOCK_USER;else{E=(0,Ht.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const X=s.mockUserToken.sub||s.mockUserToken.user_id;if(!X)throw new Cn(jt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Ce(X)}i._authCredentials=new O(new bo(E,R))}}(this._delegate,e,t,s)}enableNetwork(){return function vy(i){return function uy(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Th(i),t=yield ly(i);return e.setNetworkEnabled(!0),function(s){const u=Gn(s);return u._u.delete(0),Md(u)}(t)}))}(Yo(i=Es(i,So)))}(this._delegate)}disableNetwork(){return function M0(i){return function mg(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Th(i),t=yield ly(i);return e.setNetworkEnabled(!1),(s=(0,xe.Z)(function*(u){const m=Gn(u);m._u.add(0),yield Kc(m),m.gu.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(Yo(i=Es(i,So)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,K_("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _y(i){return function(e){const t=new Qi;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Cf(i,e){return ul.apply(this,arguments)}(yield gg(e),t)})),t.promise}(Yo(i=Es(i,So)))}(this._delegate)}onSnapshotsInSync(e){return function hv(i,e){return function X_(i,e){const t=new xf(e);return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield Vu(i),u=t,Gn(s).Ru.add(u),void u.next();var s,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield Vu(i),u=t,void Gn(s).Ru.delete(u);var s,u}))}}(Yo(i=Es(i,So)),Nf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Cn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sd(this,Jm(this._delegate,e))}catch(t){throw Ba(t,"collection()","Firestore.collection()")}}doc(e){try{return new Il(this,Af(this._delegate,e))}catch(t){throw Ba(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qa(this,function ey(i,e){if(i=Es(i,Eh),cg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Cn(jt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ba(i,null,(t=e,new gl(Pr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ba(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fv(i,e,t){i=Es(i,So);const s=Object.assign(Object.assign({},zy),t);return function(u){if(u.maxAttempts<1)throw new Cn(jt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(u,m,E){const R=new Qi;return u.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const X=yield function wh(i){return Rf(i).then(e=>e.datastore)}(u);new x0(u.asyncQueue,X,E,m,R).run()})),R.promise}(Yo(i),u=>e(new Oi(i,u)),s)}(this._delegate,t=>e(new Ky(this,t)))}batch(){return Yo(this._delegate),new Zy(new Fg(this._delegate,e=>Yl(this._delegate,e)))}loadBundle(e){return function tv(i,e){const t=Yo(i=Es(i,So)),s=new J_;return function dy(i,e,t,s){const u=function(m,E){let R;return R="string"==typeof m?(new TextEncoder).encode(m):m,X=function(X,se){if(X instanceof Uint8Array)return ny(X,void 0);if(X instanceof ArrayBuffer)return ny(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new ry(X,E);var X}(t,ch(e));i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function W_(i,e,t){const s=Gn(i);var u;(u=(0,xe.Z)(function*(m,E,R){try{const X=yield E.getMetadata();if(yield function(qt,kn){const Xn=Gn(qt),Nr=Ro(kn.createTime);return Xn.persistence.runTransaction("hasNewerBundle","readonly",ci=>Xn.Ns.getBundleMetadata(ci,kn.id)).then(ci=>!!ci&&ci.createTime.compareTo(Nr)>=0)}(m.localStore,X))return yield E.close(),R._completeWith({taskState:"Success",documentsLoaded:(qt=X).totalDocuments,bytesLoaded:qt.totalBytes,totalDocuments:qt.totalDocuments,totalBytes:qt.totalBytes}),Promise.resolve(new Set);R._updateProgress(Kp(X));const se=new Bm(X,m.localStore,E.yt);let Se=yield E.mc();for(;Se;){const qt=yield se.Fu(Se);qt&&R._updateProgress(qt),Se=yield E.mc()}const st=yield se.complete();return yield cl(m,st.Lu,void 0),yield function(qt,kn){const Xn=Gn(qt);return Xn.persistence.runTransaction("Save bundle","readwrite",Nr=>Xn.Ns.saveBundleMetadata(Nr,kn))}(m.localStore,X),R._completeWith(st.progress),Promise.resolve(st.Bu)}catch(X){return Cr("SyncEngine",`Loading bundle failed with ${X}`),R._failWith(X),Promise.resolve(new Set)}var qt}),function(m,E,R){return u.apply(this,arguments)})(s,e,t).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield gg(i),u,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Ey(i,e){return function hy(i,e){return i.asyncQueue.enqueue((0,xe.Z)(function*(){return function(t,s){const u=Gn(t);return u.persistence.runTransaction("Get named query","readonly",m=>u.Ns.getNamedQuery(m,s))}(yield Bd(i),e)}))}(Yo(i=Es(i,So)),e).then(t=>t?new ba(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Qa(this,t):null)}}class bc extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new zd(new yo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Il.forKey(t,this.firestore,null)}}class Ky{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bc(e)}get(e){const t=Tc(e);return this._delegate.get(t).then(s=>new $u(this._firestore,new Uu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=Tc(e);return s?(Vg("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=Tc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=Tc(e);return this._delegate.delete(t),this}}class Zy{constructor(e){this._delegate=e}set(e,t,s){const u=Tc(e);return s?(Vg("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=Tc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=Tc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mu{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Mh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ju(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=mu.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let m=u.get(t);return m||(m=new mu(e,new bc(e),t),u.set(t,m)),m}}mu.INSTANCES=new WeakMap;class Il{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bc(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Cn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Il(t,new Po(t._delegate,s,new ir(e)))}static forKey(e,t,s){return new Il(t,new Po(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new sd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sd(this.firestore,Jm(this._delegate,e))}catch(t){throw Ba(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Po&&ty(this._delegate,e)}set(e,t){t=Vg("DocumentReference.set",t);try{return t?Ng(this._delegate,e,t):Ng(this._delegate,e)}catch(s){throw Ba(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Og(this._delegate,e):Og(this._delegate,e,t,...s)}catch(u){throw Ba(u,"updateDoc()","DocumentReference.update()")}}delete(){return function kg(i){return Yl(Es(i.firestore,So),[new qo(i._key,ro.none())])}(this._delegate)}onSnapshot(...e){const t=$g(e),s=Yy(e,u=>new $u(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return jy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Ly(i){i=Es(i,Po);const e=Es(i.firestore,So),t=Yo(e),s=new Bu(e);return function cy(i,e){const t=new Qi;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(u,m,E){try{const R=yield function(X,se){const Se=Gn(X);return Se.persistence.runTransaction("read document","readonly",st=>Se.localDocuments.getDocument(st,se))}(u,m);R.isFoundDocument()?E.resolve(R):R.isNoDocument()?E.resolve(null):E.reject(new Cn(jt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const X=Zc(R,`Failed to get document '${m} from cache`);E.reject(X)}}),function(u,m,E){return s.apply(this,arguments)})(yield Bd(i),e,t);var s})),t.promise}(t,i._key).then(u=>new Uu(e,s,i._key,u,new nd(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Vy(i){i=Es(i,Po);const e=Es(i.firestore,So);return yg(Yo(e),i._key,{source:"server"}).then(t=>Hy(e,i,t))}(this._delegate):function Fy(i){i=Es(i,Po);const e=Es(i.firestore,So);return yg(Yo(e),i._key).then(t=>Hy(e,i,t))}(this._delegate),t.then(s=>new $u(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Il(this.firestore,this._delegate.withConverter(e?mu.getInstance(this.firestore,e):null))}}function Ba(i,e,t){return i.message=i.message.replace(e,t),i}function $g(i){for(const e of i)if("object"==typeof e&&!zf(e))return e;return{}}function Yy(i,e){var t,s;let u;return u=zf(i[0])?i[0]:zf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{u.next&&u.next(e(m))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class $u{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Il(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Pg(this._delegate,e._delegate)}}class ju extends $u{data(e){const t=this._delegate.data(e);return function cs(i,e){i||In()}(void 0!==t),t}}class Qa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bc(e)}where(e,t,s){try{return new Qa(this.firestore,vc(this._delegate,function wy(i,e,t){const s=e,u=Vf("where",i);return Gd._create(u,s,t)}(e,t,s)))}catch(u){throw Ba(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qa(this.firestore,vc(this._delegate,function Sy(i,e="asc"){const t=e,s=Vf("orderBy",i);return Bf._create(s,t)}(e,t)))}catch(s){throw Ba(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qa(this.firestore,vc(this._delegate,function Dy(i){return Q_("limit",i),Ah._create("limit",i,"F")}(e)))}catch(t){throw Ba(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qa(this.firestore,vc(this._delegate,function Ay(i){return Q_("limitToLast",i),Ah._create("limitToLast",i,"L")}(e)))}catch(t){throw Ba(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qa(this.firestore,vc(this._delegate,function xy(...i){return xh._create("startAt",i,!0)}(...e)))}catch(t){throw Ba(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qa(this.firestore,vc(this._delegate,function av(...i){return xh._create("startAfter",i,!1)}(...e)))}catch(t){throw Ba(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qa(this.firestore,vc(this._delegate,function lv(...i){return $f._create("endBefore",i,!1)}(...e)))}catch(t){throw Ba(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qa(this.firestore,vc(this._delegate,function uv(...i){return $f._create("endAt",i,!0)}(...e)))}catch(t){throw Ba(t,"endAt()","Query.endAt()")}}isEqual(e){return hg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function By(i){i=Es(i,ba);const e=Es(i.firestore,So),t=Yo(e),s=new Bu(e);return function _g(i,e){const t=new Qi;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(u,m,E){try{const R=yield nf(u,m,!0),X=new Zp(m,R.Hi),se=X.Wu(R.documents),Se=X.applyChanges(se,!1);E.resolve(Se.snapshot)}catch(R){const X=Zc(R,`Failed to execute query '${m} against cache`);E.reject(X)}}),function(u,m,E){return s.apply(this,arguments)})(yield Bd(i),e,t);var s})),t.promise}(t,i._query).then(u=>new Cc(e,s,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function $y(i){i=Es(i,ba);const e=Es(i.firestore,So),t=Yo(e),s=new Bu(e);return vg(t,i._query,{source:"server"}).then(u=>new Cc(e,s,i,u))}(this._delegate):function Uy(i){i=Es(i,ba);const e=Es(i.firestore,So),t=Yo(e),s=new Bu(e);return xg(i._query),vg(t,i._query).then(u=>new Cc(e,s,i,u))}(this._delegate),t.then(s=>new jg(this.firestore,new Cc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=$g(e),s=Yy(e,u=>new jg(this.firestore,new Cc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return jy(this._delegate,t,s)}withConverter(e){return new Qa(this.firestore,this._delegate.withConverter(e?mu.getInstance(this.firestore,e):null))}}class bv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ju(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ju(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bv(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new ju(this._firestore,s))})}isEqual(e){return Pg(this._delegate,e._delegate)}}class sd extends Qa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Il(this.firestore,e):null}doc(e){try{return new Il(this.firestore,void 0===e?Af(this._delegate):Af(this._delegate,e))}catch(t){throw Ba(t,"doc()","CollectionReference.doc()")}}add(e){return function rd(i,e){const t=Es(i.firestore,So),s=Af(i),u=jf(i.converter,e);return Yl(t,[kf(yc(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,ro.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Il(this.firestore,t))}isEqual(e){return ty(this._delegate,e._delegate)}withConverter(e){return new sd(this.firestore,this._delegate.withConverter(e?mu.getInstance(this.firestore,e):null))}}function Tc(i){return Es(i,Po)}class Wf{constructor(...e){this._delegate=new gu(...e)}static documentId(){return new Wf(yi.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof gu&&this._delegate._internalPath.isEqual(e._internalPath)}}class od{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gv(){return new Sh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new od(e)}static delete(){const e=function pv(){return new $d("deleteField")}();return e._methodName="FieldValue.delete",new od(e)}static arrayUnion(...e){const t=function Hf(...i){return new wg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new od(t)}static arrayRemove(...e){const t=function mv(...i){return new Zl("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new od(t)}static increment(e){const t=function Gf(i){return new sv("increment",i)}(e);return t._methodName="FieldValue.increment",new od(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Qy={Firestore:qy,GeoPoint:Ih,Timestamp:ar,Blob:zd,Transaction:Ky,WriteBatch:Zy,DocumentReference:Il,DocumentSnapshot:$u,Query:Qa,QueryDocumentSnapshot:ju,QuerySnapshot:jg,CollectionReference:sd,FieldPath:Wf,FieldValue:od,setLogLevel:function Cv(i){!function fn(i){Ke.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function wv(i){(function Tv(i,e){i.INTERNAL.registerComponent(new wt.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},Qy)))})(i,(e,t)=>new qy(e,t,new Ev)),i.registerVersion("@firebase/firestore-compat","0.3.0")}(dn.Z);var ad=j(1205),N0=j(6217),O0=j(9260);function Hg(i,e){return function k0(i,e=k.z){return new he.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Gg(i,e){return Hg(i,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function Kf(i,e){return Gg(i,e).pipe((0,wn.O)(void 0),at(),(0,_t.U)(([t,s])=>{const u=s.payload.docChanges(),m=u.map(E=>({type:E.type,payload:E}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((E,R)=>{const X=u.find(Se=>Se.doc.ref.isEqual(E.ref)),se=null==t?void 0:t.payload.docs.find(Se=>Se.ref.isEqual(E.ref));X&&JSON.stringify(X.doc.metadata)===JSON.stringify(E.metadata)||!X&&se&&JSON.stringify(se.metadata)===JSON.stringify(E.metadata)||m.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:E}})}),m}))}function zg(i,e,t){return Kf(i,t).pipe((0,ln.R)((s,u)=>function Rh(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function Iv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Wg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Wg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Wg(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(m=>m.payload),e),[]),function Pe(i,e=Ne.y){return i=null!=i?i:vt,(0,ht.e)((t,s)=>{let u,m=!0;t.subscribe((0,We.x)(s,E=>{const R=e(E);(m||!i(u,R))&&(m=!1,u=R,s.next(E))}))})}(),(0,_t.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function Wg(i,e,t,...s){const u=i.slice();return u.splice(e,t,...s),u}function Xy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Jy{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Kf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,wn.O)(void 0),at(),(0,Dn.h)(([s,u])=>u.length>0||!s),(0,_t.U)(([s,u])=>u),He.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ln.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Xy(e);return zg(this.query,t,this.afs.schedulers.outsideAngular).pipe(He.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),He.iC)}get(e){return(0,oe.D)(this.query.get(e)).pipe(He.iC)}add(e){return this.ref.add(e)}doc(e){return new e_(this.ref.doc(e),this.afs)}}class e_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:m}=qg(s,t);return new Jy(u,m,this.afs)}snapshotChanges(){return function qf(i,e){return Hg(i,e).pipe((0,wn.O)(void 0),at(),(0,_t.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(He.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,oe.D)(this.ref.get(e)).pipe(He.iC)}}class t_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Kf(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Dn.h)(t=>t.length>0),He.iC):Kf(this.query,this.afs.schedulers.outsideAngular).pipe(He.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ln.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Xy(e);return zg(this.query,t,this.afs.schedulers.outsideAngular).pipe(He.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),He.iC)}get(e){return(0,oe.D)(this.query.get(e)).pipe(He.iC)}}const n_=new g.OlP("angularfire2.enableFirestorePersistence"),r_=new g.OlP("angularfire2.firestore.persistenceSettings"),Wd=new g.OlP("angularfire2.firestore.settings"),Sv=new g.OlP("angularfire2.firestore.use-emulator");function qg(i,e=(t=>t)){return{query:e(i),ref:i}}let i_=(()=>{class i{constructor(t,s,u,m,E,R,X,se,Se,st,qt,kn,Xn,Nr,ci,_o,Fo){this.schedulers=X;const Us=(0,Nt.on)(t,R,s),Qo=Se;st&&(0,ad.nw)(Us,R,qt,Xn,Nr,ci,kn,_o),[this.firestore,this.persistenceEnabled$]=(0,Nt.cc)(`${Us.name}.firestore`,"AngularFirestore",Us.name,()=>{const Bs=R.runOutsideAngular(()=>Us.firestore());if(m&&Bs.settings(m),Qo&&Bs.useEmulator(...Qo),u&&!(0,Jt.PM)(E)){const zs=()=>{try{return(0,oe.D)(Bs.enablePersistence(se||void 0).then(()=>!0,()=>!1))}catch(_a){return"undefined"!=typeof console&&console.warn(_a),(0,je.of)(!1)}};return[Bs,R.runOutsideAngular(zs)]}return[Bs,(0,je.of)(!1)]},[m,Qo,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:E}=qg(u,s),R=this.schedulers.ngZone.run(()=>m);return new Jy(R,E,this)}collectionGroup(t,s){const u=s||(E=>E),m=this.firestore.collectionGroup(t);return new t_(u(m),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new e_(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(g.LFG(Nt.Dh),g.LFG(Nt.xv,8),g.LFG(n_,8),g.LFG(Wd,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(He.HU),g.LFG(r_,8),g.LFG(Sv,8),g.LFG(ad.zQ,8),g.LFG(ad.Qv,8),g.LFG(ad.L6,8),g.LFG(ad._Q,8),g.LFG(ad.rT,8),g.LFG(ad.lh,8),g.LFG(ad.f7,8),g.LFG(N0.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),s_=(()=>{class i{constructor(){O0.Z.registerVersion("angularfire",He.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:n_,useValue:!0},{provide:r_,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[i_]}),i})()},377:(Zn,It,j)=>{j.d(It,{Q1:()=>L,TE:()=>Nn});var g=j(8306),k=j(9646),he=j(8996),oe=j(4986),je=j(4482),He=j(5403),We=j(4004),at=j(3900),Ne=j(2122),Pe=j(5e3),vt=j(2011),wn=j(3942),_t=j(5861),ln=j(9681),Dn=j(2090),Nt=j(4859);const Jt="firebasestorage.googleapis.com",Un="storageBucket";class wt extends Dn.ZR{constructor(K,be,ke=0){super(on(K),`Firebase Storage: ${be} (${on(K)})`),this.status_=ke,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}get status(){return this.status_}set status(K){this.status_=K}_codeEquals(K){return on(K)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(K){this.customData.serverResponse=K,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function on(ee){return"storage/"+ee}function Ht(){return new wt("unknown","An unknown error occurred, please check the error payload for server response.")}function Ft(){return new wt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Dt(){return new wt("canceled","User canceled the upload/download.")}function lr(){return new wt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Vt(ee){return new wt("invalid-argument",ee)}function Ot(){return new wt("app-deleted","The Firebase app was deleted.")}function it(ee){return new wt("invalid-root-operation","The operation '"+ee+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function St(ee,K){return new wt("invalid-format","String does not match format '"+ee+"': "+K)}function ut(ee){throw new wt("internal-error","Internal error: "+ee)}class Qt{constructor(K,be){this.bucket=K,this.path_=be}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const K=encodeURIComponent;return"/b/"+K(this.bucket)+"/o/"+K(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(K,be){let ke;try{ke=Qt.makeFromUrl(K,be)}catch(rt){return new Qt(K,"")}if(""===ke.path)return ke;throw function Yt(ee){return new wt("invalid-default-bucket","Invalid default bucket '"+ee+"'.")}(K)}static makeFromUrl(K,be){let ke=null;const rt="([A-Za-z0-9.\\-_]+)",Sr=new RegExp("^gs://"+rt+"(/(.*))?$","i");function qr(ge){ge.path_=decodeURIComponent(ge.path)}const pi=be.replace(/[.]/g,"\\."),J=[{regex:Sr,indices:{bucket:1,path:3},postModify:function Kt(ge){"/"===ge.path.charAt(ge.path.length-1)&&(ge.path_=ge.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${pi}/v[A-Za-z0-9_]+/b/${rt}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:qr},{regex:new RegExp(`^https?://${be===Jt?"(?:storage.googleapis.com|storage.cloud.google.com)":be}/${rt}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:qr}];for(let ge=0;ge<J.length;ge++){const we=J[ge],ae=we.regex.exec(K);if(ae){let ce=ae[we.indices.path];ce||(ce=""),ke=new Qt(ae[we.indices.bucket],ce),we.postModify(ke);break}}if(null==ke)throw function Lt(ee){return new wt("invalid-url","Invalid URL '"+ee+"'.")}(K);return ke}}class xt{constructor(K){this.promise_=Promise.reject(K)}getPromise(){return this.promise_}cancel(K=!1){}}function ii(ee){return"string"==typeof ee||ee instanceof String}function er(ee){return Gr()&&ee instanceof Blob}function Gr(){return"undefined"!=typeof Blob&&!(0,Dn.UG)()}function Mr(ee,K,be,ke){if(ke<K)throw Vt(`Invalid value for '${ee}'. Expected ${K} or greater.`);if(ke>be)throw Vt(`Invalid value for '${ee}'. Expected ${be} or less.`)}function Rr(ee,K,be){let ke=K;return null==be&&(ke=`https://${K}`),`${be}://${ke}/v0${ee}`}function is(ee){const K=encodeURIComponent;let be="?";for(const ke in ee)ee.hasOwnProperty(ke)&&(be=be+(K(ke)+"=")+K(ee[ke])+"&");return be=be.slice(0,-1),be}var Xi=(()=>{return(ee=Xi||(Xi={}))[ee.NO_ERROR=0]="NO_ERROR",ee[ee.NETWORK_ERROR=1]="NETWORK_ERROR",ee[ee.ABORT=2]="ABORT",Xi;var ee})();function cn(ee,K){const be=ee>=500&&ee<600,rt=-1!==[408,429].indexOf(ee),Kt=-1!==K.indexOf(ee);return be||rt||Kt}class nt{constructor(K,be,ke,rt,Kt,xn,Sr,jn,qr,_i,pi,Vi=!0){this.url_=K,this.method_=be,this.headers_=ke,this.body_=rt,this.successCodes_=Kt,this.additionalRetryCodes_=xn,this.callback_=Sr,this.errorCallback_=jn,this.timeout_=qr,this.progressCallback_=_i,this.connectionFactory_=pi,this.retry=Vi,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ss,l)=>{this.resolve_=ss,this.reject_=l,this.start_()})}start_(){const be=(ke,rt)=>{const Kt=this.resolve_,xn=this.reject_,Sr=rt.connection;if(rt.wasSuccessCode)try{const jn=this.callback_(Sr,Sr.getResponse());!function or(ee){return void 0!==ee}(jn)?Kt():Kt(jn)}catch(jn){xn(jn)}else if(null!==Sr){const jn=Ht();jn.serverResponse=Sr.getErrorText(),xn(this.errorCallback_?this.errorCallback_(Sr,jn):jn)}else xn(rt.canceled?this.appDelete_?Ot():Dt():Ft())};this.canceled_?be(0,new dt(!1,null,!0)):this.backoffId_=function en(ee,K,be){let ke=1,rt=null,Kt=null,xn=!1,Sr=0;function jn(){return 2===Sr}let qr=!1;function _i(...I){qr||(qr=!0,K.apply(null,I))}function pi(I){rt=setTimeout(()=>{rt=null,ee(ss,jn())},I)}function Vi(){Kt&&clearTimeout(Kt)}function ss(I,...P){if(qr)return void Vi();if(I)return Vi(),void _i.call(null,I,...P);if(jn()||xn)return Vi(),void _i.call(null,I,...P);let J;ke<64&&(ke*=2),1===Sr?(Sr=2,J=0):J=1e3*(ke+Math.random()),pi(J)}let l=!1;function A(I){l||(l=!0,Vi(),!qr&&(null!==rt?(I||(Sr=2),clearTimeout(rt),pi(0)):I||(Sr=1)))}return pi(0),Kt=setTimeout(()=>{xn=!0,A(!0)},be),A}((ke,rt)=>{if(rt)return void ke(!1,new dt(!1,null,!0));const Kt=this.connectionFactory_();this.pendingConnection_=Kt;const xn=Sr=>{null!==this.progressCallback_&&this.progressCallback_(Sr.loaded,Sr.lengthComputable?Sr.total:-1)};null!==this.progressCallback_&&Kt.addUploadProgressListener(xn),Kt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Kt.removeUploadProgressListener(xn),this.pendingConnection_=null;const Sr=Kt.getErrorCode()===Xi.NO_ERROR,jn=Kt.getStatus();if((!Sr||cn(jn,this.additionalRetryCodes_))&&this.retry){const _i=Kt.getErrorCode()===Xi.ABORT;return void ke(!1,new dt(!1,null,_i))}const qr=-1!==this.successCodes_.indexOf(jn);ke(!0,new dt(qr,Kt))})},be,this.timeout_)}getPromise(){return this.promise_}cancel(K){this.canceled_=!0,this.appDelete_=K||!1,null!==this.backoffId_&&function Wn(ee){ee(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class dt{constructor(K,be,ke){this.wasSuccessCode=K,this.connection=be,this.canceled=!!ke}}function kr(...ee){const K=function Br(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==K){const be=new K;for(let ke=0;ke<ee.length;ke++)be.append(ee[ke]);return be.getBlob()}if(Gr())return new Blob(ee);throw new wt("unsupported-environment","This browser doesn't seem to support creating Blobs")}const di={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hn{constructor(K,be){this.data=K,this.contentType=be||null}}function wi(ee,K){switch(ee){case di.RAW:return new Hn(Dr(K));case di.BASE64:case di.BASE64URL:return new Hn(Fn(ee,K));case di.DATA_URL:return new Hn(function Qn(ee){const K=new zt(ee);return K.base64?Fn(di.BASE64,K.rest):function $i(ee){let K;try{K=decodeURIComponent(ee)}catch(be){throw St(di.DATA_URL,"Malformed data URL.")}return Dr(K)}(K.rest)}(K),function yr(ee){return new zt(ee).contentType}(K))}throw Ht()}function Dr(ee){const K=[];for(let be=0;be<ee.length;be++){let ke=ee.charCodeAt(be);ke<=127?K.push(ke):ke<=2047?K.push(192|ke>>6,128|63&ke):55296==(64512&ke)?be<ee.length-1&&56320==(64512&ee.charCodeAt(be+1))?(ke=65536|(1023&ke)<<10|1023&ee.charCodeAt(++be),K.push(240|ke>>18,128|ke>>12&63,128|ke>>6&63,128|63&ke)):K.push(239,191,189):56320==(64512&ke)?K.push(239,191,189):K.push(224|ke>>12,128|ke>>6&63,128|63&ke)}return new Uint8Array(K)}function Fn(ee,K){switch(ee){case di.BASE64:{const rt=-1!==K.indexOf("-"),Kt=-1!==K.indexOf("_");if(rt||Kt)throw St(ee,"Invalid character '"+(rt?"-":"_")+"' found: is it base64url encoded?");break}case di.BASE64URL:{const rt=-1!==K.indexOf("+"),Kt=-1!==K.indexOf("/");if(rt||Kt)throw St(ee,"Invalid character '"+(rt?"+":"/")+"' found: is it base64 encoded?");K=K.replace(/-/g,"+").replace(/_/g,"/");break}}let be;try{be=function Bi(ee){if("undefined"==typeof atob)throw function mr(ee){return new wt("unsupported-environment",`${ee} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(ee)}(K)}catch(rt){throw rt.message.includes("polyfill")?rt:St(ee,"Invalid character found")}const ke=new Uint8Array(be.length);for(let rt=0;rt<be.length;rt++)ke[rt]=be.charCodeAt(rt);return ke}class zt{constructor(K){this.base64=!1,this.contentType=null;const be=K.match(/^data:([^,]+)?,/);if(null===be)throw St(di.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const ke=be[1]||null;null!=ke&&(this.base64=function Fr(ee,K){return ee.length>=K.length&&ee.substring(ee.length-K.length)===K}(ke,";base64"),this.contentType=this.base64?ke.substring(0,ke.length-7):ke),this.rest=K.substring(K.indexOf(",")+1)}}class Lr{constructor(K,be){let ke=0,rt="";er(K)?(this.data_=K,ke=K.size,rt=K.type):K instanceof ArrayBuffer?(be?this.data_=new Uint8Array(K):(this.data_=new Uint8Array(K.byteLength),this.data_.set(new Uint8Array(K))),ke=this.data_.length):K instanceof Uint8Array&&(be?this.data_=K:(this.data_=new Uint8Array(K.length),this.data_.set(K)),ke=K.length),this.size_=ke,this.type_=rt}size(){return this.size_}type(){return this.type_}slice(K,be){if(er(this.data_)){const rt=function ls(ee,K,be){return ee.webkitSlice?ee.webkitSlice(K,be):ee.mozSlice?ee.mozSlice(K,be):ee.slice?ee.slice(K,be):null}(this.data_,K,be);return null===rt?null:new Lr(rt)}{const ke=new Uint8Array(this.data_.buffer,K,be-K);return new Lr(ke,!0)}}static getBlob(...K){if(Gr()){const be=K.map(ke=>ke instanceof Lr?ke.data_:ke);return new Lr(kr.apply(null,be))}{const be=K.map(xn=>ii(xn)?wi(di.RAW,xn).data:xn.data_);let ke=0;be.forEach(xn=>{ke+=xn.byteLength});const rt=new Uint8Array(ke);let Kt=0;return be.forEach(xn=>{for(let Sr=0;Sr<xn.length;Sr++)rt[Kt++]=xn[Sr]}),new Lr(rt,!0)}}uploadData(){return this.data_}}function Xe(ee){let K;try{K=JSON.parse(ee)}catch(be){return null}return function Yr(ee){return"object"==typeof ee&&!Array.isArray(ee)}(K)?K:null}function un(ee){const K=ee.lastIndexOf("/",ee.length-2);return-1===K?ee:ee.slice(K+1)}function Ut(ee,K){return K}class Be{constructor(K,be,ke,rt){this.server=K,this.local=be||K,this.writable=!!ke,this.xform=rt||Ut}}let Me=null;function pt(){if(Me)return Me;const ee=[];ee.push(new Be("bucket")),ee.push(new Be("generation")),ee.push(new Be("metageneration")),ee.push(new Be("name","fullPath",!0));const be=new Be("name");be.xform=function K(Kt,xn){return function Ae(ee){return!ii(ee)||ee.length<2?ee:un(ee)}(xn)},ee.push(be);const rt=new Be("size");return rt.xform=function ke(Kt,xn){return void 0!==xn?Number(xn):xn},ee.push(rt),ee.push(new Be("timeCreated")),ee.push(new Be("updated")),ee.push(new Be("md5Hash",null,!0)),ee.push(new Be("cacheControl",null,!0)),ee.push(new Be("contentDisposition",null,!0)),ee.push(new Be("contentEncoding",null,!0)),ee.push(new Be("contentLanguage",null,!0)),ee.push(new Be("contentType",null,!0)),ee.push(new Be("metadata","customMetadata",!0)),Me=ee,Me}function Jn(ee,K,be){const ke=Xe(K);return null===ke?null:function _r(ee,K,be){const ke={type:"file"},rt=be.length;for(let Kt=0;Kt<rt;Kt++){const xn=be[Kt];ke[xn.local]=xn.xform(ke,K[xn.server])}return function sn(ee,K){Object.defineProperty(ee,"ref",{get:function be(){const Kt=new Qt(ee.bucket,ee.fullPath);return K._makeStorageReference(Kt)}})}(ke,ee),ke}(ee,ke,be)}function Zi(ee,K){const be={},ke=K.length;for(let rt=0;rt<ke;rt++){const Kt=K[rt];Kt.writable&&(be[Kt.server]=ee[Kt.local])}return JSON.stringify(be)}const us="prefixes";class as{constructor(K,be,ke,rt){this.url=K,this.method=be,this.handler=ke,this.timeout=rt,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Si(ee){if(!ee)throw Ht()}function _n(ee,K){return function be(ke,rt){const Kt=Jn(ee,rt,K);return Si(null!==Kt),Kt}}function Ci(ee){return function K(be,ke){let rt;return rt=401===be.getStatus()?be.getErrorText().includes("Firebase App Check token is invalid")?function bt(){return new wt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Re(){return new wt("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===be.getStatus()?function Bt(ee){return new wt("quota-exceeded","Quota for bucket '"+ee+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(ee.bucket):403===be.getStatus()?function Je(ee){return new wt("unauthorized","User does not have permission to access '"+ee+"'.")}(ee.path):ke,rt.status=be.getStatus(),rt.serverResponse=ke.serverResponse,rt}}function gs(ee){const K=Ci(ee);return function be(ke,rt){let Kt=K(ke,rt);return 404===ke.getStatus()&&(Kt=function Oe(ee){return new wt("object-not-found","Object '"+ee+"' does not exist.")}(ee.path)),Kt.serverResponse=rt.serverResponse,Kt}}function zi(ee,K,be){const rt=Rr(K.fullServerUrl(),ee.host,ee._protocol),xn=ee.maxOperationRetryTime,Sr=new as(rt,"GET",_n(ee,be),xn);return Sr.errorHandler=gs(K),Sr}function ds(ee,K,be,ke,rt){const Kt={};Kt.prefix=K.isRoot?"":K.path+"/",be&&be.length>0&&(Kt.delimiter=be),ke&&(Kt.pageToken=ke),rt&&(Kt.maxResults=rt);const Sr=Rr(K.bucketOnlyServerUrl(),ee.host,ee._protocol),qr=ee.maxOperationRetryTime,_i=new as(Sr,"GET",function Tr(ee,K){return function be(ke,rt){const Kt=function li(ee,K,be){const ke=Xe(be);return null===ke?null:function Gi(ee,K,be){const ke={prefixes:[],items:[],nextPageToken:be.nextPageToken};if(be[us])for(const rt of be[us]){const Kt=rt.replace(/\/$/,""),xn=ee._makeStorageReference(new Qt(K,Kt));ke.prefixes.push(xn)}if(be.items)for(const rt of be.items){const Kt=ee._makeStorageReference(new Qt(K,rt.name));ke.items.push(Kt)}return ke}(ee,K,ke)}(ee,K,rt);return Si(null!==Kt),Kt}}(ee,K.bucket),qr);return _i.urlParams=Kt,_i.errorHandler=Ci(K),_i}function es(ee,K,be){const ke=Object.assign({},be);return ke.fullPath=ee.path,ke.size=K.size(),ke.contentType||(ke.contentType=function Cs(ee,K){return ee&&ee.contentType||K&&K.type()||"application/octet-stream"}(null,K)),ke}class $r{constructor(K,be,ke,rt){this.current=K,this.total=be,this.finalized=!!ke,this.metadata=rt||null}}function wr(ee,K){let be=null;try{be=ee.getResponseHeader("X-Goog-Upload-Status")}catch(rt){Si(!1)}return Si(!!be&&-1!==(K||["active"]).indexOf(be)),be}const Ws={STATE_CHANGED:"state_changed"},Fi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fs(ee){switch(ee){case"running":case"pausing":case"canceling":return Fi.RUNNING;case"paused":return Fi.PAUSED;case"success":return Fi.SUCCESS;case"canceled":return Fi.CANCELED;default:return Fi.ERROR}}class si{constructor(K,be,ke){if(function dr(ee){return"function"==typeof ee}(K)||null!=be||null!=ke)this.next=K,this.error=null!=be?be:void 0,this.complete=null!=ke?ke:void 0;else{const Kt=K;this.next=Kt.next,this.error=Kt.error,this.complete=Kt.complete}}}function Zr(ee){return(...K)=>{Promise.resolve().then(()=>ee(...K))}}class ys extends class bs{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xi.NO_ERROR,this.sendPromise_=new Promise(K=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xi.ABORT,K()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xi.NETWORK_ERROR,K()}),this.xhr_.addEventListener("load",()=>{K()})})}send(K,be,ke,rt){if(this.sent_)throw ut("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(be,K,!0),void 0!==rt)for(const Kt in rt)rt.hasOwnProperty(Kt)&&this.xhr_.setRequestHeader(Kt,rt[Kt].toString());return void 0!==ke?this.xhr_.send(ke):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ut("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ut("cannot .getStatus() before sending");try{return this.xhr_.status}catch(K){return-1}}getResponse(){if(!this.sent_)throw ut("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ut("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(K){return this.xhr_.getResponseHeader(K)}addUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",K)}removeUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",K)}}{initXhr(){this.xhr_.responseType="text"}}function Pi(){return new ys}class Et{constructor(K,be,ke=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=K,this._blob=be,this._metadata=ke,this._mappings=pt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=rt=>{if(this._request=void 0,this._chunkMultiplier=1,rt._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const Kt=this.isExponentialBackoffExpired();if(cn(rt.status,[])){if(!Kt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();rt=Ft()}this._error=rt,this._transition("error")}},this._metadataErrorHandler=rt=>{this._request=void 0,rt._codeEquals("canceled")?this.completeTransitions_():(this._error=rt,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((rt,Kt)=>{this._resolve=rt,this._reject=Kt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const K=this._transferred;return be=>this._updateProgress(K+be)}_shouldDoResumable(K){return K.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(K){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([be,ke])=>{switch(this._state){case"running":K(be,ke);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((K,be)=>{const ke=function Ir(ee,K,be,ke,rt){const Kt=K.bucketOnlyServerUrl(),xn=es(K,ke,rt),Sr={name:xn.fullPath},jn=Rr(Kt,ee.host,ee._protocol),_i={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${ke.size()}`,"X-Goog-Upload-Header-Content-Type":xn.contentType,"Content-Type":"application/json; charset=utf-8"},pi=Zi(xn,be),l=new as(jn,"POST",function ss(A){let I;wr(A);try{I=A.getResponseHeader("X-Goog-Upload-URL")}catch(P){Si(!1)}return Si(ii(I)),I},ee.maxUploadRetryTime);return l.urlParams=Sr,l.headers=_i,l.body=pi,l.errorHandler=Ci(K),l}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),rt=this._ref.storage._makeRequest(ke,Pi,K,be);this._request=rt,rt.getPromise().then(Kt=>{this._request=void 0,this._uploadUrl=Kt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const K=this._uploadUrl;this._resolveToken((be,ke)=>{const rt=function ts(ee,K,be,ke){const jn=new as(be,"POST",function Kt(qr){const _i=wr(qr,["active","final"]);let pi=null;try{pi=qr.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ss){Si(!1)}pi||Si(!1);const Vi=Number(pi);return Si(!isNaN(Vi)),new $r(Vi,ke.size(),"final"===_i)},ee.maxUploadRetryTime);return jn.headers={"X-Goog-Upload-Command":"query"},jn.errorHandler=Ci(K),jn}(this._ref.storage,this._ref._location,K,this._blob),Kt=this._ref.storage._makeRequest(rt,Pi,be,ke);this._request=Kt,Kt.getPromise().then(xn=>{this._request=void 0,this._updateProgress(xn.current),this._needToFetchStatus=!1,xn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const K=262144*this._chunkMultiplier,be=new $r(this._transferred,this._blob.size()),ke=this._uploadUrl;this._resolveToken((rt,Kt)=>{let xn;try{xn=function bi(ee,K,be,ke,rt,Kt,xn,Sr){const jn=new $r(0,0);if(xn?(jn.current=xn.current,jn.total=xn.total):(jn.current=0,jn.total=ke.size()),ke.size()!==jn.total)throw function yn(){return new wt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const qr=jn.total-jn.current;let _i=qr;rt>0&&(_i=Math.min(_i,rt));const pi=jn.current;let ss="";ss=0===_i?"finalize":qr===_i?"upload, finalize":"upload";const l={"X-Goog-Upload-Command":ss,"X-Goog-Upload-Offset":`${jn.current}`},A=ke.slice(pi,pi+_i);if(null===A)throw lr();const J=new as(be,"POST",function I(ge,we){const ae=wr(ge,["active","final"]),me=jn.current+_i,ce=ke.size();let ue;return ue="final"===ae?_n(K,Kt)(ge,we):null,new $r(me,ce,"final"===ae,ue)},K.maxUploadRetryTime);return J.headers=l,J.body=A.uploadData(),J.progressCallback=Sr||null,J.errorHandler=Ci(ee),J}(this._ref._location,this._ref.storage,ke,this._blob,K,this._mappings,be,this._makeProgressCallback())}catch(jn){return this._error=jn,void this._transition("error")}const Sr=this._ref.storage._makeRequest(xn,Pi,rt,Kt,!1);this._request=Sr,Sr.getPromise().then(jn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(jn.current),jn.finalized?(this._metadata=jn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((K,be)=>{const ke=zi(this._ref.storage,this._ref._location,this._mappings),rt=this._ref.storage._makeRequest(ke,Pi,K,be);this._request=rt,rt.getPromise().then(Kt=>{this._request=void 0,this._metadata=Kt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((K,be)=>{const ke=function hs(ee,K,be,ke,rt){const Kt=K.bucketOnlyServerUrl(),xn={"X-Goog-Upload-Protocol":"multipart"},jn=function Sr(){let J="";for(let ge=0;ge<2;ge++)J+=Math.random().toString().slice(2);return J}();xn["Content-Type"]="multipart/related; boundary="+jn;const qr=es(K,ke,rt),_i=Zi(qr,be),ss=Lr.getBlob("--"+jn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_i+"\r\n--"+jn+"\r\nContent-Type: "+qr.contentType+"\r\n\r\n",ke,"\r\n--"+jn+"--");if(null===ss)throw lr();const l={name:qr.fullPath},A=Rr(Kt,ee.host,ee._protocol),P=ee.maxUploadRetryTime,z=new as(A,"POST",_n(ee,be),P);return z.urlParams=l,z.headers=xn,z.body=ss.uploadData(),z.errorHandler=Ci(K),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),rt=this._ref.storage._makeRequest(ke,Pi,K,be);this._request=rt,rt.getPromise().then(Kt=>{this._request=void 0,this._metadata=Kt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(K){const be=this._transferred;this._transferred=K,this._transferred!==be&&this._notifyObservers()}_transition(K){if(this._state!==K)switch(K){case"canceling":case"pausing":this._state=K,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const be="paused"===this._state;this._state=K,be&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=K,this._notifyObservers();break;case"canceled":this._error=Dt(),this._state=K,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const K=fs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:K,metadata:this._metadata,task:this,ref:this._ref}}on(K,be,ke,rt){const Kt=new si(be||void 0,ke||void 0,rt||void 0);return this._addObserver(Kt),()=>{this._removeObserver(Kt)}}then(K,be){return this._promise.then(K,be)}catch(K){return this.then(null,K)}_addObserver(K){this._observers.push(K),this._notifyObserver(K)}_removeObserver(K){const be=this._observers.indexOf(K);-1!==be&&this._observers.splice(be,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(be=>{this._notifyObserver(be)})}_finishPromise(){if(void 0!==this._resolve){let K=!0;switch(fs(this._state)){case Fi.SUCCESS:Zr(this._resolve.bind(null,this.snapshot))();break;case Fi.CANCELED:case Fi.ERROR:Zr(this._reject.bind(null,this._error))();break;default:K=!1}K&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(K){switch(fs(this._state)){case Fi.RUNNING:case Fi.PAUSED:K.next&&Zr(K.next.bind(K,this.snapshot))();break;case Fi.SUCCESS:K.complete&&Zr(K.complete.bind(K))();break;default:K.error&&Zr(K.error.bind(K,this._error))()}}resume(){const K="paused"===this._state||"pausing"===this._state;return K&&this._transition("running"),K}pause(){const K="running"===this._state;return K&&this._transition("pausing"),K}cancel(){const K="running"===this._state||"pausing"===this._state;return K&&this._transition("canceling"),K}}class ct{constructor(K,be){this._service=K,this._location=be instanceof Qt?be:Qt.makeFromUrl(be,K.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(K,be){return new ct(K,be)}get root(){const K=new Qt(this._location.bucket,"");return this._newRef(this._service,K)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return un(this._location.path)}get storage(){return this._service}get parent(){const K=function Ue(ee){if(0===ee.length)return null;const K=ee.lastIndexOf("/");return-1===K?"":ee.slice(0,K)}(this._location.path);if(null===K)return null;const be=new Qt(this._location.bucket,K);return new ct(this._service,be)}_throwIfRoot(K){if(""===this._location.path)throw it(K)}}function Di(ee,K,be){return ws.apply(this,arguments)}function ws(){return(ws=(0,_t.Z)(function*(ee,K,be){const rt=yield Jr(ee,{pageToken:be});K.prefixes.push(...rt.prefixes),K.items.push(...rt.items),null!=rt.nextPageToken&&(yield Di(ee,K,rt.nextPageToken))})).apply(this,arguments)}function Jr(ee,K){null!=K&&"number"==typeof K.maxResults&&Mr("options.maxResults",1,1e3,K.maxResults);const be=K||{},ke=ds(ee.storage,ee._location,"/",be.pageToken,be.maxResults);return ee.storage.makeRequestWithTokens(ke,Pi)}function Xo(ee){ee._throwIfRoot("getDownloadURL");const K=function Yi(ee,K,be){const rt=Rr(K.fullServerUrl(),ee.host,ee._protocol),xn=ee.maxOperationRetryTime,Sr=new as(rt,"GET",function hi(ee,K){return function be(ke,rt){const Kt=Jn(ee,rt,K);return Si(null!==Kt),function oi(ee,K,be,ke){const rt=Xe(K);if(null===rt||!ii(rt.downloadTokens))return null;const Kt=rt.downloadTokens;if(0===Kt.length)return null;const xn=encodeURIComponent;return Kt.split(",").map(qr=>{const pi=ee.fullPath;return Rr("/b/"+xn(ee.bucket)+"/o/"+xn(pi),be,ke)+is({alt:"media",token:qr})})[0]}(Kt,rt,ee.host,ee._protocol)}}(ee,be),xn);return Sr.errorHandler=gs(K),Sr}(ee.storage,ee._location,pt());return ee.storage.makeRequestWithTokens(K,Pi).then(be=>{if(null===be)throw function br(){return new wt("no-download-url","The given file does not have any download URLs.")}();return be})}function ho(ee,K){const be=function ft(ee,K){const be=K.split("/").filter(ke=>ke.length>0).join("/");return 0===ee.length?be:ee+"/"+be}(ee._location.path,K),ke=new Qt(ee._location.bucket,be);return new ct(ee.storage,ke)}function Li(ee,K){if(ee instanceof Ds){const be=ee;if(null==be._bucket)throw function sr(){return new wt("no-default-bucket","No default bucket found. Did you set the '"+Un+"' property when initializing the app?")}();const ke=new ct(be,be._bucket);return null!=K?Li(ke,K):ke}return void 0!==K?ho(ee,K):ee}function $s(ee,K){if(K&&function Ss(ee){return/^[A-Za-z]+:\/\//.test(ee)}(K)){if(ee instanceof Ds)return function Eo(ee,K){return new ct(ee,K)}(ee,K);throw Vt("To use ref(service, url), the first argument must be a Storage instance.")}return Li(ee,K)}function Os(ee,K){const be=null==K?void 0:K[Un];return null==be?null:Qt.makeFromBucketSpec(be,ee)}class Ds{constructor(K,be,ke,rt,Kt){this.app=K,this._authProvider=be,this._appCheckProvider=ke,this._url=rt,this._firebaseVersion=Kt,this._bucket=null,this._host=Jt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=rt?Qt.makeFromBucketSpec(rt,this._host):Os(this._host,this.app.options)}get host(){return this._host}set host(K){this._host=K,this._bucket=null!=this._url?Qt.makeFromBucketSpec(this._url,K):Os(K,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(K){Mr("time",0,Number.POSITIVE_INFINITY,K),this._maxUploadRetryTime=K}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(K){Mr("time",0,Number.POSITIVE_INFINITY,K),this._maxOperationRetryTime=K}_getAuthToken(){var K=this;return(0,_t.Z)(function*(){if(K._overrideAuthToken)return K._overrideAuthToken;const be=K._authProvider.getImmediate({optional:!0});if(be){const ke=yield be.getToken();if(null!==ke)return ke.accessToken}return null})()}_getAppCheckToken(){var K=this;return(0,_t.Z)(function*(){const be=K._appCheckProvider.getImmediate({optional:!0});return be?(yield be.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(K=>K.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(K){return new ct(this,K)}_makeRequest(K,be,ke,rt,Kt=!0){if(this._deleted)return new xt(Ot());{const xn=function Xr(ee,K,be,ke,rt,Kt,xn=!0){const Sr=is(ee.urlParams),jn=ee.url+Sr,qr=Object.assign({},ee.headers);return function bn(ee,K){K&&(ee["X-Firebase-GMPID"]=K)}(qr,K),function Gt(ee,K){null!==K&&K.length>0&&(ee.Authorization="Firebase "+K)}(qr,be),function tn(ee,K){ee["X-Firebase-Storage-Version"]="webjs/"+(null!=K?K:"AppManager")}(qr,Kt),function Yn(ee,K){null!==K&&(ee["X-Firebase-AppCheck"]=K)}(qr,ke),new nt(jn,ee.method,qr,ee.body,ee.successCodes,ee.additionalRetryCodes,ee.handler,ee.errorHandler,ee.timeout,ee.progressCallback,rt,xn)}(K,this._appId,ke,rt,be,this._firebaseVersion,Kt);return this._requests.add(xn),xn.getPromise().then(()=>this._requests.delete(xn),()=>this._requests.delete(xn)),xn}}makeRequestWithTokens(K,be){var ke=this;return(0,_t.Z)(function*(){const[rt,Kt]=yield Promise.all([ke._getAuthToken(),ke._getAppCheckToken()]);return ke._makeRequest(K,be,rt,Kt).getPromise()})()}}const Lo="@firebase/storage";function Gs(ee,K){return $s(ee=(0,Dn.m9)(ee),K)}function q(ee,{instanceIdentifier:K}){const be=ee.getProvider("app").getImmediate(),ke=ee.getProvider("auth-internal"),rt=ee.getProvider("app-check-internal");return new Ds(be,ke,rt,K,ln.SDK_VERSION)}!function ve(){(0,ln._registerComponent)(new Nt.wA("storage",q,"PUBLIC").setMultipleInstances(!0)),(0,ln.registerVersion)(Lo,"0.10.0",""),(0,ln.registerVersion)(Lo,"0.10.0","esm2017")}();class qe{constructor(K,be,ke){this._delegate=K,this.task=be,this.ref=ke}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class nn{constructor(K,be){this._delegate=K,this._ref=be,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new qe(this._delegate.snapshot,this,this._ref)}then(K,be){return this._delegate.then(ke=>{if(K)return K(new qe(ke,this,this._ref))},be)}on(K,be,ke,rt){let Kt;return be&&(Kt="function"==typeof be?xn=>be(new qe(xn,this,this._ref)):{next:be.next?xn=>be.next(new qe(xn,this,this._ref)):void 0,complete:be.complete||void 0,error:be.error||void 0}),this._delegate.on(K,Kt,ke||void 0,rt||void 0)}}class Sn{constructor(K,be){this._delegate=K,this._service=be}get prefixes(){return this._delegate.prefixes.map(K=>new pr(K,this._service))}get items(){return this._delegate.items.map(K=>new pr(K,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class pr{constructor(K,be){this._delegate=K,this.storage=be}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(K){const be=function As(ee,K){return ho(ee,K)}(this._delegate,K);return new pr(be,this.storage)}get root(){return new pr(this._delegate.root,this.storage)}get parent(){const K=this._delegate.parent;return null==K?null:new pr(K,this.storage)}put(K,be){return this._throwIfRoot("put"),new nn(function vs(ee,K,be){return function Ar(ee,K,be){return ee._throwIfRoot("uploadBytesResumable"),new Et(ee,new Lr(K),be)}(ee=(0,Dn.m9)(ee),K,be)}(this._delegate,K,be),this)}putString(K,be=di.RAW,ke){this._throwIfRoot("putString");const rt=wi(be,K),Kt=Object.assign({},ke);return null==Kt.contentType&&null!=rt.contentType&&(Kt.contentType=rt.contentType),new nn(new Et(this._delegate,new Lr(rt.data,!0),Kt),this)}listAll(){return function io(ee){return function Wi(ee){const K={prefixes:[],items:[]};return Di(ee,K).then(()=>K)}(ee=(0,Dn.m9)(ee))}(this._delegate).then(K=>new Sn(K,this.storage))}list(K){return function Ai(ee,K){return Jr(ee=(0,Dn.m9)(ee),K)}(this._delegate,K||void 0).then(be=>new Sn(be,this.storage))}getMetadata(){return function Xs(ee){return function ps(ee){ee._throwIfRoot("getMetadata");const K=zi(ee.storage,ee._location,pt());return ee.storage.makeRequestWithTokens(K,Pi)}(ee=(0,Dn.m9)(ee))}(this._delegate)}updateMetadata(K){return function Ms(ee,K){return function Is(ee,K){ee._throwIfRoot("updateMetadata");const be=function Ii(ee,K,be,ke){const Kt=Rr(K.fullServerUrl(),ee.host,ee._protocol),Sr=Zi(be,ke),qr=ee.maxOperationRetryTime,_i=new as(Kt,"PATCH",_n(ee,ke),qr);return _i.headers={"Content-Type":"application/json; charset=utf-8"},_i.body=Sr,_i.errorHandler=gs(K),_i}(ee.storage,ee._location,K,pt());return ee.storage.makeRequestWithTokens(be,Pi)}(ee=(0,Dn.m9)(ee),K)}(this._delegate,K)}getDownloadURL(){return function so(ee){return Xo(ee=(0,Dn.m9)(ee))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Hs(ee){return function _s(ee){ee._throwIfRoot("deleteObject");const K=function zr(ee,K){const ke=Rr(K.fullServerUrl(),ee.host,ee._protocol),Sr=new as(ke,"DELETE",function xn(jn,qr){},ee.maxOperationRetryTime);return Sr.successCodes=[200,204],Sr.errorHandler=gs(K),Sr}(ee.storage,ee._location);return ee.storage.makeRequestWithTokens(K,Pi)}(ee=(0,Dn.m9)(ee))}(this._delegate)}_throwIfRoot(K){if(""===this._delegate._location.path)throw it(K)}}class jr{constructor(K,be){this.app=K,this._delegate=be}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(K){if(ei(K))throw Vt("ref() expected a child path but got a URL, use refFromURL instead.");return new pr(Gs(this._delegate,K),this)}refFromURL(K){if(!ei(K))throw Vt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qt.makeFromUrl(K,this._delegate.host)}catch(be){throw Vt("refFromUrl() expected a valid full URL but got an invalid one.")}return new pr(Gs(this._delegate,K),this)}setMaxUploadRetryTime(K){this._delegate.maxUploadRetryTime=K}setMaxOperationRetryTime(K){this._delegate.maxOperationRetryTime=K}useEmulator(K,be,ke={}){!function Ti(ee,K,be,ke={}){!function qs(ee,K,be,ke={}){ee.host=`${K}:${be}`,ee._protocol="http";const{mockUserToken:rt}=ke;rt&&(ee._overrideAuthToken="string"==typeof rt?rt:(0,Dn.Sg)(rt,ee.app.options.projectId))}(ee,K,be,ke)}(this._delegate,K,be,ke)}}function ei(ee){return/^[A-Za-z]+:\/\//.test(ee)}function Ni(ee,{instanceIdentifier:K}){const be=ee.getProvider("app-compat").getImmediate(),ke=ee.getProvider("storage").getImmediate({identifier:K});return new jr(be,ke)}!function ki(ee){const K={TaskState:Fi,TaskEvent:Ws,StringFormat:di,Storage:jr,Reference:pr};ee.INTERNAL.registerComponent(new Nt.wA("storage-compat",Ni,"PUBLIC").setServiceProps(K).setMultipleInstances(!0)),ee.registerVersion("@firebase/storage-compat","0.2.0")}(wn.Z);var Ks=j(6217),ns=j(9260);function Js(ee){const K=function Wr(ee){return new g.y(K=>{const be=xn=>K.next(xn);be(ee.snapshot);const Kt=ee.on("state_changed",be);return ee.then(xn=>{be(xn),K.complete()},xn=>{be(ee.snapshot),(xn=>{K.error(xn)})(xn)}),function(){Kt()}}).pipe(function ht(ee,K=oe.z){return(0,je.e)((be,ke)=>{let rt=null,Kt=null,xn=null;const Sr=()=>{if(rt){rt.unsubscribe(),rt=null;const qr=Kt;Kt=null,ke.next(qr)}};function jn(){const qr=xn+ee,_i=K.now();if(_i<qr)return rt=this.schedule(void 0,qr-_i),void ke.add(rt);Sr()}be.subscribe((0,He.x)(ke,qr=>{Kt=qr,xn=K.now(),rt||(rt=K.schedule(jn,ee),ke.add(rt))},()=>{Sr(),ke.complete()},void 0,()=>{Kt=rt=null}))})}(0))}(ee);return{task:ee,then:ee.then.bind(ee),catch:ee.catch.bind(ee),pause:ee.pause.bind(ee),cancel:ee.cancel.bind(ee),resume:ee.resume.bind(ee),snapshotChanges:()=>K,percentageChanges:()=>K.pipe((0,We.U)(be=>be.bytesTransferred/be.totalBytes*100))}}function No(ee){return{getDownloadURL:()=>(0,k.of)(void 0).pipe(Ne.fc,(0,at.w)(()=>ee.getDownloadURL()),Ne.iC),getMetadata:()=>(0,k.of)(void 0).pipe(Ne.fc,(0,at.w)(()=>ee.getMetadata()),Ne.iC),delete:()=>(0,he.D)(ee.delete()),child:K=>No(ee.child(K)),updateMetadata:K=>(0,he.D)(ee.updateMetadata(K)),put:(K,be)=>Js(ee.put(K,be)),putString:(K,be,ke)=>Js(ee.putString(K,be,ke)),list:K=>(0,he.D)(ee.list(K)),listAll:()=>(0,he.D)(ee.listAll())}}const fo=new Pe.OlP("angularfire2.storageBucket"),Co=new Pe.OlP("angularfire2.storage.maxUploadRetryTime"),Y=new Pe.OlP("angularfire2.storage.maxOperationRetryTime"),G=new Pe.OlP("angularfire2.storage.use-emulator");let L=(()=>{class ee{constructor(be,ke,rt,Kt,xn,Sr,jn,qr,_i,pi){const Vi=(0,vt.on)(be,xn,ke);this.storage=(0,vt.cc)(`${Vi.name}.storage.${rt}`,"AngularFireStorage",Vi.name,()=>{const ss=xn.runOutsideAngular(()=>Vi.storage(rt||void 0)),l=_i;return l&&ss.useEmulator(...l),jn&&ss.setMaxUploadRetryTime(jn),qr&&ss.setMaxOperationRetryTime(qr),ss},[jn,qr])}ref(be){return No(this.storage.ref(be))}refFromURL(be){return No(this.storage.refFromURL(be))}upload(be,ke,rt){return No(this.storage.ref(be)).put(ke,rt)}}return ee.\u0275fac=function(be){return new(be||ee)(Pe.LFG(vt.Dh),Pe.LFG(vt.xv,8),Pe.LFG(fo,8),Pe.LFG(Pe.Lbi),Pe.LFG(Pe.R0b),Pe.LFG(Ne.HU),Pe.LFG(Co,8),Pe.LFG(Y,8),Pe.LFG(G,8),Pe.LFG(Ks.nm,8))},ee.\u0275prov=Pe.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"any"}),ee})(),Qe=(()=>{class ee{}return ee.\u0275fac=function(be){return new(be||ee)},ee.\u0275mod=Pe.oAB({type:ee}),ee.\u0275inj=Pe.cJS({}),ee})(),Nn=(()=>{class ee{constructor(){ns.Z.registerVersion("angularfire",Ne.q4.full,"gcs-compat")}}return ee.\u0275fac=function(be){return new(be||ee)},ee.\u0275mod=Pe.oAB({type:ee}),ee.\u0275inj=Pe.cJS({providers:[L],imports:[Qe]}),ee})()},2011:(Zn,It,j)=>{j.d(It,{Dh:()=>We,GT:()=>He,cc:()=>_t,hO:()=>wn,on:()=>Ne,pX:()=>je,xv:()=>at});var g=j(5e3),k=j(9260),he=j(2122);Zn=j.hmd(Zn);const oe=["ngOnDestroy"],je=(Jt,Un,dn,xe={})=>new Proxy(Jt,{get:(Ge,wt)=>dn.runOutsideAngular(()=>{var on;if(Jt[wt])return(null===(on=null==xe?void 0:xe.spy)||void 0===on?void 0:on.get)&&xe.spy.get(wt,Jt[wt]),Jt[wt];if(oe.indexOf(wt)>-1)return()=>{};const Ht=Un.toPromise().then(Oe=>{const Bt=Oe&&Oe[wt];return"function"==typeof Bt?Bt.bind(Oe):Bt&&Bt.then?Bt.then(Re=>dn.run(()=>Re)):dn.run(()=>Bt)});return new Proxy(()=>{},{get:(Oe,Bt)=>Ht[Bt],apply:(Oe,Bt,Re)=>Ht.then(bt=>{var Je;const Ft=bt&&bt(...Re);return(null===(Je=null==xe?void 0:xe.spy)||void 0===Je?void 0:Je.apply)&&xe.spy.apply(wt,Re,Ft),Ft})})})}),He=(Jt,Un)=>{Un.forEach(dn=>{Object.getOwnPropertyNames(dn.prototype||dn).forEach(xe=>{Object.defineProperty(Jt.prototype,xe,Object.getOwnPropertyDescriptor(dn.prototype||dn,xe))})})};class ht{constructor(Un){return Un}}const We=new g.OlP("angularfire2.app.options"),at=new g.OlP("angularfire2.app.name");function Ne(Jt,Un,dn){const Ge="object"==typeof dn&&dn||{};Ge.name=Ge.name||"string"==typeof dn&&dn||"[DEFAULT]";const on=k.Z.apps.filter(Ht=>Ht&&Ht.name===Ge.name)[0]||Un.runOutsideAngular(()=>k.Z.initializeApp(Jt,Ge));try{JSON.stringify(Jt)!==JSON.stringify(on.options)&&Pe("error",`${on.name} Firebase App already initialized with different options${Zn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ht){}return new ht(on)}const Pe=(Jt,...Un)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Jt](...Un)},vt={provide:ht,useFactory:Ne,deps:[We,g.R0b,[new g.FiY,at]]};let wn=(()=>{class Jt{constructor(dn){k.Z.registerVersion("angularfire",he.q4.full,"core"),k.Z.registerVersion("angularfire",he.q4.full,"app-compat"),k.Z.registerVersion("angular",g.q4F.full,dn.toString())}static initializeApp(dn,xe){return{ngModule:Jt,providers:[{provide:We,useValue:dn},{provide:at,useValue:xe}]}}}return Jt.\u0275fac=function(dn){return new(dn||Jt)(g.LFG(g.Lbi))},Jt.\u0275mod=g.oAB({type:Jt}),Jt.\u0275inj=g.cJS({providers:[vt]}),Jt})();function _t(Jt,Un,dn,xe,Ge){const[,wt,on]=globalThis.\u0275AngularfireInstanceCache.find(Ht=>Ht[0]===Jt)||[];if(wt)return function ln(Jt,Un){try{return Jt.toString()===Un.toString()}catch(dn){return Jt===Un}}(Ge,on)||(Nt("error",`${Un} was already initialized on the ${dn} Firebase App with different settings.${Dn?" You may need to reload as Firebase is not HMR aware.":""}`),Nt("warn",{is:Ge,was:on})),wt;{const Ht=xe();return globalThis.\u0275AngularfireInstanceCache.push([Jt,Ht,Ge]),Ht}}const Dn=!!Zn.hot,Nt=(Jt,...Un)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Jt](...Un)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Zn,It,j)=>{j.d(It,{q4:()=>$a,iC:()=>Al,fc:()=>zu,HU:()=>nl,vb:()=>tl,JM:()=>Vl});var g=j(5e3),k=j(259),he=j(5861),oe=j(9681),je=j(2090),He=j(4859),ht=j(1877),We=j(8766);const at="@firebase/installations",vt="w:0.6.0",wn="FIS_v2",Un=new je.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dn(U){return U instanceof je.ZR&&U.code.includes("request-failed")}function xe({projectId:U}){return`https://firebaseinstallations.googleapis.com/v1/projects/${U}/installations`}function Ge(U){return{token:U.token,requestStatus:2,expiresIn:bt(U.expiresIn),creationTime:Date.now()}}function wt(U,Q){return on.apply(this,arguments)}function on(){return(on=(0,he.Z)(function*(U,Q){const $e=(yield Q.json()).error;return Un.create("request-failed",{requestName:U,serverCode:$e.code,serverMessage:$e.message,serverStatus:$e.status})})).apply(this,arguments)}function Ht({apiKey:U}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U})}function Oe(U,{refreshToken:Q}){const de=Ht(U);return de.append("Authorization",function Je(U){return`${wn} ${U}`}(Q)),de}function Bt(U){return Re.apply(this,arguments)}function Re(){return(Re=(0,he.Z)(function*(U){const Q=yield U();return Q.status>=500&&Q.status<600?U():Q})).apply(this,arguments)}function bt(U){return Number(U.replace("s","000"))}function Ft(U,Q){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,he.Z)(function*({appConfig:U,heartbeatServiceProvider:Q},{fid:de}){const $e=xe(U),Mt=Ht(U),Zt=Q.getImmediate({optional:!0});if(Zt){const Hr=yield Zt.getHeartbeatsHeader();Hr&&Mt.append("x-firebase-client",Hr)}const Ur={method:"POST",headers:Mt,body:JSON.stringify({fid:de,authVersion:wn,appId:U.appId,sdkVersion:vt})},Kr=yield Bt(()=>fetch($e,Ur));if(Kr.ok){const Hr=yield Kr.json();return{fid:Hr.fid||de,registrationStatus:2,refreshToken:Hr.refreshToken,authToken:Ge(Hr.authToken)}}throw yield wt("Create Installation",Kr)})).apply(this,arguments)}function Lt(U){return new Promise(Q=>{setTimeout(Q,U)})}const sr=/^[cdef][\w-]{21}$/;function yn(){try{const U=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(U),U[0]=112+U[0]%16;const de=function br(U){return function Yt(U){return btoa(String.fromCharCode(...U)).replace(/\+/g,"-").replace(/\//g,"_")}(U).substr(0,22)}(U);return sr.test(de)?de:""}catch(U){return""}}function mr(U){return`${U.appName}!${U.appId}`}const Vt=new Map;function Ot(U,Q){const de=mr(U);ut(de,Q),function Qt(U,Q){const de=function en(){return!xt&&"BroadcastChannel"in self&&(xt=new BroadcastChannel("[Firebase] FID Change"),xt.onmessage=U=>{ut(U.data.key,U.data.fid)}),xt}();de&&de.postMessage({key:U,fid:Q}),function Wn(){0===Vt.size&&xt&&(xt.close(),xt=null)}()}(de,Q)}function ut(U,Q){const de=Vt.get(U);if(de)for(const $e of de)$e(Q)}let xt=null;const Yr="firebase-installations-store";let ii=null;function er(){return ii||(ii=(0,We.X3)("firebase-installations-database",1,{upgrade:(U,Q)=>{0===Q&&U.createObjectStore(Yr)}})),ii}function Gr(U,Q){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,he.Z)(function*(U,Q){const de=mr(U),Mt=(yield er()).transaction(Yr,"readwrite"),Zt=Mt.objectStore(Yr),$n=yield Zt.get(de);return yield Zt.put(Q,de),yield Mt.done,(!$n||$n.fid!==Q.fid)&&Ot(U,Q.fid),Q})).apply(this,arguments)}function Rr(U){return is.apply(this,arguments)}function is(){return(is=(0,he.Z)(function*(U){const Q=mr(U),$e=(yield er()).transaction(Yr,"readwrite");yield $e.objectStore(Yr).delete(Q),yield $e.done})).apply(this,arguments)}function Xi(U,Q){return cn.apply(this,arguments)}function cn(){return(cn=(0,he.Z)(function*(U,Q){const de=mr(U),Mt=(yield er()).transaction(Yr,"readwrite"),Zt=Mt.objectStore(Yr),$n=yield Zt.get(de),Ur=Q($n);return void 0===Ur?yield Zt.delete(de):yield Zt.put(Ur,de),yield Mt.done,Ur&&(!$n||$n.fid!==Ur.fid)&&Ot(U,Ur.fid),Ur})).apply(this,arguments)}function nt(U){return dt.apply(this,arguments)}function dt(){return(dt=(0,he.Z)(function*(U){let Q;const de=yield Xi(U.appConfig,$e=>{const Mt=Gt($e),Zt=tn(U,Mt);return Q=Zt.registrationPromise,Zt.installationEntry});return""===de.fid?{installationEntry:yield Q}:{installationEntry:de,registrationPromise:Q}})).apply(this,arguments)}function Gt(U){return ls(U||{fid:yn(),registrationStatus:0})}function tn(U,Q){if(0===Q.registrationStatus){if(!navigator.onLine)return{installationEntry:Q,registrationPromise:Promise.reject(Un.create("app-offline"))};const de={fid:Q.fid,registrationStatus:1,registrationTime:Date.now()},$e=function bn(U,Q){return Yn.apply(this,arguments)}(U,de);return{installationEntry:de,registrationPromise:$e}}return 1===Q.registrationStatus?{installationEntry:Q,registrationPromise:Xr(U)}:{installationEntry:Q}}function Yn(){return(Yn=(0,he.Z)(function*(U,Q){try{const de=yield Ft(U,Q);return Gr(U.appConfig,de)}catch(de){throw dn(de)&&409===de.customData.serverCode?yield Rr(U.appConfig):yield Gr(U.appConfig,{fid:Q.fid,registrationStatus:0}),de}})).apply(this,arguments)}function Xr(U){return Br.apply(this,arguments)}function Br(){return(Br=(0,he.Z)(function*(U){let Q=yield kr(U.appConfig);for(;1===Q.registrationStatus;)yield Lt(100),Q=yield kr(U.appConfig);if(0===Q.registrationStatus){const{installationEntry:de,registrationPromise:$e}=yield nt(U);return $e||de}return Q})).apply(this,arguments)}function kr(U){return Xi(U,Q=>{if(!Q)throw Un.create("installation-not-found");return ls(Q)})}function ls(U){return function Bi(U){return 1===U.registrationStatus&&U.registrationTime+1e4<Date.now()}(U)?{fid:U.fid,registrationStatus:0}:U}function di(U,Q){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,he.Z)(function*({appConfig:U,heartbeatServiceProvider:Q},de){const $e=wi(U,de),Mt=Oe(U,de),Zt=Q.getImmediate({optional:!0});if(Zt){const Hr=yield Zt.getHeartbeatsHeader();Hr&&Mt.append("x-firebase-client",Hr)}const Ur={method:"POST",headers:Mt,body:JSON.stringify({installation:{sdkVersion:vt,appId:U.appId}})},Kr=yield Bt(()=>fetch($e,Ur));if(Kr.ok)return Ge(yield Kr.json());throw yield wt("Generate Auth Token",Kr)})).apply(this,arguments)}function wi(U,{fid:Q}){return`${xe(U)}/${Q}/authTokens:generate`}function Dr(U){return $i.apply(this,arguments)}function $i(){return($i=(0,he.Z)(function*(U,Q=!1){let de;const $e=yield Xi(U.appConfig,Zt=>{if(!Lr(Zt))throw Un.create("not-registered");const $n=Zt.authToken;if(!Q&&Xe($n))return Zt;if(1===$n.requestStatus)return de=Fn(U,Q),Zt;{if(!navigator.onLine)throw Un.create("app-offline");const Ur=ft(Zt);return de=yr(U,Ur),Ur}});return de?yield de:$e.authToken})).apply(this,arguments)}function Fn(U,Q){return zt.apply(this,arguments)}function zt(){return(zt=(0,he.Z)(function*(U,Q){let de=yield Qn(U.appConfig);for(;1===de.authToken.requestStatus;)yield Lt(100),de=yield Qn(U.appConfig);const $e=de.authToken;return 0===$e.requestStatus?Dr(U,Q):$e})).apply(this,arguments)}function Qn(U){return Xi(U,Q=>{if(!Lr(Q))throw Un.create("not-registered");return function un(U){return 1===U.requestStatus&&U.requestTime+1e4<Date.now()}(Q.authToken)?Object.assign(Object.assign({},Q),{authToken:{requestStatus:0}}):Q})}function yr(U,Q){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,he.Z)(function*(U,Q){try{const de=yield di(U,Q),$e=Object.assign(Object.assign({},Q),{authToken:de});return yield Gr(U.appConfig,$e),de}catch(de){if(!dn(de)||401!==de.customData.serverCode&&404!==de.customData.serverCode){const $e=Object.assign(Object.assign({},Q),{authToken:{requestStatus:0}});yield Gr(U.appConfig,$e)}else yield Rr(U.appConfig);throw de}})).apply(this,arguments)}function Lr(U){return void 0!==U&&2===U.registrationStatus}function Xe(U){return 2===U.requestStatus&&!function Ue(U){const Q=Date.now();return Q<U.creationTime||U.creationTime+U.expiresIn<Q+36e5}(U)}function ft(U){const Q={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},U),{authToken:Q})}function Be(){return(Be=(0,he.Z)(function*(U){const Q=U,{installationEntry:de,registrationPromise:$e}=yield nt(Q);return $e?$e.catch(console.error):Dr(Q).catch(console.error),de.fid})).apply(this,arguments)}function Ae(){return(Ae=(0,he.Z)(function*(U,Q=!1){const de=U;return yield pt(de),(yield Dr(de,Q)).token})).apply(this,arguments)}function pt(U){return sn.apply(this,arguments)}function sn(){return(sn=(0,he.Z)(function*(U){const{registrationPromise:Q}=yield nt(U);Q&&(yield Q)})).apply(this,arguments)}function as(U){return Un.create("missing-app-config-values",{valueName:U})}const Si="installations",Tr=U=>{const Q=U.getProvider("app").getImmediate(),de=function li(U){if(!U||!U.options)throw as("App Configuration");if(!U.name)throw as("App Name");const Q=["projectId","apiKey","appId"];for(const de of Q)if(!U.options[de])throw as(de);return{appName:U.name,projectId:U.options.projectId,apiKey:U.options.apiKey,appId:U.options.appId}}(Q);return{app:Q,appConfig:de,heartbeatServiceProvider:(0,oe._getProvider)(Q,"heartbeat"),_delete:()=>Promise.resolve()}},hi=U=>{const Q=U.getProvider("app").getImmediate(),de=(0,oe._getProvider)(Q,Si).getImmediate();return{getId:()=>function Ut(U){return Be.apply(this,arguments)}(de),getToken:Mt=>function Me(U){return Ae.apply(this,arguments)}(de,Mt)}};(function Ci(){(0,oe._registerComponent)(new He.wA(Si,Tr,"PUBLIC")),(0,oe._registerComponent)(new He.wA("installations-internal",hi,"PRIVATE"))})(),(0,oe.registerVersion)(at,"0.6.0"),(0,oe.registerVersion)(at,"0.6.0","esm2017");const gs="@firebase/remote-config",Ii=new je.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class jo{constructor(Q,de,$e,Mt){this.client=Q,this.storage=de,this.storageCache=$e,this.logger=Mt}isCachedDataFresh(Q,de){if(!de)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $e=Date.now()-de,Mt=$e<=Q;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$e}. Cache max age millis (minimumFetchIntervalMillis setting): ${Q}. Is cache hit: ${Mt}.`),Mt}fetch(Q){var de=this;return(0,he.Z)(function*(){const[$e,Mt]=yield Promise.all([de.storage.getLastSuccessfulFetchTimestampMillis(),de.storage.getLastSuccessfulFetchResponse()]);if(Mt&&de.isCachedDataFresh(Q.cacheMaxAgeMillis,$e))return Mt;Q.eTag=Mt&&Mt.eTag;const Zt=yield de.client.fetch(Q),$n=[de.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Zt.status&&$n.push(de.storage.setLastSuccessfulFetchResponse(Zt)),yield Promise.all($n),Zt})()}}function lo(U=navigator){return U.languages&&U.languages[0]||U.language}class Ts{constructor(Q,de,$e,Mt,Zt,$n){this.firebaseInstallations=Q,this.sdkVersion=de,this.namespace=$e,this.projectId=Mt,this.apiKey=Zt,this.appId=$n}fetch(Q){var de=this;return(0,he.Z)(function*(){const[$e,Mt]=yield Promise.all([de.firebaseInstallations.getId(),de.firebaseInstallations.getToken()]),$n=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${de.projectId}/namespaces/${de.namespace}:fetch?key=${de.apiKey}`,Ur={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Q.eTag||"*"},Kr={sdk_version:de.sdkVersion,app_instance_id:$e,app_instance_id_token:Mt,app_id:de.appId,language_code:lo()},Hr={method:"POST",headers:Ur,body:JSON.stringify(Kr)},qi=fetch($n,Hr),vi=new Promise((xo,Io)=>{Q.signal.addEventListener(()=>{const Wa=new Error("The operation was aborted.");Wa.name="AbortError",Io(Wa)})});let Go;try{yield Promise.race([qi,vi]),Go=yield qi}catch(xo){let Io="fetch-client-network";throw"AbortError"===(null==xo?void 0:xo.name)&&(Io="fetch-timeout"),Ii.create(Io,{originalErrorMessage:null==xo?void 0:xo.message})}let ni=Go.status;const os=Go.headers.get("ETag")||void 0;let Aa,Oa;if(200===Go.status){let xo;try{xo=yield Go.json()}catch(Io){throw Ii.create("fetch-client-parse",{originalErrorMessage:null==Io?void 0:Io.message})}Aa=xo.entries,Oa=xo.state}if("INSTANCE_STATE_UNSPECIFIED"===Oa?ni=500:"NO_CHANGE"===Oa?ni=304:("NO_TEMPLATE"===Oa||"EMPTY_CONFIG"===Oa)&&(Aa={}),304!==ni&&200!==ni)throw Ii.create("fetch-status",{httpStatus:ni});return{status:ni,eTag:os,config:Aa}})()}}class ct{constructor(Q,de){this.client=Q,this.storage=de}fetch(Q){var de=this;return(0,he.Z)(function*(){const $e=(yield de.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return de.attemptFetch(Q,$e)})()}attemptFetch(Q,{throttleEndTimeMillis:de,backoffCount:$e}){var Mt=this;return(0,he.Z)(function*(){yield function rs(U,Q){return new Promise((de,$e)=>{const Mt=Math.max(Q-Date.now(),0),Zt=setTimeout(de,Mt);U.addEventListener(()=>{clearTimeout(Zt),$e(Ii.create("fetch-throttle",{throttleEndTimeMillis:Q}))})})}(Q.signal,de);try{const Zt=yield Mt.client.fetch(Q);return yield Mt.storage.deleteThrottleMetadata(),Zt}catch(Zt){if(!function Et(U){if(!(U instanceof je.ZR&&U.customData))return!1;const Q=Number(U.customData.httpStatus);return 429===Q||500===Q||503===Q||504===Q}(Zt))throw Zt;const $n={throttleEndTimeMillis:Date.now()+(0,je.$s)($e),backoffCount:$e+1};return yield Mt.storage.setThrottleMetadata($n),Mt.attemptFetch(Q,$n)}})()}}class Kn{constructor(Q,de,$e,Mt,Zt){this.app=Q,this._client=de,this._storageCache=$e,this._storage=Mt,this._logger=Zt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ar(U,Q){const de=U.target.error||void 0;return Ii.create(Q,{originalErrorMessage:de&&(null==de?void 0:de.message)})}const Qr="app_namespace_store";class Jr{constructor(Q,de,$e,Mt=function ws(){return new Promise((U,Q)=>{try{const de=indexedDB.open("firebase_remote_config",1);de.onerror=$e=>{Q(Ar($e,"storage-open"))},de.onsuccess=$e=>{U($e.target.result)},de.onupgradeneeded=$e=>{0===$e.oldVersion&&$e.target.result.createObjectStore(Qr,{keyPath:"compositeKey"})}}catch(de){Q(Ii.create("storage-open",{originalErrorMessage:null==de?void 0:de.message}))}})}()){this.appId=Q,this.appName=de,this.namespace=$e,this.openDbPromise=Mt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Q){return this.set("last_fetch_status",Q)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Q){return this.set("last_successful_fetch_timestamp_millis",Q)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Q){return this.set("last_successful_fetch_response",Q)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Q){return this.set("active_config",Q)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Q){return this.set("active_config_etag",Q)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Q){return this.set("throttle_metadata",Q)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Q){var de=this;return(0,he.Z)(function*(){const $e=yield de.openDbPromise;return new Promise((Mt,Zt)=>{const Ur=$e.transaction([Qr],"readonly").objectStore(Qr),Kr=de.createCompositeKey(Q);try{const Hr=Ur.get(Kr);Hr.onerror=qi=>{Zt(Ar(qi,"storage-get"))},Hr.onsuccess=qi=>{const vi=qi.target.result;Mt(vi?vi.value:void 0)}}catch(Hr){Zt(Ii.create("storage-get",{originalErrorMessage:null==Hr?void 0:Hr.message}))}})})()}set(Q,de){var $e=this;return(0,he.Z)(function*(){const Mt=yield $e.openDbPromise;return new Promise((Zt,$n)=>{const Kr=Mt.transaction([Qr],"readwrite").objectStore(Qr),Hr=$e.createCompositeKey(Q);try{const qi=Kr.put({compositeKey:Hr,value:de});qi.onerror=vi=>{$n(Ar(vi,"storage-set"))},qi.onsuccess=()=>{Zt()}}catch(qi){$n(Ii.create("storage-set",{originalErrorMessage:null==qi?void 0:qi.message}))}})})()}delete(Q){var de=this;return(0,he.Z)(function*(){const $e=yield de.openDbPromise;return new Promise((Mt,Zt)=>{const Ur=$e.transaction([Qr],"readwrite").objectStore(Qr),Kr=de.createCompositeKey(Q);try{const Hr=Ur.delete(Kr);Hr.onerror=qi=>{Zt(Ar(qi,"storage-delete"))},Hr.onsuccess=()=>{Mt()}}catch(Hr){Zt(Ii.create("storage-delete",{originalErrorMessage:null==Hr?void 0:Hr.message}))}})})()}createCompositeKey(Q){return[this.appId,this.appName,this.namespace,Q].join()}}class ps{constructor(Q){this.storage=Q}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Q=this;return(0,he.Z)(function*(){const de=Q.storage.getLastFetchStatus(),$e=Q.storage.getLastSuccessfulFetchTimestampMillis(),Mt=Q.storage.getActiveConfig(),Zt=yield de;Zt&&(Q.lastFetchStatus=Zt);const $n=yield $e;$n&&(Q.lastSuccessfulFetchTimestampMillis=$n);const Ur=yield Mt;Ur&&(Q.activeConfig=Ur)})()}setLastFetchStatus(Q){return this.lastFetchStatus=Q,this.storage.setLastFetchStatus(Q)}setLastSuccessfulFetchTimestampMillis(Q){return this.lastSuccessfulFetchTimestampMillis=Q,this.storage.setLastSuccessfulFetchTimestampMillis(Q)}setActiveConfig(Q){return this.activeConfig=Q,this.storage.setActiveConfig(Q)}}function ho(){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,he.Z)(function*(){if(!(0,je.hl)())return!1;try{return yield(0,je.eu)()}catch(U){return!1}})).apply(this,arguments)}!function Is(){(0,oe._registerComponent)(new He.wA("remote-config",function U(Q,{instanceIdentifier:de}){const $e=Q.getProvider("app").getImmediate(),Mt=Q.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ii.create("registration-window");if(!(0,je.hl)())throw Ii.create("indexed-db-unavailable");const{projectId:Zt,apiKey:$n,appId:Ur}=$e.options;if(!Zt)throw Ii.create("registration-project-id");if(!$n)throw Ii.create("registration-api-key");if(!Ur)throw Ii.create("registration-app-id");const Kr=new Jr(Ur,$e.name,de=de||"firebase"),Hr=new ps(Kr),qi=new ht.Yd(gs);qi.logLevel=ht.in.ERROR;const vi=new Ts(Mt,oe.SDK_VERSION,de,Zt,$n,Ur),Go=new ct(vi,Kr),ni=new jo(Go,Kr,Hr,qi),os=new Kn($e,ni,Hr,Kr,qi);return function bi(U){const Q=(0,je.m9)(U);Q._initializePromise||(Q._initializePromise=Q._storageCache.loadFromStorage().then(()=>{Q._isInitializationComplete=!0}))}(os),os},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(gs,"0.4.0"),(0,oe.registerVersion)(gs,"0.4.0","esm2017")}();const Eo="/firebase-messaging-sw.js",Li="/firebase-cloud-messaging-push-scope",$s="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qs="google.c.a.c_id",Ds="google.c.a.c_l",Lo="google.c.a.ts",Qs="google.c.a.e";var ks=(()=>{return(U=ks||(ks={})).PUSH_RECEIVED="push-received",U.NOTIFICATION_CLICKED="notification-clicked",ks;var U})();function Fs(U){const Q=new Uint8Array(U);return btoa(String.fromCharCode(...Q)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vo(U){const de=(U+"=".repeat((4-U.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$e=atob(de),Mt=new Uint8Array($e.length);for(let Zt=0;Zt<$e.length;++Zt)Mt[Zt]=$e.charCodeAt(Zt);return Mt}const vs="fcm_token_details_db",Ms="fcm_token_object_Store";function Ai(U){return io.apply(this,arguments)}function io(){return io=(0,he.Z)(function*(U){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Zt=>Zt.name).includes(vs))return null;let Q=null;return(yield(0,We.X3)(vs,5,{upgrade:($e=(0,he.Z)(function*(Mt,Zt,$n,Ur){var Kr;if(Zt<2||!Mt.objectStoreNames.contains(Ms))return;const Hr=Ur.objectStore(Ms),qi=yield Hr.index("fcmSenderId").get(U);if(yield Hr.clear(),qi)if(2===Zt){const vi=qi;if(!vi.auth||!vi.p256dh||!vi.endpoint)return;Q={token:vi.fcmToken,createTime:null!==(Kr=vi.createTime)&&void 0!==Kr?Kr:Date.now(),subscriptionOptions:{auth:vi.auth,p256dh:vi.p256dh,endpoint:vi.endpoint,swScope:vi.swScope,vapidKey:"string"==typeof vi.vapidKey?vi.vapidKey:Fs(vi.vapidKey)}}}else if(3===Zt){const vi=qi;Q={token:vi.fcmToken,createTime:vi.createTime,subscriptionOptions:{auth:Fs(vi.auth),p256dh:Fs(vi.p256dh),endpoint:vi.endpoint,swScope:vi.swScope,vapidKey:Fs(vi.vapidKey)}}}else if(4===Zt){const vi=qi;Q={token:vi.fcmToken,createTime:vi.createTime,subscriptionOptions:{auth:Fs(vi.auth),p256dh:Fs(vi.p256dh),endpoint:vi.endpoint,swScope:vi.swScope,vapidKey:Fs(vi.vapidKey)}}}}),function(Zt,$n,Ur,Kr){return $e.apply(this,arguments)})})).close(),yield(0,We.Lj)(vs),yield(0,We.Lj)("fcm_vapid_details_db"),yield(0,We.Lj)("undefined"),so(Q)?Q:null;var $e}),io.apply(this,arguments)}function so(U){if(!U||!U.subscriptionOptions)return!1;const{subscriptionOptions:Q}=U;return"number"==typeof U.createTime&&U.createTime>0&&"string"==typeof U.token&&U.token.length>0&&"string"==typeof Q.auth&&Q.auth.length>0&&"string"==typeof Q.p256dh&&Q.p256dh.length>0&&"string"==typeof Q.endpoint&&Q.endpoint.length>0&&"string"==typeof Q.swScope&&Q.swScope.length>0&&"string"==typeof Q.vapidKey&&Q.vapidKey.length>0}const As="firebase-messaging-store";let Hi=null;function Ti(){return Hi||(Hi=(0,We.X3)("firebase-messaging-database",1,{upgrade:(U,Q)=>{0===Q&&U.createObjectStore(As)}})),Hi}function B(U){return pe.apply(this,arguments)}function pe(){return(pe=(0,he.Z)(function*(U){const Q=Sn(U),$e=yield(yield Ti()).transaction(As).objectStore(As).get(Q);if($e)return $e;{const Mt=yield Ai(U.appConfig.senderId);if(Mt)return yield q(U,Mt),Mt}})).apply(this,arguments)}function q(U,Q){return ve.apply(this,arguments)}function ve(){return(ve=(0,he.Z)(function*(U,Q){const de=Sn(U),Mt=(yield Ti()).transaction(As,"readwrite");return yield Mt.objectStore(As).put(Q,de),yield Mt.done,Q})).apply(this,arguments)}function qe(U){return nn.apply(this,arguments)}function nn(){return(nn=(0,he.Z)(function*(U){const Q=Sn(U),$e=(yield Ti()).transaction(As,"readwrite");yield $e.objectStore(As).delete(Q),yield $e.done})).apply(this,arguments)}function Sn({appConfig:U}){return U.appId}const jr=new je.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ei(U,Q){return ti.apply(this,arguments)}function ti(){return(ti=(0,he.Z)(function*(U,Q){const de=yield ns(U),$e=Js(Q),Mt={method:"POST",headers:de,body:JSON.stringify($e)};let Zt;try{Zt=yield(yield fetch(Ks(U.appConfig),Mt)).json()}catch($n){throw jr.create("token-subscribe-failed",{errorInfo:null==$n?void 0:$n.toString()})}if(Zt.error)throw jr.create("token-subscribe-failed",{errorInfo:Zt.error.message});if(!Zt.token)throw jr.create("token-subscribe-no-token");return Zt.token})).apply(this,arguments)}function fi(U,Q){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,he.Z)(function*(U,Q){const de=yield ns(U),$e=Js(Q.subscriptionOptions),Mt={method:"PATCH",headers:de,body:JSON.stringify($e)};let Zt;try{Zt=yield(yield fetch(`${Ks(U.appConfig)}/${Q.token}`,Mt)).json()}catch($n){throw jr.create("token-update-failed",{errorInfo:null==$n?void 0:$n.toString()})}if(Zt.error)throw jr.create("token-update-failed",{errorInfo:Zt.error.message});if(!Zt.token)throw jr.create("token-update-no-token");return Zt.token})).apply(this,arguments)}function Ni(U,Q){return ki.apply(this,arguments)}function ki(){return(ki=(0,he.Z)(function*(U,Q){const $e={method:"DELETE",headers:yield ns(U)};try{const Zt=yield(yield fetch(`${Ks(U.appConfig)}/${Q}`,$e)).json();if(Zt.error)throw jr.create("token-unsubscribe-failed",{errorInfo:Zt.error.message})}catch(Mt){throw jr.create("token-unsubscribe-failed",{errorInfo:null==Mt?void 0:Mt.toString()})}})).apply(this,arguments)}function Ks({projectId:U}){return`https://fcmregistrations.googleapis.com/v1/projects/${U}/registrations`}function ns(U){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,he.Z)(function*({appConfig:U,installations:Q}){const de=yield Q.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U.apiKey,"x-goog-firebase-installations-auth":`FIS ${de}`})})).apply(this,arguments)}function Js({p256dh:U,auth:Q,endpoint:de,vapidKey:$e}){const Mt={web:{endpoint:de,auth:Q,p256dh:U}};return $e!==$s&&(Mt.web.applicationPubKey=$e),Mt}const No=6048e5;function fo(U){return Co.apply(this,arguments)}function Co(){return(Co=(0,he.Z)(function*(U){const Q=yield ee(U.swRegistration,U.vapidKey),de={vapidKey:U.vapidKey,swScope:U.swRegistration.scope,endpoint:Q.endpoint,auth:Fs(Q.getKey("auth")),p256dh:Fs(Q.getKey("p256dh"))},$e=yield B(U.firebaseDependencies);if($e){if(be($e.subscriptionOptions,de))return Date.now()>=$e.createTime+No?L(U,{token:$e.token,createTime:Date.now(),subscriptionOptions:de}):$e.token;try{yield Ni(U.firebaseDependencies,$e.token)}catch(Mt){console.warn(Mt)}return Qe(U.firebaseDependencies,de)}return Qe(U.firebaseDependencies,de)})).apply(this,arguments)}function Y(U){return G.apply(this,arguments)}function G(){return(G=(0,he.Z)(function*(U){const Q=yield B(U.firebaseDependencies);Q&&(yield Ni(U.firebaseDependencies,Q.token),yield qe(U.firebaseDependencies));const de=yield U.swRegistration.pushManager.getSubscription();return!de||de.unsubscribe()})).apply(this,arguments)}function L(U,Q){return ye.apply(this,arguments)}function ye(){return(ye=(0,he.Z)(function*(U,Q){try{const de=yield fi(U.firebaseDependencies,Q),$e=Object.assign(Object.assign({},Q),{token:de,createTime:Date.now()});return yield q(U.firebaseDependencies,$e),de}catch(de){throw yield Y(U),de}})).apply(this,arguments)}function Qe(U,Q){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,he.Z)(function*(U,Q){const $e={token:yield ei(U,Q),createTime:Date.now(),subscriptionOptions:Q};return yield q(U,$e),$e.token})).apply(this,arguments)}function ee(U,Q){return K.apply(this,arguments)}function K(){return(K=(0,he.Z)(function*(U,Q){return(yield U.pushManager.getSubscription())||U.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vo(Q)})})).apply(this,arguments)}function be(U,Q){return Q.vapidKey===U.vapidKey&&Q.endpoint===U.endpoint&&Q.auth===U.auth&&Q.p256dh===U.p256dh}function ke(U){const Q={from:U.from,collapseKey:U.collapse_key,messageId:U.fcmMessageId};return function rt(U,Q){if(!Q.notification)return;U.notification={};const de=Q.notification.title;de&&(U.notification.title=de);const $e=Q.notification.body;$e&&(U.notification.body=$e);const Mt=Q.notification.image;Mt&&(U.notification.image=Mt);const Zt=Q.notification.icon;Zt&&(U.notification.icon=Zt)}(Q,U),function Kt(U,Q){!Q.data||(U.data=Q.data)}(Q,U),function xn(U,Q){var de,$e,Mt,Zt,$n;if(!Q.fcmOptions&&!(null===(de=Q.notification)||void 0===de?void 0:de.click_action))return;U.fcmOptions={};const Ur=null!==(Mt=null===($e=Q.fcmOptions)||void 0===$e?void 0:$e.link)&&void 0!==Mt?Mt:null===(Zt=Q.notification)||void 0===Zt?void 0:Zt.click_action;Ur&&(U.fcmOptions.link=Ur);const Kr=null===($n=Q.fcmOptions)||void 0===$n?void 0:$n.analytics_label;Kr&&(U.fcmOptions.analyticsLabel=Kr)}(Q,U),Q}function Sr(U){return"object"==typeof U&&!!U&&qs in U}function jn(U,Q){const de=[];for(let $e=0;$e<U.length;$e++)de.push(U.charAt($e)),$e<Q.length&&de.push(Q.charAt($e));return de.join("")}function _i(U){return jr.create("missing-app-config-values",{valueName:U})}jn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),jn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pi{constructor(Q,de,$e){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Mt=function qr(U){if(!U||!U.options)throw _i("App Configuration Object");if(!U.name)throw _i("App Name");const Q=["projectId","apiKey","appId","messagingSenderId"],{options:de}=U;for(const $e of Q)if(!de[$e])throw _i($e);return{appName:U.name,projectId:de.projectId,apiKey:de.apiKey,appId:de.appId,senderId:de.messagingSenderId}}(Q);this.firebaseDependencies={app:Q,appConfig:Mt,installations:de,analyticsProvider:$e}}_delete(){return Promise.resolve()}}function Vi(U){return ss.apply(this,arguments)}function ss(){return(ss=(0,he.Z)(function*(U){try{U.swRegistration=yield navigator.serviceWorker.register(Eo,{scope:Li}),U.swRegistration.update().catch(()=>{})}catch(Q){throw jr.create("failed-service-worker-registration",{browserErrorMessage:null==Q?void 0:Q.message})}})).apply(this,arguments)}function l(U,Q){return A.apply(this,arguments)}function A(){return(A=(0,he.Z)(function*(U,Q){if(!Q&&!U.swRegistration&&(yield Vi(U)),Q||!U.swRegistration){if(!(Q instanceof ServiceWorkerRegistration))throw jr.create("invalid-sw-registration");U.swRegistration=Q}})).apply(this,arguments)}function I(U,Q){return P.apply(this,arguments)}function P(){return(P=(0,he.Z)(function*(U,Q){Q?U.vapidKey=Q:U.vapidKey||(U.vapidKey=$s)})).apply(this,arguments)}function J(){return(J=(0,he.Z)(function*(U,Q){if(!navigator)throw jr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jr.create("permission-blocked");return yield I(U,null==Q?void 0:Q.vapidKey),yield l(U,null==Q?void 0:Q.serviceWorkerRegistration),fo(U)})).apply(this,arguments)}function ge(U,Q,de){return we.apply(this,arguments)}function we(){return(we=(0,he.Z)(function*(U,Q,de){const $e=ae(Q);(yield U.firebaseDependencies.analyticsProvider.get()).logEvent($e,{message_id:de[qs],message_name:de[Ds],message_time:de[Lo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ae(U){switch(U){case ks.NOTIFICATION_CLICKED:return"notification_open";case ks.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ce(){return(ce=(0,he.Z)(function*(U,Q){const de=Q.data;if(!de.isFirebaseMessaging)return;U.onMessageHandler&&de.messageType===ks.PUSH_RECEIVED&&("function"==typeof U.onMessageHandler?U.onMessageHandler(ke(de)):U.onMessageHandler.next(ke(de)));const $e=de.data;Sr($e)&&"1"===$e[Qs]&&(yield ge(U,de.messageType,$e))})).apply(this,arguments)}const ue="@firebase/messaging",ze=U=>{const Q=new pi(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),U.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",de=>function me(U,Q){return ce.apply(this,arguments)}(Q,de)),Q},tt=U=>{const Q=U.getProvider("messaging").getImmediate();return{getToken:$e=>function z(U,Q){return J.apply(this,arguments)}(Q,$e)}};function Fe(){return yt.apply(this,arguments)}function yt(){return(yt=(0,he.Z)(function*(){try{yield(0,je.eu)()}catch(U){return!1}return"undefined"!=typeof window&&(0,je.hl)()&&(0,je.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function De(){(0,oe._registerComponent)(new He.wA("messaging",ze,"PUBLIC")),(0,oe._registerComponent)(new He.wA("messaging-internal",tt,"PRIVATE")),(0,oe.registerVersion)(ue,"0.12.0"),(0,oe.registerVersion)(ue,"0.12.0","esm2017")}();const Ln="analytics",rn="firebase_id",cr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ur="https://www.googletagmanager.com/gtag/js",Wt=new ht.Yd("@firebase/analytics");function hr(U){return Promise.all(U.map(Q=>Q.catch(de=>de)))}function tr(U,Q){const de=document.createElement("script");de.src=`${ur}?l=${U}&id=${Q}`,de.async=!0,document.head.appendChild(de)}function xi(U,Q,de,$e,Mt,Zt){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,he.Z)(function*(U,Q,de,$e,Mt,Zt){const $n=$e[Mt];try{if($n)yield Q[$n];else{const Kr=(yield hr(de)).find(Hr=>Hr.measurementId===Mt);Kr&&(yield Q[Kr.appId])}}catch(Ur){Wt.error(Ur)}U("config",Mt,Zt)})).apply(this,arguments)}function ia(U,Q,de,$e,Mt){return po.apply(this,arguments)}function po(){return(po=(0,he.Z)(function*(U,Q,de,$e,Mt){try{let Zt=[];if(Mt&&Mt.send_to){let $n=Mt.send_to;Array.isArray($n)||($n=[$n]);const Ur=yield hr(de);for(const Kr of $n){const Hr=Ur.find(vi=>vi.measurementId===Kr),qi=Hr&&Q[Hr.appId];if(!qi){Zt=[];break}Zt.push(qi)}}0===Zt.length&&(Zt=Object.values(Q)),yield Promise.all(Zt),U("event",$e,Mt||{})}catch(Zt){Wt.error(Zt)}})).apply(this,arguments)}function T(U){const Q=window.document.getElementsByTagName("script");for(const de of Object.values(Q))if(de.src&&de.src.includes(ur)&&de.src.includes(U))return de;return null}const le=new je.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Tt=new class Ke{constructor(Q={},de=1e3){this.throttleMetadata=Q,this.intervalMillis=de}getThrottleMetadata(Q){return this.throttleMetadata[Q]}setThrottleMetadata(Q,de){this.throttleMetadata[Q]=de}deleteThrottleMetadata(Q){delete this.throttleMetadata[Q]}};function fn(U){return new Headers({Accept:"application/json","x-goog-api-key":U})}function Pt(U){return rr.apply(this,arguments)}function rr(){return(rr=(0,he.Z)(function*(U){var Q;const{appId:de,apiKey:$e}=U,Mt={method:"GET",headers:fn($e)},Zt=cr.replace("{app-id}",de),$n=yield fetch(Zt,Mt);if(200!==$n.status&&304!==$n.status){let Ur="";try{const Kr=yield $n.json();(null===(Q=Kr.error)||void 0===Q?void 0:Q.message)&&(Ur=Kr.error.message)}catch(Kr){}throw le.create("config-fetch-failed",{httpStatus:$n.status,responseMessage:Ur})}return $n.json()})).apply(this,arguments)}function Cr(U){return mi.apply(this,arguments)}function mi(){return(mi=(0,he.Z)(function*(U,Q=Tt,de){const{appId:$e,apiKey:Mt,measurementId:Zt}=U.options;if(!$e)throw le.create("no-app-id");if(!Mt){if(Zt)return{measurementId:Zt,appId:$e};throw le.create("no-api-key")}const $n=Q.getThrottleMetadata($e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ur=new jt;return setTimeout((0,he.Z)(function*(){Ur.abort()}),void 0!==de?de:6e4),In({appId:$e,apiKey:Mt,measurementId:Zt},$n,Ur,Q)})).apply(this,arguments)}function In(U,Q,de){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,he.Z)(function*(U,{throttleEndTimeMillis:Q,backoffCount:de},$e,Mt=Tt){var Zt;const{appId:$n,measurementId:Ur}=U;try{yield cs($e,Q)}catch(Kr){if(Ur)return Wt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ur} provided in the "measurementId" field in the local Firebase config. [${null==Kr?void 0:Kr.message}]`),{appId:$n,measurementId:Ur};throw Kr}try{const Kr=yield Pt(U);return Mt.deleteThrottleMetadata($n),Kr}catch(Kr){const Hr=Kr;if(!Gn(Hr)){if(Mt.deleteThrottleMetadata($n),Ur)return Wt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ur} provided in the "measurementId" field in the local Firebase config. [${null==Hr?void 0:Hr.message}]`),{appId:$n,measurementId:Ur};throw Kr}const qi=503===Number(null===(Zt=null==Hr?void 0:Hr.customData)||void 0===Zt?void 0:Zt.httpStatus)?(0,je.$s)(de,Mt.intervalMillis,30):(0,je.$s)(de,Mt.intervalMillis),vi={throttleEndTimeMillis:Date.now()+qi,backoffCount:de+1};return Mt.setThrottleMetadata($n,vi),Wt.debug(`Calling attemptFetch again in ${qi} millis`),In(U,vi,$e,Mt)}})).apply(this,arguments)}function cs(U,Q){return new Promise((de,$e)=>{const Mt=Math.max(Q-Date.now(),0),Zt=setTimeout(de,Mt);U.addEventListener(()=>{clearTimeout(Zt),$e(le.create("fetch-throttle",{throttleEndTimeMillis:Q}))})})}function Gn(U){if(!(U instanceof je.ZR&&U.customData))return!1;const Q=Number(U.customData.httpStatus);return 429===Q||500===Q||503===Q||504===Q}class jt{constructor(){this.listeners=[]}addEventListener(Q){this.listeners.push(Q)}abort(){this.listeners.forEach(Q=>Q())}}let Cn,ot;function bo(){return(bo=(0,he.Z)(function*(U,Q,de,$e,Mt){if(Mt&&Mt.global)U("event",de,$e);else{const Zt=yield Q;U("event",de,Object.assign(Object.assign({},$e),{send_to:Zt}))}})).apply(this,arguments)}function pn(U){ot=U}function kt(U){Cn=U}function qn(){return On.apply(this,arguments)}function On(){return(On=(0,he.Z)(function*(){if(!(0,je.hl)())return Wt.warn(le.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,je.eu)()}catch(U){return Wt.warn(le.create("indexeddb-unavailable",{errorInfo:null==U?void 0:U.toString()}).message),!1}return!0})).apply(this,arguments)}function Vn(){return(Vn=(0,he.Z)(function*(U,Q,de,$e,Mt,Zt,$n){var Ur;const Kr=Cr(U);Kr.then(ni=>{de[ni.measurementId]=ni.appId,U.options.measurementId&&ni.measurementId!==U.options.measurementId&&Wt.warn(`The measurement ID in the local Firebase config (${U.options.measurementId}) does not match the measurement ID fetched from the server (${ni.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ni=>Wt.error(ni)),Q.push(Kr);const Hr=qn().then(ni=>{if(ni)return $e.getId()}),[qi,vi]=yield Promise.all([Kr,Hr]);T(Zt)||tr(Zt,qi.measurementId),ot&&(Mt("consent","default",ot),pn(void 0)),Mt("js",new Date);const Go=null!==(Ur=null==$n?void 0:$n.config)&&void 0!==Ur?Ur:{};return Go.origin="firebase",Go.update=!0,null!=vi&&(Go[rn]=vi),Mt("config",qi.measurementId,Go),Cn&&(Mt("set",Cn),kt(void 0)),qi.measurementId})).apply(this,arguments)}class Ls{constructor(Q){this.app=Q}_delete(){return delete Pr[this.app.options.appId],Promise.resolve()}}let Pr={},Do=[];const yi={};let Ys,Vs,ir="dataLayer",Ho=!1;function Ll(U,Q,de){!function va(){const U=[];if((0,je.ru)()&&U.push("This is a browser extension environment."),(0,je.zI)()||U.push("Cookies are not available."),U.length>0){const Q=U.map(($e,Mt)=>`(${Mt+1}) ${$e}`).join(" "),de=le.create("invalid-analytics-context",{errorInfo:Q});Wt.warn(de.message)}}();const $e=U.options.appId;if(!$e)throw le.create("no-app-id");if(!U.options.apiKey){if(!U.options.measurementId)throw le.create("no-api-key");Wt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${U.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pr[$e])throw le.create("already-exists",{id:$e});if(!Ho){!function gi(U){let Q=[];Array.isArray(window[U])?Q=window[U]:window[U]=Q}(ir);const{wrappedGtag:Zt,gtagCore:$n}=function C(U,Q,de,$e,Mt){let Zt=function(...$n){window[$e].push(arguments)};return window[Mt]&&"function"==typeof window[Mt]&&(Zt=window[Mt]),window[Mt]=function Z(U,Q,de,$e){function Zt(){return(Zt=(0,he.Z)(function*($n,Ur,Kr){try{"event"===$n?yield ia(U,Q,de,Ur,Kr):"config"===$n?yield xi(U,Q,de,$e,Ur,Kr):"consent"===$n?U("consent","update",Kr):U("set",Ur)}catch(Hr){Wt.error(Hr)}})).apply(this,arguments)}return function Mt($n,Ur,Kr){return Zt.apply(this,arguments)}}(Zt,U,Q,de),{gtagCore:Zt,wrappedGtag:window[Mt]}}(Pr,Do,yi,ir,"gtag");Vs=Zt,Ys=$n,Ho=!0}return Pr[$e]=function ar(U,Q,de,$e,Mt,Zt,$n){return Vn.apply(this,arguments)}(U,Do,yi,Q,Ys,ir,de),new Ls(U)}function sa(){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,he.Z)(function*(){if((0,je.ru)()||!(0,je.zI)()||!(0,je.hl)())return!1;try{return yield(0,je.eu)()}catch(U){return!1}})).apply(this,arguments)}const To="@firebase/analytics";!function aa(){(0,oe._registerComponent)(new He.wA(Ln,(Q,{options:de})=>Ll(Q.getProvider("app").getImmediate(),Q.getProvider("installations-internal").getImmediate(),de),"PUBLIC")),(0,oe._registerComponent)(new He.wA("analytics-internal",function U(Q){try{const de=Q.getProvider(Ln).getImmediate();return{logEvent:($e,Mt,Zt)=>function Xa(U,Q,de,$e){U=(0,je.m9)(U),function Qi(U,Q,de,$e,Mt){return bo.apply(this,arguments)}(Vs,Pr[U.app.options.appId],Q,de,$e).catch(Mt=>Wt.error(Mt))}(de,$e,Mt,Zt)}}catch(de){throw le.create("interop-component-reg-failed",{reason:de})}},"PRIVATE")),(0,oe.registerVersion)(To,"0.9.0"),(0,oe.registerVersion)(To,"0.9.0","esm2017")}();var Gu=j(4408),Ao=j(7565);const Jl=new class Jo extends Ao.v{}(class la extends Gu.o{constructor(Q,de){super(Q,de),this.scheduler=Q,this.work=de}schedule(Q,de=0){return de>0?super.schedule(Q,de):(this.delay=de,this.state=Q,this.scheduler.flush(this),this)}execute(Q,de){return de>0||this.closed?super.execute(Q,de):this._execute(Q,de)}requestAsyncId(Q,de,$e=0){return null!=$e&&$e>0||null==$e&&this.delay>0?super.requestAsyncId(Q,de,$e):(Q.flush(this),0)}});var go=j(4986),dl=j(8505),ea=j(5363),Dl=j(9468);const $a=new g.GfV("7.5.0"),vu="__angularfire_symbol__analyticsIsSupportedValue",ha="__angularfire_symbol__analyticsIsSupported",mo="__angularfire_symbol__remoteConfigIsSupportedValue",Ja="__angularfire_symbol__remoteConfigIsSupported",ja="__angularfire_symbol__messagingIsSupportedValue",oo="__angularfire_symbol__messagingIsSupported";function Vl(U,Q,de){if(Q){if(1===Q.length)return Q[0];const Zt=Q.filter($n=>$n.app===de);if(1===Zt.length)return Zt[0]}return de.container.getProvider(U).getImmediate({optional:!0})}globalThis[ha]||(globalThis[ha]=sa().then(U=>globalThis[vu]=U).catch(()=>globalThis[vu]=!1)),globalThis[oo]||(globalThis[oo]=Fe().then(U=>globalThis[ja]=U).catch(()=>globalThis[ja]=!1)),globalThis[Ja]||(globalThis[Ja]=ho().then(U=>globalThis[mo]=U).catch(()=>globalThis[mo]=!1));const tl=(U,Q)=>{const de=Q?[Q]:(0,k.C6)(),$e=[];return de.forEach(Mt=>{Mt.container.getProvider(U).instances.forEach($n=>{$e.includes($n)||$e.push($n)})}),$e};function Sa(){}class ta{constructor(Q,de=Jl){this.zone=Q,this.delegate=de}now(){return this.delegate.now()}schedule(Q,de,$e){const Mt=this.zone;return this.delegate.schedule(function($n){Mt.runGuarded(()=>{Q.apply(this,[$n])})},de,$e)}}class hl{constructor(Q){this.zone=Q,this.task=null}call(Q,de){const $e=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sa,{},Sa,Sa)),de.pipe((0,dl.b)({next:$e,complete:$e,error:$e})).subscribe(Q).add($e)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let nl=(()=>{class U{constructor(de){this.ngZone=de,this.outsideAngular=de.runOutsideAngular(()=>new ta(Zone.current)),this.insideAngular=de.run(()=>new ta(Zone.current,go.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return U.\u0275fac=function(de){return new(de||U)(g.LFG(g.R0b))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();function ao(){const U=globalThis.\u0275AngularFireScheduler;if(!U)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return U}function zu(U){return U.pipe((0,ea.Q)(ao().outsideAngular))}function Al(U){return ao(),function Da(U){return function(de){return(de=de.lift(new hl(U.ngZone))).pipe((0,Dl.R)(U.outsideAngular),(0,ea.Q)(U.insideAngular))}}(ao())(U)}},2090:(Zn,It,j)=>{j.d(It,{$s:()=>Qn,BH:()=>lr,DV:()=>Yr,G6:()=>wt,GJ:()=>or,L:()=>We,LL:()=>Vt,P0:()=>Lt,Pz:()=>sr,Sg:()=>yn,UG:()=>ln,UI:()=>er,US:()=>He,Wl:()=>ut,Yr:()=>Ge,ZB:()=>Pe,ZR:()=>mr,aH:()=>Yt,b$:()=>Jt,cI:()=>St,dS:()=>di,eu:()=>Ht,g5:()=>he,gK:()=>Br,gQ:()=>nt,h$:()=>ht,hl:()=>on,hu:()=>k,jU:()=>Dn,m9:()=>Lr,ne:()=>dt,p$:()=>Ne,pd:()=>cn,r3:()=>dr,ru:()=>Nt,tV:()=>at,uI:()=>_t,ug:()=>Hn,vZ:()=>Gr,w1:()=>dn,w9:()=>Wn,xO:()=>is,xb:()=>ii,z$:()=>wn,zI:()=>Oe,zd:()=>Xi});const k=function(Xe,Ue){if(!Xe)throw he(Ue)},he=function(Xe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Xe)},oe=function(Xe){const Ue=[];let ft=0;for(let un=0;un<Xe.length;un++){let Ut=Xe.charCodeAt(un);Ut<128?Ue[ft++]=Ut:Ut<2048?(Ue[ft++]=Ut>>6|192,Ue[ft++]=63&Ut|128):55296==(64512&Ut)&&un+1<Xe.length&&56320==(64512&Xe.charCodeAt(un+1))?(Ut=65536+((1023&Ut)<<10)+(1023&Xe.charCodeAt(++un)),Ue[ft++]=Ut>>18|240,Ue[ft++]=Ut>>12&63|128,Ue[ft++]=Ut>>6&63|128,Ue[ft++]=63&Ut|128):(Ue[ft++]=Ut>>12|224,Ue[ft++]=Ut>>6&63|128,Ue[ft++]=63&Ut|128)}return Ue},He={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Xe,Ue){if(!Array.isArray(Xe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ft=Ue?this.byteToCharMapWebSafe_:this.byteToCharMap_,un=[];for(let Ut=0;Ut<Xe.length;Ut+=3){const Be=Xe[Ut],Me=Ut+1<Xe.length,Ae=Me?Xe[Ut+1]:0,pt=Ut+2<Xe.length,sn=pt?Xe[Ut+2]:0;let oi=(15&Ae)<<2|sn>>6,Zi=63&sn;pt||(Zi=64,Me||(oi=64)),un.push(ft[Be>>2],ft[(3&Be)<<4|Ae>>4],ft[oi],ft[Zi])}return un.join("")},encodeString(Xe,Ue){return this.HAS_NATIVE_SUPPORT&&!Ue?btoa(Xe):this.encodeByteArray(oe(Xe),Ue)},decodeString(Xe,Ue){return this.HAS_NATIVE_SUPPORT&&!Ue?atob(Xe):function(Xe){const Ue=[];let ft=0,un=0;for(;ft<Xe.length;){const Ut=Xe[ft++];if(Ut<128)Ue[un++]=String.fromCharCode(Ut);else if(Ut>191&&Ut<224){const Be=Xe[ft++];Ue[un++]=String.fromCharCode((31&Ut)<<6|63&Be)}else if(Ut>239&&Ut<365){const pt=((7&Ut)<<18|(63&Xe[ft++])<<12|(63&Xe[ft++])<<6|63&Xe[ft++])-65536;Ue[un++]=String.fromCharCode(55296+(pt>>10)),Ue[un++]=String.fromCharCode(56320+(1023&pt))}else{const Be=Xe[ft++],Me=Xe[ft++];Ue[un++]=String.fromCharCode((15&Ut)<<12|(63&Be)<<6|63&Me)}}return Ue.join("")}(this.decodeStringToByteArray(Xe,Ue))},decodeStringToByteArray(Xe,Ue){this.init_();const ft=Ue?this.charToByteMapWebSafe_:this.charToByteMap_,un=[];for(let Ut=0;Ut<Xe.length;){const Be=ft[Xe.charAt(Ut++)],Ae=Ut<Xe.length?ft[Xe.charAt(Ut)]:0;++Ut;const sn=Ut<Xe.length?ft[Xe.charAt(Ut)]:64;++Ut;const Jn=Ut<Xe.length?ft[Xe.charAt(Ut)]:64;if(++Ut,null==Be||null==Ae||null==sn||null==Jn)throw Error();un.push(Be<<2|Ae>>4),64!==sn&&(un.push(Ae<<4&240|sn>>2),64!==Jn&&un.push(sn<<6&192|Jn))}return un},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Xe=0;Xe<this.ENCODED_VALS.length;Xe++)this.byteToCharMap_[Xe]=this.ENCODED_VALS.charAt(Xe),this.charToByteMap_[this.byteToCharMap_[Xe]]=Xe,this.byteToCharMapWebSafe_[Xe]=this.ENCODED_VALS_WEBSAFE.charAt(Xe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Xe]]=Xe,Xe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Xe)]=Xe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Xe)]=Xe)}}},ht=function(Xe){const Ue=oe(Xe);return He.encodeByteArray(Ue,!0)},We=function(Xe){return ht(Xe).replace(/\./g,"")},at=function(Xe){try{return He.decodeString(Xe,!0)}catch(Ue){console.error("base64Decode failed: ",Ue)}return null};function Ne(Xe){return Pe(void 0,Xe)}function Pe(Xe,Ue){if(!(Ue instanceof Object))return Ue;switch(Ue.constructor){case Date:return new Date(Ue.getTime());case Object:void 0===Xe&&(Xe={});break;case Array:Xe=[];break;default:return Ue}for(const ft in Ue)!Ue.hasOwnProperty(ft)||!vt(ft)||(Xe[ft]=Pe(Xe[ft],Ue[ft]));return Xe}function vt(Xe){return"__proto__"!==Xe}function wn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _t(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function ln(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Xe){return!1}}function Dn(){return"object"==typeof self&&self.self===self}function Nt(){const Xe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Xe&&void 0!==Xe.id}function Jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dn(){const Xe=wn();return Xe.indexOf("MSIE ")>=0||Xe.indexOf("Trident/")>=0}function Ge(){return!1}function wt(){return!ln()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function on(){try{return"object"==typeof indexedDB}catch(Xe){return!1}}function Ht(){return new Promise((Xe,Ue)=>{try{let ft=!0;const un="validate-browser-context-for-indexeddb-analytics-module",Ut=self.indexedDB.open(un);Ut.onsuccess=()=>{Ut.result.close(),ft||self.indexedDB.deleteDatabase(un),Xe(!0)},Ut.onupgradeneeded=()=>{ft=!1},Ut.onerror=()=>{var Be;Ue((null===(Be=Ut.error)||void 0===Be?void 0:Be.message)||"")}}catch(ft){Ue(ft)}})}function Oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Ft=()=>{try{return function Bt(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Xe=process.env.__FIREBASE_DEFAULTS__;return Xe?JSON.parse(Xe):void 0})()||(()=>{if("undefined"==typeof document)return;let Xe;try{Xe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ft){return}const Ue=Xe&&at(Xe[1]);return Ue&&JSON.parse(Ue)})()}catch(Xe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Xe}`)}},Lt=Xe=>{const Ue=(Xe=>{var Ue,ft;return null===(ft=null===(Ue=Ft())||void 0===Ue?void 0:Ue.emulatorHosts)||void 0===ft?void 0:ft[Xe]})(Xe);if(!Ue)return;const ft=Ue.lastIndexOf(":");if(ft<=0||ft+1===Ue.length)throw new Error(`Invalid host ${Ue} with no separate hostname and port!`);const un=parseInt(Ue.substring(ft+1),10);return"["===Ue[0]?[Ue.substring(1,ft-1),un]:[Ue.substring(0,ft),un]},Yt=()=>{var Xe;return null===(Xe=Ft())||void 0===Xe?void 0:Xe.config},sr=Xe=>{var Ue;return null===(Ue=Ft())||void 0===Ue?void 0:Ue[`_${Xe}`]};class lr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ue,ft)=>{this.resolve=Ue,this.reject=ft})}wrapCallback(Ue){return(ft,un)=>{ft?this.reject(ft):this.resolve(un),"function"==typeof Ue&&(this.promise.catch(()=>{}),1===Ue.length?Ue(ft):Ue(ft,un))}}}function yn(Xe,Ue){if(Xe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const un=Ue||"demo-project",Ut=Xe.iat||0,Be=Xe.sub||Xe.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${un}`,aud:un,iat:Ut,exp:Ut+3600,auth_time:Ut,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},Xe);return[We(JSON.stringify({alg:"none",type:"JWT"})),We(JSON.stringify(Me)),""].join(".")}class mr extends Error{constructor(Ue,ft,un){super(ft),this.code=Ue,this.customData=un,this.name="FirebaseError",Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vt.prototype.create)}}class Vt{constructor(Ue,ft,un){this.service=Ue,this.serviceName=ft,this.errors=un}create(Ue,...ft){const un=ft[0]||{},Ut=`${this.service}/${Ue}`,Be=this.errors[Ue],Me=Be?function Ot(Xe,Ue){return Xe.replace(it,(ft,un)=>{const Ut=Ue[un];return null!=Ut?String(Ut):`<${un}?>`})}(Be,un):"Error";return new mr(Ut,`${this.serviceName}: ${Me} (${Ut}).`,un)}}const it=/\{\$([^}]+)}/g;function St(Xe){return JSON.parse(Xe)}function ut(Xe){return JSON.stringify(Xe)}const Qt=function(Xe){let Ue={},ft={},un={},Ut="";try{const Be=Xe.split(".");Ue=St(at(Be[0])||""),ft=St(at(Be[1])||""),Ut=Be[2],un=ft.d||{},delete ft.d}catch(Be){}return{header:Ue,claims:ft,data:un,signature:Ut}},Wn=function(Xe){const ft=Qt(Xe).claims;return!!ft&&"object"==typeof ft&&ft.hasOwnProperty("iat")},or=function(Xe){const Ue=Qt(Xe).claims;return"object"==typeof Ue&&!0===Ue.admin};function dr(Xe,Ue){return Object.prototype.hasOwnProperty.call(Xe,Ue)}function Yr(Xe,Ue){if(Object.prototype.hasOwnProperty.call(Xe,Ue))return Xe[Ue]}function ii(Xe){for(const Ue in Xe)if(Object.prototype.hasOwnProperty.call(Xe,Ue))return!1;return!0}function er(Xe,Ue,ft){const un={};for(const Ut in Xe)Object.prototype.hasOwnProperty.call(Xe,Ut)&&(un[Ut]=Ue.call(ft,Xe[Ut],Ut,Xe));return un}function Gr(Xe,Ue){if(Xe===Ue)return!0;const ft=Object.keys(Xe),un=Object.keys(Ue);for(const Ut of ft){if(!un.includes(Ut))return!1;const Be=Xe[Ut],Me=Ue[Ut];if(Mr(Be)&&Mr(Me)){if(!Gr(Be,Me))return!1}else if(Be!==Me)return!1}for(const Ut of un)if(!ft.includes(Ut))return!1;return!0}function Mr(Xe){return null!==Xe&&"object"==typeof Xe}function is(Xe){const Ue=[];for(const[ft,un]of Object.entries(Xe))Array.isArray(un)?un.forEach(Ut=>{Ue.push(encodeURIComponent(ft)+"="+encodeURIComponent(Ut))}):Ue.push(encodeURIComponent(ft)+"="+encodeURIComponent(un));return Ue.length?"&"+Ue.join("&"):""}function Xi(Xe){const Ue={};return Xe.replace(/^\?/,"").split("&").forEach(un=>{if(un){const[Ut,Be]=un.split("=");Ue[decodeURIComponent(Ut)]=decodeURIComponent(Be)}}),Ue}function cn(Xe){const Ue=Xe.indexOf("?");if(!Ue)return"";const ft=Xe.indexOf("#",Ue);return Xe.substring(Ue,ft>0?ft:void 0)}class nt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ue=1;Ue<this.blockSize;++Ue)this.pad_[Ue]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ue,ft){ft||(ft=0);const un=this.W_;if("string"==typeof Ue)for(let Jn=0;Jn<16;Jn++)un[Jn]=Ue.charCodeAt(ft)<<24|Ue.charCodeAt(ft+1)<<16|Ue.charCodeAt(ft+2)<<8|Ue.charCodeAt(ft+3),ft+=4;else for(let Jn=0;Jn<16;Jn++)un[Jn]=Ue[ft]<<24|Ue[ft+1]<<16|Ue[ft+2]<<8|Ue[ft+3],ft+=4;for(let Jn=16;Jn<80;Jn++){const oi=un[Jn-3]^un[Jn-8]^un[Jn-14]^un[Jn-16];un[Jn]=4294967295&(oi<<1|oi>>>31)}let sn,_r,Ut=this.chain_[0],Be=this.chain_[1],Me=this.chain_[2],Ae=this.chain_[3],pt=this.chain_[4];for(let Jn=0;Jn<80;Jn++){Jn<40?Jn<20?(sn=Ae^Be&(Me^Ae),_r=1518500249):(sn=Be^Me^Ae,_r=1859775393):Jn<60?(sn=Be&Me|Ae&(Be|Me),_r=2400959708):(sn=Be^Me^Ae,_r=3395469782);const oi=(Ut<<5|Ut>>>27)+sn+pt+_r+un[Jn]&4294967295;pt=Ae,Ae=Me,Me=4294967295&(Be<<30|Be>>>2),Be=Ut,Ut=oi}this.chain_[0]=this.chain_[0]+Ut&4294967295,this.chain_[1]=this.chain_[1]+Be&4294967295,this.chain_[2]=this.chain_[2]+Me&4294967295,this.chain_[3]=this.chain_[3]+Ae&4294967295,this.chain_[4]=this.chain_[4]+pt&4294967295}update(Ue,ft){if(null==Ue)return;void 0===ft&&(ft=Ue.length);const un=ft-this.blockSize;let Ut=0;const Be=this.buf_;let Me=this.inbuf_;for(;Ut<ft;){if(0===Me)for(;Ut<=un;)this.compress_(Ue,Ut),Ut+=this.blockSize;if("string"==typeof Ue){for(;Ut<ft;)if(Be[Me]=Ue.charCodeAt(Ut),++Me,++Ut,Me===this.blockSize){this.compress_(Be),Me=0;break}}else for(;Ut<ft;)if(Be[Me]=Ue[Ut],++Me,++Ut,Me===this.blockSize){this.compress_(Be),Me=0;break}}this.inbuf_=Me,this.total_+=ft}digest(){const Ue=[];let ft=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ut=this.blockSize-1;Ut>=56;Ut--)this.buf_[Ut]=255&ft,ft/=256;this.compress_(this.buf_);let un=0;for(let Ut=0;Ut<5;Ut++)for(let Be=24;Be>=0;Be-=8)Ue[un]=this.chain_[Ut]>>Be&255,++un;return Ue}}function dt(Xe,Ue){const ft=new Gt(Xe,Ue);return ft.subscribe.bind(ft)}class Gt{constructor(Ue,ft){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ft,this.task.then(()=>{Ue(this)}).catch(un=>{this.error(un)})}next(Ue){this.forEachObserver(ft=>{ft.next(Ue)})}error(Ue){this.forEachObserver(ft=>{ft.error(Ue)}),this.close(Ue)}complete(){this.forEachObserver(Ue=>{Ue.complete()}),this.close()}subscribe(Ue,ft,un){let Ut;if(void 0===Ue&&void 0===ft&&void 0===un)throw new Error("Missing Observer.");Ut=function bn(Xe,Ue){if("object"!=typeof Xe||null===Xe)return!1;for(const ft of Ue)if(ft in Xe&&"function"==typeof Xe[ft])return!0;return!1}(Ue,["next","error","complete"])?Ue:{next:Ue,error:ft,complete:un},void 0===Ut.next&&(Ut.next=Yn),void 0===Ut.error&&(Ut.error=Yn),void 0===Ut.complete&&(Ut.complete=Yn);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ut.error(this.finalError):Ut.complete()}catch(Me){}}),this.observers.push(Ut),Be}unsubscribeOne(Ue){void 0===this.observers||void 0===this.observers[Ue]||(delete this.observers[Ue],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ue){if(!this.finalized)for(let ft=0;ft<this.observers.length;ft++)this.sendOne(ft,Ue)}sendOne(Ue,ft){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ue])try{ft(this.observers[Ue])}catch(un){"undefined"!=typeof console&&console.error&&console.error(un)}})}close(Ue){this.finalized||(this.finalized=!0,void 0!==Ue&&(this.finalError=Ue),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yn(){}function Br(Xe,Ue){return`${Xe} failed: ${Ue} argument `}const di=function(Xe){const Ue=[];let ft=0;for(let un=0;un<Xe.length;un++){let Ut=Xe.charCodeAt(un);if(Ut>=55296&&Ut<=56319){const Be=Ut-55296;un++,k(un<Xe.length,"Surrogate pair missing trail surrogate."),Ut=65536+(Be<<10)+(Xe.charCodeAt(un)-56320)}Ut<128?Ue[ft++]=Ut:Ut<2048?(Ue[ft++]=Ut>>6|192,Ue[ft++]=63&Ut|128):Ut<65536?(Ue[ft++]=Ut>>12|224,Ue[ft++]=Ut>>6&63|128,Ue[ft++]=63&Ut|128):(Ue[ft++]=Ut>>18|240,Ue[ft++]=Ut>>12&63|128,Ue[ft++]=Ut>>6&63|128,Ue[ft++]=63&Ut|128)}return Ue},Hn=function(Xe){let Ue=0;for(let ft=0;ft<Xe.length;ft++){const un=Xe.charCodeAt(ft);un<128?Ue++:un<2048?Ue+=2:un>=55296&&un<=56319?(Ue+=4,ft++):Ue+=3}return Ue};function Qn(Xe,Ue=1e3,ft=2){const un=Ue*Math.pow(ft,Xe),Ut=Math.round(.5*un*(Math.random()-.5)*2);return Math.min(144e5,un+Ut)}function Lr(Xe){return Xe&&Xe._delegate?Xe._delegate:Xe}},5089:(Zn,It,j)=>{j.d(It,{e:()=>He});var g=j(2340),k=j(5e3),he=j(520),oe=j(6115),je=j(8177);let He=(()=>{class ht{constructor(at,Ne,Pe){this.http=at,this.router=Ne,this.cartService=Pe,this.logoutloading=!1}login(at){return this.http.post(`${g.N.apiUrl}login`,at)}register(at){return this.http.post(`${g.N.apiUrl}register`,at)}sent_otp(at){return this.http.post(`${g.N.apiUrl}sent_otp`,at)}verify_otp(at){return this.http.post(`${g.N.apiUrl}verify_otp`,at)}resetPassword(at){return this.http.post(`${g.N.apiUrl}reset_password`,at)}contact_us(at){return this.http.post(`${g.N.apiUrl}contact_us`,at)}logout(){this.logoutloading=!0,this.http.post(`${g.N.apiUrl}logout`,{}).subscribe(at=>{this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]),this.logoutloading=!1})}set_online_offline(at){this.http.post(`${g.N.apiUrl}set_online_offline`,{is_online:at}).subscribe(Ne=>console.log())}}return ht.\u0275fac=function(at){return new(at||ht)(k.LFG(he.eN),k.LFG(oe.F0),k.LFG(je.N))},ht.\u0275prov=k.Yz7({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht})()},8177:(Zn,It,j)=>{j.d(It,{N:()=>je});var g=j(1135),k=j(2340),he=j(5e3),oe=j(520);let je=(()=>{class He{constructor(We){this.http=We,this.cartItems=new g.X(null),this.discount=new g.X(0),this.showCopon=!1,this.coponid=new g.X(null)}addToCart(We){return this.http.post(`${k.N.apiUrl}add_to_cart`,We)}deleteItemFromCart(We){return this.http.post(`${k.N.apiUrl}delete_from_cart`,We)}getCart(){return this.http.get(`${k.N.apiUrl}my_cart`).subscribe(We=>{var at,Ne;(null===(at=null==We?void 0:We.data)||void 0===at?void 0:at.cartdetails)?this.cartItems.next(null===(Ne=null==We?void 0:We.data)||void 0===Ne?void 0:Ne.cartdetails):this.cartItems.next([])})}getcartProducts(){return this.http.get(`${k.N.apiUrl}my_cart`)}getRecomnded(){return this.http.get(`${k.N.apiUrl}recommed_materials_offers`)}verifyCopon(We){return this.http.get(`${k.N.apiUrl}coupon/${We}`)}addOrder(We){return this.http.post(`${k.N.apiUrl}add_order`,We)}}return He.\u0275fac=function(We){return new(We||He)(he.LFG(oe.eN))},He.\u0275prov=he.Yz7({token:He,factory:He.\u0275fac,providedIn:"root"}),He})()},452:(Zn,It,j)=>{j.d(It,{g:()=>oe});var g=j(2340),k=j(5e3),he=j(520);let oe=(()=>{class je{constructor(ht){this.http=ht}getSettings(){return this.http.get(`${g.N.apiUrl}settings`)}}return je.\u0275fac=function(ht){return new(ht||je)(k.LFG(he.eN))},je.\u0275prov=k.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})()},6290:(Zn,It,j)=>{j.d(It,{G:()=>je});var g=j(5e3),k=j(9808);function he(He,ht){if(1&He&&g._UZ(0,"img",3),2&He){const We=g.oxw();g.Q6J("src",We.imgSrc,g.LSH)}}function oe(He,ht){if(1&He&&(g.TgZ(0,"div",4)(1,"h1",5),g._uU(2),g.qZA()()),2&He){const We=g.oxw();g.Udp("background-image",We.urll()),g.xp6(2),g.hij(" ",We.text," ")}}let je=(()=>{class He{constructor(){this.imgSrc="",this.text=""}ngOnInit(){}urll(){return`url(${this.imgSrc})`}}return He.\u0275fac=function(We){return new(We||He)},He.\u0275cmp=g.Xpm({type:He,selectors:[["app-header"]],inputs:{imgSrc:"imgSrc",text:"text"},decls:3,vars:2,consts:[[1,"mb-4","position-relative"],["alt","\u062f\u0631\u0627\u0633\u062a\u064a","style","max-height: 200px;","class","img-fluid w-100",3,"src",4,"ngIf"],["style","\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 150px;\n\n    ","class","text-center headercstm",3,"backgroundImage",4,"ngIf"],["alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"img-fluid","w-100",2,"max-height","200px",3,"src"],[1,"text-center","headercstm",2,"display","flex","justify-content","center","align-items","center","width","100%","height","150px"],[1,"h1cstm",2,"color","white"]],template:function(We,at){1&We&&(g.TgZ(0,"header",0),g.YNc(1,he,1,1,"img",1),g.YNc(2,oe,3,3,"div",2),g.qZA()),2&We&&(g.xp6(1),g.Q6J("ngIf",!at.text),g.xp6(1),g.Q6J("ngIf",at.text))},directives:[k.O5],styles:[".h1cstm[_ngcontent-%COMP%]{font-size:50px}@media only screen and (max-width: 600px){.h1cstm[_ngcontent-%COMP%]{font-size:30px}}@media only screen and (max-width: 768px){.headercstm[_ngcontent-%COMP%]{background-position:center}}"]}),He})()},4466:(Zn,It,j)=>{j.d(It,{m:()=>at});var g=j(9808),k=j(6115),he=j(2382),oe=j(520),je=j(2290),He=j(9485),ht=j(377),We=j(5e3);let at=(()=>{class Ne{}return Ne.\u0275fac=function(vt){return new(vt||Ne)},Ne.\u0275mod=We.oAB({type:Ne}),Ne.\u0275inj=We.cJS({providers:[g.uU],imports:[[ht.TE,g.ez,k.Bz,he.UX,he.u5,oe.JF,je.Rh.forRoot(),He.kz],ht.TE,He.kz,he.UX,he.u5,oe.JF,je.Rh]}),Ne})()},2340:(Zn,It,j)=>{j.d(It,{N:()=>g});const g={production:!0,apiUrl:"https://drastiiq8.com/demo-dev/Drasti-Backend/public/api/"}},1201:(Zn,It,j)=>{var g=j(2313),k=j(5e3),he=j(6115);let oe=(()=>{class Z{constructor(T){this.title=T}ngOnInit(){this.title.setTitle("\u0627\u0644\u0635\u0641\u062d\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629 - \u062f\u0631\u0627\u0633\u062a\u064a")}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(g.Dx))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-not-found"]],decls:5,vars:0,consts:[[1,"conditions","py-5",2,"min-height","100vh"],[1,"container"],[1,"bg-white","rounded","p-5"],[2,"font-size","30px"]],template:function(T,F){1&T&&(k.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),k._uU(4," \u0639\u0641\u0648\u0627! \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a\u0647\u0627. "),k.qZA()()()())},styles:[""]}),Z})();var je=j(2382),He=j(5089),ht=j(2290),We=j(6290),at=j(9808);function Ne(Z,C){1&Z&&(k.TgZ(0,"p",14),k._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),k.qZA())}function Pe(Z,C){1&Z&&(k.TgZ(0,"p",14),k._uU(1," \u0623\u062f\u062e\u0644 \u0628\u0631\u064a\u062f \u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0635\u0627\u0644\u062d "),k.qZA())}function vt(Z,C){1&Z&&(k.TgZ(0,"p",14),k._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),k.qZA())}let wn=(()=>{class Z{constructor(T,F,le,Ce){this.fb=T,this.authService=F,this.router=le,this.toastr=Ce,this.submitLoading=!1,this.submited=!1}ngOnInit(){this.sendnowForm=this.fb.group({name:["",je.kI.required],email:["",[je.kI.required,je.kI.email]],message:["",je.kI.required]})}senMsg(){this.submited=!0,this.sendnowForm.valid&&(this.submitLoading=!0,this.authService.contact_us(this.sendnowForm.value).subscribe(T=>{this.toastr.success("\u062a\u0645 \u0627\u0644\u0627\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d"),this.router.navigate(["/"])},T=>{this.submitLoading=!1}))}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(je.qu),k.Y36(He.e),k.Y36(he.F0),k.Y36(ht._W))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-send-now"]],decls:31,vars:5,consts:[["text","\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627","imgSrc","assets/Kv8tXk2GKST8C32eQc751.jpeg"],[1,"container","my-5",2,"min-height","100vh"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-5"],[1,"redstar"],["formControlName","name","type","text",1,"form-control"],["class","text-danger my-1",4,"ngIf"],["formControlName","email","type","email",1,"form-control"],["formControlName","message","rows","5",1,"form-control"],[1,"text-center"],[1,"bluButton",3,"disabled"],[1,"text-danger","my-1"]],template:function(T,F){1&T&&(k._UZ(0,"app-header",0),k.TgZ(1,"section",1)(2,"div",2),k._UZ(3,"div",3),k.TgZ(4,"div",4)(5,"form",5),k.NdJ("ngSubmit",function(){return F.senMsg()}),k.TgZ(6,"div",6)(7,"label"),k._uU(8,"\u0627\u0644\u0623\u0633\u0645 "),k.TgZ(9,"span",7),k._uU(10,"*"),k.qZA()(),k._UZ(11,"input",8),k.YNc(12,Ne,2,0,"p",9),k.qZA(),k.TgZ(13,"div",6)(14,"label"),k._uU(15,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0623\u0644\u0643\u062a\u0631\u0648\u0646\u064a "),k.TgZ(16,"span",7),k._uU(17,"*"),k.qZA()(),k._UZ(18,"input",10),k.YNc(19,Pe,2,0,"p",9),k.qZA(),k.TgZ(20,"div",6)(21,"label"),k._uU(22,"\u0627\u0644\u0631\u0633\u0627\u0644\u0629 "),k.TgZ(23,"span",7),k._uU(24,"*"),k.qZA()(),k._UZ(25,"textarea",11),k.YNc(26,vt,2,0,"p",9),k.qZA(),k.TgZ(27,"div",12)(28,"button",13),k._uU(29," \u0623\u0631\u0633\u0627\u0644 "),k.qZA()()()(),k._UZ(30,"div",3),k.qZA()()),2&T&&(k.xp6(5),k.Q6J("formGroup",F.sendnowForm),k.xp6(7),k.Q6J("ngIf",null!=F.sendnowForm.controls.name.errors&&F.sendnowForm.controls.name.touched||null!=F.sendnowForm.controls.name.errors&&F.submited),k.xp6(7),k.Q6J("ngIf",null!=F.sendnowForm.controls.email.errors&&F.sendnowForm.controls.email.touched||null!=F.sendnowForm.controls.email.errors&&F.submited),k.xp6(7),k.Q6J("ngIf",null!=F.sendnowForm.controls.message.errors&&F.sendnowForm.controls.message.touched||null!=F.sendnowForm.controls.message.errors&&F.submited),k.xp6(2),k.Q6J("disabled",F.submitLoading))},directives:[We.G,je._Y,je.JL,je.sg,je.Fj,je.JJ,je.u,at.O5],styles:[""]}),Z})(),_t=(()=>{class Z{constructor(T){this.router=T}canActivate(T,F){return!!localStorage.getItem("drastitoken")||(this.router.navigate(["/auth/login"]),!1)}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(he.F0))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})();const Dn=[{path:"",loadChildren:()=>j.e(954).then(j.bind(j,3954)).then(Z=>Z.HomeModule)},{path:"auth",loadChildren:()=>j.e(133).then(j.bind(j,1133)).then(Z=>Z.AuthModule),canActivate:[(()=>{class Z{constructor(T){this.router=T}canActivate(T,F){return!localStorage.getItem("drastitoken")||(this.router.navigate(["/"]),!1)}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(he.F0))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()]},{path:"stage/:id",loadChildren:()=>Promise.all([j.e(592),j.e(362)]).then(j.bind(j,362)).then(Z=>Z.StageDetailsModule)},{path:"all-msgs",loadChildren:()=>Promise.all([j.e(592),j.e(193)]).then(j.bind(j,6193)).then(Z=>Z.AllMsgsModule)},{path:"classes/:id/:spe",loadChildren:()=>Promise.all([j.e(592),j.e(854)]).then(j.bind(j,2532)).then(Z=>Z.ClassesModule)},{path:"specialist/:id/:specialist",loadChildren:()=>Promise.all([j.e(592),j.e(667)]).then(j.bind(j,5667)).then(Z=>Z.HasSpecialistModule)},{path:"class-details/:id/:type/:class/:spe",loadChildren:()=>Promise.all([j.e(955),j.e(592),j.e(485)]).then(j.bind(j,4485)).then(Z=>Z.ClassDetailsModule)},{path:"conditions",loadChildren:()=>j.e(36).then(j.bind(j,5036)).then(Z=>Z.ConditionsModule)},{path:"subject-videos/:id/:lessonid/:unitid",canActivate:[_t],loadChildren:()=>Promise.all([j.e(955),j.e(324)]).then(j.bind(j,2324)).then(Z=>Z.SubjectVideosModule)},{path:"cart",loadChildren:()=>Promise.all([j.e(592),j.e(764)]).then(j.bind(j,3764)).then(Z=>Z.CartModule)},{path:"checkout",loadChildren:()=>Promise.all([j.e(133),j.e(592),j.e(228)]).then(j.bind(j,3228)).then(Z=>Z.CheckoutModule)},{path:"my-courses",canActivate:[_t],loadChildren:()=>Promise.all([j.e(592),j.e(866)]).then(j.bind(j,9866)).then(Z=>Z.MyCoursesModule)},{path:"support",component:wn},{path:"**",component:oe}];let Nt=(()=>{class Z{}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=k.oAB({type:Z}),Z.\u0275inj=k.cJS({imports:[[he.Bz.forRoot(Dn,{initialNavigation:"enabled",scrollPositionRestoration:"enabled"})],he.Bz]}),Z})();var Jt=j(259),Un=j(6197),dn=j(8177);function xe(Z,C){1&Z&&(k.TgZ(0,"a",20),k._uU(1," \u0645\u0648\u0627\u062f\u064a "),k.qZA())}function Ge(Z,C){1&Z&&k._UZ(0,"span",16)}function wt(Z,C){1&Z&&(k.TgZ(0,"a",21),k._uU(1," \u0645\u0648\u0627\u062f\u064a "),k.qZA())}function on(Z,C){1&Z&&k._UZ(0,"span",16)}function Ht(Z,C){1&Z&&(k.ynx(0),k.TgZ(1,"a",22),k._uU(2,"\u0631\u0633\u0627\u0626\u0644\u064a"),k.qZA(),k._UZ(3,"span",16),k.BQk())}function Oe(Z,C){1&Z&&(k.TgZ(0,"a",23),k._uU(1," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 "),k.qZA())}function Bt(Z,C){if(1&Z){const T=k.EpF();k.TgZ(0,"button",24),k.NdJ("click",function(){return k.CHM(T),k.oxw().authService.logout()}),k._uU(1," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c "),k.qZA()}if(2&Z){const T=k.oxw();k.Q6J("disabled",T.authService.logoutloading)}}let Re=(()=>{class Z{constructor(T,F){this.cartService=T,this.authService=F,this.cartLength=0}ngOnInit(){localStorage.getItem("drastitoken")?this.cartService.getCart():this.cartService.cartItems.next([]),this.cartService.cartItems.subscribe(T=>{T&&(this.cartLength=null==T?void 0:T.length)})}islogin(){return!!localStorage.getItem("drastitoken")}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(dn.N),k.Y36(He.e))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-navbar"]],decls:28,vars:9,consts:[[1,"container","mt-2","d-md-none",2,"direction","ltr","text-align","left"],[2,"direction","ltr","text-align","left"],["aria-label","\u0645\u0648\u0627\u062f\u064a","class","text-primary","routerLink","/my-courses",4,"ngIf"],["class","mx-2",4,"ngIf"],["aria-label","\u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642","routerLink","/cart",1,""],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag-check","text-primary"],["fill-rule","evenodd","d","M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z"],["d","M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"],[1,"mx-1","cartCount"],[1,"container","flx"],[1,"logoParent"],["routerLink","/","aria-label","\u062f\u0631\u0627\u0633\u062a\u064a"],["src","assets/logo.png","alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"mainlogo"],[1,"loginParent"],["aria-label","\u0645\u0648\u0627\u062f\u064a","class","text-primary d-none d-md-inline-block","routerLink","/my-courses",4,"ngIf"],["aria-label","\u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642","routerLink","/cart",1,"d-none","d-md-inline-block"],[1,"mx-2"],[4,"ngIf"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644","routerLink","/auth/login","class","bluButton login",4,"ngIf"],["style","cursor: pointer","aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c","class","bluButton logout",3,"disabled","click",4,"ngIf"],["aria-label","\u0645\u0648\u0627\u062f\u064a","routerLink","/my-courses",1,"text-primary"],["aria-label","\u0645\u0648\u0627\u062f\u064a","routerLink","/my-courses",1,"text-primary","d-none","d-md-inline-block"],["routerLink","/all-msgs",1,"text-primary"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644","routerLink","/auth/login",1,"bluButton","login"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",1,"bluButton","logout",2,"cursor","pointer",3,"disabled","click"]],template:function(T,F){1&T&&(k.TgZ(0,"nav")(1,"div",0)(2,"div",1),k.YNc(3,xe,2,0,"a",2),k.YNc(4,Ge,1,0,"span",3),k.TgZ(5,"a",4),k.O4$(),k.TgZ(6,"svg",5),k._UZ(7,"path",6)(8,"path",7),k.qZA(),k.kcU(),k.TgZ(9,"small",8),k._uU(10),k.qZA()()()(),k.TgZ(11,"div",9)(12,"div",10)(13,"a",11),k._UZ(14,"img",12),k.qZA()(),k.TgZ(15,"div",13),k.YNc(16,wt,2,0,"a",14),k.YNc(17,on,1,0,"span",3),k.TgZ(18,"a",15),k.O4$(),k.TgZ(19,"svg",5),k._UZ(20,"path",6)(21,"path",7),k.qZA(),k.kcU(),k.TgZ(22,"small",8),k._uU(23),k.qZA()(),k._UZ(24,"span",16),k.YNc(25,Ht,4,0,"ng-container",17),k.YNc(26,Oe,2,0,"a",18),k.YNc(27,Bt,2,1,"button",19),k.qZA()()()),2&T&&(k.xp6(3),k.Q6J("ngIf",F.islogin()),k.xp6(1),k.Q6J("ngIf",F.islogin()),k.xp6(6),k.Oqu(F.cartLength),k.xp6(6),k.Q6J("ngIf",F.islogin()),k.xp6(1),k.Q6J("ngIf",F.islogin()),k.xp6(6),k.Oqu(F.cartLength),k.xp6(2),k.Q6J("ngIf",F.islogin()),k.xp6(1),k.Q6J("ngIf",!F.islogin()),k.xp6(1),k.Q6J("ngIf",F.islogin()))},directives:[at.O5,he.yS],styles:[""]}),Z})();var bt=j(452);function Je(Z,C){1&Z&&(k.TgZ(0,"tr",15)(1,"td"),k._uU(2,"94181196 965+"),k.qZA(),k.TgZ(3,"td"),k._UZ(4,"i",11),k.qZA()())}let Ft=(()=>{class Z{constructor(T,F){this.settingsService=T,this.cartService=F}ngOnInit(){this.settingsService.getSettings().subscribe(T=>{var F;this.settings=null==T?void 0:T.data,1==(null===(F=null==T?void 0:T.data)||void 0===F?void 0:F.show_coupon)&&(this.cartService.showCopon=!0)})}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(bt.g),k.Y36(dn.N))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-footer"]],decls:38,vars:3,consts:[[1,"py-4"],[1,"container"],[1,"row"],[1,"col-md-4","mb-3"],[1,"text-center"],["src","assets/footerlogo.png","alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"img-fluid"],[1,"icons","text-center"],["aria-label","\u0627\u0646\u0633\u062a\u062c\u0631\u0627\u0645","target","_blank",3,"href"],[1,"fa-brands","fa-instagram"],[1,"mx-3"],["aria-label","\u0648\u0627\u062a\u0633\u0627\u0628","target","_blank",3,"href"],[1,"fa-brands","fa-whatsapp"],[1,"pt-4"],[1,"mb-3"],["class","pb-5",4,"ngIf"],[1,"pb-5"],[1,"fa-solid","fa-location-dot"],["routerLink","/conditions",1,"text-white"],[1,"fa-solid","fa-file-lines"],[1,"h-100","d-flex","align-items-center"],["target","_blank","href","https://play.google.com/store/apps/details?id=com.codepirates.drasti&hl=en_GB&gl=KW",1,"d-inline-block","mb-3"],["src","assets/googleplay.png","alt","drasti-googleplay",2,"width","100px"],[1,"mx-2"],["target","_blank","href","https://apps.apple.com/eg/app/drasti/id1643300637",1,"d-inline-block","mb-3"],["src","assets/appstore.png","alt","drasti-appstore",2,"width","100px"]],template:function(T,F){1&T&&(k.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4),k._UZ(6,"img",5),k.qZA(),k.TgZ(7,"div",6)(8,"a",7),k._UZ(9,"i",8),k.qZA(),k._UZ(10,"span",9),k.TgZ(11,"a",10),k._UZ(12,"i",11),k.qZA()()()(),k.TgZ(13,"div",3)(14,"div",12)(15,"h2",13),k._uU(16,"\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627"),k.qZA(),k.TgZ(17,"table"),k.YNc(18,Je,5,0,"tr",14),k.TgZ(19,"tr",15)(20,"td"),k._uU(21,"\u0627\u0644\u0643\u0648\u064a\u062a"),k.qZA(),k.TgZ(22,"td"),k._UZ(23,"i",16),k.qZA()(),k.TgZ(24,"tr",15)(25,"td")(26,"a",17),k._uU(27," \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0627\u062d\u0643\u0627\u0645 "),k.qZA()(),k.TgZ(28,"td"),k._UZ(29,"i",18),k.qZA()()()()(),k.TgZ(30,"div",3)(31,"div",19)(32,"div")(33,"a",20),k._UZ(34,"img",21),k.qZA(),k._UZ(35,"span",22),k.TgZ(36,"a",23),k._UZ(37,"img",24),k.qZA()()()()()()()),2&T&&(k.xp6(8),k.Q6J("href",null==F.settings?null:F.settings.instagram,k.LSH),k.xp6(3),k.Q6J("href",null==F.settings?null:F.settings.whatsapp,k.LSH),k.xp6(7),k.Q6J("ngIf",null==F.settings?null:F.settings.whatsapp))},directives:[at.O5,he.yS],styles:[""]}),Z})(),Dt=(()=>{class Z{constructor(T,F){this.cartService=T,this.router=F,localStorage.getItem("drastitoken")}ngOnInit(){this.app=(0,Jt.ZF)({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),this.db=(0,Un.N8)(this.app),localStorage.getItem("drastitoken")&&(0,Un.t8)((0,Un.iH)(this.db,`Auth/${localStorage.getItem("userid")}`),{user_token:localStorage.getItem("drastitoken")});const T=(0,Un.iH)(this.db,"Auth");(0,Un.jM)(T,F=>{var le;if(localStorage.getItem("drastitoken")){const Ce=F.val();for(let Ze in Ce)Ze==localStorage.getItem("userid")&&(this.savedToken=Ce[Ze]);(null===(le=this.savedToken)||void 0===le?void 0:le.user_token)!=localStorage.getItem("drastitoken")&&(this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]))}})}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(dn.N),k.Y36(he.F0))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-root"]],decls:5,vars:0,consts:[[2,"display","flex","flex-direction","column","justify-content","space-between"],[2,"min-height","100vh"]],template:function(T,F){1&T&&(k.TgZ(0,"div",0),k._UZ(1,"app-navbar"),k.TgZ(2,"div",1),k._UZ(3,"router-outlet"),k.qZA(),k._UZ(4,"app-footer"),k.qZA())},directives:[Re,he.lC,Ft],styles:[""]}),Z})();var Lt=j(1777);const Yt=!1;function lr(Z){return new k.vHH(3e3,Yt)}function Hn(){return"undefined"!=typeof window&&void 0!==window.document}function wi(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Dr(Z){switch(Z.length){case 0:return new Lt.ZN;case 1:return Z[0];default:return new Lt.ZE(Z)}}function $i(Z,C,T,F,le={},Ce={}){const Ze=[],Ke=[];let Tt=-1,fn=null;if(F.forEach(Pt=>{const rr=Pt.offset,Cr=rr==Tt,mi=Cr&&fn||{};Object.keys(Pt).forEach(In=>{let Bn=In,cs=Pt[In];if("offset"!==In)switch(Bn=C.normalizePropertyName(Bn,Ze),cs){case Lt.k1:cs=le[In];break;case Lt.l3:cs=Ce[In];break;default:cs=C.normalizeStyleValue(In,Bn,cs,Ze)}mi[Bn]=cs}),Cr||Ke.push(mi),fn=mi,Tt=rr}),Ze.length)throw function nt(Z){return new k.vHH(3502,Yt)}();return Ke}function Fn(Z,C,T,F){switch(C){case"start":Z.onStart(()=>F(T&&zt(T,"start",Z)));break;case"done":Z.onDone(()=>F(T&&zt(T,"done",Z)));break;case"destroy":Z.onDestroy(()=>F(T&&zt(T,"destroy",Z)))}}function zt(Z,C,T){const F=T.totalTime,Ce=Qn(Z.element,Z.triggerName,Z.fromState,Z.toState,C||Z.phaseName,null==F?Z.totalTime:F,!!T.disabled),Ze=Z._data;return null!=Ze&&(Ce._data=Ze),Ce}function Qn(Z,C,T,F,le="",Ce=0,Ze){return{element:Z,triggerName:C,fromState:T,toState:F,phaseName:le,totalTime:Ce,disabled:!!Ze}}function yr(Z,C,T){let F;return Z instanceof Map?(F=Z.get(C),F||Z.set(C,F=T)):(F=Z[C],F||(F=Z[C]=T)),F}function Fr(Z){const C=Z.indexOf(":");return[Z.substring(1,C),Z.substr(C+1)]}let Lr=(Z,C)=>!1,Xe=(Z,C,T)=>[],Ue=null;function ft(Z){const C=Z.parentNode||Z.host;return C===Ue?null:C}(wi()||"undefined"!=typeof Element)&&(Hn()?(Ue=(()=>document.documentElement)(),Lr=(Z,C)=>{for(;C;){if(C===Z)return!0;C=ft(C)}return!1}):Lr=(Z,C)=>Z.contains(C),Xe=(Z,C,T)=>{if(T)return Array.from(Z.querySelectorAll(C));const F=Z.querySelector(C);return F?[F]:[]});let Be=null,Me=!1;function Ae(Z){Be||(Be=function pt(){return"undefined"!=typeof document?document.body:null}()||{},Me=!!Be.style&&"WebkitAppearance"in Be.style);let C=!0;return Be.style&&!function Ut(Z){return"ebkit"==Z.substring(1,6)}(Z)&&(C=Z in Be.style,!C&&Me&&(C="Webkit"+Z.charAt(0).toUpperCase()+Z.substr(1)in Be.style)),C}const sn=Lr,_r=Xe;let oi=(()=>{class Z{validateStyleProperty(T){return Ae(T)}matchesElement(T,F){return!1}containsElement(T,F){return sn(T,F)}getParentElement(T){return ft(T)}query(T,F,le){return _r(T,F,le)}computeStyle(T,F,le){return le||""}animate(T,F,le,Ce,Ze,Ke=[],Tt){return new Lt.ZN(le,Ce)}}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})(),Zi=(()=>{class Z{}return Z.NOOP=new oi,Z})();const li="ng-enter",as="ng-leave",Si="ng-trigger",_n=".ng-trigger",Tr="ng-animating",hi=".ng-animating";function Ci(Z){if("number"==typeof Z)return Z;const C=Z.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:gs(parseFloat(C[1]),C[2])}function gs(Z,C){return"s"===C?1e3*Z:Z}function zi(Z,C,T){return Z.hasOwnProperty("duration")?Z:function ds(Z,C,T){let le,Ce=0,Ze="";if("string"==typeof Z){const Ke=Z.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ke)return C.push(lr()),{duration:0,delay:0,easing:""};le=gs(parseFloat(Ke[1]),Ke[2]);const Tt=Ke[3];null!=Tt&&(Ce=gs(parseFloat(Tt),Ke[4]));const fn=Ke[5];fn&&(Ze=fn)}else le=Z;if(!T){let Ke=!1,Tt=C.length;le<0&&(C.push(function yn(){return new k.vHH(3100,Yt)}()),Ke=!0),Ce<0&&(C.push(function br(){return new k.vHH(3101,Yt)}()),Ke=!0),Ke&&C.splice(Tt,0,lr())}return{duration:le,delay:Ce,easing:Ze}}(Z,C,T)}function Ri(Z,C={}){return Object.keys(Z).forEach(T=>{C[T]=Z[T]}),C}function Ii(Z,C,T={}){if(C)for(let F in Z)T[F]=Z[F];else Ri(Z,T);return T}function zr(Z,C,T){return T?C+":"+T+";":""}function Cs(Z){let C="";for(let T=0;T<Z.style.length;T++){const F=Z.style.item(T);C+=zr(0,F,Z.style.getPropertyValue(F))}for(const T in Z.style)Z.style.hasOwnProperty(T)&&!T.startsWith("_")&&(C+=zr(0,fs(T),Z.style[T]));Z.setAttribute("style",C)}function es(Z,C,T){Z.style&&(Object.keys(C).forEach(F=>{const le=Fi(F);T&&!T.hasOwnProperty(F)&&(T[F]=Z.style[le]),Z.style[le]=C[F]}),wi()&&Cs(Z))}function hs(Z,C){Z.style&&(Object.keys(C).forEach(T=>{const F=Fi(T);Z.style[F]=""}),wi()&&Cs(Z))}function $r(Z){return Array.isArray(Z)?1==Z.length?Z[0]:(0,Lt.vP)(Z):Z}const Ir=new RegExp("{{\\s*(.+?)\\s*}}","g");function ts(Z){let C=[];if("string"==typeof Z){let T;for(;T=Ir.exec(Z);)C.push(T[1]);Ir.lastIndex=0}return C}function Vr(Z,C,T){const F=Z.toString(),le=F.replace(Ir,(Ce,Ze)=>{let Ke=C[Ze];return C.hasOwnProperty(Ze)||(T.push(function Vt(Z){return new k.vHH(3003,Yt)}()),Ke=""),Ke.toString()});return le==F?Z:le}function bi(Z){const C=[];let T=Z.next();for(;!T.done;)C.push(T.value),T=Z.next();return C}const Ws=/-+([a-z0-9])/g;function Fi(Z){return Z.replace(Ws,(...C)=>C[1].toUpperCase())}function fs(Z){return Z.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ji(Z,C,T){switch(C.type){case 7:return Z.visitTrigger(C,T);case 0:return Z.visitState(C,T);case 1:return Z.visitTransition(C,T);case 2:return Z.visitSequence(C,T);case 3:return Z.visitGroup(C,T);case 4:return Z.visitAnimate(C,T);case 5:return Z.visitKeyframes(C,T);case 6:return Z.visitStyle(C,T);case 8:return Z.visitReference(C,T);case 9:return Z.visitAnimateChild(C,T);case 10:return Z.visitAnimateRef(C,T);case 11:return Z.visitQuery(C,T);case 12:return Z.visitStagger(C,T);default:throw function Ot(Z){return new k.vHH(3004,Yt)}()}}function bs(Z,C){return window.getComputedStyle(Z)[C]}function At(Z,C){const T=[];return"string"==typeof Z?Z.split(/\s*,\s*/).forEach(F=>function vn(Z,C,T){if(":"==Z[0]){const Tt=function Kn(Z,C){switch(Z){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(T,F)=>parseFloat(F)>parseFloat(T);case":decrement":return(T,F)=>parseFloat(F)<parseFloat(T);default:return C.push(function Rr(Z){return new k.vHH(3016,Yt)}()),"* => *"}}(Z,T);if("function"==typeof Tt)return void C.push(Tt);Z=Tt}const F=Z.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==F||F.length<4)return T.push(function Mr(Z){return new k.vHH(3015,Yt)}()),C;const le=F[1],Ce=F[2],Ze=F[3];C.push(Wi(le,Ze));"<"==Ce[0]&&!("*"==le&&"*"==Ze)&&C.push(Wi(Ze,le))}(F,T,C)):T.push(Z),T}const Ar=new Set(["true","1"]),Qr=new Set(["false","0"]);function Wi(Z,C){const T=Ar.has(Z)||Qr.has(Z),F=Ar.has(C)||Qr.has(C);return(le,Ce)=>{let Ze="*"==Z||Z==le,Ke="*"==C||C==Ce;return!Ze&&T&&"boolean"==typeof le&&(Ze=le?Ar.has(Z):Qr.has(Z)),!Ke&&F&&"boolean"==typeof Ce&&(Ke=Ce?Ar.has(C):Qr.has(C)),Ze&&Ke}}const ws=new RegExp("s*:selfs*,?","g");function Jr(Z,C,T,F){return new Is(Z).build(C,T,F)}class Is{constructor(C){this._driver=C}build(C,T,F){const le=new ho(T);this._resetContextStyleTimingState(le);const Ce=ji(this,$r(C),le);return le.unsupportedCSSPropertiesFound.size&&le.unsupportedCSSPropertiesFound.keys(),Ce}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles={},C.collectedStyles[""]={},C.currentTime=0}visitTrigger(C,T){let F=T.queryCount=0,le=T.depCount=0;const Ce=[],Ze=[];return"@"==C.name.charAt(0)&&T.errors.push(function St(){return new k.vHH(3006,Yt)}()),C.definitions.forEach(Ke=>{if(this._resetContextStyleTimingState(T),0==Ke.type){const Tt=Ke,fn=Tt.name;fn.toString().split(/\s*,\s*/).forEach(Pt=>{Tt.name=Pt,Ce.push(this.visitState(Tt,T))}),Tt.name=fn}else if(1==Ke.type){const Tt=this.visitTransition(Ke,T);F+=Tt.queryCount,le+=Tt.depCount,Ze.push(Tt)}else T.errors.push(function ut(){return new k.vHH(3007,Yt)}())}),{type:7,name:C.name,states:Ce,transitions:Ze,queryCount:F,depCount:le,options:null}}visitState(C,T){const F=this.visitStyle(C.styles,T),le=C.options&&C.options.params||null;if(F.containsDynamicStyles){const Ce=new Set,Ze=le||{};F.styles.forEach(Ke=>{if(Eo(Ke)){const Tt=Ke;Object.keys(Tt).forEach(fn=>{ts(Tt[fn]).forEach(Pt=>{Ze.hasOwnProperty(Pt)||Ce.add(Pt)})})}}),Ce.size&&(bi(Ce.values()),T.errors.push(function Qt(Z,C){return new k.vHH(3008,Yt)}()))}return{type:0,name:C.name,style:F,options:le?{params:le}:null}}visitTransition(C,T){T.queryCount=0,T.depCount=0;const F=ji(this,$r(C.animation),T);return{type:1,matchers:At(C.expr,T.errors),animation:F,queryCount:T.queryCount,depCount:T.depCount,options:$s(C.options)}}visitSequence(C,T){return{type:2,steps:C.steps.map(F=>ji(this,F,T)),options:$s(C.options)}}visitGroup(C,T){const F=T.currentTime;let le=0;const Ce=C.steps.map(Ze=>{T.currentTime=F;const Ke=ji(this,Ze,T);return le=Math.max(le,T.currentTime),Ke});return T.currentTime=le,{type:3,steps:Ce,options:$s(C.options)}}visitAnimate(C,T){const F=function Li(Z,C){if(Z.hasOwnProperty("duration"))return Z;if("number"==typeof Z)return Os(zi(Z,C).duration,0,"");const T=Z;if(T.split(/\s+/).some(Ce=>"{"==Ce.charAt(0)&&"{"==Ce.charAt(1))){const Ce=Os(0,0,"");return Ce.dynamic=!0,Ce.strValue=T,Ce}const le=zi(T,C);return Os(le.duration,le.delay,le.easing)}(C.timings,T.errors);T.currentAnimateTimings=F;let le,Ce=C.styles?C.styles:(0,Lt.oB)({});if(5==Ce.type)le=this.visitKeyframes(Ce,T);else{let Ze=C.styles,Ke=!1;if(!Ze){Ke=!0;const fn={};F.easing&&(fn.easing=F.easing),Ze=(0,Lt.oB)(fn)}T.currentTime+=F.duration+F.delay;const Tt=this.visitStyle(Ze,T);Tt.isEmptyStep=Ke,le=Tt}return T.currentAnimateTimings=null,{type:4,timings:F,style:le,options:null}}visitStyle(C,T){const F=this._makeStyleAst(C,T);return this._validateStyleAst(F,T),F}_makeStyleAst(C,T){const F=[];Array.isArray(C.styles)?C.styles.forEach(Ze=>{"string"==typeof Ze?Ze==Lt.l3?F.push(Ze):T.errors.push(function xt(Z){return new k.vHH(3002,Yt)}()):F.push(Ze)}):F.push(C.styles);let le=!1,Ce=null;return F.forEach(Ze=>{if(Eo(Ze)){const Ke=Ze,Tt=Ke.easing;if(Tt&&(Ce=Tt,delete Ke.easing),!le)for(let fn in Ke)if(Ke[fn].toString().indexOf("{{")>=0){le=!0;break}}}),{type:6,styles:F,easing:Ce,offset:C.offset,containsDynamicStyles:le,options:null}}_validateStyleAst(C,T){const F=T.currentAnimateTimings;let le=T.currentTime,Ce=T.currentTime;F&&Ce>0&&(Ce-=F.duration+F.delay),C.styles.forEach(Ze=>{"string"!=typeof Ze&&Object.keys(Ze).forEach(Ke=>{if(!this._driver.validateStyleProperty(Ke))return delete Ze[Ke],void T.unsupportedCSSPropertiesFound.add(Ke);const Tt=T.collectedStyles[T.currentQuerySelector],fn=Tt[Ke];let Pt=!0;fn&&(Ce!=le&&Ce>=fn.startTime&&le<=fn.endTime&&(T.errors.push(function Wn(Z,C,T,F,le){return new k.vHH(3010,Yt)}()),Pt=!1),Ce=fn.startTime),Pt&&(Tt[Ke]={startTime:Ce,endTime:le}),T.options&&function wr(Z,C,T){const F=C.params||{},le=ts(Z);le.length&&le.forEach(Ce=>{F.hasOwnProperty(Ce)||T.push(function mr(Z){return new k.vHH(3001,Yt)}())})}(Ze[Ke],T.options,T.errors)})})}visitKeyframes(C,T){const F={type:5,styles:[],options:null};if(!T.currentAnimateTimings)return T.errors.push(function or(){return new k.vHH(3011,Yt)}()),F;let Ce=0;const Ze=[];let Ke=!1,Tt=!1,fn=0;const Pt=C.steps.map(Gn=>{const jt=this._makeStyleAst(Gn,T);let Cn=null!=jt.offset?jt.offset:function Ss(Z){if("string"==typeof Z)return null;let C=null;if(Array.isArray(Z))Z.forEach(T=>{if(Eo(T)&&T.hasOwnProperty("offset")){const F=T;C=parseFloat(F.offset),delete F.offset}});else if(Eo(Z)&&Z.hasOwnProperty("offset")){const T=Z;C=parseFloat(T.offset),delete T.offset}return C}(jt.styles),Qi=0;return null!=Cn&&(Ce++,Qi=jt.offset=Cn),Tt=Tt||Qi<0||Qi>1,Ke=Ke||Qi<fn,fn=Qi,Ze.push(Qi),jt});Tt&&T.errors.push(function dr(){return new k.vHH(3012,Yt)}()),Ke&&T.errors.push(function Yr(){return new k.vHH(3200,Yt)}());const rr=C.steps.length;let Cr=0;Ce>0&&Ce<rr?T.errors.push(function ii(){return new k.vHH(3202,Yt)}()):0==Ce&&(Cr=1/(rr-1));const mi=rr-1,In=T.currentTime,Bn=T.currentAnimateTimings,cs=Bn.duration;return Pt.forEach((Gn,jt)=>{const Cn=Cr>0?jt==mi?1:Cr*jt:Ze[jt],Qi=Cn*cs;T.currentTime=In+Bn.delay+Qi,Bn.duration=Qi,this._validateStyleAst(Gn,T),Gn.offset=Cn,F.styles.push(Gn)}),F}visitReference(C,T){return{type:8,animation:ji(this,$r(C.animation),T),options:$s(C.options)}}visitAnimateChild(C,T){return T.depCount++,{type:9,options:$s(C.options)}}visitAnimateRef(C,T){return{type:10,animation:this.visitReference(C.animation,T),options:$s(C.options)}}visitQuery(C,T){const F=T.currentQuerySelector,le=C.options||{};T.queryCount++,T.currentQuery=C;const[Ce,Ze]=function Xo(Z){const C=!!Z.split(/\s*,\s*/).find(T=>":self"==T);return C&&(Z=Z.replace(ws,"")),Z=Z.replace(/@\*/g,_n).replace(/@\w+/g,T=>_n+"-"+T.substr(1)).replace(/:animating/g,hi),[Z,C]}(C.selector);T.currentQuerySelector=F.length?F+" "+Ce:Ce,yr(T.collectedStyles,T.currentQuerySelector,{});const Ke=ji(this,$r(C.animation),T);return T.currentQuery=null,T.currentQuerySelector=F,{type:11,selector:Ce,limit:le.limit||0,optional:!!le.optional,includeSelf:Ze,animation:Ke,originalSelector:C.selector,options:$s(C.options)}}visitStagger(C,T){T.currentQuery||T.errors.push(function er(){return new k.vHH(3013,Yt)}());const F="full"===C.timings?{duration:0,delay:0,easing:"full"}:zi(C.timings,T.errors,!0);return{type:12,animation:ji(this,$r(C.animation),T),timings:F,options:null}}}class ho{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Eo(Z){return!Array.isArray(Z)&&"object"==typeof Z}function $s(Z){return Z?(Z=Ri(Z)).params&&(Z.params=function _s(Z){return Z?Ri(Z):null}(Z.params)):Z={},Z}function Os(Z,C,T){return{duration:Z,delay:C,easing:T}}function qs(Z,C,T,F,le,Ce,Ze=null,Ke=!1){return{type:1,element:Z,keyframes:C,preStyleProps:T,postStyleProps:F,duration:le,delay:Ce,totalTime:le+Ce,easing:Ze,subTimeline:Ke}}class Ds{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,T){let F=this._map.get(C);F||this._map.set(C,F=[]),F.push(...T)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const js=new RegExp(":enter","g"),Fs=new RegExp(":leave","g");function Vo(Z,C,T,F,le,Ce={},Ze={},Ke,Tt,fn=[]){return(new vs).buildKeyframes(Z,C,T,F,le,Ce,Ze,Ke,Tt,fn)}class vs{buildKeyframes(C,T,F,le,Ce,Ze,Ke,Tt,fn,Pt=[]){fn=fn||new Ds;const rr=new Ms(C,T,fn,le,Ce,Pt,[]);rr.options=Tt,rr.currentTimeline.setStyles([Ze],null,rr.errors,Tt),ji(this,F,rr);const Cr=rr.timelines.filter(mi=>mi.containsAnimation());if(Object.keys(Ke).length){let mi;for(let In=Cr.length-1;In>=0;In--){const Bn=Cr[In];if(Bn.element===T){mi=Bn;break}}mi&&!mi.allowOnlyTimelineStyles()&&mi.setStyles([Ke],null,rr.errors,Tt)}return Cr.length?Cr.map(mi=>mi.buildKeyframes()):[qs(T,[],[],[],0,0,"",!1)]}visitTrigger(C,T){}visitState(C,T){}visitTransition(C,T){}visitAnimateChild(C,T){const F=T.subInstructions.get(T.element);if(F){const le=T.createSubContext(C.options),Ce=T.currentTimeline.currentTime,Ze=this._visitSubInstructions(F,le,le.options);Ce!=Ze&&T.transformIntoNewTimeline(Ze)}T.previousNode=C}visitAnimateRef(C,T){const F=T.createSubContext(C.options);F.transformIntoNewTimeline(),this.visitReference(C.animation,F),T.transformIntoNewTimeline(F.currentTimeline.currentTime),T.previousNode=C}_visitSubInstructions(C,T,F){let Ce=T.currentTimeline.currentTime;const Ze=null!=F.duration?Ci(F.duration):null,Ke=null!=F.delay?Ci(F.delay):null;return 0!==Ze&&C.forEach(Tt=>{const fn=T.appendInstructionToTimeline(Tt,Ze,Ke);Ce=Math.max(Ce,fn.duration+fn.delay)}),Ce}visitReference(C,T){T.updateOptions(C.options,!0),ji(this,C.animation,T),T.previousNode=C}visitSequence(C,T){const F=T.subContextCount;let le=T;const Ce=C.options;if(Ce&&(Ce.params||Ce.delay)&&(le=T.createSubContext(Ce),le.transformIntoNewTimeline(),null!=Ce.delay)){6==le.previousNode.type&&(le.currentTimeline.snapshotCurrentStyles(),le.previousNode=Xs);const Ze=Ci(Ce.delay);le.delayNextStep(Ze)}C.steps.length&&(C.steps.forEach(Ze=>ji(this,Ze,le)),le.currentTimeline.applyStylesToKeyframe(),le.subContextCount>F&&le.transformIntoNewTimeline()),T.previousNode=C}visitGroup(C,T){const F=[];let le=T.currentTimeline.currentTime;const Ce=C.options&&C.options.delay?Ci(C.options.delay):0;C.steps.forEach(Ze=>{const Ke=T.createSubContext(C.options);Ce&&Ke.delayNextStep(Ce),ji(this,Ze,Ke),le=Math.max(le,Ke.currentTimeline.currentTime),F.push(Ke.currentTimeline)}),F.forEach(Ze=>T.currentTimeline.mergeTimelineCollectedStyles(Ze)),T.transformIntoNewTimeline(le),T.previousNode=C}_visitTiming(C,T){if(C.dynamic){const F=C.strValue;return zi(T.params?Vr(F,T.params,T.errors):F,T.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,T){const F=T.currentAnimateTimings=this._visitTiming(C.timings,T),le=T.currentTimeline;F.delay&&(T.incrementTime(F.delay),le.snapshotCurrentStyles());const Ce=C.style;5==Ce.type?this.visitKeyframes(Ce,T):(T.incrementTime(F.duration),this.visitStyle(Ce,T),le.applyStylesToKeyframe()),T.currentAnimateTimings=null,T.previousNode=C}visitStyle(C,T){const F=T.currentTimeline,le=T.currentAnimateTimings;!le&&F.getCurrentStyleProperties().length&&F.forwardFrame();const Ce=le&&le.easing||C.easing;C.isEmptyStep?F.applyEmptyStep(Ce):F.setStyles(C.styles,Ce,T.errors,T.options),T.previousNode=C}visitKeyframes(C,T){const F=T.currentAnimateTimings,le=T.currentTimeline.duration,Ce=F.duration,Ke=T.createSubContext().currentTimeline;Ke.easing=F.easing,C.styles.forEach(Tt=>{Ke.forwardTime((Tt.offset||0)*Ce),Ke.setStyles(Tt.styles,Tt.easing,T.errors,T.options),Ke.applyStylesToKeyframe()}),T.currentTimeline.mergeTimelineCollectedStyles(Ke),T.transformIntoNewTimeline(le+Ce),T.previousNode=C}visitQuery(C,T){const F=T.currentTimeline.currentTime,le=C.options||{},Ce=le.delay?Ci(le.delay):0;Ce&&(6===T.previousNode.type||0==F&&T.currentTimeline.getCurrentStyleProperties().length)&&(T.currentTimeline.snapshotCurrentStyles(),T.previousNode=Xs);let Ze=F;const Ke=T.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!le.optional,T.errors);T.currentQueryTotal=Ke.length;let Tt=null;Ke.forEach((fn,Pt)=>{T.currentQueryIndex=Pt;const rr=T.createSubContext(C.options,fn);Ce&&rr.delayNextStep(Ce),fn===T.element&&(Tt=rr.currentTimeline),ji(this,C.animation,rr),rr.currentTimeline.applyStylesToKeyframe(),Ze=Math.max(Ze,rr.currentTimeline.currentTime)}),T.currentQueryIndex=0,T.currentQueryTotal=0,T.transformIntoNewTimeline(Ze),Tt&&(T.currentTimeline.mergeTimelineCollectedStyles(Tt),T.currentTimeline.snapshotCurrentStyles()),T.previousNode=C}visitStagger(C,T){const F=T.parentContext,le=T.currentTimeline,Ce=C.timings,Ze=Math.abs(Ce.duration),Ke=Ze*(T.currentQueryTotal-1);let Tt=Ze*T.currentQueryIndex;switch(Ce.duration<0?"reverse":Ce.easing){case"reverse":Tt=Ke-Tt;break;case"full":Tt=F.currentStaggerTime}const Pt=T.currentTimeline;Tt&&Pt.delayNextStep(Tt);const rr=Pt.currentTime;ji(this,C.animation,T),T.previousNode=C,F.currentStaggerTime=le.currentTime-rr+(le.startTime-F.currentTimeline.startTime)}}const Xs={};class Ms{constructor(C,T,F,le,Ce,Ze,Ke,Tt){this._driver=C,this.element=T,this.subInstructions=F,this._enterClassName=le,this._leaveClassName=Ce,this.errors=Ze,this.timelines=Ke,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Xs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Tt||new Ai(this._driver,T,0),Ke.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,T){if(!C)return;const F=C;let le=this.options;null!=F.duration&&(le.duration=Ci(F.duration)),null!=F.delay&&(le.delay=Ci(F.delay));const Ce=F.params;if(Ce){let Ze=le.params;Ze||(Ze=this.options.params={}),Object.keys(Ce).forEach(Ke=>{(!T||!Ze.hasOwnProperty(Ke))&&(Ze[Ke]=Vr(Ce[Ke],Ze,this.errors))})}}_copyOptions(){const C={};if(this.options){const T=this.options.params;if(T){const F=C.params={};Object.keys(T).forEach(le=>{F[le]=T[le]})}}return C}createSubContext(C=null,T,F){const le=T||this.element,Ce=new Ms(this._driver,le,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(le,F||0));return Ce.previousNode=this.previousNode,Ce.currentAnimateTimings=this.currentAnimateTimings,Ce.options=this._copyOptions(),Ce.updateOptions(C),Ce.currentQueryIndex=this.currentQueryIndex,Ce.currentQueryTotal=this.currentQueryTotal,Ce.parentContext=this,this.subContextCount++,Ce}transformIntoNewTimeline(C){return this.previousNode=Xs,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,T,F){const le={duration:null!=T?T:C.duration,delay:this.currentTimeline.currentTime+(null!=F?F:0)+C.delay,easing:""},Ce=new io(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,le,C.stretchStartingKeyframe);return this.timelines.push(Ce),le}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,T,F,le,Ce,Ze){let Ke=[];if(le&&Ke.push(this.element),C.length>0){C=(C=C.replace(js,"."+this._enterClassName)).replace(Fs,"."+this._leaveClassName);let fn=this._driver.query(this.element,C,1!=F);0!==F&&(fn=F<0?fn.slice(fn.length+F,fn.length):fn.slice(0,F)),Ke.push(...fn)}return!Ce&&0==Ke.length&&Ze.push(function Gr(Z){return new k.vHH(3014,Yt)}()),Ke}}class Ai{constructor(C,T,F,le){this._driver=C,this.element=T,this.startTime=F,this._elementTimelineStylesLookup=le,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(T),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(T,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const T=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||T?(this.forwardTime(this.currentTime+C),T&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,T){return this.applyStylesToKeyframe(),new Ai(this._driver,C,T||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,T){this._localTimelineStyles[C]=T,this._globalTimelineStyles[C]=T,this._styleSummary[C]={time:this.currentTime,value:T}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&(this._previousKeyframe.easing=C),Object.keys(this._globalTimelineStyles).forEach(T=>{this._backFill[T]=this._globalTimelineStyles[T]||Lt.l3,this._currentKeyframe[T]=Lt.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,T,F,le){T&&(this._previousKeyframe.easing=T);const Ce=le&&le.params||{},Ze=function Hs(Z,C){const T={};let F;return Z.forEach(le=>{"*"===le?(F=F||Object.keys(C),F.forEach(Ce=>{T[Ce]=Lt.l3})):Ii(le,!1,T)}),T}(C,this._globalTimelineStyles);Object.keys(Ze).forEach(Ke=>{const Tt=Vr(Ze[Ke],Ce,F);this._pendingStyles[Ke]=Tt,this._localTimelineStyles.hasOwnProperty(Ke)||(this._backFill[Ke]=this._globalTimelineStyles.hasOwnProperty(Ke)?this._globalTimelineStyles[Ke]:Lt.l3),this._updateStyle(Ke,Tt)})}applyStylesToKeyframe(){const C=this._pendingStyles,T=Object.keys(C);0!=T.length&&(this._pendingStyles={},T.forEach(F=>{this._currentKeyframe[F]=C[F]}),Object.keys(this._localTimelineStyles).forEach(F=>{this._currentKeyframe.hasOwnProperty(F)||(this._currentKeyframe[F]=this._localTimelineStyles[F])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(C=>{const T=this._localTimelineStyles[C];this._pendingStyles[C]=T,this._updateStyle(C,T)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let T in this._currentKeyframe)C.push(T);return C}mergeTimelineCollectedStyles(C){Object.keys(C._styleSummary).forEach(T=>{const F=this._styleSummary[T],le=C._styleSummary[T];(!F||le.time>F.time)&&this._updateStyle(T,le.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,T=new Set,F=1===this._keyframes.size&&0===this.duration;let le=[];this._keyframes.forEach((Ke,Tt)=>{const fn=Ii(Ke,!0);Object.keys(fn).forEach(Pt=>{const rr=fn[Pt];rr==Lt.k1?C.add(Pt):rr==Lt.l3&&T.add(Pt)}),F||(fn.offset=Tt/this.duration),le.push(fn)});const Ce=C.size?bi(C.values()):[],Ze=T.size?bi(T.values()):[];if(F){const Ke=le[0],Tt=Ri(Ke);Ke.offset=0,Tt.offset=1,le=[Ke,Tt]}return qs(this.element,le,Ce,Ze,this.duration,this.startTime,this.easing,!1)}}class io extends Ai{constructor(C,T,F,le,Ce,Ze,Ke=!1){super(C,T,Ze.delay),this.keyframes=F,this.preStyleProps=le,this.postStyleProps=Ce,this._stretchStartingKeyframe=Ke,this.timings={duration:Ze.duration,delay:Ze.delay,easing:Ze.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:T,duration:F,easing:le}=this.timings;if(this._stretchStartingKeyframe&&T){const Ce=[],Ze=F+T,Ke=T/Ze,Tt=Ii(C[0],!1);Tt.offset=0,Ce.push(Tt);const fn=Ii(C[0],!1);fn.offset=so(Ke),Ce.push(fn);const Pt=C.length-1;for(let rr=1;rr<=Pt;rr++){let Cr=Ii(C[rr],!1);Cr.offset=so((T+Cr.offset*F)/Ze),Ce.push(Cr)}F=Ze,T=0,le="",C=Ce}return qs(this.element,C,this.preStyleProps,this.postStyleProps,F,T,le,!0)}}function so(Z,C=3){const T=Math.pow(10,C-1);return Math.round(Z*T)/T}class As{}class Ti extends As{normalizePropertyName(C,T){return Fi(C)}normalizeStyleValue(C,T,F,le){let Ce="";const Ze=F.toString().trim();if(B[T]&&0!==F&&"0"!==F)if("number"==typeof F)Ce="px";else{const Ke=F.match(/^[+-]?[\d\.]+([a-z]*)$/);Ke&&0==Ke[1].length&&le.push(function it(Z,C){return new k.vHH(3005,Yt)}())}return Ze+Ce}}const B=(()=>function pe(Z){const C={};return Z.forEach(T=>C[T]=!0),C}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function q(Z,C,T,F,le,Ce,Ze,Ke,Tt,fn,Pt,rr,Cr){return{type:0,element:Z,triggerName:C,isRemovalTransition:le,fromState:T,fromStyles:Ce,toState:F,toStyles:Ze,timelines:Ke,queriedElements:Tt,preStyleProps:fn,postStyleProps:Pt,totalTime:rr,errors:Cr}}const ve={};class qe{constructor(C,T,F){this._triggerName=C,this.ast=T,this._stateStyles=F}match(C,T,F,le){return function nn(Z,C,T,F,le){return Z.some(Ce=>Ce(C,T,F,le))}(this.ast.matchers,C,T,F,le)}buildStyles(C,T,F){const le=this._stateStyles["*"],Ce=this._stateStyles[C],Ze=le?le.buildStyles(T,F):{};return Ce?Ce.buildStyles(T,F):Ze}build(C,T,F,le,Ce,Ze,Ke,Tt,fn,Pt){const rr=[],Cr=this.ast.options&&this.ast.options.params||ve,In=this.buildStyles(F,Ke&&Ke.params||ve,rr),Bn=Tt&&Tt.params||ve,cs=this.buildStyles(le,Bn,rr),Gn=new Set,jt=new Map,Cn=new Map,Qi="void"===le,bo={params:Object.assign(Object.assign({},Cr),Bn)},Uo=Pt?[]:Vo(C,T,this.ast.animation,Ce,Ze,In,cs,bo,fn,rr);let O=0;if(Uo.forEach(S=>{O=Math.max(S.duration+S.delay,O)}),rr.length)return q(T,this._triggerName,F,le,Qi,In,cs,[],[],jt,Cn,O,rr);Uo.forEach(S=>{const W=S.element,ne=yr(jt,W,{});S.preStyleProps.forEach(Ve=>ne[Ve]=!0);const _e=yr(Cn,W,{});S.postStyleProps.forEach(Ve=>_e[Ve]=!0),W!==T&&Gn.add(W)});const M=bi(Gn.values());return q(T,this._triggerName,F,le,Qi,In,cs,Uo,M,jt,Cn,O)}}class Sn{constructor(C,T,F){this.styles=C,this.defaultParams=T,this.normalizer=F}buildStyles(C,T){const F={},le=Ri(this.defaultParams);return Object.keys(C).forEach(Ce=>{const Ze=C[Ce];null!=Ze&&(le[Ce]=Ze)}),this.styles.styles.forEach(Ce=>{if("string"!=typeof Ce){const Ze=Ce;Object.keys(Ze).forEach(Ke=>{let Tt=Ze[Ke];Tt.length>1&&(Tt=Vr(Tt,le,T));const fn=this.normalizer.normalizePropertyName(Ke,T);Tt=this.normalizer.normalizeStyleValue(Ke,fn,Tt,T),F[fn]=Tt})}}),F}}class jr{constructor(C,T,F){this.name=C,this.ast=T,this._normalizer=F,this.transitionFactories=[],this.states={},T.states.forEach(le=>{this.states[le.name]=new Sn(le.style,le.options&&le.options.params||{},F)}),ti(this.states,"true","1"),ti(this.states,"false","0"),T.transitions.forEach(le=>{this.transitionFactories.push(new qe(C,le,this.states))}),this.fallbackTransition=function ei(Z,C,T){return new qe(Z,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ze,Ke)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,T,F,le){return this.transitionFactories.find(Ze=>Ze.match(C,T,F,le))||null}matchStyles(C,T,F){return this.fallbackTransition.buildStyles(C,T,F)}}function ti(Z,C,T){Z.hasOwnProperty(C)?Z.hasOwnProperty(T)||(Z[T]=Z[C]):Z.hasOwnProperty(T)&&(Z[C]=Z[T])}const fi=new Ds;class Ji{constructor(C,T,F){this.bodyNode=C,this._driver=T,this._normalizer=F,this._animations={},this._playersById={},this.players=[]}register(C,T){const F=[],Ce=Jr(this._driver,T,F,[]);if(F.length)throw function dt(Z){return new k.vHH(3503,Yt)}();this._animations[C]=Ce}_buildPlayer(C,T,F){const le=C.element,Ce=$i(0,this._normalizer,0,C.keyframes,T,F);return this._driver.animate(le,Ce,C.duration,C.delay,C.easing,[],!0)}create(C,T,F={}){const le=[],Ce=this._animations[C];let Ze;const Ke=new Map;if(Ce?(Ze=Vo(this._driver,T,Ce,li,as,{},{},F,fi,le),Ze.forEach(Pt=>{const rr=yr(Ke,Pt.element,{});Pt.postStyleProps.forEach(Cr=>rr[Cr]=null)})):(le.push(function Gt(){return new k.vHH(3300,Yt)}()),Ze=[]),le.length)throw function tn(Z){return new k.vHH(3504,Yt)}();Ke.forEach((Pt,rr)=>{Object.keys(Pt).forEach(Cr=>{Pt[Cr]=this._driver.computeStyle(rr,Cr,Lt.l3)})});const fn=Dr(Ze.map(Pt=>{const rr=Ke.get(Pt.element);return this._buildPlayer(Pt,{},rr)}));return this._playersById[C]=fn,fn.onDestroy(()=>this.destroy(C)),this.players.push(fn),fn}destroy(C){const T=this._getPlayer(C);T.destroy(),delete this._playersById[C];const F=this.players.indexOf(T);F>=0&&this.players.splice(F,1)}_getPlayer(C){const T=this._playersById[C];if(!T)throw function bn(Z){return new k.vHH(3301,Yt)}();return T}listen(C,T,F,le){const Ce=Qn(T,"","","");return Fn(this._getPlayer(C),F,Ce,le),()=>{}}command(C,T,F,le){if("register"==F)return void this.register(C,le[0]);if("create"==F)return void this.create(C,T,le[0]||{});const Ce=this._getPlayer(C);switch(F){case"play":Ce.play();break;case"pause":Ce.pause();break;case"reset":Ce.reset();break;case"restart":Ce.restart();break;case"finish":Ce.finish();break;case"init":Ce.init();break;case"setPosition":Ce.setPosition(parseFloat(le[0]));break;case"destroy":this.destroy(C)}}}const Ni="ng-animate-queued",Ks="ng-animate-disabled",No=[],fo={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Co={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Y="__ng_removed";class G{constructor(C,T=""){this.namespaceId=T;const F=C&&C.hasOwnProperty("value");if(this.value=function be(Z){return null!=Z?Z:null}(F?C.value:C),F){const Ce=Ri(C);delete Ce.value,this.options=Ce}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(C){const T=C.params;if(T){const F=this.options.params;Object.keys(T).forEach(le=>{null==F[le]&&(F[le]=T[le])})}}}const L="void",ye=new G(L);class Qe{constructor(C,T,F){this.id=C,this.hostElement=T,this._engine=F,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,jn(T,this._hostClassName)}listen(C,T,F,le){if(!this._triggers.hasOwnProperty(T))throw function Yn(Z,C){return new k.vHH(3302,Yt)}();if(null==F||0==F.length)throw function Xr(Z){return new k.vHH(3303,Yt)}();if(!function rt(Z){return"start"==Z||"done"==Z}(F))throw function Br(Z,C){return new k.vHH(3400,Yt)}();const Ce=yr(this._elementListeners,C,[]),Ze={name:T,phase:F,callback:le};Ce.push(Ze);const Ke=yr(this._engine.statesByElement,C,{});return Ke.hasOwnProperty(T)||(jn(C,Si),jn(C,Si+"-"+T),Ke[T]=ye),()=>{this._engine.afterFlush(()=>{const Tt=Ce.indexOf(Ze);Tt>=0&&Ce.splice(Tt,1),this._triggers[T]||delete Ke[T]})}}register(C,T){return!this._triggers[C]&&(this._triggers[C]=T,!0)}_getTrigger(C){const T=this._triggers[C];if(!T)throw function kr(Z){return new k.vHH(3401,Yt)}();return T}trigger(C,T,F,le=!0){const Ce=this._getTrigger(T),Ze=new ee(this.id,T,C);let Ke=this._engine.statesByElement.get(C);Ke||(jn(C,Si),jn(C,Si+"-"+T),this._engine.statesByElement.set(C,Ke={}));let Tt=Ke[T];const fn=new G(F,this.id);if(!(F&&F.hasOwnProperty("value"))&&Tt&&fn.absorbOptions(Tt.options),Ke[T]=fn,Tt||(Tt=ye),fn.value!==L&&Tt.value===fn.value){if(!function ss(Z,C){const T=Object.keys(Z),F=Object.keys(C);if(T.length!=F.length)return!1;for(let le=0;le<T.length;le++){const Ce=T[le];if(!C.hasOwnProperty(Ce)||Z[Ce]!==C[Ce])return!1}return!0}(Tt.params,fn.params)){const Bn=[],cs=Ce.matchStyles(Tt.value,Tt.params,Bn),Gn=Ce.matchStyles(fn.value,fn.params,Bn);Bn.length?this._engine.reportError(Bn):this._engine.afterFlush(()=>{hs(C,cs),es(C,Gn)})}return}const Cr=yr(this._engine.playersByElement,C,[]);Cr.forEach(Bn=>{Bn.namespaceId==this.id&&Bn.triggerName==T&&Bn.queued&&Bn.destroy()});let mi=Ce.matchTransition(Tt.value,fn.value,C,fn.params),In=!1;if(!mi){if(!le)return;mi=Ce.fallbackTransition,In=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:T,transition:mi,fromState:Tt,toState:fn,player:Ze,isFallbackTransition:In}),In||(jn(C,Ni),Ze.onStart(()=>{qr(C,Ni)})),Ze.onDone(()=>{let Bn=this.players.indexOf(Ze);Bn>=0&&this.players.splice(Bn,1);const cs=this._engine.playersByElement.get(C);if(cs){let Gn=cs.indexOf(Ze);Gn>=0&&cs.splice(Gn,1)}}),this.players.push(Ze),Cr.push(Ze),Ze}deregister(C){delete this._triggers[C],this._engine.statesByElement.forEach((T,F)=>{delete T[C]}),this._elementListeners.forEach((T,F)=>{this._elementListeners.set(F,T.filter(le=>le.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const T=this._engine.playersByElement.get(C);T&&(T.forEach(F=>F.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,T){const F=this._engine.driver.query(C,_n,!0);F.forEach(le=>{if(le[Y])return;const Ce=this._engine.fetchNamespacesByElement(le);Ce.size?Ce.forEach(Ze=>Ze.triggerLeaveAnimation(le,T,!1,!0)):this.clearElementCache(le)}),this._engine.afterFlushAnimationsDone(()=>F.forEach(le=>this.clearElementCache(le)))}triggerLeaveAnimation(C,T,F,le){const Ce=this._engine.statesByElement.get(C),Ze=new Map;if(Ce){const Ke=[];if(Object.keys(Ce).forEach(Tt=>{if(Ze.set(Tt,Ce[Tt].value),this._triggers[Tt]){const fn=this.trigger(C,Tt,L,le);fn&&Ke.push(fn)}}),Ke.length)return this._engine.markElementAsRemoved(this.id,C,!0,T,Ze),F&&Dr(Ke).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const T=this._elementListeners.get(C),F=this._engine.statesByElement.get(C);if(T&&F){const le=new Set;T.forEach(Ce=>{const Ze=Ce.name;if(le.has(Ze))return;le.add(Ze);const Tt=this._triggers[Ze].fallbackTransition,fn=F[Ze]||ye,Pt=new G(L),rr=new ee(this.id,Ze,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:Ze,transition:Tt,fromState:fn,toState:Pt,player:rr,isFallbackTransition:!0})})}}removeNode(C,T){const F=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,T),this.triggerLeaveAnimation(C,T,!0))return;let le=!1;if(F.totalAnimations){const Ce=F.players.length?F.playersByQueriedElement.get(C):[];if(Ce&&Ce.length)le=!0;else{let Ze=C;for(;Ze=Ze.parentNode;)if(F.statesByElement.get(Ze)){le=!0;break}}}if(this.prepareLeaveAnimationListeners(C),le)F.markElementAsRemoved(this.id,C,!1,T);else{const Ce=C[Y];(!Ce||Ce===fo)&&(F.afterFlush(()=>this.clearElementCache(C)),F.destroyInnerAnimations(C),F._onRemovalComplete(C,T))}}insertNode(C,T){jn(C,this._hostClassName)}drainQueuedTransitions(C){const T=[];return this._queue.forEach(F=>{const le=F.player;if(le.destroyed)return;const Ce=F.element,Ze=this._elementListeners.get(Ce);Ze&&Ze.forEach(Ke=>{if(Ke.name==F.triggerName){const Tt=Qn(Ce,F.triggerName,F.fromState.value,F.toState.value);Tt._data=C,Fn(F.player,Ke.phase,Tt,Ke.callback)}}),le.markedForDestroy?this._engine.afterFlush(()=>{le.destroy()}):T.push(F)}),this._queue=[],T.sort((F,le)=>{const Ce=F.transition.ast.depCount,Ze=le.transition.ast.depCount;return 0==Ce||0==Ze?Ce-Ze:this._engine.driver.containsElement(F.element,le.element)?1:-1})}destroy(C){this.players.forEach(T=>T.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}elementContainsData(C){let T=!1;return this._elementListeners.has(C)&&(T=!0),T=!!this._queue.find(F=>F.element===C)||T,T}}class Nn{constructor(C,T,F){this.bodyNode=C,this.driver=T,this._normalizer=F,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(le,Ce)=>{}}_onRemovalComplete(C,T){this.onRemovalComplete(C,T)}get queuedPlayers(){const C=[];return this._namespaceList.forEach(T=>{T.players.forEach(F=>{F.queued&&C.push(F)})}),C}createNamespace(C,T){const F=new Qe(C,T,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,T)?this._balanceNamespaceList(F,T):(this.newHostElements.set(T,F),this.collectEnterElement(T)),this._namespaceLookup[C]=F}_balanceNamespaceList(C,T){const F=this._namespaceList,le=this.namespacesByHostElement,Ce=F.length-1;if(Ce>=0){let Ze=!1;if(void 0!==this.driver.getParentElement){let Ke=this.driver.getParentElement(T);for(;Ke;){const Tt=le.get(Ke);if(Tt){const fn=F.indexOf(Tt);F.splice(fn+1,0,C),Ze=!0;break}Ke=this.driver.getParentElement(Ke)}}else for(let Ke=Ce;Ke>=0;Ke--)if(this.driver.containsElement(F[Ke].hostElement,T)){F.splice(Ke+1,0,C),Ze=!0;break}Ze||F.unshift(C)}else F.push(C);return le.set(T,C),C}register(C,T){let F=this._namespaceLookup[C];return F||(F=this.createNamespace(C,T)),F}registerTrigger(C,T,F){let le=this._namespaceLookup[C];le&&le.register(T,F)&&this.totalAnimations++}destroy(C,T){if(!C)return;const F=this._fetchNamespace(C);this.afterFlush(()=>{this.namespacesByHostElement.delete(F.hostElement),delete this._namespaceLookup[C];const le=this._namespaceList.indexOf(F);le>=0&&this._namespaceList.splice(le,1)}),this.afterFlushAnimationsDone(()=>F.destroy(T))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const T=new Set,F=this.statesByElement.get(C);if(F){const le=Object.keys(F);for(let Ce=0;Ce<le.length;Ce++){const Ze=F[le[Ce]].namespaceId;if(Ze){const Ke=this._fetchNamespace(Ze);Ke&&T.add(Ke)}}}return T}trigger(C,T,F,le){if(ke(T)){const Ce=this._fetchNamespace(C);if(Ce)return Ce.trigger(T,F,le),!0}return!1}insertNode(C,T,F,le){if(!ke(T))return;const Ce=T[Y];if(Ce&&Ce.setForRemoval){Ce.setForRemoval=!1,Ce.setForMove=!0;const Ze=this.collectedLeaveElements.indexOf(T);Ze>=0&&this.collectedLeaveElements.splice(Ze,1)}if(C){const Ze=this._fetchNamespace(C);Ze&&Ze.insertNode(T,F)}le&&this.collectEnterElement(T)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,T){T?this.disabledNodes.has(C)||(this.disabledNodes.add(C),jn(C,Ks)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),qr(C,Ks))}removeNode(C,T,F,le){if(ke(T)){const Ce=C?this._fetchNamespace(C):null;if(Ce?Ce.removeNode(T,le):this.markElementAsRemoved(C,T,!1,le),F){const Ze=this.namespacesByHostElement.get(T);Ze&&Ze.id!==C&&Ze.removeNode(T,le)}}else this._onRemovalComplete(T,le)}markElementAsRemoved(C,T,F,le,Ce){this.collectedLeaveElements.push(T),T[Y]={namespaceId:C,setForRemoval:le,hasAnimation:F,removedBeforeQueried:!1,previousTriggersValues:Ce}}listen(C,T,F,le,Ce){return ke(T)?this._fetchNamespace(C).listen(T,F,le,Ce):()=>{}}_buildInstruction(C,T,F,le,Ce){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,F,le,C.fromState.options,C.toState.options,T,Ce)}destroyInnerAnimations(C){let T=this.driver.query(C,_n,!0);T.forEach(F=>this.destroyActiveAnimationsForElement(F)),0!=this.playersByQueriedElement.size&&(T=this.driver.query(C,hi,!0),T.forEach(F=>this.finishActiveQueriedAnimationOnElement(F)))}destroyActiveAnimationsForElement(C){const T=this.playersByElement.get(C);T&&T.forEach(F=>{F.queued?F.markedForDestroy=!0:F.destroy()})}finishActiveQueriedAnimationOnElement(C){const T=this.playersByQueriedElement.get(C);T&&T.forEach(F=>F.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return Dr(this.players).onDone(()=>C());C()})}processLeaveNode(C){var T;const F=C[Y];if(F&&F.setForRemoval){if(C[Y]=fo,F.namespaceId){this.destroyInnerAnimations(C);const le=this._fetchNamespace(F.namespaceId);le&&le.clearElementCache(C)}this._onRemovalComplete(C,F.setForRemoval)}(null===(T=C.classList)||void 0===T?void 0:T.contains(Ks))&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach(le=>{this.markElementAsDisabled(le,!1)})}flush(C=-1){let T=[];if(this.newHostElements.size&&(this.newHostElements.forEach((F,le)=>this._balanceNamespaceList(F,le)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let F=0;F<this.collectedEnterElements.length;F++)jn(this.collectedEnterElements[F],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const F=[];try{T=this._flushAnimations(F,C)}finally{for(let le=0;le<F.length;le++)F[le]()}}else for(let F=0;F<this.collectedLeaveElements.length;F++)this.processLeaveNode(this.collectedLeaveElements[F]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(F=>F()),this._flushFns=[],this._whenQuietFns.length){const F=this._whenQuietFns;this._whenQuietFns=[],T.length?Dr(T).onDone(()=>{F.forEach(le=>le())}):F.forEach(le=>le())}}reportError(C){throw function ls(Z){return new k.vHH(3402,Yt)}()}_flushAnimations(C,T){const F=new Ds,le=[],Ce=new Map,Ze=[],Ke=new Map,Tt=new Map,fn=new Map,Pt=new Set;this.disabledNodes.forEach(kt=>{Pt.add(kt);const qn=this.driver.query(kt,".ng-animate-queued",!0);for(let On=0;On<qn.length;On++)Pt.add(qn[On])});const rr=this.bodyNode,Cr=Array.from(this.statesByElement.keys()),mi=Sr(Cr,this.collectedEnterElements),In=new Map;let Bn=0;mi.forEach((kt,qn)=>{const On=li+Bn++;In.set(qn,On),kt.forEach(ar=>jn(ar,On))});const cs=[],Gn=new Set,jt=new Set;for(let kt=0;kt<this.collectedLeaveElements.length;kt++){const qn=this.collectedLeaveElements[kt],On=qn[Y];On&&On.setForRemoval&&(cs.push(qn),Gn.add(qn),On.hasAnimation?this.driver.query(qn,".ng-star-inserted",!0).forEach(ar=>Gn.add(ar)):jt.add(qn))}const Cn=new Map,Qi=Sr(Cr,Array.from(Gn));Qi.forEach((kt,qn)=>{const On=as+Bn++;Cn.set(qn,On),kt.forEach(ar=>jn(ar,On))}),C.push(()=>{mi.forEach((kt,qn)=>{const On=In.get(qn);kt.forEach(ar=>qr(ar,On))}),Qi.forEach((kt,qn)=>{const On=Cn.get(qn);kt.forEach(ar=>qr(ar,On))}),cs.forEach(kt=>{this.processLeaveNode(kt)})});const bo=[],Uo=[];for(let kt=this._namespaceList.length-1;kt>=0;kt--)this._namespaceList[kt].drainQueuedTransitions(T).forEach(On=>{const ar=On.player,Vn=On.element;if(bo.push(ar),this.collectedEnterElements.length){const Ys=Vn[Y];if(Ys&&Ys.setForMove){if(Ys.previousTriggersValues&&Ys.previousTriggersValues.has(On.triggerName)){const Vs=Ys.previousTriggersValues.get(On.triggerName),Ho=this.statesByElement.get(On.element);Ho&&Ho[On.triggerName]&&(Ho[On.triggerName].value=Vs)}return void ar.destroy()}}const Ls=!rr||!this.driver.containsElement(rr,Vn),Pr=Cn.get(Vn),Do=In.get(Vn),yi=this._buildInstruction(On,F,Do,Pr,Ls);if(yi.errors&&yi.errors.length)return void Uo.push(yi);if(Ls)return ar.onStart(()=>hs(Vn,yi.fromStyles)),ar.onDestroy(()=>es(Vn,yi.toStyles)),void le.push(ar);if(On.isFallbackTransition)return ar.onStart(()=>hs(Vn,yi.fromStyles)),ar.onDestroy(()=>es(Vn,yi.toStyles)),void le.push(ar);const ir=[];yi.timelines.forEach(Ys=>{Ys.stretchStartingKeyframe=!0,this.disabledNodes.has(Ys.element)||ir.push(Ys)}),yi.timelines=ir,F.append(Vn,yi.timelines),Ze.push({instruction:yi,player:ar,element:Vn}),yi.queriedElements.forEach(Ys=>yr(Ke,Ys,[]).push(ar)),yi.preStyleProps.forEach((Ys,Vs)=>{const Ho=Object.keys(Ys);if(Ho.length){let da=Tt.get(Vs);da||Tt.set(Vs,da=new Set),Ho.forEach(va=>da.add(va))}}),yi.postStyleProps.forEach((Ys,Vs)=>{const Ho=Object.keys(Ys);let da=fn.get(Vs);da||fn.set(Vs,da=new Set),Ho.forEach(va=>da.add(va))})});if(Uo.length){const kt=[];Uo.forEach(qn=>{kt.push(function di(Z,C){return new k.vHH(3505,Yt)}())}),bo.forEach(qn=>qn.destroy()),this.reportError(kt)}const O=new Map,M=new Map;Ze.forEach(kt=>{const qn=kt.element;F.has(qn)&&(M.set(qn,qn),this._beforeAnimationBuild(kt.player.namespaceId,kt.instruction,O))}),le.forEach(kt=>{const qn=kt.element;this._getPreviousPlayers(qn,!1,kt.namespaceId,kt.triggerName,null).forEach(ar=>{yr(O,qn,[]).push(ar),ar.destroy()})});const S=cs.filter(kt=>l(kt,Tt,fn)),W=new Map;xn(W,this.driver,jt,fn,Lt.l3).forEach(kt=>{l(kt,Tt,fn)&&S.push(kt)});const _e=new Map;mi.forEach((kt,qn)=>{xn(_e,this.driver,new Set(kt),Tt,Lt.k1)}),S.forEach(kt=>{const qn=W.get(kt),On=_e.get(kt);W.set(kt,Object.assign(Object.assign({},qn),On))});const Ve=[],ot=[],pn={};Ze.forEach(kt=>{const{element:qn,player:On,instruction:ar}=kt;if(F.has(qn)){if(Pt.has(qn))return On.onDestroy(()=>es(qn,ar.toStyles)),On.disabled=!0,On.overrideTotalTime(ar.totalTime),void le.push(On);let Vn=pn;if(M.size>1){let Pr=qn;const Do=[];for(;Pr=Pr.parentNode;){const yi=M.get(Pr);if(yi){Vn=yi;break}Do.push(Pr)}Do.forEach(yi=>M.set(yi,Vn))}const Ls=this._buildAnimation(On.namespaceId,ar,O,Ce,_e,W);if(On.setRealPlayer(Ls),Vn===pn)Ve.push(On);else{const Pr=this.playersByElement.get(Vn);Pr&&Pr.length&&(On.parentPlayer=Dr(Pr)),le.push(On)}}else hs(qn,ar.fromStyles),On.onDestroy(()=>es(qn,ar.toStyles)),ot.push(On),Pt.has(qn)&&le.push(On)}),ot.forEach(kt=>{const qn=Ce.get(kt.element);if(qn&&qn.length){const On=Dr(qn);kt.setRealPlayer(On)}}),le.forEach(kt=>{kt.parentPlayer?kt.syncPlayerEvents(kt.parentPlayer):kt.destroy()});for(let kt=0;kt<cs.length;kt++){const qn=cs[kt],On=qn[Y];if(qr(qn,as),On&&On.hasAnimation)continue;let ar=[];if(Ke.size){let Ls=Ke.get(qn);Ls&&Ls.length&&ar.push(...Ls);let Pr=this.driver.query(qn,hi,!0);for(let Do=0;Do<Pr.length;Do++){let yi=Ke.get(Pr[Do]);yi&&yi.length&&ar.push(...yi)}}const Vn=ar.filter(Ls=>!Ls.destroyed);Vn.length?_i(this,qn,Vn):this.processLeaveNode(qn)}return cs.length=0,Ve.forEach(kt=>{this.players.push(kt),kt.onDone(()=>{kt.destroy();const qn=this.players.indexOf(kt);this.players.splice(qn,1)}),kt.play()}),Ve}elementContainsData(C,T){let F=!1;const le=T[Y];return le&&le.setForRemoval&&(F=!0),this.playersByElement.has(T)&&(F=!0),this.playersByQueriedElement.has(T)&&(F=!0),this.statesByElement.has(T)&&(F=!0),this._fetchNamespace(C).elementContainsData(T)||F}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,T,F,le,Ce){let Ze=[];if(T){const Ke=this.playersByQueriedElement.get(C);Ke&&(Ze=Ke)}else{const Ke=this.playersByElement.get(C);if(Ke){const Tt=!Ce||Ce==L;Ke.forEach(fn=>{fn.queued||!Tt&&fn.triggerName!=le||Ze.push(fn)})}}return(F||le)&&(Ze=Ze.filter(Ke=>!(F&&F!=Ke.namespaceId||le&&le!=Ke.triggerName))),Ze}_beforeAnimationBuild(C,T,F){const Ce=T.element,Ze=T.isRemovalTransition?void 0:C,Ke=T.isRemovalTransition?void 0:T.triggerName;for(const Tt of T.timelines){const fn=Tt.element,Pt=fn!==Ce,rr=yr(F,fn,[]);this._getPreviousPlayers(fn,Pt,Ze,Ke,T.toState).forEach(mi=>{const In=mi.getRealPlayer();In.beforeDestroy&&In.beforeDestroy(),mi.destroy(),rr.push(mi)})}hs(Ce,T.fromStyles)}_buildAnimation(C,T,F,le,Ce,Ze){const Ke=T.triggerName,Tt=T.element,fn=[],Pt=new Set,rr=new Set,Cr=T.timelines.map(In=>{const Bn=In.element;Pt.add(Bn);const cs=Bn[Y];if(cs&&cs.removedBeforeQueried)return new Lt.ZN(In.duration,In.delay);const Gn=Bn!==Tt,jt=function pi(Z){const C=[];return Vi(Z,C),C}((F.get(Bn)||No).map(O=>O.getRealPlayer())).filter(O=>!!O.element&&O.element===Bn),Cn=Ce.get(Bn),Qi=Ze.get(Bn),bo=$i(0,this._normalizer,0,In.keyframes,Cn,Qi),Uo=this._buildPlayer(In,bo,jt);if(In.subTimeline&&le&&rr.add(Bn),Gn){const O=new ee(C,Ke,Bn);O.setRealPlayer(Uo),fn.push(O)}return Uo});fn.forEach(In=>{yr(this.playersByQueriedElement,In.element,[]).push(In),In.onDone(()=>function K(Z,C,T){let F;if(Z instanceof Map){if(F=Z.get(C),F){if(F.length){const le=F.indexOf(T);F.splice(le,1)}0==F.length&&Z.delete(C)}}else if(F=Z[C],F){if(F.length){const le=F.indexOf(T);F.splice(le,1)}0==F.length&&delete Z[C]}return F}(this.playersByQueriedElement,In.element,In))}),Pt.forEach(In=>jn(In,Tr));const mi=Dr(Cr);return mi.onDestroy(()=>{Pt.forEach(In=>qr(In,Tr)),es(Tt,T.toStyles)}),rr.forEach(In=>{yr(le,In,[]).push(mi)}),mi}_buildPlayer(C,T,F){return T.length>0?this.driver.animate(C.element,T,C.duration,C.delay,C.easing,F):new Lt.ZN(C.duration,C.delay)}}class ee{constructor(C,T,F){this.namespaceId=C,this.triggerName=T,this.element=F,this._player=new Lt.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,Object.keys(this._queuedCallbacks).forEach(T=>{this._queuedCallbacks[T].forEach(F=>Fn(C,T,void 0,F))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const T=this._player;T.triggerCallback&&C.onStart(()=>T.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,T){yr(this._queuedCallbacks,C,[]).push(T)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const T=this._player;T.triggerCallback&&T.triggerCallback(C)}}function ke(Z){return Z&&1===Z.nodeType}function Kt(Z,C){const T=Z.style.display;return Z.style.display=null!=C?C:"none",T}function xn(Z,C,T,F,le){const Ce=[];T.forEach(Tt=>Ce.push(Kt(Tt)));const Ze=[];F.forEach((Tt,fn)=>{const Pt={};Tt.forEach(rr=>{const Cr=Pt[rr]=C.computeStyle(fn,rr,le);(!Cr||0==Cr.length)&&(fn[Y]=Co,Ze.push(fn))}),Z.set(fn,Pt)});let Ke=0;return T.forEach(Tt=>Kt(Tt,Ce[Ke++])),Ze}function Sr(Z,C){const T=new Map;if(Z.forEach(Ke=>T.set(Ke,[])),0==C.length)return T;const le=new Set(C),Ce=new Map;function Ze(Ke){if(!Ke)return 1;let Tt=Ce.get(Ke);if(Tt)return Tt;const fn=Ke.parentNode;return Tt=T.has(fn)?fn:le.has(fn)?1:Ze(fn),Ce.set(Ke,Tt),Tt}return C.forEach(Ke=>{const Tt=Ze(Ke);1!==Tt&&T.get(Tt).push(Ke)}),T}function jn(Z,C){var T;null===(T=Z.classList)||void 0===T||T.add(C)}function qr(Z,C){var T;null===(T=Z.classList)||void 0===T||T.remove(C)}function _i(Z,C,T){Dr(T).onDone(()=>Z.processLeaveNode(C))}function Vi(Z,C){for(let T=0;T<Z.length;T++){const F=Z[T];F instanceof Lt.ZE?Vi(F.players,C):C.push(F)}}function l(Z,C,T){const F=T.get(Z);if(!F)return!1;let le=C.get(Z);return le?F.forEach(Ce=>le.add(Ce)):C.set(Z,F),T.delete(Z),!0}class A{constructor(C,T,F){this.bodyNode=C,this._driver=T,this._normalizer=F,this._triggerCache={},this.onRemovalComplete=(le,Ce)=>{},this._transitionEngine=new Nn(C,T,F),this._timelineEngine=new Ji(C,T,F),this._transitionEngine.onRemovalComplete=(le,Ce)=>this.onRemovalComplete(le,Ce)}registerTrigger(C,T,F,le,Ce){const Ze=C+"-"+le;let Ke=this._triggerCache[Ze];if(!Ke){const Tt=[],Pt=Jr(this._driver,Ce,Tt,[]);if(Tt.length)throw function cn(Z,C){return new k.vHH(3404,Yt)}();Ke=function pr(Z,C,T){return new jr(Z,C,T)}(le,Pt,this._normalizer),this._triggerCache[Ze]=Ke}this._transitionEngine.registerTrigger(T,le,Ke)}register(C,T){this._transitionEngine.register(C,T)}destroy(C,T){this._transitionEngine.destroy(C,T)}onInsert(C,T,F,le){this._transitionEngine.insertNode(C,T,F,le)}onRemove(C,T,F,le){this._transitionEngine.removeNode(C,T,le||!1,F)}disableAnimations(C,T){this._transitionEngine.markElementAsDisabled(C,T)}process(C,T,F,le){if("@"==F.charAt(0)){const[Ce,Ze]=Fr(F);this._timelineEngine.command(Ce,T,Ze,le)}else this._transitionEngine.trigger(C,T,F,le)}listen(C,T,F,le,Ce){if("@"==F.charAt(0)){const[Ze,Ke]=Fr(F);return this._timelineEngine.listen(Ze,T,Ke,Ce)}return this._transitionEngine.listen(C,T,F,le,Ce)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let P=(()=>{class Z{constructor(T,F,le){this._element=T,this._startStyles=F,this._endStyles=le,this._state=0;let Ce=Z.initialStylesByElement.get(T);Ce||Z.initialStylesByElement.set(T,Ce={}),this._initialStyles=Ce}start(){this._state<1&&(this._startStyles&&es(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(es(this._element,this._initialStyles),this._endStyles&&(es(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Z.initialStylesByElement.delete(this._element),this._startStyles&&(hs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hs(this._element,this._endStyles),this._endStyles=null),es(this._element,this._initialStyles),this._state=3)}}return Z.initialStylesByElement=new WeakMap,Z})();function z(Z){let C=null;const T=Object.keys(Z);for(let F=0;F<T.length;F++){const le=T[F];J(le)&&(C=C||{},C[le]=Z[le])}return C}function J(Z){return"display"===Z||"position"===Z}class ge{constructor(C,T,F,le){this.element=C,this.keyframes=T,this.options=F,this._specialStyles=le,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=F.duration,this._delay=F.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(C,T,F){return C.animate(T,F)}onStart(C){this._onStartFns.push(C)}onDone(C){this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C={};if(this.hasStarted()){const T=this._finalKeyframe;Object.keys(T).forEach(F=>{"offset"!=F&&(C[F]=this._finished?T[F]:bs(this.element,F))})}this.currentSnapshot=C}triggerCallback(C){const T="start"==C?this._onStartFns:this._onDoneFns;T.forEach(F=>F()),T.length=0}}class we{validateStyleProperty(C){return Ae(C)}matchesElement(C,T){return!1}containsElement(C,T){return sn(C,T)}getParentElement(C){return ft(C)}query(C,T,F){return _r(C,T,F)}computeStyle(C,T,F){return window.getComputedStyle(C)[T]}animate(C,T,F,le,Ce,Ze=[]){const Tt={duration:F,delay:le,fill:0==le?"both":"forwards"};Ce&&(Tt.easing=Ce);const fn={},Pt=Ze.filter(Cr=>Cr instanceof ge);(function si(Z,C){return 0===Z||0===C})(F,le)&&Pt.forEach(Cr=>{let mi=Cr.currentSnapshot;Object.keys(mi).forEach(In=>fn[In]=mi[In])}),T=function Zr(Z,C,T){const F=Object.keys(T);if(F.length&&C.length){let Ce=C[0],Ze=[];if(F.forEach(Ke=>{Ce.hasOwnProperty(Ke)||Ze.push(Ke),Ce[Ke]=T[Ke]}),Ze.length)for(var le=1;le<C.length;le++){let Ke=C[le];Ze.forEach(function(Tt){Ke[Tt]=bs(Z,Tt)})}}return C}(C,T=T.map(Cr=>Ii(Cr,!1)),fn);const rr=function I(Z,C){let T=null,F=null;return Array.isArray(C)&&C.length?(T=z(C[0]),C.length>1&&(F=z(C[C.length-1]))):C&&(T=z(C)),T||F?new P(Z,T,F):null}(C,T);return new ge(C,T,Tt,rr)}}let ae=(()=>{class Z extends Lt._j{constructor(T,F){super(),this._nextAnimationId=0,this._renderer=T.createRenderer(F.body,{id:"0",encapsulation:k.ifc.None,styles:[],data:{animation:[]}})}build(T){const F=this._nextAnimationId.toString();this._nextAnimationId++;const le=Array.isArray(T)?(0,Lt.vP)(T):T;return ue(this._renderer,null,F,"register",[le]),new me(F,this._renderer)}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(k.FYo),k.LFG(at.K0))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();class me extends Lt.LC{constructor(C,T){super(),this._id=C,this._renderer=T}create(C,T){return new ce(this._id,C,T||{},this._renderer)}}class ce{constructor(C,T,F,le){this.id=C,this.element=T,this._renderer=le,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",F)}_listen(C,T){return this._renderer.listen(this.element,`@@${this.id}:${C}`,T)}_command(C,...T){return ue(this._renderer,this.element,this.id,C,T)}onDone(C){this._listen("done",C)}onStart(C){this._listen("start",C)}onDestroy(C){this._listen("destroy",C)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(C){this._command("setPosition",C)}getPosition(){var C,T;return null!==(T=null===(C=this._renderer.engine.players[+this.id])||void 0===C?void 0:C.getPosition())&&void 0!==T?T:0}}function ue(Z,C,T,F,le){return Z.setProperty(C,`@@${T}:${F}`,le)}const ze="@.disabled";let tt=(()=>{class Z{constructor(T,F,le){this.delegate=T,this.engine=F,this._zone=le,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),F.onRemovalComplete=(Ce,Ze)=>{const Ke=null==Ze?void 0:Ze.parentNode(Ce);Ke&&Ze.removeChild(Ke,Ce)}}createRenderer(T,F){const Ce=this.delegate.createRenderer(T,F);if(!(T&&F&&F.data&&F.data.animation)){let Pt=this._rendererCache.get(Ce);return Pt||(Pt=new De("",Ce,this.engine),this._rendererCache.set(Ce,Pt)),Pt}const Ze=F.id,Ke=F.id+"-"+this._currentId;this._currentId++,this.engine.register(Ke,T);const Tt=Pt=>{Array.isArray(Pt)?Pt.forEach(Tt):this.engine.registerTrigger(Ze,Ke,T,Pt.name,Pt)};return F.data.animation.forEach(Tt),new Fe(this,Ke,Ce,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(T,F,le){T>=0&&T<this._microtaskId?this._zone.run(()=>F(le)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Ce=>{const[Ze,Ke]=Ce;Ze(Ke)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([F,le]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(k.FYo),k.LFG(A),k.LFG(k.R0b))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();class De{constructor(C,T,F){this.namespaceId=C,this.delegate=T,this.engine=F,this.destroyNode=this.delegate.destroyNode?le=>T.destroyNode(le):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(C,T){return this.delegate.createElement(C,T)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,T){this.delegate.appendChild(C,T),this.engine.onInsert(this.namespaceId,T,C,!1)}insertBefore(C,T,F,le=!0){this.delegate.insertBefore(C,T,F),this.engine.onInsert(this.namespaceId,T,C,le)}removeChild(C,T,F){this.engine.onRemove(this.namespaceId,T,this.delegate,F)}selectRootElement(C,T){return this.delegate.selectRootElement(C,T)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,T,F,le){this.delegate.setAttribute(C,T,F,le)}removeAttribute(C,T,F){this.delegate.removeAttribute(C,T,F)}addClass(C,T){this.delegate.addClass(C,T)}removeClass(C,T){this.delegate.removeClass(C,T)}setStyle(C,T,F,le){this.delegate.setStyle(C,T,F,le)}removeStyle(C,T,F){this.delegate.removeStyle(C,T,F)}setProperty(C,T,F){"@"==T.charAt(0)&&T==ze?this.disableAnimations(C,!!F):this.delegate.setProperty(C,T,F)}setValue(C,T){this.delegate.setValue(C,T)}listen(C,T,F){return this.delegate.listen(C,T,F)}disableAnimations(C,T){this.engine.disableAnimations(C,T)}}class Fe extends De{constructor(C,T,F,le){super(T,F,le),this.factory=C,this.namespaceId=T}setProperty(C,T,F){"@"==T.charAt(0)?"."==T.charAt(1)&&T==ze?this.disableAnimations(C,F=void 0===F||!!F):this.engine.process(this.namespaceId,C,T.substr(1),F):this.delegate.setProperty(C,T,F)}listen(C,T,F){if("@"==T.charAt(0)){const le=function yt(Z){switch(Z){case"body":return document.body;case"document":return document;case"window":return window;default:return Z}}(C);let Ce=T.substr(1),Ze="";return"@"!=Ce.charAt(0)&&([Ce,Ze]=function et(Z){const C=Z.indexOf(".");return[Z.substring(0,C),Z.substr(C+1)]}(Ce)),this.engine.listen(this.namespaceId,le,Ce,Ze,Ke=>{this.factory.scheduleListenerCallback(Ke._data||-1,F,Ke)})}return this.delegate.listen(C,T,F)}}let mt=(()=>{class Z extends A{constructor(T,F,le){super(T.body,F,le)}ngOnDestroy(){this.flush()}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(at.K0),k.LFG(Zi),k.LFG(As))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();const mn=new k.OlP("AnimationModuleType"),Mn=[{provide:Lt._j,useClass:ae},{provide:As,useFactory:function En(){return new Ti}},{provide:A,useClass:mt},{provide:k.FYo,useFactory:function An(Z,C,T){return new tt(Z,C,T)},deps:[g.se,A,k.R0b]}],nr=[{provide:Zi,useFactory:()=>new we},{provide:mn,useValue:"BrowserAnimations"},...Mn],vr=[{provide:Zi,useClass:oi},{provide:mn,useValue:"NoopAnimations"},...Mn];let Ln=(()=>{class Z{static withConfig(T){return{ngModule:Z,providers:T.disableAnimations?vr:nr}}}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=k.oAB({type:Z}),Z.\u0275inj=k.cJS({providers:nr,imports:[g.b2]}),Z})();var Rt=j(4466),hn=j(520);let cr=(()=>{class Z{constructor(){}intercept(T,F){let le=T.clone({setHeaders:{Authorization:`Bearer ${localStorage.getItem("drastitoken")}`}});return F.handle(le)}}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();var ur=j(262),Wt=j(2843);let hr=(()=>{class Z{constructor(T,F,le){this.router=T,this.cartService=F,this.toastr=le}intercept(T,F){return F.handle(T).pipe((0,ur.K)(le=>{var Ce,Ze,Ke;let Tt=null===(Ce=null==le?void 0:le.error)||void 0===Ce?void 0:Ce.errors;if(Array.isArray(Tt)&&(null==Tt?void 0:Tt.length))for(let fn=0;fn<(null==Tt?void 0:Tt.length);fn++)(null===(Ze=Tt[fn])||void 0===Ze?void 0:Ze.message)&&this.toastr.error(null===(Ke=Tt[fn])||void 0===Ke?void 0:Ke.message);else(null==Tt?void 0:Tt.message)&&this.toastr.error(null==Tt?void 0:Tt.message);return-1!==[401,403].indexOf(le.status)&&(this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username")),(0,Wt._)(le)}))}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(he.F0),k.LFG(dn.N),k.LFG(ht._W))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();var tr=j(2011),gi=j(1205),xi=j(2095);let Zs=(()=>{class Z{}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=k.oAB({type:Z,bootstrap:[Dt]}),Z.\u0275inj=k.cJS({providers:[{provide:hn.TP,useClass:cr,multi:!0},{provide:hn.TP,useClass:hr,multi:!0}],imports:[[g.b2.withServerTransition({appId:"serverApp"}),Nt,Ln,Rt.m,xi.yb,gi.ww,tr.hO.initializeApp({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"})]]}),Z})();function po(){g.q6().bootstrapModule(Zs).catch(Z=>console.error(Z))}j(2340).N.production&&(0,k.G48)(),"complete"===document.readyState?po():document.addEventListener("DOMContentLoaded",po)},1135:(Zn,It,j)=>{j.d(It,{X:()=>k});var g=j(7579);class k extends g.x{constructor(oe){super(),this._value=oe}get value(){return this.getValue()}_subscribe(oe){const je=super._subscribe(oe);return!je.closed&&oe.next(this._value),je}getValue(){const{hasError:oe,thrownError:je,_value:He}=this;if(oe)throw je;return this._throwIfClosed(),He}next(oe){super.next(this._value=oe)}}},8306:(Zn,It,j)=>{j.d(It,{y:()=>Ne});var g=j(2961),k=j(727),he=j(8822),oe=j(4671);var ht=j(2416),We=j(576),at=j(2806);let Ne=(()=>{class _t{constructor(Dn){Dn&&(this._subscribe=Dn)}lift(Dn){const Nt=new _t;return Nt.source=this,Nt.operator=Dn,Nt}subscribe(Dn,Nt,Jt){const Un=function wn(_t){return _t&&_t instanceof g.Lv||function vt(_t){return _t&&(0,We.m)(_t.next)&&(0,We.m)(_t.error)&&(0,We.m)(_t.complete)}(_t)&&(0,k.Nn)(_t)}(Dn)?Dn:new g.Hp(Dn,Nt,Jt);return(0,at.x)(()=>{const{operator:dn,source:xe}=this;Un.add(dn?dn.call(Un,xe):xe?this._subscribe(Un):this._trySubscribe(Un))}),Un}_trySubscribe(Dn){try{return this._subscribe(Dn)}catch(Nt){Dn.error(Nt)}}forEach(Dn,Nt){return new(Nt=Pe(Nt))((Jt,Un)=>{const dn=new g.Hp({next:xe=>{try{Dn(xe)}catch(Ge){Un(Ge),dn.unsubscribe()}},error:Un,complete:Jt});this.subscribe(dn)})}_subscribe(Dn){var Nt;return null===(Nt=this.source)||void 0===Nt?void 0:Nt.subscribe(Dn)}[he.L](){return this}pipe(...Dn){return function He(_t){return 0===_t.length?oe.y:1===_t.length?_t[0]:function(Dn){return _t.reduce((Nt,Jt)=>Jt(Nt),Dn)}}(Dn)(this)}toPromise(Dn){return new(Dn=Pe(Dn))((Nt,Jt)=>{let Un;this.subscribe(dn=>Un=dn,dn=>Jt(dn),()=>Nt(Un))})}}return _t.create=ln=>new _t(ln),_t})();function Pe(_t){var ln;return null!==(ln=null!=_t?_t:ht.v.Promise)&&void 0!==ln?ln:Promise}},7579:(Zn,It,j)=>{j.d(It,{x:()=>ht});var g=j(8306),k=j(727);const oe=(0,j(3888).d)(at=>function(){at(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=j(8737),He=j(2806);let ht=(()=>{class at extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Pe){const vt=new We(this,this);return vt.operator=Pe,vt}_throwIfClosed(){if(this.closed)throw new oe}next(Pe){(0,He.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const vt of this.currentObservers)vt.next(Pe)}})}error(Pe){(0,He.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Pe;const{observers:vt}=this;for(;vt.length;)vt.shift().error(Pe)}})}complete(){(0,He.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Pe;return(null===(Pe=this.observers)||void 0===Pe?void 0:Pe.length)>0}_trySubscribe(Pe){return this._throwIfClosed(),super._trySubscribe(Pe)}_subscribe(Pe){return this._throwIfClosed(),this._checkFinalizedStatuses(Pe),this._innerSubscribe(Pe)}_innerSubscribe(Pe){const{hasError:vt,isStopped:wn,observers:_t}=this;return vt||wn?k.Lc:(this.currentObservers=null,_t.push(Pe),new k.w0(()=>{this.currentObservers=null,(0,je.P)(_t,Pe)}))}_checkFinalizedStatuses(Pe){const{hasError:vt,thrownError:wn,isStopped:_t}=this;vt?Pe.error(wn):_t&&Pe.complete()}asObservable(){const Pe=new g.y;return Pe.source=this,Pe}}return at.create=(Ne,Pe)=>new We(Ne,Pe),at})();class We extends ht{constructor(Ne,Pe){super(),this.destination=Ne,this.source=Pe}next(Ne){var Pe,vt;null===(vt=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.next)||void 0===vt||vt.call(Pe,Ne)}error(Ne){var Pe,vt;null===(vt=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.error)||void 0===vt||vt.call(Pe,Ne)}complete(){var Ne,Pe;null===(Pe=null===(Ne=this.destination)||void 0===Ne?void 0:Ne.complete)||void 0===Pe||Pe.call(Ne)}_subscribe(Ne){var Pe,vt;return null!==(vt=null===(Pe=this.source)||void 0===Pe?void 0:Pe.subscribe(Ne))&&void 0!==vt?vt:k.Lc}}},2961:(Zn,It,j)=>{j.d(It,{Hp:()=>Dn,Lv:()=>vt});var g=j(576),k=j(727),he=j(2416),oe=j(7849);function je(){}const He=at("C",void 0,void 0);function at(xe,Ge,wt){return{kind:xe,value:Ge,error:wt}}var Ne=j(3410),Pe=j(2806);class vt extends k.w0{constructor(Ge){super(),this.isStopped=!1,Ge?(this.destination=Ge,(0,k.Nn)(Ge)&&Ge.add(this)):this.destination=dn}static create(Ge,wt,on){return new Dn(Ge,wt,on)}next(Ge){this.isStopped?Un(function We(xe){return at("N",xe,void 0)}(Ge),this):this._next(Ge)}error(Ge){this.isStopped?Un(function ht(xe){return at("E",void 0,xe)}(Ge),this):(this.isStopped=!0,this._error(Ge))}complete(){this.isStopped?Un(He,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ge){this.destination.next(Ge)}_error(Ge){try{this.destination.error(Ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const wn=Function.prototype.bind;function _t(xe,Ge){return wn.call(xe,Ge)}class ln{constructor(Ge){this.partialObserver=Ge}next(Ge){const{partialObserver:wt}=this;if(wt.next)try{wt.next(Ge)}catch(on){Nt(on)}}error(Ge){const{partialObserver:wt}=this;if(wt.error)try{wt.error(Ge)}catch(on){Nt(on)}else Nt(Ge)}complete(){const{partialObserver:Ge}=this;if(Ge.complete)try{Ge.complete()}catch(wt){Nt(wt)}}}class Dn extends vt{constructor(Ge,wt,on){let Ht;if(super(),(0,g.m)(Ge)||!Ge)Ht={next:null!=Ge?Ge:void 0,error:null!=wt?wt:void 0,complete:null!=on?on:void 0};else{let Oe;this&&he.v.useDeprecatedNextContext?(Oe=Object.create(Ge),Oe.unsubscribe=()=>this.unsubscribe(),Ht={next:Ge.next&&_t(Ge.next,Oe),error:Ge.error&&_t(Ge.error,Oe),complete:Ge.complete&&_t(Ge.complete,Oe)}):Ht=Ge}this.destination=new ln(Ht)}}function Nt(xe){he.v.useDeprecatedSynchronousErrorHandling?(0,Pe.O)(xe):(0,oe.h)(xe)}function Un(xe,Ge){const{onStoppedNotification:wt}=he.v;wt&&Ne.z.setTimeout(()=>wt(xe,Ge))}const dn={closed:!0,next:je,error:function Jt(xe){throw xe},complete:je}},727:(Zn,It,j)=>{j.d(It,{Lc:()=>He,w0:()=>je,Nn:()=>ht});var g=j(576);const he=(0,j(3888).d)(at=>function(Pe){at(this),this.message=Pe?`${Pe.length} errors occurred during unsubscription:\n${Pe.map((vt,wn)=>`${wn+1}) ${vt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Pe});var oe=j(8737);class je{constructor(Ne){this.initialTeardown=Ne,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ne;if(!this.closed){this.closed=!0;const{_parentage:Pe}=this;if(Pe)if(this._parentage=null,Array.isArray(Pe))for(const _t of Pe)_t.remove(this);else Pe.remove(this);const{initialTeardown:vt}=this;if((0,g.m)(vt))try{vt()}catch(_t){Ne=_t instanceof he?_t.errors:[_t]}const{_finalizers:wn}=this;if(wn){this._finalizers=null;for(const _t of wn)try{We(_t)}catch(ln){Ne=null!=Ne?Ne:[],ln instanceof he?Ne=[...Ne,...ln.errors]:Ne.push(ln)}}if(Ne)throw new he(Ne)}}add(Ne){var Pe;if(Ne&&Ne!==this)if(this.closed)We(Ne);else{if(Ne instanceof je){if(Ne.closed||Ne._hasParent(this))return;Ne._addParent(this)}(this._finalizers=null!==(Pe=this._finalizers)&&void 0!==Pe?Pe:[]).push(Ne)}}_hasParent(Ne){const{_parentage:Pe}=this;return Pe===Ne||Array.isArray(Pe)&&Pe.includes(Ne)}_addParent(Ne){const{_parentage:Pe}=this;this._parentage=Array.isArray(Pe)?(Pe.push(Ne),Pe):Pe?[Pe,Ne]:Ne}_removeParent(Ne){const{_parentage:Pe}=this;Pe===Ne?this._parentage=null:Array.isArray(Pe)&&(0,oe.P)(Pe,Ne)}remove(Ne){const{_finalizers:Pe}=this;Pe&&(0,oe.P)(Pe,Ne),Ne instanceof je&&Ne._removeParent(this)}}je.EMPTY=(()=>{const at=new je;return at.closed=!0,at})();const He=je.EMPTY;function ht(at){return at instanceof je||at&&"closed"in at&&(0,g.m)(at.remove)&&(0,g.m)(at.add)&&(0,g.m)(at.unsubscribe)}function We(at){(0,g.m)(at)?at():at.unsubscribe()}},2416:(Zn,It,j)=>{j.d(It,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Zn,It,j)=>{j.d(It,{z:()=>je});var g=j(8189),he=j(7669),oe=j(8996);function je(...He){return function k(){return(0,g.J)(1)}()((0,oe.D)(He,(0,he.yG)(He)))}},515:(Zn,It,j)=>{j.d(It,{E:()=>k});const k=new(j(8306).y)(je=>je.complete())},8996:(Zn,It,j)=>{j.d(It,{D:()=>Ge});var g=j(8421),k=j(5363),he=j(9468),He=j(8306),We=j(2202),at=j(576),Ne=j(9672);function vt(wt,on){if(!wt)throw new Error("Iterable cannot be null");return new He.y(Ht=>{(0,Ne.f)(Ht,on,()=>{const Oe=wt[Symbol.asyncIterator]();(0,Ne.f)(Ht,on,()=>{Oe.next().then(Bt=>{Bt.done?Ht.complete():Ht.next(Bt.value)})},0,!0)})})}var wn=j(3670),_t=j(8239),ln=j(1144),Dn=j(6495),Nt=j(2206),Jt=j(4532),Un=j(3260);function Ge(wt,on){return on?function xe(wt,on){if(null!=wt){if((0,wn.c)(wt))return function oe(wt,on){return(0,g.Xf)(wt).pipe((0,he.R)(on),(0,k.Q)(on))}(wt,on);if((0,ln.z)(wt))return function ht(wt,on){return new He.y(Ht=>{let Oe=0;return on.schedule(function(){Oe===wt.length?Ht.complete():(Ht.next(wt[Oe++]),Ht.closed||this.schedule())})})}(wt,on);if((0,_t.t)(wt))return function je(wt,on){return(0,g.Xf)(wt).pipe((0,he.R)(on),(0,k.Q)(on))}(wt,on);if((0,Nt.D)(wt))return vt(wt,on);if((0,Dn.T)(wt))return function Pe(wt,on){return new He.y(Ht=>{let Oe;return(0,Ne.f)(Ht,on,()=>{Oe=wt[We.h](),(0,Ne.f)(Ht,on,()=>{let Bt,Re;try{({value:Bt,done:Re}=Oe.next())}catch(bt){return void Ht.error(bt)}Re?Ht.complete():Ht.next(Bt)},0,!0)}),()=>(0,at.m)(null==Oe?void 0:Oe.return)&&Oe.return()})}(wt,on);if((0,Un.L)(wt))return function dn(wt,on){return vt((0,Un.Q)(wt),on)}(wt,on)}throw(0,Jt.z)(wt)}(wt,on):(0,g.Xf)(wt)}},8421:(Zn,It,j)=>{j.d(It,{Xf:()=>wn});var g=j(655),k=j(1144),he=j(8239),oe=j(8306),je=j(3670),He=j(2206),ht=j(4532),We=j(6495),at=j(3260),Ne=j(576),Pe=j(7849),vt=j(8822);function wn(xe){if(xe instanceof oe.y)return xe;if(null!=xe){if((0,je.c)(xe))return function _t(xe){return new oe.y(Ge=>{const wt=xe[vt.L]();if((0,Ne.m)(wt.subscribe))return wt.subscribe(Ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,k.z)(xe))return function ln(xe){return new oe.y(Ge=>{for(let wt=0;wt<xe.length&&!Ge.closed;wt++)Ge.next(xe[wt]);Ge.complete()})}(xe);if((0,he.t)(xe))return function Dn(xe){return new oe.y(Ge=>{xe.then(wt=>{Ge.closed||(Ge.next(wt),Ge.complete())},wt=>Ge.error(wt)).then(null,Pe.h)})}(xe);if((0,He.D)(xe))return Jt(xe);if((0,We.T)(xe))return function Nt(xe){return new oe.y(Ge=>{for(const wt of xe)if(Ge.next(wt),Ge.closed)return;Ge.complete()})}(xe);if((0,at.L)(xe))return function Un(xe){return Jt((0,at.Q)(xe))}(xe)}throw(0,ht.z)(xe)}function Jt(xe){return new oe.y(Ge=>{(function dn(xe,Ge){var wt,on,Ht,Oe;return(0,g.mG)(this,void 0,void 0,function*(){try{for(wt=(0,g.KL)(xe);!(on=yield wt.next()).done;)if(Ge.next(on.value),Ge.closed)return}catch(Bt){Ht={error:Bt}}finally{try{on&&!on.done&&(Oe=wt.return)&&(yield Oe.call(wt))}finally{if(Ht)throw Ht.error}}Ge.complete()})})(xe,Ge).catch(wt=>Ge.error(wt))})}},6451:(Zn,It,j)=>{j.d(It,{T:()=>He});var g=j(8189),k=j(8421),he=j(515),oe=j(7669),je=j(8996);function He(...ht){const We=(0,oe.yG)(ht),at=(0,oe._6)(ht,1/0),Ne=ht;return Ne.length?1===Ne.length?(0,k.Xf)(Ne[0]):(0,g.J)(at)((0,je.D)(Ne,We)):he.E}},9646:(Zn,It,j)=>{j.d(It,{of:()=>he});var g=j(7669),k=j(8996);function he(...oe){const je=(0,g.yG)(oe);return(0,k.D)(oe,je)}},2843:(Zn,It,j)=>{j.d(It,{_:()=>he});var g=j(8306),k=j(576);function he(oe,je){const He=(0,k.m)(oe)?oe:()=>oe,ht=We=>We.error(He());return new g.y(je?We=>je.schedule(ht,0,We):ht)}},5403:(Zn,It,j)=>{j.d(It,{x:()=>k});var g=j(2961);function k(oe,je,He,ht,We){return new he(oe,je,He,ht,We)}class he extends g.Lv{constructor(je,He,ht,We,at,Ne){super(je),this.onFinalize=at,this.shouldUnsubscribe=Ne,this._next=He?function(Pe){try{He(Pe)}catch(vt){je.error(vt)}}:super._next,this._error=We?function(Pe){try{We(Pe)}catch(vt){je.error(vt)}finally{this.unsubscribe()}}:super._error,this._complete=ht?function(){try{ht()}catch(Pe){je.error(Pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var je;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:He}=this;super.unsubscribe(),!He&&(null===(je=this.onFinalize)||void 0===je||je.call(this))}}}},262:(Zn,It,j)=>{j.d(It,{K:()=>oe});var g=j(8421),k=j(5403),he=j(4482);function oe(je){return(0,he.e)((He,ht)=>{let Ne,We=null,at=!1;We=He.subscribe((0,k.x)(ht,void 0,void 0,Pe=>{Ne=(0,g.Xf)(je(Pe,oe(je)(He))),We?(We.unsubscribe(),We=null,Ne.subscribe(ht)):at=!0})),at&&(We.unsubscribe(),We=null,Ne.subscribe(ht))})}},4351:(Zn,It,j)=>{j.d(It,{b:()=>he});var g=j(5577),k=j(576);function he(oe,je){return(0,k.m)(je)?(0,g.z)(oe,je,1):(0,g.z)(oe,1)}},6590:(Zn,It,j)=>{j.d(It,{d:()=>he});var g=j(4482),k=j(5403);function he(oe){return(0,g.e)((je,He)=>{let ht=!1;je.subscribe((0,k.x)(He,We=>{ht=!0,He.next(We)},()=>{ht||He.next(oe),He.complete()}))})}},9300:(Zn,It,j)=>{j.d(It,{h:()=>he});var g=j(4482),k=j(5403);function he(oe,je){return(0,g.e)((He,ht)=>{let We=0;He.subscribe((0,k.x)(ht,at=>oe.call(je,at,We++)&&ht.next(at)))})}},590:(Zn,It,j)=>{j.d(It,{P:()=>ht});var g=j(6805),k=j(9300),he=j(5698),oe=j(6590),je=j(8068),He=j(4671);function ht(We,at){const Ne=arguments.length>=2;return Pe=>Pe.pipe(We?(0,k.h)((vt,wn)=>We(vt,wn,Pe)):He.y,(0,he.q)(1),Ne?(0,oe.d)(at):(0,je.T)(()=>new g.K))}},4004:(Zn,It,j)=>{j.d(It,{U:()=>he});var g=j(4482),k=j(5403);function he(oe,je){return(0,g.e)((He,ht)=>{let We=0;He.subscribe((0,k.x)(ht,at=>{ht.next(oe.call(je,at,We++))}))})}},8189:(Zn,It,j)=>{j.d(It,{J:()=>he});var g=j(5577),k=j(4671);function he(oe=1/0){return(0,g.z)(k.y,oe)}},5577:(Zn,It,j)=>{j.d(It,{z:()=>We});var g=j(4004),k=j(8421),he=j(4482),oe=j(9672),je=j(5403),ht=j(576);function We(at,Ne,Pe=1/0){return(0,ht.m)(Ne)?We((vt,wn)=>(0,g.U)((_t,ln)=>Ne(vt,_t,wn,ln))((0,k.Xf)(at(vt,wn))),Pe):("number"==typeof Ne&&(Pe=Ne),(0,he.e)((vt,wn)=>function He(at,Ne,Pe,vt,wn,_t,ln,Dn){const Nt=[];let Jt=0,Un=0,dn=!1;const xe=()=>{dn&&!Nt.length&&!Jt&&Ne.complete()},Ge=on=>Jt<vt?wt(on):Nt.push(on),wt=on=>{_t&&Ne.next(on),Jt++;let Ht=!1;(0,k.Xf)(Pe(on,Un++)).subscribe((0,je.x)(Ne,Oe=>{null==wn||wn(Oe),_t?Ge(Oe):Ne.next(Oe)},()=>{Ht=!0},void 0,()=>{if(Ht)try{for(Jt--;Nt.length&&Jt<vt;){const Oe=Nt.shift();ln?(0,oe.f)(Ne,ln,()=>wt(Oe)):wt(Oe)}xe()}catch(Oe){Ne.error(Oe)}}))};return at.subscribe((0,je.x)(Ne,Ge,()=>{dn=!0,xe()})),()=>{null==Dn||Dn()}}(vt,wn,at,Pe)))}},5363:(Zn,It,j)=>{j.d(It,{Q:()=>oe});var g=j(9672),k=j(4482),he=j(5403);function oe(je,He=0){return(0,k.e)((ht,We)=>{ht.subscribe((0,he.x)(We,at=>(0,g.f)(We,je,()=>We.next(at),He),()=>(0,g.f)(We,je,()=>We.complete(),He),at=>(0,g.f)(We,je,()=>We.error(at),He)))})}},5026:(Zn,It,j)=>{j.d(It,{R:()=>oe});var g=j(4482),k=j(5403);function he(je,He,ht,We,at){return(Ne,Pe)=>{let vt=ht,wn=He,_t=0;Ne.subscribe((0,k.x)(Pe,ln=>{const Dn=_t++;wn=vt?je(wn,ln,Dn):(vt=!0,ln),We&&Pe.next(wn)},at&&(()=>{vt&&Pe.next(wn),Pe.complete()})))}}function oe(je,He){return(0,g.e)(he(je,He,arguments.length>=2,!0))}},3099:(Zn,It,j)=>{j.d(It,{B:()=>je});var g=j(8421),k=j(7579),he=j(2961),oe=j(4482);function je(ht={}){const{connector:We=(()=>new k.x),resetOnError:at=!0,resetOnComplete:Ne=!0,resetOnRefCountZero:Pe=!0}=ht;return vt=>{let wn,_t,ln,Dn=0,Nt=!1,Jt=!1;const Un=()=>{null==_t||_t.unsubscribe(),_t=void 0},dn=()=>{Un(),wn=ln=void 0,Nt=Jt=!1},xe=()=>{const Ge=wn;dn(),null==Ge||Ge.unsubscribe()};return(0,oe.e)((Ge,wt)=>{Dn++,!Jt&&!Nt&&Un();const on=ln=null!=ln?ln:We();wt.add(()=>{Dn--,0===Dn&&!Jt&&!Nt&&(_t=He(xe,Pe))}),on.subscribe(wt),!wn&&Dn>0&&(wn=new he.Hp({next:Ht=>on.next(Ht),error:Ht=>{Jt=!0,Un(),_t=He(dn,at,Ht),on.error(Ht)},complete:()=>{Nt=!0,Un(),_t=He(dn,Ne),on.complete()}}),(0,g.Xf)(Ge).subscribe(wn))})(vt)}}function He(ht,We,...at){if(!0===We)return void ht();if(!1===We)return;const Ne=new he.Hp({next:()=>{Ne.unsubscribe(),ht()}});return We(...at).subscribe(Ne)}},8675:(Zn,It,j)=>{j.d(It,{O:()=>oe});var g=j(7272),k=j(7669),he=j(4482);function oe(...je){const He=(0,k.yG)(je);return(0,he.e)((ht,We)=>{(He?(0,g.z)(je,ht,He):(0,g.z)(je,ht)).subscribe(We)})}},9468:(Zn,It,j)=>{j.d(It,{R:()=>k});var g=j(4482);function k(he,oe=0){return(0,g.e)((je,He)=>{He.add(he.schedule(()=>je.subscribe(He),oe))})}},3900:(Zn,It,j)=>{j.d(It,{w:()=>oe});var g=j(8421),k=j(4482),he=j(5403);function oe(je,He){return(0,k.e)((ht,We)=>{let at=null,Ne=0,Pe=!1;const vt=()=>Pe&&!at&&We.complete();ht.subscribe((0,he.x)(We,wn=>{null==at||at.unsubscribe();let _t=0;const ln=Ne++;(0,g.Xf)(je(wn,ln)).subscribe(at=(0,he.x)(We,Dn=>We.next(He?He(wn,Dn,ln,_t++):Dn),()=>{at=null,vt()}))},()=>{Pe=!0,vt()}))})}},5698:(Zn,It,j)=>{j.d(It,{q:()=>oe});var g=j(515),k=j(4482),he=j(5403);function oe(je){return je<=0?()=>g.E:(0,k.e)((He,ht)=>{let We=0;He.subscribe((0,he.x)(ht,at=>{++We<=je&&(ht.next(at),je<=We&&ht.complete())}))})}},8505:(Zn,It,j)=>{j.d(It,{b:()=>je});var g=j(576),k=j(4482),he=j(5403),oe=j(4671);function je(He,ht,We){const at=(0,g.m)(He)||ht||We?{next:He,error:ht,complete:We}:He;return at?(0,k.e)((Ne,Pe)=>{var vt;null===(vt=at.subscribe)||void 0===vt||vt.call(at);let wn=!0;Ne.subscribe((0,he.x)(Pe,_t=>{var ln;null===(ln=at.next)||void 0===ln||ln.call(at,_t),Pe.next(_t)},()=>{var _t;wn=!1,null===(_t=at.complete)||void 0===_t||_t.call(at),Pe.complete()},_t=>{var ln;wn=!1,null===(ln=at.error)||void 0===ln||ln.call(at,_t),Pe.error(_t)},()=>{var _t,ln;wn&&(null===(_t=at.unsubscribe)||void 0===_t||_t.call(at)),null===(ln=at.finalize)||void 0===ln||ln.call(at)}))}):oe.y}},8068:(Zn,It,j)=>{j.d(It,{T:()=>oe});var g=j(6805),k=j(4482),he=j(5403);function oe(He=je){return(0,k.e)((ht,We)=>{let at=!1;ht.subscribe((0,he.x)(We,Ne=>{at=!0,We.next(Ne)},()=>at?We.complete():We.error(He())))})}function je(){return new g.K}},4408:(Zn,It,j)=>{j.d(It,{o:()=>je});var g=j(727);class k extends g.w0{constructor(ht,We){super()}schedule(ht,We=0){return this}}const he={setInterval(He,ht,...We){const{delegate:at}=he;return(null==at?void 0:at.setInterval)?at.setInterval(He,ht,...We):setInterval(He,ht,...We)},clearInterval(He){const{delegate:ht}=he;return((null==ht?void 0:ht.clearInterval)||clearInterval)(He)},delegate:void 0};var oe=j(8737);class je extends k{constructor(ht,We){super(ht,We),this.scheduler=ht,this.work=We,this.pending=!1}schedule(ht,We=0){var at;if(this.closed)return this;this.state=ht;const Ne=this.id,Pe=this.scheduler;return null!=Ne&&(this.id=this.recycleAsyncId(Pe,Ne,We)),this.pending=!0,this.delay=We,this.id=null!==(at=this.id)&&void 0!==at?at:this.requestAsyncId(Pe,this.id,We),this}requestAsyncId(ht,We,at=0){return he.setInterval(ht.flush.bind(ht,this),at)}recycleAsyncId(ht,We,at=0){if(null!=at&&this.delay===at&&!1===this.pending)return We;null!=We&&he.clearInterval(We)}execute(ht,We){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const at=this._execute(ht,We);if(at)return at;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ht,We){let Ne,at=!1;try{this.work(ht)}catch(Pe){at=!0,Ne=Pe||new Error("Scheduled action threw falsy error")}if(at)return this.unsubscribe(),Ne}unsubscribe(){if(!this.closed){const{id:ht,scheduler:We}=this,{actions:at}=We;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(at,this),null!=ht&&(this.id=this.recycleAsyncId(We,ht,null)),this.delay=null,super.unsubscribe()}}}},7565:(Zn,It,j)=>{j.d(It,{v:()=>he});var g=j(6063);class k{constructor(je,He=k.now){this.schedulerActionCtor=je,this.now=He}schedule(je,He=0,ht){return new this.schedulerActionCtor(this,je).schedule(ht,He)}}k.now=g.l.now;class he extends k{constructor(je,He=k.now){super(je,He),this.actions=[],this._active=!1}flush(je){const{actions:He}=this;if(this._active)return void He.push(je);let ht;this._active=!0;do{if(ht=je.execute(je.state,je.delay))break}while(je=He.shift());if(this._active=!1,ht){for(;je=He.shift();)je.unsubscribe();throw ht}}}},4986:(Zn,It,j)=>{j.d(It,{z:()=>he});var g=j(4408);const he=new(j(7565).v)(g.o)},6063:(Zn,It,j)=>{j.d(It,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Zn,It,j)=>{j.d(It,{z:()=>g});const g={setTimeout(k,he,...oe){const{delegate:je}=g;return(null==je?void 0:je.setTimeout)?je.setTimeout(k,he,...oe):setTimeout(k,he,...oe)},clearTimeout(k){const{delegate:he}=g;return((null==he?void 0:he.clearTimeout)||clearTimeout)(k)},delegate:void 0}},2202:(Zn,It,j)=>{j.d(It,{h:()=>k});const k=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Zn,It,j)=>{j.d(It,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Zn,It,j)=>{j.d(It,{K:()=>k});const k=(0,j(3888).d)(he=>function(){he(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Zn,It,j)=>{j.d(It,{_6:()=>He,jO:()=>oe,yG:()=>je});var g=j(576);function he(ht){return ht[ht.length-1]}function oe(ht){return(0,g.m)(he(ht))?ht.pop():void 0}function je(ht){return function k(ht){return ht&&(0,g.m)(ht.schedule)}(he(ht))?ht.pop():void 0}function He(ht,We){return"number"==typeof he(ht)?ht.pop():We}},4742:(Zn,It,j)=>{j.d(It,{D:()=>je});const{isArray:g}=Array,{getPrototypeOf:k,prototype:he,keys:oe}=Object;function je(ht){if(1===ht.length){const We=ht[0];if(g(We))return{args:We,keys:null};if(function He(ht){return ht&&"object"==typeof ht&&k(ht)===he}(We)){const at=oe(We);return{args:at.map(Ne=>We[Ne]),keys:at}}}return{args:ht,keys:null}}},8737:(Zn,It,j)=>{function g(k,he){if(k){const oe=k.indexOf(he);0<=oe&&k.splice(oe,1)}}j.d(It,{P:()=>g})},3888:(Zn,It,j)=>{function g(k){const oe=k(je=>{Error.call(je),je.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}j.d(It,{d:()=>g})},1810:(Zn,It,j)=>{function g(k,he){return k.reduce((oe,je,He)=>(oe[je]=he[He],oe),{})}j.d(It,{n:()=>g})},2806:(Zn,It,j)=>{j.d(It,{O:()=>oe,x:()=>he});var g=j(2416);let k=null;function he(je){if(g.v.useDeprecatedSynchronousErrorHandling){const He=!k;if(He&&(k={errorThrown:!1,error:null}),je(),He){const{errorThrown:ht,error:We}=k;if(k=null,ht)throw We}}else je()}function oe(je){g.v.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=je)}},9672:(Zn,It,j)=>{function g(k,he,oe,je=0,He=!1){const ht=he.schedule(function(){oe(),He?k.add(this.schedule(null,je)):this.unsubscribe()},je);if(k.add(ht),!He)return ht}j.d(It,{f:()=>g})},4671:(Zn,It,j)=>{function g(k){return k}j.d(It,{y:()=>g})},1144:(Zn,It,j)=>{j.d(It,{z:()=>g});const g=k=>k&&"number"==typeof k.length&&"function"!=typeof k},2206:(Zn,It,j)=>{j.d(It,{D:()=>k});var g=j(576);function k(he){return Symbol.asyncIterator&&(0,g.m)(null==he?void 0:he[Symbol.asyncIterator])}},576:(Zn,It,j)=>{function g(k){return"function"==typeof k}j.d(It,{m:()=>g})},3670:(Zn,It,j)=>{j.d(It,{c:()=>he});var g=j(8822),k=j(576);function he(oe){return(0,k.m)(oe[g.L])}},6495:(Zn,It,j)=>{j.d(It,{T:()=>he});var g=j(2202),k=j(576);function he(oe){return(0,k.m)(null==oe?void 0:oe[g.h])}},8239:(Zn,It,j)=>{j.d(It,{t:()=>k});var g=j(576);function k(he){return(0,g.m)(null==he?void 0:he.then)}},3260:(Zn,It,j)=>{j.d(It,{L:()=>oe,Q:()=>he});var g=j(655),k=j(576);function he(je){return(0,g.FC)(this,arguments,function*(){const ht=je.getReader();try{for(;;){const{value:We,done:at}=yield(0,g.qq)(ht.read());if(at)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(We)}}finally{ht.releaseLock()}})}function oe(je){return(0,k.m)(null==je?void 0:je.getReader)}},4482:(Zn,It,j)=>{j.d(It,{A:()=>k,e:()=>he});var g=j(576);function k(oe){return(0,g.m)(null==oe?void 0:oe.lift)}function he(oe){return je=>{if(k(je))return je.lift(function(He){try{return oe(He,this)}catch(ht){this.error(ht)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Zn,It,j)=>{j.d(It,{Z:()=>oe});var g=j(4004);const{isArray:k}=Array;function oe(je){return(0,g.U)(He=>function he(je,He){return k(He)?je(...He):je(He)}(je,He))}},7849:(Zn,It,j)=>{j.d(It,{h:()=>he});var g=j(2416),k=j(3410);function he(oe){k.z.setTimeout(()=>{const{onUnhandledError:je}=g.v;if(!je)throw oe;je(oe)})}},4532:(Zn,It,j)=>{function g(k){return new TypeError(`You provided ${null!==k&&"object"==typeof k?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(It,{z:()=>g})},655:(Zn,It,j)=>{function oe(Re,bt){var Je={};for(var Ft in Re)Object.prototype.hasOwnProperty.call(Re,Ft)&&bt.indexOf(Ft)<0&&(Je[Ft]=Re[Ft]);if(null!=Re&&"function"==typeof Object.getOwnPropertySymbols){var Dt=0;for(Ft=Object.getOwnPropertySymbols(Re);Dt<Ft.length;Dt++)bt.indexOf(Ft[Dt])<0&&Object.prototype.propertyIsEnumerable.call(Re,Ft[Dt])&&(Je[Ft[Dt]]=Re[Ft[Dt]])}return Je}function We(Re,bt,Je,Ft){return new(Je||(Je=Promise))(function(Lt,Yt){function sr(br){try{yn(Ft.next(br))}catch(mr){Yt(mr)}}function lr(br){try{yn(Ft.throw(br))}catch(mr){Yt(mr)}}function yn(br){br.done?Lt(br.value):function Dt(Lt){return Lt instanceof Je?Lt:new Je(function(Yt){Yt(Lt)})}(br.value).then(sr,lr)}yn((Ft=Ft.apply(Re,bt||[])).next())})}function Nt(Re){return this instanceof Nt?(this.v=Re,this):new Nt(Re)}function Jt(Re,bt,Je){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Dt,Ft=Je.apply(Re,bt||[]),Lt=[];return Dt={},Yt("next"),Yt("throw"),Yt("return"),Dt[Symbol.asyncIterator]=function(){return this},Dt;function Yt(Vt){Ft[Vt]&&(Dt[Vt]=function(Ot){return new Promise(function(it,St){Lt.push([Vt,Ot,it,St])>1||sr(Vt,Ot)})})}function sr(Vt,Ot){try{!function lr(Vt){Vt.value instanceof Nt?Promise.resolve(Vt.value.v).then(yn,br):mr(Lt[0][2],Vt)}(Ft[Vt](Ot))}catch(it){mr(Lt[0][3],it)}}function yn(Vt){sr("next",Vt)}function br(Vt){sr("throw",Vt)}function mr(Vt,Ot){Vt(Ot),Lt.shift(),Lt.length&&sr(Lt[0][0],Lt[0][1])}}function dn(Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,bt=Re[Symbol.asyncIterator];return bt?bt.call(Re):(Re=function vt(Re){var bt="function"==typeof Symbol&&Symbol.iterator,Je=bt&&Re[bt],Ft=0;if(Je)return Je.call(Re);if(Re&&"number"==typeof Re.length)return{next:function(){return Re&&Ft>=Re.length&&(Re=void 0),{value:Re&&Re[Ft++],done:!Re}}};throw new TypeError(bt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Re),Je={},Ft("next"),Ft("throw"),Ft("return"),Je[Symbol.asyncIterator]=function(){return this},Je);function Ft(Lt){Je[Lt]=Re[Lt]&&function(Yt){return new Promise(function(sr,lr){!function Dt(Lt,Yt,sr,lr){Promise.resolve(lr).then(function(yn){Lt({value:yn,done:sr})},Yt)}(sr,lr,(Yt=Re[Lt](Yt)).done,Yt.value)})}}}j.d(It,{FC:()=>Jt,KL:()=>dn,_T:()=>oe,mG:()=>We,qq:()=>Nt})},1777:(Zn,It,j)=>{j.d(It,{LC:()=>k,SB:()=>at,X$:()=>oe,ZE:()=>Un,ZN:()=>Jt,_j:()=>g,eR:()=>Pe,jt:()=>je,k1:()=>dn,l3:()=>he,oB:()=>We,vP:()=>ht});class g{}class k{}const he="*";function oe(xe,Ge){return{type:7,name:xe,definitions:Ge,options:{}}}function je(xe,Ge=null){return{type:4,styles:Ge,timings:xe}}function ht(xe,Ge=null){return{type:2,steps:xe,options:Ge}}function We(xe){return{type:6,styles:xe,offset:null}}function at(xe,Ge,wt){return{type:0,name:xe,styles:Ge,options:wt}}function Pe(xe,Ge,wt=null){return{type:1,expr:xe,animation:Ge,options:wt}}function Nt(xe){Promise.resolve(null).then(xe)}class Jt{constructor(Ge=0,wt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ge+wt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ge=>Ge()),this._onDoneFns=[])}onStart(Ge){this._onStartFns.push(Ge)}onDone(Ge){this._onDoneFns.push(Ge)}onDestroy(Ge){this._onDestroyFns.push(Ge)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Nt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ge=>Ge()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ge=>Ge()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Ge){this._position=this.totalTime?Ge*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ge){const wt="start"==Ge?this._onStartFns:this._onDoneFns;wt.forEach(on=>on()),wt.length=0}}class Un{constructor(Ge){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ge;let wt=0,on=0,Ht=0;const Oe=this.players.length;0==Oe?Nt(()=>this._onFinish()):this.players.forEach(Bt=>{Bt.onDone(()=>{++wt==Oe&&this._onFinish()}),Bt.onDestroy(()=>{++on==Oe&&this._onDestroy()}),Bt.onStart(()=>{++Ht==Oe&&this._onStart()})}),this.totalTime=this.players.reduce((Bt,Re)=>Math.max(Bt,Re.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ge=>Ge()),this._onDoneFns=[])}init(){this.players.forEach(Ge=>Ge.init())}onStart(Ge){this._onStartFns.push(Ge)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ge=>Ge()),this._onStartFns=[])}onDone(Ge){this._onDoneFns.push(Ge)}onDestroy(Ge){this._onDestroyFns.push(Ge)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ge=>Ge.play())}pause(){this.players.forEach(Ge=>Ge.pause())}restart(){this.players.forEach(Ge=>Ge.restart())}finish(){this._onFinish(),this.players.forEach(Ge=>Ge.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ge=>Ge.destroy()),this._onDestroyFns.forEach(Ge=>Ge()),this._onDestroyFns=[])}reset(){this.players.forEach(Ge=>Ge.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ge){const wt=Ge*this.totalTime;this.players.forEach(on=>{const Ht=on.totalTime?Math.min(1,wt/on.totalTime):1;on.setPosition(Ht)})}getPosition(){const Ge=this.players.reduce((wt,on)=>null===wt||on.totalTime>wt.totalTime?on:wt,null);return null!=Ge?Ge.getPosition():0}beforeDestroy(){this.players.forEach(Ge=>{Ge.beforeDestroy&&Ge.beforeDestroy()})}triggerCallback(Ge){const wt="start"==Ge?this._onStartFns:this._onDoneFns;wt.forEach(on=>on()),wt.length=0}}const dn="!"},9808:(Zn,It,j)=>{j.d(It,{Do:()=>xe,ED:()=>Zr,EM:()=>so,HT:()=>je,JF:()=>Ti,JJ:()=>Eo,K0:()=>ht,Mx:()=>Cs,NF:()=>vs,O5:()=>Vr,Ov:()=>vn,PC:()=>Pi,PM:()=>Xs,RF:()=>fs,S$:()=>Nt,V_:()=>Ne,Ye:()=>Ge,b0:()=>dn,bD:()=>js,ez:()=>Qs,lw:()=>We,mk:()=>es,mr:()=>Un,n9:()=>si,q:()=>he,sg:()=>wr,tP:()=>jo,uU:()=>ws,w_:()=>He});var g=j(5e3);let k=null;function he(){return k}function je(B){k||(k=B)}class He{}const ht=new g.OlP("DocumentToken");let We=(()=>{class B{historyGo(q){throw new Error("Not implemented")}}return B.\u0275fac=function(q){return new(q||B)},B.\u0275prov=g.Yz7({token:B,factory:function(){return function at(){return(0,g.LFG)(Pe)}()},providedIn:"platform"}),B})();const Ne=new g.OlP("Location Initialized");let Pe=(()=>{class B extends We{constructor(q){super(),this._doc=q,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return he().getBaseHref(this._doc)}onPopState(q){const ve=he().getGlobalEventTarget(this._doc,"window");return ve.addEventListener("popstate",q,!1),()=>ve.removeEventListener("popstate",q)}onHashChange(q){const ve=he().getGlobalEventTarget(this._doc,"window");return ve.addEventListener("hashchange",q,!1),()=>ve.removeEventListener("hashchange",q)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(q){this.location.pathname=q}pushState(q,ve,qe){vt()?this._history.pushState(q,ve,qe):this.location.hash=qe}replaceState(q,ve,qe){vt()?this._history.replaceState(q,ve,qe):this.location.hash=qe}forward(){this._history.forward()}back(){this._history.back()}historyGo(q=0){this._history.go(q)}getState(){return this._history.state}}return B.\u0275fac=function(q){return new(q||B)(g.LFG(ht))},B.\u0275prov=g.Yz7({token:B,factory:function(){return function wn(){return new Pe((0,g.LFG)(ht))}()},providedIn:"platform"}),B})();function vt(){return!!window.history.pushState}function _t(B,pe){if(0==B.length)return pe;if(0==pe.length)return B;let q=0;return B.endsWith("/")&&q++,pe.startsWith("/")&&q++,2==q?B+pe.substring(1):1==q?B+pe:B+"/"+pe}function ln(B){const pe=B.match(/#|\?|$/),q=pe&&pe.index||B.length;return B.slice(0,q-("/"===B[q-1]?1:0))+B.slice(q)}function Dn(B){return B&&"?"!==B[0]?"?"+B:B}let Nt=(()=>{class B{historyGo(q){throw new Error("Not implemented")}}return B.\u0275fac=function(q){return new(q||B)},B.\u0275prov=g.Yz7({token:B,factory:function(){return function Jt(B){const pe=(0,g.LFG)(ht).location;return new dn((0,g.LFG)(We),pe&&pe.origin||"")}()},providedIn:"root"}),B})();const Un=new g.OlP("appBaseHref");let dn=(()=>{class B extends Nt{constructor(q,ve){if(super(),this._platformLocation=q,this._removeListenerFns=[],null==ve&&(ve=this._platformLocation.getBaseHrefFromDOM()),null==ve)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ve}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}prepareExternalUrl(q){return _t(this._baseHref,q)}path(q=!1){const ve=this._platformLocation.pathname+Dn(this._platformLocation.search),qe=this._platformLocation.hash;return qe&&q?`${ve}${qe}`:ve}pushState(q,ve,qe,nn){const Sn=this.prepareExternalUrl(qe+Dn(nn));this._platformLocation.pushState(q,ve,Sn)}replaceState(q,ve,qe,nn){const Sn=this.prepareExternalUrl(qe+Dn(nn));this._platformLocation.replaceState(q,ve,Sn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(q=0){var ve,qe;null===(qe=(ve=this._platformLocation).historyGo)||void 0===qe||qe.call(ve,q)}}return B.\u0275fac=function(q){return new(q||B)(g.LFG(We),g.LFG(Un,8))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})(),xe=(()=>{class B extends Nt{constructor(q,ve){super(),this._platformLocation=q,this._baseHref="",this._removeListenerFns=[],null!=ve&&(this._baseHref=ve)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}path(q=!1){let ve=this._platformLocation.hash;return null==ve&&(ve="#"),ve.length>0?ve.substring(1):ve}prepareExternalUrl(q){const ve=_t(this._baseHref,q);return ve.length>0?"#"+ve:ve}pushState(q,ve,qe,nn){let Sn=this.prepareExternalUrl(qe+Dn(nn));0==Sn.length&&(Sn=this._platformLocation.pathname),this._platformLocation.pushState(q,ve,Sn)}replaceState(q,ve,qe,nn){let Sn=this.prepareExternalUrl(qe+Dn(nn));0==Sn.length&&(Sn=this._platformLocation.pathname),this._platformLocation.replaceState(q,ve,Sn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(q=0){var ve,qe;null===(qe=(ve=this._platformLocation).historyGo)||void 0===qe||qe.call(ve,q)}}return B.\u0275fac=function(q){return new(q||B)(g.LFG(We),g.LFG(Un,8))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})(),Ge=(()=>{class B{constructor(q,ve){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=q;const qe=this._platformStrategy.getBaseHref();this._platformLocation=ve,this._baseHref=ln(Ht(qe)),this._platformStrategy.onPopState(nn=>{this._subject.emit({url:this.path(!0),pop:!0,state:nn.state,type:nn.type})})}path(q=!1){return this.normalize(this._platformStrategy.path(q))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(q,ve=""){return this.path()==this.normalize(q+Dn(ve))}normalize(q){return B.stripTrailingSlash(function on(B,pe){return B&&pe.startsWith(B)?pe.substring(B.length):pe}(this._baseHref,Ht(q)))}prepareExternalUrl(q){return q&&"/"!==q[0]&&(q="/"+q),this._platformStrategy.prepareExternalUrl(q)}go(q,ve="",qe=null){this._platformStrategy.pushState(qe,"",q,ve),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+Dn(ve)),qe)}replaceState(q,ve="",qe=null){this._platformStrategy.replaceState(qe,"",q,ve),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+Dn(ve)),qe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(q=0){var ve,qe;null===(qe=(ve=this._platformStrategy).historyGo)||void 0===qe||qe.call(ve,q)}onUrlChange(q){this._urlChangeListeners.push(q),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ve=>{this._notifyUrlChangeListeners(ve.url,ve.state)}))}_notifyUrlChangeListeners(q="",ve){this._urlChangeListeners.forEach(qe=>qe(q,ve))}subscribe(q,ve,qe){return this._subject.subscribe({next:q,error:ve,complete:qe})}}return B.normalizeQueryParams=Dn,B.joinWithSlash=_t,B.stripTrailingSlash=ln,B.\u0275fac=function(q){return new(q||B)(g.LFG(Nt),g.LFG(We))},B.\u0275prov=g.Yz7({token:B,factory:function(){return function wt(){return new Ge((0,g.LFG)(Nt),(0,g.LFG)(We))}()},providedIn:"root"}),B})();function Ht(B){return B.replace(/\/index.html$/,"")}var Bt=(()=>((Bt=Bt||{})[Bt.Decimal=0]="Decimal",Bt[Bt.Percent=1]="Percent",Bt[Bt.Currency=2]="Currency",Bt[Bt.Scientific=3]="Scientific",Bt))(),bt=(()=>((bt=bt||{})[bt.Format=0]="Format",bt[bt.Standalone=1]="Standalone",bt))(),Je=(()=>((Je=Je||{})[Je.Narrow=0]="Narrow",Je[Je.Abbreviated=1]="Abbreviated",Je[Je.Wide=2]="Wide",Je[Je.Short=3]="Short",Je))(),Ft=(()=>((Ft=Ft||{})[Ft.Short=0]="Short",Ft[Ft.Medium=1]="Medium",Ft[Ft.Long=2]="Long",Ft[Ft.Full=3]="Full",Ft))(),Dt=(()=>((Dt=Dt||{})[Dt.Decimal=0]="Decimal",Dt[Dt.Group=1]="Group",Dt[Dt.List=2]="List",Dt[Dt.PercentSign=3]="PercentSign",Dt[Dt.PlusSign=4]="PlusSign",Dt[Dt.MinusSign=5]="MinusSign",Dt[Dt.Exponential=6]="Exponential",Dt[Dt.SuperscriptingExponent=7]="SuperscriptingExponent",Dt[Dt.PerMille=8]="PerMille",Dt[Dt.Infinity=9]="Infinity",Dt[Dt.NaN=10]="NaN",Dt[Dt.TimeSeparator=11]="TimeSeparator",Dt[Dt.CurrencyDecimal=12]="CurrencyDecimal",Dt[Dt.CurrencyGroup=13]="CurrencyGroup",Dt))();function Ot(B,pe){return Mr((0,g.cg1)(B)[g.wAp.DateFormat],pe)}function it(B,pe){return Mr((0,g.cg1)(B)[g.wAp.TimeFormat],pe)}function St(B,pe){return Mr((0,g.cg1)(B)[g.wAp.DateTimeFormat],pe)}function ut(B,pe){const q=(0,g.cg1)(B),ve=q[g.wAp.NumberSymbols][pe];if(void 0===ve){if(pe===Dt.CurrencyDecimal)return q[g.wAp.NumberSymbols][Dt.Decimal];if(pe===Dt.CurrencyGroup)return q[g.wAp.NumberSymbols][Dt.Group]}return ve}function Yr(B){if(!B[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${B[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Mr(B,pe){for(let q=pe;q>-1;q--)if(void 0!==B[q])return B[q];throw new Error("Locale data API: locale data undefined")}function Rr(B){const[pe,q]=B.split(":");return{hours:+pe,minutes:+q}}const nt=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,dt={},Gt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var tn=(()=>((tn=tn||{})[tn.Short=0]="Short",tn[tn.ShortGMT=1]="ShortGMT",tn[tn.Long=2]="Long",tn[tn.Extended=3]="Extended",tn))(),bn=(()=>((bn=bn||{})[bn.FullYear=0]="FullYear",bn[bn.Month=1]="Month",bn[bn.Date=2]="Date",bn[bn.Hours=3]="Hours",bn[bn.Minutes=4]="Minutes",bn[bn.Seconds=5]="Seconds",bn[bn.FractionalSeconds=6]="FractionalSeconds",bn[bn.Day=7]="Day",bn))(),Yn=(()=>((Yn=Yn||{})[Yn.DayPeriods=0]="DayPeriods",Yn[Yn.Days=1]="Days",Yn[Yn.Months=2]="Months",Yn[Yn.Eras=3]="Eras",Yn))();function Xr(B,pe,q,ve){let qe=function Me(B){if(pt(B))return B;if("number"==typeof B&&!isNaN(B))return new Date(B);if("string"==typeof B){if(B=B.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(B)){const[qe,nn=1,Sn=1]=B.split("-").map(pr=>+pr);return Br(qe,nn-1,Sn)}const q=parseFloat(B);if(!isNaN(B-q))return new Date(q);let ve;if(ve=B.match(nt))return function Ae(B){const pe=new Date(0);let q=0,ve=0;const qe=B[8]?pe.setUTCFullYear:pe.setFullYear,nn=B[8]?pe.setUTCHours:pe.setHours;B[9]&&(q=Number(B[9]+B[10]),ve=Number(B[9]+B[11])),qe.call(pe,Number(B[1]),Number(B[2])-1,Number(B[3]));const Sn=Number(B[4]||0)-q,pr=Number(B[5]||0)-ve,jr=Number(B[6]||0),ei=Math.floor(1e3*parseFloat("0."+(B[7]||0)));return nn.call(pe,Sn,pr,jr,ei),pe}(ve)}const pe=new Date(B);if(!pt(pe))throw new Error(`Unable to convert "${B}" into a date`);return pe}(B);pe=kr(q,pe)||pe;let pr,Sn=[];for(;pe;){if(pr=Gt.exec(pe),!pr){Sn.push(pe);break}{Sn=Sn.concat(pr.slice(1));const ti=Sn.pop();if(!ti)break;pe=ti}}let jr=qe.getTimezoneOffset();ve&&(jr=un(ve,jr),qe=function Be(B,pe,q){const ve=q?-1:1,qe=B.getTimezoneOffset();return function Ut(B,pe){return(B=new Date(B.getTime())).setMinutes(B.getMinutes()+pe),B}(B,ve*(un(pe,qe)-qe))}(qe,ve,!0));let ei="";return Sn.forEach(ti=>{const fi=function ft(B){if(Ue[B])return Ue[B];let pe;switch(B){case"G":case"GG":case"GGG":pe=Dr(Yn.Eras,Je.Abbreviated);break;case"GGGG":pe=Dr(Yn.Eras,Je.Wide);break;case"GGGGG":pe=Dr(Yn.Eras,Je.Narrow);break;case"y":pe=Hn(bn.FullYear,1,0,!1,!0);break;case"yy":pe=Hn(bn.FullYear,2,0,!0,!0);break;case"yyy":pe=Hn(bn.FullYear,3,0,!1,!0);break;case"yyyy":pe=Hn(bn.FullYear,4,0,!1,!0);break;case"Y":pe=Xe(1);break;case"YY":pe=Xe(2,!0);break;case"YYY":pe=Xe(3);break;case"YYYY":pe=Xe(4);break;case"M":case"L":pe=Hn(bn.Month,1,1);break;case"MM":case"LL":pe=Hn(bn.Month,2,1);break;case"MMM":pe=Dr(Yn.Months,Je.Abbreviated);break;case"MMMM":pe=Dr(Yn.Months,Je.Wide);break;case"MMMMM":pe=Dr(Yn.Months,Je.Narrow);break;case"LLL":pe=Dr(Yn.Months,Je.Abbreviated,bt.Standalone);break;case"LLLL":pe=Dr(Yn.Months,Je.Wide,bt.Standalone);break;case"LLLLL":pe=Dr(Yn.Months,Je.Narrow,bt.Standalone);break;case"w":pe=Lr(1);break;case"ww":pe=Lr(2);break;case"W":pe=Lr(1,!0);break;case"d":pe=Hn(bn.Date,1);break;case"dd":pe=Hn(bn.Date,2);break;case"c":case"cc":pe=Hn(bn.Day,1);break;case"ccc":pe=Dr(Yn.Days,Je.Abbreviated,bt.Standalone);break;case"cccc":pe=Dr(Yn.Days,Je.Wide,bt.Standalone);break;case"ccccc":pe=Dr(Yn.Days,Je.Narrow,bt.Standalone);break;case"cccccc":pe=Dr(Yn.Days,Je.Short,bt.Standalone);break;case"E":case"EE":case"EEE":pe=Dr(Yn.Days,Je.Abbreviated);break;case"EEEE":pe=Dr(Yn.Days,Je.Wide);break;case"EEEEE":pe=Dr(Yn.Days,Je.Narrow);break;case"EEEEEE":pe=Dr(Yn.Days,Je.Short);break;case"a":case"aa":case"aaa":pe=Dr(Yn.DayPeriods,Je.Abbreviated);break;case"aaaa":pe=Dr(Yn.DayPeriods,Je.Wide);break;case"aaaaa":pe=Dr(Yn.DayPeriods,Je.Narrow);break;case"b":case"bb":case"bbb":pe=Dr(Yn.DayPeriods,Je.Abbreviated,bt.Standalone,!0);break;case"bbbb":pe=Dr(Yn.DayPeriods,Je.Wide,bt.Standalone,!0);break;case"bbbbb":pe=Dr(Yn.DayPeriods,Je.Narrow,bt.Standalone,!0);break;case"B":case"BB":case"BBB":pe=Dr(Yn.DayPeriods,Je.Abbreviated,bt.Format,!0);break;case"BBBB":pe=Dr(Yn.DayPeriods,Je.Wide,bt.Format,!0);break;case"BBBBB":pe=Dr(Yn.DayPeriods,Je.Narrow,bt.Format,!0);break;case"h":pe=Hn(bn.Hours,1,-12);break;case"hh":pe=Hn(bn.Hours,2,-12);break;case"H":pe=Hn(bn.Hours,1);break;case"HH":pe=Hn(bn.Hours,2);break;case"m":pe=Hn(bn.Minutes,1);break;case"mm":pe=Hn(bn.Minutes,2);break;case"s":pe=Hn(bn.Seconds,1);break;case"ss":pe=Hn(bn.Seconds,2);break;case"S":pe=Hn(bn.FractionalSeconds,1);break;case"SS":pe=Hn(bn.FractionalSeconds,2);break;case"SSS":pe=Hn(bn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":pe=Fn(tn.Short);break;case"ZZZZZ":pe=Fn(tn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":pe=Fn(tn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":pe=Fn(tn.Long);break;default:return null}return Ue[B]=pe,pe}(ti);ei+=fi?fi(qe,q,jr):"''"===ti?"'":ti.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),ei}function Br(B,pe,q){const ve=new Date(0);return ve.setFullYear(B,pe,q),ve.setHours(0,0,0),ve}function kr(B,pe){const q=function Yt(B){return(0,g.cg1)(B)[g.wAp.LocaleId]}(B);if(dt[q]=dt[q]||{},dt[q][pe])return dt[q][pe];let ve="";switch(pe){case"shortDate":ve=Ot(B,Ft.Short);break;case"mediumDate":ve=Ot(B,Ft.Medium);break;case"longDate":ve=Ot(B,Ft.Long);break;case"fullDate":ve=Ot(B,Ft.Full);break;case"shortTime":ve=it(B,Ft.Short);break;case"mediumTime":ve=it(B,Ft.Medium);break;case"longTime":ve=it(B,Ft.Long);break;case"fullTime":ve=it(B,Ft.Full);break;case"short":const qe=kr(B,"shortTime"),nn=kr(B,"shortDate");ve=ls(St(B,Ft.Short),[qe,nn]);break;case"medium":const Sn=kr(B,"mediumTime"),pr=kr(B,"mediumDate");ve=ls(St(B,Ft.Medium),[Sn,pr]);break;case"long":const jr=kr(B,"longTime"),ei=kr(B,"longDate");ve=ls(St(B,Ft.Long),[jr,ei]);break;case"full":const ti=kr(B,"fullTime"),fi=kr(B,"fullDate");ve=ls(St(B,Ft.Full),[ti,fi])}return ve&&(dt[q][pe]=ve),ve}function ls(B,pe){return pe&&(B=B.replace(/\{([^}]+)}/g,function(q,ve){return null!=pe&&ve in pe?pe[ve]:q})),B}function Bi(B,pe,q="-",ve,qe){let nn="";(B<0||qe&&B<=0)&&(qe?B=1-B:(B=-B,nn=q));let Sn=String(B);for(;Sn.length<pe;)Sn="0"+Sn;return ve&&(Sn=Sn.substr(Sn.length-pe)),nn+Sn}function Hn(B,pe,q=0,ve=!1,qe=!1){return function(nn,Sn){let pr=function wi(B,pe){switch(B){case bn.FullYear:return pe.getFullYear();case bn.Month:return pe.getMonth();case bn.Date:return pe.getDate();case bn.Hours:return pe.getHours();case bn.Minutes:return pe.getMinutes();case bn.Seconds:return pe.getSeconds();case bn.FractionalSeconds:return pe.getMilliseconds();case bn.Day:return pe.getDay();default:throw new Error(`Unknown DateType value "${B}".`)}}(B,nn);if((q>0||pr>-q)&&(pr+=q),B===bn.Hours)0===pr&&-12===q&&(pr=12);else if(B===bn.FractionalSeconds)return function di(B,pe){return Bi(B,3).substr(0,pe)}(pr,pe);const jr=ut(Sn,Dt.MinusSign);return Bi(pr,pe,jr,ve,qe)}}function Dr(B,pe,q=bt.Format,ve=!1){return function(qe,nn){return function $i(B,pe,q,ve,qe,nn){switch(q){case Yn.Months:return function yn(B,pe,q){const ve=(0,g.cg1)(B),nn=Mr([ve[g.wAp.MonthsFormat],ve[g.wAp.MonthsStandalone]],pe);return Mr(nn,q)}(pe,qe,ve)[B.getMonth()];case Yn.Days:return function lr(B,pe,q){const ve=(0,g.cg1)(B),nn=Mr([ve[g.wAp.DaysFormat],ve[g.wAp.DaysStandalone]],pe);return Mr(nn,q)}(pe,qe,ve)[B.getDay()];case Yn.DayPeriods:const Sn=B.getHours(),pr=B.getMinutes();if(nn){const ei=function ii(B){const pe=(0,g.cg1)(B);return Yr(pe),(pe[g.wAp.ExtraData][2]||[]).map(ve=>"string"==typeof ve?Rr(ve):[Rr(ve[0]),Rr(ve[1])])}(pe),ti=function er(B,pe,q){const ve=(0,g.cg1)(B);Yr(ve);const nn=Mr([ve[g.wAp.ExtraData][0],ve[g.wAp.ExtraData][1]],pe)||[];return Mr(nn,q)||[]}(pe,qe,ve),fi=ei.findIndex(Ji=>{if(Array.isArray(Ji)){const[Ni,ki]=Ji,Ks=Sn>=Ni.hours&&pr>=Ni.minutes,ns=Sn<ki.hours||Sn===ki.hours&&pr<ki.minutes;if(Ni.hours<ki.hours){if(Ks&&ns)return!0}else if(Ks||ns)return!0}else if(Ji.hours===Sn&&Ji.minutes===pr)return!0;return!1});if(-1!==fi)return ti[fi]}return function sr(B,pe,q){const ve=(0,g.cg1)(B),nn=Mr([ve[g.wAp.DayPeriodsFormat],ve[g.wAp.DayPeriodsStandalone]],pe);return Mr(nn,q)}(pe,qe,ve)[Sn<12?0:1];case Yn.Eras:return function br(B,pe){return Mr((0,g.cg1)(B)[g.wAp.Eras],pe)}(pe,ve)[B.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${q}`)}}(qe,nn,B,pe,q,ve)}}function Fn(B){return function(pe,q,ve){const qe=-1*ve,nn=ut(q,Dt.MinusSign),Sn=qe>0?Math.floor(qe/60):Math.ceil(qe/60);switch(B){case tn.Short:return(qe>=0?"+":"")+Bi(Sn,2,nn)+Bi(Math.abs(qe%60),2,nn);case tn.ShortGMT:return"GMT"+(qe>=0?"+":"")+Bi(Sn,1,nn);case tn.Long:return"GMT"+(qe>=0?"+":"")+Bi(Sn,2,nn)+":"+Bi(Math.abs(qe%60),2,nn);case tn.Extended:return 0===ve?"Z":(qe>=0?"+":"")+Bi(Sn,2,nn)+":"+Bi(Math.abs(qe%60),2,nn);default:throw new Error(`Unknown zone width "${B}"`)}}}function Fr(B){return Br(B.getFullYear(),B.getMonth(),B.getDate()+(4-B.getDay()))}function Lr(B,pe=!1){return function(q,ve){let qe;if(pe){const nn=new Date(q.getFullYear(),q.getMonth(),1).getDay()-1,Sn=q.getDate();qe=1+Math.floor((Sn+nn)/7)}else{const nn=Fr(q),Sn=function yr(B){const pe=Br(B,0,1).getDay();return Br(B,0,1+(pe<=4?4:11)-pe)}(nn.getFullYear()),pr=nn.getTime()-Sn.getTime();qe=1+Math.round(pr/6048e5)}return Bi(qe,B,ut(ve,Dt.MinusSign))}}function Xe(B,pe=!1){return function(q,ve){return Bi(Fr(q).getFullYear(),B,ut(ve,Dt.MinusSign),pe)}}const Ue={};function un(B,pe){B=B.replace(/:/g,"");const q=Date.parse("Jan 01, 1970 00:00:00 "+B)/6e4;return isNaN(q)?pe:q}function pt(B){return B instanceof Date&&!isNaN(B.valueOf())}const sn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ds(B){const pe=parseInt(B);if(isNaN(pe))throw new Error("Invalid integer literal when parsing "+B);return pe}function Cs(B,pe){pe=encodeURIComponent(pe);for(const q of B.split(";")){const ve=q.indexOf("="),[qe,nn]=-1==ve?[q,""]:[q.slice(0,ve),q.slice(ve+1)];if(qe.trim()===pe)return decodeURIComponent(nn)}return null}let es=(()=>{class B{constructor(q,ve,qe,nn){this._iterableDiffers=q,this._keyValueDiffers=ve,this._ngEl=qe,this._renderer=nn,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(q){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof q?q.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(q){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof q?q.split(/\s+/):q,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const q=this._iterableDiffer.diff(this._rawClass);q&&this._applyIterableChanges(q)}else if(this._keyValueDiffer){const q=this._keyValueDiffer.diff(this._rawClass);q&&this._applyKeyValueChanges(q)}}_applyKeyValueChanges(q){q.forEachAddedItem(ve=>this._toggleClass(ve.key,ve.currentValue)),q.forEachChangedItem(ve=>this._toggleClass(ve.key,ve.currentValue)),q.forEachRemovedItem(ve=>{ve.previousValue&&this._toggleClass(ve.key,!1)})}_applyIterableChanges(q){q.forEachAddedItem(ve=>{if("string"!=typeof ve.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(ve.item)}`);this._toggleClass(ve.item,!0)}),q.forEachRemovedItem(ve=>this._toggleClass(ve.item,!1))}_applyClasses(q){q&&(Array.isArray(q)||q instanceof Set?q.forEach(ve=>this._toggleClass(ve,!0)):Object.keys(q).forEach(ve=>this._toggleClass(ve,!!q[ve])))}_removeClasses(q){q&&(Array.isArray(q)||q instanceof Set?q.forEach(ve=>this._toggleClass(ve,!1)):Object.keys(q).forEach(ve=>this._toggleClass(ve,!1)))}_toggleClass(q,ve){(q=q.trim())&&q.split(/\s+/g).forEach(qe=>{ve?this._renderer.addClass(this._ngEl.nativeElement,qe):this._renderer.removeClass(this._ngEl.nativeElement,qe)})}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),B})();class $r{constructor(pe,q,ve,qe){this.$implicit=pe,this.ngForOf=q,this.index=ve,this.count=qe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wr=(()=>{class B{constructor(q,ve,qe){this._viewContainer=q,this._template=ve,this._differs=qe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(q){this._ngForOf=q,this._ngForOfDirty=!0}set ngForTrackBy(q){this._trackByFn=q}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(q){q&&(this._template=q)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const q=this._ngForOf;!this._differ&&q&&(this._differ=this._differs.find(q).create(this.ngForTrackBy))}if(this._differ){const q=this._differ.diff(this._ngForOf);q&&this._applyChanges(q)}}_applyChanges(q){const ve=this._viewContainer;q.forEachOperation((qe,nn,Sn)=>{if(null==qe.previousIndex)ve.createEmbeddedView(this._template,new $r(qe.item,this._ngForOf,-1,-1),null===Sn?void 0:Sn);else if(null==Sn)ve.remove(null===nn?void 0:nn);else if(null!==nn){const pr=ve.get(nn);ve.move(pr,Sn),Ir(pr,qe)}});for(let qe=0,nn=ve.length;qe<nn;qe++){const pr=ve.get(qe).context;pr.index=qe,pr.count=nn,pr.ngForOf=this._ngForOf}q.forEachIdentityChange(qe=>{Ir(ve.get(qe.currentIndex),qe)})}static ngTemplateContextGuard(q,ve){return!0}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),B})();function Ir(B,pe){B.context.$implicit=pe.item}let Vr=(()=>{class B{constructor(q,ve){this._viewContainer=q,this._context=new bi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ve}set ngIf(q){this._context.$implicit=this._context.ngIf=q,this._updateView()}set ngIfThen(q){Ws("ngIfThen",q),this._thenTemplateRef=q,this._thenViewRef=null,this._updateView()}set ngIfElse(q){Ws("ngIfElse",q),this._elseTemplateRef=q,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(q,ve){return!0}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.s_b),g.Y36(g.Rgc))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),B})();class bi{constructor(){this.$implicit=null,this.ngIf=null}}function Ws(B,pe){if(pe&&!pe.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,g.AaK)(pe)}'.`)}class Fi{constructor(pe,q){this._viewContainerRef=pe,this._templateRef=q,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(pe){pe&&!this._created?this.create():!pe&&this._created&&this.destroy()}}let fs=(()=>{class B{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(q){this._ngSwitch=q,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(q){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(q)}_matchCase(q){const ve=q==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ve,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ve}_updateDefaultCases(q){if(this._defaultViews&&q!==this._defaultUsed){this._defaultUsed=q;for(let ve=0;ve<this._defaultViews.length;ve++)this._defaultViews[ve].enforceState(q)}}}return B.\u0275fac=function(q){return new(q||B)},B.\u0275dir=g.lG2({type:B,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),B})(),si=(()=>{class B{constructor(q,ve,qe){this.ngSwitch=qe,qe._addCase(),this._view=new Fi(q,ve)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(fs,9))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),B})(),Zr=(()=>{class B{constructor(q,ve,qe){qe._addDefault(new Fi(q,ve))}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(fs,9))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngSwitchDefault",""]]}),B})(),Pi=(()=>{class B{constructor(q,ve,qe){this._ngEl=q,this._differs=ve,this._renderer=qe,this._ngStyle=null,this._differ=null}set ngStyle(q){this._ngStyle=q,!this._differ&&q&&(this._differ=this._differs.find(q).create())}ngDoCheck(){if(this._differ){const q=this._differ.diff(this._ngStyle);q&&this._applyChanges(q)}}_setStyle(q,ve){const[qe,nn]=q.split(".");null!=(ve=null!=ve&&nn?`${ve}${nn}`:ve)?this._renderer.setStyle(this._ngEl.nativeElement,qe,ve):this._renderer.removeStyle(this._ngEl.nativeElement,qe)}_applyChanges(q){q.forEachRemovedItem(ve=>this._setStyle(ve.key,null)),q.forEachAddedItem(ve=>this._setStyle(ve.key,ve.currentValue)),q.forEachChangedItem(ve=>this._setStyle(ve.key,ve.currentValue))}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),B})(),jo=(()=>{class B{constructor(q){this._viewContainerRef=q,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(q){if(q.ngTemplateOutlet){const ve=this._viewContainerRef;this._viewRef&&ve.remove(ve.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?ve.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&q.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.s_b))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[g.TTD]}),B})();function Ts(B,pe){return new g.vHH(2100,"")}class rs{createSubscription(pe,q){return pe.subscribe({next:q,error:ve=>{throw ve}})}dispose(pe){pe.unsubscribe()}onDestroy(pe){pe.unsubscribe()}}class Et{createSubscription(pe,q){return pe.then(q,ve=>{throw ve})}dispose(pe){}onDestroy(pe){}}const ct=new Et,At=new rs;let vn=(()=>{class B{constructor(q){this._ref=q,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(q){return this._obj?q!==this._obj?(this._dispose(),this.transform(q)):this._latestValue:(q&&this._subscribe(q),this._latestValue)}_subscribe(q){this._obj=q,this._strategy=this._selectStrategy(q),this._subscription=this._strategy.createSubscription(q,ve=>this._updateLatestValue(q,ve))}_selectStrategy(q){if((0,g.QGY)(q))return ct;if((0,g.F4k)(q))return At;throw Ts()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(q,ve){q===this._obj&&(this._latestValue=ve,this._ref.markForCheck())}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.sBO,16))},B.\u0275pipe=g.Yjl({name:"async",type:B,pure:!1}),B})();const Di=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ws=(()=>{class B{constructor(q,ve){this.locale=q,this.defaultTimezone=ve}transform(q,ve="mediumDate",qe,nn){var Sn;if(null==q||""===q||q!=q)return null;try{return Xr(q,ve,nn||this.locale,null!==(Sn=null!=qe?qe:this.defaultTimezone)&&void 0!==Sn?Sn:void 0)}catch(pr){throw Ts()}}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.soG,16),g.Y36(Di,24))},B.\u0275pipe=g.Yjl({name:"date",type:B,pure:!0}),B})(),Eo=(()=>{class B{constructor(q){this._locale=q}transform(q,ve,qe){if(!function Os(B){return!(null==B||""===B||B!=B)}(q))return null;qe=qe||this._locale;try{return function Tr(B,pe,q){return function as(B,pe,q,ve,qe,nn,Sn=!1){let pr="",jr=!1;if(isFinite(B)){let ei=function gs(B){let ve,qe,nn,Sn,pr,pe=Math.abs(B)+"",q=0;for((qe=pe.indexOf("."))>-1&&(pe=pe.replace(".","")),(nn=pe.search(/e/i))>0?(qe<0&&(qe=nn),qe+=+pe.slice(nn+1),pe=pe.substring(0,nn)):qe<0&&(qe=pe.length),nn=0;"0"===pe.charAt(nn);nn++);if(nn===(pr=pe.length))ve=[0],qe=1;else{for(pr--;"0"===pe.charAt(pr);)pr--;for(qe-=nn,ve=[],Sn=0;nn<=pr;nn++,Sn++)ve[Sn]=Number(pe.charAt(nn))}return qe>22&&(ve=ve.splice(0,21),q=qe-1,qe=1),{digits:ve,exponent:q,integerLen:qe}}(B);Sn&&(ei=function Ci(B){if(0===B.digits[0])return B;const pe=B.digits.length-B.integerLen;return B.exponent?B.exponent+=2:(0===pe?B.digits.push(0,0):1===pe&&B.digits.push(0),B.integerLen+=2),B}(ei));let ti=pe.minInt,fi=pe.minFrac,Ji=pe.maxFrac;if(nn){const Js=nn.match(sn);if(null===Js)throw new Error(`${nn} is not a valid digit info`);const No=Js[1],fo=Js[3],Co=Js[5];null!=No&&(ti=ds(No)),null!=fo&&(fi=ds(fo)),null!=Co?Ji=ds(Co):null!=fo&&fi>Ji&&(Ji=fi)}!function zi(B,pe,q){if(pe>q)throw new Error(`The minimum number of digits after fraction (${pe}) is higher than the maximum (${q}).`);let ve=B.digits,qe=ve.length-B.integerLen;const nn=Math.min(Math.max(pe,qe),q);let Sn=nn+B.integerLen,pr=ve[Sn];if(Sn>0){ve.splice(Math.max(B.integerLen,Sn));for(let fi=Sn;fi<ve.length;fi++)ve[fi]=0}else{qe=Math.max(0,qe),B.integerLen=1,ve.length=Math.max(1,Sn=nn+1),ve[0]=0;for(let fi=1;fi<Sn;fi++)ve[fi]=0}if(pr>=5)if(Sn-1<0){for(let fi=0;fi>Sn;fi--)ve.unshift(0),B.integerLen++;ve.unshift(1),B.integerLen++}else ve[Sn-1]++;for(;qe<Math.max(0,nn);qe++)ve.push(0);let jr=0!==nn;const ei=pe+B.integerLen,ti=ve.reduceRight(function(fi,Ji,Ni,ki){return ki[Ni]=(Ji+=fi)<10?Ji:Ji-10,jr&&(0===ki[Ni]&&Ni>=ei?ki.pop():jr=!1),Ji>=10?1:0},0);ti&&(ve.unshift(ti),B.integerLen++)}(ei,fi,Ji);let Ni=ei.digits,ki=ei.integerLen;const Ks=ei.exponent;let ns=[];for(jr=Ni.every(Js=>!Js);ki<ti;ki++)Ni.unshift(0);for(;ki<0;ki++)Ni.unshift(0);ki>0?ns=Ni.splice(ki,Ni.length):(ns=Ni,Ni=[0]);const Wr=[];for(Ni.length>=pe.lgSize&&Wr.unshift(Ni.splice(-pe.lgSize,Ni.length).join(""));Ni.length>pe.gSize;)Wr.unshift(Ni.splice(-pe.gSize,Ni.length).join(""));Ni.length&&Wr.unshift(Ni.join("")),pr=Wr.join(ut(q,ve)),ns.length&&(pr+=ut(q,qe)+ns.join("")),Ks&&(pr+=ut(q,Dt.Exponential)+"+"+Ks)}else pr=ut(q,Dt.Infinity);return pr=B<0&&!jr?pe.negPre+pr+pe.negSuf:pe.posPre+pr+pe.posSuf,pr}(B,function hi(B,pe="-"){const q={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},ve=B.split(";"),qe=ve[0],nn=ve[1],Sn=-1!==qe.indexOf(".")?qe.split("."):[qe.substring(0,qe.lastIndexOf("0")+1),qe.substring(qe.lastIndexOf("0")+1)],pr=Sn[0],jr=Sn[1]||"";q.posPre=pr.substr(0,pr.indexOf("#"));for(let ti=0;ti<jr.length;ti++){const fi=jr.charAt(ti);"0"===fi?q.minFrac=q.maxFrac=ti+1:"#"===fi?q.maxFrac=ti+1:q.posSuf+=fi}const ei=pr.split(",");if(q.gSize=ei[1]?ei[1].length:0,q.lgSize=ei[2]||ei[1]?(ei[2]||ei[1]).length:0,nn){const ti=qe.length-q.posPre.length-q.posSuf.length,fi=nn.indexOf("#");q.negPre=nn.substr(0,fi).replace(/'/g,""),q.negSuf=nn.substr(fi+ti).replace(/'/g,"")}else q.negPre=pe+q.posPre,q.negSuf=q.posSuf;return q}(function Qt(B,pe){return(0,g.cg1)(B)[g.wAp.NumberFormats][pe]}(pe,Bt.Decimal),ut(pe,Dt.MinusSign)),pe,Dt.Group,Dt.Decimal,q)}(function qs(B){if("string"==typeof B&&!isNaN(Number(B)-parseFloat(B)))return Number(B);if("number"!=typeof B)throw new Error(`${B} is not a number`);return B}(q),qe,ve)}catch(nn){throw Ts()}}}return B.\u0275fac=function(q){return new(q||B)(g.Y36(g.soG,16))},B.\u0275pipe=g.Yjl({name:"number",type:B,pure:!0}),B})();let Qs=(()=>{class B{}return B.\u0275fac=function(q){return new(q||B)},B.\u0275mod=g.oAB({type:B}),B.\u0275inj=g.cJS({}),B})();const js="browser";function vs(B){return B===js}function Xs(B){return"server"===B}let so=(()=>{class B{}return B.\u0275prov=(0,g.Yz7)({token:B,providedIn:"root",factory:()=>new Hs((0,g.LFG)(ht),window)}),B})();class Hs{constructor(pe,q){this.document=pe,this.window=q,this.offset=()=>[0,0]}setOffset(pe){this.offset=Array.isArray(pe)?()=>pe:pe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(pe){this.supportsScrolling()&&this.window.scrollTo(pe[0],pe[1])}scrollToAnchor(pe){if(!this.supportsScrolling())return;const q=function As(B,pe){const q=B.getElementById(pe)||B.getElementsByName(pe)[0];if(q)return q;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const ve=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let qe=ve.currentNode;for(;qe;){const nn=qe.shadowRoot;if(nn){const Sn=nn.getElementById(pe)||nn.querySelector(`[name="${pe}"]`);if(Sn)return Sn}qe=ve.nextNode()}}return null}(this.document,pe);q&&(this.scrollToElement(q),q.focus())}setHistoryScrollRestoration(pe){if(this.supportScrollRestoration()){const q=this.window.history;q&&q.scrollRestoration&&(q.scrollRestoration=pe)}}scrollToElement(pe){const q=pe.getBoundingClientRect(),ve=q.left+this.window.pageXOffset,qe=q.top+this.window.pageYOffset,nn=this.offset();this.window.scrollTo(ve-nn[0],qe-nn[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const pe=Gs(this.window.history)||Gs(Object.getPrototypeOf(this.window.history));return!(!pe||!pe.writable&&!pe.set)}catch(pe){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(pe){return!1}}}function Gs(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class Ti{}},520:(Zn,It,j)=>{j.d(It,{JF:()=>Rr,TP:()=>Yt,eN:()=>Dt});var g=j(9808),k=j(5e3),he=j(9646),oe=j(8306),je=j(4351),He=j(9300),ht=j(4004);class We{}class at{}class Ne{constructor(nt){this.normalizedNames=new Map,this.lazyUpdate=null,nt?this.lazyInit="string"==typeof nt?()=>{this.headers=new Map,nt.split("\n").forEach(dt=>{const Gt=dt.indexOf(":");if(Gt>0){const tn=dt.slice(0,Gt),bn=tn.toLowerCase(),Yn=dt.slice(Gt+1).trim();this.maybeSetNormalizedName(tn,bn),this.headers.has(bn)?this.headers.get(bn).push(Yn):this.headers.set(bn,[Yn])}})}:()=>{this.headers=new Map,Object.keys(nt).forEach(dt=>{let Gt=nt[dt];const tn=dt.toLowerCase();"string"==typeof Gt&&(Gt=[Gt]),Gt.length>0&&(this.headers.set(tn,Gt),this.maybeSetNormalizedName(dt,tn))})}:this.headers=new Map}has(nt){return this.init(),this.headers.has(nt.toLowerCase())}get(nt){this.init();const dt=this.headers.get(nt.toLowerCase());return dt&&dt.length>0?dt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(nt){return this.init(),this.headers.get(nt.toLowerCase())||null}append(nt,dt){return this.clone({name:nt,value:dt,op:"a"})}set(nt,dt){return this.clone({name:nt,value:dt,op:"s"})}delete(nt,dt){return this.clone({name:nt,value:dt,op:"d"})}maybeSetNormalizedName(nt,dt){this.normalizedNames.has(dt)||this.normalizedNames.set(dt,nt)}init(){this.lazyInit&&(this.lazyInit instanceof Ne?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(nt=>this.applyUpdate(nt)),this.lazyUpdate=null))}copyFrom(nt){nt.init(),Array.from(nt.headers.keys()).forEach(dt=>{this.headers.set(dt,nt.headers.get(dt)),this.normalizedNames.set(dt,nt.normalizedNames.get(dt))})}clone(nt){const dt=new Ne;return dt.lazyInit=this.lazyInit&&this.lazyInit instanceof Ne?this.lazyInit:this,dt.lazyUpdate=(this.lazyUpdate||[]).concat([nt]),dt}applyUpdate(nt){const dt=nt.name.toLowerCase();switch(nt.op){case"a":case"s":let Gt=nt.value;if("string"==typeof Gt&&(Gt=[Gt]),0===Gt.length)return;this.maybeSetNormalizedName(nt.name,dt);const tn=("a"===nt.op?this.headers.get(dt):void 0)||[];tn.push(...Gt),this.headers.set(dt,tn);break;case"d":const bn=nt.value;if(bn){let Yn=this.headers.get(dt);if(!Yn)return;Yn=Yn.filter(Xr=>-1===bn.indexOf(Xr)),0===Yn.length?(this.headers.delete(dt),this.normalizedNames.delete(dt)):this.headers.set(dt,Yn)}else this.headers.delete(dt),this.normalizedNames.delete(dt)}}forEach(nt){this.init(),Array.from(this.normalizedNames.keys()).forEach(dt=>nt(this.normalizedNames.get(dt),this.headers.get(dt)))}}class Pe{encodeKey(nt){return ln(nt)}encodeValue(nt){return ln(nt)}decodeKey(nt){return decodeURIComponent(nt)}decodeValue(nt){return decodeURIComponent(nt)}}const wn=/%(\d[a-f0-9])/gi,_t={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ln(cn){return encodeURIComponent(cn).replace(wn,(nt,dt)=>{var Gt;return null!==(Gt=_t[dt])&&void 0!==Gt?Gt:nt})}function Dn(cn){return`${cn}`}class Nt{constructor(nt={}){if(this.updates=null,this.cloneFrom=null,this.encoder=nt.encoder||new Pe,nt.fromString){if(nt.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function vt(cn,nt){const dt=new Map;return cn.length>0&&cn.replace(/^\?/,"").split("&").forEach(tn=>{const bn=tn.indexOf("="),[Yn,Xr]=-1==bn?[nt.decodeKey(tn),""]:[nt.decodeKey(tn.slice(0,bn)),nt.decodeValue(tn.slice(bn+1))],Br=dt.get(Yn)||[];Br.push(Xr),dt.set(Yn,Br)}),dt}(nt.fromString,this.encoder)}else nt.fromObject?(this.map=new Map,Object.keys(nt.fromObject).forEach(dt=>{const Gt=nt.fromObject[dt];this.map.set(dt,Array.isArray(Gt)?Gt:[Gt])})):this.map=null}has(nt){return this.init(),this.map.has(nt)}get(nt){this.init();const dt=this.map.get(nt);return dt?dt[0]:null}getAll(nt){return this.init(),this.map.get(nt)||null}keys(){return this.init(),Array.from(this.map.keys())}append(nt,dt){return this.clone({param:nt,value:dt,op:"a"})}appendAll(nt){const dt=[];return Object.keys(nt).forEach(Gt=>{const tn=nt[Gt];Array.isArray(tn)?tn.forEach(bn=>{dt.push({param:Gt,value:bn,op:"a"})}):dt.push({param:Gt,value:tn,op:"a"})}),this.clone(dt)}set(nt,dt){return this.clone({param:nt,value:dt,op:"s"})}delete(nt,dt){return this.clone({param:nt,value:dt,op:"d"})}toString(){return this.init(),this.keys().map(nt=>{const dt=this.encoder.encodeKey(nt);return this.map.get(nt).map(Gt=>dt+"="+this.encoder.encodeValue(Gt)).join("&")}).filter(nt=>""!==nt).join("&")}clone(nt){const dt=new Nt({encoder:this.encoder});return dt.cloneFrom=this.cloneFrom||this,dt.updates=(this.updates||[]).concat(nt),dt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(nt=>this.map.set(nt,this.cloneFrom.map.get(nt))),this.updates.forEach(nt=>{switch(nt.op){case"a":case"s":const dt=("a"===nt.op?this.map.get(nt.param):void 0)||[];dt.push(Dn(nt.value)),this.map.set(nt.param,dt);break;case"d":if(void 0===nt.value){this.map.delete(nt.param);break}{let Gt=this.map.get(nt.param)||[];const tn=Gt.indexOf(Dn(nt.value));-1!==tn&&Gt.splice(tn,1),Gt.length>0?this.map.set(nt.param,Gt):this.map.delete(nt.param)}}}),this.cloneFrom=this.updates=null)}}class Un{constructor(){this.map=new Map}set(nt,dt){return this.map.set(nt,dt),this}get(nt){return this.map.has(nt)||this.map.set(nt,nt.defaultValue()),this.map.get(nt)}delete(nt){return this.map.delete(nt),this}has(nt){return this.map.has(nt)}keys(){return this.map.keys()}}function xe(cn){return"undefined"!=typeof ArrayBuffer&&cn instanceof ArrayBuffer}function Ge(cn){return"undefined"!=typeof Blob&&cn instanceof Blob}function wt(cn){return"undefined"!=typeof FormData&&cn instanceof FormData}class Ht{constructor(nt,dt,Gt,tn){let bn;if(this.url=dt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=nt.toUpperCase(),function dn(cn){switch(cn){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||tn?(this.body=void 0!==Gt?Gt:null,bn=tn):bn=Gt,bn&&(this.reportProgress=!!bn.reportProgress,this.withCredentials=!!bn.withCredentials,bn.responseType&&(this.responseType=bn.responseType),bn.headers&&(this.headers=bn.headers),bn.context&&(this.context=bn.context),bn.params&&(this.params=bn.params)),this.headers||(this.headers=new Ne),this.context||(this.context=new Un),this.params){const Yn=this.params.toString();if(0===Yn.length)this.urlWithParams=dt;else{const Xr=dt.indexOf("?");this.urlWithParams=dt+(-1===Xr?"?":Xr<dt.length-1?"&":"")+Yn}}else this.params=new Nt,this.urlWithParams=dt}serializeBody(){return null===this.body?null:xe(this.body)||Ge(this.body)||wt(this.body)||function on(cn){return"undefined"!=typeof URLSearchParams&&cn instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Nt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||wt(this.body)?null:Ge(this.body)?this.body.type||null:xe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Nt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(nt={}){var dt;const Gt=nt.method||this.method,tn=nt.url||this.url,bn=nt.responseType||this.responseType,Yn=void 0!==nt.body?nt.body:this.body,Xr=void 0!==nt.withCredentials?nt.withCredentials:this.withCredentials,Br=void 0!==nt.reportProgress?nt.reportProgress:this.reportProgress;let kr=nt.headers||this.headers,ls=nt.params||this.params;const Bi=null!==(dt=nt.context)&&void 0!==dt?dt:this.context;return void 0!==nt.setHeaders&&(kr=Object.keys(nt.setHeaders).reduce((di,Hn)=>di.set(Hn,nt.setHeaders[Hn]),kr)),nt.setParams&&(ls=Object.keys(nt.setParams).reduce((di,Hn)=>di.set(Hn,nt.setParams[Hn]),ls)),new Ht(Gt,tn,Yn,{params:ls,headers:kr,context:Bi,reportProgress:Br,responseType:bn,withCredentials:Xr})}}var Oe=(()=>((Oe=Oe||{})[Oe.Sent=0]="Sent",Oe[Oe.UploadProgress=1]="UploadProgress",Oe[Oe.ResponseHeader=2]="ResponseHeader",Oe[Oe.DownloadProgress=3]="DownloadProgress",Oe[Oe.Response=4]="Response",Oe[Oe.User=5]="User",Oe))();class Bt{constructor(nt,dt=200,Gt="OK"){this.headers=nt.headers||new Ne,this.status=void 0!==nt.status?nt.status:dt,this.statusText=nt.statusText||Gt,this.url=nt.url||null,this.ok=this.status>=200&&this.status<300}}class Re extends Bt{constructor(nt={}){super(nt),this.type=Oe.ResponseHeader}clone(nt={}){return new Re({headers:nt.headers||this.headers,status:void 0!==nt.status?nt.status:this.status,statusText:nt.statusText||this.statusText,url:nt.url||this.url||void 0})}}class bt extends Bt{constructor(nt={}){super(nt),this.type=Oe.Response,this.body=void 0!==nt.body?nt.body:null}clone(nt={}){return new bt({body:void 0!==nt.body?nt.body:this.body,headers:nt.headers||this.headers,status:void 0!==nt.status?nt.status:this.status,statusText:nt.statusText||this.statusText,url:nt.url||this.url||void 0})}}class Je extends Bt{constructor(nt){super(nt,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${nt.url||"(unknown url)"}`:`Http failure response for ${nt.url||"(unknown url)"}: ${nt.status} ${nt.statusText}`,this.error=nt.error||null}}function Ft(cn,nt){return{body:nt,headers:cn.headers,context:cn.context,observe:cn.observe,params:cn.params,reportProgress:cn.reportProgress,responseType:cn.responseType,withCredentials:cn.withCredentials}}let Dt=(()=>{class cn{constructor(dt){this.handler=dt}request(dt,Gt,tn={}){let bn;if(dt instanceof Ht)bn=dt;else{let Br,kr;Br=tn.headers instanceof Ne?tn.headers:new Ne(tn.headers),tn.params&&(kr=tn.params instanceof Nt?tn.params:new Nt({fromObject:tn.params})),bn=new Ht(dt,Gt,void 0!==tn.body?tn.body:null,{headers:Br,context:tn.context,params:kr,reportProgress:tn.reportProgress,responseType:tn.responseType||"json",withCredentials:tn.withCredentials})}const Yn=(0,he.of)(bn).pipe((0,je.b)(Br=>this.handler.handle(Br)));if(dt instanceof Ht||"events"===tn.observe)return Yn;const Xr=Yn.pipe((0,He.h)(Br=>Br instanceof bt));switch(tn.observe||"body"){case"body":switch(bn.responseType){case"arraybuffer":return Xr.pipe((0,ht.U)(Br=>{if(null!==Br.body&&!(Br.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Br.body}));case"blob":return Xr.pipe((0,ht.U)(Br=>{if(null!==Br.body&&!(Br.body instanceof Blob))throw new Error("Response is not a Blob.");return Br.body}));case"text":return Xr.pipe((0,ht.U)(Br=>{if(null!==Br.body&&"string"!=typeof Br.body)throw new Error("Response is not a string.");return Br.body}));default:return Xr.pipe((0,ht.U)(Br=>Br.body))}case"response":return Xr;default:throw new Error(`Unreachable: unhandled observe type ${tn.observe}}`)}}delete(dt,Gt={}){return this.request("DELETE",dt,Gt)}get(dt,Gt={}){return this.request("GET",dt,Gt)}head(dt,Gt={}){return this.request("HEAD",dt,Gt)}jsonp(dt,Gt){return this.request("JSONP",dt,{params:(new Nt).append(Gt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(dt,Gt={}){return this.request("OPTIONS",dt,Gt)}patch(dt,Gt,tn={}){return this.request("PATCH",dt,Ft(tn,Gt))}post(dt,Gt,tn={}){return this.request("POST",dt,Ft(tn,Gt))}put(dt,Gt,tn={}){return this.request("PUT",dt,Ft(tn,Gt))}}return cn.\u0275fac=function(dt){return new(dt||cn)(k.LFG(We))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})();class Lt{constructor(nt,dt){this.next=nt,this.interceptor=dt}handle(nt){return this.interceptor.intercept(nt,this.next)}}const Yt=new k.OlP("HTTP_INTERCEPTORS");let sr=(()=>{class cn{intercept(dt,Gt){return Gt.handle(dt)}}return cn.\u0275fac=function(dt){return new(dt||cn)},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})();const ut=/^\)\]\}',?\n/;let xt=(()=>{class cn{constructor(dt){this.xhrFactory=dt}handle(dt){if("JSONP"===dt.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new oe.y(Gt=>{const tn=this.xhrFactory.build();if(tn.open(dt.method,dt.urlWithParams),dt.withCredentials&&(tn.withCredentials=!0),dt.headers.forEach((Hn,wi)=>tn.setRequestHeader(Hn,wi.join(","))),dt.headers.has("Accept")||tn.setRequestHeader("Accept","application/json, text/plain, */*"),!dt.headers.has("Content-Type")){const Hn=dt.detectContentTypeHeader();null!==Hn&&tn.setRequestHeader("Content-Type",Hn)}if(dt.responseType){const Hn=dt.responseType.toLowerCase();tn.responseType="json"!==Hn?Hn:"text"}const bn=dt.serializeBody();let Yn=null;const Xr=()=>{if(null!==Yn)return Yn;const Hn=tn.statusText||"OK",wi=new Ne(tn.getAllResponseHeaders()),Dr=function Qt(cn){return"responseURL"in cn&&cn.responseURL?cn.responseURL:/^X-Request-URL:/m.test(cn.getAllResponseHeaders())?cn.getResponseHeader("X-Request-URL"):null}(tn)||dt.url;return Yn=new Re({headers:wi,status:tn.status,statusText:Hn,url:Dr}),Yn},Br=()=>{let{headers:Hn,status:wi,statusText:Dr,url:$i}=Xr(),Fn=null;204!==wi&&(Fn=void 0===tn.response?tn.responseText:tn.response),0===wi&&(wi=Fn?200:0);let zt=wi>=200&&wi<300;if("json"===dt.responseType&&"string"==typeof Fn){const Qn=Fn;Fn=Fn.replace(ut,"");try{Fn=""!==Fn?JSON.parse(Fn):null}catch(yr){Fn=Qn,zt&&(zt=!1,Fn={error:yr,text:Fn})}}zt?(Gt.next(new bt({body:Fn,headers:Hn,status:wi,statusText:Dr,url:$i||void 0})),Gt.complete()):Gt.error(new Je({error:Fn,headers:Hn,status:wi,statusText:Dr,url:$i||void 0}))},kr=Hn=>{const{url:wi}=Xr(),Dr=new Je({error:Hn,status:tn.status||0,statusText:tn.statusText||"Unknown Error",url:wi||void 0});Gt.error(Dr)};let ls=!1;const Bi=Hn=>{ls||(Gt.next(Xr()),ls=!0);let wi={type:Oe.DownloadProgress,loaded:Hn.loaded};Hn.lengthComputable&&(wi.total=Hn.total),"text"===dt.responseType&&!!tn.responseText&&(wi.partialText=tn.responseText),Gt.next(wi)},di=Hn=>{let wi={type:Oe.UploadProgress,loaded:Hn.loaded};Hn.lengthComputable&&(wi.total=Hn.total),Gt.next(wi)};return tn.addEventListener("load",Br),tn.addEventListener("error",kr),tn.addEventListener("timeout",kr),tn.addEventListener("abort",kr),dt.reportProgress&&(tn.addEventListener("progress",Bi),null!==bn&&tn.upload&&tn.upload.addEventListener("progress",di)),tn.send(bn),Gt.next({type:Oe.Sent}),()=>{tn.removeEventListener("error",kr),tn.removeEventListener("abort",kr),tn.removeEventListener("load",Br),tn.removeEventListener("timeout",kr),dt.reportProgress&&(tn.removeEventListener("progress",Bi),null!==bn&&tn.upload&&tn.upload.removeEventListener("progress",di)),tn.readyState!==tn.DONE&&tn.abort()}})}}return cn.\u0275fac=function(dt){return new(dt||cn)(k.LFG(g.JF))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})();const en=new k.OlP("XSRF_COOKIE_NAME"),Wn=new k.OlP("XSRF_HEADER_NAME");class or{}let dr=(()=>{class cn{constructor(dt,Gt,tn){this.doc=dt,this.platform=Gt,this.cookieName=tn,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const dt=this.doc.cookie||"";return dt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,g.Mx)(dt,this.cookieName),this.lastCookieString=dt),this.lastToken}}return cn.\u0275fac=function(dt){return new(dt||cn)(k.LFG(g.K0),k.LFG(k.Lbi),k.LFG(en))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})(),Yr=(()=>{class cn{constructor(dt,Gt){this.tokenService=dt,this.headerName=Gt}intercept(dt,Gt){const tn=dt.url.toLowerCase();if("GET"===dt.method||"HEAD"===dt.method||tn.startsWith("http://")||tn.startsWith("https://"))return Gt.handle(dt);const bn=this.tokenService.getToken();return null!==bn&&!dt.headers.has(this.headerName)&&(dt=dt.clone({headers:dt.headers.set(this.headerName,bn)})),Gt.handle(dt)}}return cn.\u0275fac=function(dt){return new(dt||cn)(k.LFG(or),k.LFG(Wn))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})(),ii=(()=>{class cn{constructor(dt,Gt){this.backend=dt,this.injector=Gt,this.chain=null}handle(dt){if(null===this.chain){const Gt=this.injector.get(Yt,[]);this.chain=Gt.reduceRight((tn,bn)=>new Lt(tn,bn),this.backend)}return this.chain.handle(dt)}}return cn.\u0275fac=function(dt){return new(dt||cn)(k.LFG(at),k.LFG(k.zs3))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})(),Mr=(()=>{class cn{static disable(){return{ngModule:cn,providers:[{provide:Yr,useClass:sr}]}}static withOptions(dt={}){return{ngModule:cn,providers:[dt.cookieName?{provide:en,useValue:dt.cookieName}:[],dt.headerName?{provide:Wn,useValue:dt.headerName}:[]]}}}return cn.\u0275fac=function(dt){return new(dt||cn)},cn.\u0275mod=k.oAB({type:cn}),cn.\u0275inj=k.cJS({providers:[Yr,{provide:Yt,useExisting:Yr,multi:!0},{provide:or,useClass:dr},{provide:en,useValue:"XSRF-TOKEN"},{provide:Wn,useValue:"X-XSRF-TOKEN"}]}),cn})(),Rr=(()=>{class cn{}return cn.\u0275fac=function(dt){return new(dt||cn)},cn.\u0275mod=k.oAB({type:cn}),cn.\u0275inj=k.cJS({providers:[Dt,{provide:We,useClass:ii},xt,{provide:at,useExisting:xt}],imports:[[Mr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),cn})()},5e3:(Zn,It,j)=>{j.d(It,{$8M:()=>ir,$Z:()=>Mf,AFp:()=>UE,ALo:()=>oE,AaK:()=>We,Akn:()=>Zl,AsE:()=>Iy,BQk:()=>Vu,CHM:()=>ee,CRH:()=>yE,CZH:()=>qv,CqO:()=>yg,DdM:()=>Y0,EJc:()=>Ib,EiD:()=>Va,EpF:()=>uy,F$t:()=>fy,F4k:()=>cy,FYo:()=>$0,FiY:()=>vi,G48:()=>Kb,Gf:()=>gE,GfV:()=>j0,Gpc:()=>Pe,Hsn:()=>So,JOm:()=>p,JVY:()=>gl,L6k:()=>Dc,LAX:()=>ru,LFG:()=>de,LSH:()=>Mu,Lbi:()=>bb,MAs:()=>sg,NdJ:()=>_g,O4$:()=>Mn,OlP:()=>uo,Oqu:()=>Ec,PXZ:()=>Bb,Q6J:()=>Ch,QGY:()=>mg,Qsj:()=>IC,R0b:()=>Hu,RDi:()=>Gs,Rgc:()=>Xg,SBq:()=>Kg,Sil:()=>Db,Suo:()=>mE,TTD:()=>Os,TgZ:()=>Ud,Tol:()=>Ff,Udp:()=>Sh,VKq:()=>Q0,VLi:()=>Lb,W1O:()=>CE,WLB:()=>X0,X6Q:()=>qb,XFs:()=>er,Xpm:()=>Fr,Y36:()=>Vd,YKP:()=>W0,YNc:()=>rg,Yjl:()=>Ae,Yz7:()=>Ot,ZZ4:()=>l0,_Bn:()=>V0,_UZ:()=>Bd,_Vd:()=>o_,_c5:()=>cT,_uU:()=>wy,aQg:()=>u0,c2e:()=>Tb,cJS:()=>St,cg1:()=>Gy,d8E:()=>kg,dDg:()=>zE,deG:()=>sa,dqk:()=>kr,eBb:()=>nu,eFA:()=>KE,ekj:()=>wg,evT:()=>Lc,g9A:()=>$E,h0i:()=>Yf,hGG:()=>dT,hij:()=>Mg,iGM:()=>pE,ifc:()=>tn,ip1:()=>VE,kEZ:()=>J0,kL8:()=>zy,kcU:()=>vr,l5B:()=>eE,lG2:()=>Me,lcZ:()=>aE,mCW:()=>Fa,n5z:()=>Do,oAB:()=>un,oJD:()=>rl,oxw:()=>Nf,pB0:()=>Qu,q3G:()=>co,q4F:()=>H0,qLn:()=>Ra,qOj:()=>Yp,qZA:()=>Th,qzn:()=>Gl,sBO:()=>Zb,sIi:()=>Yc,s_b:()=>u_,soG:()=>Zv,tBr:()=>qi,tb:()=>jE,tp0:()=>ni,uIk:()=>_h,vHH:()=>ln,vpe:()=>wc,wAp:()=>Oi,xi3:()=>lE,xp6:()=>um,yhl:()=>tu,ynx:()=>wh,z2F:()=>t0,z3N:()=>Ea,zSh:()=>df,zs3:()=>Ol});var g=j(7579),k=j(727),he=j(8306),oe=j(6451),je=j(3099);function He(n){for(let r in n)if(n[r]===He)return r;throw Error("Could not find renamed property on target object.")}function ht(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function We(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(We).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function at(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Ne=He({__forward_ref__:He});function Pe(n){return n.__forward_ref__=Pe,n.toString=function(){return We(this())},n}function vt(n){return wn(n)?n():n}function wn(n){return"function"==typeof n&&n.hasOwnProperty(Ne)&&n.__forward_ref__===Pe}class ln extends Error{constructor(r,o){super(function Dn(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,o)),this.code=r}}function Nt(n){return"string"==typeof n?n:null==n?"":String(n)}function Jt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Nt(n)}function Ge(n,r){const o=r?` in ${r}`:"";throw new ln(-201,`No provider for ${Jt(n)} found${o}`)}function lr(n,r){null==n&&function yn(n,r,o,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Ot(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function ut(n){return Qt(n,or)||Qt(n,Yr)}function Qt(n,r){return n.hasOwnProperty(r)?n[r]:null}function Wn(n){return n&&(n.hasOwnProperty(dr)||n.hasOwnProperty(ii))?n[dr]:null}const or=He({\u0275prov:He}),dr=He({\u0275inj:He}),Yr=He({ngInjectableDef:He}),ii=He({ngInjectorDef:He});var er=(()=>((er=er||{})[er.Default=0]="Default",er[er.Host=1]="Host",er[er.Self=2]="Self",er[er.SkipSelf=4]="SkipSelf",er[er.Optional=8]="Optional",er))();let Gr;function Rr(n){const r=Gr;return Gr=n,r}function is(n,r,o){const a=ut(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&er.Optional?null:void 0!==r?r:void Ge(We(n),"Injector")}function cn(n){return{toString:n}.toString()}var nt=(()=>((nt=nt||{})[nt.OnPush=0]="OnPush",nt[nt.Default=1]="Default",nt))(),tn=(()=>{return(n=tn||(tn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",tn;var n})();const bn="undefined"!=typeof globalThis&&globalThis,Yn="undefined"!=typeof window&&window,Xr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kr=bn||"undefined"!=typeof global&&global||Yn||Xr,di={},Hn=[],wi=He({\u0275cmp:He}),Dr=He({\u0275dir:He}),$i=He({\u0275pipe:He}),Fn=He({\u0275mod:He}),zt=He({\u0275fac:He}),Qn=He({__NG_ELEMENT_ID__:He});let yr=0;function Fr(n){return cn(()=>{const o={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===nt.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Hn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||tn.Emulated,id:"c",styles:n.styles||Hn,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,_=n.features,w=n.pipes;return a.id+=yr++,a.inputs=Be(n.inputs,o),a.outputs=Be(n.outputs),_&&_.forEach(N=>N(a)),a.directiveDefs=h?()=>("function"==typeof h?h():h).map(Xe):null,a.pipeDefs=w?()=>("function"==typeof w?w():w).map(Ue):null,a})}function Xe(n){return pt(n)||function sn(n){return n[Dr]||null}(n)}function Ue(n){return function _r(n){return n[$i]||null}(n)}const ft={};function un(n){return cn(()=>{const r={type:n.type,bootstrap:n.bootstrap||Hn,declarations:n.declarations||Hn,imports:n.imports||Hn,exports:n.exports||Hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ft[n.id]=n.type),r})}function Be(n,r){if(null==n)return di;const o={};for(const a in n)if(n.hasOwnProperty(a)){let h=n[a],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),o[h]=a,r&&(r[h]=_)}return o}const Me=Fr;function Ae(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function pt(n){return n[wi]||null}function Jn(n,r){const o=n[Fn]||null;if(!o&&!0===r)throw new Error(`Type ${We(n)} does not have '\u0275mod' property.`);return o}function fs(n){return Array.isArray(n)&&"object"==typeof n[1]}function si(n){return Array.isArray(n)&&!0===n[1]}function Zr(n){return 0!=(8&n.flags)}function ji(n){return 2==(2&n.flags)}function bs(n){return 1==(1&n.flags)}function ys(n){return null!==n.template}function Pi(n){return 0!=(512&n[2])}function Li(n,r){return n.hasOwnProperty(zt)?n[zt]:null}class $s{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Os(){return qs}function qs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Lo),Ds}function Ds(){const n=js(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===di)n.previous=r;else for(let a in r)o[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Lo(n,r,o,a){const h=js(n)||function ks(n,r){return n[Qs]=r}(n,{previous:di,current:null}),_=h.current||(h.current={}),w=h.previous,N=this.declaredInputs[o],V=w[N];_[N]=new $s(V&&V.currentValue,r,w===di),n[a]=r}Os.ngInherit=!0;const Qs="__ngSimpleChanges__";function js(n){return n[Qs]||null}let Hs;function Gs(n){Hs=n}function As(){return void 0!==Hs?Hs:"undefined"!=typeof document?document:void 0}function Ti(n){return!!n.listen}const B={createRenderer:(n,r)=>As()};function q(n){for(;Array.isArray(n);)n=n[0];return n}function nn(n,r){return q(r[n])}function Sn(n,r){return q(r[n.index])}function jr(n,r){return n.data[r]}function ei(n,r){return n[r]}function ti(n,r){const o=r[n];return fs(o)?o:o[0]}function fi(n){return 4==(4&n[2])}function Ji(n){return 128==(128&n[2])}function ki(n,r){return null==r?null:n[r]}function Ks(n){n[18]=0}function ns(n,r){n[5]+=r;let o=n,a=n[3];for(;null!==a&&(1===r&&1===o[5]||-1===r&&0===o[5]);)a[5]+=r,o=a,a=a[3]}const Wr={lFrame:tt(null),bindingsEnabled:!0};function G(){return Wr.bindingsEnabled}function Qe(){return Wr.lFrame.lView}function Nn(){return Wr.lFrame.tView}function ee(n){return Wr.lFrame.contextLView=n,n[8]}function K(){let n=be();for(;null!==n&&64===n.type;)n=n.parent;return n}function be(){return Wr.lFrame.currentTNode}function rt(n,r){const o=Wr.lFrame;o.currentTNode=n,o.isParent=r}function Kt(){return Wr.lFrame.isParent}function xn(){Wr.lFrame.isParent=!1}function pi(){const n=Wr.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function l(){return Wr.lFrame.bindingIndex++}function A(n){const r=Wr.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function z(n,r){const o=Wr.lFrame;o.bindingIndex=o.bindingRootIndex=n,ge(r)}function ge(n){Wr.lFrame.currentDirectiveIndex=n}function we(n){const r=Wr.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function ae(){return Wr.lFrame.currentQueryIndex}function me(n){Wr.lFrame.currentQueryIndex=n}function ce(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function ue(n,r,o){if(o&er.SkipSelf){let h=r,_=n;for(;!(h=h.parent,null!==h||o&er.Host||(h=ce(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;r=h,n=_}const a=Wr.lFrame=ze();return a.currentTNode=r,a.lView=n,!0}function Te(n){const r=ze(),o=n[1];Wr.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function ze(){const n=Wr.lFrame,r=null===n?null:n.child;return null===r?tt(n):r}function tt(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function De(){const n=Wr.lFrame;return Wr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Fe=De;function yt(){const n=De();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function En(){return Wr.lFrame.selectedIndex}function An(n){Wr.lFrame.selectedIndex=n}function mn(){const n=Wr.lFrame;return jr(n.tView,n.selectedIndex)}function Mn(){Wr.lFrame.currentNamespace="svg"}function vr(){!function Ln(){Wr.lFrame.currentNamespace=null}()}function hn(n,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const _=n.data[o].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:N,ngAfterViewInit:V,ngAfterViewChecked:ie,ngOnDestroy:fe}=_;w&&(n.contentHooks||(n.contentHooks=[])).push(-o,w),N&&((n.contentHooks||(n.contentHooks=[])).push(o,N),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,N)),V&&(n.viewHooks||(n.viewHooks=[])).push(-o,V),ie&&((n.viewHooks||(n.viewHooks=[])).push(o,ie),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,ie)),null!=fe&&(n.destroyHooks||(n.destroyHooks=[])).push(o,fe)}}function cr(n,r,o){hr(n,r,3,o)}function ur(n,r,o,a){(3&n[2])===o&&hr(n,r,o,a)}function Wt(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function hr(n,r,o,a){const _=null!=a?a:-1,w=r.length-1;let N=0;for(let V=void 0!==a?65535&n[18]:0;V<w;V++)if("number"==typeof r[V+1]){if(N=r[V],null!=a&&N>=a)break}else r[V]<0&&(n[18]+=65536),(N<_||-1==_)&&(tr(n,o,r,V),n[18]=(4294901760&n[18])+V+2),V++}function tr(n,r,o,a){const h=o[a]<0,_=o[a+1],N=n[h?-o[a]:o[a]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{_.call(N)}finally{}}}else try{_.call(N)}finally{}}class xi{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function Ce(n,r,o){const a=Ti(n);let h=0;for(;h<o.length;){const _=o[h];if("number"==typeof _){if(0!==_)break;h++;const w=o[h++],N=o[h++],V=o[h++];a?n.setAttribute(r,N,V,w):r.setAttributeNS(w,N,V)}else{const w=_,N=o[++h];Ke(w)?a&&n.setProperty(r,w,N):a?n.setAttribute(r,w,N):r.setAttribute(w,N),h++}}return h}function Ze(n){return 3===n||4===n||6===n}function Ke(n){return 64===n.charCodeAt(0)}function Tt(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const h=r[a];"number"==typeof h?o=h:0===o||fn(n,o,h,null,-1===o||2===o?r[++a]:null)}}return n}function fn(n,r,o,a,h){let _=0,w=n.length;if(-1===r)w=-1;else for(;_<n.length;){const N=n[_++];if("number"==typeof N){if(N===r){w=-1;break}if(N>r){w=_-1;break}}}for(;_<n.length;){const N=n[_];if("number"==typeof N)break;if(N===o){if(null===a)return void(null!==h&&(n[_+1]=h));if(a===n[_+1])return void(n[_+2]=h)}_++,null!==a&&_++,null!==h&&_++}-1!==w&&(n.splice(w,0,r),_=w+1),n.splice(_++,0,o),null!==a&&n.splice(_++,0,a),null!==h&&n.splice(_++,0,h)}function Pt(n){return-1!==n}function rr(n){return 32767&n}function mi(n,r){let o=function Cr(n){return n>>16}(n),a=r;for(;o>0;)a=a[15],o--;return a}let In=!0;function Bn(n){const r=In;return In=n,r}let Cn=0;function bo(n,r){const o=O(n,r);if(-1!==o)return o;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Uo(a.data,n),Uo(r,null),Uo(a.blueprint,null));const h=M(n,r),_=n.injectorIndex;if(Pt(h)){const w=rr(h),N=mi(h,r),V=N[1].data;for(let ie=0;ie<8;ie++)r[_+ie]=N[w+ie]|V[w+ie]}return r[_+8]=h,_}function Uo(n,r){n.push(0,0,0,0,0,0,0,0,r)}function O(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function M(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,a=null,h=r;for(;null!==h;){const _=h[1],w=_.type;if(a=2===w?_.declTNode:1===w?h[6]:null,null===a)return-1;if(o++,h=h[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function S(n,r,o){!function Qi(n,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(Qn)&&(a=o[Qn]),null==a&&(a=o[Qn]=Cn++);const h=255&a;r.data[n+(h>>5)]|=1<<h}(n,r,o)}function ne(n,r,o){if(o&er.Optional)return n;Ge(r,"NodeInjector")}function _e(n,r,o,a){if(o&er.Optional&&void 0===a&&(a=null),0==(o&(er.Self|er.Host))){const h=n[9],_=Rr(void 0);try{return h?h.get(r,a,o&er.Optional):is(r,a,o&er.Optional)}finally{Rr(_)}}return ne(a,r,o)}function Ve(n,r,o,a=er.Default,h){if(null!==n){const _=function ar(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Qn)?n[Qn]:void 0;return"number"==typeof r?r>=0?255&r:pn:r}(o);if("function"==typeof _){if(!ue(r,n,a))return a&er.Host?ne(h,o,a):_e(r,o,a,h);try{const w=_(a);if(null!=w||a&er.Optional)return w;Ge(o)}finally{Fe()}}else if("number"==typeof _){let w=null,N=O(n,r),V=-1,ie=a&er.Host?r[16][6]:null;for((-1===N||a&er.SkipSelf)&&(V=-1===N?M(n,r):r[N+8],-1!==V&&Ls(a,!1)?(w=r[1],N=rr(V),r=mi(V,r)):N=-1);-1!==N;){const fe=r[1];if(Vn(_,N,fe.data)){const Le=kt(N,r,o,w,a,ie);if(Le!==ot)return Le}V=r[N+8],-1!==V&&Ls(a,r[1].data[N+8]===ie)&&Vn(_,N,r)?(w=fe,N=rr(V),r=mi(V,r)):N=-1}}}return _e(r,o,a,h)}const ot={};function pn(){return new Pr(K(),Qe())}function kt(n,r,o,a,h,_){const w=r[1],N=w.data[n+8],fe=qn(N,w,o,null==a?ji(N)&&In:a!=w&&0!=(3&N.type),h&er.Host&&_===N);return null!==fe?On(r,w,fe,N):ot}function qn(n,r,o,a,h){const _=n.providerIndexes,w=r.data,N=1048575&_,V=n.directiveStart,fe=_>>20,gt=h?N+fe:n.directiveEnd;for(let $t=a?N:N+fe;$t<gt;$t++){const Pn=w[$t];if($t<V&&o===Pn||$t>=V&&Pn.type===o)return $t}if(h){const $t=w[V];if($t&&ys($t)&&$t.type===o)return V}return null}function On(n,r,o,a){let h=n[o];const _=r.data;if(function Zs(n){return n instanceof xi}(h)){const w=h;w.resolving&&function Un(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ln(-200,`Circular dependency in DI detected for ${n}${o}`)}(Jt(_[o]));const N=Bn(w.canSeeViewProviders);w.resolving=!0;const V=w.injectImpl?Rr(w.injectImpl):null;ue(n,a,er.Default);try{h=n[o]=w.factory(void 0,_,n,a),r.firstCreatePass&&o>=a.directiveStart&&function Rt(n,r,o){const{ngOnChanges:a,ngOnInit:h,ngDoCheck:_}=r.type.prototype;if(a){const w=qs(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,w),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,w)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),_&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,_))}(o,_[o],r)}finally{null!==V&&Rr(V),Bn(N),w.resolving=!1,Fe()}}return h}function Vn(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Ls(n,r){return!(n&er.Self||n&er.Host&&r)}class Pr{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return Ve(this._tNode,this._lView,r,a,o)}}function Do(n){return cn(()=>{const r=n.prototype.constructor,o=r[zt]||yi(r),a=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==a;){const _=h[zt]||yi(h);if(_&&_!==o)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function yi(n){return wn(n)?()=>{const r=yi(vt(n));return r&&r()}:Li(n)}function ir(n){return function W(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const a=o.length;let h=0;for(;h<a;){const _=o[h];if(Ze(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<a&&"string"==typeof o[h];)h++;else{if(_===r)return o[h+1];h+=2}}}return null}(K(),n)}const Ys="__parameters__";function va(n,r,o){return cn(()=>{const a=function da(n){return function(...o){if(n){const a=n(...o);for(const h in a)this[h]=a[h]}}}(r);function h(..._){if(this instanceof h)return a.apply(this,_),this;const w=new h(..._);return N.annotation=w,N;function N(V,ie,fe){const Le=V.hasOwnProperty(Ys)?V[Ys]:Object.defineProperty(V,Ys,{value:[]})[Ys];for(;Le.length<=fe;)Le.push(null);return(Le[fe]=Le[fe]||[]).push(w),V}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class uo{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Ot({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sa=new uo("AnalyzeForEntryComponents");function Ao(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let a=n[o];Array.isArray(a)?(r===n&&(r=n.slice(0,o)),Ao(a,r)):r!==n&&r.push(a)}return r}function Jo(n,r){n.forEach(o=>Array.isArray(o)?Jo(o,r):r(o))}function Jl(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function _u(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function go(n,r){const o=[];for(let a=0;a<n;a++)o.push(r);return o}function mo(n,r,o){let a=ja(n,r);return a>=0?n[1|a]=o:(a=~a,function Dl(n,r,o,a){let h=n.length;if(h==r)n.push(o,a);else if(1===h)n.push(a,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=o,n[r+1]=a}}(n,a,r,o)),a}function Ja(n,r){const o=ja(n,r);if(o>=0)return n[1|o]}function ja(n,r){return function Ha(n,r,o){let a=0,h=n.length>>o;for(;h!==a;){const _=a+(h-a>>1),w=n[_<<o];if(r===w)return _<<o;w>r?h=_:a=_+1}return~(h<<o)}(n,r,1)}const ao={},za="__NG_DI_FLAG__",wo="ngTempTokenPath",fl=/\n/gm,Da="__source",Ul=He({provide:String,useValue:He});let Na;function U(n){const r=Na;return Na=n,r}function Q(n,r=er.Default){if(void 0===Na)throw new ln(203,"");return null===Na?is(n,void 0,r):Na.get(n,r&er.Optional?null:void 0,r)}function de(n,r=er.Default){return(function Mr(){return Gr}()||Q)(vt(n),r)}const Mt=de;function Zt(n){const r=[];for(let o=0;o<n.length;o++){const a=vt(n[o]);if(Array.isArray(a)){if(0===a.length)throw new ln(900,"");let h,_=er.Default;for(let w=0;w<a.length;w++){const N=a[w],V=Ur(N);"number"==typeof V?-1===V?h=N.token:_|=V:h=N}r.push(de(h,_))}else r.push(de(a))}return r}function $n(n,r){return n[za]=r,n.prototype[za]=r,n}function Ur(n){return n[za]}const qi=$n(va("Inject",n=>({token:n})),-1),vi=$n(va("Optional"),8),ni=$n(va("SkipSelf"),4);let Mo,$l;function to(n){var r;return(null===(r=function qu(){if(void 0===Mo&&(Mo=null,kr.trustedTypes))try{Mo=kr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Mo}())||void 0===r?void 0:r.createHTML(n))||n}function zo(n){var r;return(null===(r=function pl(){if(void 0===$l&&($l=null,kr.trustedTypes))try{$l=kr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return $l}())||void 0===r?void 0:r.createHTML(n))||n}class Rs{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Zu extends Rs{getTypeName(){return"HTML"}}class eu extends Rs{getTypeName(){return"Style"}}class jl extends Rs{getTypeName(){return"Script"}}class Hl extends Rs{getTypeName(){return"URL"}}class Yu extends Rs{getTypeName(){return"ResourceURL"}}function Ea(n){return n instanceof Rs?n.changingThisBreaksApplicationSecurity:n}function Gl(n,r){const o=tu(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}function tu(n){return n instanceof Rs&&n.getTypeName()||null}function gl(n){return new Zu(n)}function Dc(n){return new eu(n)}function nu(n){return new jl(n)}function ru(n){return new Hl(n)}function Qu(n){return new Yu(n)}class ml{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const o=(new window.DOMParser).parseFromString(to(r),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(r):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Ca{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const a=this.inertDocument.createElement("body");o.appendChild(a)}}getInertBodyElement(r){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=to(r),o;const a=this.inertDocument.createElement("body");return a.innerHTML=to(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const o=r.attributes;for(let h=o.length-1;0<h;h--){const w=o.item(h).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&r.removeAttribute(w)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const bu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Tu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Fa(n){return(n=String(n)).match(bu)||n.match(Tu)?n:"unsafe:"+n}function La(n){const r={};for(const o of n.split(","))r[o]=!0;return r}function xa(...n){const r={};for(const o of n)for(const a in o)o.hasOwnProperty(a)&&(r[a]=!0);return r}const Ju=La("area,br,col,hr,img,wbr"),wu=La("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zl=La("rp,rt"),Iu=xa(Ju,xa(wu,La("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xa(zl,La("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xa(zl,wu)),Su=La("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Du=La("srcset"),ec=xa(Su,Du,La("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),La("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_l=La("script,style,template");class hd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let o=r.firstChild,a=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?a=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,a&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let h=this.checkClobberedElement(o,o.nextSibling);if(h){o=h;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(r){const o=r.nodeName.toLowerCase();if(!Iu.hasOwnProperty(o))return this.sanitizedSomething=!0,!_l.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const a=r.attributes;for(let h=0;h<a.length;h++){const _=a.item(h),w=_.name,N=w.toLowerCase();if(!ec.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let V=_.value;Su[N]&&(V=Fa(V)),Du[N]&&(n=V,V=(n=String(n)).split(",").map(r=>Fa(r.trim())).join(", ")),this.buf.push(" ",w,'="',qa(V),'"')}var n;return this.buf.push(">"),!0}endElement(r){const o=r.nodeName.toLowerCase();Iu.hasOwnProperty(o)&&!Ju.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(r){this.buf.push(qa(r))}checkClobberedElement(r,o){if(o&&(r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return o}}const Wo=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xu=/([^\#-~ |!])/g;function qa(n){return n.replace(/&/g,"&amp;").replace(Wo,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(xu,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ma;function Va(n,r){let o=null;try{Ma=Ma||function iu(n){const r=new Ca(n);return function fa(){try{return!!(new window.DOMParser).parseFromString(to(""),"text/html")}catch(n){return!1}}()?new ml(r):r}(n);let a=r?String(r):"";o=Ma.getInertBodyElement(a);let h=5,_=a;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,a=_,_=o.innerHTML,o=Ma.getInertBodyElement(a)}while(a!==_);return to((new hd).sanitizeChildren(vl(o)||o))}finally{if(o){const a=vl(o)||o;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function vl(n){return"content"in n&&function ro(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var co=(()=>((co=co||{})[co.NONE=0]="NONE",co[co.HTML=1]="HTML",co[co.STYLE=2]="STYLE",co[co.SCRIPT=3]="SCRIPT",co[co.URL=4]="URL",co[co.RESOURCE_URL=5]="RESOURCE_URL",co))();function rl(n){const r=qo();return r?zo(r.sanitize(co.HTML,n)||""):Gl(n,"HTML")?zo(Ea(n)):Va(As(),Nt(n))}function Mu(n){const r=qo();return r?r.sanitize(co.URL,n)||"":Gl(n,"URL")?Ea(n):Fa(Nt(n))}function qo(){const n=Qe();return n&&n[12]}const ms="__ngContext__";function ua(n,r){n[ms]=r}function il(n){const r=function au(n){return n[ms]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function uu(n){return n.ngOriginalError}function Ou(n,...r){n.error(...r)}class Ra{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r),a=function Nu(n){return n&&n.ngErrorLogger||Ou}(r);a(this._console,"ERROR",r),o&&a(this._console,"ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&uu(r);for(;o&&uu(o);)o=uu(o);return o||null}}const ol=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kr))();function Lc(n){return n.ownerDocument}function Ka(n){return n instanceof Function?n():n}var p=(()=>((p=p||{})[p.Important=1]="Important",p[p.DashCase=2]="DashCase",p))();function D(n,r){return undefined(n,r)}function Ct(n){const r=n[3];return si(r)?r[3]:r}function Or(n){return ai(n[13])}function Ei(n){return ai(n[4])}function ai(n){for(;null!==n&&!si(n);)n=n[4];return n}function f(n,r,o,a,h){if(null!=a){let _,w=!1;si(a)?_=a:fs(a)&&(w=!0,a=a[0]);const N=q(a);0===n&&null!==o?null==h?Lh(r,o,N):Wl(r,o,N,h||null,!0):1===n&&null!==o?Wl(r,o,N,h||null,!0):2===n?function np(n,r,o){const a=Vh(n,r);a&&function g_(n,r,o,a){Ti(n)?n.removeChild(r,o,a):r.removeChild(o)}(n,a,r,o)}(r,N,w):3===n&&r.destroyNode(N),null!=_&&function ip(n,r,o,a,h){const _=o[7];_!==q(o)&&f(r,n,a,_,h);for(let N=10;N<o.length;N++){const V=o[N];Xd(V[1],V,n,r,a,_)}}(r,n,_,o,h)}}function x(n,r,o){if(Ti(n))return n.createElement(r,o);{const a=null!==o?function so(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(o):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Tn(n,r){const o=n[9],a=o.indexOf(r),h=r[3];1024&r[2]&&(r[2]&=-1025,ns(h,-1)),o.splice(a,1)}function Rn(n,r){if(n.length<=10)return;const o=10+r,a=n[o];if(a){const h=a[17];null!==h&&h!==n&&Tn(h,a),r>0&&(n[o-1][4]=a[4]);const _=_u(n,10+r);!function H(n,r){Xd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const w=_[19];null!==w&&w.detachView(_[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Er(n,r){if(!(256&r[2])){const o=r[11];Ti(o)&&o.destroyNode&&Xd(n,r,o,3,null,null),function Ye(n){let r=n[13];if(!r)return ui(n[1],n);for(;r;){let o=null;if(fs(r))o=r[13];else{const a=r[10];a&&(o=a)}if(!o){for(;r&&!r[4]&&r!==n;)fs(r)&&ui(r[1],r),r=r[3];null===r&&(r=n),fs(r)&&ui(r[1],r),o=r&&r[4]}r=o}}(r)}}function ui(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function ca(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let a=0;a<o.length;a+=2){const h=r[o[a]];if(!(h instanceof xi)){const _=o[a+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const N=h[_[w]],V=_[w+1];try{V.call(N)}finally{}}else try{_.call(h)}finally{}}}}(n,r),function xs(n,r){const o=n.cleanup,a=r[7];let h=-1;if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const w=o[_+1],N="function"==typeof w?w(r):q(r[w]),V=a[h=o[_+2]],ie=o[_+3];"boolean"==typeof ie?N.removeEventListener(o[_],V,ie):ie>=0?a[h=ie]():a[h=-ie].unsubscribe(),_+=2}else{const w=a[h=o[_+1]];o[_].call(w)}if(null!==a){for(let _=h+1;_<a.length;_++)a[_]();r[7]=null}}(n,r),1===r[1].type&&Ti(r[11])&&r[11].destroy();const o=r[17];if(null!==o&&si(r[3])){o!==r[3]&&Tn(o,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fu(n,r,o){return function Uc(n,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[0];if(2&a.flags){const h=n.data[a.directiveStart].encapsulation;if(h===tn.None||h===tn.Emulated)return null}return Sn(a,o)}(n,r.parent,o)}function Wl(n,r,o,a,h){Ti(n)?n.insertBefore(r,o,a,h):r.insertBefore(o,a,h)}function Lh(n,r,o){Ti(n)?n.appendChild(r,o):r.appendChild(o)}function em(n,r,o,a,h){null!==a?Wl(n,r,o,a,h):Lh(n,r,o)}function Vh(n,r){return Ti(n)?n.parentNode(r):r.parentNode}function tm(n,r,o){return rm(n,r,o)}let rm=function nm(n,r,o){return 40&n.type?Sn(n,o):null};function Uh(n,r,o,a){const h=Fu(n,a,r),_=r[11],N=tm(a.parent||r[6],a,r);if(null!=h)if(Array.isArray(o))for(let V=0;V<o.length;V++)em(_,h,o[V],N,!1);else em(_,h,o,N,!1)}function Bh(n,r){if(null!==r){const o=r.type;if(3&o)return Sn(r,n);if(4&o)return tp(-1,n[r.index]);if(8&o){const a=r.child;if(null!==a)return Bh(n,a);{const h=n[r.index];return si(h)?tp(-1,h):q(h)}}if(32&o)return D(r,n)()||q(n[r.index]);{const a=ep(n,r);return null!==a?Array.isArray(a)?a[0]:Bh(Ct(n[16]),a):Bh(n,r.next)}}return null}function ep(n,r){return null!==r?n[16][6].projection[r.projection]:null}function tp(n,r){const o=10+n+1;if(o<r.length){const a=r[o],h=a[1].firstChild;if(null!==h)return Bh(a,h)}return r[7]}function $h(n,r,o,a,h,_,w){for(;null!=o;){const N=a[o.index],V=o.type;if(w&&0===r&&(N&&ua(q(N),a),o.flags|=4),64!=(64&o.flags))if(8&V)$h(n,r,o.child,a,h,_,!1),f(r,n,h,N,_);else if(32&V){const ie=D(o,a);let fe;for(;fe=ie();)f(r,n,h,fe,_);f(r,n,h,N,_)}else 16&V?ya(n,r,a,o,h,_):f(r,n,h,N,_);o=w?o.projectionNext:o.next}}function Xd(n,r,o,a,h,_){$h(o,a,n.firstChild,r,h,_,!1)}function ya(n,r,o,a,h,_){const w=o[16],V=w[6].projection[a.projection];if(Array.isArray(V))for(let ie=0;ie<V.length;ie++)f(r,n,h,V[ie],_);else $h(n,r,V,w[3],h,_,!0)}function jh(n,r,o){Ti(n)?n.setAttribute(r,"style",o):r.style.cssText=o}function cu(n,r,o){Ti(n)?""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o):r.className=o}function op(n,r,o){let a=n.length;for(;;){const h=n.indexOf(r,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const _=r.length;if(h+_===a||n.charCodeAt(h+_)<=32)return h}o=h+1}}const ap="ng-template";function Hh(n,r,o){let a=0;for(;a<n.length;){let h=n[a++];if(o&&"class"===h){if(h=n[a],-1!==op(h.toLowerCase(),r,0))return!0}else if(1===h){for(;a<n.length&&"string"==typeof(h=n[a++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function oc(n){return 4===n.type&&n.value!==ap}function Bc(n,r,o){return r===(4!==n.type||o?n.value:ap)}function $c(n,r,o){let a=4;const h=n.attrs||[],_=function om(n){for(let r=0;r<n.length;r++)if(Ze(n[r]))return r;return n.length}(h);let w=!1;for(let N=0;N<r.length;N++){const V=r[N];if("number"!=typeof V){if(!w)if(4&a){if(a=2|1&a,""!==V&&!Bc(n,V,o)||""===V&&1===r.length){if(Za(a))return!1;w=!0}}else{const ie=8&a?V:r[++N];if(8&a&&null!==n.attrs){if(!Hh(n.attrs,ie,o)){if(Za(a))return!1;w=!0}continue}const Le=sm(8&a?"class":V,h,oc(n),o);if(-1===Le){if(Za(a))return!1;w=!0;continue}if(""!==ie){let gt;gt=Le>_?"":h[Le+1].toLowerCase();const $t=8&a?gt:null;if($t&&-1!==op($t,ie,0)||2&a&&ie!==gt){if(Za(a))return!1;w=!0}}}}else{if(!w&&!Za(a)&&!Za(V))return!1;if(w&&Za(V))continue;w=!1,a=V|1&a}}return Za(a)||w}function Za(n){return 0==(1&n)}function sm(n,r,o,a){if(null===r)return-1;let h=0;if(a||!o){let _=!1;for(;h<r.length;){const w=r[h];if(w===n)return h;if(3===w||6===w)_=!0;else{if(1===w||2===w){let N=r[++h];for(;"string"==typeof N;)N=r[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=_?1:2}return-1}return function am(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const a=n[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,n)}function Gh(n,r,o=!1){for(let a=0;a<r.length;a++)if($c(n,r[a],o))return!0;return!1}function y_(n,r){e:for(let o=0;o<r.length;o++){const a=r[o];if(n.length===a.length){for(let h=0;h<n.length;h++)if(n[h]!==a[h])continue e;return!0}}return!1}function up(n,r){return n?":not("+r.trim()+")":r}function lm(n){let r=n[0],o=1,a=2,h="",_=!1;for(;o<n.length;){let w=n[o];if("string"==typeof w)if(2&a){const N=n[++o];h+="["+w+(N.length>0?'="'+N+'"':"")+"]"}else 8&a?h+="."+w:4&a&&(h+=" "+w);else""!==h&&!Za(w)&&(r+=up(_,h),h=""),a=w,_=_||!Za(a);o++}return""!==h&&(r+=up(_,h)),r}const Ui={};function um(n){cp(Nn(),Qe(),En()+n,!1)}function cp(n,r,o,a){if(!a)if(3==(3&r[2])){const _=n.preOrderCheckHooks;null!==_&&cr(r,_,o)}else{const _=n.preOrderHooks;null!==_&&ur(r,_,0,o)}An(o)}function Wh(n,r){return n<<17|r<<2}function ql(n){return n>>17&32767}function du(n){return 2|n}function hu(n){return(131068&n)>>2}function dp(n,r){return-131069&n|r<<2}function fp(n){return 1|n}function Ep(n,r){const o=n.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const h=o[a],_=o[a+1];if(-1!==_){const w=n.data[_];me(h),w.contentQueries(2,r[_],_)}}}function ih(n,r,o,a,h,_,w,N,V,ie){const fe=r.blueprint.slice();return fe[0]=h,fe[2]=140|a,Ks(fe),fe[3]=fe[15]=n,fe[8]=o,fe[10]=w||n&&n[10],fe[11]=N||n&&n[11],fe[12]=V||n&&n[12]||null,fe[9]=ie||n&&n[9]||null,fe[6]=_,fe[16]=2==r.type?n[16]:fe,fe}function Id(n,r,o,a,h){let _=n.data[r];if(null===_)_=function sh(n,r,o,a,h){const _=be(),w=Kt(),V=n.data[r]=function wp(n,r,o,a,h,_){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,o,r,a,h);return null===n.firstChild&&(n.firstChild=V),null!==_&&(w?null==_.child&&null!==V.parent&&(_.child=V):null===_.next&&(_.next=V)),V}(n,r,o,a,h),function I(){return Wr.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=o,_.value=a,_.attrs=h;const w=function ke(){const n=Wr.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===w?-1:w.injectorIndex}return rt(_,!0),_}function $o(n,r,o,a){if(0===o)return-1;const h=r.length;for(let _=0;_<o;_++)r.push(a),n.blueprint.push(a),n.data.push(null);return h}function oh(n,r,o){Te(r);try{const a=n.viewQuery;null!==a&&kp(1,a,o);const h=n.template;null!==h&&vm(n,r,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ep(n,r),n.staticViewQueries&&kp(2,n.viewQuery,o);const _=n.components;null!==_&&function _m(n,r){for(let o=0;o<r.length;o++)O_(n,r[o])}(r,_)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,yt()}}function Sd(n,r,o,a){const h=r[2];if(256!=(256&h)){Te(r);try{Ks(r),function ss(n){return Wr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&vm(n,r,o,2,a);const w=3==(3&h);if(w){const ie=n.preOrderCheckHooks;null!==ie&&cr(r,ie,null)}else{const ie=n.preOrderHooks;null!==ie&&ur(r,ie,0,null),Wt(r,0)}if(function N_(n){for(let r=Or(n);null!==r;r=Ei(r)){if(!r[2])continue;const o=r[9];for(let a=0;a<o.length;a++){const h=o[a],_=h[3];0==(1024&h[2])&&ns(_,1),h[2]|=1024}}}(r),function Im(n){for(let r=Or(n);null!==r;r=Ei(r))for(let o=10;o<r.length;o++){const a=r[o],h=a[1];Ji(a)&&Sd(h,a,h.template,a[8])}}(r),null!==n.contentQueries&&Ep(n,r),w){const ie=n.contentCheckHooks;null!==ie&&cr(r,ie)}else{const ie=n.contentHooks;null!==ie&&ur(r,ie,1),Wt(r,1)}!function ym(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const h=o[a];if(h<0)An(~h);else{const _=h,w=o[++a],N=o[++a];z(w,_),N(2,r[_])}}}finally{An(-1)}}(n,r);const N=n.components;null!==N&&function S_(n,r){for(let o=0;o<r.length;o++)Sm(n,r[o])}(r,N);const V=n.viewQuery;if(null!==V&&kp(2,V,a),w){const ie=n.viewCheckHooks;null!==ie&&cr(r,ie)}else{const ie=n.viewHooks;null!==ie&&ur(r,ie,2),Wt(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,ns(r[3],-1))}finally{yt()}}}function D_(n,r,o,a){const h=r[10],w=fi(r);try{!w&&h.begin&&h.begin(),w&&oh(n,r,a),Sd(n,r,o,a)}finally{!w&&h.end&&h.end()}}function vm(n,r,o,a,h){const _=En(),w=2&a;try{An(-1),w&&r.length>20&&cp(n,r,20,!1),o(a,h)}finally{An(_)}}function Cp(n,r,o){if(Zr(r)){const h=r.directiveEnd;for(let _=r.directiveStart;_<h;_++){const w=n.data[_];w.contentQueries&&w.contentQueries(1,o[_],_)}}}function bp(n,r,o){!G()||(function bm(n,r,o,a){const h=o.directiveStart,_=o.directiveEnd;n.firstCreatePass||bo(o,r),ua(a,r);const w=o.initialInputs;for(let N=h;N<_;N++){const V=n.data[N],ie=ys(V);ie&&Pp(r,o,V);const fe=On(r,n,N,o);ua(fe,r),null!==w&&sf(0,N-h,fe,V,0,w),ie&&(ti(o.index,r)[8]=fe)}}(n,r,o,Sn(o,r)),128==(128&o.flags)&&function Tm(n,r,o){const a=o.directiveStart,h=o.directiveEnd,w=o.index,N=function J(){return Wr.lFrame.currentDirectiveIndex}();try{An(w);for(let V=a;V<h;V++){const ie=n.data[V],fe=r[V];ge(V),(null!==ie.hostBindings||0!==ie.hostVars||null!==ie.hostAttrs)&&Ap(ie,fe)}}finally{An(-1),ge(N)}}(n,r,o))}function Dd(n,r,o=Sn){const a=r.localNames;if(null!==a){let h=r.index+1;for(let _=0;_<a.length;_+=2){const w=a[_+1],N=-1===w?o(r,n):n[w];n[h++]=N}}}function Em(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=ah(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function ah(n,r,o,a,h,_,w,N,V,ie){const fe=20+a,Le=fe+h,gt=function Tp(n,r){const o=[];for(let a=0;a<r;a++)o.push(a<n?null:Ui);return o}(fe,Le),$t="function"==typeof ie?ie():ie;return gt[1]={type:n,blueprint:gt,template:o,queries:null,viewQuery:N,declTNode:r,data:gt.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:V,consts:$t,incompleteFirstPass:!1}}function ef(n,r,o,a){const h=xm(r);null===o?h.push(a):(h.push(o),n.firstCreatePass&&Md(n).push(a,h.length-1))}function Ip(n,r,o){for(let a in n)if(n.hasOwnProperty(a)){const h=n[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(r,h):o[a]=[r,h]}return o}function ll(n,r,o,a,h,_,w,N){const V=Sn(r,o);let fe,ie=r.inputs;!N&&null!=ie&&(fe=ie[a])?(cf(n,o,fe,a,h),ji(r)&&function Sp(n,r){const o=ti(r,n);16&o[2]||(o[2]|=64)}(o,r.index)):3&r.type&&(a=function Cm(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),h=null!=w?w(h,r.value||"",a):h,Ti(_)?_.setProperty(V,a,h):Ke(a)||(V.setProperty?V.setProperty(a,h):V[a]=h))}function uc(n,r,o,a){let h=!1;if(G()){const _=function R_(n,r,o){const a=n.directiveRegistry;let h=null;if(a)for(let _=0;_<a.length;_++){const w=a[_];Gh(o,w.selectors,!1)&&(h||(h=[]),S(bo(o,r),n,w.type),ys(w)?(rf(n,o),h.unshift(w)):h.push(w))}return h}(n,r,o),w=null===a?null:{"":-1};if(null!==_){h=!0,Mp(o,n.data.length,_.length);for(let fe=0;fe<_.length;fe++){const Le=_[fe];Le.providersResolver&&Le.providersResolver(Le)}let N=!1,V=!1,ie=$o(n,r,_.length,null);for(let fe=0;fe<_.length;fe++){const Le=_[fe];o.mergedAttrs=Tt(o.mergedAttrs,Le.hostAttrs),Rp(n,o,r,ie,Le),xp(ie,Le,w),null!==Le.contentQueries&&(o.flags|=8),(null!==Le.hostBindings||null!==Le.hostAttrs||0!==Le.hostVars)&&(o.flags|=128);const gt=Le.type.prototype;!N&&(gt.ngOnChanges||gt.ngOnInit||gt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),N=!0),!V&&(gt.ngOnChanges||gt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),V=!0),ie++}!function A_(n,r){const a=r.directiveEnd,h=n.data,_=r.attrs,w=[];let N=null,V=null;for(let ie=r.directiveStart;ie<a;ie++){const fe=h[ie],Le=fe.inputs,gt=null===_||oc(r)?null:Np(Le,_);w.push(gt),N=Ip(Le,ie,N),V=Ip(fe.outputs,ie,V)}null!==N&&(N.hasOwnProperty("class")&&(r.flags|=16),N.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=N,r.outputs=V}(n,o)}w&&function P_(n,r,o){if(r){const a=n.localNames=[];for(let h=0;h<r.length;h+=2){const _=o[r[h+1]];if(null==_)throw new ln(-301,!1);a.push(r[h],_)}}}(o,a,w)}return o.mergedAttrs=Tt(o.mergedAttrs,o.attrs),h}function tf(n,r,o,a,h,_){const w=_.hostBindings;if(w){let N=n.hostBindingOpCodes;null===N&&(N=n.hostBindingOpCodes=[]);const V=~r.index;(function nf(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(N)!=V&&N.push(V),N.push(a,h,w)}}function Ap(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function rf(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=n;ys(r)&&(o[""]=n)}}function Mp(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Rp(n,r,o,a,h){n.data[a]=h;const _=h.factory||(h.factory=Li(h.type)),w=new xi(_,ys(h),null);n.blueprint[a]=w,o[a]=w,tf(n,r,0,a,$o(n,o,h.hostVars,Ui),h)}function Pp(n,r,o){const a=Sn(r,n),h=Em(o),_=n[10],w=uh(n,ih(n,h,null,o.onPush?64:16,a,r,_,_.createRenderer(a,o),null,null));n[r.index]=w}function bl(n,r,o,a,h,_){const w=Sn(n,r);!function qc(n,r,o,a,h,_,w){if(null==_)Ti(n)?n.removeAttribute(r,h,o):r.removeAttribute(h);else{const N=null==w?Nt(_):w(_,a||"",h);Ti(n)?n.setAttribute(r,h,N,o):o?r.setAttributeNS(o,h,N):r.setAttribute(h,N)}}(r[11],w,_,n.value,o,a,h)}function sf(n,r,o,a,h,_){const w=_[r];if(null!==w){const N=a.setInput;for(let V=0;V<w.length;){const ie=w[V++],fe=w[V++],Le=w[V++];null!==N?a.setInput(o,Le,ie,fe):o[fe]=Le}}}function Np(n,r){let o=null,a=0;for(;a<r.length;){const h=r[a];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],r[a+1])),a+=2}else a+=2;else a+=4}return o}function af(n,r,o,a){return new Array(n,!0,!1,r,null,0,a,o,null,null)}function Sm(n,r){const o=ti(r,n);if(Ji(o)){const a=o[1];80&o[2]?Sd(a,o,a.template,o[8]):o[5]>0&&Op(o)}}function Op(n){for(let a=Or(n);null!==a;a=Ei(a))for(let h=10;h<a.length;h++){const _=a[h];if(1024&_[2]){const w=_[1];Sd(w,_,w.template,_[8])}else _[5]>0&&Op(_)}const o=n[1].components;if(null!==o)for(let a=0;a<o.length;a++){const h=ti(o[a],n);Ji(h)&&h[5]>0&&Op(h)}}function O_(n,r){const o=ti(r,n),a=o[1];(function k_(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(a,o),oh(a,o,o[8])}function uh(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function xd(n){for(;n;){n[2]|=64;const r=Ct(n);if(Pi(n)&&!r)return n;n=r}return null}function Dm(n){!function dh(n){for(let r=0;r<n.components.length;r++){const o=n.components[r],a=il(o),h=a[1];D_(h,a,h.template,o)}}(n[8])}function kp(n,r,o){me(0),r(n,o)}const F_=(()=>Promise.resolve(null))();function xm(n){return n[7]||(n[7]=[])}function Md(n){return n.cleanup||(n.cleanup=[])}function Kc(n,r){const o=n[9],a=o?o.get(Ra,null):null;a&&a.handleError(r)}function cf(n,r,o,a,h){for(let _=0;_<o.length;){const w=o[_++],N=o[_++],V=r[w],ie=n.data[w];null!==ie.setInput?ie.setInput(V,h,a,N):V[N]=h}}function Nl(n,r,o){const a=nn(r,n);!function d(n,r,o){Ti(n)?n.setValue(r,o):r.textContent=o}(n[11],a,o)}function cc(n,r,o){let a=o?n.styles:null,h=o?n.classes:null,_=0;if(null!==r)for(let w=0;w<r.length;w++){const N=r[w];"number"==typeof N?_=N:1==_?h=at(h,N):2==_&&(a=at(a,N+": "+r[++w]+";"))}o?n.styles=a:n.stylesWithoutHost=a,o?n.classes=h:n.classesWithoutHost=h}const hh=new uo("INJECTOR",-1);class fu{get(r,o=ao){if(o===ao){const a=new Error(`NullInjectorError: No provider for ${We(r)}!`);throw a.name="NullInjectorError",a}return o}}const df=new uo("Set Injector scope."),fh={},Lp={};let Vp;function hf(){return void 0===Vp&&(Vp=new fu),Vp}function Pm(n,r=null,o=null,a){const h=ff(n,r,o,a);return h._resolveInjectorDefTypes(),h}function ff(n,r=null,o=null,a){return new pf(n,o,r||hf(),a)}class pf{constructor(r,o,a,h=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];o&&Jo(o,N=>this.processProvider(N,r,o)),Jo([r],N=>this.processInjectorType(N,[],_)),this.records.set(hh,Pd(void 0,this));const w=this.records.get(df);this.scope=null!=w?w.value:null,this.source=h||("object"==typeof r?null:We(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,o=ao,a=er.Default){this.assertNotDestroyed();const h=U(this),_=Rr(void 0);try{if(!(a&er.SkipSelf)){let N=this.records.get(r);if(void 0===N){const V=function V_(n){return"function"==typeof n||"object"==typeof n&&n instanceof uo}(r)&&ut(r);N=V&&this.injectableDefInScope(V)?Pd(ph(r),fh):null,this.records.set(r,N)}if(null!=N)return this.hydrate(r,N)}return(a&er.Self?hf():this.parent).get(r,o=a&er.Optional&&o===ao?null:o)}catch(w){if("NullInjectorError"===w.name){if((w[wo]=w[wo]||[]).unshift(We(r)),h)throw w;return function Kr(n,r,o,a){const h=n[wo];throw r[Da]&&h.unshift(r[Da]),n.message=function Hr(n,r,o,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=We(r);if(Array.isArray(r))h=r.map(We).join(" -> ");else if("object"==typeof r){let _=[];for(let w in r)if(r.hasOwnProperty(w)){let N=r[w];_.push(w+":"+("string"==typeof N?JSON.stringify(N):We(N)))}h=`{${_.join(", ")}}`}return`${o}${a?"("+a+")":""}[${h}]: ${n.replace(fl,"\n  ")}`}("\n"+n.message,h,o,a),n.ngTokenPath=h,n[wo]=null,n}(w,r,"R3InjectorError",this.source)}throw w}finally{Rr(_),U(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,h)=>r.push(We(h))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ln(205,!1)}processInjectorType(r,o,a){if(!(r=vt(r)))return!1;let h=Wn(r);const _=null==h&&r.ngModule||void 0,w=void 0===_?r:_,N=-1!==a.indexOf(w);if(void 0!==_&&(h=Wn(_)),null==h)return!1;if(null!=h.imports&&!N){let fe;a.push(w);try{Jo(h.imports,Le=>{this.processInjectorType(Le,o,a)&&(void 0===fe&&(fe=[]),fe.push(Le))})}finally{}if(void 0!==fe)for(let Le=0;Le<fe.length;Le++){const{ngModule:gt,providers:$t}=fe[Le];Jo($t,Pn=>this.processProvider(Pn,gt,$t||Hn))}}this.injectorDefTypes.add(w);const V=Li(w)||(()=>new w);this.records.set(w,Pd(V,fh));const ie=h.providers;if(null!=ie&&!N){const fe=r;Jo(ie,Le=>this.processProvider(Le,fe,ie))}return void 0!==_&&void 0!==r.providers}processProvider(r,o,a){let h=Nd(r=vt(r))?r:vt(r&&r.provide);const _=function Rd(n,r,o){return Om(n)?Pd(void 0,n.useValue):Pd(gf(n),fh)}(r);if(Nd(r)||!0!==r.multi)this.records.get(h);else{let w=this.records.get(h);w||(w=Pd(void 0,fh,!0),w.factory=()=>Zt(w.multi),this.records.set(h,w)),h=r,w.multi.push(r)}this.records.set(h,_)}hydrate(r,o){return o.value===fh&&(o.value=Lp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Bp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=vt(r.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function ph(n){const r=ut(n),o=null!==r?r.factory:Li(n);if(null!==o)return o;if(n instanceof uo)throw new ln(204,!1);if(n instanceof Function)return function Nm(n){const r=n.length;if(r>0)throw go(r,"?"),new ln(204,!1);const o=function xt(n){const r=n&&(n[or]||n[Yr]);if(r){const o=function en(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new ln(204,!1)}function gf(n,r,o){let a;if(Nd(n)){const h=vt(n);return Li(h)||ph(h)}if(Om(n))a=()=>vt(n.useValue);else if(function Fm(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Zt(n.deps||[]));else if(function km(n){return!(!n||!n.useExisting)}(n))a=()=>de(vt(n.useExisting));else{const h=vt(n&&(n.useClass||n.provide));if(!function L_(n){return!!n.deps}(n))return Li(h)||ph(h);a=()=>new h(...Zt(n.deps))}return a}function Pd(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Om(n){return null!==n&&"object"==typeof n&&Ul in n}function Nd(n){return"function"==typeof n}let Ol=(()=>{class n{static create(o,a){var h;if(Array.isArray(o))return Pm({name:""},a,o,"");{const _=null!==(h=o.name)&&void 0!==h?h:"";return Pm({name:_},o.parent,o.providers,_)}}}return n.THROW_IF_NOT_FOUND=ao,n.NULL=new fu,n.\u0275prov=Ot({token:n,providedIn:"any",factory:()=>de(hh)}),n.__NG_ELEMENT_ID__=-1,n})();function $m(n,r){hn(il(n)[1],K())}function Yp(n){let r=function Zp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const a=[n];for(;r;){let h;if(ys(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ln(903,"");h=r.\u0275dir}if(h){if(o){a.push(h);const w=n;w.inputs=Qp(n.inputs),w.declaredInputs=Qp(n.declaredInputs),w.outputs=Qp(n.outputs);const N=h.hostBindings;N&&Jp(n,N);const V=h.viewQuery,ie=h.contentQueries;if(V&&j_(n,V),ie&&Xp(n,ie),ht(n.inputs,h.inputs),ht(n.declaredInputs,h.declaredInputs),ht(n.outputs,h.outputs),ys(h)&&h.data.animation){const fe=n.data;fe.animation=(fe.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let w=0;w<_.length;w++){const N=_[w];N&&N.ngInherit&&N(n),N===Yp&&(o=!1)}}r=Object.getPrototypeOf(r)}!function $_(n){let r=0,o=null;for(let a=n.length-1;a>=0;a--){const h=n[a];h.hostVars=r+=h.hostVars,h.hostAttrs=Tt(h.hostAttrs,o=Tt(o,h.hostAttrs))}}(a)}function Qp(n){return n===di?{}:n===Hn?[]:n}function j_(n,r){const o=n.viewQuery;n.viewQuery=o?(a,h)=>{r(a,h),o(a,h)}:r}function Xp(n,r){const o=n.contentQueries;n.contentQueries=o?(a,h,_)=>{r(a,h,_),o(a,h,_)}:r}function Jp(n,r){const o=n.hostBindings;n.hostBindings=o?(a,h)=>{r(a,h),o(a,h)}:r}let Ef=null;function hc(){if(!Ef){const n=kr.Symbol;if(n&&n.iterator)Ef=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const a=r[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Ef=a)}}}return Ef}function Yc(n){return!!yh(n)&&(Array.isArray(n)||!(n instanceof Map)&&hc()in n)}function yh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function pu(n,r,o){return n[r]=o}function Ua(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Lu(n,r,o,a){const h=Ua(n,r,o);return Ua(n,r+1,a)||h}function _h(n,r,o,a){const h=Qe();return Ua(h,l(),r)&&(Nn(),bl(mn(),h,n,r,o,a)),_h}function Xc(n,r,o,a,h,_){const N=Lu(n,function Vi(){return Wr.lFrame.bindingIndex}(),o,h);return A(2),N?r+Nt(o)+a+Nt(h)+_:Ui}function rg(n,r,o,a,h,_,w,N){const V=Qe(),ie=Nn(),fe=n+20,Le=ie.firstCreatePass?function ng(n,r,o,a,h,_,w,N,V){const ie=r.consts,fe=Id(r,n,4,w||null,ki(ie,N));uc(r,o,fe,ki(ie,V)),hn(r,fe);const Le=fe.tViews=ah(2,fe,a,h,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,ie);return null!==r.queries&&(r.queries.template(r,fe),Le.queries=r.queries.embeddedTView(fe)),fe}(fe,ie,V,r,o,a,h,_,w):ie.data[fe];rt(Le,!1);const gt=V[11].createComment("");Uh(ie,V,gt,Le),ua(gt,V),uh(V,V[fe]=af(gt,V,gt,Le)),bs(Le)&&bp(ie,V,Le),null!=w&&Dd(V,Le,N)}function sg(n){return ei(function jn(){return Wr.lFrame.contextLView}(),20+n)}function Vd(n,r=er.Default){const o=Qe();return null===o?de(n,r):Ve(K(),o,vt(n),r)}function Mf(){throw new Error("invalid")}function Ch(n,r,o){const a=Qe();return Ua(a,l(),r)&&ll(Nn(),mn(),a,n,r,a[11],o,!1),Ch}function bh(n,r,o,a,h){const w=h?"class":"style";cf(n,o,r.inputs[w],w,a)}function Ud(n,r,o,a){const h=Qe(),_=Nn(),w=20+n,N=h[11],V=h[w]=x(N,r,function rn(){return Wr.lFrame.currentNamespace}()),ie=_.firstCreatePass?function Rf(n,r,o,a,h,_,w){const N=r.consts,ie=Id(r,n,2,h,ki(N,_));return uc(r,o,ie,ki(N,w)),null!==ie.attrs&&cc(ie,ie.attrs,!1),null!==ie.mergedAttrs&&cc(ie,ie.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,ie),ie}(w,_,h,0,r,o,a):_.data[w];rt(ie,!0);const fe=ie.mergedAttrs;null!==fe&&Ce(N,V,fe);const Le=ie.classes;null!==Le&&cu(N,V,Le);const gt=ie.styles;return null!==gt&&jh(N,V,gt),64!=(64&ie.flags)&&Uh(_,h,V,ie),0===function fo(){return Wr.lFrame.elementDepthCount}()&&ua(V,h),function Co(){Wr.lFrame.elementDepthCount++}(),bs(ie)&&(bp(_,h,ie),Cp(_,ie,h)),null!==a&&Dd(h,ie),Ud}function Th(){let n=K();Kt()?xn():(n=n.parent,rt(n,!1));const r=n;!function Y(){Wr.lFrame.elementDepthCount--}();const o=Nn();return o.firstCreatePass&&(hn(o,n),Zr(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function C(n){return 0!=(16&n.flags)}(r)&&bh(o,r,Qe(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function T(n){return 0!=(32&n.flags)}(r)&&bh(o,r,Qe(),r.stylesWithoutHost,!1),Th}function Bd(n,r,o,a){return Ud(n,r,o,a),Th(),Bd}function wh(n,r,o){const a=Qe(),h=Nn(),_=n+20,w=h.firstCreatePass?function gg(n,r,o,a,h){const _=r.consts,w=ki(_,a),N=Id(r,n,8,"ng-container",w);return null!==w&&cc(N,w,!0),uc(r,o,N,ki(_,h)),null!==r.queries&&r.queries.elementStart(r,N),N}(_,h,a,r,o):h.data[_];rt(w,!0);const N=a[_]=a[11].createComment("");return Uh(h,a,N,w),ua(N,a),bs(w)&&(bp(h,a,w),Cp(h,w,a)),null!=o&&Dd(a,w),wh}function Vu(){let n=K();const r=Nn();return Kt()?xn():(n=n.parent,rt(n,!1)),r.firstCreatePass&&(hn(r,n),Zr(n)&&r.queries.elementEnd(n)),Vu}function uy(){return Qe()}function mg(n){return!!n&&"function"==typeof n.then}function cy(n){return!!n&&"function"==typeof n.subscribe}const yg=cy;function _g(n,r,o,a){const h=Qe(),_=Nn(),w=K();return function dy(n,r,o,a,h,_,w,N){const V=bs(a),fe=n.firstCreatePass&&Md(n),Le=r[8],gt=xm(r);let $t=!0;if(3&a.type||N){const xr=Sn(a,r),ri=N?N(xr):xr,zn=gt.length,Mi=N?Ps=>N(q(Ps[a.index])):a.index;if(Ti(o)){let Ps=null;if(!N&&V&&(Ps=function X_(n,r,o,a){const h=n.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const w=h[_];if(w===o&&h[_+1]===a){const N=r[7],V=h[_+2];return N.length>V?N[V]:null}"string"==typeof w&&(_+=2)}return null}(n,r,h,a.index)),null!==Ps)(Ps.__ngLastListenerFn__||Ps).__ngNextListenerFn__=_,Ps.__ngLastListenerFn__=_,$t=!1;else{_=Eg(a,r,Le,_,!1);const vo=o.listen(ri,h,_);gt.push(_,vo),fe&&fe.push(h,Mi,zn,zn+1)}}else _=Eg(a,r,Le,_,!0),ri.addEventListener(h,_,w),gt.push(_),fe&&fe.push(h,Mi,zn,w)}else _=Eg(a,r,Le,_,!1);const Pn=a.outputs;let gr;if($t&&null!==Pn&&(gr=Pn[h])){const xr=gr.length;if(xr)for(let ri=0;ri<xr;ri+=2){const Ql=r[gr[ri]][gr[ri+1]].subscribe(_),kh=gt.length;gt.push(_,Ql),fe&&fe.push(h,a.index,kh,-(kh+1))}}}(_,h,h[11],w,n,r,!!o,a),_g}function hy(n,r,o,a){try{return!1!==o(a)}catch(h){return Kc(n,h),!1}}function Eg(n,r,o,a,h){return function _(w){if(w===Function)return a;const N=2&n.flags?ti(n.index,r):r;0==(32&r[2])&&xd(N);let V=hy(r,0,a,w),ie=_.__ngNextListenerFn__;for(;ie;)V=hy(r,0,ie,w)&&V,ie=ie.__ngNextListenerFn__;return h&&!1===V&&(w.preventDefault(),w.returnValue=!1),V}}function Nf(n=1){return function et(n){return(Wr.lFrame.contextLView=function mt(n,r){for(;n>0;)r=r[15],n--;return r}(n,Wr.lFrame.contextLView))[8]}(n)}function J_(n,r){let o=null;const a=function lp(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(0==(1&o))return r[o+1]}return null}(n);for(let h=0;h<r.length;h++){const _=r[h];if("*"!==_){if(null===a?Gh(n,_,!0):y_(a,_))return h}else o=h}return o}function fy(n){const r=Qe()[16][6];if(!r.projection){const a=r.projection=go(n?n.length:1,null),h=a.slice();let _=r.child;for(;null!==_;){const w=n?J_(_,n):0;null!==w&&(h[w]?h[w].projectionNext=_:a[w]=_,h[w]=_),_=_.next}}}function So(n,r=0,o){const a=Qe(),h=Nn(),_=Id(h,20+n,16,null,o||null);null===_.projection&&(_.projection=r),xn(),64!=(64&_.flags)&&function rp(n,r,o){ya(r[11],0,r,o,Fu(n,o,r),tm(o.parent||r[6],o,r))}(h,a,_)}function Ey(n,r,o,a,h){const _=n[o+1],w=null===r;let N=a?ql(_):hu(_),V=!1;for(;0!==N&&(!1===V||w);){const fe=n[N+1];Cy(n[N],r)&&(V=!0,n[N+1]=a?fp(fe):du(fe)),N=a?ql(fe):hu(fe)}V&&(n[o+1]=a?du(_):fp(_))}function Cy(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&ja(n,r)>=0}const yo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gu(n){return n.substring(yo.key,yo.keyEnd)}function P0(n){return n.substring(yo.value,yo.valueEnd)}function Ih(n,r){const o=yo.textEnd;return o===r?-1:(r=yo.keyEnd=function Of(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,yo.key=r,o),td(n,r,o))}function by(n,r){const o=yo.textEnd;let a=yo.key=td(n,r,o);return o===a?-1:(a=yo.keyEnd=function rv(n,r,o){let a;for(;r<o&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,o),a=yc(n,a,o),a=yo.value=td(n,a,o),a=yo.valueEnd=function kf(n,r,o){let a=-1,h=-1,_=-1,w=r,N=w;for(;w<o;){const V=n.charCodeAt(w++);if(59===V)return N;34===V||39===V?N=w=$d(n,V,w,o):r===w-4&&85===_&&82===h&&76===a&&40===V?N=w=$d(n,41,w,o):V>32&&(N=w),_=h,h=a,a=-33&V}return N}(n,a,o),yc(n,a,o))}function Tg(n){yo.key=0,yo.keyEnd=0,yo.value=0,yo.valueEnd=0,yo.textEnd=n.length}function td(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function yc(n,r,o,a){return(r=td(n,r,o))<o&&r++,r}function $d(n,r,o,a){let h=-1,_=o;for(;_<a;){const w=n.charCodeAt(_++);if(w==r&&92!==h)return _;h=92==w&&92===h?0:w}throw new Error}function Sh(n,r,o){return Fl(n,r,o,!1),Sh}function wg(n,r){return Fl(n,r,null,!0),wg}function Zl(n){Pa(Ty,sv,n,!1)}function sv(n,r){for(let o=function nv(n){return Tg(n),by(n,td(n,0,yo.textEnd))}(r);o>=0;o=by(r,o))Ty(n,gu(r),P0(r))}function Ff(n){Pa(mo,kl,n,!0)}function kl(n,r){for(let o=function ed(n){return Tg(n),Ih(n,td(n,0,yo.textEnd))}(r);o>=0;o=Ih(r,o))mo(n,gu(r),!0)}function Fl(n,r,o,a){const h=Qe(),_=Nn(),w=A(2);_.firstUpdatePass&&Sg(_,n,w,a),r!==Ui&&Ua(h,w,r)&&xg(_,_.data[En()],h,h[11],n,h[w+1]=function vc(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=We(Ea(n)))),n}(r,o),a,w)}function Pa(n,r,o,a){const h=Nn(),_=A(2);h.firstUpdatePass&&Sg(h,null,_,a);const w=Qe();if(o!==Ui&&Ua(w,_,o)){const N=h.data[En()];if(Gd(N,a)&&!Ig(h,_)){let V=a?N.classesWithoutHost:N.stylesWithoutHost;null!==V&&(o=at(V,o||"")),bh(h,N,w,o,a)}else!function Vf(n,r,o,a,h,_,w,N){h===Ui&&(h=Hn);let V=0,ie=0,fe=0<h.length?h[0]:null,Le=0<_.length?_[0]:null;for(;null!==fe||null!==Le;){const gt=V<h.length?h[V+1]:void 0,$t=ie<_.length?_[ie+1]:void 0;let gr,Pn=null;fe===Le?(V+=2,ie+=2,gt!==$t&&(Pn=Le,gr=$t)):null===Le||null!==fe&&fe<Le?(V+=2,Pn=fe):(ie+=2,Pn=Le,gr=$t),null!==Pn&&xg(n,r,o,a,Pn,gr,w,N),fe=V<h.length?h[V]:null,Le=ie<_.length?_[ie]:null}}(h,N,w,w[11],w[_+1],w[_+1]=function Dh(n,r,o){if(null==o||""===o)return Hn;const a=[],h=Ea(o);if(Array.isArray(h))for(let _=0;_<h.length;_++)n(a,h[_],!0);else if("object"==typeof h)for(const _ in h)h.hasOwnProperty(_)&&n(a,_,h[_]);else"string"==typeof h&&r(a,h);return a}(n,r,o),a,_)}}function Ig(n,r){return r>=n.expandoStartIndex}function Sg(n,r,o,a){const h=n.data;if(null===h[o+1]){const _=h[En()],w=Ig(n,o);Gd(_,a)&&null===r&&!w&&(r=!1),r=function Dg(n,r,o,a){const h=we(n);let _=a?r.residualClasses:r.residualStyles;if(null===h)0===(a?r.classBindings:r.styleBindings)&&(o=Hd(o=jd(null,n,r,o,a),r.attrs,a),_=null);else{const w=r.directiveStylingLast;if(-1===w||n[w]!==h)if(o=jd(h,n,r,o,a),null===_){let V=function Ag(n,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==hu(a))return n[ql(a)]}(n,r,a);void 0!==V&&Array.isArray(V)&&(V=jd(null,n,r,V[1],a),V=Hd(V,r.attrs,a),function ov(n,r,o,a){n[ql(o?r.classBindings:r.styleBindings)]=a}(n,r,a,V))}else _=function Lf(n,r,o){let a;const h=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<h;_++)a=Hd(a,n[_].hostAttrs,o);return Hd(a,r.attrs,o)}(n,r,a)}return void 0!==_&&(a?r.residualClasses=_:r.residualStyles=_),o}(h,_,r,a),function R0(n,r,o,a,h,_){let w=_?r.classBindings:r.styleBindings,N=ql(w),V=hu(w);n[a]=o;let fe,ie=!1;if(Array.isArray(o)){const Le=o;fe=Le[1],(null===fe||ja(Le,fe)>0)&&(ie=!0)}else fe=o;if(h)if(0!==V){const gt=ql(n[N+1]);n[a+1]=Wh(gt,N),0!==gt&&(n[gt+1]=dp(n[gt+1],a)),n[N+1]=function jc(n,r){return 131071&n|r<<17}(n[N+1],a)}else n[a+1]=Wh(N,0),0!==N&&(n[N+1]=dp(n[N+1],a)),N=a;else n[a+1]=Wh(V,0),0===N?N=a:n[V+1]=dp(n[V+1],a),V=a;ie&&(n[a+1]=du(n[a+1])),Ey(n,fe,a,!0),Ey(n,fe,a,!1),function tv(n,r,o,a,h){const _=h?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&ja(_,r)>=0&&(o[a+1]=fp(o[a+1]))}(r,fe,n,a,_),w=Wh(N,V),_?r.classBindings=w:r.styleBindings=w}(h,_,r,o,w,a)}}function jd(n,r,o,a,h){let _=null;const w=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<w&&(_=r[N],a=Hd(a,_.hostAttrs,h),_!==n);)N++;return null!==n&&(o.directiveStylingLast=N),a}function Hd(n,r,o){const a=o?1:2;let h=-1;if(null!==r)for(let _=0;_<r.length;_++){const w=r[_];"number"==typeof w?h=w:h===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),mo(n,w,!!o||r[++_]))}return void 0===n?null:n}function Ty(n,r,o){mo(n,r,Ea(o))}function xg(n,r,o,a,h,_,w,N){if(!(3&r.type))return;const V=n.data,ie=V[N+1];_c(function hp(n){return 1==(1&n)}(ie)?Uf(V,r,o,h,hu(ie),w):void 0)||(_c(_)||function _d(n){return 2==(2&n)}(ie)&&(_=Uf(V,null,o,h,N,w)),function sp(n,r,o,a,h){const _=Ti(n);if(r)h?_?n.addClass(o,a):o.classList.add(a):_?n.removeClass(o,a):o.classList.remove(a);else{let w=-1===a.indexOf("-")?void 0:p.DashCase;if(null==h)_?n.removeStyle(o,a,w):o.style.removeProperty(a);else{const N="string"==typeof h&&h.endsWith("!important");N&&(h=h.slice(0,-10),w|=p.Important),_?n.setStyle(o,a,h,w):o.style.setProperty(a,h,N?"important":"")}}}(a,w,nn(En(),o),h,_))}function Uf(n,r,o,a,h,_){const w=null===r;let N;for(;h>0;){const V=n[h],ie=Array.isArray(V),fe=ie?V[1]:V,Le=null===fe;let gt=o[h+1];gt===Ui&&(gt=Le?Hn:void 0);let $t=Le?Ja(gt,a):fe===a?gt:void 0;if(ie&&!_c($t)&&($t=Ja(V,a)),_c($t)&&(N=$t,w))return N;const Pn=n[h+1];h=w?ql(Pn):hu(Pn)}if(null!==r){let V=_?r.residualClasses:r.residualStyles;null!=V&&(N=Ja(V,a))}return N}function _c(n){return void 0!==n}function Gd(n,r){return 0!=(n.flags&(r?16:32))}function wy(n,r=""){const o=Qe(),a=Nn(),h=n+20,_=a.firstCreatePass?Id(a,h,1,r,null):a.data[h],w=o[h]=function c(n,r){return Ti(n)?n.createText(r):n.createTextNode(r)}(o[11],r);Uh(a,o,w,_),rt(_,!1)}function Ec(n){return Mg("",n,""),Ec}function Mg(n,r,o){const a=Qe(),h=function Kl(n,r,o,a){return Ua(n,l(),o)?r+Nt(o)+a:Ui}(a,n,r,o);return h!==Ui&&Nl(a,En(),h),Mg}function Iy(n,r,o,a,h){const _=Qe(),w=Xc(_,n,r,o,a,h);return w!==Ui&&Nl(_,En(),w),Iy}function kg(n,r,o){const a=Qe();if(Ua(a,l(),r)){const _=Nn(),w=mn();ll(_,w,a,n,r,function uf(n,r,o){return(null===n||ys(n))&&(o=function ve(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(o[r.index])),o[11]}(we(_.data),w,a),o,!0)}return kg}const rd=void 0;var hv=["en",[["a","p"],["AM","PM"],rd],[["AM","PM"],rd,rd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rd,"{1} 'at' {0}",rd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jy(n){const o=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let Yl={};function Gy(n){const r=function fv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Fg(r);if(o)return o;const a=r.split("-")[0];if(o=Fg(a),o)return o;if("en"===a)return hv;throw new Error(`Missing locale data for the locale "${n}".`)}function zy(n){return Gy(n)[Oi.PluralCase]}function Fg(n){return n in Yl||(Yl[n]=kr.ng&&kr.ng.common&&kr.ng.common.locales&&kr.ng.common.locales[n]),Yl[n]}var Oi=(()=>((Oi=Oi||{})[Oi.LocaleId=0]="LocaleId",Oi[Oi.DayPeriodsFormat=1]="DayPeriodsFormat",Oi[Oi.DayPeriodsStandalone=2]="DayPeriodsStandalone",Oi[Oi.DaysFormat=3]="DaysFormat",Oi[Oi.DaysStandalone=4]="DaysStandalone",Oi[Oi.MonthsFormat=5]="MonthsFormat",Oi[Oi.MonthsStandalone=6]="MonthsStandalone",Oi[Oi.Eras=7]="Eras",Oi[Oi.FirstDayOfWeek=8]="FirstDayOfWeek",Oi[Oi.WeekendRange=9]="WeekendRange",Oi[Oi.DateFormat=10]="DateFormat",Oi[Oi.TimeFormat=11]="TimeFormat",Oi[Oi.DateTimeFormat=12]="DateTimeFormat",Oi[Oi.NumberSymbols=13]="NumberSymbols",Oi[Oi.NumberFormats=14]="NumberFormats",Oi[Oi.CurrencyCode=15]="CurrencyCode",Oi[Oi.CurrencySymbol=16]="CurrencySymbol",Oi[Oi.CurrencyName=17]="CurrencyName",Oi[Oi.Currencies=18]="Currencies",Oi[Oi.Directionality=19]="Directionality",Oi[Oi.PluralCase=20]="PluralCase",Oi[Oi.ExtraData=21]="ExtraData",Oi))();const Hf="en-US";let Wy=Hf;function Dv(n,r,o,a,h){if(n=vt(n),Array.isArray(n))for(let _=0;_<n.length;_++)Dv(n[_],r,o,a,h);else{const _=Nn(),w=Qe();let N=Nd(n)?n:vt(n.provide),V=gf(n);const ie=K(),fe=1048575&ie.providerIndexes,Le=ie.directiveStart,gt=ie.providerIndexes>>20;if(Nd(n)||!n.multi){const $t=new xi(V,h,Vd),Pn=xv(N,r,h?fe:fe+gt,Le);-1===Pn?(S(bo(ie,w),_,N),Av(_,n,r.length),r.push(N),ie.directiveStart++,ie.directiveEnd++,h&&(ie.providerIndexes+=1048576),o.push($t),w.push($t)):(o[Pn]=$t,w[Pn]=$t)}else{const $t=xv(N,r,fe+gt,Le),Pn=xv(N,r,fe,fe+gt),gr=$t>=0&&o[$t],xr=Pn>=0&&o[Pn];if(h&&!xr||!h&&!gr){S(bo(ie,w),_,N);const ri=function vC(n,r,o,a,h){const _=new xi(n,o,Vd);return _.multi=[],_.index=r,_.componentProviders=0,L0(_,h,a&&!o),_}(h?_C:yC,o.length,h,a,V);!h&&xr&&(o[Pn].providerFactory=ri),Av(_,n,r.length,0),r.push(N),ie.directiveStart++,ie.directiveEnd++,h&&(ie.providerIndexes+=1048576),o.push(ri),w.push(ri)}else Av(_,n,$t>-1?$t:Pn,L0(o[h?Pn:$t],V,!h&&a));!h&&a&&xr&&o[Pn].componentProviders++}}}function Av(n,r,o,a){const h=Nd(r),_=function Up(n){return!!n.useClass}(r);if(h||_){const V=(_?vt(r.useClass):r).prototype.ngOnDestroy;if(V){const ie=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const fe=ie.indexOf(o);-1===fe?ie.push(o,[a,V]):ie[fe+1].push(a,V)}else ie.push(o,V)}}}function L0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function xv(n,r,o,a){for(let h=o;h<a;h++)if(r[h]===n)return h;return-1}function yC(n,r,o,a){return Mv(this.multi,[])}function _C(n,r,o,a){const h=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,N=On(o,o[1],this.providerFactory.index,a);_=N.slice(0,w),Mv(h,_);for(let V=w;V<N.length;V++)_.push(N[V])}else _=[],Mv(h,_);return _}function Mv(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function V0(n,r=[]){return o=>{o.providersResolver=(a,h)=>function mC(n,r,o){const a=Nn();if(a.firstCreatePass){const h=ys(n);Dv(o,a.data,a.blueprint,h,!0),Dv(r,a.data,a.blueprint,h,!1)}}(a,h?h(n):n,r)}}class U0{}class bC{resolveComponentFactory(r){throw function CC(n){const r=Error(`No component factory found for ${We(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let o_=(()=>{class n{}return n.NULL=new bC,n})();function TC(){return Zf(K(),Qe())}function Zf(n,r){return new Kg(Sn(n,r))}let Kg=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=TC,n})();function wC(n){return n instanceof Kg?n.nativeElement:n}class $0{}let IC=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function DC(){const n=Qe(),o=ti(K().index,n);return function SC(n){return n[11]}(fs(o)?o:n)}(),n})(),AC=(()=>{class n{}return n.\u0275prov=Ot({token:n,providedIn:"root",factory:()=>null}),n})();class j0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const H0=new j0("13.3.11"),Rv={};function a_(n,r,o,a,h=!1){for(;null!==o;){const _=r[o.index];if(null!==_&&a.push(q(_)),si(_))for(let N=10;N<_.length;N++){const V=_[N],ie=V[1].firstChild;null!==ie&&a_(V[1],V,ie,a)}const w=o.type;if(8&w)a_(n,r,o.child,a);else if(32&w){const N=D(o,r);let V;for(;V=N();)a.push(V)}else if(16&w){const N=ep(r,o);if(Array.isArray(N))a.push(...N);else{const V=Ct(r[16]);a_(V[1],V,N,a,!0)}}o=h?o.projectionNext:o.next}return a}class Zg{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return a_(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(si(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(Rn(r,a),_u(o,a))}this._attachedToViewContainer=!1}Er(this._lView[1],this._lView)}onDestroy(r){ef(this._lView[1],this._lView,null,r)}markForCheck(){xd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function lf(n,r,o){const a=r[10];a.begin&&a.begin();try{Sd(n,r,n.template,o)}catch(h){throw Kc(r,h),h}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ln(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ie(n,r){Xd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ln(902,"");this._appRef=r}}class xC extends Zg{constructor(r){super(r),this._view=r}detectChanges(){Dm(this._view)}checkNoChanges(){}get context(){return null}}class G0 extends o_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=pt(r);return new Pv(o,this.ngModule)}}function z0(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Pv extends U0{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function zh(n){return n.map(lm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return z0(this.componentDef.inputs)}get outputs(){return z0(this.componentDef.outputs)}create(r,o,a,h){const _=(h=h||this.ngModule)?function RC(n,r){return{get:(o,a,h)=>{const _=n.get(o,Rv,h);return _!==Rv||a===Rv?_:r.get(o,a,h)}}}(r,h.injector):r,w=_.get($0,B),N=_.get(AC,null),V=w.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",fe=a?function lh(n,r,o){if(Ti(n))return n.selectRootElement(r,o===tn.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(V,a,this.componentDef.encapsulation):x(w.createRenderer(null,this.componentDef),ie,function MC(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ie)),Le=this.componentDef.onPush?576:528,gt=function Kp(n,r){return{components:[],scheduler:n||ol,clean:F_,playerHandler:r||null,flags:0}}(),$t=ah(0,null,null,1,0,null,null,null,null,null),Pn=ih(null,$t,gt,Le,null,null,w,V,N,_);let gr,xr;Te(Pn);try{const ri=function qp(n,r,o,a,h,_){const w=o[1];o[20]=n;const V=Id(w,20,2,"#host",null),ie=V.mergedAttrs=r.hostAttrs;null!==ie&&(cc(V,ie,!0),null!==n&&(Ce(h,n,ie),null!==V.classes&&cu(h,n,V.classes),null!==V.styles&&jh(h,n,V.styles)));const fe=a.createRenderer(n,r),Le=ih(o,Em(r),null,r.onPush?64:16,o[20],V,a,fe,_||null,null);return w.firstCreatePass&&(S(bo(V,o),w,r.type),rf(w,V),Mp(V,o.length,1)),uh(o,Le),o[20]=Le}(fe,this.componentDef,Pn,w,V);if(fe)if(a)Ce(V,fe,["ng-version",H0.full]);else{const{attrs:zn,classes:Mi}=function Jd(n){const r=[],o=[];let a=1,h=2;for(;a<n.length;){let _=n[a];if("string"==typeof _)2===h?""!==_&&r.push(_,n[++a]):8===h&&o.push(_);else{if(!Za(h))break;h=_}a++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);zn&&Ce(V,fe,zn),Mi&&Mi.length>0&&cu(V,fe,Mi.join(" "))}if(xr=jr($t,20),void 0!==o){const zn=xr.projection=[];for(let Mi=0;Mi<this.ngContentSelectors.length;Mi++){const Ps=o[Mi];zn.push(null!=Ps?Array.from(Ps):null)}}gr=function Bm(n,r,o,a,h){const _=o[1],w=function Ad(n,r,o){const a=K();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Rp(n,a,r,$o(n,r,1,null),o));const h=On(r,n,a.directiveStart,a);ua(h,r);const _=Sn(a,r);return _&&ua(_,r),h}(_,o,r);if(a.components.push(w),n[8]=w,h&&h.forEach(V=>V(w,r)),r.contentQueries){const V=K();r.contentQueries(1,w,V.directiveStart)}const N=K();return!_.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(An(N.index),tf(o[1],N,0,N.directiveStart,N.directiveEnd,r),Ap(r,w)),w}(ri,this.componentDef,Pn,gt,[$m]),oh($t,Pn,null)}finally{yt()}return new NC(this.componentType,gr,Zf(xr,Pn),Pn,xr)}}class NC extends class EC{}{constructor(r,o,a,h,_){super(),this.location=a,this._rootLView=h,this._tNode=_,this.instance=o,this.hostView=this.changeDetectorRef=new xC(h),this.componentType=r}get injector(){return new Pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Yf{}class W0{}const Qf=new Map;class Z0 extends Yf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new G0(this);const a=Jn(r);this._bootstrapComponents=Ka(a.bootstrap),this._r3Injector=ff(r,o,[{provide:Yf,useValue:this},{provide:o_,useValue:this.componentFactoryResolver}],We(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,o=Ol.THROW_IF_NOT_FOUND,a=er.Default){return r===Ol||r===Yf||r===hh?this:this._r3Injector.get(r,o,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Nv extends W0{constructor(r){super(),this.moduleType=r,null!==Jn(r)&&function kC(n){const r=new Set;!function o(a){const h=Jn(a,!0),_=h.id;null!==_&&(function q0(n,r,o){if(r&&r!==o)throw new Error(`Duplicate module registered for ${n} - ${We(r)} vs ${We(r.name)}`)}(_,Qf.get(_),a),Qf.set(_,a));const w=Ka(h.imports);for(const N of w)r.has(N)||(r.add(N),o(N))}(n)}(r)}create(r){return new Z0(this.moduleType,r)}}function Y0(n,r,o){const a=pi()+n,h=Qe();return h[a]===Ui?pu(h,a,o?r.call(o):r()):function Qc(n,r){return n[r]}(h,a)}function Q0(n,r,o,a){return tE(Qe(),pi(),n,r,o,a)}function X0(n,r,o,a,h){return nE(Qe(),pi(),n,r,o,a,h)}function J0(n,r,o,a,h,_){return function rE(n,r,o,a,h,_,w,N){const V=r+o;return function Cf(n,r,o,a,h){const _=Lu(n,r,o,a);return Ua(n,r+2,h)||_}(n,V,h,_,w)?pu(n,V+3,N?a.call(N,h,_,w):a(h,_,w)):Yg(n,V+3)}(Qe(),pi(),n,r,o,a,h,_)}function eE(n,r,o,a,h,_,w){return function iE(n,r,o,a,h,_,w,N,V){const ie=r+o;return function ul(n,r,o,a,h,_){const w=Lu(n,r,o,a);return Lu(n,r+2,h,_)||w}(n,ie,h,_,w,N)?pu(n,ie+4,V?a.call(V,h,_,w,N):a(h,_,w,N)):Yg(n,ie+4)}(Qe(),pi(),n,r,o,a,h,_,w)}function Yg(n,r){const o=n[r];return o===Ui?void 0:o}function tE(n,r,o,a,h,_){const w=r+o;return Ua(n,w,h)?pu(n,w+1,_?a.call(_,h):a(h)):Yg(n,w+1)}function nE(n,r,o,a,h,_,w){const N=r+o;return Lu(n,N,h,_)?pu(n,N+2,w?a.call(w,h,_):a(h,_)):Yg(n,N+2)}function oE(n,r){const o=Nn();let a;const h=n+20;o.firstCreatePass?(a=function $C(n,r){if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];if(n===a.name)return a}}(r,o.pipeRegistry),o.data[h]=a,a.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,a.onDestroy)):a=o.data[h];const _=a.factory||(a.factory=Li(a.type)),w=Rr(Vd);try{const N=Bn(!1),V=_();return Bn(N),function ig(n,r,o,a){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=a}(o,Qe(),h,V),V}finally{Rr(w)}}function aE(n,r,o){const a=n+20,h=Qe(),_=ei(h,a);return Qg(h,a)?tE(h,pi(),r,_.transform,o,_):_.transform(o)}function lE(n,r,o,a){const h=n+20,_=Qe(),w=ei(_,h);return Qg(_,h)?nE(_,pi(),r,w.transform,o,a,w):w.transform(o,a)}function Qg(n,r){return n[1].data[r].pure}function Ov(n){return r=>{setTimeout(n,void 0,r)}}const wc=class zC extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){var h,_,w;let N=r,V=o||(()=>null),ie=a;if(r&&"object"==typeof r){const Le=r;N=null===(h=Le.next)||void 0===h?void 0:h.bind(Le),V=null===(_=Le.error)||void 0===_?void 0:_.bind(Le),ie=null===(w=Le.complete)||void 0===w?void 0:w.bind(Le)}this.__isAsync&&(V=Ov(V),N&&(N=Ov(N)),ie&&(ie=Ov(ie)));const fe=super.subscribe({next:N,error:V,complete:ie});return r instanceof k.w0&&r.add(fe),fe}};function WC(){return this._results[hc()]()}class kv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=hc(),a=kv.prototype;a[o]||(a[o]=WC)}get changes(){return this._changes||(this._changes=new wc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const h=Ao(r);(this._changesDetected=!function la(n,r,o){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let h=n[a],_=r[a];if(o&&(h=o(h),_=o(_)),_!==h)return!1}return!0}(a._results,h,o))&&(a._results=h,a.length=h.length,a.last=h[this.length-1],a.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xg=(()=>{class n{}return n.__NG_ELEMENT_ID__=ZC,n})();const qC=Xg,KC=class extends qC{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(r){const o=this._declarationTContainer.tViews,a=ih(this._declarationLView,o,r,16,null,o.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(a[19]=_.createEmbeddedView(o)),oh(o,a,r),new Zg(a)}};function ZC(){return l_(K(),Qe())}function l_(n,r){return 4&n.type?new KC(r,n,Zf(n,r)):null}let u_=(()=>{class n{}return n.__NG_ELEMENT_ID__=YC,n})();function YC(){return dE(K(),Qe())}const QC=u_,uE=class extends QC{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return Zf(this._hostTNode,this._hostLView)}get injector(){return new Pr(this._hostTNode,this._hostLView)}get parentInjector(){const r=M(this._hostTNode,this._hostLView);if(Pt(r)){const o=mi(r,this._hostLView),a=rr(r);return new Pr(o[1].data[a+8],o)}return new Pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=cE(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,a){const h=r.createEmbeddedView(o||{});return this.insert(h,a),h}createComponent(r,o,a,h,_){const w=r&&!function aa(n){return"function"==typeof n}(r);let N;if(w)N=o;else{const Le=o||{};N=Le.index,a=Le.injector,h=Le.projectableNodes,_=Le.ngModuleRef}const V=w?r:new Pv(pt(r)),ie=a||this.parentInjector;if(!_&&null==V.ngModule){const gt=(w?ie:this.parentInjector).get(Yf,null);gt&&(_=gt)}const fe=V.create(ie,h,void 0,_);return this.insert(fe.hostView,N),fe}insert(r,o){const a=r._lView,h=a[1];if(function Ni(n){return si(n[3])}(a)){const fe=this.indexOf(r);if(-1!==fe)this.detach(fe);else{const Le=a[3],gt=new uE(Le,Le[6],Le[3]);gt.detach(gt.indexOf(r))}}const _=this._adjustIndex(o),w=this._lContainer;!function lt(n,r,o,a){const h=10+a,_=o.length;a>0&&(o[h-1][4]=r),a<_-10?(r[4]=o[h],Jl(o,10+a,r)):(o.push(r),r[4]=null),r[3]=o;const w=r[17];null!==w&&o!==w&&function an(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(w,r);const N=r[19];null!==N&&N.insertView(n),r[2]|=128}(h,a,w,_);const N=tp(_,w),V=a[11],ie=Vh(V,w[7]);return null!==ie&&function te(n,r,o,a,h,_){a[0]=h,a[6]=r,Xd(n,a,o,1,h,_)}(h,w[6],V,a,ie,N),r.attachToViewContainerRef(),Jl(Fv(w),_,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=cE(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=Rn(this._lContainer,o);a&&(_u(Fv(this._lContainer),o),Er(a[1],a))}detach(r){const o=this._adjustIndex(r,-1),a=Rn(this._lContainer,o);return a&&null!=_u(Fv(this._lContainer),o)?new Zg(a):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function cE(n){return n[8]}function Fv(n){return n[8]||(n[8]=[])}function dE(n,r){let o;const a=r[n.index];if(si(a))o=a;else{let h;if(8&n.type)h=q(a);else{const _=r[11];h=_.createComment("");const w=Sn(n,r);Wl(_,Vh(_,w),h,function m_(n,r){return Ti(n)?n.nextSibling(r):r.nextSibling}(_,w),!1)}r[n.index]=o=af(a,r,h,n),uh(r,o)}return new uE(o,n,r)}class Lv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Lv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,h=[];for(let _=0;_<a;_++){const w=o.getByIndex(_);h.push(this.queries[w.indexInDeclarationView].clone())}return new Vv(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==EE(r,o).matches&&this.queries[o].setDirty()}}class hE{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class Uv{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const h=null!==o?o.length:0,_=this.getByIndex(a).embeddedTView(r,h);_&&(_.indexInDeclarationView=a,null!==o?o.push(_):o=[_])}return null!==o?new Uv(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Bv{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new Bv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let h=0;h<a.length;h++){const _=a[h];this.matchTNodeWithReadOption(r,o,eb(o,_)),this.matchTNodeWithReadOption(r,o,qn(o,r,_,!1,!1))}else a===Xg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,qn(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const h=this.metadata.read;if(null!==h)if(h===Kg||h===u_||h===Xg&&4&o.type)this.addMatch(o.index,-2);else{const _=qn(o,r,h,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function eb(n,r){const o=n.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function nb(n,r,o,a){return-1===o?function tb(n,r){return 11&n.type?Zf(n,r):4&n.type?l_(n,r):null}(r,n):-2===o?function rb(n,r,o){return o===Kg?Zf(r,n):o===Xg?l_(r,n):o===u_?dE(r,n):void 0}(n,r,a):On(n,n[1],o,r)}function fE(n,r,o,a){const h=r[19].queries[a];if(null===h.matches){const _=n.data,w=o.matches,N=[];for(let V=0;V<w.length;V+=2){const ie=w[V];N.push(ie<0?null:nb(r,_[ie],w[V+1],o.metadata.read))}h.matches=N}return h.matches}function $v(n,r,o,a){const h=n.queries.getByIndex(o),_=h.matches;if(null!==_){const w=fE(n,r,h,o);for(let N=0;N<_.length;N+=2){const V=_[N];if(V>0)a.push(w[N/2]);else{const ie=_[N+1],fe=r[-V];for(let Le=10;Le<fe.length;Le++){const gt=fe[Le];gt[17]===gt[3]&&$v(gt[1],gt,ie,a)}if(null!==fe[9]){const Le=fe[9];for(let gt=0;gt<Le.length;gt++){const $t=Le[gt];$v($t[1],$t,ie,a)}}}}}return a}function pE(n){const r=Qe(),o=Nn(),a=ae();me(a+1);const h=EE(o,a);if(n.dirty&&fi(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const _=h.crossesNgTemplate?$v(o,r,a,[]):fE(o,r,h,a);n.reset(_,wC),n.notifyOnChanges()}return!0}return!1}function gE(n,r,o){const a=Nn();a.firstCreatePass&&(vE(a,new hE(n,r,o),-1),2==(2&r)&&(a.staticViewQueries=!0)),_E(a,Qe(),r)}function mE(n,r,o,a){const h=Nn();if(h.firstCreatePass){const _=K();vE(h,new hE(r,o,a),_.index),function sb(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}_E(h,Qe(),o)}function yE(){return function ib(n,r){return n[19].queries[r].queryList}(Qe(),ae())}function _E(n,r,o){const a=new kv(4==(4&o));ef(n,r,a,a.destroy),null===r[19]&&(r[19]=new Vv),r[19].queries.push(new Lv(a))}function vE(n,r,o){null===n.queries&&(n.queries=new Uv),n.queries.track(new Bv(r,o))}function EE(n,r){return n.queries.getByIndex(r)}function CE(n,r){return l_(n,r)}function h_(...n){}const VE=new uo("Application Initializer");let qv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=h_,this.reject=h_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,h)=>{this.resolve=a,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(mg(_))o.push(_);else if(yg(_)){const w=new Promise((N,V)=>{_.subscribe({complete:N,error:V})});o.push(w)}}Promise.all(o).then(()=>{a()}).catch(h=>{this.reject(h)}),0===o.length&&a(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(de(VE,8))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UE=new uo("AppId",{providedIn:"root",factory:function BE(){return`${Kv()}${Kv()}${Kv()}`}});function Kv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $E=new uo("Platform Initializer"),bb=new uo("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),jE=new uo("appBootstrapListener");let Tb=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Zv=new uo("LocaleId",{providedIn:"root",factory:()=>Mt(Zv,er.Optional|er.SkipSelf)||function wb(){return"undefined"!=typeof $localize&&$localize.locale||Hf}()}),Ib=new uo("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Sb{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let Db=(()=>{class n{compileModuleSync(o){return new Nv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),_=Ka(Jn(o).declarations).reduce((w,N)=>{const V=pt(N);return V&&w.push(new Pv(V)),w},[]);return new Sb(a,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xb=(()=>Promise.resolve(0))();function Yv(n){"undefined"==typeof Zone?xb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Hu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wc(!1),this.onMicrotaskEmpty=new wc(!1),this.onStable=new wc(!1),this.onError=new wc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&o,h.shouldCoalesceRunChangeDetection=a,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Mb(){let n=kr.requestAnimationFrame,r=kr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Nb(n){const r=()=>{!function Pb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(kr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Xv(n),n.isCheckStableRunning=!0,Qv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,h,_,w,N)=>{try{return HE(n),o.invokeTask(h,_,w,N)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),GE(n)}},onInvoke:(o,a,h,_,w,N,V)=>{try{return HE(n),o.invoke(h,_,w,N,V)}finally{n.shouldCoalesceRunChangeDetection&&r(),GE(n)}},onHasTask:(o,a,h,_)=>{o.hasTask(h,_),a===h&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,Xv(n),Qv(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,a,h,_)=>(o.handleError(h,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,h){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+h,r,Rb,h_,h_);try{return _.runTask(w,o,a)}finally{_.cancelTask(w)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const Rb={};function Qv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function HE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function GE(n){n._nesting--,Qv(n)}class Ob{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wc,this.onMicrotaskEmpty=new wc,this.onStable=new wc,this.onError=new wc}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,h){return r.apply(o,a)}}let zE=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hu.assertNotInAngularZone(),Yv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,h){let _=-1;a&&a>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:h})}whenStable(o,a,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,a,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(de(Hu))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac}),n})(),kb=(()=>{class n{constructor(){this._applications=new Map,Jv.addToWindow(this)}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return Jv.findTestabilityInTree(this,o,a)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class Fb{addToWindow(r){}findTestabilityInTree(r,o,a){return null}}function Lb(n){Jv=n}let Jv=new Fb,Nh=null;const WE=new uo("AllowMultipleToken"),qE=new uo("PlatformOnDestroy");class Bb{constructor(r,o){this.name=r,this.token=o}}function KE(n,r,o=[]){const a=`Platform: ${r}`,h=new uo(a);return(_=[])=>{let w=e0();if(!w||w.injector.get(WE,!1)){const N=[...o,..._,{provide:h,useValue:!0}];n?n(N):function $b(n){if(Nh&&!Nh.get(WE,!1))throw new ln(400,"");Nh=n;const r=n.get(ZE),o=n.get($E,null);o&&o.forEach(a=>a())}(function Hb(n=[],r){return Ol.create({name:r,providers:[{provide:df,useValue:"platform"},{provide:qE,useValue:()=>Nh=null},...n]})}(N,a))}return function jb(n){const r=e0();if(!r)throw new ln(401,"");return r}()}}function e0(){var n;return null!==(n=null==Nh?void 0:Nh.get(ZE))&&void 0!==n?n:null}let ZE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const N=function Gb(n,r){let o;return o="noop"===n?new Ob:("zone.js"===n?void 0:n)||new Hu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),o}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),V=[{provide:Hu,useValue:N}];return N.run(()=>{const ie=Ol.create({providers:V,parent:this.injector,name:o.moduleType.name}),fe=o.create(ie),Le=fe.injector.get(Ra,null);if(!Le)throw new ln(402,"");return N.runOutsideAngular(()=>{const gt=N.onError.subscribe({next:$t=>{Le.handleError($t)}});fe.onDestroy(()=>{n0(this._modules,fe),gt.unsubscribe()})}),function zb(n,r,o){try{const a=o();return mg(a)?a.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(Le,N,()=>{const gt=fe.injector.get(qv);return gt.runInitializers(),gt.donePromise.then(()=>(function _v(n){lr(n,"Expected localeId to be defined"),"string"==typeof n&&(Wy=n.toLowerCase().replace(/_/g,"-"))}(fe.injector.get(Zv,Hf)||Hf),this._moduleDoBootstrap(fe),fe))})})}bootstrapModule(o,a=[]){const h=YE({},a);return function Vb(n,r,o){const a=new Nv(o);return Promise.resolve(a)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(o){const a=o.injector.get(t0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>a.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new ln(403,"");o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ln(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(qE,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(de(Ol))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function YE(n,r){return Array.isArray(r)?r.reduce(YE,n):Object.assign(Object.assign({},n),r)}let t0=(()=>{class n{constructor(o,a,h,_){this._zone=o,this._injector=a,this._exceptionHandler=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new he.y(V=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{V.next(this._stable),V.complete()})}),N=new he.y(V=>{let ie;this._zone.runOutsideAngular(()=>{ie=this._zone.onStable.subscribe(()=>{Hu.assertNotInAngularZone(),Yv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,V.next(!0))})})});const fe=this._zone.onUnstable.subscribe(()=>{Hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{V.next(!1)}))});return()=>{ie.unsubscribe(),fe.unsubscribe()}});this.isStable=(0,oe.T)(w,N.pipe((0,je.B)()))}bootstrap(o,a){if(!this._initStatus.done)throw new ln(405,"");let h;h=o instanceof U0?o:this._injector.get(o_).resolveComponentFactory(o),this.componentTypes.push(h.componentType);const _=function Ub(n){return n.isBoundToModule}(h)?void 0:this._injector.get(Yf),N=h.create(Ol.NULL,[],a||h.selector,_),V=N.location.nativeElement,ie=N.injector.get(zE,null),fe=ie&&N.injector.get(kb);return ie&&fe&&fe.registerApplication(V,ie),N.onDestroy(()=>{this.detachView(N.hostView),n0(this.components,N),fe&&fe.unregisterApplication(V)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new ln(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;n0(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(jE,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(de(Hu),de(Ol),de(Ra),de(qv))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function n0(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let XE=!0,JE=!1;function qb(){return JE=!0,XE}function Kb(){if(JE)throw new Error("Cannot enable prod mode after platform setup.");XE=!1}let Zb=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yb,n})();function Yb(n){return function Qb(n,r,o){if(ji(n)&&!o){const a=ti(n.index,r);return new Zg(a,a)}return 47&n.type?new Zg(r[16],r):null}(K(),Qe(),16==(16&n))}class rC{constructor(){}supports(r){return Yc(r)}create(r){return new rT(r)}}const nT=(n,r)=>r;class rT{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||nT}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,h=0,_=null;for(;o||a;){const w=!a||o&&o.currentIndex<sC(a,h,_)?o:a,N=sC(w,h,_),V=w.currentIndex;if(w===a)h--,a=a._nextRemoved;else if(o=o._next,null==w.previousIndex)h++;else{_||(_=[]);const ie=N-h,fe=V-h;if(ie!=fe){for(let gt=0;gt<ie;gt++){const $t=gt<_.length?_[gt]:_[gt]=0,Pn=$t+gt;fe<=Pn&&Pn<ie&&(_[gt]=$t+1)}_[w.previousIndex]=fe-ie}}N!==V&&r(w,N,V)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Yc(r))throw new ln(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,_,w,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let N=0;N<this.length;N++)_=r[N],w=this._trackByFn(N,_),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,_,w,N)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,w,N),a=!0),o=o._next}else h=0,function G_(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[hc()]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,N=>{w=this._trackByFn(h,N),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,N,w,h)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,w,h),a=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,h){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,_,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,h))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,_,h)):r=this._addAfter(new iT(o,a),_,h),r}_verifyReinsertion(r,o,a,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==_?r=this._reinsertAfter(_,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,_=r._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const h=null===o?this._itHead:o._next;return r._next=h,r._prev=o,null===h?this._itTail=r:h._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new iC),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class iT{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sT{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class iC{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new sT,this.map.set(o,a)),a.add(r)}get(r,o){const h=this.map.get(r);return h?h.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sC(n,r,o){const a=n.previousIndex;if(null===a)return a;let h=0;return o&&a<o.length&&(h=o[a]),a+r+h}class oC{constructor(){}supports(r){return r instanceof Map||yh(r)}create(){return new oT}}class oT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||yh(r)))throw new ln(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const _=this._getOrCreateRecordForKey(h,a);o=this._insertBeforeOrAppend(o,_)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,o);const _=h._prev,w=h._next;return _&&(_._next=w),w&&(w._prev=_),h._next=null,h._prev=null,h}const a=new aT(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class aT{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aC(){return new l0([new rC])}let l0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(null!=a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||aC()),deps:[[n,new ni,new vi]]}}find(o){const a=this.factories.find(h=>h.supports(o));if(null!=a)return a;throw new ln(901,"")}}return n.\u0275prov=Ot({token:n,providedIn:"root",factory:aC}),n})();function lC(){return new u0([new oC])}let u0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||lC()),deps:[[n,new ni,new vi]]}}find(o){const a=this.factories.find(_=>_.supports(o));if(a)return a;throw new ln(901,"")}}return n.\u0275prov=Ot({token:n,providedIn:"root",factory:lC}),n})();const cT=KE(null,"core",[]);let dT=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(de(t0))},n.\u0275mod=un({type:n}),n.\u0275inj=St({}),n})()},2382:(Zn,It,j)=>{j.d(It,{Wl:()=>Nt,Fj:()=>xe,qu:()=>fo,NI:()=>ts,oH:()=>Is,u:()=>qs,cw:()=>Vr,sg:()=>_s,u5:()=>Wr,JJ:()=>nt,JL:()=>dt,F:()=>fs,On:()=>rs,_:()=>Wi,UX:()=>Js,kI:()=>Bt,_Y:()=>Et});var g=j(5e3),k=j(9808),he=j(8306),oe=j(4742),je=j(8421),He=j(7669),ht=j(5403),We=j(3268),at=j(1810),Pe=j(8996),vt=j(4004);let wn=(()=>{class Y{constructor(L,ye){this._renderer=L,this._elementRef=ye,this.onChange=Qe=>{},this.onTouched=()=>{}}setProperty(L,ye){this._renderer.setProperty(this._elementRef.nativeElement,L,ye)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return Y.\u0275fac=function(L){return new(L||Y)(g.Y36(g.Qsj),g.Y36(g.SBq))},Y.\u0275dir=g.lG2({type:Y}),Y})(),_t=(()=>{class Y extends wn{}return Y.\u0275fac=function(){let G;return function(ye){return(G||(G=g.n5z(Y)))(ye||Y)}}(),Y.\u0275dir=g.lG2({type:Y,features:[g.qOj]}),Y})();const ln=new g.OlP("NgValueAccessor"),Dn={provide:ln,useExisting:(0,g.Gpc)(()=>Nt),multi:!0};let Nt=(()=>{class Y extends _t{writeValue(L){this.setProperty("checked",L)}}return Y.\u0275fac=function(){let G;return function(ye){return(G||(G=g.n5z(Y)))(ye||Y)}}(),Y.\u0275dir=g.lG2({type:Y,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(L,ye){1&L&&g.NdJ("change",function(Nn){return ye.onChange(Nn.target.checked)})("blur",function(){return ye.onTouched()})},features:[g._Bn([Dn]),g.qOj]}),Y})();const Jt={provide:ln,useExisting:(0,g.Gpc)(()=>xe),multi:!0},dn=new g.OlP("CompositionEventMode");let xe=(()=>{class Y extends wn{constructor(L,ye,Qe){super(L,ye),this._compositionMode=Qe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Un(){const Y=(0,k.q)()?(0,k.q)().getUserAgent():"";return/android (\d+)/.test(Y.toLowerCase())}())}writeValue(L){this.setProperty("value",null==L?"":L)}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return Y.\u0275fac=function(L){return new(L||Y)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(dn,8))},Y.\u0275dir=g.lG2({type:Y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,ye){1&L&&g.NdJ("input",function(Nn){return ye._handleInput(Nn.target.value)})("blur",function(){return ye.onTouched()})("compositionstart",function(){return ye._compositionStart()})("compositionend",function(Nn){return ye._compositionEnd(Nn.target.value)})},features:[g._Bn([Jt]),g.qOj]}),Y})();function Ge(Y){return null==Y||0===Y.length}function wt(Y){return null!=Y&&"number"==typeof Y.length}const on=new g.OlP("NgValidators"),Ht=new g.OlP("NgAsyncValidators"),Oe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Bt{static min(G){return function Re(Y){return G=>{if(Ge(G.value)||Ge(Y))return null;const L=parseFloat(G.value);return!isNaN(L)&&L<Y?{min:{min:Y,actual:G.value}}:null}}(G)}static max(G){return function bt(Y){return G=>{if(Ge(G.value)||Ge(Y))return null;const L=parseFloat(G.value);return!isNaN(L)&&L>Y?{max:{max:Y,actual:G.value}}:null}}(G)}static required(G){return function Je(Y){return Ge(Y.value)?{required:!0}:null}(G)}static requiredTrue(G){return function Ft(Y){return!0===Y.value?null:{required:!0}}(G)}static email(G){return function Dt(Y){return Ge(Y.value)||Oe.test(Y.value)?null:{email:!0}}(G)}static minLength(G){return function Lt(Y){return G=>Ge(G.value)||!wt(G.value)?null:G.value.length<Y?{minlength:{requiredLength:Y,actualLength:G.value.length}}:null}(G)}static maxLength(G){return function Yt(Y){return G=>wt(G.value)&&G.value.length>Y?{maxlength:{requiredLength:Y,actualLength:G.value.length}}:null}(G)}static pattern(G){return function sr(Y){if(!Y)return lr;let G,L;return"string"==typeof Y?(L="","^"!==Y.charAt(0)&&(L+="^"),L+=Y,"$"!==Y.charAt(Y.length-1)&&(L+="$"),G=new RegExp(L)):(L=Y.toString(),G=Y),ye=>{if(Ge(ye.value))return null;const Qe=ye.value;return G.test(Qe)?null:{pattern:{requiredPattern:L,actualValue:Qe}}}}(G)}static nullValidator(G){return null}static compose(G){return St(G)}static composeAsync(G){return Qt(G)}}function lr(Y){return null}function yn(Y){return null!=Y}function br(Y){const G=(0,g.QGY)(Y)?(0,Pe.D)(Y):Y;return(0,g.CqO)(G),G}function mr(Y){let G={};return Y.forEach(L=>{G=null!=L?Object.assign(Object.assign({},G),L):G}),0===Object.keys(G).length?null:G}function Vt(Y,G){return G.map(L=>L(Y))}function it(Y){return Y.map(G=>function Ot(Y){return!Y.validate}(G)?G:L=>G.validate(L))}function St(Y){if(!Y)return null;const G=Y.filter(yn);return 0==G.length?null:function(L){return mr(Vt(L,G))}}function ut(Y){return null!=Y?St(it(Y)):null}function Qt(Y){if(!Y)return null;const G=Y.filter(yn);return 0==G.length?null:function(L){return function Ne(...Y){const G=(0,He.jO)(Y),{args:L,keys:ye}=(0,oe.D)(Y),Qe=new he.y(Nn=>{const{length:ee}=L;if(!ee)return void Nn.complete();const K=new Array(ee);let be=ee,ke=ee;for(let rt=0;rt<ee;rt++){let Kt=!1;(0,je.Xf)(L[rt]).subscribe((0,ht.x)(Nn,xn=>{Kt||(Kt=!0,ke--),K[rt]=xn},()=>be--,void 0,()=>{(!be||!Kt)&&(ke||Nn.next(ye?(0,at.n)(ye,K):K),Nn.complete())}))}});return G?Qe.pipe((0,We.Z)(G)):Qe}(Vt(L,G).map(br)).pipe((0,vt.U)(mr))}}function xt(Y){return null!=Y?Qt(it(Y)):null}function en(Y,G){return null===Y?[G]:Array.isArray(Y)?[...Y,G]:[Y,G]}function Wn(Y){return Y._rawValidators}function or(Y){return Y._rawAsyncValidators}function dr(Y){return Y?Array.isArray(Y)?Y:[Y]:[]}function Yr(Y,G){return Array.isArray(Y)?Y.includes(G):Y===G}function ii(Y,G){const L=dr(G);return dr(Y).forEach(Qe=>{Yr(L,Qe)||L.push(Qe)}),L}function er(Y,G){return dr(G).filter(L=>!Yr(Y,L))}class Gr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(G){this._rawValidators=G||[],this._composedValidatorFn=ut(this._rawValidators)}_setAsyncValidators(G){this._rawAsyncValidators=G||[],this._composedAsyncValidatorFn=xt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(G){this._onDestroyCallbacks.push(G)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(G=>G()),this._onDestroyCallbacks=[]}reset(G){this.control&&this.control.reset(G)}hasError(G,L){return!!this.control&&this.control.hasError(G,L)}getError(G,L){return this.control?this.control.getError(G,L):null}}class Mr extends Gr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Rr extends Gr{get formDirective(){return null}get path(){return null}}class is{constructor(G){this._cd=G}is(G){var L,ye,Qe;return"submitted"===G?!!(null===(L=this._cd)||void 0===L?void 0:L.submitted):!!(null===(Qe=null===(ye=this._cd)||void 0===ye?void 0:ye.control)||void 0===Qe?void 0:Qe[G])}}let nt=(()=>{class Y extends is{constructor(L){super(L)}}return Y.\u0275fac=function(L){return new(L||Y)(g.Y36(Mr,2))},Y.\u0275dir=g.lG2({type:Y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,ye){2&L&&g.ekj("ng-untouched",ye.is("untouched"))("ng-touched",ye.is("touched"))("ng-pristine",ye.is("pristine"))("ng-dirty",ye.is("dirty"))("ng-valid",ye.is("valid"))("ng-invalid",ye.is("invalid"))("ng-pending",ye.is("pending"))},features:[g.qOj]}),Y})(),dt=(()=>{class Y extends is{constructor(L){super(L)}}return Y.\u0275fac=function(L){return new(L||Y)(g.Y36(Rr,10))},Y.\u0275dir=g.lG2({type:Y,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,ye){2&L&&g.ekj("ng-untouched",ye.is("untouched"))("ng-touched",ye.is("touched"))("ng-pristine",ye.is("pristine"))("ng-dirty",ye.is("dirty"))("ng-valid",ye.is("valid"))("ng-invalid",ye.is("invalid"))("ng-pending",ye.is("pending"))("ng-submitted",ye.is("submitted"))},features:[g.qOj]}),Y})();function Qn(Y,G){return[...G.path,Y]}function yr(Y,G){Ue(Y,G),G.valueAccessor.writeValue(Y.value),function un(Y,G){G.valueAccessor.registerOnChange(L=>{Y._pendingValue=L,Y._pendingChange=!0,Y._pendingDirty=!0,"change"===Y.updateOn&&Be(Y,G)})}(Y,G),function Me(Y,G){const L=(ye,Qe)=>{G.valueAccessor.writeValue(ye),Qe&&G.viewToModelUpdate(ye)};Y.registerOnChange(L),G._registerOnDestroy(()=>{Y._unregisterOnChange(L)})}(Y,G),function Ut(Y,G){G.valueAccessor.registerOnTouched(()=>{Y._pendingTouched=!0,"blur"===Y.updateOn&&Y._pendingChange&&Be(Y,G),"submit"!==Y.updateOn&&Y.markAsTouched()})}(Y,G),function Xe(Y,G){if(G.valueAccessor.setDisabledState){const L=ye=>{G.valueAccessor.setDisabledState(ye)};Y.registerOnDisabledChange(L),G._registerOnDestroy(()=>{Y._unregisterOnDisabledChange(L)})}}(Y,G)}function Fr(Y,G,L=!0){const ye=()=>{};G.valueAccessor&&(G.valueAccessor.registerOnChange(ye),G.valueAccessor.registerOnTouched(ye)),ft(Y,G),Y&&(G._invokeOnDestroyCallbacks(),Y._registerOnCollectionChange(()=>{}))}function Lr(Y,G){Y.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(G)})}function Ue(Y,G){const L=Wn(Y);null!==G.validator?Y.setValidators(en(L,G.validator)):"function"==typeof L&&Y.setValidators([L]);const ye=or(Y);null!==G.asyncValidator?Y.setAsyncValidators(en(ye,G.asyncValidator)):"function"==typeof ye&&Y.setAsyncValidators([ye]);const Qe=()=>Y.updateValueAndValidity();Lr(G._rawValidators,Qe),Lr(G._rawAsyncValidators,Qe)}function ft(Y,G){let L=!1;if(null!==Y){if(null!==G.validator){const Qe=Wn(Y);if(Array.isArray(Qe)&&Qe.length>0){const Nn=Qe.filter(ee=>ee!==G.validator);Nn.length!==Qe.length&&(L=!0,Y.setValidators(Nn))}}if(null!==G.asyncValidator){const Qe=or(Y);if(Array.isArray(Qe)&&Qe.length>0){const Nn=Qe.filter(ee=>ee!==G.asyncValidator);Nn.length!==Qe.length&&(L=!0,Y.setAsyncValidators(Nn))}}}const ye=()=>{};return Lr(G._rawValidators,ye),Lr(G._rawAsyncValidators,ye),L}function Be(Y,G){Y._pendingDirty&&Y.markAsDirty(),Y.setValue(Y._pendingValue,{emitModelToViewChange:!1}),G.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1}function Ae(Y,G){Ue(Y,G)}function Zi(Y,G){if(!Y.hasOwnProperty("model"))return!1;const L=Y.model;return!!L.isFirstChange()||!Object.is(G,L.currentValue)}function Ns(Y,G){Y._syncPendingControls(),G.forEach(L=>{const ye=L.control;"submit"===ye.updateOn&&ye._pendingChange&&(L.viewToModelUpdate(ye._pendingValue),ye._pendingChange=!1)})}function Gi(Y,G){if(!G)return null;let L,ye,Qe;return Array.isArray(G),G.forEach(Nn=>{Nn.constructor===xe?L=Nn:function us(Y){return Object.getPrototypeOf(Y.constructor)===_t}(Nn)?ye=Nn:Qe=Nn}),Qe||ye||L||null}function li(Y,G){const L=Y.indexOf(G);L>-1&&Y.splice(L,1)}const _n="VALID",Tr="INVALID",hi="PENDING",Ci="DISABLED";function zi(Y){return(Ii(Y)?Y.validators:Y)||null}function ds(Y){return Array.isArray(Y)?ut(Y):Y||null}function Ri(Y,G){return(Ii(G)?G.asyncValidators:Y)||null}function Yi(Y){return Array.isArray(Y)?xt(Y):Y||null}function Ii(Y){return null!=Y&&!Array.isArray(Y)&&"object"==typeof Y}const zr=Y=>Y instanceof ts,Cs=Y=>Y instanceof Vr,es=Y=>Y instanceof bi;function hs(Y){return zr(Y)?Y.value:Y.getRawValue()}function $r(Y,G){const L=Cs(Y),ye=Y.controls;if(!(L?Object.keys(ye):ye).length)throw new g.vHH(1e3,"");if(!ye[G])throw new g.vHH(1001,"")}function wr(Y,G){Cs(Y),Y._forEachChild((ye,Qe)=>{if(void 0===G[Qe])throw new g.vHH(1002,"")})}class Ir{constructor(G,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=G,this._rawAsyncValidators=L,this._composedValidatorFn=ds(this._rawValidators),this._composedAsyncValidatorFn=Yi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(G){this._rawValidators=this._composedValidatorFn=G}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(G){this._rawAsyncValidators=this._composedAsyncValidatorFn=G}get parent(){return this._parent}get valid(){return this.status===_n}get invalid(){return this.status===Tr}get pending(){return this.status==hi}get disabled(){return this.status===Ci}get enabled(){return this.status!==Ci}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(G){this._rawValidators=G,this._composedValidatorFn=ds(G)}setAsyncValidators(G){this._rawAsyncValidators=G,this._composedAsyncValidatorFn=Yi(G)}addValidators(G){this.setValidators(ii(G,this._rawValidators))}addAsyncValidators(G){this.setAsyncValidators(ii(G,this._rawAsyncValidators))}removeValidators(G){this.setValidators(er(G,this._rawValidators))}removeAsyncValidators(G){this.setAsyncValidators(er(G,this._rawAsyncValidators))}hasValidator(G){return Yr(this._rawValidators,G)}hasAsyncValidator(G){return Yr(this._rawAsyncValidators,G)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(G={}){this.touched=!0,this._parent&&!G.onlySelf&&this._parent.markAsTouched(G)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(G=>G.markAllAsTouched())}markAsUntouched(G={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}markAsDirty(G={}){this.pristine=!1,this._parent&&!G.onlySelf&&this._parent.markAsDirty(G)}markAsPristine(G={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}markAsPending(G={}){this.status=hi,!1!==G.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!G.onlySelf&&this._parent.markAsPending(G)}disable(G={}){const L=this._parentMarkedDirty(G.onlySelf);this.status=Ci,this.errors=null,this._forEachChild(ye=>{ye.disable(Object.assign(Object.assign({},G),{onlySelf:!0}))}),this._updateValue(),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},G),{skipPristineCheck:L})),this._onDisabledChange.forEach(ye=>ye(!0))}enable(G={}){const L=this._parentMarkedDirty(G.onlySelf);this.status=_n,this._forEachChild(ye=>{ye.enable(Object.assign(Object.assign({},G),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},G),{skipPristineCheck:L})),this._onDisabledChange.forEach(ye=>ye(!1))}_updateAncestors(G){this._parent&&!G.onlySelf&&(this._parent.updateValueAndValidity(G),G.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(G){this._parent=G}updateValueAndValidity(G={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_n||this.status===hi)&&this._runAsyncValidator(G.emitEvent)),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!G.onlySelf&&this._parent.updateValueAndValidity(G)}_updateTreeValidity(G={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(G)),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ci:_n}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(G){if(this.asyncValidator){this.status=hi,this._hasOwnPendingAsyncValidator=!0;const L=br(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(ye=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ye,{emitEvent:G})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(G,L={}){this.errors=G,this._updateControlsErrors(!1!==L.emitEvent)}get(G){return function gs(Y,G,L){if(null==G||(Array.isArray(G)||(G=G.split(L)),Array.isArray(G)&&0===G.length))return null;let ye=Y;return G.forEach(Qe=>{ye=Cs(ye)?ye.controls.hasOwnProperty(Qe)?ye.controls[Qe]:null:es(ye)&&ye.at(Qe)||null}),ye}(this,G,".")}getError(G,L){const ye=L?this.get(L):this;return ye&&ye.errors?ye.errors[G]:null}hasError(G,L){return!!this.getError(G,L)}get root(){let G=this;for(;G._parent;)G=G._parent;return G}_updateControlsErrors(G){this.status=this._calculateStatus(),G&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(G)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Ci:this.errors?Tr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hi)?hi:this._anyControlsHaveStatus(Tr)?Tr:_n}_anyControlsHaveStatus(G){return this._anyControls(L=>L.status===G)}_anyControlsDirty(){return this._anyControls(G=>G.dirty)}_anyControlsTouched(){return this._anyControls(G=>G.touched)}_updatePristine(G={}){this.pristine=!this._anyControlsDirty(),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}_updateTouched(G={}){this.touched=this._anyControlsTouched(),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}_isBoxedValue(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}_registerOnCollectionChange(G){this._onCollectionChange=G}_setUpdateStrategy(G){Ii(G)&&null!=G.updateOn&&(this._updateOn=G.updateOn)}_parentMarkedDirty(G){return!G&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ts extends Ir{constructor(G=null,L,ye){super(zi(L),Ri(ye,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(G),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ii(L)&&L.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(G)?G.value:G)}setValue(G,L={}){this.value=this._pendingValue=G,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(ye=>ye(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(G,L={}){this.setValue(G,L)}reset(G=this.defaultValue,L={}){this._applyFormState(G),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(G){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(G){this._onChange.push(G)}_unregisterOnChange(G){li(this._onChange,G)}registerOnDisabledChange(G){this._onDisabledChange.push(G)}_unregisterOnDisabledChange(G){li(this._onDisabledChange,G)}_forEachChild(G){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(G){this._isBoxedValue(G)?(this.value=this._pendingValue=G.value,G.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=G}}class Vr extends Ir{constructor(G,L,ye){super(zi(L),Ri(ye,L)),this.controls=G,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(G,L){return this.controls[G]?this.controls[G]:(this.controls[G]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(G,L,ye={}){this.registerControl(G,L),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}removeControl(G,L={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(G,L,ye={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],L&&this.registerControl(G,L),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}contains(G){return this.controls.hasOwnProperty(G)&&this.controls[G].enabled}setValue(G,L={}){wr(this,G),Object.keys(G).forEach(ye=>{$r(this,ye),this.controls[ye].setValue(G[ye],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(G,L={}){null!=G&&(Object.keys(G).forEach(ye=>{this.controls[ye]&&this.controls[ye].patchValue(G[ye],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(G={},L={}){this._forEachChild((ye,Qe)=>{ye.reset(G[Qe],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(G,L,ye)=>(G[ye]=hs(L),G))}_syncPendingControls(){let G=this._reduceChildren(!1,(L,ye)=>!!ye._syncPendingControls()||L);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){Object.keys(this.controls).forEach(L=>{const ye=this.controls[L];ye&&G(ye,L)})}_setUpControls(){this._forEachChild(G=>{G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(G){for(const L of Object.keys(this.controls)){const ye=this.controls[L];if(this.contains(L)&&G(ye))return!0}return!1}_reduceValue(){return this._reduceChildren({},(G,L,ye)=>((L.enabled||this.disabled)&&(G[ye]=L.value),G))}_reduceChildren(G,L){let ye=G;return this._forEachChild((Qe,Nn)=>{ye=L(ye,Qe,Nn)}),ye}_allControlsDisabled(){for(const G of Object.keys(this.controls))if(this.controls[G].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class bi extends Ir{constructor(G,L,ye){super(zi(L),Ri(ye,L)),this.controls=G,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(G){return this.controls[G]}push(G,L={}){this.controls.push(G),this._registerControl(G),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(G,L,ye={}){this.controls.splice(G,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:ye.emitEvent})}removeAt(G,L={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),this.controls.splice(G,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(G,L,ye={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),this.controls.splice(G,1),L&&(this.controls.splice(G,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(G,L={}){wr(this,G),G.forEach((ye,Qe)=>{$r(this,Qe),this.at(Qe).setValue(ye,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(G,L={}){null!=G&&(G.forEach((ye,Qe)=>{this.at(Qe)&&this.at(Qe).patchValue(ye,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(G=[],L={}){this._forEachChild((ye,Qe)=>{ye.reset(G[Qe],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(G=>hs(G))}clear(G={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:G.emitEvent}))}_syncPendingControls(){let G=this.controls.reduce((L,ye)=>!!ye._syncPendingControls()||L,!1);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){this.controls.forEach((L,ye)=>{G(L,ye)})}_updateValue(){this.value=this.controls.filter(G=>G.enabled||this.disabled).map(G=>G.value)}_anyControls(G){return this.controls.some(L=>L.enabled&&G(L))}_setUpControls(){this._forEachChild(G=>this._registerControl(G))}_allControlsDisabled(){for(const G of this.controls)if(G.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(G){G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)}}const Ws={provide:Rr,useExisting:(0,g.Gpc)(()=>fs)},Fi=(()=>Promise.resolve(null))();let fs=(()=>{class Y extends Rr{constructor(L,ye){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new Vr({},ut(L),xt(ye))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){Fi.then(()=>{const ye=this._findContainer(L.path);L.control=ye.registerControl(L.name,L.control),yr(L.control,L),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){Fi.then(()=>{const ye=this._findContainer(L.path);ye&&ye.removeControl(L.name),this._directives.delete(L)})}addFormGroup(L){Fi.then(()=>{const ye=this._findContainer(L.path),Qe=new Vr({});Ae(Qe,L),ye.registerControl(L.name,Qe),Qe.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){Fi.then(()=>{const ye=this._findContainer(L.path);ye&&ye.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,ye){Fi.then(()=>{this.form.get(L.path).setValue(ye)})}setValue(L){this.control.setValue(L)}onSubmit(L){return this.submitted=!0,Ns(this.form,this._directives),this.ngSubmit.emit(L),!1}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}}return Y.\u0275fac=function(L){return new(L||Y)(g.Y36(on,10),g.Y36(Ht,10))},Y.\u0275dir=g.lG2({type:Y,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(L,ye){1&L&&g.NdJ("submit",function(Nn){return ye.onSubmit(Nn)})("reset",function(){return ye.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Ws]),g.qOj]}),Y})();const lo={provide:Mr,useExisting:(0,g.Gpc)(()=>rs)},Ts=(()=>Promise.resolve(null))();let rs=(()=>{class Y extends Mr{constructor(L,ye,Qe,Nn,ee){super(),this._changeDetectorRef=ee,this.control=new ts,this._registered=!1,this.update=new g.vpe,this._parent=L,this._setValidators(ye),this._setAsyncValidators(Qe),this.valueAccessor=Gi(0,Nn)}ngOnChanges(L){if(this._checkForErrors(),!this._registered||"name"in L){if(this._registered&&(this._checkName(),this.formDirective)){const ye=L.name.previousValue;this.formDirective.removeControl({name:ye,path:this._getPath(ye)})}this._setUpControl()}"isDisabled"in L&&this._updateDisabled(L),Zi(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){yr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){Ts.then(()=>{var ye;this.control.setValue(L,{emitViewToModelChange:!1}),null===(ye=this._changeDetectorRef)||void 0===ye||ye.markForCheck()})}_updateDisabled(L){const ye=L.isDisabled.currentValue,Qe=""===ye||ye&&"false"!==ye;Ts.then(()=>{var Nn;Qe&&!this.control.disabled?this.control.disable():!Qe&&this.control.disabled&&this.control.enable(),null===(Nn=this._changeDetectorRef)||void 0===Nn||Nn.markForCheck()})}_getPath(L){return this._parent?Qn(L,this._parent):[L]}}return Y.\u0275fac=function(L){return new(L||Y)(g.Y36(Rr,9),g.Y36(on,10),g.Y36(Ht,10),g.Y36(ln,10),g.Y36(g.sBO,8))},Y.\u0275dir=g.lG2({type:Y,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([lo]),g.qOj,g.TTD]}),Y})(),Et=(()=>{class Y{}return Y.\u0275fac=function(L){return new(L||Y)},Y.\u0275dir=g.lG2({type:Y,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Y})();const vn={provide:ln,useExisting:(0,g.Gpc)(()=>Wi),multi:!0};let Ar=(()=>{class Y{}return Y.\u0275fac=function(L){return new(L||Y)},Y.\u0275mod=g.oAB({type:Y}),Y.\u0275inj=g.cJS({}),Y})(),Qr=(()=>{class Y{constructor(){this._accessors=[]}add(L,ye){this._accessors.push([L,ye])}remove(L){for(let ye=this._accessors.length-1;ye>=0;--ye)if(this._accessors[ye][1]===L)return void this._accessors.splice(ye,1)}select(L){this._accessors.forEach(ye=>{this._isSameGroup(ye,L)&&ye[1]!==L&&ye[1].fireUncheck(L.value)})}_isSameGroup(L,ye){return!!L[0].control&&L[0]._parent===ye._control._parent&&L[1].name===ye.name}}return Y.\u0275fac=function(L){return new(L||Y)},Y.\u0275prov=g.Yz7({token:Y,factory:Y.\u0275fac,providedIn:Ar}),Y})(),Wi=(()=>{class Y extends _t{constructor(L,ye,Qe,Nn){super(L,ye),this._registry=Qe,this._injector=Nn,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Mr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(L){this._state=L===this.value,this.setProperty("checked",this._state)}registerOnChange(L){this._fn=L,this.onChange=()=>{L(this.value),this._registry.select(this)}}fireUncheck(L){this.writeValue(L)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return Y.\u0275fac=function(L){return new(L||Y)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Qr),g.Y36(g.zs3))},Y.\u0275dir=g.lG2({type:Y,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(L,ye){1&L&&g.NdJ("change",function(){return ye.onChange()})("blur",function(){return ye.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[g._Bn([vn]),g.qOj]}),Y})();const Jr=new g.OlP("NgModelWithFormControlWarning"),ps={provide:Mr,useExisting:(0,g.Gpc)(()=>Is)};let Is=(()=>{class Y extends Mr{constructor(L,ye,Qe,Nn){super(),this._ngModelWarningConfig=Nn,this.update=new g.vpe,this._ngModelWarningSent=!1,this._setValidators(L),this._setAsyncValidators(ye),this.valueAccessor=Gi(0,Qe)}set isDisabled(L){}ngOnChanges(L){if(this._isControlChanged(L)){const ye=L.form.previousValue;ye&&Fr(ye,this,!1),yr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Zi(L,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Fr(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_isControlChanged(L){return L.hasOwnProperty("form")}}return Y._ngModelWarningSentOnce=!1,Y.\u0275fac=function(L){return new(L||Y)(g.Y36(on,10),g.Y36(Ht,10),g.Y36(ln,10),g.Y36(Jr,8))},Y.\u0275dir=g.lG2({type:Y,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[g._Bn([ps]),g.qOj,g.TTD]}),Y})();const Xo={provide:Rr,useExisting:(0,g.Gpc)(()=>_s)};let _s=(()=>{class Y extends Rr{constructor(L,ye){super(),this.validators=L,this.asyncValidators=ye,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(L),this._setAsyncValidators(ye)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ft(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const ye=this.form.get(L.path);return yr(ye,L),ye.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),ye}getControl(L){return this.form.get(L.path)}removeControl(L){Fr(L.control||null,L,!1),li(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,ye){this.form.get(L.path).setValue(ye)}onSubmit(L){return this.submitted=!0,Ns(this.form,this.directives),this.ngSubmit.emit(L),!1}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const ye=L.control,Qe=this.form.get(L.path);ye!==Qe&&(Fr(ye||null,L),zr(Qe)&&(yr(Qe,L),L.control=Qe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const ye=this.form.get(L.path);Ae(ye,L),ye.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const ye=this.form.get(L.path);ye&&function pt(Y,G){return ft(Y,G)}(ye,L)&&ye.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ue(this.form,this),this._oldForm&&ft(this._oldForm,this)}_checkFormPresent(){}}return Y.\u0275fac=function(L){return new(L||Y)(g.Y36(on,10),g.Y36(Ht,10))},Y.\u0275dir=g.lG2({type:Y,selectors:[["","formGroup",""]],hostBindings:function(L,ye){1&L&&g.NdJ("submit",function(Nn){return ye.onSubmit(Nn)})("reset",function(){return ye.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Xo]),g.qOj,g.TTD]}),Y})();const Os={provide:Mr,useExisting:(0,g.Gpc)(()=>qs)};let qs=(()=>{class Y extends Mr{constructor(L,ye,Qe,Nn,ee){super(),this._ngModelWarningConfig=ee,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(ye),this._setAsyncValidators(Qe),this.valueAccessor=Gi(0,Nn)}set isDisabled(L){}ngOnChanges(L){this._added||this._setUpControl(),Zi(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return Qn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return Y._ngModelWarningSentOnce=!1,Y.\u0275fac=function(L){return new(L||Y)(g.Y36(Rr,13),g.Y36(on,10),g.Y36(Ht,10),g.Y36(ln,10),g.Y36(Jr,8))},Y.\u0275dir=g.lG2({type:Y,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Os]),g.qOj,g.TTD]}),Y})(),ns=(()=>{class Y{}return Y.\u0275fac=function(L){return new(L||Y)},Y.\u0275mod=g.oAB({type:Y}),Y.\u0275inj=g.cJS({imports:[[Ar]]}),Y})(),Wr=(()=>{class Y{}return Y.\u0275fac=function(L){return new(L||Y)},Y.\u0275mod=g.oAB({type:Y}),Y.\u0275inj=g.cJS({imports:[ns]}),Y})(),Js=(()=>{class Y{static withConfig(L){return{ngModule:Y,providers:[{provide:Jr,useValue:L.warnOnNgModelWithFormControl}]}}}return Y.\u0275fac=function(L){return new(L||Y)},Y.\u0275mod=g.oAB({type:Y}),Y.\u0275inj=g.cJS({imports:[ns]}),Y})(),fo=(()=>{class Y{group(L,ye=null){const Qe=this._reduceControls(L);let K,Nn=null,ee=null;return null!=ye&&(function No(Y){return void 0!==Y.asyncValidators||void 0!==Y.validators||void 0!==Y.updateOn}(ye)?(Nn=null!=ye.validators?ye.validators:null,ee=null!=ye.asyncValidators?ye.asyncValidators:null,K=null!=ye.updateOn?ye.updateOn:void 0):(Nn=null!=ye.validator?ye.validator:null,ee=null!=ye.asyncValidator?ye.asyncValidator:null)),new Vr(Qe,{asyncValidators:ee,updateOn:K,validators:Nn})}control(L,ye,Qe){return new ts(L,ye,Qe)}array(L,ye,Qe){const Nn=L.map(ee=>this._createControl(ee));return new bi(Nn,ye,Qe)}_reduceControls(L){const ye={};return Object.keys(L).forEach(Qe=>{ye[Qe]=this._createControl(L[Qe])}),ye}_createControl(L){return zr(L)||Cs(L)||es(L)?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}}return Y.\u0275fac=function(L){return new(L||Y)},Y.\u0275prov=g.Yz7({token:Y,factory:Y.\u0275fac,providedIn:Js}),Y})()},2313:(Zn,It,j)=>{j.d(It,{Dx:()=>Rr,H7:()=>Ue,b2:()=>Yr,q6:()=>or,se:()=>Ft});var g=j(9808),k=j(5e3);class he extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oe extends he{static makeCurrent(){(0,g.HT)(new oe)}onAndCancel(Me,Ae,pt){return Me.addEventListener(Ae,pt,!1),()=>{Me.removeEventListener(Ae,pt,!1)}}dispatchEvent(Me,Ae){Me.dispatchEvent(Ae)}remove(Me){Me.parentNode&&Me.parentNode.removeChild(Me)}createElement(Me,Ae){return(Ae=Ae||this.getDefaultDocument()).createElement(Me)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Me){return Me.nodeType===Node.ELEMENT_NODE}isShadowRoot(Me){return Me instanceof DocumentFragment}getGlobalEventTarget(Me,Ae){return"window"===Ae?window:"document"===Ae?Me:"body"===Ae?Me.body:null}getBaseHref(Me){const Ae=function He(){return je=je||document.querySelector("base"),je?je.getAttribute("href"):null}();return null==Ae?null:function We(Be){ht=ht||document.createElement("a"),ht.setAttribute("href",Be);const Me=ht.pathname;return"/"===Me.charAt(0)?Me:`/${Me}`}(Ae)}resetBaseElement(){je=null}getUserAgent(){return window.navigator.userAgent}getCookie(Me){return(0,g.Mx)(document.cookie,Me)}}let ht,je=null;const at=new k.OlP("TRANSITION_ID"),Pe=[{provide:k.ip1,useFactory:function Ne(Be,Me,Ae){return()=>{Ae.get(k.CZH).donePromise.then(()=>{const pt=(0,g.q)(),sn=Me.querySelectorAll(`style[ng-transition="${Be}"]`);for(let _r=0;_r<sn.length;_r++)pt.remove(sn[_r])})}},deps:[at,g.K0,k.zs3],multi:!0}];class vt{static init(){(0,k.VLi)(new vt)}addToWindow(Me){k.dqk.getAngularTestability=(pt,sn=!0)=>{const _r=Me.findTestabilityInTree(pt,sn);if(null==_r)throw new Error("Could not find testability for element.");return _r},k.dqk.getAllAngularTestabilities=()=>Me.getAllTestabilities(),k.dqk.getAllAngularRootElements=()=>Me.getAllRootElements(),k.dqk.frameworkStabilizers||(k.dqk.frameworkStabilizers=[]),k.dqk.frameworkStabilizers.push(pt=>{const sn=k.dqk.getAllAngularTestabilities();let _r=sn.length,Jn=!1;const oi=function(Zi){Jn=Jn||Zi,_r--,0==_r&&pt(Jn)};sn.forEach(function(Zi){Zi.whenStable(oi)})})}findTestabilityInTree(Me,Ae,pt){if(null==Ae)return null;const sn=Me.getTestability(Ae);return null!=sn?sn:pt?(0,g.q)().isShadowRoot(Ae)?this.findTestabilityInTree(Me,Ae.host,!0):this.findTestabilityInTree(Me,Ae.parentElement,!0):null}}let wn=(()=>{class Be{build(){return new XMLHttpRequest}}return Be.\u0275fac=function(Ae){return new(Ae||Be)},Be.\u0275prov=k.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const _t=new k.OlP("EventManagerPlugins");let ln=(()=>{class Be{constructor(Ae,pt){this._zone=pt,this._eventNameToPlugin=new Map,Ae.forEach(sn=>sn.manager=this),this._plugins=Ae.slice().reverse()}addEventListener(Ae,pt,sn){return this._findPluginFor(pt).addEventListener(Ae,pt,sn)}addGlobalEventListener(Ae,pt,sn){return this._findPluginFor(pt).addGlobalEventListener(Ae,pt,sn)}getZone(){return this._zone}_findPluginFor(Ae){const pt=this._eventNameToPlugin.get(Ae);if(pt)return pt;const sn=this._plugins;for(let _r=0;_r<sn.length;_r++){const Jn=sn[_r];if(Jn.supports(Ae))return this._eventNameToPlugin.set(Ae,Jn),Jn}throw new Error(`No event manager plugin found for event ${Ae}`)}}return Be.\u0275fac=function(Ae){return new(Ae||Be)(k.LFG(_t),k.LFG(k.R0b))},Be.\u0275prov=k.Yz7({token:Be,factory:Be.\u0275fac}),Be})();class Dn{constructor(Me){this._doc=Me}addGlobalEventListener(Me,Ae,pt){const sn=(0,g.q)().getGlobalEventTarget(this._doc,Me);if(!sn)throw new Error(`Unsupported event target ${sn} for event ${Ae}`);return this.addEventListener(sn,Ae,pt)}}let Nt=(()=>{class Be{constructor(){this._stylesSet=new Set}addStyles(Ae){const pt=new Set;Ae.forEach(sn=>{this._stylesSet.has(sn)||(this._stylesSet.add(sn),pt.add(sn))}),this.onStylesAdded(pt)}onStylesAdded(Ae){}getAllStyles(){return Array.from(this._stylesSet)}}return Be.\u0275fac=function(Ae){return new(Ae||Be)},Be.\u0275prov=k.Yz7({token:Be,factory:Be.\u0275fac}),Be})(),Jt=(()=>{class Be extends Nt{constructor(Ae){super(),this._doc=Ae,this._hostNodes=new Map,this._hostNodes.set(Ae.head,[])}_addStylesToHost(Ae,pt,sn){Ae.forEach(_r=>{const Jn=this._doc.createElement("style");Jn.textContent=_r,sn.push(pt.appendChild(Jn))})}addHost(Ae){const pt=[];this._addStylesToHost(this._stylesSet,Ae,pt),this._hostNodes.set(Ae,pt)}removeHost(Ae){const pt=this._hostNodes.get(Ae);pt&&pt.forEach(Un),this._hostNodes.delete(Ae)}onStylesAdded(Ae){this._hostNodes.forEach((pt,sn)=>{this._addStylesToHost(Ae,sn,pt)})}ngOnDestroy(){this._hostNodes.forEach(Ae=>Ae.forEach(Un))}}return Be.\u0275fac=function(Ae){return new(Ae||Be)(k.LFG(g.K0))},Be.\u0275prov=k.Yz7({token:Be,factory:Be.\u0275fac}),Be})();function Un(Be){(0,g.q)().remove(Be)}const dn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xe=/%COMP%/g;function Re(Be,Me,Ae){for(let pt=0;pt<Me.length;pt++){let sn=Me[pt];Array.isArray(sn)?Re(Be,sn,Ae):(sn=sn.replace(xe,Be),Ae.push(sn))}return Ae}function bt(Be){return Me=>{if("__ngUnwrap__"===Me)return Be;!1===Be(Me)&&(Me.preventDefault(),Me.returnValue=!1)}}let Ft=(()=>{class Be{constructor(Ae,pt,sn){this.eventManager=Ae,this.sharedStylesHost=pt,this.appId=sn,this.rendererByCompId=new Map,this.defaultRenderer=new Dt(Ae)}createRenderer(Ae,pt){if(!Ae||!pt)return this.defaultRenderer;switch(pt.encapsulation){case k.ifc.Emulated:{let sn=this.rendererByCompId.get(pt.id);return sn||(sn=new sr(this.eventManager,this.sharedStylesHost,pt,this.appId),this.rendererByCompId.set(pt.id,sn)),sn.applyToHost(Ae),sn}case 1:case k.ifc.ShadowDom:return new lr(this.eventManager,this.sharedStylesHost,Ae,pt);default:if(!this.rendererByCompId.has(pt.id)){const sn=Re(pt.id,pt.styles,[]);this.sharedStylesHost.addStyles(sn),this.rendererByCompId.set(pt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Be.\u0275fac=function(Ae){return new(Ae||Be)(k.LFG(ln),k.LFG(Jt),k.LFG(k.AFp))},Be.\u0275prov=k.Yz7({token:Be,factory:Be.\u0275fac}),Be})();class Dt{constructor(Me){this.eventManager=Me,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Me,Ae){return Ae?document.createElementNS(dn[Ae]||Ae,Me):document.createElement(Me)}createComment(Me){return document.createComment(Me)}createText(Me){return document.createTextNode(Me)}appendChild(Me,Ae){Me.appendChild(Ae)}insertBefore(Me,Ae,pt){Me&&Me.insertBefore(Ae,pt)}removeChild(Me,Ae){Me&&Me.removeChild(Ae)}selectRootElement(Me,Ae){let pt="string"==typeof Me?document.querySelector(Me):Me;if(!pt)throw new Error(`The selector "${Me}" did not match any elements`);return Ae||(pt.textContent=""),pt}parentNode(Me){return Me.parentNode}nextSibling(Me){return Me.nextSibling}setAttribute(Me,Ae,pt,sn){if(sn){Ae=sn+":"+Ae;const _r=dn[sn];_r?Me.setAttributeNS(_r,Ae,pt):Me.setAttribute(Ae,pt)}else Me.setAttribute(Ae,pt)}removeAttribute(Me,Ae,pt){if(pt){const sn=dn[pt];sn?Me.removeAttributeNS(sn,Ae):Me.removeAttribute(`${pt}:${Ae}`)}else Me.removeAttribute(Ae)}addClass(Me,Ae){Me.classList.add(Ae)}removeClass(Me,Ae){Me.classList.remove(Ae)}setStyle(Me,Ae,pt,sn){sn&(k.JOm.DashCase|k.JOm.Important)?Me.style.setProperty(Ae,pt,sn&k.JOm.Important?"important":""):Me.style[Ae]=pt}removeStyle(Me,Ae,pt){pt&k.JOm.DashCase?Me.style.removeProperty(Ae):Me.style[Ae]=""}setProperty(Me,Ae,pt){Me[Ae]=pt}setValue(Me,Ae){Me.nodeValue=Ae}listen(Me,Ae,pt){return"string"==typeof Me?this.eventManager.addGlobalEventListener(Me,Ae,bt(pt)):this.eventManager.addEventListener(Me,Ae,bt(pt))}}class sr extends Dt{constructor(Me,Ae,pt,sn){super(Me),this.component=pt;const _r=Re(sn+"-"+pt.id,pt.styles,[]);Ae.addStyles(_r),this.contentAttr=function Oe(Be){return"_ngcontent-%COMP%".replace(xe,Be)}(sn+"-"+pt.id),this.hostAttr=function Bt(Be){return"_nghost-%COMP%".replace(xe,Be)}(sn+"-"+pt.id)}applyToHost(Me){super.setAttribute(Me,this.hostAttr,"")}createElement(Me,Ae){const pt=super.createElement(Me,Ae);return super.setAttribute(pt,this.contentAttr,""),pt}}class lr extends Dt{constructor(Me,Ae,pt,sn){super(Me),this.sharedStylesHost=Ae,this.hostEl=pt,this.shadowRoot=pt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _r=Re(sn.id,sn.styles,[]);for(let Jn=0;Jn<_r.length;Jn++){const oi=document.createElement("style");oi.textContent=_r[Jn],this.shadowRoot.appendChild(oi)}}nodeOrShadowRoot(Me){return Me===this.hostEl?this.shadowRoot:Me}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Me,Ae){return super.appendChild(this.nodeOrShadowRoot(Me),Ae)}insertBefore(Me,Ae,pt){return super.insertBefore(this.nodeOrShadowRoot(Me),Ae,pt)}removeChild(Me,Ae){return super.removeChild(this.nodeOrShadowRoot(Me),Ae)}parentNode(Me){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Me)))}}let yn=(()=>{class Be extends Dn{constructor(Ae){super(Ae)}supports(Ae){return!0}addEventListener(Ae,pt,sn){return Ae.addEventListener(pt,sn,!1),()=>this.removeEventListener(Ae,pt,sn)}removeEventListener(Ae,pt,sn){return Ae.removeEventListener(pt,sn)}}return Be.\u0275fac=function(Ae){return new(Ae||Be)(k.LFG(g.K0))},Be.\u0275prov=k.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const br=["alt","control","meta","shift"],Vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ot={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},it={alt:Be=>Be.altKey,control:Be=>Be.ctrlKey,meta:Be=>Be.metaKey,shift:Be=>Be.shiftKey};let St=(()=>{class Be extends Dn{constructor(Ae){super(Ae)}supports(Ae){return null!=Be.parseEventName(Ae)}addEventListener(Ae,pt,sn){const _r=Be.parseEventName(pt),Jn=Be.eventCallback(_r.fullKey,sn,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(Ae,_r.domEventName,Jn))}static parseEventName(Ae){const pt=Ae.toLowerCase().split("."),sn=pt.shift();if(0===pt.length||"keydown"!==sn&&"keyup"!==sn)return null;const _r=Be._normalizeKey(pt.pop());let Jn="";if(br.forEach(Zi=>{const us=pt.indexOf(Zi);us>-1&&(pt.splice(us,1),Jn+=Zi+".")}),Jn+=_r,0!=pt.length||0===_r.length)return null;const oi={};return oi.domEventName=sn,oi.fullKey=Jn,oi}static getEventFullKey(Ae){let pt="",sn=function ut(Be){let Me=Be.key;if(null==Me){if(Me=Be.keyIdentifier,null==Me)return"Unidentified";Me.startsWith("U+")&&(Me=String.fromCharCode(parseInt(Me.substring(2),16)),3===Be.location&&Ot.hasOwnProperty(Me)&&(Me=Ot[Me]))}return Vt[Me]||Me}(Ae);return sn=sn.toLowerCase()," "===sn?sn="space":"."===sn&&(sn="dot"),br.forEach(_r=>{_r!=sn&&it[_r](Ae)&&(pt+=_r+".")}),pt+=sn,pt}static eventCallback(Ae,pt,sn){return _r=>{Be.getEventFullKey(_r)===Ae&&sn.runGuarded(()=>pt(_r))}}static _normalizeKey(Ae){return"esc"===Ae?"escape":Ae}}return Be.\u0275fac=function(Ae){return new(Ae||Be)(k.LFG(g.K0))},Be.\u0275prov=k.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const or=(0,k.eFA)(k._c5,"browser",[{provide:k.Lbi,useValue:g.bD},{provide:k.g9A,useValue:function Qt(){oe.makeCurrent(),vt.init()},multi:!0},{provide:g.K0,useFactory:function en(){return(0,k.RDi)(document),document},deps:[]}]),dr=[{provide:k.zSh,useValue:"root"},{provide:k.qLn,useFactory:function xt(){return new k.qLn},deps:[]},{provide:_t,useClass:yn,multi:!0,deps:[g.K0,k.R0b,k.Lbi]},{provide:_t,useClass:St,multi:!0,deps:[g.K0]},{provide:Ft,useClass:Ft,deps:[ln,Jt,k.AFp]},{provide:k.FYo,useExisting:Ft},{provide:Nt,useExisting:Jt},{provide:Jt,useClass:Jt,deps:[g.K0]},{provide:k.dDg,useClass:k.dDg,deps:[k.R0b]},{provide:ln,useClass:ln,deps:[_t,k.R0b]},{provide:g.JF,useClass:wn,deps:[]}];let Yr=(()=>{class Be{constructor(Ae){if(Ae)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Ae){return{ngModule:Be,providers:[{provide:k.AFp,useValue:Ae.appId},{provide:at,useExisting:k.AFp},Pe]}}}return Be.\u0275fac=function(Ae){return new(Ae||Be)(k.LFG(Be,12))},Be.\u0275mod=k.oAB({type:Be}),Be.\u0275inj=k.cJS({providers:dr,imports:[g.ez,k.hGG]}),Be})(),Rr=(()=>{class Be{constructor(Ae){this._doc=Ae}getTitle(){return this._doc.title}setTitle(Ae){this._doc.title=Ae||""}}return Be.\u0275fac=function(Ae){return new(Ae||Be)(k.LFG(g.K0))},Be.\u0275prov=k.Yz7({token:Be,factory:function(Ae){let pt=null;return pt=Ae?new Ae:function Mr(){return new Rr((0,k.LFG)(g.K0))}(),pt},providedIn:"root"}),Be})();"undefined"!=typeof window&&window;let Ue=(()=>{class Be{}return Be.\u0275fac=function(Ae){return new(Ae||Be)},Be.\u0275prov=k.Yz7({token:Be,factory:function(Ae){let pt=null;return pt=Ae?new(Ae||Be):k.LFG(un),pt},providedIn:"root"}),Be})(),un=(()=>{class Be extends Ue{constructor(Ae){super(),this._doc=Ae}sanitize(Ae,pt){if(null==pt)return null;switch(Ae){case k.q3G.NONE:return pt;case k.q3G.HTML:return(0,k.qzn)(pt,"HTML")?(0,k.z3N)(pt):(0,k.EiD)(this._doc,String(pt)).toString();case k.q3G.STYLE:return(0,k.qzn)(pt,"Style")?(0,k.z3N)(pt):pt;case k.q3G.SCRIPT:if((0,k.qzn)(pt,"Script"))return(0,k.z3N)(pt);throw new Error("unsafe value used in a script context");case k.q3G.URL:return(0,k.yhl)(pt),(0,k.qzn)(pt,"URL")?(0,k.z3N)(pt):(0,k.mCW)(String(pt));case k.q3G.RESOURCE_URL:if((0,k.qzn)(pt,"ResourceURL"))return(0,k.z3N)(pt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Ae} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Ae){return(0,k.JVY)(Ae)}bypassSecurityTrustStyle(Ae){return(0,k.L6k)(Ae)}bypassSecurityTrustScript(Ae){return(0,k.eBb)(Ae)}bypassSecurityTrustUrl(Ae){return(0,k.LAX)(Ae)}bypassSecurityTrustResourceUrl(Ae){return(0,k.pB0)(Ae)}}return Be.\u0275fac=function(Ae){return new(Ae||Be)(k.LFG(g.K0))},Be.\u0275prov=k.Yz7({token:Be,factory:function(Ae){let pt=null;return pt=Ae?new Ae:function ft(Be){return new un(Be.get(g.K0))}(k.LFG(k.zs3)),pt},providedIn:"root"}),Be})()},6115:(Zn,It,j)=>{j.d(It,{gz:()=>Ws,F0:()=>ur,rH:()=>tr,yS:()=>gi,Bz:()=>fn,lC:()=>io});var g=j(5e3),k=j(8306),he=j(4742),oe=j(8996),je=j(4671),He=j(3268),ht=j(7669),We=j(1810),at=j(5403),Ne=j(9672);function wn(O,M,S){O?(0,Ne.f)(S,O,M):M()}var _t=j(8421);function ln(O){return new k.y(M=>{(0,_t.Xf)(O()).subscribe(M)})}var Dn=j(727),Nt=j(4482);function Jt(){return(0,Nt.e)((O,M)=>{let S=null;O._refCount++;const W=(0,at.x)(M,void 0,void 0,void 0,()=>{if(!O||O._refCount<=0||0<--O._refCount)return void(S=null);const ne=O._connection,_e=S;S=null,ne&&(!_e||ne===_e)&&ne.unsubscribe(),M.unsubscribe()});O.subscribe(W),W.closed||(S=O.connect())})}class Un extends k.y{constructor(M,S){super(),this.source=M,this.subjectFactory=S,this._subject=null,this._refCount=0,this._connection=null,(0,Nt.A)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,null==M||M.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new Dn.w0;const S=this.getSubject();M.add(this.source.subscribe((0,at.x)(S,void 0,()=>{this._teardown(),S.complete()},W=>{this._teardown(),S.error(W)},()=>this._teardown()))),M.closed&&(this._connection=null,M=Dn.w0.EMPTY)}return M}refCount(){return Jt()(this)}}var dn=j(9646),xe=j(1135),Ge=j(2843),wt=j(6805),on=j(7272),Ht=j(515),Oe=j(7579),Bt=j(9300);function Re(O){return O<=0?()=>Ht.E:(0,Nt.e)((M,S)=>{let W=[];M.subscribe((0,at.x)(S,ne=>{W.push(ne),O<W.length&&W.shift()},()=>{for(const ne of W)S.next(ne);S.complete()},void 0,()=>{W=null}))})}var bt=j(8068),Je=j(6590),Lt=j(4004),Yt=j(3900),sr=j(5698),lr=j(8675),yn=j(5026),br=j(262),mr=j(4351),Vt=j(590),Ot=j(5577),it=j(8505),St=j(8189),ut=j(9808);class Qt{constructor(M,S){this.id=M,this.url=S}}class xt extends Qt{constructor(M,S,W="imperative",ne=null){super(M,S),this.navigationTrigger=W,this.restoredState=ne}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class en extends Qt{constructor(M,S,W){super(M,S),this.urlAfterRedirects=W}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wn extends Qt{constructor(M,S,W){super(M,S),this.reason=W}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class or extends Qt{constructor(M,S,W){super(M,S),this.error=W}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dr extends Qt{constructor(M,S,W,ne){super(M,S),this.urlAfterRedirects=W,this.state=ne}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yr extends Qt{constructor(M,S,W,ne){super(M,S),this.urlAfterRedirects=W,this.state=ne}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ii extends Qt{constructor(M,S,W,ne,_e){super(M,S),this.urlAfterRedirects=W,this.state=ne,this.shouldActivate=_e}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class er extends Qt{constructor(M,S,W,ne){super(M,S),this.urlAfterRedirects=W,this.state=ne}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gr extends Qt{constructor(M,S,W,ne){super(M,S),this.urlAfterRedirects=W,this.state=ne}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mr{constructor(M){this.route=M}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Rr{constructor(M){this.route=M}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class is{constructor(M){this.snapshot=M}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(M){this.snapshot=M}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cn{constructor(M){this.snapshot=M}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nt{constructor(M){this.snapshot=M}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dt{constructor(M,S,W){this.routerEvent=M,this.position=S,this.anchor=W}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class tn{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const S=this.params[M];return Array.isArray(S)?S[0]:S}return null}getAll(M){if(this.has(M)){const S=this.params[M];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function bn(O){return new tn(O)}const Yn="ngNavigationCancelingError";function Xr(O){const M=Error("NavigationCancelingError: "+O);return M[Yn]=!0,M}function kr(O,M,S){const W=S.path.split("/");if(W.length>O.length||"full"===S.pathMatch&&(M.hasChildren()||W.length<O.length))return null;const ne={};for(let _e=0;_e<W.length;_e++){const Ve=W[_e],ot=O[_e];if(Ve.startsWith(":"))ne[Ve.substring(1)]=ot;else if(Ve!==ot.path)return null}return{consumed:O.slice(0,W.length),posParams:ne}}function Bi(O,M){const S=O?Object.keys(O):void 0,W=M?Object.keys(M):void 0;if(!S||!W||S.length!=W.length)return!1;let ne;for(let _e=0;_e<S.length;_e++)if(ne=S[_e],!di(O[ne],M[ne]))return!1;return!0}function di(O,M){if(Array.isArray(O)&&Array.isArray(M)){if(O.length!==M.length)return!1;const S=[...O].sort(),W=[...M].sort();return S.every((ne,_e)=>W[_e]===ne)}return O===M}function Hn(O){return Array.prototype.concat.apply([],O)}function wi(O){return O.length>0?O[O.length-1]:null}function $i(O,M){for(const S in O)O.hasOwnProperty(S)&&M(O[S],S)}function Fn(O){return(0,g.CqO)(O)?O:(0,g.QGY)(O)?(0,oe.D)(Promise.resolve(O)):(0,dn.of)(O)}const Qn={exact:function Xe(O,M,S){if(!sn(O.segments,M.segments)||!Ut(O.segments,M.segments,S)||O.numberOfChildren!==M.numberOfChildren)return!1;for(const W in M.children)if(!O.children[W]||!Xe(O.children[W],M.children[W],S))return!1;return!0},subset:ft},yr={exact:function Lr(O,M){return Bi(O,M)},subset:function Ue(O,M){return Object.keys(M).length<=Object.keys(O).length&&Object.keys(M).every(S=>di(O[S],M[S]))},ignored:()=>!0};function Fr(O,M,S){return Qn[S.paths](O.root,M.root,S.matrixParams)&&yr[S.queryParams](O.queryParams,M.queryParams)&&!("exact"===S.fragment&&O.fragment!==M.fragment)}function ft(O,M,S){return un(O,M,M.segments,S)}function un(O,M,S,W){if(O.segments.length>S.length){const ne=O.segments.slice(0,S.length);return!(!sn(ne,S)||M.hasChildren()||!Ut(ne,S,W))}if(O.segments.length===S.length){if(!sn(O.segments,S)||!Ut(O.segments,S,W))return!1;for(const ne in M.children)if(!O.children[ne]||!ft(O.children[ne],M.children[ne],W))return!1;return!0}{const ne=S.slice(0,O.segments.length),_e=S.slice(O.segments.length);return!!(sn(O.segments,ne)&&Ut(O.segments,ne,W)&&O.children[Gt])&&un(O.children[Gt],M,_e,W)}}function Ut(O,M,S){return M.every((W,ne)=>yr[S](O[ne].parameters,W.parameters))}class Be{constructor(M,S,W){this.root=M,this.queryParams=S,this.fragment=W}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return Zi.serialize(this)}}class Me{constructor(M,S){this.segments=M,this.children=S,this.parent=null,$i(S,(W,ne)=>W.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return us(this)}}class Ae{constructor(M,S){this.path=M,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=bn(this.parameters)),this._parameterMap}toString(){return hi(this)}}function sn(O,M){return O.length===M.length&&O.every((S,W)=>S.path===M[W].path)}class Jn{}class oi{parse(M){const S=new Cs(M);return new Be(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(M){const S=`/${Ns(M.root,!0)}`,W=function gs(O){const M=Object.keys(O).map(S=>{const W=O[S];return Array.isArray(W)?W.map(ne=>`${li(S)}=${li(ne)}`).join("&"):`${li(S)}=${li(W)}`}).filter(S=>!!S);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${S}${W}${"string"==typeof M.fragment?`#${function as(O){return encodeURI(O)}(M.fragment)}`:""}`}}const Zi=new oi;function us(O){return O.segments.map(M=>hi(M)).join("/")}function Ns(O,M){if(!O.hasChildren())return us(O);if(M){const S=O.children[Gt]?Ns(O.children[Gt],!1):"",W=[];return $i(O.children,(ne,_e)=>{_e!==Gt&&W.push(`${_e}:${Ns(ne,!1)}`)}),W.length>0?`${S}(${W.join("//")})`:S}{const S=function _r(O,M){let S=[];return $i(O.children,(W,ne)=>{ne===Gt&&(S=S.concat(M(W,ne)))}),$i(O.children,(W,ne)=>{ne!==Gt&&(S=S.concat(M(W,ne)))}),S}(O,(W,ne)=>ne===Gt?[Ns(O.children[Gt],!1)]:[`${ne}:${Ns(W,!1)}`]);return 1===Object.keys(O.children).length&&null!=O.children[Gt]?`${us(O)}/${S[0]}`:`${us(O)}/(${S.join("//")})`}}function Gi(O){return encodeURIComponent(O).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function li(O){return Gi(O).replace(/%3B/gi,";")}function Si(O){return Gi(O).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _n(O){return decodeURIComponent(O)}function Tr(O){return _n(O.replace(/\+/g,"%20"))}function hi(O){return`${Si(O.path)}${function Ci(O){return Object.keys(O).map(M=>`;${Si(M)}=${Si(O[M])}`).join("")}(O.parameters)}`}const zi=/^[^\/()?;=#]+/;function ds(O){const M=O.match(zi);return M?M[0]:""}const Ri=/^[^=?&#]+/,Ii=/^[^&#]+/;class Cs{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let W={};return this.peekStartsWith("(")&&(W=this.parseParens(!1)),(M.length>0||Object.keys(S).length>0)&&(W[Gt]=new Me(M,S)),W}parseSegment(){const M=ds(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(M),new Ae(_n(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const S=ds(this.remaining);if(!S)return;this.capture(S);let W="";if(this.consumeOptional("=")){const ne=ds(this.remaining);ne&&(W=ne,this.capture(W))}M[_n(S)]=_n(W)}parseQueryParam(M){const S=function Yi(O){const M=O.match(Ri);return M?M[0]:""}(this.remaining);if(!S)return;this.capture(S);let W="";if(this.consumeOptional("=")){const Ve=function zr(O){const M=O.match(Ii);return M?M[0]:""}(this.remaining);Ve&&(W=Ve,this.capture(W))}const ne=Tr(S),_e=Tr(W);if(M.hasOwnProperty(ne)){let Ve=M[ne];Array.isArray(Ve)||(Ve=[Ve],M[ne]=Ve),Ve.push(_e)}else M[ne]=_e}parseParens(M){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const W=ds(this.remaining),ne=this.remaining[W.length];if("/"!==ne&&")"!==ne&&";"!==ne)throw new Error(`Cannot parse url '${this.url}'`);let _e;W.indexOf(":")>-1?(_e=W.substr(0,W.indexOf(":")),this.capture(_e),this.capture(":")):M&&(_e=Gt);const Ve=this.parseChildren();S[_e]=1===Object.keys(Ve).length?Ve[Gt]:new Me([],Ve),this.consumeOptional("//")}return S}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new Error(`Expected "${M}".`)}}class es{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const S=this.pathFromRoot(M);return S.length>1?S[S.length-2]:null}children(M){const S=hs(M,this._root);return S?S.children.map(W=>W.value):[]}firstChild(M){const S=hs(M,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(M){const S=$r(M,this._root);return S.length<2?[]:S[S.length-2].children.map(ne=>ne.value).filter(ne=>ne!==M)}pathFromRoot(M){return $r(M,this._root).map(S=>S.value)}}function hs(O,M){if(O===M.value)return M;for(const S of M.children){const W=hs(O,S);if(W)return W}return null}function $r(O,M){if(O===M.value)return[M];for(const S of M.children){const W=$r(O,S);if(W.length)return W.unshift(M),W}return[]}class wr{constructor(M,S){this.value=M,this.children=S}toString(){return`TreeNode(${this.value})`}}function Ir(O){const M={};return O&&O.children.forEach(S=>M[S.value.outlet]=S),M}class ts extends es{constructor(M,S){super(M),this.snapshot=S,ji(this,M)}toString(){return this.snapshot.toString()}}function Vr(O,M){const S=function bi(O,M){const Ve=new si([],{},{},"",{},Gt,M,null,O.root,-1,{});return new Zr("",new wr(Ve,[]))}(O,M),W=new xe.X([new Ae("",{})]),ne=new xe.X({}),_e=new xe.X({}),Ve=new xe.X({}),ot=new xe.X(""),pn=new Ws(W,ne,Ve,ot,_e,Gt,M,S.root);return pn.snapshot=S.root,new ts(new wr(pn,[]),S)}class Ws{constructor(M,S,W,ne,_e,Ve,ot,pn){this.url=M,this.params=S,this.queryParams=W,this.fragment=ne,this.data=_e,this.outlet=Ve,this.component=ot,this._futureSnapshot=pn}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Lt.U)(M=>bn(M)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Lt.U)(M=>bn(M)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fi(O,M="emptyOnly"){const S=O.pathFromRoot;let W=0;if("always"!==M)for(W=S.length-1;W>=1;){const ne=S[W],_e=S[W-1];if(ne.routeConfig&&""===ne.routeConfig.path)W--;else{if(_e.component)break;W--}}return function fs(O){return O.reduce((M,S)=>({params:Object.assign(Object.assign({},M.params),S.params),data:Object.assign(Object.assign({},M.data),S.data),resolve:Object.assign(Object.assign({},M.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice(W))}class si{constructor(M,S,W,ne,_e,Ve,ot,pn,kt,qn,On){this.url=M,this.params=S,this.queryParams=W,this.fragment=ne,this.data=_e,this.outlet=Ve,this.component=ot,this.routeConfig=pn,this._urlSegment=kt,this._lastPathIndex=qn,this._resolve=On}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(W=>W.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zr extends es{constructor(M,S){super(S),this.url=M,ji(this,S)}toString(){return bs(this._root)}}function ji(O,M){M.value._routerState=O,M.children.forEach(S=>ji(O,S))}function bs(O){const M=O.children.length>0?` { ${O.children.map(bs).join(", ")} } `:"";return`${O.value}${M}`}function ys(O){if(O.snapshot){const M=O.snapshot,S=O._futureSnapshot;O.snapshot=S,Bi(M.queryParams,S.queryParams)||O.queryParams.next(S.queryParams),M.fragment!==S.fragment&&O.fragment.next(S.fragment),Bi(M.params,S.params)||O.params.next(S.params),function ls(O,M){if(O.length!==M.length)return!1;for(let S=0;S<O.length;++S)if(!Bi(O[S],M[S]))return!1;return!0}(M.url,S.url)||O.url.next(S.url),Bi(M.data,S.data)||O.data.next(S.data)}else O.snapshot=O._futureSnapshot,O.data.next(O._futureSnapshot.data)}function Pi(O,M){const S=Bi(O.params,M.params)&&function pt(O,M){return sn(O,M)&&O.every((S,W)=>Bi(S.parameters,M[W].parameters))}(O.url,M.url);return S&&!(!O.parent!=!M.parent)&&(!O.parent||Pi(O.parent,M.parent))}function lo(O,M,S){if(S&&O.shouldReuseRoute(M.value,S.value.snapshot)){const W=S.value;W._futureSnapshot=M.value;const ne=function Ts(O,M,S){return M.children.map(W=>{for(const ne of S.children)if(O.shouldReuseRoute(W.value,ne.value.snapshot))return lo(O,W,ne);return lo(O,W)})}(O,M,S);return new wr(W,ne)}{if(O.shouldAttach(M.value)){const _e=O.retrieve(M.value);if(null!==_e){const Ve=_e.route;return Ve.value._futureSnapshot=M.value,Ve.children=M.children.map(ot=>lo(O,ot)),Ve}}const W=function rs(O){return new Ws(new xe.X(O.url),new xe.X(O.params),new xe.X(O.queryParams),new xe.X(O.fragment),new xe.X(O.data),O.outlet,O.component,O)}(M.value),ne=M.children.map(_e=>lo(O,_e));return new wr(W,ne)}}function ct(O){return"object"==typeof O&&null!=O&&!O.outlets&&!O.segmentPath}function At(O){return"object"==typeof O&&null!=O&&O.outlets}function vn(O,M,S,W,ne){let _e={};if(W&&$i(W,(ot,pn)=>{_e[pn]=Array.isArray(ot)?ot.map(kt=>`${kt}`):`${ot}`}),O===M)return new Be(S,_e,ne);const Ve=Kn(O,M,S);return new Be(Ve,_e,ne)}function Kn(O,M,S){const W={};return $i(O.children,(ne,_e)=>{W[_e]=ne===M?S:Kn(ne,M,S)}),new Me(O.segments,W)}class Ar{constructor(M,S,W){if(this.isAbsolute=M,this.numberOfDoubleDots=S,this.commands=W,M&&W.length>0&&ct(W[0]))throw new Error("Root segment cannot have matrix parameters");const ne=W.find(At);if(ne&&ne!==wi(W))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wi{constructor(M,S,W){this.segmentGroup=M,this.processChildren=S,this.index=W}}function ps(O,M,S){if(O||(O=new Me([],{})),0===O.segments.length&&O.hasChildren())return Is(O,M,S);const W=function Xo(O,M,S){let W=0,ne=M;const _e={match:!1,pathIndex:0,commandIndex:0};for(;ne<O.segments.length;){if(W>=S.length)return _e;const Ve=O.segments[ne],ot=S[W];if(At(ot))break;const pn=`${ot}`,kt=W<S.length-1?S[W+1]:null;if(ne>0&&void 0===pn)break;if(pn&&kt&&"object"==typeof kt&&void 0===kt.outlets){if(!Eo(pn,kt,Ve))return _e;W+=2}else{if(!Eo(pn,{},Ve))return _e;W++}ne++}return{match:!0,pathIndex:ne,commandIndex:W}}(O,M,S),ne=S.slice(W.commandIndex);if(W.match&&W.pathIndex<O.segments.length){const _e=new Me(O.segments.slice(0,W.pathIndex),{});return _e.children[Gt]=new Me(O.segments.slice(W.pathIndex),O.children),Is(_e,0,ne)}return W.match&&0===ne.length?new Me(O.segments,{}):W.match&&!O.hasChildren()?_s(O,M,S):W.match?Is(O,0,ne):_s(O,M,S)}function Is(O,M,S){if(0===S.length)return new Me(O.segments,{});{const W=function Jr(O){return At(O[0])?O[0].outlets:{[Gt]:O}}(S),ne={};return $i(W,(_e,Ve)=>{"string"==typeof _e&&(_e=[_e]),null!==_e&&(ne[Ve]=ps(O.children[Ve],M,_e))}),$i(O.children,(_e,Ve)=>{void 0===W[Ve]&&(ne[Ve]=_e)}),new Me(O.segments,ne)}}function _s(O,M,S){const W=O.segments.slice(0,M);let ne=0;for(;ne<S.length;){const _e=S[ne];if(At(_e)){const pn=ho(_e.outlets);return new Me(W,pn)}if(0===ne&&ct(S[0])){W.push(new Ae(O.segments[M].path,Ss(S[0]))),ne++;continue}const Ve=At(_e)?_e.outlets[Gt]:`${_e}`,ot=ne<S.length-1?S[ne+1]:null;Ve&&ot&&ct(ot)?(W.push(new Ae(Ve,Ss(ot))),ne+=2):(W.push(new Ae(Ve,{})),ne++)}return new Me(W,{})}function ho(O){const M={};return $i(O,(S,W)=>{"string"==typeof S&&(S=[S]),null!==S&&(M[W]=_s(new Me([],{}),0,S))}),M}function Ss(O){const M={};return $i(O,(S,W)=>M[W]=`${S}`),M}function Eo(O,M,S){return O==S.path&&Bi(M,S.parameters)}class $s{constructor(M,S,W,ne){this.routeReuseStrategy=M,this.futureState=S,this.currState=W,this.forwardEvent=ne}activate(M){const S=this.futureState._root,W=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,W,M),ys(this.futureState.root),this.activateChildRoutes(S,W,M)}deactivateChildRoutes(M,S,W){const ne=Ir(S);M.children.forEach(_e=>{const Ve=_e.value.outlet;this.deactivateRoutes(_e,ne[Ve],W),delete ne[Ve]}),$i(ne,(_e,Ve)=>{this.deactivateRouteAndItsChildren(_e,W)})}deactivateRoutes(M,S,W){const ne=M.value,_e=S?S.value:null;if(ne===_e)if(ne.component){const Ve=W.getContext(ne.outlet);Ve&&this.deactivateChildRoutes(M,S,Ve.children)}else this.deactivateChildRoutes(M,S,W);else _e&&this.deactivateRouteAndItsChildren(S,W)}deactivateRouteAndItsChildren(M,S){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,S):this.deactivateRouteAndOutlet(M,S)}detachAndStoreRouteSubtree(M,S){const W=S.getContext(M.value.outlet),ne=W&&M.value.component?W.children:S,_e=Ir(M);for(const Ve of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Ve],ne);if(W&&W.outlet){const Ve=W.outlet.detach(),ot=W.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:Ve,route:M,contexts:ot})}}deactivateRouteAndOutlet(M,S){const W=S.getContext(M.value.outlet),ne=W&&M.value.component?W.children:S,_e=Ir(M);for(const Ve of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Ve],ne);W&&W.outlet&&(W.outlet.deactivate(),W.children.onOutletDeactivated(),W.attachRef=null,W.resolver=null,W.route=null)}activateChildRoutes(M,S,W){const ne=Ir(S);M.children.forEach(_e=>{this.activateRoutes(_e,ne[_e.value.outlet],W),this.forwardEvent(new nt(_e.value.snapshot))}),M.children.length&&this.forwardEvent(new Xi(M.value.snapshot))}activateRoutes(M,S,W){const ne=M.value,_e=S?S.value:null;if(ys(ne),ne===_e)if(ne.component){const Ve=W.getOrCreateContext(ne.outlet);this.activateChildRoutes(M,S,Ve.children)}else this.activateChildRoutes(M,S,W);else if(ne.component){const Ve=W.getOrCreateContext(ne.outlet);if(this.routeReuseStrategy.shouldAttach(ne.snapshot)){const ot=this.routeReuseStrategy.retrieve(ne.snapshot);this.routeReuseStrategy.store(ne.snapshot,null),Ve.children.onOutletReAttached(ot.contexts),Ve.attachRef=ot.componentRef,Ve.route=ot.route.value,Ve.outlet&&Ve.outlet.attach(ot.componentRef,ot.route.value),ys(ot.route.value),this.activateChildRoutes(M,null,Ve.children)}else{const ot=function Os(O){for(let M=O.parent;M;M=M.parent){const S=M.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(ne.snapshot),pn=ot?ot.module.componentFactoryResolver:null;Ve.attachRef=null,Ve.route=ne,Ve.resolver=pn,Ve.outlet&&Ve.outlet.activateWith(ne,pn),this.activateChildRoutes(M,null,Ve.children)}}else this.activateChildRoutes(M,null,W)}}class qs{constructor(M,S){this.routes=M,this.module=S}}function Ds(O){return"function"==typeof O}function Qs(O){return O instanceof Be}const vs=Symbol("INITIAL_VALUE");function Xs(){return(0,Yt.w)(O=>function Pe(...O){const M=(0,ht.yG)(O),S=(0,ht.jO)(O),{args:W,keys:ne}=(0,he.D)(O);if(0===W.length)return(0,oe.D)([],M);const _e=new k.y(function vt(O,M,S=je.y){return W=>{wn(M,()=>{const{length:ne}=O,_e=new Array(ne);let Ve=ne,ot=ne;for(let pn=0;pn<ne;pn++)wn(M,()=>{const kt=(0,oe.D)(O[pn],M);let qn=!1;kt.subscribe((0,at.x)(W,On=>{_e[pn]=On,qn||(qn=!0,ot--),ot||W.next(S(_e.slice()))},()=>{--Ve||W.complete()}))},W)},W)}}(W,M,ne?Ve=>(0,We.n)(ne,Ve):je.y));return S?_e.pipe((0,He.Z)(S)):_e}(O.map(M=>M.pipe((0,sr.q)(1),(0,lr.O)(vs)))).pipe((0,yn.R)((M,S)=>{let W=!1;return S.reduce((ne,_e,Ve)=>ne!==vs?ne:(_e===vs&&(W=!0),W||!1!==_e&&Ve!==S.length-1&&!Qs(_e)?ne:_e),M)},vs),(0,Bt.h)(M=>M!==vs),(0,Lt.U)(M=>Qs(M)?M:!0===M),(0,sr.q)(1)))}class Ms{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ai,this.attachRef=null}}class Ai{constructor(){this.contexts=new Map}onChildOutletCreated(M,S){const W=this.getOrCreateContext(M);W.outlet=S,this.contexts.set(M,W)}onChildOutletDestroyed(M){const S=this.getContext(M);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const M=this.contexts;return this.contexts=new Map,M}onOutletReAttached(M){this.contexts=M}getOrCreateContext(M){let S=this.getContext(M);return S||(S=new Ms,this.contexts.set(M,S)),S}getContext(M){return this.contexts.get(M)||null}}let io=(()=>{class O{constructor(S,W,ne,_e,Ve){this.parentContexts=S,this.location=W,this.resolver=ne,this.changeDetector=Ve,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=_e||Gt,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,W){this.activated=S,this._activatedRoute=W,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,W){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const Ve=(W=W||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),ot=this.parentContexts.getOrCreateContext(this.name).children,pn=new so(S,ot,this.location.injector);this.activated=this.location.createComponent(Ve,this.location.length,pn),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return O.\u0275fac=function(S){return new(S||O)(g.Y36(Ai),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},O.\u0275dir=g.lG2({type:O,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),O})();class so{constructor(M,S,W){this.route=M,this.childContexts=S,this.parent=W}get(M,S){return M===Ws?this.route:M===Ai?this.childContexts:this.parent.get(M,S)}}let Hs=(()=>{class O{}return O.\u0275fac=function(S){return new(S||O)},O.\u0275cmp=g.Xpm({type:O,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,W){1&S&&g._UZ(0,"router-outlet")},directives:[io],encapsulation:2}),O})();function Gs(O,M=""){for(let S=0;S<O.length;S++){const W=O[S];As(W,Hi(M,W))}}function As(O,M){O.children&&Gs(O.children,M)}function Hi(O,M){return M?O||M.path?O&&!M.path?`${O}/`:!O&&M.path?M.path:`${O}/${M.path}`:"":O}function Ti(O){const M=O.children&&O.children.map(Ti),S=M?Object.assign(Object.assign({},O),{children:M}):Object.assign({},O);return!S.component&&(M||S.loadChildren)&&S.outlet&&S.outlet!==Gt&&(S.component=Hs),S}function B(O){return O.outlet||Gt}function pe(O,M){const S=O.filter(W=>B(W)===M);return S.push(...O.filter(W=>B(W)!==M)),S}const q={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ve(O,M,S){var W;if(""===M.path)return"full"===M.pathMatch&&(O.hasChildren()||S.length>0)?Object.assign({},q):{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const _e=(M.matcher||kr)(S,O,M);if(!_e)return Object.assign({},q);const Ve={};$i(_e.posParams,(pn,kt)=>{Ve[kt]=pn.path});const ot=_e.consumed.length>0?Object.assign(Object.assign({},Ve),_e.consumed[_e.consumed.length-1].parameters):Ve;return{matched:!0,consumedSegments:_e.consumed,remainingSegments:S.slice(_e.consumed.length),parameters:ot,positionalParamSegments:null!==(W=_e.posParams)&&void 0!==W?W:{}}}function qe(O,M,S,W,ne="corrected"){if(S.length>0&&function pr(O,M,S){return S.some(W=>ei(O,M,W)&&B(W)!==Gt)}(O,S,W)){const Ve=new Me(M,function Sn(O,M,S,W){const ne={};ne[Gt]=W,W._sourceSegment=O,W._segmentIndexShift=M.length;for(const _e of S)if(""===_e.path&&B(_e)!==Gt){const Ve=new Me([],{});Ve._sourceSegment=O,Ve._segmentIndexShift=M.length,ne[B(_e)]=Ve}return ne}(O,M,W,new Me(S,O.children)));return Ve._sourceSegment=O,Ve._segmentIndexShift=M.length,{segmentGroup:Ve,slicedSegments:[]}}if(0===S.length&&function jr(O,M,S){return S.some(W=>ei(O,M,W))}(O,S,W)){const Ve=new Me(O.segments,function nn(O,M,S,W,ne,_e){const Ve={};for(const ot of W)if(ei(O,S,ot)&&!ne[B(ot)]){const pn=new Me([],{});pn._sourceSegment=O,pn._segmentIndexShift="legacy"===_e?O.segments.length:M.length,Ve[B(ot)]=pn}return Object.assign(Object.assign({},ne),Ve)}(O,M,S,W,O.children,ne));return Ve._sourceSegment=O,Ve._segmentIndexShift=M.length,{segmentGroup:Ve,slicedSegments:S}}const _e=new Me(O.segments,O.children);return _e._sourceSegment=O,_e._segmentIndexShift=M.length,{segmentGroup:_e,slicedSegments:S}}function ei(O,M,S){return(!(O.hasChildren()||M.length>0)||"full"!==S.pathMatch)&&""===S.path}function ti(O,M,S,W){return!!(B(O)===W||W!==Gt&&ei(M,S,O))&&("**"===O.path||ve(M,O,S).matched)}function fi(O,M,S){return 0===M.length&&!O.children[S]}class Ji{constructor(M){this.segmentGroup=M||null}}class Ni{constructor(M){this.urlTree=M}}function ki(O){return(0,Ge._)(new Ji(O))}function Ks(O){return(0,Ge._)(new Ni(O))}class No{constructor(M,S,W,ne,_e){this.configLoader=S,this.urlSerializer=W,this.urlTree=ne,this.config=_e,this.allowRedirects=!0,this.ngModule=M.get(g.h0i)}apply(){const M=qe(this.urlTree.root,[],[],this.config).segmentGroup,S=new Me(M.segments,M.children);return this.expandSegmentGroup(this.ngModule,this.config,S,Gt).pipe((0,Lt.U)(_e=>this.createUrlTree(Co(_e),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,br.K)(_e=>{if(_e instanceof Ni)return this.allowRedirects=!1,this.match(_e.urlTree);throw _e instanceof Ji?this.noMatchError(_e):_e}))}match(M){return this.expandSegmentGroup(this.ngModule,this.config,M.root,Gt).pipe((0,Lt.U)(ne=>this.createUrlTree(Co(ne),M.queryParams,M.fragment))).pipe((0,br.K)(ne=>{throw ne instanceof Ji?this.noMatchError(ne):ne}))}noMatchError(M){return new Error(`Cannot match any routes. URL Segment: '${M.segmentGroup}'`)}createUrlTree(M,S,W){const ne=M.segments.length>0?new Me([],{[Gt]:M}):M;return new Be(ne,S,W)}expandSegmentGroup(M,S,W,ne){return 0===W.segments.length&&W.hasChildren()?this.expandChildren(M,S,W).pipe((0,Lt.U)(_e=>new Me([],_e))):this.expandSegment(M,W,S,W.segments,ne,!0)}expandChildren(M,S,W){const ne=[];for(const _e of Object.keys(W.children))"primary"===_e?ne.unshift(_e):ne.push(_e);return(0,oe.D)(ne).pipe((0,mr.b)(_e=>{const Ve=W.children[_e],ot=pe(S,_e);return this.expandSegmentGroup(M,ot,Ve,_e).pipe((0,Lt.U)(pn=>({segment:pn,outlet:_e})))}),(0,yn.R)((_e,Ve)=>(_e[Ve.outlet]=Ve.segment,_e),{}),function Ft(O,M){const S=arguments.length>=2;return W=>W.pipe(O?(0,Bt.h)((ne,_e)=>O(ne,_e,W)):je.y,Re(1),S?(0,Je.d)(M):(0,bt.T)(()=>new wt.K))}())}expandSegment(M,S,W,ne,_e,Ve){return(0,oe.D)(W).pipe((0,mr.b)(ot=>this.expandSegmentAgainstRoute(M,S,W,ot,ne,_e,Ve).pipe((0,br.K)(kt=>{if(kt instanceof Ji)return(0,dn.of)(null);throw kt}))),(0,Vt.P)(ot=>!!ot),(0,br.K)((ot,pn)=>{if(ot instanceof wt.K||"EmptyError"===ot.name)return fi(S,ne,_e)?(0,dn.of)(new Me([],{})):ki(S);throw ot}))}expandSegmentAgainstRoute(M,S,W,ne,_e,Ve,ot){return ti(ne,S,_e,Ve)?void 0===ne.redirectTo?this.matchSegmentAgainstRoute(M,S,ne,_e,Ve):ot&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(M,S,W,ne,_e,Ve):ki(S):ki(S)}expandSegmentAgainstRouteUsingRedirect(M,S,W,ne,_e,Ve){return"**"===ne.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(M,W,ne,Ve):this.expandRegularSegmentAgainstRouteUsingRedirect(M,S,W,ne,_e,Ve)}expandWildCardWithParamsAgainstRouteUsingRedirect(M,S,W,ne){const _e=this.applyRedirectCommands([],W.redirectTo,{});return W.redirectTo.startsWith("/")?Ks(_e):this.lineralizeSegments(W,_e).pipe((0,Ot.z)(Ve=>{const ot=new Me(Ve,{});return this.expandSegment(M,ot,S,Ve,ne,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(M,S,W,ne,_e,Ve){const{matched:ot,consumedSegments:pn,remainingSegments:kt,positionalParamSegments:qn}=ve(S,ne,_e);if(!ot)return ki(S);const On=this.applyRedirectCommands(pn,ne.redirectTo,qn);return ne.redirectTo.startsWith("/")?Ks(On):this.lineralizeSegments(ne,On).pipe((0,Ot.z)(ar=>this.expandSegment(M,S,W,ar.concat(kt),Ve,!1)))}matchSegmentAgainstRoute(M,S,W,ne,_e){if("**"===W.path)return W.loadChildren?(W._loadedConfig?(0,dn.of)(W._loadedConfig):this.configLoader.load(M.injector,W)).pipe((0,Lt.U)(On=>(W._loadedConfig=On,new Me(ne,{})))):(0,dn.of)(new Me(ne,{}));const{matched:Ve,consumedSegments:ot,remainingSegments:pn}=ve(S,W,ne);return Ve?this.getChildConfig(M,W,ne).pipe((0,Ot.z)(qn=>{const On=qn.module,ar=qn.routes,{segmentGroup:Vn,slicedSegments:Ls}=qe(S,ot,pn,ar),Pr=new Me(Vn.segments,Vn.children);if(0===Ls.length&&Pr.hasChildren())return this.expandChildren(On,ar,Pr).pipe((0,Lt.U)(Oo=>new Me(ot,Oo)));if(0===ar.length&&0===Ls.length)return(0,dn.of)(new Me(ot,{}));const Do=B(W)===_e;return this.expandSegment(On,Pr,ar,Ls,Do?Gt:_e,!0).pipe((0,Lt.U)(ir=>new Me(ot.concat(ir.segments),ir.children)))})):ki(S)}getChildConfig(M,S,W){return S.children?(0,dn.of)(new qs(S.children,M)):S.loadChildren?void 0!==S._loadedConfig?(0,dn.of)(S._loadedConfig):this.runCanLoadGuards(M.injector,S,W).pipe((0,Ot.z)(ne=>ne?this.configLoader.load(M.injector,S).pipe((0,Lt.U)(_e=>(S._loadedConfig=_e,_e))):function Wr(O){return(0,Ge._)(Xr(`Cannot load children because the guard of the route "path: '${O.path}'" returned false`))}(S))):(0,dn.of)(new qs([],M))}runCanLoadGuards(M,S,W){const ne=S.canLoad;if(!ne||0===ne.length)return(0,dn.of)(!0);const _e=ne.map(Ve=>{const ot=M.get(Ve);let pn;if(function js(O){return O&&Ds(O.canLoad)}(ot))pn=ot.canLoad(S,W);else{if(!Ds(ot))throw new Error("Invalid CanLoad guard");pn=ot(S,W)}return Fn(pn)});return(0,dn.of)(_e).pipe(Xs(),(0,it.b)(Ve=>{if(!Qs(Ve))return;const ot=Xr(`Redirecting to "${this.urlSerializer.serialize(Ve)}"`);throw ot.url=Ve,ot}),(0,Lt.U)(Ve=>!0===Ve))}lineralizeSegments(M,S){let W=[],ne=S.root;for(;;){if(W=W.concat(ne.segments),0===ne.numberOfChildren)return(0,dn.of)(W);if(ne.numberOfChildren>1||!ne.children[Gt])return(0,Ge._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${M.redirectTo}'`));ne=ne.children[Gt]}}applyRedirectCommands(M,S,W){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),M,W)}applyRedirectCreatreUrlTree(M,S,W,ne){const _e=this.createSegmentGroup(M,S.root,W,ne);return new Be(_e,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(M,S){const W={};return $i(M,(ne,_e)=>{if("string"==typeof ne&&ne.startsWith(":")){const ot=ne.substring(1);W[_e]=S[ot]}else W[_e]=ne}),W}createSegmentGroup(M,S,W,ne){const _e=this.createSegments(M,S.segments,W,ne);let Ve={};return $i(S.children,(ot,pn)=>{Ve[pn]=this.createSegmentGroup(M,ot,W,ne)}),new Me(_e,Ve)}createSegments(M,S,W,ne){return S.map(_e=>_e.path.startsWith(":")?this.findPosParam(M,_e,ne):this.findOrReturn(_e,W))}findPosParam(M,S,W){const ne=W[S.path.substring(1)];if(!ne)throw new Error(`Cannot redirect to '${M}'. Cannot find '${S.path}'.`);return ne}findOrReturn(M,S){let W=0;for(const ne of S){if(ne.path===M.path)return S.splice(W),ne;W++}return M}}function Co(O){const M={};for(const W of Object.keys(O.children)){const _e=Co(O.children[W]);(_e.segments.length>0||_e.hasChildren())&&(M[W]=_e)}return function fo(O){if(1===O.numberOfChildren&&O.children[Gt]){const M=O.children[Gt];return new Me(O.segments.concat(M.segments),M.children)}return O}(new Me(O.segments,M))}class G{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class L{constructor(M,S){this.component=M,this.route=S}}function ye(O,M,S){const W=O._root;return K(W,M?M._root:null,S,[W.value])}function Nn(O,M,S){const W=function ee(O){if(!O)return null;for(let M=O.parent;M;M=M.parent){const S=M.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(M);return(W?W.module.injector:S).get(O)}function K(O,M,S,W,ne={canDeactivateChecks:[],canActivateChecks:[]}){const _e=Ir(M);return O.children.forEach(Ve=>{(function be(O,M,S,W,ne={canDeactivateChecks:[],canActivateChecks:[]}){const _e=O.value,Ve=M?M.value:null,ot=S?S.getContext(O.value.outlet):null;if(Ve&&_e.routeConfig===Ve.routeConfig){const pn=function ke(O,M,S){if("function"==typeof S)return S(O,M);switch(S){case"pathParamsChange":return!sn(O.url,M.url);case"pathParamsOrQueryParamsChange":return!sn(O.url,M.url)||!Bi(O.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pi(O,M)||!Bi(O.queryParams,M.queryParams);default:return!Pi(O,M)}}(Ve,_e,_e.routeConfig.runGuardsAndResolvers);pn?ne.canActivateChecks.push(new G(W)):(_e.data=Ve.data,_e._resolvedData=Ve._resolvedData),K(O,M,_e.component?ot?ot.children:null:S,W,ne),pn&&ot&&ot.outlet&&ot.outlet.isActivated&&ne.canDeactivateChecks.push(new L(ot.outlet.component,Ve))}else Ve&&rt(M,ot,ne),ne.canActivateChecks.push(new G(W)),K(O,null,_e.component?ot?ot.children:null:S,W,ne)})(Ve,_e[Ve.value.outlet],S,W.concat([Ve.value]),ne),delete _e[Ve.value.outlet]}),$i(_e,(Ve,ot)=>rt(Ve,S.getContext(ot),ne)),ne}function rt(O,M,S){const W=Ir(O),ne=O.value;$i(W,(_e,Ve)=>{rt(_e,ne.component?M?M.children.getContext(Ve):null:M,S)}),S.canDeactivateChecks.push(new L(ne.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,ne))}class ss{}function l(O){return new k.y(M=>M.error(O))}class I{constructor(M,S,W,ne,_e,Ve){this.rootComponentType=M,this.config=S,this.urlTree=W,this.url=ne,this.paramsInheritanceStrategy=_e,this.relativeLinkResolution=Ve}recognize(){const M=qe(this.urlTree.root,[],[],this.config.filter(Ve=>void 0===Ve.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,M,Gt);if(null===S)return null;const W=new si([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),ne=new wr(W,S),_e=new Zr(this.url,ne);return this.inheritParamsAndData(_e._root),_e}inheritParamsAndData(M){const S=M.value,W=Fi(S,this.paramsInheritanceStrategy);S.params=Object.freeze(W.params),S.data=Object.freeze(W.data),M.children.forEach(ne=>this.inheritParamsAndData(ne))}processSegmentGroup(M,S,W){return 0===S.segments.length&&S.hasChildren()?this.processChildren(M,S):this.processSegment(M,S,S.segments,W)}processChildren(M,S){const W=[];for(const _e of Object.keys(S.children)){const Ve=S.children[_e],ot=pe(M,_e),pn=this.processSegmentGroup(ot,Ve,_e);if(null===pn)return null;W.push(...pn)}const ne=ge(W);return function P(O){O.sort((M,S)=>M.value.outlet===Gt?-1:S.value.outlet===Gt?1:M.value.outlet.localeCompare(S.value.outlet))}(ne),ne}processSegment(M,S,W,ne){for(const _e of M){const Ve=this.processSegmentAgainstRoute(_e,S,W,ne);if(null!==Ve)return Ve}return fi(S,W,ne)?[]:null}processSegmentAgainstRoute(M,S,W,ne){if(M.redirectTo||!ti(M,S,W,ne))return null;let _e,Ve=[],ot=[];if("**"===M.path){const Vn=W.length>0?wi(W).parameters:{};_e=new si(W,Vn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ce(M),B(M),M.component,M,ae(S),me(S)+W.length,ue(M))}else{const Vn=ve(S,M,W);if(!Vn.matched)return null;Ve=Vn.consumedSegments,ot=Vn.remainingSegments,_e=new si(Ve,Vn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ce(M),B(M),M.component,M,ae(S),me(S)+Ve.length,ue(M))}const pn=function z(O){return O.children?O.children:O.loadChildren?O._loadedConfig.routes:[]}(M),{segmentGroup:kt,slicedSegments:qn}=qe(S,Ve,ot,pn.filter(Vn=>void 0===Vn.redirectTo),this.relativeLinkResolution);if(0===qn.length&&kt.hasChildren()){const Vn=this.processChildren(pn,kt);return null===Vn?null:[new wr(_e,Vn)]}if(0===pn.length&&0===qn.length)return[new wr(_e,[])];const On=B(M)===ne,ar=this.processSegment(pn,kt,qn,On?Gt:ne);return null===ar?null:[new wr(_e,ar)]}}function J(O){const M=O.value.routeConfig;return M&&""===M.path&&void 0===M.redirectTo}function ge(O){const M=[],S=new Set;for(const W of O){if(!J(W)){M.push(W);continue}const ne=M.find(_e=>W.value.routeConfig===_e.value.routeConfig);void 0!==ne?(ne.children.push(...W.children),S.add(ne)):M.push(W)}for(const W of S){const ne=ge(W.children);M.push(new wr(W.value,ne))}return M.filter(W=>!S.has(W))}function ae(O){let M=O;for(;M._sourceSegment;)M=M._sourceSegment;return M}function me(O){let M=O,S=M._segmentIndexShift?M._segmentIndexShift:0;for(;M._sourceSegment;)M=M._sourceSegment,S+=M._segmentIndexShift?M._segmentIndexShift:0;return S-1}function ce(O){return O.data||{}}function ue(O){return O.resolve||{}}function Fe(O){return[...Object.keys(O),...Object.getOwnPropertySymbols(O)]}function et(O){return(0,Yt.w)(M=>{const S=O(M);return S?(0,oe.D)(S).pipe((0,Lt.U)(()=>M)):(0,dn.of)(M)})}class An extends class En{shouldDetach(M){return!1}store(M,S){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,S){return M.routeConfig===S.routeConfig}}{}const mn=new g.OlP("ROUTES");class Mn{constructor(M,S,W,ne){this.injector=M,this.compiler=S,this.onLoadStartListener=W,this.onLoadEndListener=ne}load(M,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const ne=this.loadModuleFactory(S.loadChildren).pipe((0,Lt.U)(_e=>{this.onLoadEndListener&&this.onLoadEndListener(S);const Ve=_e.create(M);return new qs(Hn(Ve.injector.get(mn,void 0,g.XFs.Self|g.XFs.Optional)).map(Ti),Ve)}),(0,br.K)(_e=>{throw S._loader$=void 0,_e}));return S._loader$=new Un(ne,()=>new Oe.x).pipe(Jt()),S._loader$}loadModuleFactory(M){return Fn(M()).pipe((0,Ot.z)(S=>S instanceof g.YKP?(0,dn.of)(S):(0,oe.D)(this.compiler.compileModuleAsync(S))))}}class vr{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,S){return M}}function Ln(O){throw O}function rn(O,M,S){return M.parse("/")}function Rt(O,M){return(0,dn.of)(null)}const hn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ur=(()=>{class O{constructor(S,W,ne,_e,Ve,ot,pn){this.rootComponentType=S,this.urlSerializer=W,this.rootContexts=ne,this.location=_e,this.config=pn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oe.x,this.errorHandler=Ln,this.malformedUriErrorHandler=rn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Rt,afterPreactivation:Rt},this.urlHandlingStrategy=new vr,this.routeReuseStrategy=new An,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ve.get(g.h0i),this.console=Ve.get(g.c2e);const On=Ve.get(g.R0b);this.isNgZoneEnabled=On instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(pn),this.currentUrlTree=function zt(){return new Be(new Me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Mn(Ve,ot,ar=>this.triggerEvent(new Mr(ar)),ar=>this.triggerEvent(new Rr(ar))),this.routerState=Vr(this.currentUrlTree,this.rootComponentType),this.transitions=new xe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const W=this.events;return S.pipe((0,Bt.h)(ne=>0!==ne.id),(0,Lt.U)(ne=>Object.assign(Object.assign({},ne),{extractedUrl:this.urlHandlingStrategy.extract(ne.rawUrl)})),(0,Yt.w)(ne=>{let _e=!1,Ve=!1;return(0,dn.of)(ne).pipe((0,it.b)(ot=>{this.currentNavigation={id:ot.id,initialUrl:ot.currentRawUrl,extractedUrl:ot.extractedUrl,trigger:ot.source,extras:ot.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Yt.w)(ot=>{const pn=this.browserUrlTree.toString(),kt=!this.navigated||ot.extractedUrl.toString()!==pn||pn!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||kt)&&this.urlHandlingStrategy.shouldProcessUrl(ot.rawUrl))return hr(ot.source)&&(this.browserUrlTree=ot.extractedUrl),(0,dn.of)(ot).pipe((0,Yt.w)(On=>{const ar=this.transitions.getValue();return W.next(new xt(On.id,this.serializeUrl(On.extractedUrl),On.source,On.restoredState)),ar!==this.transitions.getValue()?Ht.E:Promise.resolve(On)}),function Y(O,M,S,W){return(0,Yt.w)(ne=>function Js(O,M,S,W,ne){return new No(O,M,S,W,ne).apply()}(O,M,S,ne.extractedUrl,W).pipe((0,Lt.U)(_e=>Object.assign(Object.assign({},ne),{urlAfterRedirects:_e}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,it.b)(On=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:On.urlAfterRedirects})}),function Te(O,M,S,W,ne){return(0,Ot.z)(_e=>function A(O,M,S,W,ne="emptyOnly",_e="legacy"){try{const Ve=new I(O,M,S,W,ne,_e).recognize();return null===Ve?l(new ss):(0,dn.of)(Ve)}catch(Ve){return l(Ve)}}(O,M,_e.urlAfterRedirects,S(_e.urlAfterRedirects),W,ne).pipe((0,Lt.U)(Ve=>Object.assign(Object.assign({},_e),{targetSnapshot:Ve}))))}(this.rootComponentType,this.config,On=>this.serializeUrl(On),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,it.b)(On=>{if("eager"===this.urlUpdateStrategy){if(!On.extras.skipLocationChange){const Vn=this.urlHandlingStrategy.merge(On.urlAfterRedirects,On.rawUrl);this.setBrowserUrl(Vn,On)}this.browserUrlTree=On.urlAfterRedirects}const ar=new dr(On.id,this.serializeUrl(On.extractedUrl),this.serializeUrl(On.urlAfterRedirects),On.targetSnapshot);W.next(ar)}));if(kt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ar,extractedUrl:Vn,source:Ls,restoredState:Pr,extras:Do}=ot,yi=new xt(ar,this.serializeUrl(Vn),Ls,Pr);W.next(yi);const ir=Vr(Vn,this.rootComponentType).snapshot;return(0,dn.of)(Object.assign(Object.assign({},ot),{targetSnapshot:ir,urlAfterRedirects:Vn,extras:Object.assign(Object.assign({},Do),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ot.rawUrl,ot.resolve(null),Ht.E}),et(ot=>{const{targetSnapshot:pn,id:kt,extractedUrl:qn,rawUrl:On,extras:{skipLocationChange:ar,replaceUrl:Vn}}=ot;return this.hooks.beforePreactivation(pn,{navigationId:kt,appliedUrlTree:qn,rawUrlTree:On,skipLocationChange:!!ar,replaceUrl:!!Vn})}),(0,it.b)(ot=>{const pn=new Yr(ot.id,this.serializeUrl(ot.extractedUrl),this.serializeUrl(ot.urlAfterRedirects),ot.targetSnapshot);this.triggerEvent(pn)}),(0,Lt.U)(ot=>Object.assign(Object.assign({},ot),{guards:ye(ot.targetSnapshot,ot.currentSnapshot,this.rootContexts)})),function Kt(O,M){return(0,Ot.z)(S=>{const{targetSnapshot:W,currentSnapshot:ne,guards:{canActivateChecks:_e,canDeactivateChecks:Ve}}=S;return 0===Ve.length&&0===_e.length?(0,dn.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function xn(O,M,S,W){return(0,oe.D)(O).pipe((0,Ot.z)(ne=>function Vi(O,M,S,W,ne){const _e=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!_e||0===_e.length)return(0,dn.of)(!0);const Ve=_e.map(ot=>{const pn=Nn(ot,M,ne);let kt;if(function Vo(O){return O&&Ds(O.canDeactivate)}(pn))kt=Fn(pn.canDeactivate(O,M,S,W));else{if(!Ds(pn))throw new Error("Invalid CanDeactivate guard");kt=Fn(pn(O,M,S,W))}return kt.pipe((0,Vt.P)())});return(0,dn.of)(Ve).pipe(Xs())}(ne.component,ne.route,S,M,W)),(0,Vt.P)(ne=>!0!==ne,!0))}(Ve,W,ne,O).pipe((0,Ot.z)(ot=>ot&&function Lo(O){return"boolean"==typeof O}(ot)?function Sr(O,M,S,W){return(0,oe.D)(M).pipe((0,mr.b)(ne=>(0,on.z)(function qr(O,M){return null!==O&&M&&M(new is(O)),(0,dn.of)(!0)}(ne.route.parent,W),function jn(O,M){return null!==O&&M&&M(new cn(O)),(0,dn.of)(!0)}(ne.route,W),function pi(O,M,S){const W=M[M.length-1],_e=M.slice(0,M.length-1).reverse().map(Ve=>function Qe(O){const M=O.routeConfig?O.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:O,guards:M}:null}(Ve)).filter(Ve=>null!==Ve).map(Ve=>ln(()=>{const ot=Ve.guards.map(pn=>{const kt=Nn(pn,Ve.node,S);let qn;if(function Fs(O){return O&&Ds(O.canActivateChild)}(kt))qn=Fn(kt.canActivateChild(W,O));else{if(!Ds(kt))throw new Error("Invalid CanActivateChild guard");qn=Fn(kt(W,O))}return qn.pipe((0,Vt.P)())});return(0,dn.of)(ot).pipe(Xs())}));return(0,dn.of)(_e).pipe(Xs())}(O,ne.path,S),function _i(O,M,S){const W=M.routeConfig?M.routeConfig.canActivate:null;if(!W||0===W.length)return(0,dn.of)(!0);const ne=W.map(_e=>ln(()=>{const Ve=Nn(_e,M,S);let ot;if(function ks(O){return O&&Ds(O.canActivate)}(Ve))ot=Fn(Ve.canActivate(M,O));else{if(!Ds(Ve))throw new Error("Invalid CanActivate guard");ot=Fn(Ve(M,O))}return ot.pipe((0,Vt.P)())}));return(0,dn.of)(ne).pipe(Xs())}(O,ne.route,S))),(0,Vt.P)(ne=>!0!==ne,!0))}(W,_e,O,M):(0,dn.of)(ot)),(0,Lt.U)(ot=>Object.assign(Object.assign({},S),{guardsResult:ot})))})}(this.ngModule.injector,ot=>this.triggerEvent(ot)),(0,it.b)(ot=>{if(Qs(ot.guardsResult)){const kt=Xr(`Redirecting to "${this.serializeUrl(ot.guardsResult)}"`);throw kt.url=ot.guardsResult,kt}const pn=new ii(ot.id,this.serializeUrl(ot.extractedUrl),this.serializeUrl(ot.urlAfterRedirects),ot.targetSnapshot,!!ot.guardsResult);this.triggerEvent(pn)}),(0,Bt.h)(ot=>!!ot.guardsResult||(this.restoreHistory(ot),this.cancelNavigationTransition(ot,""),!1)),et(ot=>{if(ot.guards.canActivateChecks.length)return(0,dn.of)(ot).pipe((0,it.b)(pn=>{const kt=new er(pn.id,this.serializeUrl(pn.extractedUrl),this.serializeUrl(pn.urlAfterRedirects),pn.targetSnapshot);this.triggerEvent(kt)}),(0,Yt.w)(pn=>{let kt=!1;return(0,dn.of)(pn).pipe(function ze(O,M){return(0,Ot.z)(S=>{const{targetSnapshot:W,guards:{canActivateChecks:ne}}=S;if(!ne.length)return(0,dn.of)(S);let _e=0;return(0,oe.D)(ne).pipe((0,mr.b)(Ve=>function tt(O,M,S,W){return function De(O,M,S,W){const ne=Fe(O);if(0===ne.length)return(0,dn.of)({});const _e={};return(0,oe.D)(ne).pipe((0,Ot.z)(Ve=>function yt(O,M,S,W){const ne=Nn(O,M,W);return Fn(ne.resolve?ne.resolve(M,S):ne(M,S))}(O[Ve],M,S,W).pipe((0,it.b)(ot=>{_e[Ve]=ot}))),Re(1),(0,Ot.z)(()=>Fe(_e).length===ne.length?(0,dn.of)(_e):Ht.E))}(O._resolve,O,M,W).pipe((0,Lt.U)(_e=>(O._resolvedData=_e,O.data=Object.assign(Object.assign({},O.data),Fi(O,S).resolve),null)))}(Ve.route,W,O,M)),(0,it.b)(()=>_e++),Re(1),(0,Ot.z)(Ve=>_e===ne.length?(0,dn.of)(S):Ht.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,it.b)({next:()=>kt=!0,complete:()=>{kt||(this.restoreHistory(pn),this.cancelNavigationTransition(pn,"At least one route resolver didn't emit any value."))}}))}),(0,it.b)(pn=>{const kt=new Gr(pn.id,this.serializeUrl(pn.extractedUrl),this.serializeUrl(pn.urlAfterRedirects),pn.targetSnapshot);this.triggerEvent(kt)}))}),et(ot=>{const{targetSnapshot:pn,id:kt,extractedUrl:qn,rawUrl:On,extras:{skipLocationChange:ar,replaceUrl:Vn}}=ot;return this.hooks.afterPreactivation(pn,{navigationId:kt,appliedUrlTree:qn,rawUrlTree:On,skipLocationChange:!!ar,replaceUrl:!!Vn})}),(0,Lt.U)(ot=>{const pn=function jo(O,M,S){const W=lo(O,M._root,S?S._root:void 0);return new ts(W,M)}(this.routeReuseStrategy,ot.targetSnapshot,ot.currentRouterState);return Object.assign(Object.assign({},ot),{targetRouterState:pn})}),(0,it.b)(ot=>{this.currentUrlTree=ot.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ot.urlAfterRedirects,ot.rawUrl),this.routerState=ot.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ot.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ot),this.browserUrlTree=ot.urlAfterRedirects)}),((O,M,S)=>(0,Lt.U)(W=>(new $s(M,W.targetRouterState,W.currentRouterState,S).activate(O),W)))(this.rootContexts,this.routeReuseStrategy,ot=>this.triggerEvent(ot)),(0,it.b)({next(){_e=!0},complete(){_e=!0}}),function Dt(O){return(0,Nt.e)((M,S)=>{try{M.subscribe(S)}finally{S.add(O)}})}(()=>{var ot;_e||Ve||this.cancelNavigationTransition(ne,`Navigation ID ${ne.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ot=this.currentNavigation)||void 0===ot?void 0:ot.id)===ne.id&&(this.currentNavigation=null)}),(0,br.K)(ot=>{if(Ve=!0,function Br(O){return O&&O[Yn]}(ot)){const pn=Qs(ot.url);pn||(this.navigated=!0,this.restoreHistory(ne,!0));const kt=new Wn(ne.id,this.serializeUrl(ne.extractedUrl),ot.message);W.next(kt),pn?setTimeout(()=>{const qn=this.urlHandlingStrategy.merge(ot.url,this.rawUrlTree),On={skipLocationChange:ne.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hr(ne.source)};this.scheduleNavigation(qn,"imperative",null,On,{resolve:ne.resolve,reject:ne.reject,promise:ne.promise})},0):ne.resolve(!1)}else{this.restoreHistory(ne,!0);const pn=new or(ne.id,this.serializeUrl(ne.extractedUrl),ot);W.next(pn);try{ne.resolve(this.errorHandler(ot))}catch(kt){ne.reject(kt)}}return Ht.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const W="popstate"===S.type?"popstate":"hashchange";"popstate"===W&&setTimeout(()=>{var ne;const _e={replaceUrl:!0},Ve=(null===(ne=S.state)||void 0===ne?void 0:ne.navigationId)?S.state:null;if(Ve){const pn=Object.assign({},Ve);delete pn.navigationId,delete pn.\u0275routerPageId,0!==Object.keys(pn).length&&(_e.state=pn)}const ot=this.parseUrl(S.url);this.scheduleNavigation(ot,W,Ve,_e)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){Gs(S),this.config=S.map(Ti),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,W={}){const{relativeTo:ne,queryParams:_e,fragment:Ve,queryParamsHandling:ot,preserveFragment:pn}=W,kt=ne||this.routerState.root,qn=pn?this.currentUrlTree.fragment:Ve;let On=null;switch(ot){case"merge":On=Object.assign(Object.assign({},this.currentUrlTree.queryParams),_e);break;case"preserve":On=this.currentUrlTree.queryParams;break;default:On=_e||null}return null!==On&&(On=this.removeEmptyProps(On)),function Et(O,M,S,W,ne){if(0===S.length)return vn(M.root,M.root,M.root,W,ne);const _e=function Qr(O){if("string"==typeof O[0]&&1===O.length&&"/"===O[0])return new Ar(!0,0,O);let M=0,S=!1;const W=O.reduce((ne,_e,Ve)=>{if("object"==typeof _e&&null!=_e){if(_e.outlets){const ot={};return $i(_e.outlets,(pn,kt)=>{ot[kt]="string"==typeof pn?pn.split("/"):pn}),[...ne,{outlets:ot}]}if(_e.segmentPath)return[...ne,_e.segmentPath]}return"string"!=typeof _e?[...ne,_e]:0===Ve?(_e.split("/").forEach((ot,pn)=>{0==pn&&"."===ot||(0==pn&&""===ot?S=!0:".."===ot?M++:""!=ot&&ne.push(ot))}),ne):[...ne,_e]},[]);return new Ar(S,M,W)}(S);if(_e.toRoot())return vn(M.root,M.root,new Me([],{}),W,ne);const Ve=function Di(O,M,S){if(O.isAbsolute)return new Wi(M.root,!0,0);if(-1===S.snapshot._lastPathIndex){const _e=S.snapshot._urlSegment;return new Wi(_e,_e===M.root,0)}const W=ct(O.commands[0])?0:1;return function ws(O,M,S){let W=O,ne=M,_e=S;for(;_e>ne;){if(_e-=ne,W=W.parent,!W)throw new Error("Invalid number of '../'");ne=W.segments.length}return new Wi(W,!1,ne-_e)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+W,O.numberOfDoubleDots)}(_e,M,O),ot=Ve.processChildren?Is(Ve.segmentGroup,Ve.index,_e.commands):ps(Ve.segmentGroup,Ve.index,_e.commands);return vn(M.root,Ve.segmentGroup,ot,W,ne)}(kt,this.currentUrlTree,S,On,null!=qn?qn:null)}navigateByUrl(S,W={skipLocationChange:!1}){const ne=Qs(S)?S:this.parseUrl(S),_e=this.urlHandlingStrategy.merge(ne,this.rawUrlTree);return this.scheduleNavigation(_e,"imperative",null,W)}navigate(S,W={skipLocationChange:!1}){return function Wt(O){for(let M=0;M<O.length;M++){const S=O[M];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${M}`)}}(S),this.navigateByUrl(this.createUrlTree(S,W),W)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let W;try{W=this.urlSerializer.parse(S)}catch(ne){W=this.malformedUriErrorHandler(ne,this.urlSerializer,S)}return W}isActive(S,W){let ne;if(ne=!0===W?Object.assign({},hn):!1===W?Object.assign({},cr):W,Qs(S))return Fr(this.currentUrlTree,S,ne);const _e=this.parseUrl(S);return Fr(this.currentUrlTree,_e,ne)}removeEmptyProps(S){return Object.keys(S).reduce((W,ne)=>{const _e=S[ne];return null!=_e&&(W[ne]=_e),W},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new en(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,W,ne,_e,Ve){var ot,pn;if(this.disposed)return Promise.resolve(!1);let kt,qn,On;Ve?(kt=Ve.resolve,qn=Ve.reject,On=Ve.promise):On=new Promise((Ls,Pr)=>{kt=Ls,qn=Pr});const ar=++this.navigationId;let Vn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ne=this.location.getState()),Vn=ne&&ne.\u0275routerPageId?ne.\u0275routerPageId:_e.replaceUrl||_e.skipLocationChange?null!==(ot=this.browserPageId)&&void 0!==ot?ot:0:(null!==(pn=this.browserPageId)&&void 0!==pn?pn:0)+1):Vn=0,this.setTransition({id:ar,targetPageId:Vn,source:W,restoredState:ne,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:_e,resolve:kt,reject:qn,promise:On,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),On.catch(Ls=>Promise.reject(Ls))}setBrowserUrl(S,W){const ne=this.urlSerializer.serialize(S),_e=Object.assign(Object.assign({},W.extras.state),this.generateNgRouterState(W.id,W.targetPageId));this.location.isCurrentPathEqualTo(ne)||W.extras.replaceUrl?this.location.replaceState(ne,"",_e):this.location.go(ne,"",_e)}restoreHistory(S,W=!1){var ne,_e;if("computed"===this.canceledNavigationResolution){const Ve=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.finalUrl)||0===Ve?this.currentUrlTree===(null===(_e=this.currentNavigation)||void 0===_e?void 0:_e.finalUrl)&&0===Ve&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ve)}else"replace"===this.canceledNavigationResolution&&(W&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,W){const ne=new Wn(S.id,this.serializeUrl(S.extractedUrl),W);this.triggerEvent(ne),S.resolve(!1)}generateNgRouterState(S,W){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:W}:{navigationId:S}}}return O.\u0275fac=function(S){g.$Z()},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})();function hr(O){return"imperative"!==O}let tr=(()=>{class O{constructor(S,W,ne,_e,Ve){this.router=S,this.route=W,this.tabIndexAttribute=ne,this.renderer=_e,this.el=Ve,this.commands=null,this.onChanges=new Oe.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(S){if(null!=this.tabIndexAttribute)return;const W=this.renderer,ne=this.el.nativeElement;null!==S?W.setAttribute(ne,"tabindex",S):W.removeAttribute(ne,"tabindex")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const S={skipLocationChange:xi(this.skipLocationChange),replaceUrl:xi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,S),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:xi(this.preserveFragment)})}}return O.\u0275fac=function(S){return new(S||O)(g.Y36(ur),g.Y36(Ws),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},O.\u0275dir=g.lG2({type:O,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,W){1&S&&g.NdJ("click",function(){return W.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),O})(),gi=(()=>{class O{constructor(S,W,ne){this.router=S,this.route=W,this.locationStrategy=ne,this.commands=null,this.href=null,this.onChanges=new Oe.x,this.subscription=S.events.subscribe(_e=>{_e instanceof en&&this.updateTargetUrlAndHref()})}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:null}ngOnChanges(S){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(S,W,ne,_e,Ve){if(0!==S||W||ne||_e||Ve||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ot={skipLocationChange:xi(this.skipLocationChange),replaceUrl:xi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ot),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:xi(this.preserveFragment)})}}return O.\u0275fac=function(S){return new(S||O)(g.Y36(ur),g.Y36(Ws),g.Y36(ut.S$))},O.\u0275dir=g.lG2({type:O,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(S,W){1&S&&g.NdJ("click",function(_e){return W.onClick(_e.button,_e.ctrlKey,_e.shiftKey,_e.altKey,_e.metaKey)}),2&S&&g.uIk("target",W.target)("href",W.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),O})();function xi(O){return""===O||!!O}class po{}class C{preload(M,S){return(0,dn.of)(null)}}let T=(()=>{class O{constructor(S,W,ne,_e){this.router=S,this.injector=ne,this.preloadingStrategy=_e,this.loader=new Mn(ne,W,pn=>S.triggerEvent(new Mr(pn)),pn=>S.triggerEvent(new Rr(pn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Bt.h)(S=>S instanceof en),(0,mr.b)(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(g.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,W){const ne=[];for(const _e of W)if(_e.loadChildren&&!_e.canLoad&&_e._loadedConfig){const Ve=_e._loadedConfig;ne.push(this.processRoutes(Ve.module,Ve.routes))}else _e.loadChildren&&!_e.canLoad?ne.push(this.preloadConfig(S,_e)):_e.children&&ne.push(this.processRoutes(S,_e.children));return(0,oe.D)(ne).pipe((0,St.J)(),(0,Lt.U)(_e=>{}))}preloadConfig(S,W){return this.preloadingStrategy.preload(W,()=>(W._loadedConfig?(0,dn.of)(W._loadedConfig):this.loader.load(S.injector,W)).pipe((0,Ot.z)(_e=>(W._loadedConfig=_e,this.processRoutes(_e.module,_e.routes)))))}}return O.\u0275fac=function(S){return new(S||O)(g.LFG(ur),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(po))},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})(),F=(()=>{class O{constructor(S,W,ne={}){this.router=S,this.viewportScroller=W,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof xt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof en&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof dt&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,W){this.router.triggerEvent(new dt(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,W))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return O.\u0275fac=function(S){g.$Z()},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})();const Ce=new g.OlP("ROUTER_CONFIGURATION"),Ze=new g.OlP("ROUTER_FORROOT_GUARD"),Ke=[ut.Ye,{provide:Jn,useClass:oi},{provide:ur,useFactory:function In(O,M,S,W,ne,_e,Ve={},ot,pn){const kt=new ur(null,O,M,S,W,ne,Hn(_e));return ot&&(kt.urlHandlingStrategy=ot),pn&&(kt.routeReuseStrategy=pn),function Bn(O,M){O.errorHandler&&(M.errorHandler=O.errorHandler),O.malformedUriErrorHandler&&(M.malformedUriErrorHandler=O.malformedUriErrorHandler),O.onSameUrlNavigation&&(M.onSameUrlNavigation=O.onSameUrlNavigation),O.paramsInheritanceStrategy&&(M.paramsInheritanceStrategy=O.paramsInheritanceStrategy),O.relativeLinkResolution&&(M.relativeLinkResolution=O.relativeLinkResolution),O.urlUpdateStrategy&&(M.urlUpdateStrategy=O.urlUpdateStrategy),O.canceledNavigationResolution&&(M.canceledNavigationResolution=O.canceledNavigationResolution)}(Ve,kt),Ve.enableTracing&&kt.events.subscribe(qn=>{var On,ar;null===(On=console.group)||void 0===On||On.call(console,`Router Event: ${qn.constructor.name}`),console.log(qn.toString()),console.log(qn),null===(ar=console.groupEnd)||void 0===ar||ar.call(console)}),kt},deps:[Jn,Ai,ut.Ye,g.zs3,g.Sil,mn,Ce,[class nr{},new g.FiY],[class mt{},new g.FiY]]},Ai,{provide:Ws,useFactory:function cs(O){return O.routerState.root},deps:[ur]},T,C,class Z{preload(M,S){return S().pipe((0,br.K)(()=>(0,dn.of)(null)))}},{provide:Ce,useValue:{enableTracing:!1}}];function Tt(){return new g.PXZ("Router",ur)}let fn=(()=>{class O{constructor(S,W){}static forRoot(S,W){return{ngModule:O,providers:[Ke,mi(S),{provide:Ze,useFactory:Cr,deps:[[ur,new g.FiY,new g.tp0]]},{provide:Ce,useValue:W||{}},{provide:ut.S$,useFactory:rr,deps:[ut.lw,[new g.tBr(ut.mr),new g.FiY],Ce]},{provide:F,useFactory:Pt,deps:[ur,ut.EM,Ce]},{provide:po,useExisting:W&&W.preloadingStrategy?W.preloadingStrategy:C},{provide:g.PXZ,multi:!0,useFactory:Tt},[Gn,{provide:g.ip1,multi:!0,useFactory:jt,deps:[Gn]},{provide:Qi,useFactory:Cn,deps:[Gn]},{provide:g.tb,multi:!0,useExisting:Qi}]]}}static forChild(S){return{ngModule:O,providers:[mi(S)]}}}return O.\u0275fac=function(S){return new(S||O)(g.LFG(Ze,8),g.LFG(ur,8))},O.\u0275mod=g.oAB({type:O}),O.\u0275inj=g.cJS({}),O})();function Pt(O,M,S){return S.scrollOffset&&M.setOffset(S.scrollOffset),new F(O,M,S)}function rr(O,M,S={}){return S.useHash?new ut.Do(O,M):new ut.b0(O,M)}function Cr(O){return"guarded"}function mi(O){return[{provide:g.deG,multi:!0,useValue:O},{provide:mn,multi:!0,useValue:O}]}let Gn=(()=>{class O{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Oe.x}appInitializer(){return this.injector.get(ut.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let W=null;const ne=new Promise(ot=>W=ot),_e=this.injector.get(ur),Ve=this.injector.get(Ce);return"disabled"===Ve.initialNavigation?(_e.setUpLocationChangeListener(),W(!0)):"enabled"===Ve.initialNavigation||"enabledBlocking"===Ve.initialNavigation?(_e.hooks.afterPreactivation=()=>this.initNavigation?(0,dn.of)(null):(this.initNavigation=!0,W(!0),this.resultOfPreactivationDone),_e.initialNavigation()):W(!0),ne})}bootstrapListener(S){const W=this.injector.get(Ce),ne=this.injector.get(T),_e=this.injector.get(F),Ve=this.injector.get(ur),ot=this.injector.get(g.z2F);S===ot.components[0]&&(("enabledNonBlocking"===W.initialNavigation||void 0===W.initialNavigation)&&Ve.initialNavigation(),ne.setUpPreloading(),_e.init(),Ve.resetRootComponentType(ot.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return O.\u0275fac=function(S){return new(S||O)(g.LFG(g.zs3))},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})();function jt(O){return O.appInitializer.bind(O)}function Cn(O){return O.bootstrapListener.bind(O)}const Qi=new g.OlP("Router Initializer")},3942:(Zn,It,j)=>{j.d(It,{Z:()=>ln});var g=j(2090),k=j(4859),he=j(9681),oe=j(1877);class je{constructor(Nt,Jt){this._delegate=Nt,this.firebase=Jt,(0,he._addComponent)(Nt,new k.wA("app-compat",()=>this,"PUBLIC")),this.container=Nt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Nt){this._delegate.automaticDataCollectionEnabled=Nt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Nt=>{this._delegate.checkDestroyed(),Nt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,he.deleteApp)(this._delegate)))}_getService(Nt,Jt=he._DEFAULT_ENTRY_NAME){var Un;this._delegate.checkDestroyed();const dn=this._delegate.container.getProvider(Nt);return!dn.isInitialized()&&"EXPLICIT"===(null===(Un=dn.getComponent())||void 0===Un?void 0:Un.instantiationMode)&&dn.initialize(),dn.getImmediate({identifier:Jt})}_removeServiceInstance(Nt,Jt=he._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Nt).clearInstance(Jt)}_addComponent(Nt){(0,he._addComponent)(this._delegate,Nt)}_addOrOverwriteComponent(Nt){(0,he._addOrOverwriteComponent)(this._delegate,Nt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ht=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ne=function at(){const Dn=function We(Dn){const Nt={},Jt={__esModule:!0,initializeApp:function xe(Ht,Oe={}){const Bt=he.initializeApp(Ht,Oe);if((0,g.r3)(Nt,Bt.name))return Nt[Bt.name];const Re=new Dn(Bt,Jt);return Nt[Bt.name]=Re,Re},app:dn,registerVersion:he.registerVersion,setLogLevel:he.setLogLevel,onLog:he.onLog,apps:null,SDK_VERSION:he.SDK_VERSION,INTERNAL:{registerComponent:function wt(Ht){const Oe=Ht.name,Bt=Oe.replace("-compat","");if(he._registerComponent(Ht)&&"PUBLIC"===Ht.type){const Re=(bt=dn())=>{if("function"!=typeof bt[Bt])throw ht.create("invalid-app-argument",{appName:Oe});return bt[Bt]()};void 0!==Ht.serviceProps&&(0,g.ZB)(Re,Ht.serviceProps),Jt[Bt]=Re,Dn.prototype[Bt]=function(...bt){return this._getService.bind(this,Oe).apply(this,Ht.multipleInstances?bt:[])}}return"PUBLIC"===Ht.type?Jt[Bt]:null},removeApp:function Un(Ht){delete Nt[Ht]},useAsService:function on(Ht,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:he}};function dn(Ht){if(!(0,g.r3)(Nt,Ht=Ht||he._DEFAULT_ENTRY_NAME))throw ht.create("no-app",{appName:Ht});return Nt[Ht]}return Jt.default=Jt,Object.defineProperty(Jt,"apps",{get:function Ge(){return Object.keys(Nt).map(Ht=>Nt[Ht])}}),dn.App=Dn,Jt}(je);return Dn.INTERNAL=Object.assign(Object.assign({},Dn.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function Nt(Jt){(0,g.ZB)(Dn,Jt)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Dn}(),Pe=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){Pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dn=self.firebase.SDK_VERSION;Dn&&Dn.indexOf("LITE")>=0&&Pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ln=Ne;!function _t(Dn){(0,he.registerVersion)("@firebase/app-compat","0.2.0",Dn)}()},9681:(Zn,It,j)=>{j.r(It),j.d(It,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>or,_DEFAULT_ENTRY_NAME:()=>lr,_addComponent:()=>Vt,_addOrOverwriteComponent:()=>Ot,_apps:()=>br,_clearComponents:()=>Qt,_components:()=>mr,_getProvider:()=>St,_registerComponent:()=>it,_removeServiceInstance:()=>ut,deleteApp:()=>er,getApp:()=>Yr,getApps:()=>ii,initializeApp:()=>dr,onLog:()=>Rr,registerVersion:()=>Mr,setLogLevel:()=>is});var g=j(5861),k=j(4859),he=j(1877),oe=j(2090),je=j(8766);class He{constructor(zt){this.container=zt}getPlatformInfoString(){return this.container.getProviders().map(Qn=>{if(function ht(Fn){const zt=Fn.getComponent();return"VERSION"===(null==zt?void 0:zt.type)}(Qn)){const yr=Qn.getImmediate();return`${yr.library}/${yr.version}`}return null}).filter(Qn=>Qn).join(" ")}}const We="@firebase/app",Ne=new he.Yd("@firebase/app"),lr="[DEFAULT]",yn={[We]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},br=new Map,mr=new Map;function Vt(Fn,zt){try{Fn.container.addComponent(zt)}catch(Qn){Ne.debug(`Component ${zt.name} failed to register with FirebaseApp ${Fn.name}`,Qn)}}function Ot(Fn,zt){Fn.container.addOrOverwriteComponent(zt)}function it(Fn){const zt=Fn.name;if(mr.has(zt))return Ne.debug(`There were multiple attempts to register component ${zt}.`),!1;mr.set(zt,Fn);for(const Qn of br.values())Vt(Qn,Fn);return!0}function St(Fn,zt){const Qn=Fn.container.getProvider("heartbeat").getImmediate({optional:!0});return Qn&&Qn.triggerHeartbeat(),Fn.container.getProvider(zt)}function ut(Fn,zt,Qn=lr){St(Fn,zt).clearInstance(Qn)}function Qt(){mr.clear()}const en=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wn{constructor(zt,Qn,yr){this._isDeleted=!1,this._options=Object.assign({},zt),this._config=Object.assign({},Qn),this._name=Qn.name,this._automaticDataCollectionEnabled=Qn.automaticDataCollectionEnabled,this._container=yr,this.container.addComponent(new k.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(zt){this.checkDestroyed(),this._automaticDataCollectionEnabled=zt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(zt){this._isDeleted=zt}checkDestroyed(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}const or="9.15.0";function dr(Fn,zt={}){let Qn=Fn;"object"!=typeof zt&&(zt={name:zt});const yr=Object.assign({name:lr,automaticDataCollectionEnabled:!1},zt),Fr=yr.name;if("string"!=typeof Fr||!Fr)throw en.create("bad-app-name",{appName:String(Fr)});if(Qn||(Qn=(0,oe.aH)()),!Qn)throw en.create("no-options");const Lr=br.get(Fr);if(Lr){if((0,oe.vZ)(Qn,Lr.options)&&(0,oe.vZ)(yr,Lr.config))return Lr;throw en.create("duplicate-app",{appName:Fr})}const Xe=new k.H0(Fr);for(const ft of mr.values())Xe.addComponent(ft);const Ue=new Wn(Qn,yr,Xe);return br.set(Fr,Ue),Ue}function Yr(Fn=lr){const zt=br.get(Fn);if(!zt&&Fn===lr)return dr();if(!zt)throw en.create("no-app",{appName:Fn});return zt}function ii(){return Array.from(br.values())}function er(Fn){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(Fn){const zt=Fn.name;br.has(zt)&&(br.delete(zt),yield Promise.all(Fn.container.getProviders().map(Qn=>Qn.delete())),Fn.isDeleted=!0)})).apply(this,arguments)}function Mr(Fn,zt,Qn){var yr;let Fr=null!==(yr=yn[Fn])&&void 0!==yr?yr:Fn;Qn&&(Fr+=`-${Qn}`);const Lr=Fr.match(/\s|\//),Xe=zt.match(/\s|\//);if(Lr||Xe){const Ue=[`Unable to register library "${Fr}" with version "${zt}":`];return Lr&&Ue.push(`library name "${Fr}" contains illegal characters (whitespace or "/")`),Lr&&Xe&&Ue.push("and"),Xe&&Ue.push(`version name "${zt}" contains illegal characters (whitespace or "/")`),void Ne.warn(Ue.join(" "))}it(new k.wA(`${Fr}-version`,()=>({library:Fr,version:zt}),"VERSION"))}function Rr(Fn,zt){if(null!==Fn&&"function"!=typeof Fn)throw en.create("invalid-log-argument");(0,he.Am)(Fn,zt)}function is(Fn){(0,he.Ub)(Fn)}const nt="firebase-heartbeat-store";let dt=null;function Gt(){return dt||(dt=(0,je.X3)("firebase-heartbeat-database",1,{upgrade:(Fn,zt)=>{0===zt&&Fn.createObjectStore(nt)}}).catch(Fn=>{throw en.create("idb-open",{originalErrorMessage:Fn.message})})),dt}function bn(){return(bn=(0,g.Z)(function*(Fn){try{return(yield Gt()).transaction(nt).objectStore(nt).get(Br(Fn))}catch(zt){if(zt instanceof oe.ZR)Ne.warn(zt.message);else{const Qn=en.create("idb-get",{originalErrorMessage:null==zt?void 0:zt.message});Ne.warn(Qn.message)}}})).apply(this,arguments)}function Yn(Fn,zt){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(Fn,zt){try{const yr=(yield Gt()).transaction(nt,"readwrite");return yield yr.objectStore(nt).put(zt,Br(Fn)),yr.done}catch(Qn){if(Qn instanceof oe.ZR)Ne.warn(Qn.message);else{const yr=en.create("idb-set",{originalErrorMessage:null==Qn?void 0:Qn.message});Ne.warn(yr.message)}}})).apply(this,arguments)}function Br(Fn){return`${Fn.name}!${Fn.options.appId}`}class Bi{constructor(zt){this.container=zt,this._heartbeatsCache=null;const Qn=this.container.getProvider("app").getImmediate();this._storage=new wi(Qn),this._heartbeatsCachePromise=this._storage.read().then(yr=>(this._heartbeatsCache=yr,yr))}triggerHeartbeat(){var zt=this;return(0,g.Z)(function*(){const yr=zt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Fr=di();if(null===zt._heartbeatsCache&&(zt._heartbeatsCache=yield zt._heartbeatsCachePromise),zt._heartbeatsCache.lastSentHeartbeatDate!==Fr&&!zt._heartbeatsCache.heartbeats.some(Lr=>Lr.date===Fr))return zt._heartbeatsCache.heartbeats.push({date:Fr,agent:yr}),zt._heartbeatsCache.heartbeats=zt._heartbeatsCache.heartbeats.filter(Lr=>{const Xe=new Date(Lr.date).valueOf();return Date.now()-Xe<=2592e6}),zt._storage.overwrite(zt._heartbeatsCache)})()}getHeartbeatsHeader(){var zt=this;return(0,g.Z)(function*(){if(null===zt._heartbeatsCache&&(yield zt._heartbeatsCachePromise),null===zt._heartbeatsCache||0===zt._heartbeatsCache.heartbeats.length)return"";const Qn=di(),{heartbeatsToSend:yr,unsentEntries:Fr}=function Hn(Fn,zt=1024){const Qn=[];let yr=Fn.slice();for(const Fr of Fn){const Lr=Qn.find(Xe=>Xe.agent===Fr.agent);if(Lr){if(Lr.dates.push(Fr.date),Dr(Qn)>zt){Lr.dates.pop();break}}else if(Qn.push({agent:Fr.agent,dates:[Fr.date]}),Dr(Qn)>zt){Qn.pop();break}yr=yr.slice(1)}return{heartbeatsToSend:Qn,unsentEntries:yr}}(zt._heartbeatsCache.heartbeats),Lr=(0,oe.L)(JSON.stringify({version:2,heartbeats:yr}));return zt._heartbeatsCache.lastSentHeartbeatDate=Qn,Fr.length>0?(zt._heartbeatsCache.heartbeats=Fr,yield zt._storage.overwrite(zt._heartbeatsCache)):(zt._heartbeatsCache.heartbeats=[],zt._storage.overwrite(zt._heartbeatsCache)),Lr})()}}function di(){return(new Date).toISOString().substring(0,10)}class wi{constructor(zt){this.app=zt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var zt=this;return(0,g.Z)(function*(){return(yield zt._canUseIndexedDBPromise)&&(yield function tn(Fn){return bn.apply(this,arguments)}(zt.app))||{heartbeats:[]}})()}overwrite(zt){var Qn=this;return(0,g.Z)(function*(){var yr;if(yield Qn._canUseIndexedDBPromise){const Lr=yield Qn.read();return Yn(Qn.app,{lastSentHeartbeatDate:null!==(yr=zt.lastSentHeartbeatDate)&&void 0!==yr?yr:Lr.lastSentHeartbeatDate,heartbeats:zt.heartbeats})}})()}add(zt){var Qn=this;return(0,g.Z)(function*(){var yr;if(yield Qn._canUseIndexedDBPromise){const Lr=yield Qn.read();return Yn(Qn.app,{lastSentHeartbeatDate:null!==(yr=zt.lastSentHeartbeatDate)&&void 0!==yr?yr:Lr.lastSentHeartbeatDate,heartbeats:[...Lr.heartbeats,...zt.heartbeats]})}})()}}function Dr(Fn){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Fn})).length}!function $i(Fn){it(new k.wA("platform-logger",zt=>new He(zt),"PRIVATE")),it(new k.wA("heartbeat",zt=>new Bi(zt),"PRIVATE")),Mr(We,"0.9.0",Fn),Mr(We,"0.9.0","esm2017"),Mr("fire-js","")}("")},4859:(Zn,It,j)=>{j.d(It,{H0:()=>We,wA:()=>he});var g=j(5861),k=j(2090);class he{constructor(Ne,Pe,vt){this.name=Ne,this.instanceFactory=Pe,this.type=vt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ne){return this.instantiationMode=Ne,this}setMultipleInstances(Ne){return this.multipleInstances=Ne,this}setServiceProps(Ne){return this.serviceProps=Ne,this}setInstanceCreatedCallback(Ne){return this.onInstanceCreated=Ne,this}}const oe="[DEFAULT]";class je{constructor(Ne,Pe){this.name=Ne,this.container=Pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ne){const Pe=this.normalizeInstanceIdentifier(Ne);if(!this.instancesDeferred.has(Pe)){const vt=new k.BH;if(this.instancesDeferred.set(Pe,vt),this.isInitialized(Pe)||this.shouldAutoInitialize())try{const wn=this.getOrInitializeService({instanceIdentifier:Pe});wn&&vt.resolve(wn)}catch(wn){}}return this.instancesDeferred.get(Pe).promise}getImmediate(Ne){var Pe;const vt=this.normalizeInstanceIdentifier(null==Ne?void 0:Ne.identifier),wn=null!==(Pe=null==Ne?void 0:Ne.optional)&&void 0!==Pe&&Pe;if(!this.isInitialized(vt)&&!this.shouldAutoInitialize()){if(wn)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:vt})}catch(_t){if(wn)return null;throw _t}}getComponent(){return this.component}setComponent(Ne){if(Ne.name!==this.name)throw Error(`Mismatching Component ${Ne.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ne,this.shouldAutoInitialize()){if(function ht(at){return"EAGER"===at.instantiationMode}(Ne))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(Pe){}for(const[Pe,vt]of this.instancesDeferred.entries()){const wn=this.normalizeInstanceIdentifier(Pe);try{const _t=this.getOrInitializeService({instanceIdentifier:wn});vt.resolve(_t)}catch(_t){}}}}clearInstance(Ne=oe){this.instancesDeferred.delete(Ne),this.instancesOptions.delete(Ne),this.instances.delete(Ne)}delete(){var Ne=this;return(0,g.Z)(function*(){const Pe=Array.from(Ne.instances.values());yield Promise.all([...Pe.filter(vt=>"INTERNAL"in vt).map(vt=>vt.INTERNAL.delete()),...Pe.filter(vt=>"_delete"in vt).map(vt=>vt._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ne=oe){return this.instances.has(Ne)}getOptions(Ne=oe){return this.instancesOptions.get(Ne)||{}}initialize(Ne={}){const{options:Pe={}}=Ne,vt=this.normalizeInstanceIdentifier(Ne.instanceIdentifier);if(this.isInitialized(vt))throw Error(`${this.name}(${vt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const wn=this.getOrInitializeService({instanceIdentifier:vt,options:Pe});for(const[_t,ln]of this.instancesDeferred.entries())vt===this.normalizeInstanceIdentifier(_t)&&ln.resolve(wn);return wn}onInit(Ne,Pe){var vt;const wn=this.normalizeInstanceIdentifier(Pe),_t=null!==(vt=this.onInitCallbacks.get(wn))&&void 0!==vt?vt:new Set;_t.add(Ne),this.onInitCallbacks.set(wn,_t);const ln=this.instances.get(wn);return ln&&Ne(ln,wn),()=>{_t.delete(Ne)}}invokeOnInitCallbacks(Ne,Pe){const vt=this.onInitCallbacks.get(Pe);if(vt)for(const wn of vt)try{wn(Ne,Pe)}catch(_t){}}getOrInitializeService({instanceIdentifier:Ne,options:Pe={}}){let vt=this.instances.get(Ne);if(!vt&&this.component&&(vt=this.component.instanceFactory(this.container,{instanceIdentifier:(at=Ne,at===oe?void 0:at),options:Pe}),this.instances.set(Ne,vt),this.instancesOptions.set(Ne,Pe),this.invokeOnInitCallbacks(vt,Ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ne,vt)}catch(wn){}var at;return vt||null}normalizeInstanceIdentifier(Ne=oe){return this.component?this.component.multipleInstances?Ne:oe:Ne}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class We{constructor(Ne){this.name=Ne,this.providers=new Map}addComponent(Ne){const Pe=this.getProvider(Ne.name);if(Pe.isComponentSet())throw new Error(`Component ${Ne.name} has already been registered with ${this.name}`);Pe.setComponent(Ne)}addOrOverwriteComponent(Ne){this.getProvider(Ne.name).isComponentSet()&&this.providers.delete(Ne.name),this.addComponent(Ne)}getProvider(Ne){if(this.providers.has(Ne))return this.providers.get(Ne);const Pe=new je(Ne,this);return this.providers.set(Ne,Pe),Pe}getProviders(){return Array.from(this.providers.values())}}},1877:(Zn,It,j)=>{j.d(It,{Am:()=>at,Ub:()=>We,Yd:()=>ht,in:()=>k});const g=[];var k=(()=>{return(Ne=k||(k={}))[Ne.DEBUG=0]="DEBUG",Ne[Ne.VERBOSE=1]="VERBOSE",Ne[Ne.INFO=2]="INFO",Ne[Ne.WARN=3]="WARN",Ne[Ne.ERROR=4]="ERROR",Ne[Ne.SILENT=5]="SILENT",k;var Ne})();const he={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},oe=k.INFO,je={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},He=(Ne,Pe,...vt)=>{if(Pe<Ne.logLevel)return;const wn=(new Date).toISOString(),_t=je[Pe];if(!_t)throw new Error(`Attempted to log a message with an invalid logType (value: ${Pe})`);console[_t](`[${wn}]  ${Ne.name}:`,...vt)};class ht{constructor(Pe){this.name=Pe,this._logLevel=oe,this._logHandler=He,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(Pe){if(!(Pe in k))throw new TypeError(`Invalid value "${Pe}" assigned to \`logLevel\``);this._logLevel=Pe}setLogLevel(Pe){this._logLevel="string"==typeof Pe?he[Pe]:Pe}get logHandler(){return this._logHandler}set logHandler(Pe){if("function"!=typeof Pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(Pe){this._userLogHandler=Pe}debug(...Pe){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...Pe),this._logHandler(this,k.DEBUG,...Pe)}log(...Pe){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...Pe),this._logHandler(this,k.VERBOSE,...Pe)}info(...Pe){this._userLogHandler&&this._userLogHandler(this,k.INFO,...Pe),this._logHandler(this,k.INFO,...Pe)}warn(...Pe){this._userLogHandler&&this._userLogHandler(this,k.WARN,...Pe),this._logHandler(this,k.WARN,...Pe)}error(...Pe){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...Pe),this._logHandler(this,k.ERROR,...Pe)}}function We(Ne){g.forEach(Pe=>{Pe.setLogLevel(Ne)})}function at(Ne,Pe){for(const vt of g){let wn=null;Pe&&Pe.level&&(wn=he[Pe.level]),vt.userLogHandler=null===Ne?null:(_t,ln,...Dn)=>{const Nt=Dn.map(Jt=>{if(null==Jt)return null;if("string"==typeof Jt)return Jt;if("number"==typeof Jt||"boolean"==typeof Jt)return Jt.toString();if(Jt instanceof Error)return Jt.message;try{return JSON.stringify(Jt)}catch(Un){return null}}).filter(Jt=>Jt).join(" ");ln>=(null!=wn?wn:_t.logLevel)&&Ne({level:k[ln].toLowerCase(),message:Nt,args:Dn,type:_t.name})}}}},259:(Zn,It,j)=>{j.d(It,{C6:()=>g.getApps,Mq:()=>g.getApp,ZF:()=>g.initializeApp});var g=j(9681);(0,g.registerVersion)("firebase","9.15.0","app")},9260:(Zn,It,j)=>{j.d(It,{Z:()=>g.Z});var g=j(3942);g.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(Zn,It,j)=>{j.r(It);var g=j(5861),k=j(3942),he=j(2090),oe=j(9681),je=j(1877),He=j(655),ht=j(4859);const ln=function wn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Dn=function _t(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Nt=new he.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Un=new je.Yd("@firebase/auth");function dn(b,...p){Un.logLevel<=je.in.ERROR&&Un.error(`Auth (${oe.SDK_VERSION}): ${b}`,...p)}function xe(b,...p){throw Ht(b,...p)}function Ge(b,...p){return Ht(b,...p)}function wt(b,p,y){const D=Object.assign(Object.assign({},Dn()),{[p]:y});return new he.LL("auth","Firebase",D).create(p,{appName:b.name})}function on(b,p,y){if(!(p instanceof y))throw y.name!==p.constructor.name&&xe(b,"argument-error"),wt(b,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ht(b,...p){if("string"!=typeof b){const y=p[0],D=[...p.slice(1)];return D[0]&&(D[0].appName=b.name),b._errorFactory.create(y,...D)}return Nt.create(b,...p)}function Oe(b,p,...y){if(!b)throw Ht(p,...y)}function Bt(b){const p="INTERNAL ASSERTION FAILED: "+b;throw dn(p),new Error(p)}function Re(b,p){b||Bt(p)}const bt=new Map;function Je(b){Re(b instanceof Function,"Expected a class definition");let p=bt.get(b);return p?(Re(p instanceof b,"Instance stored in cache mismatched with class"),p):(p=new b,bt.set(b,p),p)}function Lt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Yt(){return"http:"===sr()||"https:"===sr()}function sr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class br{constructor(p,y){this.shortDelay=p,this.longDelay=y,Re(y>p,"Short delay should be less than long delay!"),this.isMobile=(0,he.uI)()||(0,he.b$)()}get(){return function lr(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Yt()||(0,he.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mr(b,p){Re(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return p?`${y}${p.startsWith("/")?p.slice(1):p}`:y}class Vt{static initialize(p,y,D){this.fetchImpl=p,y&&(this.headersImpl=y),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},it=new br(3e4,6e4);function St(b,p){return b.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:b.tenantId}):p}function ut(b,p,y,D){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,g.Z)(function*(b,p,y,D,re={}){return xt(b,re,(0,g.Z)(function*(){let Ee={},Ct={};D&&("GET"===p?Ct=D:Ee={body:JSON.stringify(D)});const gn=(0,he.xO)(Object.assign({key:b.config.apiKey},Ct)).slice(1),fr=yield b._getAdditionalHeaders();return fr["Content-Type"]="application/json",b.languageCode&&(fr["X-Firebase-Locale"]=b.languageCode),Vt.fetch()(dr(b,b.config.apiHost,y,gn),Object.assign({method:p,headers:fr,referrerPolicy:"no-referrer"},Ee))}))})).apply(this,arguments)}function xt(b,p,y){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(function*(b,p,y){b._canInitEmulator=!1;const D=Object.assign(Object.assign({},Ot),p);try{const re=new Yr(b),Ee=yield Promise.race([y(),re.promise]);re.clearNetworkTimeout();const Ct=yield Ee.json();if("needConfirmation"in Ct)throw ii(b,"account-exists-with-different-credential",Ct);if(Ee.ok&&!("errorMessage"in Ct))return Ct;{const gn=Ee.ok?Ct.errorMessage:Ct.error.message,[fr,Or]=gn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===fr)throw ii(b,"credential-already-in-use",Ct);if("EMAIL_EXISTS"===fr)throw ii(b,"email-already-in-use",Ct);if("USER_DISABLED"===fr)throw ii(b,"user-disabled",Ct);const Ei=D[fr]||fr.toLowerCase().replace(/[_\s]+/g,"-");if(Or)throw wt(b,Ei,Or);xe(b,Ei)}}catch(re){if(re instanceof he.ZR)throw re;xe(b,"network-request-failed")}})).apply(this,arguments)}function Wn(b,p,y,D){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(b,p,y,D,re={}){const Ee=yield ut(b,p,y,D,re);return"mfaPendingCredential"in Ee&&xe(b,"multi-factor-auth-required",{_serverResponse:Ee}),Ee})).apply(this,arguments)}function dr(b,p,y,D){const re=`${p}${y}?${D}`;return b.config.emulator?mr(b.config,re):`${b.config.apiScheme}://${re}`}class Yr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((y,D)=>{this.timer=setTimeout(()=>D(Ge(this.auth,"network-request-failed")),it.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ii(b,p,y){const D={appName:b.name};y.email&&(D.email=y.email),y.phoneNumber&&(D.phoneNumber=y.phoneNumber);const re=Ge(b,p,D);return re.customData._tokenResponse=y,re}function Gr(){return(Gr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Mr(b,p){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function is(b,p){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function cn(b){if(b)try{const p=new Date(Number(b));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Gt(){return(Gt=(0,g.Z)(function*(b,p=!1){const y=(0,he.m9)(b),D=yield y.getIdToken(p),re=bn(D);Oe(re&&re.exp&&re.auth_time&&re.iat,y.auth,"internal-error");const Ee="object"==typeof re.firebase?re.firebase:void 0,Ct=null==Ee?void 0:Ee.sign_in_provider;return{claims:re,token:D,authTime:cn(tn(re.auth_time)),issuedAtTime:cn(tn(re.iat)),expirationTime:cn(tn(re.exp)),signInProvider:Ct||null,signInSecondFactor:(null==Ee?void 0:Ee.sign_in_second_factor)||null}})).apply(this,arguments)}function tn(b){return 1e3*Number(b)}function bn(b){const[p,y,D]=b.split(".");if(void 0===p||void 0===y||void 0===D)return dn("JWT malformed, contained fewer than 3 sections"),null;try{const re=(0,he.tV)(y);return re?JSON.parse(re):(dn("Failed to decode base64 JWT payload"),null)}catch(re){return dn("Caught error parsing JWT payload as JSON",null==re?void 0:re.toString()),null}}function Xr(b,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(b,p,y=!1){if(y)return p;try{return yield p}catch(D){throw D instanceof he.ZR&&kr(D)&&b.auth.currentUser===b&&(yield b.auth.signOut()),D}})).apply(this,arguments)}function kr({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class ls{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var y;if(p){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const re=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,re)}}schedule(p=!1){var y=this;if(!this.isRunning)return;const D=this.getInterval(p);this.timerId=setTimeout((0,g.Z)(function*(){yield y.iteration()}),D)}iteration(){var p=this;return(0,g.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===(null==y?void 0:y.code)&&p.schedule(!0))}p.schedule()})()}}class Bi{constructor(p,y){this.createdAt=p,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=cn(this.lastLoginAt),this.creationTime=cn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function di(b){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,g.Z)(function*(b){var p;const y=b.auth,D=yield b.getIdToken(),re=yield Xr(b,is(y,{idToken:D}));Oe(null==re?void 0:re.users.length,y,"internal-error");const Ee=re.users[0];b._notifyReloadListener(Ee);const Ct=(null===(p=Ee.providerUserInfo)||void 0===p?void 0:p.length)?Fn(Ee.providerUserInfo):[],gn=$i(b.providerData,Ct),Ei=!!b.isAnonymous&&!(b.email&&Ee.passwordHash||(null==gn?void 0:gn.length)),ai={uid:Ee.localId,displayName:Ee.displayName||null,photoURL:Ee.photoUrl||null,email:Ee.email||null,emailVerified:Ee.emailVerified||!1,phoneNumber:Ee.phoneNumber||null,tenantId:Ee.tenantId||null,providerData:gn,metadata:new Bi(Ee.createdAt,Ee.lastLoginAt),isAnonymous:Ei};Object.assign(b,ai)})).apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(b){const p=(0,he.m9)(b);yield di(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function $i(b,p){return[...b.filter(D=>!p.some(re=>re.providerId===D.providerId)),...p]}function Fn(b){return b.map(p=>{var{providerId:y}=p,D=(0,He._T)(p,["providerId"]);return{providerId:y,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function Qn(){return(Qn=(0,g.Z)(function*(b,p){const y=yield xt(b,{},(0,g.Z)(function*(){const D=(0,he.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:re,apiKey:Ee}=b.config,Ct=dr(b,re,"/v1/token",`key=${Ee}`),gn=yield b._getAdditionalHeaders();return gn["Content-Type"]="application/x-www-form-urlencoded",Vt.fetch()(Ct,{method:"POST",headers:gn,body:D})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class yr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Oe(p.idToken,"internal-error"),Oe(void 0!==p.idToken,"internal-error"),Oe(void 0!==p.refreshToken,"internal-error");const y="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Yn(b){const p=bn(b);return Oe(p,"internal-error"),Oe(void 0!==p.exp,"internal-error"),Oe(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,y)}getToken(p,y=!1){var D=this;return(0,g.Z)(function*(){return Oe(!D.accessToken||D.refreshToken,p,"user-token-expired"),y||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(p,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,y){var D=this;return(0,g.Z)(function*(){const{accessToken:re,refreshToken:Ee,expiresIn:Ct}=yield function zt(b,p){return Qn.apply(this,arguments)}(p,y);D.updateTokensAndExpiration(re,Ee,Number(Ct))})()}updateTokensAndExpiration(p,y,D){this.refreshToken=y||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(p,y){const{refreshToken:D,accessToken:re,expirationTime:Ee}=y,Ct=new yr;return D&&(Oe("string"==typeof D,"internal-error",{appName:p}),Ct.refreshToken=D),re&&(Oe("string"==typeof re,"internal-error",{appName:p}),Ct.accessToken=re),Ee&&(Oe("number"==typeof Ee,"internal-error",{appName:p}),Ct.expirationTime=Ee),Ct}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new yr,this.toJSON())}_performRefresh(){return Bt("not implemented")}}function Fr(b,p){Oe("string"==typeof b||void 0===b,"internal-error",{appName:p})}class Lr{constructor(p){var{uid:y,auth:D,stsTokenManager:re}=p,Ee=(0,He._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ls(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=D,this.stsTokenManager=re,this.accessToken=re.accessToken,this.displayName=Ee.displayName||null,this.email=Ee.email||null,this.emailVerified=Ee.emailVerified||!1,this.phoneNumber=Ee.phoneNumber||null,this.photoURL=Ee.photoURL||null,this.isAnonymous=Ee.isAnonymous||!1,this.tenantId=Ee.tenantId||null,this.providerData=Ee.providerData?[...Ee.providerData]:[],this.metadata=new Bi(Ee.createdAt||void 0,Ee.lastLoginAt||void 0)}getIdToken(p){var y=this;return(0,g.Z)(function*(){const D=yield Xr(y,y.stsTokenManager.getToken(y.auth,p));return Oe(D,y.auth,"internal-error"),y.accessToken!==D&&(y.accessToken=D,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),D})()}getIdTokenResult(p){return function dt(b){return Gt.apply(this,arguments)}(this,p)}reload(){return function wi(b){return Dr.apply(this,arguments)}(this)}_assign(p){this!==p&&(Oe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(y=>Object.assign({},y)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Lr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,y=!1){var D=this;return(0,g.Z)(function*(){let re=!1;p.idToken&&p.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(p),re=!0),y&&(yield di(D)),yield D.auth._persistUserIfCurrent(D),re&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var p=this;return(0,g.Z)(function*(){const y=yield p.getIdToken();return yield Xr(p,function er(b,p){return Gr.apply(this,arguments)}(p.auth,{idToken:y})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,y){var D,re,Ee,Ct,gn,fr,Or,Ei;const ai=null!==(D=y.displayName)&&void 0!==D?D:void 0,Zo=null!==(re=y.email)&&void 0!==re?re:void 0,f=null!==(Ee=y.phoneNumber)&&void 0!==Ee?Ee:void 0,c=null!==(Ct=y.photoURL)&&void 0!==Ct?Ct:void 0,d=null!==(gn=y.tenantId)&&void 0!==gn?gn:void 0,v=null!==(fr=y._redirectEventId)&&void 0!==fr?fr:void 0,x=null!==(Or=y.createdAt)&&void 0!==Or?Or:void 0,H=null!==(Ei=y.lastLoginAt)&&void 0!==Ei?Ei:void 0,{uid:te,emailVerified:Ie,isAnonymous:Ye,providerData:lt,stsTokenManager:an}=y;Oe(te&&an,p,"internal-error");const Tn=yr.fromJSON(this.name,an);Oe("string"==typeof te,p,"internal-error"),Fr(ai,p.name),Fr(Zo,p.name),Oe("boolean"==typeof Ie,p,"internal-error"),Oe("boolean"==typeof Ye,p,"internal-error"),Fr(f,p.name),Fr(c,p.name),Fr(d,p.name),Fr(v,p.name),Fr(x,p.name),Fr(H,p.name);const Rn=new Lr({uid:te,auth:p,email:Zo,emailVerified:Ie,displayName:ai,isAnonymous:Ye,photoURL:c,phoneNumber:f,tenantId:d,stsTokenManager:Tn,createdAt:x,lastLoginAt:H});return lt&&Array.isArray(lt)&&(Rn.providerData=lt.map(Er=>Object.assign({},Er))),v&&(Rn._redirectEventId=v),Rn}static _fromIdTokenResponse(p,y,D=!1){return(0,g.Z)(function*(){const re=new yr;re.updateFromServerResponse(y);const Ee=new Lr({uid:y.localId,auth:p,stsTokenManager:re,isAnonymous:D});return yield di(Ee),Ee})()}}const Ue=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(y,D){var re=this;return(0,g.Z)(function*(){re.storage[y]=D})()}_get(y){var D=this;return(0,g.Z)(function*(){const re=D.storage[y];return void 0===re?null:re})()}_remove(y){var D=this;return(0,g.Z)(function*(){delete D.storage[y]})()}_addListener(y,D){}_removeListener(y,D){}}return b.type="NONE",b})();function ft(b,p,y){return`firebase:${b}:${p}:${y}`}class un{constructor(p,y,D){this.persistence=p,this.auth=y,this.userKey=D;const{config:re,name:Ee}=this.auth;this.fullUserKey=ft(this.userKey,re.apiKey,Ee),this.fullPersistenceKey=ft("persistence",re.apiKey,Ee),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,g.Z)(function*(){const y=yield p.persistence._get(p.fullUserKey);return y?Lr._fromJSON(p.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var y=this;return(0,g.Z)(function*(){if(y.persistence===p)return;const D=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=p,D?y.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,y,D="authUser"){return(0,g.Z)(function*(){if(!y.length)return new un(Je(Ue),p,D);const re=(yield Promise.all(y.map(function(){var Or=(0,g.Z)(function*(Ei){if(yield Ei._isAvailable())return Ei});return function(Ei){return Or.apply(this,arguments)}}()))).filter(Or=>Or);let Ee=re[0]||Je(Ue);const Ct=ft(D,p.config.apiKey,p.name);let gn=null;for(const Or of y)try{const Ei=yield Or._get(Ct);if(Ei){const ai=Lr._fromJSON(p,Ei);Or!==Ee&&(gn=ai),Ee=Or;break}}catch(Ei){}const fr=re.filter(Or=>Or._shouldAllowMigration);return Ee._shouldAllowMigration&&fr.length?(Ee=fr[0],gn&&(yield Ee._set(Ct,gn.toJSON())),yield Promise.all(y.map(function(){var Or=(0,g.Z)(function*(Ei){if(Ei!==Ee)try{yield Ei._remove(Ct)}catch(ai){}});return function(Ei){return Or.apply(this,arguments)}}())),new un(Ee,p,D)):new un(Ee,p,D)})()}}function Ut(b){const p=b.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(pt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Be(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(_r(p))return"Blackberry";if(Jn(p))return"Webos";if(Me(p))return"Safari";if((p.includes("chrome/")||Ae(p))&&!p.includes("edge/"))return"Chrome";if(sn(p))return"Android";{const D=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function Be(b=(0,he.z$)()){return/firefox\//i.test(b)}function Me(b=(0,he.z$)()){const p=b.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ae(b=(0,he.z$)()){return/crios\//i.test(b)}function pt(b=(0,he.z$)()){return/iemobile/i.test(b)}function sn(b=(0,he.z$)()){return/android/i.test(b)}function _r(b=(0,he.z$)()){return/blackberry/i.test(b)}function Jn(b=(0,he.z$)()){return/webos/i.test(b)}function oi(b=(0,he.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Gi(b=(0,he.z$)()){return oi(b)||sn(b)||Jn(b)||_r(b)||/windows phone/i.test(b)||pt(b)}function as(b,p=[]){let y;switch(b){case"Browser":y=Ut((0,he.z$)());break;case"Worker":y=`${Ut((0,he.z$)())}-${b}`;break;default:y=b}const D=p.length?p.join(","):"FirebaseCore-web";return`${y}/JsCore/${oe.SDK_VERSION}/${D}`}class Si{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,y){const D=Ee=>new Promise((Ct,gn)=>{try{Ct(p(Ee))}catch(fr){gn(fr)}});D.onAbort=y,this.queue.push(D);const re=this.queue.length-1;return()=>{this.queue[re]=()=>Promise.resolve()}}runMiddleware(p){var y=this;return(0,g.Z)(function*(){if(y.auth.currentUser===p)return;const D=[];try{for(const re of y.queue)yield re(p),re.onAbort&&D.push(re.onAbort)}catch(re){D.reverse();for(const Ee of D)try{Ee()}catch(Ct){}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null==re?void 0:re.message})}})()}}class _n{constructor(p,y,D){this.app=p,this.heartbeatServiceProvider=y,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hi(this),this.idTokenSubscription=new hi(this),this.beforeStateQueue=new Si(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(p,y){var D=this;return y&&(this._popupRedirectResolver=Je(y)),this._initializationPromise=this.queue((0,g.Z)(function*(){var re,Ee;if(!D._deleted&&(D.persistenceManager=yield un.create(D,p),!D._deleted)){if(null===(re=D._popupRedirectResolver)||void 0===re?void 0:re._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch(Ct){}yield D.initializeCurrentUser(y),D.lastNotifiedUid=(null===(Ee=D.currentUser)||void 0===Ee?void 0:Ee.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,g.Z)(function*(){if(p._deleted)return;const y=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||y){if(p.currentUser&&y&&p.currentUser.uid===y.uid)return p._currentUser._assign(y),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(y,!0)}})()}initializeCurrentUser(p){var y=this;return(0,g.Z)(function*(){var D;const re=yield y.assertedPersistence.getCurrentUser();let Ee=re,Ct=!1;if(p&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const gn=null===(D=y.redirectUser)||void 0===D?void 0:D._redirectEventId,fr=null==Ee?void 0:Ee._redirectEventId,Or=yield y.tryRedirectSignIn(p);(!gn||gn===fr)&&(null==Or?void 0:Or.user)&&(Ee=Or.user,Ct=!0)}if(!Ee)return y.directlySetCurrentUser(null);if(!Ee._redirectEventId){if(Ct)try{yield y.beforeStateQueue.runMiddleware(Ee)}catch(gn){Ee=re,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(gn))}return Ee?y.reloadAndSetCurrentUserOrClear(Ee):y.directlySetCurrentUser(null)}return Oe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===Ee._redirectEventId?y.directlySetCurrentUser(Ee):y.reloadAndSetCurrentUserOrClear(Ee)})()}tryRedirectSignIn(p){var y=this;return(0,g.Z)(function*(){let D=null;try{D=yield y._popupRedirectResolver._completeRedirectFn(y,p,!0)}catch(re){yield y._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(p){var y=this;return(0,g.Z)(function*(){try{yield di(p)}catch(D){if("auth/network-request-failed"!==(null==D?void 0:D.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function yn(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var p=this;return(0,g.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var y=this;return(0,g.Z)(function*(){const D=p?(0,he.m9)(p):null;return D&&Oe(D.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(D&&D._clone(y))})()}_updateCurrentUser(p,y=!1){var D=this;return(0,g.Z)(function*(){if(!D._deleted)return p&&Oe(D.tenantId===p.tenantId,D,"tenant-id-mismatch"),y||(yield D.beforeStateQueue.runMiddleware(p)),D.queue((0,g.Z)(function*(){yield D.directlySetCurrentUser(p),D.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,g.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var y=this;return this.queue((0,g.Z)(function*(){yield y.assertedPersistence.setPersistence(Je(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new he.LL("auth","Firebase",p())}onAuthStateChanged(p,y,D){return this.registerStateListener(this.authStateSubscription,p,y,D)}beforeAuthStateChanged(p,y){return this.beforeStateQueue.pushCallback(p,y)}onIdTokenChanged(p,y,D){return this.registerStateListener(this.idTokenSubscription,p,y,D)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,y){var D=this;return(0,g.Z)(function*(){const re=yield D.getOrInitRedirectPersistenceManager(y);return null===p?re.removeCurrentUser():re.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var y=this;return(0,g.Z)(function*(){if(!y.redirectPersistenceManager){const D=p&&Je(p)||y._popupRedirectResolver;Oe(D,y,"argument-error"),y.redirectPersistenceManager=yield un.create(y,[Je(D._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(p){var y=this;return(0,g.Z)(function*(){var D,re;return y._isInitialized&&(yield y.queue((0,g.Z)(function*(){}))),(null===(D=y._currentUser)||void 0===D?void 0:D._redirectEventId)===p?y._currentUser:(null===(re=y.redirectUser)||void 0===re?void 0:re._redirectEventId)===p?y.redirectUser:null})()}_persistUserIfCurrent(p){var y=this;return(0,g.Z)(function*(){if(p===y.currentUser)return y.queue((0,g.Z)(function*(){return y.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(y=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,y,D,re){if(this._deleted)return()=>{};const Ee="function"==typeof y?y:y.next.bind(y),Ct=this._isInitialized?Promise.resolve():this._initializationPromise;return Oe(Ct,this,"internal-error"),Ct.then(()=>Ee(this.currentUser)),"function"==typeof y?p.addObserver(y,D,re):p.addObserver(y)}directlySetCurrentUser(p){var y=this;return(0,g.Z)(function*(){y.currentUser&&y.currentUser!==p&&y._currentUser._stopProactiveRefresh(),p&&y.isProactiveRefreshEnabled&&p._startProactiveRefresh(),y.currentUser=p,p?yield y.assertedPersistence.setCurrentUser(p):yield y.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=as(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,g.Z)(function*(){var y;const D={"X-Client-Version":p.clientVersion};p.app.options.appId&&(D["X-Firebase-gmpid"]=p.app.options.appId);const re=yield null===(y=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return re&&(D["X-Firebase-Client"]=re),D})()}}function Tr(b){return(0,he.m9)(b)}class hi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,he.ne)(y=>this.observer=y)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function gs(b){const p=b.indexOf(":");return p<0?"":b.substr(0,p+1)}function ds(b){if(!b)return null;const p=Number(b);return isNaN(p)?null:p}class Yi{constructor(p,y){this.providerId=p,this.signInMethod=y}toJSON(){return Bt("not implemented")}_getIdTokenResponse(p){return Bt("not implemented")}_linkToIdToken(p,y){return Bt("not implemented")}_getReauthenticationResolver(p){return Bt("not implemented")}}function Ii(b,p){return zr.apply(this,arguments)}function zr(){return(zr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:resetPassword",St(b,p))})).apply(this,arguments)}function Cs(b,p){return es.apply(this,arguments)}function es(){return(es=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function hs(b,p){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",St(b,p))})).apply(this,arguments)}function Ir(){return(Ir=(0,g.Z)(function*(b,p){return Wn(b,"POST","/v1/accounts:signInWithPassword",St(b,p))})).apply(this,arguments)}function ts(b,p){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:sendOobCode",St(b,p))})).apply(this,arguments)}function bi(b,p){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(b,p){return ts(b,p)})).apply(this,arguments)}function Fi(b,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,g.Z)(function*(b,p){return ts(b,p)})).apply(this,arguments)}function si(b,p){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(b,p){return ts(b,p)})).apply(this,arguments)}function ji(b,p){return bs.apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(b,p){return ts(b,p)})).apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(function*(b,p){return Wn(b,"POST","/v1/accounts:signInWithEmailLink",St(b,p))})).apply(this,arguments)}function lo(){return(lo=(0,g.Z)(function*(b,p){return Wn(b,"POST","/v1/accounts:signInWithEmailLink",St(b,p))})).apply(this,arguments)}class Ts extends Yi{constructor(p,y,D,re=null){super("password",D),this._email=p,this._password=y,this._tenantId=re}static _fromEmailAndPassword(p,y){return new Ts(p,y,"password")}static _fromEmailAndCode(p,y,D=null){return new Ts(p,y,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(p){var y=this;return(0,g.Z)(function*(){switch(y.signInMethod){case"password":return function wr(b,p){return Ir.apply(this,arguments)}(p,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function ys(b,p){return Pi.apply(this,arguments)}(p,{email:y._email,oobCode:y._password});default:xe(p,"internal-error")}})()}_linkToIdToken(p,y){var D=this;return(0,g.Z)(function*(){switch(D.signInMethod){case"password":return Cs(p,{idToken:y,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function jo(b,p){return lo.apply(this,arguments)}(p,{idToken:y,email:D._email,oobCode:D._password});default:xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function rs(b,p){return Et.apply(this,arguments)}function Et(){return(Et=(0,g.Z)(function*(b,p){return Wn(b,"POST","/v1/accounts:signInWithIdp",St(b,p))})).apply(this,arguments)}class At extends Yi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const y=new At(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(y.idToken=p.idToken),p.accessToken&&(y.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(y.nonce=p.nonce),p.pendingToken&&(y.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(y.accessToken=p.oauthToken,y.secret=p.oauthTokenSecret):xe("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:re}=y,Ee=(0,He._T)(y,["providerId","signInMethod"]);if(!D||!re)return null;const Ct=new At(D,re);return Ct.idToken=Ee.idToken||void 0,Ct.accessToken=Ee.accessToken||void 0,Ct.secret=Ee.secret,Ct.nonce=Ee.nonce,Ct.pendingToken=Ee.pendingToken||null,Ct}_getIdTokenResponse(p){return rs(p,this.buildRequest())}_linkToIdToken(p,y){const D=this.buildRequest();return D.idToken=y,rs(p,D)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,rs(p,y)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),p.postBody=(0,he.xO)(y)}return p}}function vn(b,p){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:sendVerificationCode",St(b,p))})).apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(b,p){return Wn(b,"POST","/v1/accounts:signInWithPhoneNumber",St(b,p))})).apply(this,arguments)}function Di(){return(Di=(0,g.Z)(function*(b,p){const y=yield Wn(b,"POST","/v1/accounts:signInWithPhoneNumber",St(b,p));if(y.temporaryProof)throw ii(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const ws={USER_NOT_FOUND:"user-not-found"};function ps(){return(ps=(0,g.Z)(function*(b,p){return Wn(b,"POST","/v1/accounts:signInWithPhoneNumber",St(b,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ws)})).apply(this,arguments)}class Is extends Yi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,y){return new Is({verificationId:p,verificationCode:y})}static _fromTokenResponse(p,y){return new Is({phoneNumber:p,temporaryProof:y})}_getIdTokenResponse(p){return function Ar(b,p){return Qr.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,y){return function Wi(b,p){return Di.apply(this,arguments)}(p,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Jr(b,p){return ps.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:y,verificationId:D,verificationCode:re}=this.params;return p&&y?{temporaryProof:p,phoneNumber:y}:{sessionInfo:D,code:re}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:y,verificationCode:D,phoneNumber:re,temporaryProof:Ee}=p;return D||y||re||Ee?new Is({verificationId:y,verificationCode:D,phoneNumber:re,temporaryProof:Ee}):null}}class ho{constructor(p){var y,D,re,Ee,Ct,gn;const fr=(0,he.zd)((0,he.pd)(p)),Or=null!==(y=fr.apiKey)&&void 0!==y?y:null,Ei=null!==(D=fr.oobCode)&&void 0!==D?D:null,ai=function Xo(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(re=fr.mode)&&void 0!==re?re:null);Oe(Or&&Ei&&ai,"argument-error"),this.apiKey=Or,this.operation=ai,this.code=Ei,this.continueUrl=null!==(Ee=fr.continueUrl)&&void 0!==Ee?Ee:null,this.languageCode=null!==(Ct=fr.languageCode)&&void 0!==Ct?Ct:null,this.tenantId=null!==(gn=fr.tenantId)&&void 0!==gn?gn:null}static parseLink(p){const y=function _s(b){const p=(0,he.zd)((0,he.pd)(b)).link,y=p?(0,he.zd)((0,he.pd)(p)).deep_link_id:null,D=(0,he.zd)((0,he.pd)(b)).deep_link_id;return(D?(0,he.zd)((0,he.pd)(D)).link:null)||D||y||p||b}(p);try{return new ho(y)}catch(D){return null}}}let Eo=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,D){return Ts._fromEmailAndPassword(y,D)}static credentialWithLink(y,D){const re=ho.parseLink(D);return Oe(re,"argument-error"),Ts._fromEmailAndCode(y,re.code,re.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Li{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class $s extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Os extends $s{static credentialFromJSON(p){const y="string"==typeof p?JSON.parse(p):p;return Oe("providerId"in y&&"signInMethod"in y,"argument-error"),At._fromParams(y)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Oe(p.idToken||p.accessToken,"argument-error"),At._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Os.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Os.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:y,oauthAccessToken:D,oauthTokenSecret:re,pendingToken:Ee,nonce:Ct,providerId:gn}=p;if(!D&&!re&&!y&&!Ee||!gn)return null;try{return new Os(gn)._credential({idToken:y,accessToken:D,nonce:Ct,pendingToken:Ee})}catch(fr){return null}}}let qs=(()=>{class b extends $s{constructor(){super("facebook.com")}static credential(y){return At._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(D){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Ds=(()=>{class b extends $s{constructor(){super("google.com"),this.addScope("profile")}static credential(y,D){return At._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:D})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:D,oauthAccessToken:re}=y;if(!D&&!re)return null;try{return b.credential(D,re)}catch(Ee){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Lo=(()=>{class b extends $s{constructor(){super("github.com")}static credential(y){return At._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(D){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class js extends Yi{constructor(p,y){super(p,p),this.pendingToken=y}_getIdTokenResponse(p){return rs(p,this.buildRequest())}_linkToIdToken(p,y){const D=this.buildRequest();return D.idToken=y,rs(p,D)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,rs(p,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:re,pendingToken:Ee}=y;return D&&re&&Ee&&D===re?new js(D,Ee):null}static _create(p,y){return new js(p,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fs extends Li{constructor(p){Oe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Fs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Fs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const y=js.fromJSON(p);return Oe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:y,providerId:D}=p;if(!y||!D)return null;try{return js._create(D,y)}catch(re){return null}}}let Vo=(()=>{class b extends $s{constructor(){super("twitter.com")}static credential(y,D){return At._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:D})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:D,oauthTokenSecret:re}=y;if(!D||!re)return null;try{return b.credential(D,re)}catch(Ee){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function vs(b,p){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,g.Z)(function*(b,p){return Wn(b,"POST","/v1/accounts:signUp",St(b,p))})).apply(this,arguments)}class Ms{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,y,D,re=!1){return(0,g.Z)(function*(){const Ee=yield Lr._fromIdTokenResponse(p,D,re),Ct=Ai(D);return new Ms({user:Ee,providerId:Ct,_tokenResponse:D,operationType:y})})()}static _forOperation(p,y,D){return(0,g.Z)(function*(){yield p._updateTokensIfNecessary(D,!0);const re=Ai(D);return new Ms({user:p,providerId:re,_tokenResponse:D,operationType:y})})()}}function Ai(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function so(){return(so=(0,g.Z)(function*(b){var p;const y=Tr(b);if(yield y._initializationPromise,null===(p=y.currentUser)||void 0===p?void 0:p.isAnonymous)return new Ms({user:y.currentUser,providerId:null,operationType:"signIn"});const D=yield vs(y,{returnSecureToken:!0}),re=yield Ms._fromIdTokenResponse(y,"signIn",D,!0);return yield y._updateCurrentUser(re.user),re})).apply(this,arguments)}class Hs extends he.ZR{constructor(p,y,D,re){var Ee;super(y.code,y.message),this.operationType=D,this.user=re,Object.setPrototypeOf(this,Hs.prototype),this.customData={appName:p.name,tenantId:null!==(Ee=p.tenantId)&&void 0!==Ee?Ee:void 0,_serverResponse:y.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(p,y,D,re){return new Hs(p,y,D,re)}}function Gs(b,p,y,D){return("reauthenticate"===p?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(Ee=>{throw"auth/multi-factor-auth-required"===Ee.code?Hs._fromErrorAndOperation(b,Ee,p,D):Ee})}function As(b){return new Set(b.map(({providerId:p})=>p).filter(p=>!!p))}function Ti(){return(Ti=(0,g.Z)(function*(b,p){const y=(0,he.m9)(b);yield q(!0,y,p);const{providerUserInfo:D}=yield Mr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[p]}),re=As(D||[]);return y.providerData=y.providerData.filter(Ee=>re.has(Ee.providerId)),re.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function B(b,p){return pe.apply(this,arguments)}function pe(){return(pe=(0,g.Z)(function*(b,p,y=!1){const D=yield Xr(b,p._linkToIdToken(b.auth,yield b.getIdToken()),y);return Ms._forOperation(b,"link",D)})).apply(this,arguments)}function q(b,p,y){return ve.apply(this,arguments)}function ve(){return(ve=(0,g.Z)(function*(b,p,y){yield di(p);const re=!1===b?"provider-already-linked":"no-such-provider";Oe(As(p.providerData).has(y)===b,p.auth,re)})).apply(this,arguments)}function qe(b,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,g.Z)(function*(b,p,y=!1){const{auth:D}=b,re="reauthenticate";try{const Ee=yield Xr(b,Gs(D,re,p,b),y);Oe(Ee.idToken,D,"internal-error");const Ct=bn(Ee.idToken);Oe(Ct,D,"internal-error");const{sub:gn}=Ct;return Oe(b.uid===gn,D,"user-mismatch"),Ms._forOperation(b,re,Ee)}catch(Ee){throw"auth/user-not-found"===(null==Ee?void 0:Ee.code)&&xe(D,"user-mismatch"),Ee}})).apply(this,arguments)}function Sn(b,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(b,p,y=!1){const D="signIn",re=yield Gs(b,D,p),Ee=yield Ms._fromIdTokenResponse(b,D,re);return y||(yield b._updateCurrentUser(Ee.user)),Ee})).apply(this,arguments)}function jr(b,p){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(function*(b,p){return Sn(Tr(b),p)})).apply(this,arguments)}function ti(b,p){return fi.apply(this,arguments)}function fi(){return(fi=(0,g.Z)(function*(b,p){const y=(0,he.m9)(b);return yield q(!1,y,p.providerId),B(y,p)})).apply(this,arguments)}function Ji(b,p){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(function*(b,p){return qe((0,he.m9)(b),p)})).apply(this,arguments)}function ki(b,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(b,p){return Wn(b,"POST","/v1/accounts:signInWithCustomToken",St(b,p))})).apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(b,p){const y=Tr(b),D=yield ki(y,{token:p,returnSecureToken:!0}),re=yield Ms._fromIdTokenResponse(y,"signIn",D);return yield y._updateCurrentUser(re.user),re})).apply(this,arguments)}class Js{constructor(p,y){this.factorId=p,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(p,y){return"phoneInfo"in y?No._fromServerResponse(p,y):xe(p,"internal-error")}}class No extends Js{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,y){return new No(y)}}function fo(b,p,y){var D;Oe((null===(D=y.url)||void 0===D?void 0:D.length)>0,b,"invalid-continue-uri"),Oe(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),p.continueUrl=y.url,p.dynamicLinkDomain=y.dynamicLinkDomain,p.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Oe(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),p.iOSBundleId=y.iOS.bundleId),y.android&&(Oe(y.android.packageName.length>0,b,"missing-android-pkg-name"),p.androidInstallApp=y.android.installApp,p.androidMinimumVersionCode=y.android.minimumVersion,p.androidPackageName=y.android.packageName)}function Y(){return(Y=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),re={requestType:"PASSWORD_RESET",email:p};y&&fo(D,re,y),yield Fi(D,re)})).apply(this,arguments)}function L(){return(L=(0,g.Z)(function*(b,p,y){yield Ii((0,he.m9)(b),{oobCode:p,newPassword:y})})).apply(this,arguments)}function Qe(){return(Qe=(0,g.Z)(function*(b,p){yield hs((0,he.m9)(b),{oobCode:p})})).apply(this,arguments)}function Nn(b,p){return ee.apply(this,arguments)}function ee(){return(ee=(0,g.Z)(function*(b,p){const y=(0,he.m9)(b),D=yield Ii(y,{oobCode:p}),re=D.requestType;switch(Oe(re,y,"internal-error"),re){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(D.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(D.mfaInfo,y,"internal-error");default:Oe(D.email,y,"internal-error")}let Ee=null;return D.mfaInfo&&(Ee=Js._fromServerResponse(Tr(y),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:Ee},operation:re}})).apply(this,arguments)}function be(){return(be=(0,g.Z)(function*(b,p){const{data:y}=yield Nn((0,he.m9)(b),p);return y.email})).apply(this,arguments)}function rt(){return(rt=(0,g.Z)(function*(b,p,y){const D=Tr(b),re=yield vs(D,{returnSecureToken:!0,email:p,password:y}),Ee=yield Ms._fromIdTokenResponse(D,"signIn",re);return yield D._updateCurrentUser(Ee.user),Ee})).apply(this,arguments)}function Sr(){return(Sr=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),re={requestType:"EMAIL_SIGNIN",email:p};Oe(y.handleCodeInApp,D,"argument-error"),y&&fo(D,re,y),yield si(D,re)})).apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),re=Eo.credentialWithLink(p,y||Lt());return Oe(re._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),jr(D,re)})).apply(this,arguments)}function pi(b,p){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:createAuthUri",St(b,p))})).apply(this,arguments)}function l(){return(l=(0,g.Z)(function*(b,p){const D={identifier:p,continueUri:Yt()?Lt():"http://localhost"},{signinMethods:re}=yield pi((0,he.m9)(b),D);return re||[]})).apply(this,arguments)}function I(){return(I=(0,g.Z)(function*(b,p){const y=(0,he.m9)(b),re={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};p&&fo(y.auth,re,p);const{email:Ee}=yield bi(y.auth,re);Ee!==b.email&&(yield b.reload())})).apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),Ee={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:p};y&&fo(D.auth,Ee,y);const{email:Ct}=yield ji(D.auth,Ee);Ct!==b.email&&(yield b.reload())})).apply(this,arguments)}function J(b,p){return ge.apply(this,arguments)}function ge(){return(ge=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ae(){return(ae=(0,g.Z)(function*(b,{displayName:p,photoURL:y}){if(void 0===p&&void 0===y)return;const D=(0,he.m9)(b),Ee={idToken:yield D.getIdToken(),displayName:p,photoUrl:y,returnSecureToken:!0},Ct=yield Xr(D,J(D.auth,Ee));D.displayName=Ct.displayName||null,D.photoURL=Ct.photoUrl||null;const gn=D.providerData.find(({providerId:fr})=>"password"===fr);gn&&(gn.displayName=D.displayName,gn.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Ct)})).apply(this,arguments)}function ue(b,p,y){return Te.apply(this,arguments)}function Te(){return(Te=(0,g.Z)(function*(b,p,y){const{auth:D}=b,Ee={idToken:yield b.getIdToken(),returnSecureToken:!0};p&&(Ee.email=p),y&&(Ee.password=y);const Ct=yield Xr(b,Cs(D,Ee));yield b._updateTokensIfNecessary(Ct,!0)})).apply(this,arguments)}class tt{constructor(p,y,D={}){this.isNewUser=p,this.providerId=y,this.profile=D}}class De extends tt{constructor(p,y,D,re){super(p,y,D),this.username=re}}class Fe extends tt{constructor(p,y){super(p,"facebook.com",y)}}class yt extends De{constructor(p,y){super(p,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class et extends tt{constructor(p,y){super(p,"google.com",y)}}class mt extends De{constructor(p,y,D){super(p,"twitter.com",y,D)}}function En(b){const{user:p,_tokenResponse:y}=b;return p.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function ze(b){var p,y;if(!b)return null;const{providerId:D}=b,re=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},Ee=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!D&&(null==b?void 0:b.idToken)){const Ct=null===(y=null===(p=bn(b.idToken))||void 0===p?void 0:p.firebase)||void 0===y?void 0:y.sign_in_provider;if(Ct)return new tt(Ee,"anonymous"!==Ct&&"custom"!==Ct?Ct:null)}if(!D)return null;switch(D){case"facebook.com":return new Fe(Ee,re);case"github.com":return new yt(Ee,re);case"google.com":return new et(Ee,re);case"twitter.com":return new mt(Ee,re,b.screenName||null);case"custom":case"anonymous":return new tt(Ee,null);default:return new tt(Ee,D,re)}}(y)}class cr{constructor(p,y,D){this.type=p,this.credential=y,this.auth=D}static _fromIdtoken(p,y){return new cr("enroll",p,y)}static _fromMfaPendingCredential(p){return new cr("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var y,D;if(null==p?void 0:p.multiFactorSession){if(null===(y=p.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return cr._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(D=p.multiFactorSession)||void 0===D?void 0:D.idToken)return cr._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ur{constructor(p,y,D){this.session=p,this.hints=y,this.signInResolver=D}static _fromError(p,y){const D=Tr(p),re=y.customData._serverResponse,Ee=(re.mfaInfo||[]).map(gn=>Js._fromServerResponse(D,gn));Oe(re.mfaPendingCredential,D,"internal-error");const Ct=cr._fromMfaPendingCredential(re.mfaPendingCredential);return new ur(Ct,Ee,function(){var gn=(0,g.Z)(function*(fr){const Or=yield fr._process(D,Ct);delete re.mfaInfo,delete re.mfaPendingCredential;const Ei=Object.assign(Object.assign({},re),{idToken:Or.idToken,refreshToken:Or.refreshToken});switch(y.operationType){case"signIn":const ai=yield Ms._fromIdTokenResponse(D,y.operationType,Ei);return yield D._updateCurrentUser(ai.user),ai;case"reauthenticate":return Oe(y.user,D,"internal-error"),Ms._forOperation(y.user,y.operationType,Ei);default:xe(D,"internal-error")}});return function(fr){return gn.apply(this,arguments)}}())}resolveSignIn(p){var y=this;return(0,g.Z)(function*(){return y.signInResolver(p)})()}}function hr(b,p){return ut(b,"POST","/v2/accounts/mfaEnrollment:start",St(b,p))}class xi{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(D=>Js._fromServerResponse(p.auth,D)))})}static _fromUser(p){return new xi(p)}getSession(){var p=this;return(0,g.Z)(function*(){return cr._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,y){var D=this;return(0,g.Z)(function*(){const re=p,Ee=yield D.getSession(),Ct=yield Xr(D.user,re._process(D.user.auth,Ee,y));return yield D.user._updateTokensIfNecessary(Ct),D.user.reload()})()}unenroll(p){var y=this;return(0,g.Z)(function*(){const D="string"==typeof p?p:p.uid,re=yield y.user.getIdToken(),Ee=yield Xr(y.user,function gi(b,p){return ut(b,"POST","/v2/accounts/mfaEnrollment:withdraw",St(b,p))}(y.user.auth,{idToken:re,mfaEnrollmentId:D}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Ct})=>Ct!==D),yield y.user._updateTokensIfNecessary(Ee);try{yield y.user.reload()}catch(Ct){if("auth/user-token-expired"!==(null==Ct?void 0:Ct.code))throw Ct}})()}}const Zs=new WeakMap,po="__sak";class Z{constructor(p,y){this.storageRetriever=p,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(po,"1"),this.storage.removeItem(po),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,y){return this.storage.setItem(p,JSON.stringify(y)),Promise.resolve()}_get(p){const y=this.storage.getItem(p);return Promise.resolve(y?JSON.parse(y):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ce=(()=>{class b extends Z{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,D)=>this.onStorageEvent(y,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function C(){const b=(0,he.z$)();return Me(b)||oi(b)}()&&function li(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Gi(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const D of Object.keys(this.listeners)){const re=this.storage.getItem(D),Ee=this.localCache[D];re!==Ee&&y(D,Ee,re)}}onStorageEvent(y,D=!1){if(!y.key)return void this.forAllChangedKeys((gn,fr,Or)=>{this.notifyListeners(gn,Or)});const re=y.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const gn=this.storage.getItem(re);if(y.newValue!==gn)null!==y.newValue?this.storage.setItem(re,y.newValue):this.storage.removeItem(re);else if(this.localCache[re]===y.newValue&&!D)return}const Ee=()=>{const gn=this.storage.getItem(re);!D&&this.localCache[re]===gn||this.notifyListeners(re,gn)},Ct=this.storage.getItem(re);!function Ns(){return(0,he.w1)()&&10===document.documentMode}()||Ct===y.newValue||y.newValue===y.oldValue?Ee():setTimeout(Ee,10)}notifyListeners(y,D){this.localCache[y]=D;const re=this.listeners[y];if(re)for(const Ee of Array.from(re))Ee(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,D,re)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:D,newValue:re}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,D){var re=()=>super._set,Ee=this;return(0,g.Z)(function*(){yield re().call(Ee,y,D),Ee.localCache[y]=JSON.stringify(D)})()}_get(y){var D=()=>super._get,re=this;return(0,g.Z)(function*(){const Ee=yield D().call(re,y);return re.localCache[y]=JSON.stringify(Ee),Ee})()}_remove(y){var D=()=>super._remove,re=this;return(0,g.Z)(function*(){yield D().call(re,y),delete re.localCache[y]})()}}return b.type="LOCAL",b})(),Ke=(()=>{class b extends Z{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,D){}_removeListener(y,D){}}return b.type="SESSION",b})();let fn=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const D=this.receivers.find(Ee=>Ee.isListeningto(y));if(D)return D;const re=new b(y);return this.receivers.push(re),re}isListeningto(y){return this.eventTarget===y}handleEvent(y){var D=this;return(0,g.Z)(function*(){const re=y,{eventId:Ee,eventType:Ct,data:gn}=re.data,fr=D.handlersMap[Ct];if(!(null==fr?void 0:fr.size))return;re.ports[0].postMessage({status:"ack",eventId:Ee,eventType:Ct});const Or=Array.from(fr).map(function(){var ai=(0,g.Z)(function*(Zo){return Zo(re.origin,gn)});return function(Zo){return ai.apply(this,arguments)}}()),Ei=yield function Tt(b){return Promise.all(b.map(function(){var p=(0,g.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(D){return{fulfilled:!1,reason:D}}});return function(y){return p.apply(this,arguments)}}()))}(Or);re.ports[0].postMessage({status:"done",eventId:Ee,eventType:Ct,response:Ei})})()}_subscribe(y,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(D)}_unsubscribe(y,D){this.handlersMap[y]&&D&&this.handlersMap[y].delete(D),(!D||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Pt(b="",p=10){let y="";for(let D=0;D<p;D++)y+=Math.floor(10*Math.random());return b+y}class rr{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,y,D=50){var re=this;return(0,g.Z)(function*(){const Ee="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Ee)throw new Error("connection_unavailable");let Ct,gn;return new Promise((fr,Or)=>{const Ei=Pt("",20);Ee.port1.start();const ai=setTimeout(()=>{Or(new Error("unsupported_event"))},D);gn={messageChannel:Ee,onMessage(Zo){const f=Zo;if(f.data.eventId===Ei)switch(f.data.status){case"ack":clearTimeout(ai),Ct=setTimeout(()=>{Or(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ct),fr(f.data.response);break;default:clearTimeout(ai),clearTimeout(Ct),Or(new Error("invalid_response"))}}},re.handlers.add(gn),Ee.port1.addEventListener("message",gn.onMessage),re.target.postMessage({eventType:p,eventId:Ei,data:y},[Ee.port2])}).finally(()=>{gn&&re.removeMessageHandler(gn)})})()}}function Cr(){return window}function In(){return void 0!==Cr().WorkerGlobalScope&&"function"==typeof Cr().importScripts}function cs(){return(cs=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Cn="firebaseLocalStorageDb",bo="firebaseLocalStorage",Uo="fbase_key";class O{constructor(p){this.request=p}toPromise(){return new Promise((p,y)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function M(b,p){return b.transaction([bo],p?"readwrite":"readonly").objectStore(bo)}function W(){const b=indexedDB.open(Cn,1);return new Promise((p,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const D=b.result;try{D.createObjectStore(bo,{keyPath:Uo})}catch(re){y(re)}}),b.addEventListener("success",(0,g.Z)(function*(){const D=b.result;D.objectStoreNames.contains(bo)?p(D):(D.close(),yield function S(){const b=indexedDB.deleteDatabase(Cn);return new O(b).toPromise()}(),p(yield W()))}))})}function ne(b,p,y){return _e.apply(this,arguments)}function _e(){return(_e=(0,g.Z)(function*(b,p,y){const D=M(b,!0).put({[Uo]:p,value:y});return new O(D).toPromise()})).apply(this,arguments)}function ot(){return(ot=(0,g.Z)(function*(b,p){const y=M(b,!1).get(p),D=yield new O(y).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function pn(b,p){const y=M(b,!0).delete(p);return new O(y).toPromise()}const ar=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,g.Z)(function*(){return y.db||(y.db=yield W()),y.db})()}_withRetries(y){var D=this;return(0,g.Z)(function*(){let re=0;for(;;)try{const Ee=yield D._openDb();return yield y(Ee)}catch(Ee){if(re++>3)throw Ee;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,g.Z)(function*(){return In()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,g.Z)(function*(){y.receiver=fn._getInstance(function jt(){return In()?self:null}()),y.receiver._subscribe("keyChanged",function(){var D=(0,g.Z)(function*(re,Ee){return{keyProcessed:(yield y._poll()).includes(Ee.key)}});return function(re,Ee){return D.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var D=(0,g.Z)(function*(re,Ee){return["keyChanged"]});return function(re,Ee){return D.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,g.Z)(function*(){var D,re;if(y.activeServiceWorker=yield function Bn(){return cs.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new rr(y.activeServiceWorker);const Ee=yield y.sender._send("ping",{},800);!Ee||(null===(D=Ee[0])||void 0===D?void 0:D.fulfilled)&&(null===(re=Ee[0])||void 0===re?void 0:re.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var D=this;return(0,g.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Gn(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:y},D.serviceWorkerReceiverAvailable?800:50)}catch(re){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const y=yield W();return yield ne(y,po,"1"),yield pn(y,po),!0}catch(y){}return!1})()}_withPendingWrite(y){var D=this;return(0,g.Z)(function*(){D.pendingWrites++;try{yield y()}finally{D.pendingWrites--}})()}_set(y,D){var re=this;return(0,g.Z)(function*(){return re._withPendingWrite((0,g.Z)(function*(){return yield re._withRetries(Ee=>ne(Ee,y,D)),re.localCache[y]=D,re.notifyServiceWorker(y)}))})()}_get(y){var D=this;return(0,g.Z)(function*(){const re=yield D._withRetries(Ee=>function Ve(b,p){return ot.apply(this,arguments)}(Ee,y));return D.localCache[y]=re,re})()}_remove(y){var D=this;return(0,g.Z)(function*(){return D._withPendingWrite((0,g.Z)(function*(){return yield D._withRetries(re=>pn(re,y)),delete D.localCache[y],D.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,g.Z)(function*(){const D=yield y._withRetries(Ct=>{const gn=M(Ct,!1).getAll();return new O(gn).toPromise()});if(!D)return[];if(0!==y.pendingWrites)return[];const re=[],Ee=new Set;for(const{fbase_key:Ct,value:gn}of D)Ee.add(Ct),JSON.stringify(y.localCache[Ct])!==JSON.stringify(gn)&&(y.notifyListeners(Ct,gn),re.push(Ct));for(const Ct of Object.keys(y.localCache))y.localCache[Ct]&&!Ee.has(Ct)&&(y.notifyListeners(Ct,null),re.push(Ct));return re})()}notifyListeners(y,D){this.localCache[y]=D;const re=this.listeners[y];if(re)for(const Ee of Array.from(re))Ee(D)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Vn(b,p){return ut(b,"POST","/v2/accounts/mfaSignIn:start",St(b,p))}function Do(){return(Do=(0,g.Z)(function*(b){return(yield ut(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ir(b){return new Promise((p,y)=>{const D=document.createElement("script");D.setAttribute("src",b),D.onload=p,D.onerror=re=>{const Ee=Ge("internal-error");Ee.customData=re,y(Ee)},D.type="text/javascript",D.charset="UTF-8",function yi(){var b,p;return null!==(p=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==p?p:document}().appendChild(D)})}function Oo(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ho=1e12;class da{constructor(p){this.auth=p,this.counter=Ho,this._widgets=new Map}render(p,y){const D=this.counter;return this._widgets.set(D,new va(p,this.auth.name,y||{})),this.counter++,D}reset(p){var y;const D=p||Ho;null===(y=this._widgets.get(D))||void 0===y||y.delete(),this._widgets.delete(D)}getResponse(p){var y;return(null===(y=this._widgets.get(p||Ho))||void 0===y?void 0:y.getResponse())||""}execute(p){var y=this;return(0,g.Z)(function*(){var D;return null===(D=y._widgets.get(p||Ho))||void 0===D||D.execute(),""})()}}class va{constructor(p,y,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const re="string"==typeof p?document.getElementById(p):p;Oe(re,"argument-error",{appName:y}),this.container=re,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ll(b){const p=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<b;D++)p.push(y.charAt(Math.floor(Math.random()*y.length)));return p.join("")}(50);const{callback:p,"expired-callback":y}=this.params;if(p)try{p(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yu=Oo("rcb"),uo=new br(3e4,6e4);class Ta{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=Cr().grecaptcha)||void 0===p?void 0:p.render)}load(p,y=""){return Oe(function Ic(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),p,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Cr().grecaptcha):new Promise((D,re)=>{const Ee=Cr().setTimeout(()=>{re(Ge(p,"network-request-failed"))},uo.get());Cr()[yu]=()=>{Cr().clearTimeout(Ee),delete Cr()[yu];const gn=Cr().grecaptcha;if(!gn)return void re(Ge(p,"internal-error"));const fr=gn.render;gn.render=(Or,Ei)=>{const ai=fr(Or,Ei);return this.counter++,ai},this.hostLanguage=y,D(gn)},ir(`https://www.google.com/recaptcha/api.js??${(0,he.xO)({onload:yu,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(Ee),re(Ge(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var y;return!!(null===(y=Cr().grecaptcha)||void 0===y?void 0:y.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Sc{load(p){return(0,g.Z)(function*(){return new da(p)})()}clearedOneInstance(){}}const oa="recaptcha",Xl={theme:"light",type:"image"};class Xt{constructor(p,y=Object.assign({},Xl),D){this.parameters=y,this.type=oa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tr(D),this.isInvisible="invisible"===this.parameters.size,Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const re="string"==typeof p?document.getElementById(p):p;Oe(re,this.auth,"argument-error"),this.container=re,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sc:new Ta,this.validateStartingState()}verify(){var p=this;return(0,g.Z)(function*(){p.assertNotDestroyed();const y=yield p.render(),D=p.getAssertedRecaptcha();return D.getResponse(y)||new Promise(Ee=>{const Ct=gn=>{!gn||(p.tokenChangeListeners.delete(Ct),Ee(gn))};p.tokenChangeListeners.add(Ct),p.isInvisible&&D.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return y=>{if(this.tokenChangeListeners.forEach(D=>D(y)),"function"==typeof p)p(y);else if("string"==typeof p){const D=Cr()[p];"function"==typeof D&&D(y)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,g.Z)(function*(){if(yield p.init(),!p.widgetId){let y=p.container;if(!p.isInvisible){const D=document.createElement("div");y.appendChild(D),y=D}p.widgetId=p.getAssertedRecaptcha().render(y,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,g.Z)(function*(){Oe(Yt()&&!In(),p.auth,"internal-error"),yield function Xa(){let b=null;return new Promise(p=>{"complete"!==document.readyState?(b=()=>p(),window.addEventListener("load",b)):p()}).catch(p=>{throw b&&window.removeEventListener("load",b),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const y=yield function Pr(b){return Do.apply(this,arguments)}(p.auth);Oe(y,p.auth,"internal-error"),p.parameters.sitekey=y})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wa{constructor(p,y){this.verificationId=p,this.onConfirmation=y}confirm(p){const y=Is._fromVerification(this.verificationId,p);return this.onConfirmation(y)}}function Ia(){return(Ia=(0,g.Z)(function*(b,p,y){const D=Tr(b),re=yield Jo(D,p,(0,he.m9)(y));return new wa(re,Ee=>jr(D,Ee))})).apply(this,arguments)}function Gu(){return(Gu=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);yield q(!1,D,"phone");const re=yield Jo(D.auth,p,(0,he.m9)(y));return new wa(re,Ee=>ti(D,Ee))})).apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),re=yield Jo(D.auth,p,(0,he.m9)(y));return new wa(re,Ee=>Ji(D,Ee))})).apply(this,arguments)}function Jo(b,p,y){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,g.Z)(function*(b,p,y){var D;const re=yield y.verify();try{let Ee;if(Oe("string"==typeof re,b,"argument-error"),Oe(y.type===oa,b,"argument-error"),Ee="string"==typeof p?{phoneNumber:p}:p,"session"in Ee){const Ct=Ee.session;if("phoneNumber"in Ee)return Oe("enroll"===Ct.type,b,"internal-error"),(yield hr(b,{idToken:Ct.credential,phoneEnrollmentInfo:{phoneNumber:Ee.phoneNumber,recaptchaToken:re}})).phoneSessionInfo.sessionInfo;{Oe("signin"===Ct.type,b,"internal-error");const gn=(null===(D=Ee.multiFactorHint)||void 0===D?void 0:D.uid)||Ee.multiFactorUid;return Oe(gn,b,"missing-multi-factor-info"),(yield Vn(b,{mfaPendingCredential:Ct.credential,mfaEnrollmentId:gn,phoneSignInInfo:{recaptchaToken:re}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ct}=yield vn(b,{phoneNumber:Ee.phoneNumber,recaptchaToken:re});return Ct}}finally{y._reset()}})).apply(this,arguments)}function go(){return(go=(0,g.Z)(function*(b,p){yield B((0,he.m9)(b),p)})).apply(this,arguments)}let dl=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=Tr(y)}verifyPhoneNumber(y,D){return Jo(this.auth,y,(0,he.m9)(D))}static credential(y,D){return Is._fromVerification(y,D)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:D,temporaryProof:re}=y;return D&&re?Is._fromTokenResponse(D,re):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function ea(b,p){return p?Je(p):(Oe(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Dl extends Yi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return rs(p,this._buildIdpRequest())}_linkToIdToken(p,y){return rs(p,this._buildIdpRequest(y))}_getReauthenticationResolver(p){return rs(p,this._buildIdpRequest())}_buildIdpRequest(p){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(y.idToken=p),y}}function $a(b){return Sn(b.auth,new Dl(b),b.bypassAuthState)}function vu(b){const{auth:p,user:y}=b;return Oe(y,p,"internal-error"),qe(y,new Dl(b),b.bypassAuthState)}function ha(b){return mo.apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(b){const{auth:p,user:y}=b;return Oe(y,p,"internal-error"),B(y,new Dl(b),b.bypassAuthState)})).apply(this,arguments)}class Ja{constructor(p,y,D,re,Ee=!1){this.auth=p,this.resolver=D,this.user=re,this.bypassAuthState=Ee,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var p=this;return new Promise(function(){var y=(0,g.Z)(function*(D,re){p.pendingPromise={resolve:D,reject:re};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(Ee){p.reject(Ee)}});return function(D,re){return y.apply(this,arguments)}}())}onAuthEvent(p){var y=this;return(0,g.Z)(function*(){const{urlResponse:D,sessionId:re,postBody:Ee,tenantId:Ct,error:gn,type:fr}=p;if(gn)return void y.reject(gn);const Or={auth:y.auth,requestUri:D,sessionId:re,tenantId:Ct||void 0,postBody:Ee||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(fr)(Or))}catch(Ei){y.reject(Ei)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return $a;case"linkViaPopup":case"linkViaRedirect":return ha;case"reauthViaPopup":case"reauthViaRedirect":return vu;default:xe(this.auth,"internal-error")}}resolve(p){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ja=new br(2e3,1e4);function Ha(){return(Ha=(0,g.Z)(function*(b,p,y){const D=Tr(b);on(b,p,Li);const re=ea(D,y);return new tl(D,"signInViaPopup",p,re).executeNotNull()})).apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);on(D.auth,p,Li);const re=ea(D.auth,y);return new tl(D.auth,"reauthViaPopup",p,re,D).executeNotNull()})).apply(this,arguments)}function Vl(){return(Vl=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);on(D.auth,p,Li);const re=ea(D.auth,y);return new tl(D.auth,"linkViaPopup",p,re,D).executeNotNull()})).apply(this,arguments)}let tl=(()=>{class b extends Ja{constructor(y,D,re,Ee,Ct){super(y,D,Ee,Ct),this.provider=re,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,g.Z)(function*(){const D=yield y.execute();return Oe(D,y.auth,"internal-error"),D})()}onExecution(){var y=this;return(0,g.Z)(function*(){Re(1===y.filter.length,"Popup operations only handle one event");const D=Pt();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],D),y.authWindow.associatedEvent=D,y.resolver._originValidation(y.auth).catch(re=>{y.reject(re)}),y.resolver._isIframeWebStorageSupported(y.auth,re=>{re||y.reject(Ge(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var D,re;this.pollId=(null===(re=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===re?void 0:re.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ge(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,ja.get())};y()}}return b.currentPopupAction=null,b})();const ta=new Map;class hl extends Ja{constructor(p,y,D=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,D),this.eventId=null}execute(){var p=()=>super.execute,y=this;return(0,g.Z)(function*(){let D=ta.get(y.auth._key());if(!D){try{const Ee=(yield function nl(b,p){return ao.apply(this,arguments)}(y.resolver,y.auth))?yield p().call(y):null;D=()=>Promise.resolve(Ee)}catch(re){D=()=>Promise.reject(re)}ta.set(y.auth._key(),D)}return y.bypassAuthState||ta.set(y.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(p){var y=()=>super.onAuthEvent,D=this;return(0,g.Z)(function*(){if("signInViaRedirect"===p.type)return y().call(D,p);if("unknown"!==p.type){if(p.eventId){const re=yield D.auth._redirectUserForId(p.eventId);if(re)return D.user=re,y().call(D,p);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ao(){return(ao=(0,g.Z)(function*(b,p){const y=Da(p),D=Al(b);if(!(yield D._isAvailable()))return!1;const re="true"===(yield D._get(y));return yield D._remove(y),re})).apply(this,arguments)}function za(b,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(b,p){return Al(b)._set(Da(p),"true")})).apply(this,arguments)}function fl(b,p){ta.set(b._key(),p)}function Al(b){return Je(b._redirectPersistence)}function Da(b){return ft("pendingRedirect",b.config.apiKey,b.name)}function U(){return(U=(0,g.Z)(function*(b,p,y){const D=Tr(b);on(b,p,Li);const re=ea(D,y);return yield za(re,D),re._openRedirect(D,p,"signInViaRedirect")})).apply(this,arguments)}function $e(){return($e=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);on(D.auth,p,Li);const re=ea(D.auth,y);yield za(re,D.auth);const Ee=yield vi(D);return re._openRedirect(D.auth,p,"reauthViaRedirect",Ee)})).apply(this,arguments)}function $n(){return($n=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);on(D.auth,p,Li);const re=ea(D.auth,y);yield q(!1,D,p.providerId),yield za(re,D.auth);const Ee=yield vi(D);return re._openRedirect(D.auth,p,"linkViaRedirect",Ee)})).apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(b,p){return yield Tr(b)._initializationPromise,Hr(b,p,!1)})).apply(this,arguments)}function Hr(b,p){return qi.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(b,p,y=!1){const D=Tr(b),re=ea(D,p),Ct=yield new hl(D,re,y).execute();return Ct&&!y&&(delete Ct.user._redirectEventId,yield D._persistUserIfCurrent(Ct.user),yield D._setRedirectUser(null,p)),Ct})).apply(this,arguments)}function vi(b){return Go.apply(this,arguments)}function Go(){return(Go=(0,g.Z)(function*(b){const p=Pt(`${b.uid}:::`);return b._redirectEventId=p,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),p})).apply(this,arguments)}class os{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let y=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(p,D)&&(y=!0,this.sendToConsumer(p,D),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function xo(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oa(b);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=p,y=!0)),y}sendToConsumer(p,y){var D;if(p.error&&!Oa(p)){const re=(null===(D=p.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";y.onError(Ge(this.auth,re))}else y.onAuthEvent(p)}isEventForConsumer(p,y){const D=null===y.eventId||!!p.eventId&&p.eventId===y.eventId;return y.filter.includes(p.type)&&D}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Aa(p))}saveEventToCache(p){this.cachedEventUids.add(Aa(p)),this.lastProcessedEventTime=Date.now()}}function Aa(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(p=>p).join("-")}function Oa({type:b,error:p}){return"unknown"===b&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Io(b){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,g.Z)(function*(b,p={}){return ut(b,"GET","/v1/projects",p)})).apply(this,arguments)}const ld=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xl=/^https?/;function Bl(){return(Bl=(0,g.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:p}=yield Io(b);for(const y of p)try{if(ud(y))return}catch(D){}xe(b,"unauthorized-domain")})).apply(this,arguments)}function ud(b){const p=Lt(),{protocol:y,hostname:D}=new URL(p);if(b.startsWith("chrome-extension://")){const Ct=new URL(b);return""===Ct.hostname&&""===D?"chrome-extension:"===y&&b.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===y&&Ct.hostname===D}if(!xl.test(y))return!1;if(ld.test(b))return D===b;const re=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+re+"|"+re+")$","i").test(D)}const cd=new br(3e4,6e4);function ka(){const b=Cr().___jsl;if(null==b?void 0:b.H)for(const p of Object.keys(b.H))if(b.H[p].r=b.H[p].r||[],b.H[p].L=b.H[p].L||[],b.H[p].r=[...b.H[p].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let Eu=null;function Wu(b){return Eu=Eu||function qd(b){return new Promise((p,y)=>{var D,re,Ee;function Ct(){ka(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ka(),y(Ge(b,"network-request-failed"))},timeout:cd.get()})}if(null===(re=null===(D=Cr().gapi)||void 0===D?void 0:D.iframes)||void 0===re?void 0:re.Iframe)p(gapi.iframes.getContext());else{if(!(null===(Ee=Cr().gapi)||void 0===Ee?void 0:Ee.load)){const gn=Oo("iframefcb");return Cr()[gn]=()=>{gapi.load?Ct():y(Ge(b,"network-request-failed"))},ir(`https://apis.google.com/js/api.js?onload=${gn}`).catch(fr=>y(fr))}Ct()}}).catch(p=>{throw Eu=null,p})}(b),Eu}const dd=new br(5e3,15e3),to={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function na(b){const p=b.config;Oe(p.authDomain,b,"auth-domain-config-required");const y=p.emulator?mr(p,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,D={apiKey:p.apiKey,appName:b.name,v:oe.SDK_VERSION},re=Cu.get(b.config.apiHost);re&&(D.eid=re);const Ee=b._getFrameworks();return Ee.length&&(D.fw=Ee.join(",")),`${y}?${(0,he.xO)(D).slice(1)}`}function $l(){return $l=(0,g.Z)(function*(b){const p=yield Wu(b),y=Cr().gapi;return Oe(y,b,"internal-error"),p.open({where:document.body,url:na(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:to,dontclear:!0},D=>new Promise(function(){var re=(0,g.Z)(function*(Ee,Ct){yield D.restyle({setHideOnLeave:!1});const gn=Ge(b,"network-request-failed"),fr=Cr().setTimeout(()=>{Ct(gn)},dd.get());function Or(){Cr().clearTimeout(fr),Ee(D)}D.ping(Or).then(Or,()=>{Ct(gn)})});return function(Ee,Ct){return re.apply(this,arguments)}}()))}),$l.apply(this,arguments)}const pl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zu{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Ea(b,p,y,D,re,Ee){Oe(b.config.authDomain,b,"auth-domain-config-required"),Oe(b.config.apiKey,b,"invalid-api-key");const Ct={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:D,v:oe.SDK_VERSION,eventId:re};if(p instanceof Li){p.setDefaultLanguage(b.languageCode),Ct.providerId=p.providerId||"",(0,he.xb)(p.getCustomParameters())||(Ct.customParameters=JSON.stringify(p.getCustomParameters()));for(const[fr,Or]of Object.entries(Ee||{}))Ct[fr]=Or}if(p instanceof $s){const fr=p.getScopes().filter(Or=>""!==Or);fr.length>0&&(Ct.scopes=fr.join(","))}b.tenantId&&(Ct.tid=b.tenantId);const gn=Ct;for(const fr of Object.keys(gn))void 0===gn[fr]&&delete gn[fr];return`${function Gl({config:b}){return b.emulator?mr(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,he.xO)(gn).slice(1)}`}const tu="webStorageSupport";class ru extends class nu{constructor(p){this.factorId=p}_process(p,y,D){switch(y.type){case"enroll":return this._finalizeEnroll(p,y.credential,D);case"signin":return this._finalizeSignIn(p,y.credential);default:return Bt("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ru(p)}_finalizeEnroll(p,y,D){return function tr(b,p){return ut(b,"POST","/v2/accounts/mfaEnrollment:finalize",St(b,p))}(p,{idToken:y,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,y){return function Ls(b,p){return ut(b,"POST","/v2/accounts/mfaSignIn:finalize",St(b,p))}(p,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qu=(()=>{class b{constructor(){}static assertion(y){return ru._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var iu="@firebase/auth";class Ca{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var y=this;return(0,g.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const y=this.auth.onIdTokenChanged(D=>{p((null==D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,y),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const y=this.internalListeners.get(p);!y||(this.internalListeners.delete(p),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xa(){return window}function zl(){return(zl=(0,g.Z)(function*(b,p,y){var D;const{BuildInfo:re}=xa();Re(p.sessionId,"AuthEvent did not contain a session ID");const Ee=yield Au(p.sessionId),Ct={};return oi()?Ct.ibi=re.packageName:sn()?Ct.apn=re.packageName:xe(b,"operation-not-supported-in-this-environment"),re.displayName&&(Ct.appDisplayName=re.displayName),Ct.sessionId=Ee,Ea(b,y,p.type,void 0,null!==(D=p.eventId)&&void 0!==D?D:void 0,Ct)})).apply(this,arguments)}function xc(){return(xc=(0,g.Z)(function*(b){const{BuildInfo:p}=xa(),y={};oi()?y.iosBundleId=p.packageName:sn()?y.androidPackageName=p.packageName:xe(b,"operation-not-supported-in-this-environment"),yield Io(b,y)})).apply(this,arguments)}function Su(){return(Su=(0,g.Z)(function*(b,p,y){const{cordova:D}=xa();let re=()=>{};try{yield new Promise((Ee,Ct)=>{let gn=null;function fr(){var ai;Ee();const Zo=null===(ai=D.plugins.browsertab)||void 0===ai?void 0:ai.close;"function"==typeof Zo&&Zo(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function Or(){gn||(gn=window.setTimeout(()=>{Ct(Ge(b,"redirect-cancelled-by-user"))},2e3))}function Ei(){"visible"===(null==document?void 0:document.visibilityState)&&Or()}p.addPassiveListener(fr),document.addEventListener("resume",Or,!1),sn()&&document.addEventListener("visibilitychange",Ei,!1),re=()=>{p.removePassiveListener(fr),document.removeEventListener("resume",Or,!1),document.removeEventListener("visibilitychange",Ei,!1),gn&&window.clearTimeout(gn)}})}finally{re()}})).apply(this,arguments)}function Au(b){return yl.apply(this,arguments)}function yl(){return(yl=(0,g.Z)(function*(b){const p=ec(b),y=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(y)).map(re=>re.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ec(b){if(Re(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const p=new ArrayBuffer(b.length),y=new Uint8Array(p);for(let D=0;D<b.length;D++)y[D]=b.charCodeAt(D);return y}(0,he.Pz)("authIdTokenMaxAge"),function bu(b){(0,oe._registerComponent)(new ht.wA("auth",(p,{options:y})=>{const D=p.getProvider("app").getImmediate(),re=p.getProvider("heartbeat"),{apiKey:Ee,authDomain:Ct}=D.options;return((gn,fr)=>{Oe(Ee&&!Ee.includes(":"),"invalid-api-key",{appName:gn.name}),Oe(!(null==Ct?void 0:Ct.includes(":")),"argument-error",{appName:gn.name});const Or={apiKey:Ee,authDomain:Ct,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:as(b)},Ei=new _n(gn,fr,Or);return function Dt(b,p){const y=(null==p?void 0:p.persistence)||[],D=(Array.isArray(y)?y:[y]).map(Je);(null==p?void 0:p.errorMap)&&b._updateErrorMap(p.errorMap),b._initializeWithPersistence(D,null==p?void 0:p.popupRedirectResolver)}(Ei,y),Ei})(D,re)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,y,D)=>{p.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ht.wA("auth-internal",p=>{const y=Tr(p.getProvider("auth").getImmediate());return new Ca(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(iu,"0.21.0",function fa(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,oe.registerVersion)(iu,"0.21.0","esm2017")}("Browser");class hd extends os{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(p)),super.onEvent(p)}initialized(){var p=this;return(0,g.Z)(function*(){yield p.initPromise})()}}function qa(b){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,g.Z)(function*(b){const p=yield ro()._get(co(b));return p&&(yield ro()._remove(co(b))),p})).apply(this,arguments)}function vl(){const b=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const D=Math.floor(Math.random()*p.length);b.push(p.charAt(D))}return b.join("")}function ro(){return Je(Ce)}function co(b){return ft("authEvent",b.config.apiKey,b.name)}function Mu(b){if(!(null==b?void 0:b.includes("?")))return{};const[p,...y]=b.split("?");return(0,he.zd)(y.join("?"))}function ou(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ge("no-auth-event")}}function qo(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function nc(b=(0,he.z$)()){return!("file:"!==qo()&&"ionic:"!==qo()&&"capacitor:"!==qo()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function il(){try{const b=self.localStorage,p=Pt();if(b)return b.setItem(p,"1"),b.removeItem(p),!function au(b=(0,he.z$)()){return function ms(){return(0,he.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ua(b=(0,he.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,he.hl)()}catch(b){return rc()&&(0,he.hl)()}return!1}function rc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function pa(){return(function Ko(){return"http:"===qo()||"https:"===qo()}()||(0,he.ru)()||nc())&&!function ko(){return(0,he.b$)()||(0,he.UG)()}()&&il()&&!rc()}function ic(){return nc()&&"undefined"!=typeof document}function lu(){return(lu=(0,g.Z)(function*(){return!!ic()&&new Promise(b=>{const p=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),b(!0)})})})).apply(this,arguments)}const ga={LOCAL:"local",NONE:"none",SESSION:"session"},Rl=Oe,fd="persistence";function Ki(b){return gd.apply(this,arguments)}function gd(){return(gd=(0,g.Z)(function*(b){yield b._initializationPromise;const p=Nu(),y=ft(fd,b.config.apiKey,b.name);p&&p.setItem(y,b._getPersistence())})).apply(this,arguments)}function Nu(){var b;try{return(null===(b=function Cl(){return"undefined"!=typeof window?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(p){return null}}const Ou=Oe;class Ra{constructor(){this.browserResolver=Je(class gl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ke,this._completeRedirectFn=Hr,this._overrideRedirectResult=fl}_openPopup(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){var Ct;Re(null===(Ct=Ee.eventManagers[p._key()])||void 0===Ct?void 0:Ct.manager,"_initialize() not called before _openPopup()");const gn=Ea(p,y,D,Lt(),re);return function eu(b,p,y,D=500,re=600){const Ee=Math.max((window.screen.availHeight-re)/2,0).toString(),Ct=Math.max((window.screen.availWidth-D)/2,0).toString();let gn="";const fr=Object.assign(Object.assign({},pl),{width:D.toString(),height:re.toString(),top:Ee,left:Ct}),Or=(0,he.z$)().toLowerCase();y&&(gn=Ae(Or)?"_blank":y),Be(Or)&&(p=p||"http://localhost",fr.scrollbars="yes");const Ei=Object.entries(fr).reduce((Zo,[f,c])=>`${Zo}${f}=${c},`,"");if(function us(b=(0,he.z$)()){var p;return oi(b)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Or)&&"_self"!==gn)return function jl(b,p){const y=document.createElement("a");y.href=b,y.target=p;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(D)}(p||"",gn),new Zu(null);const ai=window.open(p||"",gn,Ei);Oe(ai,b,"popup-blocked");try{ai.focus()}catch(Zo){}return new Zu(ai)}(p,gn,Pt())})()}_openRedirect(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){return yield Ee._originValidation(p),function mi(b){Cr().location.href=b}(Ea(p,y,D,Lt(),re)),new Promise(()=>{})})()}_initialize(p){const y=p._key();if(this.eventManagers[y]){const{manager:re,promise:Ee}=this.eventManagers[y];return re?Promise.resolve(re):(Re(Ee,"If manager is not set, promise should be"),Ee)}const D=this.initAndGetManager(p);return this.eventManagers[y]={promise:D},D.catch(()=>{delete this.eventManagers[y]}),D}initAndGetManager(p){var y=this;return(0,g.Z)(function*(){const D=yield function no(b){return $l.apply(this,arguments)}(p),re=new os(p);return D.register("authEvent",Ee=>(Oe(null==Ee?void 0:Ee.authEvent,p,"invalid-auth-event"),{status:re.onEvent(Ee.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[p._key()]={manager:re},y.iframes[p._key()]=D,re})()}_isIframeWebStorageSupported(p,y){this.iframes[p._key()].send(tu,{type:tu},re=>{var Ee;const Ct=null===(Ee=null==re?void 0:re[0])||void 0===Ee?void 0:Ee[tu];void 0!==Ct&&y(!!Ct),xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ml(b){return Bl.apply(this,arguments)}(p)),this.originValidationPromises[y]}get _shouldInitProactively(){return Gi()||Me()||oi()}}),this.cordovaResolver=Je(class Rc{constructor(){this._redirectPersistence=Ke,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hr,this._overrideRedirectResult=fl}_initialize(p){var y=this;return(0,g.Z)(function*(){const D=p._key();let re=y.eventManagers.get(D);return re||(re=new hd(p),y.eventManagers.set(D,re),y.attachCallbackListeners(p,re)),re})()}_openPopup(p){xe(p,"operation-not-supported-in-this-environment")}_openRedirect(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){!function Du(b){var p,y,D,re,Ee,Ct,gn,fr,Or,Ei;const ai=xa();Oe("function"==typeof(null===(p=null==ai?void 0:ai.universalLinks)||void 0===p?void 0:p.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Oe(void 0!==(null===(y=null==ai?void 0:ai.BuildInfo)||void 0===y?void 0:y.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Oe("function"==typeof(null===(Ee=null===(re=null===(D=null==ai?void 0:ai.cordova)||void 0===D?void 0:D.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ee?void 0:Ee.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(fr=null===(gn=null===(Ct=null==ai?void 0:ai.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===gn?void 0:gn.browsertab)||void 0===fr?void 0:fr.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(Ei=null===(Or=null==ai?void 0:ai.cordova)||void 0===Or?void 0:Or.InAppBrowser)||void 0===Ei?void 0:Ei.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Ct=yield Ee._initialize(p);yield Ct.initialized(),Ct.resetRedirect(),function zu(){ta.clear()}(),yield Ee._originValidation(p);const gn=function Wo(b,p,y=null){return{type:p,eventId:y,urlResponse:null,sessionId:vl(),postBody:null,tenantId:b.tenantId,error:Ge(b,"no-auth-event")}}(p,D,re);yield function xu(b,p){return ro()._set(co(b),p)}(p,gn);const fr=yield function wu(b,p,y){return zl.apply(this,arguments)}(p,gn,y),Or=yield function Mc(b){const{cordova:p}=xa();return new Promise(y=>{p.plugins.browsertab.isAvailable(D=>{let re=null;D?p.plugins.browsertab.openUrl(b):re=p.InAppBrowser.open(b,function Zi(b=(0,he.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),y(re)})})}(fr);return function Iu(b,p,y){return Su.apply(this,arguments)}(p,Ct,Or)})()}_isIframeWebStorageSupported(p,y){throw new Error("Method not implemented.")}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ac(b){return xc.apply(this,arguments)}(p)),this.originValidationPromises[y]}attachCallbackListeners(p,y){const{universalLinks:D,handleOpenURL:re,BuildInfo:Ee}=xa(),Ct=setTimeout((0,g.Z)(function*(){yield qa(p),y.onEvent(ou())}),500),gn=function(){var Ei=(0,g.Z)(function*(ai){clearTimeout(Ct);const Zo=yield qa(p);let f=null;Zo&&(null==ai?void 0:ai.url)&&(f=function Va(b,p){var y,D;const re=function Kd(b){const p=Mu(b),y=p.link?decodeURIComponent(p.link):void 0,D=Mu(y).link,re=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Mu(re).link||re||D||y||b}(p);if(re.includes("/__/auth/callback")){const Ee=Mu(re),Ct=Ee.firebaseError?function rl(b){try{return JSON.parse(b)}catch(p){return null}}(decodeURIComponent(Ee.firebaseError)):null,gn=null===(D=null===(y=null==Ct?void 0:Ct.code)||void 0===y?void 0:y.split("auth/"))||void 0===D?void 0:D[1],fr=gn?Ge(gn):null;return fr?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:fr,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:re,postBody:null}}return null}(Zo,ai.url)),y.onEvent(f||ou())});return function(Zo){return Ei.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,gn);const fr=re,Or=`${Ee.packageName.toLowerCase()}://`;xa().handleOpenURL=function(){var Ei=(0,g.Z)(function*(ai){if(ai.toLowerCase().startsWith(Or)&&gn({url:ai}),"function"==typeof fr)try{fr(ai)}catch(Zo){console.error(Zo)}});return function(ai){return Ei.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ke,this._completeRedirectFn=Hr,this._overrideRedirectResult=fl}_initialize(p){var y=this;return(0,g.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openPopup(p,y,D,re)})()}_openRedirect(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openRedirect(p,y,D,re)})()}_isIframeWebStorageSupported(p,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,y)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return ic()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ou(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,g.Z)(function*(){if(p.underlyingResolver)return;const y=yield function sc(){return lu.apply(this,arguments)}();p.underlyingResolver=y?p.cordovaResolver:p.browserResolver})()}}function Pc(b){return b.unwrap()}function md(b){return Nc(b)}function Nc(b){const{_tokenResponse:p}=b instanceof he.ZR?b.customData:b;if(!p)return null;if(!(b instanceof he.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return dl.credentialFromResult(b);const y=p.providerId;if(!y||"password"===y)return null;let D;switch(y){case"google.com":D=Ds;break;case"facebook.com":D=qs;break;case"github.com":D=Lo;break;case"twitter.com":D=Vo;break;default:const{oauthIdToken:re,oauthAccessToken:Ee,oauthTokenSecret:Ct,pendingToken:gn,nonce:fr}=p;return Ee||Ct||re||gn?gn?y.startsWith("saml.")?js._create(y,gn):At._fromParams({providerId:y,signInMethod:y,pendingToken:gn,idToken:re,accessToken:Ee}):new Os(y).credential({idToken:re,accessToken:Ee,rawNonce:fr}):null}return b instanceof he.ZR?D.credentialFromError(b):D.credentialFromResult(b)}function ma(b,p){return p.catch(y=>{throw y instanceof he.ZR&&function Fh(b,p){var y;const D=null===(y=p.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===(null==p?void 0:p.code))p.resolver=new kc(b,function Wt(b,p){var y;const D=(0,he.m9)(b),re=p;return Oe(p.customData.operationType,D,"argument-error"),Oe(null===(y=re.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,D,"argument-error"),ur._fromError(D,re)}(b,p));else if(D){const re=Nc(p),Ee=p;re&&(Ee.credential=re,Ee.tenantId=D.tenantId||void 0,Ee.email=D.email||void 0,Ee.phoneNumber=D.phoneNumber||void 0)}}(b,y),y}).then(y=>{const re=y.user;return{operationType:y.operationType,credential:md(y),additionalUserInfo:En(y),user:sl.getOrCreate(re)}})}function yd(b,p){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(b,p){const y=yield p;return{verificationId:y.verificationId,confirm:D=>ma(b,y.confirm(D))}})).apply(this,arguments)}class kc{constructor(p,y){this.resolver=y,this.auth=function Qd(b){return b.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ma(Pc(this.auth),this.resolver.resolveSignIn(p))}}class sl{constructor(p){this._delegate=p,this.multiFactor=function ia(b){const p=(0,he.m9)(b);return Zs.has(p)||Zs.set(p,xi._fromUser(p)),Zs.get(p)}(p)}static getOrCreate(p){return sl.USER_MAP.has(p)||sl.USER_MAP.set(p,new sl(p)),sl.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var y=this;return(0,g.Z)(function*(){return ma(y.auth,ti(y._delegate,p))})()}linkWithPhoneNumber(p,y){var D=this;return(0,g.Z)(function*(){return yd(D.auth,function aa(b,p,y){return Gu.apply(this,arguments)}(D._delegate,p,y))})()}linkWithPopup(p){var y=this;return(0,g.Z)(function*(){return ma(y.auth,function el(b,p,y){return Vl.apply(this,arguments)}(y._delegate,p,Ra))})()}linkWithRedirect(p){var y=this;return(0,g.Z)(function*(){return yield Ki(Tr(y.auth)),function Mt(b,p,y){return function Zt(b,p,y){return $n.apply(this,arguments)}(b,p,y)}(y._delegate,p,Ra)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var y=this;return(0,g.Z)(function*(){return ma(y.auth,Ji(y._delegate,p))})()}reauthenticateWithPhoneNumber(p,y){return yd(this.auth,function la(b,p,y){return Ao.apply(this,arguments)}(this._delegate,p,y))}reauthenticateWithPopup(p){return ma(this.auth,function Ga(b,p,y){return eo.apply(this,arguments)}(this._delegate,p,Ra))}reauthenticateWithRedirect(p){var y=this;return(0,g.Z)(function*(){return yield Ki(Tr(y.auth)),function Q(b,p,y){return function de(b,p,y){return $e.apply(this,arguments)}(b,p,y)}(y._delegate,p,Ra)})()}sendEmailVerification(p){return function A(b,p){return I.apply(this,arguments)}(this._delegate,p)}unlink(p){var y=this;return(0,g.Z)(function*(){return yield function Hi(b,p){return Ti.apply(this,arguments)}(y._delegate,p),y})()}updateEmail(p){return function me(b,p){return ue((0,he.m9)(b),p,null)}(this._delegate,p)}updatePassword(p){return function ce(b,p){return ue((0,he.m9)(b),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function _u(b,p){return go.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function we(b,p){return ae.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,y){return function P(b,p,y){return z.apply(this,arguments)}(this._delegate,p,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}sl.USER_MAP=new WeakMap;const ol=Oe;let Fc=(()=>{class b{constructor(y,D){if(this.app=y,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:re}=y.options;ol(re,"invalid-api-key",{appName:y.name}),ol(re,"invalid-api-key",{appName:y.name});const Ee="undefined"!=typeof window?Ra:void 0;this._delegate=D.initialize({options:{persistence:Ro(re,y.name),popupRedirectResolver:Ee}}),this._delegate._updateErrorMap(ln),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?sl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,D){!function Ci(b,p,y){const D=Tr(b);Oe(D._canInitEmulator,D,"emulator-config-failed"),Oe(/^https?:\/\//.test(p),D,"invalid-emulator-scheme");const re=!!(null==y?void 0:y.disableWarnings),Ee=gs(p),{host:Ct,port:gn}=function zi(b){const p=gs(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(p.length));if(!y)return{host:"",port:null};const D=y[2].split("@").pop()||"",re=/^(\[[^\]]+\])(:|$)/.exec(D);if(re){const Ee=re[1];return{host:Ee,port:ds(D.substr(Ee.length+1))}}{const[Ee,Ct]=D.split(":");return{host:Ee,port:ds(Ct)}}}(p);D.config.emulator={url:`${Ee}//${Ct}${null===gn?"":`:${gn}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Ct,port:gn,protocol:Ee.replace(":",""),options:Object.freeze({disableWarnings:re})}),re||function Ri(){function b(){const p=document.createElement("p"),y=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,y,D)}applyActionCode(y){return function ye(b,p){return Qe.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return Nn(this._delegate,y)}confirmPasswordReset(y,D){return function G(b,p,y){return L.apply(this,arguments)}(this._delegate,y,D)}createUserWithEmailAndPassword(y,D){var re=this;return(0,g.Z)(function*(){return ma(re._delegate,function ke(b,p,y){return rt.apply(this,arguments)}(re._delegate,y,D))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function ss(b,p){return l.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function jn(b,p){const y=ho.parseLink(p);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,g.Z)(function*(){ol(pa(),y._delegate,"operation-not-supported-in-this-environment");const D=yield function Ur(b,p){return Kr.apply(this,arguments)}(y._delegate,Ra);return D?ma(y._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function El(b,p){Tr(b)._logFramework(p)}(this._delegate,y)}onAuthStateChanged(y,D,re){const{next:Ee,error:Ct,complete:gn}=Lc(y,D,re);return this._delegate.onAuthStateChanged(Ee,Ct,gn)}onIdTokenChanged(y,D,re){const{next:Ee,error:Ct,complete:gn}=Lc(y,D,re);return this._delegate.onIdTokenChanged(Ee,Ct,gn)}sendSignInLinkToEmail(y,D){return function xn(b,p,y){return Sr.apply(this,arguments)}(this._delegate,y,D)}sendPasswordResetEmail(y,D){return function Co(b,p,y){return Y.apply(this,arguments)}(this._delegate,y,D||void 0)}setPersistence(y){var D=this;return(0,g.Z)(function*(){let re;switch(function pd(b,p){Rl(Object.values(ga).includes(p),b,"invalid-persistence-type"),(0,he.b$)()?Rl(p!==ga.SESSION,b,"unsupported-persistence-type"):(0,he.UG)()?Rl(p===ga.NONE,b,"unsupported-persistence-type"):rc()?Rl(p===ga.NONE||p===ga.LOCAL&&(0,he.hl)(),b,"unsupported-persistence-type"):Rl(p===ga.NONE||il(),b,"unsupported-persistence-type")}(D._delegate,y),y){case ga.SESSION:re=Ke;break;case ga.LOCAL:re=(yield Je(ar)._isAvailable())?ar:Ce;break;case ga.NONE:re=Ue;break;default:return xe("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(re)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return ma(this._delegate,function io(b){return so.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return ma(this._delegate,jr(this._delegate,y))}signInWithCustomToken(y){return ma(this._delegate,function ns(b,p){return Wr.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,D){return ma(this._delegate,function Kt(b,p,y){return jr((0,he.m9)(b),Eo.credential(p,y))}(this._delegate,y,D))}signInWithEmailLink(y,D){return ma(this._delegate,function qr(b,p,y){return _i.apply(this,arguments)}(this._delegate,y,D))}signInWithPhoneNumber(y,D){return yd(this._delegate,function To(b,p,y){return Ia.apply(this,arguments)}(this._delegate,y,D))}signInWithPopup(y){var D=this;return(0,g.Z)(function*(){return ol(pa(),D._delegate,"operation-not-supported-in-this-environment"),ma(D._delegate,function oo(b,p,y){return Ha.apply(this,arguments)}(D._delegate,y,Ra))})()}signInWithRedirect(y){var D=this;return(0,g.Z)(function*(){return ol(pa(),D._delegate,"operation-not-supported-in-this-environment"),yield Ki(D._delegate),function Ul(b,p,y){return function Na(b,p,y){return U.apply(this,arguments)}(b,p,y)}(D._delegate,y,Ra)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function K(b,p){return be.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=ga,b})();function Lc(b,p,y){let D=b;"function"!=typeof b&&({next:D,error:p,complete:y}=b);const re=D;return{next:Ct=>re(Ct&&sl.getOrCreate(Ct)),error:p,complete:y}}function Ro(b,p){const y=function uu(b,p){const y=Nu();if(!y)return[];const D=ft(fd,b,p);switch(y.getItem(D)){case ga.NONE:return[Ue];case ga.LOCAL:return[ar,Ke];case ga.SESSION:return[Ke];default:return[]}}(b,p);if("undefined"!=typeof self&&!y.includes(ar)&&y.push(ar),"undefined"!=typeof window)for(const D of[Ce,Ke])y.includes(D)||y.push(D);return y.includes(Ue)||y.push(Ue),y}class al{constructor(){this.providerId="phone",this._delegate=new dl(Pc(k.Z.auth()))}static credential(p,y){return dl.credential(p,y)}verifyPhoneNumber(p,y){return this._delegate.verifyPhoneNumber(p,y)}unwrap(){return this._delegate}}al.PHONE_SIGN_IN_METHOD=dl.PHONE_SIGN_IN_METHOD,al.PROVIDER_ID=dl.PROVIDER_ID;const Ka=Oe;class ku{constructor(p,y,D=k.Z.app()){var re;Ka(null===(re=D.options)||void 0===re?void 0:re.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new Xt(p,y,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Vc(b){b.INTERNAL.registerComponent(new ht.wA("auth-compat",p=>{const y=p.getProvider("app-compat").getImmediate(),D=p.getProvider("auth");return new Fc(y,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Eo,FacebookAuthProvider:qs,GithubAuthProvider:Lo,GoogleAuthProvider:Ds,OAuthProvider:Os,SAMLAuthProvider:Fs,PhoneAuthProvider:al,PhoneMultiFactorGenerator:Qu,RecaptchaVerifier:ku,TwitterAuthProvider:Vo,Auth:Fc,AuthCredential:Yi,Error:he.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.3.0")}(k.Z)},6197:(Zn,It,j)=>{j.d(It,{N8:()=>b,S1:()=>au,yv:()=>nc,jM:()=>Ko,iH:()=>ro,t8:()=>Rc,Vx:()=>El});var g=j(5861),k=j(9681),he=j(4859),oe=j(2090),je=j(1877);const He="@firebase/database";let We="";class Ne{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,d){null==d?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,oe.Wl)(d))}get(c){const d=this.domStorage_.getItem(this.prefixedName_(c));return null==d?null:(0,oe.cI)(d)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class Pe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,d){null==d?delete this.cache_[c]:this.cache_[c]=d}get(c){return(0,oe.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const vt=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){const c=window[f];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new Ne(c)}}catch(c){}return new Pe},wn=vt("localStorage"),_t=vt("sessionStorage"),ln=new je.Yd("@firebase/database"),Dn=function(){let f=1;return function(){return f++}}(),Nt=function(f){const c=(0,oe.dS)(f),d=new oe.gQ;d.update(c);const v=d.digest();return oe.US.encodeByteArray(v)},Jt=function(...f){let c="";for(let d=0;d<f.length;d++){const v=f[d];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?c+=Jt.apply(null,v):c+="object"==typeof v?(0,oe.Wl)(v):v,c+=" "}return c};let Un=null,dn=!0;const Ge=function(...f){if(!0===dn&&(dn=!1,null===Un&&!0===_t.get("logging_enabled")&&function(f,c){(0,oe.hu)(!c||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(ln.logLevel=je.in.VERBOSE,Un=ln.log.bind(ln),c&&_t.set("logging_enabled",!0)):"function"==typeof f?Un=f:(Un=null,_t.remove("logging_enabled"))}(!0)),Un){const c=Jt.apply(null,f);Un(c)}},wt=function(f){return function(...c){Ge(f,...c)}},on=function(...f){const c="FIREBASE INTERNAL ERROR: "+Jt(...f);ln.error(c)},Ht=function(...f){const c=`FIREBASE FATAL ERROR: ${Jt(...f)}`;throw ln.error(c),new Error(c)},Oe=function(...f){const c="FIREBASE WARNING: "+Jt(...f);ln.warn(c)},Re=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},Je="[MIN_NAME]",Ft="[MAX_NAME]",Dt=function(f,c){if(f===c)return 0;if(f===Je||c===Ft)return-1;if(c===Je||f===Ft)return 1;{const d=Qt(f),v=Qt(c);return null!==d?null!==v?d-v==0?f.length-c.length:d-v:-1:null!==v?1:f<c?-1:1}},Lt=function(f,c){return f===c?0:f<c?-1:1},Yt=function(f,c){if(c&&f in c)return c[f];throw new Error("Missing required key ("+f+") in object: "+(0,oe.Wl)(c))},sr=function(f){if("object"!=typeof f||null===f)return(0,oe.Wl)(f);const c=[];for(const v in f)c.push(v);c.sort();let d="{";for(let v=0;v<c.length;v++)0!==v&&(d+=","),d+=(0,oe.Wl)(c[v]),d+=":",d+=sr(f[c[v]]);return d+="}",d},lr=function(f,c){const d=f.length;if(d<=c)return[f];const v=[];for(let x=0;x<d;x+=c)v.push(f.substring(x,x+c>d?d:x+c));return v};function yn(f,c){for(const d in f)f.hasOwnProperty(d)&&c(d,f[d])}const br=function(f){(0,oe.hu)(!Re(f),"Invalid JSON number");const v=1023;let x,H,te,Ie,Ye;0===f?(H=0,te=0,x=1/f==-1/0?1:0):(x=f<0,(f=Math.abs(f))>=Math.pow(2,1-v)?(Ie=Math.min(Math.floor(Math.log(f)/Math.LN2),v),H=Ie+v,te=Math.round(f*Math.pow(2,52-Ie)-Math.pow(2,52))):(H=0,te=Math.round(f/Math.pow(2,-1074))));const lt=[];for(Ye=52;Ye;Ye-=1)lt.push(te%2?1:0),te=Math.floor(te/2);for(Ye=11;Ye;Ye-=1)lt.push(H%2?1:0),H=Math.floor(H/2);lt.push(x?1:0),lt.reverse();const an=lt.join("");let Tn="";for(Ye=0;Ye<64;Ye+=8){let Rn=parseInt(an.substr(Ye,8),2).toString(16);1===Rn.length&&(Rn="0"+Rn),Tn+=Rn}return Tn.toLowerCase()},it=new RegExp("^-?(0*)\\d{1,10}$"),Qt=function(f){if(it.test(f)){const c=Number(f);if(c>=-2147483648&&c<=2147483647)return c}return null},xt=function(f){try{f()}catch(c){setTimeout(()=>{throw Oe("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},Wn=function(f,c){const d=setTimeout(f,c);return"number"==typeof d&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(d):"object"==typeof d&&d.unref&&d.unref(),d};class or{constructor(c,d){this.appName_=c,this.appCheckProvider=d,this.appCheck=null==d?void 0:d.getImmediate({optional:!0}),this.appCheck||null==d||d.get().then(v=>this.appCheck=v)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((d,v)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){var d;null===(d=this.appCheckProvider)||void 0===d||d.get().then(v=>v.addTokenListener(c))}notifyForInvalidToken(){Oe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dr{constructor(c,d,v){this.appName_=c,this.firebaseOptions_=d,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(x=>this.auth_=x)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(d=>d&&"auth/token-not-initialized"===d.code?(Ge("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)):new Promise((d,v)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(d=>d.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(d=>d.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oe(c)}}let Yr=(()=>{class f{constructor(d){this.accessToken=d}getToken(d){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(d){d(this.accessToken)}removeTokenChangeListener(d){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const is=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dt="websocket",Gt="long_polling";class tn{constructor(c,d,v,x,H=!1,te="",Ie=!1){this.secure=d,this.namespace=v,this.webSocketOnly=x,this.nodeAdmin=H,this.persistenceKey=te,this.includeNamespaceInQueryParams=Ie,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wn.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&wn.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Yn(f,c,d){let v;if((0,oe.hu)("string"==typeof c,"typeof type must == string"),(0,oe.hu)("object"==typeof d,"typeof params must == object"),c===dt)v=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(c!==Gt)throw new Error("Unknown connection type: "+c);v=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function bn(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(d.ns=f.namespace);const x=[];return yn(d,(H,te)=>{x.push(H+"="+te)}),v+x.join("&")}class Xr{constructor(){this.counters_={}}incrementCounter(c,d=1){(0,oe.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=d}get(){return(0,oe.p$)(this.counters_)}}const Br={},kr={};function ls(f){const c=f.toString();return Br[c]||(Br[c]=new Xr),Br[c]}class di{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,d){this.closeAfterResponse=c,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,d){for(this.pendingResponses[c]=d;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let x=0;x<v.length;++x)v[x]&&xt(()=>{this.onMessage_(v[x])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ae{constructor(c,d,v,x,H,te,Ie){this.connId=c,this.repoInfo=d,this.applicationId=v,this.appCheckToken=x,this.authToken=H,this.transportSessionId=te,this.lastSessionId=Ie,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wt(c),this.stats_=ls(d),this.urlFn=Ye=>(this.appCheckToken&&(Ye.ac=this.appCheckToken),Yn(d,Gt,Ye))}open(c,d){this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new di(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,oe.Yr)()||"complete"===document.readyState)f();else{let c=!1;const d=function(){document.body?c||(c=!0,f()):setTimeout(d,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&d()}),window.attachEvent("onload",d))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pt((...H)=>{const[te,Ie,Ye,lt,an]=H;if(this.incrementIncomingBytes_(H),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===te)this.id=Ie,this.password=Ye;else{if("close"!==te)throw new Error("Unrecognized command received: "+te);Ie?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(Ie,()=>{this.onClosed_()})):this.onClosed_()}},(...H)=>{const[te,Ie]=H;this.incrementIncomingBytes_(H),this.myPacketOrderer.handleResponse(te,Ie)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&is.test(location.hostname)&&(v.r="f");const x=this.urlFn(v);this.log_("Connecting via long-poll to "+x),this.scriptTagHolder.addTag(x,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ae.forceAllow_=!0}static forceDisallow(){Ae.forceDisallow_=!0}static isAvailable(){return!((0,oe.Yr)()||!Ae.forceAllow_&&(Ae.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const d=(0,oe.Wl)(c);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const v=(0,oe.h$)(d),x=lr(v,1840);for(let H=0;H<x.length;H++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,x.length,x[H]),this.curSegmentNum++}addDisconnectPingFrame(c,d){if((0,oe.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=c,v.pw=d,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const d=(0,oe.Wl)(c).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)}}class pt{constructor(c,d,v,x){if(this.onDisconnect=v,this.urlFn=x,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,oe.Yr)())this.commandCB=c,this.onMessageCB=d;else{this.uniqueCallbackIdentifier=Dn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=d,this.myIFrame=pt.createIFrame_();let H="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(H='<script>document.domain="'+document.domain+'";<\/script>');const te="<html><body>"+H+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(te),this.myIFrame.doc.close()}catch(Ie){Ge("frame writing exception"),Ie.stack&&Ge(Ie.stack),Ge(Ie)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||Ge("No IE domain setting required")}catch(d){const v=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,d){for(this.myID=c,this.myPW=d,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let d=this.urlFn(c),v="",x=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const te=this.pendingSegs.shift();v=v+"&seg"+x+"="+te.seg+"&ts"+x+"="+te.ts+"&d"+x+"="+te.d,x++}return d+=v,this.addLongPollTag_(d,this.currentSerial),!0}return!1}enqueueSegment(c,d,v){this.pendingSegs.push({seg:c,ts:d,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(c,d){this.outstandingRequests.add(d);const v=()=>{this.outstandingRequests.delete(d),this.newRequest_()},x=setTimeout(v,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(x),v()})}addTag(c,d){(0,oe.Yr)()?this.doNodeLongPoll(c,d):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=c,v.onload=v.onreadystatechange=function(){const x=v.readyState;(!x||"loaded"===x||"complete"===x)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),d())},v.onerror=()=>{Ge("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let Jn=null;"undefined"!=typeof MozWebSocket?Jn=MozWebSocket:"undefined"!=typeof WebSocket&&(Jn=WebSocket);let oi=(()=>{class f{constructor(d,v,x,H,te,Ie,Ye){this.connId=d,this.applicationId=x,this.appCheckToken=H,this.authToken=te,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wt(this.connId),this.stats_=ls(v),this.connURL=f.connectionURL_(v,Ie,Ye,H,x),this.nodeAdmin=v.nodeAdmin}static connectionURL_(d,v,x,H,te){const Ie={v:"5"};return!(0,oe.Yr)()&&"undefined"!=typeof location&&location.hostname&&is.test(location.hostname)&&(Ie.r="f"),v&&(Ie.s=v),x&&(Ie.ls=x),H&&(Ie.ac=H),te&&(Ie.p=te),Yn(d,dt,Ie)}open(d,v){this.onDisconnect=v,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wn.set("previous_websocket_failure",!0);try{let x;if((0,oe.Yr)()){x={headers:{"User-Agent":`Firebase/5/${We}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(x.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(x.headers["X-Firebase-AppCheck"]=this.appCheckToken);const te=process.env,Ie=0===this.connURL.indexOf("wss://")?te.HTTPS_PROXY||te.https_proxy:te.HTTP_PROXY||te.http_proxy;Ie&&(x.proxy={origin:Ie})}this.mySock=new Jn(this.connURL,[],x)}catch(x){this.log_("Error instantiating WebSocket.");const H=x.message||x.data;return H&&this.log_(H),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=x=>{this.handleIncomingFrame(x)},this.mySock.onerror=x=>{this.log_("WebSocket error.  Closing connection.");const H=x.message||x.data;H&&this.log_(H),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let d=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const x=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);x&&x.length>1&&parseFloat(x[1])<4.4&&(d=!0)}return!d&&null!==Jn&&!f.forceDisallow_}static previouslyFailed(){return wn.isInMemoryStorage||!0===wn.get("previous_websocket_failure")}markConnectionHealthy(){wn.remove("previous_websocket_failure")}appendFrame_(d){if(this.frames.push(d),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const x=(0,oe.cI)(v);this.onMessage(x)}}handleNewFrameCount_(d){this.totalFrames=d,this.frames=[]}extractFrameCount_(d){if((0,oe.hu)(null===this.frames,"We already have a frame buffer"),d.length<=6){const v=Number(d);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),d}handleIncomingFrame(d){if(null===this.mySock)return;const v=d.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const x=this.extractFrameCount_(v);null!==x&&this.appendFrame_(x)}}send(d){this.resetKeepAlive();const v=(0,oe.Wl)(d);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const x=lr(v,16384);x.length>1&&this.sendString_(String(x.length));for(let H=0;H<x.length;H++)this.sendString_(x[H])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(d){try{this.mySock.send(d)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),Zi=(()=>{class f{constructor(d){this.initTransports_(d)}static get ALL_TRANSPORTS(){return[Ae,oi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(d){const v=oi&&oi.isAvailable();let x=v&&!oi.previouslyFailed();if(d.webSocketOnly&&(v||Oe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),x=!0),x)this.transports_=[oi];else{const H=this.transports_=[];for(const te of f.ALL_TRANSPORTS)te&&te.isAvailable()&&H.push(te);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class Yi{constructor(c,d,v,x,H,te,Ie,Ye,lt,an){this.id=c,this.repoInfo_=d,this.applicationId_=v,this.appCheckToken_=x,this.authToken_=H,this.onMessage_=te,this.onReady_=Ie,this.onDisconnect_=Ye,this.onKill_=lt,this.lastSessionId=an,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wt("c:"+this.id+":"),this.transportManager_=new Zi(d),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(d,v)},Math.floor(0));const x=c.healthyTimeout||0;x>0&&(this.healthyTimeout_=Wn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(x)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return d=>{c===this.conn_?this.onConnectionLost_(d):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return d=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(d):c===this.secondaryConn_?this.onSecondaryMessageReceived_(d):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const d=c.t;"a"===d?this.upgradeIfSecondaryHealthy_():"r"===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const d=Yt("t",c),v=Yt("d",c);if("c"===d)this.onSecondaryControl_(v);else{if("d"!==d)throw new Error("Unknown protocol layer: "+d);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const d=Yt("t",c),v=Yt("d",c);"c"===d?this.onControl_(v):"d"===d&&this.onDataMessage_(v)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const d=Yt("t",c);if("d"in c){const v=c.d;if("h"===d)this.onHandshake_(v);else if("n"===d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let x=0;x<this.pendingDataMessages.length;++x)this.onDataMessage_(this.pendingDataMessages[x]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===d?this.onConnectionShutdown_(v):"r"===d?this.onReset_(v):"e"===d?on("Server Error: "+v):"o"===d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):on("Unknown control packet command: "+d)}}onHandshake_(c){const d=c.ts,v=c.v,x=c.h;this.sessionId=c.s,this.repoInfo_.host=x,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),"5"!==v&&Oe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,v),Wn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,d){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ii{put(c,d,v,x){}merge(c,d,v,x){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,d,v){}onDisconnectMerge(c,d,v){}onDisconnectCancel(c,d){}reportStats(c){}}class zr{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,oe.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...d){if(Array.isArray(this.listeners_[c])){const v=[...this.listeners_[c]];for(let x=0;x<v.length;x++)v[x].callback.apply(v[x].context,d)}}on(c,d,v){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:d,context:v});const x=this.getInitialEvent(c);x&&d.apply(v,x)}off(c,d,v){this.validateEventType_(c);const x=this.listeners_[c]||[];for(let H=0;H<x.length;H++)if(x[H].callback===d&&(!v||v===x[H].context))return void x.splice(H,1)}validateEventType_(c){(0,oe.hu)(this.allowedEvents_.find(d=>d===c),"Unknown event: "+c)}}class Cs extends zr{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,oe.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Cs}getInitialEvent(c){return(0,oe.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}class $r{constructor(c,d){if(void 0===d){this.pieces_=c.split("/");let v=0;for(let x=0;x<this.pieces_.length;x++)this.pieces_[x].length>0&&(this.pieces_[v]=this.pieces_[x],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=d}toString(){let c="";for(let d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(c+="/"+this.pieces_[d]);return c||"/"}}function wr(){return new $r("")}function Ir(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function ts(f){return f.pieces_.length-f.pieceNum_}function Vr(f){let c=f.pieceNum_;return c<f.pieces_.length&&c++,new $r(f.pieces_,c)}function bi(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Fi(f,c=0){return f.pieces_.slice(f.pieceNum_+c)}function fs(f){if(f.pieceNum_>=f.pieces_.length)return null;const c=[];for(let d=f.pieceNum_;d<f.pieces_.length-1;d++)c.push(f.pieces_[d]);return new $r(c,0)}function si(f,c){const d=[];for(let v=f.pieceNum_;v<f.pieces_.length;v++)d.push(f.pieces_[v]);if(c instanceof $r)for(let v=c.pieceNum_;v<c.pieces_.length;v++)d.push(c.pieces_[v]);else{const v=c.split("/");for(let x=0;x<v.length;x++)v[x].length>0&&d.push(v[x])}return new $r(d,0)}function Zr(f){return f.pieceNum_>=f.pieces_.length}function ji(f,c){const d=Ir(f),v=Ir(c);if(null===d)return c;if(d===v)return ji(Vr(f),Vr(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+f+")")}function bs(f,c){const d=Fi(f,0),v=Fi(c,0);for(let x=0;x<d.length&&x<v.length;x++){const H=Dt(d[x],v[x]);if(0!==H)return H}return d.length===v.length?0:d.length<v.length?-1:1}function ys(f,c){if(ts(f)!==ts(c))return!1;for(let d=f.pieceNum_,v=c.pieceNum_;d<=f.pieces_.length;d++,v++)if(f.pieces_[d]!==c.pieces_[v])return!1;return!0}function Pi(f,c){let d=f.pieceNum_,v=c.pieceNum_;if(ts(f)>ts(c))return!1;for(;d<f.pieces_.length;){if(f.pieces_[d]!==c.pieces_[v])return!1;++d,++v}return!0}class jo{constructor(c,d){this.errorPrefix_=d,this.parts_=Fi(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,oe.ug)(this.parts_[v]);rs(this)}}function rs(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Et(f))}function Et(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class ct extends zr{constructor(){let c,d;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(d="visibilitychange",c="hidden"):void 0!==document.mozHidden?(d="mozvisibilitychange",c="mozHidden"):void 0!==document.msHidden?(d="msvisibilitychange",c="msHidden"):void 0!==document.webkitHidden&&(d="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,d&&document.addEventListener(d,()=>{const v=!document[c];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new ct}getInitialEvent(c){return(0,oe.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const At=1e3;let Is,ws=(()=>{class f extends Ii{constructor(d,v,x,H,te,Ie,Ye,lt){if(super(),this.repoInfo_=d,this.applicationId_=v,this.onDataUpdate_=x,this.onConnectStatus_=H,this.onServerInfoUpdate_=te,this.authTokenProvider_=Ie,this.appCheckTokenProvider_=Ye,this.authOverride_=lt,this.id=f.nextPersistentConnectionId_++,this.log_=wt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=At,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,lt&&!(0,oe.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ct.getInstance().on("visible",this.onVisible_,this),-1===d.host.indexOf("fblocal")&&Cs.getInstance().on("online",this.onOnline_,this)}sendRequest(d,v,x){const H=++this.requestNumber_,te={r:H,a:d,b:v};this.log_((0,oe.Wl)(te)),(0,oe.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(te),x&&(this.requestCBHash_[H]=x)}get(d){this.initConnection_();const v=new oe.BH,x={p:d._path.toString(),q:d._queryObject};return this.outstandingGets_.push({action:"g",request:x,onComplete:Ie=>{const Ye=Ie.d;"ok"===Ie.s?v.resolve(Ye):v.reject(Ye)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(d,v,x,H){this.initConnection_();const te=d._queryIdentifier,Ie=d._path.toString();this.log_("Listen called for "+Ie+" "+te),this.listens.has(Ie)||this.listens.set(Ie,new Map),(0,oe.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,oe.hu)(!this.listens.get(Ie).has(te),"listen() called twice for same path/queryId.");const Ye={onComplete:H,hashFn:v,query:d,tag:x};this.listens.get(Ie).set(te,Ye),this.connected_&&this.sendListen_(Ye)}sendGet_(d){const v=this.outstandingGets_[d];this.sendRequest("g",v.request,x=>{delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(x)})}sendListen_(d){const v=d.query,x=v._path.toString(),H=v._queryIdentifier;this.log_("Listen on "+x+" for "+H);const te={p:x};d.tag&&(te.q=v._queryObject,te.t=d.tag),te.h=d.hashFn(),this.sendRequest("q",te,Ye=>{const lt=Ye.d,an=Ye.s;f.warnOnListenWarnings_(lt,v),(this.listens.get(x)&&this.listens.get(x).get(H))===d&&(this.log_("listen response",Ye),"ok"!==an&&this.removeListen_(x,H),d.onComplete&&d.onComplete(an,lt))})}static warnOnListenWarnings_(d,v){if(d&&"object"==typeof d&&(0,oe.r3)(d,"w")){const x=(0,oe.DV)(d,"w");if(Array.isArray(x)&&~x.indexOf("no_index")){const H='".indexOn": "'+v._queryParams.getIndex().toString()+'"',te=v._path.toString();Oe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${H} at ${te} to your security rules for better performance.`)}}}refreshAuthToken(d){this.authToken_=d,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(d)}reduceReconnectDelayIfAdminCredential_(d){(d&&40===d.length||(0,oe.GJ)(d))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(d){this.appCheckToken_=d,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const d=this.authToken_,v=(0,oe.w9)(d)?"auth":"gauth",x={cred:d};null===this.authOverride_?x.noauth=!0:"object"==typeof this.authOverride_&&(x.authvar=this.authOverride_),this.sendRequest(v,x,H=>{const te=H.s,Ie=H.d||"error";this.authToken_===d&&("ok"===te?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(te,Ie))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},d=>{const v=d.s,x=d.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,x)})}unlisten(d,v){const x=d._path.toString(),H=d._queryIdentifier;this.log_("Unlisten called for "+x+" "+H),(0,oe.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(x,H)&&this.connected_&&this.sendUnlisten_(x,H,d._queryObject,v)}sendUnlisten_(d,v,x,H){this.log_("Unlisten on "+d+" for "+v);const te={p:d};H&&(te.q=x,te.t=H),this.sendRequest("n",te)}onDisconnectPut(d,v,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",d,v,x):this.onDisconnectRequestQueue_.push({pathString:d,action:"o",data:v,onComplete:x})}onDisconnectMerge(d,v,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",d,v,x):this.onDisconnectRequestQueue_.push({pathString:d,action:"om",data:v,onComplete:x})}onDisconnectCancel(d,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",d,null,v):this.onDisconnectRequestQueue_.push({pathString:d,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(d,v,x,H){const te={p:v,d:x};this.log_("onDisconnect "+d,te),this.sendRequest(d,te,Ie=>{H&&setTimeout(()=>{H(Ie.s,Ie.d)},Math.floor(0))})}put(d,v,x,H){this.putInternal("p",d,v,x,H)}merge(d,v,x,H){this.putInternal("m",d,v,x,H)}putInternal(d,v,x,H,te){this.initConnection_();const Ie={p:v,d:x};void 0!==te&&(Ie.h=te),this.outstandingPuts_.push({action:d,request:Ie,onComplete:H}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(d){const v=this.outstandingPuts_[d].action,x=this.outstandingPuts_[d].request,H=this.outstandingPuts_[d].onComplete;this.outstandingPuts_[d].queued=this.connected_,this.sendRequest(v,x,te=>{this.log_(v+" response",te),delete this.outstandingPuts_[d],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),H&&H(te.s,te.d)})}reportStats(d){if(this.connected_){const v={c:d};this.log_("reportStats",v),this.sendRequest("s",v,x=>{"ok"!==x.s&&this.log_("reportStats","Error sending stats: "+x.d)})}}onDataMessage_(d){if("r"in d){this.log_("from server: "+(0,oe.Wl)(d));const v=d.r,x=this.requestCBHash_[v];x&&(delete this.requestCBHash_[v],x(d.b))}else{if("error"in d)throw"A server-side error has occurred: "+d.error;"a"in d&&this.onDataPush_(d.a,d.b)}}onDataPush_(d,v){this.log_("handleServerMessage",d,v),"d"===d?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===d?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===d?this.onListenRevoked_(v.p,v.q):"ac"===d?this.onAuthRevoked_(v.s,v.d):"apc"===d?this.onAppCheckRevoked_(v.s,v.d):"sd"===d?this.onSecurityDebugPacket_(v):on("Unrecognized action received from server: "+(0,oe.Wl)(d)+"\nAre you using the latest client?")}onReady_(d,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(d),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(d){(0,oe.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(d))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(d){d&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)),this.visible_=d}onOnline_(d){d?(this.log_("Browser went online."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=At),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const d=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-d);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var d=this;return(0,g.Z)(function*(){if(d.shouldReconnect_()){d.log_("Making a connection attempt"),d.lastConnectionAttemptTime_=(new Date).getTime(),d.lastConnectionEstablishedTime_=null;const v=d.onDataMessage_.bind(d),x=d.onReady_.bind(d),H=d.onRealtimeDisconnect_.bind(d),te=d.id+":"+f.nextConnectionId_++,Ie=d.lastSessionId;let Ye=!1,lt=null;const an=function(){lt?lt.close():(Ye=!0,H())};d.realtime_={close:an,sendRequest:function(Er){(0,oe.hu)(lt,"sendRequest call when we're not connected not allowed."),lt.sendRequest(Er)}};const Rn=d.forceTokenRefresh_;d.forceTokenRefresh_=!1;try{const[Er,ui]=yield Promise.all([d.authTokenProvider_.getToken(Rn),d.appCheckTokenProvider_.getToken(Rn)]);Ye?Ge("getToken() completed but was canceled"):(Ge("getToken() completed. Creating connection."),d.authToken_=Er&&Er.accessToken,d.appCheckToken_=ui&&ui.token,lt=new Yi(te,d.repoInfo_,d.applicationId_,d.appCheckToken_,d.authToken_,v,x,H,xs=>{Oe(xs+" ("+d.repoInfo_.toString()+")"),d.interrupt("server_kill")},Ie))}catch(Er){d.log_("Failed to get token: "+Er),Ye||(d.repoInfo_.nodeAdmin&&Oe(Er),an())}}})()}interrupt(d){Ge("Interrupting connection for reason: "+d),this.interruptReasons_[d]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(d){Ge("Resuming connection for reason: "+d),delete this.interruptReasons_[d],(0,oe.xb)(this.interruptReasons_)&&(this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(d){const v=d-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let d=0;d<this.outstandingPuts_.length;d++){const v=this.outstandingPuts_[d];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[d],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(d,v){let x;x=v?v.map(te=>sr(te)).join("$"):"default";const H=this.removeListen_(d,x);H&&H.onComplete&&H.onComplete("permission_denied")}removeListen_(d,v){const x=new $r(d).toString();let H;if(this.listens.has(x)){const te=this.listens.get(x);H=te.get(v),te.delete(v),0===te.size&&this.listens.delete(x)}else H=void 0;return H}onAuthRevoked_(d,v){Ge("Auth token revoked: "+d+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===d||"permission_denied"===d)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(d,v){Ge("App check token revoked: "+d+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===d||"permission_denied"===d)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(d){this.securityDebugCallback_?this.securityDebugCallback_(d):"msg"in d&&console.log("FIREBASE: "+d.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const d of this.listens.values())for(const v of d.values())this.sendListen_(v);for(let d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){const d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(let d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)}sendConnectStats_(){const d={};let v="js";(0,oe.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),d["sdk."+v+"."+We.replace(/\./g,"-")]=1,(0,oe.uI)()?d["framework.cordova"]=1:(0,oe.b$)()&&(d["framework.reactnative"]=1),this.reportStats(d)}shouldReconnect_(){const d=Cs.getInstance().currentlyOnline();return(0,oe.xb)(this.interruptReasons_)&&d}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class Jr{constructor(c,d){this.name=c,this.node=d}static Wrap(c,d){return new Jr(c,d)}}class ps{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,d){const v=new Jr(Je,c),x=new Jr(Je,d);return 0!==this.compare(v,x)}minPost(){return Jr.MIN}}class Xo extends ps{static get __EMPTY_NODE(){return Is}static set __EMPTY_NODE(c){Is=c}compare(c,d){return Dt(c.name,d.name)}isDefinedOn(c){throw(0,oe.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,d){return!1}minPost(){return Jr.MIN}maxPost(){return new Jr(Ft,Is)}makePost(c,d){return(0,oe.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new Jr(c,Is)}toString(){return".key"}}const _s=new Xo;class ho{constructor(c,d,v,x,H=null){this.isReverse_=x,this.resultGenerator_=H,this.nodeStack_=[];let te=1;for(;!c.isEmpty();)if(te=d?v(c.key,d):1,x&&(te*=-1),te<0)c=this.isReverse_?c.left:c.right;else{if(0===te){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let d,c=this.nodeStack_.pop();if(d=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return d}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let qs,Ss=(()=>{class f{constructor(d,v,x,H,te){this.key=d,this.value=v,this.color=null!=x?x:f.RED,this.left=null!=H?H:Li.EMPTY_NODE,this.right=null!=te?te:Li.EMPTY_NODE}copy(d,v,x,H,te){return new f(null!=d?d:this.key,null!=v?v:this.value,null!=x?x:this.color,null!=H?H:this.left,null!=te?te:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)}reverseTraversal(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(d,v,x){let H=this;const te=x(d,H.key);return H=te<0?H.copy(null,null,null,H.left.insert(d,v,x),null):0===te?H.copy(null,v,null,null,null):H.copy(null,null,null,null,H.right.insert(d,v,x)),H.fixUp_()}removeMin_(){if(this.left.isEmpty())return Li.EMPTY_NODE;let d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.removeMin_(),null),d.fixUp_()}remove(d,v){let x,H;if(x=this,v(d,x.key)<0)!x.left.isEmpty()&&!x.left.isRed_()&&!x.left.left.isRed_()&&(x=x.moveRedLeft_()),x=x.copy(null,null,null,x.left.remove(d,v),null);else{if(x.left.isRed_()&&(x=x.rotateRight_()),!x.right.isEmpty()&&!x.right.isRed_()&&!x.right.left.isRed_()&&(x=x.moveRedRight_()),0===v(d,x.key)){if(x.right.isEmpty())return Li.EMPTY_NODE;H=x.right.min_(),x=x.copy(H.key,H.value,null,null,x.right.removeMin_())}x=x.copy(null,null,null,null,x.right.remove(d,v))}return x.fixUp_()}isRed_(){return this.color}fixUp_(){let d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d}moveRedLeft_(){let d=this.colorFlip_();return d.right.left.isRed_()&&(d=d.copy(null,null,null,null,d.right.rotateRight_()),d=d.rotateLeft_(),d=d.colorFlip_()),d}moveRedRight_(){let d=this.colorFlip_();return d.left.left.isRed_()&&(d=d.rotateRight_(),d=d.colorFlip_()),d}rotateLeft_(){const d=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)}rotateRight_(){const d=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)}colorFlip_(){const d=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,v)}checkMaxDepth_(){const d=this.check_();return Math.pow(2,d)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class Li{constructor(c,d=Li.EMPTY_NODE){this.comparator_=c,this.root_=d}insert(c,d){return new Li(this.comparator_,this.root_.insert(c,d,this.comparator_).copy(null,null,Ss.BLACK,null,null))}remove(c){return new Li(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,Ss.BLACK,null,null))}get(c){let d,v=this.root_;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d)return v.value;d<0?v=v.left:d>0&&(v=v.right)}return null}getPredecessorKey(c){let d,v=this.root_,x=null;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d){if(v.left.isEmpty())return x?x.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}d<0?v=v.left:d>0&&(x=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new ho(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,d){return new ho(this.root_,c,this.comparator_,!1,d)}getReverseIteratorFrom(c,d){return new ho(this.root_,c,this.comparator_,!0,d)}getReverseIterator(c){return new ho(this.root_,null,this.comparator_,!0,c)}}function $s(f,c){return Dt(f.name,c.name)}function Os(f,c){return Dt(f,c)}Li.EMPTY_NODE=new class Eo{copy(c,d,v,x,H){return this}insert(c,d,v){return new Ss(c,d,null)}remove(c,d){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Lo=function(f){return"number"==typeof f?"number:"+br(f):"string:"+f},Qs=function(f){if(f.isLeafNode()){const c=f.val();(0,oe.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,oe.r3)(c,".sv"),"Priority must be a string or number.")}else(0,oe.hu)(f===qs||f.isEmpty(),"priority of unexpected type.");(0,oe.hu)(f===qs||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let js,Fs,Vo,ks=(()=>{class f{constructor(d,v=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=d,this.priorityNode_=v,this.lazyHash_=null,(0,oe.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qs(this.priorityNode_)}static set __childrenNodeConstructor(d){js=d}static get __childrenNodeConstructor(){return js}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(d){return new f(this.value_,d)}getImmediateChild(d){return".priority"===d?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(d){return Zr(d)?this:".priority"===Ir(d)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(d,v){return null}updateImmediateChild(d,v){return".priority"===d?this.updatePriority(v):v.isEmpty()&&".priority"!==d?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,v).updatePriority(this.priorityNode_)}updateChild(d,v){const x=Ir(d);return null===x?v:v.isEmpty()&&".priority"!==x?this:((0,oe.hu)(".priority"!==x||1===ts(d),".priority must be the last token in a path"),this.updateImmediateChild(x,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vr(d),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(d,v){return!1}val(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let d="";this.priorityNode_.isEmpty()||(d+="priority:"+Lo(this.priorityNode_.val())+":");const v=typeof this.value_;d+=v+":",d+="number"===v?br(this.value_):this.value_,this.lazyHash_=Nt(d)}return this.lazyHash_}getValue(){return this.value_}compareTo(d){return d===f.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof f.__childrenNodeConstructor?-1:((0,oe.hu)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))}compareToLeafNode_(d){const v=typeof d.value_,x=typeof this.value_,H=f.VALUE_TYPE_ORDER.indexOf(v),te=f.VALUE_TYPE_ORDER.indexOf(x);return(0,oe.hu)(H>=0,"Unknown leaf type: "+v),(0,oe.hu)(te>=0,"Unknown leaf type: "+x),H===te?"object"===x?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:te-H}withIndex(){return this}isIndexed(){return!0}equals(d){if(d===this)return!0;if(d.isLeafNode()){const v=d;return this.value_===v.value_&&this.priorityNode_.equals(v.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const Ai=new class Ms extends ps{compare(c,d){const v=c.node.getPriority(),x=d.node.getPriority(),H=v.compareTo(x);return 0===H?Dt(c.name,d.name):H}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,d){return!c.getPriority().equals(d.getPriority())}minPost(){return Jr.MIN}maxPost(){return new Jr(Ft,new ks("[PRIORITY-POST]",Vo))}makePost(c,d){const v=Fs(c);return new Jr(d,new ks("[PRIORITY-POST]",v))}toString(){return".priority"}},io=Math.log(2);class so{constructor(c){this.count=parseInt(Math.log(c+1)/io,10),this.current_=this.count-1;const x=(H=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&x}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const Hs=function(f,c,d,v){f.sort(c);const x=function(Ye,lt){const an=lt-Ye;let Tn,Rn;if(0===an)return null;if(1===an)return Tn=f[Ye],Rn=d?d(Tn):Tn,new Ss(Rn,Tn.node,Ss.BLACK,null,null);{const Er=parseInt(an/2,10)+Ye,ui=x(Ye,Er),xs=x(Er+1,lt);return Tn=f[Er],Rn=d?d(Tn):Tn,new Ss(Rn,Tn.node,Ss.BLACK,ui,xs)}},Ie=function(Ye){let lt=null,an=null,Tn=f.length;const Rn=function(ui,xs){const ca=Tn-ui,Fu=Tn;Tn-=ui;const Uc=x(ca+1,Fu),Wl=f[ca],Lh=d?d(Wl):Wl;Er(new Ss(Lh,Wl.node,xs,null,Uc))},Er=function(ui){lt?(lt.left=ui,lt=ui):(an=ui,lt=ui)};for(let ui=0;ui<Ye.count;++ui){const xs=Ye.nextBitIsOne(),ca=Math.pow(2,Ye.count-(ui+1));xs?Rn(ca,Ss.BLACK):(Rn(ca,Ss.BLACK),Rn(ca,Ss.RED))}return an}(new so(f.length));return new Li(v||c,Ie)};let Gs;const As={};class Hi{constructor(c,d){this.indexes_=c,this.indexSet_=d}static get Default(){return(0,oe.hu)(As&&Ai,"ChildrenNode.ts has not been loaded"),Gs=Gs||new Hi({".priority":As},{".priority":Ai}),Gs}get(c){const d=(0,oe.DV)(this.indexes_,c);if(!d)throw new Error("No index defined for "+c);return d instanceof Li?d:null}hasIndex(c){return(0,oe.r3)(this.indexSet_,c.toString())}addIndex(c,d){(0,oe.hu)(c!==_s,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let x=!1;const H=d.getIterator(Jr.Wrap);let Ie,te=H.getNext();for(;te;)x=x||c.isDefinedOn(te.node),v.push(te),te=H.getNext();Ie=x?Hs(v,c.getCompare()):As;const Ye=c.toString(),lt=Object.assign({},this.indexSet_);lt[Ye]=c;const an=Object.assign({},this.indexes_);return an[Ye]=Ie,new Hi(an,lt)}addToIndexes(c,d){const v=(0,oe.UI)(this.indexes_,(x,H)=>{const te=(0,oe.DV)(this.indexSet_,H);if((0,oe.hu)(te,"Missing index implementation for "+H),x===As){if(te.isDefinedOn(c.node)){const Ie=[],Ye=d.getIterator(Jr.Wrap);let lt=Ye.getNext();for(;lt;)lt.name!==c.name&&Ie.push(lt),lt=Ye.getNext();return Ie.push(c),Hs(Ie,te.getCompare())}return As}{const Ie=d.get(c.name);let Ye=x;return Ie&&(Ye=Ye.remove(new Jr(c.name,Ie))),Ye.insert(c,c.node)}});return new Hi(v,this.indexSet_)}removeFromIndexes(c,d){const v=(0,oe.UI)(this.indexes_,x=>{if(x===As)return x;{const H=d.get(c.name);return H?x.remove(new Jr(c.name,H)):x}});return new Hi(v,this.indexSet_)}}let Ti,B=(()=>{class f{constructor(d,v,x){this.children_=d,this.priorityNode_=v,this.indexMap_=x,this.lazyHash_=null,this.priorityNode_&&Qs(this.priorityNode_),this.children_.isEmpty()&&(0,oe.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ti||(Ti=new f(new Li(Os),null,Hi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ti}updatePriority(d){return this.children_.isEmpty()?this:new f(this.children_,d,this.indexMap_)}getImmediateChild(d){if(".priority"===d)return this.getPriority();{const v=this.children_.get(d);return null===v?Ti:v}}getChild(d){const v=Ir(d);return null===v?this:this.getImmediateChild(v).getChild(Vr(d))}hasChild(d){return null!==this.children_.get(d)}updateImmediateChild(d,v){if((0,oe.hu)(v,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(v);{const x=new Jr(d,v);let H,te;v.isEmpty()?(H=this.children_.remove(d),te=this.indexMap_.removeFromIndexes(x,this.children_)):(H=this.children_.insert(d,v),te=this.indexMap_.addToIndexes(x,this.children_));const Ie=H.isEmpty()?Ti:this.priorityNode_;return new f(H,Ie,te)}}updateChild(d,v){const x=Ir(d);if(null===x)return v;{(0,oe.hu)(".priority"!==Ir(d)||1===ts(d),".priority must be the last token in a path");const H=this.getImmediateChild(x).updateChild(Vr(d),v);return this.updateImmediateChild(x,H)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(d){if(this.isEmpty())return null;const v={};let x=0,H=0,te=!0;if(this.forEachChild(Ai,(Ie,Ye)=>{v[Ie]=Ye.val(d),x++,te&&f.INTEGER_REGEXP_.test(Ie)?H=Math.max(H,Number(Ie)):te=!1}),!d&&te&&H<2*x){const Ie=[];for(const Ye in v)Ie[Ye]=v[Ye];return Ie}return d&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let d="";this.getPriority().isEmpty()||(d+="priority:"+Lo(this.getPriority().val())+":"),this.forEachChild(Ai,(v,x)=>{const H=x.hash();""!==H&&(d+=":"+v+":"+H)}),this.lazyHash_=""===d?"":Nt(d)}return this.lazyHash_}getPredecessorChildName(d,v,x){const H=this.resolveIndex_(x);if(H){const te=H.getPredecessorKey(new Jr(d,v));return te?te.name:null}return this.children_.getPredecessorKey(d)}getFirstChildName(d){const v=this.resolveIndex_(d);if(v){const x=v.minKey();return x&&x.name}return this.children_.minKey()}getFirstChild(d){const v=this.getFirstChildName(d);return v?new Jr(v,this.children_.get(v)):null}getLastChildName(d){const v=this.resolveIndex_(d);if(v){const x=v.maxKey();return x&&x.name}return this.children_.maxKey()}getLastChild(d){const v=this.getLastChildName(d);return v?new Jr(v,this.children_.get(v)):null}forEachChild(d,v){const x=this.resolveIndex_(d);return x?x.inorderTraversal(H=>v(H.name,H.node)):this.children_.inorderTraversal(v)}getIterator(d){return this.getIteratorFrom(d.minPost(),d)}getIteratorFrom(d,v){const x=this.resolveIndex_(v);if(x)return x.getIteratorFrom(d,H=>H);{const H=this.children_.getIteratorFrom(d.name,Jr.Wrap);let te=H.peek();for(;null!=te&&v.compare(te,d)<0;)H.getNext(),te=H.peek();return H}}getReverseIterator(d){return this.getReverseIteratorFrom(d.maxPost(),d)}getReverseIteratorFrom(d,v){const x=this.resolveIndex_(v);if(x)return x.getReverseIteratorFrom(d,H=>H);{const H=this.children_.getReverseIteratorFrom(d.name,Jr.Wrap);let te=H.peek();for(;null!=te&&v.compare(te,d)>0;)H.getNext(),te=H.peek();return H}}compareTo(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===q?-1:0}withIndex(d){if(d===_s||this.indexMap_.hasIndex(d))return this;{const v=this.indexMap_.addIndex(d,this.children_);return new f(this.children_,this.priorityNode_,v)}}isIndexed(d){return d===_s||this.indexMap_.hasIndex(d)}equals(d){if(d===this)return!0;if(d.isLeafNode())return!1;{const v=d;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const x=this.getIterator(Ai),H=v.getIterator(Ai);let te=x.getNext(),Ie=H.getNext();for(;te&&Ie;){if(te.name!==Ie.name||!te.node.equals(Ie.node))return!1;te=x.getNext(),Ie=H.getNext()}return null===te&&null===Ie}return!1}return!1}}resolveIndex_(d){return d===_s?null:this.indexMap_.get(d.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const q=new class pe extends B{constructor(){super(new Li(Os),B.EMPTY_NODE,Hi.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return B.EMPTY_NODE}isEmpty(){return!1}};function qe(f,c=null){if(null===f)return B.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(c=f[".priority"]),(0,oe.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new ks(f,qe(c));if(f instanceof Array){let d=B.EMPTY_NODE;return yn(f,(v,x)=>{if((0,oe.r3)(f,v)&&"."!==v.substring(0,1)){const H=qe(x);(H.isLeafNode()||!H.isEmpty())&&(d=d.updateImmediateChild(v,H))}}),d.updatePriority(qe(c))}{const d=[];let v=!1;if(yn(f,(te,Ie)=>{if("."!==te.substring(0,1)){const Ye=qe(Ie);Ye.isEmpty()||(v=v||!Ye.getPriority().isEmpty(),d.push(new Jr(te,Ye)))}}),0===d.length)return B.EMPTY_NODE;const H=Hs(d,$s,te=>te.name,Os);if(v){const te=Hs(d,Ai.getCompare());return new B(H,qe(c),new Hi({".priority":te},{".priority":Ai}))}return new B(H,qe(c),Hi.Default)}}Object.defineProperties(Jr,{MIN:{value:new Jr(Je,B.EMPTY_NODE)},MAX:{value:new Jr(Ft,q)}}),Xo.__EMPTY_NODE=B.EMPTY_NODE,ks.__childrenNodeConstructor=B,function Ds(f){qs=f}(q),function Xs(f){Vo=f}(q),function vs(f){Fs=f}(qe);class nn extends ps{constructor(c){super(),this.indexPath_=c,(0,oe.hu)(!Zr(c)&&".priority"!==Ir(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,d){const v=this.extractChild(c.node),x=this.extractChild(d.node),H=v.compareTo(x);return 0===H?Dt(c.name,d.name):H}makePost(c,d){const v=qe(c),x=B.EMPTY_NODE.updateChild(this.indexPath_,v);return new Jr(d,x)}maxPost(){const c=B.EMPTY_NODE.updateChild(this.indexPath_,q);return new Jr(Ft,c)}toString(){return Fi(this.indexPath_,0).join("/")}}const pr=new class Sn extends ps{compare(c,d){const v=c.node.compareTo(d.node);return 0===v?Dt(c.name,d.name):v}isDefinedOn(c){return!0}indexedValueChanged(c,d){return!c.equals(d)}minPost(){return Jr.MIN}maxPost(){return Jr.MAX}makePost(c,d){const v=qe(c);return new Jr(d,v)}toString(){return".value"}};function jr(f){return{type:"value",snapshotNode:f}}function ei(f,c){return{type:"child_added",snapshotNode:c,childName:f}}function ti(f,c){return{type:"child_removed",snapshotNode:c,childName:f}}function fi(f,c,d){return{type:"child_changed",snapshotNode:c,childName:f,oldSnap:d}}class Ni{constructor(c){this.index_=c}updateChild(c,d,v,x,H,te){(0,oe.hu)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const Ie=c.getImmediateChild(d);return Ie.getChild(x).equals(v.getChild(x))&&Ie.isEmpty()===v.isEmpty()||(null!=te&&(v.isEmpty()?c.hasChild(d)?te.trackChildChange(ti(d,Ie)):(0,oe.hu)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Ie.isEmpty()?te.trackChildChange(ei(d,v)):te.trackChildChange(fi(d,v,Ie))),c.isLeafNode()&&v.isEmpty())?c:c.updateImmediateChild(d,v).withIndex(this.index_)}updateFullNode(c,d,v){return null!=v&&(c.isLeafNode()||c.forEachChild(Ai,(x,H)=>{d.hasChild(x)||v.trackChildChange(ti(x,H))}),d.isLeafNode()||d.forEachChild(Ai,(x,H)=>{if(c.hasChild(x)){const te=c.getImmediateChild(x);te.equals(H)||v.trackChildChange(fi(x,H,te))}else v.trackChildChange(ei(x,H))})),d.withIndex(this.index_)}updatePriority(c,d){return c.isEmpty()?B.EMPTY_NODE:c.updatePriority(d)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ki{constructor(c){this.indexedFilter_=new Ni(c.getIndex()),this.index_=c.getIndex(),this.startPost_=ki.getStartPost_(c),this.endPost_=ki.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const d=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,v=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return d&&v}updateChild(c,d,v,x,H,te){return this.matches(new Jr(d,v))||(v=B.EMPTY_NODE),this.indexedFilter_.updateChild(c,d,v,x,H,te)}updateFullNode(c,d,v){d.isLeafNode()&&(d=B.EMPTY_NODE);let x=d.withIndex(this.index_);x=x.updatePriority(B.EMPTY_NODE);const H=this;return d.forEachChild(Ai,(te,Ie)=>{H.matches(new Jr(te,Ie))||(x=x.updateImmediateChild(te,B.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,x,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const d=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),d)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const d=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),d)}return c.getIndex().maxPost()}}class Ks{constructor(c){this.withinDirectionalStart=d=>this.reverse_?this.withinEndPost(d):this.withinStartPost(d),this.withinDirectionalEnd=d=>this.reverse_?this.withinStartPost(d):this.withinEndPost(d),this.withinStartPost=d=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),d);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=d=>{const v=this.index_.compare(d,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new ki(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,d,v,x,H,te){return this.rangedFilter_.matches(new Jr(d,v))||(v=B.EMPTY_NODE),c.getImmediateChild(d).equals(v)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,d,v,x,H,te):this.fullLimitUpdateChild_(c,d,v,H,te)}updateFullNode(c,d,v){let x;if(d.isLeafNode()||d.isEmpty())x=B.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<d.numChildren()&&d.isIndexed(this.index_)){let H;x=B.EMPTY_NODE.withIndex(this.index_),H=this.reverse_?d.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let te=0;for(;H.hasNext()&&te<this.limit_;){const Ie=H.getNext();if(this.withinDirectionalStart(Ie)){if(!this.withinDirectionalEnd(Ie))break;x=x.updateImmediateChild(Ie.name,Ie.node),te++}}}else{let H;x=d.withIndex(this.index_),x=x.updatePriority(B.EMPTY_NODE),H=this.reverse_?x.getReverseIterator(this.index_):x.getIterator(this.index_);let te=0;for(;H.hasNext();){const Ie=H.getNext();te<this.limit_&&this.withinDirectionalStart(Ie)&&this.withinDirectionalEnd(Ie)?te++:x=x.updateImmediateChild(Ie.name,B.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,x,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,d,v,x,H){let te;if(this.reverse_){const Tn=this.index_.getCompare();te=(Rn,Er)=>Tn(Er,Rn)}else te=this.index_.getCompare();const Ie=c;(0,oe.hu)(Ie.numChildren()===this.limit_,"");const Ye=new Jr(d,v),lt=this.reverse_?Ie.getFirstChild(this.index_):Ie.getLastChild(this.index_),an=this.rangedFilter_.matches(Ye);if(Ie.hasChild(d)){const Tn=Ie.getImmediateChild(d);let Rn=x.getChildAfterChild(this.index_,lt,this.reverse_);for(;null!=Rn&&(Rn.name===d||Ie.hasChild(Rn.name));)Rn=x.getChildAfterChild(this.index_,Rn,this.reverse_);const Er=null==Rn?1:te(Rn,Ye);if(an&&!v.isEmpty()&&Er>=0)return null!=H&&H.trackChildChange(fi(d,v,Tn)),Ie.updateImmediateChild(d,v);{null!=H&&H.trackChildChange(ti(d,Tn));const xs=Ie.updateImmediateChild(d,B.EMPTY_NODE);return null!=Rn&&this.rangedFilter_.matches(Rn)?(null!=H&&H.trackChildChange(ei(Rn.name,Rn.node)),xs.updateImmediateChild(Rn.name,Rn.node)):xs}}return v.isEmpty()?c:an&&te(lt,Ye)>=0?(null!=H&&(H.trackChildChange(ti(lt.name,lt.node)),H.trackChildChange(ei(d,v))),Ie.updateImmediateChild(d,v).updateImmediateChild(lt.name,B.EMPTY_NODE)):c}}class ns{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ai}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,oe.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,oe.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Je}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,oe.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,oe.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ft}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,oe.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ai}copy(){const c=new ns;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function ye(f){const c={};if(f.isDefault())return c;let d;if(f.index_===Ai?d="$priority":f.index_===pr?d="$value":f.index_===_s?d="$key":((0,oe.hu)(f.index_ instanceof nn,"Unrecognized index type!"),d=f.index_.toString()),c.orderBy=(0,oe.Wl)(d),f.startSet_){const v=f.startAfterSet_?"startAfter":"startAt";c[v]=(0,oe.Wl)(f.indexStartValue_),f.startNameSet_&&(c[v]+=","+(0,oe.Wl)(f.indexStartName_))}if(f.endSet_){const v=f.endBeforeSet_?"endBefore":"endAt";c[v]=(0,oe.Wl)(f.indexEndValue_),f.endNameSet_&&(c[v]+=","+(0,oe.Wl)(f.indexEndName_))}return f.limitSet_&&(f.isViewFromLeft()?c.limitToFirst=f.limit_:c.limitToLast=f.limit_),c}function Qe(f){const c={};if(f.startSet_&&(c.sp=f.indexStartValue_,f.startNameSet_&&(c.sn=f.indexStartName_),c.sin=!f.startAfterSet_),f.endSet_&&(c.ep=f.indexEndValue_,f.endNameSet_&&(c.en=f.indexEndName_),c.ein=!f.endBeforeSet_),f.limitSet_){c.l=f.limit_;let d=f.viewFrom_;""===d&&(d=f.isViewFromLeft()?"l":"r"),c.vf=d}return f.index_!==Ai&&(c.i=f.index_.toString()),c}class Nn extends Ii{constructor(c,d,v,x){super(),this.repoInfo_=c,this.onDataUpdate_=d,this.authTokenProvider_=v,this.appCheckTokenProvider_=x,this.log_=wt("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,d){return void 0!==d?"tag$"+d:((0,oe.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,d,v,x){const H=c._path.toString();this.log_("Listen called for "+H+" "+c._queryIdentifier);const te=Nn.getListenId_(c,v),Ie={};this.listens_[te]=Ie;const Ye=ye(c._queryParams);this.restRequest_(H+".json",Ye,(lt,an)=>{let Tn=an;if(404===lt&&(Tn=null,lt=null),null===lt&&this.onDataUpdate_(H,Tn,!1,v),(0,oe.DV)(this.listens_,te)===Ie){let Rn;Rn=lt?401===lt?"permission_denied":"rest_error:"+lt:"ok",x(Rn,null)}})}unlisten(c,d){const v=Nn.getListenId_(c,d);delete this.listens_[v]}get(c){const d=ye(c._queryParams),v=c._path.toString(),x=new oe.BH;return this.restRequest_(v+".json",d,(H,te)=>{let Ie=te;404===H&&(Ie=null,H=null),null===H?(this.onDataUpdate_(v,Ie,!1,null),x.resolve(Ie)):x.reject(new Error(Ie))}),x.promise}refreshAuthToken(c){}restRequest_(c,d={},v){return d.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([x,H])=>{x&&x.accessToken&&(d.auth=x.accessToken),H&&H.token&&(d.ac=H.token);const te=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,oe.xO)(d);this.log_("Sending REST request for "+te);const Ie=new XMLHttpRequest;Ie.onreadystatechange=()=>{if(v&&4===Ie.readyState){this.log_("REST Response for "+te+" received. status:",Ie.status,"response:",Ie.responseText);let Ye=null;if(Ie.status>=200&&Ie.status<300){try{Ye=(0,oe.cI)(Ie.responseText)}catch(lt){Oe("Failed to parse JSON response for "+te+": "+Ie.responseText)}v(null,Ye)}else 401!==Ie.status&&404!==Ie.status&&Oe("Got unsuccessful REST response for "+te+" Status: "+Ie.status),v(Ie.status);v=null}},Ie.open("GET",te,!0),Ie.send()})}}class ee{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,d){this.rootNode_=this.rootNode_.updateChild(c,d)}}function K(){return{value:null,children:new Map}}function be(f,c,d){if(Zr(c))f.value=d,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(c,d);else{const v=Ir(c);f.children.has(v)||f.children.set(v,K()),be(f.children.get(v),c=Vr(c),d)}}function rt(f,c,d){null!==f.value?d(c,f.value):function Kt(f,c){f.children.forEach((d,v)=>{c(v,d)})}(f,(v,x)=>{rt(x,new $r(c.toString()+"/"+v),d)})}class xn{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),d=Object.assign({},c);return this.last_&&yn(this.last_,(v,x)=>{d[v]=d[v]-x}),this.last_=c,d}}class _i{constructor(c,d){this.server_=d,this.statsToReport_={},this.statsListener_=new xn(c);const v=1e4+2e4*Math.random();Wn(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const c=this.statsListener_.get(),d={};let v=!1;yn(c,(x,H)=>{H>0&&(0,oe.r3)(this.statsToReport_,x)&&(d[x]=H,v=!0)}),v&&this.server_.reportStats(d),Wn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var pi=(()=>{return(f=pi||(pi={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",pi;var f})();function l(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class A{constructor(c,d,v){this.path=c,this.affectedTree=d,this.revert=v,this.type=pi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(Zr(this.path)){if(null!=this.affectedTree.value)return(0,oe.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const d=this.affectedTree.subtree(new $r(c));return new A(wr(),d,this.revert)}}return(0,oe.hu)(Ir(this.path)===c,"operationForChild called for unrelated child."),new A(Vr(this.path),this.affectedTree,this.revert)}}class I{constructor(c,d){this.source=c,this.path=d,this.type=pi.LISTEN_COMPLETE}operationForChild(c){return Zr(this.path)?new I(this.source,wr()):new I(this.source,Vr(this.path))}}class P{constructor(c,d,v){this.source=c,this.path=d,this.snap=v,this.type=pi.OVERWRITE}operationForChild(c){return Zr(this.path)?new P(this.source,wr(),this.snap.getImmediateChild(c)):new P(this.source,Vr(this.path),this.snap)}}class z{constructor(c,d,v){this.source=c,this.path=d,this.children=v,this.type=pi.MERGE}operationForChild(c){if(Zr(this.path)){const d=this.children.subtree(new $r(c));return d.isEmpty()?null:d.value?new P(this.source,wr(),d.value):new z(this.source,wr(),d)}return(0,oe.hu)(Ir(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new z(this.source,Vr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class J{constructor(c,d,v){this.node_=c,this.fullyInitialized_=d,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(Zr(c))return this.isFullyInitialized()&&!this.filtered_;const d=Ir(c);return this.isCompleteForChild(d)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class ge{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function ae(f,c,d,v,x,H){const te=v.filter(Ie=>Ie.type===d);te.sort((Ie,Ye)=>function ce(f,c,d){if(null==c.childName||null==d.childName)throw(0,oe.g5)("Should only compare child_ events.");const v=new Jr(c.childName,c.snapshotNode),x=new Jr(d.childName,d.snapshotNode);return f.index_.compare(v,x)}(f,Ie,Ye)),te.forEach(Ie=>{const Ye=function me(f,c,d){return"value"===c.type||"child_removed"===c.type||(c.prevName=d.getPredecessorChildName(c.childName,c.snapshotNode,f.index_)),c}(f,Ie,H);x.forEach(lt=>{lt.respondsTo(Ie.type)&&c.push(lt.createEvent(Ye,f.query_))})})}function ue(f,c){return{eventCache:f,serverCache:c}}function Te(f,c,d,v){return ue(new J(c,d,v),f.serverCache)}function ze(f,c,d,v){return ue(f.eventCache,new J(c,d,v))}function tt(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function De(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let Fe;class et{constructor(c,d=(()=>(Fe||(Fe=new Li(Lt)),Fe))()){this.value=c,this.children=d}static fromObject(c){let d=new et(null);return yn(c,(v,x)=>{d=d.set(new $r(v),x)}),d}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,d){if(null!=this.value&&d(this.value))return{path:wr(),value:this.value};if(Zr(c))return null;{const v=Ir(c),x=this.children.get(v);if(null!==x){const H=x.findRootMostMatchingPathAndValue(Vr(c),d);return null!=H?{path:si(new $r(v),H.path),value:H.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(Zr(c))return this;{const d=Ir(c),v=this.children.get(d);return null!==v?v.subtree(Vr(c)):new et(null)}}set(c,d){if(Zr(c))return new et(d,this.children);{const v=Ir(c),H=(this.children.get(v)||new et(null)).set(Vr(c),d),te=this.children.insert(v,H);return new et(this.value,te)}}remove(c){if(Zr(c))return this.children.isEmpty()?new et(null):new et(null,this.children);{const d=Ir(c),v=this.children.get(d);if(v){const x=v.remove(Vr(c));let H;return H=x.isEmpty()?this.children.remove(d):this.children.insert(d,x),null===this.value&&H.isEmpty()?new et(null):new et(this.value,H)}return this}}get(c){if(Zr(c))return this.value;{const d=Ir(c),v=this.children.get(d);return v?v.get(Vr(c)):null}}setTree(c,d){if(Zr(c))return d;{const v=Ir(c),H=(this.children.get(v)||new et(null)).setTree(Vr(c),d);let te;return te=H.isEmpty()?this.children.remove(v):this.children.insert(v,H),new et(this.value,te)}}fold(c){return this.fold_(wr(),c)}fold_(c,d){const v={};return this.children.inorderTraversal((x,H)=>{v[x]=H.fold_(si(c,x),d)}),d(c,this.value,v)}findOnPath(c,d){return this.findOnPath_(c,wr(),d)}findOnPath_(c,d,v){const x=!!this.value&&v(d,this.value);if(x)return x;if(Zr(c))return null;{const H=Ir(c),te=this.children.get(H);return te?te.findOnPath_(Vr(c),si(d,H),v):null}}foreachOnPath(c,d){return this.foreachOnPath_(c,wr(),d)}foreachOnPath_(c,d,v){if(Zr(c))return this;{this.value&&v(d,this.value);const x=Ir(c),H=this.children.get(x);return H?H.foreachOnPath_(Vr(c),si(d,x),v):new et(null)}}foreach(c){this.foreach_(wr(),c)}foreach_(c,d){this.children.inorderTraversal((v,x)=>{x.foreach_(si(c,v),d)}),this.value&&d(c,this.value)}foreachChild(c){this.children.inorderTraversal((d,v)=>{v.value&&c(d,v.value)})}}class mt{constructor(c){this.writeTree_=c}static empty(){return new mt(new et(null))}}function En(f,c,d){if(Zr(c))return new mt(new et(d));{const v=f.writeTree_.findRootMostValueAndPath(c);if(null!=v){const x=v.path;let H=v.value;const te=ji(x,c);return H=H.updateChild(te,d),new mt(f.writeTree_.set(x,H))}{const x=new et(d),H=f.writeTree_.setTree(c,x);return new mt(H)}}}function An(f,c,d){let v=f;return yn(d,(x,H)=>{v=En(v,si(c,x),H)}),v}function mn(f,c){if(Zr(c))return mt.empty();{const d=f.writeTree_.setTree(c,new et(null));return new mt(d)}}function Mn(f,c){return null!=nr(f,c)}function nr(f,c){const d=f.writeTree_.findRootMostValueAndPath(c);return null!=d?f.writeTree_.get(d.path).getChild(ji(d.path,c)):null}function vr(f){const c=[],d=f.writeTree_.value;return null!=d?d.isLeafNode()||d.forEachChild(Ai,(v,x)=>{c.push(new Jr(v,x))}):f.writeTree_.children.inorderTraversal((v,x)=>{null!=x.value&&c.push(new Jr(v,x.value))}),c}function Ln(f,c){if(Zr(c))return f;{const d=nr(f,c);return new mt(null!=d?new et(d):f.writeTree_.subtree(c))}}function rn(f){return f.writeTree_.isEmpty()}function Rt(f,c){return hn(wr(),f.writeTree_,c)}function hn(f,c,d){if(null!=c.value)return d.updateChild(f,c.value);{let v=null;return c.children.inorderTraversal((x,H)=>{".priority"===x?((0,oe.hu)(null!==H.value,"Priority writes must always be leaf nodes"),v=H.value):d=hn(si(f,x),H,d)}),!d.getChild(f).isEmpty()&&null!==v&&(d=d.updateChild(si(f,".priority"),v)),d}}function cr(f,c){return mi(c,f)}function gi(f,c){if(f.snap)return Pi(f.path,c);for(const d in f.children)if(f.children.hasOwnProperty(d)&&Pi(si(f.path,d),c))return!0;return!1}function Zs(f){return f.visible}function ia(f,c,d){let v=mt.empty();for(let x=0;x<f.length;++x){const H=f[x];if(c(H)){const te=H.path;let Ie;if(H.snap)Pi(d,te)?(Ie=ji(d,te),v=En(v,Ie,H.snap)):Pi(te,d)&&(Ie=ji(te,d),v=En(v,wr(),H.snap.getChild(Ie)));else{if(!H.children)throw(0,oe.g5)("WriteRecord should have .snap or .children");if(Pi(d,te))Ie=ji(d,te),v=An(v,Ie,H.children);else if(Pi(te,d))if(Ie=ji(te,d),Zr(Ie))v=An(v,wr(),H.children);else{const Ye=(0,oe.DV)(H.children,Ir(Ie));if(Ye){const lt=Ye.getChild(Vr(Ie));v=En(v,wr(),lt)}}}}}return v}function po(f,c,d,v,x){if(v||x){const H=Ln(f.visibleWrites,c);return!x&&rn(H)?d:x||null!=d||Mn(H,wr())?Rt(ia(f.allWrites,function(lt){return(lt.visible||x)&&(!v||!~v.indexOf(lt.writeId))&&(Pi(lt.path,c)||Pi(c,lt.path))},c),d||B.EMPTY_NODE):null}{const H=nr(f.visibleWrites,c);if(null!=H)return H;{const te=Ln(f.visibleWrites,c);return rn(te)?d:null!=d||Mn(te,wr())?Rt(te,d||B.EMPTY_NODE):null}}}function Ze(f,c,d,v){return po(f.writeTree,f.treePath,c,d,v)}function Ke(f,c){return function Z(f,c,d){let v=B.EMPTY_NODE;const x=nr(f.visibleWrites,c);if(x)return x.isLeafNode()||x.forEachChild(Ai,(H,te)=>{v=v.updateImmediateChild(H,te)}),v;if(d){const H=Ln(f.visibleWrites,c);return d.forEachChild(Ai,(te,Ie)=>{const Ye=Rt(Ln(H,new $r(te)),Ie);v=v.updateImmediateChild(te,Ye)}),vr(H).forEach(te=>{v=v.updateImmediateChild(te.name,te.node)}),v}return vr(Ln(f.visibleWrites,c)).forEach(te=>{v=v.updateImmediateChild(te.name,te.node)}),v}(f.writeTree,f.treePath,c)}function Tt(f,c,d,v){return function C(f,c,d,v,x){(0,oe.hu)(v||x,"Either existingEventSnap or existingServerSnap must exist");const H=si(c,d);if(Mn(f.visibleWrites,H))return null;{const te=Ln(f.visibleWrites,H);return rn(te)?x.getChild(d):Rt(te,x.getChild(d))}}(f.writeTree,f.treePath,c,d,v)}function fn(f,c){return function F(f,c){return nr(f.visibleWrites,c)}(f.writeTree,si(f.treePath,c))}function rr(f,c,d){return function T(f,c,d,v){const x=si(c,d),H=nr(f.visibleWrites,x);return null!=H?H:v.isCompleteForChild(d)?Rt(Ln(f.visibleWrites,x),v.getNode().getImmediateChild(d)):null}(f.writeTree,f.treePath,c,d)}function Cr(f,c){return mi(si(f.treePath,c),f.writeTree)}function mi(f,c){return{treePath:f,writeTree:c}}class In{constructor(){this.changeMap=new Map}trackChildChange(c){const d=c.type,v=c.childName;(0,oe.hu)("child_added"===d||"child_changed"===d||"child_removed"===d,"Only child changes supported for tracking"),(0,oe.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const x=this.changeMap.get(v);if(x){const H=x.type;if("child_added"===d&&"child_removed"===H)this.changeMap.set(v,fi(v,c.snapshotNode,x.snapshotNode));else if("child_removed"===d&&"child_added"===H)this.changeMap.delete(v);else if("child_removed"===d&&"child_changed"===H)this.changeMap.set(v,ti(v,x.oldSnap));else if("child_changed"===d&&"child_added"===H)this.changeMap.set(v,ei(v,c.snapshotNode));else{if("child_changed"!==d||"child_changed"!==H)throw(0,oe.g5)("Illegal combination of changes: "+c+" occurred after "+x);this.changeMap.set(v,fi(v,c.snapshotNode,x.oldSnap))}}else this.changeMap.set(v,c)}getChanges(){return Array.from(this.changeMap.values())}}const cs=new class Bn{getCompleteChild(c){return null}getChildAfterChild(c,d,v){return null}};class Gn{constructor(c,d,v=null){this.writes_=c,this.viewCache_=d,this.optCompleteServerCache_=v}getCompleteChild(c){const d=this.viewCache_.eventCache;if(d.isCompleteForChild(c))return d.getNode().getImmediateChild(c);{const v=null!=this.optCompleteServerCache_?new J(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rr(this.writes_,c,v)}}getChildAfterChild(c,d,v){const x=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:De(this.viewCache_),H=function Pt(f,c,d,v,x,H){return function le(f,c,d,v,x,H,te){let Ie;const Ye=Ln(f.visibleWrites,c),lt=nr(Ye,wr());if(null!=lt)Ie=lt;else{if(null==d)return[];Ie=Rt(Ye,d)}if(Ie=Ie.withIndex(te),Ie.isEmpty()||Ie.isLeafNode())return[];{const an=[],Tn=te.getCompare(),Rn=H?Ie.getReverseIteratorFrom(v,te):Ie.getIteratorFrom(v,te);let Er=Rn.getNext();for(;Er&&an.length<x;)0!==Tn(Er,v)&&an.push(Er),Er=Rn.getNext();return an}}(f.writeTree,f.treePath,c,d,v,x,H)}(this.writes_,x,d,1,v,c);return 0===H.length?null:H[0]}}function Uo(f,c,d,v,x,H){const te=c.eventCache;if(null!=fn(v,d))return c;{let Ie,Ye;if(Zr(d))if((0,oe.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const lt=De(c),Tn=Ke(v,lt instanceof B?lt:B.EMPTY_NODE);Ie=f.filter.updateFullNode(c.eventCache.getNode(),Tn,H)}else{const lt=Ze(v,De(c));Ie=f.filter.updateFullNode(c.eventCache.getNode(),lt,H)}else{const lt=Ir(d);if(".priority"===lt){(0,oe.hu)(1===ts(d),"Can't have a priority with additional path components");const an=te.getNode();Ye=c.serverCache.getNode();const Tn=Tt(v,d,an,Ye);Ie=null!=Tn?f.filter.updatePriority(an,Tn):te.getNode()}else{const an=Vr(d);let Tn;if(te.isCompleteForChild(lt)){Ye=c.serverCache.getNode();const Rn=Tt(v,d,te.getNode(),Ye);Tn=null!=Rn?te.getNode().getImmediateChild(lt).updateChild(an,Rn):te.getNode().getImmediateChild(lt)}else Tn=rr(v,lt,c.serverCache);Ie=null!=Tn?f.filter.updateChild(te.getNode(),lt,Tn,an,x,H):te.getNode()}}return Te(c,Ie,te.isFullyInitialized()||Zr(d),f.filter.filtersNodes())}}function O(f,c,d,v,x,H,te,Ie){const Ye=c.serverCache;let lt;const an=te?f.filter:f.filter.getIndexedFilter();if(Zr(d))lt=an.updateFullNode(Ye.getNode(),v,null);else if(an.filtersNodes()&&!Ye.isFiltered()){const Er=Ye.getNode().updateChild(d,v);lt=an.updateFullNode(Ye.getNode(),Er,null)}else{const Er=Ir(d);if(!Ye.isCompleteForPath(d)&&ts(d)>1)return c;const ui=Vr(d),ca=Ye.getNode().getImmediateChild(Er).updateChild(ui,v);lt=".priority"===Er?an.updatePriority(Ye.getNode(),ca):an.updateChild(Ye.getNode(),Er,ca,ui,cs,null)}const Tn=ze(c,lt,Ye.isFullyInitialized()||Zr(d),an.filtersNodes());return Uo(f,Tn,d,x,new Gn(x,Tn,H),Ie)}function M(f,c,d,v,x,H,te){const Ie=c.eventCache;let Ye,lt;const an=new Gn(x,c,H);if(Zr(d))lt=f.filter.updateFullNode(c.eventCache.getNode(),v,te),Ye=Te(c,lt,!0,f.filter.filtersNodes());else{const Tn=Ir(d);if(".priority"===Tn)lt=f.filter.updatePriority(c.eventCache.getNode(),v),Ye=Te(c,lt,Ie.isFullyInitialized(),Ie.isFiltered());else{const Rn=Vr(d),Er=Ie.getNode().getImmediateChild(Tn);let ui;if(Zr(Rn))ui=v;else{const xs=an.getCompleteChild(Tn);ui=null!=xs?".priority"===bi(Rn)&&xs.getChild(fs(Rn)).isEmpty()?xs:xs.updateChild(Rn,v):B.EMPTY_NODE}Ye=Er.equals(ui)?c:Te(c,f.filter.updateChild(Ie.getNode(),Tn,ui,Rn,an,te),Ie.isFullyInitialized(),f.filter.filtersNodes())}}return Ye}function S(f,c){return f.eventCache.isCompleteForChild(c)}function ne(f,c,d){return d.foreach((v,x)=>{c=c.updateChild(v,x)}),c}function _e(f,c,d,v,x,H,te,Ie){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let lt,Ye=c;lt=Zr(d)?v:new et(null).setTree(d,v);const an=c.serverCache.getNode();return lt.children.inorderTraversal((Tn,Rn)=>{if(an.hasChild(Tn)){const ui=ne(0,c.serverCache.getNode().getImmediateChild(Tn),Rn);Ye=O(f,Ye,new $r(Tn),ui,x,H,te,Ie)}}),lt.children.inorderTraversal((Tn,Rn)=>{const Er=!c.serverCache.isCompleteForChild(Tn)&&null===Rn.value;if(!an.hasChild(Tn)&&!Er){const xs=ne(0,c.serverCache.getNode().getImmediateChild(Tn),Rn);Ye=O(f,Ye,new $r(Tn),xs,x,H,te,Ie)}}),Ye}class kt{constructor(c,d){this.query_=c,this.eventRegistrations_=[];const v=this.query_._queryParams,x=new Ni(v.getIndex()),H=function Wr(f){return f.loadsAllData()?new Ni(f.getIndex()):f.hasLimit()?new Ks(f):new ki(f)}(v);this.processor_=function jt(f){return{filter:f}}(H);const te=d.serverCache,Ie=d.eventCache,Ye=x.updateFullNode(B.EMPTY_NODE,te.getNode(),null),lt=H.updateFullNode(B.EMPTY_NODE,Ie.getNode(),null),an=new J(Ye,te.isFullyInitialized(),x.filtersNodes()),Tn=new J(lt,Ie.isFullyInitialized(),H.filtersNodes());this.viewCache_=ue(Tn,an),this.eventGenerator_=new ge(this.query_)}get query(){return this.query_}}function ar(f,c){const d=De(f.viewCache_);return d&&(f.query._queryParams.loadsAllData()||!Zr(c)&&!d.getImmediateChild(Ir(c)).isEmpty())?d.getChild(c):null}function Vn(f){return 0===f.eventRegistrations_.length}function Pr(f,c,d){const v=[];if(d){(0,oe.hu)(null==c,"A cancel should cancel all event registrations.");const x=f.query._path;f.eventRegistrations_.forEach(H=>{const te=H.createCancelEvent(d,x);te&&v.push(te)})}if(c){let x=[];for(let H=0;H<f.eventRegistrations_.length;++H){const te=f.eventRegistrations_[H];if(te.matches(c)){if(c.hasAnyCallback()){x=x.concat(f.eventRegistrations_.slice(H+1));break}}else x.push(te)}f.eventRegistrations_=x}else f.eventRegistrations_=[];return v}function Do(f,c,d,v){c.type===pi.MERGE&&null!==c.source.queryId&&((0,oe.hu)(De(f.viewCache_),"We should always have a full cache before handling merges"),(0,oe.hu)(tt(f.viewCache_),"Missing event cache, even though we have a server cache"));const x=f.viewCache_,H=function Qi(f,c,d,v,x){const H=new In;let te,Ie;if(d.type===pi.OVERWRITE){const lt=d;lt.source.fromUser?te=M(f,c,lt.path,lt.snap,v,x,H):((0,oe.hu)(lt.source.fromServer,"Unknown source."),Ie=lt.source.tagged||c.serverCache.isFiltered()&&!Zr(lt.path),te=O(f,c,lt.path,lt.snap,v,x,Ie,H))}else if(d.type===pi.MERGE){const lt=d;lt.source.fromUser?te=function W(f,c,d,v,x,H,te){let Ie=c;return v.foreach((Ye,lt)=>{const an=si(d,Ye);S(c,Ir(an))&&(Ie=M(f,Ie,an,lt,x,H,te))}),v.foreach((Ye,lt)=>{const an=si(d,Ye);S(c,Ir(an))||(Ie=M(f,Ie,an,lt,x,H,te))}),Ie}(f,c,lt.path,lt.children,v,x,H):((0,oe.hu)(lt.source.fromServer,"Unknown source."),Ie=lt.source.tagged||c.serverCache.isFiltered(),te=_e(f,c,lt.path,lt.children,v,x,Ie,H))}else if(d.type===pi.ACK_USER_WRITE){const lt=d;te=lt.revert?function pn(f,c,d,v,x,H){let te;if(null!=fn(v,d))return c;{const Ie=new Gn(v,c,x),Ye=c.eventCache.getNode();let lt;if(Zr(d)||".priority"===Ir(d)){let an;if(c.serverCache.isFullyInitialized())an=Ze(v,De(c));else{const Tn=c.serverCache.getNode();(0,oe.hu)(Tn instanceof B,"serverChildren would be complete if leaf node"),an=Ke(v,Tn)}lt=f.filter.updateFullNode(Ye,an,H)}else{const an=Ir(d);let Tn=rr(v,an,c.serverCache);null==Tn&&c.serverCache.isCompleteForChild(an)&&(Tn=Ye.getImmediateChild(an)),lt=null!=Tn?f.filter.updateChild(Ye,an,Tn,Vr(d),Ie,H):c.eventCache.getNode().hasChild(an)?f.filter.updateChild(Ye,an,B.EMPTY_NODE,Vr(d),Ie,H):Ye,lt.isEmpty()&&c.serverCache.isFullyInitialized()&&(te=Ze(v,De(c)),te.isLeafNode()&&(lt=f.filter.updateFullNode(lt,te,H)))}return te=c.serverCache.isFullyInitialized()||null!=fn(v,wr()),Te(c,lt,te,f.filter.filtersNodes())}}(f,c,lt.path,v,x,H):function Ve(f,c,d,v,x,H,te){if(null!=fn(x,d))return c;const Ie=c.serverCache.isFiltered(),Ye=c.serverCache;if(null!=v.value){if(Zr(d)&&Ye.isFullyInitialized()||Ye.isCompleteForPath(d))return O(f,c,d,Ye.getNode().getChild(d),x,H,Ie,te);if(Zr(d)){let lt=new et(null);return Ye.getNode().forEachChild(_s,(an,Tn)=>{lt=lt.set(new $r(an),Tn)}),_e(f,c,d,lt,x,H,Ie,te)}return c}{let lt=new et(null);return v.foreach((an,Tn)=>{const Rn=si(d,an);Ye.isCompleteForPath(Rn)&&(lt=lt.set(an,Ye.getNode().getChild(Rn)))}),_e(f,c,d,lt,x,H,Ie,te)}}(f,c,lt.path,lt.affectedTree,v,x,H)}else{if(d.type!==pi.LISTEN_COMPLETE)throw(0,oe.g5)("Unknown operation type: "+d.type);te=function ot(f,c,d,v,x){const H=c.serverCache;return Uo(f,ze(c,H.getNode(),H.isFullyInitialized()||Zr(d),H.isFiltered()),d,v,cs,x)}(f,c,d.path,v,H)}const Ye=H.getChanges();return function bo(f,c,d){const v=c.eventCache;if(v.isFullyInitialized()){const x=v.getNode().isLeafNode()||v.getNode().isEmpty(),H=tt(f);(d.length>0||!f.eventCache.isFullyInitialized()||x&&!v.getNode().equals(H)||!v.getNode().getPriority().equals(H.getPriority()))&&d.push(jr(tt(c)))}}(c,te,Ye),{viewCache:te,changes:Ye}}(f.processor_,x,c,d,v);return function Cn(f,c){(0,oe.hu)(c.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,oe.hu)(c.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,H.viewCache),(0,oe.hu)(H.viewCache.serverCache.isFullyInitialized()||!x.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=H.viewCache,ir(f,H.changes,H.viewCache.eventCache.getNode(),null)}function ir(f,c,d,v){return function we(f,c,d,v){const x=[],H=[];return c.forEach(te=>{"child_changed"===te.type&&f.index_.indexedValueChanged(te.oldSnap,te.snapshotNode)&&H.push(function Ji(f,c){return{type:"child_moved",snapshotNode:c,childName:f}}(te.childName,te.snapshotNode))}),ae(f,x,"child_removed",c,v,d),ae(f,x,"child_added",c,v,d),ae(f,x,"child_moved",H,v,d),ae(f,x,"child_changed",c,v,d),ae(f,x,"value",c,v,d),x}(f.eventGenerator_,c,d,v?[v]:f.eventRegistrations_)}let Oo,Xt;class Ys{constructor(){this.views=new Map}}function va(f,c,d,v){const x=c.source.queryId;if(null!==x){const H=f.views.get(x);return(0,oe.hu)(null!=H,"SyncTree gave us an op for an invalid query."),Do(H,c,d,v)}{let H=[];for(const te of f.views.values())H=H.concat(Do(te,c,d,v));return H}}function yu(f,c,d,v,x,H){const te=function Ll(f,c,d,v,x){const te=f.views.get(c._queryIdentifier);if(!te){let Ie=Ze(d,x?v:null),Ye=!1;Ie?Ye=!0:v instanceof B?(Ie=Ke(d,v),Ye=!1):(Ie=B.EMPTY_NODE,Ye=!1);const lt=ue(new J(Ie,Ye,!1),new J(v,x,!1));return new kt(c,lt)}return te}(f,c,v,x,H);return f.views.has(c._queryIdentifier)||f.views.set(c._queryIdentifier,te),function Ls(f,c){f.eventRegistrations_.push(c)}(te,d),function yi(f,c){const d=f.viewCache_.eventCache,v=[];return d.getNode().isLeafNode()||d.getNode().forEachChild(Ai,(H,te)=>{v.push(ei(H,te))}),d.isFullyInitialized()&&v.push(jr(d.getNode())),ir(f,v,d.getNode(),c)}(te,d)}function sa(f){const c=[];for(const d of f.views.values())d.query._queryParams.loadsAllData()||c.push(d);return c}function Ta(f,c){let d=null;for(const v of f.views.values())d=d||ar(v,c);return d}function Ic(f,c){return c._queryParams.loadsAllData()?Xl(f):f.views.get(c._queryIdentifier)}function Sc(f,c){return null!=Ic(f,c)}function oa(f){return null!=Xl(f)}function Xl(f){for(const c of f.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let To=1;class Ia{constructor(c){this.listenProvider_=c,this.syncPointTree_=new et(null),this.pendingWriteTree_=function Ce(){return{visibleWrites:mt.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function aa(f,c,d,v,x){return function ur(f,c,d,v,x){(0,oe.hu)(v>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===x&&(x=!0),f.allWrites.push({path:c,snap:d,writeId:v,visible:x}),x&&(f.visibleWrites=En(f.visibleWrites,c,d)),f.lastWriteId=v}(f.pendingWriteTree_,c,d,v,x),x?ha(f,new P({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,d)):[]}function la(f,c,d=!1){const v=function hr(f,c){for(let d=0;d<f.allWrites.length;d++){const v=f.allWrites[d];if(v.writeId===c)return v}return null}(f.pendingWriteTree_,c);if(function tr(f,c){const d=f.allWrites.findIndex(Ie=>Ie.writeId===c);(0,oe.hu)(d>=0,"removeWrite called with nonexistent writeId.");const v=f.allWrites[d];f.allWrites.splice(d,1);let x=v.visible,H=!1,te=f.allWrites.length-1;for(;x&&te>=0;){const Ie=f.allWrites[te];Ie.visible&&(te>=d&&gi(Ie,v.path)?x=!1:Pi(v.path,Ie.path)&&(H=!0)),te--}return!!x&&(H?(function xi(f){f.visibleWrites=ia(f.allWrites,Zs,wr()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(v.snap?f.visibleWrites=mn(f.visibleWrites,v.path):yn(v.children,Ye=>{f.visibleWrites=mn(f.visibleWrites,si(v.path,Ye))}),!0))}(f.pendingWriteTree_,c)){let H=new et(null);return null!=v.snap?H=H.set(wr(),!0):yn(v.children,te=>{H=H.set(new $r(te),!0)}),ha(f,new A(v.path,H,d))}return[]}function Ao(f,c,d){return ha(f,new P({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,d))}function go(f,c,d,v,x=!1){const H=c._path,te=f.syncPointTree_.get(H);let Ie=[];if(te&&("default"===c._queryIdentifier||Sc(te,c))){const Ye=function uo(f,c,d,v){const x=c._queryIdentifier,H=[];let te=[];const Ie=oa(f);if("default"===x)for(const[Ye,lt]of f.views.entries())te=te.concat(Pr(lt,d,v)),Vn(lt)&&(f.views.delete(Ye),lt.query._queryParams.loadsAllData()||H.push(lt.query));else{const Ye=f.views.get(x);Ye&&(te=te.concat(Pr(Ye,d,v)),Vn(Ye)&&(f.views.delete(x),Ye.query._queryParams.loadsAllData()||H.push(Ye.query)))}return Ie&&!oa(f)&&H.push(new(function Ho(){return(0,oe.hu)(Oo,"Reference.ts has not been loaded"),Oo}())(c._repo,c._path)),{removed:H,events:te}}(te,c,d,v);(function da(f){return 0===f.views.size})(te)&&(f.syncPointTree_=f.syncPointTree_.remove(H));const lt=Ye.removed;if(Ie=Ye.events,!x){const an=-1!==lt.findIndex(Rn=>Rn._queryParams.loadsAllData()),Tn=f.syncPointTree_.findOnPath(H,(Rn,Er)=>oa(Er));if(an&&!Tn){const Rn=f.syncPointTree_.subtree(H);if(!Rn.isEmpty()){const Er=function Vl(f){return f.fold((c,d,v)=>{if(d&&oa(d))return[Xl(d)];{let x=[];return d&&(x=sa(d)),yn(v,(H,te)=>{x=x.concat(te)}),x}})}(Rn);for(let ui=0;ui<Er.length;++ui){const xs=Er[ui],ca=xs.query,Fu=ja(f,xs);f.listenProvider_.startListening(tl(ca),oo(f,ca),Fu.hashFn,Fu.onComplete)}}}!Tn&&lt.length>0&&!v&&(an?f.listenProvider_.stopListening(tl(c),null):lt.forEach(Rn=>{const Er=f.queryToTagMap.get(Ha(Rn));f.listenProvider_.stopListening(tl(Rn),Er)}))}!function Sa(f,c){for(let d=0;d<c.length;++d){const v=c[d];if(!v._queryParams.loadsAllData()){const x=Ha(v),H=f.queryToTagMap.get(x);f.queryToTagMap.delete(x),f.tagToQueryMap.delete(H)}}}(f,lt)}return Ie}function Dl(f,c,d,v=!1){const x=c._path;let H=null,te=!1;f.syncPointTree_.foreachOnPath(x,(Rn,Er)=>{const ui=ji(Rn,x);H=H||Ta(Er,ui),te=te||oa(Er)});let Ye,Ie=f.syncPointTree_.get(x);Ie?(te=te||oa(Ie),H=H||Ta(Ie,wr())):(Ie=new Ys,f.syncPointTree_=f.syncPointTree_.set(x,Ie)),null!=H?Ye=!0:(Ye=!1,H=B.EMPTY_NODE,f.syncPointTree_.subtree(x).foreachChild((Er,ui)=>{const xs=Ta(ui,wr());xs&&(H=H.updateImmediateChild(Er,xs))}));const lt=Sc(Ie,c);if(!lt&&!c._queryParams.loadsAllData()){const Rn=Ha(c);(0,oe.hu)(!f.queryToTagMap.has(Rn),"View does not exist, but we have a tag");const Er=function ta(){return To++}();f.queryToTagMap.set(Rn,Er),f.tagToQueryMap.set(Er,Rn)}let Tn=yu(Ie,c,d,cr(f.pendingWriteTree_,x),H,Ye);if(!lt&&!te&&!v){const Rn=Ic(Ie,c);Tn=Tn.concat(function hl(f,c,d){const v=c._path,x=oo(f,c),H=ja(f,d),te=f.listenProvider_.startListening(tl(c),x,H.hashFn,H.onComplete),Ie=f.syncPointTree_.subtree(v);if(x)(0,oe.hu)(!oa(Ie.value),"If we're adding a query, it shouldn't be shadowed");else{const Ye=Ie.fold((lt,an,Tn)=>{if(!Zr(lt)&&an&&oa(an))return[Xl(an).query];{let Rn=[];return an&&(Rn=Rn.concat(sa(an).map(Er=>Er.query))),yn(Tn,(Er,ui)=>{Rn=Rn.concat(ui)}),Rn}});for(let lt=0;lt<Ye.length;++lt){const an=Ye[lt];f.listenProvider_.stopListening(tl(an),oo(f,an))}}return te}(f,c,Rn))}return Tn}function $a(f,c,d){const x=f.pendingWriteTree_,H=f.syncPointTree_.findOnPath(c,(te,Ie)=>{const lt=Ta(Ie,ji(te,c));if(lt)return lt});return po(x,c,H,d,!0)}function ha(f,c){return mo(c,f.syncPointTree_,null,cr(f.pendingWriteTree_,wr()))}function mo(f,c,d,v){if(Zr(f.path))return Ja(f,c,d,v);{const x=c.get(wr());null==d&&null!=x&&(d=Ta(x,wr()));let H=[];const te=Ir(f.path),Ie=f.operationForChild(te),Ye=c.children.get(te);if(Ye&&Ie){const lt=d?d.getImmediateChild(te):null,an=Cr(v,te);H=H.concat(mo(Ie,Ye,lt,an))}return x&&(H=H.concat(va(x,f,v,d))),H}}function Ja(f,c,d,v){const x=c.get(wr());null==d&&null!=x&&(d=Ta(x,wr()));let H=[];return c.children.inorderTraversal((te,Ie)=>{const Ye=d?d.getImmediateChild(te):null,lt=Cr(v,te),an=f.operationForChild(te);an&&(H=H.concat(Ja(an,Ie,Ye,lt)))}),x&&(H=H.concat(va(x,f,v,d))),H}function ja(f,c){const d=c.query,v=oo(f,d);return{hashFn:()=>(function qn(f){return f.viewCache_.serverCache.getNode()}(c)||B.EMPTY_NODE).hash(),onComplete:x=>{if("ok"===x)return v?function _u(f,c,d){const v=Ga(f,d);if(v){const x=eo(v),H=x.path,te=x.queryId,Ie=ji(H,c);return el(f,H,new I(l(te),Ie))}return[]}(f,d._path,v):function Jl(f,c){return ha(f,new I({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(f,d._path);{const H=function Ot(f,c){let d="Unknown Error";"too_big"===f?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?d="Client doesn't have permission to access the desired data.":"unavailable"===f&&(d="The service is unavailable");const v=new Error(f+" at "+c._path.toString()+": "+d);return v.code=f.toUpperCase(),v}(x,d);return go(f,d,null,H)}}}}function oo(f,c){const d=Ha(c);return f.queryToTagMap.get(d)}function Ha(f){return f._path.toString()+"$"+f._queryIdentifier}function Ga(f,c){return f.tagToQueryMap.get(c)}function eo(f){const c=f.indexOf("$");return(0,oe.hu)(-1!==c&&c<f.length-1,"Bad queryKey."),{queryId:f.substr(c+1),path:new $r(f.substr(0,c))}}function el(f,c,d){const v=f.syncPointTree_.get(c);return(0,oe.hu)(v,"Missing sync point for query tag that we're tracking"),va(v,d,cr(f.pendingWriteTree_,c),null)}function tl(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function wa(){return(0,oe.hu)(Xt,"Reference.ts has not been loaded"),Xt}())(f._repo,f._path):f}class nl{constructor(c){this.node_=c}getImmediateChild(c){const d=this.node_.getImmediateChild(c);return new nl(d)}node(){return this.node_}}class ao{constructor(c,d){this.syncTree_=c,this.path_=d}getImmediateChild(c){const d=si(this.path_,c);return new ao(this.syncTree_,d)}node(){return $a(this.syncTree_,this.path_)}}const wo=function(f,c,d){return f&&"object"==typeof f?((0,oe.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?zu(f[".sv"],c,d):"object"==typeof f[".sv"]?fl(f[".sv"],c):void(0,oe.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},zu=function(f,c,d){if("timestamp"===f)return d.timestamp;(0,oe.hu)(!1,"Unexpected server value: "+f)},fl=function(f,c,d){f.hasOwnProperty("increment")||(0,oe.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const v=f.increment;"number"!=typeof v&&(0,oe.hu)(!1,"Unexpected increment value: "+v);const x=c.node();if((0,oe.hu)(null!=x,"Expected ChildrenNode.EMPTY_NODE for nulls"),!x.isLeafNode())return v;const te=x.getValue();return"number"!=typeof te?v:te+v},Al=function(f,c,d,v){return Ul(c,new ao(d,f),v)},Da=function(f,c,d){return Ul(f,new nl(c),d)};function Ul(f,c,d){const v=f.getPriority().val(),x=wo(v,c.getImmediateChild(".priority"),d);let H;if(f.isLeafNode()){const te=f,Ie=wo(te.getValue(),c,d);return Ie!==te.getValue()||x!==te.getPriority().val()?new ks(Ie,qe(x)):f}{const te=f;return H=te,x!==te.getPriority().val()&&(H=H.updatePriority(new ks(x))),te.forEachChild(Ai,(Ie,Ye)=>{const lt=Ul(Ye,c.getImmediateChild(Ie),d);lt!==Ye&&(H=H.updateImmediateChild(Ie,lt))}),H}}class Na{constructor(c="",d=null,v={children:{},childCount:0}){this.name=c,this.parent=d,this.node=v}}function U(f,c){let d=c instanceof $r?c:new $r(c),v=f,x=Ir(d);for(;null!==x;){const H=(0,oe.DV)(v.node.children,x)||{children:{},childCount:0};v=new Na(x,v,H),d=Vr(d),x=Ir(d)}return v}function Q(f){return f.node.value}function de(f,c){f.node.value=c,Hr(f)}function $e(f){return f.node.childCount>0}function Zt(f,c){yn(f.node.children,(d,v)=>{c(new Na(d,f,v))})}function $n(f,c,d,v){d&&!v&&c(f),Zt(f,x=>{$n(x,c,!0,v)}),d&&v&&c(f)}function Kr(f){return new $r(null===f.parent?f.name:Kr(f.parent)+"/"+f.name)}function Hr(f){null!==f.parent&&function qi(f,c,d){const v=function Mt(f){return void 0===Q(f)&&!$e(f)}(d),x=(0,oe.r3)(f.node.children,c);v&&x?(delete f.node.children[c],f.node.childCount--,Hr(f)):!v&&!x&&(f.node.children[c]=d.node,f.node.childCount++,Hr(f))}(f.parent,f.name,f)}const vi=/[\[\].#$\/\u0000-\u001F\u007F]/,Go=/[\[\].#$\u0000-\u001F\u007F]/,ni=10485760,os=function(f){return"string"==typeof f&&0!==f.length&&!vi.test(f)},Aa=function(f){return"string"==typeof f&&0!==f.length&&!Go.test(f)},Wa=function(f,c,d){const v=d instanceof $r?new jo(d,f):d;if(void 0===c)throw new Error(f+"contains undefined "+Et(v));if("function"==typeof c)throw new Error(f+"contains a function "+Et(v)+" with contents = "+c.toString());if(Re(c))throw new Error(f+"contains "+c.toString()+" "+Et(v));if("string"==typeof c&&c.length>ni/3&&(0,oe.ug)(c)>ni)throw new Error(f+"contains a string greater than "+ni+" utf8 bytes "+Et(v)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let x=!1,H=!1;if(yn(c,(te,Ie)=>{if(".value"===te)x=!0;else if(".priority"!==te&&".sv"!==te&&(H=!0,!os(te)))throw new Error(f+" contains an invalid key ("+te+") "+Et(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function lo(f,c){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(c),f.byteLength_+=(0,oe.ug)(c),rs(f)})(v,te),Wa(f,Ie,v),function Ts(f){const c=f.parts_.pop();f.byteLength_-=(0,oe.ug)(c),f.parts_.length>0&&(f.byteLength_-=1)}(v)}),x&&H)throw new Error(f+' contains ".value" child '+Et(v)+" in addition to actual children.")}},xl=function(f,c,d,v){if(v&&void 0===c)return;const x=(0,oe.gK)(f,"values");if(!c||"object"!=typeof c||Array.isArray(c))throw new Error(x+" must be an object containing the children to replace.");const H=[];yn(c,(te,Ie)=>{const Ye=new $r(te);if(Wa(x,Ie,si(d,Ye)),".priority"===bi(Ye)&&!function(f){return null===f||"string"==typeof f||"number"==typeof f&&!Re(f)||f&&"object"==typeof f&&(0,oe.r3)(f,".sv")}(Ie))throw new Error(x+"contains an invalid value for '"+Ye.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");H.push(Ye)}),function(f,c){let d,v;for(d=0;d<c.length;d++){v=c[d];const H=Fi(v);for(let te=0;te<H.length;te++)if((".priority"!==H[te]||te!==H.length-1)&&!os(H[te]))throw new Error(f+"contains an invalid key ("+H[te]+") in path "+v.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}c.sort(bs);let x=null;for(d=0;d<c.length;d++){if(v=c[d],null!==x&&Pi(x,v))throw new Error(f+"contains a path "+x.toString()+" that is ancestor of another path "+v.toString());x=v}}(x,H)},ud=function(f,c,d,v){if(!(v&&void 0===d||Aa(d)))throw new Error((0,oe.gK)(f,c)+'was an invalid path = "'+d+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class Eu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wu(f,c){let d=null;for(let v=0;v<c.length;v++){const x=c[v],H=x.getPath();null!==d&&!ys(H,d.path)&&(f.eventLists_.push(d),d=null),null===d&&(d={events:[],path:H}),d.events.push(x)}d&&f.eventLists_.push(d)}function dd(f,c,d){Wu(f,d),qu(f,v=>ys(v,c))}function Mo(f,c,d){Wu(f,d),qu(f,v=>Pi(v,c)||Pi(c,v))}function qu(f,c){f.recursionDepth_++;let d=!0;for(let v=0;v<f.eventLists_.length;v++){const x=f.eventLists_[v];x&&(c(x.path)?(to(f.eventLists_[v]),f.eventLists_[v]=null):d=!1)}d&&(f.eventLists_=[]),f.recursionDepth_--}function to(f){for(let c=0;c<f.events.length;c++){const d=f.events[c];if(null!==d){f.events[c]=null;const v=d.getEventRunner();Un&&Ge("event: "+d.toString()),xt(v)}}}class no{constructor(c,d,v,x){this.repoInfo_=c,this.forceRestClient_=d,this.authTokenProvider_=v,this.appCheckProvider_=x,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Eu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=K(),this.transactionQueueTree_=new Na,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pl(f){const d=f.infoData_.getNode(new $r(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+d}function zo(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:pl(f)})}function Bo(f,c,d,v,x){f.dataUpdateCount++;const H=new $r(c);d=f.interceptServerDataCallback_?f.interceptServerDataCallback_(c,d):d;let te=[];if(x)if(v){const Ye=(0,oe.UI)(d,lt=>qe(lt));te=function ea(f,c,d,v){const x=Ga(f,v);if(x){const H=eo(x),te=H.path,Ie=H.queryId,Ye=ji(te,c),lt=et.fromObject(d);return el(f,te,new z(l(Ie),Ye,lt))}return[]}(f.serverSyncTree_,H,Ye,x)}else{const Ye=qe(d);te=function dl(f,c,d,v){const x=Ga(f,v);if(null!=x){const H=eo(x),te=H.path,Ie=H.queryId,Ye=ji(te,c);return el(f,te,new P(l(Ie),Ye,d))}return[]}(f.serverSyncTree_,H,Ye,x)}else if(v){const Ye=(0,oe.UI)(d,lt=>qe(lt));te=function Jo(f,c,d){const v=et.fromObject(d);return ha(f,new z({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,v))}(f.serverSyncTree_,H,Ye)}else{const Ye=qe(d);te=Ao(f.serverSyncTree_,H,Ye)}let Ie=H;te.length>0&&(Ie=Fa(f,H)),Mo(f.eventQueue_,Ie,te)}function Ku(f,c){Zu(f,"connected",c),!1===c&&function Ea(f){ml(f,"onDisconnectEvents");const c=zo(f),d=K();rt(f.onDisconnect_,wr(),(x,H)=>{const te=Al(x,H,f.serverSyncTree_,c);be(d,x,te)});let v=[];rt(d,wr(),(x,H)=>{v=v.concat(Ao(f.serverSyncTree_,x,H));const te=zl(f,x);Fa(f,te)}),f.onDisconnect_=K(),Mo(f.eventQueue_,wr(),v)}(f)}function Zu(f,c,d){const v=new $r("/.info/"+c),x=qe(d);f.infoData_.updateSnapshot(v,x);const H=Ao(f.infoSyncTree_,v,x);Mo(f.eventQueue_,v,H)}function eu(f){return f.nextWriteId_++}function ru(f,c,d){let v;v=".info"===Ir(c._path)?go(f.infoSyncTree_,c,d):go(f.serverSyncTree_,c,d),dd(f.eventQueue_,c._path,v)}function ml(f,...c){let d="";f.persistentConnection_&&(d=f.persistentConnection_.id+":"),Ge(d,...c)}function Ca(f,c,d,v){c&&xt(()=>{if("ok"===d)c(null);else{const x=(d||"error").toUpperCase();let H=x;v&&(H+=": "+v);const te=new Error(H);te.code=x,c(te)}})}function bu(f,c,d){return $a(f.serverSyncTree_,c,d)||B.EMPTY_NODE}function su(f,c=f.transactionQueueTree_){if(c||wu(f,c),Q(c)){const d=xa(f,c);(0,oe.hu)(d.length>0,"Sending zero length transaction queue"),d.every(x=>0===x.status)&&function Tu(f,c,d){const v=d.map(lt=>lt.currentWriteId),x=bu(f,c,v);let H=x;const te=x.hash();for(let lt=0;lt<d.length;lt++){const an=d[lt];(0,oe.hu)(0===an.status,"tryToSendTransactionQueue_: items in queue should all be run."),an.status=1,an.retryCount++;const Tn=ji(c,an.path);H=H.updateChild(Tn,an.currentOutputSnapshotRaw)}const Ie=H.val(!0),Ye=c;f.server_.put(Ye.toString(),Ie,lt=>{ml(f,"transaction put response",{path:Ye.toString(),status:lt});let an=[];if("ok"===lt){const Tn=[];for(let Rn=0;Rn<d.length;Rn++)d[Rn].status=2,an=an.concat(la(f.serverSyncTree_,d[Rn].currentWriteId)),d[Rn].onComplete&&Tn.push(()=>d[Rn].onComplete(null,!0,d[Rn].currentOutputSnapshotResolved)),d[Rn].unwatcher();wu(f,U(f.transactionQueueTree_,c)),su(f,f.transactionQueueTree_),Mo(f.eventQueue_,c,an);for(let Rn=0;Rn<Tn.length;Rn++)xt(Tn[Rn])}else{if("datastale"===lt)for(let Tn=0;Tn<d.length;Tn++)d[Tn].status=3===d[Tn].status?4:0;else{Oe("transaction at "+Ye.toString()+" failed: "+lt);for(let Tn=0;Tn<d.length;Tn++)d[Tn].status=4,d[Tn].abortReason=lt}Fa(f,c)}},te)}(f,Kr(c),d)}else $e(c)&&Zt(c,d=>{su(f,d)})}function Fa(f,c){const d=La(f,c),v=Kr(d);return function Xu(f,c,d){if(0===c.length)return;const v=[];let x=[];const te=c.filter(Ie=>0===Ie.status).map(Ie=>Ie.currentWriteId);for(let Ie=0;Ie<c.length;Ie++){const Ye=c[Ie],lt=ji(d,Ye.path);let Tn,an=!1;if((0,oe.hu)(null!==lt,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ye.status)an=!0,Tn=Ye.abortReason,x=x.concat(la(f.serverSyncTree_,Ye.currentWriteId,!0));else if(0===Ye.status)if(Ye.retryCount>=25)an=!0,Tn="maxretry",x=x.concat(la(f.serverSyncTree_,Ye.currentWriteId,!0));else{const Rn=bu(f,Ye.path,te);Ye.currentInputSnapshot=Rn;const Er=c[Ie].update(Rn.val());if(void 0!==Er){Wa("transaction failed: Data returned ",Er,Ye.path);let ui=qe(Er);"object"==typeof Er&&null!=Er&&(0,oe.r3)(Er,".priority")||(ui=ui.updatePriority(Rn.getPriority()));const ca=Ye.currentWriteId,Fu=zo(f),Uc=Da(ui,Rn,Fu);Ye.currentOutputSnapshotRaw=ui,Ye.currentOutputSnapshotResolved=Uc,Ye.currentWriteId=eu(f),te.splice(te.indexOf(ca),1),x=x.concat(aa(f.serverSyncTree_,Ye.path,Uc,Ye.currentWriteId,Ye.applyLocally)),x=x.concat(la(f.serverSyncTree_,ca,!0))}else an=!0,Tn="nodata",x=x.concat(la(f.serverSyncTree_,Ye.currentWriteId,!0))}Mo(f.eventQueue_,d,x),x=[],an&&(c[Ie].status=2,setTimeout(c[Ie].unwatcher,Math.floor(0)),c[Ie].onComplete&&v.push("nodata"===Tn?()=>c[Ie].onComplete(null,!1,c[Ie].currentInputSnapshot):()=>c[Ie].onComplete(new Error(Tn),!1,null)))}wu(f,f.transactionQueueTree_);for(let Ie=0;Ie<v.length;Ie++)xt(v[Ie]);su(f,f.transactionQueueTree_)}(f,xa(f,d),v),v}function La(f,c){let d,v=f.transactionQueueTree_;for(d=Ir(c);null!==d&&void 0===Q(v);)v=U(v,d),d=Ir(c=Vr(c));return v}function xa(f,c){const d=[];return Ju(f,c,d),d.sort((v,x)=>v.order-x.order),d}function Ju(f,c,d){const v=Q(c);if(v)for(let x=0;x<v.length;x++)d.push(v[x]);Zt(c,x=>{Ju(f,x,d)})}function wu(f,c){const d=Q(c);if(d){let v=0;for(let x=0;x<d.length;x++)2!==d[x].status&&(d[v]=d[x],v++);d.length=v,de(c,d.length>0?d:void 0)}Zt(c,v=>{wu(f,v)})}function zl(f,c){const d=Kr(La(f,c)),v=U(f.transactionQueueTree_,c);return function Ur(f,c,d){let v=d?f:f.parent;for(;null!==v;){if(c(v))return!0;v=v.parent}}(v,x=>{Ac(f,x)}),Ac(f,v),$n(v,x=>{Ac(f,x)}),d}function Ac(f,c){const d=Q(c);if(d){const v=[];let x=[],H=-1;for(let te=0;te<d.length;te++)3===d[te].status||(1===d[te].status?((0,oe.hu)(H===te-1,"All SENT items should be at beginning of queue."),H=te,d[te].status=3,d[te].abortReason="set"):((0,oe.hu)(0===d[te].status,"Unexpected transaction status in abort"),d[te].unwatcher(),x=x.concat(la(f.serverSyncTree_,d[te].currentWriteId,!0)),d[te].onComplete&&v.push(d[te].onComplete.bind(null,new Error("set"),!1,null))));-1===H?de(c,void 0):d.length=H+1,Mo(f.eventQueue_,Kr(c),x);for(let te=0;te<v.length;te++)xt(v[te])}}const Iu=function(f,c){const d=Su(f),v=d.namespace;return"firebase.com"===d.domain&&Ht(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==d.domain&&Ht("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tn(d.host,d.secure,v,"ws"===d.scheme||"wss"===d.scheme,c,"",v!==d.subdomain),path:new $r(d.pathString)}},Su=function(f){let c="",d="",v="",x="",H="",te=!0,Ie="https",Ye=443;if("string"==typeof f){let lt=f.indexOf("//");lt>=0&&(Ie=f.substring(0,lt-1),f=f.substring(lt+2));let an=f.indexOf("/");-1===an&&(an=f.length);let Tn=f.indexOf("?");-1===Tn&&(Tn=f.length),c=f.substring(0,Math.min(an,Tn)),an<Tn&&(x=function xc(f){let c="";const d=f.split("/");for(let v=0;v<d.length;v++)if(d[v].length>0){let x=d[v];try{x=decodeURIComponent(x.replace(/\+/g," "))}catch(H){}c+="/"+x}return c}(f.substring(an,Tn)));const Rn=function Mc(f){const c={};"?"===f.charAt(0)&&(f=f.substring(1));for(const d of f.split("&")){if(0===d.length)continue;const v=d.split("=");2===v.length?c[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):Oe(`Invalid query segment '${d}' in query '${f}'`)}return c}(f.substring(Math.min(f.length,Tn)));lt=c.indexOf(":"),lt>=0?(te="https"===Ie||"wss"===Ie,Ye=parseInt(c.substring(lt+1),10)):lt=c.length;const Er=c.slice(0,lt);if("localhost"===Er.toLowerCase())d="localhost";else if(Er.split(".").length<=2)d=Er;else{const ui=c.indexOf(".");v=c.substring(0,ui).toLowerCase(),d=c.substring(ui+1),H=v}"ns"in Rn&&(H=Rn.ns)}return{host:c,port:Ye,domain:d,subdomain:v,secure:te,scheme:Ie,pathString:x,namespace:H}};class yl{constructor(c,d,v,x){this.eventType=c,this.eventRegistration=d,this.snapshot=v,this.prevName=x}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,oe.Wl)(this.snapshot.exportVal())}}class ec{constructor(c,d,v){this.eventRegistration=c,this.error=d,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class _l{constructor(c,d){this.snapshotCallback=c,this.cancelCallback=d}onValue(c,d){this.snapshotCallback.call(null,c,d)}onCancel(c){return(0,oe.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class Wo{constructor(c,d,v,x){this._repo=c,this._path=d,this._queryParams=v,this._orderByCalled=x}get key(){return Zr(this._path)?null:bi(this._path)}get ref(){return new Va(this._repo,this._path)}get _queryIdentifier(){const c=Qe(this._queryParams),d=sr(c);return"{}"===d?"default":d}get _queryObject(){return Qe(this._queryParams)}isEqual(c){if(!((c=(0,oe.m9)(c))instanceof Wo))return!1;const d=this._repo===c._repo,v=ys(this._path,c._path);return d&&v&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ws(f){let c="";for(let d=f.pieceNum_;d<f.pieces_.length;d++)""!==f.pieces_[d]&&(c+="/"+encodeURIComponent(String(f.pieces_[d])));return c||"/"}(this._path)}}class Va extends Wo{constructor(c,d){super(c,d,new ns,!1)}get parent(){const c=fs(this._path);return null===c?null:new Va(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class vl{constructor(c,d,v){this._node=c,this.ref=d,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const d=new $r(c),v=rl(this.ref,c);return new vl(this._node.getChild(d),v,Ai)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,x)=>c(new vl(x,rl(this.ref,v),Ai)))}hasChild(c){const d=new $r(c);return!this._node.getChild(d).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ro(f,c){return(f=(0,oe.m9)(f))._checkNotDeleted("ref"),void 0!==c?rl(f._root,c):f._root}function rl(f,c){return null===Ir((f=(0,oe.m9)(f))._path)?(d=c,d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),ud("child","path",d,!1)):ud("child","path",c,!1),new Va(f._repo,si(f._path,c));var d}function Rc(f,c){(function(f,c){if(".info"===Ir(c))throw new Error(f+" failed = Can't modify data under /.info/")})("set",(f=(0,oe.m9)(f))._path),function(f,c,d,v){v&&void 0===c||Wa((0,oe.gK)(f,"value"),c,d)}("set",c,f._path,!1);const d=new oe.BH;return function Hl(f,c,d,v,x){ml(f,"set",{path:c.toString(),value:d,priority:v});const H=zo(f),te=qe(d,v),Ie=$a(f.serverSyncTree_,c),Ye=Da(te,Ie,H),lt=eu(f),an=aa(f.serverSyncTree_,c,Ye,lt,!0);Wu(f.eventQueue_,an),f.server_.put(c.toString(),te.val(!0),(Rn,Er)=>{const ui="ok"===Rn;ui||Oe("set at "+c+" failed: "+Rn);const xs=la(f.serverSyncTree_,lt,!ui);Mo(f.eventQueue_,c,xs),Ca(0,x,Rn,Er)});const Tn=zl(f,c);Fa(f,Tn),Mo(f.eventQueue_,Tn,[])}(f._repo,f._path,c,null,d.wrapCallback(()=>{})),d.promise}function El(f,c){xl("update",c,f._path,!1);const d=new oe.BH;return function Yu(f,c,d,v){ml(f,"update",{path:c.toString(),value:d});let x=!0;const H=zo(f),te={};if(yn(d,(Ie,Ye)=>{x=!1,te[Ie]=Al(si(c,Ie),qe(Ye),f.serverSyncTree_,H)}),x)Ge("update() called with empty data.  Don't do anything."),Ca(0,v,"ok",void 0);else{const Ie=eu(f),Ye=function Gu(f,c,d,v){!function Wt(f,c,d,v){(0,oe.hu)(v>f.lastWriteId,"Stacking an older merge on top of newer ones"),f.allWrites.push({path:c,children:d,writeId:v,visible:!0}),f.visibleWrites=An(f.visibleWrites,c,d),f.lastWriteId=v}(f.pendingWriteTree_,c,d,v);const x=et.fromObject(d);return ha(f,new z({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,x))}(f.serverSyncTree_,c,te,Ie);Wu(f.eventQueue_,Ye),f.server_.merge(c.toString(),d,(lt,an)=>{const Tn="ok"===lt;Tn||Oe("update at "+c+" failed: "+lt);const Rn=la(f.serverSyncTree_,Ie,!Tn),Er=Rn.length>0?Fa(f,c):c;Mo(f.eventQueue_,Er,Rn),Ca(0,v,lt,an)}),yn(d,lt=>{const an=zl(f,si(c,lt));Fa(f,an)}),Mo(f.eventQueue_,c,[])}}(f._repo,f._path,c,d.wrapCallback(()=>{})),d.promise}class Pu{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,d){const v=d._queryParams.getIndex();return new yl("value",this,new vl(c.snapshotNode,new Va(d._repo,d._path),v))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new ec(this,c,d):null}matches(c){return c instanceof Pu&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tc{constructor(c,d){this.eventType=c,this.callbackContext=d}respondsTo(c){let d="children_added"===c?"child_added":c;return d="children_removed"===d?"child_removed":d,this.eventType===d}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new ec(this,c,d):null}createEvent(c,d){(0,oe.hu)(null!=c.childName,"Child events should have a childName.");const v=rl(new Va(d._repo,d._path),c.childName),x=d._queryParams.getIndex();return new yl(c.type,this,new vl(c.snapshotNode,v,x),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof tc&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function qo(f,c,d,v,x){let H;if("object"==typeof v&&(H=void 0,x=v),"function"==typeof v&&(H=v),x&&x.onlyOnce){const Ye=d,lt=(an,Tn)=>{ru(f._repo,f,Ie),Ye(an,Tn)};lt.userCallback=d.userCallback,lt.context=d.context,d=lt}const te=new _l(d,H||void 0),Ie="value"===c?new Pu(te):new tc(c,te);return function nu(f,c,d){let v;v=".info"===Ir(c._path)?Dl(f.infoSyncTree_,c,d):Dl(f.serverSyncTree_,c,d),dd(f.eventQueue_,c._path,v)}(f._repo,f,Ie),()=>ru(f._repo,f,Ie)}function Ko(f,c,d,v){return qo(f,"value",c,d,v)}function nc(f,c,d,v){return qo(f,"child_added",c,d,v)}function au(f,c,d){let v=null;const x=d?new _l(d):null;"value"===c?v=new Pu(x):c&&(v=new tc(c,x)),ru(f._repo,f,v)}(function Vs(f){(0,oe.hu)(!Oo,"__referenceConstructor has already been defined"),Oo=f})(Va),function Xa(f){(0,oe.hu)(!Xt,"__referenceConstructor has already been defined"),Xt=f}(Va);const kc={};function Fc(f,c,d,v,x){let H=v||f.options.databaseURL;void 0===H&&(f.options.projectId||Ht("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ge("Using default host for project ",f.options.projectId),H=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Ye,lt,te=Iu(H,x),Ie=te.repoInfo;"undefined"!=typeof process&&process.env&&(lt=process.env.FIREBASE_DATABASE_EMULATOR_HOST),lt?(Ye=!0,H=`http://${lt}?ns=${Ie.namespace}`,te=Iu(H,x),Ie=te.repoInfo):Ye=!te.repoInfo.secure;const an=x&&Ye?new Yr(Yr.OWNER):new dr(f.name,f.options,c);(function(f,c){const d=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!os(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==d.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),Aa(f)}(d))throw new Error((0,oe.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",te),Zr(te.path)||Ht("Database URL must point to the root of a Firebase Database (not including a child path).");const Tn=function Ro(f,c,d,v){let x=kc[c.name];x||(x={},kc[c.name]=x);let H=x[f.toURLString()];return H&&Ht("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),H=new no(f,false,d,v),x[f.toURLString()]=H,H}(Ie,f,an,new or(f.name,d));return new Ka(Tn,f)}class Ka{constructor(c,d){this._repoInternal=c,this.app=d,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $l(f,c,d){if(f.stats_=ls(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new Nn(f.repoInfo_,(v,x,H,te)=>{Bo(f,v,x,H,te)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>Ku(f,!0),0);else{if(null!=d){if("object"!=typeof d)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,oe.Wl)(d)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}f.persistentConnection_=new ws(f.repoInfo_,c,(v,x,H,te)=>{Bo(f,v,x,H,te)},v=>{Ku(f,v)},v=>{!function Rs(f,c){yn(c,(d,v)=>{Zu(f,d,v)})}(f,v)},f.authTokenProvider_,f.appCheckProvider_,d),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(v=>{f.server_.refreshAuthToken(v)}),f.appCheckProvider_.addTokenChangeListener(v=>{f.server_.refreshAppCheckToken(v.token)}),f.statsReporter_=function Bi(f,c){const d=f.toString();return kr[d]||(kr[d]=c()),kr[d]}(f.repoInfo_,()=>new _i(f.stats_,f.server_)),f.infoData_=new ee,f.infoSyncTree_=new Ia({startListening:(v,x,H,te)=>{let Ie=[];const Ye=f.infoData_.getNode(v._path);return Ye.isEmpty()||(Ie=Ao(f.infoSyncTree_,v._path,Ye),setTimeout(()=>{te("ok")},0)),Ie},stopListening:()=>{}}),Zu(f,"connected",!1),f.serverSyncTree_=new Ia({startListening:(v,x,H,te)=>(f.server_.listen(v,H,x,(Ie,Ye)=>{const lt=te(Ie,Ye);Mo(f.eventQueue_,v._path,lt)}),[]),stopListening:(v,x)=>{f.server_.unlisten(v,x)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Va(this._repo,wr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Lc(f,c){const d=kc[c];(!d||d[f.key]!==f)&&Ht(`Database ${c}(${f.repoInfo_}) has already been deleted.`),function Qu(f){f.persistentConnection_&&f.persistentConnection_.interrupt("repo_interrupt")}(f),delete d[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&Ht("Cannot call "+c+" on a deleted database.")}}function b(f=(0,k.getApp)(),c){const d=(0,k._getProvider)(f,"database").getImmediate({identifier:c}),v=(0,oe.P0)("database");return v&&function p(f,c,d,v={}){(f=(0,oe.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&Ht("Cannot call useEmulator() after instance has already been initialized.");const x=f._repoInternal;let H;if(x.repoInfo_.nodeAdmin)v.mockUserToken&&Ht('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),H=new Yr(Yr.OWNER);else if(v.mockUserToken){const te="string"==typeof v.mockUserToken?v.mockUserToken:(0,oe.Sg)(v.mockUserToken,f.app.options.projectId);H=new Yr(te)}!function ol(f,c,d,v){f.repoInfo_=new tn(`${c}:${d}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams),v&&(f.authTokenProvider_=v)}(x,c,d,H)}(d,...v),d}ws.prototype.simpleListen=function(f,c){this.sendRequest("q",{p:f},c)},ws.prototype.echo=function(f,c){this.sendRequest("echo",{d:f},c)},function Ee(f){(function at(f){We=f})(k.SDK_VERSION),(0,k._registerComponent)(new he.wA("database",(c,{instanceIdentifier:d})=>Fc(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),d),"PUBLIC").setMultipleInstances(!0)),(0,k.registerVersion)(He,"0.14.0",f),(0,k.registerVersion)(He,"0.14.0","esm2017")}()},8766:(Zn,It,j)=>{j.d(It,{Lj:()=>xe,X3:()=>dn});var g=j(5861);let he,oe;const ht=new WeakMap,We=new WeakMap,at=new WeakMap,Ne=new WeakMap,Pe=new WeakMap;let _t={get(Oe,Bt,Re){if(Oe instanceof IDBTransaction){if("done"===Bt)return We.get(Oe);if("objectStoreNames"===Bt)return Oe.objectStoreNames||at.get(Oe);if("store"===Bt)return Re.objectStoreNames[1]?void 0:Re.objectStore(Re.objectStoreNames[0])}return Jt(Oe[Bt])},set:(Oe,Bt,Re)=>(Oe[Bt]=Re,!0),has:(Oe,Bt)=>Oe instanceof IDBTransaction&&("done"===Bt||"store"===Bt)||Bt in Oe};function Nt(Oe){return"function"==typeof Oe?function Dn(Oe){return Oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function He(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Oe)?function(...Bt){return Oe.apply(Un(this),Bt),Jt(ht.get(this))}:function(...Bt){return Jt(Oe.apply(Un(this),Bt))}:function(Bt,...Re){const bt=Oe.call(Un(this),Bt,...Re);return at.set(bt,Bt.sort?Bt.sort():[Bt]),Jt(bt)}}(Oe):(Oe instanceof IDBTransaction&&function wn(Oe){if(We.has(Oe))return;const Bt=new Promise((Re,bt)=>{const Je=()=>{Oe.removeEventListener("complete",Ft),Oe.removeEventListener("error",Dt),Oe.removeEventListener("abort",Dt)},Ft=()=>{Re(),Je()},Dt=()=>{bt(Oe.error||new DOMException("AbortError","AbortError")),Je()};Oe.addEventListener("complete",Ft),Oe.addEventListener("error",Dt),Oe.addEventListener("abort",Dt)});We.set(Oe,Bt)}(Oe),((Oe,Bt)=>Bt.some(Re=>Oe instanceof Re))(Oe,function je(){return he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Oe,_t):Oe)}function Jt(Oe){if(Oe instanceof IDBRequest)return function vt(Oe){const Bt=new Promise((Re,bt)=>{const Je=()=>{Oe.removeEventListener("success",Ft),Oe.removeEventListener("error",Dt)},Ft=()=>{Re(Jt(Oe.result)),Je()},Dt=()=>{bt(Oe.error),Je()};Oe.addEventListener("success",Ft),Oe.addEventListener("error",Dt)});return Bt.then(Re=>{Re instanceof IDBCursor&&ht.set(Re,Oe)}).catch(()=>{}),Pe.set(Bt,Oe),Bt}(Oe);if(Ne.has(Oe))return Ne.get(Oe);const Bt=Nt(Oe);return Bt!==Oe&&(Ne.set(Oe,Bt),Pe.set(Bt,Oe)),Bt}const Un=Oe=>Pe.get(Oe);function dn(Oe,Bt,{blocked:Re,upgrade:bt,blocking:Je,terminated:Ft}={}){const Dt=indexedDB.open(Oe,Bt),Lt=Jt(Dt);return bt&&Dt.addEventListener("upgradeneeded",Yt=>{bt(Jt(Dt.result),Yt.oldVersion,Yt.newVersion,Jt(Dt.transaction))}),Re&&Dt.addEventListener("blocked",()=>Re()),Lt.then(Yt=>{Ft&&Yt.addEventListener("close",()=>Ft()),Je&&Yt.addEventListener("versionchange",()=>Je())}).catch(()=>{}),Lt}function xe(Oe,{blocked:Bt}={}){const Re=indexedDB.deleteDatabase(Oe);return Bt&&Re.addEventListener("blocked",()=>Bt()),Jt(Re).then(()=>{})}const Ge=["get","getKey","getAll","getAllKeys","count"],wt=["put","add","delete","clear"],on=new Map;function Ht(Oe,Bt){if(!(Oe instanceof IDBDatabase)||Bt in Oe||"string"!=typeof Bt)return;if(on.get(Bt))return on.get(Bt);const Re=Bt.replace(/FromIndex$/,""),bt=Bt!==Re,Je=wt.includes(Re);if(!(Re in(bt?IDBIndex:IDBObjectStore).prototype)||!Je&&!Ge.includes(Re))return;const Ft=function(){var Dt=(0,g.Z)(function*(Lt,...Yt){const sr=this.transaction(Lt,Je?"readwrite":"readonly");let lr=sr.store;return bt&&(lr=lr.index(Yt.shift())),(yield Promise.all([lr[Re](...Yt),Je&&sr.done]))[0]});return function(Yt){return Dt.apply(this,arguments)}}();return on.set(Bt,Ft),Ft}!function ln(Oe){_t=Oe(_t)}(Oe=>hC(dC({},Oe),{get:(Bt,Re,bt)=>Ht(Bt,Re)||Oe.get(Bt,Re,bt),has:(Bt,Re)=>!!Ht(Bt,Re)||Oe.has(Bt,Re)}))},2290:(Zn,It,j)=>{j.d(It,{Rh:()=>sr,_W:()=>Dt});var g=j(5e3),k=j(1777),he=j(7579),oe=j(9808),je=j(2313);const He=["toast-component",""];function ht(Vt,Ot){if(1&Vt){const it=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(it),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function We(Vt,Ot){if(1&Vt&&(g.ynx(0),g._uU(1),g.BQk()),2&Vt){const it=g.oxw(2);g.xp6(1),g.hij("[",it.duplicatesCount+1,"]")}}function at(Vt,Ot){if(1&Vt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,We,2,1,"ng-container",4),g.qZA()),2&Vt){const it=g.oxw();g.Tol(it.options.titleClass),g.uIk("aria-label",it.title),g.xp6(1),g.hij(" ",it.title," "),g.xp6(1),g.Q6J("ngIf",it.duplicatesCount)}}function Ne(Vt,Ot){if(1&Vt&&g._UZ(0,"div",7),2&Vt){const it=g.oxw();g.Tol(it.options.messageClass),g.Q6J("innerHTML",it.message,g.oJD)}}function Pe(Vt,Ot){if(1&Vt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&Vt){const it=g.oxw();g.Tol(it.options.messageClass),g.uIk("aria-label",it.message),g.xp6(1),g.hij(" ",it.message," ")}}function vt(Vt,Ot){if(1&Vt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&Vt){const it=g.oxw();g.xp6(1),g.Udp("width",it.width+"%")}}function wn(Vt,Ot){if(1&Vt){const it=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(it),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function _t(Vt,Ot){if(1&Vt&&(g.ynx(0),g._uU(1),g.BQk()),2&Vt){const it=g.oxw(2);g.xp6(1),g.hij("[",it.duplicatesCount+1,"]")}}function ln(Vt,Ot){if(1&Vt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,_t,2,1,"ng-container",4),g.qZA()),2&Vt){const it=g.oxw();g.Tol(it.options.titleClass),g.uIk("aria-label",it.title),g.xp6(1),g.hij(" ",it.title," "),g.xp6(1),g.Q6J("ngIf",it.duplicatesCount)}}function Dn(Vt,Ot){if(1&Vt&&g._UZ(0,"div",7),2&Vt){const it=g.oxw();g.Tol(it.options.messageClass),g.Q6J("innerHTML",it.message,g.oJD)}}function Nt(Vt,Ot){if(1&Vt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&Vt){const it=g.oxw();g.Tol(it.options.messageClass),g.uIk("aria-label",it.message),g.xp6(1),g.hij(" ",it.message," ")}}function Jt(Vt,Ot){if(1&Vt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&Vt){const it=g.oxw();g.xp6(1),g.Udp("width",it.width+"%")}}class xe{constructor(Ot,it){this.component=Ot,this.injector=it}attach(Ot,it){return this._attachedHost=Ot,Ot.attach(this,it)}detach(){const Ot=this._attachedHost;if(Ot)return this._attachedHost=void 0,Ot.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Ot){this._attachedHost=Ot}}class wt{constructor(Ot,it,St,ut,Qt,xt){this.toastId=Ot,this.config=it,this.message=St,this.title=ut,this.toastType=Qt,this.toastRef=xt,this._onTap=new he.x,this._onAction=new he.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Ot){this._onAction.next(Ot)}onAction(){return this._onAction.asObservable()}}const on={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},Ht=new g.OlP("ToastConfig");class Oe{constructor(Ot){this._overlayRef=Ot,this.duplicatesCount=0,this._afterClosed=new he.x,this._activate=new he.x,this._manualClose=new he.x,this._resetTimeout=new he.x,this._countDuplicate=new he.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Ot,it){Ot&&this._resetTimeout.next(),it&&this._countDuplicate.next(++this.duplicatesCount)}}class Bt{constructor(Ot,it){this._toastPackage=Ot,this._parentInjector=it}get(Ot,it,St){return Ot===wt?this._toastPackage:this._parentInjector.get(Ot,it,St)}}class Re extends class Ge{attach(Ot,it){return this._attachedPortal=Ot,this.attachComponentPortal(Ot,it)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Ot){this._disposeFn=Ot}}{constructor(Ot,it,St){super(),this._hostDomElement=Ot,this._componentFactoryResolver=it,this._appRef=St}attachComponentPortal(Ot,it){const St=this._componentFactoryResolver.resolveComponentFactory(Ot.component);let ut;return ut=St.create(Ot.injector),this._appRef.attachView(ut.hostView),this.setDisposeFn(()=>{this._appRef.detachView(ut.hostView),ut.destroy()}),it?this._hostDomElement.insertBefore(this._getComponentRootNode(ut),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(ut)),ut}_getComponentRootNode(Ot){return Ot.hostView.rootNodes[0]}}class bt{constructor(Ot){this._portalHost=Ot}attach(Ot,it=!0){return this._portalHost.attach(Ot,it)}detach(){return this._portalHost.detach()}}let Je=(()=>{class Vt{constructor(it){this._document=it}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const it=this._document.createElement("div");it.classList.add("overlay-container"),it.setAttribute("aria-live","polite"),this._document.body.appendChild(it),this._containerElement=it}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.LFG(oe.K0))},Vt.\u0275prov=g.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})(),Ft=(()=>{class Vt{constructor(it,St,ut,Qt){this._overlayContainer=it,this._componentFactoryResolver=St,this._appRef=ut,this._document=Qt,this._paneElements=new Map}create(it,St){return this._createOverlayRef(this.getPaneElement(it,St))}getPaneElement(it="",St){return this._paneElements.get(St)||this._paneElements.set(St,{}),this._paneElements.get(St)[it]||(this._paneElements.get(St)[it]=this._createPaneElement(it,St)),this._paneElements.get(St)[it]}_createPaneElement(it,St){const ut=this._document.createElement("div");return ut.id="toast-container",ut.classList.add(it),ut.classList.add("toast-container"),St?St.getContainerElement().appendChild(ut):this._overlayContainer.getContainerElement().appendChild(ut),ut}_createPortalHost(it){return new Re(it,this._componentFactoryResolver,this._appRef)}_createOverlayRef(it){return new bt(this._createPortalHost(it))}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.LFG(Je),g.LFG(g._Vd),g.LFG(g.z2F),g.LFG(oe.K0))},Vt.\u0275prov=g.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})(),Dt=(()=>{class Vt{constructor(it,St,ut,Qt,xt){this.overlay=St,this._injector=ut,this.sanitizer=Qt,this.ngZone=xt,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},it.default),it.config),it.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},it.default.iconClasses),it.config.iconClasses))}show(it,St,ut={},Qt=""){return this._preBuildNotification(Qt,it,St,this.applyConfig(ut))}success(it,St,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",it,St,this.applyConfig(ut))}error(it,St,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",it,St,this.applyConfig(ut))}info(it,St,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",it,St,this.applyConfig(ut))}warning(it,St,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",it,St,this.applyConfig(ut))}clear(it){for(const St of this.toasts)if(void 0!==it){if(St.toastId===it)return void St.toastRef.manualClose()}else St.toastRef.manualClose()}remove(it){const St=this._findToast(it);if(!St||(St.activeToast.toastRef.close(),this.toasts.splice(St.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const ut=this.toasts[this.currentlyActive].toastRef;ut.isInactive()||(this.currentlyActive=this.currentlyActive+1,ut.activate())}return!0}findDuplicate(it="",St="",ut,Qt){const{includeTitleDuplicates:xt}=this.toastrConfig;for(const en of this.toasts){const Wn=xt&&en.title===it;if((!xt||Wn)&&en.message===St)return en.toastRef.onDuplicate(ut,Qt),en}return null}applyConfig(it={}){return Object.assign(Object.assign({},this.toastrConfig),it)}_findToast(it){for(let St=0;St<this.toasts.length;St++)if(this.toasts[St].toastId===it)return{index:St,activeToast:this.toasts[St]};return null}_preBuildNotification(it,St,ut,Qt){return Qt.onActivateTick?this.ngZone.run(()=>this._buildNotification(it,St,ut,Qt)):this._buildNotification(it,St,ut,Qt)}_buildNotification(it,St,ut,Qt){if(!Qt.toastComponent)throw new Error("toastComponent required");const xt=this.findDuplicate(ut,St,this.toastrConfig.resetTimeoutOnDuplicate&&Qt.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&ut||St)&&this.toastrConfig.preventDuplicates&&null!==xt)return xt;this.previousToastMessage=St;let en=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(en=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Wn=this.overlay.create(Qt.positionClass,this.overlayContainer);this.index=this.index+1;let or=St;St&&Qt.enableHtml&&(or=this.sanitizer.sanitize(g.q3G.HTML,St));const dr=new Oe(Wn),Yr=new wt(this.index,Qt,or,ut,it,dr),ii=new Bt(Yr,this._injector),er=new xe(Qt.toastComponent,ii),Gr=Wn.attach(er,this.toastrConfig.newestOnTop);dr.componentInstance=Gr.instance;const Mr={toastId:this.index,title:ut||"",message:St||"",toastRef:dr,onShown:dr.afterActivate(),onHidden:dr.afterClosed(),onTap:Yr.onTap(),onAction:Yr.onAction(),portal:Gr};return en||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Mr.toastRef.activate()})),this.toasts.push(Mr),Mr}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.LFG(Ht),g.LFG(Ft),g.LFG(g.zs3),g.LFG(je.H7),g.LFG(g.R0b))},Vt.\u0275prov=g.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})(),Lt=(()=>{class Vt{constructor(it,St,ut){this.toastrService=it,this.toastPackage=St,this.ngZone=ut,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=St.message,this.title=St.title,this.options=St.config,this.originalTimeout=St.config.timeOut,this.toastClasses=`${St.toastType} ${St.config.toastClass}`,this.sub=St.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=St.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=St.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=St.toastRef.countDuplicate().subscribe(Qt=>{this.duplicatesCount=Qt})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const it=(new Date).getTime();this.width=(this.hideTime-it)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(it,St){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(it),St)):this.timeout=setTimeout(()=>it(),St)}outsideInterval(it,St){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(it),St)):this.intervalId=setInterval(()=>it(),St)}runInsideAngular(it){this.ngZone?this.ngZone.run(()=>it()):it()}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.Y36(Dt),g.Y36(wt),g.Y36(g.R0b))},Vt.\u0275cmp=g.Xpm({type:Vt,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(it,St){1&it&&g.NdJ("click",function(){return St.tapToast()})("mouseenter",function(){return St.stickAround()})("mouseleave",function(){return St.delayedHideToast()}),2&it&&(g.d8E("@flyInOut",St.state),g.Tol(St.toastClasses),g.Udp("display",St.displayStyle))},attrs:He,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(it,St){1&it&&(g.YNc(0,ht,3,0,"button",0),g.YNc(1,at,3,5,"div",1),g.YNc(2,Ne,1,3,"div",2),g.YNc(3,Pe,2,4,"div",3),g.YNc(4,vt,2,2,"div",4)),2&it&&(g.Q6J("ngIf",St.options.closeButton),g.xp6(1),g.Q6J("ngIf",St.title),g.xp6(1),g.Q6J("ngIf",St.message&&St.options.enableHtml),g.xp6(1),g.Q6J("ngIf",St.message&&!St.options.enableHtml),g.xp6(1),g.Q6J("ngIf",St.options.progressBar))},directives:[oe.O5],encapsulation:2,data:{animation:[(0,k.X$)("flyInOut",[(0,k.SB)("inactive",(0,k.oB)({opacity:0})),(0,k.SB)("active",(0,k.oB)({opacity:1})),(0,k.SB)("removed",(0,k.oB)({opacity:0})),(0,k.eR)("inactive => active",(0,k.jt)("{{ easeTime }}ms {{ easing }}")),(0,k.eR)("active => removed",(0,k.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),Vt})();const Yt=Object.assign(Object.assign({},on),{toastComponent:Lt});let sr=(()=>{class Vt{static forRoot(it={}){return{ngModule:Vt,providers:[{provide:Ht,useValue:{default:Yt,config:it}}]}}}return Vt.\u0275fac=function(it){return new(it||Vt)},Vt.\u0275mod=g.oAB({type:Vt}),Vt.\u0275inj=g.cJS({imports:[[oe.ez]]}),Vt})(),yn=(()=>{class Vt{constructor(it,St,ut){this.toastrService=it,this.toastPackage=St,this.appRef=ut,this.width=-1,this.toastClasses="",this.state="inactive",this.message=St.message,this.title=St.title,this.options=St.config,this.originalTimeout=St.config.timeOut,this.toastClasses=`${St.toastType} ${St.config.toastClass}`,this.sub=St.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=St.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=St.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=St.toastRef.countDuplicate().subscribe(Qt=>{this.duplicatesCount=Qt})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const it=(new Date).getTime();this.width=(this.hideTime-it)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.Y36(Dt),g.Y36(wt),g.Y36(g.z2F))},Vt.\u0275cmp=g.Xpm({type:Vt,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(it,St){1&it&&g.NdJ("click",function(){return St.tapToast()})("mouseenter",function(){return St.stickAround()})("mouseleave",function(){return St.delayedHideToast()}),2&it&&(g.Tol(St.toastClasses),g.Udp("display",St.displayStyle))},attrs:He,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(it,St){1&it&&(g.YNc(0,wn,3,0,"button",0),g.YNc(1,ln,3,5,"div",1),g.YNc(2,Dn,1,3,"div",2),g.YNc(3,Nt,2,4,"div",3),g.YNc(4,Jt,2,2,"div",4)),2&it&&(g.Q6J("ngIf",St.options.closeButton),g.xp6(1),g.Q6J("ngIf",St.title),g.xp6(1),g.Q6J("ngIf",St.message&&St.options.enableHtml),g.xp6(1),g.Q6J("ngIf",St.message&&!St.options.enableHtml),g.xp6(1),g.Q6J("ngIf",St.options.progressBar))},directives:[oe.O5],encapsulation:2}),Vt})();Object.assign(Object.assign({},on),{toastComponent:yn})},9485:(Zn,It,j)=>{j.d(It,{YC:()=>Ot,kz:()=>St,nF:()=>it});var g=j(5e3),k=j(9808),he=j(8879),oe=j(7579),je=j(9646);const He=["prevElRef"],ht=["nextElRef"],We=["scrollbarElRef"],at=["paginationElRef"];function Ne(ut,Qt){1&ut&&(g.ynx(0),g._UZ(1,"div",6,7)(3,"div",8,9),g.BQk())}function Pe(ut,Qt){1&ut&&g._UZ(0,"div",10,11)}function vt(ut,Qt){1&ut&&g._UZ(0,"div",12,13)}function wn(ut,Qt){}function _t(ut,Qt){1&ut&&g.YNc(0,wn,0,0,"ng-template")}function ln(ut,Qt){}function Dn(ut,Qt){1&ut&&g.YNc(0,ln,0,0,"ng-template")}function Nt(ut,Qt){}function Jt(ut,Qt){1&ut&&g.YNc(0,Nt,0,0,"ng-template")}function Un(ut,Qt){}const dn=function(ut){return{$implicit:ut}};function xe(ut,Qt){if(1&ut&&(g.TgZ(0,"div",3),g.YNc(1,Un,0,0,"ng-template",18),g.qZA()),2&ut){const xt=g.oxw().$implicit,en=g.oxw(2);g.Q6J("ngClass",en.zoomContainerClass),g.xp6(1),g.Q6J("ngTemplateOutlet",xt.template)("ngTemplateOutletContext",g.VKq(3,dn,xt.slideData))}}function Ge(ut,Qt){}function wt(ut,Qt){if(1&ut&&(g.ynx(0),g.YNc(1,Ge,0,0,"ng-template",18),g.BQk()),2&ut){const xt=g.oxw().$implicit;g.xp6(1),g.Q6J("ngTemplateOutlet",xt.template)("ngTemplateOutletContext",g.VKq(2,dn,xt.slideData))}}function on(ut,Qt){if(1&ut&&(g.TgZ(0,"div",15),g.YNc(1,xe,2,5,"div",16),g.YNc(2,wt,2,4,"ng-container",17),g.qZA()),2&ut){const xt=Qt.$implicit,en=g.oxw().key,Wn=g.oxw();g.Akn(Wn.style),g.Q6J("ngClass",(xt.class?xt.class+" ":"")+Wn.slideClass+(""!==en?" "+Wn.slideDuplicateClass:""))("ngSwitch",xt.zoom),g.uIk("data-swiper-slide-index",xt.virtualIndex?xt.virtualIndex:xt.slideIndex)("data-swiper-autoplay",xt.autoplayDelay),g.xp6(1),g.Q6J("ngSwitchCase",!0)}}function Ht(ut,Qt){1&ut&&(g.YNc(0,on,3,7,"div",14),g.ALo(1,"async")),2&ut&&g.Q6J("ngForOf",g.lcZ(1,1,Qt.loopSlides))}const Oe=[[["","slot","container-start"]],[["","slot","wrapper-start"]],[["","slot","wrapper-end"]],[["","slot","container-end"]]],Bt=function(ut){return{loopSlides:ut,key:"prepend"}},Re=function(ut){return{loopSlides:ut,key:""}},bt=function(ut){return{loopSlides:ut,key:"append"}},Je=["[slot=container-start]","[slot=wrapper-start]","[slot=wrapper-end]","[slot=container-end]"],Ft=["init","enabled","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","on"];function Dt(ut){return"object"==typeof ut&&null!==ut&&ut.constructor&&"Object"===Object.prototype.toString.call(ut).slice(8,-1)}function Lt(ut){return void 0!==ut&&"boolean"!=typeof ut&&!0===ut.enabled}function Yt(ut,Qt,xt){return!0===lr(ut)&&Qt&&!Qt.el||!("boolean"!=typeof Qt&&Qt.el!==(null==xt?void 0:xt.nativeElement)&&("string"==typeof Qt.el||"object"==typeof Qt.el))}function sr(ut,Qt){const xt=["__proto__","constructor","prototype"];Object.keys(Qt).filter(en=>xt.indexOf(en)<0).forEach(en=>{void 0!==ut[en]?ut[en]&&!Qt[en]||(Dt(Qt[en])&&Dt(ut[en])&&Object.keys(Qt[en]).length>0?Qt[en].__swiper__?ut[en]=Qt[en]:sr(ut[en],Qt[en]):ut[en]=Qt[en]):ut[en]=Qt[en]})}function lr(ut){return null!=ut&&"false"!=`${ut}`}const yn=["pagination","navigation","scrollbar","virtual"];function br(ut,Qt={}){return Dt(ut)?ut:!0===lr(ut)&&Qt}function Vt(ut={}){const Qt={on:{}},xt={};sr(Qt,he.ZP.defaults),sr(Qt,he.ZP.extendedDefaults),Qt._emitClasses=!0,Qt.init=!1;const en={},Wn=Ft.map(or=>or.replace(/_/,""));return Object.keys(ut).forEach(or=>{const dr=or.replace(/^_/,"");Wn.indexOf(dr)>=0?Dt(ut[or])?(Qt[dr]={},xt[dr]={},sr(Qt[dr],ut[or]),sr(xt[dr],ut[or])):(Qt[dr]=ut[or],xt[dr]=ut[or]):en[dr]=ut[or]}),["navigation","pagination","scrollbar"].forEach(or=>{!0===Qt[or]&&(Qt[or]={}),!1===Qt[or]&&delete Qt[or]}),{params:Qt,passedParams:xt,rest:en}}Ft.map(ut=>ut.replace(/_/,""));let Ot=(()=>{class ut{constructor(xt){this.template=xt,this.class="",this.autoplayDelay=null,this.slideData={isActive:!1,isPrev:!1,isNext:!1,isVisible:!1,isDuplicate:!1}}set ngClass(xt){this.class=[this.class||"",xt].join(" ")}set zoom(xt){this._zoom=lr(xt)}get zoom(){return this._zoom}get classNames(){return this._classNames}set classNames(xt){this._classNames!==xt&&(this._classNames=xt,this.slideData={isActive:this._hasClass(["swiper-slide-active","swiper-slide-duplicate-active"]),isVisible:this._hasClass(["swiper-slide-visible"]),isDuplicate:this._hasClass(["swiper-slide-duplicate"]),isPrev:this._hasClass(["swiper-slide-prev","swiper-slide-duplicate-prev"]),isNext:this._hasClass(["swiper-slide-next","swiper-slide-duplicate-next"])})}_hasClass(xt){return xt.some(en=>this._classNames.indexOf(en)>=0)}}return ut.\u0275fac=function(xt){return new(xt||ut)(g.Y36(g.Rgc))},ut.\u0275dir=g.lG2({type:ut,selectors:[["ng-template","swiperSlide",""]],inputs:{virtualIndex:"virtualIndex",class:"class",ngClass:"ngClass",autoplayDelay:["data-swiper-autoplay","autoplayDelay"],zoom:"zoom"}}),ut})(),it=(()=>{class ut{constructor(xt,en,Wn,or){this._ngZone=xt,this.elementRef=en,this._changeDetectorRef=Wn,this._platformId=or,this.slideClass="swiper-slide",this.wrapperClass="swiper-wrapper",this.showNavigation=!0,this.showPagination=!0,this.showScrollbar=!0,this.s__beforeBreakpoint=new g.vpe,this.s__containerClasses=new g.vpe,this.s__slideClass=new g.vpe,this.s__swiper=new g.vpe,this.s_activeIndexChange=new g.vpe,this.s_afterInit=new g.vpe,this.s_autoplay=new g.vpe,this.s_autoplayStart=new g.vpe,this.s_autoplayStop=new g.vpe,this.s_autoplayPause=new g.vpe,this.s_autoplayResume=new g.vpe,this.s_beforeDestroy=new g.vpe,this.s_beforeInit=new g.vpe,this.s_beforeLoopFix=new g.vpe,this.s_beforeResize=new g.vpe,this.s_beforeSlideChangeStart=new g.vpe,this.s_beforeTransitionStart=new g.vpe,this.s_breakpoint=new g.vpe,this.s_changeDirection=new g.vpe,this.s_click=new g.vpe,this.s_doubleTap=new g.vpe,this.s_doubleClick=new g.vpe,this.s_destroy=new g.vpe,this.s_fromEdge=new g.vpe,this.s_hashChange=new g.vpe,this.s_hashSet=new g.vpe,this.s_imagesReady=new g.vpe,this.s_init=new g.vpe,this.s_keyPress=new g.vpe,this.s_lazyImageLoad=new g.vpe,this.s_lazyImageReady=new g.vpe,this.s_loopFix=new g.vpe,this.s_momentumBounce=new g.vpe,this.s_navigationHide=new g.vpe,this.s_navigationShow=new g.vpe,this.s_navigationPrev=new g.vpe,this.s_navigationNext=new g.vpe,this.s_observerUpdate=new g.vpe,this.s_orientationchange=new g.vpe,this.s_paginationHide=new g.vpe,this.s_paginationRender=new g.vpe,this.s_paginationShow=new g.vpe,this.s_paginationUpdate=new g.vpe,this.s_progress=new g.vpe,this.s_reachBeginning=new g.vpe,this.s_reachEnd=new g.vpe,this.s_realIndexChange=new g.vpe,this.s_resize=new g.vpe,this.s_scroll=new g.vpe,this.s_scrollbarDragEnd=new g.vpe,this.s_scrollbarDragMove=new g.vpe,this.s_scrollbarDragStart=new g.vpe,this.s_setTransition=new g.vpe,this.s_setTranslate=new g.vpe,this.s_slideChange=new g.vpe,this.s_slideChangeTransitionEnd=new g.vpe,this.s_slideChangeTransitionStart=new g.vpe,this.s_slideNextTransitionEnd=new g.vpe,this.s_slideNextTransitionStart=new g.vpe,this.s_slidePrevTransitionEnd=new g.vpe,this.s_slidePrevTransitionStart=new g.vpe,this.s_slideResetTransitionStart=new g.vpe,this.s_slideResetTransitionEnd=new g.vpe,this.s_sliderMove=new g.vpe,this.s_sliderFirstMove=new g.vpe,this.s_slidesLengthChange=new g.vpe,this.s_slidesGridLengthChange=new g.vpe,this.s_snapGridLengthChange=new g.vpe,this.s_snapIndexChange=new g.vpe,this.s_tap=new g.vpe,this.s_toEdge=new g.vpe,this.s_touchEnd=new g.vpe,this.s_touchMove=new g.vpe,this.s_touchMoveOpposite=new g.vpe,this.s_touchStart=new g.vpe,this.s_transitionEnd=new g.vpe,this.s_transitionStart=new g.vpe,this.s_update=new g.vpe,this.s_zoomChange=new g.vpe,this.s_swiper=new g.vpe,this.s_lock=new g.vpe,this.s_unlock=new g.vpe,this._activeSlides=new oe.x,this.containerClasses="swiper",this.slidesChanges=dr=>{this.slides=dr.map((Yr,ii)=>(Yr.slideIndex=ii,Yr.classNames=this.slideClass||"",Yr)),this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.virtual?this.swiperRef&&this.swiperRef.virtual&&this._ngZone.runOutsideAngular(()=>{this.swiperRef.virtual.slides=this.slides,this.swiperRef.virtual.update(!0)}):this.loopedSlides&&(this.prependSlides=(0,je.of)(this.slides.slice(this.slides.length-this.loopedSlides)),this.appendSlides=(0,je.of)(this.slides.slice(0,this.loopedSlides))),this._changeDetectorRef.detectChanges()},this.style=null,this.updateVirtualSlides=dr=>{!this.swiperRef||this.currentVirtualData&&this.currentVirtualData.from===dr.from&&this.currentVirtualData.to===dr.to&&this.currentVirtualData.offset===dr.offset||(this.style=this.swiperRef.isHorizontal()?{[this.swiperRef.rtlTranslate?"right":"left"]:`${dr.offset}px`}:{top:`${dr.offset}px`},this.currentVirtualData=dr,this._activeSlides.next(dr.slides),this._ngZone.run(()=>{this._changeDetectorRef.detectChanges()}),this._ngZone.runOutsideAngular(()=>{this.swiperRef.updateSlides(),this.swiperRef.updateProgress(),this.swiperRef.updateSlidesClasses(),Lt(this.swiperRef.params.lazy)&&this.swiperRef.lazy.load(),this.swiperRef.virtual.update(!0)}))}}set navigation(xt){var en,Wn,or;const dr="boolean"!=typeof this._navigation&&""!==this._navigation?null===(en=this._navigation)||void 0===en?void 0:en.nextEl:null,Yr="boolean"!=typeof this._navigation&&""!==this._navigation?null===(Wn=this._navigation)||void 0===Wn?void 0:Wn.prevEl:null;this._navigation=br(xt,{nextEl:dr||null,prevEl:Yr||null}),this.showNavigation=!(!0!==lr(xt)||this._navigation&&"boolean"!=typeof this._navigation&&this._navigation.prevEl!==(null===(or=this._prevElRef)||void 0===or?void 0:or.nativeElement)&&(null!==this._navigation.prevEl||null!==this._navigation.nextEl)&&("string"==typeof this._navigation.nextEl||"string"==typeof this._navigation.prevEl||"object"==typeof this._navigation.nextEl||"object"==typeof this._navigation.prevEl))}get navigation(){return this._navigation}set pagination(xt){var en;const Wn="boolean"!=typeof this._pagination&&""!==this._pagination?null===(en=this._pagination)||void 0===en?void 0:en.el:null;this._pagination=br(xt,{el:Wn||null}),this.showPagination=Yt(xt,this._pagination,this._paginationElRef)}get pagination(){return this._pagination}set scrollbar(xt){var en;const Wn="boolean"!=typeof this._scrollbar&&""!==this._scrollbar?null===(en=this._scrollbar)||void 0===en?void 0:en.el:null;this._scrollbar=br(xt,{el:Wn||null}),this.showScrollbar=Yt(xt,this._scrollbar,this._scrollbarElRef)}get scrollbar(){return this._scrollbar}set virtual(xt){this._virtual=br(xt)}get virtual(){return this._virtual}set config(xt){this.updateSwiper(xt);const{params:en}=Vt(xt);Object.assign(this,en)}set prevElRef(xt){this._prevElRef=xt,this._setElement(xt,this.navigation,"navigation","prevEl")}set nextElRef(xt){this._nextElRef=xt,this._setElement(xt,this.navigation,"navigation","nextEl")}set scrollbarElRef(xt){this._scrollbarElRef=xt,this._setElement(xt,this.scrollbar,"scrollbar")}set paginationElRef(xt){this._paginationElRef=xt,this._setElement(xt,this.pagination,"pagination")}get activeSlides(){return this.virtual?this._activeSlides:(0,je.of)(this.slides)}get zoomContainerClass(){return this.zoom&&"boolean"!=typeof this.zoom?this.zoom.containerClass:"swiper-zoom-container"}_setElement(xt,en,Wn,or="el"){if(!en||!xt)return;if(xt.nativeElement){if(en[or]===xt.nativeElement)return;en[or]=xt.nativeElement}const dr={};dr[Wn]=!0,this.updateInitSwiper(dr)}ngOnInit(){const{params:xt}=Vt(this);Object.assign(this,xt)}ngAfterViewInit(){this.childrenSlidesInit(),this.initSwiper(),this._changeDetectorRef.detectChanges(),setTimeout(()=>{this.s_swiper.emit(this.swiperRef)})}childrenSlidesInit(){this.slidesChanges(this.slidesEl),this.slidesEl.changes.subscribe(this.slidesChanges)}get isSwiperActive(){return this.swiperRef&&!this.swiperRef.destroyed}initSwiper(){const{params:xt}=Vt(this);Object.assign(this,xt),this._ngZone.runOutsideAngular(()=>{xt.init=!1,xt.virtual||(xt.observer=!0),xt.onAny=(ii,...er)=>{const Gr=this["s_"+ii];Gr&&Gr.emit([...er])},Object.assign(xt.on,{_containerClasses:(ii,er)=>{setTimeout(()=>{this.containerClasses=er})},_slideClasses:(ii,er)=>{er.forEach(({slideEl:Gr,classNames:Mr},Rr)=>{const is=Gr.getAttribute("data-swiper-slide-index"),Xi=is?parseInt(is):Rr;if(this.virtual){const cn=this.slides.find(nt=>nt.virtualIndex&&nt.virtualIndex===Xi);if(cn)return void(cn.classNames=Mr)}this.slides[Xi]&&(this.slides[Xi].classNames=Mr)}),this._changeDetectorRef.detectChanges()}});const dr=new he.ZP(xt);dr.loopCreate=()=>{},dr.loopDestroy=()=>{},xt.loop&&(dr.loopedSlides=this.loopedSlides);const Yr=Lt(dr.params.virtual);if(dr.virtual&&Yr){dr.virtual.slides=this.slides;const ii={cache:!1,slides:this.slides,renderExternal:this.updateVirtualSlides,renderExternalUpdate:!1};sr(dr.params.virtual,ii),sr(dr.originalParams.virtual,ii)}if((0,k.NF)(this._platformId)){this.swiperRef=dr.init(this.elementRef.nativeElement);const ii=Lt(this.swiperRef.params.virtual);this.swiperRef.virtual&&ii&&this.swiperRef.virtual.update(!0),this._changeDetectorRef.detectChanges()}})}ngOnChanges(xt){this.updateSwiper(xt),this._changeDetectorRef.detectChanges()}updateInitSwiper(xt){!xt||!this.swiperRef||this.swiperRef.destroyed||this._ngZone.runOutsideAngular(()=>{const{pagination:Wn,navigation:or,scrollbar:dr,thumbs:ii}=this.swiperRef;xt.pagination&&(this.pagination&&"boolean"!=typeof this.pagination&&this.pagination.el&&Wn&&!Wn.el?(this.updateParameter("pagination",this.pagination),Wn.init(),Wn.render(),Wn.update()):(Wn.destroy(),Wn.el=null)),xt.scrollbar&&(this.scrollbar&&"boolean"!=typeof this.scrollbar&&this.scrollbar.el&&dr&&!dr.el?(this.updateParameter("scrollbar",this.scrollbar),dr.init(),dr.updateSize(),dr.setTranslate()):(dr.destroy(),dr.el=null)),xt.navigation&&(this.navigation&&"boolean"!=typeof this.navigation&&this.navigation.prevEl&&this.navigation.nextEl&&or&&!or.prevEl&&!or.nextEl?(this.updateParameter("navigation",this.navigation),or.init(),or.update()):or.prevEl&&or.nextEl&&(or.destroy(),or.nextEl=null,or.prevEl=null)),xt.thumbs&&this.thumbs&&this.thumbs.swiper&&(this.updateParameter("thumbs",this.thumbs),ii.init()&&ii.update(!0)),xt.controller&&this.controller&&this.controller.control&&(this.swiperRef.controller.control=this.controller.control),this.swiperRef.update()})}updateSwiper(xt){this._ngZone.runOutsideAngular(()=>{var en,Wn;if(!xt.config&&xt&&this.swiperRef&&!this.swiperRef.destroyed){for(const or in xt){if(yn.indexOf(or)>=0)continue;const dr=null!==(Wn=null===(en=xt[or])||void 0===en?void 0:en.currentValue)&&void 0!==Wn?Wn:xt[or];this.updateParameter(or,dr)}xt.allowSlideNext&&(this.swiperRef.allowSlideNext=this.allowSlideNext),xt.allowSlidePrev&&(this.swiperRef.allowSlidePrev=this.allowSlidePrev),xt.direction&&this.swiperRef.changeDirection(this.direction,!1),xt.breakpoints&&(this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.swiperRef.currentBreakpoint=null,this.swiperRef.setBreakpoint()),(xt.thumbs||xt.controller)&&this.updateInitSwiper(xt),this.swiperRef.update()}})}calcLoopedSlides(){if(!this.loop)return!1;let xt=this.slidesPerView;if(this.breakpoints){const Wn=he.ZP.prototype.getBreakpoint(this.breakpoints),or=Wn in this.breakpoints?this.breakpoints[Wn]:void 0;or&&or.slidesPerView&&(xt=or.slidesPerView)}if("auto"===xt)return this.loopedSlides=this.slides.length,this.slides.length;let en=this.loopedSlides||xt;return!!en&&(this.loopAdditionalSlides&&(en+=this.loopAdditionalSlides),en>this.slides.length&&(en=this.slides.length),this.loopedSlides=en,!0)}updateParameter(xt,en){if(!this.swiperRef||this.swiperRef.destroyed)return;const Wn=xt.replace(/^_/,""),or=Dt(this.swiperRef.params[Wn]);"enabled"!==Wn?or&&Dt(en)?sr(this.swiperRef.params[Wn],en):this.swiperRef.params[Wn]=en:!0===en?this.swiperRef.enable():!1===en&&this.swiperRef.disable()}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{var xt;null===(xt=this.swiperRef)||void 0===xt||xt.destroy(!0,!1)})}}return ut.\u0275fac=function(xt){return new(xt||ut)(g.Y36(g.R0b),g.Y36(g.SBq),g.Y36(g.sBO),g.Y36(g.Lbi))},ut.\u0275cmp=g.Xpm({type:ut,selectors:[["swiper"],["","swiper",""]],contentQueries:function(xt,en,Wn){if(1&xt&&g.Suo(Wn,Ot,4),2&xt){let or;g.iGM(or=g.CRH())&&(en.slidesEl=or)}},viewQuery:function(xt,en){if(1&xt&&(g.Gf(He,5),g.Gf(ht,5),g.Gf(We,5),g.Gf(at,5)),2&xt){let Wn;g.iGM(Wn=g.CRH())&&(en.prevElRef=Wn.first),g.iGM(Wn=g.CRH())&&(en.nextElRef=Wn.first),g.iGM(Wn=g.CRH())&&(en.scrollbarElRef=Wn.first),g.iGM(Wn=g.CRH())&&(en.paginationElRef=Wn.first)}},hostVars:2,hostBindings:function(xt,en){2&xt&&g.Tol(en.containerClasses)},inputs:{enabled:"enabled",on:"on",direction:"direction",touchEventsTarget:"touchEventsTarget",initialSlide:"initialSlide",speed:"speed",cssMode:"cssMode",updateOnWindowResize:"updateOnWindowResize",resizeObserver:"resizeObserver",nested:"nested",focusableElements:"focusableElements",width:"width",height:"height",preventInteractionOnTransition:"preventInteractionOnTransition",userAgent:"userAgent",url:"url",edgeSwipeDetection:"edgeSwipeDetection",edgeSwipeThreshold:"edgeSwipeThreshold",freeMode:"freeMode",autoHeight:"autoHeight",setWrapperSize:"setWrapperSize",virtualTranslate:"virtualTranslate",effect:"effect",breakpoints:"breakpoints",spaceBetween:"spaceBetween",slidesPerView:"slidesPerView",maxBackfaceHiddenSlides:"maxBackfaceHiddenSlides",grid:"grid",slidesPerGroup:"slidesPerGroup",slidesPerGroupSkip:"slidesPerGroupSkip",centeredSlides:"centeredSlides",centeredSlidesBounds:"centeredSlidesBounds",slidesOffsetBefore:"slidesOffsetBefore",slidesOffsetAfter:"slidesOffsetAfter",normalizeSlideIndex:"normalizeSlideIndex",centerInsufficientSlides:"centerInsufficientSlides",watchOverflow:"watchOverflow",roundLengths:"roundLengths",touchRatio:"touchRatio",touchAngle:"touchAngle",simulateTouch:"simulateTouch",shortSwipes:"shortSwipes",longSwipes:"longSwipes",longSwipesRatio:"longSwipesRatio",longSwipesMs:"longSwipesMs",followFinger:"followFinger",allowTouchMove:"allowTouchMove",threshold:"threshold",touchMoveStopPropagation:"touchMoveStopPropagation",touchStartPreventDefault:"touchStartPreventDefault",touchStartForcePreventDefault:"touchStartForcePreventDefault",touchReleaseOnEdges:"touchReleaseOnEdges",uniqueNavElements:"uniqueNavElements",resistance:"resistance",resistanceRatio:"resistanceRatio",watchSlidesProgress:"watchSlidesProgress",grabCursor:"grabCursor",preventClicks:"preventClicks",preventClicksPropagation:"preventClicksPropagation",slideToClickedSlide:"slideToClickedSlide",preloadImages:"preloadImages",updateOnImagesReady:"updateOnImagesReady",loop:"loop",loopAdditionalSlides:"loopAdditionalSlides",loopedSlides:"loopedSlides",loopedSlidesLimit:"loopedSlidesLimit",loopFillGroupWithBlank:"loopFillGroupWithBlank",loopPreventsSlide:"loopPreventsSlide",rewind:"rewind",allowSlidePrev:"allowSlidePrev",allowSlideNext:"allowSlideNext",swipeHandler:"swipeHandler",noSwiping:"noSwiping",noSwipingClass:"noSwipingClass",noSwipingSelector:"noSwipingSelector",passiveListeners:"passiveListeners",containerModifierClass:"containerModifierClass",slideClass:"slideClass",slideBlankClass:"slideBlankClass",slideActiveClass:"slideActiveClass",slideDuplicateActiveClass:"slideDuplicateActiveClass",slideVisibleClass:"slideVisibleClass",slideDuplicateClass:"slideDuplicateClass",slideNextClass:"slideNextClass",slideDuplicateNextClass:"slideDuplicateNextClass",slidePrevClass:"slidePrevClass",slideDuplicatePrevClass:"slideDuplicatePrevClass",wrapperClass:"wrapperClass",runCallbacksOnInit:"runCallbacksOnInit",observeParents:"observeParents",observeSlideChildren:"observeSlideChildren",a11y:"a11y",autoplay:"autoplay",controller:"controller",coverflowEffect:"coverflowEffect",cubeEffect:"cubeEffect",fadeEffect:"fadeEffect",flipEffect:"flipEffect",creativeEffect:"creativeEffect",cardsEffect:"cardsEffect",hashNavigation:"hashNavigation",history:"history",keyboard:"keyboard",lazy:"lazy",mousewheel:"mousewheel",parallax:"parallax",thumbs:"thumbs",zoom:"zoom",class:"class",id:"id",navigation:"navigation",pagination:"pagination",scrollbar:"scrollbar",virtual:"virtual",config:"config"},outputs:{s__beforeBreakpoint:"_beforeBreakpoint",s__containerClasses:"_containerClasses",s__slideClass:"_slideClass",s__swiper:"_swiper",s_activeIndexChange:"activeIndexChange",s_afterInit:"afterInit",s_autoplay:"autoplay",s_autoplayStart:"autoplayStart",s_autoplayStop:"autoplayStop",s_autoplayPause:"autoplayPause",s_autoplayResume:"autoplayResume",s_beforeDestroy:"beforeDestroy",s_beforeInit:"beforeInit",s_beforeLoopFix:"beforeLoopFix",s_beforeResize:"beforeResize",s_beforeSlideChangeStart:"beforeSlideChangeStart",s_beforeTransitionStart:"beforeTransitionStart",s_breakpoint:"breakpoint",s_changeDirection:"changeDirection",s_click:"click",s_doubleTap:"doubleTap",s_doubleClick:"doubleClick",s_destroy:"destroy",s_fromEdge:"fromEdge",s_hashChange:"hashChange",s_hashSet:"hashSet",s_imagesReady:"imagesReady",s_init:"init",s_keyPress:"keyPress",s_lazyImageLoad:"lazyImageLoad",s_lazyImageReady:"lazyImageReady",s_loopFix:"loopFix",s_momentumBounce:"momentumBounce",s_navigationHide:"navigationHide",s_navigationShow:"navigationShow",s_navigationPrev:"navigationPrev",s_navigationNext:"navigationNext",s_observerUpdate:"observerUpdate",s_orientationchange:"orientationchange",s_paginationHide:"paginationHide",s_paginationRender:"paginationRender",s_paginationShow:"paginationShow",s_paginationUpdate:"paginationUpdate",s_progress:"progress",s_reachBeginning:"reachBeginning",s_reachEnd:"reachEnd",s_realIndexChange:"realIndexChange",s_resize:"resize",s_scroll:"scroll",s_scrollbarDragEnd:"scrollbarDragEnd",s_scrollbarDragMove:"scrollbarDragMove",s_scrollbarDragStart:"scrollbarDragStart",s_setTransition:"setTransition",s_setTranslate:"setTranslate",s_slideChange:"slideChange",s_slideChangeTransitionEnd:"slideChangeTransitionEnd",s_slideChangeTransitionStart:"slideChangeTransitionStart",s_slideNextTransitionEnd:"slideNextTransitionEnd",s_slideNextTransitionStart:"slideNextTransitionStart",s_slidePrevTransitionEnd:"slidePrevTransitionEnd",s_slidePrevTransitionStart:"slidePrevTransitionStart",s_slideResetTransitionStart:"slideResetTransitionStart",s_slideResetTransitionEnd:"slideResetTransitionEnd",s_sliderMove:"sliderMove",s_sliderFirstMove:"sliderFirstMove",s_slidesLengthChange:"slidesLengthChange",s_slidesGridLengthChange:"slidesGridLengthChange",s_snapGridLengthChange:"snapGridLengthChange",s_snapIndexChange:"snapIndexChange",s_tap:"tap",s_toEdge:"toEdge",s_touchEnd:"touchEnd",s_touchMove:"touchMove",s_touchMoveOpposite:"touchMoveOpposite",s_touchStart:"touchStart",s_transitionEnd:"transitionEnd",s_transitionStart:"transitionStart",s_update:"update",s_zoomChange:"zoomChange",s_swiper:"swiper",s_lock:"lock",s_unlock:"unlock"},features:[g.TTD],ngContentSelectors:Je,decls:13,vars:17,consts:[[4,"ngIf"],["class","swiper-scrollbar",4,"ngIf"],["class","swiper-pagination",4,"ngIf"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["slidesTemplate",""],[1,"swiper-button-prev"],["prevElRef",""],[1,"swiper-button-next"],["nextElRef",""],[1,"swiper-scrollbar"],["scrollbarElRef",""],[1,"swiper-pagination"],["paginationElRef",""],[3,"ngClass","style","ngSwitch",4,"ngFor","ngForOf"],[3,"ngClass","ngSwitch"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(xt,en){if(1&xt&&(g.F$t(Oe),g.Hsn(0),g.YNc(1,Ne,5,0,"ng-container",0),g.YNc(2,Pe,2,0,"div",1),g.YNc(3,vt,2,0,"div",2),g.TgZ(4,"div",3),g.Hsn(5,1),g.YNc(6,_t,1,0,null,4),g.YNc(7,Dn,1,0,null,4),g.YNc(8,Jt,1,0,null,4),g.Hsn(9,2),g.qZA(),g.Hsn(10,3),g.YNc(11,Ht,2,3,"ng-template",null,5,g.W1O)),2&xt){const Wn=g.MAs(12);g.xp6(1),g.Q6J("ngIf",en.navigation&&en.showNavigation),g.xp6(1),g.Q6J("ngIf",en.scrollbar&&en.showScrollbar),g.xp6(1),g.Q6J("ngIf",en.pagination&&en.showPagination),g.xp6(1),g.Q6J("ngClass",en.wrapperClass),g.uIk("id",en.id),g.xp6(2),g.Q6J("ngTemplateOutlet",Wn)("ngTemplateOutletContext",g.VKq(11,Bt,en.prependSlides)),g.xp6(1),g.Q6J("ngTemplateOutlet",Wn)("ngTemplateOutletContext",g.VKq(13,Re,en.activeSlides)),g.xp6(1),g.Q6J("ngTemplateOutlet",Wn)("ngTemplateOutletContext",g.VKq(15,bt,en.appendSlides))}},directives:[k.O5,k.mk,k.tP,k.sg,k.RF,k.n9,k.ED],pipes:[k.Ov],styles:["swiper{display:block}\n"],encapsulation:2,changeDetection:0}),ut})(),St=(()=>{class ut{}return ut.\u0275fac=function(xt){return new(xt||ut)},ut.\u0275mod=g.oAB({type:ut}),ut.\u0275inj=g.cJS({imports:[[k.ez]]}),ut})()},8879:(Zn,It,j)=>{function g(l){return null!==l&&"object"==typeof l&&"constructor"in l&&l.constructor===Object}function k(l={},A={}){Object.keys(A).forEach(I=>{void 0===l[I]?l[I]=A[I]:g(A[I])&&g(l[I])&&Object.keys(A[I]).length>0&&k(l[I],A[I])})}j.d(It,{W_:()=>Y,tl:()=>L,ZP:()=>Wr});const he={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function oe(){const l="undefined"!=typeof document?document:{};return k(l,he),l}const je={document:he,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:l=>"undefined"==typeof setTimeout?(l(),null):setTimeout(l,0),cancelAnimationFrame(l){"undefined"!=typeof setTimeout&&clearTimeout(l)}};function He(){const l="undefined"!=typeof window?window:{};return k(l,je),l}class We extends Array{constructor(A){"number"==typeof A?super(A):(super(...A||[]),function ht(l){const A=l.__proto__;Object.defineProperty(l,"__proto__",{get:()=>A,set(I){A.__proto__=I}})}(this))}}function at(l=[]){const A=[];return l.forEach(I=>{Array.isArray(I)?A.push(...at(I)):A.push(I)}),A}function Ne(l,A){return Array.prototype.filter.call(l,A)}function _t(l,A){const I=He(),P=oe();let z=[];if(!A&&l instanceof We)return l;if(!l)return new We(z);if("string"==typeof l){const J=l.trim();if(J.indexOf("<")>=0&&J.indexOf(">")>=0){let ge="div";0===J.indexOf("<li")&&(ge="ul"),0===J.indexOf("<tr")&&(ge="tbody"),(0===J.indexOf("<td")||0===J.indexOf("<th"))&&(ge="tr"),0===J.indexOf("<tbody")&&(ge="table"),0===J.indexOf("<option")&&(ge="select");const we=P.createElement(ge);we.innerHTML=J;for(let ae=0;ae<we.childNodes.length;ae+=1)z.push(we.childNodes[ae])}else z=function wn(l,A){if("string"!=typeof l)return[l];const I=[],P=A.querySelectorAll(l);for(let z=0;z<P.length;z+=1)I.push(P[z]);return I}(l.trim(),A||P)}else if(l.nodeType||l===I||l===P)z.push(l);else if(Array.isArray(l)){if(l instanceof We)return l;z=l}return new We(function Pe(l){const A=[];for(let I=0;I<l.length;I+=1)-1===A.indexOf(l[I])&&A.push(l[I]);return A}(z))}_t.fn=We.prototype;const Fn="resize scroll".split(" ");function zt(l){return function A(...I){if(void 0===I[0]){for(let P=0;P<this.length;P+=1)Fn.indexOf(l)<0&&(l in this[P]?this[P][l]():_t(this[P]).trigger(l));return this}return this.on(l,...I)}}zt("click"),zt("blur"),zt("focus"),zt("focusin"),zt("focusout"),zt("keyup"),zt("keydown"),zt("keypress"),zt("submit"),zt("change"),zt("mousedown"),zt("mousemove"),zt("mouseup"),zt("mouseenter"),zt("mouseleave"),zt("mouseout"),zt("mouseover"),zt("touchstart"),zt("touchend"),zt("touchmove"),zt("resize"),zt("scroll");const Si={addClass:function ln(...l){const A=at(l.map(I=>I.split(" ")));return this.forEach(I=>{I.classList.add(...A)}),this},removeClass:function Dn(...l){const A=at(l.map(I=>I.split(" ")));return this.forEach(I=>{I.classList.remove(...A)}),this},hasClass:function Jt(...l){const A=at(l.map(I=>I.split(" ")));return Ne(this,I=>A.filter(P=>I.classList.contains(P)).length>0).length>0},toggleClass:function Nt(...l){const A=at(l.map(I=>I.split(" ")));this.forEach(I=>{A.forEach(P=>{I.classList.toggle(P)})})},attr:function Un(l,A){if(1===arguments.length&&"string"==typeof l)return this[0]?this[0].getAttribute(l):void 0;for(let I=0;I<this.length;I+=1)if(2===arguments.length)this[I].setAttribute(l,A);else for(const P in l)this[I][P]=l[P],this[I].setAttribute(P,l[P]);return this},removeAttr:function dn(l){for(let A=0;A<this.length;A+=1)this[A].removeAttribute(l);return this},transform:function Bt(l){for(let A=0;A<this.length;A+=1)this[A].style.transform=l;return this},transition:function Re(l){for(let A=0;A<this.length;A+=1)this[A].style.transitionDuration="string"!=typeof l?`${l}ms`:l;return this},on:function bt(...l){let[A,I,P,z]=l;function J(me){const ce=me.target;if(!ce)return;const ue=me.target.dom7EventData||[];if(ue.indexOf(me)<0&&ue.unshift(me),_t(ce).is(I))P.apply(ce,ue);else{const Te=_t(ce).parents();for(let ze=0;ze<Te.length;ze+=1)_t(Te[ze]).is(I)&&P.apply(Te[ze],ue)}}function ge(me){const ce=me&&me.target&&me.target.dom7EventData||[];ce.indexOf(me)<0&&ce.unshift(me),P.apply(this,ce)}"function"==typeof l[1]&&([A,P,z]=l,I=void 0),z||(z=!1);const we=A.split(" ");let ae;for(let me=0;me<this.length;me+=1){const ce=this[me];if(I)for(ae=0;ae<we.length;ae+=1){const ue=we[ae];ce.dom7LiveListeners||(ce.dom7LiveListeners={}),ce.dom7LiveListeners[ue]||(ce.dom7LiveListeners[ue]=[]),ce.dom7LiveListeners[ue].push({listener:P,proxyListener:J}),ce.addEventListener(ue,J,z)}else for(ae=0;ae<we.length;ae+=1){const ue=we[ae];ce.dom7Listeners||(ce.dom7Listeners={}),ce.dom7Listeners[ue]||(ce.dom7Listeners[ue]=[]),ce.dom7Listeners[ue].push({listener:P,proxyListener:ge}),ce.addEventListener(ue,ge,z)}}return this},off:function Je(...l){let[A,I,P,z]=l;"function"==typeof l[1]&&([A,P,z]=l,I=void 0),z||(z=!1);const J=A.split(" ");for(let ge=0;ge<J.length;ge+=1){const we=J[ge];for(let ae=0;ae<this.length;ae+=1){const me=this[ae];let ce;if(!I&&me.dom7Listeners?ce=me.dom7Listeners[we]:I&&me.dom7LiveListeners&&(ce=me.dom7LiveListeners[we]),ce&&ce.length)for(let ue=ce.length-1;ue>=0;ue-=1){const Te=ce[ue];P&&Te.listener===P||P&&Te.listener&&Te.listener.dom7proxy&&Te.listener.dom7proxy===P?(me.removeEventListener(we,Te.proxyListener,z),ce.splice(ue,1)):P||(me.removeEventListener(we,Te.proxyListener,z),ce.splice(ue,1))}}}return this},trigger:function Dt(...l){const A=He(),I=l[0].split(" "),P=l[1];for(let z=0;z<I.length;z+=1){const J=I[z];for(let ge=0;ge<this.length;ge+=1){const we=this[ge];if(A.CustomEvent){const ae=new A.CustomEvent(J,{detail:P,bubbles:!0,cancelable:!0});we.dom7EventData=l.filter((me,ce)=>ce>0),we.dispatchEvent(ae),we.dom7EventData=[],delete we.dom7EventData}}}return this},transitionEnd:function Lt(l){const A=this;return l&&A.on("transitionend",function I(P){P.target===this&&(l.call(this,P),A.off("transitionend",I))}),this},outerWidth:function lr(l){if(this.length>0){if(l){const A=this.styles();return this[0].offsetWidth+parseFloat(A.getPropertyValue("margin-right"))+parseFloat(A.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function br(l){if(this.length>0){if(l){const A=this.styles();return this[0].offsetHeight+parseFloat(A.getPropertyValue("margin-top"))+parseFloat(A.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function it(){const l=He();return this[0]?l.getComputedStyle(this[0],null):{}},offset:function mr(){if(this.length>0){const l=He(),A=oe(),I=this[0],P=I.getBoundingClientRect(),z=A.body;return{top:P.top+(I===l?l.scrollY:I.scrollTop)-(I.clientTop||z.clientTop||0),left:P.left+(I===l?l.scrollX:I.scrollLeft)-(I.clientLeft||z.clientLeft||0)}}return null},css:function St(l,A){const I=He();let P;if(1===arguments.length){if("string"!=typeof l){for(P=0;P<this.length;P+=1)for(const z in l)this[P].style[z]=l[z];return this}if(this[0])return I.getComputedStyle(this[0],null).getPropertyValue(l)}if(2===arguments.length&&"string"==typeof l){for(P=0;P<this.length;P+=1)this[P].style[l]=A;return this}return this},each:function ut(l){return l?(this.forEach((A,I)=>{l.apply(A,[A,I])}),this):this},html:function xt(l){if(void 0===l)return this[0]?this[0].innerHTML:null;for(let A=0;A<this.length;A+=1)this[A].innerHTML=l;return this},text:function en(l){if(void 0===l)return this[0]?this[0].textContent.trim():null;for(let A=0;A<this.length;A+=1)this[A].textContent=l;return this},is:function Wn(l){const A=He(),I=oe(),P=this[0];let z,J;if(!P||void 0===l)return!1;if("string"==typeof l){if(P.matches)return P.matches(l);if(P.webkitMatchesSelector)return P.webkitMatchesSelector(l);if(P.msMatchesSelector)return P.msMatchesSelector(l);for(z=_t(l),J=0;J<z.length;J+=1)if(z[J]===P)return!0;return!1}if(l===I)return P===I;if(l===A)return P===A;if(l.nodeType||l instanceof We){for(z=l.nodeType?[l]:l,J=0;J<z.length;J+=1)if(z[J]===P)return!0;return!1}return!1},index:function or(){let A,l=this[0];if(l){for(A=0;null!==(l=l.previousSibling);)1===l.nodeType&&(A+=1);return A}},eq:function dr(l){if(void 0===l)return this;const A=this.length;if(l>A-1)return _t([]);if(l<0){const I=A+l;return _t(I<0?[]:[this[I]])}return _t([this[l]])},append:function Yr(...l){let A;const I=oe();for(let P=0;P<l.length;P+=1){A=l[P];for(let z=0;z<this.length;z+=1)if("string"==typeof A){const J=I.createElement("div");for(J.innerHTML=A;J.firstChild;)this[z].appendChild(J.firstChild)}else if(A instanceof We)for(let J=0;J<A.length;J+=1)this[z].appendChild(A[J]);else this[z].appendChild(A)}return this},prepend:function er(l){const A=oe();let I,P;for(I=0;I<this.length;I+=1)if("string"==typeof l){const z=A.createElement("div");for(z.innerHTML=l,P=z.childNodes.length-1;P>=0;P-=1)this[I].insertBefore(z.childNodes[P],this[I].childNodes[0])}else if(l instanceof We)for(P=0;P<l.length;P+=1)this[I].insertBefore(l[P],this[I].childNodes[0]);else this[I].insertBefore(l,this[I].childNodes[0]);return this},next:function is(l){return this.length>0?l?this[0].nextElementSibling&&_t(this[0].nextElementSibling).is(l)?_t([this[0].nextElementSibling]):_t([]):_t(this[0].nextElementSibling?[this[0].nextElementSibling]:[]):_t([])},nextAll:function Xi(l){const A=[];let I=this[0];if(!I)return _t([]);for(;I.nextElementSibling;){const P=I.nextElementSibling;l?_t(P).is(l)&&A.push(P):A.push(P),I=P}return _t(A)},prev:function cn(l){if(this.length>0){const A=this[0];return l?A.previousElementSibling&&_t(A.previousElementSibling).is(l)?_t([A.previousElementSibling]):_t([]):_t(A.previousElementSibling?[A.previousElementSibling]:[])}return _t([])},prevAll:function nt(l){const A=[];let I=this[0];if(!I)return _t([]);for(;I.previousElementSibling;){const P=I.previousElementSibling;l?_t(P).is(l)&&A.push(P):A.push(P),I=P}return _t(A)},parent:function Gt(l){const A=[];for(let I=0;I<this.length;I+=1)null!==this[I].parentNode&&(l?_t(this[I].parentNode).is(l)&&A.push(this[I].parentNode):A.push(this[I].parentNode));return _t(A)},parents:function tn(l){const A=[];for(let I=0;I<this.length;I+=1){let P=this[I].parentNode;for(;P;)l?_t(P).is(l)&&A.push(P):A.push(P),P=P.parentNode}return _t(A)},closest:function bn(l){let A=this;return void 0===l?_t([]):(A.is(l)||(A=A.parents(l).eq(0)),A)},find:function Yn(l){const A=[];for(let I=0;I<this.length;I+=1){const P=this[I].querySelectorAll(l);for(let z=0;z<P.length;z+=1)A.push(P[z])}return _t(A)},children:function Xr(l){const A=[];for(let I=0;I<this.length;I+=1){const P=this[I].children;for(let z=0;z<P.length;z+=1)(!l||_t(P[z]).is(l))&&A.push(P[z])}return _t(A)},filter:function Qt(l){return _t(Ne(this,l))},remove:function Br(){for(let l=0;l<this.length;l+=1)this[l].parentNode&&this[l].parentNode.removeChild(this[l]);return this}};Object.keys(Si).forEach(l=>{Object.defineProperty(_t.fn,l,{value:Si[l],writable:!0})});const _n=_t;function hi(l,A=0){return setTimeout(l,A)}function Ci(){return Date.now()}function ds(l){return"object"==typeof l&&null!==l&&l.constructor&&"Object"===Object.prototype.toString.call(l).slice(8,-1)}function Ri(l){return"undefined"!=typeof window&&void 0!==window.HTMLElement?l instanceof HTMLElement:l&&(1===l.nodeType||11===l.nodeType)}function Yi(...l){const A=Object(l[0]),I=["__proto__","constructor","prototype"];for(let P=1;P<l.length;P+=1){const z=l[P];if(null!=z&&!Ri(z)){const J=Object.keys(Object(z)).filter(ge=>I.indexOf(ge)<0);for(let ge=0,we=J.length;ge<we;ge+=1){const ae=J[ge],me=Object.getOwnPropertyDescriptor(z,ae);void 0!==me&&me.enumerable&&(ds(A[ae])&&ds(z[ae])?z[ae].__swiper__?A[ae]=z[ae]:Yi(A[ae],z[ae]):!ds(A[ae])&&ds(z[ae])?(A[ae]={},z[ae].__swiper__?A[ae]=z[ae]:Yi(A[ae],z[ae])):A[ae]=z[ae])}}}return A}function Ii(l,A,I){l.style.setProperty(A,I)}function zr({swiper:l,targetPosition:A,side:I}){const P=He(),z=-l.translate;let ge,J=null;const we=l.params.speed;l.wrapperEl.style.scrollSnapType="none",P.cancelAnimationFrame(l.cssModeFrameID);const ae=A>z?"next":"prev",me=(ue,Te)=>"next"===ae&&ue>=Te||"prev"===ae&&ue<=Te,ce=()=>{ge=(new Date).getTime(),null===J&&(J=ge);const ue=Math.max(Math.min((ge-J)/we,1),0),Te=.5-Math.cos(ue*Math.PI)/2;let ze=z+Te*(A-z);if(me(ze,A)&&(ze=A),l.wrapperEl.scrollTo({[I]:ze}),me(ze,A))return l.wrapperEl.style.overflow="hidden",l.wrapperEl.style.scrollSnapType="",setTimeout(()=>{l.wrapperEl.style.overflow="",l.wrapperEl.scrollTo({[I]:ze})}),void P.cancelAnimationFrame(l.cssModeFrameID);l.cssModeFrameID=P.requestAnimationFrame(ce)};ce()}let Cs,$r,ts;function hs(){return Cs||(Cs=function es(){const l=He(),A=oe();return{smoothScroll:A.documentElement&&"scrollBehavior"in A.documentElement.style,touch:!!("ontouchstart"in l||l.DocumentTouch&&A instanceof l.DocumentTouch),passiveListener:function(){let P=!1;try{const z=Object.defineProperty({},"passive",{get(){P=!0}});l.addEventListener("testPassiveListener",null,z)}catch(z){}return P}(),gestures:"ongesturestart"in l}}()),Cs}function Wi({swiper:l,runCallbacks:A,direction:I,step:P}){const{activeIndex:z,previousIndex:J}=l;let ge=I;if(ge||(ge=z>J?"next":z<J?"prev":"reset"),l.emit(`transition${P}`),A&&z!==J){if("reset"===ge)return void l.emit(`slideResetTransition${P}`);l.emit(`slideChangeTransition${P}`),l.emit("next"===ge?`slideNextTransition${P}`:`slidePrevTransition${P}`)}}function Fs(l){const A=this,I=oe(),P=He(),z=A.touchEventsData,{params:J,touches:ge,enabled:we}=A;if(!we||A.animating&&J.preventInteractionOnTransition)return;!A.animating&&J.cssMode&&J.loop&&A.loopFix();let ae=l;ae.originalEvent&&(ae=ae.originalEvent);let me=_n(ae.target);if("wrapper"===J.touchEventsTarget&&!me.closest(A.wrapperEl).length||(z.isTouchEvent="touchstart"===ae.type,!z.isTouchEvent&&"which"in ae&&3===ae.which)||!z.isTouchEvent&&"button"in ae&&ae.button>0||z.isTouched&&z.isMoved)return;const ce=!!J.noSwipingClass&&""!==J.noSwipingClass,ue=l.composedPath?l.composedPath():l.path;ce&&ae.target&&ae.target.shadowRoot&&ue&&(me=_n(ue[0]));const Te=J.noSwipingSelector?J.noSwipingSelector:`.${J.noSwipingClass}`;if(J.noSwiping&&(ae.target&&ae.target.shadowRoot?function ks(l,A=this){return function I(P){if(!P||P===oe()||P===He())return null;P.assignedSlot&&(P=P.assignedSlot);const z=P.closest(l);return z||P.getRootNode?z||I(P.getRootNode().host):null}(A)}(Te,me[0]):me.closest(Te)[0]))return void(A.allowClick=!0);if(J.swipeHandler&&!me.closest(J.swipeHandler)[0])return;ge.currentX="touchstart"===ae.type?ae.targetTouches[0].pageX:ae.pageX,ge.currentY="touchstart"===ae.type?ae.targetTouches[0].pageY:ae.pageY;const tt=ge.currentX,De=ge.currentY,Fe=J.edgeSwipeDetection||J.iOSEdgeSwipeDetection,yt=J.edgeSwipeThreshold||J.iOSEdgeSwipeThreshold;if(Fe&&(tt<=yt||tt>=P.innerWidth-yt)){if("prevent"!==Fe)return;l.preventDefault()}if(Object.assign(z,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),ge.startX=tt,ge.startY=De,z.touchStartTime=Ci(),A.allowClick=!0,A.updateSize(),A.swipeDirection=void 0,J.threshold>0&&(z.allowThresholdMove=!1),"touchstart"!==ae.type){let et=!0;me.is(z.focusableElements)&&(et=!1,"SELECT"===me[0].nodeName&&(z.isTouched=!1)),I.activeElement&&_n(I.activeElement).is(z.focusableElements)&&I.activeElement!==me[0]&&I.activeElement.blur();const mt=et&&A.allowTouchMove&&J.touchStartPreventDefault;(J.touchStartForcePreventDefault||mt)&&!me[0].isContentEditable&&ae.preventDefault()}A.params.freeMode&&A.params.freeMode.enabled&&A.freeMode&&A.animating&&!J.cssMode&&A.freeMode.onTouchStart(),A.emit("touchStart",ae)}function Vo(l){const A=oe(),I=this,P=I.touchEventsData,{params:z,touches:J,rtlTranslate:ge,enabled:we}=I;if(!we)return;let ae=l;if(ae.originalEvent&&(ae=ae.originalEvent),!P.isTouched)return void(P.startMoving&&P.isScrolling&&I.emit("touchMoveOpposite",ae));if(P.isTouchEvent&&"touchmove"!==ae.type)return;const me="touchmove"===ae.type&&ae.targetTouches&&(ae.targetTouches[0]||ae.changedTouches[0]),ce="touchmove"===ae.type?me.pageX:ae.pageX,ue="touchmove"===ae.type?me.pageY:ae.pageY;if(ae.preventedByNestedSwiper)return J.startX=ce,void(J.startY=ue);if(!I.allowTouchMove)return _n(ae.target).is(P.focusableElements)||(I.allowClick=!1),void(P.isTouched&&(Object.assign(J,{startX:ce,startY:ue,currentX:ce,currentY:ue}),P.touchStartTime=Ci()));if(P.isTouchEvent&&z.touchReleaseOnEdges&&!z.loop)if(I.isVertical()){if(ue<J.startY&&I.translate<=I.maxTranslate()||ue>J.startY&&I.translate>=I.minTranslate())return P.isTouched=!1,void(P.isMoved=!1)}else if(ce<J.startX&&I.translate<=I.maxTranslate()||ce>J.startX&&I.translate>=I.minTranslate())return;if(P.isTouchEvent&&A.activeElement&&ae.target===A.activeElement&&_n(ae.target).is(P.focusableElements))return P.isMoved=!0,void(I.allowClick=!1);if(P.allowTouchCallbacks&&I.emit("touchMove",ae),ae.targetTouches&&ae.targetTouches.length>1)return;J.currentX=ce,J.currentY=ue;const Te=J.currentX-J.startX,ze=J.currentY-J.startY;if(I.params.threshold&&Math.sqrt(Te**2+ze**2)<I.params.threshold)return;if(void 0===P.isScrolling){let yt;I.isHorizontal()&&J.currentY===J.startY||I.isVertical()&&J.currentX===J.startX?P.isScrolling=!1:Te*Te+ze*ze>=25&&(yt=180*Math.atan2(Math.abs(ze),Math.abs(Te))/Math.PI,P.isScrolling=I.isHorizontal()?yt>z.touchAngle:90-yt>z.touchAngle)}if(P.isScrolling&&I.emit("touchMoveOpposite",ae),void 0===P.startMoving&&(J.currentX!==J.startX||J.currentY!==J.startY)&&(P.startMoving=!0),P.isScrolling)return void(P.isTouched=!1);if(!P.startMoving)return;I.allowClick=!1,!z.cssMode&&ae.cancelable&&ae.preventDefault(),z.touchMoveStopPropagation&&!z.nested&&ae.stopPropagation(),P.isMoved||(z.loop&&!z.cssMode&&I.loopFix(),P.startTranslate=I.getTranslate(),I.setTransition(0),I.animating&&I.$wrapperEl.trigger("webkitTransitionEnd transitionend"),P.allowMomentumBounce=!1,z.grabCursor&&(!0===I.allowSlideNext||!0===I.allowSlidePrev)&&I.setGrabCursor(!0),I.emit("sliderFirstMove",ae)),I.emit("sliderMove",ae),P.isMoved=!0;let tt=I.isHorizontal()?Te:ze;J.diff=tt,tt*=z.touchRatio,ge&&(tt=-tt),I.swipeDirection=tt>0?"prev":"next",P.currentTranslate=tt+P.startTranslate;let De=!0,Fe=z.resistanceRatio;if(z.touchReleaseOnEdges&&(Fe=0),tt>0&&P.currentTranslate>I.minTranslate()?(De=!1,z.resistance&&(P.currentTranslate=I.minTranslate()-1+(-I.minTranslate()+P.startTranslate+tt)**Fe)):tt<0&&P.currentTranslate<I.maxTranslate()&&(De=!1,z.resistance&&(P.currentTranslate=I.maxTranslate()+1-(I.maxTranslate()-P.startTranslate-tt)**Fe)),De&&(ae.preventedByNestedSwiper=!0),!I.allowSlideNext&&"next"===I.swipeDirection&&P.currentTranslate<P.startTranslate&&(P.currentTranslate=P.startTranslate),!I.allowSlidePrev&&"prev"===I.swipeDirection&&P.currentTranslate>P.startTranslate&&(P.currentTranslate=P.startTranslate),!I.allowSlidePrev&&!I.allowSlideNext&&(P.currentTranslate=P.startTranslate),z.threshold>0){if(!(Math.abs(tt)>z.threshold||P.allowThresholdMove))return void(P.currentTranslate=P.startTranslate);if(!P.allowThresholdMove)return P.allowThresholdMove=!0,J.startX=J.currentX,J.startY=J.currentY,P.currentTranslate=P.startTranslate,void(J.diff=I.isHorizontal()?J.currentX-J.startX:J.currentY-J.startY)}!z.followFinger||z.cssMode||((z.freeMode&&z.freeMode.enabled&&I.freeMode||z.watchSlidesProgress)&&(I.updateActiveIndex(),I.updateSlidesClasses()),I.params.freeMode&&z.freeMode.enabled&&I.freeMode&&I.freeMode.onTouchMove(),I.updateProgress(P.currentTranslate),I.setTranslate(P.currentTranslate))}function vs(l){const A=this,I=A.touchEventsData,{params:P,touches:z,rtlTranslate:J,slidesGrid:ge,enabled:we}=A;if(!we)return;let ae=l;if(ae.originalEvent&&(ae=ae.originalEvent),I.allowTouchCallbacks&&A.emit("touchEnd",ae),I.allowTouchCallbacks=!1,!I.isTouched)return I.isMoved&&P.grabCursor&&A.setGrabCursor(!1),I.isMoved=!1,void(I.startMoving=!1);P.grabCursor&&I.isMoved&&I.isTouched&&(!0===A.allowSlideNext||!0===A.allowSlidePrev)&&A.setGrabCursor(!1);const me=Ci(),ce=me-I.touchStartTime;if(A.allowClick){const et=ae.path||ae.composedPath&&ae.composedPath();A.updateClickedSlide(et&&et[0]||ae.target),A.emit("tap click",ae),ce<300&&me-I.lastClickTime<300&&A.emit("doubleTap doubleClick",ae)}if(I.lastClickTime=Ci(),hi(()=>{A.destroyed||(A.allowClick=!0)}),!I.isTouched||!I.isMoved||!A.swipeDirection||0===z.diff||I.currentTranslate===I.startTranslate)return I.isTouched=!1,I.isMoved=!1,void(I.startMoving=!1);let ue;if(I.isTouched=!1,I.isMoved=!1,I.startMoving=!1,ue=P.followFinger?J?A.translate:-A.translate:-I.currentTranslate,P.cssMode)return;if(A.params.freeMode&&P.freeMode.enabled)return void A.freeMode.onTouchEnd({currentPos:ue});let Te=0,ze=A.slidesSizesGrid[0];for(let et=0;et<ge.length;et+=et<P.slidesPerGroupSkip?1:P.slidesPerGroup){const mt=et<P.slidesPerGroupSkip-1?1:P.slidesPerGroup;void 0!==ge[et+mt]?ue>=ge[et]&&ue<ge[et+mt]&&(Te=et,ze=ge[et+mt]-ge[et]):ue>=ge[et]&&(Te=et,ze=ge[ge.length-1]-ge[ge.length-2])}let tt=null,De=null;P.rewind&&(A.isBeginning?De=A.params.virtual&&A.params.virtual.enabled&&A.virtual?A.virtual.slides.length-1:A.slides.length-1:A.isEnd&&(tt=0));const Fe=(ue-ge[Te])/ze,yt=Te<P.slidesPerGroupSkip-1?1:P.slidesPerGroup;if(ce>P.longSwipesMs){if(!P.longSwipes)return void A.slideTo(A.activeIndex);"next"===A.swipeDirection&&A.slideTo(Fe>=P.longSwipesRatio?P.rewind&&A.isEnd?tt:Te+yt:Te),"prev"===A.swipeDirection&&(Fe>1-P.longSwipesRatio?A.slideTo(Te+yt):null!==De&&Fe<0&&Math.abs(Fe)>P.longSwipesRatio?A.slideTo(De):A.slideTo(Te))}else{if(!P.shortSwipes)return void A.slideTo(A.activeIndex);!A.navigation||ae.target!==A.navigation.nextEl&&ae.target!==A.navigation.prevEl?("next"===A.swipeDirection&&A.slideTo(null!==tt?tt:Te+yt),"prev"===A.swipeDirection&&A.slideTo(null!==De?De:Te)):A.slideTo(ae.target===A.navigation.nextEl?Te+yt:Te)}}function Xs(){const l=this,{params:A,el:I}=l;if(I&&0===I.offsetWidth)return;A.breakpoints&&l.setBreakpoint();const{allowSlideNext:P,allowSlidePrev:z,snapGrid:J}=l;l.allowSlideNext=!0,l.allowSlidePrev=!0,l.updateSize(),l.updateSlides(),l.updateSlidesClasses(),l.slideTo(("auto"===A.slidesPerView||A.slidesPerView>1)&&l.isEnd&&!l.isBeginning&&!l.params.centeredSlides?l.slides.length-1:l.activeIndex,0,!1,!0),l.autoplay&&l.autoplay.running&&l.autoplay.paused&&l.autoplay.run(),l.allowSlidePrev=z,l.allowSlideNext=P,l.params.watchOverflow&&J!==l.snapGrid&&l.checkOverflow()}function Ms(l){const A=this;!A.enabled||A.allowClick||(A.params.preventClicks&&l.preventDefault(),A.params.preventClicksPropagation&&A.animating&&(l.stopPropagation(),l.stopImmediatePropagation()))}function Ai(){const l=this,{wrapperEl:A,rtlTranslate:I,enabled:P}=l;if(!P)return;let z;l.previousTranslate=l.translate,l.translate=l.isHorizontal()?-A.scrollLeft:-A.scrollTop,0===l.translate&&(l.translate=0),l.updateActiveIndex(),l.updateSlidesClasses();const J=l.maxTranslate()-l.minTranslate();z=0===J?0:(l.translate-l.minTranslate())/J,z!==l.progress&&l.updateProgress(I?-l.translate:l.translate),l.emit("setTranslate",l.translate,!1)}let io=!1;function so(){}const Hs=(l,A)=>{const I=oe(),{params:P,touchEvents:z,el:J,wrapperEl:ge,device:we,support:ae}=l,me=!!P.nested,ce="on"===A?"addEventListener":"removeEventListener",ue=A;if(ae.touch){const Te=!("touchstart"!==z.start||!ae.passiveListener||!P.passiveListeners)&&{passive:!0,capture:!1};J[ce](z.start,l.onTouchStart,Te),J[ce](z.move,l.onTouchMove,ae.passiveListener?{passive:!1,capture:me}:me),J[ce](z.end,l.onTouchEnd,Te),z.cancel&&J[ce](z.cancel,l.onTouchEnd,Te)}else J[ce](z.start,l.onTouchStart,!1),I[ce](z.move,l.onTouchMove,me),I[ce](z.end,l.onTouchEnd,!1);(P.preventClicks||P.preventClicksPropagation)&&J[ce]("click",l.onClick,!0),P.cssMode&&ge[ce]("scroll",l.onScroll),l[ue](P.updateOnWindowResize?we.ios||we.android?"resize orientationchange observerUpdate":"resize observerUpdate":"observerUpdate",Xs,!0)},Ti=(l,A)=>l.grid&&A.grid&&A.grid.rows>1,Ji={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Ni(l,A){return function(P={}){const z=Object.keys(P)[0],J=P[z];"object"==typeof J&&null!==J?(["navigation","pagination","scrollbar"].indexOf(z)>=0&&!0===l[z]&&(l[z]={auto:!0}),z in l&&"enabled"in J?(!0===l[z]&&(l[z]={enabled:!0}),"object"==typeof l[z]&&!("enabled"in l[z])&&(l[z].enabled=!0),l[z]||(l[z]={enabled:!1}),Yi(A,P)):Yi(A,P)):Yi(A,P)}}const ki={eventsEmitter:{on(l,A,I){const P=this;if(!P.eventsListeners||P.destroyed||"function"!=typeof A)return P;const z=I?"unshift":"push";return l.split(" ").forEach(J=>{P.eventsListeners[J]||(P.eventsListeners[J]=[]),P.eventsListeners[J][z](A)}),P},once(l,A,I){const P=this;if(!P.eventsListeners||P.destroyed||"function"!=typeof A)return P;function z(...J){P.off(l,z),z.__emitterProxy&&delete z.__emitterProxy,A.apply(P,J)}return z.__emitterProxy=A,P.on(l,z,I)},onAny(l,A){const I=this;if(!I.eventsListeners||I.destroyed||"function"!=typeof l)return I;const P=A?"unshift":"push";return I.eventsAnyListeners.indexOf(l)<0&&I.eventsAnyListeners[P](l),I},offAny(l){const A=this;if(!A.eventsListeners||A.destroyed||!A.eventsAnyListeners)return A;const I=A.eventsAnyListeners.indexOf(l);return I>=0&&A.eventsAnyListeners.splice(I,1),A},off(l,A){const I=this;return!I.eventsListeners||I.destroyed||!I.eventsListeners||l.split(" ").forEach(P=>{void 0===A?I.eventsListeners[P]=[]:I.eventsListeners[P]&&I.eventsListeners[P].forEach((z,J)=>{(z===A||z.__emitterProxy&&z.__emitterProxy===A)&&I.eventsListeners[P].splice(J,1)})}),I},emit(...l){const A=this;if(!A.eventsListeners||A.destroyed||!A.eventsListeners)return A;let I,P,z;return"string"==typeof l[0]||Array.isArray(l[0])?(I=l[0],P=l.slice(1,l.length),z=A):(I=l[0].events,P=l[0].data,z=l[0].context||A),P.unshift(z),(Array.isArray(I)?I:I.split(" ")).forEach(ge=>{A.eventsAnyListeners&&A.eventsAnyListeners.length&&A.eventsAnyListeners.forEach(we=>{we.apply(z,[ge,...P])}),A.eventsListeners&&A.eventsListeners[ge]&&A.eventsListeners[ge].forEach(we=>{we.apply(z,P)})}),A}},update:{updateSize:function si(){const l=this;let A,I;const P=l.$el;A=null!=l.params.width?l.params.width:P[0].clientWidth,I=null!=l.params.height?l.params.height:P[0].clientHeight,!(0===A&&l.isHorizontal()||0===I&&l.isVertical())&&(A=A-parseInt(P.css("padding-left")||0,10)-parseInt(P.css("padding-right")||0,10),I=I-parseInt(P.css("padding-top")||0,10)-parseInt(P.css("padding-bottom")||0,10),Number.isNaN(A)&&(A=0),Number.isNaN(I)&&(I=0),Object.assign(l,{width:A,height:I,size:l.isHorizontal()?A:I}))},updateSlides:function Zr(){const l=this;function A(Ln){return l.isHorizontal()?Ln:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Ln]}function I(Ln,rn){return parseFloat(Ln.getPropertyValue(A(rn))||0)}const P=l.params,{$wrapperEl:z,size:J,rtlTranslate:ge,wrongRTL:we}=l,ae=l.virtual&&P.virtual.enabled,me=ae?l.virtual.slides.length:l.slides.length,ce=z.children(`.${l.params.slideClass}`),ue=ae?l.virtual.slides.length:ce.length;let Te=[];const ze=[],tt=[];let De=P.slidesOffsetBefore;"function"==typeof De&&(De=P.slidesOffsetBefore.call(l));let Fe=P.slidesOffsetAfter;"function"==typeof Fe&&(Fe=P.slidesOffsetAfter.call(l));const yt=l.snapGrid.length,et=l.slidesGrid.length;let mt=P.spaceBetween,En=-De,An=0,mn=0;if(void 0===J)return;"string"==typeof mt&&mt.indexOf("%")>=0&&(mt=parseFloat(mt.replace("%",""))/100*J),l.virtualSize=-mt,ce.css(ge?{marginLeft:"",marginBottom:"",marginTop:""}:{marginRight:"",marginBottom:"",marginTop:""}),P.centeredSlides&&P.cssMode&&(Ii(l.wrapperEl,"--swiper-centered-offset-before",""),Ii(l.wrapperEl,"--swiper-centered-offset-after",""));const Mn=P.grid&&P.grid.rows>1&&l.grid;let nr;Mn&&l.grid.initSlides(ue);const vr="auto"===P.slidesPerView&&P.breakpoints&&Object.keys(P.breakpoints).filter(Ln=>void 0!==P.breakpoints[Ln].slidesPerView).length>0;for(let Ln=0;Ln<ue;Ln+=1){nr=0;const rn=ce.eq(Ln);if(Mn&&l.grid.updateSlide(Ln,rn,ue,A),"none"!==rn.css("display")){if("auto"===P.slidesPerView){vr&&(ce[Ln].style[A("width")]="");const Rt=getComputedStyle(rn[0]),hn=rn[0].style.transform,cr=rn[0].style.webkitTransform;if(hn&&(rn[0].style.transform="none"),cr&&(rn[0].style.webkitTransform="none"),P.roundLengths)nr=l.isHorizontal()?rn.outerWidth(!0):rn.outerHeight(!0);else{const ur=I(Rt,"width"),Wt=I(Rt,"padding-left"),hr=I(Rt,"padding-right"),tr=I(Rt,"margin-left"),gi=I(Rt,"margin-right"),xi=Rt.getPropertyValue("box-sizing");if(xi&&"border-box"===xi)nr=ur+tr+gi;else{const{clientWidth:Zs,offsetWidth:ia}=rn[0];nr=ur+Wt+hr+tr+gi+(ia-Zs)}}hn&&(rn[0].style.transform=hn),cr&&(rn[0].style.webkitTransform=cr),P.roundLengths&&(nr=Math.floor(nr))}else nr=(J-(P.slidesPerView-1)*mt)/P.slidesPerView,P.roundLengths&&(nr=Math.floor(nr)),ce[Ln]&&(ce[Ln].style[A("width")]=`${nr}px`);ce[Ln]&&(ce[Ln].swiperSlideSize=nr),tt.push(nr),P.centeredSlides?(En=En+nr/2+An/2+mt,0===An&&0!==Ln&&(En=En-J/2-mt),0===Ln&&(En=En-J/2-mt),Math.abs(En)<.001&&(En=0),P.roundLengths&&(En=Math.floor(En)),mn%P.slidesPerGroup==0&&Te.push(En),ze.push(En)):(P.roundLengths&&(En=Math.floor(En)),(mn-Math.min(l.params.slidesPerGroupSkip,mn))%l.params.slidesPerGroup==0&&Te.push(En),ze.push(En),En=En+nr+mt),l.virtualSize+=nr+mt,An=nr,mn+=1}}if(l.virtualSize=Math.max(l.virtualSize,J)+Fe,ge&&we&&("slide"===P.effect||"coverflow"===P.effect)&&z.css({width:`${l.virtualSize+P.spaceBetween}px`}),P.setWrapperSize&&z.css({[A("width")]:`${l.virtualSize+P.spaceBetween}px`}),Mn&&l.grid.updateWrapperSize(nr,Te,A),!P.centeredSlides){const Ln=[];for(let rn=0;rn<Te.length;rn+=1){let Rt=Te[rn];P.roundLengths&&(Rt=Math.floor(Rt)),Te[rn]<=l.virtualSize-J&&Ln.push(Rt)}Te=Ln,Math.floor(l.virtualSize-J)-Math.floor(Te[Te.length-1])>1&&Te.push(l.virtualSize-J)}if(0===Te.length&&(Te=[0]),0!==P.spaceBetween){const Ln=l.isHorizontal()&&ge?"marginLeft":A("marginRight");ce.filter((rn,Rt)=>!P.cssMode||Rt!==ce.length-1).css({[Ln]:`${mt}px`})}if(P.centeredSlides&&P.centeredSlidesBounds){let Ln=0;tt.forEach(Rt=>{Ln+=Rt+(P.spaceBetween?P.spaceBetween:0)}),Ln-=P.spaceBetween;const rn=Ln-J;Te=Te.map(Rt=>Rt<0?-De:Rt>rn?rn+Fe:Rt)}if(P.centerInsufficientSlides){let Ln=0;if(tt.forEach(rn=>{Ln+=rn+(P.spaceBetween?P.spaceBetween:0)}),Ln-=P.spaceBetween,Ln<J){const rn=(J-Ln)/2;Te.forEach((Rt,hn)=>{Te[hn]=Rt-rn}),ze.forEach((Rt,hn)=>{ze[hn]=Rt+rn})}}if(Object.assign(l,{slides:ce,snapGrid:Te,slidesGrid:ze,slidesSizesGrid:tt}),P.centeredSlides&&P.cssMode&&!P.centeredSlidesBounds){Ii(l.wrapperEl,"--swiper-centered-offset-before",-Te[0]+"px"),Ii(l.wrapperEl,"--swiper-centered-offset-after",l.size/2-tt[tt.length-1]/2+"px");const Ln=-l.snapGrid[0],rn=-l.slidesGrid[0];l.snapGrid=l.snapGrid.map(Rt=>Rt+Ln),l.slidesGrid=l.slidesGrid.map(Rt=>Rt+rn)}if(ue!==me&&l.emit("slidesLengthChange"),Te.length!==yt&&(l.params.watchOverflow&&l.checkOverflow(),l.emit("snapGridLengthChange")),ze.length!==et&&l.emit("slidesGridLengthChange"),P.watchSlidesProgress&&l.updateSlidesOffset(),!(ae||P.cssMode||"slide"!==P.effect&&"fade"!==P.effect)){const Ln=`${P.containerModifierClass}backface-hidden`,rn=l.$el.hasClass(Ln);ue<=P.maxBackfaceHiddenSlides?rn||l.$el.addClass(Ln):rn&&l.$el.removeClass(Ln)}},updateAutoHeight:function ji(l){const A=this,I=[],P=A.virtual&&A.params.virtual.enabled;let J,z=0;"number"==typeof l?A.setTransition(l):!0===l&&A.setTransition(A.params.speed);const ge=we=>P?A.slides.filter(ae=>parseInt(ae.getAttribute("data-swiper-slide-index"),10)===we)[0]:A.slides.eq(we)[0];if("auto"!==A.params.slidesPerView&&A.params.slidesPerView>1)if(A.params.centeredSlides)(A.visibleSlides||_n([])).each(we=>{I.push(we)});else for(J=0;J<Math.ceil(A.params.slidesPerView);J+=1){const we=A.activeIndex+J;if(we>A.slides.length&&!P)break;I.push(ge(we))}else I.push(ge(A.activeIndex));for(J=0;J<I.length;J+=1)if(void 0!==I[J]){const we=I[J].offsetHeight;z=we>z?we:z}(z||0===z)&&A.$wrapperEl.css("height",`${z}px`)},updateSlidesOffset:function bs(){const l=this,A=l.slides;for(let I=0;I<A.length;I+=1)A[I].swiperSlideOffset=l.isHorizontal()?A[I].offsetLeft:A[I].offsetTop},updateSlidesProgress:function ys(l=this&&this.translate||0){const A=this,I=A.params,{slides:P,rtlTranslate:z,snapGrid:J}=A;if(0===P.length)return;void 0===P[0].swiperSlideOffset&&A.updateSlidesOffset();let ge=-l;z&&(ge=l),P.removeClass(I.slideVisibleClass),A.visibleSlidesIndexes=[],A.visibleSlides=[];for(let we=0;we<P.length;we+=1){const ae=P[we];let me=ae.swiperSlideOffset;I.cssMode&&I.centeredSlides&&(me-=P[0].swiperSlideOffset);const ce=(ge+(I.centeredSlides?A.minTranslate():0)-me)/(ae.swiperSlideSize+I.spaceBetween),ue=(ge-J[0]+(I.centeredSlides?A.minTranslate():0)-me)/(ae.swiperSlideSize+I.spaceBetween),Te=-(ge-me),ze=Te+A.slidesSizesGrid[we];(Te>=0&&Te<A.size-1||ze>1&&ze<=A.size||Te<=0&&ze>=A.size)&&(A.visibleSlides.push(ae),A.visibleSlidesIndexes.push(we),P.eq(we).addClass(I.slideVisibleClass)),ae.progress=z?-ce:ce,ae.originalProgress=z?-ue:ue}A.visibleSlides=_n(A.visibleSlides)},updateProgress:function Pi(l){const A=this;if(void 0===l){const me=A.rtlTranslate?-1:1;l=A&&A.translate&&A.translate*me||0}const I=A.params,P=A.maxTranslate()-A.minTranslate();let{progress:z,isBeginning:J,isEnd:ge}=A;const we=J,ae=ge;0===P?(z=0,J=!0,ge=!0):(z=(l-A.minTranslate())/P,J=z<=0,ge=z>=1),Object.assign(A,{progress:z,isBeginning:J,isEnd:ge}),(I.watchSlidesProgress||I.centeredSlides&&I.autoHeight)&&A.updateSlidesProgress(l),J&&!we&&A.emit("reachBeginning toEdge"),ge&&!ae&&A.emit("reachEnd toEdge"),(we&&!J||ae&&!ge)&&A.emit("fromEdge"),A.emit("progress",z)},updateSlidesClasses:function jo(){const l=this,{slides:A,params:I,$wrapperEl:P,activeIndex:z,realIndex:J}=l,ge=l.virtual&&I.virtual.enabled;let we;A.removeClass(`${I.slideActiveClass} ${I.slideNextClass} ${I.slidePrevClass} ${I.slideDuplicateActiveClass} ${I.slideDuplicateNextClass} ${I.slideDuplicatePrevClass}`),we=ge?l.$wrapperEl.find(`.${I.slideClass}[data-swiper-slide-index="${z}"]`):A.eq(z),we.addClass(I.slideActiveClass),I.loop&&(we.hasClass(I.slideDuplicateClass)?P.children(`.${I.slideClass}:not(.${I.slideDuplicateClass})[data-swiper-slide-index="${J}"]`).addClass(I.slideDuplicateActiveClass):P.children(`.${I.slideClass}.${I.slideDuplicateClass}[data-swiper-slide-index="${J}"]`).addClass(I.slideDuplicateActiveClass));let ae=we.nextAll(`.${I.slideClass}`).eq(0).addClass(I.slideNextClass);I.loop&&0===ae.length&&(ae=A.eq(0),ae.addClass(I.slideNextClass));let me=we.prevAll(`.${I.slideClass}`).eq(0).addClass(I.slidePrevClass);I.loop&&0===me.length&&(me=A.eq(-1),me.addClass(I.slidePrevClass)),I.loop&&(ae.hasClass(I.slideDuplicateClass)?P.children(`.${I.slideClass}:not(.${I.slideDuplicateClass})[data-swiper-slide-index="${ae.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicateNextClass):P.children(`.${I.slideClass}.${I.slideDuplicateClass}[data-swiper-slide-index="${ae.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicateNextClass),me.hasClass(I.slideDuplicateClass)?P.children(`.${I.slideClass}:not(.${I.slideDuplicateClass})[data-swiper-slide-index="${me.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicatePrevClass):P.children(`.${I.slideClass}.${I.slideDuplicateClass}[data-swiper-slide-index="${me.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicatePrevClass)),l.emitSlidesClasses()},updateActiveIndex:function lo(l){const A=this,I=A.rtlTranslate?A.translate:-A.translate,{slidesGrid:P,snapGrid:z,params:J,activeIndex:ge,realIndex:we,snapIndex:ae}=A;let ce,me=l;if(void 0===me){for(let Te=0;Te<P.length;Te+=1)void 0!==P[Te+1]?I>=P[Te]&&I<P[Te+1]-(P[Te+1]-P[Te])/2?me=Te:I>=P[Te]&&I<P[Te+1]&&(me=Te+1):I>=P[Te]&&(me=Te);J.normalizeSlideIndex&&(me<0||void 0===me)&&(me=0)}if(z.indexOf(I)>=0)ce=z.indexOf(I);else{const Te=Math.min(J.slidesPerGroupSkip,me);ce=Te+Math.floor((me-Te)/J.slidesPerGroup)}if(ce>=z.length&&(ce=z.length-1),me===ge)return void(ce!==ae&&(A.snapIndex=ce,A.emit("snapIndexChange")));const ue=parseInt(A.slides.eq(me).attr("data-swiper-slide-index")||me,10);Object.assign(A,{snapIndex:ce,realIndex:ue,previousIndex:ge,activeIndex:me}),A.emit("activeIndexChange"),A.emit("snapIndexChange"),we!==ue&&A.emit("realIndexChange"),(A.initialized||A.params.runCallbacksOnInit)&&A.emit("slideChange")},updateClickedSlide:function Ts(l){const A=this,I=A.params,P=_n(l).closest(`.${I.slideClass}`)[0];let J,z=!1;if(P)for(let ge=0;ge<A.slides.length;ge+=1)if(A.slides[ge]===P){z=!0,J=ge;break}if(!P||!z)return A.clickedSlide=void 0,void(A.clickedIndex=void 0);A.clickedSlide=P,A.clickedIndex=A.virtual&&A.params.virtual.enabled?parseInt(_n(P).attr("data-swiper-slide-index"),10):J,I.slideToClickedSlide&&void 0!==A.clickedIndex&&A.clickedIndex!==A.activeIndex&&A.slideToClickedSlide()}},translate:{getTranslate:function Et(l=(this.isHorizontal()?"x":"y")){const{params:I,rtlTranslate:P,translate:z,$wrapperEl:J}=this;if(I.virtualTranslate)return P?-z:z;if(I.cssMode)return z;let ge=function zi(l,A="x"){const I=He();let P,z,J;const ge=function gs(l){const A=He();let I;return A.getComputedStyle&&(I=A.getComputedStyle(l,null)),!I&&l.currentStyle&&(I=l.currentStyle),I||(I=l.style),I}(l);return I.WebKitCSSMatrix?(z=ge.transform||ge.webkitTransform,z.split(",").length>6&&(z=z.split(", ").map(we=>we.replace(",",".")).join(", ")),J=new I.WebKitCSSMatrix("none"===z?"":z)):(J=ge.MozTransform||ge.OTransform||ge.MsTransform||ge.msTransform||ge.transform||ge.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),P=J.toString().split(",")),"x"===A&&(z=I.WebKitCSSMatrix?J.m41:16===P.length?parseFloat(P[12]):parseFloat(P[4])),"y"===A&&(z=I.WebKitCSSMatrix?J.m42:16===P.length?parseFloat(P[13]):parseFloat(P[5])),z||0}(J[0],l);return P&&(ge=-ge),ge||0},setTranslate:function ct(l,A){const I=this,{rtlTranslate:P,params:z,$wrapperEl:J,wrapperEl:ge,progress:we}=I;let ue,ae=0,me=0;I.isHorizontal()?ae=P?-l:l:me=l,z.roundLengths&&(ae=Math.floor(ae),me=Math.floor(me)),z.cssMode?ge[I.isHorizontal()?"scrollLeft":"scrollTop"]=I.isHorizontal()?-ae:-me:z.virtualTranslate||J.transform(`translate3d(${ae}px, ${me}px, 0px)`),I.previousTranslate=I.translate,I.translate=I.isHorizontal()?ae:me;const Te=I.maxTranslate()-I.minTranslate();ue=0===Te?0:(l-I.minTranslate())/Te,ue!==we&&I.updateProgress(l),I.emit("setTranslate",I.translate,A)},minTranslate:function At(){return-this.snapGrid[0]},maxTranslate:function vn(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function Kn(l=0,A=this.params.speed,I=!0,P=!0,z){const J=this,{params:ge,wrapperEl:we}=J;if(J.animating&&ge.preventInteractionOnTransition)return!1;const ae=J.minTranslate(),me=J.maxTranslate();let ce;if(ce=P&&l>ae?ae:P&&l<me?me:l,J.updateProgress(ce),ge.cssMode){const ue=J.isHorizontal();if(0===A)we[ue?"scrollLeft":"scrollTop"]=-ce;else{if(!J.support.smoothScroll)return zr({swiper:J,targetPosition:-ce,side:ue?"left":"top"}),!0;we.scrollTo({[ue?"left":"top"]:-ce,behavior:"smooth"})}return!0}return 0===A?(J.setTransition(0),J.setTranslate(ce),I&&(J.emit("beforeTransitionStart",A,z),J.emit("transitionEnd"))):(J.setTransition(A),J.setTranslate(ce),I&&(J.emit("beforeTransitionStart",A,z),J.emit("transitionStart")),J.animating||(J.animating=!0,J.onTranslateToWrapperTransitionEnd||(J.onTranslateToWrapperTransitionEnd=function(Te){!J||J.destroyed||Te.target===this&&(J.$wrapperEl[0].removeEventListener("transitionend",J.onTranslateToWrapperTransitionEnd),J.$wrapperEl[0].removeEventListener("webkitTransitionEnd",J.onTranslateToWrapperTransitionEnd),J.onTranslateToWrapperTransitionEnd=null,delete J.onTranslateToWrapperTransitionEnd,I&&J.emit("transitionEnd"))}),J.$wrapperEl[0].addEventListener("transitionend",J.onTranslateToWrapperTransitionEnd),J.$wrapperEl[0].addEventListener("webkitTransitionEnd",J.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function Qr(l,A){const I=this;I.params.cssMode||I.$wrapperEl.transition(l),I.emit("setTransition",l,A)},transitionStart:function Di(l=!0,A){const I=this,{params:P}=I;P.cssMode||(P.autoHeight&&I.updateAutoHeight(),Wi({swiper:I,runCallbacks:l,direction:A,step:"Start"}))},transitionEnd:function ws(l=!0,A){const I=this,{params:P}=I;I.animating=!1,!P.cssMode&&(I.setTransition(0),Wi({swiper:I,runCallbacks:l,direction:A,step:"End"}))}},slide:{slideTo:function ps(l=0,A=this.params.speed,I=!0,P,z){if("number"!=typeof l&&"string"!=typeof l)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof l}] given.`);if("string"==typeof l){const mt=parseInt(l,10);if(!isFinite(mt))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${l}] given.`);l=mt}const J=this;let ge=l;ge<0&&(ge=0);const{params:we,snapGrid:ae,slidesGrid:me,previousIndex:ce,activeIndex:ue,rtlTranslate:Te,wrapperEl:ze,enabled:tt}=J;if(J.animating&&we.preventInteractionOnTransition||!tt&&!P&&!z)return!1;const De=Math.min(J.params.slidesPerGroupSkip,ge);let Fe=De+Math.floor((ge-De)/J.params.slidesPerGroup);Fe>=ae.length&&(Fe=ae.length-1);const yt=-ae[Fe];if(we.normalizeSlideIndex)for(let mt=0;mt<me.length;mt+=1){const En=-Math.floor(100*yt),An=Math.floor(100*me[mt]),mn=Math.floor(100*me[mt+1]);void 0!==me[mt+1]?En>=An&&En<mn-(mn-An)/2?ge=mt:En>=An&&En<mn&&(ge=mt+1):En>=An&&(ge=mt)}if(J.initialized&&ge!==ue&&(!J.allowSlideNext&&yt<J.translate&&yt<J.minTranslate()||!J.allowSlidePrev&&yt>J.translate&&yt>J.maxTranslate()&&(ue||0)!==ge))return!1;let et;if(ge!==(ce||0)&&I&&J.emit("beforeSlideChangeStart"),J.updateProgress(yt),et=ge>ue?"next":ge<ue?"prev":"reset",Te&&-yt===J.translate||!Te&&yt===J.translate)return J.updateActiveIndex(ge),we.autoHeight&&J.updateAutoHeight(),J.updateSlidesClasses(),"slide"!==we.effect&&J.setTranslate(yt),"reset"!==et&&(J.transitionStart(I,et),J.transitionEnd(I,et)),!1;if(we.cssMode){const mt=J.isHorizontal(),En=Te?yt:-yt;if(0===A){const An=J.virtual&&J.params.virtual.enabled;An&&(J.wrapperEl.style.scrollSnapType="none",J._immediateVirtual=!0),ze[mt?"scrollLeft":"scrollTop"]=En,An&&requestAnimationFrame(()=>{J.wrapperEl.style.scrollSnapType="",J._swiperImmediateVirtual=!1})}else{if(!J.support.smoothScroll)return zr({swiper:J,targetPosition:En,side:mt?"left":"top"}),!0;ze.scrollTo({[mt?"left":"top"]:En,behavior:"smooth"})}return!0}return J.setTransition(A),J.setTranslate(yt),J.updateActiveIndex(ge),J.updateSlidesClasses(),J.emit("beforeTransitionStart",A,P),J.transitionStart(I,et),0===A?J.transitionEnd(I,et):J.animating||(J.animating=!0,J.onSlideToWrapperTransitionEnd||(J.onSlideToWrapperTransitionEnd=function(En){!J||J.destroyed||En.target===this&&(J.$wrapperEl[0].removeEventListener("transitionend",J.onSlideToWrapperTransitionEnd),J.$wrapperEl[0].removeEventListener("webkitTransitionEnd",J.onSlideToWrapperTransitionEnd),J.onSlideToWrapperTransitionEnd=null,delete J.onSlideToWrapperTransitionEnd,J.transitionEnd(I,et))}),J.$wrapperEl[0].addEventListener("transitionend",J.onSlideToWrapperTransitionEnd),J.$wrapperEl[0].addEventListener("webkitTransitionEnd",J.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function Is(l=0,A=this.params.speed,I=!0,P){if("string"==typeof l){const ge=parseInt(l,10);if(!isFinite(ge))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${l}] given.`);l=ge}const z=this;let J=l;return z.params.loop&&(J+=z.loopedSlides),z.slideTo(J,A,I,P)},slideNext:function Xo(l=this.params.speed,A=!0,I){const P=this,{animating:z,enabled:J,params:ge}=P;if(!J)return P;let we=ge.slidesPerGroup;"auto"===ge.slidesPerView&&1===ge.slidesPerGroup&&ge.slidesPerGroupAuto&&(we=Math.max(P.slidesPerViewDynamic("current",!0),1));const ae=P.activeIndex<ge.slidesPerGroupSkip?1:we;if(ge.loop){if(z&&ge.loopPreventsSlide)return!1;P.loopFix(),P._clientLeft=P.$wrapperEl[0].clientLeft}return P.slideTo(ge.rewind&&P.isEnd?0:P.activeIndex+ae,l,A,I)},slidePrev:function _s(l=this.params.speed,A=!0,I){const P=this,{params:z,animating:J,snapGrid:ge,slidesGrid:we,rtlTranslate:ae,enabled:me}=P;if(!me)return P;if(z.loop){if(J&&z.loopPreventsSlide)return!1;P.loopFix(),P._clientLeft=P.$wrapperEl[0].clientLeft}function ue(Fe){return Fe<0?-Math.floor(Math.abs(Fe)):Math.floor(Fe)}const Te=ue(ae?P.translate:-P.translate),ze=ge.map(Fe=>ue(Fe));let tt=ge[ze.indexOf(Te)-1];if(void 0===tt&&z.cssMode){let Fe;ge.forEach((yt,et)=>{Te>=yt&&(Fe=et)}),void 0!==Fe&&(tt=ge[Fe>0?Fe-1:Fe])}let De=0;return void 0!==tt&&(De=we.indexOf(tt),De<0&&(De=P.activeIndex-1),"auto"===z.slidesPerView&&1===z.slidesPerGroup&&z.slidesPerGroupAuto&&(De=De-P.slidesPerViewDynamic("previous",!0)+1,De=Math.max(De,0))),P.slideTo(z.rewind&&P.isBeginning?P.params.virtual&&P.params.virtual.enabled&&P.virtual?P.virtual.slides.length-1:P.slides.length-1:De,l,A,I)},slideReset:function ho(l=this.params.speed,A=!0,I){return this.slideTo(this.activeIndex,l,A,I)},slideToClosest:function Ss(l=this.params.speed,A=!0,I,P=.5){const z=this;let J=z.activeIndex;const ge=Math.min(z.params.slidesPerGroupSkip,J),we=ge+Math.floor((J-ge)/z.params.slidesPerGroup),ae=z.rtlTranslate?z.translate:-z.translate;if(ae>=z.snapGrid[we]){const me=z.snapGrid[we];ae-me>(z.snapGrid[we+1]-me)*P&&(J+=z.params.slidesPerGroup)}else{const me=z.snapGrid[we-1];ae-me<=(z.snapGrid[we]-me)*P&&(J-=z.params.slidesPerGroup)}return J=Math.max(J,0),J=Math.min(J,z.slidesGrid.length-1),z.slideTo(J,l,A,I)},slideToClickedSlide:function Eo(){const l=this,{params:A,$wrapperEl:I}=l,P="auto"===A.slidesPerView?l.slidesPerViewDynamic():A.slidesPerView;let J,z=l.clickedIndex;if(A.loop){if(l.animating)return;J=parseInt(_n(l.clickedSlide).attr("data-swiper-slide-index"),10),A.centeredSlides?z<l.loopedSlides-P/2||z>l.slides.length-l.loopedSlides+P/2?(l.loopFix(),z=I.children(`.${A.slideClass}[data-swiper-slide-index="${J}"]:not(.${A.slideDuplicateClass})`).eq(0).index(),hi(()=>{l.slideTo(z)})):l.slideTo(z):z>l.slides.length-P?(l.loopFix(),z=I.children(`.${A.slideClass}[data-swiper-slide-index="${J}"]:not(.${A.slideDuplicateClass})`).eq(0).index(),hi(()=>{l.slideTo(z)})):l.slideTo(z)}else l.slideTo(z)}},loop:{loopCreate:function $s(){const l=this,A=oe(),{params:I,$wrapperEl:P}=l,z=P.children().length>0?_n(P.children()[0].parentNode):P;z.children(`.${I.slideClass}.${I.slideDuplicateClass}`).remove();let J=z.children(`.${I.slideClass}`);if(I.loopFillGroupWithBlank){const ae=I.slidesPerGroup-J.length%I.slidesPerGroup;if(ae!==I.slidesPerGroup){for(let me=0;me<ae;me+=1){const ce=_n(A.createElement("div")).addClass(`${I.slideClass} ${I.slideBlankClass}`);z.append(ce)}J=z.children(`.${I.slideClass}`)}}"auto"===I.slidesPerView&&!I.loopedSlides&&(I.loopedSlides=J.length),l.loopedSlides=Math.ceil(parseFloat(I.loopedSlides||I.slidesPerView,10)),l.loopedSlides+=I.loopAdditionalSlides,l.loopedSlides>J.length&&l.params.loopedSlidesLimit&&(l.loopedSlides=J.length);const ge=[],we=[];J.each((ae,me)=>{_n(ae).attr("data-swiper-slide-index",me)});for(let ae=0;ae<l.loopedSlides;ae+=1){const me=ae-Math.floor(ae/J.length)*J.length;we.push(J.eq(me)[0]),ge.unshift(J.eq(J.length-me-1)[0])}for(let ae=0;ae<we.length;ae+=1)z.append(_n(we[ae].cloneNode(!0)).addClass(I.slideDuplicateClass));for(let ae=ge.length-1;ae>=0;ae-=1)z.prepend(_n(ge[ae].cloneNode(!0)).addClass(I.slideDuplicateClass))},loopFix:function Os(){const l=this;l.emit("beforeLoopFix");const{activeIndex:A,slides:I,loopedSlides:P,allowSlidePrev:z,allowSlideNext:J,snapGrid:ge,rtlTranslate:we}=l;let ae;l.allowSlidePrev=!0,l.allowSlideNext=!0;const ce=-ge[A]-l.getTranslate();A<P?(ae=I.length-3*P+A,ae+=P,l.slideTo(ae,0,!1,!0)&&0!==ce&&l.setTranslate((we?-l.translate:l.translate)-ce)):A>=I.length-P&&(ae=-I.length+A+P,ae+=P,l.slideTo(ae,0,!1,!0)&&0!==ce&&l.setTranslate((we?-l.translate:l.translate)-ce)),l.allowSlidePrev=z,l.allowSlideNext=J,l.emit("loopFix")},loopDestroy:function qs(){const{$wrapperEl:A,params:I,slides:P}=this;A.children(`.${I.slideClass}.${I.slideDuplicateClass},.${I.slideClass}.${I.slideBlankClass}`).remove(),P.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function Lo(l){const A=this;if(A.support.touch||!A.params.simulateTouch||A.params.watchOverflow&&A.isLocked||A.params.cssMode)return;const I="container"===A.params.touchEventsTarget?A.el:A.wrapperEl;I.style.cursor="move",I.style.cursor=l?"grabbing":"grab"},unsetGrabCursor:function Qs(){const l=this;l.support.touch||l.params.watchOverflow&&l.isLocked||l.params.cssMode||(l["container"===l.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:{attachEvents:function Gs(){const l=this,A=oe(),{params:I,support:P}=l;l.onTouchStart=Fs.bind(l),l.onTouchMove=Vo.bind(l),l.onTouchEnd=vs.bind(l),I.cssMode&&(l.onScroll=Ai.bind(l)),l.onClick=Ms.bind(l),P.touch&&!io&&(A.addEventListener("touchstart",so),io=!0),Hs(l,"on")},detachEvents:function As(){Hs(this,"off")}},breakpoints:{setBreakpoint:function B(){const l=this,{activeIndex:A,initialized:I,loopedSlides:P=0,params:z,$el:J}=l,ge=z.breakpoints;if(!ge||ge&&0===Object.keys(ge).length)return;const we=l.getBreakpoint(ge,l.params.breakpointsBase,l.el);if(!we||l.currentBreakpoint===we)return;const me=(we in ge?ge[we]:void 0)||l.originalParams,ce=Ti(l,z),ue=Ti(l,me),Te=z.enabled;ce&&!ue?(J.removeClass(`${z.containerModifierClass}grid ${z.containerModifierClass}grid-column`),l.emitContainerClasses()):!ce&&ue&&(J.addClass(`${z.containerModifierClass}grid`),(me.grid.fill&&"column"===me.grid.fill||!me.grid.fill&&"column"===z.grid.fill)&&J.addClass(`${z.containerModifierClass}grid-column`),l.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(Fe=>{const yt=z[Fe]&&z[Fe].enabled,et=me[Fe]&&me[Fe].enabled;yt&&!et&&l[Fe].disable(),!yt&&et&&l[Fe].enable()});const ze=me.direction&&me.direction!==z.direction,tt=z.loop&&(me.slidesPerView!==z.slidesPerView||ze);ze&&I&&l.changeDirection(),Yi(l.params,me);const De=l.params.enabled;Object.assign(l,{allowTouchMove:l.params.allowTouchMove,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev}),Te&&!De?l.disable():!Te&&De&&l.enable(),l.currentBreakpoint=we,l.emit("_beforeBreakpoint",me),tt&&I&&(l.loopDestroy(),l.loopCreate(),l.updateSlides(),l.slideTo(A-P+l.loopedSlides,0,!1)),l.emit("breakpoint",me)},getBreakpoint:function pe(l,A="window",I){if(!l||"container"===A&&!I)return;let P=!1;const z=He(),J="window"===A?z.innerHeight:I.clientHeight,ge=Object.keys(l).map(we=>{if("string"==typeof we&&0===we.indexOf("@")){const ae=parseFloat(we.substr(1));return{value:J*ae,point:we}}return{value:we,point:we}});ge.sort((we,ae)=>parseInt(we.value,10)-parseInt(ae.value,10));for(let we=0;we<ge.length;we+=1){const{point:ae,value:me}=ge[we];"window"===A?z.matchMedia(`(min-width: ${me}px)`).matches&&(P=ae):me<=I.clientWidth&&(P=ae)}return P||"max"}},checkOverflow:{checkOverflow:function ti(){const l=this,{isLocked:A,params:I}=l,{slidesOffsetBefore:P}=I;if(P){const z=l.slides.length-1;l.isLocked=l.size>l.slidesGrid[z]+l.slidesSizesGrid[z]+2*P}else l.isLocked=1===l.snapGrid.length;!0===I.allowSlideNext&&(l.allowSlideNext=!l.isLocked),!0===I.allowSlidePrev&&(l.allowSlidePrev=!l.isLocked),A&&A!==l.isLocked&&(l.isEnd=!1),A!==l.isLocked&&l.emit(l.isLocked?"lock":"unlock")}},classes:{addClasses:function qe(){const l=this,{classNames:A,params:I,rtl:P,$el:z,device:J,support:ge}=l,we=function ve(l,A){const I=[];return l.forEach(P=>{"object"==typeof P?Object.keys(P).forEach(z=>{P[z]&&I.push(A+z)}):"string"==typeof P&&I.push(A+P)}),I}(["initialized",I.direction,{"pointer-events":!ge.touch},{"free-mode":l.params.freeMode&&I.freeMode.enabled},{autoheight:I.autoHeight},{rtl:P},{grid:I.grid&&I.grid.rows>1},{"grid-column":I.grid&&I.grid.rows>1&&"column"===I.grid.fill},{android:J.android},{ios:J.ios},{"css-mode":I.cssMode},{centered:I.cssMode&&I.centeredSlides},{"watch-progress":I.watchSlidesProgress}],I.containerModifierClass);A.push(...we),z.addClass([...A].join(" ")),l.emitContainerClasses()},removeClasses:function nn(){const{$el:A,classNames:I}=this;A.removeClass(I.join(" ")),this.emitContainerClasses()}},images:{loadImage:function pr(l,A,I,P,z,J){const ge=He();let we;function ae(){J&&J()}_n(l).parent("picture")[0]||l.complete&&z||!A?ae():(we=new ge.Image,we.onload=ae,we.onerror=ae,P&&(we.sizes=P),I&&(we.srcset=I),A&&(we.src=A))},preloadImages:function jr(){const l=this;function A(){null==l||!l||l.destroyed||(void 0!==l.imagesLoaded&&(l.imagesLoaded+=1),l.imagesLoaded===l.imagesToLoad.length&&(l.params.updateOnImagesReady&&l.update(),l.emit("imagesReady")))}l.imagesToLoad=l.$el.find("img");for(let I=0;I<l.imagesToLoad.length;I+=1){const P=l.imagesToLoad[I];l.loadImage(P,P.currentSrc||P.getAttribute("src"),P.srcset||P.getAttribute("srcset"),P.sizes||P.getAttribute("sizes"),!0,A)}}}},Ks={};class ns{constructor(...A){let I,P;if(1===A.length&&A[0].constructor&&"Object"===Object.prototype.toString.call(A[0]).slice(8,-1)?P=A[0]:[I,P]=A,P||(P={}),P=Yi({},P),I&&!P.el&&(P.el=I),P.el&&_n(P.el).length>1){const we=[];return _n(P.el).each(ae=>{const me=Yi({},P,{el:ae});we.push(new ns(me))}),we}const z=this;z.__swiper__=!0,z.support=hs(),z.device=function Ir(l={}){return $r||($r=function wr({userAgent:l}={}){const A=hs(),I=He(),P=I.navigator.platform,z=l||I.navigator.userAgent,J={ios:!1,android:!1},ge=I.screen.width,we=I.screen.height,ae=z.match(/(Android);?[\s\/]+([\d.]+)?/);let me=z.match(/(iPad).*OS\s([\d_]+)/);const ce=z.match(/(iPod)(.*OS\s([\d_]+))?/),ue=!me&&z.match(/(iPhone\sOS|iOS)\s([\d_]+)/),Te="Win32"===P;let ze="MacIntel"===P;return!me&&ze&&A.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${ge}x${we}`)>=0&&(me=z.match(/(Version)\/([\d.]+)/),me||(me=[0,1,"13_0_0"]),ze=!1),ae&&!Te&&(J.os="android",J.android=!0),(me||ue||ce)&&(J.os="ios",J.ios=!0),J}(l)),$r}({userAgent:P.userAgent}),z.browser=function bi(){return ts||(ts=function Vr(){const l=He();return{isSafari:function A(){const I=l.navigator.userAgent.toLowerCase();return I.indexOf("safari")>=0&&I.indexOf("chrome")<0&&I.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(l.navigator.userAgent)}}()),ts}(),z.eventsListeners={},z.eventsAnyListeners=[],z.modules=[...z.__modules__],P.modules&&Array.isArray(P.modules)&&z.modules.push(...P.modules);const J={};z.modules.forEach(we=>{we({swiper:z,extendParams:Ni(P,J),on:z.on.bind(z),once:z.once.bind(z),off:z.off.bind(z),emit:z.emit.bind(z)})});const ge=Yi({},Ji,J);return z.params=Yi({},ge,Ks,P),z.originalParams=Yi({},z.params),z.passedParams=Yi({},P),z.params&&z.params.on&&Object.keys(z.params.on).forEach(we=>{z.on(we,z.params.on[we])}),z.params&&z.params.onAny&&z.onAny(z.params.onAny),z.$=_n,Object.assign(z,{enabled:z.params.enabled,el:I,classNames:[],slides:_n(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===z.params.direction,isVertical:()=>"vertical"===z.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:z.params.allowSlideNext,allowSlidePrev:z.params.allowSlidePrev,touchEvents:function(){const ae=["touchstart","touchmove","touchend","touchcancel"],me=["pointerdown","pointermove","pointerup"];return z.touchEventsTouch={start:ae[0],move:ae[1],end:ae[2],cancel:ae[3]},z.touchEventsDesktop={start:me[0],move:me[1],end:me[2]},z.support.touch||!z.params.simulateTouch?z.touchEventsTouch:z.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:z.params.focusableElements,lastClickTime:Ci(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:z.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),z.emit("_swiper"),z.params.init&&z.init(),z}enable(){const A=this;A.enabled||(A.enabled=!0,A.params.grabCursor&&A.setGrabCursor(),A.emit("enable"))}disable(){const A=this;!A.enabled||(A.enabled=!1,A.params.grabCursor&&A.unsetGrabCursor(),A.emit("disable"))}setProgress(A,I){const P=this;A=Math.min(Math.max(A,0),1);const z=P.minTranslate(),ge=(P.maxTranslate()-z)*A+z;P.translateTo(ge,void 0===I?0:I),P.updateActiveIndex(),P.updateSlidesClasses()}emitContainerClasses(){const A=this;if(!A.params._emitClasses||!A.el)return;const I=A.el.className.split(" ").filter(P=>0===P.indexOf("swiper")||0===P.indexOf(A.params.containerModifierClass));A.emit("_containerClasses",I.join(" "))}getSlideClasses(A){const I=this;return I.destroyed?"":A.className.split(" ").filter(P=>0===P.indexOf("swiper-slide")||0===P.indexOf(I.params.slideClass)).join(" ")}emitSlidesClasses(){const A=this;if(!A.params._emitClasses||!A.el)return;const I=[];A.slides.each(P=>{const z=A.getSlideClasses(P);I.push({slideEl:P,classNames:z}),A.emit("_slideClass",P,z)}),A.emit("_slideClasses",I)}slidesPerViewDynamic(A="current",I=!1){const{params:z,slides:J,slidesGrid:ge,slidesSizesGrid:we,size:ae,activeIndex:me}=this;let ce=1;if(z.centeredSlides){let Te,ue=J[me].swiperSlideSize;for(let ze=me+1;ze<J.length;ze+=1)J[ze]&&!Te&&(ue+=J[ze].swiperSlideSize,ce+=1,ue>ae&&(Te=!0));for(let ze=me-1;ze>=0;ze-=1)J[ze]&&!Te&&(ue+=J[ze].swiperSlideSize,ce+=1,ue>ae&&(Te=!0))}else if("current"===A)for(let ue=me+1;ue<J.length;ue+=1)(I?ge[ue]+we[ue]-ge[me]<ae:ge[ue]-ge[me]<ae)&&(ce+=1);else for(let ue=me-1;ue>=0;ue-=1)ge[me]-ge[ue]<ae&&(ce+=1);return ce}update(){const A=this;if(!A||A.destroyed)return;const{snapGrid:I,params:P}=A;function z(){const we=Math.min(Math.max(A.rtlTranslate?-1*A.translate:A.translate,A.maxTranslate()),A.minTranslate());A.setTranslate(we),A.updateActiveIndex(),A.updateSlidesClasses()}let J;P.breakpoints&&A.setBreakpoint(),A.updateSize(),A.updateSlides(),A.updateProgress(),A.updateSlidesClasses(),A.params.freeMode&&A.params.freeMode.enabled?(z(),A.params.autoHeight&&A.updateAutoHeight()):(J=A.slideTo(("auto"===A.params.slidesPerView||A.params.slidesPerView>1)&&A.isEnd&&!A.params.centeredSlides?A.slides.length-1:A.activeIndex,0,!1,!0),J||z()),P.watchOverflow&&I!==A.snapGrid&&A.checkOverflow(),A.emit("update")}changeDirection(A,I=!0){const P=this,z=P.params.direction;return A||(A="horizontal"===z?"vertical":"horizontal"),A===z||"horizontal"!==A&&"vertical"!==A||(P.$el.removeClass(`${P.params.containerModifierClass}${z}`).addClass(`${P.params.containerModifierClass}${A}`),P.emitContainerClasses(),P.params.direction=A,P.slides.each(J=>{"vertical"===A?J.style.width="":J.style.height=""}),P.emit("changeDirection"),I&&P.update()),P}changeLanguageDirection(A){const I=this;I.rtl&&"rtl"===A||!I.rtl&&"ltr"===A||(I.rtl="rtl"===A,I.rtlTranslate="horizontal"===I.params.direction&&I.rtl,I.rtl?(I.$el.addClass(`${I.params.containerModifierClass}rtl`),I.el.dir="rtl"):(I.$el.removeClass(`${I.params.containerModifierClass}rtl`),I.el.dir="ltr"),I.update())}mount(A){const I=this;if(I.mounted)return!0;const P=_n(A||I.params.el);if(!(A=P[0]))return!1;A.swiper=I;const z=()=>`.${(I.params.wrapperClass||"").trim().split(" ").join(".")}`;let ge=(()=>{if(A&&A.shadowRoot&&A.shadowRoot.querySelector){const we=_n(A.shadowRoot.querySelector(z()));return we.children=ae=>P.children(ae),we}return P.children?P.children(z()):_n(P).children(z())})();if(0===ge.length&&I.params.createElements){const ae=oe().createElement("div");ge=_n(ae),ae.className=I.params.wrapperClass,P.append(ae),P.children(`.${I.params.slideClass}`).each(me=>{ge.append(me)})}return Object.assign(I,{$el:P,el:A,$wrapperEl:ge,wrapperEl:ge[0],mounted:!0,rtl:"rtl"===A.dir.toLowerCase()||"rtl"===P.css("direction"),rtlTranslate:"horizontal"===I.params.direction&&("rtl"===A.dir.toLowerCase()||"rtl"===P.css("direction")),wrongRTL:"-webkit-box"===ge.css("display")}),!0}init(A){const I=this;return I.initialized||!1===I.mount(A)||(I.emit("beforeInit"),I.params.breakpoints&&I.setBreakpoint(),I.addClasses(),I.params.loop&&I.loopCreate(),I.updateSize(),I.updateSlides(),I.params.watchOverflow&&I.checkOverflow(),I.params.grabCursor&&I.enabled&&I.setGrabCursor(),I.params.preloadImages&&I.preloadImages(),I.slideTo(I.params.loop?I.params.initialSlide+I.loopedSlides:I.params.initialSlide,0,I.params.runCallbacksOnInit,!1,!0),I.attachEvents(),I.initialized=!0,I.emit("init"),I.emit("afterInit")),I}destroy(A=!0,I=!0){const P=this,{params:z,$el:J,$wrapperEl:ge,slides:we}=P;return void 0===P.params||P.destroyed||(P.emit("beforeDestroy"),P.initialized=!1,P.detachEvents(),z.loop&&P.loopDestroy(),I&&(P.removeClasses(),J.removeAttr("style"),ge.removeAttr("style"),we&&we.length&&we.removeClass([z.slideVisibleClass,z.slideActiveClass,z.slideNextClass,z.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),P.emit("destroy"),Object.keys(P.eventsListeners).forEach(ae=>{P.off(ae)}),!1!==A&&(P.$el[0].swiper=null,function Tr(l){const A=l;Object.keys(A).forEach(I=>{try{A[I]=null}catch(P){}try{delete A[I]}catch(P){}})}(P)),P.destroyed=!0),null}static extendDefaults(A){Yi(Ks,A)}static get extendedDefaults(){return Ks}static get defaults(){return Ji}static installModule(A){ns.prototype.__modules__||(ns.prototype.__modules__=[]);const I=ns.prototype.__modules__;"function"==typeof A&&I.indexOf(A)<0&&I.push(A)}static use(A){return Array.isArray(A)?(A.forEach(I=>ns.installModule(I)),ns):(ns.installModule(A),ns)}}Object.keys(ki).forEach(l=>{Object.keys(ki[l]).forEach(A=>{ns.prototype[A]=ki[l][A]})}),ns.use([function Ws({swiper:l,on:A,emit:I}){const P=He();let z=null,J=null;const ge=()=>{!l||l.destroyed||!l.initialized||(I("beforeResize"),I("resize"))},me=()=>{!l||l.destroyed||!l.initialized||I("orientationchange")};A("init",()=>{l.params.resizeObserver&&void 0!==P.ResizeObserver?!l||l.destroyed||!l.initialized||(z=new ResizeObserver(ce=>{J=P.requestAnimationFrame(()=>{const{width:ue,height:Te}=l;let ze=ue,tt=Te;ce.forEach(({contentBoxSize:De,contentRect:Fe,target:yt})=>{yt&&yt!==l.el||(ze=Fe?Fe.width:(De[0]||De).inlineSize,tt=Fe?Fe.height:(De[0]||De).blockSize)}),(ze!==ue||tt!==Te)&&ge()})}),z.observe(l.el)):(P.addEventListener("resize",ge),P.addEventListener("orientationchange",me))}),A("destroy",()=>{J&&P.cancelAnimationFrame(J),z&&z.unobserve&&l.el&&(z.unobserve(l.el),z=null),P.removeEventListener("resize",ge),P.removeEventListener("orientationchange",me)})},function Fi({swiper:l,extendParams:A,on:I,emit:P}){const z=[],J=He(),ge=(me,ce={})=>{const Te=new(J.MutationObserver||J.WebkitMutationObserver)(ze=>{if(1===ze.length)return void P("observerUpdate",ze[0]);const tt=function(){P("observerUpdate",ze[0])};J.requestAnimationFrame?J.requestAnimationFrame(tt):J.setTimeout(tt,0)});Te.observe(me,{attributes:void 0===ce.attributes||ce.attributes,childList:void 0===ce.childList||ce.childList,characterData:void 0===ce.characterData||ce.characterData}),z.push(Te)};A({observer:!1,observeParents:!1,observeSlideChildren:!1}),I("init",()=>{if(l.params.observer){if(l.params.observeParents){const me=l.$el.parents();for(let ce=0;ce<me.length;ce+=1)ge(me[ce])}ge(l.$el[0],{childList:l.params.observeSlideChildren}),ge(l.$wrapperEl[0],{attributes:!1})}}),I("destroy",()=>{z.forEach(me=>{me.disconnect()}),z.splice(0,z.length)})}]);const Wr=ns;function Co(l,A,I,P){const z=oe();return l.params.createElements&&Object.keys(P).forEach(J=>{if(!I[J]&&!0===I.auto){let ge=l.$el.children(`.${P[J]}`)[0];ge||(ge=z.createElement("div"),ge.className=P[J],l.$el.append(ge)),I[J]=ge,A[J]=ge}}),I}function Y({swiper:l,extendParams:A,on:I,emit:P}){function z(ze){let tt;return ze&&(tt=_n(ze),l.params.uniqueNavElements&&"string"==typeof ze&&tt.length>1&&1===l.$el.find(ze).length&&(tt=l.$el.find(ze))),tt}function J(ze,tt){const De=l.params.navigation;ze&&ze.length>0&&(ze[tt?"addClass":"removeClass"](De.disabledClass),ze[0]&&"BUTTON"===ze[0].tagName&&(ze[0].disabled=tt),l.params.watchOverflow&&l.enabled&&ze[l.isLocked?"addClass":"removeClass"](De.lockClass))}function ge(){if(l.params.loop)return;const{$nextEl:ze,$prevEl:tt}=l.navigation;J(tt,l.isBeginning&&!l.params.rewind),J(ze,l.isEnd&&!l.params.rewind)}function we(ze){ze.preventDefault(),(!l.isBeginning||l.params.loop||l.params.rewind)&&(l.slidePrev(),P("navigationPrev"))}function ae(ze){ze.preventDefault(),(!l.isEnd||l.params.loop||l.params.rewind)&&(l.slideNext(),P("navigationNext"))}function me(){const ze=l.params.navigation;if(l.params.navigation=Co(l,l.originalParams.navigation,l.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!ze.nextEl&&!ze.prevEl)return;const tt=z(ze.nextEl),De=z(ze.prevEl);tt&&tt.length>0&&tt.on("click",ae),De&&De.length>0&&De.on("click",we),Object.assign(l.navigation,{$nextEl:tt,nextEl:tt&&tt[0],$prevEl:De,prevEl:De&&De[0]}),l.enabled||(tt&&tt.addClass(ze.lockClass),De&&De.addClass(ze.lockClass))}function ce(){const{$nextEl:ze,$prevEl:tt}=l.navigation;ze&&ze.length&&(ze.off("click",ae),ze.removeClass(l.params.navigation.disabledClass)),tt&&tt.length&&(tt.off("click",we),tt.removeClass(l.params.navigation.disabledClass))}A({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),l.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},I("init",()=>{!1===l.params.navigation.enabled?Te():(me(),ge())}),I("toEdge fromEdge lock unlock",()=>{ge()}),I("destroy",()=>{ce()}),I("enable disable",()=>{const{$nextEl:ze,$prevEl:tt}=l.navigation;ze&&ze[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass),tt&&tt[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass)}),I("click",(ze,tt)=>{const{$nextEl:De,$prevEl:Fe}=l.navigation,yt=tt.target;if(l.params.navigation.hideOnClick&&!_n(yt).is(Fe)&&!_n(yt).is(De)){if(l.pagination&&l.params.pagination&&l.params.pagination.clickable&&(l.pagination.el===yt||l.pagination.el.contains(yt)))return;let et;De?et=De.hasClass(l.params.navigation.hiddenClass):Fe&&(et=Fe.hasClass(l.params.navigation.hiddenClass)),P(!0===et?"navigationShow":"navigationHide"),De&&De.toggleClass(l.params.navigation.hiddenClass),Fe&&Fe.toggleClass(l.params.navigation.hiddenClass)}});const Te=()=>{l.$el.addClass(l.params.navigation.navigationDisabledClass),ce()};Object.assign(l.navigation,{enable:()=>{l.$el.removeClass(l.params.navigation.navigationDisabledClass),me(),ge()},disable:Te,update:ge,init:me,destroy:ce})}function G(l=""){return`.${l.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function L({swiper:l,extendParams:A,on:I,emit:P}){const z="swiper-pagination";A({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:De=>De,formatFractionTotal:De=>De,bulletClass:`${z}-bullet`,bulletActiveClass:`${z}-bullet-active`,modifierClass:`${z}-`,currentClass:`${z}-current`,totalClass:`${z}-total`,hiddenClass:`${z}-hidden`,progressbarFillClass:`${z}-progressbar-fill`,progressbarOppositeClass:`${z}-progressbar-opposite`,clickableClass:`${z}-clickable`,lockClass:`${z}-lock`,horizontalClass:`${z}-horizontal`,verticalClass:`${z}-vertical`,paginationDisabledClass:`${z}-disabled`}}),l.pagination={el:null,$el:null,bullets:[]};let J,ge=0;function we(){return!l.params.pagination.el||!l.pagination.el||!l.pagination.$el||0===l.pagination.$el.length}function ae(De,Fe){const{bulletActiveClass:yt}=l.params.pagination;De[Fe]().addClass(`${yt}-${Fe}`)[Fe]().addClass(`${yt}-${Fe}-${Fe}`)}function me(){const De=l.rtl,Fe=l.params.pagination;if(we())return;const yt=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,et=l.pagination.$el;let mt;const En=l.params.loop?Math.ceil((yt-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;if(l.params.loop?(mt=Math.ceil((l.activeIndex-l.loopedSlides)/l.params.slidesPerGroup),mt>yt-1-2*l.loopedSlides&&(mt-=yt-2*l.loopedSlides),mt>En-1&&(mt-=En),mt<0&&"bullets"!==l.params.paginationType&&(mt=En+mt)):mt=void 0!==l.snapIndex?l.snapIndex:l.activeIndex||0,"bullets"===Fe.type&&l.pagination.bullets&&l.pagination.bullets.length>0){const An=l.pagination.bullets;let mn,Mn,nr;if(Fe.dynamicBullets&&(J=An.eq(0)[l.isHorizontal()?"outerWidth":"outerHeight"](!0),et.css(l.isHorizontal()?"width":"height",J*(Fe.dynamicMainBullets+4)+"px"),Fe.dynamicMainBullets>1&&void 0!==l.previousIndex&&(ge+=mt-(l.previousIndex-l.loopedSlides||0),ge>Fe.dynamicMainBullets-1?ge=Fe.dynamicMainBullets-1:ge<0&&(ge=0)),mn=Math.max(mt-ge,0),Mn=mn+(Math.min(An.length,Fe.dynamicMainBullets)-1),nr=(Mn+mn)/2),An.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(vr=>`${Fe.bulletActiveClass}${vr}`).join(" ")),et.length>1)An.each(vr=>{const Ln=_n(vr),rn=Ln.index();rn===mt&&Ln.addClass(Fe.bulletActiveClass),Fe.dynamicBullets&&(rn>=mn&&rn<=Mn&&Ln.addClass(`${Fe.bulletActiveClass}-main`),rn===mn&&ae(Ln,"prev"),rn===Mn&&ae(Ln,"next"))});else{const vr=An.eq(mt),Ln=vr.index();if(vr.addClass(Fe.bulletActiveClass),Fe.dynamicBullets){const rn=An.eq(mn),Rt=An.eq(Mn);for(let hn=mn;hn<=Mn;hn+=1)An.eq(hn).addClass(`${Fe.bulletActiveClass}-main`);if(l.params.loop)if(Ln>=An.length){for(let hn=Fe.dynamicMainBullets;hn>=0;hn-=1)An.eq(An.length-hn).addClass(`${Fe.bulletActiveClass}-main`);An.eq(An.length-Fe.dynamicMainBullets-1).addClass(`${Fe.bulletActiveClass}-prev`)}else ae(rn,"prev"),ae(Rt,"next");else ae(rn,"prev"),ae(Rt,"next")}}if(Fe.dynamicBullets){const vr=Math.min(An.length,Fe.dynamicMainBullets+4),Ln=(J*vr-J)/2-nr*J,rn=De?"right":"left";An.css(l.isHorizontal()?rn:"top",`${Ln}px`)}}if("fraction"===Fe.type&&(et.find(G(Fe.currentClass)).text(Fe.formatFractionCurrent(mt+1)),et.find(G(Fe.totalClass)).text(Fe.formatFractionTotal(En))),"progressbar"===Fe.type){let An;An=Fe.progressbarOpposite?l.isHorizontal()?"vertical":"horizontal":l.isHorizontal()?"horizontal":"vertical";const mn=(mt+1)/En;let Mn=1,nr=1;"horizontal"===An?Mn=mn:nr=mn,et.find(G(Fe.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${Mn}) scaleY(${nr})`).transition(l.params.speed)}"custom"===Fe.type&&Fe.renderCustom?(et.html(Fe.renderCustom(l,mt+1,En)),P("paginationRender",et[0])):P("paginationUpdate",et[0]),l.params.watchOverflow&&l.enabled&&et[l.isLocked?"addClass":"removeClass"](Fe.lockClass)}function ce(){const De=l.params.pagination;if(we())return;const Fe=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,yt=l.pagination.$el;let et="";if("bullets"===De.type){let mt=l.params.loop?Math.ceil((Fe-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;l.params.freeMode&&l.params.freeMode.enabled&&!l.params.loop&&mt>Fe&&(mt=Fe);for(let En=0;En<mt;En+=1)et+=De.renderBullet?De.renderBullet.call(l,En,De.bulletClass):`<${De.bulletElement} class="${De.bulletClass}"></${De.bulletElement}>`;yt.html(et),l.pagination.bullets=yt.find(G(De.bulletClass))}"fraction"===De.type&&(et=De.renderFraction?De.renderFraction.call(l,De.currentClass,De.totalClass):`<span class="${De.currentClass}"></span> / <span class="${De.totalClass}"></span>`,yt.html(et)),"progressbar"===De.type&&(et=De.renderProgressbar?De.renderProgressbar.call(l,De.progressbarFillClass):`<span class="${De.progressbarFillClass}"></span>`,yt.html(et)),"custom"!==De.type&&P("paginationRender",l.pagination.$el[0])}function ue(){l.params.pagination=Co(l,l.originalParams.pagination,l.params.pagination,{el:"swiper-pagination"});const De=l.params.pagination;if(!De.el)return;let Fe=_n(De.el);0!==Fe.length&&(l.params.uniqueNavElements&&"string"==typeof De.el&&Fe.length>1&&(Fe=l.$el.find(De.el),Fe.length>1&&(Fe=Fe.filter(yt=>_n(yt).parents(".swiper")[0]===l.el))),"bullets"===De.type&&De.clickable&&Fe.addClass(De.clickableClass),Fe.addClass(De.modifierClass+De.type),Fe.addClass(l.isHorizontal()?De.horizontalClass:De.verticalClass),"bullets"===De.type&&De.dynamicBullets&&(Fe.addClass(`${De.modifierClass}${De.type}-dynamic`),ge=0,De.dynamicMainBullets<1&&(De.dynamicMainBullets=1)),"progressbar"===De.type&&De.progressbarOpposite&&Fe.addClass(De.progressbarOppositeClass),De.clickable&&Fe.on("click",G(De.bulletClass),function(et){et.preventDefault();let mt=_n(this).index()*l.params.slidesPerGroup;l.params.loop&&(mt+=l.loopedSlides),l.slideTo(mt)}),Object.assign(l.pagination,{$el:Fe,el:Fe[0]}),l.enabled||Fe.addClass(De.lockClass))}function Te(){const De=l.params.pagination;if(we())return;const Fe=l.pagination.$el;Fe.removeClass(De.hiddenClass),Fe.removeClass(De.modifierClass+De.type),Fe.removeClass(l.isHorizontal()?De.horizontalClass:De.verticalClass),l.pagination.bullets&&l.pagination.bullets.removeClass&&l.pagination.bullets.removeClass(De.bulletActiveClass),De.clickable&&Fe.off("click",G(De.bulletClass))}I("init",()=>{!1===l.params.pagination.enabled?tt():(ue(),ce(),me())}),I("activeIndexChange",()=>{(l.params.loop||void 0===l.snapIndex)&&me()}),I("snapIndexChange",()=>{l.params.loop||me()}),I("slidesLengthChange",()=>{l.params.loop&&(ce(),me())}),I("snapGridLengthChange",()=>{l.params.loop||(ce(),me())}),I("destroy",()=>{Te()}),I("enable disable",()=>{const{$el:De}=l.pagination;De&&De[l.enabled?"removeClass":"addClass"](l.params.pagination.lockClass)}),I("lock unlock",()=>{me()}),I("click",(De,Fe)=>{const yt=Fe.target,{$el:et}=l.pagination;if(l.params.pagination.el&&l.params.pagination.hideOnClick&&et&&et.length>0&&!_n(yt).hasClass(l.params.pagination.bulletClass)){if(l.navigation&&(l.navigation.nextEl&&yt===l.navigation.nextEl||l.navigation.prevEl&&yt===l.navigation.prevEl))return;const mt=et.hasClass(l.params.pagination.hiddenClass);P(!0===mt?"paginationShow":"paginationHide"),et.toggleClass(l.params.pagination.hiddenClass)}});const tt=()=>{l.$el.addClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.addClass(l.params.pagination.paginationDisabledClass),Te()};Object.assign(l.pagination,{enable:()=>{l.$el.removeClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.removeClass(l.params.pagination.paginationDisabledClass),ue(),ce(),me()},disable:tt,render:ce,update:me,init:ue,destroy:Te})}},5861:(Zn,It,j)=>{function g(he,oe,je,He,ht,We,at){try{var Ne=he[We](at),Pe=Ne.value}catch(vt){return void je(vt)}Ne.done?oe(Pe):Promise.resolve(Pe).then(He,ht)}function k(he){return function(){var oe=this,je=arguments;return new Promise(function(He,ht){var We=he.apply(oe,je);function at(Pe){g(We,He,ht,at,Ne,"next",Pe)}function Ne(Pe){g(We,He,ht,at,Ne,"throw",Pe)}at(void 0)})}}j.d(It,{Z:()=>k})}},Zn=>{Zn(Zn.s=1201)}]);