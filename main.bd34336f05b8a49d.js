"use strict";var fT=Object.defineProperty,pT=Object.defineProperties,gT=Object.getOwnPropertyDescriptors,aC=Object.getOwnPropertySymbols,mT=Object.prototype.hasOwnProperty,yT=Object.prototype.propertyIsEnumerable,lC=(Wn,Dt,j)=>Dt in Wn?fT(Wn,Dt,{enumerable:!0,configurable:!0,writable:!0,value:j}):Wn[Dt]=j,uC=(Wn,Dt)=>{for(var j in Dt||(Dt={}))mT.call(Dt,j)&&lC(Wn,j,Dt[j]);if(aC)for(var j of aC(Dt))yT.call(Dt,j)&&lC(Wn,j,Dt[j]);return Wn},cC=(Wn,Dt)=>pT(Wn,gT(Dt));(self.webpackChunkdrasti=self.webpackChunkdrasti||[]).push([[179],{6217:(Wn,Dt,j)=>{j.d(Dt,{nm:()=>Ki});var g=j(2122);j(5e3),j(259);var xe=j(5861),Ge=j(9681),St=j(4859),on=j(2090),Ht=j(1877);const Oe=new Map,Bt={activated:!1,tokenObservers:[]},Re={initialized:!1,enabled:!1};function wt(Ct){return Oe.get(Ct)||Object.assign({},Bt)}function Lt(){return Re}class Tr{constructor(ht,xt,_n,$n,Dr){if(this.operation=ht,this.retryPolicy=xt,this.getWaitDuration=_n,this.lowerBound=$n,this.upperBound=Dr,this.pending=null,this.nextErrorWaitInterval=$n,$n>Dr)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ht){var xt=this;return(0,xe.Z)(function*(){xt.stop();try{xt.pending=new on.BH,yield function mr(Ct){return new Promise(ht=>{setTimeout(ht,Ct)})}(xt.getNextRun(ht)),xt.pending.resolve(),yield xt.pending.promise,xt.pending=new on.BH,yield xt.operation(),xt.pending.resolve(),yield xt.pending.promise,xt.process(!0).catch(()=>{})}catch(_n){xt.retryPolicy(_n)?xt.process(!1).catch(()=>{}):xt.stop()}})()}getNextRun(ht){if(ht)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const xt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),xt}}}const kt=new on.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function At(Ct){if(!wt(Ct).activated)throw kt.create("use-before-activation",{appName:Ct.name})}function Mt(Ct,ht){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,xe.Z)(function*({url:Ct,body:ht},xt){const _n={"Content-Type":"application/json"},$n=xt.getImmediate({optional:!0});if($n){const _s=yield $n.getHeartbeatsHeader();_s&&(_n["X-Firebase-Client"]=_s)}const Dr={method:"POST",body:JSON.stringify(ht),headers:_n};let ei,zi;try{ei=yield fetch(Ct,Dr)}catch(_s){throw kt.create("fetch-network-error",{originalErrorMessage:null==_s?void 0:_s.message})}if(200!==ei.status)throw kt.create("fetch-status-error",{httpStatus:ei.status});try{zi=yield ei.json()}catch(_s){throw kt.create("fetch-parse-error",{originalErrorMessage:null==_s?void 0:_s.message})}const Mi=zi.ttl.match(/^([\d.]+)(s)$/);if(!Mi||!Mi[2]||isNaN(Number(Mi[1])))throw kt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${zi.ttl}`});const ys=1e3*Number(Mi[1]),ti=Date.now();return{token:zi.token,expireTimeMillis:ti+ys,issuedAtTimeMillis:ti}})).apply(this,arguments)}function ur(Ct,ht){const{projectId:xt,appId:_n,apiKey:$n}=Ct.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${xt}/apps/${_n}:exchangeDebugToken?key=${$n}`,body:{debug_token:ht}}}const er="firebase-app-check-store";let xr=null;function Mr(){return xr||(xr=new Promise((Ct,ht)=>{try{const xt=indexedDB.open("firebase-app-check-database",1);xt.onsuccess=_n=>{Ct(_n.target.result)},xt.onerror=_n=>{var $n;ht(kt.create("storage-open",{originalErrorMessage:null===($n=_n.target.error)||void 0===$n?void 0:$n.message}))},xt.onupgradeneeded=_n=>{0===_n.oldVersion&&_n.target.result.createObjectStore(er,{keyPath:"compositeKey"})}}catch(xt){ht(kt.create("storage-open",{originalErrorMessage:null==xt?void 0:xt.message}))}}),xr)}function Gt(){return(Gt=(0,xe.Z)(function*(Ct,ht){const _n=(yield Mr()).transaction(er,"readwrite"),Dr=_n.objectStore(er).put({compositeKey:Ct,value:ht});return new Promise((ei,zi)=>{Dr.onsuccess=Mi=>{ei()},_n.onerror=Mi=>{var ys;zi(kt.create("storage-set",{originalErrorMessage:null===(ys=Mi.target.error)||void 0===ys?void 0:ys.message}))}})})).apply(this,arguments)}const Jr=new Ht.Yd("@firebase/app-check");function ds(Ct,ht){return(0,on.hl)()?function Yi(Ct,ht){return function ct(Ct,ht){return Gt.apply(this,arguments)}(function qn(Ct){return`${Ct.options.appId}-${Ct.name}`}(Ct),ht)}(Ct,ht).catch(xt=>{Jr.warn(`Failed to write token to IndexedDB. Error: ${xt}`)}):Promise.resolve()}function Bn(){return Lt().enabled}function mi(){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,xe.Z)(function*(){const Ct=Lt();if(Ct.enabled&&Ct.token)return Ct.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const kn={error:"UNKNOWN_ERROR"};function zt(Ct){return on.US.encodeString(JSON.stringify(Ct),!1)}function Vn(Ct){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,xe.Z)(function*(Ct,ht=!1){const xt=Ct.app;At(xt);const _n=wt(xt);let Dr,$n=_n.token;if($n&&!ln($n)&&(_n.token=void 0,$n=void 0),!$n){const Mi=yield _n.cachedTokenPromise;Mi&&(ln(Mi)?$n=Mi:yield ds(xt,void 0))}if(!ht&&$n&&ln($n))return{token:$n.token};let zi,ei=!1;if(Bn()){_n.exchangeTokenPromise||(_n.exchangeTokenPromise=Mt(ur(xt,yield mi()),Ct.heartbeatServiceProvider).finally(()=>{_n.exchangeTokenPromise=void 0}),ei=!0);const Mi=yield _n.exchangeTokenPromise;return yield ds(xt,Mi),_n.token=Mi,{token:Mi.token}}try{_n.exchangeTokenPromise||(_n.exchangeTokenPromise=_n.provider.getToken().finally(()=>{_n.exchangeTokenPromise=void 0}),ei=!0),$n=yield wt(xt).exchangeTokenPromise}catch(Mi){"appCheck/throttled"===Mi.code?Jr.warn(Mi.message):Jr.error(Mi),Dr=Mi}return $n?Dr?zi=ln($n)?{token:$n.token,internalError:Dr}:Ft(Dr):(zi={token:$n.token},_n.token=$n,yield ds(xt,$n)):zi=Ft(Dr),ei&&ft(xt,zi),zi})).apply(this,arguments)}function Vr(Ct,ht){const xt=wt(Ct),_n=xt.tokenObservers.filter($n=>$n.next!==ht);0===_n.length&&xt.tokenRefresher&&xt.tokenRefresher.isRunning()&&xt.tokenRefresher.stop(),xt.tokenObservers=_n}function Qe(Ct){const{app:ht}=Ct,xt=wt(ht);let _n=xt.tokenRefresher;_n||(_n=function Ue(Ct){const{app:ht}=Ct;return new Tr((0,xe.Z)(function*(){let _n;if(_n=wt(ht).token?yield Vn(Ct,!0):yield Vn(Ct),_n.error)throw _n.error;if(_n.internalError)throw _n.internalError}),()=>!0,()=>{const xt=wt(ht);if(xt.token){let _n=xt.token.issuedAtTimeMillis+.5*(xt.token.expireTimeMillis-xt.token.issuedAtTimeMillis)+3e5;return _n=Math.min(_n,xt.token.expireTimeMillis-3e5),Math.max(0,_n-Date.now())}return 0},3e4,96e4)}(Ct),xt.tokenRefresher=_n),!_n.isRunning()&&xt.isTokenAutoRefreshEnabled&&_n.start()}function ft(Ct,ht){const xt=wt(Ct).tokenObservers;for(const _n of xt)try{"EXTERNAL"===_n.type&&null!=ht.error?_n.error(ht.error):_n.next(ht)}catch($n){}}function ln(Ct){return Ct.expireTimeMillis-Date.now()>0}function Ft(Ct){return{token:zt(kn),error:Ct}}class ze{constructor(ht,xt){this.app=ht,this.heartbeatServiceProvider=xt}_delete(){const{tokenObservers:ht}=wt(this.app);for(const xt of ht)Vr(this.app,xt.next);return Promise.resolve()}}const Cs="app-check-internal";!function Qr(){(0,Ge._registerComponent)(new St.wA("app-check",Ct=>function Me(Ct,ht){return new ze(Ct,ht)}(Ct.getProvider("app").getImmediate(),Ct.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ct,ht,xt)=>{Ct.getProvider(Cs).initialize()})),(0,Ge._registerComponent)(new St.wA(Cs,Ct=>function Ae(Ct){return{getToken:ht=>Vn(Ct,ht),addTokenListener:ht=>function Or(Ct,ht,xt,_n){const{app:$n}=Ct,Dr=wt($n);if(Dr.tokenObservers=[...Dr.tokenObservers,{next:xt,error:_n,type:ht}],Dr.token&&ln(Dr.token)){const zi=Dr.token;Promise.resolve().then(()=>{xt({token:zi.token}),Qe(Ct)}).catch(()=>{})}Dr.cachedTokenPromise.then(()=>Qe(Ct))}(Ct,"INTERNAL",ht),removeTokenListener:ht=>Vr(Ct.app,ht)}}(Ct.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ge.registerVersion)("@firebase/app-check","0.6.0")}();class Ki{constructor(){return(0,g.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Wn,Dt,j)=>{j.d(Dt,{zQ:()=>pt,ww:()=>Rt,rT:()=>Re,f7:()=>Je,L6:()=>Oe,_Q:()=>Bt,lh:()=>wt,Qv:()=>Ht,nw:()=>Lt});var g=j(5e3),k=j(7579),he=j(9646),ae=j(8306),je=j(8996),He=j(6451),dt=j(6063);class qe extends k.x{constructor(sr=1/0,or=1/0,mn=dt.l){super(),this._bufferSize=sr,this._windowTime=or,this._timestampProvider=mn,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=or===1/0,this._bufferSize=Math.max(1,sr),this._windowTime=Math.max(1,or)}next(sr){const{isStopped:or,_buffer:mn,_infiniteTimeWindow:Tr,_timestampProvider:mr,_windowTime:Vt}=this;or||(mn.push(sr),!Tr&&mn.push(mr.now()+Vt)),this._trimBuffer(),super.next(sr)}_subscribe(sr){this._throwIfClosed(),this._trimBuffer();const or=this._innerSubscribe(sr),{_infiniteTimeWindow:mn,_buffer:Tr}=this,mr=Tr.slice();for(let Vt=0;Vt<mr.length&&!sr.closed;Vt+=mn?1:2)sr.next(mr[Vt]);return this._checkFinalizedStatuses(sr),or}_trimBuffer(){const{_bufferSize:sr,_timestampProvider:or,_buffer:mn,_infiniteTimeWindow:Tr}=this,mr=(Tr?1:2)*sr;if(sr<1/0&&mr<mn.length&&mn.splice(0,mn.length-mr),!Tr){const Vt=or.now();let kt=0;for(let it=1;it<mn.length&&mn[it]<=Vt;it+=2)kt=it;kt&&mn.splice(0,kt+1)}}}var at=j(3099);function Ne(Sn,sr,or){let mn,Tr=!1;return Sn&&"object"==typeof Sn?({bufferSize:mn=1/0,windowTime:sr=1/0,refCount:Tr=!1,scheduler:or}=Sn):mn=null!=Sn?Sn:1/0,(0,at.B)({connector:()=>new qe(mn,sr,or),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Tr})}var Pe=j(3900),bt=j(576);function Tn(Sn,sr){return(0,bt.m)(sr)?(0,Pe.w)(()=>Sn,sr):(0,Pe.w)(()=>Sn)}var Et=j(5363),un=j(4004),In=j(590),Ot=j(9468),tn=j(9300),Ln=j(2122),dn=j(2011),xe=j(9808),Ge=j(6217),St=j(9260);const Ht=new g.OlP("angularfire2.auth.use-emulator"),Oe=new g.OlP("angularfire2.auth.settings"),Bt=new g.OlP("angularfire2.auth.tenant-id"),Re=new g.OlP("angularfire2.auth.langugage-code"),wt=new g.OlP("angularfire2.auth.use-device-language"),Je=new g.OlP("angularfire.auth.persistence"),Lt=(Sn,sr,or,mn,Tr,mr,Vt,kt)=>(0,dn.cc)(`${Sn.name}.auth`,"AngularFireAuth",Sn.name,()=>{const it=sr.runOutsideAngular(()=>Sn.auth());if(or&&it.useEmulator(...or),mn&&(it.tenantId=mn),it.languageCode=Tr,mr&&it.useDeviceLanguage(),Vt)for(const[At,ut]of Object.entries(Vt))it.settings[At]=ut;return kt&&it.setPersistence(kt),it},[or,mn,Tr,mr,Vt,kt]);let pt=(()=>{class Sn{constructor(or,mn,Tr,mr,Vt,kt,it,At,ut,Qt,Mt,Xt){const Hn=new k.x,ir=(0,he.of)(void 0).pipe((0,Et.Q)(Vt.outsideAngular),(0,Pe.w)(()=>mr.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9169)))),(0,un.U)(()=>(0,dn.on)(or,mr,mn)),(0,un.U)(ur=>Lt(ur,mr,kt,At,ut,Qt,it,Mt)),Ne({bufferSize:1,refCount:!1}));if((0,xe.PM)(Tr))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,he.of)(null);else{ir.pipe((0,In.P)()).subscribe();const Yr=ir.pipe((0,Pe.w)(Wr=>Wr.getRedirectResult().then(xr=>xr,()=>null)),Ln.iC,Ne({bufferSize:1,refCount:!1})),oi=ir.pipe((0,Pe.w)(Wr=>new ae.y(xr=>({unsubscribe:mr.runOutsideAngular(()=>Wr.onAuthStateChanged(Mr=>xr.next(Mr),Mr=>xr.error(Mr),()=>xr.complete()))})))),er=ir.pipe((0,Pe.w)(Wr=>new ae.y(xr=>({unsubscribe:mr.runOutsideAngular(()=>Wr.onIdTokenChanged(Mr=>xr.next(Mr),Mr=>xr.error(Mr),()=>xr.complete()))}))));this.authState=Yr.pipe(Tn(oi),(0,Ot.R)(Vt.outsideAngular),(0,Et.Q)(Vt.insideAngular)),this.user=Yr.pipe(Tn(er),(0,Ot.R)(Vt.outsideAngular),(0,Et.Q)(Vt.insideAngular)),this.idToken=this.user.pipe((0,Pe.w)(Wr=>Wr?(0,je.D)(Wr.getIdToken()):(0,he.of)(null))),this.idTokenResult=this.user.pipe((0,Pe.w)(Wr=>Wr?(0,je.D)(Wr.getIdTokenResult()):(0,he.of)(null))),this.credential=(0,He.T)(Yr,Hn,this.authState.pipe((0,tn.h)(Wr=>!Wr))).pipe((0,un.U)(Wr=>(null==Wr?void 0:Wr.user)?Wr:null),(0,Ot.R)(Vt.outsideAngular),(0,Et.Q)(Vt.insideAngular))}return(0,dn.pX)(this,ir,mr,{spy:{apply:(ur,Yr,oi)=>{(ur.startsWith("signIn")||ur.startsWith("createUser"))&&oi.then(er=>Hn.next(er))}}})}}return Sn.\u0275fac=function(or){return new(or||Sn)(g.LFG(dn.Dh),g.LFG(dn.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ln.HU),g.LFG(Ht,8),g.LFG(Oe,8),g.LFG(Bt,8),g.LFG(Re,8),g.LFG(wt,8),g.LFG(Je,8),g.LFG(Ge.nm,8))},Sn.\u0275prov=g.Yz7({token:Sn,factory:Sn.\u0275fac,providedIn:"any"}),Sn})(),Rt=(()=>{class Sn{constructor(){St.Z.registerVersion("angularfire",Ln.q4.full,"auth-compat")}}return Sn.\u0275fac=function(or){return new(or||Sn)},Sn.\u0275mod=g.oAB({type:Sn}),Sn.\u0275inj=g.cJS({providers:[pt]}),Sn})()},2095:(Wn,Dt,j)=>{j.d(Dt,{ST:()=>r_,yb:()=>i_});var g=j(5e3),k=j(4986),he=j(8306),ae=j(8996),je=j(9646),He=j(2122),dt=j(4482),qe=j(5403);function at(){return(0,dt.e)((i,e)=>{let t,s=!1;i.subscribe((0,qe.x)(e,u=>{const m=t;t=u,s&&e.next([m,u]),s=!0}))})}var Ne=j(4671);function bt(i,e){return i===e}var Re,Tn=j(8675),Et=j(4004),un=j(5026),In=j(9300),Ot=j(2011),tn=j(9808),dn=(j(9169),j(3942)),xe=j(5861),Ge=j(9681),St=j(4859),on=j(1877),Ht=j(2090),Oe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Bt={},wt=wt||{},Je=Oe||self;function Lt(){}function pt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Rt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var sr="closure_uid_"+(1e9*Math.random()>>>0),or=0;function mn(i,e,t){return i.call.apply(i.bind,arguments)}function Tr(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function mr(i,e,t){return(mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mn:Tr).apply(null,arguments)}function Vt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function kt(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,u,m){for(var E=Array(arguments.length-2),R=2;R<arguments.length;R++)E[R-2]=arguments[R];return e.prototype[u].apply(s,E)}}function it(){this.s=this.s,this.o=this.o}it.prototype.s=!1,it.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Sn(i){Object.prototype.hasOwnProperty.call(i,sr)&&i[sr]||(i[sr]=++or)}(this)},it.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ut=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Qt(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Mt(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(pt(s)){const u=i.length||0,m=s.length||0;i.length=u+m;for(let E=0;E<m;E++)i[u+E]=s[E]}else i.push(s)}}function Xt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var Hn=function(){if(!Je.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Je.addEventListener("test",Lt,e),Je.removeEventListener("test",Lt,e)}catch(t){}return i}();function ir(i){return/^[\s\xa0]*$/.test(i)}var ur=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Yr(i,e){return i<e?-1:i>e?1:0}function oi(){var i=Je.navigator;return i&&(i=i.userAgent)?i:""}function er(i){return-1!=oi().indexOf(i)}function Wr(i){return Wr[" "](i),i}Wr[" "]=Lt;var nn,i,Mr=er("Opera"),is=er("Trident")||er("MSIE"),Yi=er("Edge"),cn=Yi||is,nt=er("Gecko")&&!(-1!=oi().toLowerCase().indexOf("webkit")&&!er("Edge"))&&!(er("Trident")||er("MSIE"))&&!er("Edge"),ct=-1!=oi().toLowerCase().indexOf("webkit")&&!er("Edge");function Gt(){var i=Je.document;return i?i.documentMode:void 0}e:{var En="",qn=(i=oi(),nt?/rv:([^\);]+)(\)|;)/.exec(i):Yi?/Edge\/([\d\.]+)/.exec(i):is?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ct?/WebKit\/(\S+)/.exec(i):Mr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(qn&&(En=qn?qn[1]:""),is){var Jr=Gt();if(null!=Jr&&Jr>parseFloat(En)){nn=String(Jr);break e}}nn=En}var Hr={};var gi=Je.document&&is&&(Gt()||parseInt(nn,10))||void 0;function Bn(i,e){if(Xt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(nt){e:{try{Wr(e.nodeName);var u=!0;break e}catch(m){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:mi[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Bn.X.h.call(this)}}kt(Bn,Xt);var mi={2:"touch",3:"pen",4:"mouse"};Bn.prototype.h=function(){Bn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Lr="closure_listenable_"+(1e6*Math.random()|0),ki=0;function kn(i,e,t,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=u,this.key=++ki,this.ba=this.ea=!1}function zt(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Vn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function Pr(i){const e={};for(const t in i)e[t]=i[t];return e}const Or="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vr(i,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)i[t]=s[t];for(let m=0;m<Or.length;m++)t=Or[m],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Qe(i){this.src=i,this.g={},this.h=0}function Ue(i,e){var t=e.type;if(t in i.g){var m,s=i.g[t],u=ut(s,e);(m=0<=u)&&Array.prototype.splice.call(s,u,1),m&&(zt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function ft(i,e,t,s){for(var u=0;u<i.length;++u){var m=i[u];if(!m.ba&&m.listener==e&&m.capture==!!t&&m.ha==s)return u}return-1}Qe.prototype.add=function(i,e,t,s,u){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var E=ft(i,e,s,u);return-1<E?(e=i[E],t||(e.ea=!1)):((e=new kn(e,this.src,m,!!s,u)).ea=t,i.push(e)),e};var ln="closure_lm_"+(1e6*Math.random()|0),Ft={};function ze(i,e,t,s,u){if(s&&s.once)return gt(i,e,t,s,u);if(Array.isArray(e)){for(var m=0;m<e.length;m++)ze(i,e[m],t,s,u);return null}return t=Hs(t),i&&i[Lr]?i.N(e,t,Rt(s)?!!s.capture:!!s,u):Me(i,e,t,!1,s,u)}function Me(i,e,t,s,u,m){if(!e)throw Error("Invalid event type");var E=Rt(u)?!!u.capture:!!u,R=Qi(i);if(R||(i[ln]=R=new Qe(i)),(t=R.add(e,t,s,E,m)).proxy)return t;if(s=function Ae(){const e=ai;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Hn||(u=E),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(Yn(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function gt(i,e,t,s,u){if(Array.isArray(e)){for(var m=0;m<e.length;m++)gt(i,e[m],t,s,u);return null}return t=Hs(t),i&&i[Lr]?i.O(e,t,Rt(s)?!!s.capture:!!s,u):Me(i,e,t,!0,s,u)}function sn(i,e,t,s,u){if(Array.isArray(e))for(var m=0;m<e.length;m++)sn(i,e[m],t,s,u);else s=Rt(s)?!!s.capture:!!s,t=Hs(t),i&&i[Lr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=ft(m=i.g[e],t,s,u))&&(zt(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=Qi(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ft(e,t,s,u)),(t=-1<i?e[i]:null)&&vr(t))}function vr(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Lr])Ue(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Yn(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Qi(e))?(Ue(t,i),0==t.h&&(t.src=null,e[ln]=null)):zt(i)}}}function Yn(i){return i in Ft?Ft[i]:Ft[i]="on"+i}function ai(i,e){if(i.ba)i=!0;else{e=new Bn(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&vr(i),i=t.call(s,e)}return i}function Qi(i){return(i=i[ln])instanceof Qe?i:null}var os="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hs(i){return"function"==typeof i?i:(i[os]||(i[os]=function(e){return i.handleEvent(e)}),i[os])}function Fi(){it.call(this),this.i=new Qe(this),this.P=this,this.I=null}function ci(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new Xt(e,i);else if(e instanceof Xt)e.target=e.target||i;else{var u=e;Vr(e=new Xt(s,i),u)}if(u=!0,t)for(var m=t.length-1;0<=m;m--){var E=e.g=t[m];u=as(E,s,!0,e)&&u}if(u=as(E=e.g=i,s,!0,e)&&u,u=as(E,s,!1,e)&&u,t)for(m=0;m<t.length;m++)u=as(E=e.g=t[m],s,!1,e)&&u}function as(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,m=0;m<e.length;++m){var E=e[m];if(E&&!E.ba&&E.capture==t){var R=E.listener,X=E.ha||E.src;E.ea&&Ue(i.i,E),u=!1!==R.call(X,s)&&u}}return u&&!s.defaultPrevented}kt(Fi,it),Fi.prototype[Lr]=!0,Fi.prototype.removeEventListener=function(i,e,t,s){sn(this,i,e,t,s)},Fi.prototype.M=function(){if(Fi.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)zt(t[s]);delete i.g[e],i.h--}}this.I=null},Fi.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Fi.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var wi=Je.JSON.stringify;function Cn(){var i=Hi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ji,li=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Pi,i=>i.reset());class Pi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hs(i){Je.setTimeout(()=>{throw i},0)}function Xi(i,e){Ji||function ji(){var i=Je.Promise.resolve(void 0);Ji=function(){i.then(qr)}}(),Ii||(Ji(),Ii=!0),Hi.add(i,e)}var Ii=!1,Hi=new class br{constructor(){this.h=this.g=null}add(e,t){const s=li.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function qr(){for(var i;i=Cn();){try{i.h.call(i.g)}catch(t){hs(t)}var e=li;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Ii=!1}function es(i,e){Fi.call(this),this.h=i||1,this.g=e||Je,this.j=mr(this.lb,this),this.l=Date.now()}function ls(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Cs(i,e,t){if("function"==typeof i)t&&(i=mr(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=mr(i.handleEvent,i)}return 2147483647<Number(e)?-1:Je.setTimeout(i,e||0)}function Qr(i){i.g=Cs(()=>{i.g=null,i.i&&(i.i=!1,Qr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}kt(es,Fi),(Re=es.prototype).ca=!1,Re.R=null,Re.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ci(this,"tick"),this.ca&&(ls(this),this.start()))}},Re.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Re.M=function(){es.X.M.call(this),ls(this),delete this.g};class wr extends it{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qr(this)}M(){super.M(),this.g&&(Je.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(i){it.call(this),this.h=i,this.g={}}kt(Sr,it);var Ki=[];function Br(i,e,t,s){Array.isArray(t)||(t&&(Ki[0]=t.toString()),t=Ki);for(var u=0;u<t.length;u++){var m=ze(e,t[u],s||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function xi(i){Vn(i.g,function(e,t){this.g.hasOwnProperty(t)&&vr(e)},i),i.g={}}function Vs(){this.g=!0}function ui(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function gs(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var m=u[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var E=1;E<u.length;E++)u[E]=""}}}return wi(t)}catch(R){return e}}(i,t)+(s?" "+s:"")})}Sr.prototype.M=function(){Sr.X.M.call(this),xi(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vs.prototype.Aa=function(){this.g=!1},Vs.prototype.info=function(){};var ms={},bs=null;function Bi(){return bs=bs||new Fi}function $o(i){Xt.call(this,ms.Pa,i)}function co(i){const e=Bi();ci(e,new $o(e))}function Ns(i,e){Xt.call(this,ms.STAT_EVENT,i),this.stat=e}function ns(i){const e=Bi();ci(e,new Ns(e,i))}function Ct(i,e){Xt.call(this,ms.Qa,i),this.size=e}function ht(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Je.setTimeout(function(){i()},e)}ms.Pa="serverreachability",kt($o,Xt),ms.STAT_EVENT="statevent",kt(Ns,Xt),ms.Qa="timingevent",kt(Ct,Xt);var xt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},_n={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function $n(){}function ei(){}$n.prototype.h=null;var ti,zi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Mi(){Xt.call(this,"d")}function ys(){Xt.call(this,"c")}function _s(){}function As(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new Sr(this),this.O=Ts,this.T=new es(i=cn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Yo}function Yo(){this.i=null,this.g="",this.h=!1}kt(Mi,Xt),kt(ys,Xt),kt(_s,$n),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},ti=new _s;var Ts=45e3,mo={},ps={};function Lo(i,e,t){i.K=1,i.v=Ti(fo(e)),i.s=t,i.P=!0,bi(i,null)}function bi(i,e){i.F=Date.now(),zs(i),i.A=fo(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),Zi(t.i,"t",s),i.C=0,t=i.l.H,i.h=new Yo,i.g=Pt(i.l,t?e:null,!i.s),0<i.N&&(i.L=new wr(mr(i.La,i,i.g),i.N)),Br(i.S,i.g,"readystatechange",i.ib),e=i.H?Pr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),co(),function Gi(i,e,t,s,u,m){i.info(function(){if(i.g)if(m)for(var E="",R=m.split("&"),X=0;X<R.length;X++){var se=R[X].split("=");if(1<se.length){var Se=se[0];se=se[1];var st=Se.split("_");E=2<=st.length&&"type"==st[1]?E+(Se+"=")+se+"&":E+(Se+"=redacted&")}}else E=null;else E=m;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+E})}(i.j,i.u,i.A,i.m,i.U,i.s)}function ho(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Us(i,e,t){let u,s=!0;for(;!i.I&&i.C<t.length;){if(u=Gs(i,t),u==ps){4==e&&(i.o=4,ns(14),s=!1),ui(i.j,i.m,null,"[Incomplete Response]");break}if(u==mo){i.o=4,ns(15),ui(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}ui(i.j,i.m,u,null),xs(i,u)}ho(i)&&u!=ps&&u!=mo&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,ns(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),vn(e),e.K=!0,ns(11))):(ui(i.j,i.m,t,"[Invalid Chunked Response]"),Bs(i),Ws(i))}function Gs(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?ps:(t=Number(e.substring(t,s)),isNaN(t)?mo:(s+=1)+t>e.length?ps:(e=e.substr(s,t),i.C=s+t,e))}function zs(i){i.V=Date.now()+i.O,Vo(i,i.O)}function Vo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ht(mr(i.gb,i),e)}function Qs(i){i.B&&(Je.clearTimeout(i.B),i.B=null)}function Ws(i){0==i.l.G||i.I||Mn(i.l,i)}function Bs(i){Qs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,ls(i.T),xi(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function xs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||To(t.h,i)))if(!i.J&&To(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch(se){s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0])e:if(t.u)t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=ht(mr(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;gn(t),le(t)}yt(t),ns(18)}if(1>=Ao(t.h)&&t.ja){try{t.ja()}catch(se){}t.ja=void 0}}else _r(t,11)}else if((i.J||t.g==i)&&gn(t),!ir(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let se=u[e];if(t.T=se[0],se=se[1],2==t.G)if("c"==se[0]){t.I=se[1],t.ka=se[2];const Se=se[3];null!=Se&&(t.ma=Se,t.j.info("VER="+t.ma));const st=se[4];null!=st&&(t.Ca=st,t.j.info("SVER="+t.Ca));const Kt=se[5];null!=Kt&&"number"==typeof Kt&&0<Kt&&(t.J=s=1.5*Kt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const On=i.g;if(On){const Qn=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qn){var m=s.h;m.g||-1==Qn.indexOf("spdy")&&-1==Qn.indexOf("quic")&&-1==Qn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(ws(m,m.h),m.h=null))}if(s.D){const Nr=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;Nr&&(s.za=Nr,Vi(s.F,s.D,Nr))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var E=i;if((s=t).sa=Jt(s,s.H?s.ka:null,s.V),E.J){Q(s.h,E);var R=E,X=s.J;X&&R.setTimeout(X),R.B&&(Qs(R),zs(R)),s.g=E}else et(s);0<t.i.length&&We(t)}else"stop"!=se[0]&&"close"!=se[0]||_r(t,7);else 3==t.G&&("stop"==se[0]||"close"==se[0]?"stop"==se[0]?_r(t,7):ce(t):"noop"!=se[0]&&t.l&&t.l.wa(se),t.A=0)}co()}catch(se){}}function so(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(pt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function us(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(pt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Qo(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(pt(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),u=s.length,m=0;m<u;m++)e.call(void 0,s[m],t&&t[m],i)}(Re=As.prototype).setTimeout=function(i){this.O=i},Re.ib=function(i){i=i.target;const e=this.L;e&&3==z(i)?e.l():this.La(i)},Re.La=function(i){try{if(i==this.g)e:{const Se=z(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Se)&&(3!=Se||cn||this.g&&(this.h.h||this.g.fa()||J(this.g)))){this.I||4!=Se||7==e||co(),Qs(this);var t=this.g.aa();this.Y=t;t:if(ho(this)){var s=J(this.g);i="";var u=s.length,m=4==z(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Bs(this),Ws(this);var E="";break t}this.h.i=new Je.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:m&&e==u-1});s.splice(0,u),this.h.g+=i,this.C=0,E=this.h.g}else E=this.g.fa();if(this.i=200==t,function fs(i,e,t,s,u,m,E){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+m+" "+E})}(this.j,this.u,this.A,this.m,this.U,Se,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var R,X=this.g;if((R=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ir(R)){var se=R;break t}}se=null}if(!(t=se)){this.i=!1,this.o=3,ns(12),Bs(this),Ws(this);break e}ui(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xs(this,t)}this.P?(Us(this,Se,E),cn&&this.i&&3==Se&&(Br(this.S,this.T,"tick",this.hb),this.T.start())):(ui(this.j,this.m,E,null),xs(this,E)),4==Se&&Bs(this),this.i&&!this.I&&(4==Se?Mn(this.l,this):(this.i=!1,zs(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,ns(12)):(this.o=0,ns(13)),Bs(this),Ws(this)}}}catch(Se){}},Re.hb=function(){if(this.g){var i=z(this.g),e=this.g.fa();this.C<e.length&&(Qs(this),Us(this,i,e),this.i&&4!=i&&zs(this))}},Re.cancel=function(){this.I=!0,Bs(this)},Re.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Ir(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(co(),ns(17)),Bs(this),this.o=2,Ws(this)):Vo(this,this.V-i)};var Ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xs(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Xs){this.h=void 0!==e?e:i.h,Zs(this,i.j),this.s=i.s,this.g=i.g,Rs(this,i.m),this.l=i.l,e=i.i;var t=new Gr;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),qs(this,t),this.o=i.o}else i&&(t=String(i).match(Ms))?(this.h=!!e,Zs(this,t[1]||"",!0),this.s=B(t[2]||""),this.g=B(t[3]||"",!0),Rs(this,t[4]),this.l=B(t[5]||"",!0),qs(this,t[6]||"",!0),this.o=B(t[7]||"")):(this.h=!!e,this.i=new Gr(null,this.h))}function fo(i){return new Xs(i)}function Zs(i,e,t){i.j=t?B(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Rs(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function qs(i,e,t){e instanceof Gr?(i.i=e,function Si(i,e){e&&!i.j&&(Xr(i),i.i=null,i.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(ni(this,s),Zi(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=fe(e,wn)),i.i=new Gr(e,i.h))}function Vi(i,e,t){i.i.set(e,t)}function Ti(i){return Vi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function B(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function fe(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,W),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function W(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Xs.prototype.toString=function(){var i=[],e=this.j;e&&i.push(fe(e,ve,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(fe(e,ve,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(fe(t,"/"==t.charAt(0)?rn:Ke,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",fe(t,hr)),i.join("")};var ve=/[#\/\?@]/g,Ke=/[#\?:]/g,rn=/[#\?]/g,wn=/[#\?@]/g,hr=/#/g;function Gr(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Xr(i){i.g||(i.g=new Map,i.h=0,i.i&&function Li(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),u=null;if(0<=s){var m=i[t].substring(0,s);u=i[t].substring(s+1)}else m=i[t];e(m,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ni(i,e){Xr(i),e=Ni(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function yi(i,e){return Xr(i),e=Ni(i,e),i.g.has(e)}function Zi(i,e,t){ni(i,e),0<t.length&&(i.i=null,i.g.set(Ni(i,e),Qt(t)),i.h+=t.length)}function Ni(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ts(i){this.l=i||Kr,i=Je.PerformanceNavigationTiming?0<(i=Je.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Je.g&&Je.g.Ga&&Je.g.Ga()&&Je.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Re=Gr.prototype).add=function(i,e){Xr(this),this.i=null,i=Ni(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Re.forEach=function(i,e){Xr(this),this.g.forEach(function(t,s){t.forEach(function(u){i.call(e,u,s,this)},this)},this)},Re.oa=function(){Xr(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const u=i[s];for(let m=0;m<u.length;m++)t.push(e[s])}return t},Re.W=function(i){Xr(this);let e=[];if("string"==typeof i)yi(this,i)&&(e=e.concat(this.g.get(Ni(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Re.set=function(i,e){return Xr(this),this.i=null,yi(this,i=Ni(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Re.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const m=encodeURIComponent(String(s)),E=this.W(s);for(s=0;s<E.length;s++){var u=m;""!==E[s]&&(u+="="+encodeURIComponent(String(E[s]))),i.push(u)}}return this.i=i.join("&")};var Kr=10;function Js(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ao(i){return i.h?1:i.g?i.g.size:0}function To(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ws(i,e){i.g?i.g.add(e):i.h=e}function Q(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function G(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Qt(i.i)}function V(){}function ye(){this.g=new V}function Ye(i,e,t){const s=t||"";try{so(i,function(u,m){let E=u;Rt(u)&&(E=wi(u)),e.push(s+m+"="+encodeURIComponent(E))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function ee(i,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch(m){}}function K(i){this.l=i.ac||null,this.j=i.jb||!1}function Ce(i,e){Fi.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Le,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ts.prototype.cancel=function(){if(this.i=G(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},V.prototype.stringify=function(i){return Je.JSON.stringify(i,void 0)},V.prototype.parse=function(i){return Je.JSON.parse(i,void 0)},kt(K,$n),K.prototype.g=function(){return new Ce(this.l,this.j)},K.prototype.i=function(i){return function(){return i}}({}),kt(Ce,Fi);var Le=0;function rt(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Zt(i){i.readyState=4,i.l=null,i.j=null,i.A=null,An(i)}function An(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Re=Ce.prototype).open=function(i,e){if(this.readyState!=Le)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,An(this)},Re.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Je).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zt(this)),this.readyState=Le},Re.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Je.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rt(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Re.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Zt(this):An(this),3==this.readyState&&rt(this)}},Re.Va=function(i){this.g&&(this.response=this.responseText=i,Zt(this))},Re.Ua=function(i){this.g&&(this.response=i,Zt(this))},Re.ga=function(){this.g&&Zt(this)},Re.setRequestHeader=function(i,e){this.v.append(i,e)},Re.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Re.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Ce.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var fr=Je.JSON.parse;function Kn(i){Fi.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ri,this.K=this.L=!1}kt(Kn,Fi);var ri="",vi=/^https?$/i,hi=["POST","PUT"];function rs(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,l(i),I(i)}function l(i){i.D||(i.D=!0,ci(i,"complete"),ci(i,"error"))}function A(i){if(i.h&&void 0!==wt&&(!i.C[1]||4!=z(i)||2!=i.aa()))if(i.v&&4==z(i))Cs(i.Ha,0,i);else if(ci(i,"readystatechange"),4==z(i)){i.h=!1;try{const R=i.aa();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===R){var u=String(i.H).match(Ms)[1]||null;if(!u&&Je.self&&Je.self.location){var m=Je.self.location.protocol;u=m.substr(0,m.length-1)}s=!vi.test(u?u.toLowerCase():"")}t=s}if(t)ci(i,"complete"),ci(i,"success");else{i.m=6;try{var E=2<z(i)?i.g.statusText:""}catch(X){E=""}i.j=E+" ["+i.aa()+"]",l(i)}}finally{I(i)}}}function I(i,e){if(i.g){P(i);const t=i.g,s=i.C[0]?Lt:null;i.g=null,i.C=null,e||ci(i,"ready");try{t.onreadystatechange=s}catch(u){}}}function P(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Je.clearTimeout(i.A),i.A=null)}function z(i){return i.g?i.g.readyState:0}function J(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ri:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ge(i){let e="";return Vn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function be(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ge(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Vi(i,e,t))}function oe(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function me(i){this.Ca=0,this.i=[],this.j=new Vs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=oe("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=oe("baseRetryDelayMs",5e3,i),this.bb=oe("retryDelaySeedMs",1e4,i),this.$a=oe("forwardChannelMaxRetries",2,i),this.ta=oe("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ts(i&&i.concurrentRequestLimit),this.Fa=new ye,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ce(i){if(Te(i),3==i.G){var e=i.U++,t=fo(i.F);Vi(t,"SID",i.I),Vi(t,"RID",e),Vi(t,"TYPE","terminate"),ke(i,t),(e=new As(i,i.j,e,void 0)).K=2,e.v=Ti(fo(t)),t=!1,Je.navigator&&Je.navigator.sendBeacon&&(t=Je.navigator.sendBeacon(e.v.toString(),"")),!t&&Je.Image&&((new Image).src=e.v,t=!0),t||(e.g=Pt(e.l,null),e.g.da(e.v)),e.F=Date.now(),zs(e)}Fn(i)}function le(i){i.g&&(vn(i),i.g.cancel(),i.g=null)}function Te(i){le(i),i.u&&(Je.clearTimeout(i.u),i.u=null),gn(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Je.clearTimeout(i.m),i.m=null)}function We(i){Js(i.h)||i.m||(i.m=!0,Xi(i.Ja,i),i.C=0)}function De(i,e){var t;t=e?e.m:i.U++;const s=fo(i.F);Vi(s,"SID",i.I),Vi(s,"RID",t),Vi(s,"AID",i.T),ke(i,s),i.o&&i.s&&be(s,i.o,i.s),t=new As(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=_t(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),ws(i.h,t),Lo(t,s,e)}function ke(i,e){i.ia&&Vn(i.ia,function(t,s){Vi(e,s,t)}),i.l&&so({},function(t,s){Vi(e,s,t)})}function _t(i,e,t){t=Math.min(i.i.length,t);var s=i.l?mr(i.l.Ra,i.l,i):null;e:{var u=i.i;let m=-1;for(;;){const E=["count="+t];-1==m?0<t?(m=u[0].h,E.push("ofs="+m)):m=0:E.push("ofs="+m);let R=!0;for(let X=0;X<t;X++){let se=u[X].h;const Se=u[X].g;if(se-=m,0>se)m=Math.max(0,u[X].h-100),R=!1;else try{Ye(Se,E,"req"+se+"_")}catch(st){s&&s(Se)}}if(R){s=E.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function et(i){i.g||i.u||(i.Z=1,Xi(i.Ia,i),i.A=0)}function yt(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=ht(mr(i.Ia,i),nr(i,i.A)),i.A++,0))}function vn(i){null!=i.B&&(Je.clearTimeout(i.B),i.B=null)}function Dn(i){i.g=new As(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=fo(i.sa);Vi(e,"RID","rpc"),Vi(e,"SID",i.I),Vi(e,"CI",i.L?"0":"1"),Vi(e,"AID",i.T),Vi(e,"TYPE","xmlhttp"),ke(i,e),i.o&&i.s&&be(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Ti(fo(e)),t.s=null,t.P=!0,bi(t,i)}function gn(i){null!=i.v&&(Je.clearTimeout(i.v),i.v=null)}function Mn(i,e){var t=null;if(i.g==e){gn(i),vn(i),i.g=null;var s=2}else{if(!To(i.h,e))return;t=e.D,Q(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;ci(s=Bi(),new Ct(s,t)),We(i)}else et(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==s&&function tt(i,e){return!(Ao(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=ht(mr(i.Ja,i,e),nr(i,i.C)),i.C++,0)))}(i,e)||2==s&&yt(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:_r(i,5);break;case 4:_r(i,10);break;case 3:_r(i,6);break;default:_r(i,2)}}function nr(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function _r(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=mr(i.kb,i);t||(t=new Xs("//www.google.com/images/cleardot.gif"),Je.location&&"http"==Je.location.protocol||Zs(t,"https"),Ti(t)),function xn(i,e){const t=new Vs;if(Je.Image){const s=new Image;s.onload=Vt(ee,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Vt(ee,t,s,"TestLoadImage: error",!1,e),s.onabort=Vt(ee,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Vt(ee,t,s,"TestLoadImage: timeout",!1,e),Je.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else ns(2);i.G=0,i.l&&i.l.va(e),Fn(i),Te(i)}function Fn(i){if(i.G=0,i.la=[],i.l){const e=G(i.h);(0!=e.length||0!=i.i.length)&&(Mt(i.la,e),Mt(i.la,i.i),i.h.i.length=0,Qt(i.i),i.i.length=0),i.l.ua()}}function Jt(i,e,t){var s=t instanceof Xs?fo(t):new Xs(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Rs(s,s.m);else{var u=Je.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var m=new Xs(null,void 0);s&&Zs(m,s),e&&(m.g=e),u&&Rs(m,u),t&&(m.l=t),s=m}return e=i.za,(t=i.D)&&e&&Vi(s,t,e),Vi(s,"VER",i.ma),ke(i,s),s}function Pt(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&i.Da&&!i.ra?new K({jb:!0}):i.ra)).Ka(i.H),e}function hn(){}function lr(){if(is&&!(10<=Number(gi)))throw Error("Environmental error: no available transport.")}function ar(i,e){Fi.call(this),this.g=new me(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!ir(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ir(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new tr(this)}function Wt(i){Mi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function cr(){ys.call(this),this.status=1}function tr(i){this.g=i}(Re=Kn.prototype).Ka=function(i){this.L=i},Re.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ti.g(),this.C=function Dr(i){return i.h||(i.h=i.i())}(this.u?this.u:ti),this.g.onreadystatechange=mr(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void rs(this,m)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)t.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const m of s.keys())t.set(m,s.get(m))}s=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),u=Je.FormData&&i instanceof Je.FormData,!(0<=ut(hi,e))||s||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,E]of t)this.g.setRequestHeader(m,E);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{P(this),0<this.B&&((this.K=function $i(i){return is&&function Fr(){return function xr(i){var e=Hr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=ur(String(nn)).split("."),t=ur("9").split("."),s=Math.max(e.length,t.length);for(let E=0;0==i&&E<s;E++){var u=e[E]||"",m=t[E]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==u[0].length&&0==m[0].length)break;i=Yr(0==u[1].length?0:parseInt(u[1],10),0==m[1].length?0:parseInt(m[1],10))||Yr(0==u[2].length,0==m[2].length)||Yr(u[2],m[2]),u=u[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.qa,this)):this.A=Cs(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){rs(this,m)}},Re.qa=function(){void 0!==wt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ci(this,"timeout"),this.abort(8))},Re.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,ci(this,"complete"),ci(this,"abort"),I(this))},Re.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),I(this,!0)),Kn.X.M.call(this)},Re.Ha=function(){this.s||(this.F||this.v||this.l?A(this):this.fb())},Re.fb=function(){A(this)},Re.aa=function(){try{return 2<z(this)?this.g.status:-1}catch(i){return-1}},Re.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Re.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),fr(e)}},Re.Ea=function(){return this.m},Re.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Re=me.prototype).ma=8,Re.G=1,Re.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new As(this,this.j,i,void 0);let m=this.s;if(this.S&&(m?(m=Pr(m),Vr(m,this.S)):m=this.S),null!==this.o||this.N||(u.H=m,m=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_t(this,u,e),Vi(t=fo(this.F),"RID",i),Vi(t,"CVER",22),this.D&&Vi(t,"X-HTTP-Session-Id",this.D),ke(this,t),m&&(this.N?e="headers="+encodeURIComponent(String(ge(m)))+"&"+e:this.o&&be(t,this.o,m)),ws(this.h,u),this.Ya&&Vi(t,"TYPE","init"),this.O?(Vi(t,"$req",e),Vi(t,"SID","null"),u.Z=!0,Lo(u,t,null)):Lo(u,t,e),this.G=2}}else 3==this.G&&(i?De(this,i):0==this.i.length||Js(this.h)||De(this))},Re.Ia=function(){if(this.u=null,Dn(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=ht(mr(this.eb,this),i)}},Re.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ns(10),le(this),Dn(this))},Re.cb=function(){null!=this.v&&(this.v=null,le(this),yt(this),ns(19))},Re.kb=function(i){i?(this.j.info("Successfully pinged google.com"),ns(2)):(this.j.info("Failed to ping google.com"),ns(1))},(Re=hn.prototype).xa=function(){},Re.wa=function(){},Re.va=function(){},Re.ua=function(){},Re.Ra=function(){},lr.prototype.g=function(i,e){return new ar(i,e)},kt(ar,Fi),ar.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;ns(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Jt(i,null,i.V),We(i)},ar.prototype.close=function(){ce(this.g)},ar.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=wi(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&We(e)},ar.prototype.M=function(){this.g.l=null,delete this.j,ce(this.g),delete this.g,ar.X.M.call(this)},kt(Wt,Mi),kt(cr,ys),kt(tr,hn),tr.prototype.xa=function(){ci(this.g,"a")},tr.prototype.wa=function(i){ci(this.g,new Wt(i))},tr.prototype.va=function(i){ci(this.g,new cr)},tr.prototype.ua=function(){ci(this.g,"b")},lr.prototype.createWebChannel=lr.prototype.g,ar.prototype.send=ar.prototype.u,ar.prototype.open=ar.prototype.m,ar.prototype.close=ar.prototype.close,xt.NO_ERROR=0,xt.TIMEOUT=8,xt.HTTP_ERROR=6,_n.COMPLETE="complete",ei.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",Fi.prototype.listen=Fi.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.Oa,Kn.prototype.getLastErrorCode=Kn.prototype.Ea,Kn.prototype.getStatus=Kn.prototype.aa,Kn.prototype.getResponseJson=Kn.prototype.Sa,Kn.prototype.getResponseText=Kn.prototype.fa,Kn.prototype.send=Kn.prototype.da,Kn.prototype.setWithCredentials=Kn.prototype.Ka;var _i=Bt.createWebChannelTransport=function(){return new lr},Di=Bt.getStatEventTarget=function(){return Bi()},Ys=Bt.ErrorCode=xt,Xo=Bt.EventType=_n,Z=Bt.Event=ms,C=Bt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},T=Bt.FetchXmlHttpFactory=K,F=Bt.WebChannel=ei,ue=Bt.XhrIo=Kn;const Ie="@firebase/firestore";class Ve{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");let Xe="9.15.0";const vt=new on.Yd("@firebase/firestore");function fn(){return vt.logLevel}function $t(i,...e){if(vt.logLevel<=on.in.DEBUG){const t=e.map(Ur);vt.debug(`Firestore (${Xe}): ${i}`,...t)}}function yr(i,...e){if(vt.logLevel<=on.in.ERROR){const t=e.map(Ur);vt.error(`Firestore (${Xe}): ${i}`,...t)}}function Rr(i,...e){if(vt.logLevel<=on.in.WARN){const t=e.map(Ur);vt.warn(`Firestore (${Xe}): ${i}`,...t)}}function Ur(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function Nn(i="Unexpected state"){const e=`FIRESTORE (${Xe}) INTERNAL ASSERTION FAILED: `+i;throw yr(e),new Error(e)}function Jn(i,e){i||Nn()}function Gn(i,e){return i}const qt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yn extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Os{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ao{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ve.UNAUTHENTICATED))}shutdown(){}}class O{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class M{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const m=se=>this.i!==u?(u=this.i,t(se)):Promise.resolve();let E=new Os;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new Os,e.enqueueRetryable(()=>m(this.currentUser))};const R=()=>{const se=E;e.enqueueRetryable((0,xe.Z)(function*(){yield se.promise,yield m(s.currentUser)}))},X=se=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=se,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(se=>X(se)),setTimeout(()=>{if(!this.auth){const se=this.t.getImmediate({optional:!0});se?X(se):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new Os)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Jn("string"==typeof s.accessToken),new ao(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jn(null===e||"string"==typeof e),new Ve(e)}}class S{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Jn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class q{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u}getToken(){return Promise.resolve(new S(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ne{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _e{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=m=>{null!=m.error&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const E=m.token!==this.A;return this.A=m.token,$t("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>s(m))};const u=m=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>u(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?u(m):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jn("string"==typeof t.token),this.A=t.token,new ne(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ot(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class It{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=ot(40);for(let m=0;m<u.length;++m)s.length<20&&u[m]<t&&(s+=e.charAt(u[m]%e.length))}return s}}function Ut(i,e){return i<e?-1:i>e?1:0}function Xn(i,e,t){return i.length===e.length&&i.every((s,u)=>t(s,e[u]))}function Zn(i){return i+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yn(qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yn(qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new yn(qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yn(qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Er(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zn(e)}static min(){return new zn(new Er(0,0))}static max(){return new zn(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Is{constructor(e,t,s){void 0===t?t=0:t>e.length&&Nn(),void 0===s?s=e.length-t:s>e.length-t&&Nn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Is.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const m=e.get(u),E=t.get(u);if(m<E)return-1;if(m>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $r extends Is{construct(e,t,s){return new $r(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new yn(qt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new $r(t)}static emptyPath(){return new $r([])}}const cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ss extends Is{construct(e,t,s){return new Ss(e,t,s)}static isValidIdentifier(e){return cs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ss.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ss(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const m=()=>{if(0===s.length)throw new yn(qt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let E=!1;for(;u<e.length;){const R=e[u];if("\\"===R){if(u+1===e.length)throw new yn(qt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[u+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new yn(qt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=X,u+=2}else"`"===R?(E=!E,u++):"."!==R||E?(s+=R,u++):(m(),u++)}if(m(),E)throw new yn(qt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ss(t)}static emptyPath(){return new Ss([])}}class rr{constructor(e){this.path=e}static fromPath(e){return new rr($r.fromString(e))}static fromName(e){return new rr($r.fromString(e).popFirst(5))}static empty(){return new rr($r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$r.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $r.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rr(new $r(e.slice()))}}class vs{constructor(e,t,s,u){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=u}}function Oo(i){return i.fields.find(e=>2===e.kind)}function ks(i){return i.fields.filter(e=>2!==e.kind)}vs.UNKNOWN_ID=-1;class Ua{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ll{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ll(0,sa.min())}}function mu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=zn.fromTimestamp(1e9===s?new Er(t+1,0):new Er(t,s));return new sa(u,rr.empty(),e)}function po(i){return new sa(i.readTime,i.key,-1)}class sa{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new sa(zn.min(),rr.empty(),-1)}static max(){return new sa(zn.max(),rr.empty(),-1)}}function Ca(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=rr.comparator(i.documentKey,e.documentKey),0!==t?t:Ut(i.largestBatchId,e.largestBatchId))}const wc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ic{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function oa(i){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,xe.Z)(function*(i){if(i.code!==qt.FAILED_PRECONDITION||i.message!==wc)throw i;$t("LocalStore","Unexpectedly lost primary lease")}),Xl.apply(this,arguments)}class en{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new en((s,u)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(s,u)},this.catchCallback=m=>{this.wrapFailure(t,m).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof en?t:en.resolve(t)}catch(t){return en.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):en.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):en.reject(t)}static resolve(e){return new en((t,s)=>{t(e)})}static reject(e){return new en((t,s)=>{s(e)})}static waitFor(e){return new en((t,s)=>{let u=0,m=0,E=!1;e.forEach(R=>{++u,R.next(()=>{++m,E&&m===u&&t()},X=>s(X))}),E=!0,m===u&&t()})}static or(e){let t=en.resolve(!1);for(const s of e)t=t.next(u=>u?en.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,m)=>{s.push(t.call(this,u,m))}),this.waitFor(s)}static mapArray(e,t){return new en((s,u)=>{const m=e.length,E=new Array(m);let R=0;for(let X=0;X<m;X++){const se=X;t(e[se]).next(Se=>{E[se]=Se,++R,R===m&&s(E)},Se=>u(Se))}})}static doWhile(e,t){return new en((s,u)=>{const m=()=>{!0===e()?t().next(()=>{m()},u):s()};m()})}}class Xa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Os,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ta(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const u=ea(s.target.error);this.P.reject(new Ta(e,u))}}static open(e,t,s,u){try{return new Xa(t,e.transaction(u,s))}catch(m){throw new Ta(t,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($t("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Gu(t)}}class ba{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===ba.D((0,Ht.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $t("SimpleDb","Removing database:",e),la(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ht.hl)())return!1;if(ba.N())return!0;const e=(0,Ht.z$)(),t=ba.D(e),s=0<t&&t<10,u=ba.k(e),m=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,xe.Z)(function*(){return t.db||($t("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=E=>{s(E.target.result)},m.onblocked=()=>{u(new Ta(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=E=>{const R=E.target.error;u("VersionError"===R.name?new yn(qt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new yn(qt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Ta(e,R))},m.onupgradeneeded=E=>{$t("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.S.$(E.target.result,m.transaction,E.oldVersion,t.version).next(()=>{$t("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var m=this;return(0,xe.Z)(function*(){const E="readonly"===t;let R=0;for(;;){++R;try{m.db=yield m.F(e);const X=Xa.open(m.db,e,E?"readonly":"readwrite",s),se=u(X).next(Se=>(X.V(),Se)).catch(Se=>(X.abort(Se),en.reject(Se))).toPromise();return se.catch(()=>{}),yield X.v,se}catch(X){const se=X,Se="FirebaseError"!==se.name&&R<3;if($t("SimpleDb","Transaction failed with error:",se.message,"Retrying:",Se),m.close(),!Se)return Promise.reject(se)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wo{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return la(this.q.delete())}}class Ta extends yn{constructor(e,t){super(qt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function aa(i){return"IndexedDbTransactionError"===i.name}class Gu{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?($t("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):($t("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),la(s)}add(e){return $t("SimpleDb","ADD",this.store.name,e,e),la(this.store.add(e))}get(e){return la(this.store.get(e)).next(t=>(void 0===t&&(t=null),$t("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $t("SimpleDb","DELETE",this.store.name,e),la(this.store.delete(e))}count(){return $t("SimpleDb","COUNT",this.store.name),la(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const u=this.cursor(s),m=[];return this.H(u,(E,R)=>{m.push(R)}).next(()=>m)}{const u=this.store.getAll(s.range);return new en((m,E)=>{u.onerror=R=>{E(R.target.error)},u.onsuccess=R=>{m(R.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new en((u,m)=>{s.onerror=E=>{m(E.target.error)},s.onsuccess=E=>{u(E.target.result)}})}Y(e,t){$t("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const u=this.cursor(s);return this.H(u,(m,E,R)=>R.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.H(u,t)}tt(e){const t=this.cursor({});return new en((s,u)=>{t.onerror=m=>{const E=ea(m.target.error);u(E)},t.onsuccess=m=>{const E=m.target.result;E?e(E.primaryKey,E.value).next(R=>{R?E.continue():s()}):s()}})}H(e,t){const s=[];return new en((u,m)=>{e.onerror=E=>{m(E.target.error)},e.onsuccess=E=>{const R=E.target.result;if(!R)return void u();const X=new wo(R),se=t(R.primaryKey,R.value,X);if(se instanceof en){const Se=se.catch(st=>(X.done(),en.reject(st)));s.push(Se)}X.isDone?u():null===X.G?R.continue():R.continue(X.G)}}).next(()=>en.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function la(i){return new en((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=ea(s.target.error);t(u)}})}let xo=!1;function ea(i){const e=ba.D((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new yn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xo||(xo=!0,setTimeout(()=>{throw s},0)),s}}return i}class Jl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$t("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,xe.Z)(function*(){t.task=null;try{$t("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){aa(s)?$t("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield oa(s)}yield t.nt(6e4)}))}}class yu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,xe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let u=t,m=!0;return en.doWhile(()=>!0===m&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!s.has(E))return $t("IndexBackiller",`Processing collection: ${E}`),this.rt(e,E,u).next(R=>{u-=R,s.add(E)});m=!1})).next(()=>t-u)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,s).next(m=>{const E=m.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.ot(u,m)).next(R=>($t("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>E.size)}))}ot(e,t){let s=e;return t.changes.forEach((u,m)=>{const E=po(m);Ca(E,s)>0&&(s=E)}),new sa(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let _o=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=u=>this.ut(u),this.ct=u=>s.writeSequenceNumber(u))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class dl{constructor(e,t,s,u,m,E,R,X){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=m,this.forceLongPolling=E,this.autoDetectLongPolling=R,this.useFetchStreams=X}}class ta{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ta("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ta&&e.projectId===this.projectId&&e.database===this.database}}function Sl(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ba(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function _u(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function da(i){return null==i}function vo(i){return 0===i&&1/i==-1/0}function Ja(i){return"number"==typeof i&&Number.isInteger(i)&&!vo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class lo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new lo(t)}static fromUint8Array(e){const t=function(s){let u="";for(let m=0;m<s.length;++m)u+=String.fromCharCode(s[m]);return u}(e);return new lo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lo.EMPTY_BYTE_STRING=new lo("");const ja=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(i){if(Jn(!!i),"string"==typeof i){let e=0;const t=ja.exec(i);if(Jn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:to(i.seconds),nanos:to(i.nanos)}}function to(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function el(i){return"string"==typeof i?lo.fromBase64String(i):lo.fromUint8Array(i)}function Vl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tl(i){const e=i.mapValue.fields.__previous_value__;return Vl(e)?tl(e):e}function wa(i){const e=Ha(i.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}const na={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hl={nullValue:"NULL_VALUE"};function nl(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Vl(i)?4:Nt(i)?9007199254740991:10:Nn()}function uo(i,e){if(i===e)return!0;const t=nl(i);if(t!==nl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return wa(i).isEqual(wa(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const m=Ha(s.timestampValue),E=Ha(u.timestampValue);return m.seconds===E.seconds&&m.nanos===E.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,el(i.bytesValue).isEqual(el(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,u){return to(s.geoPointValue.latitude)===to(u.geoPointValue.latitude)&&to(s.geoPointValue.longitude)===to(u.geoPointValue.longitude)}(i,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return to(s.integerValue)===to(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const m=to(s.doubleValue),E=to(u.doubleValue);return m===E?vo(m)===vo(E):isNaN(m)&&isNaN(E)}return!1}(i,e);case 9:return Xn(i.arrayValue.values||[],e.arrayValue.values||[],uo);case 10:return function(s,u){const m=s.mapValue.fields||{},E=u.mapValue.fields||{};if(Sl(m)!==Sl(E))return!1;for(const R in m)if(m.hasOwnProperty(R)&&(void 0===E[R]||!uo(m[R],E[R])))return!1;return!0}(i,e);default:return Nn()}var u}function Ga(i,e){return void 0!==(i.values||[]).find(t=>uo(t,e))}function Io(i,e){if(i===e)return 0;const t=nl(i),s=nl(e);if(t!==s)return Ut(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(i.booleanValue,e.booleanValue);case 2:return function(u,m){const E=to(u.integerValue||u.doubleValue),R=to(m.integerValue||m.doubleValue);return E<R?-1:E>R?1:E===R?0:isNaN(E)?isNaN(R)?0:-1:1}(i,e);case 3:return zu(i.timestampValue,e.timestampValue);case 4:return zu(wa(i),wa(e));case 5:return Ut(i.stringValue,e.stringValue);case 6:return function(u,m){const E=el(u),R=el(m);return E.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(u,m){const E=u.split("/"),R=m.split("/");for(let X=0;X<E.length&&X<R.length;X++){const se=Ut(E[X],R[X]);if(0!==se)return se}return Ut(E.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,m){const E=Ut(to(u.latitude),to(m.latitude));return 0!==E?E:Ut(to(u.longitude),to(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,m){const E=u.values||[],R=m.values||[];for(let X=0;X<E.length&&X<R.length;++X){const se=Io(E[X],R[X]);if(se)return se}return Ut(E.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,m){if(u===na.mapValue&&m===na.mapValue)return 0;if(u===na.mapValue)return 1;if(m===na.mapValue)return-1;const E=u.fields||{},R=Object.keys(E),X=m.fields||{},se=Object.keys(X);R.sort(),se.sort();for(let Se=0;Se<R.length&&Se<se.length;++Se){const st=Ut(R[Se],se[Se]);if(0!==st)return st;const Kt=Io(E[R[Se]],X[se[Se]]);if(0!==Kt)return Kt}return Ut(R.length,se.length)}(i.mapValue,e.mapValue);default:throw Nn()}}function zu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Ut(i,e);const t=Ha(i),s=Ha(e),u=Ut(t.seconds,s.seconds);return 0!==u?u:Ut(t.nanos,s.nanos)}function fl(i){return Dl(i)}function Dl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=Ha(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?el(i.bytesValue).toBase64():"referenceValue"in i?rr.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let u="[",m=!0;for(const E of s.values||[])m?m=!1:u+=",",u+=Dl(E);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let m="{",E=!0;for(const R of u)E?E=!1:m+=",",m+=`${R}:${Dl(s.fields[R])}`;return m+"}"}(i.mapValue):Nn();var e}function Ia(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ul(i){return!!i&&"integerValue"in i}function Ra(i){return!!i&&"arrayValue"in i}function U(i){return!!i&&"nullValue"in i}function Y(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function de(i){return!!i&&"mapValue"in i}function $e(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ba(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=$e(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$e(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Nt(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Yt(i){return"nullValue"in i?hl:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ia(ta.empty(),rr.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Nn()}function Un(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ia(ta.empty(),rr.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?na:Nn()}function jr(i,e){const t=Io(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Zr(i,e){const t=Io(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class zr{constructor(e,t){this.position=e,this.inclusive=t}}function Wi(i,e,t){let s=0;for(let u=0;u<i.position.length;u++){const m=e[u],E=i.position[u];if(s=m.field.isKeyField()?rr.comparator(rr.fromName(E.referenceValue),t.key):Io(E,t.data.field(m.field)),"desc"===m.dir&&(s*=-1),0!==s)break}return s}function Ei(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!uo(i.position[t],e.position[t]))return!1;return!0}class jo{}class ii extends jo{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Bl(e,t,s):"array-contains"===t?new qd(e,s):"in"===t?new vu(e,s):"not-in"===t?new Wu(e,s):"array-contains-any"===t?new cd(e,s):new ii(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ld(e,s):new ud(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Io(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ss extends jo{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new ss(e,t)}matches(e){return Sa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Sa(i){return"and"===i.op}function Pa(i){return"or"===i.op}function Mo(i){return So(i)&&Sa(i)}function So(i){for(const e of i.filters)if(e instanceof ss)return!1;return!0}function za(i){if(i instanceof ii)return i.field.canonicalString()+i.op.toString()+fl(i.value);{const e=i.filters.map(t=>za(t)).join(",");return`${i.op}(${e})`}}function ad(i,e){return i instanceof ii?(t=i,(s=e)instanceof ii&&t.op===s.op&&t.field.isEqual(s.field)&&uo(t.value,s.value)):i instanceof ss?function(t,s){return s instanceof ss&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((u,m,E)=>u&&ad(m,s.filters[E]),!0)}(i,e):void Nn();var t,s}function Al(i,e){const t=i.filters.concat(e);return ss.create(t,i.op)}function xl(i){return i instanceof ii?`${(e=i).field.canonicalString()} ${e.op} ${fl(e.value)}`:i instanceof ss?function(e){return e.op.toString()+" {"+e.getFilters().map(xl).join(" ,")+"}"}(i):"Filter";var e}class Bl extends ii{constructor(e,t,s){super(e,t,s),this.key=rr.fromName(s.referenceValue)}matches(e){const t=rr.comparator(e.key,this.key);return this.matchesComparison(t)}}class ld extends ii{constructor(e,t){super(e,"in",t),this.keys=Na(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ud extends ii{constructor(e,t){super(e,"not-in",t),this.keys=Na(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Na(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>rr.fromName(s.referenceValue))}class qd extends ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ra(t)&&Ga(t.arrayValue,this.value)}}class vu extends ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ga(this.value.arrayValue,t)}}class Wu extends ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ga(this.value.arrayValue,t)}}class cd extends ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ra(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ga(this.value.arrayValue,s))}}class Ro{constructor(e,t="asc"){this.field=e,this.dir=t}}function qu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class no{constructor(e,t){this.comparator=e,this.root=t||ra.EMPTY}insert(e,t){return new no(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ra.BLACK,null,null))}remove(e){return new no(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ra.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?s(e.key,t):1,t&&u&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ra{constructor(e,t,s,u,m){this.key=e,this.value=t,this.color=null!=s?s:ra.RED,this.left=null!=u?u:ra.EMPTY,this.right=null!=m?m:ra.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,m){return new ra(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=u?u:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const m=s(e,u.key);return u=m<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===m?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ra.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return ra.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ra.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ra.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nn();const e=this.left.check();if(e!==this.right.check())throw Nn();return e+(this.isRed()?0:1)}}ra.EMPTY=null,ra.RED=!0,ra.BLACK=!1,ra.EMPTY=new class{constructor(){this.size=0}get key(){throw Nn()}get value(){throw Nn()}get color(){throw Nn()}get left(){throw Nn()}get right(){throw Nn()}copy(i,e,t,s,u){return this}insert(i,e,t){return new ra(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ro{constructor(e){this.comparator=e,this.data=new no(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $l(this.data.getIterator())}getIteratorFrom(e){return new $l(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ro)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(0!==this.comparator(u,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ro(this.comparator);return t.data=e,t}}class $l{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pl(i){return i.hasNext()?i.getNext():void 0}class Ho{constructor(e){this.fields=e,e.sort(Ss.comparator)}static empty(){return new Ho([])}unionWith(e){let t=new ro(Ss.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ho(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xn(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Uo{constructor(e){this.value=e}static empty(){return new Uo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!de(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$e(t)}setAll(e){let t=Ss.emptyPath(),s={},u=[];e.forEach((E,R)=>{if(!t.isImmediateParentOf(R)){const X=this.getFieldsMap(t);this.applyChanges(X,s,u),s={},u=[],t=R.popLast()}E?s[R.lastSegment()]=$e(E):u.push(R.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,s,u)}delete(e){const t=this.field(e.popLast());de(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];de(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){Ba(t,(u,m)=>e[u]=m);for(const u of s)delete e[u]}clone(){return new Uo($e(this.value))}}function Ku(i){const e=[];return Ba(i.fields,(t,s)=>{const u=new Ss([t]);if(de(s)){const m=Ku(s.mapValue).fields;if(0===m.length)e.push(u);else for(const E of m)e.push(u.child(E))}else e.push(u)}),new Ho(e)}class Fs{constructor(e,t,s,u,m,E,R){this.key=e,this.documentType=t,this.version=s,this.readTime=u,this.createTime=m,this.data=E,this.documentState=R}static newInvalidDocument(e){return new Fs(e,0,zn.min(),zn.min(),zn.min(),Uo.empty(),0)}static newFoundDocument(e,t,s,u){return new Fs(e,1,t,zn.min(),s,u,0)}static newNoDocument(e,t){return new Fs(e,2,t,zn.min(),zn.min(),Uo.empty(),0)}static newUnknownDocument(e,t){return new Fs(e,3,t,zn.min(),zn.min(),Uo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(zn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Uo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Uo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zu{constructor(e,t=null,s=[],u=[],m=null,E=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=m,this.startAt=E,this.endAt=R,this.ft=null}}function eu(i,e=null,t=[],s=[],u=null,m=null,E=null){return new Zu(i,e,t,s,u,m,E)}function jl(i){const e=Gn(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>za(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),da(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>fl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>fl(s)).join(",")),e.ft=t}return e.ft}function Hl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!qu(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!ad(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ei(i.startAt,e.startAt)&&Ei(i.endAt,e.endAt)}function Yu(i){return rr.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function _a(i,e){return i.filters.filter(t=>t instanceof ii&&t.field.isEqual(e))}function Gl(i,e,t){let s=hl,u=!0;for(const m of _a(i,e)){let E=hl,R=!0;switch(m.op){case"<":case"<=":E=Yt(m.value);break;case"==":case"in":case">=":E=m.value;break;case">":E=m.value,R=!1;break;case"!=":case"not-in":E=hl}jr({value:s,inclusive:u},{value:E,inclusive:R})<0&&(s=E,u=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=t.position[m];jr({value:s,inclusive:u},{value:E,inclusive:t.inclusive})<0&&(s=E,u=t.inclusive);break}return{value:s,inclusive:u}}function tu(i,e,t){let s=na,u=!0;for(const m of _a(i,e)){let E=na,R=!0;switch(m.op){case">=":case">":E=Un(m.value),R=!1;break;case"==":case"in":case"<=":E=m.value;break;case"<":E=m.value,R=!1;break;case"!=":case"not-in":E=na}Zr({value:s,inclusive:u},{value:E,inclusive:R})>0&&(s=E,u=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=t.position[m];Zr({value:s,inclusive:u},{value:E,inclusive:t.inclusive})>0&&(s=E,u=t.inclusive);break}return{value:s,inclusive:u}}class gl{constructor(e,t=null,s=[],u=[],m=null,E="F",R=null,X=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=m,this.limitType=E,this.startAt=R,this.endAt=X,this.dt=null,this._t=null}}function Sc(i,e,t,s,u,m,E,R){return new gl(i,e,t,s,u,m,E,R)}function nu(i){return new gl(i)}function ru(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Qu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function iu(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ml(i){return null!==i.collectionGroup}function va(i){const e=Gn(i);if(null===e.dt){e.dt=[];const t=iu(e),s=Qu(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new Ro(t)),e.dt.push(new Ro(Ss.keyField(),"asc"));else{let u=!1;for(const m of e.explicitOrderBy)e.dt.push(m),m.field.isKeyField()&&(u=!0);if(!u){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Ro(Ss.keyField(),m))}}}return e.dt}function ha(i){const e=Gn(i);if(!e._t)if("F"===e.limitType)e._t=eu(e.path,e.collectionGroup,va(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of va(e))t.push(new Ro(m.field,"desc"===m.dir?"asc":"desc"));const s=e.endAt?new zr(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new zr(e.startAt.position,e.startAt.inclusive):null;e._t=eu(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e._t}function Cu(i,e){e.getFirstInequalityField(),iu(i);const t=i.filters.concat([e]);return new gl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function su(i,e,t){return new gl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function bu(i,e){return Hl(ha(i),ha(e))&&i.limitType===e.limitType}function Oa(i){return`${jl(ha(i))}|lt:${i.limitType}`}function Xu(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>xl(s)).join(", ")}]`),da(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>fl(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>fl(s)).join(",")),`Target(${t})`}(ha(i))}; limitType=${i.limitType})`}function ka(i,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):rr.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,s){for(const u of va(t))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(u,m,E){const R=Wi(u,m,E);return u.inclusive?R<=0:R<0}(t.startAt,va(t),s)||t.endAt&&!function(u,m,E){const R=Wi(u,m,E);return u.inclusive?R>=0:R>0}(t.endAt,va(t),s)));var t,s}function Da(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ju(i){return(e,t)=>{let s=!1;for(const u of va(i)){const m=Tu(u,e,t);if(0!==m)return m;s=s||u.field.isKeyField()}return 0}}function Tu(i,e,t){const s=i.field.isKeyField()?rr.comparator(e.key,t.key):function(u,m,E){const R=m.data.field(u),X=E.data.field(u);return null!==R&&null!==X?Io(R,X):Nn()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Nn()}}function zl(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vo(e)?"-0":e}}function Dc(i){return{integerValue:""+i}}function Ac(i,e){return Ja(e)?Dc(e):zl(i,e)}class xc{constructor(){this._=void 0}}function wu(i,e,t){return i instanceof Du?function(s,u){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(m.fields.__previous_value__=u),{mapValue:m}}(t,e):i instanceof yl?ec(i,e):i instanceof _l?dd(i,e):function(s,u){const m=Su(s,u),E=Au(m)+Au(s.gt);return Ul(m)&&Ul(s.gt)?Dc(E):zl(s.yt,E)}(i,e)}function Iu(i,e,t){return i instanceof yl?ec(i,e):i instanceof _l?dd(i,e):t}function Su(i,e){return i instanceof Go?Ul(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Du extends xc{}class yl extends xc{constructor(e){super(),this.elements=e}}function ec(i,e){const t=Wa(e);for(const s of i.elements)t.some(u=>uo(u,s))||t.push(s);return{arrayValue:{values:t}}}class _l extends xc{constructor(e){super(),this.elements=e}}function dd(i,e){let t=Wa(e);for(const s of i.elements)t=t.filter(u=>!uo(u,s));return{arrayValue:{values:t}}}class Go extends xc{constructor(e,t){super(),this.yt=e,this.gt=t}}function Au(i){return to(i.integerValue||i.doubleValue)}function Wa(i){return Ra(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Aa{constructor(e,t){this.field=e,this.transform=t}}class vl{constructor(e,t){this.version=e,this.transformResults=t}}class io{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new io}static exists(e){return new io(void 0,e)}static updateTime(e){return new io(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function go(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class rl{}function Kd(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new zo(i.key,io.none()):new ou(i.key,i.data,io.none());{const t=i.data,s=Uo.empty();let u=new ro(Ss.comparator);for(let m of e.fields)if(!u.has(m)){let E=t.field(m);null===E&&m.length>1&&(m=m.popLast(),E=t.field(m)),null===E?s.delete(m):s.set(m,E),u=u.add(m)}return new Ml(i.key,s,new Ho(u.toArray()),io.none())}}function xu(i,e,t){i instanceof ou?function(s,u,m){const E=s.value.clone(),R=Ru(s.fieldTransforms,u,m.transformResults);E.setAll(R),u.convertToFoundDocument(m.version,E).setHasCommittedMutations()}(i,e,t):i instanceof Ml?function(s,u,m){if(!go(s.precondition,u))return void u.convertToUnknownDocument(m.version);const E=Ru(s.fieldTransforms,u,m.transformResults),R=u.data;R.setAll(Yd(s)),R.setAll(E),u.convertToFoundDocument(m.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Mu(i,e,t,s){return i instanceof ou?function(u,m,E,R){if(!go(u.precondition,m))return E;const X=u.value.clone(),se=tc(u.fieldTransforms,R,m);return X.setAll(se),m.convertToFoundDocument(m.version,X).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ml?function(u,m,E,R){if(!go(u.precondition,m))return E;const X=tc(u.fieldTransforms,R,m),se=m.data;return se.setAll(Yd(u)),se.setAll(X),m.convertToFoundDocument(m.version,se).setHasLocalMutations(),null===E?null:E.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(Se=>Se.field))}(i,e,t,s):(E=t,go(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):E);var m,E}function Mc(i,e){let t=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),m=Su(s.transform,u||null);null!=m&&(null===t&&(t=Uo.empty()),t.set(s.field,m))}return t||null}function Zd(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&Xn(t,s,(u,m)=>function Fa(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof yl&&s instanceof yl||t instanceof _l&&s instanceof _l?Xn(t.elements,s.elements,uo):t instanceof Go&&s instanceof Go?uo(t.gt,s.gt):t instanceof Du&&s instanceof Du);var t,s}(u,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class ou extends rl{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Ml extends rl{constructor(e,t,s,u,m=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Yd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Ru(i,e,t){const s=new Map;Jn(i.length===t.length);for(let u=0;u<t.length;u++){const m=i[u],E=m.transform,R=e.data.field(m.field);s.set(m.field,Iu(E,R,t[u]))}return s}function tc(i,e,t){const s=new Map;for(const u of i){const m=u.transform,E=t.data.field(u.field);s.set(u.field,wu(m,E,e))}return s}class zo extends rl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wo extends rl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rc{constructor(e){this.count=e}}var ko,Es;function ua(i){switch(i){default:return Nn();case qt.CANCELLED:case qt.UNKNOWN:case qt.DEADLINE_EXCEEDED:case qt.RESOURCE_EXHAUSTED:case qt.INTERNAL:case qt.UNAVAILABLE:case qt.UNAUTHENTICATED:return!1;case qt.INVALID_ARGUMENT:case qt.NOT_FOUND:case qt.ALREADY_EXISTS:case qt.PERMISSION_DENIED:case qt.FAILED_PRECONDITION:case qt.ABORTED:case qt.OUT_OF_RANGE:case qt.UNIMPLEMENTED:case qt.DATA_LOSS:return!0}}function Pu(i){if(void 0===i)return yr("GRPC error has no .code"),qt.UNKNOWN;switch(i){case ko.OK:return qt.OK;case ko.CANCELLED:return qt.CANCELLED;case ko.UNKNOWN:return qt.UNKNOWN;case ko.DEADLINE_EXCEEDED:return qt.DEADLINE_EXCEEDED;case ko.RESOURCE_EXHAUSTED:return qt.RESOURCE_EXHAUSTED;case ko.INTERNAL:return qt.INTERNAL;case ko.UNAVAILABLE:return qt.UNAVAILABLE;case ko.UNAUTHENTICATED:return qt.UNAUTHENTICATED;case ko.INVALID_ARGUMENT:return qt.INVALID_ARGUMENT;case ko.NOT_FOUND:return qt.NOT_FOUND;case ko.ALREADY_EXISTS:return qt.ALREADY_EXISTS;case ko.PERMISSION_DENIED:return qt.PERMISSION_DENIED;case ko.FAILED_PRECONDITION:return qt.FAILED_PRECONDITION;case ko.ABORTED:return qt.ABORTED;case ko.OUT_OF_RANGE:return qt.OUT_OF_RANGE;case ko.UNIMPLEMENTED:return qt.UNIMPLEMENTED;case ko.DATA_LOSS:return qt.DATA_LOSS;default:return Nn()}}(Es=ko||(ko={}))[Es.OK=0]="OK",Es[Es.CANCELLED=1]="CANCELLED",Es[Es.UNKNOWN=2]="UNKNOWN",Es[Es.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Es[Es.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Es[Es.NOT_FOUND=5]="NOT_FOUND",Es[Es.ALREADY_EXISTS=6]="ALREADY_EXISTS",Es[Es.PERMISSION_DENIED=7]="PERMISSION_DENIED",Es[Es.UNAUTHENTICATED=16]="UNAUTHENTICATED",Es[Es.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Es[Es.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Es[Es.ABORTED=10]="ABORTED",Es[Es.OUT_OF_RANGE=11]="OUT_OF_RANGE",Es[Es.UNIMPLEMENTED=12]="UNIMPLEMENTED",Es[Es.INTERNAL=13]="INTERNAL",Es[Es.UNAVAILABLE=14]="UNAVAILABLE",Es[Es.DATA_LOSS=15]="DATA_LOSS";class il{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,m]of s)if(this.equalsFn(u,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,t]],void this.innerSize++;for(let m=0;m<u.length;m++)if(this.equalsFn(u[m][0],e))return void(u[m]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ba(this.inner,(t,s)=>{for(const[u,m]of s)e(u,m)})}isEmpty(){return _u(this.inner)}size(){return this.innerSize}}const nc=new no(rr.comparator);function fa(){return nc}const rc=new no(rr.comparator);function ic(...i){let e=rc;for(const t of i)e=e.insert(t.key,t);return e}function au(i){let e=rc;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function El(){return Rl()}function pa(){return Rl()}function Rl(){return new il(i=>i.toString(),(i,e)=>i.isEqual(e))}const hd=new no(rr.comparator),fd=new ro(rr.comparator);function qi(...i){let e=fd;for(const t of i)e=e.add(t);return e}const pd=new ro(Ut);function lu(){return pd}class Nu{constructor(e,t,s,u,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const u=new Map;return u.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Nu(zn.min(),u,lu(),fa(),qi())}}class Ou{constructor(e,t,s,u,m){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ou(s,t,qi(),qi(),qi())}}class xa{constructor(e,t,s,u){this.It=e,this.removedTargetIds=t,this.key=s,this.Tt=u}}class Pc{constructor(e,t){this.targetId=e,this.Et=t}}class Qd{constructor(e,t,s=lo.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class gd{constructor(){this.At=0,this.Rt=ga(),this.bt=lo.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=qi(),t=qi(),s=qi();return this.Rt.forEach((u,m)=>{switch(m){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:Nn()}}),new Ou(this.bt,this.Pt,e,t,s)}xt(){this.vt=!1,this.Rt=ga()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Fh{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=fa(),this.qt=Nc(),this.Ut=new ro(Ut)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const s=this.Wt(t);switch(e.state){case 0:this.zt(t)&&s.Dt(e.resumeToken);break;case 1:s.Mt(),s.Vt||s.xt(),s.Dt(e.resumeToken);break;case 2:s.Mt(),s.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(s.Ft(),s.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),s.Dt(e.resumeToken));break;default:Nn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((s,u)=>{this.zt(u)&&t(u)})}Jt(e){const t=e.targetId,s=e.Et.count,u=this.Yt(t);if(u){const m=u.target;if(Yu(m))if(0===s){const E=new rr(m.path);this.Qt(t,E,Fs.newNoDocument(E,zn.min()))}else Jn(1===s);else this.Xt(t)!==s&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((m,E)=>{const R=this.Yt(E);if(R){if(m.current&&Yu(R.target)){const X=new rr(R.target.path);null!==this.Lt.get(X)||this.te(E,X)||this.Qt(E,X,Fs.newNoDocument(X,e))}m.St&&(t.set(E,m.Ct()),m.xt())}});let s=qi();this.qt.forEach((m,E)=>{let R=!0;E.forEachWhile(X=>{const se=this.Yt(X);return!se||2===se.purpose||(R=!1,!1)}),R&&(s=s.add(m))}),this.Lt.forEach((m,E)=>E.setReadTime(e));const u=new Nu(e,t,this.Ut,this.Lt,s);return this.Lt=fa(),this.qt=Nc(),this.Ut=new ro(Ut),u}Gt(e,t){if(!this.zt(e))return;const s=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,s),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,s){if(!this.zt(e))return;const u=this.Wt(e);this.te(e,t)?u.Nt(t,1):u.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),s&&(this.Lt=this.Lt.insert(t,s))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new gd,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new ro(Ut),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||$t("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new gd),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Nc(){return new no(rr.comparator)}function ga(){return new no(rr.comparator)}const md={asc:"ASCENDING",desc:"DESCENDING"},Oc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kc={and:"AND",or:"OR"};class sl{constructor(e,t){this.databaseId=e,this.wt=t}}function ol(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fc(i,e){return i.wt?e.toBase64():e.toUint8Array()}function yd(i,e){return ol(i,e.toTimestamp())}function Po(i){return Jn(!!i),zn.fromTimestamp(function(e){const t=Ha(e);return new Er(t.seconds,t.nanos)}(i))}function al(i,e){return(t=i,new $r(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qa(i){const e=$r.fromString(i);return Jn(lt(e)),e}function ku(i,e){return al(i.databaseId,e.path)}function Pl(i,e){const t=qa(e);if(t.get(1)!==i.databaseId.projectId)throw new yn(qt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new yn(qt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new rr(y(t))}function Lc(i,e){return al(i.databaseId,e)}function b(i){const e=qa(i);return 4===e.length?$r.emptyPath():y(e)}function p(i){return new $r(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function y(i){return Jn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function D(i,e,t){return{name:ku(i,e),fields:t.value.mapValue.fields}}function re(i,e,t){const s=Pl(i,e.name),u=Po(e.updateTime),m=e.createTime?Po(e.createTime):zn.min(),E=new Uo({mapValue:{fields:e.fields}}),R=Fs.newFoundDocument(s,u,m,E);return t&&R.setHasCommittedMutations(),t?R.setHasCommittedMutations():R}function pn(i,e){let t;if(e instanceof ou)t={update:D(i,e.key,e.value)};else if(e instanceof zo)t={delete:ku(i,e.key)};else if(e instanceof Ml)t={update:D(i,e.key,e.data),updateMask:Ze(e.fieldMask)};else{if(!(e instanceof Wo))return Nn();t={verify:ku(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,m){const E=m.transform;if(E instanceof Du)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof yl)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof _l)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof Go)return{fieldPath:m.field.canonicalString(),increment:E.gt};throw Nn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:yd(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Nn()),t;var u}function dr(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?io.updateTime(Po(u.updateTime)):void 0!==u.exists?io.exists(u.exists):io.none():io.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(m,E){let R=null;"setToServerValue"in E?(Jn("REQUEST_TIME"===E.setToServerValue),R=new Du):"appendMissingElements"in E?R=new yl(E.appendMissingElements.values||[]):"removeAllFromArray"in E?R=new _l(E.removeAllFromArray.values||[]):"increment"in E?R=new Go(m,E.increment):Nn();const X=Ss.fromServerFormat(E.fieldPath);return new Aa(X,R)}(i,u)):[];var u;if(e.update){const u=Pl(i,e.update.name),m=new Uo({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new Ho((e.updateMask.fieldPaths||[]).map(se=>Ss.fromServerFormat(se)));return new Ml(u,m,E,t,s)}return new ou(u,m,t,s)}if(e.delete){const u=Pl(i,e.delete);return new zo(u,t)}if(e.verify){const u=Pl(i,e.verify);return new Wo(u,t)}return Nn()}function Ci(i,e){return{documents:[Lc(i,e.path)]}}function di(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Lc(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Lc(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(X){if(0!==X.length)return we(ss.create(X,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const m=function(X){if(0!==X.length)return X.map(se=>{return{field:H((Se=se).field),direction:d(Se.dir)};var Se})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const E=(se=e.limit,i.wt||da(se)?se:{value:se});var se,R,X;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),t}function qo(i){let e=b(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){Jn(1===s);const Se=t.from[0];Se.allDescendants?u=Se.collectionId:e=e.child(Se.collectionId)}let m=[];t.where&&(m=function(Se){const st=c(Se);return st instanceof ss&&Mo(st)?st.getFilters():[st]}(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(Se=>{return new Ro(te((st=Se).field),function(Kt){switch(Kt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(st.direction));var st}));let R=null;t.limit&&(R=function(Se){let st;return st="object"==typeof Se?Se.value:Se,da(st)?null:st}(t.limit));let X=null;var Se;t.startAt&&(X=new zr((Se=t.startAt).values||[],!!Se.before));let se=null;return t.endAt&&(se=function(Se){return new zr(Se.values||[],!Se.before)}(t.endAt)),Sc(e,u,E,m,R,"F",X,se)}function c(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=te(e.unaryFilter.field);return ii.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=te(e.unaryFilter.field);return ii.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=te(e.unaryFilter.field);return ii.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=te(e.unaryFilter.field);return ii.create(m,"!=",{nullValue:"NULL_VALUE"});default:return Nn()}}(i):void 0!==i.fieldFilter?ii.create(te((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return ss.create(e.compositeFilter.filters.map(t=>c(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Nn()}}(e.compositeFilter.op))}(i):Nn();var e}function d(i){return md[i]}function v(i){return Oc[i]}function x(i){return kc[i]}function H(i){return{fieldPath:i.canonicalString()}}function te(i){return Ss.fromServerFormat(i.fieldPath)}function we(i){return i instanceof ii?function(e){if("=="===e.op){if(Y(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NAN"}};if(U(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Y(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NOT_NAN"}};if(U(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:H(e.field),op:v(e.op),value:e.value}}}(i):i instanceof ss?function(e){const t=e.getFilters().map(s=>we(s));return 1===t.length?t[0]:{compositeFilter:{op:x(e.op),filters:t}}}(i):Nn()}function Ze(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lt(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function an(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Rn(e)),e=bn(i.get(t),e);return Rn(e)}function bn(i,e){let t=e;const s=i.length;for(let u=0;u<s;u++){const m=i.charAt(u);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function Rn(i){return i+"\x01\x01"}function Cr(i){const e=i.length;if(Jn(e>=2),2===e)return Jn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),$r.emptyPath();const t=e-2,s=[];let u="";for(let m=0;m<e;){const E=i.indexOf("\x01",m);switch((E<0||E>t)&&Nn(),i.charAt(E+1)){case"\x01":const R=i.substring(m,E);let X;0===u.length?X=R:(u+=R,X=u,u=""),s.push(X);break;case"\x10":u+=i.substring(m,E),u+="\0";break;case"\x11":u+=i.substring(m,E+1);break;default:Nn()}m=E+2}return new $r(s)}const fi=["userId","batchId"];function Ps(i,e){return[i,an(e)]}function ca(i,e,t){return[i,an(e),t]}const Fu={},Vc=["prefixPath","collectionGroup","readTime","documentId"],Wl=["prefixPath","collectionGroup","documentId"],Lh=["collectionGroup","readTime","prefixPath","documentId"],em=["canonicalId","targetId"],p_=["targetId","path"],Vh=["path","targetId"],g_=["collectionId","parent"],tm=["indexId","uid"],nm=["uid","sequenceNumber"],rm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jf=["indexId","uid","orderedDocumentKey"],im=["userId","collectionPath","documentId"],Uh=["userId","collectionPath","largestBatchId"],Bh=["userId","collectionGroup","largestBatchId"],ep=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tp=[...ep,"documentOverlays"],np=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$h=np,Xd=[...$h,"indexConfiguration","indexState","indexEntries"];class rp extends Ic{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function ma(i,e){const t=Gn(i);return ba.M(t.se,e)}class ip{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const m=this.mutations[u];m.key.isEqual(e.key)&&xu(m,e,s[u])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Mu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Mu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=pa();return this.mutations.forEach(u=>{const m=e.get(u.key),E=m.overlayedDocument;let R=this.applyToLocalView(E,m.mutatedFields);R=t.has(u.key)?null:R;const X=Kd(E,R);null!==X&&s.set(u.key,X),E.isValidDocument()||E.convertToNoDocument(zn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qi())}isEqual(e){return this.batchId===e.batchId&&Xn(this.mutations,e.mutations,(t,s)=>Zd(t,s))&&Xn(this.baseMutations,e.baseMutations,(t,s)=>Zd(t,s))}}class sp{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){Jn(e.mutations.length===s.length);let u=hd;const m=e.mutations;for(let E=0;E<m.length;E++)u=u.insert(m[E].key,s[E].version);return new sp(e,t,s,u)}}class jh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uu{constructor(e,t,s,u,m=zn.min(),E=zn.min(),R=lo.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=R}withSequenceNumber(e){return new uu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new uu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class op{constructor(e){this.ie=e}}function ap(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:ku(u=i.ie,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:ol(u,m.version.toTimestamp()),createTime:ol(u,m.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:sc(e.version)};else{if(!e.isUnknownDocument())return Nn();s.unknownDocument={path:t.path.toArray(),version:sc(e.version)}}var u,m;return s}function Hh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function sc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uc(i){const e=new Er(i.seconds,i.nanoseconds);return zn.fromTimestamp(e)}function Bc(i,e){const t=(e.baseMutations||[]).map(m=>dr(i.ie,m));for(let m=0;m<e.mutations.length-1;++m){const E=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(E.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const s=e.mutations.map(m=>dr(i.ie,m)),u=Er.fromMillis(e.localWriteTimeMs);return new ip(e.batchId,u,t,s)}function Ka(i){const e=Uc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Uc(i.lastLimboFreeSnapshotVersion):zn.min();let s;var u;return void 0!==i.query.documents?(Jn(1===(u=i.query).documents.length),s=ha(nu(b(u.documents[0])))):s=ha(qo(i.query)),new uu(s,i.targetId,0,i.lastListenSequenceNumber,e,t,lo.fromBase64String(i.resumeToken))}function sm(i,e){const t=sc(e.snapshotVersion),s=sc(e.lastLimboFreeSnapshotVersion);let u;u=Yu(e.target)?Ci(i.ie,e.target):di(i.ie,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Gh(i){const e=qo({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?su(e,e.limit,"L"):e}function lp(i,e){return new jh(e.largestBatchId,dr(i.ie,e.overlayMutation))}function om(i,e){const t=e.path.lastSegment();return[i,an(e.path.popLast()),t]}function am(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:sc(s.readTime),documentKey:an(s.documentKey.path),largestBatchId:s.largestBatchId}}class m_{getBundleMetadata(e,t){return up(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:Uc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return up(e).put({bundleId:(s=t).id,createTime:sc(Po(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return lm(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:Gh(u.bundledQuery),readTime:Uc(u.readTime)};var u})}saveNamedQuery(e,t){return lm(e).put({name:(s=t).name,readTime:sc(Po(s.readTime)),bundledQuery:s.bundledQuery});var s}}function up(i){return ma(i,"bundles")}function lm(i){return ma(i,"namedQueries")}class zh{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new zh(e,t.uid||"")}getOverlay(e,t){return Jd(e).get(om(this.userId,t)).next(s=>s?lp(this.yt,s):null)}getOverlays(e,t){const s=El();return en.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){const u=[];return s.forEach((m,E)=>{const R=new jh(t,E);u.push(this.oe(e,R))}),en.waitFor(u)}removeOverlaysForBatchId(e,t,s){const u=new Set;t.forEach(E=>u.add(an(E.getCollectionPath())));const m=[];return u.forEach(E=>{const R=IDBKeyRange.bound([this.userId,E,s],[this.userId,E,s+1],!1,!0);m.push(Jd(e).Y("collectionPathOverlayIndex",R))}),en.waitFor(m)}getOverlaysForCollection(e,t,s){const u=El(),m=an(t),E=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Jd(e).W("collectionPathOverlayIndex",E).next(R=>{for(const X of R){const se=lp(this.yt,X);u.set(se.getKey(),se)}return u})}getOverlaysForCollectionGroup(e,t,s,u){const m=El();let E;const R=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jd(e).Z({index:"collectionGroupOverlayIndex",range:R},(X,se,Se)=>{const st=lp(this.yt,se);m.size()<u||st.largestBatchId===E?(m.set(st.getKey(),st),E=st.largestBatchId):Se.done()}).next(()=>m)}oe(e,t){return Jd(e).put(function(s,u,m){const[E,R,X]=om(u,m.mutation.key);return{userId:u,collectionPath:R,documentId:X,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:pn(s.ie,m.mutation)}}(this.yt,this.userId,t))}}function Jd(i){return ma(i,"documentOverlays")}class Ui{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(to(e.integerValue));else if("doubleValue"in e){const s=to(e.doubleValue);isNaN(s)?this.he(t,13):(this.he(t,15),vo(s)?t.le(0):t.le(s))}else if("timestampValue"in e){const s=e.timestampValue;this.he(t,20),"string"==typeof s?t.fe(s):(t.fe(`${s.seconds||""}`),t.le(s.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(el(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.he(t,45),t.le(s.latitude||0),t.le(s.longitude||0)}else"mapValue"in e?Nt(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Nn()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const s=e.fields||{};this.he(t,55);for(const u of Object.keys(s))this.de(u,t),this.ce(s[u],t)}ye(e,t){const s=e.values||[];this.he(t,50);for(const u of s)this.ce(u,t)}me(e,t){this.he(t,37),rr.fromName(e).path.forEach(s=>{this.he(t,60),this.pe(s,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function um(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function cp(i){const e=64-function(t){let s=0;for(let u=0;u<8;++u){const m=um(255&t[u]);if(s+=m,8!==m)break}return s}(i);return Math.ceil(e/8)}Ui.Ie=new Ui;class cm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ee(s.value),s=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.be(s.value),s=t.next();this.Pe()}ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ee(s);else if(s<2048)this.Ee(960|s>>>6),this.Ee(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s);else{const u=t.codePointAt(0);this.Ee(240|u>>>18),this.Ee(128|63&u>>>12),this.Ee(128|63&u>>>6),this.Ee(128|63&u)}}this.Ae()}Ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.be(s);else if(s<2048)this.be(960|s>>>6),this.be(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.be(480|s>>>12),this.be(128|63&s>>>6),this.be(128|63&s);else{const u=t.codePointAt(0);this.be(240|u>>>18),this.be(128|63&u>>>12),this.be(128|63&u>>>6),this.be(128|63&u)}}this.Pe()}Se(e){const t=this.De(e),s=cp(t);this.Ce(1+s),this.buffer[this.position++]=255&s;for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=255&t[u]}xe(e){const t=this.De(e),s=cp(t);this.Ce(1+s),this.buffer[this.position++]=~(255&s);for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(u){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,u,!1),new Uint8Array(m.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let u=1;u<t.length;++u)t[u]^=s?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Wh{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class ql{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class _d{constructor(){this.$e=new cm,this.Be=new Wh(this.$e),this.Le=new ql(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class $c{constructor(e,t,s,u){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=u}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new $c(this.indexId,this.documentKey,this.arrayValue,s)}}function cu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=du(i.arrayValue,e.arrayValue),0!==t?t:(t=du(i.directionalValue,e.directionalValue),0!==t?t:rr.comparator(i.documentKey,e.documentKey)))}function du(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class dp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const s=t;s.isInequality()?this.Qe=s:this.Ge.push(s)}}je(e){Jn(e.collectionGroup===this.collectionId);const t=Oo(e);if(void 0!==t&&!this.We(t))return!1;const s=ks(e);let u=0,m=0;for(;u<s.length&&this.We(s[u]);++u);if(u===s.length)return!0;if(void 0!==this.Qe){const E=s[u];if(!this.ze(this.Qe,E)||!this.He(this.Ke[m++],E))return!1;++u}for(;u<s.length;++u){const E=s[u];if(m>=this.Ke.length||!this.He(this.Ke[m++],E))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hp(i){var e,t;if(Jn(i instanceof ii||i instanceof ss),i instanceof ii){if(i instanceof vu){const u=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(m=>ii.create(i.field,"==",m)))||[];return ss.create(u,"or")}return i}const s=i.filters.map(u=>hp(u));return ss.create(s,i.op)}function fp(i){if(0===i.getFilters().length)return[];const e=vd(hp(i));return Jn(y_(e)),dm(e)||qh(e)?[e]:e.getFilters()}function dm(i){return i instanceof ii}function qh(i){return i instanceof ss&&Mo(i)}function y_(i){return dm(i)||qh(i)||function(e){if(e instanceof ss&&Pa(e)){for(const t of e.getFilters())if(!dm(t)&&!qh(t))return!1;return!0}return!1}(i)}function vd(i){if(Jn(i instanceof ii||i instanceof ss),i instanceof ii)return i;if(1===i.filters.length)return vd(i.filters[0]);const e=i.filters.map(s=>vd(s));let t=ss.create(e,i.op);return t=Cd(t),y_(t)?t:(Jn(t instanceof ss),Jn(Sa(t)),Jn(t.filters.length>1),t.filters.reduce((s,u)=>Ed(s,u)))}function Ed(i,e){let t;return Jn(i instanceof ii||i instanceof ss),Jn(e instanceof ii||e instanceof ss),t=i instanceof ii?e instanceof ii?ss.create([i,e],"and"):Kh(i,e):e instanceof ii?Kh(e,i):function(s,u){if(Jn(s.filters.length>0&&u.filters.length>0),Sa(s)&&Sa(u))return Al(s,u.getFilters());const m=Pa(s)?s:u,E=Pa(s)?u:s,R=m.filters.map(X=>Ed(X,E));return ss.create(R,"or")}(i,e),Cd(t)}function Kh(i,e){if(Sa(e))return Al(e,i.getFilters());{const t=e.filters.map(s=>Ed(i,s));return ss.create(t,"or")}}function Cd(i){if(Jn(i instanceof ii||i instanceof ss),i instanceof ii)return i;const e=i.getFilters();if(1===e.length)return Cd(e[0]);if(So(i))return i;const t=e.map(u=>Cd(u)),s=[];return t.forEach(u=>{u instanceof ii?s.push(u):u instanceof ss&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:ss.create(s,i.op)}class pp{constructor(){this.Je=new hm}addToCollectionParentIndex(e,t){return this.Je.add(t),en.resolve()}getCollectionParents(e,t){return en.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return en.resolve()}deleteFieldIndex(e,t){return en.resolve()}getDocumentsMatchingTarget(e,t){return en.resolve(null)}getIndexType(e,t){return en.resolve(0)}getFieldIndexes(e,t){return en.resolve([])}getNextCollectionGroupToUpdate(e){return en.resolve(null)}getMinOffset(e,t){return en.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,t){return en.resolve(sa.min())}updateCollectionGroup(e,t,s){return en.resolve()}updateIndexEntries(e,t){return en.resolve()}}class hm{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new ro($r.comparator),m=!u.has(s);return this.index[t]=u.add(s),m}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new ro($r.comparator)).toArray()}}const Zh=new Uint8Array(0);class __{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new hm,this.Xe=new il(s=>jl(s),(s,u)=>Hl(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const m={collectionId:s,parent:an(u)};return fm(e).put(m)}return en.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[Zn(t),""],!1,!0);return fm(e).W(u).next(m=>{for(const E of m){if(E.collectionId!==t)break;s.push(Cr(E.parent))}return s})}addFieldIndex(e,t){const s=th(e),u={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var E;delete u.indexId;const m=s.add(u);if(t.indexState){const E=Yh(e);return m.next(R=>{E.put(am(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const s=th(e),u=Yh(e),m=eh(e);return s.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=eh(e);let u=!0;const m=new Map;return en.forEach(this.Ze(t),E=>this.tn(e,E).next(R=>{u&&(u=!!R),m.set(E,R)})).next(()=>{if(u){let E=qi();const R=[];return en.forEach(m,(X,se)=>{var Se;$t("IndexedDbIndexManager",`Using index ${Se=X,`id=${Se.indexId}|cg=${Se.collectionGroup}|f=${Se.fields.map($s=>`${$s.fieldPath}:${$s.kind}`).join(",")}`} to execute ${jl(t)}`);const st=function($s,Zo){const js=Oo(Zo);if(void 0===js)return null;for(const Ks of _a($s,js.fieldPath))switch(Ks.op){case"array-contains-any":return Ks.value.arrayValue.values||[];case"array-contains":return[Ks.value]}return null}(se,X),Kt=function($s,Zo){const js=new Map;for(const Ks of ks(Zo))for(const ya of _a($s,Ks.fieldPath))switch(ya.op){case"==":case"in":js.set(Ks.fieldPath.canonicalString(),ya.value);break;case"not-in":case"!=":return js.set(Ks.fieldPath.canonicalString(),ya.value),Array.from(js.values())}return null}(se,X),On=function($s,Zo){const js=[];let Ks=!0;for(const ya of ks(Zo)){const Ph=0===ya.kind?Gl($s,ya.fieldPath,$s.startAt):tu($s,ya.fieldPath,$s.startAt);js.push(Ph.value),Ks&&(Ks=Ph.inclusive)}return new zr(js,Ks)}(se,X),Qn=function($s,Zo){const js=[];let Ks=!0;for(const ya of ks(Zo)){const Ph=0===ya.kind?tu($s,ya.fieldPath,$s.endAt):Gl($s,ya.fieldPath,$s.endAt);js.push(Ph.value),Ks&&(Ks=Ph.inclusive)}return new zr(js,Ks)}(se,X),Nr=this.en(X,se,On),pi=this.en(X,se,Qn),Co=this.nn(X,se,Kt),Fo=this.sn(X.indexId,st,Nr,On.inclusive,pi,Qn.inclusive,Co);return en.forEach(Fo,$s=>s.J($s,t.limit).next(Zo=>{Zo.forEach(js=>{const Ks=rr.fromSegments(js.documentKey);E.has(Ks)||(E=E.add(Ks),R.push(Ks))})}))}).next(()=>R)}return en.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:fp(ss.create(e.filters,"and")).map(s=>eu(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,s,u,m,E,R){const X=(null!=t?t.length:1)*Math.max(s.length,m.length),se=X/(null!=t?t.length:1),Se=[];for(let st=0;st<X;++st){const Kt=t?this.rn(t[st/se]):Zh,On=this.on(e,Kt,s[st%se],u),Qn=this.un(e,Kt,m[st%se],E),Nr=R.map(pi=>this.on(e,Kt,pi,!0));Se.push(...this.createRange(On,Qn,Nr))}return Se}on(e,t,s,u){const m=new $c(e,rr.empty(),t,s);return u?m:m.Ue()}un(e,t,s,u){const m=new $c(e,rr.empty(),t,s);return u?m.Ue():m}tn(e,t){const s=new dp(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(m=>{let E=null;for(const R of m)s.je(R)&&(!E||R.fields.length>E.fields.length)&&(E=R);return E})}getIndexType(e,t){let s=2;const u=this.Ze(t);return en.forEach(u,m=>this.tn(e,m).next(E=>{E?0!==s&&E.fields.length<function(R){let X=new ro(Ss.comparator),se=!1;for(const Se of R.filters)for(const st of Se.getFlattenedFilters())st.field.isKeyField()||("array-contains"===st.op||"array-contains-any"===st.op?se=!0:X=X.add(st.field));for(const Se of R.orderBy)Se.field.isKeyField()||(X=X.add(Se.field));return X.size+(se?1:0)}(m)&&(s=1):s=0})).next(()=>null!==t.limit&&u.length>1&&2===s?1:s)}cn(e,t){const s=new _d;for(const u of ks(e)){const m=t.data.field(u.fieldPath);if(null==m)return null;const E=s.qe(u.kind);Ui.Ie.ue(m,E)}return s.Fe()}rn(e){const t=new _d;return Ui.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const s=new _d;return Ui.Ie.ue(Ia(this.databaseId,t),s.qe(function(u){const m=ks(u);return 0===m.length?0:m[m.length-1].kind}(e))),s.Fe()}nn(e,t,s){if(null===s)return[];let u=[];u.push(new _d);let m=0;for(const E of ks(e)){const R=s[m++];for(const X of u)if(this.hn(t,E.fieldPath)&&Ra(R))u=this.ln(u,E,R);else{const se=X.qe(E.kind);Ui.Ie.ue(R,se)}}return this.fn(u)}en(e,t,s){return this.nn(e,t,s.position)}fn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Fe();return t}ln(e,t,s){const u=[...e],m=[];for(const E of s.arrayValue.values||[])for(const R of u){const X=new _d;X.seed(R.Fe()),Ui.Ie.ue(E,X.qe(t.kind)),m.push(X)}return m}hn(e,t){return!!e.filters.find(s=>s instanceof ii&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=th(e),u=Yh(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(m=>{const E=[];return en.forEach(m,R=>u.get([R.indexId,this.uid]).next(X=>{E.push(function(se,Se){const st=Se?new Ll(Se.sequenceNumber,new sa(Uc(Se.readTime),new rr(Cr(Se.documentKey)),Se.largestBatchId)):Ll.empty(),Kt=se.fields.map(([On,Qn])=>new Ua(Ss.fromServerFormat(On),Qn));return new vs(se.indexId,se.collectionGroup,Kt,st)}(R,X))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,u)=>{const m=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==m?m:Ut(s.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const u=th(e),m=Yh(e);return this.dn(e).next(E=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>en.forEach(R,X=>m.put(am(X.indexId,this.user,E,s)))))}updateIndexEntries(e,t){const s=new Map;return en.forEach(t,(u,m)=>{const E=s.get(u.collectionGroup);return(E?en.resolve(E):this.getFieldIndexes(e,u.collectionGroup)).next(R=>(s.set(u.collectionGroup,R),en.forEach(R,X=>this._n(e,u,X).next(se=>{const Se=this.wn(m,X);return se.isEqual(Se)?en.resolve():this.mn(e,m,X,se,Se)}))))})}gn(e,t,s,u){return eh(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.an(s,t.key),documentKey:t.key.path.toArray()})}yn(e,t,s,u){return eh(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.an(s,t.key),t.key.path.toArray()])}_n(e,t,s){const u=eh(e);let m=new ro(cu);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.an(s,t)])},(E,R)=>{m=m.add(new $c(s.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>m)}wn(e,t){let s=new ro(cu);const u=this.cn(t,e);if(null==u)return s;const m=Oo(t);if(null!=m){const E=e.data.field(m.fieldPath);if(Ra(E))for(const R of E.arrayValue.values||[])s=s.add(new $c(t.indexId,e.key,this.rn(R),u))}else s=s.add(new $c(t.indexId,e.key,Zh,u));return s}mn(e,t,s,u,m){$t("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(R,X,se,Se,st){const Kt=R.getIterator(),On=X.getIterator();let Qn=pl(Kt),Nr=pl(On);for(;Qn||Nr;){let pi=!1,Co=!1;if(Qn&&Nr){const Fo=se(Qn,Nr);Fo<0?Co=!0:Fo>0&&(pi=!0)}else null!=Qn?Co=!0:pi=!0;pi?(Se(Nr),Nr=pl(On)):Co?(st(Qn),Qn=pl(Kt)):(Qn=pl(Kt),Nr=pl(On))}}(u,m,cu,R=>{E.push(this.gn(e,t,s,R))},R=>{E.push(this.yn(e,t,s,R))}),en.waitFor(E)}dn(e){let t=1;return Yh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,m)=>{m.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((E,R)=>cu(E,R)).filter((E,R,X)=>!R||0!==cu(E,X[R-1]));const u=[];u.push(e);for(const E of s){const R=cu(E,e),X=cu(E,t);if(0===R)u[0]=e.Ue();else if(R>0&&X<0)u.push(E),u.push(E.Ue());else if(X>0)break}u.push(t);const m=[];for(let E=0;E<u.length;E+=2){if(this.pn(u[E],u[E+1]))return[];m.push(IDBKeyRange.bound([u[E].indexId,this.uid,u[E].arrayValue,u[E].directionalValue,Zh,[]],[u[E+1].indexId,this.uid,u[E+1].arrayValue,u[E+1].directionalValue,Zh,[]]))}return m}pn(e,t){return cu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pm)}getMinOffset(e,t){return en.mapArray(this.Ze(t),s=>this.tn(e,s).next(u=>u||Nn())).next(pm)}}function fm(i){return ma(i,"collectionParents")}function eh(i){return ma(i,"indexEntries")}function th(i){return ma(i,"indexConfiguration")}function Yh(i){return ma(i,"indexState")}function pm(i){Jn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;Ca(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new sa(e.readTime,e.documentKey,t)}const v_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Za{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Za(e,Za.DEFAULT_COLLECTION_PERCENTILE,Za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gp(i,e,t){const s=i.store("mutations"),u=i.store("documentMutations"),m=[],E=IDBKeyRange.only(t.batchId);let R=0;const X=s.Z({range:E},(Se,st,Kt)=>(R++,Kt.delete()));m.push(X.next(()=>{Jn(1===R)}));const se=[];for(const Se of t.mutations){const st=ca(e,Se.key.path,t.batchId);m.push(u.delete(st)),se.push(Se.key)}return en.waitFor(m).next(()=>se)}function Qh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Nn();e=i.noDocument}return JSON.stringify(e).length}Za.DEFAULT_COLLECTION_PERCENTILE=10,Za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Za.DEFAULT=new Za(41943040,Za.DEFAULT_COLLECTION_PERCENTILE,Za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Za.DISABLED=new Za(-1,0,0);class bd{constructor(e,t,s,u){this.userId=e,this.yt=t,this.indexManager=s,this.referenceDelegate=u,this.In={}}static re(e,t,s,u){Jn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new bd(m,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jc(e).Z({index:"userMutationsIndex",range:s},(u,m,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const m=nh(e),E=jc(e);return E.add({}).next(R=>{Jn("number"==typeof R);const X=new ip(R,t,s,u),se=function(Kt,On,Qn){const Nr=Qn.baseMutations.map(Co=>pn(Kt.ie,Co)),pi=Qn.mutations.map(Co=>pn(Kt.ie,Co));return{userId:On,batchId:Qn.batchId,localWriteTimeMs:Qn.localWriteTime.toMillis(),baseMutations:Nr,mutations:pi}}(this.yt,this.userId,X),Se=[];let st=new ro((Kt,On)=>Ut(Kt.canonicalString(),On.canonicalString()));for(const Kt of u){const On=ca(this.userId,Kt.key.path,R);st=st.add(Kt.key.path.popLast()),Se.push(E.put(se)),Se.push(m.put(On,Fu))}return st.forEach(Kt=>{Se.push(this.indexManager.addToCollectionParentIndex(e,Kt))}),e.addOnCommittedListener(()=>{this.In[R]=X.keys()}),en.waitFor(Se).next(()=>X)})}lookupMutationBatch(e,t){return jc(e).get(t).next(s=>s?(Jn(s.userId===this.userId),Bc(this.yt,s)):null)}Tn(e,t){return this.In[t]?en.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let m=null;return jc(e).Z({index:"userMutationsIndex",range:u},(E,R,X)=>{R.userId===this.userId&&(Jn(R.batchId>=s),m=Bc(this.yt,R)),X.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return jc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,m,E)=>{s=m.batchId,E.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jc(e).W("userMutationsIndex",t).next(s=>s.map(u=>Bc(this.yt,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Ps(this.userId,t.path),u=IDBKeyRange.lowerBound(s),m=[];return nh(e).Z({range:u},(E,R,X)=>{const[se,Se,st]=E,Kt=Cr(Se);if(se===this.userId&&t.path.isEqual(Kt))return jc(e).get(st).next(On=>{if(!On)throw Nn();Jn(On.userId===this.userId),m.push(Bc(this.yt,On))});X.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ro(Ut);const u=[];return t.forEach(m=>{const E=Ps(this.userId,m.path),R=IDBKeyRange.lowerBound(E),X=nh(e).Z({range:R},(se,Se,st)=>{const[Kt,On,Qn]=se,Nr=Cr(On);Kt===this.userId&&m.path.isEqual(Nr)?s=s.add(Qn):st.done()});u.push(X)}),en.waitFor(u).next(()=>this.En(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,m=Ps(this.userId,s),E=IDBKeyRange.lowerBound(m);let R=new ro(Ut);return nh(e).Z({range:E},(X,se,Se)=>{const[st,Kt,On]=X,Qn=Cr(Kt);st===this.userId&&s.isPrefixOf(Qn)?Qn.length===u&&(R=R.add(On)):Se.done()}).next(()=>this.En(e,R))}En(e,t){const s=[],u=[];return t.forEach(m=>{u.push(jc(e).get(m).next(E=>{if(null===E)throw Nn();Jn(E.userId===this.userId),s.push(Bc(this.yt,E))}))}),en.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return gp(e.se,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),en.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return en.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return nh(e).Z({range:s},(m,E,R)=>{if(m[0]===this.userId){const X=Cr(m[1]);u.push(X)}else R.done()}).next(()=>{Jn(0===u.length)})})}containsKey(e,t){return E_(e,this.userId,t)}Rn(e){return C_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function E_(i,e,t){const s=Ps(e,t.path),u=s[1],m=IDBKeyRange.lowerBound(s);let E=!1;return nh(i).Z({range:m,X:!0},(R,X,se)=>{const[Se,st,Kt]=R;Se===e&&st===u&&(E=!0),se.done()}).next(()=>E)}function jc(i){return ma(i,"mutations")}function nh(i){return ma(i,"documentMutations")}function C_(i){return ma(i,"mutationQueues")}class Td{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Td(0)}static vn(){return new Td(-1)}}class E0{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const s=new Td(t.highestTargetId);return t.highestTargetId=s.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>zn.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(s=>(s.targetCount+=1,this.Cn(t,s),this.Sn(e,s))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(s=>(Jn(s.targetCount>0),s.targetCount-=1,this.Sn(e,s)))}removeTargets(e,t,s){let u=0;const m=[];return rh(e).Z((E,R)=>{const X=Ka(R);X.sequenceNumber<=t&&null===s.get(X.targetId)&&(u++,m.push(this.removeTargetData(e,X)))}).next(()=>en.waitFor(m)).next(()=>u)}forEachTarget(e,t){return rh(e).Z((s,u)=>{const m=Ka(u);t(m)})}Vn(e){return b_(e).get("targetGlobalKey").next(t=>(Jn(null!==t),t))}Sn(e,t){return b_(e).put("targetGlobalKey",t)}Dn(e,t){return rh(e).put(sm(this.yt,t))}Cn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=jl(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let m=null;return rh(e).Z({range:u,index:"queryTargetsIndex"},(E,R,X)=>{const se=Ka(R);Hl(t,se.target)&&(m=se,X.done())}).next(()=>m)}addMatchingKeys(e,t,s){const u=[],m=Hc(e);return t.forEach(E=>{const R=an(E.path);u.push(m.put({targetId:s,path:R})),u.push(this.referenceDelegate.addReference(e,s,E))}),en.waitFor(u)}removeMatchingKeys(e,t,s){const u=Hc(e);return en.forEach(t,m=>{const E=an(m.path);return en.waitFor([u.delete([s,E]),this.referenceDelegate.removeReference(e,s,m)])})}removeMatchingKeysForTargetId(e,t){const s=Hc(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=Hc(e);let m=qi();return u.Z({range:s,X:!0},(E,R,X)=>{const se=Cr(E[1]),Se=new rr(se);m=m.add(Se)}).next(()=>m)}containsKey(e,t){const s=an(t.path),u=IDBKeyRange.bound([s],[Zn(s)],!1,!0);let m=0;return Hc(e).Z({index:"documentTargetsIndex",X:!0,range:u},([E,R],X,se)=>{0!==E&&(m++,se.done())}).next(()=>m>0)}ne(e,t){return rh(e).get(t).next(s=>s?Ka(s):null)}}function rh(i){return ma(i,"targets")}function b_(i){return ma(i,"targetGlobal")}function Hc(i){return ma(i,"targetDocuments")}function T_([i,e],[t,s]){const u=Ut(i,t);return 0===u?Ut(e,s):u}class oc{constructor(e){this.xn=e,this.buffer=new ro(T_),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();T_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mp{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;$t("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,xe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){aa(s)?$t("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield oa(s)}yield t.Fn(3e5)}))}}class w_{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return en.resolve(_o.at);const s=new oc(t);return this.$n.forEachTarget(e,u=>s.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>s.On(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.$n.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector","Garbage collection skipped; disabled"),en.resolve(v_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v_):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let s,u,m,E,R,X,se;const Se=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(st=>(st>this.params.maximumSequenceNumbersToCollect?($t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${st}`),u=this.params.maximumSequenceNumbersToCollect):u=st,E=Date.now(),this.nthSequenceNumber(e,u))).next(st=>(s=st,R=Date.now(),this.removeTargets(e,s,t))).next(st=>(m=st,X=Date.now(),this.removeOrphanedDocuments(e,s))).next(st=>(se=Date.now(),fn()<=on.in.DEBUG&&$t("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-Se}ms\n\tDetermined least recently used ${u} in `+(R-E)+`ms\n\tRemoved ${m} targets in `+(X-R)+`ms\n\tRemoved ${st} documents in `+(se-X)+`ms\nTotal Duration: ${se-Se}ms`),en.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:m,documentsRemoved:st})))}}class gm{constructor(e,t){this.db=e,this.garbageCollector=new w_(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Un(e){let t=0;return this.Ln(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(s,u)=>t(u))}addReference(e,t,s){return wd(e,s)}removeReference(e,t,s){return wd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return wd(e,t)}Gn(e,t){return function(s,u){let m=!1;return C_(s).tt(E=>E_(s,E,u).next(R=>(R&&(m=!0),en.resolve(!R)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let m=0;return this.Kn(e,(E,R)=>{if(R<=t){const X=this.Gn(e,E).next(se=>{if(!se)return m++,s.getEntry(e,E).next(()=>(s.removeEntry(E,zn.min()),Hc(e).delete([0,an(E.path)])))});u.push(X)}}).next(()=>en.waitFor(u)).next(()=>s.apply(e)).next(()=>m)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return wd(e,t)}Kn(e,t){const s=Hc(e);let u,m=_o.at;return s.Z({index:"documentTargetsIndex"},([E,R],{path:X,sequenceNumber:se})=>{0===E?(m!==_o.at&&t(new rr(Cr(u)),m),m=se,u=X):m=_o.at}).next(()=>{m!==_o.at&&t(new rr(Cr(u)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wd(i,e){return Hc(i).put((s=i.currentSequenceNumber,{targetId:0,path:an(e.path),sequenceNumber:s}));var s}class yp{constructor(){this.changes=new il(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?en.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _p{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Gc(e).put(s)}removeEntry(e,t,s){return Gc(e).delete(function(u,m){const E=u.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],Hh(m),E[E.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Qn(e,s)))}getEntry(e,t){let s=Fs.newInvalidDocument(t);return Gc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},(u,m)=>{s=this.jn(t,m)}).next(()=>s)}Wn(e,t){let s={size:0,document:Fs.newInvalidDocument(t)};return Gc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},(u,m)=>{s={document:this.jn(t,m),size:Qh(m)}}).next(()=>s)}getEntries(e,t){let s=fa();return this.zn(e,t,(u,m)=>{const E=this.jn(u,m);s=s.insert(u,E)}).next(()=>s)}Hn(e,t){let s=fa(),u=new no(rr.comparator);return this.zn(e,t,(m,E)=>{const R=this.jn(m,E);s=s.insert(m,R),u=u.insert(m,Qh(E))}).next(()=>({documents:s,Jn:u}))}zn(e,t,s){if(t.isEmpty())return en.resolve();let u=new ro(Ep);t.forEach(X=>u=u.add(X));const m=IDBKeyRange.bound(zc(u.first()),zc(u.last())),E=u.getIterator();let R=E.getNext();return Gc(e).Z({index:"documentKeyIndex",range:m},(X,se,Se)=>{const st=rr.fromSegments([...se.prefixPath,se.collectionGroup,se.documentId]);for(;R&&Ep(R,st)<0;)s(R,null),R=E.getNext();R&&R.isEqual(st)&&(s(R,se),R=E.hasNext()?E.getNext():null),R?Se.j(zc(R)):Se.done()}).next(()=>{for(;R;)s(R,null),R=E.hasNext()?E.getNext():null})}getAllFromCollection(e,t,s){const u=[t.popLast().toArray(),t.lastSegment(),Hh(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gc(e).W(IDBKeyRange.bound(u,m,!0)).next(E=>{let R=fa();for(const X of E){const se=this.jn(rr.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);R=R.insert(se.key,se)}return R})}getAllFromCollectionGroup(e,t,s,u){let m=fa();const E=ym(t,s),R=ym(t,sa.max());return Gc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,R,!0)},(X,se,Se)=>{const st=this.jn(rr.fromSegments(se.prefixPath.concat(se.collectionGroup,se.documentId)),se);m=m.insert(st.key,st),m.size===u&&Se.done()}).next(()=>m)}newChangeBuffer(e){return new ac(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vp(e).get("remoteDocumentGlobalKey").next(t=>(Jn(!!t),t))}Qn(e,t){return vp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const s=function v0(i,e){let t;if(e.document)t=re(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=rr.fromSegments(e.noDocument.path),u=Uc(e.noDocument.readTime);t=Fs.newNoDocument(s,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Nn();{const s=rr.fromSegments(e.unknownDocument.path),u=Uc(e.unknownDocument.version);t=Fs.newUnknownDocument(s,u)}}return e.readTime&&t.setReadTime(function(s){const u=new Er(s[0],s[1]);return zn.fromTimestamp(u)}(e.readTime)),t}(this.yt,t);if(!s.isNoDocument()||!s.version.isEqual(zn.min()))return s}return Fs.newInvalidDocument(e)}}function mm(i){return new _p(i)}class ac extends yp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new il(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new ro((m,E)=>Ut(m.canonicalString(),E.canonicalString()));return this.changes.forEach((m,E)=>{const R=this.Xn.get(m);if(t.push(this.Yn.removeEntry(e,m,R.readTime)),E.isValidDocument()){const X=ap(this.Yn.yt,E);u=u.add(m.path.popLast()),s+=Qh(X)-R.size,t.push(this.Yn.addEntry(e,m,X))}else if(s-=R.size,this.trackRemovals){const X=ap(this.Yn.yt,E.convertToNoDocument(zn.min()));t.push(this.Yn.addEntry(e,m,X))}}),u.forEach(m=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Yn.updateMetadata(e,s)),en.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(s=>(this.Xn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:s,Jn:u})=>(u.forEach((m,E)=>{this.Xn.set(m,{size:E,readTime:s.get(m).readTime})}),s))}}function vp(i){return ma(i,"remoteDocumentGlobal")}function Gc(i){return ma(i,"remoteDocumentsV14")}function zc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ym(i,e){const t=e.documentKey.path.toArray();return[i,Hh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ep(i,e){const t=i.path.toArray(),s=e.path.toArray();let u=0;for(let m=0;m<t.length-2&&m<s.length-2;++m)if(u=Ut(t[m],s[m]),u)return u;return u=Ut(t.length,s.length),u||(u=Ut(t[t.length-2],s[s.length-2]),u||Ut(t[t.length-1],s[s.length-1]))}class I_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _m{constructor(e,t,s,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(null!==s&&Mu(s.mutation,u,Ho.empty(),Er.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,qi()).next(()=>s))}getLocalViewOfDocuments(e,t,s=qi()){const u=El();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,s).next(m=>{let E=ic();return m.forEach((R,X)=>{E=E.insert(R,X.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const s=El();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,qi()))}populateOverlays(e,t,s){const u=[];return s.forEach(m=>{t.has(m)||u.push(m)}),this.documentOverlayCache.getOverlays(e,u).next(m=>{m.forEach((E,R)=>{t.set(E,R)})})}computeViews(e,t,s,u){let m=fa();const E=Rl(),R=Rl();return t.forEach((X,se)=>{const Se=s.get(se.key);u.has(se.key)&&(void 0===Se||Se.mutation instanceof Ml)?m=m.insert(se.key,se):void 0!==Se&&(E.set(se.key,Se.mutation.getFieldMask()),Mu(Se.mutation,se,Se.mutation.getFieldMask(),Er.now()))}),this.recalculateAndSaveOverlays(e,m).next(X=>(X.forEach((se,Se)=>E.set(se,Se)),t.forEach((se,Se)=>{var st;return R.set(se,new I_(Se,null!==(st=E.get(se))&&void 0!==st?st:null))}),R))}recalculateAndSaveOverlays(e,t){const s=Rl();let u=new no((E,R)=>E-R),m=qi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const R of E)R.keys().forEach(X=>{const se=t.get(X);if(null===se)return;let Se=s.get(X)||Ho.empty();Se=R.applyToLocalView(se,Se),s.set(X,Se);const st=(u.get(R.batchId)||qi()).add(X);u=u.insert(R.batchId,st)})}).next(()=>{const E=[],R=u.getReverseIterator();for(;R.hasNext();){const X=R.getNext(),se=X.key,Se=X.value,st=pa();Se.forEach(Kt=>{if(!m.has(Kt)){const On=Kd(t.get(Kt),s.get(Kt));null!==On&&st.set(Kt,On),m=m.add(Kt)}}),E.push(this.documentOverlayCache.saveOverlays(e,se,st))}return en.waitFor(E)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return rr.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ml(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var u}getNextDocuments(e,t,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,u).next(m=>{const E=u-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,u-m.size):en.resolve(El());let R=-1,X=m;return E.next(se=>en.forEach(se,(Se,st)=>(R<st.largestBatchId&&(R=st.largestBatchId),m.get(Se)?en.resolve():this.remoteDocumentCache.getEntry(e,Se).next(Kt=>{X=X.insert(Se,Kt)}))).next(()=>this.populateOverlays(e,se,m)).next(()=>this.computeViews(e,X,se,qi())).next(Se=>({batchId:R,changes:au(Se)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rr(t)).next(s=>{let u=ic();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const u=t.collectionGroup;let m=ic();return this.indexManager.getCollectionParents(e,u).next(E=>en.forEach(E,R=>{const X=(se=t,Se=R.child(u),new gl(Se,null,se.explicitOrderBy.slice(),se.filters.slice(),se.limit,se.limitType,se.startAt,se.endAt));var se,Se;return this.getDocumentsMatchingCollectionQuery(e,X,s).next(se=>{se.forEach((Se,st)=>{m=m.insert(Se,st)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,s){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(m=>(u=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(m=>{m.forEach((R,X)=>{const se=X.getKey();null===u.get(se)&&(u=u.insert(se,Fs.newInvalidDocument(se)))});let E=ic();return u.forEach((R,X)=>{const se=m.get(R);void 0!==se&&Mu(se.mutation,X,Ho.empty(),Er.now()),ka(t,X)&&(E=E.insert(R,X))}),E})}}class ih{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return en.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:Po(s.createTime)}),en.resolve()}getNamedQuery(e,t){return en.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(s=t).name,query:Gh(s.bundledQuery),readTime:Po(s.readTime)}),en.resolve();var s}}class Id{constructor(){this.overlays=new no(rr.comparator),this.es=new Map}getOverlay(e,t){return en.resolve(this.overlays.get(t))}getOverlays(e,t){const s=El();return en.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((u,m)=>{this.oe(e,t,m)}),en.resolve()}removeOverlaysForBatchId(e,t,s){const u=this.es.get(s);return void 0!==u&&(u.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(s)),en.resolve()}getOverlaysForCollection(e,t,s){const u=El(),m=t.length+1,E=new rr(t.child("")),R=this.overlays.getIteratorFrom(E);for(;R.hasNext();){const X=R.getNext().value,se=X.getKey();if(!t.isPrefixOf(se.path))break;se.path.length===m&&X.largestBatchId>s&&u.set(X.getKey(),X)}return en.resolve(u)}getOverlaysForCollectionGroup(e,t,s,u){let m=new no((se,Se)=>se-Se);const E=this.overlays.getIterator();for(;E.hasNext();){const se=E.getNext().value;if(se.getKey().getCollectionGroup()===t&&se.largestBatchId>s){let Se=m.get(se.largestBatchId);null===Se&&(Se=El(),m=m.insert(se.largestBatchId,Se)),Se.set(se.getKey(),se)}}const R=El(),X=m.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((se,Se)=>R.set(se,Se)),!(R.size()>=u)););return en.resolve(R)}oe(e,t,s){const u=this.overlays.get(s.key);if(null!==u){const E=this.es.get(u.largestBatchId).delete(s.key);this.es.set(u.largestBatchId,E)}this.overlays=this.overlays.insert(s.key,new jh(t,s));let m=this.es.get(t);void 0===m&&(m=qi(),this.es.set(t,m)),this.es.set(t,m.add(s.key))}}class sh{constructor(){this.ns=new ro(Bo.ss),this.rs=new ro(Bo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const s=new Bo(e,t);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.cs(new Bo(e,t))}hs(e,t){e.forEach(s=>this.removeReference(s,t))}ls(e){const t=new rr(new $r([])),s=new Bo(t,e),u=new Bo(t,e+1),m=[];return this.rs.forEachInRange([s,u],E=>{this.cs(E),m.push(E.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new rr(new $r([])),s=new Bo(t,e),u=new Bo(t,e+1);let m=qi();return this.rs.forEachInRange([s,u],E=>{m=m.add(E.key)}),m}containsKey(e){const t=new Bo(e,0),s=this.ns.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Bo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return rr.comparator(e.key,t.key)||Ut(e._s,t._s)}static os(e,t){return Ut(e._s,t._s)||rr.comparator(e.key,t.key)}}class oh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ro(Bo.ss)}checkEmpty(e){return en.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,u){const m=this.ws;this.ws++;const E=new ip(m,t,s,u);this.mutationQueue.push(E);for(const R of u)this.gs=this.gs.add(new Bo(R.key,m)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return en.resolve(E)}lookupMutationBatch(e,t){return en.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),m=u<0?0:u;return en.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return en.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return en.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Bo(t,0),u=new Bo(t,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([s,u],E=>{const R=this.ys(E._s);m.push(R)}),en.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ro(Ut);return t.forEach(u=>{const m=new Bo(u,0),E=new Bo(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,E],R=>{s=s.add(R._s)})}),en.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let m=s;rr.isDocumentKey(m)||(m=m.child(""));const E=new Bo(new rr(m),0);let R=new ro(Ut);return this.gs.forEachWhile(X=>{const se=X.key.path;return!!s.isPrefixOf(se)&&(se.length===u&&(R=R.add(X._s)),!0)},E),en.resolve(this.Is(R))}Is(e){const t=[];return e.forEach(s=>{const u=this.ys(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){Jn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let s=this.gs;return en.forEach(t.mutations,u=>{const m=new Bo(u.key,t.batchId);return s=s.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,t){const s=new Bo(t,0),u=this.gs.firstAfterOrEqual(s);return en.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return en.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sd{constructor(e){this.Es=e,this.docs=new no(rr.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,u=this.docs.get(s),m=u?u.size:0,E=this.Es(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:E}),this.size+=E-m,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return en.resolve(s?s.document.mutableCopy():Fs.newInvalidDocument(t))}getEntries(e,t){let s=fa();return t.forEach(u=>{const m=this.docs.get(u);s=s.insert(u,m?m.document.mutableCopy():Fs.newInvalidDocument(u))}),en.resolve(s)}getAllFromCollection(e,t,s){let u=fa();const m=new rr(t.child("")),E=this.docs.getIteratorFrom(m);for(;E.hasNext();){const{key:R,value:{document:X}}=E.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||Ca(po(X),s)<=0||(u=u.insert(X.key,X.mutableCopy()))}return en.resolve(u)}getAllFromCollectionGroup(e,t,s,u){Nn()}As(e,t){return en.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new S_(this)}getSize(e){return en.resolve(this.size)}}class S_ extends yp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(s)}),en.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class vm{constructor(e){this.persistence=e,this.Rs=new il(t=>jl(t),Hl),this.lastRemoteSnapshotVersion=zn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new sh,this.targetCount=0,this.vs=Td.Pn()}forEachTarget(e,t){return this.Rs.forEach((s,u)=>t(u)),en.resolve()}getLastRemoteSnapshotVersion(e){return en.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return en.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),en.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),en.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Td(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,en.resolve()}updateTargetData(e,t){return this.Dn(t),en.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,en.resolve()}removeTargets(e,t,s){let u=0;const m=[];return this.Rs.forEach((E,R)=>{R.sequenceNumber<=t&&null===s.get(R.targetId)&&(this.Rs.delete(E),m.push(this.removeMatchingKeysForTargetId(e,R.targetId)),u++)}),en.waitFor(m).next(()=>u)}getTargetCount(e){return en.resolve(this.targetCount)}getTargetData(e,t){const s=this.Rs.get(t)||null;return en.resolve(s)}addMatchingKeys(e,t,s){return this.Ps.us(t,s),en.resolve()}removeMatchingKeys(e,t,s){this.Ps.hs(t,s);const u=this.persistence.referenceDelegate,m=[];return u&&t.forEach(E=>{m.push(u.markPotentiallyOrphaned(e,E))}),en.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),en.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ps.ds(t);return en.resolve(s)}containsKey(e,t){return en.resolve(this.Ps.containsKey(t))}}class Cp{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new _o(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new vm(this),this.indexManager=new pp,this.remoteDocumentCache=new Sd(s=>this.referenceDelegate.xs(s)),this.yt=new op(t),this.Ns=new ih(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Id,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Vs[e.toKey()];return s||(s=new oh(t,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,s){$t("MemoryPersistence","Starting transaction:",e);const u=new bp(this.Ss.next());return this.referenceDelegate.ks(),s(u).next(m=>this.referenceDelegate.Os(u).next(()=>m)).toPromise().then(m=>(u.raiseOnCommittedEvent(),m))}Ms(e,t){return en.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,t)))}}class bp extends Ic{constructor(e){super(),this.currentSequenceNumber=e}}class Dd{constructor(e){this.persistence=e,this.Fs=new sh,this.$s=null}static Bs(e){return new Dd(e)}get Ls(){if(this.$s)return this.$s;throw Nn()}addReference(e,t,s){return this.Fs.addReference(s,t),this.Ls.delete(s.toString()),en.resolve()}removeReference(e,t,s){return this.Fs.removeReference(s,t),this.Ls.add(s.toString()),en.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),en.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(m=>this.Ls.add(m.toString()))}).next(()=>s.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return en.forEach(this.Ls,s=>{const u=rr.fromPath(s);return this.qs(e,u).next(m=>{m||t.removeEntry(u,zn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(s=>{s?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return en.or([()=>en.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Em{constructor(e){this.yt=e}$(e,t,s,u){const m=new Xa("createOrUpgrade",t);var R;s<1&&u>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fi,{unique:!0}),R.createObjectStore("documentMutations"),ah(e),function(R){R.createObjectStore("remoteDocuments")}(e));let E=en.resolve();return s<3&&u>=3&&(0!==s&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),ah(e)),E=E.next(()=>function(R){const X=R.store("targetGlobal"),se={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zn.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",se)}(m))),s<4&&u>=4&&(0!==s&&(E=E.next(()=>function(R,X){return X.store("mutations").W().next(se=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fi,{unique:!0});const Se=X.store("mutations"),st=se.map(Kt=>Se.put(Kt));return en.waitFor(st)})}(e,m))),E=E.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(E=E.next(()=>this.Us(m))),s<6&&u>=6&&(E=E.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),s<7&&u>=7&&(E=E.next(()=>this.Gs(m))),s<8&&u>=8&&(E=E.next(()=>this.Qs(e,m))),s<9&&u>=9&&(E=E.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(E=E.next(()=>this.js(m))),s<11&&u>=11&&(E=E.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(E=E.next(()=>{!function(R){const X=R.createObjectStore("documentOverlays",{keyPath:im});X.createIndex("collectionPathOverlayIndex",Uh,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",Bh,{unique:!1})}(e)})),s<13&&u>=13&&(E=E.next(()=>function(R){const X=R.createObjectStore("remoteDocumentsV14",{keyPath:Vc});X.createIndex("documentKeyIndex",Wl),X.createIndex("collectionGroupIndex",Lh)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(E=E.next(()=>this.zs(e,m))),s<15&&u>=15&&(E=E.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:tm}).createIndex("sequenceNumberIndex",nm,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:rm}).createIndex("documentKeyIndex",Jf,{unique:!1})}(e))),E}Ks(e){let t=0;return e.store("remoteDocuments").Z((s,u)=>{t+=Qh(u)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Us(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(u=>en.forEach(u,m=>{const E=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",E).next(R=>en.forEach(R,X=>{Jn(X.userId===m.userId);const se=Bc(this.yt,X);return gp(e,m.userId,se).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const m=[];return s.Z((E,R)=>{const X=new $r(E),se=[0,an(X)];m.push(t.get(se).next(Se=>Se?en.resolve():t.put({targetId:0,path:an(X),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>en.waitFor(m))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:g_});const s=t.store("collectionParents"),u=new hm,m=E=>{if(u.add(E)){const R=E.lastSegment(),X=E.popLast();return s.put({collectionId:R,parent:an(X)})}};return t.store("remoteDocuments").Z({X:!0},(E,R)=>{const X=new $r(E);return m(X.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([E,R,X],se)=>{const Se=Cr(R);return m(Se.popLast())}))}js(e){const t=e.store("targets");return t.Z((s,u)=>{const m=Ka(u),E=sm(this.yt,m);return t.put(E)})}Ws(e,t){const s=t.store("remoteDocuments"),u=[];return s.Z((m,E)=>{const R=t.store("remoteDocumentsV14"),X=(se=E,se.document?new rr($r.fromString(se.document.name).popFirst(5)):se.noDocument?rr.fromSegments(se.noDocument.path):se.unknownDocument?rr.fromSegments(se.unknownDocument.path):Nn()).path.toArray();var se;const Se={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};u.push(R.put(Se))}).next(()=>en.waitFor(u))}zs(e,t){const s=t.store("mutations"),u=mm(this.yt),m=new Cp(Dd.Bs,this.yt.ie);return s.W().next(E=>{const R=new Map;return E.forEach(X=>{var se;let Se=null!==(se=R.get(X.userId))&&void 0!==se?se:qi();Bc(this.yt,X).keys().forEach(st=>Se=Se.add(st)),R.set(X.userId,Se)}),en.forEach(R,(X,se)=>{const Se=new Ve(se),st=zh.re(this.yt,Se),Kt=m.getIndexManager(Se),On=bd.re(Se,this.yt,Kt,m.referenceDelegate);return new _m(u,On,st,Kt).recalculateAndSaveOverlaysForDocumentKeys(new rp(t,_o.at),X).next()})})}}function ah(i){i.createObjectStore("targetDocuments",{keyPath:p_}).createIndex("documentTargetsIndex",Vh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",em,{unique:!0}),i.createObjectStore("targetGlobal")}const Tp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Xh{constructor(e,t,s,u,m,E,R,X,se,Se,st=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Hs=m,this.window=E,this.document=R,this.Js=se,this.Ys=Se,this.Xs=st,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Kt=>Promise.resolve(),!Xh.C())throw new yn(qt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gm(this,u),this.ii=t+"main",this.yt=new op(X),this.ri=new ba(this.ii,this.Xs,new Em(this.yt)),this.Cs=new E0(this.referenceDelegate,this.yt),this.remoteDocumentCache=mm(this.yt),this.Ns=new m_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Se&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new yn(qt.FAILED_PRECONDITION,Tp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new _o(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var s=(0,xe.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,xe.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,xe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(aa(e))return $t("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $t("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Jh(e).get("owner").next(t=>en.resolve(this.mi(t)))}gi(e){return lh(e).delete(this.clientId)}yi(){var e=this;return(0,xe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=ma(s,"clientMetadata");return u.W().next(m=>{const E=e.Ii(m,18e5),R=m.filter(X=>-1===E.indexOf(X));return en.forEach(R,X=>u.delete(X.clientId)).next(()=>R)})}).catch(()=>[]);if(e.oi)for(const s of t)e.oi.removeItem(e.Ti(s.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?en.resolve(!0):Jh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new yn(qt.FAILED_PRECONDITION,Tp);return!1}}return!(!this.networkEnabled||!this.inForeground)||lh(e).W().next(s=>void 0===this.Ii(s,5e3).find(u=>{if(this.clientId!==u.clientId){const E=!this.inForeground&&u.inForeground,R=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||E&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$t("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,xe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new rp(t,_o.at);return e._i(s).next(()=>e.gi(s))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(s=>this.pi(s.updateTimeMs,t)&&!this.Ei(s.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>lh(e).W().next(t=>this.Ii(t,18e5).map(s=>s.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return bd.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new __(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return zh.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,s){$t("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",m=15===(E=this.Xs)?Xd:14===E?$h:13===E?np:12===E?tp:11===E?ep:void Nn();var E;let R;return this.ri.runTransaction(e,u,m,X=>(R=new rp(X,this.Ss?this.Ss.next():_o.at),"readwrite-primary"===t?this.fi(R).next(se=>!!se||this.di(R)).next(se=>{if(!se)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new yn(qt.FAILED_PRECONDITION,wc);return s(R)}).next(se=>this.wi(R).next(()=>se)):this.Vi(R).next(()=>s(R)))).then(X=>(R.raiseOnCommittedEvent(),X))}Vi(e){return Jh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new yn(qt.FAILED_PRECONDITION,Tp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jh(e).put("owner",t)}static C(){return ba.C()}_i(e){const t=Jh(e);return t.get("owner").next(s=>this.mi(s)?($t("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):en.resolve())}pi(e,t){const s=Date.now();return!(e<s-t||e>s&&(yr(`Detected an update time that is in the future: ${e} > ${s}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const s=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return $t("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return yr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jh(i){return ma(i,"owner")}function lh(i){return ma(i,"clientMetadata")}function ef(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class wp{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Si=s,this.Di=u}static Ci(e,t){let s=qi(),u=qi();for(const m of t.docChanges)switch(m.type){case 0:s=s.add(m.doc.key);break;case 1:u=u.add(m.doc.key)}return new wp(e,t.fromCache,s,u)}}class Ip{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,s,u){return this.ki(e,t).next(m=>m||this.Oi(e,t,u,s)).next(m=>m||this.Mi(e,t))}ki(e,t){if(ru(t))return en.resolve(null);let s=ha(t);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=su(t,null,"F"),s=ha(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(m=>{const E=qi(...m);return this.Ni.getDocuments(e,E).next(R=>this.indexManager.getMinOffset(e,s).next(X=>{const se=this.Fi(t,R);return this.$i(t,se,E,X.readTime)?this.ki(e,su(t,null,"F")):this.Bi(e,se,t,X)}))})))}Oi(e,t,s,u){return ru(t)||u.isEqual(zn.min())?this.Mi(e,t):this.Ni.getDocuments(e,s).next(m=>{const E=this.Fi(t,m);return this.$i(t,E,s,u)?this.Mi(e,t):(fn()<=on.in.DEBUG&&$t("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Xu(t)),this.Bi(e,E,t,mu(u,-1)))})}Fi(e,t){let s=new ro(Ju(e));return t.forEach((u,m)=>{ka(e,m)&&(s=s.add(m))}),s}$i(e,t,s,u){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(u)>0)}Mi(e,t){return fn()<=on.in.DEBUG&&$t("QueryEngine","Using full collection scan to execute query:",Xu(t)),this.Ni.getDocumentsMatchingQuery(e,t,sa.min())}Bi(e,t,s,u){return this.Ni.getDocumentsMatchingQuery(e,s,u).next(m=>(t.forEach(E=>{m=m.insert(E.key,E)}),m))}}class D_{constructor(e,t,s,u){this.persistence=e,this.Li=t,this.yt=u,this.qi=new no(Ut),this.Ui=new il(m=>jl(m),Hl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _m(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function Cm(i,e,t,s){return new D_(i,e,t,s)}function ll(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,xe.Z)(function*(i,e){const t=Gn(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let u;return t.mutationQueue.getAllMutationBatches(s).next(m=>(u=m,t.Qi(e),t.mutationQueue.getAllMutationBatches(s))).next(m=>{const E=[],R=[];let X=qi();for(const se of u){E.push(se.batchId);for(const Se of se.mutations)X=X.add(Se.key)}for(const se of m){R.push(se.batchId);for(const Se of se.mutations)X=X.add(Se.key)}return t.localDocuments.getDocuments(s,X).next(se=>({ji:se,removedBatchIds:E,addedBatchIds:R}))})})}),Sp.apply(this,arguments)}function A_(i,e){const t=Gn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),m=t.Gi.newChangeBuffer({trackRemovals:!0});return function(E,R,X,se){const Se=X.batch,st=Se.keys();let Kt=en.resolve();return st.forEach(On=>{Kt=Kt.next(()=>se.getEntry(R,On)).next(Qn=>{const Nr=X.docVersions.get(On);Jn(null!==Nr),Qn.version.compareTo(Nr)<0&&(Se.applyToRemoteDocument(Qn,X),Qn.isValidDocument()&&(Qn.setReadTime(X.commitVersion),se.addEntry(Qn)))})}),Kt.next(()=>E.mutationQueue.removeMutationBatch(R,Se))}(t,s,e,m).next(()=>m.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(E){let R=qi();for(let X=0;X<E.mutationResults.length;++X)E.mutationResults[X].transformResults.length>0&&(R=R.add(E.batch.mutations[X].key));return R}(e))).next(()=>t.localDocuments.getDocuments(s,u))})}function x_(i){const e=Gn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function C0(i,e){const t=Gn(i),s=e.snapshotVersion;let u=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const E=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.qi;const R=[];e.targetChanges.forEach((Se,st)=>{const Kt=u.get(st);if(!Kt)return;R.push(t.Cs.removeMatchingKeys(m,Se.removedDocuments,st).next(()=>t.Cs.addMatchingKeys(m,Se.addedDocuments,st)));let On=Kt.withSequenceNumber(m.currentSequenceNumber);var Qn,Nr,pi;e.targetMismatches.has(st)?On=On.withResumeToken(lo.EMPTY_BYTE_STRING,zn.min()).withLastLimboFreeSnapshotVersion(zn.min()):Se.resumeToken.approximateByteSize()>0&&(On=On.withResumeToken(Se.resumeToken,s)),u=u.insert(st,On),Nr=On,pi=Se,(0===(Qn=Kt).resumeToken.approximateByteSize()||Nr.snapshotVersion.toMicroseconds()-Qn.snapshotVersion.toMicroseconds()>=3e8||pi.addedDocuments.size+pi.modifiedDocuments.size+pi.removedDocuments.size>0)&&R.push(t.Cs.updateTargetData(m,On))});let X=fa(),se=qi();if(e.documentUpdates.forEach(Se=>{e.resolvedLimboDocuments.has(Se)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(m,Se))}),R.push(Dp(m,E,e.documentUpdates).next(Se=>{X=Se.Wi,se=Se.zi})),!s.isEqual(zn.min())){const Se=t.Cs.getLastRemoteSnapshotVersion(m).next(st=>t.Cs.setTargetsMetadata(m,m.currentSequenceNumber,s));R.push(Se)}return en.waitFor(R).next(()=>E.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,X,se)).next(()=>X)}).then(m=>(t.qi=u,m))}function Dp(i,e,t){let s=qi(),u=qi();return t.forEach(m=>s=s.add(m)),e.getEntries(i,s).next(m=>{let E=fa();return t.forEach((R,X)=>{const se=m.get(R);X.isFoundDocument()!==se.isFoundDocument()&&(u=u.add(R)),X.isNoDocument()&&X.version.isEqual(zn.min())?(e.removeEntry(R,X.readTime),E=E.insert(R,X)):!se.isValidDocument()||X.version.compareTo(se.version)>0||0===X.version.compareTo(se.version)&&se.hasPendingWrites?(e.addEntry(X),E=E.insert(R,X)):$t("LocalStore","Ignoring outdated watch update for ",R,". Current version:",se.version," Watch version:",X.version)}),{Wi:E,zi:u}})}function b0(i,e){const t=Gn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ad(i,e){const t=Gn(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.Cs.getTargetData(s,e).next(m=>m?(u=m,en.resolve(u)):t.Cs.allocateTargetId(s).next(E=>(u=new uu(e,E,0,s.currentSequenceNumber),t.Cs.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.qi.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.qi=t.qi.insert(s.targetId,s),t.Ui.set(e,s.targetId)),s})}function lc(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,xe.Z)(function*(i,e,t){const s=Gn(i),u=s.qi.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",m,E=>s.persistence.referenceDelegate.removeTarget(E,u)))}catch(E){if(!aa(E))throw E;$t("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}s.qi=s.qi.remove(e),s.Ui.delete(u.target)}),tf.apply(this,arguments)}function nf(i,e,t){const s=Gn(i);let u=zn.min(),m=qi();return s.persistence.runTransaction("Execute query","readonly",E=>function(R,X,se){const Se=Gn(R),st=Se.Ui.get(se);return void 0!==st?en.resolve(Se.qi.get(st)):Se.Cs.getTargetData(X,se)}(s,E,ha(e)).next(R=>{if(R)return u=R.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(E,R.targetId).next(X=>{m=X})}).next(()=>s.Li.getDocumentsMatchingQuery(E,e,t?u:zn.min(),t?m:qi())).next(R=>(Ap(s,Da(e),R),{documents:R,Hi:m})))}function bm(i,e){const t=Gn(i),s=Gn(t.Cs),u=t.qi.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",m=>s.ne(m,e).next(E=>E?E.target:null))}function Tm(i,e){const t=Gn(i),s=t.Ki.get(e)||zn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,mu(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Ap(t,e,u),u))}function Ap(i,e,t){let s=i.Ki.get(e)||zn.min();t.forEach((u,m)=>{m.readTime.compareTo(s)>0&&(s=m.readTime)}),i.Ki.set(e,s)}function rf(){return rf=(0,xe.Z)(function*(i,e,t,s){const u=Gn(i);let m=qi(),E=fa();for(const se of t){const Se=e.Ji(se.metadata.name);se.document&&(m=m.add(Se));const st=e.Yi(se);st.setReadTime(e.Xi(se.metadata.readTime)),E=E.insert(Se,st)}const R=u.Gi.newChangeBuffer({trackRemovals:!0}),X=yield Ad(u,(se=s,ha(nu($r.fromString(`__bundle__/docs/${se}`)))));var se;return u.persistence.runTransaction("Apply bundle documents","readwrite",se=>Dp(se,R,E).next(Se=>(R.apply(se),Se)).next(Se=>u.Cs.removeMatchingKeysForTargetId(se,X.targetId).next(()=>u.Cs.addMatchingKeys(se,m,X.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(se,Se.Wi,Se.zi)).next(()=>Se.Wi)))}),rf.apply(this,arguments)}function R_(i,e){return xp.apply(this,arguments)}function xp(){return xp=(0,xe.Z)(function*(i,e,t=qi()){const s=yield Ad(i,ha(Gh(e.bundledQuery))),u=Gn(i);return u.persistence.runTransaction("Save named query","readwrite",m=>{const E=Po(e.readTime);if(s.snapshotVersion.compareTo(E)>=0)return u.Ns.saveNamedQuery(m,e);const R=s.withResumeToken(lo.EMPTY_BYTE_STRING,E);return u.qi=u.qi.insert(R.targetId,R),u.Cs.updateTargetData(m,R).next(()=>u.Cs.removeMatchingKeysForTargetId(m,s.targetId)).next(()=>u.Cs.addMatchingKeys(m,t,s.targetId)).next(()=>u.Ns.saveNamedQuery(m,e))})}),xp.apply(this,arguments)}function Mp(i,e){return`firestore_clients_${i}_${e}`}function Rp(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Pp(i,e){return`firestore_targets_${i}_${e}`}class Cl{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static Zi(e,t,s){const u=JSON.parse(s);let m,E="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return E&&u.error&&(E="string"==typeof u.error.message&&"string"==typeof u.error.code,E&&(m=new yn(u.error.code,u.error.message))),E?new Cl(e,t,u.state,m):(yr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wc{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let u,m="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return m&&s.error&&(m="string"==typeof s.error.message&&"string"==typeof s.error.code,m&&(u=new yn(s.error.code,s.error.message))),m?new Wc(e,s.state,u):(yr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,m=lu();for(let E=0;u&&E<s.activeTargetIds.length;++E)u=Ja(s.activeTargetIds[E]),m=m.add(s.activeTargetIds[E]);return u?new sf(e,m):(yr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Np{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Np(t.clientId,t.onlineState):(yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wm{constructor(){this.activeTargetIds=lu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class af{constructor(e,t,s,u,m){this.window=e,this.Hs=t,this.persistenceKey=s,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new no(Ut),this.started=!1,this.cr=[];const E=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=Mp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new wm),this.lr=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,xe.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const m=e.getItem(Mp(e.persistenceKey,u));if(m){const E=sf.Zi(u,m);E&&(e.ur=e.ur.insert(E.clientId,E))}}e.gr();const s=e.storage.getItem(e.wr);if(s){const u=e.yr(s);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,s){this.Tr(e,t,s),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pp(this.persistenceKey,e));if(s){const u=Wc.Zi(e,s);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Rr(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.Er(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $t("SharedClientState","READ",e,t),t}setItem(e,t){$t("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$t("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const s=e;if(s.storageArea===this.storage){if($t("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ar)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,xe.Z)(function*(){if(t.started){if(null!==s.key)if(t.lr.test(s.key)){if(null==s.newValue){const u=t.vr(s.key);return t.Vr(u,null)}{const u=t.Sr(s.key,s.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const u=t.Dr(s.key,s.newValue);if(u)return t.Cr(u)}}else if(t._r.test(s.key)){if(null!==s.newValue){const u=t.Nr(s.key,s.newValue);if(u)return t.kr(u)}}else if(s.key===t.wr){if(null!==s.newValue){const u=t.yr(s.newValue);if(u)return t.pr(u)}}else if(s.key===t.hr){const u=function(m){let E=_o.at;if(null!=m)try{const R=JSON.parse(m);Jn("number"==typeof R),E=R}catch(R){yr("SharedClientState","Failed to read sequence number from WebStorage",R)}return E}(s.newValue);u!==_o.at&&t.sequenceNumberHandler(u)}else if(s.key===t.mr){const u=t.Or(s.newValue);yield Promise.all(u.map(m=>t.syncEngine.Mr(m)))}}else t.cr.push(s)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,s){const u=new Cl(this.currentUser,e,t,s),m=Rp(this.persistenceKey,this.currentUser,e);this.setItem(m,u.tr())}Er(e){const t=Rp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,s){const u=Pp(this.persistenceKey,e),m=new Wc(e,t,s);this.setItem(u,m.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const s=this.vr(e);return sf.Zi(s,t)}Dr(e,t){const s=this.dr.exec(e),u=Number(s[1]);return Cl.Zi(new Ve(void 0!==s[2]?s[2]:null),u,t)}Nr(e,t){const s=this._r.exec(e),u=Number(s[1]);return Wc.Zi(u,t)}yr(e){return Np.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);$t("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const s=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),m=this.Ir(s),E=[],R=[];return m.forEach(X=>{u.has(X)||E.push(X)}),u.forEach(X=>{m.has(X)||R.push(X)}),this.syncEngine.Br(E,R).then(()=>{this.ur=s})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=lu();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class Im{constructor(){this.Lr=new wm,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,s){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new wm,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class P_{Ur(e){}shutdown(){}}class Sm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){$t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Op={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N_{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class O_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,s,u,m){const E=this.ho(e,t);$t("RestConnection","Sending: ",E,s);const R={};return this.lo(R,u,m),this.fo(e,E,R,s).then(X=>($t("RestConnection","Received: ",X),X),X=>{throw Rr("RestConnection",`${e} failed with error: `,X,"url: ",E,"request:",s),X})}_o(e,t,s,u,m,E){return this.ao(e,t,s,u,m)}lo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xe,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,m)=>e[m]=u),s&&s.headers.forEach((u,m)=>e[m]=u)}ho(e,t){return`${this.oo}/v1/${t}:${Op[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,s,u){return new Promise((m,E)=>{const R=new ue;R.setWithCredentials(!0),R.listenOnce(Xo.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case Ys.NO_ERROR:const se=R.getResponseJson();$t("Connection","XHR received:",JSON.stringify(se)),m(se);break;case Ys.TIMEOUT:$t("Connection",'RPC "'+e+'" timed out'),E(new yn(qt.DEADLINE_EXCEEDED,"Request time out"));break;case Ys.HTTP_ERROR:const Se=R.getStatus();if($t("Connection",'RPC "'+e+'" failed with status:',Se,"response text:",R.getResponseText()),Se>0){let st=R.getResponseJson();Array.isArray(st)&&(st=st[0]);const Kt=null==st?void 0:st.error;if(Kt&&Kt.status&&Kt.message){const On=function(Qn){const Nr=Qn.toLowerCase().replace(/_/g,"-");return Object.values(qt).indexOf(Nr)>=0?Nr:qt.UNKNOWN}(Kt.status);E(new yn(On,Kt.message))}else E(new yn(qt.UNKNOWN,"Server responded with status "+R.getStatus()))}else E(new yn(qt.UNAVAILABLE,"Connection failed."));break;default:Nn()}}finally{$t("Connection",'RPC "'+e+'" completed.')}});const X=JSON.stringify(u);R.send(t,"POST",X,s,15)})}wo(e,t,s){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=_i(),E=Di(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new T({})),this.lo(R.initMessageHeaders,t,s),R.encodeInitMessageHeaders=!0;const X=u.join("");$t("Connection","Creating WebChannel: "+X,R);const se=m.createWebChannel(X,R);let Se=!1,st=!1;const Kt=new N_({Hr:Qn=>{st?$t("Connection","Not sending because WebChannel is closed:",Qn):(Se||($t("Connection","Opening WebChannel transport."),se.open(),Se=!0),$t("Connection","WebChannel sending:",Qn),se.send(Qn))},Jr:()=>se.close()}),On=(Qn,Nr,pi)=>{Qn.listen(Nr,Co=>{try{pi(Co)}catch(Fo){setTimeout(()=>{throw Fo},0)}})};return On(se,F.EventType.OPEN,()=>{st||$t("Connection","WebChannel transport opened.")}),On(se,F.EventType.CLOSE,()=>{st||(st=!0,$t("Connection","WebChannel transport closed"),Kt.io())}),On(se,F.EventType.ERROR,Qn=>{st||(st=!0,Rr("Connection","WebChannel transport errored:",Qn),Kt.io(new yn(qt.UNAVAILABLE,"The operation could not be completed")))}),On(se,F.EventType.MESSAGE,Qn=>{var Nr;if(!st){const pi=Qn.data[0];Jn(!!pi);const Co=pi,Fo=Co.error||(null===(Nr=Co[0])||void 0===Nr?void 0:Nr.error);if(Fo){$t("Connection","WebChannel received error:",Fo);const $s=Fo.status;let Zo=function(Ks){const ya=ko[Ks];if(void 0!==ya)return Pu(ya)}($s),js=Fo.message;void 0===Zo&&(Zo=qt.INTERNAL,js="Unknown error status: "+$s+" with message "+Fo.message),st=!0,Kt.io(new yn(Zo,js)),se.close()}else $t("Connection","WebChannel received:",pi),Kt.ro(pi)}}),On(E,Z.STAT_EVENT,Qn=>{Qn.stat===C.PROXY?$t("Connection","Detected buffering proxy"):Qn.stat===C.NOPROXY&&$t("Connection","Detected no buffering proxy")}),setTimeout(()=>{Kt.so()},0),Kt}}function uh(){return"undefined"!=typeof window?window:null}function xd(){return"undefined"!=typeof document?document:null}function ch(i){return new sl(i,!0)}class dh{constructor(e,t,s=1e3,u=1.5,m=6e4){this.Hs=e,this.timerId=t,this.mo=s,this.yo=u,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-s);u>0&&$t("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class lf{constructor(e,t,s,u,m,E,R,X){this.Hs=e,this.vo=s,this.Vo=u,this.connection=m,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=R,this.listener=X,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new dh(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,xe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,xe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var s=this;return(0,xe.Z)(function*(){s.Lo(),s.qo(),s.xo.cancel(),s.So++,4!==e?s.xo.reset():t&&t.code===qt.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),s.xo.Ao()):t&&t.code===qt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Uo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.So===t&&this.Go(s,u)},s=>{e(()=>{const u=new yn(qt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(u)})})}Go(e,t){const s=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{s(()=>this.Qo(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,xe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return $t("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():($t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dm extends lf{constructor(e,t,s,u,m,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,u,E),this.yt=m}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Tt(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:Nn(),u=e.targetChange.targetIds||[],m=function(X,se){return X.wt?(Jn(void 0===se||"string"==typeof se),lo.fromBase64String(se||"")):(Jn(void 0===se||se instanceof Uint8Array),lo.fromUint8Array(se||new Uint8Array))}(i,e.targetChange.resumeToken),E=e.targetChange.cause,R=E&&function(X){const se=void 0===X.code?qt.UNKNOWN:Pu(X.code);return new yn(se,X.message||"")}(E);t=new Qd(s,u,m,R||null)}else if("documentChange"in e){const s=e.documentChange,u=Pl(i,s.document.name),m=Po(s.document.updateTime),E=s.document.createTime?Po(s.document.createTime):zn.min(),R=new Uo({mapValue:{fields:s.document.fields}}),X=Fs.newFoundDocument(u,m,E,R);t=new xa(s.targetIds||[],s.removedTargetIds||[],X.key,X)}else if("documentDelete"in e){const s=e.documentDelete,u=Pl(i,s.document),m=s.readTime?Po(s.readTime):zn.min(),E=Fs.newNoDocument(u,m);t=new xa([],s.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const s=e.documentRemove,u=Pl(i,s.document);t=new xa([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Nn();{const s=e.filter,m=new Rc(s.count||0);t=new Pc(s.targetId,m)}}var X;return t}(this.yt,e),s=function(u){if(!("targetChange"in u))return zn.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?zn.min():m.readTime?Po(m.readTime):zn.min()}(e);return this.listener.Wo(t,s)}zo(e){const t={};t.database=p(this.yt),t.addTarget=function(u,m){let E;const R=m.target;return E=Yu(R)?{documents:Ci(u,R)}:{query:di(u,R)},E.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?E.resumeToken=Fc(u,m.resumeToken):m.snapshotVersion.compareTo(zn.min())>0&&(E.readTime=ol(u,m.snapshotVersion.toTimestamp())),E}(this.yt,e);const s=function f(i,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Bo(t)}Ho(e){const t={};t.database=p(this.yt),t.removeTarget=e,this.Bo(t)}}class T0 extends lf{constructor(e,t,s,u,m,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,u,E),this.yt=m,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Jn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function kr(i,e){return i&&i.length>0?(Jn(void 0!==e),i.map(t=>function(s,u){let m=Po(s.updateTime?s.updateTime:u);return m.isEqual(zn.min())&&(m=Po(u)),new vl(m,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Po(e.commitTime);return this.listener.Zo(s,t)}return Jn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=p(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>pn(this.yt,s))};this.Bo(t)}}class w0 extends class{}{constructor(e,t,s,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.yt=u,this.nu=!1}su(){if(this.nu)throw new yn(qt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.connection.ao(e,t,s,u,m)).catch(u=>{throw"FirebaseError"===u.name?(u.code===qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new yn(qt.UNKNOWN,u.toString())})}_o(e,t,s,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,E])=>this.connection._o(e,t,s,m,E,u)).catch(m=>{throw"FirebaseError"===m.name?(m.code===qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new yn(qt.UNKNOWN,m.toString())})}terminate(){this.nu=!0}}class k_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(yr(t),this.ou=!1):$t("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class xm{constructor(e,t,s,u,m){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=m,this.mu.Ur(R=>{s.enqueueAndForget((0,xe.Z)(function*(){var X;hu(E)&&($t("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,xe.Z)(function*(se){const Se=Gn(se);Se._u.add(4),yield qc(Se),Se.gu.set("Unknown"),Se._u.delete(4),yield Md(Se)}),function(se){return X.apply(this,arguments)})(E))}))}),this.gu=new k_(s,u)}}function Md(i){return uf.apply(this,arguments)}function uf(){return uf=(0,xe.Z)(function*(i){if(hu(i))for(const e of i.wu)yield e(!0)}),uf.apply(this,arguments)}function qc(i){return cf.apply(this,arguments)}function cf(){return cf=(0,xe.Z)(function*(i){for(const e of i.wu)yield e(!1)}),cf.apply(this,arguments)}function Nl(i,e){const t=Gn(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),hh(t)?Rm(t):Od(t).ko()&&Fp(t,e))}function uc(i,e){const t=Gn(i),s=Od(t);t.du.delete(e),s.ko()&&Mm(t,e),0===t.du.size&&(s.ko()?s.Fo():hu(t)&&t.gu.set("Unknown"))}function Fp(i,e){i.yu.Ot(e.targetId),Od(i).zo(e)}function Mm(i,e){i.yu.Ot(e),Od(i).Ho(e)}function Rm(i){i.yu=new Fh({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),Od(i).start(),i.gu.uu()}function hh(i){return hu(i)&&!Od(i).No()&&i.du.size>0}function hu(i){return 0===Gn(i)._u.size}function df(i){i.yu=void 0}function fh(i){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,xe.Z)(function*(i){i.du.forEach((e,t)=>{Fp(i,e)})}),Lp.apply(this,arguments)}function Vp(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,xe.Z)(function*(i,e){df(i),hh(i)?(i.gu.hu(e),Rm(i)):i.gu.set("Unknown")}),hf.apply(this,arguments)}function Pm(i,e,t){return ff.apply(this,arguments)}function ff(){return ff=(0,xe.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Qd&&2===e.state&&e.cause)try{yield(s=(0,xe.Z)(function*(u,m){const E=m.cause;for(const R of m.targetIds)u.du.has(R)&&(yield u.remoteSyncer.rejectListen(R,E),u.du.delete(R),u.yu.removeTarget(R))}),function(u,m){return s.apply(this,arguments)})(i,e)}catch(s){$t("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield pf(i,s)}else if(e instanceof xa?i.yu.Kt(e):e instanceof Pc?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(zn.min()))try{const s=yield x_(i.localStore);t.compareTo(s)>=0&&(yield function(u,m){const E=u.yu.Zt(m);return E.targetChanges.forEach((R,X)=>{if(R.resumeToken.approximateByteSize()>0){const se=u.du.get(X);se&&u.du.set(X,se.withResumeToken(R.resumeToken,m))}}),E.targetMismatches.forEach(R=>{const X=u.du.get(R);if(!X)return;u.du.set(R,X.withResumeToken(lo.EMPTY_BYTE_STRING,X.snapshotVersion)),Mm(u,R);const se=new uu(X.target,R,1,X.sequenceNumber);Fp(u,se)}),u.remoteSyncer.applyRemoteEvent(E)}(i,t))}catch(s){$t("RemoteStore","Failed to raise snapshot:",s),yield pf(i,s)}var s}),ff.apply(this,arguments)}function pf(i,e,t){return ph.apply(this,arguments)}function ph(){return ph=(0,xe.Z)(function*(i,e,t){if(!aa(e))throw e;i._u.add(1),yield qc(i),i.gu.set("Offline"),t||(t=()=>x_(i.localStore)),i.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){$t("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Md(i)}))}),ph.apply(this,arguments)}function Nm(i,e){return e().catch(t=>pf(i,t,e))}function Rd(i){return gf.apply(this,arguments)}function gf(){return gf=(0,xe.Z)(function*(i){const e=Gn(i),t=cc(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Pd(e);)try{const u=yield b0(e.localStore,s);if(null===u){0===e.fu.length&&t.Fo();break}s=u.batchId,Om(e,u)}catch(u){yield pf(e,u)}km(e)&&Fm(e)}),gf.apply(this,arguments)}function Pd(i){return hu(i)&&i.fu.length<10}function Om(i,e){i.fu.push(e);const t=cc(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function km(i){return hu(i)&&!cc(i).No()&&i.fu.length>0}function Fm(i){cc(i).start()}function Nd(i){return Up.apply(this,arguments)}function Up(){return Up=(0,xe.Z)(function*(i){cc(i).eu()}),Up.apply(this,arguments)}function F_(i){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,xe.Z)(function*(i){const e=cc(i);for(const t of i.fu)e.Xo(t.mutations)}),Bp.apply(this,arguments)}function L_(i,e,t){return Ol.apply(this,arguments)}function Ol(){return Ol=(0,xe.Z)(function*(i,e,t){const s=i.fu.shift(),u=sp.from(s,e,t);yield Nm(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Rd(i)}),Ol.apply(this,arguments)}function $p(i,e){return mf.apply(this,arguments)}function mf(){return mf=(0,xe.Z)(function*(i,e){var t;e&&cc(i).Yo&&(yield(t=(0,xe.Z)(function*(s,u){if(ua(m=u.code)&&m!==qt.ABORTED){const E=s.fu.shift();cc(s).Mo(),yield Nm(s,()=>s.remoteSyncer.rejectFailedWrite(E.batchId,u)),yield Rd(s)}var m}),function(s,u){return t.apply(this,arguments)})(i,e)),km(i)&&Fm(i)}),mf.apply(this,arguments)}function jp(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,xe.Z)(function*(i,e){const t=Gn(i);t.asyncQueue.verifyOperationInProgress(),$t("RemoteStore","RemoteStore received new credentials");const s=hu(t);t._u.add(3),yield qc(t),s&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Md(t)}),yf.apply(this,arguments)}function _f(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,xe.Z)(function*(i,e){const t=Gn(i);e?(t._u.delete(2),yield Md(t)):e||(t._u.add(2),yield qc(t),t.gu.set("Unknown"))}),Hp.apply(this,arguments)}function Od(i){return i.pu||(i.pu=function(e,t,s){const u=Gn(e);return u.su(),new Dm(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:fh.bind(null,i),Zr:Vp.bind(null,i),Wo:Pm.bind(null,i)}),i.wu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.pu.Mo(),hh(i)?Rm(i):i.gu.set("Unknown")):(yield i.pu.stop(),df(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function cc(i){return i.Iu||(i.Iu=function(e,t,s){const u=Gn(e);return u.su(),new T0(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:Nd.bind(null,i),Zr:$p.bind(null,i),tu:F_.bind(null,i),Zo:L_.bind(null,i)}),i.wu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.Iu.Mo(),yield Rd(i)):(yield i.Iu.stop(),i.fu.length>0&&($t("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Gp{constructor(e,t,s,u,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=m,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,s,u,m){const E=Date.now()+s,R=new Gp(e,t,E,u,m);return R.start(s),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yn(qt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kc(i,e){if(yr("AsyncQueue",`${e}: ${i}`),aa(i))return new yn(qt.UNAVAILABLE,`${e}: ${i}`);throw i}class gh{constructor(e){this.comparator=e?(t,s)=>e(t,s)||rr.comparator(t.key,s.key):(t,s)=>rr.comparator(t.key,s.key),this.keyedMap=ic(),this.sortedSet=new no(this.comparator)}static emptySet(e){return new gh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(!u.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new gh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class zp{constructor(){this.Tu=new no(rr.comparator)}track(e){const t=e.doc.key,s=this.Tu.get(t);s?0!==e.type&&3===s.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==s.type?this.Tu=this.Tu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Tu=this.Tu.remove(t):1===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Nn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,s)=>{e.push(s)}),e}}class kd{constructor(e,t,s,u,m,E,R,X,se){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=m,this.fromCache=E,this.syncStateChanged=R,this.excludesMetadataChanges=X,this.hasCachedResults=se}static fromInitialDocuments(e,t,s,u,m){const E=[];return t.forEach(R=>{E.push({type:0,doc:R})}),new kd(e,t,gh.emptySet(t),E,s,u,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class V_{constructor(){this.Au=void 0,this.listeners=[]}}class I0{constructor(){this.queries=new il(e=>Oa(e),bu),this.onlineState="Unknown",this.Ru=new Set}}function Lm(i,e){return mh.apply(this,arguments)}function mh(){return mh=(0,xe.Z)(function*(i,e){const t=Gn(i),s=e.query;let u=!1,m=t.queries.get(s);if(m||(u=!0,m=new V_),u)try{m.Au=yield t.onListen(s)}catch(E){const R=Kc(E,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(R)}t.queries.set(s,m),m.listeners.push(e),e.bu(t.onlineState),m.Au&&e.Pu(m.Au)&&bl(t)}),mh.apply(this,arguments)}function Wp(i,e){return vf.apply(this,arguments)}function vf(){return vf=(0,xe.Z)(function*(i,e){const t=Gn(i),s=e.query;let u=!1;const m=t.queries.get(s);if(m){const E=m.listeners.indexOf(e);E>=0&&(m.listeners.splice(E,1),u=0===m.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)}),vf.apply(this,arguments)}function Vm(i,e){const t=Gn(i);let s=!1;for(const u of e){const E=t.queries.get(u.query);if(E){for(const R of E.listeners)R.Pu(u)&&(s=!0);E.Au=u}}s&&bl(t)}function S0(i,e,t){const s=Gn(i),u=s.queries.get(e);if(u)for(const m of u.listeners)m.onError(t);s.queries.delete(e)}function bl(i){i.Ru.forEach(e=>{e.next()})}class Um{constructor(e,t,s){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new kd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class D0{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class qp{constructor(e){this.yt=e}Ji(e){return Pl(this.yt,e)}Yi(e){return e.metadata.exists?re(this.yt,e.document,!1):Fs.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Po(e)}}class Bm{constructor(e,t,s){this.Mu=e,this.localStore=t,this.yt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const s=$r.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,s=new qp(this.yt);for(const u of e)if(u.metadata.queries){const m=s.Ji(u.metadata.name);for(const E of u.metadata.queries){const R=(t.get(E)||qi()).add(m);t.set(E,R)}}return t}complete(){var e=this;return(0,xe.Z)(function*(){const t=yield function M_(i,e,t,s){return rf.apply(this,arguments)}(e.localStore,new qp(e.yt),e.documents,e.Mu.id),s=e.$u(e.documents);for(const u of e.queries)yield R_(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Kp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class $m{constructor(e){this.key=e}}class U_{constructor(e){this.key=e}}class Zp{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=qi(),this.mutatedKeys=qi(),this.Gu=Ju(e),this.Qu=new gh(this.Gu)}get ju(){return this.qu}Wu(e,t){const s=t?t.zu:new zp,u=t?t.Qu:this.Qu;let m=t?t.mutatedKeys:this.mutatedKeys,E=u,R=!1;const X="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,se="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Se,st)=>{const Kt=u.get(Se),On=ka(this.query,st)?st:null,Qn=!!Kt&&this.mutatedKeys.has(Kt.key),Nr=!!On&&(On.hasLocalMutations||this.mutatedKeys.has(On.key)&&On.hasCommittedMutations);let pi=!1;Kt&&On?Kt.data.isEqual(On.data)?Qn!==Nr&&(s.track({type:3,doc:On}),pi=!0):this.Hu(Kt,On)||(s.track({type:2,doc:On}),pi=!0,(X&&this.Gu(On,X)>0||se&&this.Gu(On,se)<0)&&(R=!0)):!Kt&&On?(s.track({type:0,doc:On}),pi=!0):Kt&&!On&&(s.track({type:1,doc:Kt}),pi=!0,(X||se)&&(R=!0)),pi&&(On?(E=E.add(On),m=Nr?m.add(Se):m.delete(Se)):(E=E.delete(Se),m=m.delete(Se)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const Se="F"===this.query.limitType?E.last():E.first();E=E.delete(Se.key),m=m.delete(Se.key),s.track({type:1,doc:Se})}return{Qu:E,zu:s,$i:R,mutatedKeys:m}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Eu();m.sort((se,Se)=>function(st,Kt){const On=Qn=>{switch(Qn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nn()}};return On(st)-On(Kt)}(se.type,Se.type)||this.Gu(se.doc,Se.doc)),this.Ju(s);const E=t?this.Yu():[],R=0===this.Ku.size&&this.current?1:0,X=R!==this.Uu;return this.Uu=R,0!==m.length||X?{snapshot:new kd(this.query,e.Qu,u,m,e.mutatedKeys,0===R,X,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:E}:{Xu:E}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new zp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=qi(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const t=[];return e.forEach(s=>{this.Ku.has(s)||t.push(new U_(s))}),this.Ku.forEach(s=>{e.has(s)||t.push(new $m(s))}),t}tc(e){this.qu=e.Hi,this.Ku=qi();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return kd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Yp{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class B_{constructor(e){this.key=e,this.nc=!1}}class Qp{constructor(e,t,s,u,m,E){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=m,this.maxConcurrentLimboResolutions=E,this.sc={},this.ic=new il(R=>Oa(R),bu),this.rc=new Map,this.oc=new Set,this.uc=new no(rr.comparator),this.cc=new Map,this.ac=new sh,this.hc={},this.lc=new Map,this.fc=Td.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function $_(i,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,xe.Z)(function*(i,e){const t=Sf(i);let s,u;const m=t.ic.get(e);if(m)s=m.targetId,t.sharedClientState.addLocalQueryTarget(s),u=m.view.ec();else{const E=yield Ad(t.localStore,ha(e));t.isPrimaryClient&&Nl(t.remoteStore,E);const R=t.sharedClientState.addLocalQueryTarget(E.targetId);s=E.targetId,u=yield Jp(t,e,s,"current"===R,E.resumeToken)}return u}),Xp.apply(this,arguments)}function Jp(i,e,t,s,u){return eg.apply(this,arguments)}function eg(){return eg=(0,xe.Z)(function*(i,e,t,s,u){i._c=(st,Kt,On)=>{return(Qn=(0,xe.Z)(function*(Nr,pi,Co,Fo){let $s=pi.view.Wu(Co);$s.$i&&($s=yield nf(Nr.localStore,pi.query,!1).then(({documents:Ks})=>pi.view.Wu(Ks,$s)));const Zo=Fo&&Fo.targetChanges.get(pi.targetId),js=pi.view.applyChanges($s,Nr.isPrimaryClient,Zo);return fc(Nr,pi.targetId,js.Xu),js.snapshot}),function(Nr,pi,Co,Fo){return Qn.apply(this,arguments)})(i,st,Kt,On);var Qn};const m=yield nf(i.localStore,e,!0),E=new Zp(e,m.Hi),R=E.Wu(m.documents),X=Ou.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,u),se=E.applyChanges(R,i.isPrimaryClient,X);fc(i,t,se.Xu);const Se=new Yp(e,t,E);return i.ic.set(e,Se),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),se.snapshot}),eg.apply(this,arguments)}function j_(i,e){return tg.apply(this,arguments)}function tg(){return tg=(0,xe.Z)(function*(i,e){const t=Gn(i),s=t.ic.get(e),u=t.rc.get(s.targetId);if(u.length>1)return t.rc.set(s.targetId,u.filter(m=>!bu(m,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield lc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),uc(t.remoteStore,s.targetId),Kl(t,s.targetId)}).catch(oa))):(Kl(t,s.targetId),yield lc(t.localStore,s.targetId,!0))}),tg.apply(this,arguments)}function dc(){return dc=(0,xe.Z)(function*(i,e,t){const s=lg(i);try{const u=yield function(m,E){const R=Gn(m),X=Er.now(),se=E.reduce((Kt,On)=>Kt.add(On.key),qi());let Se,st;return R.persistence.runTransaction("Locally write mutations","readwrite",Kt=>{let On=fa(),Qn=qi();return R.Gi.getEntries(Kt,se).next(Nr=>{On=Nr,On.forEach((pi,Co)=>{Co.isValidDocument()||(Qn=Qn.add(pi))})}).next(()=>R.localDocuments.getOverlayedDocuments(Kt,On)).next(Nr=>{Se=Nr;const pi=[];for(const Co of E){const Fo=Mc(Co,Se.get(Co.key).overlayedDocument);null!=Fo&&pi.push(new Ml(Co.key,Fo,Ku(Fo.value.mapValue),io.exists(!0)))}return R.mutationQueue.addMutationBatch(Kt,X,pi,E)}).next(Nr=>{st=Nr;const pi=Nr.applyToLocalDocumentSet(Se,Qn);return R.documentOverlayCache.saveOverlays(Kt,Nr.batchId,pi)})}).then(()=>({batchId:st.batchId,changes:au(Se)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(m,E,R){let X=m.hc[m.currentUser.toKey()];X||(X=new no(Ut)),X=X.insert(E,R),m.hc[m.currentUser.toKey()]=X}(s,u.batchId,t),yield cl(s,u.changes),yield Rd(s.remoteStore)}catch(u){const m=Kc(u,"Failed to persist write");t.reject(m)}}),dc.apply(this,arguments)}function jm(i,e){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,xe.Z)(function*(i,e){const t=Gn(i);try{const s=yield C0(t.localStore,e);e.targetChanges.forEach((u,m)=>{const E=t.cc.get(m);E&&(Jn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?E.nc=!0:u.modifiedDocuments.size>0?Jn(E.nc):u.removedDocuments.size>0&&(Jn(E.nc),E.nc=!1))}),yield cl(t,s,e)}catch(s){yield oa(s)}}),Zc.apply(this,arguments)}function Hm(i,e,t){const s=Gn(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.ic.forEach((m,E)=>{const R=E.view.bu(e);R.snapshot&&u.push(R.snapshot)}),function(m,E){const R=Gn(m);R.onlineState=E;let X=!1;R.queries.forEach((se,Se)=>{for(const st of Se.listeners)st.bu(E)&&(X=!0)}),X&&bl(R)}(s.eventManager,e),u.length&&s.sc.Wo(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function H_(i,e,t){return yh.apply(this,arguments)}function yh(){return yh=(0,xe.Z)(function*(i,e,t){const s=Gn(i);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.cc.get(e),m=u&&u.key;if(m){let E=new no(rr.comparator);E=E.insert(m,Fs.newNoDocument(m,zn.min()));const R=qi().add(m),X=new Nu(zn.min(),new Map,new ro(Ut),E,R);yield jm(s,X),s.uc=s.uc.remove(m),s.cc.delete(e),pc(s)}else yield lc(s.localStore,e,!1).then(()=>Kl(s,e,t)).catch(oa)}),yh.apply(this,arguments)}function fu(i,e){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,xe.Z)(function*(i,e){const t=Gn(i),s=e.batch.batchId;try{const u=yield A_(t.localStore,e);hc(t,s,null),_h(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield cl(t,u)}catch(u){yield oa(u)}}),Yc.apply(this,arguments)}function La(i,e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,xe.Z)(function*(i,e,t){const s=Gn(i);try{const u=yield function(m,E){const R=Gn(m);return R.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let se;return R.mutationQueue.lookupMutationBatch(X,E).next(Se=>(Jn(null!==Se),se=Se.keys(),R.mutationQueue.removeMutationBatch(X,Se))).next(()=>R.mutationQueue.performConsistencyCheck(X)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(X,se,E)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,se)).next(()=>R.localDocuments.getDocuments(X,se))})}(s.localStore,e);hc(s,e,t),_h(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield cl(s,u)}catch(u){yield oa(u)}}),Lu.apply(this,arguments)}function ul(){return ul=(0,xe.Z)(function*(i,e){const t=Gn(i);hu(t.remoteStore)||$t("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(m){const E=Gn(m);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>E.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===s)return void e.resolve();const u=t.lc.get(s)||[];u.push(e),t.lc.set(s,u)}catch(s){const u=Kc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),ul.apply(this,arguments)}function _h(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function hc(i,e,t){const s=Gn(i);let u=s.hc[s.currentUser.toKey()];if(u){const m=u.get(e);m&&(t?m.reject(t):m.resolve(),u=u.remove(e)),s.hc[s.currentUser.toKey()]=u}}function Kl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.rc.get(e))i.ic.delete(s),t&&i.sc.wc(s,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(s=>{i.ac.containsKey(s)||Qc(i,s)})}function Qc(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(uc(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),pc(i))}function fc(i,e,t){for(const s of t)s instanceof $m?(i.ac.addReference(s.key,e),Fd(i,s)):s instanceof U_?($t("SyncEngine","Document no longer in limbo: "+s.key),i.ac.removeReference(s.key,e),i.ac.containsKey(s.key)||Qc(i,s.key)):Nn()}function Fd(i,e){const t=e.key,s=t.path.canonicalString();i.uc.get(t)||i.oc.has(s)||($t("SyncEngine","New document in limbo: "+t),i.oc.add(s),pc(i))}function pc(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new rr($r.fromString(e)),s=i.fc.next();i.cc.set(s,new B_(t)),i.uc=i.uc.insert(t,s),Nl(i.remoteStore,new uu(ha(nu(t.path)),s,2,_o.at))}}function cl(i,e,t){return gc.apply(this,arguments)}function gc(){return gc=(0,xe.Z)(function*(i,e,t){const s=Gn(i),u=[],m=[],E=[];var R;s.ic.isEmpty()||(s.ic.forEach((R,X)=>{E.push(s._c(X,e,t).then(se=>{if((se||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(X.targetId,(null==se?void 0:se.fromCache)?"not-current":"current"),se){u.push(se);const Se=wp.Ci(X.targetId,se);m.push(Se)}}))}),yield Promise.all(E),s.sc.Wo(u),yield(R=(0,xe.Z)(function*(X,se){const Se=Gn(X);try{yield Se.persistence.runTransaction("notifyLocalViewChanges","readwrite",st=>en.forEach(se,Kt=>en.forEach(Kt.Si,On=>Se.persistence.referenceDelegate.addReference(st,Kt.targetId,On)).next(()=>en.forEach(Kt.Di,On=>Se.persistence.referenceDelegate.removeReference(st,Kt.targetId,On)))))}catch(st){if(!aa(st))throw st;$t("LocalStore","Failed to update sequence numbers: "+st)}for(const st of se){const Kt=st.targetId;if(!st.fromCache){const On=Se.qi.get(Kt),Nr=On.withLastLimboFreeSnapshotVersion(On.snapshotVersion);Se.qi=Se.qi.insert(Kt,Nr)}}}),function(X,se){return R.apply(this,arguments)})(s.localStore,m))}),gc.apply(this,arguments)}function Ld(i,e){return bf.apply(this,arguments)}function bf(){return bf=(0,xe.Z)(function*(i,e){const t=Gn(i);if(!t.currentUser.isEqual(e)){$t("SyncEngine","User change. New user:",e.toKey());const s=yield ll(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(E=>{E.forEach(R=>{R.reject(new yn(qt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield cl(t,s.ji)}var u}),bf.apply(this,arguments)}function Gm(i,e){const t=Gn(i),s=t.cc.get(e);if(s&&s.nc)return qi().add(s.key);{let u=qi();const m=t.rc.get(e);if(!m)return u;for(const E of m){const R=t.ic.get(E);u=u.unionWith(R.view.ju)}return u}}function zm(i,e){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,xe.Z)(function*(i,e){const t=Gn(i),s=yield nf(t.localStore,e.query,!0),u=e.view.tc(s);return t.isPrimaryClient&&fc(t,e.targetId,u.Xu),u}),Tf.apply(this,arguments)}function Wm(i,e){return wf.apply(this,arguments)}function wf(){return wf=(0,xe.Z)(function*(i,e){const t=Gn(i);return Tm(t.localStore,e).then(s=>cl(t,s))}),wf.apply(this,arguments)}function qm(i,e,t,s){return If.apply(this,arguments)}function If(){return If=(0,xe.Z)(function*(i,e,t,s){const u=Gn(i),m=yield function(E,R){const X=Gn(E),se=Gn(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",Se=>se.Tn(Se,R).next(st=>st?X.localDocuments.getDocuments(Se,st):en.resolve(null)))}(u.localStore,e);var R;null!==m?("pending"===t?yield Rd(u.remoteStore):"acknowledged"===t||"rejected"===t?(hc(u,e,s||null),_h(u,e),R=e,Gn(Gn(u.localStore).mutationQueue).An(R)):Nn(),yield cl(u,m)):$t("SyncEngine","Cannot apply mutation batch with id: "+e)}),If.apply(this,arguments)}function ng(){return ng=(0,xe.Z)(function*(i,e){const t=Gn(i);if(Sf(t),lg(t),!0===e&&!0!==t.dc){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield rg(t,s.toArray());t.dc=!0,yield _f(t.remoteStore,!0);for(const m of u)Nl(t.remoteStore,m)}else if(!1===e&&!1!==t.dc){const s=[];let u=Promise.resolve();t.rc.forEach((m,E)=>{t.sharedClientState.isLocalQueryTarget(E)?s.push(E):u=u.then(()=>(Kl(t,E),lc(t.localStore,E,!0))),uc(t.remoteStore,E)}),yield u,yield rg(t,s),function(m){const E=Gn(m);E.cc.forEach((R,X)=>{uc(E.remoteStore,X)}),E.ac.fs(),E.cc=new Map,E.uc=new no(rr.comparator)}(t),t.dc=!1,yield _f(t.remoteStore,!1)}}),ng.apply(this,arguments)}function rg(i,e,t){return ig.apply(this,arguments)}function ig(){return ig=(0,xe.Z)(function*(i,e,t){const s=Gn(i),u=[],m=[];for(const E of e){let R;const X=s.rc.get(E);if(X&&0!==X.length){R=yield Ad(s.localStore,ha(X[0]));for(const se of X){const Se=s.ic.get(se),st=yield zm(s,Se);st.snapshot&&m.push(st.snapshot)}}else{const se=yield bm(s.localStore,E);R=yield Ad(s.localStore,se),yield Jp(s,sg(se),E,!1,R.resumeToken)}u.push(R)}return s.sc.Wo(m),u}),ig.apply(this,arguments)}function sg(i){return Sc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Zm(i){const e=Gn(i);return Gn(Gn(e.localStore).persistence).vi()}function G_(i,e,t,s){return og.apply(this,arguments)}function og(){return og=(0,xe.Z)(function*(i,e,t,s){const u=Gn(i);if(u.dc)return void $t("SyncEngine","Ignoring unexpected query state notification.");const m=u.rc.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const E=yield Tm(u.localStore,Da(m[0])),R=Nu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,lo.EMPTY_BYTE_STRING);yield cl(u,E,R);break}case"rejected":yield lc(u.localStore,e,!0),Kl(u,e,s);break;default:Nn()}}),og.apply(this,arguments)}function Ym(i,e,t){return ag.apply(this,arguments)}function ag(){return ag=(0,xe.Z)(function*(i,e,t){const s=Sf(i);if(s.dc){for(const u of e){if(s.rc.has(u)){$t("SyncEngine","Adding an already active target "+u);continue}const m=yield bm(s.localStore,u),E=yield Ad(s.localStore,m);yield Jp(s,sg(m),E.targetId,!1,E.resumeToken),Nl(s.remoteStore,E)}for(const u of t)s.rc.has(u)&&(yield lc(s.localStore,u,!1).then(()=>{uc(s.remoteStore,u),Kl(s,u)}).catch(oa))}}),ag.apply(this,arguments)}function Sf(i){const e=Gn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H_.bind(null,e),e.sc.Wo=Vm.bind(null,e.eventManager),e.sc.wc=S0.bind(null,e.eventManager),e}function lg(i){const e=Gn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=La.bind(null,e),e}class W_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,xe.Z)(function*(){t.yt=ch(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Cm(this.persistence,new Ip,e.initialUser,this.yt)}yc(e){return new Cp(Dd.Bs,this.yt)}gc(e){return new Im}terminate(){var e=this;return(0,xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qm extends W_{constructor(e,t,s){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e),yield s.Ac.initialize(s,e),yield lg(s.Ac.syncEngine),yield Rd(s.Ac.remoteStore),yield s.persistence.li(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Cm(this.persistence,new Ip,e.initialUser,this.yt)}Tc(e,t){return new mp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const s=new yu(t,this.persistence);return new Jl(e.asyncQueue,s)}yc(e){const t=ef(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Za.withCacheSize(this.cacheSizeBytes):Za.DEFAULT;return new Xh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,uh(),xd(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Im}}class ug extends Qm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e);const u=s.Ac.syncEngine;s.sharedClientState instanceof af&&(s.sharedClientState.syncEngine={Fr:qm.bind(null,u),$r:G_.bind(null,u),Br:Ym.bind(null,u),vi:Zm.bind(null,u),Mr:Wm.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.li(function(){var m=(0,xe.Z)(function*(E){yield function Km(i,e){return ng.apply(this,arguments)}(s.Ac.syncEngine,E),s.gcScheduler&&(E&&!s.gcScheduler.started?s.gcScheduler.start():E||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(E&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():E||s.indexBackfillerScheduler.stop())});return function(E){return m.apply(this,arguments)}}())})()}gc(e){const t=uh();if(!af.C(t))throw new yn(qt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=ef(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new af(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class vh{initialize(e,t){var s=this;return(0,xe.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>Hm(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ld.bind(null,s.syncEngine),yield _f(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new I0}createDatastore(e){const t=ch(e.databaseInfo.databaseId),s=new O_(e.databaseInfo);return new w0(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,m=R=>Hm(this.syncEngine,R,0),E=Sm.C()?new Sm:new P_,new xm(t,s,u,m,E);var t,s,u,m,E}createSyncEngine(e,t){return function(s,u,m,E,R,X,se){const Se=new Qp(s,u,m,E,R,X);return se&&(Se.dc=!0),Se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,xe.Z)(function*(t){const s=Gn(t);$t("RemoteStore","RemoteStore shutting down."),s._u.add(5),yield qc(s),s.mu.shutdown(),s.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cg(i,e,t){if(!t)throw new yn(qt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function q_(i,e,t,s){if(!0===e&&!0===s)throw new yn(qt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function K_(i){if(!rr.isDocumentKey(i))throw new yn(qt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Z_(i){if(rr.isDocumentKey(i))throw new yn(qt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Df(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Nn()}function Ds(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new yn(qt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Df(i);throw new yn(qt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Y_(i,e){if(e<=0)throw new yn(qt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Xm=new Map;class Xc{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new yn(qt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new yn(qt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,q_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,t,s,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new yn(qt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yn(qt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xc(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yo;switch(t.type){case"gapi":return new q(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new yn(qt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xm.get(e);t&&($t("ComponentProvider","Removing Datastore"),Xm.delete(e),t.terminate())}(this),Promise.resolve()}}class No{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new No(this.firestore,e,this._key)}}class Ea{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ea(this.firestore,e,this._query)}}class Tl extends Ea{constructor(e,t,s){super(e,t,nu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new No(this.firestore,null,new rr(e))}withConverter(e){return new Tl(this.firestore,e,this._path)}}function Jm(i,e,...t){if(i=(0,Ht.m9)(i),cg("collection","path",e),i instanceof Eh){const s=$r.fromString(e,...t);return Z_(s),new Tl(i,null,s)}{if(!(i instanceof No||i instanceof Tl))throw new yn(qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child($r.fromString(e,...t));return Z_(s),new Tl(i.firestore,null,s)}}function Af(i,e,...t){if(i=(0,Ht.m9)(i),1===arguments.length&&(e=It.R()),cg("doc","path",e),i instanceof Eh){const s=$r.fromString(e,...t);return K_(s),new No(i,null,new rr(s))}{if(!(i instanceof No||i instanceof Tl))throw new yn(qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child($r.fromString(e,...t));return K_(s),new No(i.firestore,i instanceof Tl?i.converter:null,new rr(s))}}function ty(i,e){return i=(0,Ht.m9)(i),e=(0,Ht.m9)(e),(i instanceof No||i instanceof Tl)&&(e instanceof No||e instanceof Tl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function hg(i,e){return i=(0,Ht.m9)(i),e=(0,Ht.m9)(e),i instanceof Ea&&e instanceof Ea&&i.firestore===e.firestore&&bu(i._query,e._query)&&i.converter===e.converter}function ny(i,e=10240){let t=0;return{read:()=>(0,xe.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ry{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Os,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.ku)}`))},s=>this.metadata.reject(s))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,xe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,xe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const s=e.vc.decode(t),u=Number(s);isNaN(u)&&e.Dc(`length string (${s}) is not valid number`);const m=yield e.Cc(u);return new D0(JSON.parse(m),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,xe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Cc(e){var t=this;return(0,xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const s=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new yn(qt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,xe.Z)(function*(m,E){const R=Gn(m),X=p(R.yt)+"/documents",se={documents:E.map(On=>ku(R.yt,On))},Se=yield R._o("BatchGetDocuments",X,se,E.length),st=new Map;Se.forEach(On=>{const Qn=function Ee(i,e){return"found"in e?function(t,s){Jn(!!s.found);const u=Pl(t,s.found.name),m=Po(s.found.updateTime),E=s.found.createTime?Po(s.found.createTime):zn.min(),R=new Uo({mapValue:{fields:s.found.fields}});return Fs.newFoundDocument(u,m,E,R)}(i,e):"missing"in e?function(t,s){Jn(!!s.missing),Jn(!!s.readTime);const u=Pl(t,s.missing),m=Po(s.readTime);return Fs.newNoDocument(u,m)}(i,e):Nn()}(R.yt,On);st.set(Qn.key.toString(),Qn)});const Kt=[];return E.forEach(On=>{const Qn=st.get(On.toString());Jn(!!Qn),Kt.push(Qn)}),Kt}),function(m,E){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new zo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const m=rr.fromPath(u);e.mutations.push(new Wo(m,e.precondition(m)))}),yield(s=(0,xe.Z)(function*(u,m){const E=Gn(u),R=p(E.yt)+"/documents",X={writes:m.map(se=>pn(E.yt,se))};yield E.ao("Commit",R,X)}),function(u,m){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Nn();t=zn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new yn(qt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(zn.min())?io.exists(!1):io.updateTime(t):io.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(zn.min()))throw new yn(qt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return io.updateTime(t)}return io.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class x0{constructor(e,t,s,u,m){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=u,this.deferred=m,this.kc=s.maxAttempts,this.xo=new dh(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,xe.Z)(function*(){const t=new fg(e.datastore),s=e.Mc(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(m=>{e.Fc(m)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!da(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ua(t)}return!1}}class pg{constructor(e,t,s,u){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=u,this.user=Ve.UNAUTHENTICATED,this.clientId=It.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var E=(0,xe.Z)(function*(R){$t("FirestoreClient","Received user=",R.uid),yield m.authCredentialListener(R),m.user=R});return function(R){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(s,E=>($t("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new yn(qt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const u=Kc(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function oy(i,e){return ay.apply(this,arguments)}function ay(){return ay=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),$t("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,xe.Z)(function*(m){s.isEqual(m)||(yield ll(e.localStore,m),s=m)});return function(m){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),ay.apply(this,arguments)}function Vd(i,e){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Ch(i);$t("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(u=>jp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,m)=>jp(e.remoteStore,m)),i.onlineComponents=e}),Mf.apply(this,arguments)}function Ch(i){return bh.apply(this,arguments)}function bh(){return bh=(0,xe.Z)(function*(i){return i.offlineComponents||($t("FirestoreClient","Using default OfflineComponentProvider"),yield oy(i,new W_)),i.offlineComponents}),bh.apply(this,arguments)}function Rf(i){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,xe.Z)(function*(i){return i.onlineComponents||($t("FirestoreClient","Using default OnlineComponentProvider"),yield Vd(i,new vh)),i.onlineComponents}),Ud.apply(this,arguments)}function Th(i){return Ch(i).then(e=>e.persistence)}function Bd(i){return Ch(i).then(e=>e.localStore)}function ly(i){return Rf(i).then(e=>e.remoteStore)}function gg(i){return Rf(i).then(e=>e.syncEngine)}function Vu(i){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,xe.Z)(function*(i){const e=yield Rf(i),t=e.eventManager;return t.onListen=$_.bind(null,e.syncEngine),t.onUnlisten=j_.bind(null,e.syncEngine),t}),Pf.apply(this,arguments)}function yg(i,e,t={}){const s=new Os;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(u,m,E,R,X){const se=new xf({next:st=>{m.enqueueAndForget(()=>Wp(u,Se));const Kt=st.docs.has(E);!Kt&&st.fromCache?X.reject(new yn(qt.UNAVAILABLE,"Failed to get document because the client is offline.")):Kt&&st.fromCache&&R&&"server"===R.source?X.reject(new yn(qt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(st)},error:st=>X.reject(st)}),Se=new Um(nu(E.path),se,{includeMetadataChanges:!0,Nu:!0});return Lm(u,Se)}(yield Vu(i),i.asyncQueue,e,t,s)})),s.promise}function vg(i,e,t={}){const s=new Os;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(u,m,E,R,X){const se=new xf({next:st=>{m.enqueueAndForget(()=>Wp(u,Se)),st.fromCache&&"server"===R.source?X.reject(new yn(qt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(st)},error:st=>X.reject(st)}),Se=new Um(E,se,{includeMetadataChanges:!0,Nu:!0});return Lm(u,Se)}(yield Vu(i),i.asyncQueue,e,t,s)})),s.promise}class Eg{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new dh(this,"async_queue_retry"),this.Wc=()=>{const t=xd();t&&$t("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=xd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=xd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Os;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,xe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!aa(t))throw t;$t("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{throw this.Kc=s,this.Gc=!1,yr("INTERNAL UNHANDLED ERROR: ",function(m){let E=m.message||"";return m.stack&&(E=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),E}(s)),s}).then(s=>(this.Gc=!1,s))));return this.Bc=t,t}enqueueAfterDelay(e,t,s){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=Gp.createAndSchedule(this,e,t,s,m=>this.Yc(m));return this.Uc.push(u),u}zc(){this.Kc&&Nn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,xe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Nf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class X_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Os,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Do extends Eh{constructor(e,t,s,u){super(e,t,s,u),this.type="firestore",this._queue=new Eg,this._persistenceKey=(null==u?void 0:u.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cg(this),this._firestoreClient.terminate()}}function Ko(i){return i._firestoreClient||Cg(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Cg(i){var e;const t=i._freezeSettings(),s=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new dl(i._databaseId,m,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var m,R;i._firestoreClient=new pg(i._authCredentials,i._appCheckCredentials,i._queue,s)}function bg(i,e,t){const s=new Os;return i.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield oy(i,t),yield Vd(i,e),s.resolve()}catch(u){const m=u;if(!("FirebaseError"===(E=m).name?E.code===qt.FAILED_PRECONDITION||E.code===qt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&E instanceof DOMException)||22===E.code||20===E.code||11===E.code))throw m;Rr("Error enabling offline persistence. Falling back to persistence disabled: "+m),s.reject(m)}var E})).then(()=>s.promise)}function Cy(i){if(i._initialized||i._terminated)throw new yn(qt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eo(lo.fromBase64String(e))}catch(t){throw new yn(qt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Eo(lo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new yn(qt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ss(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jc{constructor(e){this._methodName=e}}class Ih{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yn(qt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yn(qt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const tv=/^__.*__$/;class by{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ml(e,this.data,this.fieldMask,t,this.fieldTransforms):new ou(e,this.data,t,this.fieldTransforms)}}class Tg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ml(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ed(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nn()}}class Of{constructor(e,t,s,u,m,E){this.settings=e,this.databaseId=t,this.yt=s,this.ignoreUndefinedProperties=u,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=E||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Of(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.ua(e),u}ca(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return jd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ed(this.sa)&&tv.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class nv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=s||ch(e)}da(e,t,s,u=!1){return new Of({sa:e,methodName:t,fa:s,path:Ss.emptyPath(),oa:!1,la:u},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function mc(i){const e=i._freezeSettings(),t=ch(i._databaseId);return new nv(i._databaseId,!!e.ignoreUndefinedProperties,t)}function kf(i,e,t,s,u,m={}){const E=i.da(m.merge||m.mergeFields?2:0,e,t,u);Dg("Data must be an object, but it was:",E,s);const R=Ig(s,E);let X,se;if(m.merge)X=new Ho(E.fieldMask),se=E.fieldTransforms;else if(m.mergeFields){const Se=[];for(const st of m.mergeFields){const Kt=Ag(e,st,t);if(!E.contains(Kt))throw new yn(qt.INVALID_ARGUMENT,`Field '${Kt}' is specified in your field mask but missing from your input data.`);Hd(Se,Kt)||Se.push(Kt)}X=new Ho(Se),se=E.fieldTransforms.filter(st=>X.covers(st.field))}else X=null,se=E.fieldTransforms;return new by(new Uo(R),X,se)}class $d extends Jc{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function rv(i,e,t){return new Of({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Sh extends Jc{_toFieldTransform(e){return new Aa(e.path,new Du)}isEqual(e){return e instanceof Sh}}class wg extends Jc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rv(this,e,!0),s=this._a.map(m=>Ma(m,t)),u=new yl(s);return new Aa(e.path,u)}isEqual(e){return this===e}}class Zl extends Jc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rv(this,e,!0),s=this._a.map(m=>Ma(m,t)),u=new _l(s);return new Aa(e.path,u)}isEqual(e){return this===e}}class iv extends Jc{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Go(e.yt,Ac(e.yt,this.wa));return new Aa(e.path,t)}isEqual(e){return this===e}}function Ff(i,e,t,s){const u=i.da(1,e,t);Dg("Data must be an object, but it was:",u,s);const m=[],E=Uo.empty();Ba(s,(X,se)=>{const Se=Lf(e,X,t);se=(0,Ht.m9)(se);const st=u.ca(Se);if(se instanceof $d)m.push(Se);else{const Kt=Ma(se,st);null!=Kt&&(m.push(Se),E.set(Se,Kt))}});const R=new Ho(m);return new Tg(E,R,u.fieldTransforms)}function kl(i,e,t,s,u,m){const E=i.da(1,e,t),R=[Ag(e,s,t)],X=[u];if(m.length%2!=0)throw new yn(qt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Kt=0;Kt<m.length;Kt+=2)R.push(Ag(e,m[Kt])),X.push(m[Kt+1]);const se=[],Se=Uo.empty();for(let Kt=R.length-1;Kt>=0;--Kt)if(!Hd(se,R[Kt])){const On=R[Kt];let Qn=X[Kt];Qn=(0,Ht.m9)(Qn);const Nr=E.ca(On);if(Qn instanceof $d)se.push(On);else{const pi=Ma(Qn,Nr);null!=pi&&(se.push(On),Se.set(On,pi))}}const st=new Ho(se);return new Tg(Se,st,E.fieldTransforms)}function Fl(i,e,t,s=!1){return Ma(t,i.da(s?4:3,e))}function Ma(i,e){if(Sg(i=(0,Ht.m9)(i)))return Dg("Unsupported field value:",e,i),Ig(i,e);if(i instanceof Jc)return function(t,s){if(!ed(s.sa))throw s.ha(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,s){const u=[];let m=0;for(const E of t){let R=Ma(E,s.aa(m));null==R&&(R={nullValue:"NULL_VALUE"}),u.push(R),m++}return{arrayValue:{values:u}}}(i,e)}return function(t,s){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ac(s.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Er.fromDate(t);return{timestampValue:ol(s.yt,u)}}if(t instanceof Er){const u=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ol(s.yt,u)}}if(t instanceof Ih)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Eo)return{bytesValue:Fc(s.yt,t._byteString)};if(t instanceof No){const u=s.databaseId,m=t.firestore._databaseId;if(!m.isEqual(u))throw s.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:al(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ha(`Unsupported field value: ${Df(t)}`)}(i,e)}function Ig(i,e){const t={};return _u(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ba(i,(s,u)=>{const m=Ma(u,e.ra(s));null!=m&&(t[s]=m)}),{mapValue:{fields:t}}}function Sg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Er||i instanceof Ih||i instanceof Eo||i instanceof No||i instanceof Jc)}function Dg(i,e,t){if(!Sg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Df(t);throw e.ha("an object"===s?i+" a custom object":i+" "+s)}var s}function Ag(i,e,t){if((e=(0,Ht.m9)(e))instanceof pu)return e._internalPath;if("string"==typeof e)return Lf(i,e);throw jd("Field path arguments must be of type string or ",i,!1,void 0,t)}const sv=new RegExp("[~\\*/\\[\\]]");function Lf(i,e,t){if(e.search(sv)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new pu(...e.split("."))._internalPath}catch(s){throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function jd(i,e,t,s,u){const m=s&&!s.isEmpty(),E=void 0!==u;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let X="";return(m||E)&&(X+=" (found",m&&(X+=` in field ${s}`),E&&(X+=` in document ${u}`),X+=")"),new yn(qt.INVALID_ARGUMENT,R+i+X)}function Hd(i,e){return i.some(t=>t.isEqual(e))}class Dh{constructor(e,t,s,u,m){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new No(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ty(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ty extends Dh{data(){return super.data()}}function Vf(i,e){return"string"==typeof e?Lf(i,e):e instanceof pu?e._internalPath:e._delegate._internalPath}function xg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new yn(qt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class yc extends Uf{}function _c(i,e,...t){let s=[];e instanceof Uf&&s.push(e),s=s.concat(t),function(u){const m=u.filter(R=>R instanceof vc).length,E=u.filter(R=>R instanceof Gd).length;if(m>1||m>0&&E>0)throw new yn(qt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class Gd extends yc{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Gd(e,t,s)}_apply(e){const t=this._parse(e);return Py(e._query,t),new Ea(e.firestore,e.converter,Cu(e._query,t))}_parse(e){const t=mc(e.firestore);return function(u,m,E,R,X,se,Se){let st;if(X.isKeyField()){if("array-contains"===se||"array-contains-any"===se)throw new yn(qt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${se}' queries on documentId().`);if("in"===se||"not-in"===se){Ry(Se,se);const Kt=[];for(const On of Se)Kt.push(My(R,u,On));st={arrayValue:{values:Kt}}}else st=My(R,u,Se)}else"in"!==se&&"not-in"!==se&&"array-contains-any"!==se||Ry(Se,se),st=Fl(E,"where",Se,"in"===se||"not-in"===se);return ii.create(X,se,st)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class vc extends Uf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:ss.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let m=s;const E=u.getFlattenedFilters();for(const R of E)Py(m,R),m=Cu(m,R)}(e._query,t),new Ea(e.firestore,e.converter,Cu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bf extends yc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bf(e,t)}_apply(e){const t=function(s,u,m){if(null!==s.startAt)throw new yn(qt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new yn(qt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new Ro(u,m);return function(R,X){if(null===Qu(R)){const se=iu(R);null!==se&&Ny(0,se,X.field)}}(s,E),E}(e._query,this._field,this._direction);return new Ea(e.firestore,e.converter,function(s,u){const m=s.explicitOrderBy.concat([u]);return new gl(s.path,s.collectionGroup,m,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Ah extends yc{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ah(e,t,s)}_apply(e){return new Ea(e.firestore,e.converter,su(e._query,this._limit,this._limitType))}}class xh extends yc{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new xh(e,t,s)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new Ea(e.firestore,e.converter,(u=t,new gl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class $f extends yc{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new $f(e,t,s)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new Ea(e.firestore,e.converter,(u=t,new gl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function xy(i,e,t,s){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof Dh)return function(u,m,E,R,X){if(!R)throw new yn(qt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const se=[];for(const Se of va(u))if(Se.field.isKeyField())se.push(Ia(m,R.key));else{const st=R.data.field(Se.field);if(Vl(st))throw new yn(qt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Se.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===st){const Kt=Se.field.canonicalString();throw new yn(qt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Kt}' (used as the orderBy) does not exist.`)}se.push(st)}return new zr(se,X)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const u=mc(i.firestore);return function(m,E,R,X,se,Se){const st=m.explicitOrderBy;if(se.length>st.length)throw new yn(qt.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Kt=[];for(let On=0;On<se.length;On++){const Qn=se[On];if(st[On].field.isKeyField()){if("string"!=typeof Qn)throw new yn(qt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof Qn}`);if(!ml(m)&&-1!==Qn.indexOf("/"))throw new yn(qt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${Qn}' contains a slash.`);const Nr=m.path.child($r.fromString(Qn));if(!rr.isDocumentKey(Nr))throw new yn(qt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${Nr}' is not because it contains an odd number of segments.`);const pi=new rr(Nr);Kt.push(Ia(E,pi))}else{const Nr=Fl(R,X,Qn);Kt.push(Nr)}}return new zr(Kt,Se)}(i._query,i.firestore._databaseId,u,e,t,s)}}function My(i,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new yn(qt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ml(e)&&-1!==t.indexOf("/"))throw new yn(qt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child($r.fromString(t));if(!rr.isDocumentKey(s))throw new yn(qt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ia(i,new rr(s))}if(t instanceof No)return Ia(i,t._key);throw new yn(qt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(t)}.`)}function Ry(i,e){if(!Array.isArray(i)||0===i.length)throw new yn(qt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new yn(qt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Py(i,e){if(e.isInequality()){const s=iu(i),u=e.field;if(null!==s&&!s.isEqual(u))throw new yn(qt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${u.toString()}'`);const m=Qu(i);null!==m&&Ny(0,u,m)}const t=function(s,u){for(const m of s)for(const E of m.getFlattenedFilters())if(u.indexOf(E.op)>=0)return E.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new yn(qt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ny(i,e,t){if(!t.isEqual(e))throw new yn(qt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Rg{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return to(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(el(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nn()}}convertObject(e,t){const s={};return Ba(e.fields,(u,m)=>{s[u]=this.convertValue(m,t)}),s}convertGeoPoint(e){return new Ih(to(e.latitude),to(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=tl(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const t=Ha(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=$r.fromString(e);Jn(lt(s));const u=new ta(s.get(1),s.get(3)),m=new rr(s.popFirst(5));return u.isEqual(t)||yr(`Document ${m} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function jf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class cv extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new No(this.firestore,null,t)}}class td{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uu extends Dh{constructor(e,t,s,u,m,E){super(e,t,s,u,E),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Mh extends Uu{data(e={}){return super.data(e)}}class Ec{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new td(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Mh(this._firestore,this._userDataWriter,s.key,s,new td(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yn(qt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let m=0;return s._snapshot.docChanges.map(E=>({type:"added",doc:new Mh(s._firestore,s._userDataWriter,E.doc.key,E.doc,new td(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:m++}))}{let m=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(E=>u||3!==E.type).map(E=>{const R=new Mh(s._firestore,s._userDataWriter,E.doc.key,E.doc,new td(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter);let X=-1,se=-1;return 0!==E.type&&(X=m.indexOf(E.doc.key),m=m.delete(E.doc.key)),1!==E.type&&(m=m.add(E.doc),se=m.indexOf(E.doc.key)),{type:dv(E.type),doc:R,oldIndex:X,newIndex:se}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nn()}}function Pg(i,e){return i instanceof Uu&&e instanceof Uu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ec&&e instanceof Ec&&i._firestore===e._firestore&&hg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Bu extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new No(this.firestore,null,t)}}function Ng(i,e,t){i=Ds(i,No);const s=Ds(i.firestore,Do),u=jf(i.converter,e,t);return Yl(s,[kf(mc(s),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,io.none())])}function Og(i,e,t,...s){i=Ds(i,No);const u=Ds(i.firestore,Do),m=mc(u);let E;return E="string"==typeof(e=(0,Ht.m9)(e))||e instanceof pu?kl(m,"updateDoc",i._key,e,t,s):Ff(m,"updateDoc",i._key,e),Yl(u,[E.toMutation(i._key,io.exists(!0))])}function $y(i,...e){var t,s,u;i=(0,Ht.m9)(i);let m={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||Nf(e[E])||(m=e[E],E++);const R={includeMetadataChanges:m.includeMetadataChanges};if(Nf(e[E])){const st=e[E];e[E]=null===(t=st.next)||void 0===t?void 0:t.bind(st),e[E+1]=null===(s=st.error)||void 0===s?void 0:s.bind(st),e[E+2]=null===(u=st.complete)||void 0===u?void 0:u.bind(st)}let X,se,Se;if(i instanceof No)se=Ds(i.firestore,Do),Se=nu(i._key.path),X={next:st=>{e[E]&&e[E](jy(se,i,st))},error:e[E+1],complete:e[E+2]};else{const st=Ds(i,Ea);se=Ds(st.firestore,Do),Se=st._query;const Kt=new Bu(se);X={next:On=>{e[E]&&e[E](new Ec(se,Kt,st,On))},error:e[E+1],complete:e[E+2]},xg(i._query)}return function(st,Kt,On,Qn){const Nr=new xf(Qn),pi=new Um(Kt,Nr,On);return st.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Lm(yield Vu(st),pi)})),()=>{Nr.bc(),st.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Wp(yield Vu(st),pi)}))}}(Ko(se),Se,R,X)}function Yl(i,e){return function(t,s){const u=new Os;return t.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Ef(i,e,t){return dc.apply(this,arguments)}(yield gg(t),s,u)})),u.promise}(Ko(i),e)}function jy(i,e,t){const s=t.docs.get(e._key),u=new Bu(i);return new Uu(i,u,e._key,s,new td(t.hasPendingWrites,t.fromCache),e.converter)}const Gy={maxAttempts:5};class Fg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mc(e)}set(e,t,s){this._verifyNotCommitted();const u=rd(e,this._firestore),m=jf(u.converter,t,s),E=kf(this._dataReader,"WriteBatch.set",u._key,m,null!==u.converter,s);return this._mutations.push(E.toMutation(u._key,io.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const m=rd(e,this._firestore);let E;return E="string"==typeof(t=(0,Ht.m9)(t))||t instanceof pu?kl(this._dataReader,"WriteBatch.update",m._key,t,s,u):Ff(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(E.toMutation(m._key,io.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rd(e,this._firestore);return this._mutations=this._mutations.concat(new zo(t._key,io.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new yn(qt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rd(i,e){if((i=(0,Ht.m9)(i)).firestore!==e)throw new yn(qt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Ri extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mc(e)}get(e){const t=rd(e,this._firestore),s=new cv(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Nn();const m=u[0];if(m.isFoundDocument())return new Dh(this._firestore,s,m.key,m,t.converter);if(m.isNoDocument())return new Dh(this._firestore,s,t._key,null,t.converter);throw Nn()})}set(e,t,s){const u=rd(e,this._firestore),m=jf(u.converter,t,s),E=kf(this._dataReader,"Transaction.set",u._key,m,null!==u.converter,s);return this._transaction.set(u._key,E),this}update(e,t,s,...u){const m=rd(e,this._firestore);let E;return E="string"==typeof(t=(0,Ht.m9)(t))||t instanceof pu?kl(this._dataReader,"Transaction.update",m._key,t,s,u):Ff(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,E),this}delete(e){const t=rd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rd(e,this._firestore),s=new Bu(this._firestore);return super.get(e).then(u=>new Uu(this._firestore,s,t._key,u._document,new td(!1,!1),t.converter))}}function Vg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new yn("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ug(){if("undefined"==typeof Uint8Array)throw new yn("unimplemented","Uint8Arrays are not available in this environment.")}function Bg(){if(!function $a(){return"undefined"!=typeof atob}())throw new yn("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Xe=Ge.SDK_VERSION,(0,Ge._registerComponent)(new St.wA("firestore",(t,{instanceIdentifier:s,options:u})=>{const m=t.getProvider("app").getImmediate(),E=new Do(new M(t.getProvider("auth-internal")),new _e(t.getProvider("app-check-internal")),function(R,X){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new yn(qt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(R.options.projectId,X)}(m,s),m);return u=Object.assign({useFetchStreams:e},u),E._setSettings(u),E},"PUBLIC").setMultipleInstances(!0)),(0,Ge.registerVersion)(Ie,"3.8.0",i),(0,Ge.registerVersion)(Ie,"3.8.0","esm2017")}();class zd{constructor(e){this._delegate=e}static fromBase64String(e){return Bg(),new zd(Eo.fromBase64String(e))}static fromUint8Array(e){return Ug(),new zd(Eo.fromUint8Array(e))}toBase64(){return Bg(),this._delegate.toBase64()}toUint8Array(){return Ug(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zf(i){return function vv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class Ev{enableIndexedDbPersistence(e,t){return function gy(i,e){Cy(i=Ds(i,Do));const t=Ko(i),s=i._freezeSettings(),u=new vh;return bg(t,u,new Qm(u,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function my(i){Cy(i=Ds(i,Do));const e=Ko(i),t=i._freezeSettings(),s=new vh;return bg(e,s,new ug(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yy(i){if(i._initialized&&!i._terminated)throw new yn(qt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Os;return i._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield(t=(0,xe.Z)(function*(s){if(!ba.C())return Promise.resolve();const u=s+"main";yield ba.delete(u)}),function(s){return t.apply(this,arguments)})(ef(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Wy{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof ta||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function dg(i,e,t,s={}){var u;const m=(i=Ds(i,Eh))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&Rr("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let E,R;if("string"==typeof s.mockUserToken)E=s.mockUserToken,R=Ve.MOCK_USER;else{E=(0,Ht.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const X=s.mockUserToken.sub||s.mockUserToken.user_id;if(!X)throw new yn(qt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Ve(X)}i._authCredentials=new O(new ao(E,R))}}(this._delegate,e,t,s)}enableNetwork(){return function vy(i){return function uy(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Th(i),t=yield ly(i);return e.setNetworkEnabled(!0),function(s){const u=Gn(s);return u._u.delete(0),Md(u)}(t)}))}(Ko(i=Ds(i,Do)))}(this._delegate)}disableNetwork(){return function M0(i){return function mg(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Th(i),t=yield ly(i);return e.setNetworkEnabled(!1),(s=(0,xe.Z)(function*(u){const m=Gn(u);m._u.add(0),yield qc(m),m.gu.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(Ko(i=Ds(i,Do)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,q_("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _y(i){return function(e){const t=new Os;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Cf(i,e){return ul.apply(this,arguments)}(yield gg(e),t)})),t.promise}(Ko(i=Ds(i,Do)))}(this._delegate)}onSnapshotsInSync(e){return function hv(i,e){return function Q_(i,e){const t=new xf(e);return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield Vu(i),u=t,Gn(s).Ru.add(u),void u.next();var s,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield Vu(i),u=t,void Gn(s).Ru.delete(u);var s,u}))}}(Ko(i=Ds(i,Do)),Nf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new yn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new id(this,Jm(this._delegate,e))}catch(t){throw Va(t,"collection()","Firestore.collection()")}}doc(e){try{return new wl(this,Af(this._delegate,e))}catch(t){throw Va(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ya(this,function ey(i,e){if(i=Ds(i,Eh),cg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new yn(qt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ea(i,null,(t=e,new gl($r.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Va(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fv(i,e,t){i=Ds(i,Do);const s=Object.assign(Object.assign({},Gy),t);return function(u){if(u.maxAttempts<1)throw new yn(qt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(u,m,E){const R=new Os;return u.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const X=yield function wh(i){return Rf(i).then(e=>e.datastore)}(u);new x0(u.asyncQueue,X,E,m,R).run()})),R.promise}(Ko(i),u=>e(new Ri(i,u)),s)}(this._delegate,t=>e(new qy(this,t)))}batch(){return Ko(this._delegate),new Ky(new Fg(this._delegate,e=>Yl(this._delegate,e)))}loadBundle(e){return function ev(i,e){const t=Ko(i=Ds(i,Do)),s=new X_;return function dy(i,e,t,s){const u=function(m,E){let R;return R="string"==typeof m?(new TextEncoder).encode(m):m,X=function(X,se){if(X instanceof Uint8Array)return ny(X,void 0);if(X instanceof ArrayBuffer)return ny(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new ry(X,E);var X}(t,ch(e));i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function z_(i,e,t){const s=Gn(i);var u;(u=(0,xe.Z)(function*(m,E,R){try{const X=yield E.getMetadata();if(yield function(Kt,On){const Qn=Gn(Kt),Nr=Po(On.createTime);return Qn.persistence.runTransaction("hasNewerBundle","readonly",pi=>Qn.Ns.getBundleMetadata(pi,On.id)).then(pi=>!!pi&&pi.createTime.compareTo(Nr)>=0)}(m.localStore,X))return yield E.close(),R._completeWith({taskState:"Success",documentsLoaded:(Kt=X).totalDocuments,bytesLoaded:Kt.totalBytes,totalDocuments:Kt.totalDocuments,totalBytes:Kt.totalBytes}),Promise.resolve(new Set);R._updateProgress(Kp(X));const se=new Bm(X,m.localStore,E.yt);let Se=yield E.mc();for(;Se;){const Kt=yield se.Fu(Se);Kt&&R._updateProgress(Kt),Se=yield E.mc()}const st=yield se.complete();return yield cl(m,st.Lu,void 0),yield function(Kt,On){const Qn=Gn(Kt);return Qn.persistence.runTransaction("Save bundle","readwrite",Nr=>Qn.Ns.saveBundleMetadata(Nr,On))}(m.localStore,X),R._completeWith(st.progress),Promise.resolve(st.Bu)}catch(X){return Rr("SyncEngine",`Loading bundle failed with ${X}`),R._failWith(X),Promise.resolve(new Set)}var Kt}),function(m,E,R){return u.apply(this,arguments)})(s,e,t).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield gg(i),u,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Ey(i,e){return function hy(i,e){return i.asyncQueue.enqueue((0,xe.Z)(function*(){return function(t,s){const u=Gn(t);return u.persistence.runTransaction("Get named query","readonly",m=>u.Ns.getNamedQuery(m,s))}(yield Bd(i),e)}))}(Ko(i=Ds(i,Do)),e).then(t=>t?new Ea(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ya(this,t):null)}}class Cc extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new zd(new Eo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wl.forKey(t,this.firestore,null)}}class qy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cc(e)}get(e){const t=bc(e);return this._delegate.get(t).then(s=>new $u(this._firestore,new Uu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=bc(e);return s?(Vg("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=bc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=bc(e);return this._delegate.delete(t),this}}class Ky{constructor(e){this._delegate=e}set(e,t,s){const u=bc(e);return s?(Vg("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=bc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=bc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gu{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Mh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ju(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=gu.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let m=u.get(t);return m||(m=new gu(e,new Cc(e),t),u.set(t,m)),m}}gu.INSTANCES=new WeakMap;class wl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cc(e)}static forPath(e,t,s){if(e.length%2!=0)throw new yn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wl(t,new No(t._delegate,s,new rr(e)))}static forKey(e,t,s){return new wl(t,new No(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new id(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new id(this.firestore,Jm(this._delegate,e))}catch(t){throw Va(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof No&&ty(this._delegate,e)}set(e,t){t=Vg("DocumentReference.set",t);try{return t?Ng(this._delegate,e,t):Ng(this._delegate,e)}catch(s){throw Va(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Og(this._delegate,e):Og(this._delegate,e,t,...s)}catch(u){throw Va(u,"updateDoc()","DocumentReference.update()")}}delete(){return function kg(i){return Yl(Ds(i.firestore,Do),[new zo(i._key,io.none())])}(this._delegate)}onSnapshot(...e){const t=$g(e),s=Zy(e,u=>new $u(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return $y(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Fy(i){i=Ds(i,No);const e=Ds(i.firestore,Do),t=Ko(e),s=new Bu(e);return function cy(i,e){const t=new Os;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(u,m,E){try{const R=yield function(X,se){const Se=Gn(X);return Se.persistence.runTransaction("read document","readonly",st=>Se.localDocuments.getDocument(st,se))}(u,m);R.isFoundDocument()?E.resolve(R):R.isNoDocument()?E.resolve(null):E.reject(new yn(qt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const X=Kc(R,`Failed to get document '${m} from cache`);E.reject(X)}}),function(u,m,E){return s.apply(this,arguments)})(yield Bd(i),e,t);var s})),t.promise}(t,i._key).then(u=>new Uu(e,s,i._key,u,new td(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ly(i){i=Ds(i,No);const e=Ds(i.firestore,Do);return yg(Ko(e),i._key,{source:"server"}).then(t=>jy(e,i,t))}(this._delegate):function ky(i){i=Ds(i,No);const e=Ds(i.firestore,Do);return yg(Ko(e),i._key).then(t=>jy(e,i,t))}(this._delegate),t.then(s=>new $u(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new wl(this.firestore,this._delegate.withConverter(e?gu.getInstance(this.firestore,e):null))}}function Va(i,e,t){return i.message=i.message.replace(e,t),i}function $g(i){for(const e of i)if("object"==typeof e&&!zf(e))return e;return{}}function Zy(i,e){var t,s;let u;return u=zf(i[0])?i[0]:zf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{u.next&&u.next(e(m))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class $u{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Pg(this._delegate,e._delegate)}}class ju extends $u{data(e){const t=this._delegate.data(e);return function eo(i,e){i||Nn()}(void 0!==t),t}}class Ya{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cc(e)}where(e,t,s){try{return new Ya(this.firestore,_c(this._delegate,function wy(i,e,t){const s=e,u=Vf("where",i);return Gd._create(u,s,t)}(e,t,s)))}catch(u){throw Va(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ya(this.firestore,_c(this._delegate,function Iy(i,e="asc"){const t=e,s=Vf("orderBy",i);return Bf._create(s,t)}(e,t)))}catch(s){throw Va(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ya(this.firestore,_c(this._delegate,function Sy(i){return Y_("limit",i),Ah._create("limit",i,"F")}(e)))}catch(t){throw Va(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ya(this.firestore,_c(this._delegate,function Dy(i){return Y_("limitToLast",i),Ah._create("limitToLast",i,"L")}(e)))}catch(t){throw Va(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ya(this.firestore,_c(this._delegate,function Ay(...i){return xh._create("startAt",i,!0)}(...e)))}catch(t){throw Va(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ya(this.firestore,_c(this._delegate,function av(...i){return xh._create("startAfter",i,!1)}(...e)))}catch(t){throw Va(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ya(this.firestore,_c(this._delegate,function lv(...i){return $f._create("endBefore",i,!1)}(...e)))}catch(t){throw Va(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ya(this.firestore,_c(this._delegate,function uv(...i){return $f._create("endAt",i,!0)}(...e)))}catch(t){throw Va(t,"endAt()","Query.endAt()")}}isEqual(e){return hg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Uy(i){i=Ds(i,Ea);const e=Ds(i.firestore,Do),t=Ko(e),s=new Bu(e);return function _g(i,e){const t=new Os;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(u,m,E){try{const R=yield nf(u,m,!0),X=new Zp(m,R.Hi),se=X.Wu(R.documents),Se=X.applyChanges(se,!1);E.resolve(Se.snapshot)}catch(R){const X=Kc(R,`Failed to execute query '${m} against cache`);E.reject(X)}}),function(u,m,E){return s.apply(this,arguments)})(yield Bd(i),e,t);var s})),t.promise}(t,i._query).then(u=>new Ec(e,s,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function By(i){i=Ds(i,Ea);const e=Ds(i.firestore,Do),t=Ko(e),s=new Bu(e);return vg(t,i._query,{source:"server"}).then(u=>new Ec(e,s,i,u))}(this._delegate):function Vy(i){i=Ds(i,Ea);const e=Ds(i.firestore,Do),t=Ko(e),s=new Bu(e);return xg(i._query),vg(t,i._query).then(u=>new Ec(e,s,i,u))}(this._delegate),t.then(s=>new jg(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=$g(e),s=Zy(e,u=>new jg(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return $y(this._delegate,t,s)}withConverter(e){return new Ya(this.firestore,this._delegate.withConverter(e?gu.getInstance(this.firestore,e):null))}}class bv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ju(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ya(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ju(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bv(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new ju(this._firestore,s))})}isEqual(e){return Pg(this._delegate,e._delegate)}}class id extends Ya{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wl(this.firestore,e):null}doc(e){try{return new wl(this.firestore,void 0===e?Af(this._delegate):Af(this._delegate,e))}catch(t){throw Va(t,"doc()","CollectionReference.doc()")}}add(e){return function nd(i,e){const t=Ds(i.firestore,Do),s=Af(i),u=jf(i.converter,e);return Yl(t,[kf(mc(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,io.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new wl(this.firestore,t))}isEqual(e){return ty(this._delegate,e._delegate)}withConverter(e){return new id(this.firestore,this._delegate.withConverter(e?gu.getInstance(this.firestore,e):null))}}function bc(i){return Ds(i,No)}class Wf{constructor(...e){this._delegate=new pu(...e)}static documentId(){return new Wf(Ss.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof pu&&this._delegate._internalPath.isEqual(e._internalPath)}}class sd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gv(){return new Sh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sd(e)}static delete(){const e=function pv(){return new $d("deleteField")}();return e._methodName="FieldValue.delete",new sd(e)}static arrayUnion(...e){const t=function Hf(...i){return new wg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new sd(t)}static arrayRemove(...e){const t=function mv(...i){return new Zl("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new sd(t)}static increment(e){const t=function Gf(i){return new iv("increment",i)}(e);return t._methodName="FieldValue.increment",new sd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Yy={Firestore:Wy,GeoPoint:Ih,Timestamp:Er,Blob:zd,Transaction:qy,WriteBatch:Ky,DocumentReference:wl,DocumentSnapshot:$u,Query:Ya,QueryDocumentSnapshot:ju,QuerySnapshot:jg,CollectionReference:id,FieldPath:Wf,FieldValue:sd,setLogLevel:function Cv(i){!function pr(i){vt.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function wv(i){(function Tv(i,e){i.INTERNAL.registerComponent(new St.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},Yy)))})(i,(e,t)=>new Wy(e,t,new Ev)),i.registerVersion("@firebase/firestore-compat","0.3.0")}(dn.Z);var od=j(1205),N0=j(6217),O0=j(9260);function Hg(i,e){return function k0(i,e=k.z){return new he.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Gg(i,e){return Hg(i,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function Kf(i,e){return Gg(i,e).pipe((0,Tn.O)(void 0),at(),(0,Et.U)(([t,s])=>{const u=s.payload.docChanges(),m=u.map(E=>({type:E.type,payload:E}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((E,R)=>{const X=u.find(Se=>Se.doc.ref.isEqual(E.ref)),se=null==t?void 0:t.payload.docs.find(Se=>Se.ref.isEqual(E.ref));X&&JSON.stringify(X.doc.metadata)===JSON.stringify(E.metadata)||!X&&se&&JSON.stringify(se.metadata)===JSON.stringify(E.metadata)||m.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:E}})}),m}))}function zg(i,e,t){return Kf(i,t).pipe((0,un.R)((s,u)=>function Rh(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function Iv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Wg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Wg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Wg(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(m=>m.payload),e),[]),function Pe(i,e=Ne.y){return i=null!=i?i:bt,(0,dt.e)((t,s)=>{let u,m=!0;t.subscribe((0,qe.x)(s,E=>{const R=e(E);(m||!i(u,R))&&(m=!1,u=R,s.next(E))}))})}(),(0,Et.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function Wg(i,e,t,...s){const u=i.slice();return u.splice(e,t,...s),u}function Qy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Xy{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Kf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,Tn.O)(void 0),at(),(0,In.h)(([s,u])=>u.length>0||!s),(0,Et.U)(([s,u])=>u),He.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,un.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qy(e);return zg(this.query,t,this.afs.schedulers.outsideAngular).pipe(He.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),He.iC)}get(e){return(0,ae.D)(this.query.get(e)).pipe(He.iC)}add(e){return this.ref.add(e)}doc(e){return new Jy(this.ref.doc(e),this.afs)}}class Jy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:m}=qg(s,t);return new Xy(u,m,this.afs)}snapshotChanges(){return function qf(i,e){return Hg(i,e).pipe((0,Tn.O)(void 0),at(),(0,Et.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(He.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ae.D)(this.ref.get(e)).pipe(He.iC)}}class e_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Kf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,In.h)(t=>t.length>0),He.iC):Kf(this.query,this.afs.schedulers.outsideAngular).pipe(He.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,un.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qy(e);return zg(this.query,t,this.afs.schedulers.outsideAngular).pipe(He.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),He.iC)}get(e){return(0,ae.D)(this.query.get(e)).pipe(He.iC)}}const t_=new g.OlP("angularfire2.enableFirestorePersistence"),n_=new g.OlP("angularfire2.firestore.persistenceSettings"),Wd=new g.OlP("angularfire2.firestore.settings"),Sv=new g.OlP("angularfire2.firestore.use-emulator");function qg(i,e=(t=>t)){return{query:e(i),ref:i}}let r_=(()=>{class i{constructor(t,s,u,m,E,R,X,se,Se,st,Kt,On,Qn,Nr,pi,Co,Fo){this.schedulers=X;const $s=(0,Ot.on)(t,R,s),Zo=Se;st&&(0,od.nw)($s,R,Kt,Qn,Nr,pi,On,Co),[this.firestore,this.persistenceEnabled$]=(0,Ot.cc)(`${$s.name}.firestore`,"AngularFirestore",$s.name,()=>{const js=R.runOutsideAngular(()=>$s.firestore());if(m&&js.settings(m),Zo&&js.useEmulator(...Zo),u&&!(0,tn.PM)(E)){const Ks=()=>{try{return(0,ae.D)(js.enablePersistence(se||void 0).then(()=>!0,()=>!1))}catch(ya){return"undefined"!=typeof console&&console.warn(ya),(0,je.of)(!1)}};return[js,R.runOutsideAngular(Ks)]}return[js,(0,je.of)(!1)]},[m,Zo,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:E}=qg(u,s),R=this.schedulers.ngZone.run(()=>m);return new Xy(R,E,this)}collectionGroup(t,s){const u=s||(E=>E),m=this.firestore.collectionGroup(t);return new e_(u(m),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new Jy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(g.LFG(Ot.Dh),g.LFG(Ot.xv,8),g.LFG(t_,8),g.LFG(Wd,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(He.HU),g.LFG(n_,8),g.LFG(Sv,8),g.LFG(od.zQ,8),g.LFG(od.Qv,8),g.LFG(od.L6,8),g.LFG(od._Q,8),g.LFG(od.rT,8),g.LFG(od.lh,8),g.LFG(od.f7,8),g.LFG(N0.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),i_=(()=>{class i{constructor(){O0.Z.registerVersion("angularfire",He.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:t_,useValue:!0},{provide:n_,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[r_]}),i})()},377:(Wn,Dt,j)=>{j.d(Dt,{Q1:()=>V,TE:()=>xn});var g=j(8306),k=j(9646),he=j(8996),ae=j(4986),je=j(4482),He=j(5403),qe=j(4004),at=j(3900),Ne=j(2122),Pe=j(5e3),bt=j(2011),Tn=j(3942),Et=j(5861),un=j(9681),In=j(2090),Ot=j(4859);const tn="firebasestorage.googleapis.com",Ln="storageBucket";class St extends In.ZR{constructor(K,Ce,Le=0){super(on(K),`Firebase Storage: ${Ce} (${on(K)})`),this.status_=Le,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(K){this.status_=K}_codeEquals(K){return on(K)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(K){this.customData.serverResponse=K,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function on(ee){return"storage/"+ee}function Ht(){return new St("unknown","An unknown error occurred, please check the error payload for server response.")}function Lt(){return new St("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function pt(){return new St("canceled","User canceled the upload/download.")}function or(){return new St("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Vt(ee){return new St("invalid-argument",ee)}function kt(){return new St("app-deleted","The Firebase app was deleted.")}function it(ee){return new St("invalid-root-operation","The operation '"+ee+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function At(ee,K){return new St("invalid-format","String does not match format '"+ee+"': "+K)}function ut(ee){throw new St("internal-error","Internal error: "+ee)}class Qt{constructor(K,Ce){this.bucket=K,this.path_=Ce}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const K=encodeURIComponent;return"/b/"+K(this.bucket)+"/o/"+K(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(K,Ce){let Le;try{Le=Qt.makeFromUrl(K,Ce)}catch(rt){return new Qt(K,"")}if(""===Le.path)return Le;throw function Sn(ee){return new St("invalid-default-bucket","Invalid default bucket '"+ee+"'.")}(K)}static makeFromUrl(K,Ce){let Le=null;const rt="([A-Za-z0-9.\\-_]+)",fr=new RegExp("^gs://"+rt+"(/(.*))?$","i");function ri(ge){ge.path_=decodeURIComponent(ge.path)}const hi=Ce.replace(/[.]/g,"\\."),J=[{regex:fr,indices:{bucket:1,path:3},postModify:function Zt(ge){"/"===ge.path.charAt(ge.path.length-1)&&(ge.path_=ge.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${hi}/v[A-Za-z0-9_]+/b/${rt}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ri},{regex:new RegExp(`^https?://${Ce===tn?"(?:storage.googleapis.com|storage.cloud.google.com)":Ce}/${rt}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ri}];for(let ge=0;ge<J.length;ge++){const be=J[ge],oe=be.regex.exec(K);if(oe){let ce=oe[be.indices.path];ce||(ce=""),Le=new Qt(oe[be.indices.bucket],ce),be.postModify(Le);break}}if(null==Le)throw function Rt(ee){return new St("invalid-url","Invalid URL '"+ee+"'.")}(K);return Le}}class Mt{constructor(K){this.promise_=Promise.reject(K)}getPromise(){return this.promise_}cancel(K=!1){}}function oi(ee){return"string"==typeof ee||ee instanceof String}function er(ee){return Wr()&&ee instanceof Blob}function Wr(){return"undefined"!=typeof Blob&&!(0,In.UG)()}function xr(ee,K,Ce,Le){if(Le<K)throw Vt(`Invalid value for '${ee}'. Expected ${K} or greater.`);if(Le>Ce)throw Vt(`Invalid value for '${ee}'. Expected ${Ce} or less.`)}function Mr(ee,K,Ce){let Le=K;return null==Ce&&(Le=`https://${K}`),`${Ce}://${Le}/v0${ee}`}function is(ee){const K=encodeURIComponent;let Ce="?";for(const Le in ee)ee.hasOwnProperty(Le)&&(Ce=Ce+(K(Le)+"=")+K(ee[Le])+"&");return Ce=Ce.slice(0,-1),Ce}var Yi=(()=>{return(ee=Yi||(Yi={}))[ee.NO_ERROR=0]="NO_ERROR",ee[ee.NETWORK_ERROR=1]="NETWORK_ERROR",ee[ee.ABORT=2]="ABORT",Yi;var ee})();function cn(ee,K){const Ce=ee>=500&&ee<600,rt=-1!==[408,429].indexOf(ee),Zt=-1!==K.indexOf(ee);return Ce||rt||Zt}class nt{constructor(K,Ce,Le,rt,Zt,An,fr,Kn,ri,vi,hi,$i=!0){this.url_=K,this.method_=Ce,this.headers_=Le,this.body_=rt,this.successCodes_=Zt,this.additionalRetryCodes_=An,this.callback_=fr,this.errorCallback_=Kn,this.timeout_=ri,this.progressCallback_=vi,this.connectionFactory_=hi,this.retry=$i,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((rs,l)=>{this.resolve_=rs,this.reject_=l,this.start_()})}start_(){const Ce=(Le,rt)=>{const Zt=this.resolve_,An=this.reject_,fr=rt.connection;if(rt.wasSuccessCode)try{const Kn=this.callback_(fr,fr.getResponse());!function ir(ee){return void 0!==ee}(Kn)?Zt():Zt(Kn)}catch(Kn){An(Kn)}else if(null!==fr){const Kn=Ht();Kn.serverResponse=fr.getErrorText(),An(this.errorCallback_?this.errorCallback_(fr,Kn):Kn)}else An(rt.canceled?this.appDelete_?kt():pt():Lt())};this.canceled_?Ce(0,new ct(!1,null,!0)):this.backoffId_=function Xt(ee,K,Ce){let Le=1,rt=null,Zt=null,An=!1,fr=0;function Kn(){return 2===fr}let ri=!1;function vi(...I){ri||(ri=!0,K.apply(null,I))}function hi(I){rt=setTimeout(()=>{rt=null,ee(rs,Kn())},I)}function $i(){Zt&&clearTimeout(Zt)}function rs(I,...P){if(ri)return void $i();if(I)return $i(),void vi.call(null,I,...P);if(Kn()||An)return $i(),void vi.call(null,I,...P);let J;Le<64&&(Le*=2),1===fr?(fr=2,J=0):J=1e3*(Le+Math.random()),hi(J)}let l=!1;function A(I){l||(l=!0,$i(),!ri&&(null!==rt?(I||(fr=2),clearTimeout(rt),hi(0)):I||(fr=1)))}return hi(0),Zt=setTimeout(()=>{An=!0,A(!0)},Ce),A}((Le,rt)=>{if(rt)return void Le(!1,new ct(!1,null,!0));const Zt=this.connectionFactory_();this.pendingConnection_=Zt;const An=fr=>{null!==this.progressCallback_&&this.progressCallback_(fr.loaded,fr.lengthComputable?fr.total:-1)};null!==this.progressCallback_&&Zt.addUploadProgressListener(An),Zt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Zt.removeUploadProgressListener(An),this.pendingConnection_=null;const fr=Zt.getErrorCode()===Yi.NO_ERROR,Kn=Zt.getStatus();if((!fr||cn(Kn,this.additionalRetryCodes_))&&this.retry){const vi=Zt.getErrorCode()===Yi.ABORT;return void Le(!1,new ct(!1,null,vi))}const ri=-1!==this.successCodes_.indexOf(Kn);Le(!0,new ct(ri,Zt))})},Ce,this.timeout_)}getPromise(){return this.promise_}cancel(K){this.canceled_=!0,this.appDelete_=K||!1,null!==this.backoffId_&&function Hn(ee){ee(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ct{constructor(K,Ce,Le){this.wasSuccessCode=K,this.connection=Ce,this.canceled=!!Le}}function Fr(...ee){const K=function Hr(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==K){const Ce=new K;for(let Le=0;Le<ee.length;Le++)Ce.append(ee[Le]);return Ce.getBlob()}if(Wr())return new Blob(ee);throw new St("unsupported-environment","This browser doesn't seem to support creating Blobs")}const gi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bn{constructor(K,Ce){this.data=K,this.contentType=Ce||null}}function mi(ee,K){switch(ee){case gi.RAW:return new Bn(Lr(K));case gi.BASE64:case gi.BASE64URL:return new Bn(kn(ee,K));case gi.DATA_URL:return new Bn(function Vn(ee){const K=new zt(ee);return K.base64?kn(gi.BASE64,K.rest):function ki(ee){let K;try{K=decodeURIComponent(ee)}catch(Ce){throw At(gi.DATA_URL,"Malformed data URL.")}return Lr(K)}(K.rest)}(K),function Pr(ee){return new zt(ee).contentType}(K))}throw Ht()}function Lr(ee){const K=[];for(let Ce=0;Ce<ee.length;Ce++){let Le=ee.charCodeAt(Ce);Le<=127?K.push(Le):Le<=2047?K.push(192|Le>>6,128|63&Le):55296==(64512&Le)?Ce<ee.length-1&&56320==(64512&ee.charCodeAt(Ce+1))?(Le=65536|(1023&Le)<<10|1023&ee.charCodeAt(++Ce),K.push(240|Le>>18,128|Le>>12&63,128|Le>>6&63,128|63&Le)):K.push(239,191,189):56320==(64512&Le)?K.push(239,191,189):K.push(224|Le>>12,128|Le>>6&63,128|63&Le)}return new Uint8Array(K)}function kn(ee,K){switch(ee){case gi.BASE64:{const rt=-1!==K.indexOf("-"),Zt=-1!==K.indexOf("_");if(rt||Zt)throw At(ee,"Invalid character '"+(rt?"-":"_")+"' found: is it base64url encoded?");break}case gi.BASE64URL:{const rt=-1!==K.indexOf("+"),Zt=-1!==K.indexOf("/");if(rt||Zt)throw At(ee,"Invalid character '"+(rt?"+":"/")+"' found: is it base64 encoded?");K=K.replace(/-/g,"+").replace(/_/g,"/");break}}let Ce;try{Ce=function Oi(ee){if("undefined"==typeof atob)throw function mr(ee){return new St("unsupported-environment",`${ee} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(ee)}(K)}catch(rt){throw rt.message.includes("polyfill")?rt:At(ee,"Invalid character found")}const Le=new Uint8Array(Ce.length);for(let rt=0;rt<Ce.length;rt++)Le[rt]=Ce.charCodeAt(rt);return Le}class zt{constructor(K){this.base64=!1,this.contentType=null;const Ce=K.match(/^data:([^,]+)?,/);if(null===Ce)throw At(gi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Le=Ce[1]||null;null!=Le&&(this.base64=function Or(ee,K){return ee.length>=K.length&&ee.substring(ee.length-K.length)===K}(Le,";base64"),this.contentType=this.base64?Le.substring(0,Le.length-7):Le),this.rest=K.substring(K.indexOf(",")+1)}}class Vr{constructor(K,Ce){let Le=0,rt="";er(K)?(this.data_=K,Le=K.size,rt=K.type):K instanceof ArrayBuffer?(Ce?this.data_=new Uint8Array(K):(this.data_=new Uint8Array(K.byteLength),this.data_.set(new Uint8Array(K))),Le=this.data_.length):K instanceof Uint8Array&&(Ce?this.data_=K:(this.data_=new Uint8Array(K.length),this.data_.set(K)),Le=K.length),this.size_=Le,this.type_=rt}size(){return this.size_}type(){return this.type_}slice(K,Ce){if(er(this.data_)){const rt=function ds(ee,K,Ce){return ee.webkitSlice?ee.webkitSlice(K,Ce):ee.mozSlice?ee.mozSlice(K,Ce):ee.slice?ee.slice(K,Ce):null}(this.data_,K,Ce);return null===rt?null:new Vr(rt)}{const Le=new Uint8Array(this.data_.buffer,K,Ce-K);return new Vr(Le,!0)}}static getBlob(...K){if(Wr()){const Ce=K.map(Le=>Le instanceof Vr?Le.data_:Le);return new Vr(Fr.apply(null,Ce))}{const Ce=K.map(An=>oi(An)?mi(gi.RAW,An).data:An.data_);let Le=0;Ce.forEach(An=>{Le+=An.byteLength});const rt=new Uint8Array(Le);let Zt=0;return Ce.forEach(An=>{for(let fr=0;fr<An.length;fr++)rt[Zt++]=An[fr]}),new Vr(rt,!0)}}uploadData(){return this.data_}}function Qe(ee){let K;try{K=JSON.parse(ee)}catch(Ce){return null}return function Yr(ee){return"object"==typeof ee&&!Array.isArray(ee)}(K)?K:null}function ln(ee){const K=ee.lastIndexOf("/",ee.length-2);return-1===K?ee:ee.slice(K+1)}function Ft(ee,K){return K}class ze{constructor(K,Ce,Le,rt){this.server=K,this.local=Ce||K,this.writable=!!Le,this.xform=rt||Ft}}let Me=null;function gt(){if(Me)return Me;const ee=[];ee.push(new ze("bucket")),ee.push(new ze("generation")),ee.push(new ze("metageneration")),ee.push(new ze("name","fullPath",!0));const Ce=new ze("name");Ce.xform=function K(Zt,An){return function Ae(ee){return!oi(ee)||ee.length<2?ee:ln(ee)}(An)},ee.push(Ce);const rt=new ze("size");return rt.xform=function Le(Zt,An){return void 0!==An?Number(An):An},ee.push(rt),ee.push(new ze("timeCreated")),ee.push(new ze("updated")),ee.push(new ze("md5Hash",null,!0)),ee.push(new ze("cacheControl",null,!0)),ee.push(new ze("contentDisposition",null,!0)),ee.push(new ze("contentEncoding",null,!0)),ee.push(new ze("contentLanguage",null,!0)),ee.push(new ze("contentType",null,!0)),ee.push(new ze("metadata","customMetadata",!0)),Me=ee,Me}function Yn(ee,K,Ce){const Le=Qe(K);return null===Le?null:function vr(ee,K,Ce){const Le={type:"file"},rt=Ce.length;for(let Zt=0;Zt<rt;Zt++){const An=Ce[Zt];Le[An.local]=An.xform(Le,K[An.server])}return function sn(ee,K){Object.defineProperty(ee,"ref",{get:function Ce(){const Zt=new Qt(ee.bucket,ee.fullPath);return K._makeStorageReference(Zt)}})}(Le,ee),Le}(ee,Le,Ce)}function Qi(ee,K){const Ce={},Le=K.length;for(let rt=0;rt<Le;rt++){const Zt=K[rt];Zt.writable&&(Ce[Zt.server]=ee[Zt.local])}return JSON.stringify(Ce)}const os="prefixes";class as{constructor(K,Ce,Le,rt){this.url=K,this.method=Ce,this.handler=Le,this.timeout=rt,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function wi(ee){if(!ee)throw Ht()}function Cn(ee,K){return function Ce(Le,rt){const Zt=Yn(ee,rt,K);return wi(null!==Zt),Zt}}function Pi(ee){return function K(Ce,Le){let rt;return rt=401===Ce.getStatus()?Ce.getErrorText().includes("Firebase App Check token is invalid")?function wt(){return new St("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Re(){return new St("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Ce.getStatus()?function Bt(ee){return new St("quota-exceeded","Quota for bucket '"+ee+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(ee.bucket):403===Ce.getStatus()?function Je(ee){return new St("unauthorized","User does not have permission to access '"+ee+"'.")}(ee.path):Le,rt.status=Ce.getStatus(),rt.serverResponse=Le.serverResponse,rt}}function hs(ee){const K=Pi(ee);return function Ce(Le,rt){let Zt=K(Le,rt);return 404===Le.getStatus()&&(Zt=function Oe(ee){return new St("object-not-found","Object '"+ee+"' does not exist.")}(ee.path)),Zt.serverResponse=rt.serverResponse,Zt}}function Xi(ee,K,Ce){const rt=Mr(K.fullServerUrl(),ee.host,ee._protocol),An=ee.maxOperationRetryTime,fr=new as(rt,"GET",Cn(ee,Ce),An);return fr.errorHandler=hs(K),fr}function Ji(ee,K,Ce,Le,rt){const Zt={};Zt.prefix=K.isRoot?"":K.path+"/",Ce&&Ce.length>0&&(Zt.delimiter=Ce),Le&&(Zt.pageToken=Le),rt&&(Zt.maxResults=rt);const fr=Mr(K.bucketOnlyServerUrl(),ee.host,ee._protocol),ri=ee.maxOperationRetryTime,vi=new as(fr,"GET",function br(ee,K){return function Ce(Le,rt){const Zt=function ci(ee,K,Ce){const Le=Qe(Ce);return null===Le?null:function Fi(ee,K,Ce){const Le={prefixes:[],items:[],nextPageToken:Ce.nextPageToken};if(Ce[os])for(const rt of Ce[os]){const Zt=rt.replace(/\/$/,""),An=ee._makeStorageReference(new Qt(K,Zt));Le.prefixes.push(An)}if(Ce.items)for(const rt of Ce.items){const Zt=ee._makeStorageReference(new Qt(K,rt.name));Le.items.push(Zt)}return Le}(ee,K,Le)}(ee,K,rt);return wi(null!==Zt),Zt}}(ee,K.bucket),ri);return vi.urlParams=Zt,vi.errorHandler=Pi(K),vi}function ls(ee,K,Ce){const Le=Object.assign({},Ce);return Le.fullPath=ee.path,Le.size=K.size(),Le.contentType||(Le.contentType=function es(ee,K){return ee&&ee.contentType||K&&K.type()||"application/octet-stream"}(null,K)),Le}class Qr{constructor(K,Ce,Le,rt){this.current=K,this.total=Ce,this.finalized=!!Le,this.metadata=rt||null}}function wr(ee,K){let Ce=null;try{Ce=ee.getResponseHeader("X-Goog-Upload-Status")}catch(rt){wi(!1)}return wi(!!Ce&&-1!==(K||["active"]).indexOf(Ce)),Ce}const Vs={STATE_CHANGED:"state_changed"},Gi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fs(ee){switch(ee){case"running":case"pausing":case"canceling":return Gi.RUNNING;case"paused":return Gi.PAUSED;case"success":return Gi.SUCCESS;case"canceled":return Gi.CANCELED;default:return Gi.ERROR}}class ui{constructor(K,Ce,Le){if(function ur(ee){return"function"==typeof ee}(K)||null!=Ce||null!=Le)this.next=K,this.error=null!=Ce?Ce:void 0,this.complete=null!=Le?Le:void 0;else{const Zt=K;this.next=Zt.next,this.error=Zt.error,this.complete=Zt.complete}}}function Ir(ee){return(...K)=>{Promise.resolve().then(()=>ee(...K))}}class bs extends class ms{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yi.NO_ERROR,this.sendPromise_=new Promise(K=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yi.ABORT,K()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yi.NETWORK_ERROR,K()}),this.xhr_.addEventListener("load",()=>{K()})})}send(K,Ce,Le,rt){if(this.sent_)throw ut("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Ce,K,!0),void 0!==rt)for(const Zt in rt)rt.hasOwnProperty(Zt)&&this.xhr_.setRequestHeader(Zt,rt[Zt].toString());return void 0!==Le?this.xhr_.send(Le):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ut("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ut("cannot .getStatus() before sending");try{return this.xhr_.status}catch(K){return-1}}getResponse(){if(!this.sent_)throw ut("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ut("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(K){return this.xhr_.getResponseHeader(K)}addUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",K)}removeUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",K)}}{initXhr(){this.xhr_.responseType="text"}}function Bi(){return new bs}class Ct{constructor(K,Ce,Le=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=K,this._blob=Ce,this._metadata=Le,this._mappings=gt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=rt=>{if(this._request=void 0,this._chunkMultiplier=1,rt._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const Zt=this.isExponentialBackoffExpired();if(cn(rt.status,[])){if(!Zt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();rt=Lt()}this._error=rt,this._transition("error")}},this._metadataErrorHandler=rt=>{this._request=void 0,rt._codeEquals("canceled")?this.completeTransitions_():(this._error=rt,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((rt,Zt)=>{this._resolve=rt,this._reject=Zt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const K=this._transferred;return Ce=>this._updateProgress(K+Ce)}_shouldDoResumable(K){return K.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(K){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Ce,Le])=>{switch(this._state){case"running":K(Ce,Le);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((K,Ce)=>{const Le=function Sr(ee,K,Ce,Le,rt){const Zt=K.bucketOnlyServerUrl(),An=ls(K,Le,rt),fr={name:An.fullPath},Kn=Mr(Zt,ee.host,ee._protocol),vi={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Le.size()}`,"X-Goog-Upload-Header-Content-Type":An.contentType,"Content-Type":"application/json; charset=utf-8"},hi=Qi(An,Ce),l=new as(Kn,"POST",function rs(A){let I;wr(A);try{I=A.getResponseHeader("X-Goog-Upload-URL")}catch(P){wi(!1)}return wi(oi(I)),I},ee.maxUploadRetryTime);return l.urlParams=fr,l.headers=vi,l.body=hi,l.errorHandler=Pi(K),l}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),rt=this._ref.storage._makeRequest(Le,Bi,K,Ce);this._request=rt,rt.getPromise().then(Zt=>{this._request=void 0,this._uploadUrl=Zt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const K=this._uploadUrl;this._resolveToken((Ce,Le)=>{const rt=function Ki(ee,K,Ce,Le){const Kn=new as(Ce,"POST",function Zt(ri){const vi=wr(ri,["active","final"]);let hi=null;try{hi=ri.getResponseHeader("X-Goog-Upload-Size-Received")}catch(rs){wi(!1)}hi||wi(!1);const $i=Number(hi);return wi(!isNaN($i)),new Qr($i,Le.size(),"final"===vi)},ee.maxUploadRetryTime);return Kn.headers={"X-Goog-Upload-Command":"query"},Kn.errorHandler=Pi(K),Kn}(this._ref.storage,this._ref._location,K,this._blob),Zt=this._ref.storage._makeRequest(rt,Bi,Ce,Le);this._request=Zt,Zt.getPromise().then(An=>{this._request=void 0,this._updateProgress(An.current),this._needToFetchStatus=!1,An.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const K=262144*this._chunkMultiplier,Ce=new Qr(this._transferred,this._blob.size()),Le=this._uploadUrl;this._resolveToken((rt,Zt)=>{let An;try{An=function xi(ee,K,Ce,Le,rt,Zt,An,fr){const Kn=new Qr(0,0);if(An?(Kn.current=An.current,Kn.total=An.total):(Kn.current=0,Kn.total=Le.size()),Le.size()!==Kn.total)throw function mn(){return new St("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const ri=Kn.total-Kn.current;let vi=ri;rt>0&&(vi=Math.min(vi,rt));const hi=Kn.current;let rs="";rs=0===vi?"finalize":ri===vi?"upload, finalize":"upload";const l={"X-Goog-Upload-Command":rs,"X-Goog-Upload-Offset":`${Kn.current}`},A=Le.slice(hi,hi+vi);if(null===A)throw or();const J=new as(Ce,"POST",function I(ge,be){const oe=wr(ge,["active","final"]),me=Kn.current+vi,ce=Le.size();let le;return le="final"===oe?Cn(K,Zt)(ge,be):null,new Qr(me,ce,"final"===oe,le)},K.maxUploadRetryTime);return J.headers=l,J.body=A.uploadData(),J.progressCallback=fr||null,J.errorHandler=Pi(ee),J}(this._ref._location,this._ref.storage,Le,this._blob,K,this._mappings,Ce,this._makeProgressCallback())}catch(Kn){return this._error=Kn,void this._transition("error")}const fr=this._ref.storage._makeRequest(An,Bi,rt,Zt,!1);this._request=fr,fr.getPromise().then(Kn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Kn.current),Kn.finalized?(this._metadata=Kn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((K,Ce)=>{const Le=Xi(this._ref.storage,this._ref._location,this._mappings),rt=this._ref.storage._makeRequest(Le,Bi,K,Ce);this._request=rt,rt.getPromise().then(Zt=>{this._request=void 0,this._metadata=Zt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((K,Ce)=>{const Le=function Cs(ee,K,Ce,Le,rt){const Zt=K.bucketOnlyServerUrl(),An={"X-Goog-Upload-Protocol":"multipart"},Kn=function fr(){let J="";for(let ge=0;ge<2;ge++)J+=Math.random().toString().slice(2);return J}();An["Content-Type"]="multipart/related; boundary="+Kn;const ri=ls(K,Le,rt),vi=Qi(ri,Ce),rs=Vr.getBlob("--"+Kn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+vi+"\r\n--"+Kn+"\r\nContent-Type: "+ri.contentType+"\r\n\r\n",Le,"\r\n--"+Kn+"--");if(null===rs)throw or();const l={name:ri.fullPath},A=Mr(Zt,ee.host,ee._protocol),P=ee.maxUploadRetryTime,z=new as(A,"POST",Cn(ee,Ce),P);return z.urlParams=l,z.headers=An,z.body=rs.uploadData(),z.errorHandler=Pi(K),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),rt=this._ref.storage._makeRequest(Le,Bi,K,Ce);this._request=rt,rt.getPromise().then(Zt=>{this._request=void 0,this._metadata=Zt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(K){const Ce=this._transferred;this._transferred=K,this._transferred!==Ce&&this._notifyObservers()}_transition(K){if(this._state!==K)switch(K){case"canceling":case"pausing":this._state=K,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Ce="paused"===this._state;this._state=K,Ce&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=K,this._notifyObservers();break;case"canceled":this._error=pt(),this._state=K,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const K=fs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:K,metadata:this._metadata,task:this,ref:this._ref}}on(K,Ce,Le,rt){const Zt=new ui(Ce||void 0,Le||void 0,rt||void 0);return this._addObserver(Zt),()=>{this._removeObserver(Zt)}}then(K,Ce){return this._promise.then(K,Ce)}catch(K){return this.then(null,K)}_addObserver(K){this._observers.push(K),this._notifyObserver(K)}_removeObserver(K){const Ce=this._observers.indexOf(K);-1!==Ce&&this._observers.splice(Ce,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Ce=>{this._notifyObserver(Ce)})}_finishPromise(){if(void 0!==this._resolve){let K=!0;switch(fs(this._state)){case Gi.SUCCESS:Ir(this._resolve.bind(null,this.snapshot))();break;case Gi.CANCELED:case Gi.ERROR:Ir(this._reject.bind(null,this._error))();break;default:K=!1}K&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(K){switch(fs(this._state)){case Gi.RUNNING:case Gi.PAUSED:K.next&&Ir(K.next.bind(K,this.snapshot))();break;case Gi.SUCCESS:K.complete&&Ir(K.complete.bind(K))();break;default:K.error&&Ir(K.error.bind(K,this._error))()}}resume(){const K="paused"===this._state||"pausing"===this._state;return K&&this._transition("running"),K}pause(){const K="running"===this._state;return K&&this._transition("pausing"),K}cancel(){const K="running"===this._state||"pausing"===this._state;return K&&this._transition("canceling"),K}}class ht{constructor(K,Ce){this._service=K,this._location=Ce instanceof Qt?Ce:Qt.makeFromUrl(Ce,K.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(K,Ce){return new ht(K,Ce)}get root(){const K=new Qt(this._location.bucket,"");return this._newRef(this._service,K)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ln(this._location.path)}get storage(){return this._service}get parent(){const K=function Ue(ee){if(0===ee.length)return null;const K=ee.lastIndexOf("/");return-1===K?"":ee.slice(0,K)}(this._location.path);if(null===K)return null;const Ce=new Qt(this._location.bucket,K);return new ht(this._service,Ce)}_throwIfRoot(K){if(""===this._location.path)throw it(K)}}function Mi(ee,K,Ce){return ys.apply(this,arguments)}function ys(){return(ys=(0,Et.Z)(function*(ee,K,Ce){const rt=yield ti(ee,{pageToken:Ce});K.prefixes.push(...rt.prefixes),K.items.push(...rt.items),null!=rt.nextPageToken&&(yield Mi(ee,K,rt.nextPageToken))})).apply(this,arguments)}function ti(ee,K){null!=K&&"number"==typeof K.maxResults&&xr("options.maxResults",1,1e3,K.maxResults);const Ce=K||{},Le=Ji(ee.storage,ee._location,"/",Ce.pageToken,Ce.maxResults);return ee.storage.makeRequestWithTokens(Le,Bi)}function Yo(ee){ee._throwIfRoot("getDownloadURL");const K=function Ii(ee,K,Ce){const rt=Mr(K.fullServerUrl(),ee.host,ee._protocol),An=ee.maxOperationRetryTime,fr=new as(rt,"GET",function li(ee,K){return function Ce(Le,rt){const Zt=Yn(ee,rt,K);return wi(null!==Zt),function ai(ee,K,Ce,Le){const rt=Qe(K);if(null===rt||!oi(rt.downloadTokens))return null;const Zt=rt.downloadTokens;if(0===Zt.length)return null;const An=encodeURIComponent;return Zt.split(",").map(ri=>{const hi=ee.fullPath;return Mr("/b/"+An(ee.bucket)+"/o/"+An(hi),Ce,Le)+is({alt:"media",token:ri})})[0]}(Zt,rt,ee.host,ee._protocol)}}(ee,Ce),An);return fr.errorHandler=hs(K),fr}(ee.storage,ee._location,gt());return ee.storage.makeRequestWithTokens(K,Bi).then(Ce=>{if(null===Ce)throw function Tr(){return new St("no-download-url","The given file does not have any download URLs.")}();return Ce})}function mo(ee,K){const Ce=function ft(ee,K){const Ce=K.split("/").filter(Le=>Le.length>0).join("/");return 0===ee.length?Ce:ee+"/"+Ce}(ee._location.path,K),Le=new Qt(ee._location.bucket,Ce);return new ht(ee.storage,Le)}function bi(ee,K){if(ee instanceof zs){const Ce=ee;if(null==Ce._bucket)throw function sr(){return new St("no-default-bucket","No default bucket found. Did you set the '"+Ln+"' property when initializing the app?")}();const Le=new ht(Ce,Ce._bucket);return null!=K?bi(Le,K):Le}return void 0!==K?mo(ee,K):ee}function ho(ee,K){if(K&&function ps(ee){return/^[A-Za-z]+:\/\//.test(ee)}(K)){if(ee instanceof zs)return function Lo(ee,K){return new ht(ee,K)}(ee,K);throw Vt("To use ref(service, url), the first argument must be a Storage instance.")}return bi(ee,K)}function Us(ee,K){const Ce=null==K?void 0:K[Ln];return null==Ce?null:Qt.makeFromBucketSpec(Ce,ee)}class zs{constructor(K,Ce,Le,rt,Zt){this.app=K,this._authProvider=Ce,this._appCheckProvider=Le,this._url=rt,this._firebaseVersion=Zt,this._bucket=null,this._host=tn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=rt?Qt.makeFromBucketSpec(rt,this._host):Us(this._host,this.app.options)}get host(){return this._host}set host(K){this._host=K,this._bucket=null!=this._url?Qt.makeFromBucketSpec(this._url,K):Us(K,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(K){xr("time",0,Number.POSITIVE_INFINITY,K),this._maxUploadRetryTime=K}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(K){xr("time",0,Number.POSITIVE_INFINITY,K),this._maxOperationRetryTime=K}_getAuthToken(){var K=this;return(0,Et.Z)(function*(){if(K._overrideAuthToken)return K._overrideAuthToken;const Ce=K._authProvider.getImmediate({optional:!0});if(Ce){const Le=yield Ce.getToken();if(null!==Le)return Le.accessToken}return null})()}_getAppCheckToken(){var K=this;return(0,Et.Z)(function*(){const Ce=K._appCheckProvider.getImmediate({optional:!0});return Ce?(yield Ce.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(K=>K.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(K){return new ht(this,K)}_makeRequest(K,Ce,Le,rt,Zt=!0){if(this._deleted)return new Mt(kt());{const An=function Jr(ee,K,Ce,Le,rt,Zt,An=!0){const fr=is(ee.urlParams),Kn=ee.url+fr,ri=Object.assign({},ee.headers);return function En(ee,K){K&&(ee["X-Firebase-GMPID"]=K)}(ri,K),function Gt(ee,K){null!==K&&K.length>0&&(ee.Authorization="Firebase "+K)}(ri,Ce),function nn(ee,K){ee["X-Firebase-Storage-Version"]="webjs/"+(null!=K?K:"AppManager")}(ri,Zt),function qn(ee,K){null!==K&&(ee["X-Firebase-AppCheck"]=K)}(ri,Le),new nt(Kn,ee.method,ri,ee.body,ee.successCodes,ee.additionalRetryCodes,ee.handler,ee.errorHandler,ee.timeout,ee.progressCallback,rt,An)}(K,this._appId,Le,rt,Ce,this._firebaseVersion,Zt);return this._requests.add(An),An.getPromise().then(()=>this._requests.delete(An),()=>this._requests.delete(An)),An}}makeRequestWithTokens(K,Ce){var Le=this;return(0,Et.Z)(function*(){const[rt,Zt]=yield Promise.all([Le._getAuthToken(),Le._getAppCheckToken()]);return Le._makeRequest(K,Ce,rt,Zt).getPromise()})()}}const Vo="@firebase/storage";function Rs(ee,K){return ho(ee=(0,In.m9)(ee),K)}function W(ee,{instanceIdentifier:K}){const Ce=ee.getProvider("app").getImmediate(),Le=ee.getProvider("auth-internal"),rt=ee.getProvider("app-check-internal");return new zs(Ce,Le,rt,K,un.SDK_VERSION)}!function ve(){(0,un._registerComponent)(new Ot.wA("storage",W,"PUBLIC").setMultipleInstances(!0)),(0,un.registerVersion)(Vo,"0.10.0",""),(0,un.registerVersion)(Vo,"0.10.0","esm2017")}();class Ke{constructor(K,Ce,Le){this._delegate=K,this.task=Ce,this.ref=Le}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class rn{constructor(K,Ce){this._delegate=K,this._ref=Ce,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ke(this._delegate.snapshot,this,this._ref)}then(K,Ce){return this._delegate.then(Le=>{if(K)return K(new Ke(Le,this,this._ref))},Ce)}on(K,Ce,Le,rt){let Zt;return Ce&&(Zt="function"==typeof Ce?An=>Ce(new Ke(An,this,this._ref)):{next:Ce.next?An=>Ce.next(new Ke(An,this,this._ref)):void 0,complete:Ce.complete||void 0,error:Ce.error||void 0}),this._delegate.on(K,Zt,Le||void 0,rt||void 0)}}class wn{constructor(K,Ce){this._delegate=K,this._service=Ce}get prefixes(){return this._delegate.prefixes.map(K=>new hr(K,this._service))}get items(){return this._delegate.items.map(K=>new hr(K,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class hr{constructor(K,Ce){this._delegate=K,this.storage=Ce}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(K){const Ce=function qs(ee,K){return mo(ee,K)}(this._delegate,K);return new hr(Ce,this.storage)}get root(){return new hr(this._delegate.root,this.storage)}get parent(){const K=this._delegate.parent;return null==K?null:new hr(K,this.storage)}put(K,Ce){return this._throwIfRoot("put"),new rn(function us(ee,K,Ce){return function Dr(ee,K,Ce){return ee._throwIfRoot("uploadBytesResumable"),new Ct(ee,new Vr(K),Ce)}(ee=(0,In.m9)(ee),K,Ce)}(this._delegate,K,Ce),this)}putString(K,Ce=gi.RAW,Le){this._throwIfRoot("putString");const rt=mi(Ce,K),Zt=Object.assign({},Le);return null==Zt.contentType&&null!=rt.contentType&&(Zt.contentType=rt.contentType),new rn(new Ct(this._delegate,new Vr(rt.data,!0),Zt),this)}listAll(){return function Xs(ee){return function zi(ee){const K={prefixes:[],items:[]};return Mi(ee,K).then(()=>K)}(ee=(0,In.m9)(ee))}(this._delegate).then(K=>new wn(K,this.storage))}list(K){return function Li(ee,K){return ti(ee=(0,In.m9)(ee),K)}(this._delegate,K||void 0).then(Ce=>new wn(Ce,this.storage))}getMetadata(){return function so(ee){return function _s(ee){ee._throwIfRoot("getMetadata");const K=Xi(ee.storage,ee._location,gt());return ee.storage.makeRequestWithTokens(K,Bi)}(ee=(0,In.m9)(ee))}(this._delegate)}updateMetadata(K){return function Ms(ee,K){return function As(ee,K){ee._throwIfRoot("updateMetadata");const Ce=function Hi(ee,K,Ce,Le){const Zt=Mr(K.fullServerUrl(),ee.host,ee._protocol),fr=Qi(Ce,Le),ri=ee.maxOperationRetryTime,vi=new as(Zt,"PATCH",Cn(ee,Le),ri);return vi.headers={"Content-Type":"application/json; charset=utf-8"},vi.body=fr,vi.errorHandler=hs(K),vi}(ee.storage,ee._location,K,gt());return ee.storage.makeRequestWithTokens(Ce,Bi)}(ee=(0,In.m9)(ee),K)}(this._delegate,K)}getDownloadURL(){return function fo(ee){return Yo(ee=(0,In.m9)(ee))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Zs(ee){return function Ts(ee){ee._throwIfRoot("deleteObject");const K=function qr(ee,K){const Le=Mr(K.fullServerUrl(),ee.host,ee._protocol),fr=new as(Le,"DELETE",function An(Kn,ri){},ee.maxOperationRetryTime);return fr.successCodes=[200,204],fr.errorHandler=hs(K),fr}(ee.storage,ee._location);return ee.storage.makeRequestWithTokens(K,Bi)}(ee=(0,In.m9)(ee))}(this._delegate)}_throwIfRoot(K){if(""===this._delegate._location.path)throw it(K)}}class Gr{constructor(K,Ce){this.app=K,this._delegate=Ce}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(K){if(Xr(K))throw Vt("ref() expected a child path but got a URL, use refFromURL instead.");return new hr(Rs(this._delegate,K),this)}refFromURL(K){if(!Xr(K))throw Vt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qt.makeFromUrl(K,this._delegate.host)}catch(Ce){throw Vt("refFromUrl() expected a valid full URL but got an invalid one.")}return new hr(Rs(this._delegate,K),this)}setMaxUploadRetryTime(K){this._delegate.maxUploadRetryTime=K}setMaxOperationRetryTime(K){this._delegate.maxOperationRetryTime=K}useEmulator(K,Ce,Le={}){!function Ti(ee,K,Ce,Le={}){!function Gs(ee,K,Ce,Le={}){ee.host=`${K}:${Ce}`,ee._protocol="http";const{mockUserToken:rt}=Le;rt&&(ee._overrideAuthToken="string"==typeof rt?rt:(0,In.Sg)(rt,ee.app.options.projectId))}(ee,K,Ce,Le)}(this._delegate,K,Ce,Le)}}function Xr(ee){return/^[A-Za-z]+:\/\//.test(ee)}function Ni(ee,{instanceIdentifier:K}){const Ce=ee.getProvider("app-compat").getImmediate(),Le=ee.getProvider("storage").getImmediate({identifier:K});return new Gr(Ce,Le)}!function Si(ee){const K={TaskState:Gi,TaskEvent:Vs,StringFormat:gi,Storage:Gr,Reference:hr};ee.INTERNAL.registerComponent(new Ot.wA("storage-compat",Ni,"PUBLIC").setServiceProps(K).setMultipleInstances(!0)),ee.registerVersion("@firebase/storage-compat","0.2.0")}(Tn.Z);var oo=j(6217),ts=j(9260);function Js(ee){const K=function Kr(ee){return new g.y(K=>{const Ce=An=>K.next(An);Ce(ee.snapshot);const Zt=ee.on("state_changed",Ce);return ee.then(An=>{Ce(An),K.complete()},An=>{Ce(ee.snapshot),(An=>{K.error(An)})(An)}),function(){Zt()}}).pipe(function dt(ee,K=ae.z){return(0,je.e)((Ce,Le)=>{let rt=null,Zt=null,An=null;const fr=()=>{if(rt){rt.unsubscribe(),rt=null;const ri=Zt;Zt=null,Le.next(ri)}};function Kn(){const ri=An+ee,vi=K.now();if(vi<ri)return rt=this.schedule(void 0,ri-vi),void Le.add(rt);fr()}Ce.subscribe((0,He.x)(Le,ri=>{Zt=ri,An=K.now(),rt||(rt=K.schedule(Kn,ee),Le.add(rt))},()=>{fr(),Le.complete()},void 0,()=>{Zt=rt=null}))})}(0))}(ee);return{task:ee,then:ee.then.bind(ee),catch:ee.catch.bind(ee),pause:ee.pause.bind(ee),cancel:ee.cancel.bind(ee),resume:ee.resume.bind(ee),snapshotChanges:()=>K,percentageChanges:()=>K.pipe((0,qe.U)(Ce=>Ce.bytesTransferred/Ce.totalBytes*100))}}function Ao(ee){return{getDownloadURL:()=>(0,k.of)(void 0).pipe(Ne.fc,(0,at.w)(()=>ee.getDownloadURL()),Ne.iC),getMetadata:()=>(0,k.of)(void 0).pipe(Ne.fc,(0,at.w)(()=>ee.getMetadata()),Ne.iC),delete:()=>(0,he.D)(ee.delete()),child:K=>Ao(ee.child(K)),updateMetadata:K=>(0,he.D)(ee.updateMetadata(K)),put:(K,Ce)=>Js(ee.put(K,Ce)),putString:(K,Ce,Le)=>Js(ee.putString(K,Ce,Le)),list:K=>(0,he.D)(ee.list(K)),listAll:()=>(0,he.D)(ee.listAll())}}const To=new Pe.OlP("angularfire2.storageBucket"),ws=new Pe.OlP("angularfire2.storage.maxUploadRetryTime"),Q=new Pe.OlP("angularfire2.storage.maxOperationRetryTime"),G=new Pe.OlP("angularfire2.storage.use-emulator");let V=(()=>{class ee{constructor(Ce,Le,rt,Zt,An,fr,Kn,ri,vi,hi){const $i=(0,bt.on)(Ce,An,Le);this.storage=(0,bt.cc)(`${$i.name}.storage.${rt}`,"AngularFireStorage",$i.name,()=>{const rs=An.runOutsideAngular(()=>$i.storage(rt||void 0)),l=vi;return l&&rs.useEmulator(...l),Kn&&rs.setMaxUploadRetryTime(Kn),ri&&rs.setMaxOperationRetryTime(ri),rs},[Kn,ri])}ref(Ce){return Ao(this.storage.ref(Ce))}refFromURL(Ce){return Ao(this.storage.refFromURL(Ce))}upload(Ce,Le,rt){return Ao(this.storage.ref(Ce)).put(Le,rt)}}return ee.\u0275fac=function(Ce){return new(Ce||ee)(Pe.LFG(bt.Dh),Pe.LFG(bt.xv,8),Pe.LFG(To,8),Pe.LFG(Pe.Lbi),Pe.LFG(Pe.R0b),Pe.LFG(Ne.HU),Pe.LFG(ws,8),Pe.LFG(Q,8),Pe.LFG(G,8),Pe.LFG(oo.nm,8))},ee.\u0275prov=Pe.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"any"}),ee})(),Ye=(()=>{class ee{}return ee.\u0275fac=function(Ce){return new(Ce||ee)},ee.\u0275mod=Pe.oAB({type:ee}),ee.\u0275inj=Pe.cJS({}),ee})(),xn=(()=>{class ee{constructor(){ts.Z.registerVersion("angularfire",Ne.q4.full,"gcs-compat")}}return ee.\u0275fac=function(Ce){return new(Ce||ee)},ee.\u0275mod=Pe.oAB({type:ee}),ee.\u0275inj=Pe.cJS({providers:[V],imports:[Ye]}),ee})()},2011:(Wn,Dt,j)=>{j.d(Dt,{Dh:()=>qe,GT:()=>He,cc:()=>Et,hO:()=>Tn,on:()=>Ne,pX:()=>je,xv:()=>at});var g=j(5e3),k=j(9260),he=j(2122);Wn=j.hmd(Wn);const ae=["ngOnDestroy"],je=(tn,Ln,dn,xe={})=>new Proxy(tn,{get:(Ge,St)=>dn.runOutsideAngular(()=>{var on;if(tn[St])return(null===(on=null==xe?void 0:xe.spy)||void 0===on?void 0:on.get)&&xe.spy.get(St,tn[St]),tn[St];if(ae.indexOf(St)>-1)return()=>{};const Ht=Ln.toPromise().then(Oe=>{const Bt=Oe&&Oe[St];return"function"==typeof Bt?Bt.bind(Oe):Bt&&Bt.then?Bt.then(Re=>dn.run(()=>Re)):dn.run(()=>Bt)});return new Proxy(()=>{},{get:(Oe,Bt)=>Ht[Bt],apply:(Oe,Bt,Re)=>Ht.then(wt=>{var Je;const Lt=wt&&wt(...Re);return(null===(Je=null==xe?void 0:xe.spy)||void 0===Je?void 0:Je.apply)&&xe.spy.apply(St,Re,Lt),Lt})})})}),He=(tn,Ln)=>{Ln.forEach(dn=>{Object.getOwnPropertyNames(dn.prototype||dn).forEach(xe=>{Object.defineProperty(tn.prototype,xe,Object.getOwnPropertyDescriptor(dn.prototype||dn,xe))})})};class dt{constructor(Ln){return Ln}}const qe=new g.OlP("angularfire2.app.options"),at=new g.OlP("angularfire2.app.name");function Ne(tn,Ln,dn){const Ge="object"==typeof dn&&dn||{};Ge.name=Ge.name||"string"==typeof dn&&dn||"[DEFAULT]";const on=k.Z.apps.filter(Ht=>Ht&&Ht.name===Ge.name)[0]||Ln.runOutsideAngular(()=>k.Z.initializeApp(tn,Ge));try{JSON.stringify(tn)!==JSON.stringify(on.options)&&Pe("error",`${on.name} Firebase App already initialized with different options${Wn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ht){}return new dt(on)}const Pe=(tn,...Ln)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[tn](...Ln)},bt={provide:dt,useFactory:Ne,deps:[qe,g.R0b,[new g.FiY,at]]};let Tn=(()=>{class tn{constructor(dn){k.Z.registerVersion("angularfire",he.q4.full,"core"),k.Z.registerVersion("angularfire",he.q4.full,"app-compat"),k.Z.registerVersion("angular",g.q4F.full,dn.toString())}static initializeApp(dn,xe){return{ngModule:tn,providers:[{provide:qe,useValue:dn},{provide:at,useValue:xe}]}}}return tn.\u0275fac=function(dn){return new(dn||tn)(g.LFG(g.Lbi))},tn.\u0275mod=g.oAB({type:tn}),tn.\u0275inj=g.cJS({providers:[bt]}),tn})();function Et(tn,Ln,dn,xe,Ge){const[,St,on]=globalThis.\u0275AngularfireInstanceCache.find(Ht=>Ht[0]===tn)||[];if(St)return function un(tn,Ln){try{return tn.toString()===Ln.toString()}catch(dn){return tn===Ln}}(Ge,on)||(Ot("error",`${Ln} was already initialized on the ${dn} Firebase App with different settings.${In?" You may need to reload as Firebase is not HMR aware.":""}`),Ot("warn",{is:Ge,was:on})),St;{const Ht=xe();return globalThis.\u0275AngularfireInstanceCache.push([tn,Ht,Ge]),Ht}}const In=!!Wn.hot,Ot=(tn,...Ln)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[tn](...Ln)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Wn,Dt,j)=>{j.d(Dt,{q4:()=>Ba,iC:()=>Dl,fc:()=>zu,HU:()=>nl,vb:()=>tl,JM:()=>Vl});var g=j(5e3),k=j(259),he=j(5861),ae=j(9681),je=j(2090),He=j(4859),dt=j(1877),qe=j(8766);const at="@firebase/installations",bt="w:0.6.0",Tn="FIS_v2",Ln=new je.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dn(U){return U instanceof je.ZR&&U.code.includes("request-failed")}function xe({projectId:U}){return`https://firebaseinstallations.googleapis.com/v1/projects/${U}/installations`}function Ge(U){return{token:U.token,requestStatus:2,expiresIn:wt(U.expiresIn),creationTime:Date.now()}}function St(U,Y){return on.apply(this,arguments)}function on(){return(on=(0,he.Z)(function*(U,Y){const $e=(yield Y.json()).error;return Ln.create("request-failed",{requestName:U,serverCode:$e.code,serverMessage:$e.message,serverStatus:$e.status})})).apply(this,arguments)}function Ht({apiKey:U}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U})}function Oe(U,{refreshToken:Y}){const de=Ht(U);return de.append("Authorization",function Je(U){return`${Tn} ${U}`}(Y)),de}function Bt(U){return Re.apply(this,arguments)}function Re(){return(Re=(0,he.Z)(function*(U){const Y=yield U();return Y.status>=500&&Y.status<600?U():Y})).apply(this,arguments)}function wt(U){return Number(U.replace("s","000"))}function Lt(U,Y){return pt.apply(this,arguments)}function pt(){return(pt=(0,he.Z)(function*({appConfig:U,heartbeatServiceProvider:Y},{fid:de}){const $e=xe(U),Nt=Ht(U),Yt=Y.getImmediate({optional:!0});if(Yt){const zr=yield Yt.getHeartbeatsHeader();zr&&Nt.append("x-firebase-client",zr)}const jr={method:"POST",headers:Nt,body:JSON.stringify({fid:de,authVersion:Tn,appId:U.appId,sdkVersion:bt})},Zr=yield Bt(()=>fetch($e,jr));if(Zr.ok){const zr=yield Zr.json();return{fid:zr.fid||de,registrationStatus:2,refreshToken:zr.refreshToken,authToken:Ge(zr.authToken)}}throw yield St("Create Installation",Zr)})).apply(this,arguments)}function Rt(U){return new Promise(Y=>{setTimeout(Y,U)})}const sr=/^[cdef][\w-]{21}$/;function mn(){try{const U=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(U),U[0]=112+U[0]%16;const de=function Tr(U){return function Sn(U){return btoa(String.fromCharCode(...U)).replace(/\+/g,"-").replace(/\//g,"_")}(U).substr(0,22)}(U);return sr.test(de)?de:""}catch(U){return""}}function mr(U){return`${U.appName}!${U.appId}`}const Vt=new Map;function kt(U,Y){const de=mr(U);ut(de,Y),function Qt(U,Y){const de=function Xt(){return!Mt&&"BroadcastChannel"in self&&(Mt=new BroadcastChannel("[Firebase] FID Change"),Mt.onmessage=U=>{ut(U.data.key,U.data.fid)}),Mt}();de&&de.postMessage({key:U,fid:Y}),function Hn(){0===Vt.size&&Mt&&(Mt.close(),Mt=null)}()}(de,Y)}function ut(U,Y){const de=Vt.get(U);if(de)for(const $e of de)$e(Y)}let Mt=null;const Yr="firebase-installations-store";let oi=null;function er(){return oi||(oi=(0,qe.X3)("firebase-installations-database",1,{upgrade:(U,Y)=>{0===Y&&U.createObjectStore(Yr)}})),oi}function Wr(U,Y){return xr.apply(this,arguments)}function xr(){return(xr=(0,he.Z)(function*(U,Y){const de=mr(U),Nt=(yield er()).transaction(Yr,"readwrite"),Yt=Nt.objectStore(Yr),Un=yield Yt.get(de);return yield Yt.put(Y,de),yield Nt.done,(!Un||Un.fid!==Y.fid)&&kt(U,Y.fid),Y})).apply(this,arguments)}function Mr(U){return is.apply(this,arguments)}function is(){return(is=(0,he.Z)(function*(U){const Y=mr(U),$e=(yield er()).transaction(Yr,"readwrite");yield $e.objectStore(Yr).delete(Y),yield $e.done})).apply(this,arguments)}function Yi(U,Y){return cn.apply(this,arguments)}function cn(){return(cn=(0,he.Z)(function*(U,Y){const de=mr(U),Nt=(yield er()).transaction(Yr,"readwrite"),Yt=Nt.objectStore(Yr),Un=yield Yt.get(de),jr=Y(Un);return void 0===jr?yield Yt.delete(de):yield Yt.put(jr,de),yield Nt.done,jr&&(!Un||Un.fid!==jr.fid)&&kt(U,jr.fid),jr})).apply(this,arguments)}function nt(U){return ct.apply(this,arguments)}function ct(){return(ct=(0,he.Z)(function*(U){let Y;const de=yield Yi(U.appConfig,$e=>{const Nt=Gt($e),Yt=nn(U,Nt);return Y=Yt.registrationPromise,Yt.installationEntry});return""===de.fid?{installationEntry:yield Y}:{installationEntry:de,registrationPromise:Y}})).apply(this,arguments)}function Gt(U){return ds(U||{fid:mn(),registrationStatus:0})}function nn(U,Y){if(0===Y.registrationStatus){if(!navigator.onLine)return{installationEntry:Y,registrationPromise:Promise.reject(Ln.create("app-offline"))};const de={fid:Y.fid,registrationStatus:1,registrationTime:Date.now()},$e=function En(U,Y){return qn.apply(this,arguments)}(U,de);return{installationEntry:de,registrationPromise:$e}}return 1===Y.registrationStatus?{installationEntry:Y,registrationPromise:Jr(U)}:{installationEntry:Y}}function qn(){return(qn=(0,he.Z)(function*(U,Y){try{const de=yield Lt(U,Y);return Wr(U.appConfig,de)}catch(de){throw dn(de)&&409===de.customData.serverCode?yield Mr(U.appConfig):yield Wr(U.appConfig,{fid:Y.fid,registrationStatus:0}),de}})).apply(this,arguments)}function Jr(U){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,he.Z)(function*(U){let Y=yield Fr(U.appConfig);for(;1===Y.registrationStatus;)yield Rt(100),Y=yield Fr(U.appConfig);if(0===Y.registrationStatus){const{installationEntry:de,registrationPromise:$e}=yield nt(U);return $e||de}return Y})).apply(this,arguments)}function Fr(U){return Yi(U,Y=>{if(!Y)throw Ln.create("installation-not-found");return ds(Y)})}function ds(U){return function Oi(U){return 1===U.registrationStatus&&U.registrationTime+1e4<Date.now()}(U)?{fid:U.fid,registrationStatus:0}:U}function gi(U,Y){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,he.Z)(function*({appConfig:U,heartbeatServiceProvider:Y},de){const $e=mi(U,de),Nt=Oe(U,de),Yt=Y.getImmediate({optional:!0});if(Yt){const zr=yield Yt.getHeartbeatsHeader();zr&&Nt.append("x-firebase-client",zr)}const jr={method:"POST",headers:Nt,body:JSON.stringify({installation:{sdkVersion:bt,appId:U.appId}})},Zr=yield Bt(()=>fetch($e,jr));if(Zr.ok)return Ge(yield Zr.json());throw yield St("Generate Auth Token",Zr)})).apply(this,arguments)}function mi(U,{fid:Y}){return`${xe(U)}/${Y}/authTokens:generate`}function Lr(U){return ki.apply(this,arguments)}function ki(){return(ki=(0,he.Z)(function*(U,Y=!1){let de;const $e=yield Yi(U.appConfig,Yt=>{if(!Vr(Yt))throw Ln.create("not-registered");const Un=Yt.authToken;if(!Y&&Qe(Un))return Yt;if(1===Un.requestStatus)return de=kn(U,Y),Yt;{if(!navigator.onLine)throw Ln.create("app-offline");const jr=ft(Yt);return de=Pr(U,jr),jr}});return de?yield de:$e.authToken})).apply(this,arguments)}function kn(U,Y){return zt.apply(this,arguments)}function zt(){return(zt=(0,he.Z)(function*(U,Y){let de=yield Vn(U.appConfig);for(;1===de.authToken.requestStatus;)yield Rt(100),de=yield Vn(U.appConfig);const $e=de.authToken;return 0===$e.requestStatus?Lr(U,Y):$e})).apply(this,arguments)}function Vn(U){return Yi(U,Y=>{if(!Vr(Y))throw Ln.create("not-registered");return function ln(U){return 1===U.requestStatus&&U.requestTime+1e4<Date.now()}(Y.authToken)?Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}}):Y})}function Pr(U,Y){return Or.apply(this,arguments)}function Or(){return(Or=(0,he.Z)(function*(U,Y){try{const de=yield gi(U,Y),$e=Object.assign(Object.assign({},Y),{authToken:de});return yield Wr(U.appConfig,$e),de}catch(de){if(!dn(de)||401!==de.customData.serverCode&&404!==de.customData.serverCode){const $e=Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}});yield Wr(U.appConfig,$e)}else yield Mr(U.appConfig);throw de}})).apply(this,arguments)}function Vr(U){return void 0!==U&&2===U.registrationStatus}function Qe(U){return 2===U.requestStatus&&!function Ue(U){const Y=Date.now();return Y<U.creationTime||U.creationTime+U.expiresIn<Y+36e5}(U)}function ft(U){const Y={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},U),{authToken:Y})}function ze(){return(ze=(0,he.Z)(function*(U){const Y=U,{installationEntry:de,registrationPromise:$e}=yield nt(Y);return $e?$e.catch(console.error):Lr(Y).catch(console.error),de.fid})).apply(this,arguments)}function Ae(){return(Ae=(0,he.Z)(function*(U,Y=!1){const de=U;return yield gt(de),(yield Lr(de,Y)).token})).apply(this,arguments)}function gt(U){return sn.apply(this,arguments)}function sn(){return(sn=(0,he.Z)(function*(U){const{registrationPromise:Y}=yield nt(U);Y&&(yield Y)})).apply(this,arguments)}function as(U){return Ln.create("missing-app-config-values",{valueName:U})}const wi="installations",br=U=>{const Y=U.getProvider("app").getImmediate(),de=function ci(U){if(!U||!U.options)throw as("App Configuration");if(!U.name)throw as("App Name");const Y=["projectId","apiKey","appId"];for(const de of Y)if(!U.options[de])throw as(de);return{appName:U.name,projectId:U.options.projectId,apiKey:U.options.apiKey,appId:U.options.appId}}(Y);return{app:Y,appConfig:de,heartbeatServiceProvider:(0,ae._getProvider)(Y,"heartbeat"),_delete:()=>Promise.resolve()}},li=U=>{const Y=U.getProvider("app").getImmediate(),de=(0,ae._getProvider)(Y,wi).getImmediate();return{getId:()=>function Ft(U){return ze.apply(this,arguments)}(de),getToken:Nt=>function Me(U){return Ae.apply(this,arguments)}(de,Nt)}};(function Pi(){(0,ae._registerComponent)(new He.wA(wi,br,"PUBLIC")),(0,ae._registerComponent)(new He.wA("installations-internal",li,"PRIVATE"))})(),(0,ae.registerVersion)(at,"0.6.0"),(0,ae.registerVersion)(at,"0.6.0","esm2017");const hs="@firebase/remote-config",Hi=new je.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $o{constructor(Y,de,$e,Nt){this.client=Y,this.storage=de,this.storageCache=$e,this.logger=Nt}isCachedDataFresh(Y,de){if(!de)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $e=Date.now()-de,Nt=$e<=Y;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$e}. Cache max age millis (minimumFetchIntervalMillis setting): ${Y}. Is cache hit: ${Nt}.`),Nt}fetch(Y){var de=this;return(0,he.Z)(function*(){const[$e,Nt]=yield Promise.all([de.storage.getLastSuccessfulFetchTimestampMillis(),de.storage.getLastSuccessfulFetchResponse()]);if(Nt&&de.isCachedDataFresh(Y.cacheMaxAgeMillis,$e))return Nt;Y.eTag=Nt&&Nt.eTag;const Yt=yield de.client.fetch(Y),Un=[de.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Yt.status&&Un.push(de.storage.setLastSuccessfulFetchResponse(Yt)),yield Promise.all(Un),Yt})()}}function co(U=navigator){return U.languages&&U.languages[0]||U.language}class Ns{constructor(Y,de,$e,Nt,Yt,Un){this.firebaseInstallations=Y,this.sdkVersion=de,this.namespace=$e,this.projectId=Nt,this.apiKey=Yt,this.appId=Un}fetch(Y){var de=this;return(0,he.Z)(function*(){const[$e,Nt]=yield Promise.all([de.firebaseInstallations.getId(),de.firebaseInstallations.getToken()]),Un=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${de.projectId}/namespaces/${de.namespace}:fetch?key=${de.apiKey}`,jr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Y.eTag||"*"},Zr={sdk_version:de.sdkVersion,app_instance_id:$e,app_instance_id_token:Nt,app_id:de.appId,language_code:co()},zr={method:"POST",headers:jr,body:JSON.stringify(Zr)},Wi=fetch(Un,zr),Ei=new Promise((Mo,So)=>{Y.signal.addEventListener(()=>{const za=new Error("The operation was aborted.");za.name="AbortError",So(za)})});let jo;try{yield Promise.race([Wi,Ei]),jo=yield Wi}catch(Mo){let So="fetch-client-network";throw"AbortError"===(null==Mo?void 0:Mo.name)&&(So="fetch-timeout"),Hi.create(So,{originalErrorMessage:null==Mo?void 0:Mo.message})}let ii=jo.status;const ss=jo.headers.get("ETag")||void 0;let Sa,Pa;if(200===jo.status){let Mo;try{Mo=yield jo.json()}catch(So){throw Hi.create("fetch-client-parse",{originalErrorMessage:null==So?void 0:So.message})}Sa=Mo.entries,Pa=Mo.state}if("INSTANCE_STATE_UNSPECIFIED"===Pa?ii=500:"NO_CHANGE"===Pa?ii=304:("NO_TEMPLATE"===Pa||"EMPTY_CONFIG"===Pa)&&(Sa={}),304!==ii&&200!==ii)throw Hi.create("fetch-status",{httpStatus:ii});return{status:ii,eTag:ss,config:Sa}})()}}class ht{constructor(Y,de){this.client=Y,this.storage=de}fetch(Y){var de=this;return(0,he.Z)(function*(){const $e=(yield de.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return de.attemptFetch(Y,$e)})()}attemptFetch(Y,{throttleEndTimeMillis:de,backoffCount:$e}){var Nt=this;return(0,he.Z)(function*(){yield function ns(U,Y){return new Promise((de,$e)=>{const Nt=Math.max(Y-Date.now(),0),Yt=setTimeout(de,Nt);U.addEventListener(()=>{clearTimeout(Yt),$e(Hi.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}(Y.signal,de);try{const Yt=yield Nt.client.fetch(Y);return yield Nt.storage.deleteThrottleMetadata(),Yt}catch(Yt){if(!function Ct(U){if(!(U instanceof je.ZR&&U.customData))return!1;const Y=Number(U.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}(Yt))throw Yt;const Un={throttleEndTimeMillis:Date.now()+(0,je.$s)($e),backoffCount:$e+1};return yield Nt.storage.setThrottleMetadata(Un),Nt.attemptFetch(Y,Un)}})()}}class $n{constructor(Y,de,$e,Nt,Yt){this.app=Y,this._client=de,this._storageCache=$e,this._storage=Nt,this._logger=Yt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Dr(U,Y){const de=U.target.error||void 0;return Hi.create(Y,{originalErrorMessage:de&&(null==de?void 0:de.message)})}const ei="app_namespace_store";class ti{constructor(Y,de,$e,Nt=function ys(){return new Promise((U,Y)=>{try{const de=indexedDB.open("firebase_remote_config",1);de.onerror=$e=>{Y(Dr($e,"storage-open"))},de.onsuccess=$e=>{U($e.target.result)},de.onupgradeneeded=$e=>{0===$e.oldVersion&&$e.target.result.createObjectStore(ei,{keyPath:"compositeKey"})}}catch(de){Y(Hi.create("storage-open",{originalErrorMessage:null==de?void 0:de.message}))}})}()){this.appId=Y,this.appName=de,this.namespace=$e,this.openDbPromise=Nt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Y){return this.set("last_fetch_status",Y)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Y){return this.set("last_successful_fetch_timestamp_millis",Y)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Y){return this.set("last_successful_fetch_response",Y)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Y){return this.set("active_config",Y)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Y){return this.set("active_config_etag",Y)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Y){return this.set("throttle_metadata",Y)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Y){var de=this;return(0,he.Z)(function*(){const $e=yield de.openDbPromise;return new Promise((Nt,Yt)=>{const jr=$e.transaction([ei],"readonly").objectStore(ei),Zr=de.createCompositeKey(Y);try{const zr=jr.get(Zr);zr.onerror=Wi=>{Yt(Dr(Wi,"storage-get"))},zr.onsuccess=Wi=>{const Ei=Wi.target.result;Nt(Ei?Ei.value:void 0)}}catch(zr){Yt(Hi.create("storage-get",{originalErrorMessage:null==zr?void 0:zr.message}))}})})()}set(Y,de){var $e=this;return(0,he.Z)(function*(){const Nt=yield $e.openDbPromise;return new Promise((Yt,Un)=>{const Zr=Nt.transaction([ei],"readwrite").objectStore(ei),zr=$e.createCompositeKey(Y);try{const Wi=Zr.put({compositeKey:zr,value:de});Wi.onerror=Ei=>{Un(Dr(Ei,"storage-set"))},Wi.onsuccess=()=>{Yt()}}catch(Wi){Un(Hi.create("storage-set",{originalErrorMessage:null==Wi?void 0:Wi.message}))}})})()}delete(Y){var de=this;return(0,he.Z)(function*(){const $e=yield de.openDbPromise;return new Promise((Nt,Yt)=>{const jr=$e.transaction([ei],"readwrite").objectStore(ei),Zr=de.createCompositeKey(Y);try{const zr=jr.delete(Zr);zr.onerror=Wi=>{Yt(Dr(Wi,"storage-delete"))},zr.onsuccess=()=>{Nt()}}catch(zr){Yt(Hi.create("storage-delete",{originalErrorMessage:null==zr?void 0:zr.message}))}})})()}createCompositeKey(Y){return[this.appId,this.appName,this.namespace,Y].join()}}class _s{constructor(Y){this.storage=Y}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Y=this;return(0,he.Z)(function*(){const de=Y.storage.getLastFetchStatus(),$e=Y.storage.getLastSuccessfulFetchTimestampMillis(),Nt=Y.storage.getActiveConfig(),Yt=yield de;Yt&&(Y.lastFetchStatus=Yt);const Un=yield $e;Un&&(Y.lastSuccessfulFetchTimestampMillis=Un);const jr=yield Nt;jr&&(Y.activeConfig=jr)})()}setLastFetchStatus(Y){return this.lastFetchStatus=Y,this.storage.setLastFetchStatus(Y)}setLastSuccessfulFetchTimestampMillis(Y){return this.lastSuccessfulFetchTimestampMillis=Y,this.storage.setLastSuccessfulFetchTimestampMillis(Y)}setActiveConfig(Y){return this.activeConfig=Y,this.storage.setActiveConfig(Y)}}function mo(){return ps.apply(this,arguments)}function ps(){return(ps=(0,he.Z)(function*(){if(!(0,je.hl)())return!1;try{return yield(0,je.eu)()}catch(U){return!1}})).apply(this,arguments)}!function As(){(0,ae._registerComponent)(new He.wA("remote-config",function U(Y,{instanceIdentifier:de}){const $e=Y.getProvider("app").getImmediate(),Nt=Y.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Hi.create("registration-window");if(!(0,je.hl)())throw Hi.create("indexed-db-unavailable");const{projectId:Yt,apiKey:Un,appId:jr}=$e.options;if(!Yt)throw Hi.create("registration-project-id");if(!Un)throw Hi.create("registration-api-key");if(!jr)throw Hi.create("registration-app-id");const Zr=new ti(jr,$e.name,de=de||"firebase"),zr=new _s(Zr),Wi=new dt.Yd(hs);Wi.logLevel=dt.in.ERROR;const Ei=new Ns(Nt,ae.SDK_VERSION,de,Yt,Un,jr),jo=new ht(Ei,Zr),ii=new $o(jo,Zr,zr,Wi),ss=new $n($e,ii,zr,Zr,Wi);return function xi(U){const Y=(0,je.m9)(U);Y._initializePromise||(Y._initializePromise=Y._storageCache.loadFromStorage().then(()=>{Y._isInitializationComplete=!0}))}(ss),ss},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(hs,"0.4.0"),(0,ae.registerVersion)(hs,"0.4.0","esm2017")}();const Lo="/firebase-messaging-sw.js",bi="/firebase-cloud-messaging-push-scope",ho="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Gs="google.c.a.c_id",zs="google.c.a.c_l",Vo="google.c.a.ts",Qs="google.c.a.e";var Bs=(()=>{return(U=Bs||(Bs={})).PUSH_RECEIVED="push-received",U.NOTIFICATION_CLICKED="notification-clicked",Bs;var U})();function xs(U){const Y=new Uint8Array(U);return btoa(String.fromCharCode(...Y)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qo(U){const de=(U+"=".repeat((4-U.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$e=atob(de),Nt=new Uint8Array($e.length);for(let Yt=0;Yt<$e.length;++Yt)Nt[Yt]=$e.charCodeAt(Yt);return Nt}const us="fcm_token_details_db",Ms="fcm_token_object_Store";function Li(U){return Xs.apply(this,arguments)}function Xs(){return Xs=(0,he.Z)(function*(U){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Yt=>Yt.name).includes(us))return null;let Y=null;return(yield(0,qe.X3)(us,5,{upgrade:($e=(0,he.Z)(function*(Nt,Yt,Un,jr){var Zr;if(Yt<2||!Nt.objectStoreNames.contains(Ms))return;const zr=jr.objectStore(Ms),Wi=yield zr.index("fcmSenderId").get(U);if(yield zr.clear(),Wi)if(2===Yt){const Ei=Wi;if(!Ei.auth||!Ei.p256dh||!Ei.endpoint)return;Y={token:Ei.fcmToken,createTime:null!==(Zr=Ei.createTime)&&void 0!==Zr?Zr:Date.now(),subscriptionOptions:{auth:Ei.auth,p256dh:Ei.p256dh,endpoint:Ei.endpoint,swScope:Ei.swScope,vapidKey:"string"==typeof Ei.vapidKey?Ei.vapidKey:xs(Ei.vapidKey)}}}else if(3===Yt){const Ei=Wi;Y={token:Ei.fcmToken,createTime:Ei.createTime,subscriptionOptions:{auth:xs(Ei.auth),p256dh:xs(Ei.p256dh),endpoint:Ei.endpoint,swScope:Ei.swScope,vapidKey:xs(Ei.vapidKey)}}}else if(4===Yt){const Ei=Wi;Y={token:Ei.fcmToken,createTime:Ei.createTime,subscriptionOptions:{auth:xs(Ei.auth),p256dh:xs(Ei.p256dh),endpoint:Ei.endpoint,swScope:Ei.swScope,vapidKey:xs(Ei.vapidKey)}}}}),function(Yt,Un,jr,Zr){return $e.apply(this,arguments)})})).close(),yield(0,qe.Lj)(us),yield(0,qe.Lj)("fcm_vapid_details_db"),yield(0,qe.Lj)("undefined"),fo(Y)?Y:null;var $e}),Xs.apply(this,arguments)}function fo(U){if(!U||!U.subscriptionOptions)return!1;const{subscriptionOptions:Y}=U;return"number"==typeof U.createTime&&U.createTime>0&&"string"==typeof U.token&&U.token.length>0&&"string"==typeof Y.auth&&Y.auth.length>0&&"string"==typeof Y.p256dh&&Y.p256dh.length>0&&"string"==typeof Y.endpoint&&Y.endpoint.length>0&&"string"==typeof Y.swScope&&Y.swScope.length>0&&"string"==typeof Y.vapidKey&&Y.vapidKey.length>0}const qs="firebase-messaging-store";let Vi=null;function Ti(){return Vi||(Vi=(0,qe.X3)("firebase-messaging-database",1,{upgrade:(U,Y)=>{0===Y&&U.createObjectStore(qs)}})),Vi}function B(U){return fe.apply(this,arguments)}function fe(){return(fe=(0,he.Z)(function*(U){const Y=wn(U),$e=yield(yield Ti()).transaction(qs).objectStore(qs).get(Y);if($e)return $e;{const Nt=yield Li(U.appConfig.senderId);if(Nt)return yield W(U,Nt),Nt}})).apply(this,arguments)}function W(U,Y){return ve.apply(this,arguments)}function ve(){return(ve=(0,he.Z)(function*(U,Y){const de=wn(U),Nt=(yield Ti()).transaction(qs,"readwrite");return yield Nt.objectStore(qs).put(Y,de),yield Nt.done,Y})).apply(this,arguments)}function Ke(U){return rn.apply(this,arguments)}function rn(){return(rn=(0,he.Z)(function*(U){const Y=wn(U),$e=(yield Ti()).transaction(qs,"readwrite");yield $e.objectStore(qs).delete(Y),yield $e.done})).apply(this,arguments)}function wn({appConfig:U}){return U.appId}const Gr=new je.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xr(U,Y){return ni.apply(this,arguments)}function ni(){return(ni=(0,he.Z)(function*(U,Y){const de=yield ts(U),$e=Js(Y),Nt={method:"POST",headers:de,body:JSON.stringify($e)};let Yt;try{Yt=yield(yield fetch(oo(U.appConfig),Nt)).json()}catch(Un){throw Gr.create("token-subscribe-failed",{errorInfo:null==Un?void 0:Un.toString()})}if(Yt.error)throw Gr.create("token-subscribe-failed",{errorInfo:Yt.error.message});if(!Yt.token)throw Gr.create("token-subscribe-no-token");return Yt.token})).apply(this,arguments)}function yi(U,Y){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,he.Z)(function*(U,Y){const de=yield ts(U),$e=Js(Y.subscriptionOptions),Nt={method:"PATCH",headers:de,body:JSON.stringify($e)};let Yt;try{Yt=yield(yield fetch(`${oo(U.appConfig)}/${Y.token}`,Nt)).json()}catch(Un){throw Gr.create("token-update-failed",{errorInfo:null==Un?void 0:Un.toString()})}if(Yt.error)throw Gr.create("token-update-failed",{errorInfo:Yt.error.message});if(!Yt.token)throw Gr.create("token-update-no-token");return Yt.token})).apply(this,arguments)}function Ni(U,Y){return Si.apply(this,arguments)}function Si(){return(Si=(0,he.Z)(function*(U,Y){const $e={method:"DELETE",headers:yield ts(U)};try{const Yt=yield(yield fetch(`${oo(U.appConfig)}/${Y}`,$e)).json();if(Yt.error)throw Gr.create("token-unsubscribe-failed",{errorInfo:Yt.error.message})}catch(Nt){throw Gr.create("token-unsubscribe-failed",{errorInfo:null==Nt?void 0:Nt.toString()})}})).apply(this,arguments)}function oo({projectId:U}){return`https://fcmregistrations.googleapis.com/v1/projects/${U}/registrations`}function ts(U){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,he.Z)(function*({appConfig:U,installations:Y}){const de=yield Y.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U.apiKey,"x-goog-firebase-installations-auth":`FIS ${de}`})})).apply(this,arguments)}function Js({p256dh:U,auth:Y,endpoint:de,vapidKey:$e}){const Nt={web:{endpoint:de,auth:Y,p256dh:U}};return $e!==ho&&(Nt.web.applicationPubKey=$e),Nt}const Ao=6048e5;function To(U){return ws.apply(this,arguments)}function ws(){return(ws=(0,he.Z)(function*(U){const Y=yield ee(U.swRegistration,U.vapidKey),de={vapidKey:U.vapidKey,swScope:U.swRegistration.scope,endpoint:Y.endpoint,auth:xs(Y.getKey("auth")),p256dh:xs(Y.getKey("p256dh"))},$e=yield B(U.firebaseDependencies);if($e){if(Ce($e.subscriptionOptions,de))return Date.now()>=$e.createTime+Ao?V(U,{token:$e.token,createTime:Date.now(),subscriptionOptions:de}):$e.token;try{yield Ni(U.firebaseDependencies,$e.token)}catch(Nt){console.warn(Nt)}return Ye(U.firebaseDependencies,de)}return Ye(U.firebaseDependencies,de)})).apply(this,arguments)}function Q(U){return G.apply(this,arguments)}function G(){return(G=(0,he.Z)(function*(U){const Y=yield B(U.firebaseDependencies);Y&&(yield Ni(U.firebaseDependencies,Y.token),yield Ke(U.firebaseDependencies));const de=yield U.swRegistration.pushManager.getSubscription();return!de||de.unsubscribe()})).apply(this,arguments)}function V(U,Y){return ye.apply(this,arguments)}function ye(){return(ye=(0,he.Z)(function*(U,Y){try{const de=yield yi(U.firebaseDependencies,Y),$e=Object.assign(Object.assign({},Y),{token:de,createTime:Date.now()});return yield W(U.firebaseDependencies,$e),de}catch(de){throw yield Q(U),de}})).apply(this,arguments)}function Ye(U,Y){return xn.apply(this,arguments)}function xn(){return(xn=(0,he.Z)(function*(U,Y){const $e={token:yield Xr(U,Y),createTime:Date.now(),subscriptionOptions:Y};return yield W(U,$e),$e.token})).apply(this,arguments)}function ee(U,Y){return K.apply(this,arguments)}function K(){return(K=(0,he.Z)(function*(U,Y){return(yield U.pushManager.getSubscription())||U.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qo(Y)})})).apply(this,arguments)}function Ce(U,Y){return Y.vapidKey===U.vapidKey&&Y.endpoint===U.endpoint&&Y.auth===U.auth&&Y.p256dh===U.p256dh}function Le(U){const Y={from:U.from,collapseKey:U.collapse_key,messageId:U.fcmMessageId};return function rt(U,Y){if(!Y.notification)return;U.notification={};const de=Y.notification.title;de&&(U.notification.title=de);const $e=Y.notification.body;$e&&(U.notification.body=$e);const Nt=Y.notification.image;Nt&&(U.notification.image=Nt);const Yt=Y.notification.icon;Yt&&(U.notification.icon=Yt)}(Y,U),function Zt(U,Y){!Y.data||(U.data=Y.data)}(Y,U),function An(U,Y){var de,$e,Nt,Yt,Un;if(!Y.fcmOptions&&!(null===(de=Y.notification)||void 0===de?void 0:de.click_action))return;U.fcmOptions={};const jr=null!==(Nt=null===($e=Y.fcmOptions)||void 0===$e?void 0:$e.link)&&void 0!==Nt?Nt:null===(Yt=Y.notification)||void 0===Yt?void 0:Yt.click_action;jr&&(U.fcmOptions.link=jr);const Zr=null===(Un=Y.fcmOptions)||void 0===Un?void 0:Un.analytics_label;Zr&&(U.fcmOptions.analyticsLabel=Zr)}(Y,U),Y}function fr(U){return"object"==typeof U&&!!U&&Gs in U}function Kn(U,Y){const de=[];for(let $e=0;$e<U.length;$e++)de.push(U.charAt($e)),$e<Y.length&&de.push(Y.charAt($e));return de.join("")}function vi(U){return Gr.create("missing-app-config-values",{valueName:U})}Kn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Kn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hi{constructor(Y,de,$e){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Nt=function ri(U){if(!U||!U.options)throw vi("App Configuration Object");if(!U.name)throw vi("App Name");const Y=["projectId","apiKey","appId","messagingSenderId"],{options:de}=U;for(const $e of Y)if(!de[$e])throw vi($e);return{appName:U.name,projectId:de.projectId,apiKey:de.apiKey,appId:de.appId,senderId:de.messagingSenderId}}(Y);this.firebaseDependencies={app:Y,appConfig:Nt,installations:de,analyticsProvider:$e}}_delete(){return Promise.resolve()}}function $i(U){return rs.apply(this,arguments)}function rs(){return(rs=(0,he.Z)(function*(U){try{U.swRegistration=yield navigator.serviceWorker.register(Lo,{scope:bi}),U.swRegistration.update().catch(()=>{})}catch(Y){throw Gr.create("failed-service-worker-registration",{browserErrorMessage:null==Y?void 0:Y.message})}})).apply(this,arguments)}function l(U,Y){return A.apply(this,arguments)}function A(){return(A=(0,he.Z)(function*(U,Y){if(!Y&&!U.swRegistration&&(yield $i(U)),Y||!U.swRegistration){if(!(Y instanceof ServiceWorkerRegistration))throw Gr.create("invalid-sw-registration");U.swRegistration=Y}})).apply(this,arguments)}function I(U,Y){return P.apply(this,arguments)}function P(){return(P=(0,he.Z)(function*(U,Y){Y?U.vapidKey=Y:U.vapidKey||(U.vapidKey=ho)})).apply(this,arguments)}function J(){return(J=(0,he.Z)(function*(U,Y){if(!navigator)throw Gr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gr.create("permission-blocked");return yield I(U,null==Y?void 0:Y.vapidKey),yield l(U,null==Y?void 0:Y.serviceWorkerRegistration),To(U)})).apply(this,arguments)}function ge(U,Y,de){return be.apply(this,arguments)}function be(){return(be=(0,he.Z)(function*(U,Y,de){const $e=oe(Y);(yield U.firebaseDependencies.analyticsProvider.get()).logEvent($e,{message_id:de[Gs],message_name:de[zs],message_time:de[Vo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function oe(U){switch(U){case Bs.NOTIFICATION_CLICKED:return"notification_open";case Bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ce(){return(ce=(0,he.Z)(function*(U,Y){const de=Y.data;if(!de.isFirebaseMessaging)return;U.onMessageHandler&&de.messageType===Bs.PUSH_RECEIVED&&("function"==typeof U.onMessageHandler?U.onMessageHandler(Le(de)):U.onMessageHandler.next(Le(de)));const $e=de.data;fr($e)&&"1"===$e[Qs]&&(yield ge(U,de.messageType,$e))})).apply(this,arguments)}const le="@firebase/messaging",We=U=>{const Y=new hi(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),U.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",de=>function me(U,Y){return ce.apply(this,arguments)}(Y,de)),Y},tt=U=>{const Y=U.getProvider("messaging").getImmediate();return{getToken:$e=>function z(U,Y){return J.apply(this,arguments)}(Y,$e)}};function ke(){return _t.apply(this,arguments)}function _t(){return(_t=(0,he.Z)(function*(){try{yield(0,je.eu)()}catch(U){return!1}return"undefined"!=typeof window&&(0,je.hl)()&&(0,je.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function De(){(0,ae._registerComponent)(new He.wA("messaging",We,"PUBLIC")),(0,ae._registerComponent)(new He.wA("messaging-internal",tt,"PRIVATE")),(0,ae.registerVersion)(le,"0.12.0"),(0,ae.registerVersion)(le,"0.12.0","esm2017")}();const Fn="analytics",Jt="firebase_id",lr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ar="https://www.googletagmanager.com/gtag/js",Wt=new dt.Yd("@firebase/analytics");function cr(U){return Promise.all(U.map(Y=>Y.catch(de=>de)))}function tr(U,Y){const de=document.createElement("script");de.src=`${ar}?l=${U}&id=${Y}`,de.async=!0,document.head.appendChild(de)}function Di(U,Y,de,$e,Nt,Yt){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,he.Z)(function*(U,Y,de,$e,Nt,Yt){const Un=$e[Nt];try{if(Un)yield Y[Un];else{const Zr=(yield cr(de)).find(zr=>zr.measurementId===Nt);Zr&&(yield Y[Zr.appId])}}catch(jr){Wt.error(jr)}U("config",Nt,Yt)})).apply(this,arguments)}function Xo(U,Y,de,$e,Nt){return Z.apply(this,arguments)}function Z(){return(Z=(0,he.Z)(function*(U,Y,de,$e,Nt){try{let Yt=[];if(Nt&&Nt.send_to){let Un=Nt.send_to;Array.isArray(Un)||(Un=[Un]);const jr=yield cr(de);for(const Zr of Un){const zr=jr.find(Ei=>Ei.measurementId===Zr),Wi=zr&&Y[zr.appId];if(!Wi){Yt=[];break}Yt.push(Wi)}}0===Yt.length&&(Yt=Object.values(Y)),yield Promise.all(Yt),U("event",$e,Nt||{})}catch(Yt){Wt.error(Yt)}})).apply(this,arguments)}function F(U){const Y=window.document.getElementsByTagName("script");for(const de of Object.values(Y))if(de.src&&de.src.includes(ar)&&de.src.includes(U))return de;return null}const Ie=new je.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fn=new class vt{constructor(Y={},de=1e3){this.throttleMetadata=Y,this.intervalMillis=de}getThrottleMetadata(Y){return this.throttleMetadata[Y]}setThrottleMetadata(Y,de){this.throttleMetadata[Y]=de}deleteThrottleMetadata(Y){delete this.throttleMetadata[Y]}};function pr(U){return new Headers({Accept:"application/json","x-goog-api-key":U})}function $t(U){return yr.apply(this,arguments)}function yr(){return(yr=(0,he.Z)(function*(U){var Y;const{appId:de,apiKey:$e}=U,Nt={method:"GET",headers:pr($e)},Yt=lr.replace("{app-id}",de),Un=yield fetch(Yt,Nt);if(200!==Un.status&&304!==Un.status){let jr="";try{const Zr=yield Un.json();(null===(Y=Zr.error)||void 0===Y?void 0:Y.message)&&(jr=Zr.error.message)}catch(Zr){}throw Ie.create("config-fetch-failed",{httpStatus:Un.status,responseMessage:jr})}return Un.json()})).apply(this,arguments)}function Rr(U){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,he.Z)(function*(U,Y=fn,de){const{appId:$e,apiKey:Nt,measurementId:Yt}=U.options;if(!$e)throw Ie.create("no-app-id");if(!Nt){if(Yt)return{measurementId:Yt,appId:$e};throw Ie.create("no-api-key")}const Un=Y.getThrottleMetadata($e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},jr=new qt;return setTimeout((0,he.Z)(function*(){jr.abort()}),void 0!==de?de:6e4),Nn({appId:$e,apiKey:Nt,measurementId:Yt},Un,jr,Y)})).apply(this,arguments)}function Nn(U,Y,de){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,he.Z)(function*(U,{throttleEndTimeMillis:Y,backoffCount:de},$e,Nt=fn){var Yt;const{appId:Un,measurementId:jr}=U;try{yield eo($e,Y)}catch(Zr){if(jr)return Wt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${jr} provided in the "measurementId" field in the local Firebase config. [${null==Zr?void 0:Zr.message}]`),{appId:Un,measurementId:jr};throw Zr}try{const Zr=yield $t(U);return Nt.deleteThrottleMetadata(Un),Zr}catch(Zr){const zr=Zr;if(!Gn(zr)){if(Nt.deleteThrottleMetadata(Un),jr)return Wt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${jr} provided in the "measurementId" field in the local Firebase config. [${null==zr?void 0:zr.message}]`),{appId:Un,measurementId:jr};throw Zr}const Wi=503===Number(null===(Yt=null==zr?void 0:zr.customData)||void 0===Yt?void 0:Yt.httpStatus)?(0,je.$s)(de,Nt.intervalMillis,30):(0,je.$s)(de,Nt.intervalMillis),Ei={throttleEndTimeMillis:Date.now()+Wi,backoffCount:de+1};return Nt.setThrottleMetadata(Un,Ei),Wt.debug(`Calling attemptFetch again in ${Wi} millis`),Nn(U,Ei,$e,Nt)}})).apply(this,arguments)}function eo(U,Y){return new Promise((de,$e)=>{const Nt=Math.max(Y-Date.now(),0),Yt=setTimeout(de,Nt);U.addEventListener(()=>{clearTimeout(Yt),$e(Ie.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}function Gn(U){if(!(U instanceof je.ZR&&U.customData))return!1;const Y=Number(U.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}class qt{constructor(){this.listeners=[]}addEventListener(Y){this.listeners.push(Y)}abort(){this.listeners.forEach(Y=>Y())}}let yn,ot;function ao(){return(ao=(0,he.Z)(function*(U,Y,de,$e,Nt){if(Nt&&Nt.global)U("event",de,$e);else{const Yt=yield Y;U("event",de,Object.assign(Object.assign({},$e),{send_to:Yt}))}})).apply(this,arguments)}function It(U){ot=U}function Ut(U){yn=U}function Xn(){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,he.Z)(function*(){if(!(0,je.hl)())return Wt.warn(Ie.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,je.eu)()}catch(U){return Wt.warn(Ie.create("indexeddb-unavailable",{errorInfo:null==U?void 0:U.toString()}).message),!1}return!0})).apply(this,arguments)}function zn(){return(zn=(0,he.Z)(function*(U,Y,de,$e,Nt,Yt,Un){var jr;const Zr=Rr(U);Zr.then(ii=>{de[ii.measurementId]=ii.appId,U.options.measurementId&&ii.measurementId!==U.options.measurementId&&Wt.warn(`The measurement ID in the local Firebase config (${U.options.measurementId}) does not match the measurement ID fetched from the server (${ii.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ii=>Wt.error(ii)),Y.push(Zr);const zr=Xn().then(ii=>{if(ii)return $e.getId()}),[Wi,Ei]=yield Promise.all([Zr,zr]);F(Yt)||tr(Yt,Wi.measurementId),ot&&(Nt("consent","default",ot),It(void 0)),Nt("js",new Date);const jo=null!==(jr=null==Un?void 0:Un.config)&&void 0!==jr?jr:{};return jo.origin="firebase",jo.update=!0,null!=Ei&&(jo[Jt]=Ei),Nt("config",Wi.measurementId,jo),yn&&(Nt("set",yn),Ut(void 0)),Wi.measurementId})).apply(this,arguments)}class Is{constructor(Y){this.app=Y}_delete(){return delete $r[this.app.options.appId],Promise.resolve()}}let $r={},cs=[];const Ss={};let Oo,ks,rr="dataLayer",Jo=!1;function Ll(U,Y,de){!function Qa(){const U=[];if((0,je.ru)()&&U.push("This is a browser extension environment."),(0,je.zI)()||U.push("Cookies are not available."),U.length>0){const Y=U.map(($e,Nt)=>`(${Nt+1}) ${$e}`).join(" "),de=Ie.create("invalid-analytics-context",{errorInfo:Y});Wt.warn(de.message)}}();const $e=U.options.appId;if(!$e)throw Ie.create("no-app-id");if(!U.options.apiKey){if(!U.options.measurementId)throw Ie.create("no-api-key");Wt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${U.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$r[$e])throw Ie.create("already-exists",{id:$e});if(!Jo){!function _i(U){let Y=[];Array.isArray(window[U])?Y=window[U]:window[U]=Y}(rr);const{wrappedGtag:Yt,gtagCore:Un}=function T(U,Y,de,$e,Nt){let Yt=function(...Un){window[$e].push(arguments)};return window[Nt]&&"function"==typeof window[Nt]&&(Yt=window[Nt]),window[Nt]=function C(U,Y,de,$e){function Yt(){return(Yt=(0,he.Z)(function*(Un,jr,Zr){try{"event"===Un?yield Xo(U,Y,de,jr,Zr):"config"===Un?yield Di(U,Y,de,$e,jr,Zr):"consent"===Un?U("consent","update",Zr):U("set",jr)}catch(zr){Wt.error(zr)}})).apply(this,arguments)}return function Nt(Un,jr,Zr){return Yt.apply(this,arguments)}}(Yt,U,Y,de),{gtagCore:Yt,wrappedGtag:window[Nt]}}($r,cs,Ss,rr,"gtag");ks=Yt,Oo=Un,Jo=!0}return $r[$e]=function Er(U,Y,de,$e,Nt,Yt,Un){return zn.apply(this,arguments)}(U,cs,Ss,Y,Oo,rr,de),new Is(U)}function sa(){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,he.Z)(function*(){if((0,je.ru)()||!(0,je.zI)()||!(0,je.hl)())return!1;try{return yield(0,je.eu)()}catch(U){return!1}})).apply(this,arguments)}const wo="@firebase/analytics";!function aa(){(0,ae._registerComponent)(new He.wA(Fn,(Y,{options:de})=>Ll(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),de),"PUBLIC")),(0,ae._registerComponent)(new He.wA("analytics-internal",function U(Y){try{const de=Y.getProvider(Fn).getImmediate();return{logEvent:($e,Nt,Yt)=>function Xa(U,Y,de,$e){U=(0,je.m9)(U),function Os(U,Y,de,$e,Nt){return ao.apply(this,arguments)}(ks,$r[U.app.options.appId],Y,de,$e).catch(Nt=>Wt.error(Nt))}(de,$e,Nt,Yt)}}catch(de){throw Ie.create("interop-component-reg-failed",{reason:de})}},"PRIVATE")),(0,ae.registerVersion)(wo,"0.9.0"),(0,ae.registerVersion)(wo,"0.9.0","esm2017")}();var Gu=j(4408),xo=j(7565);const Jl=new class ea extends xo.v{}(class la extends Gu.o{constructor(Y,de){super(Y,de),this.scheduler=Y,this.work=de}schedule(Y,de=0){return de>0?super.schedule(Y,de):(this.delay=de,this.state=Y,this.scheduler.flush(this),this)}execute(Y,de){return de>0||this.closed?super.execute(Y,de):this._execute(Y,de)}requestAsyncId(Y,de,$e=0){return null!=$e&&$e>0||null==$e&&this.delay>0?super.requestAsyncId(Y,de,$e):(Y.flush(this),0)}});var _o=j(4986),dl=j(8505),ta=j(5363),Sl=j(9468);const Ba=new g.GfV("7.5.0"),_u="__angularfire_symbol__analyticsIsSupportedValue",da="__angularfire_symbol__analyticsIsSupported",vo="__angularfire_symbol__remoteConfigIsSupportedValue",Ja="__angularfire_symbol__remoteConfigIsSupported",$a="__angularfire_symbol__messagingIsSupportedValue",lo="__angularfire_symbol__messagingIsSupported";function Vl(U,Y,de){if(Y){if(1===Y.length)return Y[0];const Yt=Y.filter(Un=>Un.app===de);if(1===Yt.length)return Yt[0]}return de.container.getProvider(U).getImmediate({optional:!0})}globalThis[da]||(globalThis[da]=sa().then(U=>globalThis[_u]=U).catch(()=>globalThis[_u]=!1)),globalThis[lo]||(globalThis[lo]=ke().then(U=>globalThis[$a]=U).catch(()=>globalThis[$a]=!1)),globalThis[Ja]||(globalThis[Ja]=mo().then(U=>globalThis[vo]=U).catch(()=>globalThis[vo]=!1));const tl=(U,Y)=>{const de=Y?[Y]:(0,k.C6)(),$e=[];return de.forEach(Nt=>{Nt.container.getProvider(U).instances.forEach(Un=>{$e.includes(Un)||$e.push(Un)})}),$e};function wa(){}class na{constructor(Y,de=Jl){this.zone=Y,this.delegate=de}now(){return this.delegate.now()}schedule(Y,de,$e){const Nt=this.zone;return this.delegate.schedule(function(Un){Nt.runGuarded(()=>{Y.apply(this,[Un])})},de,$e)}}class hl{constructor(Y){this.zone=Y,this.task=null}call(Y,de){const $e=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wa,{},wa,wa)),de.pipe((0,dl.b)({next:$e,complete:$e,error:$e})).subscribe(Y).add($e)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let nl=(()=>{class U{constructor(de){this.ngZone=de,this.outsideAngular=de.runOutsideAngular(()=>new na(Zone.current)),this.insideAngular=de.run(()=>new na(Zone.current,_o.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return U.\u0275fac=function(de){return new(de||U)(g.LFG(g.R0b))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();function uo(){const U=globalThis.\u0275AngularFireScheduler;if(!U)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return U}function zu(U){return U.pipe((0,ta.Q)(uo().outsideAngular))}function Dl(U){return uo(),function Ia(U){return function(de){return(de=de.lift(new hl(U.ngZone))).pipe((0,Sl.R)(U.outsideAngular),(0,ta.Q)(U.insideAngular))}}(uo())(U)}},2090:(Wn,Dt,j)=>{j.d(Dt,{$s:()=>Vn,BH:()=>or,DV:()=>Yr,G6:()=>St,GJ:()=>ir,L:()=>qe,LL:()=>Vt,P0:()=>Rt,Pz:()=>sr,Sg:()=>mn,UG:()=>un,UI:()=>er,US:()=>He,Wl:()=>ut,Yr:()=>Ge,ZB:()=>Pe,ZR:()=>mr,aH:()=>Sn,b$:()=>tn,cI:()=>At,dS:()=>gi,eu:()=>Ht,g5:()=>he,gK:()=>Hr,gQ:()=>nt,h$:()=>dt,hl:()=>on,hu:()=>k,jU:()=>In,m9:()=>Vr,ne:()=>ct,p$:()=>Ne,pd:()=>cn,r3:()=>ur,ru:()=>Ot,tV:()=>at,uI:()=>Et,ug:()=>Bn,vZ:()=>Wr,w1:()=>dn,w9:()=>Hn,xO:()=>is,xb:()=>oi,z$:()=>Tn,zI:()=>Oe,zd:()=>Yi});const k=function(Qe,Ue){if(!Qe)throw he(Ue)},he=function(Qe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Qe)},ae=function(Qe){const Ue=[];let ft=0;for(let ln=0;ln<Qe.length;ln++){let Ft=Qe.charCodeAt(ln);Ft<128?Ue[ft++]=Ft:Ft<2048?(Ue[ft++]=Ft>>6|192,Ue[ft++]=63&Ft|128):55296==(64512&Ft)&&ln+1<Qe.length&&56320==(64512&Qe.charCodeAt(ln+1))?(Ft=65536+((1023&Ft)<<10)+(1023&Qe.charCodeAt(++ln)),Ue[ft++]=Ft>>18|240,Ue[ft++]=Ft>>12&63|128,Ue[ft++]=Ft>>6&63|128,Ue[ft++]=63&Ft|128):(Ue[ft++]=Ft>>12|224,Ue[ft++]=Ft>>6&63|128,Ue[ft++]=63&Ft|128)}return Ue},He={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Qe,Ue){if(!Array.isArray(Qe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ft=Ue?this.byteToCharMapWebSafe_:this.byteToCharMap_,ln=[];for(let Ft=0;Ft<Qe.length;Ft+=3){const ze=Qe[Ft],Me=Ft+1<Qe.length,Ae=Me?Qe[Ft+1]:0,gt=Ft+2<Qe.length,sn=gt?Qe[Ft+2]:0;let ai=(15&Ae)<<2|sn>>6,Qi=63&sn;gt||(Qi=64,Me||(ai=64)),ln.push(ft[ze>>2],ft[(3&ze)<<4|Ae>>4],ft[ai],ft[Qi])}return ln.join("")},encodeString(Qe,Ue){return this.HAS_NATIVE_SUPPORT&&!Ue?btoa(Qe):this.encodeByteArray(ae(Qe),Ue)},decodeString(Qe,Ue){return this.HAS_NATIVE_SUPPORT&&!Ue?atob(Qe):function(Qe){const Ue=[];let ft=0,ln=0;for(;ft<Qe.length;){const Ft=Qe[ft++];if(Ft<128)Ue[ln++]=String.fromCharCode(Ft);else if(Ft>191&&Ft<224){const ze=Qe[ft++];Ue[ln++]=String.fromCharCode((31&Ft)<<6|63&ze)}else if(Ft>239&&Ft<365){const gt=((7&Ft)<<18|(63&Qe[ft++])<<12|(63&Qe[ft++])<<6|63&Qe[ft++])-65536;Ue[ln++]=String.fromCharCode(55296+(gt>>10)),Ue[ln++]=String.fromCharCode(56320+(1023&gt))}else{const ze=Qe[ft++],Me=Qe[ft++];Ue[ln++]=String.fromCharCode((15&Ft)<<12|(63&ze)<<6|63&Me)}}return Ue.join("")}(this.decodeStringToByteArray(Qe,Ue))},decodeStringToByteArray(Qe,Ue){this.init_();const ft=Ue?this.charToByteMapWebSafe_:this.charToByteMap_,ln=[];for(let Ft=0;Ft<Qe.length;){const ze=ft[Qe.charAt(Ft++)],Ae=Ft<Qe.length?ft[Qe.charAt(Ft)]:0;++Ft;const sn=Ft<Qe.length?ft[Qe.charAt(Ft)]:64;++Ft;const Yn=Ft<Qe.length?ft[Qe.charAt(Ft)]:64;if(++Ft,null==ze||null==Ae||null==sn||null==Yn)throw Error();ln.push(ze<<2|Ae>>4),64!==sn&&(ln.push(Ae<<4&240|sn>>2),64!==Yn&&ln.push(sn<<6&192|Yn))}return ln},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Qe=0;Qe<this.ENCODED_VALS.length;Qe++)this.byteToCharMap_[Qe]=this.ENCODED_VALS.charAt(Qe),this.charToByteMap_[this.byteToCharMap_[Qe]]=Qe,this.byteToCharMapWebSafe_[Qe]=this.ENCODED_VALS_WEBSAFE.charAt(Qe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Qe]]=Qe,Qe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Qe)]=Qe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Qe)]=Qe)}}},dt=function(Qe){const Ue=ae(Qe);return He.encodeByteArray(Ue,!0)},qe=function(Qe){return dt(Qe).replace(/\./g,"")},at=function(Qe){try{return He.decodeString(Qe,!0)}catch(Ue){console.error("base64Decode failed: ",Ue)}return null};function Ne(Qe){return Pe(void 0,Qe)}function Pe(Qe,Ue){if(!(Ue instanceof Object))return Ue;switch(Ue.constructor){case Date:return new Date(Ue.getTime());case Object:void 0===Qe&&(Qe={});break;case Array:Qe=[];break;default:return Ue}for(const ft in Ue)!Ue.hasOwnProperty(ft)||!bt(ft)||(Qe[ft]=Pe(Qe[ft],Ue[ft]));return Qe}function bt(Qe){return"__proto__"!==Qe}function Tn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Et(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function un(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Qe){return!1}}function In(){return"object"==typeof self&&self.self===self}function Ot(){const Qe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Qe&&void 0!==Qe.id}function tn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dn(){const Qe=Tn();return Qe.indexOf("MSIE ")>=0||Qe.indexOf("Trident/")>=0}function Ge(){return!1}function St(){return!un()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function on(){try{return"object"==typeof indexedDB}catch(Qe){return!1}}function Ht(){return new Promise((Qe,Ue)=>{try{let ft=!0;const ln="validate-browser-context-for-indexeddb-analytics-module",Ft=self.indexedDB.open(ln);Ft.onsuccess=()=>{Ft.result.close(),ft||self.indexedDB.deleteDatabase(ln),Qe(!0)},Ft.onupgradeneeded=()=>{ft=!1},Ft.onerror=()=>{var ze;Ue((null===(ze=Ft.error)||void 0===ze?void 0:ze.message)||"")}}catch(ft){Ue(ft)}})}function Oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Lt=()=>{try{return function Bt(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Qe=process.env.__FIREBASE_DEFAULTS__;return Qe?JSON.parse(Qe):void 0})()||(()=>{if("undefined"==typeof document)return;let Qe;try{Qe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ft){return}const Ue=Qe&&at(Qe[1]);return Ue&&JSON.parse(Ue)})()}catch(Qe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Qe}`)}},Rt=Qe=>{const Ue=(Qe=>{var Ue,ft;return null===(ft=null===(Ue=Lt())||void 0===Ue?void 0:Ue.emulatorHosts)||void 0===ft?void 0:ft[Qe]})(Qe);if(!Ue)return;const ft=Ue.lastIndexOf(":");if(ft<=0||ft+1===Ue.length)throw new Error(`Invalid host ${Ue} with no separate hostname and port!`);const ln=parseInt(Ue.substring(ft+1),10);return"["===Ue[0]?[Ue.substring(1,ft-1),ln]:[Ue.substring(0,ft),ln]},Sn=()=>{var Qe;return null===(Qe=Lt())||void 0===Qe?void 0:Qe.config},sr=Qe=>{var Ue;return null===(Ue=Lt())||void 0===Ue?void 0:Ue[`_${Qe}`]};class or{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ue,ft)=>{this.resolve=Ue,this.reject=ft})}wrapCallback(Ue){return(ft,ln)=>{ft?this.reject(ft):this.resolve(ln),"function"==typeof Ue&&(this.promise.catch(()=>{}),1===Ue.length?Ue(ft):Ue(ft,ln))}}}function mn(Qe,Ue){if(Qe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ln=Ue||"demo-project",Ft=Qe.iat||0,ze=Qe.sub||Qe.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${ln}`,aud:ln,iat:Ft,exp:Ft+3600,auth_time:Ft,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},Qe);return[qe(JSON.stringify({alg:"none",type:"JWT"})),qe(JSON.stringify(Me)),""].join(".")}class mr extends Error{constructor(Ue,ft,ln){super(ft),this.code=Ue,this.customData=ln,this.name="FirebaseError",Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vt.prototype.create)}}class Vt{constructor(Ue,ft,ln){this.service=Ue,this.serviceName=ft,this.errors=ln}create(Ue,...ft){const ln=ft[0]||{},Ft=`${this.service}/${Ue}`,ze=this.errors[Ue],Me=ze?function kt(Qe,Ue){return Qe.replace(it,(ft,ln)=>{const Ft=Ue[ln];return null!=Ft?String(Ft):`<${ln}?>`})}(ze,ln):"Error";return new mr(Ft,`${this.serviceName}: ${Me} (${Ft}).`,ln)}}const it=/\{\$([^}]+)}/g;function At(Qe){return JSON.parse(Qe)}function ut(Qe){return JSON.stringify(Qe)}const Qt=function(Qe){let Ue={},ft={},ln={},Ft="";try{const ze=Qe.split(".");Ue=At(at(ze[0])||""),ft=At(at(ze[1])||""),Ft=ze[2],ln=ft.d||{},delete ft.d}catch(ze){}return{header:Ue,claims:ft,data:ln,signature:Ft}},Hn=function(Qe){const ft=Qt(Qe).claims;return!!ft&&"object"==typeof ft&&ft.hasOwnProperty("iat")},ir=function(Qe){const Ue=Qt(Qe).claims;return"object"==typeof Ue&&!0===Ue.admin};function ur(Qe,Ue){return Object.prototype.hasOwnProperty.call(Qe,Ue)}function Yr(Qe,Ue){if(Object.prototype.hasOwnProperty.call(Qe,Ue))return Qe[Ue]}function oi(Qe){for(const Ue in Qe)if(Object.prototype.hasOwnProperty.call(Qe,Ue))return!1;return!0}function er(Qe,Ue,ft){const ln={};for(const Ft in Qe)Object.prototype.hasOwnProperty.call(Qe,Ft)&&(ln[Ft]=Ue.call(ft,Qe[Ft],Ft,Qe));return ln}function Wr(Qe,Ue){if(Qe===Ue)return!0;const ft=Object.keys(Qe),ln=Object.keys(Ue);for(const Ft of ft){if(!ln.includes(Ft))return!1;const ze=Qe[Ft],Me=Ue[Ft];if(xr(ze)&&xr(Me)){if(!Wr(ze,Me))return!1}else if(ze!==Me)return!1}for(const Ft of ln)if(!ft.includes(Ft))return!1;return!0}function xr(Qe){return null!==Qe&&"object"==typeof Qe}function is(Qe){const Ue=[];for(const[ft,ln]of Object.entries(Qe))Array.isArray(ln)?ln.forEach(Ft=>{Ue.push(encodeURIComponent(ft)+"="+encodeURIComponent(Ft))}):Ue.push(encodeURIComponent(ft)+"="+encodeURIComponent(ln));return Ue.length?"&"+Ue.join("&"):""}function Yi(Qe){const Ue={};return Qe.replace(/^\?/,"").split("&").forEach(ln=>{if(ln){const[Ft,ze]=ln.split("=");Ue[decodeURIComponent(Ft)]=decodeURIComponent(ze)}}),Ue}function cn(Qe){const Ue=Qe.indexOf("?");if(!Ue)return"";const ft=Qe.indexOf("#",Ue);return Qe.substring(Ue,ft>0?ft:void 0)}class nt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ue=1;Ue<this.blockSize;++Ue)this.pad_[Ue]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ue,ft){ft||(ft=0);const ln=this.W_;if("string"==typeof Ue)for(let Yn=0;Yn<16;Yn++)ln[Yn]=Ue.charCodeAt(ft)<<24|Ue.charCodeAt(ft+1)<<16|Ue.charCodeAt(ft+2)<<8|Ue.charCodeAt(ft+3),ft+=4;else for(let Yn=0;Yn<16;Yn++)ln[Yn]=Ue[ft]<<24|Ue[ft+1]<<16|Ue[ft+2]<<8|Ue[ft+3],ft+=4;for(let Yn=16;Yn<80;Yn++){const ai=ln[Yn-3]^ln[Yn-8]^ln[Yn-14]^ln[Yn-16];ln[Yn]=4294967295&(ai<<1|ai>>>31)}let sn,vr,Ft=this.chain_[0],ze=this.chain_[1],Me=this.chain_[2],Ae=this.chain_[3],gt=this.chain_[4];for(let Yn=0;Yn<80;Yn++){Yn<40?Yn<20?(sn=Ae^ze&(Me^Ae),vr=1518500249):(sn=ze^Me^Ae,vr=1859775393):Yn<60?(sn=ze&Me|Ae&(ze|Me),vr=2400959708):(sn=ze^Me^Ae,vr=3395469782);const ai=(Ft<<5|Ft>>>27)+sn+gt+vr+ln[Yn]&4294967295;gt=Ae,Ae=Me,Me=4294967295&(ze<<30|ze>>>2),ze=Ft,Ft=ai}this.chain_[0]=this.chain_[0]+Ft&4294967295,this.chain_[1]=this.chain_[1]+ze&4294967295,this.chain_[2]=this.chain_[2]+Me&4294967295,this.chain_[3]=this.chain_[3]+Ae&4294967295,this.chain_[4]=this.chain_[4]+gt&4294967295}update(Ue,ft){if(null==Ue)return;void 0===ft&&(ft=Ue.length);const ln=ft-this.blockSize;let Ft=0;const ze=this.buf_;let Me=this.inbuf_;for(;Ft<ft;){if(0===Me)for(;Ft<=ln;)this.compress_(Ue,Ft),Ft+=this.blockSize;if("string"==typeof Ue){for(;Ft<ft;)if(ze[Me]=Ue.charCodeAt(Ft),++Me,++Ft,Me===this.blockSize){this.compress_(ze),Me=0;break}}else for(;Ft<ft;)if(ze[Me]=Ue[Ft],++Me,++Ft,Me===this.blockSize){this.compress_(ze),Me=0;break}}this.inbuf_=Me,this.total_+=ft}digest(){const Ue=[];let ft=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ft=this.blockSize-1;Ft>=56;Ft--)this.buf_[Ft]=255&ft,ft/=256;this.compress_(this.buf_);let ln=0;for(let Ft=0;Ft<5;Ft++)for(let ze=24;ze>=0;ze-=8)Ue[ln]=this.chain_[Ft]>>ze&255,++ln;return Ue}}function ct(Qe,Ue){const ft=new Gt(Qe,Ue);return ft.subscribe.bind(ft)}class Gt{constructor(Ue,ft){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ft,this.task.then(()=>{Ue(this)}).catch(ln=>{this.error(ln)})}next(Ue){this.forEachObserver(ft=>{ft.next(Ue)})}error(Ue){this.forEachObserver(ft=>{ft.error(Ue)}),this.close(Ue)}complete(){this.forEachObserver(Ue=>{Ue.complete()}),this.close()}subscribe(Ue,ft,ln){let Ft;if(void 0===Ue&&void 0===ft&&void 0===ln)throw new Error("Missing Observer.");Ft=function En(Qe,Ue){if("object"!=typeof Qe||null===Qe)return!1;for(const ft of Ue)if(ft in Qe&&"function"==typeof Qe[ft])return!0;return!1}(Ue,["next","error","complete"])?Ue:{next:Ue,error:ft,complete:ln},void 0===Ft.next&&(Ft.next=qn),void 0===Ft.error&&(Ft.error=qn),void 0===Ft.complete&&(Ft.complete=qn);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ft.error(this.finalError):Ft.complete()}catch(Me){}}),this.observers.push(Ft),ze}unsubscribeOne(Ue){void 0===this.observers||void 0===this.observers[Ue]||(delete this.observers[Ue],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ue){if(!this.finalized)for(let ft=0;ft<this.observers.length;ft++)this.sendOne(ft,Ue)}sendOne(Ue,ft){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ue])try{ft(this.observers[Ue])}catch(ln){"undefined"!=typeof console&&console.error&&console.error(ln)}})}close(Ue){this.finalized||(this.finalized=!0,void 0!==Ue&&(this.finalError=Ue),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qn(){}function Hr(Qe,Ue){return`${Qe} failed: ${Ue} argument `}const gi=function(Qe){const Ue=[];let ft=0;for(let ln=0;ln<Qe.length;ln++){let Ft=Qe.charCodeAt(ln);if(Ft>=55296&&Ft<=56319){const ze=Ft-55296;ln++,k(ln<Qe.length,"Surrogate pair missing trail surrogate."),Ft=65536+(ze<<10)+(Qe.charCodeAt(ln)-56320)}Ft<128?Ue[ft++]=Ft:Ft<2048?(Ue[ft++]=Ft>>6|192,Ue[ft++]=63&Ft|128):Ft<65536?(Ue[ft++]=Ft>>12|224,Ue[ft++]=Ft>>6&63|128,Ue[ft++]=63&Ft|128):(Ue[ft++]=Ft>>18|240,Ue[ft++]=Ft>>12&63|128,Ue[ft++]=Ft>>6&63|128,Ue[ft++]=63&Ft|128)}return Ue},Bn=function(Qe){let Ue=0;for(let ft=0;ft<Qe.length;ft++){const ln=Qe.charCodeAt(ft);ln<128?Ue++:ln<2048?Ue+=2:ln>=55296&&ln<=56319?(Ue+=4,ft++):Ue+=3}return Ue};function Vn(Qe,Ue=1e3,ft=2){const ln=Ue*Math.pow(ft,Qe),Ft=Math.round(.5*ln*(Math.random()-.5)*2);return Math.min(144e5,ln+Ft)}function Vr(Qe){return Qe&&Qe._delegate?Qe._delegate:Qe}},5089:(Wn,Dt,j)=>{j.d(Dt,{e:()=>He});var g=j(2340),k=j(5e3),he=j(520),ae=j(6115),je=j(8177);let He=(()=>{class dt{constructor(at,Ne,Pe){this.http=at,this.router=Ne,this.cartService=Pe,this.logoutloading=!1}login(at){return this.http.post(`${g.N.apiUrl}login`,at)}register(at){return this.http.post(`${g.N.apiUrl}register`,at)}sent_otp(at){return this.http.post(`${g.N.apiUrl}sent_otp`,at)}verify_otp(at){return this.http.post(`${g.N.apiUrl}verify_otp`,at)}resetPassword(at){return this.http.post(`${g.N.apiUrl}reset_password`,at)}contact_us(at){return this.http.post(`${g.N.apiUrl}contact_us`,at)}logout(){this.logoutloading=!0,this.http.post(`${g.N.apiUrl}logout`,{}).subscribe(at=>{this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]),this.logoutloading=!1})}set_online_offline(at){this.http.post(`${g.N.apiUrl}set_online_offline`,{is_online:at}).subscribe(Ne=>console.log())}}return dt.\u0275fac=function(at){return new(at||dt)(k.LFG(he.eN),k.LFG(ae.F0),k.LFG(je.N))},dt.\u0275prov=k.Yz7({token:dt,factory:dt.\u0275fac,providedIn:"root"}),dt})()},8177:(Wn,Dt,j)=>{j.d(Dt,{N:()=>je});var g=j(1135),k=j(2340),he=j(5e3),ae=j(520);let je=(()=>{class He{constructor(qe){this.http=qe,this.cartItems=new g.X(null),this.discount=new g.X(0),this.showCopon=!1,this.coponid=new g.X(null)}addToCart(qe){return this.http.post(`${k.N.apiUrl}add_to_cart`,qe)}deleteItemFromCart(qe){return this.http.post(`${k.N.apiUrl}delete_from_cart`,qe)}getCart(){return this.http.get(`${k.N.apiUrl}my_cart`).subscribe(qe=>{var at,Ne;(null===(at=null==qe?void 0:qe.data)||void 0===at?void 0:at.cartdetails)?this.cartItems.next(null===(Ne=null==qe?void 0:qe.data)||void 0===Ne?void 0:Ne.cartdetails):this.cartItems.next([])})}getcartProducts(){return this.http.get(`${k.N.apiUrl}my_cart`)}getRecomnded(){return this.http.get(`${k.N.apiUrl}recommed_materials_offers`)}verifyCopon(qe){return this.http.get(`${k.N.apiUrl}coupon/${qe}`)}addOrder(qe){return this.http.post(`${k.N.apiUrl}add_order`,qe)}}return He.\u0275fac=function(qe){return new(qe||He)(he.LFG(ae.eN))},He.\u0275prov=he.Yz7({token:He,factory:He.\u0275fac,providedIn:"root"}),He})()},452:(Wn,Dt,j)=>{j.d(Dt,{g:()=>ae});var g=j(2340),k=j(5e3),he=j(520);let ae=(()=>{class je{constructor(dt){this.http=dt}getSettings(){return this.http.get(`${g.N.apiUrl}settings`)}}return je.\u0275fac=function(dt){return new(dt||je)(k.LFG(he.eN))},je.\u0275prov=k.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})()},6290:(Wn,Dt,j)=>{j.d(Dt,{G:()=>je});var g=j(5e3),k=j(9808);function he(He,dt){if(1&He&&g._UZ(0,"img",3),2&He){const qe=g.oxw();g.Q6J("src",qe.imgSrc,g.LSH)}}function ae(He,dt){if(1&He&&(g.TgZ(0,"div",4)(1,"h1",5),g._uU(2),g.qZA()()),2&He){const qe=g.oxw();g.Udp("background-image",qe.urll()),g.xp6(2),g.hij(" ",qe.text," ")}}let je=(()=>{class He{constructor(){this.imgSrc="",this.text=""}ngOnInit(){}urll(){return`url(${this.imgSrc})`}}return He.\u0275fac=function(qe){return new(qe||He)},He.\u0275cmp=g.Xpm({type:He,selectors:[["app-header"]],inputs:{imgSrc:"imgSrc",text:"text"},decls:3,vars:2,consts:[[1,"mb-4","position-relative"],["alt","\u062f\u0631\u0627\u0633\u062a\u064a","style","max-height: 200px;","class","img-fluid w-100",3,"src",4,"ngIf"],["style","\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 150px;\n\n    ","class","text-center headercstm",3,"backgroundImage",4,"ngIf"],["alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"img-fluid","w-100",2,"max-height","200px",3,"src"],[1,"text-center","headercstm",2,"display","flex","justify-content","center","align-items","center","width","100%","height","150px"],[1,"h1cstm",2,"color","white"]],template:function(qe,at){1&qe&&(g.TgZ(0,"header",0),g.YNc(1,he,1,1,"img",1),g.YNc(2,ae,3,3,"div",2),g.qZA()),2&qe&&(g.xp6(1),g.Q6J("ngIf",!at.text),g.xp6(1),g.Q6J("ngIf",at.text))},directives:[k.O5],styles:[".h1cstm[_ngcontent-%COMP%]{font-size:50px}@media only screen and (max-width: 600px){.h1cstm[_ngcontent-%COMP%]{font-size:30px}}@media only screen and (max-width: 768px){.headercstm[_ngcontent-%COMP%]{background-position:center}}"]}),He})()},4466:(Wn,Dt,j)=>{j.d(Dt,{m:()=>at});var g=j(9808),k=j(6115),he=j(2382),ae=j(520),je=j(2290),He=j(9485),dt=j(377),qe=j(5e3);let at=(()=>{class Ne{}return Ne.\u0275fac=function(bt){return new(bt||Ne)},Ne.\u0275mod=qe.oAB({type:Ne}),Ne.\u0275inj=qe.cJS({providers:[g.uU],imports:[[dt.TE,g.ez,k.Bz,he.UX,he.u5,ae.JF,je.Rh.forRoot(),He.kz],dt.TE,He.kz,he.UX,he.u5,ae.JF,je.Rh]}),Ne})()},2340:(Wn,Dt,j)=>{j.d(Dt,{N:()=>g});const g={production:!0,apiUrl:"https://drastiiq8.com/dashboard/public/api/"}},1201:(Wn,Dt,j)=>{var g=j(2313),k=j(5e3),he=j(6115);let ae=(()=>{class Z{constructor(T){this.title=T}ngOnInit(){this.title.setTitle("\u0627\u0644\u0635\u0641\u062d\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629 - \u062f\u0631\u0627\u0633\u062a\u064a")}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(g.Dx))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-not-found"]],decls:5,vars:0,consts:[[1,"conditions","py-5",2,"min-height","100vh"],[1,"container"],[1,"bg-white","rounded","p-5"],[2,"font-size","30px"]],template:function(T,F){1&T&&(k.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),k._uU(4," \u0639\u0641\u0648\u0627! \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a\u0647\u0627. "),k.qZA()()()())},styles:[""]}),Z})();var je=j(2382),He=j(5089),dt=j(2290),qe=j(6290),at=j(9808);function Ne(Z,C){1&Z&&(k.TgZ(0,"p",14),k._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),k.qZA())}function Pe(Z,C){1&Z&&(k.TgZ(0,"p",14),k._uU(1," \u0623\u062f\u062e\u0644 \u0628\u0631\u064a\u062f \u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0635\u0627\u0644\u062d "),k.qZA())}function bt(Z,C){1&Z&&(k.TgZ(0,"p",14),k._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),k.qZA())}let Tn=(()=>{class Z{constructor(T,F,ue,Ie){this.fb=T,this.authService=F,this.router=ue,this.toastr=Ie,this.submitLoading=!1,this.submited=!1}ngOnInit(){this.sendnowForm=this.fb.group({name:["",je.kI.required],email:["",[je.kI.required,je.kI.email]],message:["",je.kI.required]})}senMsg(){this.submited=!0,this.sendnowForm.valid&&(this.submitLoading=!0,this.authService.contact_us(this.sendnowForm.value).subscribe(T=>{this.toastr.success("\u062a\u0645 \u0627\u0644\u0627\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d"),this.router.navigate(["/"])},T=>{this.submitLoading=!1}))}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(je.qu),k.Y36(He.e),k.Y36(he.F0),k.Y36(dt._W))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-send-now"]],decls:31,vars:5,consts:[["text","\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627","imgSrc","assets/Kv8tXk2GKST8C32eQc751.jpeg"],[1,"container","my-5",2,"min-height","100vh"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-5"],[1,"redstar"],["formControlName","name","type","text",1,"form-control"],["class","text-danger my-1",4,"ngIf"],["formControlName","email","type","email",1,"form-control"],["formControlName","message","rows","5",1,"form-control"],[1,"text-center"],[1,"bluButton",3,"disabled"],[1,"text-danger","my-1"]],template:function(T,F){1&T&&(k._UZ(0,"app-header",0),k.TgZ(1,"section",1)(2,"div",2),k._UZ(3,"div",3),k.TgZ(4,"div",4)(5,"form",5),k.NdJ("ngSubmit",function(){return F.senMsg()}),k.TgZ(6,"div",6)(7,"label"),k._uU(8,"\u0627\u0644\u0623\u0633\u0645 "),k.TgZ(9,"span",7),k._uU(10,"*"),k.qZA()(),k._UZ(11,"input",8),k.YNc(12,Ne,2,0,"p",9),k.qZA(),k.TgZ(13,"div",6)(14,"label"),k._uU(15,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0623\u0644\u0643\u062a\u0631\u0648\u0646\u064a "),k.TgZ(16,"span",7),k._uU(17,"*"),k.qZA()(),k._UZ(18,"input",10),k.YNc(19,Pe,2,0,"p",9),k.qZA(),k.TgZ(20,"div",6)(21,"label"),k._uU(22,"\u0627\u0644\u0631\u0633\u0627\u0644\u0629 "),k.TgZ(23,"span",7),k._uU(24,"*"),k.qZA()(),k._UZ(25,"textarea",11),k.YNc(26,bt,2,0,"p",9),k.qZA(),k.TgZ(27,"div",12)(28,"button",13),k._uU(29," \u0623\u0631\u0633\u0627\u0644 "),k.qZA()()()(),k._UZ(30,"div",3),k.qZA()()),2&T&&(k.xp6(5),k.Q6J("formGroup",F.sendnowForm),k.xp6(7),k.Q6J("ngIf",null!=F.sendnowForm.controls.name.errors&&F.sendnowForm.controls.name.touched||null!=F.sendnowForm.controls.name.errors&&F.submited),k.xp6(7),k.Q6J("ngIf",null!=F.sendnowForm.controls.email.errors&&F.sendnowForm.controls.email.touched||null!=F.sendnowForm.controls.email.errors&&F.submited),k.xp6(7),k.Q6J("ngIf",null!=F.sendnowForm.controls.message.errors&&F.sendnowForm.controls.message.touched||null!=F.sendnowForm.controls.message.errors&&F.submited),k.xp6(2),k.Q6J("disabled",F.submitLoading))},directives:[qe.G,je._Y,je.JL,je.sg,je.Fj,je.JJ,je.u,at.O5],styles:[""]}),Z})(),Et=(()=>{class Z{constructor(T){this.router=T}canActivate(T,F){return!!localStorage.getItem("drastitoken")||(this.router.navigate(["/auth/login"]),!1)}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(he.F0))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})();const In=[{path:"",loadChildren:()=>j.e(954).then(j.bind(j,3954)).then(Z=>Z.HomeModule)},{path:"auth",loadChildren:()=>j.e(133).then(j.bind(j,1133)).then(Z=>Z.AuthModule),canActivate:[(()=>{class Z{constructor(T){this.router=T}canActivate(T,F){return!localStorage.getItem("drastitoken")||(this.router.navigate(["/"]),!1)}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(he.F0))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()]},{path:"stage/:id",loadChildren:()=>Promise.all([j.e(592),j.e(362)]).then(j.bind(j,362)).then(Z=>Z.StageDetailsModule)},{path:"classes/:id/:spe",loadChildren:()=>Promise.all([j.e(592),j.e(854)]).then(j.bind(j,2532)).then(Z=>Z.ClassesModule)},{path:"specialist/:id/:specialist",loadChildren:()=>Promise.all([j.e(592),j.e(667)]).then(j.bind(j,5667)).then(Z=>Z.HasSpecialistModule)},{path:"class-details/:id/:type/:class/:spe",loadChildren:()=>Promise.all([j.e(955),j.e(592),j.e(804)]).then(j.bind(j,5804)).then(Z=>Z.ClassDetailsModule)},{path:"conditions",loadChildren:()=>j.e(36).then(j.bind(j,5036)).then(Z=>Z.ConditionsModule)},{path:"subject-videos/:id/:lessonid/:unitid",canActivate:[Et],loadChildren:()=>Promise.all([j.e(955),j.e(324)]).then(j.bind(j,2324)).then(Z=>Z.SubjectVideosModule)},{path:"cart",loadChildren:()=>Promise.all([j.e(592),j.e(764)]).then(j.bind(j,3764)).then(Z=>Z.CartModule)},{path:"checkout",loadChildren:()=>Promise.all([j.e(133),j.e(592),j.e(228)]).then(j.bind(j,3228)).then(Z=>Z.CheckoutModule)},{path:"my-courses",canActivate:[Et],loadChildren:()=>Promise.all([j.e(592),j.e(769)]).then(j.bind(j,9769)).then(Z=>Z.MyCoursesModule)},{path:"support",component:Tn},{path:"**",component:ae}];let Ot=(()=>{class Z{}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=k.oAB({type:Z}),Z.\u0275inj=k.cJS({imports:[[he.Bz.forRoot(In,{initialNavigation:"enabled",scrollPositionRestoration:"enabled"})],he.Bz]}),Z})();var tn=j(259),Ln=j(6197),dn=j(8177);function xe(Z,C){1&Z&&(k.TgZ(0,"a",19),k._uU(1," \u0645\u0648\u0627\u062f\u064a "),k.qZA())}function Ge(Z,C){1&Z&&k._UZ(0,"span",16)}function St(Z,C){1&Z&&(k.TgZ(0,"a",20),k._uU(1," \u0645\u0648\u0627\u062f\u064a "),k.qZA())}function on(Z,C){1&Z&&k._UZ(0,"span",16)}function Ht(Z,C){1&Z&&(k.TgZ(0,"a",21),k._uU(1," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 "),k.qZA())}function Oe(Z,C){if(1&Z){const T=k.EpF();k.TgZ(0,"button",22),k.NdJ("click",function(){return k.CHM(T),k.oxw().authService.logout()}),k._uU(1," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c "),k.qZA()}if(2&Z){const T=k.oxw();k.Q6J("disabled",T.authService.logoutloading)}}let Bt=(()=>{class Z{constructor(T,F){this.cartService=T,this.authService=F,this.cartLength=0}ngOnInit(){localStorage.getItem("drastitoken")?this.cartService.getCart():this.cartService.cartItems.next([]),this.cartService.cartItems.subscribe(T=>{T&&(this.cartLength=null==T?void 0:T.length)})}islogin(){return!!localStorage.getItem("drastitoken")}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(dn.N),k.Y36(He.e))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-navbar"]],decls:27,vars:8,consts:[[1,"container","mt-2","d-md-none",2,"direction","ltr","text-align","left"],[2,"direction","ltr","text-align","left"],["aria-label","\u0645\u0648\u0627\u062f\u064a","class","text-primary ","routerLink","/my-courses",4,"ngIf"],["class","mx-2",4,"ngIf"],["aria-label","\u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642","routerLink","/cart",1,""],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag-check","text-primary"],["fill-rule","evenodd","d","M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z"],["d","M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"],[1,"mx-1","cartCount"],[1,"container","flx"],[1,"logoParent"],["routerLink","/","aria-label","\u062f\u0631\u0627\u0633\u062a\u064a"],["src","assets/logo.png","alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"mainlogo"],[1,"loginParent"],["aria-label","\u0645\u0648\u0627\u062f\u064a","class","text-primary d-none d-md-inline-block","routerLink","/my-courses",4,"ngIf"],["aria-label","\u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642","routerLink","/cart",1,"d-none","d-md-inline-block"],[1,"mx-2"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644","routerLink","/auth/login","class","bluButton login",4,"ngIf"],["style","cursor: pointer;","aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c","class","bluButton logout",3,"disabled","click",4,"ngIf"],["aria-label","\u0645\u0648\u0627\u062f\u064a","routerLink","/my-courses",1,"text-primary"],["aria-label","\u0645\u0648\u0627\u062f\u064a","routerLink","/my-courses",1,"text-primary","d-none","d-md-inline-block"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644","routerLink","/auth/login",1,"bluButton","login"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",1,"bluButton","logout",2,"cursor","pointer",3,"disabled","click"]],template:function(T,F){1&T&&(k.TgZ(0,"nav")(1,"div",0)(2,"div",1),k.YNc(3,xe,2,0,"a",2),k.YNc(4,Ge,1,0,"span",3),k.TgZ(5,"a",4),k.O4$(),k.TgZ(6,"svg",5),k._UZ(7,"path",6)(8,"path",7),k.qZA(),k.kcU(),k.TgZ(9,"small",8),k._uU(10),k.qZA()()()(),k.TgZ(11,"div",9)(12,"div",10)(13,"a",11),k._UZ(14,"img",12),k.qZA()(),k.TgZ(15,"div",13),k.YNc(16,St,2,0,"a",14),k.YNc(17,on,1,0,"span",3),k.TgZ(18,"a",15),k.O4$(),k.TgZ(19,"svg",5),k._UZ(20,"path",6)(21,"path",7),k.qZA(),k.kcU(),k.TgZ(22,"small",8),k._uU(23),k.qZA()(),k._UZ(24,"span",16),k.YNc(25,Ht,2,0,"a",17),k.YNc(26,Oe,2,1,"button",18),k.qZA()()()),2&T&&(k.xp6(3),k.Q6J("ngIf",F.islogin()),k.xp6(1),k.Q6J("ngIf",F.islogin()),k.xp6(6),k.Oqu(F.cartLength),k.xp6(6),k.Q6J("ngIf",F.islogin()),k.xp6(1),k.Q6J("ngIf",F.islogin()),k.xp6(6),k.Oqu(F.cartLength),k.xp6(2),k.Q6J("ngIf",!F.islogin()),k.xp6(1),k.Q6J("ngIf",F.islogin()))},directives:[at.O5,he.yS],styles:[""]}),Z})();var Re=j(452);function wt(Z,C){1&Z&&(k.TgZ(0,"tr",15)(1,"td"),k._uU(2,"94181196 965+"),k.qZA(),k.TgZ(3,"td"),k._UZ(4,"i",11),k.qZA()())}let Je=(()=>{class Z{constructor(T,F){this.settingsService=T,this.cartService=F}ngOnInit(){this.settingsService.getSettings().subscribe(T=>{var F;this.settings=null==T?void 0:T.data,1==(null===(F=null==T?void 0:T.data)||void 0===F?void 0:F.show_coupon)&&(this.cartService.showCopon=!0)})}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(Re.g),k.Y36(dn.N))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-footer"]],decls:38,vars:1,consts:[[1,"py-4"],[1,"container"],[1,"row"],[1,"col-md-4","mb-3"],[1,"text-center"],["src","assets/footerlogo.png","alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"img-fluid"],[1,"icons","text-center"],["aria-label","\u0627\u0646\u0633\u062a\u062c\u0631\u0627\u0645","target","_blank","href","http://a7.ae/r/wU7ZW4"],[1,"fa-brands","fa-instagram"],[1,"mx-3"],["aria-label","\u0648\u0627\u062a\u0633\u0627\u0628","target","_blank","href","http://a7.ae/r/fNYKA7"],[1,"fa-brands","fa-whatsapp"],[1,"pt-4"],[1,"mb-3"],["class","pb-5",4,"ngIf"],[1,"pb-5"],[1,"fa-solid","fa-location-dot"],["routerLink","/conditions",1,"text-white"],[1,"fa-solid","fa-file-lines"],[1,"h-100","d-flex","align-items-center"],["target","_blank","href","https://play.google.com/store/apps/details?id=com.codepirates.drasti&hl=en_GB&gl=KW",1,"d-inline-block","mb-3"],["src","assets/googleplay.png","alt","drasti-googleplay",2,"width","100px"],[1,"mx-2"],["target","_blank","href","https://apps.apple.com/eg/app/drasti/id1643300637",1,"d-inline-block","mb-3"],["src","assets/appstore.png","alt","drasti-appstore",2,"width","100px"]],template:function(T,F){1&T&&(k.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4),k._UZ(6,"img",5),k.qZA(),k.TgZ(7,"div",6)(8,"a",7),k._UZ(9,"i",8),k.qZA(),k._UZ(10,"span",9),k.TgZ(11,"a",10),k._UZ(12,"i",11),k.qZA()()()(),k.TgZ(13,"div",3)(14,"div",12)(15,"h2",13),k._uU(16,"\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627"),k.qZA(),k.TgZ(17,"table"),k.YNc(18,wt,5,0,"tr",14),k.TgZ(19,"tr",15)(20,"td"),k._uU(21,"\u0627\u0644\u0643\u0648\u064a\u062a"),k.qZA(),k.TgZ(22,"td"),k._UZ(23,"i",16),k.qZA()(),k.TgZ(24,"tr",15)(25,"td")(26,"a",17),k._uU(27," \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0627\u062d\u0643\u0627\u0645 "),k.qZA()(),k.TgZ(28,"td"),k._UZ(29,"i",18),k.qZA()()()()(),k.TgZ(30,"div",3)(31,"div",19)(32,"div")(33,"a",20),k._UZ(34,"img",21),k.qZA(),k._UZ(35,"span",22),k.TgZ(36,"a",23),k._UZ(37,"img",24),k.qZA()()()()()()()),2&T&&(k.xp6(18),k.Q6J("ngIf",null==F.settings?null:F.settings.whatsapp))},directives:[at.O5,he.yS],styles:[""]}),Z})(),Lt=(()=>{class Z{constructor(T,F){this.cartService=T,this.router=F,localStorage.getItem("drastitoken")}ngOnInit(){this.app=(0,tn.ZF)({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),this.db=(0,Ln.N8)(this.app),localStorage.getItem("drastitoken")&&(0,Ln.t8)((0,Ln.iH)(this.db,`Auth/${localStorage.getItem("userid")}`),{user_token:localStorage.getItem("drastitoken")});const T=(0,Ln.iH)(this.db,"Auth");(0,Ln.jM)(T,F=>{var ue;if(localStorage.getItem("drastitoken")){const Ie=F.val();for(let Ve in Ie)Ve==localStorage.getItem("userid")&&(this.savedToken=Ie[Ve]);(null===(ue=this.savedToken)||void 0===ue?void 0:ue.user_token)!=localStorage.getItem("drastitoken")&&(this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]))}})}}return Z.\u0275fac=function(T){return new(T||Z)(k.Y36(dn.N),k.Y36(he.F0))},Z.\u0275cmp=k.Xpm({type:Z,selectors:[["app-root"]],decls:3,vars:0,template:function(T,F){1&T&&k._UZ(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},directives:[Bt,he.lC,Je],styles:[""]}),Z})();var pt=j(1777);const Rt=!1;function sr(Z){return new k.vHH(3e3,Rt)}function gi(){return"undefined"!=typeof window&&void 0!==window.document}function Bn(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function mi(Z){switch(Z.length){case 0:return new pt.ZN;case 1:return Z[0];default:return new pt.ZE(Z)}}function Lr(Z,C,T,F,ue={},Ie={}){const Ve=[],Xe=[];let vt=-1,fn=null;if(F.forEach(pr=>{const $t=pr.offset,yr=$t==vt,Rr=yr&&fn||{};Object.keys(pr).forEach(Ur=>{let Nn=Ur,Jn=pr[Ur];if("offset"!==Ur)switch(Nn=C.normalizePropertyName(Nn,Ve),Jn){case pt.k1:Jn=ue[Ur];break;case pt.l3:Jn=Ie[Ur];break;default:Jn=C.normalizeStyleValue(Ur,Nn,Jn,Ve)}Rr[Nn]=Jn}),yr||Xe.push(Rr),fn=Rr,vt=$t}),Ve.length)throw function cn(Z){return new k.vHH(3502,Rt)}();return Xe}function ki(Z,C,T,F){switch(C){case"start":Z.onStart(()=>F(T&&kn(T,"start",Z)));break;case"done":Z.onDone(()=>F(T&&kn(T,"done",Z)));break;case"destroy":Z.onDestroy(()=>F(T&&kn(T,"destroy",Z)))}}function kn(Z,C,T){const F=T.totalTime,Ie=zt(Z.element,Z.triggerName,Z.fromState,Z.toState,C||Z.phaseName,null==F?Z.totalTime:F,!!T.disabled),Ve=Z._data;return null!=Ve&&(Ie._data=Ve),Ie}function zt(Z,C,T,F,ue="",Ie=0,Ve){return{element:Z,triggerName:C,fromState:T,toState:F,phaseName:ue,totalTime:Ie,disabled:!!Ve}}function Vn(Z,C,T){let F;return Z instanceof Map?(F=Z.get(C),F||Z.set(C,F=T)):(F=Z[C],F||(F=Z[C]=T)),F}function Pr(Z){const C=Z.indexOf(":");return[Z.substring(1,C),Z.substr(C+1)]}let Or=(Z,C)=>!1,Vr=(Z,C,T)=>[],Qe=null;function Ue(Z){const C=Z.parentNode||Z.host;return C===Qe?null:C}(Bn()||"undefined"!=typeof Element)&&(gi()?(Qe=(()=>document.documentElement)(),Or=(Z,C)=>{for(;C;){if(C===Z)return!0;C=Ue(C)}return!1}):Or=(Z,C)=>Z.contains(C),Vr=(Z,C,T)=>{if(T)return Array.from(Z.querySelectorAll(C));const F=Z.querySelector(C);return F?[F]:[]});let Ft=null,ze=!1;function Me(Z){Ft||(Ft=function Ae(){return"undefined"!=typeof document?document.body:null}()||{},ze=!!Ft.style&&"WebkitAppearance"in Ft.style);let C=!0;return Ft.style&&!function ln(Z){return"ebkit"==Z.substring(1,6)}(Z)&&(C=Z in Ft.style,!C&&ze&&(C="Webkit"+Z.charAt(0).toUpperCase()+Z.substr(1)in Ft.style)),C}const gt=Or,sn=Vr;let Yn=(()=>{class Z{validateStyleProperty(T){return Me(T)}matchesElement(T,F){return!1}containsElement(T,F){return gt(T,F)}getParentElement(T){return Ue(T)}query(T,F,ue){return sn(T,F,ue)}computeStyle(T,F,ue){return ue||""}animate(T,F,ue,Ie,Ve,Xe=[],vt){return new pt.ZN(ue,Ie)}}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})(),ai=(()=>{class Z{}return Z.NOOP=new Yn,Z})();const Fi="ng-enter",ci="ng-leave",as="ng-trigger",wi=".ng-trigger",Cn="ng-animating",br=".ng-animating";function li(Z){if("number"==typeof Z)return Z;const C=Z.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:Pi(parseFloat(C[1]),C[2])}function Pi(Z,C){return"s"===C?1e3*Z:Z}function hs(Z,C,T){return Z.hasOwnProperty("duration")?Z:function Xi(Z,C,T){let ue,Ie=0,Ve="";if("string"==typeof Z){const Xe=Z.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Xe)return C.push(sr()),{duration:0,delay:0,easing:""};ue=Pi(parseFloat(Xe[1]),Xe[2]);const vt=Xe[3];null!=vt&&(Ie=Pi(parseFloat(vt),Xe[4]));const fn=Xe[5];fn&&(Ve=fn)}else ue=Z;if(!T){let Xe=!1,vt=C.length;ue<0&&(C.push(function or(){return new k.vHH(3100,Rt)}()),Xe=!0),Ie<0&&(C.push(function mn(){return new k.vHH(3101,Rt)}()),Xe=!0),Xe&&C.splice(vt,0,sr())}return{duration:ue,delay:Ie,easing:Ve}}(Z,C,T)}function Ji(Z,C={}){return Object.keys(Z).forEach(T=>{C[T]=Z[T]}),C}function Ii(Z,C,T={}){if(C)for(let F in Z)T[F]=Z[F];else Ji(Z,T);return T}function Hi(Z,C,T){return T?C+":"+T+";":""}function qr(Z){let C="";for(let T=0;T<Z.style.length;T++){const F=Z.style.item(T);C+=Hi(0,F,Z.style.getPropertyValue(F))}for(const T in Z.style)Z.style.hasOwnProperty(T)&&!T.startsWith("_")&&(C+=Hi(0,Gi(T),Z.style[T]));Z.setAttribute("style",C)}function es(Z,C,T){Z.style&&(Object.keys(C).forEach(F=>{const ue=Vs(F);T&&!T.hasOwnProperty(F)&&(T[F]=Z.style[ue]),Z.style[ue]=C[F]}),Bn()&&qr(Z))}function ls(Z,C){Z.style&&(Object.keys(C).forEach(T=>{const F=Vs(T);Z.style[F]=""}),Bn()&&qr(Z))}function Cs(Z){return Array.isArray(Z)?1==Z.length?Z[0]:(0,pt.vP)(Z):Z}const wr=new RegExp("{{\\s*(.+?)\\s*}}","g");function Sr(Z){let C=[];if("string"==typeof Z){let T;for(;T=wr.exec(Z);)C.push(T[1]);wr.lastIndex=0}return C}function Ki(Z,C,T){const F=Z.toString(),ue=F.replace(wr,(Ie,Ve)=>{let Xe=C[Ve];return C.hasOwnProperty(Ve)||(T.push(function mr(Z){return new k.vHH(3003,Rt)}()),Xe=""),Xe.toString()});return ue==F?Z:ue}function Br(Z){const C=[];let T=Z.next();for(;!T.done;)C.push(T.value),T=Z.next();return C}const xi=/-+([a-z0-9])/g;function Vs(Z){return Z.replace(xi,(...C)=>C[1].toUpperCase())}function Gi(Z){return Z.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ir(Z,C,T){switch(C.type){case 7:return Z.visitTrigger(C,T);case 0:return Z.visitState(C,T);case 1:return Z.visitTransition(C,T);case 2:return Z.visitSequence(C,T);case 3:return Z.visitGroup(C,T);case 4:return Z.visitAnimate(C,T);case 5:return Z.visitKeyframes(C,T);case 6:return Z.visitStyle(C,T);case 8:return Z.visitReference(C,T);case 9:return Z.visitAnimateChild(C,T);case 10:return Z.visitAnimateRef(C,T);case 11:return Z.visitQuery(C,T);case 12:return Z.visitStagger(C,T);default:throw function Vt(Z){return new k.vHH(3004,Rt)}()}}function gs(Z,C){return window.getComputedStyle(Z)[C]}function ht(Z,C){const T=[];return"string"==typeof Z?Z.split(/\s*,\s*/).forEach(F=>function xt(Z,C,T){if(":"==Z[0]){const vt=function _n(Z,C){switch(Z){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(T,F)=>parseFloat(F)>parseFloat(T);case":decrement":return(T,F)=>parseFloat(F)<parseFloat(T);default:return C.push(function xr(Z){return new k.vHH(3016,Rt)}()),"* => *"}}(Z,T);if("function"==typeof vt)return void C.push(vt);Z=vt}const F=Z.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==F||F.length<4)return T.push(function Wr(Z){return new k.vHH(3015,Rt)}()),C;const ue=F[1],Ie=F[2],Ve=F[3];C.push(ei(ue,Ve));"<"==Ie[0]&&!("*"==ue&&"*"==Ve)&&C.push(ei(Ve,ue))}(F,T,C)):T.push(Z),T}const $n=new Set(["true","1"]),Dr=new Set(["false","0"]);function ei(Z,C){const T=$n.has(Z)||Dr.has(Z),F=$n.has(C)||Dr.has(C);return(ue,Ie)=>{let Ve="*"==Z||Z==ue,Xe="*"==C||C==Ie;return!Ve&&T&&"boolean"==typeof ue&&(Ve=ue?$n.has(Z):Dr.has(Z)),!Xe&&F&&"boolean"==typeof Ie&&(Xe=Ie?$n.has(C):Dr.has(C)),Ve&&Xe}}const Mi=new RegExp("s*:selfs*,?","g");function ys(Z,C,T,F){return new _s(Z).build(C,T,F)}class _s{constructor(C){this._driver=C}build(C,T,F){const ue=new Ts(T);this._resetContextStyleTimingState(ue);const Ie=Ir(this,Cs(C),ue);return ue.unsupportedCSSPropertiesFound.size&&ue.unsupportedCSSPropertiesFound.keys(),Ie}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles={},C.collectedStyles[""]={},C.currentTime=0}visitTrigger(C,T){let F=T.queryCount=0,ue=T.depCount=0;const Ie=[],Ve=[];return"@"==C.name.charAt(0)&&T.errors.push(function it(){return new k.vHH(3006,Rt)}()),C.definitions.forEach(Xe=>{if(this._resetContextStyleTimingState(T),0==Xe.type){const vt=Xe,fn=vt.name;fn.toString().split(/\s*,\s*/).forEach(pr=>{vt.name=pr,Ie.push(this.visitState(vt,T))}),vt.name=fn}else if(1==Xe.type){const vt=this.visitTransition(Xe,T);F+=vt.queryCount,ue+=vt.depCount,Ve.push(vt)}else T.errors.push(function At(){return new k.vHH(3007,Rt)}())}),{type:7,name:C.name,states:Ie,transitions:Ve,queryCount:F,depCount:ue,options:null}}visitState(C,T){const F=this.visitStyle(C.styles,T),ue=C.options&&C.options.params||null;if(F.containsDynamicStyles){const Ie=new Set,Ve=ue||{};F.styles.forEach(Xe=>{if(ps(Xe)){const vt=Xe;Object.keys(vt).forEach(fn=>{Sr(vt[fn]).forEach(pr=>{Ve.hasOwnProperty(pr)||Ie.add(pr)})})}}),Ie.size&&(Br(Ie.values()),T.errors.push(function ut(Z,C){return new k.vHH(3008,Rt)}()))}return{type:0,name:C.name,style:F,options:ue?{params:ue}:null}}visitTransition(C,T){T.queryCount=0,T.depCount=0;const F=Ir(this,Cs(C.animation),T);return{type:1,matchers:ht(C.expr,T.errors),animation:F,queryCount:T.queryCount,depCount:T.depCount,options:bi(C.options)}}visitSequence(C,T){return{type:2,steps:C.steps.map(F=>Ir(this,F,T)),options:bi(C.options)}}visitGroup(C,T){const F=T.currentTime;let ue=0;const Ie=C.steps.map(Ve=>{T.currentTime=F;const Xe=Ir(this,Ve,T);return ue=Math.max(ue,T.currentTime),Xe});return T.currentTime=ue,{type:3,steps:Ie,options:bi(C.options)}}visitAnimate(C,T){const F=function Lo(Z,C){if(Z.hasOwnProperty("duration"))return Z;if("number"==typeof Z)return ho(hs(Z,C).duration,0,"");const T=Z;if(T.split(/\s+/).some(Ie=>"{"==Ie.charAt(0)&&"{"==Ie.charAt(1))){const Ie=ho(0,0,"");return Ie.dynamic=!0,Ie.strValue=T,Ie}const ue=hs(T,C);return ho(ue.duration,ue.delay,ue.easing)}(C.timings,T.errors);T.currentAnimateTimings=F;let ue,Ie=C.styles?C.styles:(0,pt.oB)({});if(5==Ie.type)ue=this.visitKeyframes(Ie,T);else{let Ve=C.styles,Xe=!1;if(!Ve){Xe=!0;const fn={};F.easing&&(fn.easing=F.easing),Ve=(0,pt.oB)(fn)}T.currentTime+=F.duration+F.delay;const vt=this.visitStyle(Ve,T);vt.isEmptyStep=Xe,ue=vt}return T.currentAnimateTimings=null,{type:4,timings:F,style:ue,options:null}}visitStyle(C,T){const F=this._makeStyleAst(C,T);return this._validateStyleAst(F,T),F}_makeStyleAst(C,T){const F=[];Array.isArray(C.styles)?C.styles.forEach(Ve=>{"string"==typeof Ve?Ve==pt.l3?F.push(Ve):T.errors.push(function Qt(Z){return new k.vHH(3002,Rt)}()):F.push(Ve)}):F.push(C.styles);let ue=!1,Ie=null;return F.forEach(Ve=>{if(ps(Ve)){const Xe=Ve,vt=Xe.easing;if(vt&&(Ie=vt,delete Xe.easing),!ue)for(let fn in Xe)if(Xe[fn].toString().indexOf("{{")>=0){ue=!0;break}}}),{type:6,styles:F,easing:Ie,offset:C.offset,containsDynamicStyles:ue,options:null}}_validateStyleAst(C,T){const F=T.currentAnimateTimings;let ue=T.currentTime,Ie=T.currentTime;F&&Ie>0&&(Ie-=F.duration+F.delay),C.styles.forEach(Ve=>{"string"!=typeof Ve&&Object.keys(Ve).forEach(Xe=>{if(!this._driver.validateStyleProperty(Xe))return delete Ve[Xe],void T.unsupportedCSSPropertiesFound.add(Xe);const vt=T.collectedStyles[T.currentQuerySelector],fn=vt[Xe];let pr=!0;fn&&(Ie!=ue&&Ie>=fn.startTime&&ue<=fn.endTime&&(T.errors.push(function Xt(Z,C,T,F,ue){return new k.vHH(3010,Rt)}()),pr=!1),Ie=fn.startTime),pr&&(vt[Xe]={startTime:Ie,endTime:ue}),T.options&&function Qr(Z,C,T){const F=C.params||{},ue=Sr(Z);ue.length&&ue.forEach(Ie=>{F.hasOwnProperty(Ie)||T.push(function Tr(Z){return new k.vHH(3001,Rt)}())})}(Ve[Xe],T.options,T.errors)})})}visitKeyframes(C,T){const F={type:5,styles:[],options:null};if(!T.currentAnimateTimings)return T.errors.push(function Hn(){return new k.vHH(3011,Rt)}()),F;let Ie=0;const Ve=[];let Xe=!1,vt=!1,fn=0;const pr=C.steps.map(eo=>{const Gn=this._makeStyleAst(eo,T);let qt=null!=Gn.offset?Gn.offset:function mo(Z){if("string"==typeof Z)return null;let C=null;if(Array.isArray(Z))Z.forEach(T=>{if(ps(T)&&T.hasOwnProperty("offset")){const F=T;C=parseFloat(F.offset),delete F.offset}});else if(ps(Z)&&Z.hasOwnProperty("offset")){const T=Z;C=parseFloat(T.offset),delete T.offset}return C}(Gn.styles),yn=0;return null!=qt&&(Ie++,yn=Gn.offset=qt),vt=vt||yn<0||yn>1,Xe=Xe||yn<fn,fn=yn,Ve.push(yn),Gn});vt&&T.errors.push(function ir(){return new k.vHH(3012,Rt)}()),Xe&&T.errors.push(function ur(){return new k.vHH(3200,Rt)}());const $t=C.steps.length;let yr=0;Ie>0&&Ie<$t?T.errors.push(function Yr(){return new k.vHH(3202,Rt)}()):0==Ie&&(yr=1/($t-1));const Rr=$t-1,Ur=T.currentTime,Nn=T.currentAnimateTimings,Jn=Nn.duration;return pr.forEach((eo,Gn)=>{const qt=yr>0?Gn==Rr?1:yr*Gn:Ve[Gn],yn=qt*Jn;T.currentTime=Ur+Nn.delay+yn,Nn.duration=yn,this._validateStyleAst(eo,T),eo.offset=qt,F.styles.push(eo)}),F}visitReference(C,T){return{type:8,animation:Ir(this,Cs(C.animation),T),options:bi(C.options)}}visitAnimateChild(C,T){return T.depCount++,{type:9,options:bi(C.options)}}visitAnimateRef(C,T){return{type:10,animation:this.visitReference(C.animation,T),options:bi(C.options)}}visitQuery(C,T){const F=T.currentQuerySelector,ue=C.options||{};T.queryCount++,T.currentQuery=C;const[Ie,Ve]=function As(Z){const C=!!Z.split(/\s*,\s*/).find(T=>":self"==T);return C&&(Z=Z.replace(Mi,"")),Z=Z.replace(/@\*/g,wi).replace(/@\w+/g,T=>wi+"-"+T.substr(1)).replace(/:animating/g,br),[Z,C]}(C.selector);T.currentQuerySelector=F.length?F+" "+Ie:Ie,Vn(T.collectedStyles,T.currentQuerySelector,{});const Xe=Ir(this,Cs(C.animation),T);return T.currentQuery=null,T.currentQuerySelector=F,{type:11,selector:Ie,limit:ue.limit||0,optional:!!ue.optional,includeSelf:Ve,animation:Xe,originalSelector:C.selector,options:bi(C.options)}}visitStagger(C,T){T.currentQuery||T.errors.push(function oi(){return new k.vHH(3013,Rt)}());const F="full"===C.timings?{duration:0,delay:0,easing:"full"}:hs(C.timings,T.errors,!0);return{type:12,animation:Ir(this,Cs(C.animation),T),timings:F,options:null}}}class Ts{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ps(Z){return!Array.isArray(Z)&&"object"==typeof Z}function bi(Z){return Z?(Z=Ji(Z)).params&&(Z.params=function Yo(Z){return Z?Ji(Z):null}(Z.params)):Z={},Z}function ho(Z,C,T){return{duration:Z,delay:C,easing:T}}function Us(Z,C,T,F,ue,Ie,Ve=null,Xe=!1){return{type:1,element:Z,keyframes:C,preStyleProps:T,postStyleProps:F,duration:ue,delay:Ie,totalTime:ue+Ie,easing:Ve,subTimeline:Xe}}class Gs{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,T){let F=this._map.get(C);F||this._map.set(C,F=[]),F.push(...T)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const Qs=new RegExp(":enter","g"),Bs=new RegExp(":leave","g");function xs(Z,C,T,F,ue,Ie={},Ve={},Xe,vt,fn=[]){return(new Qo).buildKeyframes(Z,C,T,F,ue,Ie,Ve,Xe,vt,fn)}class Qo{buildKeyframes(C,T,F,ue,Ie,Ve,Xe,vt,fn,pr=[]){fn=fn||new Gs;const $t=new so(C,T,fn,ue,Ie,pr,[]);$t.options=vt,$t.currentTimeline.setStyles([Ve],null,$t.errors,vt),Ir(this,F,$t);const yr=$t.timelines.filter(Rr=>Rr.containsAnimation());if(Object.keys(Xe).length){let Rr;for(let Ur=yr.length-1;Ur>=0;Ur--){const Nn=yr[Ur];if(Nn.element===T){Rr=Nn;break}}Rr&&!Rr.allowOnlyTimelineStyles()&&Rr.setStyles([Xe],null,$t.errors,vt)}return yr.length?yr.map(Rr=>Rr.buildKeyframes()):[Us(T,[],[],[],0,0,"",!1)]}visitTrigger(C,T){}visitState(C,T){}visitTransition(C,T){}visitAnimateChild(C,T){const F=T.subInstructions.get(T.element);if(F){const ue=T.createSubContext(C.options),Ie=T.currentTimeline.currentTime,Ve=this._visitSubInstructions(F,ue,ue.options);Ie!=Ve&&T.transformIntoNewTimeline(Ve)}T.previousNode=C}visitAnimateRef(C,T){const F=T.createSubContext(C.options);F.transformIntoNewTimeline(),this.visitReference(C.animation,F),T.transformIntoNewTimeline(F.currentTimeline.currentTime),T.previousNode=C}_visitSubInstructions(C,T,F){let Ie=T.currentTimeline.currentTime;const Ve=null!=F.duration?li(F.duration):null,Xe=null!=F.delay?li(F.delay):null;return 0!==Ve&&C.forEach(vt=>{const fn=T.appendInstructionToTimeline(vt,Ve,Xe);Ie=Math.max(Ie,fn.duration+fn.delay)}),Ie}visitReference(C,T){T.updateOptions(C.options,!0),Ir(this,C.animation,T),T.previousNode=C}visitSequence(C,T){const F=T.subContextCount;let ue=T;const Ie=C.options;if(Ie&&(Ie.params||Ie.delay)&&(ue=T.createSubContext(Ie),ue.transformIntoNewTimeline(),null!=Ie.delay)){6==ue.previousNode.type&&(ue.currentTimeline.snapshotCurrentStyles(),ue.previousNode=us);const Ve=li(Ie.delay);ue.delayNextStep(Ve)}C.steps.length&&(C.steps.forEach(Ve=>Ir(this,Ve,ue)),ue.currentTimeline.applyStylesToKeyframe(),ue.subContextCount>F&&ue.transformIntoNewTimeline()),T.previousNode=C}visitGroup(C,T){const F=[];let ue=T.currentTimeline.currentTime;const Ie=C.options&&C.options.delay?li(C.options.delay):0;C.steps.forEach(Ve=>{const Xe=T.createSubContext(C.options);Ie&&Xe.delayNextStep(Ie),Ir(this,Ve,Xe),ue=Math.max(ue,Xe.currentTimeline.currentTime),F.push(Xe.currentTimeline)}),F.forEach(Ve=>T.currentTimeline.mergeTimelineCollectedStyles(Ve)),T.transformIntoNewTimeline(ue),T.previousNode=C}_visitTiming(C,T){if(C.dynamic){const F=C.strValue;return hs(T.params?Ki(F,T.params,T.errors):F,T.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,T){const F=T.currentAnimateTimings=this._visitTiming(C.timings,T),ue=T.currentTimeline;F.delay&&(T.incrementTime(F.delay),ue.snapshotCurrentStyles());const Ie=C.style;5==Ie.type?this.visitKeyframes(Ie,T):(T.incrementTime(F.duration),this.visitStyle(Ie,T),ue.applyStylesToKeyframe()),T.currentAnimateTimings=null,T.previousNode=C}visitStyle(C,T){const F=T.currentTimeline,ue=T.currentAnimateTimings;!ue&&F.getCurrentStyleProperties().length&&F.forwardFrame();const Ie=ue&&ue.easing||C.easing;C.isEmptyStep?F.applyEmptyStep(Ie):F.setStyles(C.styles,Ie,T.errors,T.options),T.previousNode=C}visitKeyframes(C,T){const F=T.currentAnimateTimings,ue=T.currentTimeline.duration,Ie=F.duration,Xe=T.createSubContext().currentTimeline;Xe.easing=F.easing,C.styles.forEach(vt=>{Xe.forwardTime((vt.offset||0)*Ie),Xe.setStyles(vt.styles,vt.easing,T.errors,T.options),Xe.applyStylesToKeyframe()}),T.currentTimeline.mergeTimelineCollectedStyles(Xe),T.transformIntoNewTimeline(ue+Ie),T.previousNode=C}visitQuery(C,T){const F=T.currentTimeline.currentTime,ue=C.options||{},Ie=ue.delay?li(ue.delay):0;Ie&&(6===T.previousNode.type||0==F&&T.currentTimeline.getCurrentStyleProperties().length)&&(T.currentTimeline.snapshotCurrentStyles(),T.previousNode=us);let Ve=F;const Xe=T.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!ue.optional,T.errors);T.currentQueryTotal=Xe.length;let vt=null;Xe.forEach((fn,pr)=>{T.currentQueryIndex=pr;const $t=T.createSubContext(C.options,fn);Ie&&$t.delayNextStep(Ie),fn===T.element&&(vt=$t.currentTimeline),Ir(this,C.animation,$t),$t.currentTimeline.applyStylesToKeyframe(),Ve=Math.max(Ve,$t.currentTimeline.currentTime)}),T.currentQueryIndex=0,T.currentQueryTotal=0,T.transformIntoNewTimeline(Ve),vt&&(T.currentTimeline.mergeTimelineCollectedStyles(vt),T.currentTimeline.snapshotCurrentStyles()),T.previousNode=C}visitStagger(C,T){const F=T.parentContext,ue=T.currentTimeline,Ie=C.timings,Ve=Math.abs(Ie.duration),Xe=Ve*(T.currentQueryTotal-1);let vt=Ve*T.currentQueryIndex;switch(Ie.duration<0?"reverse":Ie.easing){case"reverse":vt=Xe-vt;break;case"full":vt=F.currentStaggerTime}const pr=T.currentTimeline;vt&&pr.delayNextStep(vt);const $t=pr.currentTime;Ir(this,C.animation,T),T.previousNode=C,F.currentStaggerTime=ue.currentTime-$t+(ue.startTime-F.currentTimeline.startTime)}}const us={};class so{constructor(C,T,F,ue,Ie,Ve,Xe,vt){this._driver=C,this.element=T,this.subInstructions=F,this._enterClassName=ue,this._leaveClassName=Ie,this.errors=Ve,this.timelines=Xe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=us,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=vt||new Ms(this._driver,T,0),Xe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,T){if(!C)return;const F=C;let ue=this.options;null!=F.duration&&(ue.duration=li(F.duration)),null!=F.delay&&(ue.delay=li(F.delay));const Ie=F.params;if(Ie){let Ve=ue.params;Ve||(Ve=this.options.params={}),Object.keys(Ie).forEach(Xe=>{(!T||!Ve.hasOwnProperty(Xe))&&(Ve[Xe]=Ki(Ie[Xe],Ve,this.errors))})}}_copyOptions(){const C={};if(this.options){const T=this.options.params;if(T){const F=C.params={};Object.keys(T).forEach(ue=>{F[ue]=T[ue]})}}return C}createSubContext(C=null,T,F){const ue=T||this.element,Ie=new so(this._driver,ue,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ue,F||0));return Ie.previousNode=this.previousNode,Ie.currentAnimateTimings=this.currentAnimateTimings,Ie.options=this._copyOptions(),Ie.updateOptions(C),Ie.currentQueryIndex=this.currentQueryIndex,Ie.currentQueryTotal=this.currentQueryTotal,Ie.parentContext=this,this.subContextCount++,Ie}transformIntoNewTimeline(C){return this.previousNode=us,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,T,F){const ue={duration:null!=T?T:C.duration,delay:this.currentTimeline.currentTime+(null!=F?F:0)+C.delay,easing:""},Ie=new Li(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,ue,C.stretchStartingKeyframe);return this.timelines.push(Ie),ue}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,T,F,ue,Ie,Ve){let Xe=[];if(ue&&Xe.push(this.element),C.length>0){C=(C=C.replace(Qs,"."+this._enterClassName)).replace(Bs,"."+this._leaveClassName);let fn=this._driver.query(this.element,C,1!=F);0!==F&&(fn=F<0?fn.slice(fn.length+F,fn.length):fn.slice(0,F)),Xe.push(...fn)}return!Ie&&0==Xe.length&&Ve.push(function er(Z){return new k.vHH(3014,Rt)}()),Xe}}class Ms{constructor(C,T,F,ue){this._driver=C,this.element=T,this.startTime=F,this._elementTimelineStylesLookup=ue,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(T),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(T,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const T=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||T?(this.forwardTime(this.currentTime+C),T&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,T){return this.applyStylesToKeyframe(),new Ms(this._driver,C,T||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,T){this._localTimelineStyles[C]=T,this._globalTimelineStyles[C]=T,this._styleSummary[C]={time:this.currentTime,value:T}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&(this._previousKeyframe.easing=C),Object.keys(this._globalTimelineStyles).forEach(T=>{this._backFill[T]=this._globalTimelineStyles[T]||pt.l3,this._currentKeyframe[T]=pt.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,T,F,ue){T&&(this._previousKeyframe.easing=T);const Ie=ue&&ue.params||{},Ve=function fo(Z,C){const T={};let F;return Z.forEach(ue=>{"*"===ue?(F=F||Object.keys(C),F.forEach(Ie=>{T[Ie]=pt.l3})):Ii(ue,!1,T)}),T}(C,this._globalTimelineStyles);Object.keys(Ve).forEach(Xe=>{const vt=Ki(Ve[Xe],Ie,F);this._pendingStyles[Xe]=vt,this._localTimelineStyles.hasOwnProperty(Xe)||(this._backFill[Xe]=this._globalTimelineStyles.hasOwnProperty(Xe)?this._globalTimelineStyles[Xe]:pt.l3),this._updateStyle(Xe,vt)})}applyStylesToKeyframe(){const C=this._pendingStyles,T=Object.keys(C);0!=T.length&&(this._pendingStyles={},T.forEach(F=>{this._currentKeyframe[F]=C[F]}),Object.keys(this._localTimelineStyles).forEach(F=>{this._currentKeyframe.hasOwnProperty(F)||(this._currentKeyframe[F]=this._localTimelineStyles[F])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(C=>{const T=this._localTimelineStyles[C];this._pendingStyles[C]=T,this._updateStyle(C,T)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let T in this._currentKeyframe)C.push(T);return C}mergeTimelineCollectedStyles(C){Object.keys(C._styleSummary).forEach(T=>{const F=this._styleSummary[T],ue=C._styleSummary[T];(!F||ue.time>F.time)&&this._updateStyle(T,ue.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,T=new Set,F=1===this._keyframes.size&&0===this.duration;let ue=[];this._keyframes.forEach((Xe,vt)=>{const fn=Ii(Xe,!0);Object.keys(fn).forEach(pr=>{const $t=fn[pr];$t==pt.k1?C.add(pr):$t==pt.l3&&T.add(pr)}),F||(fn.offset=vt/this.duration),ue.push(fn)});const Ie=C.size?Br(C.values()):[],Ve=T.size?Br(T.values()):[];if(F){const Xe=ue[0],vt=Ji(Xe);Xe.offset=0,vt.offset=1,ue=[Xe,vt]}return Us(this.element,ue,Ie,Ve,this.duration,this.startTime,this.easing,!1)}}class Li extends Ms{constructor(C,T,F,ue,Ie,Ve,Xe=!1){super(C,T,Ve.delay),this.keyframes=F,this.preStyleProps=ue,this.postStyleProps=Ie,this._stretchStartingKeyframe=Xe,this.timings={duration:Ve.duration,delay:Ve.delay,easing:Ve.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:T,duration:F,easing:ue}=this.timings;if(this._stretchStartingKeyframe&&T){const Ie=[],Ve=F+T,Xe=T/Ve,vt=Ii(C[0],!1);vt.offset=0,Ie.push(vt);const fn=Ii(C[0],!1);fn.offset=Xs(Xe),Ie.push(fn);const pr=C.length-1;for(let $t=1;$t<=pr;$t++){let yr=Ii(C[$t],!1);yr.offset=Xs((T+yr.offset*F)/Ve),Ie.push(yr)}F=Ve,T=0,ue="",C=Ie}return Us(this.element,C,this.preStyleProps,this.postStyleProps,F,T,ue,!0)}}function Xs(Z,C=3){const T=Math.pow(10,C-1);return Math.round(Z*T)/T}class Rs{}class Vi extends Rs{normalizePropertyName(C,T){return Vs(C)}normalizeStyleValue(C,T,F,ue){let Ie="";const Ve=F.toString().trim();if(Ti[T]&&0!==F&&"0"!==F)if("number"==typeof F)Ie="px";else{const Xe=F.match(/^[+-]?[\d\.]+([a-z]*)$/);Xe&&0==Xe[1].length&&ue.push(function kt(Z,C){return new k.vHH(3005,Rt)}())}return Ve+Ie}}const Ti=(()=>function B(Z){const C={};return Z.forEach(T=>C[T]=!0),C}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function fe(Z,C,T,F,ue,Ie,Ve,Xe,vt,fn,pr,$t,yr){return{type:0,element:Z,triggerName:C,isRemovalTransition:ue,fromState:T,fromStyles:Ie,toState:F,toStyles:Ve,timelines:Xe,queriedElements:vt,preStyleProps:fn,postStyleProps:pr,totalTime:$t,errors:yr}}const W={};class ve{constructor(C,T,F){this._triggerName=C,this.ast=T,this._stateStyles=F}match(C,T,F,ue){return function Ke(Z,C,T,F,ue){return Z.some(Ie=>Ie(C,T,F,ue))}(this.ast.matchers,C,T,F,ue)}buildStyles(C,T,F){const ue=this._stateStyles["*"],Ie=this._stateStyles[C],Ve=ue?ue.buildStyles(T,F):{};return Ie?Ie.buildStyles(T,F):Ve}build(C,T,F,ue,Ie,Ve,Xe,vt,fn,pr){const $t=[],yr=this.ast.options&&this.ast.options.params||W,Ur=this.buildStyles(F,Xe&&Xe.params||W,$t),Nn=vt&&vt.params||W,Jn=this.buildStyles(ue,Nn,$t),eo=new Set,Gn=new Map,qt=new Map,yn="void"===ue,Os={params:Object.assign(Object.assign({},yr),Nn)},ao=pr?[]:xs(C,T,this.ast.animation,Ie,Ve,Ur,Jn,Os,fn,$t);let yo=0;if(ao.forEach(M=>{yo=Math.max(M.duration+M.delay,yo)}),$t.length)return fe(T,this._triggerName,F,ue,yn,Ur,Jn,[],[],Gn,qt,yo,$t);ao.forEach(M=>{const S=M.element,q=Vn(Gn,S,{});M.preStyleProps.forEach(_e=>q[_e]=!0);const ne=Vn(qt,S,{});M.postStyleProps.forEach(_e=>ne[_e]=!0),S!==T&&eo.add(S)});const O=Br(eo.values());return fe(T,this._triggerName,F,ue,yn,Ur,Jn,ao,O,Gn,qt,yo)}}class rn{constructor(C,T,F){this.styles=C,this.defaultParams=T,this.normalizer=F}buildStyles(C,T){const F={},ue=Ji(this.defaultParams);return Object.keys(C).forEach(Ie=>{const Ve=C[Ie];null!=Ve&&(ue[Ie]=Ve)}),this.styles.styles.forEach(Ie=>{if("string"!=typeof Ie){const Ve=Ie;Object.keys(Ve).forEach(Xe=>{let vt=Ve[Xe];vt.length>1&&(vt=Ki(vt,ue,T));const fn=this.normalizer.normalizePropertyName(Xe,T);vt=this.normalizer.normalizeStyleValue(Xe,fn,vt,T),F[fn]=vt})}}),F}}class hr{constructor(C,T,F){this.name=C,this.ast=T,this._normalizer=F,this.transitionFactories=[],this.states={},T.states.forEach(ue=>{this.states[ue.name]=new rn(ue.style,ue.options&&ue.options.params||{},F)}),Xr(this.states,"true","1"),Xr(this.states,"false","0"),T.transitions.forEach(ue=>{this.transitionFactories.push(new ve(C,ue,this.states))}),this.fallbackTransition=function Gr(Z,C,T){return new ve(Z,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ve,Xe)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,T,F,ue){return this.transitionFactories.find(Ve=>Ve.match(C,T,F,ue))||null}matchStyles(C,T,F){return this.fallbackTransition.buildStyles(C,T,F)}}function Xr(Z,C,T){Z.hasOwnProperty(C)?Z.hasOwnProperty(T)||(Z[T]=Z[C]):Z.hasOwnProperty(T)&&(Z[C]=Z[T])}const ni=new Gs;class yi{constructor(C,T,F){this.bodyNode=C,this._driver=T,this._normalizer=F,this._animations={},this._playersById={},this.players=[]}register(C,T){const F=[],Ie=ys(this._driver,T,F,[]);if(F.length)throw function nt(Z){return new k.vHH(3503,Rt)}();this._animations[C]=Ie}_buildPlayer(C,T,F){const ue=C.element,Ie=Lr(0,this._normalizer,0,C.keyframes,T,F);return this._driver.animate(ue,Ie,C.duration,C.delay,C.easing,[],!0)}create(C,T,F={}){const ue=[],Ie=this._animations[C];let Ve;const Xe=new Map;if(Ie?(Ve=xs(this._driver,T,Ie,Fi,ci,{},{},F,ni,ue),Ve.forEach(pr=>{const $t=Vn(Xe,pr.element,{});pr.postStyleProps.forEach(yr=>$t[yr]=null)})):(ue.push(function ct(){return new k.vHH(3300,Rt)}()),Ve=[]),ue.length)throw function Gt(Z){return new k.vHH(3504,Rt)}();Xe.forEach((pr,$t)=>{Object.keys(pr).forEach(yr=>{pr[yr]=this._driver.computeStyle($t,yr,pt.l3)})});const fn=mi(Ve.map(pr=>{const $t=Xe.get(pr.element);return this._buildPlayer(pr,{},$t)}));return this._playersById[C]=fn,fn.onDestroy(()=>this.destroy(C)),this.players.push(fn),fn}destroy(C){const T=this._getPlayer(C);T.destroy(),delete this._playersById[C];const F=this.players.indexOf(T);F>=0&&this.players.splice(F,1)}_getPlayer(C){const T=this._playersById[C];if(!T)throw function nn(Z){return new k.vHH(3301,Rt)}();return T}listen(C,T,F,ue){const Ie=zt(T,"","","");return ki(this._getPlayer(C),F,Ie,ue),()=>{}}command(C,T,F,ue){if("register"==F)return void this.register(C,ue[0]);if("create"==F)return void this.create(C,T,ue[0]||{});const Ie=this._getPlayer(C);switch(F){case"play":Ie.play();break;case"pause":Ie.pause();break;case"reset":Ie.reset();break;case"restart":Ie.restart();break;case"finish":Ie.finish();break;case"init":Ie.init();break;case"setPosition":Ie.setPosition(parseFloat(ue[0]));break;case"destroy":this.destroy(C)}}}const Zi="ng-animate-queued",Si="ng-animate-disabled",Js=[],Ao={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},To={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ws="__ng_removed";class Q{constructor(C,T=""){this.namespaceId=T;const F=C&&C.hasOwnProperty("value");if(this.value=function K(Z){return null!=Z?Z:null}(F?C.value:C),F){const Ie=Ji(C);delete Ie.value,this.options=Ie}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(C){const T=C.params;if(T){const F=this.options.params;Object.keys(T).forEach(ue=>{null==F[ue]&&(F[ue]=T[ue])})}}}const G="void",V=new Q(G);class ye{constructor(C,T,F){this.id=C,this.hostElement=T,this._engine=F,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,fr(T,this._hostClassName)}listen(C,T,F,ue){if(!this._triggers.hasOwnProperty(T))throw function En(Z,C){return new k.vHH(3302,Rt)}();if(null==F||0==F.length)throw function qn(Z){return new k.vHH(3303,Rt)}();if(!function Le(Z){return"start"==Z||"done"==Z}(F))throw function Jr(Z,C){return new k.vHH(3400,Rt)}();const Ie=Vn(this._elementListeners,C,[]),Ve={name:T,phase:F,callback:ue};Ie.push(Ve);const Xe=Vn(this._engine.statesByElement,C,{});return Xe.hasOwnProperty(T)||(fr(C,as),fr(C,as+"-"+T),Xe[T]=V),()=>{this._engine.afterFlush(()=>{const vt=Ie.indexOf(Ve);vt>=0&&Ie.splice(vt,1),this._triggers[T]||delete Xe[T]})}}register(C,T){return!this._triggers[C]&&(this._triggers[C]=T,!0)}_getTrigger(C){const T=this._triggers[C];if(!T)throw function Hr(Z){return new k.vHH(3401,Rt)}();return T}trigger(C,T,F,ue=!0){const Ie=this._getTrigger(T),Ve=new xn(this.id,T,C);let Xe=this._engine.statesByElement.get(C);Xe||(fr(C,as),fr(C,as+"-"+T),this._engine.statesByElement.set(C,Xe={}));let vt=Xe[T];const fn=new Q(F,this.id);if(!(F&&F.hasOwnProperty("value"))&&vt&&fn.absorbOptions(vt.options),Xe[T]=fn,vt||(vt=V),fn.value!==G&&vt.value===fn.value){if(!function $i(Z,C){const T=Object.keys(Z),F=Object.keys(C);if(T.length!=F.length)return!1;for(let ue=0;ue<T.length;ue++){const Ie=T[ue];if(!C.hasOwnProperty(Ie)||Z[Ie]!==C[Ie])return!1}return!0}(vt.params,fn.params)){const Nn=[],Jn=Ie.matchStyles(vt.value,vt.params,Nn),eo=Ie.matchStyles(fn.value,fn.params,Nn);Nn.length?this._engine.reportError(Nn):this._engine.afterFlush(()=>{ls(C,Jn),es(C,eo)})}return}const yr=Vn(this._engine.playersByElement,C,[]);yr.forEach(Nn=>{Nn.namespaceId==this.id&&Nn.triggerName==T&&Nn.queued&&Nn.destroy()});let Rr=Ie.matchTransition(vt.value,fn.value,C,fn.params),Ur=!1;if(!Rr){if(!ue)return;Rr=Ie.fallbackTransition,Ur=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:T,transition:Rr,fromState:vt,toState:fn,player:Ve,isFallbackTransition:Ur}),Ur||(fr(C,Zi),Ve.onStart(()=>{Kn(C,Zi)})),Ve.onDone(()=>{let Nn=this.players.indexOf(Ve);Nn>=0&&this.players.splice(Nn,1);const Jn=this._engine.playersByElement.get(C);if(Jn){let eo=Jn.indexOf(Ve);eo>=0&&Jn.splice(eo,1)}}),this.players.push(Ve),yr.push(Ve),Ve}deregister(C){delete this._triggers[C],this._engine.statesByElement.forEach((T,F)=>{delete T[C]}),this._elementListeners.forEach((T,F)=>{this._elementListeners.set(F,T.filter(ue=>ue.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const T=this._engine.playersByElement.get(C);T&&(T.forEach(F=>F.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,T){const F=this._engine.driver.query(C,wi,!0);F.forEach(ue=>{if(ue[ws])return;const Ie=this._engine.fetchNamespacesByElement(ue);Ie.size?Ie.forEach(Ve=>Ve.triggerLeaveAnimation(ue,T,!1,!0)):this.clearElementCache(ue)}),this._engine.afterFlushAnimationsDone(()=>F.forEach(ue=>this.clearElementCache(ue)))}triggerLeaveAnimation(C,T,F,ue){const Ie=this._engine.statesByElement.get(C),Ve=new Map;if(Ie){const Xe=[];if(Object.keys(Ie).forEach(vt=>{if(Ve.set(vt,Ie[vt].value),this._triggers[vt]){const fn=this.trigger(C,vt,G,ue);fn&&Xe.push(fn)}}),Xe.length)return this._engine.markElementAsRemoved(this.id,C,!0,T,Ve),F&&mi(Xe).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const T=this._elementListeners.get(C),F=this._engine.statesByElement.get(C);if(T&&F){const ue=new Set;T.forEach(Ie=>{const Ve=Ie.name;if(ue.has(Ve))return;ue.add(Ve);const vt=this._triggers[Ve].fallbackTransition,fn=F[Ve]||V,pr=new Q(G),$t=new xn(this.id,Ve,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:Ve,transition:vt,fromState:fn,toState:pr,player:$t,isFallbackTransition:!0})})}}removeNode(C,T){const F=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,T),this.triggerLeaveAnimation(C,T,!0))return;let ue=!1;if(F.totalAnimations){const Ie=F.players.length?F.playersByQueriedElement.get(C):[];if(Ie&&Ie.length)ue=!0;else{let Ve=C;for(;Ve=Ve.parentNode;)if(F.statesByElement.get(Ve)){ue=!0;break}}}if(this.prepareLeaveAnimationListeners(C),ue)F.markElementAsRemoved(this.id,C,!1,T);else{const Ie=C[ws];(!Ie||Ie===Ao)&&(F.afterFlush(()=>this.clearElementCache(C)),F.destroyInnerAnimations(C),F._onRemovalComplete(C,T))}}insertNode(C,T){fr(C,this._hostClassName)}drainQueuedTransitions(C){const T=[];return this._queue.forEach(F=>{const ue=F.player;if(ue.destroyed)return;const Ie=F.element,Ve=this._elementListeners.get(Ie);Ve&&Ve.forEach(Xe=>{if(Xe.name==F.triggerName){const vt=zt(Ie,F.triggerName,F.fromState.value,F.toState.value);vt._data=C,ki(F.player,Xe.phase,vt,Xe.callback)}}),ue.markedForDestroy?this._engine.afterFlush(()=>{ue.destroy()}):T.push(F)}),this._queue=[],T.sort((F,ue)=>{const Ie=F.transition.ast.depCount,Ve=ue.transition.ast.depCount;return 0==Ie||0==Ve?Ie-Ve:this._engine.driver.containsElement(F.element,ue.element)?1:-1})}destroy(C){this.players.forEach(T=>T.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}elementContainsData(C){let T=!1;return this._elementListeners.has(C)&&(T=!0),T=!!this._queue.find(F=>F.element===C)||T,T}}class Ye{constructor(C,T,F){this.bodyNode=C,this.driver=T,this._normalizer=F,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ue,Ie)=>{}}_onRemovalComplete(C,T){this.onRemovalComplete(C,T)}get queuedPlayers(){const C=[];return this._namespaceList.forEach(T=>{T.players.forEach(F=>{F.queued&&C.push(F)})}),C}createNamespace(C,T){const F=new ye(C,T,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,T)?this._balanceNamespaceList(F,T):(this.newHostElements.set(T,F),this.collectEnterElement(T)),this._namespaceLookup[C]=F}_balanceNamespaceList(C,T){const F=this._namespaceList,ue=this.namespacesByHostElement,Ie=F.length-1;if(Ie>=0){let Ve=!1;if(void 0!==this.driver.getParentElement){let Xe=this.driver.getParentElement(T);for(;Xe;){const vt=ue.get(Xe);if(vt){const fn=F.indexOf(vt);F.splice(fn+1,0,C),Ve=!0;break}Xe=this.driver.getParentElement(Xe)}}else for(let Xe=Ie;Xe>=0;Xe--)if(this.driver.containsElement(F[Xe].hostElement,T)){F.splice(Xe+1,0,C),Ve=!0;break}Ve||F.unshift(C)}else F.push(C);return ue.set(T,C),C}register(C,T){let F=this._namespaceLookup[C];return F||(F=this.createNamespace(C,T)),F}registerTrigger(C,T,F){let ue=this._namespaceLookup[C];ue&&ue.register(T,F)&&this.totalAnimations++}destroy(C,T){if(!C)return;const F=this._fetchNamespace(C);this.afterFlush(()=>{this.namespacesByHostElement.delete(F.hostElement),delete this._namespaceLookup[C];const ue=this._namespaceList.indexOf(F);ue>=0&&this._namespaceList.splice(ue,1)}),this.afterFlushAnimationsDone(()=>F.destroy(T))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const T=new Set,F=this.statesByElement.get(C);if(F){const ue=Object.keys(F);for(let Ie=0;Ie<ue.length;Ie++){const Ve=F[ue[Ie]].namespaceId;if(Ve){const Xe=this._fetchNamespace(Ve);Xe&&T.add(Xe)}}}return T}trigger(C,T,F,ue){if(Ce(T)){const Ie=this._fetchNamespace(C);if(Ie)return Ie.trigger(T,F,ue),!0}return!1}insertNode(C,T,F,ue){if(!Ce(T))return;const Ie=T[ws];if(Ie&&Ie.setForRemoval){Ie.setForRemoval=!1,Ie.setForMove=!0;const Ve=this.collectedLeaveElements.indexOf(T);Ve>=0&&this.collectedLeaveElements.splice(Ve,1)}if(C){const Ve=this._fetchNamespace(C);Ve&&Ve.insertNode(T,F)}ue&&this.collectEnterElement(T)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,T){T?this.disabledNodes.has(C)||(this.disabledNodes.add(C),fr(C,Si)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),Kn(C,Si))}removeNode(C,T,F,ue){if(Ce(T)){const Ie=C?this._fetchNamespace(C):null;if(Ie?Ie.removeNode(T,ue):this.markElementAsRemoved(C,T,!1,ue),F){const Ve=this.namespacesByHostElement.get(T);Ve&&Ve.id!==C&&Ve.removeNode(T,ue)}}else this._onRemovalComplete(T,ue)}markElementAsRemoved(C,T,F,ue,Ie){this.collectedLeaveElements.push(T),T[ws]={namespaceId:C,setForRemoval:ue,hasAnimation:F,removedBeforeQueried:!1,previousTriggersValues:Ie}}listen(C,T,F,ue,Ie){return Ce(T)?this._fetchNamespace(C).listen(T,F,ue,Ie):()=>{}}_buildInstruction(C,T,F,ue,Ie){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,F,ue,C.fromState.options,C.toState.options,T,Ie)}destroyInnerAnimations(C){let T=this.driver.query(C,wi,!0);T.forEach(F=>this.destroyActiveAnimationsForElement(F)),0!=this.playersByQueriedElement.size&&(T=this.driver.query(C,br,!0),T.forEach(F=>this.finishActiveQueriedAnimationOnElement(F)))}destroyActiveAnimationsForElement(C){const T=this.playersByElement.get(C);T&&T.forEach(F=>{F.queued?F.markedForDestroy=!0:F.destroy()})}finishActiveQueriedAnimationOnElement(C){const T=this.playersByQueriedElement.get(C);T&&T.forEach(F=>F.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return mi(this.players).onDone(()=>C());C()})}processLeaveNode(C){var T;const F=C[ws];if(F&&F.setForRemoval){if(C[ws]=Ao,F.namespaceId){this.destroyInnerAnimations(C);const ue=this._fetchNamespace(F.namespaceId);ue&&ue.clearElementCache(C)}this._onRemovalComplete(C,F.setForRemoval)}(null===(T=C.classList)||void 0===T?void 0:T.contains(Si))&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach(ue=>{this.markElementAsDisabled(ue,!1)})}flush(C=-1){let T=[];if(this.newHostElements.size&&(this.newHostElements.forEach((F,ue)=>this._balanceNamespaceList(F,ue)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let F=0;F<this.collectedEnterElements.length;F++)fr(this.collectedEnterElements[F],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const F=[];try{T=this._flushAnimations(F,C)}finally{for(let ue=0;ue<F.length;ue++)F[ue]()}}else for(let F=0;F<this.collectedLeaveElements.length;F++)this.processLeaveNode(this.collectedLeaveElements[F]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(F=>F()),this._flushFns=[],this._whenQuietFns.length){const F=this._whenQuietFns;this._whenQuietFns=[],T.length?mi(T).onDone(()=>{F.forEach(ue=>ue())}):F.forEach(ue=>ue())}}reportError(C){throw function Fr(Z){return new k.vHH(3402,Rt)}()}_flushAnimations(C,T){const F=new Gs,ue=[],Ie=new Map,Ve=[],Xe=new Map,vt=new Map,fn=new Map,pr=new Set;this.disabledNodes.forEach(It=>{pr.add(It);const Ut=this.driver.query(It,".ng-animate-queued",!0);for(let Xn=0;Xn<Ut.length;Xn++)pr.add(Ut[Xn])});const $t=this.bodyNode,yr=Array.from(this.statesByElement.keys()),Rr=An(yr,this.collectedEnterElements),Ur=new Map;let Nn=0;Rr.forEach((It,Ut)=>{const Xn=Fi+Nn++;Ur.set(Ut,Xn),It.forEach(Zn=>fr(Zn,Xn))});const Jn=[],eo=new Set,Gn=new Set;for(let It=0;It<this.collectedLeaveElements.length;It++){const Ut=this.collectedLeaveElements[It],Xn=Ut[ws];Xn&&Xn.setForRemoval&&(Jn.push(Ut),eo.add(Ut),Xn.hasAnimation?this.driver.query(Ut,".ng-star-inserted",!0).forEach(Zn=>eo.add(Zn)):Gn.add(Ut))}const qt=new Map,yn=An(yr,Array.from(eo));yn.forEach((It,Ut)=>{const Xn=ci+Nn++;qt.set(Ut,Xn),It.forEach(Zn=>fr(Zn,Xn))}),C.push(()=>{Rr.forEach((It,Ut)=>{const Xn=Ur.get(Ut);It.forEach(Zn=>Kn(Zn,Xn))}),yn.forEach((It,Ut)=>{const Xn=qt.get(Ut);It.forEach(Zn=>Kn(Zn,Xn))}),Jn.forEach(It=>{this.processLeaveNode(It)})});const Os=[],ao=[];for(let It=this._namespaceList.length-1;It>=0;It--)this._namespaceList[It].drainQueuedTransitions(T).forEach(Xn=>{const Zn=Xn.player,Er=Xn.element;if(Os.push(Zn),this.collectedEnterElements.length){const vs=Er[ws];if(vs&&vs.setForMove){if(vs.previousTriggersValues&&vs.previousTriggersValues.has(Xn.triggerName)){const Oo=vs.previousTriggersValues.get(Xn.triggerName),ks=this.statesByElement.get(Xn.element);ks&&ks[Xn.triggerName]&&(ks[Xn.triggerName].value=Oo)}return void Zn.destroy()}}const zn=!$t||!this.driver.containsElement($t,Er),Is=qt.get(Er),$r=Ur.get(Er),cs=this._buildInstruction(Xn,F,$r,Is,zn);if(cs.errors&&cs.errors.length)return void ao.push(cs);if(zn)return Zn.onStart(()=>ls(Er,cs.fromStyles)),Zn.onDestroy(()=>es(Er,cs.toStyles)),void ue.push(Zn);if(Xn.isFallbackTransition)return Zn.onStart(()=>ls(Er,cs.fromStyles)),Zn.onDestroy(()=>es(Er,cs.toStyles)),void ue.push(Zn);const Ss=[];cs.timelines.forEach(vs=>{vs.stretchStartingKeyframe=!0,this.disabledNodes.has(vs.element)||Ss.push(vs)}),cs.timelines=Ss,F.append(Er,cs.timelines),Ve.push({instruction:cs,player:Zn,element:Er}),cs.queriedElements.forEach(vs=>Vn(Xe,vs,[]).push(Zn)),cs.preStyleProps.forEach((vs,Oo)=>{const ks=Object.keys(vs);if(ks.length){let Jo=vt.get(Oo);Jo||vt.set(Oo,Jo=new Set),ks.forEach(Ua=>Jo.add(Ua))}}),cs.postStyleProps.forEach((vs,Oo)=>{const ks=Object.keys(vs);let Jo=fn.get(Oo);Jo||fn.set(Oo,Jo=new Set),ks.forEach(Ua=>Jo.add(Ua))})});if(ao.length){const It=[];ao.forEach(Ut=>{It.push(function Oi(Z,C){return new k.vHH(3505,Rt)}())}),Os.forEach(Ut=>Ut.destroy()),this.reportError(It)}const yo=new Map,O=new Map;Ve.forEach(It=>{const Ut=It.element;F.has(Ut)&&(O.set(Ut,Ut),this._beforeAnimationBuild(It.player.namespaceId,It.instruction,yo))}),ue.forEach(It=>{const Ut=It.element;this._getPreviousPlayers(Ut,!1,It.namespaceId,It.triggerName,null).forEach(Zn=>{Vn(yo,Ut,[]).push(Zn),Zn.destroy()})});const M=Jn.filter(It=>rs(It,vt,fn)),S=new Map;Zt(S,this.driver,Gn,fn,pt.l3).forEach(It=>{rs(It,vt,fn)&&M.push(It)});const ne=new Map;Rr.forEach((It,Ut)=>{Zt(ne,this.driver,new Set(It),vt,pt.k1)}),M.forEach(It=>{const Ut=S.get(It),Xn=ne.get(It);S.set(It,Object.assign(Object.assign({},Ut),Xn))});const _e=[],Be=[],ot={};Ve.forEach(It=>{const{element:Ut,player:Xn,instruction:Zn}=It;if(F.has(Ut)){if(pr.has(Ut))return Xn.onDestroy(()=>es(Ut,Zn.toStyles)),Xn.disabled=!0,Xn.overrideTotalTime(Zn.totalTime),void ue.push(Xn);let Er=ot;if(O.size>1){let Is=Ut;const $r=[];for(;Is=Is.parentNode;){const cs=O.get(Is);if(cs){Er=cs;break}$r.push(Is)}$r.forEach(cs=>O.set(cs,Er))}const zn=this._buildAnimation(Xn.namespaceId,Zn,yo,Ie,ne,S);if(Xn.setRealPlayer(zn),Er===ot)_e.push(Xn);else{const Is=this.playersByElement.get(Er);Is&&Is.length&&(Xn.parentPlayer=mi(Is)),ue.push(Xn)}}else ls(Ut,Zn.fromStyles),Xn.onDestroy(()=>es(Ut,Zn.toStyles)),Be.push(Xn),pr.has(Ut)&&ue.push(Xn)}),Be.forEach(It=>{const Ut=Ie.get(It.element);if(Ut&&Ut.length){const Xn=mi(Ut);It.setRealPlayer(Xn)}}),ue.forEach(It=>{It.parentPlayer?It.syncPlayerEvents(It.parentPlayer):It.destroy()});for(let It=0;It<Jn.length;It++){const Ut=Jn[It],Xn=Ut[ws];if(Kn(Ut,ci),Xn&&Xn.hasAnimation)continue;let Zn=[];if(Xe.size){let zn=Xe.get(Ut);zn&&zn.length&&Zn.push(...zn);let Is=this.driver.query(Ut,br,!0);for(let $r=0;$r<Is.length;$r++){let cs=Xe.get(Is[$r]);cs&&cs.length&&Zn.push(...cs)}}const Er=Zn.filter(zn=>!zn.destroyed);Er.length?ri(this,Ut,Er):this.processLeaveNode(Ut)}return Jn.length=0,_e.forEach(It=>{this.players.push(It),It.onDone(()=>{It.destroy();const Ut=this.players.indexOf(It);this.players.splice(Ut,1)}),It.play()}),_e}elementContainsData(C,T){let F=!1;const ue=T[ws];return ue&&ue.setForRemoval&&(F=!0),this.playersByElement.has(T)&&(F=!0),this.playersByQueriedElement.has(T)&&(F=!0),this.statesByElement.has(T)&&(F=!0),this._fetchNamespace(C).elementContainsData(T)||F}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,T,F,ue,Ie){let Ve=[];if(T){const Xe=this.playersByQueriedElement.get(C);Xe&&(Ve=Xe)}else{const Xe=this.playersByElement.get(C);if(Xe){const vt=!Ie||Ie==G;Xe.forEach(fn=>{fn.queued||!vt&&fn.triggerName!=ue||Ve.push(fn)})}}return(F||ue)&&(Ve=Ve.filter(Xe=>!(F&&F!=Xe.namespaceId||ue&&ue!=Xe.triggerName))),Ve}_beforeAnimationBuild(C,T,F){const Ie=T.element,Ve=T.isRemovalTransition?void 0:C,Xe=T.isRemovalTransition?void 0:T.triggerName;for(const vt of T.timelines){const fn=vt.element,pr=fn!==Ie,$t=Vn(F,fn,[]);this._getPreviousPlayers(fn,pr,Ve,Xe,T.toState).forEach(Rr=>{const Ur=Rr.getRealPlayer();Ur.beforeDestroy&&Ur.beforeDestroy(),Rr.destroy(),$t.push(Rr)})}ls(Ie,T.fromStyles)}_buildAnimation(C,T,F,ue,Ie,Ve){const Xe=T.triggerName,vt=T.element,fn=[],pr=new Set,$t=new Set,yr=T.timelines.map(Ur=>{const Nn=Ur.element;pr.add(Nn);const Jn=Nn[ws];if(Jn&&Jn.removedBeforeQueried)return new pt.ZN(Ur.duration,Ur.delay);const eo=Nn!==vt,Gn=function vi(Z){const C=[];return hi(Z,C),C}((F.get(Nn)||Js).map(yo=>yo.getRealPlayer())).filter(yo=>!!yo.element&&yo.element===Nn),qt=Ie.get(Nn),yn=Ve.get(Nn),Os=Lr(0,this._normalizer,0,Ur.keyframes,qt,yn),ao=this._buildPlayer(Ur,Os,Gn);if(Ur.subTimeline&&ue&&$t.add(Nn),eo){const yo=new xn(C,Xe,Nn);yo.setRealPlayer(ao),fn.push(yo)}return ao});fn.forEach(Ur=>{Vn(this.playersByQueriedElement,Ur.element,[]).push(Ur),Ur.onDone(()=>function ee(Z,C,T){let F;if(Z instanceof Map){if(F=Z.get(C),F){if(F.length){const ue=F.indexOf(T);F.splice(ue,1)}0==F.length&&Z.delete(C)}}else if(F=Z[C],F){if(F.length){const ue=F.indexOf(T);F.splice(ue,1)}0==F.length&&delete Z[C]}return F}(this.playersByQueriedElement,Ur.element,Ur))}),pr.forEach(Ur=>fr(Ur,Cn));const Rr=mi(yr);return Rr.onDestroy(()=>{pr.forEach(Ur=>Kn(Ur,Cn)),es(vt,T.toStyles)}),$t.forEach(Ur=>{Vn(ue,Ur,[]).push(Rr)}),Rr}_buildPlayer(C,T,F){return T.length>0?this.driver.animate(C.element,T,C.duration,C.delay,C.easing,F):new pt.ZN(C.duration,C.delay)}}class xn{constructor(C,T,F){this.namespaceId=C,this.triggerName=T,this.element=F,this._player=new pt.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,Object.keys(this._queuedCallbacks).forEach(T=>{this._queuedCallbacks[T].forEach(F=>ki(C,T,void 0,F))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const T=this._player;T.triggerCallback&&C.onStart(()=>T.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,T){Vn(this._queuedCallbacks,C,[]).push(T)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const T=this._player;T.triggerCallback&&T.triggerCallback(C)}}function Ce(Z){return Z&&1===Z.nodeType}function rt(Z,C){const T=Z.style.display;return Z.style.display=null!=C?C:"none",T}function Zt(Z,C,T,F,ue){const Ie=[];T.forEach(vt=>Ie.push(rt(vt)));const Ve=[];F.forEach((vt,fn)=>{const pr={};vt.forEach($t=>{const yr=pr[$t]=C.computeStyle(fn,$t,ue);(!yr||0==yr.length)&&(fn[ws]=To,Ve.push(fn))}),Z.set(fn,pr)});let Xe=0;return T.forEach(vt=>rt(vt,Ie[Xe++])),Ve}function An(Z,C){const T=new Map;if(Z.forEach(Xe=>T.set(Xe,[])),0==C.length)return T;const ue=new Set(C),Ie=new Map;function Ve(Xe){if(!Xe)return 1;let vt=Ie.get(Xe);if(vt)return vt;const fn=Xe.parentNode;return vt=T.has(fn)?fn:ue.has(fn)?1:Ve(fn),Ie.set(Xe,vt),vt}return C.forEach(Xe=>{const vt=Ve(Xe);1!==vt&&T.get(vt).push(Xe)}),T}function fr(Z,C){var T;null===(T=Z.classList)||void 0===T||T.add(C)}function Kn(Z,C){var T;null===(T=Z.classList)||void 0===T||T.remove(C)}function ri(Z,C,T){mi(T).onDone(()=>Z.processLeaveNode(C))}function hi(Z,C){for(let T=0;T<Z.length;T++){const F=Z[T];F instanceof pt.ZE?hi(F.players,C):C.push(F)}}function rs(Z,C,T){const F=T.get(Z);if(!F)return!1;let ue=C.get(Z);return ue?F.forEach(Ie=>ue.add(Ie)):C.set(Z,F),T.delete(Z),!0}class l{constructor(C,T,F){this.bodyNode=C,this._driver=T,this._normalizer=F,this._triggerCache={},this.onRemovalComplete=(ue,Ie)=>{},this._transitionEngine=new Ye(C,T,F),this._timelineEngine=new yi(C,T,F),this._transitionEngine.onRemovalComplete=(ue,Ie)=>this.onRemovalComplete(ue,Ie)}registerTrigger(C,T,F,ue,Ie){const Ve=C+"-"+ue;let Xe=this._triggerCache[Ve];if(!Xe){const vt=[],pr=ys(this._driver,Ie,vt,[]);if(vt.length)throw function Yi(Z,C){return new k.vHH(3404,Rt)}();Xe=function wn(Z,C,T){return new hr(Z,C,T)}(ue,pr,this._normalizer),this._triggerCache[Ve]=Xe}this._transitionEngine.registerTrigger(T,ue,Xe)}register(C,T){this._transitionEngine.register(C,T)}destroy(C,T){this._transitionEngine.destroy(C,T)}onInsert(C,T,F,ue){this._transitionEngine.insertNode(C,T,F,ue)}onRemove(C,T,F,ue){this._transitionEngine.removeNode(C,T,ue||!1,F)}disableAnimations(C,T){this._transitionEngine.markElementAsDisabled(C,T)}process(C,T,F,ue){if("@"==F.charAt(0)){const[Ie,Ve]=Pr(F);this._timelineEngine.command(Ie,T,Ve,ue)}else this._transitionEngine.trigger(C,T,F,ue)}listen(C,T,F,ue,Ie){if("@"==F.charAt(0)){const[Ve,Xe]=Pr(F);return this._timelineEngine.listen(Ve,T,Xe,Ie)}return this._transitionEngine.listen(C,T,F,ue,Ie)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let I=(()=>{class Z{constructor(T,F,ue){this._element=T,this._startStyles=F,this._endStyles=ue,this._state=0;let Ie=Z.initialStylesByElement.get(T);Ie||Z.initialStylesByElement.set(T,Ie={}),this._initialStyles=Ie}start(){this._state<1&&(this._startStyles&&es(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(es(this._element,this._initialStyles),this._endStyles&&(es(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Z.initialStylesByElement.delete(this._element),this._startStyles&&(ls(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ls(this._element,this._endStyles),this._endStyles=null),es(this._element,this._initialStyles),this._state=3)}}return Z.initialStylesByElement=new WeakMap,Z})();function P(Z){let C=null;const T=Object.keys(Z);for(let F=0;F<T.length;F++){const ue=T[F];z(ue)&&(C=C||{},C[ue]=Z[ue])}return C}function z(Z){return"display"===Z||"position"===Z}class J{constructor(C,T,F,ue){this.element=C,this.keyframes=T,this.options=F,this._specialStyles=ue,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=F.duration,this._delay=F.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(C,T,F){return C.animate(T,F)}onStart(C){this._onStartFns.push(C)}onDone(C){this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C={};if(this.hasStarted()){const T=this._finalKeyframe;Object.keys(T).forEach(F=>{"offset"!=F&&(C[F]=this._finished?T[F]:gs(this.element,F))})}this.currentSnapshot=C}triggerCallback(C){const T="start"==C?this._onStartFns:this._onDoneFns;T.forEach(F=>F()),T.length=0}}class ge{validateStyleProperty(C){return Me(C)}matchesElement(C,T){return!1}containsElement(C,T){return gt(C,T)}getParentElement(C){return Ue(C)}query(C,T,F){return sn(C,T,F)}computeStyle(C,T,F){return window.getComputedStyle(C)[T]}animate(C,T,F,ue,Ie,Ve=[]){const vt={duration:F,delay:ue,fill:0==ue?"both":"forwards"};Ie&&(vt.easing=Ie);const fn={},pr=Ve.filter(yr=>yr instanceof J);(function fs(Z,C){return 0===Z||0===C})(F,ue)&&pr.forEach(yr=>{let Rr=yr.currentSnapshot;Object.keys(Rr).forEach(Ur=>fn[Ur]=Rr[Ur])}),T=function ui(Z,C,T){const F=Object.keys(T);if(F.length&&C.length){let Ie=C[0],Ve=[];if(F.forEach(Xe=>{Ie.hasOwnProperty(Xe)||Ve.push(Xe),Ie[Xe]=T[Xe]}),Ve.length)for(var ue=1;ue<C.length;ue++){let Xe=C[ue];Ve.forEach(function(vt){Xe[vt]=gs(Z,vt)})}}return C}(C,T=T.map(yr=>Ii(yr,!1)),fn);const $t=function A(Z,C){let T=null,F=null;return Array.isArray(C)&&C.length?(T=P(C[0]),C.length>1&&(F=P(C[C.length-1]))):C&&(T=P(C)),T||F?new I(Z,T,F):null}(C,T);return new J(C,T,vt,$t)}}let be=(()=>{class Z extends pt._j{constructor(T,F){super(),this._nextAnimationId=0,this._renderer=T.createRenderer(F.body,{id:"0",encapsulation:k.ifc.None,styles:[],data:{animation:[]}})}build(T){const F=this._nextAnimationId.toString();this._nextAnimationId++;const ue=Array.isArray(T)?(0,pt.vP)(T):T;return ce(this._renderer,null,F,"register",[ue]),new oe(F,this._renderer)}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(k.FYo),k.LFG(at.K0))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();class oe extends pt.LC{constructor(C,T){super(),this._id=C,this._renderer=T}create(C,T){return new me(this._id,C,T||{},this._renderer)}}class me{constructor(C,T,F,ue){this.id=C,this.element=T,this._renderer=ue,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",F)}_listen(C,T){return this._renderer.listen(this.element,`@@${this.id}:${C}`,T)}_command(C,...T){return ce(this._renderer,this.element,this.id,C,T)}onDone(C){this._listen("done",C)}onStart(C){this._listen("start",C)}onDestroy(C){this._listen("destroy",C)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(C){this._command("setPosition",C)}getPosition(){var C,T;return null!==(T=null===(C=this._renderer.engine.players[+this.id])||void 0===C?void 0:C.getPosition())&&void 0!==T?T:0}}function ce(Z,C,T,F,ue){return Z.setProperty(C,`@@${T}:${F}`,ue)}const Te="@.disabled";let We=(()=>{class Z{constructor(T,F,ue){this.delegate=T,this.engine=F,this._zone=ue,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),F.onRemovalComplete=(Ie,Ve)=>{const Xe=null==Ve?void 0:Ve.parentNode(Ie);Xe&&Ve.removeChild(Xe,Ie)}}createRenderer(T,F){const Ie=this.delegate.createRenderer(T,F);if(!(T&&F&&F.data&&F.data.animation)){let pr=this._rendererCache.get(Ie);return pr||(pr=new tt("",Ie,this.engine),this._rendererCache.set(Ie,pr)),pr}const Ve=F.id,Xe=F.id+"-"+this._currentId;this._currentId++,this.engine.register(Xe,T);const vt=pr=>{Array.isArray(pr)?pr.forEach(vt):this.engine.registerTrigger(Ve,Xe,T,pr.name,pr)};return F.data.animation.forEach(vt),new De(this,Xe,Ie,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(T,F,ue){T>=0&&T<this._microtaskId?this._zone.run(()=>F(ue)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Ie=>{const[Ve,Xe]=Ie;Ve(Xe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([F,ue]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(k.FYo),k.LFG(l),k.LFG(k.R0b))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();class tt{constructor(C,T,F){this.namespaceId=C,this.delegate=T,this.engine=F,this.destroyNode=this.delegate.destroyNode?ue=>T.destroyNode(ue):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(C,T){return this.delegate.createElement(C,T)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,T){this.delegate.appendChild(C,T),this.engine.onInsert(this.namespaceId,T,C,!1)}insertBefore(C,T,F,ue=!0){this.delegate.insertBefore(C,T,F),this.engine.onInsert(this.namespaceId,T,C,ue)}removeChild(C,T,F){this.engine.onRemove(this.namespaceId,T,this.delegate,F)}selectRootElement(C,T){return this.delegate.selectRootElement(C,T)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,T,F,ue){this.delegate.setAttribute(C,T,F,ue)}removeAttribute(C,T,F){this.delegate.removeAttribute(C,T,F)}addClass(C,T){this.delegate.addClass(C,T)}removeClass(C,T){this.delegate.removeClass(C,T)}setStyle(C,T,F,ue){this.delegate.setStyle(C,T,F,ue)}removeStyle(C,T,F){this.delegate.removeStyle(C,T,F)}setProperty(C,T,F){"@"==T.charAt(0)&&T==Te?this.disableAnimations(C,!!F):this.delegate.setProperty(C,T,F)}setValue(C,T){this.delegate.setValue(C,T)}listen(C,T,F){return this.delegate.listen(C,T,F)}disableAnimations(C,T){this.engine.disableAnimations(C,T)}}class De extends tt{constructor(C,T,F,ue){super(T,F,ue),this.factory=C,this.namespaceId=T}setProperty(C,T,F){"@"==T.charAt(0)?"."==T.charAt(1)&&T==Te?this.disableAnimations(C,F=void 0===F||!!F):this.engine.process(this.namespaceId,C,T.substr(1),F):this.delegate.setProperty(C,T,F)}listen(C,T,F){if("@"==T.charAt(0)){const ue=function ke(Z){switch(Z){case"body":return document.body;case"document":return document;case"window":return window;default:return Z}}(C);let Ie=T.substr(1),Ve="";return"@"!=Ie.charAt(0)&&([Ie,Ve]=function _t(Z){const C=Z.indexOf(".");return[Z.substring(0,C),Z.substr(C+1)]}(Ie)),this.engine.listen(this.namespaceId,ue,Ie,Ve,Xe=>{this.factory.scheduleListenerCallback(Xe._data||-1,F,Xe)})}return this.delegate.listen(C,T,F)}}let et=(()=>{class Z extends l{constructor(T,F,ue){super(T.body,F,ue)}ngOnDestroy(){this.flush()}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(at.K0),k.LFG(ai),k.LFG(Rs))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();const Dn=new k.OlP("AnimationModuleType"),gn=[{provide:pt._j,useClass:be},{provide:Rs,useFactory:function yt(){return new Vi}},{provide:l,useClass:et},{provide:k.FYo,useFactory:function vn(Z,C,T){return new We(Z,C,T)},deps:[g.se,l,k.R0b]}],Mn=[{provide:ai,useFactory:()=>new ge},{provide:Dn,useValue:"BrowserAnimations"},...gn],nr=[{provide:ai,useClass:Yn},{provide:Dn,useValue:"NoopAnimations"},...gn];let _r=(()=>{class Z{static withConfig(T){return{ngModule:Z,providers:T.disableAnimations?nr:Mn}}}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=k.oAB({type:Z}),Z.\u0275inj=k.cJS({providers:Mn,imports:[g.b2]}),Z})();var Jt=j(4466),Pt=j(520);let hn=(()=>{class Z{constructor(){}intercept(T,F){let ue=T.clone({setHeaders:{Authorization:`Bearer ${localStorage.getItem("drastitoken")}`}});return F.handle(ue)}}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();var lr=j(262),ar=j(2843);let Wt=(()=>{class Z{constructor(T,F,ue){this.router=T,this.cartService=F,this.toastr=ue}intercept(T,F){return F.handle(T).pipe((0,lr.K)(ue=>{var Ie,Ve,Xe;let vt=null===(Ie=null==ue?void 0:ue.error)||void 0===Ie?void 0:Ie.errors;if(Array.isArray(vt)&&(null==vt?void 0:vt.length))for(let fn=0;fn<(null==vt?void 0:vt.length);fn++)(null===(Ve=vt[fn])||void 0===Ve?void 0:Ve.message)&&this.toastr.error(null===(Xe=vt[fn])||void 0===Xe?void 0:Xe.message);else(null==vt?void 0:vt.message)&&this.toastr.error(null==vt?void 0:vt.message);return-1!==[401,403].indexOf(ue.status)&&(this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username")),(0,ar._)(ue)}))}}return Z.\u0275fac=function(T){return new(T||Z)(k.LFG(he.F0),k.LFG(dn.N),k.LFG(dt._W))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac}),Z})();var cr=j(2011),tr=j(1205),_i=j(2095);let Di=(()=>{class Z{}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=k.oAB({type:Z,bootstrap:[Lt]}),Z.\u0275inj=k.cJS({providers:[{provide:Pt.TP,useClass:hn,multi:!0},{provide:Pt.TP,useClass:Wt,multi:!0}],imports:[[g.b2.withServerTransition({appId:"serverApp"}),Ot,_r,Jt.m,_i.yb,tr.ww,cr.hO.initializeApp({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"})]]}),Z})();function Xo(){g.q6().bootstrapModule(Di).catch(Z=>console.error(Z))}j(2340).N.production&&(0,k.G48)(),"complete"===document.readyState?Xo():document.addEventListener("DOMContentLoaded",Xo)},1135:(Wn,Dt,j)=>{j.d(Dt,{X:()=>k});var g=j(7579);class k extends g.x{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const je=super._subscribe(ae);return!je.closed&&ae.next(this._value),je}getValue(){const{hasError:ae,thrownError:je,_value:He}=this;if(ae)throw je;return this._throwIfClosed(),He}next(ae){super.next(this._value=ae)}}},8306:(Wn,Dt,j)=>{j.d(Dt,{y:()=>Ne});var g=j(2961),k=j(727),he=j(8822),ae=j(4671);var dt=j(2416),qe=j(576),at=j(2806);let Ne=(()=>{class Et{constructor(In){In&&(this._subscribe=In)}lift(In){const Ot=new Et;return Ot.source=this,Ot.operator=In,Ot}subscribe(In,Ot,tn){const Ln=function Tn(Et){return Et&&Et instanceof g.Lv||function bt(Et){return Et&&(0,qe.m)(Et.next)&&(0,qe.m)(Et.error)&&(0,qe.m)(Et.complete)}(Et)&&(0,k.Nn)(Et)}(In)?In:new g.Hp(In,Ot,tn);return(0,at.x)(()=>{const{operator:dn,source:xe}=this;Ln.add(dn?dn.call(Ln,xe):xe?this._subscribe(Ln):this._trySubscribe(Ln))}),Ln}_trySubscribe(In){try{return this._subscribe(In)}catch(Ot){In.error(Ot)}}forEach(In,Ot){return new(Ot=Pe(Ot))((tn,Ln)=>{const dn=new g.Hp({next:xe=>{try{In(xe)}catch(Ge){Ln(Ge),dn.unsubscribe()}},error:Ln,complete:tn});this.subscribe(dn)})}_subscribe(In){var Ot;return null===(Ot=this.source)||void 0===Ot?void 0:Ot.subscribe(In)}[he.L](){return this}pipe(...In){return function He(Et){return 0===Et.length?ae.y:1===Et.length?Et[0]:function(In){return Et.reduce((Ot,tn)=>tn(Ot),In)}}(In)(this)}toPromise(In){return new(In=Pe(In))((Ot,tn)=>{let Ln;this.subscribe(dn=>Ln=dn,dn=>tn(dn),()=>Ot(Ln))})}}return Et.create=un=>new Et(un),Et})();function Pe(Et){var un;return null!==(un=null!=Et?Et:dt.v.Promise)&&void 0!==un?un:Promise}},7579:(Wn,Dt,j)=>{j.d(Dt,{x:()=>dt});var g=j(8306),k=j(727);const ae=(0,j(3888).d)(at=>function(){at(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=j(8737),He=j(2806);let dt=(()=>{class at extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Pe){const bt=new qe(this,this);return bt.operator=Pe,bt}_throwIfClosed(){if(this.closed)throw new ae}next(Pe){(0,He.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const bt of this.currentObservers)bt.next(Pe)}})}error(Pe){(0,He.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Pe;const{observers:bt}=this;for(;bt.length;)bt.shift().error(Pe)}})}complete(){(0,He.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Pe;return(null===(Pe=this.observers)||void 0===Pe?void 0:Pe.length)>0}_trySubscribe(Pe){return this._throwIfClosed(),super._trySubscribe(Pe)}_subscribe(Pe){return this._throwIfClosed(),this._checkFinalizedStatuses(Pe),this._innerSubscribe(Pe)}_innerSubscribe(Pe){const{hasError:bt,isStopped:Tn,observers:Et}=this;return bt||Tn?k.Lc:(this.currentObservers=null,Et.push(Pe),new k.w0(()=>{this.currentObservers=null,(0,je.P)(Et,Pe)}))}_checkFinalizedStatuses(Pe){const{hasError:bt,thrownError:Tn,isStopped:Et}=this;bt?Pe.error(Tn):Et&&Pe.complete()}asObservable(){const Pe=new g.y;return Pe.source=this,Pe}}return at.create=(Ne,Pe)=>new qe(Ne,Pe),at})();class qe extends dt{constructor(Ne,Pe){super(),this.destination=Ne,this.source=Pe}next(Ne){var Pe,bt;null===(bt=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.next)||void 0===bt||bt.call(Pe,Ne)}error(Ne){var Pe,bt;null===(bt=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.error)||void 0===bt||bt.call(Pe,Ne)}complete(){var Ne,Pe;null===(Pe=null===(Ne=this.destination)||void 0===Ne?void 0:Ne.complete)||void 0===Pe||Pe.call(Ne)}_subscribe(Ne){var Pe,bt;return null!==(bt=null===(Pe=this.source)||void 0===Pe?void 0:Pe.subscribe(Ne))&&void 0!==bt?bt:k.Lc}}},2961:(Wn,Dt,j)=>{j.d(Dt,{Hp:()=>In,Lv:()=>bt});var g=j(576),k=j(727),he=j(2416),ae=j(7849);function je(){}const He=at("C",void 0,void 0);function at(xe,Ge,St){return{kind:xe,value:Ge,error:St}}var Ne=j(3410),Pe=j(2806);class bt extends k.w0{constructor(Ge){super(),this.isStopped=!1,Ge?(this.destination=Ge,(0,k.Nn)(Ge)&&Ge.add(this)):this.destination=dn}static create(Ge,St,on){return new In(Ge,St,on)}next(Ge){this.isStopped?Ln(function qe(xe){return at("N",xe,void 0)}(Ge),this):this._next(Ge)}error(Ge){this.isStopped?Ln(function dt(xe){return at("E",void 0,xe)}(Ge),this):(this.isStopped=!0,this._error(Ge))}complete(){this.isStopped?Ln(He,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ge){this.destination.next(Ge)}_error(Ge){try{this.destination.error(Ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Tn=Function.prototype.bind;function Et(xe,Ge){return Tn.call(xe,Ge)}class un{constructor(Ge){this.partialObserver=Ge}next(Ge){const{partialObserver:St}=this;if(St.next)try{St.next(Ge)}catch(on){Ot(on)}}error(Ge){const{partialObserver:St}=this;if(St.error)try{St.error(Ge)}catch(on){Ot(on)}else Ot(Ge)}complete(){const{partialObserver:Ge}=this;if(Ge.complete)try{Ge.complete()}catch(St){Ot(St)}}}class In extends bt{constructor(Ge,St,on){let Ht;if(super(),(0,g.m)(Ge)||!Ge)Ht={next:null!=Ge?Ge:void 0,error:null!=St?St:void 0,complete:null!=on?on:void 0};else{let Oe;this&&he.v.useDeprecatedNextContext?(Oe=Object.create(Ge),Oe.unsubscribe=()=>this.unsubscribe(),Ht={next:Ge.next&&Et(Ge.next,Oe),error:Ge.error&&Et(Ge.error,Oe),complete:Ge.complete&&Et(Ge.complete,Oe)}):Ht=Ge}this.destination=new un(Ht)}}function Ot(xe){he.v.useDeprecatedSynchronousErrorHandling?(0,Pe.O)(xe):(0,ae.h)(xe)}function Ln(xe,Ge){const{onStoppedNotification:St}=he.v;St&&Ne.z.setTimeout(()=>St(xe,Ge))}const dn={closed:!0,next:je,error:function tn(xe){throw xe},complete:je}},727:(Wn,Dt,j)=>{j.d(Dt,{Lc:()=>He,w0:()=>je,Nn:()=>dt});var g=j(576);const he=(0,j(3888).d)(at=>function(Pe){at(this),this.message=Pe?`${Pe.length} errors occurred during unsubscription:\n${Pe.map((bt,Tn)=>`${Tn+1}) ${bt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Pe});var ae=j(8737);class je{constructor(Ne){this.initialTeardown=Ne,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ne;if(!this.closed){this.closed=!0;const{_parentage:Pe}=this;if(Pe)if(this._parentage=null,Array.isArray(Pe))for(const Et of Pe)Et.remove(this);else Pe.remove(this);const{initialTeardown:bt}=this;if((0,g.m)(bt))try{bt()}catch(Et){Ne=Et instanceof he?Et.errors:[Et]}const{_finalizers:Tn}=this;if(Tn){this._finalizers=null;for(const Et of Tn)try{qe(Et)}catch(un){Ne=null!=Ne?Ne:[],un instanceof he?Ne=[...Ne,...un.errors]:Ne.push(un)}}if(Ne)throw new he(Ne)}}add(Ne){var Pe;if(Ne&&Ne!==this)if(this.closed)qe(Ne);else{if(Ne instanceof je){if(Ne.closed||Ne._hasParent(this))return;Ne._addParent(this)}(this._finalizers=null!==(Pe=this._finalizers)&&void 0!==Pe?Pe:[]).push(Ne)}}_hasParent(Ne){const{_parentage:Pe}=this;return Pe===Ne||Array.isArray(Pe)&&Pe.includes(Ne)}_addParent(Ne){const{_parentage:Pe}=this;this._parentage=Array.isArray(Pe)?(Pe.push(Ne),Pe):Pe?[Pe,Ne]:Ne}_removeParent(Ne){const{_parentage:Pe}=this;Pe===Ne?this._parentage=null:Array.isArray(Pe)&&(0,ae.P)(Pe,Ne)}remove(Ne){const{_finalizers:Pe}=this;Pe&&(0,ae.P)(Pe,Ne),Ne instanceof je&&Ne._removeParent(this)}}je.EMPTY=(()=>{const at=new je;return at.closed=!0,at})();const He=je.EMPTY;function dt(at){return at instanceof je||at&&"closed"in at&&(0,g.m)(at.remove)&&(0,g.m)(at.add)&&(0,g.m)(at.unsubscribe)}function qe(at){(0,g.m)(at)?at():at.unsubscribe()}},2416:(Wn,Dt,j)=>{j.d(Dt,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Wn,Dt,j)=>{j.d(Dt,{z:()=>je});var g=j(8189),he=j(7669),ae=j(8996);function je(...He){return function k(){return(0,g.J)(1)}()((0,ae.D)(He,(0,he.yG)(He)))}},515:(Wn,Dt,j)=>{j.d(Dt,{E:()=>k});const k=new(j(8306).y)(je=>je.complete())},8996:(Wn,Dt,j)=>{j.d(Dt,{D:()=>Ge});var g=j(8421),k=j(5363),he=j(9468),He=j(8306),qe=j(2202),at=j(576),Ne=j(9672);function bt(St,on){if(!St)throw new Error("Iterable cannot be null");return new He.y(Ht=>{(0,Ne.f)(Ht,on,()=>{const Oe=St[Symbol.asyncIterator]();(0,Ne.f)(Ht,on,()=>{Oe.next().then(Bt=>{Bt.done?Ht.complete():Ht.next(Bt.value)})},0,!0)})})}var Tn=j(3670),Et=j(8239),un=j(1144),In=j(6495),Ot=j(2206),tn=j(4532),Ln=j(3260);function Ge(St,on){return on?function xe(St,on){if(null!=St){if((0,Tn.c)(St))return function ae(St,on){return(0,g.Xf)(St).pipe((0,he.R)(on),(0,k.Q)(on))}(St,on);if((0,un.z)(St))return function dt(St,on){return new He.y(Ht=>{let Oe=0;return on.schedule(function(){Oe===St.length?Ht.complete():(Ht.next(St[Oe++]),Ht.closed||this.schedule())})})}(St,on);if((0,Et.t)(St))return function je(St,on){return(0,g.Xf)(St).pipe((0,he.R)(on),(0,k.Q)(on))}(St,on);if((0,Ot.D)(St))return bt(St,on);if((0,In.T)(St))return function Pe(St,on){return new He.y(Ht=>{let Oe;return(0,Ne.f)(Ht,on,()=>{Oe=St[qe.h](),(0,Ne.f)(Ht,on,()=>{let Bt,Re;try{({value:Bt,done:Re}=Oe.next())}catch(wt){return void Ht.error(wt)}Re?Ht.complete():Ht.next(Bt)},0,!0)}),()=>(0,at.m)(null==Oe?void 0:Oe.return)&&Oe.return()})}(St,on);if((0,Ln.L)(St))return function dn(St,on){return bt((0,Ln.Q)(St),on)}(St,on)}throw(0,tn.z)(St)}(St,on):(0,g.Xf)(St)}},8421:(Wn,Dt,j)=>{j.d(Dt,{Xf:()=>Tn});var g=j(655),k=j(1144),he=j(8239),ae=j(8306),je=j(3670),He=j(2206),dt=j(4532),qe=j(6495),at=j(3260),Ne=j(576),Pe=j(7849),bt=j(8822);function Tn(xe){if(xe instanceof ae.y)return xe;if(null!=xe){if((0,je.c)(xe))return function Et(xe){return new ae.y(Ge=>{const St=xe[bt.L]();if((0,Ne.m)(St.subscribe))return St.subscribe(Ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,k.z)(xe))return function un(xe){return new ae.y(Ge=>{for(let St=0;St<xe.length&&!Ge.closed;St++)Ge.next(xe[St]);Ge.complete()})}(xe);if((0,he.t)(xe))return function In(xe){return new ae.y(Ge=>{xe.then(St=>{Ge.closed||(Ge.next(St),Ge.complete())},St=>Ge.error(St)).then(null,Pe.h)})}(xe);if((0,He.D)(xe))return tn(xe);if((0,qe.T)(xe))return function Ot(xe){return new ae.y(Ge=>{for(const St of xe)if(Ge.next(St),Ge.closed)return;Ge.complete()})}(xe);if((0,at.L)(xe))return function Ln(xe){return tn((0,at.Q)(xe))}(xe)}throw(0,dt.z)(xe)}function tn(xe){return new ae.y(Ge=>{(function dn(xe,Ge){var St,on,Ht,Oe;return(0,g.mG)(this,void 0,void 0,function*(){try{for(St=(0,g.KL)(xe);!(on=yield St.next()).done;)if(Ge.next(on.value),Ge.closed)return}catch(Bt){Ht={error:Bt}}finally{try{on&&!on.done&&(Oe=St.return)&&(yield Oe.call(St))}finally{if(Ht)throw Ht.error}}Ge.complete()})})(xe,Ge).catch(St=>Ge.error(St))})}},6451:(Wn,Dt,j)=>{j.d(Dt,{T:()=>He});var g=j(8189),k=j(8421),he=j(515),ae=j(7669),je=j(8996);function He(...dt){const qe=(0,ae.yG)(dt),at=(0,ae._6)(dt,1/0),Ne=dt;return Ne.length?1===Ne.length?(0,k.Xf)(Ne[0]):(0,g.J)(at)((0,je.D)(Ne,qe)):he.E}},9646:(Wn,Dt,j)=>{j.d(Dt,{of:()=>he});var g=j(7669),k=j(8996);function he(...ae){const je=(0,g.yG)(ae);return(0,k.D)(ae,je)}},2843:(Wn,Dt,j)=>{j.d(Dt,{_:()=>he});var g=j(8306),k=j(576);function he(ae,je){const He=(0,k.m)(ae)?ae:()=>ae,dt=qe=>qe.error(He());return new g.y(je?qe=>je.schedule(dt,0,qe):dt)}},5403:(Wn,Dt,j)=>{j.d(Dt,{x:()=>k});var g=j(2961);function k(ae,je,He,dt,qe){return new he(ae,je,He,dt,qe)}class he extends g.Lv{constructor(je,He,dt,qe,at,Ne){super(je),this.onFinalize=at,this.shouldUnsubscribe=Ne,this._next=He?function(Pe){try{He(Pe)}catch(bt){je.error(bt)}}:super._next,this._error=qe?function(Pe){try{qe(Pe)}catch(bt){je.error(bt)}finally{this.unsubscribe()}}:super._error,this._complete=dt?function(){try{dt()}catch(Pe){je.error(Pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var je;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:He}=this;super.unsubscribe(),!He&&(null===(je=this.onFinalize)||void 0===je||je.call(this))}}}},262:(Wn,Dt,j)=>{j.d(Dt,{K:()=>ae});var g=j(8421),k=j(5403),he=j(4482);function ae(je){return(0,he.e)((He,dt)=>{let Ne,qe=null,at=!1;qe=He.subscribe((0,k.x)(dt,void 0,void 0,Pe=>{Ne=(0,g.Xf)(je(Pe,ae(je)(He))),qe?(qe.unsubscribe(),qe=null,Ne.subscribe(dt)):at=!0})),at&&(qe.unsubscribe(),qe=null,Ne.subscribe(dt))})}},4351:(Wn,Dt,j)=>{j.d(Dt,{b:()=>he});var g=j(5577),k=j(576);function he(ae,je){return(0,k.m)(je)?(0,g.z)(ae,je,1):(0,g.z)(ae,1)}},6590:(Wn,Dt,j)=>{j.d(Dt,{d:()=>he});var g=j(4482),k=j(5403);function he(ae){return(0,g.e)((je,He)=>{let dt=!1;je.subscribe((0,k.x)(He,qe=>{dt=!0,He.next(qe)},()=>{dt||He.next(ae),He.complete()}))})}},9300:(Wn,Dt,j)=>{j.d(Dt,{h:()=>he});var g=j(4482),k=j(5403);function he(ae,je){return(0,g.e)((He,dt)=>{let qe=0;He.subscribe((0,k.x)(dt,at=>ae.call(je,at,qe++)&&dt.next(at)))})}},590:(Wn,Dt,j)=>{j.d(Dt,{P:()=>dt});var g=j(6805),k=j(9300),he=j(5698),ae=j(6590),je=j(8068),He=j(4671);function dt(qe,at){const Ne=arguments.length>=2;return Pe=>Pe.pipe(qe?(0,k.h)((bt,Tn)=>qe(bt,Tn,Pe)):He.y,(0,he.q)(1),Ne?(0,ae.d)(at):(0,je.T)(()=>new g.K))}},4004:(Wn,Dt,j)=>{j.d(Dt,{U:()=>he});var g=j(4482),k=j(5403);function he(ae,je){return(0,g.e)((He,dt)=>{let qe=0;He.subscribe((0,k.x)(dt,at=>{dt.next(ae.call(je,at,qe++))}))})}},8189:(Wn,Dt,j)=>{j.d(Dt,{J:()=>he});var g=j(5577),k=j(4671);function he(ae=1/0){return(0,g.z)(k.y,ae)}},5577:(Wn,Dt,j)=>{j.d(Dt,{z:()=>qe});var g=j(4004),k=j(8421),he=j(4482),ae=j(9672),je=j(5403),dt=j(576);function qe(at,Ne,Pe=1/0){return(0,dt.m)(Ne)?qe((bt,Tn)=>(0,g.U)((Et,un)=>Ne(bt,Et,Tn,un))((0,k.Xf)(at(bt,Tn))),Pe):("number"==typeof Ne&&(Pe=Ne),(0,he.e)((bt,Tn)=>function He(at,Ne,Pe,bt,Tn,Et,un,In){const Ot=[];let tn=0,Ln=0,dn=!1;const xe=()=>{dn&&!Ot.length&&!tn&&Ne.complete()},Ge=on=>tn<bt?St(on):Ot.push(on),St=on=>{Et&&Ne.next(on),tn++;let Ht=!1;(0,k.Xf)(Pe(on,Ln++)).subscribe((0,je.x)(Ne,Oe=>{null==Tn||Tn(Oe),Et?Ge(Oe):Ne.next(Oe)},()=>{Ht=!0},void 0,()=>{if(Ht)try{for(tn--;Ot.length&&tn<bt;){const Oe=Ot.shift();un?(0,ae.f)(Ne,un,()=>St(Oe)):St(Oe)}xe()}catch(Oe){Ne.error(Oe)}}))};return at.subscribe((0,je.x)(Ne,Ge,()=>{dn=!0,xe()})),()=>{null==In||In()}}(bt,Tn,at,Pe)))}},5363:(Wn,Dt,j)=>{j.d(Dt,{Q:()=>ae});var g=j(9672),k=j(4482),he=j(5403);function ae(je,He=0){return(0,k.e)((dt,qe)=>{dt.subscribe((0,he.x)(qe,at=>(0,g.f)(qe,je,()=>qe.next(at),He),()=>(0,g.f)(qe,je,()=>qe.complete(),He),at=>(0,g.f)(qe,je,()=>qe.error(at),He)))})}},5026:(Wn,Dt,j)=>{j.d(Dt,{R:()=>ae});var g=j(4482),k=j(5403);function he(je,He,dt,qe,at){return(Ne,Pe)=>{let bt=dt,Tn=He,Et=0;Ne.subscribe((0,k.x)(Pe,un=>{const In=Et++;Tn=bt?je(Tn,un,In):(bt=!0,un),qe&&Pe.next(Tn)},at&&(()=>{bt&&Pe.next(Tn),Pe.complete()})))}}function ae(je,He){return(0,g.e)(he(je,He,arguments.length>=2,!0))}},3099:(Wn,Dt,j)=>{j.d(Dt,{B:()=>je});var g=j(8421),k=j(7579),he=j(2961),ae=j(4482);function je(dt={}){const{connector:qe=(()=>new k.x),resetOnError:at=!0,resetOnComplete:Ne=!0,resetOnRefCountZero:Pe=!0}=dt;return bt=>{let Tn,Et,un,In=0,Ot=!1,tn=!1;const Ln=()=>{null==Et||Et.unsubscribe(),Et=void 0},dn=()=>{Ln(),Tn=un=void 0,Ot=tn=!1},xe=()=>{const Ge=Tn;dn(),null==Ge||Ge.unsubscribe()};return(0,ae.e)((Ge,St)=>{In++,!tn&&!Ot&&Ln();const on=un=null!=un?un:qe();St.add(()=>{In--,0===In&&!tn&&!Ot&&(Et=He(xe,Pe))}),on.subscribe(St),!Tn&&In>0&&(Tn=new he.Hp({next:Ht=>on.next(Ht),error:Ht=>{tn=!0,Ln(),Et=He(dn,at,Ht),on.error(Ht)},complete:()=>{Ot=!0,Ln(),Et=He(dn,Ne),on.complete()}}),(0,g.Xf)(Ge).subscribe(Tn))})(bt)}}function He(dt,qe,...at){if(!0===qe)return void dt();if(!1===qe)return;const Ne=new he.Hp({next:()=>{Ne.unsubscribe(),dt()}});return qe(...at).subscribe(Ne)}},8675:(Wn,Dt,j)=>{j.d(Dt,{O:()=>ae});var g=j(7272),k=j(7669),he=j(4482);function ae(...je){const He=(0,k.yG)(je);return(0,he.e)((dt,qe)=>{(He?(0,g.z)(je,dt,He):(0,g.z)(je,dt)).subscribe(qe)})}},9468:(Wn,Dt,j)=>{j.d(Dt,{R:()=>k});var g=j(4482);function k(he,ae=0){return(0,g.e)((je,He)=>{He.add(he.schedule(()=>je.subscribe(He),ae))})}},3900:(Wn,Dt,j)=>{j.d(Dt,{w:()=>ae});var g=j(8421),k=j(4482),he=j(5403);function ae(je,He){return(0,k.e)((dt,qe)=>{let at=null,Ne=0,Pe=!1;const bt=()=>Pe&&!at&&qe.complete();dt.subscribe((0,he.x)(qe,Tn=>{null==at||at.unsubscribe();let Et=0;const un=Ne++;(0,g.Xf)(je(Tn,un)).subscribe(at=(0,he.x)(qe,In=>qe.next(He?He(Tn,In,un,Et++):In),()=>{at=null,bt()}))},()=>{Pe=!0,bt()}))})}},5698:(Wn,Dt,j)=>{j.d(Dt,{q:()=>ae});var g=j(515),k=j(4482),he=j(5403);function ae(je){return je<=0?()=>g.E:(0,k.e)((He,dt)=>{let qe=0;He.subscribe((0,he.x)(dt,at=>{++qe<=je&&(dt.next(at),je<=qe&&dt.complete())}))})}},8505:(Wn,Dt,j)=>{j.d(Dt,{b:()=>je});var g=j(576),k=j(4482),he=j(5403),ae=j(4671);function je(He,dt,qe){const at=(0,g.m)(He)||dt||qe?{next:He,error:dt,complete:qe}:He;return at?(0,k.e)((Ne,Pe)=>{var bt;null===(bt=at.subscribe)||void 0===bt||bt.call(at);let Tn=!0;Ne.subscribe((0,he.x)(Pe,Et=>{var un;null===(un=at.next)||void 0===un||un.call(at,Et),Pe.next(Et)},()=>{var Et;Tn=!1,null===(Et=at.complete)||void 0===Et||Et.call(at),Pe.complete()},Et=>{var un;Tn=!1,null===(un=at.error)||void 0===un||un.call(at,Et),Pe.error(Et)},()=>{var Et,un;Tn&&(null===(Et=at.unsubscribe)||void 0===Et||Et.call(at)),null===(un=at.finalize)||void 0===un||un.call(at)}))}):ae.y}},8068:(Wn,Dt,j)=>{j.d(Dt,{T:()=>ae});var g=j(6805),k=j(4482),he=j(5403);function ae(He=je){return(0,k.e)((dt,qe)=>{let at=!1;dt.subscribe((0,he.x)(qe,Ne=>{at=!0,qe.next(Ne)},()=>at?qe.complete():qe.error(He())))})}function je(){return new g.K}},4408:(Wn,Dt,j)=>{j.d(Dt,{o:()=>je});var g=j(727);class k extends g.w0{constructor(dt,qe){super()}schedule(dt,qe=0){return this}}const he={setInterval(He,dt,...qe){const{delegate:at}=he;return(null==at?void 0:at.setInterval)?at.setInterval(He,dt,...qe):setInterval(He,dt,...qe)},clearInterval(He){const{delegate:dt}=he;return((null==dt?void 0:dt.clearInterval)||clearInterval)(He)},delegate:void 0};var ae=j(8737);class je extends k{constructor(dt,qe){super(dt,qe),this.scheduler=dt,this.work=qe,this.pending=!1}schedule(dt,qe=0){var at;if(this.closed)return this;this.state=dt;const Ne=this.id,Pe=this.scheduler;return null!=Ne&&(this.id=this.recycleAsyncId(Pe,Ne,qe)),this.pending=!0,this.delay=qe,this.id=null!==(at=this.id)&&void 0!==at?at:this.requestAsyncId(Pe,this.id,qe),this}requestAsyncId(dt,qe,at=0){return he.setInterval(dt.flush.bind(dt,this),at)}recycleAsyncId(dt,qe,at=0){if(null!=at&&this.delay===at&&!1===this.pending)return qe;null!=qe&&he.clearInterval(qe)}execute(dt,qe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const at=this._execute(dt,qe);if(at)return at;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(dt,qe){let Ne,at=!1;try{this.work(dt)}catch(Pe){at=!0,Ne=Pe||new Error("Scheduled action threw falsy error")}if(at)return this.unsubscribe(),Ne}unsubscribe(){if(!this.closed){const{id:dt,scheduler:qe}=this,{actions:at}=qe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(at,this),null!=dt&&(this.id=this.recycleAsyncId(qe,dt,null)),this.delay=null,super.unsubscribe()}}}},7565:(Wn,Dt,j)=>{j.d(Dt,{v:()=>he});var g=j(6063);class k{constructor(je,He=k.now){this.schedulerActionCtor=je,this.now=He}schedule(je,He=0,dt){return new this.schedulerActionCtor(this,je).schedule(dt,He)}}k.now=g.l.now;class he extends k{constructor(je,He=k.now){super(je,He),this.actions=[],this._active=!1}flush(je){const{actions:He}=this;if(this._active)return void He.push(je);let dt;this._active=!0;do{if(dt=je.execute(je.state,je.delay))break}while(je=He.shift());if(this._active=!1,dt){for(;je=He.shift();)je.unsubscribe();throw dt}}}},4986:(Wn,Dt,j)=>{j.d(Dt,{z:()=>he});var g=j(4408);const he=new(j(7565).v)(g.o)},6063:(Wn,Dt,j)=>{j.d(Dt,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Wn,Dt,j)=>{j.d(Dt,{z:()=>g});const g={setTimeout(k,he,...ae){const{delegate:je}=g;return(null==je?void 0:je.setTimeout)?je.setTimeout(k,he,...ae):setTimeout(k,he,...ae)},clearTimeout(k){const{delegate:he}=g;return((null==he?void 0:he.clearTimeout)||clearTimeout)(k)},delegate:void 0}},2202:(Wn,Dt,j)=>{j.d(Dt,{h:()=>k});const k=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Wn,Dt,j)=>{j.d(Dt,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Wn,Dt,j)=>{j.d(Dt,{K:()=>k});const k=(0,j(3888).d)(he=>function(){he(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Wn,Dt,j)=>{j.d(Dt,{_6:()=>He,jO:()=>ae,yG:()=>je});var g=j(576);function he(dt){return dt[dt.length-1]}function ae(dt){return(0,g.m)(he(dt))?dt.pop():void 0}function je(dt){return function k(dt){return dt&&(0,g.m)(dt.schedule)}(he(dt))?dt.pop():void 0}function He(dt,qe){return"number"==typeof he(dt)?dt.pop():qe}},4742:(Wn,Dt,j)=>{j.d(Dt,{D:()=>je});const{isArray:g}=Array,{getPrototypeOf:k,prototype:he,keys:ae}=Object;function je(dt){if(1===dt.length){const qe=dt[0];if(g(qe))return{args:qe,keys:null};if(function He(dt){return dt&&"object"==typeof dt&&k(dt)===he}(qe)){const at=ae(qe);return{args:at.map(Ne=>qe[Ne]),keys:at}}}return{args:dt,keys:null}}},8737:(Wn,Dt,j)=>{function g(k,he){if(k){const ae=k.indexOf(he);0<=ae&&k.splice(ae,1)}}j.d(Dt,{P:()=>g})},3888:(Wn,Dt,j)=>{function g(k){const ae=k(je=>{Error.call(je),je.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}j.d(Dt,{d:()=>g})},1810:(Wn,Dt,j)=>{function g(k,he){return k.reduce((ae,je,He)=>(ae[je]=he[He],ae),{})}j.d(Dt,{n:()=>g})},2806:(Wn,Dt,j)=>{j.d(Dt,{O:()=>ae,x:()=>he});var g=j(2416);let k=null;function he(je){if(g.v.useDeprecatedSynchronousErrorHandling){const He=!k;if(He&&(k={errorThrown:!1,error:null}),je(),He){const{errorThrown:dt,error:qe}=k;if(k=null,dt)throw qe}}else je()}function ae(je){g.v.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=je)}},9672:(Wn,Dt,j)=>{function g(k,he,ae,je=0,He=!1){const dt=he.schedule(function(){ae(),He?k.add(this.schedule(null,je)):this.unsubscribe()},je);if(k.add(dt),!He)return dt}j.d(Dt,{f:()=>g})},4671:(Wn,Dt,j)=>{function g(k){return k}j.d(Dt,{y:()=>g})},1144:(Wn,Dt,j)=>{j.d(Dt,{z:()=>g});const g=k=>k&&"number"==typeof k.length&&"function"!=typeof k},2206:(Wn,Dt,j)=>{j.d(Dt,{D:()=>k});var g=j(576);function k(he){return Symbol.asyncIterator&&(0,g.m)(null==he?void 0:he[Symbol.asyncIterator])}},576:(Wn,Dt,j)=>{function g(k){return"function"==typeof k}j.d(Dt,{m:()=>g})},3670:(Wn,Dt,j)=>{j.d(Dt,{c:()=>he});var g=j(8822),k=j(576);function he(ae){return(0,k.m)(ae[g.L])}},6495:(Wn,Dt,j)=>{j.d(Dt,{T:()=>he});var g=j(2202),k=j(576);function he(ae){return(0,k.m)(null==ae?void 0:ae[g.h])}},8239:(Wn,Dt,j)=>{j.d(Dt,{t:()=>k});var g=j(576);function k(he){return(0,g.m)(null==he?void 0:he.then)}},3260:(Wn,Dt,j)=>{j.d(Dt,{L:()=>ae,Q:()=>he});var g=j(655),k=j(576);function he(je){return(0,g.FC)(this,arguments,function*(){const dt=je.getReader();try{for(;;){const{value:qe,done:at}=yield(0,g.qq)(dt.read());if(at)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(qe)}}finally{dt.releaseLock()}})}function ae(je){return(0,k.m)(null==je?void 0:je.getReader)}},4482:(Wn,Dt,j)=>{j.d(Dt,{A:()=>k,e:()=>he});var g=j(576);function k(ae){return(0,g.m)(null==ae?void 0:ae.lift)}function he(ae){return je=>{if(k(je))return je.lift(function(He){try{return ae(He,this)}catch(dt){this.error(dt)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Wn,Dt,j)=>{j.d(Dt,{Z:()=>ae});var g=j(4004);const{isArray:k}=Array;function ae(je){return(0,g.U)(He=>function he(je,He){return k(He)?je(...He):je(He)}(je,He))}},7849:(Wn,Dt,j)=>{j.d(Dt,{h:()=>he});var g=j(2416),k=j(3410);function he(ae){k.z.setTimeout(()=>{const{onUnhandledError:je}=g.v;if(!je)throw ae;je(ae)})}},4532:(Wn,Dt,j)=>{function g(k){return new TypeError(`You provided ${null!==k&&"object"==typeof k?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Dt,{z:()=>g})},655:(Wn,Dt,j)=>{function ae(Re,wt){var Je={};for(var Lt in Re)Object.prototype.hasOwnProperty.call(Re,Lt)&&wt.indexOf(Lt)<0&&(Je[Lt]=Re[Lt]);if(null!=Re&&"function"==typeof Object.getOwnPropertySymbols){var pt=0;for(Lt=Object.getOwnPropertySymbols(Re);pt<Lt.length;pt++)wt.indexOf(Lt[pt])<0&&Object.prototype.propertyIsEnumerable.call(Re,Lt[pt])&&(Je[Lt[pt]]=Re[Lt[pt]])}return Je}function qe(Re,wt,Je,Lt){return new(Je||(Je=Promise))(function(Rt,Sn){function sr(Tr){try{mn(Lt.next(Tr))}catch(mr){Sn(mr)}}function or(Tr){try{mn(Lt.throw(Tr))}catch(mr){Sn(mr)}}function mn(Tr){Tr.done?Rt(Tr.value):function pt(Rt){return Rt instanceof Je?Rt:new Je(function(Sn){Sn(Rt)})}(Tr.value).then(sr,or)}mn((Lt=Lt.apply(Re,wt||[])).next())})}function Ot(Re){return this instanceof Ot?(this.v=Re,this):new Ot(Re)}function tn(Re,wt,Je){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt,Lt=Je.apply(Re,wt||[]),Rt=[];return pt={},Sn("next"),Sn("throw"),Sn("return"),pt[Symbol.asyncIterator]=function(){return this},pt;function Sn(Vt){Lt[Vt]&&(pt[Vt]=function(kt){return new Promise(function(it,At){Rt.push([Vt,kt,it,At])>1||sr(Vt,kt)})})}function sr(Vt,kt){try{!function or(Vt){Vt.value instanceof Ot?Promise.resolve(Vt.value.v).then(mn,Tr):mr(Rt[0][2],Vt)}(Lt[Vt](kt))}catch(it){mr(Rt[0][3],it)}}function mn(Vt){sr("next",Vt)}function Tr(Vt){sr("throw",Vt)}function mr(Vt,kt){Vt(kt),Rt.shift(),Rt.length&&sr(Rt[0][0],Rt[0][1])}}function dn(Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,wt=Re[Symbol.asyncIterator];return wt?wt.call(Re):(Re=function bt(Re){var wt="function"==typeof Symbol&&Symbol.iterator,Je=wt&&Re[wt],Lt=0;if(Je)return Je.call(Re);if(Re&&"number"==typeof Re.length)return{next:function(){return Re&&Lt>=Re.length&&(Re=void 0),{value:Re&&Re[Lt++],done:!Re}}};throw new TypeError(wt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Re),Je={},Lt("next"),Lt("throw"),Lt("return"),Je[Symbol.asyncIterator]=function(){return this},Je);function Lt(Rt){Je[Rt]=Re[Rt]&&function(Sn){return new Promise(function(sr,or){!function pt(Rt,Sn,sr,or){Promise.resolve(or).then(function(mn){Rt({value:mn,done:sr})},Sn)}(sr,or,(Sn=Re[Rt](Sn)).done,Sn.value)})}}}j.d(Dt,{FC:()=>tn,KL:()=>dn,_T:()=>ae,mG:()=>qe,qq:()=>Ot})},1777:(Wn,Dt,j)=>{j.d(Dt,{LC:()=>k,SB:()=>at,X$:()=>ae,ZE:()=>Ln,ZN:()=>tn,_j:()=>g,eR:()=>Pe,jt:()=>je,k1:()=>dn,l3:()=>he,oB:()=>qe,vP:()=>dt});class g{}class k{}const he="*";function ae(xe,Ge){return{type:7,name:xe,definitions:Ge,options:{}}}function je(xe,Ge=null){return{type:4,styles:Ge,timings:xe}}function dt(xe,Ge=null){return{type:2,steps:xe,options:Ge}}function qe(xe){return{type:6,styles:xe,offset:null}}function at(xe,Ge,St){return{type:0,name:xe,styles:Ge,options:St}}function Pe(xe,Ge,St=null){return{type:1,expr:xe,animation:Ge,options:St}}function Ot(xe){Promise.resolve(null).then(xe)}class tn{constructor(Ge=0,St=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ge+St}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ge=>Ge()),this._onDoneFns=[])}onStart(Ge){this._onStartFns.push(Ge)}onDone(Ge){this._onDoneFns.push(Ge)}onDestroy(Ge){this._onDestroyFns.push(Ge)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ot(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ge=>Ge()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ge=>Ge()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Ge){this._position=this.totalTime?Ge*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ge){const St="start"==Ge?this._onStartFns:this._onDoneFns;St.forEach(on=>on()),St.length=0}}class Ln{constructor(Ge){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ge;let St=0,on=0,Ht=0;const Oe=this.players.length;0==Oe?Ot(()=>this._onFinish()):this.players.forEach(Bt=>{Bt.onDone(()=>{++St==Oe&&this._onFinish()}),Bt.onDestroy(()=>{++on==Oe&&this._onDestroy()}),Bt.onStart(()=>{++Ht==Oe&&this._onStart()})}),this.totalTime=this.players.reduce((Bt,Re)=>Math.max(Bt,Re.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ge=>Ge()),this._onDoneFns=[])}init(){this.players.forEach(Ge=>Ge.init())}onStart(Ge){this._onStartFns.push(Ge)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ge=>Ge()),this._onStartFns=[])}onDone(Ge){this._onDoneFns.push(Ge)}onDestroy(Ge){this._onDestroyFns.push(Ge)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ge=>Ge.play())}pause(){this.players.forEach(Ge=>Ge.pause())}restart(){this.players.forEach(Ge=>Ge.restart())}finish(){this._onFinish(),this.players.forEach(Ge=>Ge.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ge=>Ge.destroy()),this._onDestroyFns.forEach(Ge=>Ge()),this._onDestroyFns=[])}reset(){this.players.forEach(Ge=>Ge.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ge){const St=Ge*this.totalTime;this.players.forEach(on=>{const Ht=on.totalTime?Math.min(1,St/on.totalTime):1;on.setPosition(Ht)})}getPosition(){const Ge=this.players.reduce((St,on)=>null===St||on.totalTime>St.totalTime?on:St,null);return null!=Ge?Ge.getPosition():0}beforeDestroy(){this.players.forEach(Ge=>{Ge.beforeDestroy&&Ge.beforeDestroy()})}triggerCallback(Ge){const St="start"==Ge?this._onStartFns:this._onDoneFns;St.forEach(on=>on()),St.length=0}}const dn="!"},9808:(Wn,Dt,j)=>{j.d(Dt,{Do:()=>xe,ED:()=>Ir,EM:()=>fo,HT:()=>je,JF:()=>Ti,K0:()=>dt,Mx:()=>es,NF:()=>us,O5:()=>Br,Ov:()=>_n,PC:()=>Bi,PM:()=>so,RF:()=>fs,S$:()=>Ot,V_:()=>Ne,Ye:()=>Ge,b0:()=>dn,bD:()=>Ws,ez:()=>Qs,lw:()=>qe,mk:()=>ls,mr:()=>Ln,n9:()=>ui,q:()=>he,sg:()=>wr,tP:()=>$o,uU:()=>ys,w_:()=>He});var g=j(5e3);let k=null;function he(){return k}function je(B){k||(k=B)}class He{}const dt=new g.OlP("DocumentToken");let qe=(()=>{class B{historyGo(W){throw new Error("Not implemented")}}return B.\u0275fac=function(W){return new(W||B)},B.\u0275prov=g.Yz7({token:B,factory:function(){return function at(){return(0,g.LFG)(Pe)}()},providedIn:"platform"}),B})();const Ne=new g.OlP("Location Initialized");let Pe=(()=>{class B extends qe{constructor(W){super(),this._doc=W,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return he().getBaseHref(this._doc)}onPopState(W){const ve=he().getGlobalEventTarget(this._doc,"window");return ve.addEventListener("popstate",W,!1),()=>ve.removeEventListener("popstate",W)}onHashChange(W){const ve=he().getGlobalEventTarget(this._doc,"window");return ve.addEventListener("hashchange",W,!1),()=>ve.removeEventListener("hashchange",W)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(W){this.location.pathname=W}pushState(W,ve,Ke){bt()?this._history.pushState(W,ve,Ke):this.location.hash=Ke}replaceState(W,ve,Ke){bt()?this._history.replaceState(W,ve,Ke):this.location.hash=Ke}forward(){this._history.forward()}back(){this._history.back()}historyGo(W=0){this._history.go(W)}getState(){return this._history.state}}return B.\u0275fac=function(W){return new(W||B)(g.LFG(dt))},B.\u0275prov=g.Yz7({token:B,factory:function(){return function Tn(){return new Pe((0,g.LFG)(dt))}()},providedIn:"platform"}),B})();function bt(){return!!window.history.pushState}function Et(B,fe){if(0==B.length)return fe;if(0==fe.length)return B;let W=0;return B.endsWith("/")&&W++,fe.startsWith("/")&&W++,2==W?B+fe.substring(1):1==W?B+fe:B+"/"+fe}function un(B){const fe=B.match(/#|\?|$/),W=fe&&fe.index||B.length;return B.slice(0,W-("/"===B[W-1]?1:0))+B.slice(W)}function In(B){return B&&"?"!==B[0]?"?"+B:B}let Ot=(()=>{class B{historyGo(W){throw new Error("Not implemented")}}return B.\u0275fac=function(W){return new(W||B)},B.\u0275prov=g.Yz7({token:B,factory:function(){return function tn(B){const fe=(0,g.LFG)(dt).location;return new dn((0,g.LFG)(qe),fe&&fe.origin||"")}()},providedIn:"root"}),B})();const Ln=new g.OlP("appBaseHref");let dn=(()=>{class B extends Ot{constructor(W,ve){if(super(),this._platformLocation=W,this._removeListenerFns=[],null==ve&&(ve=this._platformLocation.getBaseHrefFromDOM()),null==ve)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ve}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}prepareExternalUrl(W){return Et(this._baseHref,W)}path(W=!1){const ve=this._platformLocation.pathname+In(this._platformLocation.search),Ke=this._platformLocation.hash;return Ke&&W?`${ve}${Ke}`:ve}pushState(W,ve,Ke,rn){const wn=this.prepareExternalUrl(Ke+In(rn));this._platformLocation.pushState(W,ve,wn)}replaceState(W,ve,Ke,rn){const wn=this.prepareExternalUrl(Ke+In(rn));this._platformLocation.replaceState(W,ve,wn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(W=0){var ve,Ke;null===(Ke=(ve=this._platformLocation).historyGo)||void 0===Ke||Ke.call(ve,W)}}return B.\u0275fac=function(W){return new(W||B)(g.LFG(qe),g.LFG(Ln,8))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})(),xe=(()=>{class B extends Ot{constructor(W,ve){super(),this._platformLocation=W,this._baseHref="",this._removeListenerFns=[],null!=ve&&(this._baseHref=ve)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}path(W=!1){let ve=this._platformLocation.hash;return null==ve&&(ve="#"),ve.length>0?ve.substring(1):ve}prepareExternalUrl(W){const ve=Et(this._baseHref,W);return ve.length>0?"#"+ve:ve}pushState(W,ve,Ke,rn){let wn=this.prepareExternalUrl(Ke+In(rn));0==wn.length&&(wn=this._platformLocation.pathname),this._platformLocation.pushState(W,ve,wn)}replaceState(W,ve,Ke,rn){let wn=this.prepareExternalUrl(Ke+In(rn));0==wn.length&&(wn=this._platformLocation.pathname),this._platformLocation.replaceState(W,ve,wn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(W=0){var ve,Ke;null===(Ke=(ve=this._platformLocation).historyGo)||void 0===Ke||Ke.call(ve,W)}}return B.\u0275fac=function(W){return new(W||B)(g.LFG(qe),g.LFG(Ln,8))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})(),Ge=(()=>{class B{constructor(W,ve){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=W;const Ke=this._platformStrategy.getBaseHref();this._platformLocation=ve,this._baseHref=un(Ht(Ke)),this._platformStrategy.onPopState(rn=>{this._subject.emit({url:this.path(!0),pop:!0,state:rn.state,type:rn.type})})}path(W=!1){return this.normalize(this._platformStrategy.path(W))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(W,ve=""){return this.path()==this.normalize(W+In(ve))}normalize(W){return B.stripTrailingSlash(function on(B,fe){return B&&fe.startsWith(B)?fe.substring(B.length):fe}(this._baseHref,Ht(W)))}prepareExternalUrl(W){return W&&"/"!==W[0]&&(W="/"+W),this._platformStrategy.prepareExternalUrl(W)}go(W,ve="",Ke=null){this._platformStrategy.pushState(Ke,"",W,ve),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+In(ve)),Ke)}replaceState(W,ve="",Ke=null){this._platformStrategy.replaceState(Ke,"",W,ve),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+In(ve)),Ke)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(W=0){var ve,Ke;null===(Ke=(ve=this._platformStrategy).historyGo)||void 0===Ke||Ke.call(ve,W)}onUrlChange(W){this._urlChangeListeners.push(W),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ve=>{this._notifyUrlChangeListeners(ve.url,ve.state)}))}_notifyUrlChangeListeners(W="",ve){this._urlChangeListeners.forEach(Ke=>Ke(W,ve))}subscribe(W,ve,Ke){return this._subject.subscribe({next:W,error:ve,complete:Ke})}}return B.normalizeQueryParams=In,B.joinWithSlash=Et,B.stripTrailingSlash=un,B.\u0275fac=function(W){return new(W||B)(g.LFG(Ot),g.LFG(qe))},B.\u0275prov=g.Yz7({token:B,factory:function(){return function St(){return new Ge((0,g.LFG)(Ot),(0,g.LFG)(qe))}()},providedIn:"root"}),B})();function Ht(B){return B.replace(/\/index.html$/,"")}var wt=(()=>((wt=wt||{})[wt.Format=0]="Format",wt[wt.Standalone=1]="Standalone",wt))(),Je=(()=>((Je=Je||{})[Je.Narrow=0]="Narrow",Je[Je.Abbreviated=1]="Abbreviated",Je[Je.Wide=2]="Wide",Je[Je.Short=3]="Short",Je))(),Lt=(()=>((Lt=Lt||{})[Lt.Short=0]="Short",Lt[Lt.Medium=1]="Medium",Lt[Lt.Long=2]="Long",Lt[Lt.Full=3]="Full",Lt))(),pt=(()=>((pt=pt||{})[pt.Decimal=0]="Decimal",pt[pt.Group=1]="Group",pt[pt.List=2]="List",pt[pt.PercentSign=3]="PercentSign",pt[pt.PlusSign=4]="PlusSign",pt[pt.MinusSign=5]="MinusSign",pt[pt.Exponential=6]="Exponential",pt[pt.SuperscriptingExponent=7]="SuperscriptingExponent",pt[pt.PerMille=8]="PerMille",pt[pt.Infinity=9]="Infinity",pt[pt.NaN=10]="NaN",pt[pt.TimeSeparator=11]="TimeSeparator",pt[pt.CurrencyDecimal=12]="CurrencyDecimal",pt[pt.CurrencyGroup=13]="CurrencyGroup",pt))();function kt(B,fe){return xr((0,g.cg1)(B)[g.wAp.DateFormat],fe)}function it(B,fe){return xr((0,g.cg1)(B)[g.wAp.TimeFormat],fe)}function At(B,fe){return xr((0,g.cg1)(B)[g.wAp.DateTimeFormat],fe)}function ut(B,fe){const W=(0,g.cg1)(B),ve=W[g.wAp.NumberSymbols][fe];if(void 0===ve){if(fe===pt.CurrencyDecimal)return W[g.wAp.NumberSymbols][pt.Decimal];if(fe===pt.CurrencyGroup)return W[g.wAp.NumberSymbols][pt.Group]}return ve}function Yr(B){if(!B[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${B[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function xr(B,fe){for(let W=fe;W>-1;W--)if(void 0!==B[W])return B[W];throw new Error("Locale data API: locale data undefined")}function Mr(B){const[fe,W]=B.split(":");return{hours:+fe,minutes:+W}}const nt=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ct={},Gt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var nn=(()=>((nn=nn||{})[nn.Short=0]="Short",nn[nn.ShortGMT=1]="ShortGMT",nn[nn.Long=2]="Long",nn[nn.Extended=3]="Extended",nn))(),En=(()=>((En=En||{})[En.FullYear=0]="FullYear",En[En.Month=1]="Month",En[En.Date=2]="Date",En[En.Hours=3]="Hours",En[En.Minutes=4]="Minutes",En[En.Seconds=5]="Seconds",En[En.FractionalSeconds=6]="FractionalSeconds",En[En.Day=7]="Day",En))(),qn=(()=>((qn=qn||{})[qn.DayPeriods=0]="DayPeriods",qn[qn.Days=1]="Days",qn[qn.Months=2]="Months",qn[qn.Eras=3]="Eras",qn))();function Jr(B,fe,W,ve){let Ke=function Me(B){if(gt(B))return B;if("number"==typeof B&&!isNaN(B))return new Date(B);if("string"==typeof B){if(B=B.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(B)){const[Ke,rn=1,wn=1]=B.split("-").map(hr=>+hr);return Hr(Ke,rn-1,wn)}const W=parseFloat(B);if(!isNaN(B-W))return new Date(W);let ve;if(ve=B.match(nt))return function Ae(B){const fe=new Date(0);let W=0,ve=0;const Ke=B[8]?fe.setUTCFullYear:fe.setFullYear,rn=B[8]?fe.setUTCHours:fe.setHours;B[9]&&(W=Number(B[9]+B[10]),ve=Number(B[9]+B[11])),Ke.call(fe,Number(B[1]),Number(B[2])-1,Number(B[3]));const wn=Number(B[4]||0)-W,hr=Number(B[5]||0)-ve,Gr=Number(B[6]||0),Xr=Math.floor(1e3*parseFloat("0."+(B[7]||0)));return rn.call(fe,wn,hr,Gr,Xr),fe}(ve)}const fe=new Date(B);if(!gt(fe))throw new Error(`Unable to convert "${B}" into a date`);return fe}(B);fe=Fr(W,fe)||fe;let hr,wn=[];for(;fe;){if(hr=Gt.exec(fe),!hr){wn.push(fe);break}{wn=wn.concat(hr.slice(1));const ni=wn.pop();if(!ni)break;fe=ni}}let Gr=Ke.getTimezoneOffset();ve&&(Gr=ln(ve,Gr),Ke=function ze(B,fe,W){const ve=W?-1:1,Ke=B.getTimezoneOffset();return function Ft(B,fe){return(B=new Date(B.getTime())).setMinutes(B.getMinutes()+fe),B}(B,ve*(ln(fe,Ke)-Ke))}(Ke,ve,!0));let Xr="";return wn.forEach(ni=>{const yi=function ft(B){if(Ue[B])return Ue[B];let fe;switch(B){case"G":case"GG":case"GGG":fe=Lr(qn.Eras,Je.Abbreviated);break;case"GGGG":fe=Lr(qn.Eras,Je.Wide);break;case"GGGGG":fe=Lr(qn.Eras,Je.Narrow);break;case"y":fe=Bn(En.FullYear,1,0,!1,!0);break;case"yy":fe=Bn(En.FullYear,2,0,!0,!0);break;case"yyy":fe=Bn(En.FullYear,3,0,!1,!0);break;case"yyyy":fe=Bn(En.FullYear,4,0,!1,!0);break;case"Y":fe=Qe(1);break;case"YY":fe=Qe(2,!0);break;case"YYY":fe=Qe(3);break;case"YYYY":fe=Qe(4);break;case"M":case"L":fe=Bn(En.Month,1,1);break;case"MM":case"LL":fe=Bn(En.Month,2,1);break;case"MMM":fe=Lr(qn.Months,Je.Abbreviated);break;case"MMMM":fe=Lr(qn.Months,Je.Wide);break;case"MMMMM":fe=Lr(qn.Months,Je.Narrow);break;case"LLL":fe=Lr(qn.Months,Je.Abbreviated,wt.Standalone);break;case"LLLL":fe=Lr(qn.Months,Je.Wide,wt.Standalone);break;case"LLLLL":fe=Lr(qn.Months,Je.Narrow,wt.Standalone);break;case"w":fe=Vr(1);break;case"ww":fe=Vr(2);break;case"W":fe=Vr(1,!0);break;case"d":fe=Bn(En.Date,1);break;case"dd":fe=Bn(En.Date,2);break;case"c":case"cc":fe=Bn(En.Day,1);break;case"ccc":fe=Lr(qn.Days,Je.Abbreviated,wt.Standalone);break;case"cccc":fe=Lr(qn.Days,Je.Wide,wt.Standalone);break;case"ccccc":fe=Lr(qn.Days,Je.Narrow,wt.Standalone);break;case"cccccc":fe=Lr(qn.Days,Je.Short,wt.Standalone);break;case"E":case"EE":case"EEE":fe=Lr(qn.Days,Je.Abbreviated);break;case"EEEE":fe=Lr(qn.Days,Je.Wide);break;case"EEEEE":fe=Lr(qn.Days,Je.Narrow);break;case"EEEEEE":fe=Lr(qn.Days,Je.Short);break;case"a":case"aa":case"aaa":fe=Lr(qn.DayPeriods,Je.Abbreviated);break;case"aaaa":fe=Lr(qn.DayPeriods,Je.Wide);break;case"aaaaa":fe=Lr(qn.DayPeriods,Je.Narrow);break;case"b":case"bb":case"bbb":fe=Lr(qn.DayPeriods,Je.Abbreviated,wt.Standalone,!0);break;case"bbbb":fe=Lr(qn.DayPeriods,Je.Wide,wt.Standalone,!0);break;case"bbbbb":fe=Lr(qn.DayPeriods,Je.Narrow,wt.Standalone,!0);break;case"B":case"BB":case"BBB":fe=Lr(qn.DayPeriods,Je.Abbreviated,wt.Format,!0);break;case"BBBB":fe=Lr(qn.DayPeriods,Je.Wide,wt.Format,!0);break;case"BBBBB":fe=Lr(qn.DayPeriods,Je.Narrow,wt.Format,!0);break;case"h":fe=Bn(En.Hours,1,-12);break;case"hh":fe=Bn(En.Hours,2,-12);break;case"H":fe=Bn(En.Hours,1);break;case"HH":fe=Bn(En.Hours,2);break;case"m":fe=Bn(En.Minutes,1);break;case"mm":fe=Bn(En.Minutes,2);break;case"s":fe=Bn(En.Seconds,1);break;case"ss":fe=Bn(En.Seconds,2);break;case"S":fe=Bn(En.FractionalSeconds,1);break;case"SS":fe=Bn(En.FractionalSeconds,2);break;case"SSS":fe=Bn(En.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":fe=kn(nn.Short);break;case"ZZZZZ":fe=kn(nn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":fe=kn(nn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":fe=kn(nn.Long);break;default:return null}return Ue[B]=fe,fe}(ni);Xr+=yi?yi(Ke,W,Gr):"''"===ni?"'":ni.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Xr}function Hr(B,fe,W){const ve=new Date(0);return ve.setFullYear(B,fe,W),ve.setHours(0,0,0),ve}function Fr(B,fe){const W=function Sn(B){return(0,g.cg1)(B)[g.wAp.LocaleId]}(B);if(ct[W]=ct[W]||{},ct[W][fe])return ct[W][fe];let ve="";switch(fe){case"shortDate":ve=kt(B,Lt.Short);break;case"mediumDate":ve=kt(B,Lt.Medium);break;case"longDate":ve=kt(B,Lt.Long);break;case"fullDate":ve=kt(B,Lt.Full);break;case"shortTime":ve=it(B,Lt.Short);break;case"mediumTime":ve=it(B,Lt.Medium);break;case"longTime":ve=it(B,Lt.Long);break;case"fullTime":ve=it(B,Lt.Full);break;case"short":const Ke=Fr(B,"shortTime"),rn=Fr(B,"shortDate");ve=ds(At(B,Lt.Short),[Ke,rn]);break;case"medium":const wn=Fr(B,"mediumTime"),hr=Fr(B,"mediumDate");ve=ds(At(B,Lt.Medium),[wn,hr]);break;case"long":const Gr=Fr(B,"longTime"),Xr=Fr(B,"longDate");ve=ds(At(B,Lt.Long),[Gr,Xr]);break;case"full":const ni=Fr(B,"fullTime"),yi=Fr(B,"fullDate");ve=ds(At(B,Lt.Full),[ni,yi])}return ve&&(ct[W][fe]=ve),ve}function ds(B,fe){return fe&&(B=B.replace(/\{([^}]+)}/g,function(W,ve){return null!=fe&&ve in fe?fe[ve]:W})),B}function Oi(B,fe,W="-",ve,Ke){let rn="";(B<0||Ke&&B<=0)&&(Ke?B=1-B:(B=-B,rn=W));let wn=String(B);for(;wn.length<fe;)wn="0"+wn;return ve&&(wn=wn.substr(wn.length-fe)),rn+wn}function Bn(B,fe,W=0,ve=!1,Ke=!1){return function(rn,wn){let hr=function mi(B,fe){switch(B){case En.FullYear:return fe.getFullYear();case En.Month:return fe.getMonth();case En.Date:return fe.getDate();case En.Hours:return fe.getHours();case En.Minutes:return fe.getMinutes();case En.Seconds:return fe.getSeconds();case En.FractionalSeconds:return fe.getMilliseconds();case En.Day:return fe.getDay();default:throw new Error(`Unknown DateType value "${B}".`)}}(B,rn);if((W>0||hr>-W)&&(hr+=W),B===En.Hours)0===hr&&-12===W&&(hr=12);else if(B===En.FractionalSeconds)return function gi(B,fe){return Oi(B,3).substr(0,fe)}(hr,fe);const Gr=ut(wn,pt.MinusSign);return Oi(hr,fe,Gr,ve,Ke)}}function Lr(B,fe,W=wt.Format,ve=!1){return function(Ke,rn){return function ki(B,fe,W,ve,Ke,rn){switch(W){case qn.Months:return function mn(B,fe,W){const ve=(0,g.cg1)(B),rn=xr([ve[g.wAp.MonthsFormat],ve[g.wAp.MonthsStandalone]],fe);return xr(rn,W)}(fe,Ke,ve)[B.getMonth()];case qn.Days:return function or(B,fe,W){const ve=(0,g.cg1)(B),rn=xr([ve[g.wAp.DaysFormat],ve[g.wAp.DaysStandalone]],fe);return xr(rn,W)}(fe,Ke,ve)[B.getDay()];case qn.DayPeriods:const wn=B.getHours(),hr=B.getMinutes();if(rn){const Xr=function oi(B){const fe=(0,g.cg1)(B);return Yr(fe),(fe[g.wAp.ExtraData][2]||[]).map(ve=>"string"==typeof ve?Mr(ve):[Mr(ve[0]),Mr(ve[1])])}(fe),ni=function er(B,fe,W){const ve=(0,g.cg1)(B);Yr(ve);const rn=xr([ve[g.wAp.ExtraData][0],ve[g.wAp.ExtraData][1]],fe)||[];return xr(rn,W)||[]}(fe,Ke,ve),yi=Xr.findIndex(Zi=>{if(Array.isArray(Zi)){const[Ni,Si]=Zi,oo=wn>=Ni.hours&&hr>=Ni.minutes,ts=wn<Si.hours||wn===Si.hours&&hr<Si.minutes;if(Ni.hours<Si.hours){if(oo&&ts)return!0}else if(oo||ts)return!0}else if(Zi.hours===wn&&Zi.minutes===hr)return!0;return!1});if(-1!==yi)return ni[yi]}return function sr(B,fe,W){const ve=(0,g.cg1)(B),rn=xr([ve[g.wAp.DayPeriodsFormat],ve[g.wAp.DayPeriodsStandalone]],fe);return xr(rn,W)}(fe,Ke,ve)[wn<12?0:1];case qn.Eras:return function Tr(B,fe){return xr((0,g.cg1)(B)[g.wAp.Eras],fe)}(fe,ve)[B.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${W}`)}}(Ke,rn,B,fe,W,ve)}}function kn(B){return function(fe,W,ve){const Ke=-1*ve,rn=ut(W,pt.MinusSign),wn=Ke>0?Math.floor(Ke/60):Math.ceil(Ke/60);switch(B){case nn.Short:return(Ke>=0?"+":"")+Oi(wn,2,rn)+Oi(Math.abs(Ke%60),2,rn);case nn.ShortGMT:return"GMT"+(Ke>=0?"+":"")+Oi(wn,1,rn);case nn.Long:return"GMT"+(Ke>=0?"+":"")+Oi(wn,2,rn)+":"+Oi(Math.abs(Ke%60),2,rn);case nn.Extended:return 0===ve?"Z":(Ke>=0?"+":"")+Oi(wn,2,rn)+":"+Oi(Math.abs(Ke%60),2,rn);default:throw new Error(`Unknown zone width "${B}"`)}}}function Or(B){return Hr(B.getFullYear(),B.getMonth(),B.getDate()+(4-B.getDay()))}function Vr(B,fe=!1){return function(W,ve){let Ke;if(fe){const rn=new Date(W.getFullYear(),W.getMonth(),1).getDay()-1,wn=W.getDate();Ke=1+Math.floor((wn+rn)/7)}else{const rn=Or(W),wn=function Pr(B){const fe=Hr(B,0,1).getDay();return Hr(B,0,1+(fe<=4?4:11)-fe)}(rn.getFullYear()),hr=rn.getTime()-wn.getTime();Ke=1+Math.round(hr/6048e5)}return Oi(Ke,B,ut(ve,pt.MinusSign))}}function Qe(B,fe=!1){return function(W,ve){return Oi(Or(W).getFullYear(),B,ut(ve,pt.MinusSign),fe)}}const Ue={};function ln(B,fe){B=B.replace(/:/g,"");const W=Date.parse("Jan 01, 1970 00:00:00 "+B)/6e4;return isNaN(W)?fe:W}function gt(B){return B instanceof Date&&!isNaN(B.valueOf())}function es(B,fe){fe=encodeURIComponent(fe);for(const W of B.split(";")){const ve=W.indexOf("="),[Ke,rn]=-1==ve?[W,""]:[W.slice(0,ve),W.slice(ve+1)];if(Ke.trim()===fe)return decodeURIComponent(rn)}return null}let ls=(()=>{class B{constructor(W,ve,Ke,rn){this._iterableDiffers=W,this._keyValueDiffers=ve,this._ngEl=Ke,this._renderer=rn,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(W){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof W?W.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(W){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof W?W.split(/\s+/):W,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const W=this._iterableDiffer.diff(this._rawClass);W&&this._applyIterableChanges(W)}else if(this._keyValueDiffer){const W=this._keyValueDiffer.diff(this._rawClass);W&&this._applyKeyValueChanges(W)}}_applyKeyValueChanges(W){W.forEachAddedItem(ve=>this._toggleClass(ve.key,ve.currentValue)),W.forEachChangedItem(ve=>this._toggleClass(ve.key,ve.currentValue)),W.forEachRemovedItem(ve=>{ve.previousValue&&this._toggleClass(ve.key,!1)})}_applyIterableChanges(W){W.forEachAddedItem(ve=>{if("string"!=typeof ve.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(ve.item)}`);this._toggleClass(ve.item,!0)}),W.forEachRemovedItem(ve=>this._toggleClass(ve.item,!1))}_applyClasses(W){W&&(Array.isArray(W)||W instanceof Set?W.forEach(ve=>this._toggleClass(ve,!0)):Object.keys(W).forEach(ve=>this._toggleClass(ve,!!W[ve])))}_removeClasses(W){W&&(Array.isArray(W)||W instanceof Set?W.forEach(ve=>this._toggleClass(ve,!1)):Object.keys(W).forEach(ve=>this._toggleClass(ve,!1)))}_toggleClass(W,ve){(W=W.trim())&&W.split(/\s+/g).forEach(Ke=>{ve?this._renderer.addClass(this._ngEl.nativeElement,Ke):this._renderer.removeClass(this._ngEl.nativeElement,Ke)})}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),B})();class Qr{constructor(fe,W,ve,Ke){this.$implicit=fe,this.ngForOf=W,this.index=ve,this.count=Ke}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wr=(()=>{class B{constructor(W,ve,Ke){this._viewContainer=W,this._template=ve,this._differs=Ke,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(W){this._ngForOf=W,this._ngForOfDirty=!0}set ngForTrackBy(W){this._trackByFn=W}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(W){W&&(this._template=W)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const W=this._ngForOf;!this._differ&&W&&(this._differ=this._differs.find(W).create(this.ngForTrackBy))}if(this._differ){const W=this._differ.diff(this._ngForOf);W&&this._applyChanges(W)}}_applyChanges(W){const ve=this._viewContainer;W.forEachOperation((Ke,rn,wn)=>{if(null==Ke.previousIndex)ve.createEmbeddedView(this._template,new Qr(Ke.item,this._ngForOf,-1,-1),null===wn?void 0:wn);else if(null==wn)ve.remove(null===rn?void 0:rn);else if(null!==rn){const hr=ve.get(rn);ve.move(hr,wn),Sr(hr,Ke)}});for(let Ke=0,rn=ve.length;Ke<rn;Ke++){const hr=ve.get(Ke).context;hr.index=Ke,hr.count=rn,hr.ngForOf=this._ngForOf}W.forEachIdentityChange(Ke=>{Sr(ve.get(Ke.currentIndex),Ke)})}static ngTemplateContextGuard(W,ve){return!0}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),B})();function Sr(B,fe){B.context.$implicit=fe.item}let Br=(()=>{class B{constructor(W,ve){this._viewContainer=W,this._context=new xi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ve}set ngIf(W){this._context.$implicit=this._context.ngIf=W,this._updateView()}set ngIfThen(W){Vs("ngIfThen",W),this._thenTemplateRef=W,this._thenViewRef=null,this._updateView()}set ngIfElse(W){Vs("ngIfElse",W),this._elseTemplateRef=W,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(W,ve){return!0}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b),g.Y36(g.Rgc))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),B})();class xi{constructor(){this.$implicit=null,this.ngIf=null}}function Vs(B,fe){if(fe&&!fe.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,g.AaK)(fe)}'.`)}class Gi{constructor(fe,W){this._viewContainerRef=fe,this._templateRef=W,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(fe){fe&&!this._created?this.create():!fe&&this._created&&this.destroy()}}let fs=(()=>{class B{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(W){this._ngSwitch=W,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(W){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(W)}_matchCase(W){const ve=W==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ve,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ve}_updateDefaultCases(W){if(this._defaultViews&&W!==this._defaultUsed){this._defaultUsed=W;for(let ve=0;ve<this._defaultViews.length;ve++)this._defaultViews[ve].enforceState(W)}}}return B.\u0275fac=function(W){return new(W||B)},B.\u0275dir=g.lG2({type:B,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),B})(),ui=(()=>{class B{constructor(W,ve,Ke){this.ngSwitch=Ke,Ke._addCase(),this._view=new Gi(W,ve)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(fs,9))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),B})(),Ir=(()=>{class B{constructor(W,ve,Ke){Ke._addDefault(new Gi(W,ve))}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(fs,9))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngSwitchDefault",""]]}),B})(),Bi=(()=>{class B{constructor(W,ve,Ke){this._ngEl=W,this._differs=ve,this._renderer=Ke,this._ngStyle=null,this._differ=null}set ngStyle(W){this._ngStyle=W,!this._differ&&W&&(this._differ=this._differs.find(W).create())}ngDoCheck(){if(this._differ){const W=this._differ.diff(this._ngStyle);W&&this._applyChanges(W)}}_setStyle(W,ve){const[Ke,rn]=W.split(".");null!=(ve=null!=ve&&rn?`${ve}${rn}`:ve)?this._renderer.setStyle(this._ngEl.nativeElement,Ke,ve):this._renderer.removeStyle(this._ngEl.nativeElement,Ke)}_applyChanges(W){W.forEachRemovedItem(ve=>this._setStyle(ve.key,null)),W.forEachAddedItem(ve=>this._setStyle(ve.key,ve.currentValue)),W.forEachChangedItem(ve=>this._setStyle(ve.key,ve.currentValue))}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),B})(),$o=(()=>{class B{constructor(W){this._viewContainerRef=W,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(W){if(W.ngTemplateOutlet){const ve=this._viewContainerRef;this._viewRef&&ve.remove(ve.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?ve.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&W.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[g.TTD]}),B})();function Ns(B,fe){return new g.vHH(2100,"")}class ns{createSubscription(fe,W){return fe.subscribe({next:W,error:ve=>{throw ve}})}dispose(fe){fe.unsubscribe()}onDestroy(fe){fe.unsubscribe()}}class Ct{createSubscription(fe,W){return fe.then(W,ve=>{throw ve})}dispose(fe){}onDestroy(fe){}}const ht=new Ct,xt=new ns;let _n=(()=>{class B{constructor(W){this._ref=W,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(W){return this._obj?W!==this._obj?(this._dispose(),this.transform(W)):this._latestValue:(W&&this._subscribe(W),this._latestValue)}_subscribe(W){this._obj=W,this._strategy=this._selectStrategy(W),this._subscription=this._strategy.createSubscription(W,ve=>this._updateLatestValue(W,ve))}_selectStrategy(W){if((0,g.QGY)(W))return ht;if((0,g.F4k)(W))return xt;throw Ns()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(W,ve){W===this._obj&&(this._latestValue=ve,this._ref.markForCheck())}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.sBO,16))},B.\u0275pipe=g.Yjl({name:"async",type:B,pure:!1}),B})();const Mi=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ys=(()=>{class B{constructor(W,ve){this.locale=W,this.defaultTimezone=ve}transform(W,ve="mediumDate",Ke,rn){var wn;if(null==W||""===W||W!=W)return null;try{return Jr(W,ve,rn||this.locale,null!==(wn=null!=Ke?Ke:this.defaultTimezone)&&void 0!==wn?wn:void 0)}catch(hr){throw Ns()}}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.soG,16),g.Y36(Mi,24))},B.\u0275pipe=g.Yjl({name:"date",type:B,pure:!0}),B})(),Qs=(()=>{class B{}return B.\u0275fac=function(W){return new(W||B)},B.\u0275mod=g.oAB({type:B}),B.\u0275inj=g.cJS({}),B})();const Ws="browser";function us(B){return B===Ws}function so(B){return"server"===B}let fo=(()=>{class B{}return B.\u0275prov=(0,g.Yz7)({token:B,providedIn:"root",factory:()=>new Zs((0,g.LFG)(dt),window)}),B})();class Zs{constructor(fe,W){this.document=fe,this.window=W,this.offset=()=>[0,0]}setOffset(fe){this.offset=Array.isArray(fe)?()=>fe:fe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(fe){this.supportsScrolling()&&this.window.scrollTo(fe[0],fe[1])}scrollToAnchor(fe){if(!this.supportsScrolling())return;const W=function qs(B,fe){const W=B.getElementById(fe)||B.getElementsByName(fe)[0];if(W)return W;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const ve=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let Ke=ve.currentNode;for(;Ke;){const rn=Ke.shadowRoot;if(rn){const wn=rn.getElementById(fe)||rn.querySelector(`[name="${fe}"]`);if(wn)return wn}Ke=ve.nextNode()}}return null}(this.document,fe);W&&(this.scrollToElement(W),W.focus())}setHistoryScrollRestoration(fe){if(this.supportScrollRestoration()){const W=this.window.history;W&&W.scrollRestoration&&(W.scrollRestoration=fe)}}scrollToElement(fe){const W=fe.getBoundingClientRect(),ve=W.left+this.window.pageXOffset,Ke=W.top+this.window.pageYOffset,rn=this.offset();this.window.scrollTo(ve-rn[0],Ke-rn[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const fe=Rs(this.window.history)||Rs(Object.getPrototypeOf(this.window.history));return!(!fe||!fe.writable&&!fe.set)}catch(fe){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(fe){return!1}}}function Rs(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class Ti{}},520:(Wn,Dt,j)=>{j.d(Dt,{JF:()=>Mr,TP:()=>Sn,eN:()=>pt});var g=j(9808),k=j(5e3),he=j(9646),ae=j(8306),je=j(4351),He=j(9300),dt=j(4004);class qe{}class at{}class Ne{constructor(nt){this.normalizedNames=new Map,this.lazyUpdate=null,nt?this.lazyInit="string"==typeof nt?()=>{this.headers=new Map,nt.split("\n").forEach(ct=>{const Gt=ct.indexOf(":");if(Gt>0){const nn=ct.slice(0,Gt),En=nn.toLowerCase(),qn=ct.slice(Gt+1).trim();this.maybeSetNormalizedName(nn,En),this.headers.has(En)?this.headers.get(En).push(qn):this.headers.set(En,[qn])}})}:()=>{this.headers=new Map,Object.keys(nt).forEach(ct=>{let Gt=nt[ct];const nn=ct.toLowerCase();"string"==typeof Gt&&(Gt=[Gt]),Gt.length>0&&(this.headers.set(nn,Gt),this.maybeSetNormalizedName(ct,nn))})}:this.headers=new Map}has(nt){return this.init(),this.headers.has(nt.toLowerCase())}get(nt){this.init();const ct=this.headers.get(nt.toLowerCase());return ct&&ct.length>0?ct[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(nt){return this.init(),this.headers.get(nt.toLowerCase())||null}append(nt,ct){return this.clone({name:nt,value:ct,op:"a"})}set(nt,ct){return this.clone({name:nt,value:ct,op:"s"})}delete(nt,ct){return this.clone({name:nt,value:ct,op:"d"})}maybeSetNormalizedName(nt,ct){this.normalizedNames.has(ct)||this.normalizedNames.set(ct,nt)}init(){this.lazyInit&&(this.lazyInit instanceof Ne?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(nt=>this.applyUpdate(nt)),this.lazyUpdate=null))}copyFrom(nt){nt.init(),Array.from(nt.headers.keys()).forEach(ct=>{this.headers.set(ct,nt.headers.get(ct)),this.normalizedNames.set(ct,nt.normalizedNames.get(ct))})}clone(nt){const ct=new Ne;return ct.lazyInit=this.lazyInit&&this.lazyInit instanceof Ne?this.lazyInit:this,ct.lazyUpdate=(this.lazyUpdate||[]).concat([nt]),ct}applyUpdate(nt){const ct=nt.name.toLowerCase();switch(nt.op){case"a":case"s":let Gt=nt.value;if("string"==typeof Gt&&(Gt=[Gt]),0===Gt.length)return;this.maybeSetNormalizedName(nt.name,ct);const nn=("a"===nt.op?this.headers.get(ct):void 0)||[];nn.push(...Gt),this.headers.set(ct,nn);break;case"d":const En=nt.value;if(En){let qn=this.headers.get(ct);if(!qn)return;qn=qn.filter(Jr=>-1===En.indexOf(Jr)),0===qn.length?(this.headers.delete(ct),this.normalizedNames.delete(ct)):this.headers.set(ct,qn)}else this.headers.delete(ct),this.normalizedNames.delete(ct)}}forEach(nt){this.init(),Array.from(this.normalizedNames.keys()).forEach(ct=>nt(this.normalizedNames.get(ct),this.headers.get(ct)))}}class Pe{encodeKey(nt){return un(nt)}encodeValue(nt){return un(nt)}decodeKey(nt){return decodeURIComponent(nt)}decodeValue(nt){return decodeURIComponent(nt)}}const Tn=/%(\d[a-f0-9])/gi,Et={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function un(cn){return encodeURIComponent(cn).replace(Tn,(nt,ct)=>{var Gt;return null!==(Gt=Et[ct])&&void 0!==Gt?Gt:nt})}function In(cn){return`${cn}`}class Ot{constructor(nt={}){if(this.updates=null,this.cloneFrom=null,this.encoder=nt.encoder||new Pe,nt.fromString){if(nt.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function bt(cn,nt){const ct=new Map;return cn.length>0&&cn.replace(/^\?/,"").split("&").forEach(nn=>{const En=nn.indexOf("="),[qn,Jr]=-1==En?[nt.decodeKey(nn),""]:[nt.decodeKey(nn.slice(0,En)),nt.decodeValue(nn.slice(En+1))],Hr=ct.get(qn)||[];Hr.push(Jr),ct.set(qn,Hr)}),ct}(nt.fromString,this.encoder)}else nt.fromObject?(this.map=new Map,Object.keys(nt.fromObject).forEach(ct=>{const Gt=nt.fromObject[ct];this.map.set(ct,Array.isArray(Gt)?Gt:[Gt])})):this.map=null}has(nt){return this.init(),this.map.has(nt)}get(nt){this.init();const ct=this.map.get(nt);return ct?ct[0]:null}getAll(nt){return this.init(),this.map.get(nt)||null}keys(){return this.init(),Array.from(this.map.keys())}append(nt,ct){return this.clone({param:nt,value:ct,op:"a"})}appendAll(nt){const ct=[];return Object.keys(nt).forEach(Gt=>{const nn=nt[Gt];Array.isArray(nn)?nn.forEach(En=>{ct.push({param:Gt,value:En,op:"a"})}):ct.push({param:Gt,value:nn,op:"a"})}),this.clone(ct)}set(nt,ct){return this.clone({param:nt,value:ct,op:"s"})}delete(nt,ct){return this.clone({param:nt,value:ct,op:"d"})}toString(){return this.init(),this.keys().map(nt=>{const ct=this.encoder.encodeKey(nt);return this.map.get(nt).map(Gt=>ct+"="+this.encoder.encodeValue(Gt)).join("&")}).filter(nt=>""!==nt).join("&")}clone(nt){const ct=new Ot({encoder:this.encoder});return ct.cloneFrom=this.cloneFrom||this,ct.updates=(this.updates||[]).concat(nt),ct}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(nt=>this.map.set(nt,this.cloneFrom.map.get(nt))),this.updates.forEach(nt=>{switch(nt.op){case"a":case"s":const ct=("a"===nt.op?this.map.get(nt.param):void 0)||[];ct.push(In(nt.value)),this.map.set(nt.param,ct);break;case"d":if(void 0===nt.value){this.map.delete(nt.param);break}{let Gt=this.map.get(nt.param)||[];const nn=Gt.indexOf(In(nt.value));-1!==nn&&Gt.splice(nn,1),Gt.length>0?this.map.set(nt.param,Gt):this.map.delete(nt.param)}}}),this.cloneFrom=this.updates=null)}}class Ln{constructor(){this.map=new Map}set(nt,ct){return this.map.set(nt,ct),this}get(nt){return this.map.has(nt)||this.map.set(nt,nt.defaultValue()),this.map.get(nt)}delete(nt){return this.map.delete(nt),this}has(nt){return this.map.has(nt)}keys(){return this.map.keys()}}function xe(cn){return"undefined"!=typeof ArrayBuffer&&cn instanceof ArrayBuffer}function Ge(cn){return"undefined"!=typeof Blob&&cn instanceof Blob}function St(cn){return"undefined"!=typeof FormData&&cn instanceof FormData}class Ht{constructor(nt,ct,Gt,nn){let En;if(this.url=ct,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=nt.toUpperCase(),function dn(cn){switch(cn){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||nn?(this.body=void 0!==Gt?Gt:null,En=nn):En=Gt,En&&(this.reportProgress=!!En.reportProgress,this.withCredentials=!!En.withCredentials,En.responseType&&(this.responseType=En.responseType),En.headers&&(this.headers=En.headers),En.context&&(this.context=En.context),En.params&&(this.params=En.params)),this.headers||(this.headers=new Ne),this.context||(this.context=new Ln),this.params){const qn=this.params.toString();if(0===qn.length)this.urlWithParams=ct;else{const Jr=ct.indexOf("?");this.urlWithParams=ct+(-1===Jr?"?":Jr<ct.length-1?"&":"")+qn}}else this.params=new Ot,this.urlWithParams=ct}serializeBody(){return null===this.body?null:xe(this.body)||Ge(this.body)||St(this.body)||function on(cn){return"undefined"!=typeof URLSearchParams&&cn instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ot?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||St(this.body)?null:Ge(this.body)?this.body.type||null:xe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ot?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(nt={}){var ct;const Gt=nt.method||this.method,nn=nt.url||this.url,En=nt.responseType||this.responseType,qn=void 0!==nt.body?nt.body:this.body,Jr=void 0!==nt.withCredentials?nt.withCredentials:this.withCredentials,Hr=void 0!==nt.reportProgress?nt.reportProgress:this.reportProgress;let Fr=nt.headers||this.headers,ds=nt.params||this.params;const Oi=null!==(ct=nt.context)&&void 0!==ct?ct:this.context;return void 0!==nt.setHeaders&&(Fr=Object.keys(nt.setHeaders).reduce((gi,Bn)=>gi.set(Bn,nt.setHeaders[Bn]),Fr)),nt.setParams&&(ds=Object.keys(nt.setParams).reduce((gi,Bn)=>gi.set(Bn,nt.setParams[Bn]),ds)),new Ht(Gt,nn,qn,{params:ds,headers:Fr,context:Oi,reportProgress:Hr,responseType:En,withCredentials:Jr})}}var Oe=(()=>((Oe=Oe||{})[Oe.Sent=0]="Sent",Oe[Oe.UploadProgress=1]="UploadProgress",Oe[Oe.ResponseHeader=2]="ResponseHeader",Oe[Oe.DownloadProgress=3]="DownloadProgress",Oe[Oe.Response=4]="Response",Oe[Oe.User=5]="User",Oe))();class Bt{constructor(nt,ct=200,Gt="OK"){this.headers=nt.headers||new Ne,this.status=void 0!==nt.status?nt.status:ct,this.statusText=nt.statusText||Gt,this.url=nt.url||null,this.ok=this.status>=200&&this.status<300}}class Re extends Bt{constructor(nt={}){super(nt),this.type=Oe.ResponseHeader}clone(nt={}){return new Re({headers:nt.headers||this.headers,status:void 0!==nt.status?nt.status:this.status,statusText:nt.statusText||this.statusText,url:nt.url||this.url||void 0})}}class wt extends Bt{constructor(nt={}){super(nt),this.type=Oe.Response,this.body=void 0!==nt.body?nt.body:null}clone(nt={}){return new wt({body:void 0!==nt.body?nt.body:this.body,headers:nt.headers||this.headers,status:void 0!==nt.status?nt.status:this.status,statusText:nt.statusText||this.statusText,url:nt.url||this.url||void 0})}}class Je extends Bt{constructor(nt){super(nt,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${nt.url||"(unknown url)"}`:`Http failure response for ${nt.url||"(unknown url)"}: ${nt.status} ${nt.statusText}`,this.error=nt.error||null}}function Lt(cn,nt){return{body:nt,headers:cn.headers,context:cn.context,observe:cn.observe,params:cn.params,reportProgress:cn.reportProgress,responseType:cn.responseType,withCredentials:cn.withCredentials}}let pt=(()=>{class cn{constructor(ct){this.handler=ct}request(ct,Gt,nn={}){let En;if(ct instanceof Ht)En=ct;else{let Hr,Fr;Hr=nn.headers instanceof Ne?nn.headers:new Ne(nn.headers),nn.params&&(Fr=nn.params instanceof Ot?nn.params:new Ot({fromObject:nn.params})),En=new Ht(ct,Gt,void 0!==nn.body?nn.body:null,{headers:Hr,context:nn.context,params:Fr,reportProgress:nn.reportProgress,responseType:nn.responseType||"json",withCredentials:nn.withCredentials})}const qn=(0,he.of)(En).pipe((0,je.b)(Hr=>this.handler.handle(Hr)));if(ct instanceof Ht||"events"===nn.observe)return qn;const Jr=qn.pipe((0,He.h)(Hr=>Hr instanceof wt));switch(nn.observe||"body"){case"body":switch(En.responseType){case"arraybuffer":return Jr.pipe((0,dt.U)(Hr=>{if(null!==Hr.body&&!(Hr.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Hr.body}));case"blob":return Jr.pipe((0,dt.U)(Hr=>{if(null!==Hr.body&&!(Hr.body instanceof Blob))throw new Error("Response is not a Blob.");return Hr.body}));case"text":return Jr.pipe((0,dt.U)(Hr=>{if(null!==Hr.body&&"string"!=typeof Hr.body)throw new Error("Response is not a string.");return Hr.body}));default:return Jr.pipe((0,dt.U)(Hr=>Hr.body))}case"response":return Jr;default:throw new Error(`Unreachable: unhandled observe type ${nn.observe}}`)}}delete(ct,Gt={}){return this.request("DELETE",ct,Gt)}get(ct,Gt={}){return this.request("GET",ct,Gt)}head(ct,Gt={}){return this.request("HEAD",ct,Gt)}jsonp(ct,Gt){return this.request("JSONP",ct,{params:(new Ot).append(Gt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ct,Gt={}){return this.request("OPTIONS",ct,Gt)}patch(ct,Gt,nn={}){return this.request("PATCH",ct,Lt(nn,Gt))}post(ct,Gt,nn={}){return this.request("POST",ct,Lt(nn,Gt))}put(ct,Gt,nn={}){return this.request("PUT",ct,Lt(nn,Gt))}}return cn.\u0275fac=function(ct){return new(ct||cn)(k.LFG(qe))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})();class Rt{constructor(nt,ct){this.next=nt,this.interceptor=ct}handle(nt){return this.interceptor.intercept(nt,this.next)}}const Sn=new k.OlP("HTTP_INTERCEPTORS");let sr=(()=>{class cn{intercept(ct,Gt){return Gt.handle(ct)}}return cn.\u0275fac=function(ct){return new(ct||cn)},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})();const ut=/^\)\]\}',?\n/;let Mt=(()=>{class cn{constructor(ct){this.xhrFactory=ct}handle(ct){if("JSONP"===ct.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ae.y(Gt=>{const nn=this.xhrFactory.build();if(nn.open(ct.method,ct.urlWithParams),ct.withCredentials&&(nn.withCredentials=!0),ct.headers.forEach((Bn,mi)=>nn.setRequestHeader(Bn,mi.join(","))),ct.headers.has("Accept")||nn.setRequestHeader("Accept","application/json, text/plain, */*"),!ct.headers.has("Content-Type")){const Bn=ct.detectContentTypeHeader();null!==Bn&&nn.setRequestHeader("Content-Type",Bn)}if(ct.responseType){const Bn=ct.responseType.toLowerCase();nn.responseType="json"!==Bn?Bn:"text"}const En=ct.serializeBody();let qn=null;const Jr=()=>{if(null!==qn)return qn;const Bn=nn.statusText||"OK",mi=new Ne(nn.getAllResponseHeaders()),Lr=function Qt(cn){return"responseURL"in cn&&cn.responseURL?cn.responseURL:/^X-Request-URL:/m.test(cn.getAllResponseHeaders())?cn.getResponseHeader("X-Request-URL"):null}(nn)||ct.url;return qn=new Re({headers:mi,status:nn.status,statusText:Bn,url:Lr}),qn},Hr=()=>{let{headers:Bn,status:mi,statusText:Lr,url:ki}=Jr(),kn=null;204!==mi&&(kn=void 0===nn.response?nn.responseText:nn.response),0===mi&&(mi=kn?200:0);let zt=mi>=200&&mi<300;if("json"===ct.responseType&&"string"==typeof kn){const Vn=kn;kn=kn.replace(ut,"");try{kn=""!==kn?JSON.parse(kn):null}catch(Pr){kn=Vn,zt&&(zt=!1,kn={error:Pr,text:kn})}}zt?(Gt.next(new wt({body:kn,headers:Bn,status:mi,statusText:Lr,url:ki||void 0})),Gt.complete()):Gt.error(new Je({error:kn,headers:Bn,status:mi,statusText:Lr,url:ki||void 0}))},Fr=Bn=>{const{url:mi}=Jr(),Lr=new Je({error:Bn,status:nn.status||0,statusText:nn.statusText||"Unknown Error",url:mi||void 0});Gt.error(Lr)};let ds=!1;const Oi=Bn=>{ds||(Gt.next(Jr()),ds=!0);let mi={type:Oe.DownloadProgress,loaded:Bn.loaded};Bn.lengthComputable&&(mi.total=Bn.total),"text"===ct.responseType&&!!nn.responseText&&(mi.partialText=nn.responseText),Gt.next(mi)},gi=Bn=>{let mi={type:Oe.UploadProgress,loaded:Bn.loaded};Bn.lengthComputable&&(mi.total=Bn.total),Gt.next(mi)};return nn.addEventListener("load",Hr),nn.addEventListener("error",Fr),nn.addEventListener("timeout",Fr),nn.addEventListener("abort",Fr),ct.reportProgress&&(nn.addEventListener("progress",Oi),null!==En&&nn.upload&&nn.upload.addEventListener("progress",gi)),nn.send(En),Gt.next({type:Oe.Sent}),()=>{nn.removeEventListener("error",Fr),nn.removeEventListener("abort",Fr),nn.removeEventListener("load",Hr),nn.removeEventListener("timeout",Fr),ct.reportProgress&&(nn.removeEventListener("progress",Oi),null!==En&&nn.upload&&nn.upload.removeEventListener("progress",gi)),nn.readyState!==nn.DONE&&nn.abort()}})}}return cn.\u0275fac=function(ct){return new(ct||cn)(k.LFG(g.JF))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})();const Xt=new k.OlP("XSRF_COOKIE_NAME"),Hn=new k.OlP("XSRF_HEADER_NAME");class ir{}let ur=(()=>{class cn{constructor(ct,Gt,nn){this.doc=ct,this.platform=Gt,this.cookieName=nn,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ct=this.doc.cookie||"";return ct!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,g.Mx)(ct,this.cookieName),this.lastCookieString=ct),this.lastToken}}return cn.\u0275fac=function(ct){return new(ct||cn)(k.LFG(g.K0),k.LFG(k.Lbi),k.LFG(Xt))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})(),Yr=(()=>{class cn{constructor(ct,Gt){this.tokenService=ct,this.headerName=Gt}intercept(ct,Gt){const nn=ct.url.toLowerCase();if("GET"===ct.method||"HEAD"===ct.method||nn.startsWith("http://")||nn.startsWith("https://"))return Gt.handle(ct);const En=this.tokenService.getToken();return null!==En&&!ct.headers.has(this.headerName)&&(ct=ct.clone({headers:ct.headers.set(this.headerName,En)})),Gt.handle(ct)}}return cn.\u0275fac=function(ct){return new(ct||cn)(k.LFG(ir),k.LFG(Hn))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})(),oi=(()=>{class cn{constructor(ct,Gt){this.backend=ct,this.injector=Gt,this.chain=null}handle(ct){if(null===this.chain){const Gt=this.injector.get(Sn,[]);this.chain=Gt.reduceRight((nn,En)=>new Rt(nn,En),this.backend)}return this.chain.handle(ct)}}return cn.\u0275fac=function(ct){return new(ct||cn)(k.LFG(at),k.LFG(k.zs3))},cn.\u0275prov=k.Yz7({token:cn,factory:cn.\u0275fac}),cn})(),xr=(()=>{class cn{static disable(){return{ngModule:cn,providers:[{provide:Yr,useClass:sr}]}}static withOptions(ct={}){return{ngModule:cn,providers:[ct.cookieName?{provide:Xt,useValue:ct.cookieName}:[],ct.headerName?{provide:Hn,useValue:ct.headerName}:[]]}}}return cn.\u0275fac=function(ct){return new(ct||cn)},cn.\u0275mod=k.oAB({type:cn}),cn.\u0275inj=k.cJS({providers:[Yr,{provide:Sn,useExisting:Yr,multi:!0},{provide:ir,useClass:ur},{provide:Xt,useValue:"XSRF-TOKEN"},{provide:Hn,useValue:"X-XSRF-TOKEN"}]}),cn})(),Mr=(()=>{class cn{}return cn.\u0275fac=function(ct){return new(ct||cn)},cn.\u0275mod=k.oAB({type:cn}),cn.\u0275inj=k.cJS({providers:[pt,{provide:qe,useClass:oi},Mt,{provide:at,useExisting:Mt}],imports:[[xr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),cn})()},5e3:(Wn,Dt,j)=>{j.d(Dt,{$8M:()=>rr,$Z:()=>Mf,AFp:()=>LE,ALo:()=>sE,AaK:()=>qe,Akn:()=>Zl,BQk:()=>Vu,CHM:()=>ee,CRH:()=>gE,CZH:()=>qv,CqO:()=>yg,EJc:()=>Ib,EiD:()=>Fa,EpF:()=>uy,F$t:()=>fy,F4k:()=>cy,FYo:()=>$0,FiY:()=>Ei,G48:()=>Kb,Gf:()=>fE,GfV:()=>j0,Gpc:()=>Pe,Hsn:()=>Do,JOm:()=>p,JVY:()=>gl,L6k:()=>Sc,LAX:()=>ru,LFG:()=>de,LSH:()=>xu,Lbi:()=>bb,MAs:()=>sg,NdJ:()=>_g,O4$:()=>Mn,OlP:()=>po,Oqu:()=>vc,PXZ:()=>Bb,Q6J:()=>Ch,QGY:()=>mg,Qsj:()=>TC,R0b:()=>Hu,RDi:()=>Rs,Rgc:()=>Xg,SBq:()=>Kg,Sil:()=>Db,Suo:()=>pE,TTD:()=>Us,TgZ:()=>Ud,Tol:()=>Ff,Udp:()=>Sh,VKq:()=>Y0,VLi:()=>Lb,W1O:()=>vE,WLB:()=>Q0,X6Q:()=>qb,XFs:()=>er,Xpm:()=>Or,Y36:()=>Vd,YKP:()=>W0,YNc:()=>rg,Yjl:()=>Ae,Yz7:()=>kt,ZZ4:()=>l0,_Bn:()=>V0,_UZ:()=>Bd,_Vd:()=>s_,_c5:()=>cT,_uU:()=>wy,aQg:()=>u0,c2e:()=>Tb,cJS:()=>At,cg1:()=>Hy,d8E:()=>kg,dDg:()=>HE,deG:()=>sa,dqk:()=>Fr,eBb:()=>nu,eFA:()=>WE,ekj:()=>wg,g9A:()=>UE,h0i:()=>Yf,hGG:()=>dT,hij:()=>Mg,iGM:()=>hE,ifc:()=>nn,ip1:()=>FE,kEZ:()=>X0,kL8:()=>Gy,kcU:()=>_r,l5B:()=>J0,lG2:()=>Me,lcZ:()=>oE,mCW:()=>Oa,n5z:()=>cs,oAB:()=>ln,oJD:()=>rl,oxw:()=>Nf,pB0:()=>Qu,q3G:()=>go,q4F:()=>H0,qLn:()=>xa,qOj:()=>Yp,qZA:()=>Th,qzn:()=>Gl,sBO:()=>Zb,sIi:()=>Zc,s_b:()=>l_,soG:()=>Zv,tBr:()=>Wi,tb:()=>BE,tp0:()=>ii,uIk:()=>_h,vHH:()=>un,vpe:()=>Tc,wAp:()=>Ri,xp6:()=>um,yhl:()=>tu,ynx:()=>wh,z2F:()=>t0,z3N:()=>_a,zSh:()=>df,zs3:()=>Ol});var g=j(7579),k=j(727),he=j(8306),ae=j(6451),je=j(3099);function He(n){for(let r in n)if(n[r]===He)return r;throw Error("Could not find renamed property on target object.")}function dt(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function qe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(qe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function at(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Ne=He({__forward_ref__:He});function Pe(n){return n.__forward_ref__=Pe,n.toString=function(){return qe(this())},n}function bt(n){return Tn(n)?n():n}function Tn(n){return"function"==typeof n&&n.hasOwnProperty(Ne)&&n.__forward_ref__===Pe}class un extends Error{constructor(r,o){super(function In(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,o)),this.code=r}}function Ot(n){return"string"==typeof n?n:null==n?"":String(n)}function tn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ot(n)}function Ge(n,r){const o=r?` in ${r}`:"";throw new un(-201,`No provider for ${tn(n)} found${o}`)}function or(n,r){null==n&&function mn(n,r,o,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function kt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function At(n){return{providers:n.providers||[],imports:n.imports||[]}}function ut(n){return Qt(n,ir)||Qt(n,Yr)}function Qt(n,r){return n.hasOwnProperty(r)?n[r]:null}function Hn(n){return n&&(n.hasOwnProperty(ur)||n.hasOwnProperty(oi))?n[ur]:null}const ir=He({\u0275prov:He}),ur=He({\u0275inj:He}),Yr=He({ngInjectableDef:He}),oi=He({ngInjectorDef:He});var er=(()=>((er=er||{})[er.Default=0]="Default",er[er.Host=1]="Host",er[er.Self=2]="Self",er[er.SkipSelf=4]="SkipSelf",er[er.Optional=8]="Optional",er))();let Wr;function Mr(n){const r=Wr;return Wr=n,r}function is(n,r,o){const a=ut(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&er.Optional?null:void 0!==r?r:void Ge(qe(n),"Injector")}function cn(n){return{toString:n}.toString()}var nt=(()=>((nt=nt||{})[nt.OnPush=0]="OnPush",nt[nt.Default=1]="Default",nt))(),nn=(()=>{return(n=nn||(nn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",nn;var n})();const En="undefined"!=typeof globalThis&&globalThis,qn="undefined"!=typeof window&&window,Jr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Fr=En||"undefined"!=typeof global&&global||qn||Jr,gi={},Bn=[],mi=He({\u0275cmp:He}),Lr=He({\u0275dir:He}),ki=He({\u0275pipe:He}),kn=He({\u0275mod:He}),zt=He({\u0275fac:He}),Vn=He({__NG_ELEMENT_ID__:He});let Pr=0;function Or(n){return cn(()=>{const o={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===nt.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Bn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||nn.Emulated,id:"c",styles:n.styles||Bn,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,_=n.features,w=n.pipes;return a.id+=Pr++,a.inputs=ze(n.inputs,o),a.outputs=ze(n.outputs),_&&_.forEach(N=>N(a)),a.directiveDefs=h?()=>("function"==typeof h?h():h).map(Qe):null,a.pipeDefs=w?()=>("function"==typeof w?w():w).map(Ue):null,a})}function Qe(n){return gt(n)||function sn(n){return n[Lr]||null}(n)}function Ue(n){return function vr(n){return n[ki]||null}(n)}const ft={};function ln(n){return cn(()=>{const r={type:n.type,bootstrap:n.bootstrap||Bn,declarations:n.declarations||Bn,imports:n.imports||Bn,exports:n.exports||Bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ft[n.id]=n.type),r})}function ze(n,r){if(null==n)return gi;const o={};for(const a in n)if(n.hasOwnProperty(a)){let h=n[a],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),o[h]=a,r&&(r[h]=_)}return o}const Me=Or;function Ae(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function gt(n){return n[mi]||null}function Yn(n,r){const o=n[kn]||null;if(!o&&!0===r)throw new Error(`Type ${qe(n)} does not have '\u0275mod' property.`);return o}function fs(n){return Array.isArray(n)&&"object"==typeof n[1]}function ui(n){return Array.isArray(n)&&!0===n[1]}function Ir(n){return 0!=(8&n.flags)}function gs(n){return 2==(2&n.flags)}function ms(n){return 1==(1&n.flags)}function bs(n){return null!==n.template}function Bi(n){return 0!=(512&n[2])}function bi(n,r){return n.hasOwnProperty(zt)?n[zt]:null}class ho{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Us(){return Gs}function Gs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Vo),zs}function zs(){const n=Ws(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===gi)n.previous=r;else for(let a in r)o[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Vo(n,r,o,a){const h=Ws(n)||function Bs(n,r){return n[Qs]=r}(n,{previous:gi,current:null}),_=h.current||(h.current={}),w=h.previous,N=this.declaredInputs[o],L=w[N];_[N]=new ho(L&&L.currentValue,r,w===gi),n[a]=r}Us.ngInherit=!0;const Qs="__ngSimpleChanges__";function Ws(n){return n[Qs]||null}let Zs;function Rs(n){Zs=n}function qs(){return void 0!==Zs?Zs:"undefined"!=typeof document?document:void 0}function Ti(n){return!!n.listen}const B={createRenderer:(n,r)=>qs()};function W(n){for(;Array.isArray(n);)n=n[0];return n}function rn(n,r){return W(r[n])}function wn(n,r){return W(r[n.index])}function Gr(n,r){return n.data[r]}function Xr(n,r){return n[r]}function ni(n,r){const o=r[n];return fs(o)?o:o[0]}function yi(n){return 4==(4&n[2])}function Zi(n){return 128==(128&n[2])}function Si(n,r){return null==r?null:n[r]}function oo(n){n[18]=0}function ts(n,r){n[5]+=r;let o=n,a=n[3];for(;null!==a&&(1===r&&1===o[5]||-1===r&&0===o[5]);)a[5]+=r,o=a,a=a[3]}const Kr={lFrame:tt(null),bindingsEnabled:!0};function G(){return Kr.bindingsEnabled}function Ye(){return Kr.lFrame.lView}function xn(){return Kr.lFrame.tView}function ee(n){return Kr.lFrame.contextLView=n,n[8]}function K(){let n=Ce();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ce(){return Kr.lFrame.currentTNode}function rt(n,r){const o=Kr.lFrame;o.currentTNode=n,o.isParent=r}function Zt(){return Kr.lFrame.isParent}function An(){Kr.lFrame.isParent=!1}function hi(){const n=Kr.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function l(){return Kr.lFrame.bindingIndex++}function A(n){const r=Kr.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function z(n,r){const o=Kr.lFrame;o.bindingIndex=o.bindingRootIndex=n,ge(r)}function ge(n){Kr.lFrame.currentDirectiveIndex=n}function be(n){const r=Kr.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function oe(){return Kr.lFrame.currentQueryIndex}function me(n){Kr.lFrame.currentQueryIndex=n}function ce(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function le(n,r,o){if(o&er.SkipSelf){let h=r,_=n;for(;!(h=h.parent,null!==h||o&er.Host||(h=ce(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;r=h,n=_}const a=Kr.lFrame=We();return a.currentTNode=r,a.lView=n,!0}function Te(n){const r=We(),o=n[1];Kr.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function We(){const n=Kr.lFrame,r=null===n?null:n.child;return null===r?tt(n):r}function tt(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function De(){const n=Kr.lFrame;return Kr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ke=De;function _t(){const n=De();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function vn(){return Kr.lFrame.selectedIndex}function Dn(n){Kr.lFrame.selectedIndex=n}function gn(){const n=Kr.lFrame;return Gr(n.tView,n.selectedIndex)}function Mn(){Kr.lFrame.currentNamespace="svg"}function _r(){!function Fn(){Kr.lFrame.currentNamespace=null}()}function hn(n,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const _=n.data[o].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:N,ngAfterViewInit:L,ngAfterViewChecked:ie,ngOnDestroy:pe}=_;w&&(n.contentHooks||(n.contentHooks=[])).push(-o,w),N&&((n.contentHooks||(n.contentHooks=[])).push(o,N),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,N)),L&&(n.viewHooks||(n.viewHooks=[])).push(-o,L),ie&&((n.viewHooks||(n.viewHooks=[])).push(o,ie),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,ie)),null!=pe&&(n.destroyHooks||(n.destroyHooks=[])).push(o,pe)}}function lr(n,r,o){cr(n,r,3,o)}function ar(n,r,o,a){(3&n[2])===o&&cr(n,r,o,a)}function Wt(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function cr(n,r,o,a){const _=null!=a?a:-1,w=r.length-1;let N=0;for(let L=void 0!==a?65535&n[18]:0;L<w;L++)if("number"==typeof r[L+1]){if(N=r[L],null!=a&&N>=a)break}else r[L]<0&&(n[18]+=65536),(N<_||-1==_)&&(tr(n,o,r,L),n[18]=(4294901760&n[18])+L+2),L++}function tr(n,r,o,a){const h=o[a]<0,_=o[a+1],N=n[h?-o[a]:o[a]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{_.call(N)}finally{}}}else try{_.call(N)}finally{}}class Di{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function Ve(n,r,o){const a=Ti(n);let h=0;for(;h<o.length;){const _=o[h];if("number"==typeof _){if(0!==_)break;h++;const w=o[h++],N=o[h++],L=o[h++];a?n.setAttribute(r,N,L,w):r.setAttributeNS(w,N,L)}else{const w=_,N=o[++h];vt(w)?a&&n.setProperty(r,w,N):a?n.setAttribute(r,w,N):r.setAttribute(w,N),h++}}return h}function Xe(n){return 3===n||4===n||6===n}function vt(n){return 64===n.charCodeAt(0)}function fn(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const h=r[a];"number"==typeof h?o=h:0===o||pr(n,o,h,null,-1===o||2===o?r[++a]:null)}}return n}function pr(n,r,o,a,h){let _=0,w=n.length;if(-1===r)w=-1;else for(;_<n.length;){const N=n[_++];if("number"==typeof N){if(N===r){w=-1;break}if(N>r){w=_-1;break}}}for(;_<n.length;){const N=n[_];if("number"==typeof N)break;if(N===o){if(null===a)return void(null!==h&&(n[_+1]=h));if(a===n[_+1])return void(n[_+2]=h)}_++,null!==a&&_++,null!==h&&_++}-1!==w&&(n.splice(w,0,r),_=w+1),n.splice(_++,0,o),null!==a&&n.splice(_++,0,a),null!==h&&n.splice(_++,0,h)}function $t(n){return-1!==n}function yr(n){return 32767&n}function Ur(n,r){let o=function Rr(n){return n>>16}(n),a=r;for(;o>0;)a=a[15],o--;return a}let Nn=!0;function Jn(n){const r=Nn;return Nn=n,r}let yn=0;function ao(n,r){const o=O(n,r);if(-1!==o)return o;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,yo(a.data,n),yo(r,null),yo(a.blueprint,null));const h=M(n,r),_=n.injectorIndex;if($t(h)){const w=yr(h),N=Ur(h,r),L=N[1].data;for(let ie=0;ie<8;ie++)r[_+ie]=N[w+ie]|L[w+ie]}return r[_+8]=h,_}function yo(n,r){n.push(0,0,0,0,0,0,0,0,r)}function O(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function M(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,a=null,h=r;for(;null!==h;){const _=h[1],w=_.type;if(a=2===w?_.declTNode:1===w?h[6]:null,null===a)return-1;if(o++,h=h[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function S(n,r,o){!function Os(n,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(Vn)&&(a=o[Vn]),null==a&&(a=o[Vn]=yn++);const h=255&a;r.data[n+(h>>5)]|=1<<h}(n,r,o)}function ne(n,r,o){if(o&er.Optional)return n;Ge(r,"NodeInjector")}function _e(n,r,o,a){if(o&er.Optional&&void 0===a&&(a=null),0==(o&(er.Self|er.Host))){const h=n[9],_=Mr(void 0);try{return h?h.get(r,a,o&er.Optional):is(r,a,o&er.Optional)}finally{Mr(_)}}return ne(a,r,o)}function Be(n,r,o,a=er.Default,h){if(null!==n){const _=function Er(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Vn)?n[Vn]:void 0;return"number"==typeof r?r>=0?255&r:It:r}(o);if("function"==typeof _){if(!le(r,n,a))return a&er.Host?ne(h,o,a):_e(r,o,a,h);try{const w=_(a);if(null!=w||a&er.Optional)return w;Ge(o)}finally{ke()}}else if("number"==typeof _){let w=null,N=O(n,r),L=-1,ie=a&er.Host?r[16][6]:null;for((-1===N||a&er.SkipSelf)&&(L=-1===N?M(n,r):r[N+8],-1!==L&&Is(a,!1)?(w=r[1],N=yr(L),r=Ur(L,r)):N=-1);-1!==N;){const pe=r[1];if(zn(_,N,pe.data)){const Fe=Ut(N,r,o,w,a,ie);if(Fe!==ot)return Fe}L=r[N+8],-1!==L&&Is(a,r[1].data[N+8]===ie)&&zn(_,N,r)?(w=pe,N=yr(L),r=Ur(L,r)):N=-1}}}return _e(r,o,a,h)}const ot={};function It(){return new $r(K(),Ye())}function Ut(n,r,o,a,h,_){const w=r[1],N=w.data[n+8],pe=Xn(N,w,o,null==a?gs(N)&&Nn:a!=w&&0!=(3&N.type),h&er.Host&&_===N);return null!==pe?Zn(r,w,pe,N):ot}function Xn(n,r,o,a,h){const _=n.providerIndexes,w=r.data,N=1048575&_,L=n.directiveStart,pe=_>>20,mt=h?N+pe:n.directiveEnd;for(let jt=a?N:N+pe;jt<mt;jt++){const Pn=w[jt];if(jt<L&&o===Pn||jt>=L&&Pn.type===o)return jt}if(h){const jt=w[L];if(jt&&bs(jt)&&jt.type===o)return L}return null}function Zn(n,r,o,a){let h=n[o];const _=r.data;if(function Ys(n){return n instanceof Di}(h)){const w=h;w.resolving&&function Ln(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new un(-200,`Circular dependency in DI detected for ${n}${o}`)}(tn(_[o]));const N=Jn(w.canSeeViewProviders);w.resolving=!0;const L=w.injectImpl?Mr(w.injectImpl):null;le(n,a,er.Default);try{h=n[o]=w.factory(void 0,_,n,a),r.firstCreatePass&&o>=a.directiveStart&&function Pt(n,r,o){const{ngOnChanges:a,ngOnInit:h,ngDoCheck:_}=r.type.prototype;if(a){const w=Gs(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,w),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,w)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),_&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,_))}(o,_[o],r)}finally{null!==L&&Mr(L),Jn(N),w.resolving=!1,ke()}}return h}function zn(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Is(n,r){return!(n&er.Self||n&er.Host&&r)}class $r{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return Be(this._tNode,this._lView,r,a,o)}}function cs(n){return cn(()=>{const r=n.prototype.constructor,o=r[zt]||Ss(r),a=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==a;){const _=h[zt]||Ss(h);if(_&&_!==o)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function Ss(n){return Tn(n)?()=>{const r=Ss(bt(n));return r&&r()}:bi(n)}function rr(n){return function q(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const a=o.length;let h=0;for(;h<a;){const _=o[h];if(Xe(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<a&&"string"==typeof o[h];)h++;else{if(_===r)return o[h+1];h+=2}}}return null}(K(),n)}const Oo="__parameters__";function Qa(n,r,o){return cn(()=>{const a=function Ua(n){return function(...o){if(n){const a=n(...o);for(const h in a)this[h]=a[h]}}}(r);function h(..._){if(this instanceof h)return a.apply(this,_),this;const w=new h(..._);return N.annotation=w,N;function N(L,ie,pe){const Fe=L.hasOwnProperty(Oo)?L[Oo]:Object.defineProperty(L,Oo,{value:[]})[Oo];for(;Fe.length<=pe;)Fe.push(null);return(Fe[pe]=Fe[pe]||[]).push(w),L}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class po{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=kt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sa=new po("AnalyzeForEntryComponents");function xo(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let a=n[o];Array.isArray(a)?(r===n&&(r=n.slice(0,o)),xo(a,r)):r!==n&&r.push(a)}return r}function ea(n,r){n.forEach(o=>Array.isArray(o)?ea(o,r):r(o))}function Jl(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function yu(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function _o(n,r){const o=[];for(let a=0;a<n;a++)o.push(r);return o}function vo(n,r,o){let a=$a(n,r);return a>=0?n[1|a]=o:(a=~a,function Sl(n,r,o,a){let h=n.length;if(h==r)n.push(o,a);else if(1===h)n.push(a,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=o,n[r+1]=a}}(n,a,r,o)),a}function Ja(n,r){const o=$a(n,r);if(o>=0)return n[1|o]}function $a(n,r){return function ja(n,r,o){let a=0,h=n.length>>o;for(;h!==a;){const _=a+(h-a>>1),w=n[_<<o];if(r===w)return _<<o;w>r?h=_:a=_+1}return~(h<<o)}(n,r,1)}const uo={},Ga="__NG_DI_FLAG__",Io="ngTempTokenPath",fl=/\n/gm,Ia="__source",Ul=He({provide:String,useValue:He});let Ra;function U(n){const r=Ra;return Ra=n,r}function Y(n,r=er.Default){if(void 0===Ra)throw new un(203,"");return null===Ra?is(n,void 0,r):Ra.get(n,r&er.Optional?null:void 0,r)}function de(n,r=er.Default){return(function xr(){return Wr}()||Y)(bt(n),r)}const Nt=de;function Yt(n){const r=[];for(let o=0;o<n.length;o++){const a=bt(n[o]);if(Array.isArray(a)){if(0===a.length)throw new un(900,"");let h,_=er.Default;for(let w=0;w<a.length;w++){const N=a[w],L=jr(N);"number"==typeof L?-1===L?h=N.token:_|=L:h=N}r.push(de(h,_))}else r.push(de(a))}return r}function Un(n,r){return n[Ga]=r,n.prototype[Ga]=r,n}function jr(n){return n[Ga]}const Wi=Un(Qa("Inject",n=>({token:n})),-1),Ei=Un(Qa("Optional"),8),ii=Un(Qa("SkipSelf"),4);let Ro,$l;function no(n){var r;return(null===(r=function qu(){if(void 0===Ro&&(Ro=null,Fr.trustedTypes))try{Ro=Fr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ro}())||void 0===r?void 0:r.createHTML(n))||n}function Ho(n){var r;return(null===(r=function pl(){if(void 0===$l&&($l=null,Fr.trustedTypes))try{$l=Fr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return $l}())||void 0===r?void 0:r.createHTML(n))||n}class Fs{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Zu extends Fs{getTypeName(){return"HTML"}}class eu extends Fs{getTypeName(){return"Style"}}class jl extends Fs{getTypeName(){return"Script"}}class Hl extends Fs{getTypeName(){return"URL"}}class Yu extends Fs{getTypeName(){return"ResourceURL"}}function _a(n){return n instanceof Fs?n.changingThisBreaksApplicationSecurity:n}function Gl(n,r){const o=tu(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}function tu(n){return n instanceof Fs&&n.getTypeName()||null}function gl(n){return new Zu(n)}function Sc(n){return new eu(n)}function nu(n){return new jl(n)}function ru(n){return new Hl(n)}function Qu(n){return new Yu(n)}class ml{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const o=(new window.DOMParser).parseFromString(no(r),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(r):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class va{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const a=this.inertDocument.createElement("body");o.appendChild(a)}}getInertBodyElement(r){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=no(r),o;const a=this.inertDocument.createElement("body");return a.innerHTML=no(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const o=r.attributes;for(let h=o.length-1;0<h;h--){const w=o.item(h).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&r.removeAttribute(w)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const Cu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Oa(n){return(n=String(n)).match(Cu)||n.match(bu)?n:"unsafe:"+n}function ka(n){const r={};for(const o of n.split(","))r[o]=!0;return r}function Da(...n){const r={};for(const o of n)for(const a in o)o.hasOwnProperty(a)&&(r[a]=!0);return r}const Ju=ka("area,br,col,hr,img,wbr"),Tu=ka("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zl=ka("rp,rt"),wu=Da(Ju,Da(Tu,ka("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Da(zl,ka("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Da(zl,Tu)),Iu=ka("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Su=ka("srcset"),ec=Da(Iu,Su,ka("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ka("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_l=ka("script,style,template");class dd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let o=r.firstChild,a=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?a=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,a&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let h=this.checkClobberedElement(o,o.nextSibling);if(h){o=h;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(r){const o=r.nodeName.toLowerCase();if(!wu.hasOwnProperty(o))return this.sanitizedSomething=!0,!_l.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const a=r.attributes;for(let h=0;h<a.length;h++){const _=a.item(h),w=_.name,N=w.toLowerCase();if(!ec.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let L=_.value;Iu[N]&&(L=Oa(L)),Su[N]&&(n=L,L=(n=String(n)).split(",").map(r=>Oa(r.trim())).join(", ")),this.buf.push(" ",w,'="',Wa(L),'"')}var n;return this.buf.push(">"),!0}endElement(r){const o=r.nodeName.toLowerCase();wu.hasOwnProperty(o)&&!Ju.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(r){this.buf.push(Wa(r))}checkClobberedElement(r,o){if(o&&(r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return o}}const Go=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Au=/([^\#-~ |!])/g;function Wa(n){return n.replace(/&/g,"&amp;").replace(Go,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Au,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Aa;function Fa(n,r){let o=null;try{Aa=Aa||function iu(n){const r=new va(n);return function ha(){try{return!!(new window.DOMParser).parseFromString(no(""),"text/html")}catch(n){return!1}}()?new ml(r):r}(n);let a=r?String(r):"";o=Aa.getInertBodyElement(a);let h=5,_=a;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,a=_,_=o.innerHTML,o=Aa.getInertBodyElement(a)}while(a!==_);return no((new dd).sanitizeChildren(vl(o)||o))}finally{if(o){const a=vl(o)||o;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function vl(n){return"content"in n&&function io(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var go=(()=>((go=go||{})[go.NONE=0]="NONE",go[go.HTML=1]="HTML",go[go.STYLE=2]="STYLE",go[go.SCRIPT=3]="SCRIPT",go[go.URL=4]="URL",go[go.RESOURCE_URL=5]="RESOURCE_URL",go))();function rl(n){const r=zo();return r?Ho(r.sanitize(go.HTML,n)||""):Gl(n,"HTML")?Ho(_a(n)):Fa(qs(),Ot(n))}function xu(n){const r=zo();return r?r.sanitize(go.URL,n)||"":Gl(n,"URL")?_a(n):Oa(Ot(n))}function zo(){const n=Ye();return n&&n[12]}const Es="__ngContext__";function ua(n,r){n[Es]=r}function il(n){const r=function Pu(n){return n[Es]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function lu(n){return n.ngOriginalError}function Ou(n,...r){n.error(...r)}class xa{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r),a=function Nu(n){return n&&n.ngErrorLogger||Ou}(r);a(this._console,"ERROR",r),o&&a(this._console,"ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&lu(r);for(;o&&lu(o);)o=lu(o);return o||null}}const ol=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Fr))();function qa(n){return n instanceof Function?n():n}var p=(()=>((p=p||{})[p.Important=1]="Important",p[p.DashCase=2]="DashCase",p))();function D(n,r){return undefined(n,r)}function Tt(n){const r=n[3];return ui(r)?r[3]:r}function kr(n){return di(n[13])}function Ci(n){return di(n[4])}function di(n){for(;null!==n&&!ui(n);)n=n[4];return n}function f(n,r,o,a,h){if(null!=a){let _,w=!1;ui(a)?_=a:fs(a)&&(w=!0,a=a[0]);const N=W(a);0===n&&null!==o?null==h?Lh(r,o,N):Wl(r,o,N,h||null,!0):1===n&&null!==o?Wl(r,o,N,h||null,!0):2===n?function np(n,r,o){const a=Vh(n,r);a&&function p_(n,r,o,a){Ti(n)?n.removeChild(r,o,a):r.removeChild(o)}(n,a,r,o)}(r,N,w):3===n&&r.destroyNode(N),null!=_&&function ip(n,r,o,a,h){const _=o[7];_!==W(o)&&f(r,n,a,_,h);for(let N=10;N<o.length;N++){const L=o[N];Xd(L[1],L,n,r,a,_)}}(r,n,_,o,h)}}function x(n,r,o){if(Ti(n))return n.createElement(r,o);{const a=null!==o?function fo(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(o):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function bn(n,r){const o=n[9],a=o.indexOf(r),h=r[3];1024&r[2]&&(r[2]&=-1025,ts(h,-1)),o.splice(a,1)}function Rn(n,r){if(n.length<=10)return;const o=10+r,a=n[o];if(a){const h=a[17];null!==h&&h!==n&&bn(h,a),r>0&&(n[o-1][4]=a[4]);const _=yu(n,10+r);!function H(n,r){Xd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const w=_[19];null!==w&&w.detachView(_[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Cr(n,r){if(!(256&r[2])){const o=r[11];Ti(o)&&o.destroyNode&&Xd(n,r,o,3,null,null),function Ze(n){let r=n[13];if(!r)return fi(n[1],n);for(;r;){let o=null;if(fs(r))o=r[13];else{const a=r[10];a&&(o=a)}if(!o){for(;r&&!r[4]&&r!==n;)fs(r)&&fi(r[1],r),r=r[3];null===r&&(r=n),fs(r)&&fi(r[1],r),o=r&&r[4]}r=o}}(r)}}function fi(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function ca(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let a=0;a<o.length;a+=2){const h=r[o[a]];if(!(h instanceof Di)){const _=o[a+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const N=h[_[w]],L=_[w+1];try{L.call(N)}finally{}}else try{_.call(h)}finally{}}}}(n,r),function Ps(n,r){const o=n.cleanup,a=r[7];let h=-1;if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const w=o[_+1],N="function"==typeof w?w(r):W(r[w]),L=a[h=o[_+2]],ie=o[_+3];"boolean"==typeof ie?N.removeEventListener(o[_],L,ie):ie>=0?a[h=ie]():a[h=-ie].unsubscribe(),_+=2}else{const w=a[h=o[_+1]];o[_].call(w)}if(null!==a){for(let _=h+1;_<a.length;_++)a[_]();r[7]=null}}(n,r),1===r[1].type&&Ti(r[11])&&r[11].destroy();const o=r[17];if(null!==o&&ui(r[3])){o!==r[3]&&bn(o,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fu(n,r,o){return function Vc(n,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[0];if(2&a.flags){const h=n.data[a.directiveStart].encapsulation;if(h===nn.None||h===nn.Emulated)return null}return wn(a,o)}(n,r.parent,o)}function Wl(n,r,o,a,h){Ti(n)?n.insertBefore(r,o,a,h):r.insertBefore(o,a,h)}function Lh(n,r,o){Ti(n)?n.appendChild(r,o):r.appendChild(o)}function em(n,r,o,a,h){null!==a?Wl(n,r,o,a,h):Lh(n,r,o)}function Vh(n,r){return Ti(n)?n.parentNode(r):r.parentNode}function tm(n,r,o){return rm(n,r,o)}let rm=function nm(n,r,o){return 40&n.type?wn(n,o):null};function Uh(n,r,o,a){const h=Fu(n,a,r),_=r[11],N=tm(a.parent||r[6],a,r);if(null!=h)if(Array.isArray(o))for(let L=0;L<o.length;L++)em(_,h,o[L],N,!1);else em(_,h,o,N,!1)}function Bh(n,r){if(null!==r){const o=r.type;if(3&o)return wn(r,n);if(4&o)return tp(-1,n[r.index]);if(8&o){const a=r.child;if(null!==a)return Bh(n,a);{const h=n[r.index];return ui(h)?tp(-1,h):W(h)}}if(32&o)return D(r,n)()||W(n[r.index]);{const a=ep(n,r);return null!==a?Array.isArray(a)?a[0]:Bh(Tt(n[16]),a):Bh(n,r.next)}}return null}function ep(n,r){return null!==r?n[16][6].projection[r.projection]:null}function tp(n,r){const o=10+n+1;if(o<r.length){const a=r[o],h=a[1].firstChild;if(null!==h)return Bh(a,h)}return r[7]}function $h(n,r,o,a,h,_,w){for(;null!=o;){const N=a[o.index],L=o.type;if(w&&0===r&&(N&&ua(W(N),a),o.flags|=4),64!=(64&o.flags))if(8&L)$h(n,r,o.child,a,h,_,!1),f(r,n,h,N,_);else if(32&L){const ie=D(o,a);let pe;for(;pe=ie();)f(r,n,h,pe,_);f(r,n,h,N,_)}else 16&L?ma(n,r,a,o,h,_):f(r,n,h,N,_);o=w?o.projectionNext:o.next}}function Xd(n,r,o,a,h,_){$h(o,a,n.firstChild,r,h,_,!1)}function ma(n,r,o,a,h,_){const w=o[16],L=w[6].projection[a.projection];if(Array.isArray(L))for(let ie=0;ie<L.length;ie++)f(r,n,h,L[ie],_);else $h(n,r,L,w[3],h,_,!0)}function jh(n,r,o){Ti(n)?n.setAttribute(r,"style",o):r.style.cssText=o}function uu(n,r,o){Ti(n)?""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o):r.className=o}function op(n,r,o){let a=n.length;for(;;){const h=n.indexOf(r,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const _=r.length;if(h+_===a||n.charCodeAt(h+_)<=32)return h}o=h+1}}const ap="ng-template";function Hh(n,r,o){let a=0;for(;a<n.length;){let h=n[a++];if(o&&"class"===h){if(h=n[a],-1!==op(h.toLowerCase(),r,0))return!0}else if(1===h){for(;a<n.length&&"string"==typeof(h=n[a++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function sc(n){return 4===n.type&&n.value!==ap}function Uc(n,r,o){return r===(4!==n.type||o?n.value:ap)}function Bc(n,r,o){let a=4;const h=n.attrs||[],_=function om(n){for(let r=0;r<n.length;r++)if(Xe(n[r]))return r;return n.length}(h);let w=!1;for(let N=0;N<r.length;N++){const L=r[N];if("number"!=typeof L){if(!w)if(4&a){if(a=2|1&a,""!==L&&!Uc(n,L,o)||""===L&&1===r.length){if(Ka(a))return!1;w=!0}}else{const ie=8&a?L:r[++N];if(8&a&&null!==n.attrs){if(!Hh(n.attrs,ie,o)){if(Ka(a))return!1;w=!0}continue}const Fe=sm(8&a?"class":L,h,sc(n),o);if(-1===Fe){if(Ka(a))return!1;w=!0;continue}if(""!==ie){let mt;mt=Fe>_?"":h[Fe+1].toLowerCase();const jt=8&a?mt:null;if(jt&&-1!==op(jt,ie,0)||2&a&&ie!==mt){if(Ka(a))return!1;w=!0}}}}else{if(!w&&!Ka(a)&&!Ka(L))return!1;if(w&&Ka(L))continue;w=!1,a=L|1&a}}return Ka(a)||w}function Ka(n){return 0==(1&n)}function sm(n,r,o,a){if(null===r)return-1;let h=0;if(a||!o){let _=!1;for(;h<r.length;){const w=r[h];if(w===n)return h;if(3===w||6===w)_=!0;else{if(1===w||2===w){let N=r[++h];for(;"string"==typeof N;)N=r[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=_?1:2}return-1}return function am(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const a=n[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,n)}function Gh(n,r,o=!1){for(let a=0;a<r.length;a++)if(Bc(n,r[a],o))return!0;return!1}function m_(n,r){e:for(let o=0;o<r.length;o++){const a=r[o];if(n.length===a.length){for(let h=0;h<n.length;h++)if(n[h]!==a[h])continue e;return!0}}return!1}function up(n,r){return n?":not("+r.trim()+")":r}function lm(n){let r=n[0],o=1,a=2,h="",_=!1;for(;o<n.length;){let w=n[o];if("string"==typeof w)if(2&a){const N=n[++o];h+="["+w+(N.length>0?'="'+N+'"':"")+"]"}else 8&a?h+="."+w:4&a&&(h+=" "+w);else""!==h&&!Ka(w)&&(r+=up(_,h),h=""),a=w,_=_||!Ka(a);o++}return""!==h&&(r+=up(_,h)),r}const Ui={};function um(n){cp(xn(),Ye(),vn()+n,!1)}function cp(n,r,o,a){if(!a)if(3==(3&r[2])){const _=n.preOrderCheckHooks;null!==_&&lr(r,_,o)}else{const _=n.preOrderHooks;null!==_&&ar(r,_,0,o)}Dn(o)}function Wh(n,r){return n<<17|r<<2}function ql(n){return n>>17&32767}function cu(n){return 2|n}function du(n){return(131068&n)>>2}function dp(n,r){return-131069&n|r<<2}function fp(n){return 1|n}function Ep(n,r){const o=n.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const h=o[a],_=o[a+1];if(-1!==_){const w=n.data[_];me(h),w.contentQueries(2,r[_],_)}}}function ih(n,r,o,a,h,_,w,N,L,ie){const pe=r.blueprint.slice();return pe[0]=h,pe[2]=140|a,oo(pe),pe[3]=pe[15]=n,pe[8]=o,pe[10]=w||n&&n[10],pe[11]=N||n&&n[11],pe[12]=L||n&&n[12]||null,pe[9]=ie||n&&n[9]||null,pe[6]=_,pe[16]=2==r.type?n[16]:pe,pe}function Id(n,r,o,a,h){let _=n.data[r];if(null===_)_=function sh(n,r,o,a,h){const _=Ce(),w=Zt(),L=n.data[r]=function wp(n,r,o,a,h,_){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,o,r,a,h);return null===n.firstChild&&(n.firstChild=L),null!==_&&(w?null==_.child&&null!==L.parent&&(_.child=L):null===_.next&&(_.next=L)),L}(n,r,o,a,h),function I(){return Kr.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=o,_.value=a,_.attrs=h;const w=function Le(){const n=Kr.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===w?-1:w.injectorIndex}return rt(_,!0),_}function Bo(n,r,o,a){if(0===o)return-1;const h=r.length;for(let _=0;_<o;_++)r.push(a),n.blueprint.push(a),n.data.push(null);return h}function oh(n,r,o){Te(r);try{const a=n.viewQuery;null!==a&&kp(1,a,o);const h=n.template;null!==h&&vm(n,r,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ep(n,r),n.staticViewQueries&&kp(2,n.viewQuery,o);const _=n.components;null!==_&&function _m(n,r){for(let o=0;o<r.length;o++)N_(n,r[o])}(r,_)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,_t()}}function Sd(n,r,o,a){const h=r[2];if(256!=(256&h)){Te(r);try{oo(r),function rs(n){return Kr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&vm(n,r,o,2,a);const w=3==(3&h);if(w){const ie=n.preOrderCheckHooks;null!==ie&&lr(r,ie,null)}else{const ie=n.preOrderHooks;null!==ie&&ar(r,ie,0,null),Wt(r,0)}if(function P_(n){for(let r=kr(n);null!==r;r=Ci(r)){if(!r[2])continue;const o=r[9];for(let a=0;a<o.length;a++){const h=o[a],_=h[3];0==(1024&h[2])&&ts(_,1),h[2]|=1024}}}(r),function Im(n){for(let r=kr(n);null!==r;r=Ci(r))for(let o=10;o<r.length;o++){const a=r[o],h=a[1];Zi(a)&&Sd(h,a,h.template,a[8])}}(r),null!==n.contentQueries&&Ep(n,r),w){const ie=n.contentCheckHooks;null!==ie&&lr(r,ie)}else{const ie=n.contentHooks;null!==ie&&ar(r,ie,1),Wt(r,1)}!function ym(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const h=o[a];if(h<0)Dn(~h);else{const _=h,w=o[++a],N=o[++a];z(w,_),N(2,r[_])}}}finally{Dn(-1)}}(n,r);const N=n.components;null!==N&&function I_(n,r){for(let o=0;o<r.length;o++)Sm(n,r[o])}(r,N);const L=n.viewQuery;if(null!==L&&kp(2,L,a),w){const ie=n.viewCheckHooks;null!==ie&&lr(r,ie)}else{const ie=n.viewHooks;null!==ie&&ar(r,ie,2),Wt(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,ts(r[3],-1))}finally{_t()}}}function S_(n,r,o,a){const h=r[10],w=yi(r);try{!w&&h.begin&&h.begin(),w&&oh(n,r,a),Sd(n,r,o,a)}finally{!w&&h.end&&h.end()}}function vm(n,r,o,a,h){const _=vn(),w=2&a;try{Dn(-1),w&&r.length>20&&cp(n,r,20,!1),o(a,h)}finally{Dn(_)}}function Cp(n,r,o){if(Ir(r)){const h=r.directiveEnd;for(let _=r.directiveStart;_<h;_++){const w=n.data[_];w.contentQueries&&w.contentQueries(1,o[_],_)}}}function bp(n,r,o){!G()||(function bm(n,r,o,a){const h=o.directiveStart,_=o.directiveEnd;n.firstCreatePass||ao(o,r),ua(a,r);const w=o.initialInputs;for(let N=h;N<_;N++){const L=n.data[N],ie=bs(L);ie&&Pp(r,o,L);const pe=Zn(r,n,N,o);ua(pe,r),null!==w&&sf(0,N-h,pe,L,0,w),ie&&(ni(o.index,r)[8]=pe)}}(n,r,o,wn(o,r)),128==(128&o.flags)&&function Tm(n,r,o){const a=o.directiveStart,h=o.directiveEnd,w=o.index,N=function J(){return Kr.lFrame.currentDirectiveIndex}();try{Dn(w);for(let L=a;L<h;L++){const ie=n.data[L],pe=r[L];ge(L),(null!==ie.hostBindings||0!==ie.hostVars||null!==ie.hostAttrs)&&Ap(ie,pe)}}finally{Dn(-1),ge(N)}}(n,r,o))}function Dd(n,r,o=wn){const a=r.localNames;if(null!==a){let h=r.index+1;for(let _=0;_<a.length;_+=2){const w=a[_+1],N=-1===w?o(r,n):n[w];n[h++]=N}}}function Em(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=ah(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function ah(n,r,o,a,h,_,w,N,L,ie){const pe=20+a,Fe=pe+h,mt=function Tp(n,r){const o=[];for(let a=0;a<r;a++)o.push(a<n?null:Ui);return o}(pe,Fe),jt="function"==typeof ie?ie():ie;return mt[1]={type:n,blueprint:mt,template:o,queries:null,viewQuery:N,declTNode:r,data:mt.slice().fill(null,pe),bindingStartIndex:pe,expandoStartIndex:Fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:L,consts:jt,incompleteFirstPass:!1}}function ef(n,r,o,a){const h=xm(r);null===o?h.push(a):(h.push(o),n.firstCreatePass&&Md(n).push(a,h.length-1))}function Ip(n,r,o){for(let a in n)if(n.hasOwnProperty(a)){const h=n[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(r,h):o[a]=[r,h]}return o}function ll(n,r,o,a,h,_,w,N){const L=wn(r,o);let pe,ie=r.inputs;!N&&null!=ie&&(pe=ie[a])?(cf(n,o,pe,a,h),gs(r)&&function Sp(n,r){const o=ni(r,n);16&o[2]||(o[2]|=64)}(o,r.index)):3&r.type&&(a=function Cm(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),h=null!=w?w(h,r.value||"",a):h,Ti(_)?_.setProperty(L,a,h):vt(a)||(L.setProperty?L.setProperty(a,h):L[a]=h))}function lc(n,r,o,a){let h=!1;if(G()){const _=function M_(n,r,o){const a=n.directiveRegistry;let h=null;if(a)for(let _=0;_<a.length;_++){const w=a[_];Gh(o,w.selectors,!1)&&(h||(h=[]),S(ao(o,r),n,w.type),bs(w)?(rf(n,o),h.unshift(w)):h.push(w))}return h}(n,r,o),w=null===a?null:{"":-1};if(null!==_){h=!0,Mp(o,n.data.length,_.length);for(let pe=0;pe<_.length;pe++){const Fe=_[pe];Fe.providersResolver&&Fe.providersResolver(Fe)}let N=!1,L=!1,ie=Bo(n,r,_.length,null);for(let pe=0;pe<_.length;pe++){const Fe=_[pe];o.mergedAttrs=fn(o.mergedAttrs,Fe.hostAttrs),Rp(n,o,r,ie,Fe),xp(ie,Fe,w),null!==Fe.contentQueries&&(o.flags|=8),(null!==Fe.hostBindings||null!==Fe.hostAttrs||0!==Fe.hostVars)&&(o.flags|=128);const mt=Fe.type.prototype;!N&&(mt.ngOnChanges||mt.ngOnInit||mt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),N=!0),!L&&(mt.ngOnChanges||mt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),L=!0),ie++}!function D_(n,r){const a=r.directiveEnd,h=n.data,_=r.attrs,w=[];let N=null,L=null;for(let ie=r.directiveStart;ie<a;ie++){const pe=h[ie],Fe=pe.inputs,mt=null===_||sc(r)?null:Np(Fe,_);w.push(mt),N=Ip(Fe,ie,N),L=Ip(pe.outputs,ie,L)}null!==N&&(N.hasOwnProperty("class")&&(r.flags|=16),N.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=N,r.outputs=L}(n,o)}w&&function R_(n,r,o){if(r){const a=n.localNames=[];for(let h=0;h<r.length;h+=2){const _=o[r[h+1]];if(null==_)throw new un(-301,!1);a.push(r[h],_)}}}(o,a,w)}return o.mergedAttrs=fn(o.mergedAttrs,o.attrs),h}function tf(n,r,o,a,h,_){const w=_.hostBindings;if(w){let N=n.hostBindingOpCodes;null===N&&(N=n.hostBindingOpCodes=[]);const L=~r.index;(function nf(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(N)!=L&&N.push(L),N.push(a,h,w)}}function Ap(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function rf(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=n;bs(r)&&(o[""]=n)}}function Mp(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Rp(n,r,o,a,h){n.data[a]=h;const _=h.factory||(h.factory=bi(h.type)),w=new Di(_,bs(h),null);n.blueprint[a]=w,o[a]=w,tf(n,r,0,a,Bo(n,o,h.hostVars,Ui),h)}function Pp(n,r,o){const a=wn(r,n),h=Em(o),_=n[10],w=uh(n,ih(n,h,null,o.onPush?64:16,a,r,_,_.createRenderer(a,o),null,null));n[r.index]=w}function Cl(n,r,o,a,h,_){const w=wn(n,r);!function Wc(n,r,o,a,h,_,w){if(null==_)Ti(n)?n.removeAttribute(r,h,o):r.removeAttribute(h);else{const N=null==w?Ot(_):w(_,a||"",h);Ti(n)?n.setAttribute(r,h,N,o):o?r.setAttributeNS(o,h,N):r.setAttribute(h,N)}}(r[11],w,_,n.value,o,a,h)}function sf(n,r,o,a,h,_){const w=_[r];if(null!==w){const N=a.setInput;for(let L=0;L<w.length;){const ie=w[L++],pe=w[L++],Fe=w[L++];null!==N?a.setInput(o,Fe,ie,pe):o[pe]=Fe}}}function Np(n,r){let o=null,a=0;for(;a<r.length;){const h=r[a];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],r[a+1])),a+=2}else a+=2;else a+=4}return o}function af(n,r,o,a){return new Array(n,!0,!1,r,null,0,a,o,null,null)}function Sm(n,r){const o=ni(r,n);if(Zi(o)){const a=o[1];80&o[2]?Sd(a,o,a.template,o[8]):o[5]>0&&Op(o)}}function Op(n){for(let a=kr(n);null!==a;a=Ci(a))for(let h=10;h<a.length;h++){const _=a[h];if(1024&_[2]){const w=_[1];Sd(w,_,w.template,_[8])}else _[5]>0&&Op(_)}const o=n[1].components;if(null!==o)for(let a=0;a<o.length;a++){const h=ni(o[a],n);Zi(h)&&h[5]>0&&Op(h)}}function N_(n,r){const o=ni(r,n),a=o[1];(function O_(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(a,o),oh(a,o,o[8])}function uh(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function xd(n){for(;n;){n[2]|=64;const r=Tt(n);if(Bi(n)&&!r)return n;n=r}return null}function Dm(n){!function dh(n){for(let r=0;r<n.components.length;r++){const o=n.components[r],a=il(o),h=a[1];S_(h,a,h.template,o)}}(n[8])}function kp(n,r,o){me(0),r(n,o)}const k_=(()=>Promise.resolve(null))();function xm(n){return n[7]||(n[7]=[])}function Md(n){return n.cleanup||(n.cleanup=[])}function qc(n,r){const o=n[9],a=o?o.get(xa,null):null;a&&a.handleError(r)}function cf(n,r,o,a,h){for(let _=0;_<o.length;){const w=o[_++],N=o[_++],L=r[w],ie=n.data[w];null!==ie.setInput?ie.setInput(L,h,a,N):L[N]=h}}function Nl(n,r,o){const a=rn(r,n);!function d(n,r,o){Ti(n)?n.setValue(r,o):r.textContent=o}(n[11],a,o)}function uc(n,r,o){let a=o?n.styles:null,h=o?n.classes:null,_=0;if(null!==r)for(let w=0;w<r.length;w++){const N=r[w];"number"==typeof N?_=N:1==_?h=at(h,N):2==_&&(a=at(a,N+": "+r[++w]+";"))}o?n.styles=a:n.stylesWithoutHost=a,o?n.classes=h:n.classesWithoutHost=h}const hh=new po("INJECTOR",-1);class hu{get(r,o=uo){if(o===uo){const a=new Error(`NullInjectorError: No provider for ${qe(r)}!`);throw a.name="NullInjectorError",a}return o}}const df=new po("Set Injector scope."),fh={},Lp={};let Vp;function hf(){return void 0===Vp&&(Vp=new hu),Vp}function Pm(n,r=null,o=null,a){const h=ff(n,r,o,a);return h._resolveInjectorDefTypes(),h}function ff(n,r=null,o=null,a){return new pf(n,o,r||hf(),a)}class pf{constructor(r,o,a,h=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];o&&ea(o,N=>this.processProvider(N,r,o)),ea([r],N=>this.processInjectorType(N,[],_)),this.records.set(hh,Pd(void 0,this));const w=this.records.get(df);this.scope=null!=w?w.value:null,this.source=h||("object"==typeof r?null:qe(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,o=uo,a=er.Default){this.assertNotDestroyed();const h=U(this),_=Mr(void 0);try{if(!(a&er.SkipSelf)){let N=this.records.get(r);if(void 0===N){const L=function L_(n){return"function"==typeof n||"object"==typeof n&&n instanceof po}(r)&&ut(r);N=L&&this.injectableDefInScope(L)?Pd(ph(r),fh):null,this.records.set(r,N)}if(null!=N)return this.hydrate(r,N)}return(a&er.Self?hf():this.parent).get(r,o=a&er.Optional&&o===uo?null:o)}catch(w){if("NullInjectorError"===w.name){if((w[Io]=w[Io]||[]).unshift(qe(r)),h)throw w;return function Zr(n,r,o,a){const h=n[Io];throw r[Ia]&&h.unshift(r[Ia]),n.message=function zr(n,r,o,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=qe(r);if(Array.isArray(r))h=r.map(qe).join(" -> ");else if("object"==typeof r){let _=[];for(let w in r)if(r.hasOwnProperty(w)){let N=r[w];_.push(w+":"+("string"==typeof N?JSON.stringify(N):qe(N)))}h=`{${_.join(", ")}}`}return`${o}${a?"("+a+")":""}[${h}]: ${n.replace(fl,"\n  ")}`}("\n"+n.message,h,o,a),n.ngTokenPath=h,n[Io]=null,n}(w,r,"R3InjectorError",this.source)}throw w}finally{Mr(_),U(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,h)=>r.push(qe(h))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new un(205,!1)}processInjectorType(r,o,a){if(!(r=bt(r)))return!1;let h=Hn(r);const _=null==h&&r.ngModule||void 0,w=void 0===_?r:_,N=-1!==a.indexOf(w);if(void 0!==_&&(h=Hn(_)),null==h)return!1;if(null!=h.imports&&!N){let pe;a.push(w);try{ea(h.imports,Fe=>{this.processInjectorType(Fe,o,a)&&(void 0===pe&&(pe=[]),pe.push(Fe))})}finally{}if(void 0!==pe)for(let Fe=0;Fe<pe.length;Fe++){const{ngModule:mt,providers:jt}=pe[Fe];ea(jt,Pn=>this.processProvider(Pn,mt,jt||Bn))}}this.injectorDefTypes.add(w);const L=bi(w)||(()=>new w);this.records.set(w,Pd(L,fh));const ie=h.providers;if(null!=ie&&!N){const pe=r;ea(ie,Fe=>this.processProvider(Fe,pe,ie))}return void 0!==_&&void 0!==r.providers}processProvider(r,o,a){let h=Nd(r=bt(r))?r:bt(r&&r.provide);const _=function Rd(n,r,o){return Om(n)?Pd(void 0,n.useValue):Pd(gf(n),fh)}(r);if(Nd(r)||!0!==r.multi)this.records.get(h);else{let w=this.records.get(h);w||(w=Pd(void 0,fh,!0),w.factory=()=>Yt(w.multi),this.records.set(h,w)),h=r,w.multi.push(r)}this.records.set(h,_)}hydrate(r,o){return o.value===fh&&(o.value=Lp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Bp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=bt(r.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function ph(n){const r=ut(n),o=null!==r?r.factory:bi(n);if(null!==o)return o;if(n instanceof po)throw new un(204,!1);if(n instanceof Function)return function Nm(n){const r=n.length;if(r>0)throw _o(r,"?"),new un(204,!1);const o=function Mt(n){const r=n&&(n[ir]||n[Yr]);if(r){const o=function Xt(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new un(204,!1)}function gf(n,r,o){let a;if(Nd(n)){const h=bt(n);return bi(h)||ph(h)}if(Om(n))a=()=>bt(n.useValue);else if(function Fm(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Yt(n.deps||[]));else if(function km(n){return!(!n||!n.useExisting)}(n))a=()=>de(bt(n.useExisting));else{const h=bt(n&&(n.useClass||n.provide));if(!function F_(n){return!!n.deps}(n))return bi(h)||ph(h);a=()=>new h(...Yt(n.deps))}return a}function Pd(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Om(n){return null!==n&&"object"==typeof n&&Ul in n}function Nd(n){return"function"==typeof n}let Ol=(()=>{class n{static create(o,a){var h;if(Array.isArray(o))return Pm({name:""},a,o,"");{const _=null!==(h=o.name)&&void 0!==h?h:"";return Pm({name:_},o.parent,o.providers,_)}}}return n.THROW_IF_NOT_FOUND=uo,n.NULL=new hu,n.\u0275prov=kt({token:n,providedIn:"any",factory:()=>de(hh)}),n.__NG_ELEMENT_ID__=-1,n})();function $m(n,r){hn(il(n)[1],K())}function Yp(n){let r=function Zp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const a=[n];for(;r;){let h;if(bs(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new un(903,"");h=r.\u0275dir}if(h){if(o){a.push(h);const w=n;w.inputs=Qp(n.inputs),w.declaredInputs=Qp(n.declaredInputs),w.outputs=Qp(n.outputs);const N=h.hostBindings;N&&Jp(n,N);const L=h.viewQuery,ie=h.contentQueries;if(L&&$_(n,L),ie&&Xp(n,ie),dt(n.inputs,h.inputs),dt(n.declaredInputs,h.declaredInputs),dt(n.outputs,h.outputs),bs(h)&&h.data.animation){const pe=n.data;pe.animation=(pe.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let w=0;w<_.length;w++){const N=_[w];N&&N.ngInherit&&N(n),N===Yp&&(o=!1)}}r=Object.getPrototypeOf(r)}!function B_(n){let r=0,o=null;for(let a=n.length-1;a>=0;a--){const h=n[a];h.hostVars=r+=h.hostVars,h.hostAttrs=fn(h.hostAttrs,o=fn(o,h.hostAttrs))}}(a)}function Qp(n){return n===gi?{}:n===Bn?[]:n}function $_(n,r){const o=n.viewQuery;n.viewQuery=o?(a,h)=>{r(a,h),o(a,h)}:r}function Xp(n,r){const o=n.contentQueries;n.contentQueries=o?(a,h,_)=>{r(a,h,_),o(a,h,_)}:r}function Jp(n,r){const o=n.hostBindings;n.hostBindings=o?(a,h)=>{r(a,h),o(a,h)}:r}let Ef=null;function dc(){if(!Ef){const n=Fr.Symbol;if(n&&n.iterator)Ef=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const a=r[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Ef=a)}}}return Ef}function Zc(n){return!!yh(n)&&(Array.isArray(n)||!(n instanceof Map)&&dc()in n)}function yh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function fu(n,r,o){return n[r]=o}function La(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Lu(n,r,o,a){const h=La(n,r,o);return La(n,r+1,a)||h}function _h(n,r,o,a){const h=Ye();return La(h,l(),r)&&(xn(),Cl(gn(),h,n,r,o,a)),_h}function rg(n,r,o,a,h,_,w,N){const L=Ye(),ie=xn(),pe=n+20,Fe=ie.firstCreatePass?function ng(n,r,o,a,h,_,w,N,L){const ie=r.consts,pe=Id(r,n,4,w||null,Si(ie,N));lc(r,o,pe,Si(ie,L)),hn(r,pe);const Fe=pe.tViews=ah(2,pe,a,h,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,ie);return null!==r.queries&&(r.queries.template(r,pe),Fe.queries=r.queries.embeddedTView(pe)),pe}(pe,ie,L,r,o,a,h,_,w):ie.data[pe];rt(Fe,!1);const mt=L[11].createComment("");Uh(ie,L,mt,Fe),ua(mt,L),uh(L,L[pe]=af(mt,L,mt,Fe)),ms(Fe)&&bp(ie,L,Fe),null!=w&&Dd(L,Fe,N)}function sg(n){return Xr(function Kn(){return Kr.lFrame.contextLView}(),20+n)}function Vd(n,r=er.Default){const o=Ye();return null===o?de(n,r):Be(K(),o,bt(n),r)}function Mf(){throw new Error("invalid")}function Ch(n,r,o){const a=Ye();return La(a,l(),r)&&ll(xn(),gn(),a,n,r,a[11],o,!1),Ch}function bh(n,r,o,a,h){const w=h?"class":"style";cf(n,o,r.inputs[w],w,a)}function Ud(n,r,o,a){const h=Ye(),_=xn(),w=20+n,N=h[11],L=h[w]=x(N,r,function Jt(){return Kr.lFrame.currentNamespace}()),ie=_.firstCreatePass?function Rf(n,r,o,a,h,_,w){const N=r.consts,ie=Id(r,n,2,h,Si(N,_));return lc(r,o,ie,Si(N,w)),null!==ie.attrs&&uc(ie,ie.attrs,!1),null!==ie.mergedAttrs&&uc(ie,ie.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,ie),ie}(w,_,h,0,r,o,a):_.data[w];rt(ie,!0);const pe=ie.mergedAttrs;null!==pe&&Ve(N,L,pe);const Fe=ie.classes;null!==Fe&&uu(N,L,Fe);const mt=ie.styles;return null!==mt&&jh(N,L,mt),64!=(64&ie.flags)&&Uh(_,h,L,ie),0===function To(){return Kr.lFrame.elementDepthCount}()&&ua(L,h),function ws(){Kr.lFrame.elementDepthCount++}(),ms(ie)&&(bp(_,h,ie),Cp(_,ie,h)),null!==a&&Dd(h,ie),Ud}function Th(){let n=K();Zt()?An():(n=n.parent,rt(n,!1));const r=n;!function Q(){Kr.lFrame.elementDepthCount--}();const o=xn();return o.firstCreatePass&&(hn(o,n),Ir(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function T(n){return 0!=(16&n.flags)}(r)&&bh(o,r,Ye(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function F(n){return 0!=(32&n.flags)}(r)&&bh(o,r,Ye(),r.stylesWithoutHost,!1),Th}function Bd(n,r,o,a){return Ud(n,r,o,a),Th(),Bd}function wh(n,r,o){const a=Ye(),h=xn(),_=n+20,w=h.firstCreatePass?function gg(n,r,o,a,h){const _=r.consts,w=Si(_,a),N=Id(r,n,8,"ng-container",w);return null!==w&&uc(N,w,!0),lc(r,o,N,Si(_,h)),null!==r.queries&&r.queries.elementStart(r,N),N}(_,h,a,r,o):h.data[_];rt(w,!0);const N=a[_]=a[11].createComment("");return Uh(h,a,N,w),ua(N,a),ms(w)&&(bp(h,a,w),Cp(h,w,a)),null!=o&&Dd(a,w),wh}function Vu(){let n=K();const r=xn();return Zt()?An():(n=n.parent,rt(n,!1)),r.firstCreatePass&&(hn(r,n),Ir(n)&&r.queries.elementEnd(n)),Vu}function uy(){return Ye()}function mg(n){return!!n&&"function"==typeof n.then}function cy(n){return!!n&&"function"==typeof n.subscribe}const yg=cy;function _g(n,r,o,a){const h=Ye(),_=xn(),w=K();return function dy(n,r,o,a,h,_,w,N){const L=ms(a),pe=n.firstCreatePass&&Md(n),Fe=r[8],mt=xm(r);let jt=!0;if(3&a.type||N){const Ar=wn(a,r),si=N?N(Ar):Ar,jn=mt.length,Ai=N?Ls=>N(W(Ls[a.index])):a.index;if(Ti(o)){let Ls=null;if(!N&&L&&(Ls=function Q_(n,r,o,a){const h=n.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const w=h[_];if(w===o&&h[_+1]===a){const N=r[7],L=h[_+2];return N.length>L?N[L]:null}"string"==typeof w&&(_+=2)}return null}(n,r,h,a.index)),null!==Ls)(Ls.__ngLastListenerFn__||Ls).__ngNextListenerFn__=_,Ls.__ngLastListenerFn__=_,jt=!1;else{_=Eg(a,r,Fe,_,!1);const bo=o.listen(si,h,_);mt.push(_,bo),pe&&pe.push(h,Ai,jn,jn+1)}}else _=Eg(a,r,Fe,_,!0),si.addEventListener(h,_,w),mt.push(_),pe&&pe.push(h,Ai,jn,w)}else _=Eg(a,r,Fe,_,!1);const Pn=a.outputs;let gr;if(jt&&null!==Pn&&(gr=Pn[h])){const Ar=gr.length;if(Ar)for(let si=0;si<Ar;si+=2){const Ql=r[gr[si]][gr[si+1]].subscribe(_),kh=mt.length;mt.push(_,Ql),pe&&pe.push(h,a.index,kh,-(kh+1))}}}(_,h,h[11],w,n,r,!!o,a),_g}function hy(n,r,o,a){try{return!1!==o(a)}catch(h){return qc(n,h),!1}}function Eg(n,r,o,a,h){return function _(w){if(w===Function)return a;const N=2&n.flags?ni(n.index,r):r;0==(32&r[2])&&xd(N);let L=hy(r,0,a,w),ie=_.__ngNextListenerFn__;for(;ie;)L=hy(r,0,ie,w)&&L,ie=ie.__ngNextListenerFn__;return h&&!1===L&&(w.preventDefault(),w.returnValue=!1),L}}function Nf(n=1){return function et(n){return(Kr.lFrame.contextLView=function yt(n,r){for(;n>0;)r=r[15],n--;return r}(n,Kr.lFrame.contextLView))[8]}(n)}function X_(n,r){let o=null;const a=function lp(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(0==(1&o))return r[o+1]}return null}(n);for(let h=0;h<r.length;h++){const _=r[h];if("*"!==_){if(null===a?Gh(n,_,!0):m_(a,_))return h}else o=h}return o}function fy(n){const r=Ye()[16][6];if(!r.projection){const a=r.projection=_o(n?n.length:1,null),h=a.slice();let _=r.child;for(;null!==_;){const w=n?X_(_,n):0;null!==w&&(h[w]?h[w].projectionNext=_:a[w]=_,h[w]=_),_=_.next}}}function Do(n,r=0,o){const a=Ye(),h=xn(),_=Id(h,20+n,16,null,o||null);null===_.projection&&(_.projection=r),An(),64!=(64&_.flags)&&function rp(n,r,o){ma(r[11],0,r,o,Fu(n,o,r),tm(o.parent||r[6],o,r))}(h,a,_)}function Ey(n,r,o,a,h){const _=n[o+1],w=null===r;let N=a?ql(_):du(_),L=!1;for(;0!==N&&(!1===L||w);){const pe=n[N+1];Cy(n[N],r)&&(L=!0,n[N+1]=a?fp(pe):cu(pe)),N=a?ql(pe):du(pe)}L&&(n[o+1]=a?cu(_):fp(_))}function Cy(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&$a(n,r)>=0}const Eo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pu(n){return n.substring(Eo.key,Eo.keyEnd)}function P0(n){return n.substring(Eo.value,Eo.valueEnd)}function Ih(n,r){const o=Eo.textEnd;return o===r?-1:(r=Eo.keyEnd=function Of(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,Eo.key=r,o),ed(n,r,o))}function by(n,r){const o=Eo.textEnd;let a=Eo.key=ed(n,r,o);return o===a?-1:(a=Eo.keyEnd=function nv(n,r,o){let a;for(;r<o&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,o),a=mc(n,a,o),a=Eo.value=ed(n,a,o),a=Eo.valueEnd=function kf(n,r,o){let a=-1,h=-1,_=-1,w=r,N=w;for(;w<o;){const L=n.charCodeAt(w++);if(59===L)return N;34===L||39===L?N=w=$d(n,L,w,o):r===w-4&&85===_&&82===h&&76===a&&40===L?N=w=$d(n,41,w,o):L>32&&(N=w),_=h,h=a,a=-33&L}return N}(n,a,o),mc(n,a,o))}function Tg(n){Eo.key=0,Eo.keyEnd=0,Eo.value=0,Eo.valueEnd=0,Eo.textEnd=n.length}function ed(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function mc(n,r,o,a){return(r=ed(n,r,o))<o&&r++,r}function $d(n,r,o,a){let h=-1,_=o;for(;_<a;){const w=n.charCodeAt(_++);if(w==r&&92!==h)return _;h=92==w&&92===h?0:w}throw new Error}function Sh(n,r,o){return Fl(n,r,o,!1),Sh}function wg(n,r){return Fl(n,r,null,!0),wg}function Zl(n){Ma(Ty,iv,n,!1)}function iv(n,r){for(let o=function tv(n){return Tg(n),by(n,ed(n,0,Eo.textEnd))}(r);o>=0;o=by(r,o))Ty(n,pu(r),P0(r))}function Ff(n){Ma(vo,kl,n,!0)}function kl(n,r){for(let o=function Jc(n){return Tg(n),Ih(n,ed(n,0,Eo.textEnd))}(r);o>=0;o=Ih(r,o))vo(n,pu(r),!0)}function Fl(n,r,o,a){const h=Ye(),_=xn(),w=A(2);_.firstUpdatePass&&Sg(_,n,w,a),r!==Ui&&La(h,w,r)&&xg(_,_.data[vn()],h,h[11],n,h[w+1]=function _c(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=qe(_a(n)))),n}(r,o),a,w)}function Ma(n,r,o,a){const h=xn(),_=A(2);h.firstUpdatePass&&Sg(h,null,_,a);const w=Ye();if(o!==Ui&&La(w,_,o)){const N=h.data[vn()];if(Gd(N,a)&&!Ig(h,_)){let L=a?N.classesWithoutHost:N.stylesWithoutHost;null!==L&&(o=at(L,o||"")),bh(h,N,w,o,a)}else!function Vf(n,r,o,a,h,_,w,N){h===Ui&&(h=Bn);let L=0,ie=0,pe=0<h.length?h[0]:null,Fe=0<_.length?_[0]:null;for(;null!==pe||null!==Fe;){const mt=L<h.length?h[L+1]:void 0,jt=ie<_.length?_[ie+1]:void 0;let gr,Pn=null;pe===Fe?(L+=2,ie+=2,mt!==jt&&(Pn=Fe,gr=jt)):null===Fe||null!==pe&&pe<Fe?(L+=2,Pn=pe):(ie+=2,Pn=Fe,gr=jt),null!==Pn&&xg(n,r,o,a,Pn,gr,w,N),pe=L<h.length?h[L]:null,Fe=ie<_.length?_[ie]:null}}(h,N,w,w[11],w[_+1],w[_+1]=function Dh(n,r,o){if(null==o||""===o)return Bn;const a=[],h=_a(o);if(Array.isArray(h))for(let _=0;_<h.length;_++)n(a,h[_],!0);else if("object"==typeof h)for(const _ in h)h.hasOwnProperty(_)&&n(a,_,h[_]);else"string"==typeof h&&r(a,h);return a}(n,r,o),a,_)}}function Ig(n,r){return r>=n.expandoStartIndex}function Sg(n,r,o,a){const h=n.data;if(null===h[o+1]){const _=h[vn()],w=Ig(n,o);Gd(_,a)&&null===r&&!w&&(r=!1),r=function Dg(n,r,o,a){const h=be(n);let _=a?r.residualClasses:r.residualStyles;if(null===h)0===(a?r.classBindings:r.styleBindings)&&(o=Hd(o=jd(null,n,r,o,a),r.attrs,a),_=null);else{const w=r.directiveStylingLast;if(-1===w||n[w]!==h)if(o=jd(h,n,r,o,a),null===_){let L=function Ag(n,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==du(a))return n[ql(a)]}(n,r,a);void 0!==L&&Array.isArray(L)&&(L=jd(null,n,r,L[1],a),L=Hd(L,r.attrs,a),function sv(n,r,o,a){n[ql(o?r.classBindings:r.styleBindings)]=a}(n,r,a,L))}else _=function Lf(n,r,o){let a;const h=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<h;_++)a=Hd(a,n[_].hostAttrs,o);return Hd(a,r.attrs,o)}(n,r,a)}return void 0!==_&&(a?r.residualClasses=_:r.residualStyles=_),o}(h,_,r,a),function R0(n,r,o,a,h,_){let w=_?r.classBindings:r.styleBindings,N=ql(w),L=du(w);n[a]=o;let pe,ie=!1;if(Array.isArray(o)){const Fe=o;pe=Fe[1],(null===pe||$a(Fe,pe)>0)&&(ie=!0)}else pe=o;if(h)if(0!==L){const mt=ql(n[N+1]);n[a+1]=Wh(mt,N),0!==mt&&(n[mt+1]=dp(n[mt+1],a)),n[N+1]=function $c(n,r){return 131071&n|r<<17}(n[N+1],a)}else n[a+1]=Wh(N,0),0!==N&&(n[N+1]=dp(n[N+1],a)),N=a;else n[a+1]=Wh(L,0),0===N?N=a:n[L+1]=dp(n[L+1],a),L=a;ie&&(n[a+1]=cu(n[a+1])),Ey(n,pe,a,!0),Ey(n,pe,a,!1),function ev(n,r,o,a,h){const _=h?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&$a(_,r)>=0&&(o[a+1]=fp(o[a+1]))}(r,pe,n,a,_),w=Wh(N,L),_?r.classBindings=w:r.styleBindings=w}(h,_,r,o,w,a)}}function jd(n,r,o,a,h){let _=null;const w=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<w&&(_=r[N],a=Hd(a,_.hostAttrs,h),_!==n);)N++;return null!==n&&(o.directiveStylingLast=N),a}function Hd(n,r,o){const a=o?1:2;let h=-1;if(null!==r)for(let _=0;_<r.length;_++){const w=r[_];"number"==typeof w?h=w:h===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),vo(n,w,!!o||r[++_]))}return void 0===n?null:n}function Ty(n,r,o){vo(n,r,_a(o))}function xg(n,r,o,a,h,_,w,N){if(!(3&r.type))return;const L=n.data,ie=L[N+1];yc(function hp(n){return 1==(1&n)}(ie)?Uf(L,r,o,h,du(ie),w):void 0)||(yc(_)||function _d(n){return 2==(2&n)}(ie)&&(_=Uf(L,null,o,h,N,w)),function sp(n,r,o,a,h){const _=Ti(n);if(r)h?_?n.addClass(o,a):o.classList.add(a):_?n.removeClass(o,a):o.classList.remove(a);else{let w=-1===a.indexOf("-")?void 0:p.DashCase;if(null==h)_?n.removeStyle(o,a,w):o.style.removeProperty(a);else{const N="string"==typeof h&&h.endsWith("!important");N&&(h=h.slice(0,-10),w|=p.Important),_?n.setStyle(o,a,h,w):o.style.setProperty(a,h,N?"important":"")}}}(a,w,rn(vn(),o),h,_))}function Uf(n,r,o,a,h,_){const w=null===r;let N;for(;h>0;){const L=n[h],ie=Array.isArray(L),pe=ie?L[1]:L,Fe=null===pe;let mt=o[h+1];mt===Ui&&(mt=Fe?Bn:void 0);let jt=Fe?Ja(mt,a):pe===a?mt:void 0;if(ie&&!yc(jt)&&(jt=Ja(L,a)),yc(jt)&&(N=jt,w))return N;const Pn=n[h+1];h=w?ql(Pn):du(Pn)}if(null!==r){let L=_?r.residualClasses:r.residualStyles;null!=L&&(N=Ja(L,a))}return N}function yc(n){return void 0!==n}function Gd(n,r){return 0!=(n.flags&(r?16:32))}function wy(n,r=""){const o=Ye(),a=xn(),h=n+20,_=a.firstCreatePass?Id(a,h,1,r,null):a.data[h],w=o[h]=function c(n,r){return Ti(n)?n.createText(r):n.createTextNode(r)}(o[11],r);Uh(a,o,w,_),rt(_,!1)}function vc(n){return Mg("",n,""),vc}function Mg(n,r,o){const a=Ye(),h=function Kl(n,r,o,a){return La(n,l(),o)?r+Ot(o)+a:Ui}(a,n,r,o);return h!==Ui&&Nl(a,vn(),h),Mg}function kg(n,r,o){const a=Ye();if(La(a,l(),r)){const _=xn(),w=gn();ll(_,w,a,n,r,function uf(n,r,o){return(null===n||bs(n))&&(o=function ve(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(o[r.index])),o[11]}(be(_.data),w,a),o,!0)}return kg}const nd=void 0;var hv=["en",[["a","p"],["AM","PM"],nd],[["AM","PM"],nd,nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nd,"{1} 'at' {0}",nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $y(n){const o=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let Yl={};function Hy(n){const r=function fv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Fg(r);if(o)return o;const a=r.split("-")[0];if(o=Fg(a),o)return o;if("en"===a)return hv;throw new Error(`Missing locale data for the locale "${n}".`)}function Gy(n){return Hy(n)[Ri.PluralCase]}function Fg(n){return n in Yl||(Yl[n]=Fr.ng&&Fr.ng.common&&Fr.ng.common.locales&&Fr.ng.common.locales[n]),Yl[n]}var Ri=(()=>((Ri=Ri||{})[Ri.LocaleId=0]="LocaleId",Ri[Ri.DayPeriodsFormat=1]="DayPeriodsFormat",Ri[Ri.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ri[Ri.DaysFormat=3]="DaysFormat",Ri[Ri.DaysStandalone=4]="DaysStandalone",Ri[Ri.MonthsFormat=5]="MonthsFormat",Ri[Ri.MonthsStandalone=6]="MonthsStandalone",Ri[Ri.Eras=7]="Eras",Ri[Ri.FirstDayOfWeek=8]="FirstDayOfWeek",Ri[Ri.WeekendRange=9]="WeekendRange",Ri[Ri.DateFormat=10]="DateFormat",Ri[Ri.TimeFormat=11]="TimeFormat",Ri[Ri.DateTimeFormat=12]="DateTimeFormat",Ri[Ri.NumberSymbols=13]="NumberSymbols",Ri[Ri.NumberFormats=14]="NumberFormats",Ri[Ri.CurrencyCode=15]="CurrencyCode",Ri[Ri.CurrencySymbol=16]="CurrencySymbol",Ri[Ri.CurrencyName=17]="CurrencyName",Ri[Ri.Currencies=18]="Currencies",Ri[Ri.Directionality=19]="Directionality",Ri[Ri.PluralCase=20]="PluralCase",Ri[Ri.ExtraData=21]="ExtraData",Ri))();const Hf="en-US";let zy=Hf;function Dv(n,r,o,a,h){if(n=bt(n),Array.isArray(n))for(let _=0;_<n.length;_++)Dv(n[_],r,o,a,h);else{const _=xn(),w=Ye();let N=Nd(n)?n:bt(n.provide),L=gf(n);const ie=K(),pe=1048575&ie.providerIndexes,Fe=ie.directiveStart,mt=ie.providerIndexes>>20;if(Nd(n)||!n.multi){const jt=new Di(L,h,Vd),Pn=xv(N,r,h?pe:pe+mt,Fe);-1===Pn?(S(ao(ie,w),_,N),Av(_,n,r.length),r.push(N),ie.directiveStart++,ie.directiveEnd++,h&&(ie.providerIndexes+=1048576),o.push(jt),w.push(jt)):(o[Pn]=jt,w[Pn]=jt)}else{const jt=xv(N,r,pe+mt,Fe),Pn=xv(N,r,pe,pe+mt),gr=jt>=0&&o[jt],Ar=Pn>=0&&o[Pn];if(h&&!Ar||!h&&!gr){S(ao(ie,w),_,N);const si=function yC(n,r,o,a,h){const _=new Di(n,o,Vd);return _.multi=[],_.index=r,_.componentProviders=0,L0(_,h,a&&!o),_}(h?mC:gC,o.length,h,a,L);!h&&Ar&&(o[Pn].providerFactory=si),Av(_,n,r.length,0),r.push(N),ie.directiveStart++,ie.directiveEnd++,h&&(ie.providerIndexes+=1048576),o.push(si),w.push(si)}else Av(_,n,jt>-1?jt:Pn,L0(o[h?Pn:jt],L,!h&&a));!h&&a&&Ar&&o[Pn].componentProviders++}}}function Av(n,r,o,a){const h=Nd(r),_=function Up(n){return!!n.useClass}(r);if(h||_){const L=(_?bt(r.useClass):r).prototype.ngOnDestroy;if(L){const ie=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const pe=ie.indexOf(o);-1===pe?ie.push(o,[a,L]):ie[pe+1].push(a,L)}else ie.push(o,L)}}}function L0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function xv(n,r,o,a){for(let h=o;h<a;h++)if(r[h]===n)return h;return-1}function gC(n,r,o,a){return Mv(this.multi,[])}function mC(n,r,o,a){const h=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,N=Zn(o,o[1],this.providerFactory.index,a);_=N.slice(0,w),Mv(h,_);for(let L=w;L<N.length;L++)_.push(N[L])}else _=[],Mv(h,_);return _}function Mv(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function V0(n,r=[]){return o=>{o.providersResolver=(a,h)=>function pC(n,r,o){const a=xn();if(a.firstCreatePass){const h=bs(n);Dv(o,a.data,a.blueprint,h,!0),Dv(r,a.data,a.blueprint,h,!1)}}(a,h?h(n):n,r)}}class U0{}class EC{resolveComponentFactory(r){throw function vC(n){const r=Error(`No component factory found for ${qe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let s_=(()=>{class n{}return n.NULL=new EC,n})();function CC(){return Zf(K(),Ye())}function Zf(n,r){return new Kg(wn(n,r))}let Kg=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=CC,n})();function bC(n){return n instanceof Kg?n.nativeElement:n}class $0{}let TC=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function IC(){const n=Ye(),o=ni(K().index,n);return function wC(n){return n[11]}(fs(o)?o:n)}(),n})(),SC=(()=>{class n{}return n.\u0275prov=kt({token:n,providedIn:"root",factory:()=>null}),n})();class j0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const H0=new j0("13.3.11"),Rv={};function o_(n,r,o,a,h=!1){for(;null!==o;){const _=r[o.index];if(null!==_&&a.push(W(_)),ui(_))for(let N=10;N<_.length;N++){const L=_[N],ie=L[1].firstChild;null!==ie&&o_(L[1],L,ie,a)}const w=o.type;if(8&w)o_(n,r,o.child,a);else if(32&w){const N=D(o,r);let L;for(;L=N();)a.push(L)}else if(16&w){const N=ep(r,o);if(Array.isArray(N))a.push(...N);else{const L=Tt(r[16]);o_(L[1],L,N,a,!0)}}o=h?o.projectionNext:o.next}return a}class Zg{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return o_(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ui(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(Rn(r,a),yu(o,a))}this._attachedToViewContainer=!1}Cr(this._lView[1],this._lView)}onDestroy(r){ef(this._lView[1],this._lView,null,r)}markForCheck(){xd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function lf(n,r,o){const a=r[10];a.begin&&a.begin();try{Sd(n,r,n.template,o)}catch(h){throw qc(r,h),h}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new un(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function we(n,r){Xd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new un(902,"");this._appRef=r}}class DC extends Zg{constructor(r){super(r),this._view=r}detectChanges(){Dm(this._view)}checkNoChanges(){}get context(){return null}}class G0 extends s_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=gt(r);return new Pv(o,this.ngModule)}}function z0(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Pv extends U0{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function zh(n){return n.map(lm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return z0(this.componentDef.inputs)}get outputs(){return z0(this.componentDef.outputs)}create(r,o,a,h){const _=(h=h||this.ngModule)?function xC(n,r){return{get:(o,a,h)=>{const _=n.get(o,Rv,h);return _!==Rv||a===Rv?_:r.get(o,a,h)}}}(r,h.injector):r,w=_.get($0,B),N=_.get(SC,null),L=w.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",pe=a?function lh(n,r,o){if(Ti(n))return n.selectRootElement(r,o===nn.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(L,a,this.componentDef.encapsulation):x(w.createRenderer(null,this.componentDef),ie,function AC(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ie)),Fe=this.componentDef.onPush?576:528,mt=function Kp(n,r){return{components:[],scheduler:n||ol,clean:k_,playerHandler:r||null,flags:0}}(),jt=ah(0,null,null,1,0,null,null,null,null,null),Pn=ih(null,jt,mt,Fe,null,null,w,L,N,_);let gr,Ar;Te(Pn);try{const si=function qp(n,r,o,a,h,_){const w=o[1];o[20]=n;const L=Id(w,20,2,"#host",null),ie=L.mergedAttrs=r.hostAttrs;null!==ie&&(uc(L,ie,!0),null!==n&&(Ve(h,n,ie),null!==L.classes&&uu(h,n,L.classes),null!==L.styles&&jh(h,n,L.styles)));const pe=a.createRenderer(n,r),Fe=ih(o,Em(r),null,r.onPush?64:16,o[20],L,a,pe,_||null,null);return w.firstCreatePass&&(S(ao(L,o),w,r.type),rf(w,L),Mp(L,o.length,1)),uh(o,Fe),o[20]=Fe}(pe,this.componentDef,Pn,w,L);if(pe)if(a)Ve(L,pe,["ng-version",H0.full]);else{const{attrs:jn,classes:Ai}=function Jd(n){const r=[],o=[];let a=1,h=2;for(;a<n.length;){let _=n[a];if("string"==typeof _)2===h?""!==_&&r.push(_,n[++a]):8===h&&o.push(_);else{if(!Ka(h))break;h=_}a++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);jn&&Ve(L,pe,jn),Ai&&Ai.length>0&&uu(L,pe,Ai.join(" "))}if(Ar=Gr(jt,20),void 0!==o){const jn=Ar.projection=[];for(let Ai=0;Ai<this.ngContentSelectors.length;Ai++){const Ls=o[Ai];jn.push(null!=Ls?Array.from(Ls):null)}}gr=function Bm(n,r,o,a,h){const _=o[1],w=function Ad(n,r,o){const a=K();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Rp(n,a,r,Bo(n,r,1,null),o));const h=Zn(r,n,a.directiveStart,a);ua(h,r);const _=wn(a,r);return _&&ua(_,r),h}(_,o,r);if(a.components.push(w),n[8]=w,h&&h.forEach(L=>L(w,r)),r.contentQueries){const L=K();r.contentQueries(1,w,L.directiveStart)}const N=K();return!_.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Dn(N.index),tf(o[1],N,0,N.directiveStart,N.directiveEnd,r),Ap(r,w)),w}(si,this.componentDef,Pn,mt,[$m]),oh(jt,Pn,null)}finally{_t()}return new RC(this.componentType,gr,Zf(Ar,Pn),Pn,Ar)}}class RC extends class _C{}{constructor(r,o,a,h,_){super(),this.location=a,this._rootLView=h,this._tNode=_,this.instance=o,this.hostView=this.changeDetectorRef=new DC(h),this.componentType=r}get injector(){return new $r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Yf{}class W0{}const Qf=new Map;class Z0 extends Yf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new G0(this);const a=Yn(r);this._bootstrapComponents=qa(a.bootstrap),this._r3Injector=ff(r,o,[{provide:Yf,useValue:this},{provide:s_,useValue:this.componentFactoryResolver}],qe(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,o=Ol.THROW_IF_NOT_FOUND,a=er.Default){return r===Ol||r===Yf||r===hh?this:this._r3Injector.get(r,o,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Nv extends W0{constructor(r){super(),this.moduleType=r,null!==Yn(r)&&function NC(n){const r=new Set;!function o(a){const h=Yn(a,!0),_=h.id;null!==_&&(function q0(n,r,o){if(r&&r!==o)throw new Error(`Duplicate module registered for ${n} - ${qe(r)} vs ${qe(r.name)}`)}(_,Qf.get(_),a),Qf.set(_,a));const w=qa(h.imports);for(const N of w)r.has(N)||(r.add(N),o(N))}(n)}(r)}create(r){return new Z0(this.moduleType,r)}}function Y0(n,r,o,a){return eE(Ye(),hi(),n,r,o,a)}function Q0(n,r,o,a,h){return function tE(n,r,o,a,h,_,w){const N=r+o;return Lu(n,N,h,_)?fu(n,N+2,w?a.call(w,h,_):a(h,_)):Yg(n,N+2)}(Ye(),hi(),n,r,o,a,h)}function X0(n,r,o,a,h,_){return function nE(n,r,o,a,h,_,w,N){const L=r+o;return function Cf(n,r,o,a,h){const _=Lu(n,r,o,a);return La(n,r+2,h)||_}(n,L,h,_,w)?fu(n,L+3,N?a.call(N,h,_,w):a(h,_,w)):Yg(n,L+3)}(Ye(),hi(),n,r,o,a,h,_)}function J0(n,r,o,a,h,_,w){return function rE(n,r,o,a,h,_,w,N,L){const ie=r+o;return function ul(n,r,o,a,h,_){const w=Lu(n,r,o,a);return Lu(n,r+2,h,_)||w}(n,ie,h,_,w,N)?fu(n,ie+4,L?a.call(L,h,_,w,N):a(h,_,w,N)):Yg(n,ie+4)}(Ye(),hi(),n,r,o,a,h,_,w)}function Yg(n,r){const o=n[r];return o===Ui?void 0:o}function eE(n,r,o,a,h,_){const w=r+o;return La(n,w,h)?fu(n,w+1,_?a.call(_,h):a(h)):Yg(n,w+1)}function sE(n,r){const o=xn();let a;const h=n+20;o.firstCreatePass?(a=function BC(n,r){if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];if(n===a.name)return a}}(r,o.pipeRegistry),o.data[h]=a,a.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,a.onDestroy)):a=o.data[h];const _=a.factory||(a.factory=bi(a.type)),w=Mr(Vd);try{const N=Jn(!1),L=_();return Jn(N),function ig(n,r,o,a){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=a}(o,Ye(),h,L),L}finally{Mr(w)}}function oE(n,r,o){const a=n+20,h=Ye(),_=Xr(h,a);return function Qg(n,r){return n[1].data[r].pure}(h,a)?eE(h,hi(),r,_.transform,o,_):_.transform(o)}function Ov(n){return r=>{setTimeout(n,void 0,r)}}const Tc=class zC extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){var h,_,w;let N=r,L=o||(()=>null),ie=a;if(r&&"object"==typeof r){const Fe=r;N=null===(h=Fe.next)||void 0===h?void 0:h.bind(Fe),L=null===(_=Fe.error)||void 0===_?void 0:_.bind(Fe),ie=null===(w=Fe.complete)||void 0===w?void 0:w.bind(Fe)}this.__isAsync&&(L=Ov(L),N&&(N=Ov(N)),ie&&(ie=Ov(ie)));const pe=super.subscribe({next:N,error:L,complete:ie});return r instanceof k.w0&&r.add(pe),pe}};function WC(){return this._results[dc()]()}class kv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=dc(),a=kv.prototype;a[o]||(a[o]=WC)}get changes(){return this._changes||(this._changes=new Tc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const h=xo(r);(this._changesDetected=!function la(n,r,o){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let h=n[a],_=r[a];if(o&&(h=o(h),_=o(_)),_!==h)return!1}return!0}(a._results,h,o))&&(a._results=h,a.length=h.length,a.last=h[this.length-1],a.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xg=(()=>{class n{}return n.__NG_ELEMENT_ID__=ZC,n})();const qC=Xg,KC=class extends qC{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(r){const o=this._declarationTContainer.tViews,a=ih(this._declarationLView,o,r,16,null,o.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(a[19]=_.createEmbeddedView(o)),oh(o,a,r),new Zg(a)}};function ZC(){return a_(K(),Ye())}function a_(n,r){return 4&n.type?new KC(r,n,Zf(n,r)):null}let l_=(()=>{class n{}return n.__NG_ELEMENT_ID__=YC,n})();function YC(){return uE(K(),Ye())}const QC=l_,aE=class extends QC{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return Zf(this._hostTNode,this._hostLView)}get injector(){return new $r(this._hostTNode,this._hostLView)}get parentInjector(){const r=M(this._hostTNode,this._hostLView);if($t(r)){const o=Ur(r,this._hostLView),a=yr(r);return new $r(o[1].data[a+8],o)}return new $r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=lE(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,a){const h=r.createEmbeddedView(o||{});return this.insert(h,a),h}createComponent(r,o,a,h,_){const w=r&&!function aa(n){return"function"==typeof n}(r);let N;if(w)N=o;else{const Fe=o||{};N=Fe.index,a=Fe.injector,h=Fe.projectableNodes,_=Fe.ngModuleRef}const L=w?r:new Pv(gt(r)),ie=a||this.parentInjector;if(!_&&null==L.ngModule){const mt=(w?ie:this.parentInjector).get(Yf,null);mt&&(_=mt)}const pe=L.create(ie,h,void 0,_);return this.insert(pe.hostView,N),pe}insert(r,o){const a=r._lView,h=a[1];if(function Ni(n){return ui(n[3])}(a)){const pe=this.indexOf(r);if(-1!==pe)this.detach(pe);else{const Fe=a[3],mt=new aE(Fe,Fe[6],Fe[3]);mt.detach(mt.indexOf(r))}}const _=this._adjustIndex(o),w=this._lContainer;!function lt(n,r,o,a){const h=10+a,_=o.length;a>0&&(o[h-1][4]=r),a<_-10?(r[4]=o[h],Jl(o,10+a,r)):(o.push(r),r[4]=null),r[3]=o;const w=r[17];null!==w&&o!==w&&function an(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(w,r);const N=r[19];null!==N&&N.insertView(n),r[2]|=128}(h,a,w,_);const N=tp(_,w),L=a[11],ie=Vh(L,w[7]);return null!==ie&&function te(n,r,o,a,h,_){a[0]=h,a[6]=r,Xd(n,a,o,1,h,_)}(h,w[6],L,a,ie,N),r.attachToViewContainerRef(),Jl(Fv(w),_,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=lE(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=Rn(this._lContainer,o);a&&(yu(Fv(this._lContainer),o),Cr(a[1],a))}detach(r){const o=this._adjustIndex(r,-1),a=Rn(this._lContainer,o);return a&&null!=yu(Fv(this._lContainer),o)?new Zg(a):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function lE(n){return n[8]}function Fv(n){return n[8]||(n[8]=[])}function uE(n,r){let o;const a=r[n.index];if(ui(a))o=a;else{let h;if(8&n.type)h=W(a);else{const _=r[11];h=_.createComment("");const w=wn(n,r);Wl(_,Vh(_,w),h,function g_(n,r){return Ti(n)?n.nextSibling(r):r.nextSibling}(_,w),!1)}r[n.index]=o=af(a,r,h,n),uh(r,o)}return new aE(o,n,r)}class Lv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Lv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,h=[];for(let _=0;_<a;_++){const w=o.getByIndex(_);h.push(this.queries[w.indexInDeclarationView].clone())}return new Vv(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==_E(r,o).matches&&this.queries[o].setDirty()}}class cE{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class Uv{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const h=null!==o?o.length:0,_=this.getByIndex(a).embeddedTView(r,h);_&&(_.indexInDeclarationView=a,null!==o?o.push(_):o=[_])}return null!==o?new Uv(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Bv{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new Bv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let h=0;h<a.length;h++){const _=a[h];this.matchTNodeWithReadOption(r,o,eb(o,_)),this.matchTNodeWithReadOption(r,o,Xn(o,r,_,!1,!1))}else a===Xg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Xn(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const h=this.metadata.read;if(null!==h)if(h===Kg||h===l_||h===Xg&&4&o.type)this.addMatch(o.index,-2);else{const _=Xn(o,r,h,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function eb(n,r){const o=n.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function nb(n,r,o,a){return-1===o?function tb(n,r){return 11&n.type?Zf(n,r):4&n.type?a_(n,r):null}(r,n):-2===o?function rb(n,r,o){return o===Kg?Zf(r,n):o===Xg?a_(r,n):o===l_?uE(r,n):void 0}(n,r,a):Zn(n,n[1],o,r)}function dE(n,r,o,a){const h=r[19].queries[a];if(null===h.matches){const _=n.data,w=o.matches,N=[];for(let L=0;L<w.length;L+=2){const ie=w[L];N.push(ie<0?null:nb(r,_[ie],w[L+1],o.metadata.read))}h.matches=N}return h.matches}function $v(n,r,o,a){const h=n.queries.getByIndex(o),_=h.matches;if(null!==_){const w=dE(n,r,h,o);for(let N=0;N<_.length;N+=2){const L=_[N];if(L>0)a.push(w[N/2]);else{const ie=_[N+1],pe=r[-L];for(let Fe=10;Fe<pe.length;Fe++){const mt=pe[Fe];mt[17]===mt[3]&&$v(mt[1],mt,ie,a)}if(null!==pe[9]){const Fe=pe[9];for(let mt=0;mt<Fe.length;mt++){const jt=Fe[mt];$v(jt[1],jt,ie,a)}}}}}return a}function hE(n){const r=Ye(),o=xn(),a=oe();me(a+1);const h=_E(o,a);if(n.dirty&&yi(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const _=h.crossesNgTemplate?$v(o,r,a,[]):dE(o,r,h,a);n.reset(_,bC),n.notifyOnChanges()}return!0}return!1}function fE(n,r,o){const a=xn();a.firstCreatePass&&(yE(a,new cE(n,r,o),-1),2==(2&r)&&(a.staticViewQueries=!0)),mE(a,Ye(),r)}function pE(n,r,o,a){const h=xn();if(h.firstCreatePass){const _=K();yE(h,new cE(r,o,a),_.index),function sb(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}mE(h,Ye(),o)}function gE(){return function ib(n,r){return n[19].queries[r].queryList}(Ye(),oe())}function mE(n,r,o){const a=new kv(4==(4&o));ef(n,r,a,a.destroy),null===r[19]&&(r[19]=new Vv),r[19].queries.push(new Lv(a))}function yE(n,r,o){null===n.queries&&(n.queries=new Uv),n.queries.track(new Bv(r,o))}function _E(n,r){return n.queries.getByIndex(r)}function vE(n,r){return a_(n,r)}function d_(...n){}const FE=new po("Application Initializer");let qv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=d_,this.reject=d_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,h)=>{this.resolve=a,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(mg(_))o.push(_);else if(yg(_)){const w=new Promise((N,L)=>{_.subscribe({complete:N,error:L})});o.push(w)}}Promise.all(o).then(()=>{a()}).catch(h=>{this.reject(h)}),0===o.length&&a(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(de(FE,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LE=new po("AppId",{providedIn:"root",factory:function VE(){return`${Kv()}${Kv()}${Kv()}`}});function Kv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const UE=new po("Platform Initializer"),bb=new po("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),BE=new po("appBootstrapListener");let Tb=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Zv=new po("LocaleId",{providedIn:"root",factory:()=>Nt(Zv,er.Optional|er.SkipSelf)||function wb(){return"undefined"!=typeof $localize&&$localize.locale||Hf}()}),Ib=new po("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Sb{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let Db=(()=>{class n{compileModuleSync(o){return new Nv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),_=qa(Yn(o).declarations).reduce((w,N)=>{const L=gt(N);return L&&w.push(new Pv(L)),w},[]);return new Sb(a,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xb=(()=>Promise.resolve(0))();function Yv(n){"undefined"==typeof Zone?xb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Hu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tc(!1),this.onMicrotaskEmpty=new Tc(!1),this.onStable=new Tc(!1),this.onError=new Tc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&o,h.shouldCoalesceRunChangeDetection=a,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Mb(){let n=Fr.requestAnimationFrame,r=Fr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Nb(n){const r=()=>{!function Pb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Fr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Xv(n),n.isCheckStableRunning=!0,Qv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,h,_,w,N)=>{try{return $E(n),o.invokeTask(h,_,w,N)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),jE(n)}},onInvoke:(o,a,h,_,w,N,L)=>{try{return $E(n),o.invoke(h,_,w,N,L)}finally{n.shouldCoalesceRunChangeDetection&&r(),jE(n)}},onHasTask:(o,a,h,_)=>{o.hasTask(h,_),a===h&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,Xv(n),Qv(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,a,h,_)=>(o.handleError(h,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,h){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+h,r,Rb,d_,d_);try{return _.runTask(w,o,a)}finally{_.cancelTask(w)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const Rb={};function Qv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function $E(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function jE(n){n._nesting--,Qv(n)}class Ob{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tc,this.onMicrotaskEmpty=new Tc,this.onStable=new Tc,this.onError=new Tc}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,h){return r.apply(o,a)}}let HE=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hu.assertNotInAngularZone(),Yv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,h){let _=-1;a&&a>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:h})}whenStable(o,a,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,a,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(de(Hu))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),kb=(()=>{class n{constructor(){this._applications=new Map,Jv.addToWindow(this)}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return Jv.findTestabilityInTree(this,o,a)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class Fb{addToWindow(r){}findTestabilityInTree(r,o,a){return null}}function Lb(n){Jv=n}let Jv=new Fb,Nh=null;const GE=new po("AllowMultipleToken"),zE=new po("PlatformOnDestroy");class Bb{constructor(r,o){this.name=r,this.token=o}}function WE(n,r,o=[]){const a=`Platform: ${r}`,h=new po(a);return(_=[])=>{let w=e0();if(!w||w.injector.get(GE,!1)){const N=[...o,..._,{provide:h,useValue:!0}];n?n(N):function $b(n){if(Nh&&!Nh.get(GE,!1))throw new un(400,"");Nh=n;const r=n.get(qE),o=n.get(UE,null);o&&o.forEach(a=>a())}(function Hb(n=[],r){return Ol.create({name:r,providers:[{provide:df,useValue:"platform"},{provide:zE,useValue:()=>Nh=null},...n]})}(N,a))}return function jb(n){const r=e0();if(!r)throw new un(401,"");return r}()}}function e0(){var n;return null!==(n=null==Nh?void 0:Nh.get(qE))&&void 0!==n?n:null}let qE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const N=function Gb(n,r){let o;return o="noop"===n?new Ob:("zone.js"===n?void 0:n)||new Hu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),o}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),L=[{provide:Hu,useValue:N}];return N.run(()=>{const ie=Ol.create({providers:L,parent:this.injector,name:o.moduleType.name}),pe=o.create(ie),Fe=pe.injector.get(xa,null);if(!Fe)throw new un(402,"");return N.runOutsideAngular(()=>{const mt=N.onError.subscribe({next:jt=>{Fe.handleError(jt)}});pe.onDestroy(()=>{n0(this._modules,pe),mt.unsubscribe()})}),function zb(n,r,o){try{const a=o();return mg(a)?a.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(Fe,N,()=>{const mt=pe.injector.get(qv);return mt.runInitializers(),mt.donePromise.then(()=>(function _v(n){or(n,"Expected localeId to be defined"),"string"==typeof n&&(zy=n.toLowerCase().replace(/_/g,"-"))}(pe.injector.get(Zv,Hf)||Hf),this._moduleDoBootstrap(pe),pe))})})}bootstrapModule(o,a=[]){const h=KE({},a);return function Vb(n,r,o){const a=new Nv(o);return Promise.resolve(a)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(o){const a=o.injector.get(t0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>a.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new un(403,"");o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new un(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(zE,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(de(Ol))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function KE(n,r){return Array.isArray(r)?r.reduce(KE,n):Object.assign(Object.assign({},n),r)}let t0=(()=>{class n{constructor(o,a,h,_){this._zone=o,this._injector=a,this._exceptionHandler=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new he.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),N=new he.y(L=>{let ie;this._zone.runOutsideAngular(()=>{ie=this._zone.onStable.subscribe(()=>{Hu.assertNotInAngularZone(),Yv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const pe=this._zone.onUnstable.subscribe(()=>{Hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{ie.unsubscribe(),pe.unsubscribe()}});this.isStable=(0,ae.T)(w,N.pipe((0,je.B)()))}bootstrap(o,a){if(!this._initStatus.done)throw new un(405,"");let h;h=o instanceof U0?o:this._injector.get(s_).resolveComponentFactory(o),this.componentTypes.push(h.componentType);const _=function Ub(n){return n.isBoundToModule}(h)?void 0:this._injector.get(Yf),N=h.create(Ol.NULL,[],a||h.selector,_),L=N.location.nativeElement,ie=N.injector.get(HE,null),pe=ie&&N.injector.get(kb);return ie&&pe&&pe.registerApplication(L,ie),N.onDestroy(()=>{this.detachView(N.hostView),n0(this.components,N),pe&&pe.unregisterApplication(L)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new un(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;n0(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(BE,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(de(Hu),de(Ol),de(xa),de(qv))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function n0(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let YE=!0,QE=!1;function qb(){return QE=!0,YE}function Kb(){if(QE)throw new Error("Cannot enable prod mode after platform setup.");YE=!1}let Zb=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yb,n})();function Yb(n){return function Qb(n,r,o){if(gs(n)&&!o){const a=ni(n.index,r);return new Zg(a,a)}return 47&n.type?new Zg(r[16],r):null}(K(),Ye(),16==(16&n))}class tC{constructor(){}supports(r){return Zc(r)}create(r){return new rT(r)}}const nT=(n,r)=>r;class rT{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||nT}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,h=0,_=null;for(;o||a;){const w=!a||o&&o.currentIndex<rC(a,h,_)?o:a,N=rC(w,h,_),L=w.currentIndex;if(w===a)h--,a=a._nextRemoved;else if(o=o._next,null==w.previousIndex)h++;else{_||(_=[]);const ie=N-h,pe=L-h;if(ie!=pe){for(let mt=0;mt<ie;mt++){const jt=mt<_.length?_[mt]:_[mt]=0,Pn=jt+mt;pe<=Pn&&Pn<ie&&(_[mt]=jt+1)}_[w.previousIndex]=pe-ie}}N!==L&&r(w,N,L)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Zc(r))throw new un(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,_,w,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let N=0;N<this.length;N++)_=r[N],w=this._trackByFn(N,_),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,_,w,N)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,w,N),a=!0),o=o._next}else h=0,function H_(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[dc()]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,N=>{w=this._trackByFn(h,N),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,N,w,h)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,w,h),a=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,h){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,_,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,h))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,_,h)):r=this._addAfter(new iT(o,a),_,h),r}_verifyReinsertion(r,o,a,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==_?r=this._reinsertAfter(_,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,_=r._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const h=null===o?this._itHead:o._next;return r._next=h,r._prev=o,null===h?this._itTail=r:h._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new nC),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class iT{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sT{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class nC{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new sT,this.map.set(o,a)),a.add(r)}get(r,o){const h=this.map.get(r);return h?h.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rC(n,r,o){const a=n.previousIndex;if(null===a)return a;let h=0;return o&&a<o.length&&(h=o[a]),a+r+h}class iC{constructor(){}supports(r){return r instanceof Map||yh(r)}create(){return new oT}}class oT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||yh(r)))throw new un(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const _=this._getOrCreateRecordForKey(h,a);o=this._insertBeforeOrAppend(o,_)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,o);const _=h._prev,w=h._next;return _&&(_._next=w),w&&(w._prev=_),h._next=null,h._prev=null,h}const a=new aT(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class aT{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sC(){return new l0([new tC])}let l0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(null!=a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||sC()),deps:[[n,new ii,new Ei]]}}find(o){const a=this.factories.find(h=>h.supports(o));if(null!=a)return a;throw new un(901,"")}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:sC}),n})();function oC(){return new u0([new iC])}let u0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||oC()),deps:[[n,new ii,new Ei]]}}find(o){const a=this.factories.find(_=>_.supports(o));if(a)return a;throw new un(901,"")}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:oC}),n})();const cT=WE(null,"core",[]);let dT=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(de(t0))},n.\u0275mod=ln({type:n}),n.\u0275inj=At({}),n})()},2382:(Wn,Dt,j)=>{j.d(Dt,{Wl:()=>Ot,Fj:()=>xe,qu:()=>To,NI:()=>Ki,oH:()=>As,u:()=>Gs,cw:()=>Br,sg:()=>Ts,u5:()=>Kr,JJ:()=>nt,JL:()=>ct,F:()=>fs,On:()=>ns,_:()=>zi,UX:()=>Js,kI:()=>Bt,_Y:()=>Ct});var g=j(5e3),k=j(9808),he=j(8306),ae=j(4742),je=j(8421),He=j(7669),dt=j(5403),qe=j(3268),at=j(1810),Pe=j(8996),bt=j(4004);let Tn=(()=>{class Q{constructor(V,ye){this._renderer=V,this._elementRef=ye,this.onChange=Ye=>{},this.onTouched=()=>{}}setProperty(V,ye){this._renderer.setProperty(this._elementRef.nativeElement,V,ye)}registerOnTouched(V){this.onTouched=V}registerOnChange(V){this.onChange=V}setDisabledState(V){this.setProperty("disabled",V)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(g.Qsj),g.Y36(g.SBq))},Q.\u0275dir=g.lG2({type:Q}),Q})(),Et=(()=>{class Q extends Tn{}return Q.\u0275fac=function(){let G;return function(ye){return(G||(G=g.n5z(Q)))(ye||Q)}}(),Q.\u0275dir=g.lG2({type:Q,features:[g.qOj]}),Q})();const un=new g.OlP("NgValueAccessor"),In={provide:un,useExisting:(0,g.Gpc)(()=>Ot),multi:!0};let Ot=(()=>{class Q extends Et{writeValue(V){this.setProperty("checked",V)}}return Q.\u0275fac=function(){let G;return function(ye){return(G||(G=g.n5z(Q)))(ye||Q)}}(),Q.\u0275dir=g.lG2({type:Q,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(V,ye){1&V&&g.NdJ("change",function(xn){return ye.onChange(xn.target.checked)})("blur",function(){return ye.onTouched()})},features:[g._Bn([In]),g.qOj]}),Q})();const tn={provide:un,useExisting:(0,g.Gpc)(()=>xe),multi:!0},dn=new g.OlP("CompositionEventMode");let xe=(()=>{class Q extends Tn{constructor(V,ye,Ye){super(V,ye),this._compositionMode=Ye,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ln(){const Q=(0,k.q)()?(0,k.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(V){this.setProperty("value",null==V?"":V)}_handleInput(V){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(V)}_compositionStart(){this._composing=!0}_compositionEnd(V){this._composing=!1,this._compositionMode&&this.onChange(V)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(dn,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(V,ye){1&V&&g.NdJ("input",function(xn){return ye._handleInput(xn.target.value)})("blur",function(){return ye.onTouched()})("compositionstart",function(){return ye._compositionStart()})("compositionend",function(xn){return ye._compositionEnd(xn.target.value)})},features:[g._Bn([tn]),g.qOj]}),Q})();function Ge(Q){return null==Q||0===Q.length}function St(Q){return null!=Q&&"number"==typeof Q.length}const on=new g.OlP("NgValidators"),Ht=new g.OlP("NgAsyncValidators"),Oe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Bt{static min(G){return function Re(Q){return G=>{if(Ge(G.value)||Ge(Q))return null;const V=parseFloat(G.value);return!isNaN(V)&&V<Q?{min:{min:Q,actual:G.value}}:null}}(G)}static max(G){return function wt(Q){return G=>{if(Ge(G.value)||Ge(Q))return null;const V=parseFloat(G.value);return!isNaN(V)&&V>Q?{max:{max:Q,actual:G.value}}:null}}(G)}static required(G){return function Je(Q){return Ge(Q.value)?{required:!0}:null}(G)}static requiredTrue(G){return function Lt(Q){return!0===Q.value?null:{required:!0}}(G)}static email(G){return function pt(Q){return Ge(Q.value)||Oe.test(Q.value)?null:{email:!0}}(G)}static minLength(G){return function Rt(Q){return G=>Ge(G.value)||!St(G.value)?null:G.value.length<Q?{minlength:{requiredLength:Q,actualLength:G.value.length}}:null}(G)}static maxLength(G){return function Sn(Q){return G=>St(G.value)&&G.value.length>Q?{maxlength:{requiredLength:Q,actualLength:G.value.length}}:null}(G)}static pattern(G){return function sr(Q){if(!Q)return or;let G,V;return"string"==typeof Q?(V="","^"!==Q.charAt(0)&&(V+="^"),V+=Q,"$"!==Q.charAt(Q.length-1)&&(V+="$"),G=new RegExp(V)):(V=Q.toString(),G=Q),ye=>{if(Ge(ye.value))return null;const Ye=ye.value;return G.test(Ye)?null:{pattern:{requiredPattern:V,actualValue:Ye}}}}(G)}static nullValidator(G){return null}static compose(G){return At(G)}static composeAsync(G){return Qt(G)}}function or(Q){return null}function mn(Q){return null!=Q}function Tr(Q){const G=(0,g.QGY)(Q)?(0,Pe.D)(Q):Q;return(0,g.CqO)(G),G}function mr(Q){let G={};return Q.forEach(V=>{G=null!=V?Object.assign(Object.assign({},G),V):G}),0===Object.keys(G).length?null:G}function Vt(Q,G){return G.map(V=>V(Q))}function it(Q){return Q.map(G=>function kt(Q){return!Q.validate}(G)?G:V=>G.validate(V))}function At(Q){if(!Q)return null;const G=Q.filter(mn);return 0==G.length?null:function(V){return mr(Vt(V,G))}}function ut(Q){return null!=Q?At(it(Q)):null}function Qt(Q){if(!Q)return null;const G=Q.filter(mn);return 0==G.length?null:function(V){return function Ne(...Q){const G=(0,He.jO)(Q),{args:V,keys:ye}=(0,ae.D)(Q),Ye=new he.y(xn=>{const{length:ee}=V;if(!ee)return void xn.complete();const K=new Array(ee);let Ce=ee,Le=ee;for(let rt=0;rt<ee;rt++){let Zt=!1;(0,je.Xf)(V[rt]).subscribe((0,dt.x)(xn,An=>{Zt||(Zt=!0,Le--),K[rt]=An},()=>Ce--,void 0,()=>{(!Ce||!Zt)&&(Le||xn.next(ye?(0,at.n)(ye,K):K),xn.complete())}))}});return G?Ye.pipe((0,qe.Z)(G)):Ye}(Vt(V,G).map(Tr)).pipe((0,bt.U)(mr))}}function Mt(Q){return null!=Q?Qt(it(Q)):null}function Xt(Q,G){return null===Q?[G]:Array.isArray(Q)?[...Q,G]:[Q,G]}function Hn(Q){return Q._rawValidators}function ir(Q){return Q._rawAsyncValidators}function ur(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function Yr(Q,G){return Array.isArray(Q)?Q.includes(G):Q===G}function oi(Q,G){const V=ur(G);return ur(Q).forEach(Ye=>{Yr(V,Ye)||V.push(Ye)}),V}function er(Q,G){return ur(G).filter(V=>!Yr(Q,V))}class Wr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(G){this._rawValidators=G||[],this._composedValidatorFn=ut(this._rawValidators)}_setAsyncValidators(G){this._rawAsyncValidators=G||[],this._composedAsyncValidatorFn=Mt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(G){this._onDestroyCallbacks.push(G)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(G=>G()),this._onDestroyCallbacks=[]}reset(G){this.control&&this.control.reset(G)}hasError(G,V){return!!this.control&&this.control.hasError(G,V)}getError(G,V){return this.control?this.control.getError(G,V):null}}class xr extends Wr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Mr extends Wr{get formDirective(){return null}get path(){return null}}class is{constructor(G){this._cd=G}is(G){var V,ye,Ye;return"submitted"===G?!!(null===(V=this._cd)||void 0===V?void 0:V.submitted):!!(null===(Ye=null===(ye=this._cd)||void 0===ye?void 0:ye.control)||void 0===Ye?void 0:Ye[G])}}let nt=(()=>{class Q extends is{constructor(V){super(V)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(xr,2))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(V,ye){2&V&&g.ekj("ng-untouched",ye.is("untouched"))("ng-touched",ye.is("touched"))("ng-pristine",ye.is("pristine"))("ng-dirty",ye.is("dirty"))("ng-valid",ye.is("valid"))("ng-invalid",ye.is("invalid"))("ng-pending",ye.is("pending"))},features:[g.qOj]}),Q})(),ct=(()=>{class Q extends is{constructor(V){super(V)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(Mr,10))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(V,ye){2&V&&g.ekj("ng-untouched",ye.is("untouched"))("ng-touched",ye.is("touched"))("ng-pristine",ye.is("pristine"))("ng-dirty",ye.is("dirty"))("ng-valid",ye.is("valid"))("ng-invalid",ye.is("invalid"))("ng-pending",ye.is("pending"))("ng-submitted",ye.is("submitted"))},features:[g.qOj]}),Q})();function Vn(Q,G){return[...G.path,Q]}function Pr(Q,G){Ue(Q,G),G.valueAccessor.writeValue(Q.value),function ln(Q,G){G.valueAccessor.registerOnChange(V=>{Q._pendingValue=V,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&ze(Q,G)})}(Q,G),function Me(Q,G){const V=(ye,Ye)=>{G.valueAccessor.writeValue(ye),Ye&&G.viewToModelUpdate(ye)};Q.registerOnChange(V),G._registerOnDestroy(()=>{Q._unregisterOnChange(V)})}(Q,G),function Ft(Q,G){G.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&ze(Q,G),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,G),function Qe(Q,G){if(G.valueAccessor.setDisabledState){const V=ye=>{G.valueAccessor.setDisabledState(ye)};Q.registerOnDisabledChange(V),G._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(V)})}}(Q,G)}function Or(Q,G,V=!0){const ye=()=>{};G.valueAccessor&&(G.valueAccessor.registerOnChange(ye),G.valueAccessor.registerOnTouched(ye)),ft(Q,G),Q&&(G._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function Vr(Q,G){Q.forEach(V=>{V.registerOnValidatorChange&&V.registerOnValidatorChange(G)})}function Ue(Q,G){const V=Hn(Q);null!==G.validator?Q.setValidators(Xt(V,G.validator)):"function"==typeof V&&Q.setValidators([V]);const ye=ir(Q);null!==G.asyncValidator?Q.setAsyncValidators(Xt(ye,G.asyncValidator)):"function"==typeof ye&&Q.setAsyncValidators([ye]);const Ye=()=>Q.updateValueAndValidity();Vr(G._rawValidators,Ye),Vr(G._rawAsyncValidators,Ye)}function ft(Q,G){let V=!1;if(null!==Q){if(null!==G.validator){const Ye=Hn(Q);if(Array.isArray(Ye)&&Ye.length>0){const xn=Ye.filter(ee=>ee!==G.validator);xn.length!==Ye.length&&(V=!0,Q.setValidators(xn))}}if(null!==G.asyncValidator){const Ye=ir(Q);if(Array.isArray(Ye)&&Ye.length>0){const xn=Ye.filter(ee=>ee!==G.asyncValidator);xn.length!==Ye.length&&(V=!0,Q.setAsyncValidators(xn))}}}const ye=()=>{};return Vr(G._rawValidators,ye),Vr(G._rawAsyncValidators,ye),V}function ze(Q,G){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),G.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function Ae(Q,G){Ue(Q,G)}function Qi(Q,G){if(!Q.hasOwnProperty("model"))return!1;const V=Q.model;return!!V.isFirstChange()||!Object.is(G,V.currentValue)}function Hs(Q,G){Q._syncPendingControls(),G.forEach(V=>{const ye=V.control;"submit"===ye.updateOn&&ye._pendingChange&&(V.viewToModelUpdate(ye._pendingValue),ye._pendingChange=!1)})}function Fi(Q,G){if(!G)return null;let V,ye,Ye;return Array.isArray(G),G.forEach(xn=>{xn.constructor===xe?V=xn:function os(Q){return Object.getPrototypeOf(Q.constructor)===Et}(xn)?ye=xn:Ye=xn}),Ye||ye||V||null}function ci(Q,G){const V=Q.indexOf(G);V>-1&&Q.splice(V,1)}const Cn="VALID",br="INVALID",li="PENDING",Pi="DISABLED";function Xi(Q){return(Hi(Q)?Q.validators:Q)||null}function Ji(Q){return Array.isArray(Q)?ut(Q):Q||null}function ji(Q,G){return(Hi(G)?G.asyncValidators:Q)||null}function Ii(Q){return Array.isArray(Q)?Mt(Q):Q||null}function Hi(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}const qr=Q=>Q instanceof Ki,es=Q=>Q instanceof Br,ls=Q=>Q instanceof xi;function Cs(Q){return qr(Q)?Q.value:Q.getRawValue()}function Qr(Q,G){const V=es(Q),ye=Q.controls;if(!(V?Object.keys(ye):ye).length)throw new g.vHH(1e3,"");if(!ye[G])throw new g.vHH(1001,"")}function wr(Q,G){es(Q),Q._forEachChild((ye,Ye)=>{if(void 0===G[Ye])throw new g.vHH(1002,"")})}class Sr{constructor(G,V){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=G,this._rawAsyncValidators=V,this._composedValidatorFn=Ji(this._rawValidators),this._composedAsyncValidatorFn=Ii(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(G){this._rawValidators=this._composedValidatorFn=G}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(G){this._rawAsyncValidators=this._composedAsyncValidatorFn=G}get parent(){return this._parent}get valid(){return this.status===Cn}get invalid(){return this.status===br}get pending(){return this.status==li}get disabled(){return this.status===Pi}get enabled(){return this.status!==Pi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(G){this._rawValidators=G,this._composedValidatorFn=Ji(G)}setAsyncValidators(G){this._rawAsyncValidators=G,this._composedAsyncValidatorFn=Ii(G)}addValidators(G){this.setValidators(oi(G,this._rawValidators))}addAsyncValidators(G){this.setAsyncValidators(oi(G,this._rawAsyncValidators))}removeValidators(G){this.setValidators(er(G,this._rawValidators))}removeAsyncValidators(G){this.setAsyncValidators(er(G,this._rawAsyncValidators))}hasValidator(G){return Yr(this._rawValidators,G)}hasAsyncValidator(G){return Yr(this._rawAsyncValidators,G)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(G={}){this.touched=!0,this._parent&&!G.onlySelf&&this._parent.markAsTouched(G)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(G=>G.markAllAsTouched())}markAsUntouched(G={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(V=>{V.markAsUntouched({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}markAsDirty(G={}){this.pristine=!1,this._parent&&!G.onlySelf&&this._parent.markAsDirty(G)}markAsPristine(G={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(V=>{V.markAsPristine({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}markAsPending(G={}){this.status=li,!1!==G.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!G.onlySelf&&this._parent.markAsPending(G)}disable(G={}){const V=this._parentMarkedDirty(G.onlySelf);this.status=Pi,this.errors=null,this._forEachChild(ye=>{ye.disable(Object.assign(Object.assign({},G),{onlySelf:!0}))}),this._updateValue(),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},G),{skipPristineCheck:V})),this._onDisabledChange.forEach(ye=>ye(!0))}enable(G={}){const V=this._parentMarkedDirty(G.onlySelf);this.status=Cn,this._forEachChild(ye=>{ye.enable(Object.assign(Object.assign({},G),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},G),{skipPristineCheck:V})),this._onDisabledChange.forEach(ye=>ye(!1))}_updateAncestors(G){this._parent&&!G.onlySelf&&(this._parent.updateValueAndValidity(G),G.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(G){this._parent=G}updateValueAndValidity(G={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cn||this.status===li)&&this._runAsyncValidator(G.emitEvent)),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!G.onlySelf&&this._parent.updateValueAndValidity(G)}_updateTreeValidity(G={emitEvent:!0}){this._forEachChild(V=>V._updateTreeValidity(G)),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pi:Cn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(G){if(this.asyncValidator){this.status=li,this._hasOwnPendingAsyncValidator=!0;const V=Tr(this.asyncValidator(this));this._asyncValidationSubscription=V.subscribe(ye=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ye,{emitEvent:G})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(G,V={}){this.errors=G,this._updateControlsErrors(!1!==V.emitEvent)}get(G){return function hs(Q,G,V){if(null==G||(Array.isArray(G)||(G=G.split(V)),Array.isArray(G)&&0===G.length))return null;let ye=Q;return G.forEach(Ye=>{ye=es(ye)?ye.controls.hasOwnProperty(Ye)?ye.controls[Ye]:null:ls(ye)&&ye.at(Ye)||null}),ye}(this,G,".")}getError(G,V){const ye=V?this.get(V):this;return ye&&ye.errors?ye.errors[G]:null}hasError(G,V){return!!this.getError(G,V)}get root(){let G=this;for(;G._parent;)G=G._parent;return G}_updateControlsErrors(G){this.status=this._calculateStatus(),G&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(G)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Pi:this.errors?br:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(li)?li:this._anyControlsHaveStatus(br)?br:Cn}_anyControlsHaveStatus(G){return this._anyControls(V=>V.status===G)}_anyControlsDirty(){return this._anyControls(G=>G.dirty)}_anyControlsTouched(){return this._anyControls(G=>G.touched)}_updatePristine(G={}){this.pristine=!this._anyControlsDirty(),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}_updateTouched(G={}){this.touched=this._anyControlsTouched(),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}_isBoxedValue(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}_registerOnCollectionChange(G){this._onCollectionChange=G}_setUpdateStrategy(G){Hi(G)&&null!=G.updateOn&&(this._updateOn=G.updateOn)}_parentMarkedDirty(G){return!G&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ki extends Sr{constructor(G=null,V,ye){super(Xi(V),ji(ye,V)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(G),this._setUpdateStrategy(V),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hi(V)&&V.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(G)?G.value:G)}setValue(G,V={}){this.value=this._pendingValue=G,this._onChange.length&&!1!==V.emitModelToViewChange&&this._onChange.forEach(ye=>ye(this.value,!1!==V.emitViewToModelChange)),this.updateValueAndValidity(V)}patchValue(G,V={}){this.setValue(G,V)}reset(G=this.defaultValue,V={}){this._applyFormState(G),this.markAsPristine(V),this.markAsUntouched(V),this.setValue(this.value,V),this._pendingChange=!1}_updateValue(){}_anyControls(G){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(G){this._onChange.push(G)}_unregisterOnChange(G){ci(this._onChange,G)}registerOnDisabledChange(G){this._onDisabledChange.push(G)}_unregisterOnDisabledChange(G){ci(this._onDisabledChange,G)}_forEachChild(G){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(G){this._isBoxedValue(G)?(this.value=this._pendingValue=G.value,G.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=G}}class Br extends Sr{constructor(G,V,ye){super(Xi(V),ji(ye,V)),this.controls=G,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(G,V){return this.controls[G]?this.controls[G]:(this.controls[G]=V,V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange),V)}addControl(G,V,ye={}){this.registerControl(G,V),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}removeControl(G,V={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}setControl(G,V,ye={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],V&&this.registerControl(G,V),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}contains(G){return this.controls.hasOwnProperty(G)&&this.controls[G].enabled}setValue(G,V={}){wr(this,G),Object.keys(G).forEach(ye=>{Qr(this,ye),this.controls[ye].setValue(G[ye],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(G,V={}){null!=G&&(Object.keys(G).forEach(ye=>{this.controls[ye]&&this.controls[ye].patchValue(G[ye],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(G={},V={}){this._forEachChild((ye,Ye)=>{ye.reset(G[Ye],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this._reduceChildren({},(G,V,ye)=>(G[ye]=Cs(V),G))}_syncPendingControls(){let G=this._reduceChildren(!1,(V,ye)=>!!ye._syncPendingControls()||V);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){Object.keys(this.controls).forEach(V=>{const ye=this.controls[V];ye&&G(ye,V)})}_setUpControls(){this._forEachChild(G=>{G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(G){for(const V of Object.keys(this.controls)){const ye=this.controls[V];if(this.contains(V)&&G(ye))return!0}return!1}_reduceValue(){return this._reduceChildren({},(G,V,ye)=>((V.enabled||this.disabled)&&(G[ye]=V.value),G))}_reduceChildren(G,V){let ye=G;return this._forEachChild((Ye,xn)=>{ye=V(ye,Ye,xn)}),ye}_allControlsDisabled(){for(const G of Object.keys(this.controls))if(this.controls[G].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class xi extends Sr{constructor(G,V,ye){super(Xi(V),ji(ye,V)),this.controls=G,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(G){return this.controls[G]}push(G,V={}){this.controls.push(G),this._registerControl(G),this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}insert(G,V,ye={}){this.controls.splice(G,0,V),this._registerControl(V),this.updateValueAndValidity({emitEvent:ye.emitEvent})}removeAt(G,V={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),this.controls.splice(G,1),this.updateValueAndValidity({emitEvent:V.emitEvent})}setControl(G,V,ye={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),this.controls.splice(G,1),V&&(this.controls.splice(G,0,V),this._registerControl(V)),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(G,V={}){wr(this,G),G.forEach((ye,Ye)=>{Qr(this,Ye),this.at(Ye).setValue(ye,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(G,V={}){null!=G&&(G.forEach((ye,Ye)=>{this.at(Ye)&&this.at(Ye).patchValue(ye,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(G=[],V={}){this._forEachChild((ye,Ye)=>{ye.reset(G[Ye],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this.controls.map(G=>Cs(G))}clear(G={}){this.controls.length<1||(this._forEachChild(V=>V._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:G.emitEvent}))}_syncPendingControls(){let G=this.controls.reduce((V,ye)=>!!ye._syncPendingControls()||V,!1);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){this.controls.forEach((V,ye)=>{G(V,ye)})}_updateValue(){this.value=this.controls.filter(G=>G.enabled||this.disabled).map(G=>G.value)}_anyControls(G){return this.controls.some(V=>V.enabled&&G(V))}_setUpControls(){this._forEachChild(G=>this._registerControl(G))}_allControlsDisabled(){for(const G of this.controls)if(G.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(G){G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)}}const Vs={provide:Mr,useExisting:(0,g.Gpc)(()=>fs)},Gi=(()=>Promise.resolve(null))();let fs=(()=>{class Q extends Mr{constructor(V,ye){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new Br({},ut(V),Mt(ye))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(V){Gi.then(()=>{const ye=this._findContainer(V.path);V.control=ye.registerControl(V.name,V.control),Pr(V.control,V),V.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(V)})}getControl(V){return this.form.get(V.path)}removeControl(V){Gi.then(()=>{const ye=this._findContainer(V.path);ye&&ye.removeControl(V.name),this._directives.delete(V)})}addFormGroup(V){Gi.then(()=>{const ye=this._findContainer(V.path),Ye=new Br({});Ae(Ye,V),ye.registerControl(V.name,Ye),Ye.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(V){Gi.then(()=>{const ye=this._findContainer(V.path);ye&&ye.removeControl(V.name)})}getFormGroup(V){return this.form.get(V.path)}updateModel(V,ye){Gi.then(()=>{this.form.get(V.path).setValue(ye)})}setValue(V){this.control.setValue(V)}onSubmit(V){return this.submitted=!0,Hs(this.form,this._directives),this.ngSubmit.emit(V),!1}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(V){return V.pop(),V.length?this.form.get(V):this.form}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(on,10),g.Y36(Ht,10))},Q.\u0275dir=g.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(V,ye){1&V&&g.NdJ("submit",function(xn){return ye.onSubmit(xn)})("reset",function(){return ye.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Vs]),g.qOj]}),Q})();const co={provide:xr,useExisting:(0,g.Gpc)(()=>ns)},Ns=(()=>Promise.resolve(null))();let ns=(()=>{class Q extends xr{constructor(V,ye,Ye,xn,ee){super(),this._changeDetectorRef=ee,this.control=new Ki,this._registered=!1,this.update=new g.vpe,this._parent=V,this._setValidators(ye),this._setAsyncValidators(Ye),this.valueAccessor=Fi(0,xn)}ngOnChanges(V){if(this._checkForErrors(),!this._registered||"name"in V){if(this._registered&&(this._checkName(),this.formDirective)){const ye=V.name.previousValue;this.formDirective.removeControl({name:ye,path:this._getPath(ye)})}this._setUpControl()}"isDisabled"in V&&this._updateDisabled(V),Qi(V,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Pr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(V){Ns.then(()=>{var ye;this.control.setValue(V,{emitViewToModelChange:!1}),null===(ye=this._changeDetectorRef)||void 0===ye||ye.markForCheck()})}_updateDisabled(V){const ye=V.isDisabled.currentValue,Ye=""===ye||ye&&"false"!==ye;Ns.then(()=>{var xn;Ye&&!this.control.disabled?this.control.disable():!Ye&&this.control.disabled&&this.control.enable(),null===(xn=this._changeDetectorRef)||void 0===xn||xn.markForCheck()})}_getPath(V){return this._parent?Vn(V,this._parent):[V]}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(Mr,9),g.Y36(on,10),g.Y36(Ht,10),g.Y36(un,10),g.Y36(g.sBO,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([co]),g.qOj,g.TTD]}),Q})(),Ct=(()=>{class Q{}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275dir=g.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Q})();const _n={provide:un,useExisting:(0,g.Gpc)(()=>zi),multi:!0};let Dr=(()=>{class Q{}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({}),Q})(),ei=(()=>{class Q{constructor(){this._accessors=[]}add(V,ye){this._accessors.push([V,ye])}remove(V){for(let ye=this._accessors.length-1;ye>=0;--ye)if(this._accessors[ye][1]===V)return void this._accessors.splice(ye,1)}select(V){this._accessors.forEach(ye=>{this._isSameGroup(ye,V)&&ye[1]!==V&&ye[1].fireUncheck(V.value)})}_isSameGroup(V,ye){return!!V[0].control&&V[0]._parent===ye._control._parent&&V[1].name===ye.name}}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275prov=g.Yz7({token:Q,factory:Q.\u0275fac,providedIn:Dr}),Q})(),zi=(()=>{class Q extends Et{constructor(V,ye,Ye,xn){super(V,ye),this._registry=Ye,this._injector=xn,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(xr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(V){this._state=V===this.value,this.setProperty("checked",this._state)}registerOnChange(V){this._fn=V,this.onChange=()=>{V(this.value),this._registry.select(this)}}fireUncheck(V){this.writeValue(V)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ei),g.Y36(g.zs3))},Q.\u0275dir=g.lG2({type:Q,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(V,ye){1&V&&g.NdJ("change",function(){return ye.onChange()})("blur",function(){return ye.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[g._Bn([_n]),g.qOj]}),Q})();const ti=new g.OlP("NgModelWithFormControlWarning"),_s={provide:xr,useExisting:(0,g.Gpc)(()=>As)};let As=(()=>{class Q extends xr{constructor(V,ye,Ye,xn){super(),this._ngModelWarningConfig=xn,this.update=new g.vpe,this._ngModelWarningSent=!1,this._setValidators(V),this._setAsyncValidators(ye),this.valueAccessor=Fi(0,Ye)}set isDisabled(V){}ngOnChanges(V){if(this._isControlChanged(V)){const ye=V.form.previousValue;ye&&Or(ye,this,!1),Pr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Qi(V,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Or(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}_isControlChanged(V){return V.hasOwnProperty("form")}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(V){return new(V||Q)(g.Y36(on,10),g.Y36(Ht,10),g.Y36(un,10),g.Y36(ti,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[g._Bn([_s]),g.qOj,g.TTD]}),Q})();const Yo={provide:Mr,useExisting:(0,g.Gpc)(()=>Ts)};let Ts=(()=>{class Q extends Mr{constructor(V,ye){super(),this.validators=V,this.asyncValidators=ye,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(V),this._setAsyncValidators(ye)}ngOnChanges(V){this._checkFormPresent(),V.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ft(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(V){const ye=this.form.get(V.path);return Pr(ye,V),ye.updateValueAndValidity({emitEvent:!1}),this.directives.push(V),ye}getControl(V){return this.form.get(V.path)}removeControl(V){Or(V.control||null,V,!1),ci(this.directives,V)}addFormGroup(V){this._setUpFormContainer(V)}removeFormGroup(V){this._cleanUpFormContainer(V)}getFormGroup(V){return this.form.get(V.path)}addFormArray(V){this._setUpFormContainer(V)}removeFormArray(V){this._cleanUpFormContainer(V)}getFormArray(V){return this.form.get(V.path)}updateModel(V,ye){this.form.get(V.path).setValue(ye)}onSubmit(V){return this.submitted=!0,Hs(this.form,this.directives),this.ngSubmit.emit(V),!1}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_updateDomValue(){this.directives.forEach(V=>{const ye=V.control,Ye=this.form.get(V.path);ye!==Ye&&(Or(ye||null,V),qr(Ye)&&(Pr(Ye,V),V.control=Ye))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(V){const ye=this.form.get(V.path);Ae(ye,V),ye.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(V){if(this.form){const ye=this.form.get(V.path);ye&&function gt(Q,G){return ft(Q,G)}(ye,V)&&ye.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ue(this.form,this),this._oldForm&&ft(this._oldForm,this)}_checkFormPresent(){}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(on,10),g.Y36(Ht,10))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(V,ye){1&V&&g.NdJ("submit",function(xn){return ye.onSubmit(xn)})("reset",function(){return ye.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Yo]),g.qOj,g.TTD]}),Q})();const Us={provide:xr,useExisting:(0,g.Gpc)(()=>Gs)};let Gs=(()=>{class Q extends xr{constructor(V,ye,Ye,xn,ee){super(),this._ngModelWarningConfig=ee,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=V,this._setValidators(ye),this._setAsyncValidators(Ye),this.valueAccessor=Fi(0,xn)}set isDisabled(V){}ngOnChanges(V){this._added||this._setUpControl(),Qi(V,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}get path(){return Vn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(V){return new(V||Q)(g.Y36(Mr,13),g.Y36(on,10),g.Y36(Ht,10),g.Y36(un,10),g.Y36(ti,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Us]),g.qOj,g.TTD]}),Q})(),ts=(()=>{class Q{}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({imports:[[Dr]]}),Q})(),Kr=(()=>{class Q{}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({imports:[ts]}),Q})(),Js=(()=>{class Q{static withConfig(V){return{ngModule:Q,providers:[{provide:ti,useValue:V.warnOnNgModelWithFormControl}]}}}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({imports:[ts]}),Q})(),To=(()=>{class Q{group(V,ye=null){const Ye=this._reduceControls(V);let K,xn=null,ee=null;return null!=ye&&(function Ao(Q){return void 0!==Q.asyncValidators||void 0!==Q.validators||void 0!==Q.updateOn}(ye)?(xn=null!=ye.validators?ye.validators:null,ee=null!=ye.asyncValidators?ye.asyncValidators:null,K=null!=ye.updateOn?ye.updateOn:void 0):(xn=null!=ye.validator?ye.validator:null,ee=null!=ye.asyncValidator?ye.asyncValidator:null)),new Br(Ye,{asyncValidators:ee,updateOn:K,validators:xn})}control(V,ye,Ye){return new Ki(V,ye,Ye)}array(V,ye,Ye){const xn=V.map(ee=>this._createControl(ee));return new xi(xn,ye,Ye)}_reduceControls(V){const ye={};return Object.keys(V).forEach(Ye=>{ye[Ye]=this._createControl(V[Ye])}),ye}_createControl(V){return qr(V)||es(V)||ls(V)?V:Array.isArray(V)?this.control(V[0],V.length>1?V[1]:null,V.length>2?V[2]:null):this.control(V)}}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275prov=g.Yz7({token:Q,factory:Q.\u0275fac,providedIn:Js}),Q})()},2313:(Wn,Dt,j)=>{j.d(Dt,{Dx:()=>Mr,H7:()=>Ue,b2:()=>Yr,q6:()=>ir,se:()=>Lt});var g=j(9808),k=j(5e3);class he extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ae extends he{static makeCurrent(){(0,g.HT)(new ae)}onAndCancel(Me,Ae,gt){return Me.addEventListener(Ae,gt,!1),()=>{Me.removeEventListener(Ae,gt,!1)}}dispatchEvent(Me,Ae){Me.dispatchEvent(Ae)}remove(Me){Me.parentNode&&Me.parentNode.removeChild(Me)}createElement(Me,Ae){return(Ae=Ae||this.getDefaultDocument()).createElement(Me)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Me){return Me.nodeType===Node.ELEMENT_NODE}isShadowRoot(Me){return Me instanceof DocumentFragment}getGlobalEventTarget(Me,Ae){return"window"===Ae?window:"document"===Ae?Me:"body"===Ae?Me.body:null}getBaseHref(Me){const Ae=function He(){return je=je||document.querySelector("base"),je?je.getAttribute("href"):null}();return null==Ae?null:function qe(ze){dt=dt||document.createElement("a"),dt.setAttribute("href",ze);const Me=dt.pathname;return"/"===Me.charAt(0)?Me:`/${Me}`}(Ae)}resetBaseElement(){je=null}getUserAgent(){return window.navigator.userAgent}getCookie(Me){return(0,g.Mx)(document.cookie,Me)}}let dt,je=null;const at=new k.OlP("TRANSITION_ID"),Pe=[{provide:k.ip1,useFactory:function Ne(ze,Me,Ae){return()=>{Ae.get(k.CZH).donePromise.then(()=>{const gt=(0,g.q)(),sn=Me.querySelectorAll(`style[ng-transition="${ze}"]`);for(let vr=0;vr<sn.length;vr++)gt.remove(sn[vr])})}},deps:[at,g.K0,k.zs3],multi:!0}];class bt{static init(){(0,k.VLi)(new bt)}addToWindow(Me){k.dqk.getAngularTestability=(gt,sn=!0)=>{const vr=Me.findTestabilityInTree(gt,sn);if(null==vr)throw new Error("Could not find testability for element.");return vr},k.dqk.getAllAngularTestabilities=()=>Me.getAllTestabilities(),k.dqk.getAllAngularRootElements=()=>Me.getAllRootElements(),k.dqk.frameworkStabilizers||(k.dqk.frameworkStabilizers=[]),k.dqk.frameworkStabilizers.push(gt=>{const sn=k.dqk.getAllAngularTestabilities();let vr=sn.length,Yn=!1;const ai=function(Qi){Yn=Yn||Qi,vr--,0==vr&&gt(Yn)};sn.forEach(function(Qi){Qi.whenStable(ai)})})}findTestabilityInTree(Me,Ae,gt){if(null==Ae)return null;const sn=Me.getTestability(Ae);return null!=sn?sn:gt?(0,g.q)().isShadowRoot(Ae)?this.findTestabilityInTree(Me,Ae.host,!0):this.findTestabilityInTree(Me,Ae.parentElement,!0):null}}let Tn=(()=>{class ze{build(){return new XMLHttpRequest}}return ze.\u0275fac=function(Ae){return new(Ae||ze)},ze.\u0275prov=k.Yz7({token:ze,factory:ze.\u0275fac}),ze})();const Et=new k.OlP("EventManagerPlugins");let un=(()=>{class ze{constructor(Ae,gt){this._zone=gt,this._eventNameToPlugin=new Map,Ae.forEach(sn=>sn.manager=this),this._plugins=Ae.slice().reverse()}addEventListener(Ae,gt,sn){return this._findPluginFor(gt).addEventListener(Ae,gt,sn)}addGlobalEventListener(Ae,gt,sn){return this._findPluginFor(gt).addGlobalEventListener(Ae,gt,sn)}getZone(){return this._zone}_findPluginFor(Ae){const gt=this._eventNameToPlugin.get(Ae);if(gt)return gt;const sn=this._plugins;for(let vr=0;vr<sn.length;vr++){const Yn=sn[vr];if(Yn.supports(Ae))return this._eventNameToPlugin.set(Ae,Yn),Yn}throw new Error(`No event manager plugin found for event ${Ae}`)}}return ze.\u0275fac=function(Ae){return new(Ae||ze)(k.LFG(Et),k.LFG(k.R0b))},ze.\u0275prov=k.Yz7({token:ze,factory:ze.\u0275fac}),ze})();class In{constructor(Me){this._doc=Me}addGlobalEventListener(Me,Ae,gt){const sn=(0,g.q)().getGlobalEventTarget(this._doc,Me);if(!sn)throw new Error(`Unsupported event target ${sn} for event ${Ae}`);return this.addEventListener(sn,Ae,gt)}}let Ot=(()=>{class ze{constructor(){this._stylesSet=new Set}addStyles(Ae){const gt=new Set;Ae.forEach(sn=>{this._stylesSet.has(sn)||(this._stylesSet.add(sn),gt.add(sn))}),this.onStylesAdded(gt)}onStylesAdded(Ae){}getAllStyles(){return Array.from(this._stylesSet)}}return ze.\u0275fac=function(Ae){return new(Ae||ze)},ze.\u0275prov=k.Yz7({token:ze,factory:ze.\u0275fac}),ze})(),tn=(()=>{class ze extends Ot{constructor(Ae){super(),this._doc=Ae,this._hostNodes=new Map,this._hostNodes.set(Ae.head,[])}_addStylesToHost(Ae,gt,sn){Ae.forEach(vr=>{const Yn=this._doc.createElement("style");Yn.textContent=vr,sn.push(gt.appendChild(Yn))})}addHost(Ae){const gt=[];this._addStylesToHost(this._stylesSet,Ae,gt),this._hostNodes.set(Ae,gt)}removeHost(Ae){const gt=this._hostNodes.get(Ae);gt&&gt.forEach(Ln),this._hostNodes.delete(Ae)}onStylesAdded(Ae){this._hostNodes.forEach((gt,sn)=>{this._addStylesToHost(Ae,sn,gt)})}ngOnDestroy(){this._hostNodes.forEach(Ae=>Ae.forEach(Ln))}}return ze.\u0275fac=function(Ae){return new(Ae||ze)(k.LFG(g.K0))},ze.\u0275prov=k.Yz7({token:ze,factory:ze.\u0275fac}),ze})();function Ln(ze){(0,g.q)().remove(ze)}const dn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xe=/%COMP%/g;function Re(ze,Me,Ae){for(let gt=0;gt<Me.length;gt++){let sn=Me[gt];Array.isArray(sn)?Re(ze,sn,Ae):(sn=sn.replace(xe,ze),Ae.push(sn))}return Ae}function wt(ze){return Me=>{if("__ngUnwrap__"===Me)return ze;!1===ze(Me)&&(Me.preventDefault(),Me.returnValue=!1)}}let Lt=(()=>{class ze{constructor(Ae,gt,sn){this.eventManager=Ae,this.sharedStylesHost=gt,this.appId=sn,this.rendererByCompId=new Map,this.defaultRenderer=new pt(Ae)}createRenderer(Ae,gt){if(!Ae||!gt)return this.defaultRenderer;switch(gt.encapsulation){case k.ifc.Emulated:{let sn=this.rendererByCompId.get(gt.id);return sn||(sn=new sr(this.eventManager,this.sharedStylesHost,gt,this.appId),this.rendererByCompId.set(gt.id,sn)),sn.applyToHost(Ae),sn}case 1:case k.ifc.ShadowDom:return new or(this.eventManager,this.sharedStylesHost,Ae,gt);default:if(!this.rendererByCompId.has(gt.id)){const sn=Re(gt.id,gt.styles,[]);this.sharedStylesHost.addStyles(sn),this.rendererByCompId.set(gt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ze.\u0275fac=function(Ae){return new(Ae||ze)(k.LFG(un),k.LFG(tn),k.LFG(k.AFp))},ze.\u0275prov=k.Yz7({token:ze,factory:ze.\u0275fac}),ze})();class pt{constructor(Me){this.eventManager=Me,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Me,Ae){return Ae?document.createElementNS(dn[Ae]||Ae,Me):document.createElement(Me)}createComment(Me){return document.createComment(Me)}createText(Me){return document.createTextNode(Me)}appendChild(Me,Ae){Me.appendChild(Ae)}insertBefore(Me,Ae,gt){Me&&Me.insertBefore(Ae,gt)}removeChild(Me,Ae){Me&&Me.removeChild(Ae)}selectRootElement(Me,Ae){let gt="string"==typeof Me?document.querySelector(Me):Me;if(!gt)throw new Error(`The selector "${Me}" did not match any elements`);return Ae||(gt.textContent=""),gt}parentNode(Me){return Me.parentNode}nextSibling(Me){return Me.nextSibling}setAttribute(Me,Ae,gt,sn){if(sn){Ae=sn+":"+Ae;const vr=dn[sn];vr?Me.setAttributeNS(vr,Ae,gt):Me.setAttribute(Ae,gt)}else Me.setAttribute(Ae,gt)}removeAttribute(Me,Ae,gt){if(gt){const sn=dn[gt];sn?Me.removeAttributeNS(sn,Ae):Me.removeAttribute(`${gt}:${Ae}`)}else Me.removeAttribute(Ae)}addClass(Me,Ae){Me.classList.add(Ae)}removeClass(Me,Ae){Me.classList.remove(Ae)}setStyle(Me,Ae,gt,sn){sn&(k.JOm.DashCase|k.JOm.Important)?Me.style.setProperty(Ae,gt,sn&k.JOm.Important?"important":""):Me.style[Ae]=gt}removeStyle(Me,Ae,gt){gt&k.JOm.DashCase?Me.style.removeProperty(Ae):Me.style[Ae]=""}setProperty(Me,Ae,gt){Me[Ae]=gt}setValue(Me,Ae){Me.nodeValue=Ae}listen(Me,Ae,gt){return"string"==typeof Me?this.eventManager.addGlobalEventListener(Me,Ae,wt(gt)):this.eventManager.addEventListener(Me,Ae,wt(gt))}}class sr extends pt{constructor(Me,Ae,gt,sn){super(Me),this.component=gt;const vr=Re(sn+"-"+gt.id,gt.styles,[]);Ae.addStyles(vr),this.contentAttr=function Oe(ze){return"_ngcontent-%COMP%".replace(xe,ze)}(sn+"-"+gt.id),this.hostAttr=function Bt(ze){return"_nghost-%COMP%".replace(xe,ze)}(sn+"-"+gt.id)}applyToHost(Me){super.setAttribute(Me,this.hostAttr,"")}createElement(Me,Ae){const gt=super.createElement(Me,Ae);return super.setAttribute(gt,this.contentAttr,""),gt}}class or extends pt{constructor(Me,Ae,gt,sn){super(Me),this.sharedStylesHost=Ae,this.hostEl=gt,this.shadowRoot=gt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const vr=Re(sn.id,sn.styles,[]);for(let Yn=0;Yn<vr.length;Yn++){const ai=document.createElement("style");ai.textContent=vr[Yn],this.shadowRoot.appendChild(ai)}}nodeOrShadowRoot(Me){return Me===this.hostEl?this.shadowRoot:Me}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Me,Ae){return super.appendChild(this.nodeOrShadowRoot(Me),Ae)}insertBefore(Me,Ae,gt){return super.insertBefore(this.nodeOrShadowRoot(Me),Ae,gt)}removeChild(Me,Ae){return super.removeChild(this.nodeOrShadowRoot(Me),Ae)}parentNode(Me){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Me)))}}let mn=(()=>{class ze extends In{constructor(Ae){super(Ae)}supports(Ae){return!0}addEventListener(Ae,gt,sn){return Ae.addEventListener(gt,sn,!1),()=>this.removeEventListener(Ae,gt,sn)}removeEventListener(Ae,gt,sn){return Ae.removeEventListener(gt,sn)}}return ze.\u0275fac=function(Ae){return new(Ae||ze)(k.LFG(g.K0))},ze.\u0275prov=k.Yz7({token:ze,factory:ze.\u0275fac}),ze})();const Tr=["alt","control","meta","shift"],Vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},it={alt:ze=>ze.altKey,control:ze=>ze.ctrlKey,meta:ze=>ze.metaKey,shift:ze=>ze.shiftKey};let At=(()=>{class ze extends In{constructor(Ae){super(Ae)}supports(Ae){return null!=ze.parseEventName(Ae)}addEventListener(Ae,gt,sn){const vr=ze.parseEventName(gt),Yn=ze.eventCallback(vr.fullKey,sn,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(Ae,vr.domEventName,Yn))}static parseEventName(Ae){const gt=Ae.toLowerCase().split("."),sn=gt.shift();if(0===gt.length||"keydown"!==sn&&"keyup"!==sn)return null;const vr=ze._normalizeKey(gt.pop());let Yn="";if(Tr.forEach(Qi=>{const os=gt.indexOf(Qi);os>-1&&(gt.splice(os,1),Yn+=Qi+".")}),Yn+=vr,0!=gt.length||0===vr.length)return null;const ai={};return ai.domEventName=sn,ai.fullKey=Yn,ai}static getEventFullKey(Ae){let gt="",sn=function ut(ze){let Me=ze.key;if(null==Me){if(Me=ze.keyIdentifier,null==Me)return"Unidentified";Me.startsWith("U+")&&(Me=String.fromCharCode(parseInt(Me.substring(2),16)),3===ze.location&&kt.hasOwnProperty(Me)&&(Me=kt[Me]))}return Vt[Me]||Me}(Ae);return sn=sn.toLowerCase()," "===sn?sn="space":"."===sn&&(sn="dot"),Tr.forEach(vr=>{vr!=sn&&it[vr](Ae)&&(gt+=vr+".")}),gt+=sn,gt}static eventCallback(Ae,gt,sn){return vr=>{ze.getEventFullKey(vr)===Ae&&sn.runGuarded(()=>gt(vr))}}static _normalizeKey(Ae){return"esc"===Ae?"escape":Ae}}return ze.\u0275fac=function(Ae){return new(Ae||ze)(k.LFG(g.K0))},ze.\u0275prov=k.Yz7({token:ze,factory:ze.\u0275fac}),ze})();const ir=(0,k.eFA)(k._c5,"browser",[{provide:k.Lbi,useValue:g.bD},{provide:k.g9A,useValue:function Qt(){ae.makeCurrent(),bt.init()},multi:!0},{provide:g.K0,useFactory:function Xt(){return(0,k.RDi)(document),document},deps:[]}]),ur=[{provide:k.zSh,useValue:"root"},{provide:k.qLn,useFactory:function Mt(){return new k.qLn},deps:[]},{provide:Et,useClass:mn,multi:!0,deps:[g.K0,k.R0b,k.Lbi]},{provide:Et,useClass:At,multi:!0,deps:[g.K0]},{provide:Lt,useClass:Lt,deps:[un,tn,k.AFp]},{provide:k.FYo,useExisting:Lt},{provide:Ot,useExisting:tn},{provide:tn,useClass:tn,deps:[g.K0]},{provide:k.dDg,useClass:k.dDg,deps:[k.R0b]},{provide:un,useClass:un,deps:[Et,k.R0b]},{provide:g.JF,useClass:Tn,deps:[]}];let Yr=(()=>{class ze{constructor(Ae){if(Ae)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Ae){return{ngModule:ze,providers:[{provide:k.AFp,useValue:Ae.appId},{provide:at,useExisting:k.AFp},Pe]}}}return ze.\u0275fac=function(Ae){return new(Ae||ze)(k.LFG(ze,12))},ze.\u0275mod=k.oAB({type:ze}),ze.\u0275inj=k.cJS({providers:ur,imports:[g.ez,k.hGG]}),ze})(),Mr=(()=>{class ze{constructor(Ae){this._doc=Ae}getTitle(){return this._doc.title}setTitle(Ae){this._doc.title=Ae||""}}return ze.\u0275fac=function(Ae){return new(Ae||ze)(k.LFG(g.K0))},ze.\u0275prov=k.Yz7({token:ze,factory:function(Ae){let gt=null;return gt=Ae?new Ae:function xr(){return new Mr((0,k.LFG)(g.K0))}(),gt},providedIn:"root"}),ze})();"undefined"!=typeof window&&window;let Ue=(()=>{class ze{}return ze.\u0275fac=function(Ae){return new(Ae||ze)},ze.\u0275prov=k.Yz7({token:ze,factory:function(Ae){let gt=null;return gt=Ae?new(Ae||ze):k.LFG(ln),gt},providedIn:"root"}),ze})(),ln=(()=>{class ze extends Ue{constructor(Ae){super(),this._doc=Ae}sanitize(Ae,gt){if(null==gt)return null;switch(Ae){case k.q3G.NONE:return gt;case k.q3G.HTML:return(0,k.qzn)(gt,"HTML")?(0,k.z3N)(gt):(0,k.EiD)(this._doc,String(gt)).toString();case k.q3G.STYLE:return(0,k.qzn)(gt,"Style")?(0,k.z3N)(gt):gt;case k.q3G.SCRIPT:if((0,k.qzn)(gt,"Script"))return(0,k.z3N)(gt);throw new Error("unsafe value used in a script context");case k.q3G.URL:return(0,k.yhl)(gt),(0,k.qzn)(gt,"URL")?(0,k.z3N)(gt):(0,k.mCW)(String(gt));case k.q3G.RESOURCE_URL:if((0,k.qzn)(gt,"ResourceURL"))return(0,k.z3N)(gt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Ae} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Ae){return(0,k.JVY)(Ae)}bypassSecurityTrustStyle(Ae){return(0,k.L6k)(Ae)}bypassSecurityTrustScript(Ae){return(0,k.eBb)(Ae)}bypassSecurityTrustUrl(Ae){return(0,k.LAX)(Ae)}bypassSecurityTrustResourceUrl(Ae){return(0,k.pB0)(Ae)}}return ze.\u0275fac=function(Ae){return new(Ae||ze)(k.LFG(g.K0))},ze.\u0275prov=k.Yz7({token:ze,factory:function(Ae){let gt=null;return gt=Ae?new Ae:function ft(ze){return new ln(ze.get(g.K0))}(k.LFG(k.zs3)),gt},providedIn:"root"}),ze})()},6115:(Wn,Dt,j)=>{j.d(Dt,{gz:()=>Vs,F0:()=>ar,rH:()=>tr,yS:()=>_i,Bz:()=>pr,lC:()=>Xs});var g=j(5e3),k=j(8306),he=j(4742),ae=j(8996),je=j(4671),He=j(3268),dt=j(7669),qe=j(1810),at=j(5403),Ne=j(9672);function Tn(O,M,S){O?(0,Ne.f)(S,O,M):M()}var Et=j(8421);function un(O){return new k.y(M=>{(0,Et.Xf)(O()).subscribe(M)})}var In=j(727),Ot=j(4482);function tn(){return(0,Ot.e)((O,M)=>{let S=null;O._refCount++;const q=(0,at.x)(M,void 0,void 0,void 0,()=>{if(!O||O._refCount<=0||0<--O._refCount)return void(S=null);const ne=O._connection,_e=S;S=null,ne&&(!_e||ne===_e)&&ne.unsubscribe(),M.unsubscribe()});O.subscribe(q),q.closed||(S=O.connect())})}class Ln extends k.y{constructor(M,S){super(),this.source=M,this.subjectFactory=S,this._subject=null,this._refCount=0,this._connection=null,(0,Ot.A)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,null==M||M.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new In.w0;const S=this.getSubject();M.add(this.source.subscribe((0,at.x)(S,void 0,()=>{this._teardown(),S.complete()},q=>{this._teardown(),S.error(q)},()=>this._teardown()))),M.closed&&(this._connection=null,M=In.w0.EMPTY)}return M}refCount(){return tn()(this)}}var dn=j(9646),xe=j(1135),Ge=j(2843),St=j(6805),on=j(7272),Ht=j(515),Oe=j(7579),Bt=j(9300);function Re(O){return O<=0?()=>Ht.E:(0,Ot.e)((M,S)=>{let q=[];M.subscribe((0,at.x)(S,ne=>{q.push(ne),O<q.length&&q.shift()},()=>{for(const ne of q)S.next(ne);S.complete()},void 0,()=>{q=null}))})}var wt=j(8068),Je=j(6590),Rt=j(4004),Sn=j(3900),sr=j(5698),or=j(8675),mn=j(5026),Tr=j(262),mr=j(4351),Vt=j(590),kt=j(5577),it=j(8505),At=j(8189),ut=j(9808);class Qt{constructor(M,S){this.id=M,this.url=S}}class Mt extends Qt{constructor(M,S,q="imperative",ne=null){super(M,S),this.navigationTrigger=q,this.restoredState=ne}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xt extends Qt{constructor(M,S,q){super(M,S),this.urlAfterRedirects=q}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hn extends Qt{constructor(M,S,q){super(M,S),this.reason=q}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ir extends Qt{constructor(M,S,q){super(M,S),this.error=q}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ur extends Qt{constructor(M,S,q,ne){super(M,S),this.urlAfterRedirects=q,this.state=ne}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yr extends Qt{constructor(M,S,q,ne){super(M,S),this.urlAfterRedirects=q,this.state=ne}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oi extends Qt{constructor(M,S,q,ne,_e){super(M,S),this.urlAfterRedirects=q,this.state=ne,this.shouldActivate=_e}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class er extends Qt{constructor(M,S,q,ne){super(M,S),this.urlAfterRedirects=q,this.state=ne}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wr extends Qt{constructor(M,S,q,ne){super(M,S),this.urlAfterRedirects=q,this.state=ne}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xr{constructor(M){this.route=M}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Mr{constructor(M){this.route=M}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class is{constructor(M){this.snapshot=M}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yi{constructor(M){this.snapshot=M}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cn{constructor(M){this.snapshot=M}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nt{constructor(M){this.snapshot=M}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(M,S,q){this.routerEvent=M,this.position=S,this.anchor=q}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class nn{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const S=this.params[M];return Array.isArray(S)?S[0]:S}return null}getAll(M){if(this.has(M)){const S=this.params[M];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function En(O){return new nn(O)}const qn="ngNavigationCancelingError";function Jr(O){const M=Error("NavigationCancelingError: "+O);return M[qn]=!0,M}function Fr(O,M,S){const q=S.path.split("/");if(q.length>O.length||"full"===S.pathMatch&&(M.hasChildren()||q.length<O.length))return null;const ne={};for(let _e=0;_e<q.length;_e++){const Be=q[_e],ot=O[_e];if(Be.startsWith(":"))ne[Be.substring(1)]=ot;else if(Be!==ot.path)return null}return{consumed:O.slice(0,q.length),posParams:ne}}function Oi(O,M){const S=O?Object.keys(O):void 0,q=M?Object.keys(M):void 0;if(!S||!q||S.length!=q.length)return!1;let ne;for(let _e=0;_e<S.length;_e++)if(ne=S[_e],!gi(O[ne],M[ne]))return!1;return!0}function gi(O,M){if(Array.isArray(O)&&Array.isArray(M)){if(O.length!==M.length)return!1;const S=[...O].sort(),q=[...M].sort();return S.every((ne,_e)=>q[_e]===ne)}return O===M}function Bn(O){return Array.prototype.concat.apply([],O)}function mi(O){return O.length>0?O[O.length-1]:null}function ki(O,M){for(const S in O)O.hasOwnProperty(S)&&M(O[S],S)}function kn(O){return(0,g.CqO)(O)?O:(0,g.QGY)(O)?(0,ae.D)(Promise.resolve(O)):(0,dn.of)(O)}const Vn={exact:function Qe(O,M,S){if(!sn(O.segments,M.segments)||!Ft(O.segments,M.segments,S)||O.numberOfChildren!==M.numberOfChildren)return!1;for(const q in M.children)if(!O.children[q]||!Qe(O.children[q],M.children[q],S))return!1;return!0},subset:ft},Pr={exact:function Vr(O,M){return Oi(O,M)},subset:function Ue(O,M){return Object.keys(M).length<=Object.keys(O).length&&Object.keys(M).every(S=>gi(O[S],M[S]))},ignored:()=>!0};function Or(O,M,S){return Vn[S.paths](O.root,M.root,S.matrixParams)&&Pr[S.queryParams](O.queryParams,M.queryParams)&&!("exact"===S.fragment&&O.fragment!==M.fragment)}function ft(O,M,S){return ln(O,M,M.segments,S)}function ln(O,M,S,q){if(O.segments.length>S.length){const ne=O.segments.slice(0,S.length);return!(!sn(ne,S)||M.hasChildren()||!Ft(ne,S,q))}if(O.segments.length===S.length){if(!sn(O.segments,S)||!Ft(O.segments,S,q))return!1;for(const ne in M.children)if(!O.children[ne]||!ft(O.children[ne],M.children[ne],q))return!1;return!0}{const ne=S.slice(0,O.segments.length),_e=S.slice(O.segments.length);return!!(sn(O.segments,ne)&&Ft(O.segments,ne,q)&&O.children[Gt])&&ln(O.children[Gt],M,_e,q)}}function Ft(O,M,S){return M.every((q,ne)=>Pr[S](O[ne].parameters,q.parameters))}class ze{constructor(M,S,q){this.root=M,this.queryParams=S,this.fragment=q}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=En(this.queryParams)),this._queryParamMap}toString(){return Qi.serialize(this)}}class Me{constructor(M,S){this.segments=M,this.children=S,this.parent=null,ki(S,(q,ne)=>q.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return os(this)}}class Ae{constructor(M,S){this.path=M,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=En(this.parameters)),this._parameterMap}toString(){return li(this)}}function sn(O,M){return O.length===M.length&&O.every((S,q)=>S.path===M[q].path)}class Yn{}class ai{parse(M){const S=new es(M);return new ze(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(M){const S=`/${Hs(M.root,!0)}`,q=function hs(O){const M=Object.keys(O).map(S=>{const q=O[S];return Array.isArray(q)?q.map(ne=>`${ci(S)}=${ci(ne)}`).join("&"):`${ci(S)}=${ci(q)}`}).filter(S=>!!S);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${S}${q}${"string"==typeof M.fragment?`#${function as(O){return encodeURI(O)}(M.fragment)}`:""}`}}const Qi=new ai;function os(O){return O.segments.map(M=>li(M)).join("/")}function Hs(O,M){if(!O.hasChildren())return os(O);if(M){const S=O.children[Gt]?Hs(O.children[Gt],!1):"",q=[];return ki(O.children,(ne,_e)=>{_e!==Gt&&q.push(`${_e}:${Hs(ne,!1)}`)}),q.length>0?`${S}(${q.join("//")})`:S}{const S=function vr(O,M){let S=[];return ki(O.children,(q,ne)=>{ne===Gt&&(S=S.concat(M(q,ne)))}),ki(O.children,(q,ne)=>{ne!==Gt&&(S=S.concat(M(q,ne)))}),S}(O,(q,ne)=>ne===Gt?[Hs(O.children[Gt],!1)]:[`${ne}:${Hs(q,!1)}`]);return 1===Object.keys(O.children).length&&null!=O.children[Gt]?`${os(O)}/${S[0]}`:`${os(O)}/(${S.join("//")})`}}function Fi(O){return encodeURIComponent(O).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ci(O){return Fi(O).replace(/%3B/gi,";")}function wi(O){return Fi(O).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cn(O){return decodeURIComponent(O)}function br(O){return Cn(O.replace(/\+/g,"%20"))}function li(O){return`${wi(O.path)}${function Pi(O){return Object.keys(O).map(M=>`;${wi(M)}=${wi(O[M])}`).join("")}(O.parameters)}`}const Xi=/^[^\/()?;=#]+/;function Ji(O){const M=O.match(Xi);return M?M[0]:""}const ji=/^[^=?&#]+/,Hi=/^[^&#]+/;class es{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let q={};return this.peekStartsWith("(")&&(q=this.parseParens(!1)),(M.length>0||Object.keys(S).length>0)&&(q[Gt]=new Me(M,S)),q}parseSegment(){const M=Ji(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(M),new Ae(Cn(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const S=Ji(this.remaining);if(!S)return;this.capture(S);let q="";if(this.consumeOptional("=")){const ne=Ji(this.remaining);ne&&(q=ne,this.capture(q))}M[Cn(S)]=Cn(q)}parseQueryParam(M){const S=function Ii(O){const M=O.match(ji);return M?M[0]:""}(this.remaining);if(!S)return;this.capture(S);let q="";if(this.consumeOptional("=")){const Be=function qr(O){const M=O.match(Hi);return M?M[0]:""}(this.remaining);Be&&(q=Be,this.capture(q))}const ne=br(S),_e=br(q);if(M.hasOwnProperty(ne)){let Be=M[ne];Array.isArray(Be)||(Be=[Be],M[ne]=Be),Be.push(_e)}else M[ne]=_e}parseParens(M){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const q=Ji(this.remaining),ne=this.remaining[q.length];if("/"!==ne&&")"!==ne&&";"!==ne)throw new Error(`Cannot parse url '${this.url}'`);let _e;q.indexOf(":")>-1?(_e=q.substr(0,q.indexOf(":")),this.capture(_e),this.capture(":")):M&&(_e=Gt);const Be=this.parseChildren();S[_e]=1===Object.keys(Be).length?Be[Gt]:new Me([],Be),this.consumeOptional("//")}return S}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new Error(`Expected "${M}".`)}}class ls{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const S=this.pathFromRoot(M);return S.length>1?S[S.length-2]:null}children(M){const S=Cs(M,this._root);return S?S.children.map(q=>q.value):[]}firstChild(M){const S=Cs(M,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(M){const S=Qr(M,this._root);return S.length<2?[]:S[S.length-2].children.map(ne=>ne.value).filter(ne=>ne!==M)}pathFromRoot(M){return Qr(M,this._root).map(S=>S.value)}}function Cs(O,M){if(O===M.value)return M;for(const S of M.children){const q=Cs(O,S);if(q)return q}return null}function Qr(O,M){if(O===M.value)return[M];for(const S of M.children){const q=Qr(O,S);if(q.length)return q.unshift(M),q}return[]}class wr{constructor(M,S){this.value=M,this.children=S}toString(){return`TreeNode(${this.value})`}}function Sr(O){const M={};return O&&O.children.forEach(S=>M[S.value.outlet]=S),M}class Ki extends ls{constructor(M,S){super(M),this.snapshot=S,gs(this,M)}toString(){return this.snapshot.toString()}}function Br(O,M){const S=function xi(O,M){const Be=new ui([],{},{},"",{},Gt,M,null,O.root,-1,{});return new Ir("",new wr(Be,[]))}(O,M),q=new xe.X([new Ae("",{})]),ne=new xe.X({}),_e=new xe.X({}),Be=new xe.X({}),ot=new xe.X(""),It=new Vs(q,ne,Be,ot,_e,Gt,M,S.root);return It.snapshot=S.root,new Ki(new wr(It,[]),S)}class Vs{constructor(M,S,q,ne,_e,Be,ot,It){this.url=M,this.params=S,this.queryParams=q,this.fragment=ne,this.data=_e,this.outlet=Be,this.component=ot,this._futureSnapshot=It}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Rt.U)(M=>En(M)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Rt.U)(M=>En(M)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gi(O,M="emptyOnly"){const S=O.pathFromRoot;let q=0;if("always"!==M)for(q=S.length-1;q>=1;){const ne=S[q],_e=S[q-1];if(ne.routeConfig&&""===ne.routeConfig.path)q--;else{if(_e.component)break;q--}}return function fs(O){return O.reduce((M,S)=>({params:Object.assign(Object.assign({},M.params),S.params),data:Object.assign(Object.assign({},M.data),S.data),resolve:Object.assign(Object.assign({},M.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice(q))}class ui{constructor(M,S,q,ne,_e,Be,ot,It,Ut,Xn,Zn){this.url=M,this.params=S,this.queryParams=q,this.fragment=ne,this.data=_e,this.outlet=Be,this.component=ot,this.routeConfig=It,this._urlSegment=Ut,this._lastPathIndex=Xn,this._resolve=Zn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=En(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=En(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(q=>q.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ir extends ls{constructor(M,S){super(S),this.url=M,gs(this,S)}toString(){return ms(this._root)}}function gs(O,M){M.value._routerState=O,M.children.forEach(S=>gs(O,S))}function ms(O){const M=O.children.length>0?` { ${O.children.map(ms).join(", ")} } `:"";return`${O.value}${M}`}function bs(O){if(O.snapshot){const M=O.snapshot,S=O._futureSnapshot;O.snapshot=S,Oi(M.queryParams,S.queryParams)||O.queryParams.next(S.queryParams),M.fragment!==S.fragment&&O.fragment.next(S.fragment),Oi(M.params,S.params)||O.params.next(S.params),function ds(O,M){if(O.length!==M.length)return!1;for(let S=0;S<O.length;++S)if(!Oi(O[S],M[S]))return!1;return!0}(M.url,S.url)||O.url.next(S.url),Oi(M.data,S.data)||O.data.next(S.data)}else O.snapshot=O._futureSnapshot,O.data.next(O._futureSnapshot.data)}function Bi(O,M){const S=Oi(O.params,M.params)&&function gt(O,M){return sn(O,M)&&O.every((S,q)=>Oi(S.parameters,M[q].parameters))}(O.url,M.url);return S&&!(!O.parent!=!M.parent)&&(!O.parent||Bi(O.parent,M.parent))}function co(O,M,S){if(S&&O.shouldReuseRoute(M.value,S.value.snapshot)){const q=S.value;q._futureSnapshot=M.value;const ne=function Ns(O,M,S){return M.children.map(q=>{for(const ne of S.children)if(O.shouldReuseRoute(q.value,ne.value.snapshot))return co(O,q,ne);return co(O,q)})}(O,M,S);return new wr(q,ne)}{if(O.shouldAttach(M.value)){const _e=O.retrieve(M.value);if(null!==_e){const Be=_e.route;return Be.value._futureSnapshot=M.value,Be.children=M.children.map(ot=>co(O,ot)),Be}}const q=function ns(O){return new Vs(new xe.X(O.url),new xe.X(O.params),new xe.X(O.queryParams),new xe.X(O.fragment),new xe.X(O.data),O.outlet,O.component,O)}(M.value),ne=M.children.map(_e=>co(O,_e));return new wr(q,ne)}}function ht(O){return"object"==typeof O&&null!=O&&!O.outlets&&!O.segmentPath}function xt(O){return"object"==typeof O&&null!=O&&O.outlets}function _n(O,M,S,q,ne){let _e={};if(q&&ki(q,(ot,It)=>{_e[It]=Array.isArray(ot)?ot.map(Ut=>`${Ut}`):`${ot}`}),O===M)return new ze(S,_e,ne);const Be=$n(O,M,S);return new ze(Be,_e,ne)}function $n(O,M,S){const q={};return ki(O.children,(ne,_e)=>{q[_e]=ne===M?S:$n(ne,M,S)}),new Me(O.segments,q)}class Dr{constructor(M,S,q){if(this.isAbsolute=M,this.numberOfDoubleDots=S,this.commands=q,M&&q.length>0&&ht(q[0]))throw new Error("Root segment cannot have matrix parameters");const ne=q.find(xt);if(ne&&ne!==mi(q))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zi{constructor(M,S,q){this.segmentGroup=M,this.processChildren=S,this.index=q}}function _s(O,M,S){if(O||(O=new Me([],{})),0===O.segments.length&&O.hasChildren())return As(O,M,S);const q=function Yo(O,M,S){let q=0,ne=M;const _e={match:!1,pathIndex:0,commandIndex:0};for(;ne<O.segments.length;){if(q>=S.length)return _e;const Be=O.segments[ne],ot=S[q];if(xt(ot))break;const It=`${ot}`,Ut=q<S.length-1?S[q+1]:null;if(ne>0&&void 0===It)break;if(It&&Ut&&"object"==typeof Ut&&void 0===Ut.outlets){if(!Lo(It,Ut,Be))return _e;q+=2}else{if(!Lo(It,{},Be))return _e;q++}ne++}return{match:!0,pathIndex:ne,commandIndex:q}}(O,M,S),ne=S.slice(q.commandIndex);if(q.match&&q.pathIndex<O.segments.length){const _e=new Me(O.segments.slice(0,q.pathIndex),{});return _e.children[Gt]=new Me(O.segments.slice(q.pathIndex),O.children),As(_e,0,ne)}return q.match&&0===ne.length?new Me(O.segments,{}):q.match&&!O.hasChildren()?Ts(O,M,S):q.match?As(O,0,ne):Ts(O,M,S)}function As(O,M,S){if(0===S.length)return new Me(O.segments,{});{const q=function ti(O){return xt(O[0])?O[0].outlets:{[Gt]:O}}(S),ne={};return ki(q,(_e,Be)=>{"string"==typeof _e&&(_e=[_e]),null!==_e&&(ne[Be]=_s(O.children[Be],M,_e))}),ki(O.children,(_e,Be)=>{void 0===q[Be]&&(ne[Be]=_e)}),new Me(O.segments,ne)}}function Ts(O,M,S){const q=O.segments.slice(0,M);let ne=0;for(;ne<S.length;){const _e=S[ne];if(xt(_e)){const It=mo(_e.outlets);return new Me(q,It)}if(0===ne&&ht(S[0])){q.push(new Ae(O.segments[M].path,ps(S[0]))),ne++;continue}const Be=xt(_e)?_e.outlets[Gt]:`${_e}`,ot=ne<S.length-1?S[ne+1]:null;Be&&ot&&ht(ot)?(q.push(new Ae(Be,ps(ot))),ne+=2):(q.push(new Ae(Be,{})),ne++)}return new Me(q,{})}function mo(O){const M={};return ki(O,(S,q)=>{"string"==typeof S&&(S=[S]),null!==S&&(M[q]=Ts(new Me([],{}),0,S))}),M}function ps(O){const M={};return ki(O,(S,q)=>M[q]=`${S}`),M}function Lo(O,M,S){return O==S.path&&Oi(M,S.parameters)}class ho{constructor(M,S,q,ne){this.routeReuseStrategy=M,this.futureState=S,this.currState=q,this.forwardEvent=ne}activate(M){const S=this.futureState._root,q=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,q,M),bs(this.futureState.root),this.activateChildRoutes(S,q,M)}deactivateChildRoutes(M,S,q){const ne=Sr(S);M.children.forEach(_e=>{const Be=_e.value.outlet;this.deactivateRoutes(_e,ne[Be],q),delete ne[Be]}),ki(ne,(_e,Be)=>{this.deactivateRouteAndItsChildren(_e,q)})}deactivateRoutes(M,S,q){const ne=M.value,_e=S?S.value:null;if(ne===_e)if(ne.component){const Be=q.getContext(ne.outlet);Be&&this.deactivateChildRoutes(M,S,Be.children)}else this.deactivateChildRoutes(M,S,q);else _e&&this.deactivateRouteAndItsChildren(S,q)}deactivateRouteAndItsChildren(M,S){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,S):this.deactivateRouteAndOutlet(M,S)}detachAndStoreRouteSubtree(M,S){const q=S.getContext(M.value.outlet),ne=q&&M.value.component?q.children:S,_e=Sr(M);for(const Be of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Be],ne);if(q&&q.outlet){const Be=q.outlet.detach(),ot=q.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:Be,route:M,contexts:ot})}}deactivateRouteAndOutlet(M,S){const q=S.getContext(M.value.outlet),ne=q&&M.value.component?q.children:S,_e=Sr(M);for(const Be of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Be],ne);q&&q.outlet&&(q.outlet.deactivate(),q.children.onOutletDeactivated(),q.attachRef=null,q.resolver=null,q.route=null)}activateChildRoutes(M,S,q){const ne=Sr(S);M.children.forEach(_e=>{this.activateRoutes(_e,ne[_e.value.outlet],q),this.forwardEvent(new nt(_e.value.snapshot))}),M.children.length&&this.forwardEvent(new Yi(M.value.snapshot))}activateRoutes(M,S,q){const ne=M.value,_e=S?S.value:null;if(bs(ne),ne===_e)if(ne.component){const Be=q.getOrCreateContext(ne.outlet);this.activateChildRoutes(M,S,Be.children)}else this.activateChildRoutes(M,S,q);else if(ne.component){const Be=q.getOrCreateContext(ne.outlet);if(this.routeReuseStrategy.shouldAttach(ne.snapshot)){const ot=this.routeReuseStrategy.retrieve(ne.snapshot);this.routeReuseStrategy.store(ne.snapshot,null),Be.children.onOutletReAttached(ot.contexts),Be.attachRef=ot.componentRef,Be.route=ot.route.value,Be.outlet&&Be.outlet.attach(ot.componentRef,ot.route.value),bs(ot.route.value),this.activateChildRoutes(M,null,Be.children)}else{const ot=function Us(O){for(let M=O.parent;M;M=M.parent){const S=M.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(ne.snapshot),It=ot?ot.module.componentFactoryResolver:null;Be.attachRef=null,Be.route=ne,Be.resolver=It,Be.outlet&&Be.outlet.activateWith(ne,It),this.activateChildRoutes(M,null,Be.children)}}else this.activateChildRoutes(M,null,q)}}class Gs{constructor(M,S){this.routes=M,this.module=S}}function zs(O){return"function"==typeof O}function Qs(O){return O instanceof ze}const us=Symbol("INITIAL_VALUE");function so(){return(0,Sn.w)(O=>function Pe(...O){const M=(0,dt.yG)(O),S=(0,dt.jO)(O),{args:q,keys:ne}=(0,he.D)(O);if(0===q.length)return(0,ae.D)([],M);const _e=new k.y(function bt(O,M,S=je.y){return q=>{Tn(M,()=>{const{length:ne}=O,_e=new Array(ne);let Be=ne,ot=ne;for(let It=0;It<ne;It++)Tn(M,()=>{const Ut=(0,ae.D)(O[It],M);let Xn=!1;Ut.subscribe((0,at.x)(q,Zn=>{_e[It]=Zn,Xn||(Xn=!0,ot--),ot||q.next(S(_e.slice()))},()=>{--Be||q.complete()}))},q)},q)}}(q,M,ne?Be=>(0,qe.n)(ne,Be):je.y));return S?_e.pipe((0,He.Z)(S)):_e}(O.map(M=>M.pipe((0,sr.q)(1),(0,or.O)(us)))).pipe((0,mn.R)((M,S)=>{let q=!1;return S.reduce((ne,_e,Be)=>ne!==us?ne:(_e===us&&(q=!0),q||!1!==_e&&Be!==S.length-1&&!Qs(_e)?ne:_e),M)},us),(0,Bt.h)(M=>M!==us),(0,Rt.U)(M=>Qs(M)?M:!0===M),(0,sr.q)(1)))}class Ms{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Li,this.attachRef=null}}class Li{constructor(){this.contexts=new Map}onChildOutletCreated(M,S){const q=this.getOrCreateContext(M);q.outlet=S,this.contexts.set(M,q)}onChildOutletDestroyed(M){const S=this.getContext(M);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const M=this.contexts;return this.contexts=new Map,M}onOutletReAttached(M){this.contexts=M}getOrCreateContext(M){let S=this.getContext(M);return S||(S=new Ms,this.contexts.set(M,S)),S}getContext(M){return this.contexts.get(M)||null}}let Xs=(()=>{class O{constructor(S,q,ne,_e,Be){this.parentContexts=S,this.location=q,this.resolver=ne,this.changeDetector=Be,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=_e||Gt,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,q){this.activated=S,this._activatedRoute=q,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,q){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const Be=(q=q||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),ot=this.parentContexts.getOrCreateContext(this.name).children,It=new fo(S,ot,this.location.injector);this.activated=this.location.createComponent(Be,this.location.length,It),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return O.\u0275fac=function(S){return new(S||O)(g.Y36(Li),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},O.\u0275dir=g.lG2({type:O,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),O})();class fo{constructor(M,S,q){this.route=M,this.childContexts=S,this.parent=q}get(M,S){return M===Vs?this.route:M===Li?this.childContexts:this.parent.get(M,S)}}let Zs=(()=>{class O{}return O.\u0275fac=function(S){return new(S||O)},O.\u0275cmp=g.Xpm({type:O,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,q){1&S&&g._UZ(0,"router-outlet")},directives:[Xs],encapsulation:2}),O})();function Rs(O,M=""){for(let S=0;S<O.length;S++){const q=O[S];qs(q,Vi(M,q))}}function qs(O,M){O.children&&Rs(O.children,M)}function Vi(O,M){return M?O||M.path?O&&!M.path?`${O}/`:!O&&M.path?M.path:`${O}/${M.path}`:"":O}function Ti(O){const M=O.children&&O.children.map(Ti),S=M?Object.assign(Object.assign({},O),{children:M}):Object.assign({},O);return!S.component&&(M||S.loadChildren)&&S.outlet&&S.outlet!==Gt&&(S.component=Zs),S}function B(O){return O.outlet||Gt}function fe(O,M){const S=O.filter(q=>B(q)===M);return S.push(...O.filter(q=>B(q)!==M)),S}const W={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ve(O,M,S){var q;if(""===M.path)return"full"===M.pathMatch&&(O.hasChildren()||S.length>0)?Object.assign({},W):{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const _e=(M.matcher||Fr)(S,O,M);if(!_e)return Object.assign({},W);const Be={};ki(_e.posParams,(It,Ut)=>{Be[Ut]=It.path});const ot=_e.consumed.length>0?Object.assign(Object.assign({},Be),_e.consumed[_e.consumed.length-1].parameters):Be;return{matched:!0,consumedSegments:_e.consumed,remainingSegments:S.slice(_e.consumed.length),parameters:ot,positionalParamSegments:null!==(q=_e.posParams)&&void 0!==q?q:{}}}function Ke(O,M,S,q,ne="corrected"){if(S.length>0&&function hr(O,M,S){return S.some(q=>Xr(O,M,q)&&B(q)!==Gt)}(O,S,q)){const Be=new Me(M,function wn(O,M,S,q){const ne={};ne[Gt]=q,q._sourceSegment=O,q._segmentIndexShift=M.length;for(const _e of S)if(""===_e.path&&B(_e)!==Gt){const Be=new Me([],{});Be._sourceSegment=O,Be._segmentIndexShift=M.length,ne[B(_e)]=Be}return ne}(O,M,q,new Me(S,O.children)));return Be._sourceSegment=O,Be._segmentIndexShift=M.length,{segmentGroup:Be,slicedSegments:[]}}if(0===S.length&&function Gr(O,M,S){return S.some(q=>Xr(O,M,q))}(O,S,q)){const Be=new Me(O.segments,function rn(O,M,S,q,ne,_e){const Be={};for(const ot of q)if(Xr(O,S,ot)&&!ne[B(ot)]){const It=new Me([],{});It._sourceSegment=O,It._segmentIndexShift="legacy"===_e?O.segments.length:M.length,Be[B(ot)]=It}return Object.assign(Object.assign({},ne),Be)}(O,M,S,q,O.children,ne));return Be._sourceSegment=O,Be._segmentIndexShift=M.length,{segmentGroup:Be,slicedSegments:S}}const _e=new Me(O.segments,O.children);return _e._sourceSegment=O,_e._segmentIndexShift=M.length,{segmentGroup:_e,slicedSegments:S}}function Xr(O,M,S){return(!(O.hasChildren()||M.length>0)||"full"!==S.pathMatch)&&""===S.path}function ni(O,M,S,q){return!!(B(O)===q||q!==Gt&&Xr(M,S,O))&&("**"===O.path||ve(M,O,S).matched)}function yi(O,M,S){return 0===M.length&&!O.children[S]}class Zi{constructor(M){this.segmentGroup=M||null}}class Ni{constructor(M){this.urlTree=M}}function Si(O){return(0,Ge._)(new Zi(O))}function oo(O){return(0,Ge._)(new Ni(O))}class Ao{constructor(M,S,q,ne,_e){this.configLoader=S,this.urlSerializer=q,this.urlTree=ne,this.config=_e,this.allowRedirects=!0,this.ngModule=M.get(g.h0i)}apply(){const M=Ke(this.urlTree.root,[],[],this.config).segmentGroup,S=new Me(M.segments,M.children);return this.expandSegmentGroup(this.ngModule,this.config,S,Gt).pipe((0,Rt.U)(_e=>this.createUrlTree(ws(_e),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Tr.K)(_e=>{if(_e instanceof Ni)return this.allowRedirects=!1,this.match(_e.urlTree);throw _e instanceof Zi?this.noMatchError(_e):_e}))}match(M){return this.expandSegmentGroup(this.ngModule,this.config,M.root,Gt).pipe((0,Rt.U)(ne=>this.createUrlTree(ws(ne),M.queryParams,M.fragment))).pipe((0,Tr.K)(ne=>{throw ne instanceof Zi?this.noMatchError(ne):ne}))}noMatchError(M){return new Error(`Cannot match any routes. URL Segment: '${M.segmentGroup}'`)}createUrlTree(M,S,q){const ne=M.segments.length>0?new Me([],{[Gt]:M}):M;return new ze(ne,S,q)}expandSegmentGroup(M,S,q,ne){return 0===q.segments.length&&q.hasChildren()?this.expandChildren(M,S,q).pipe((0,Rt.U)(_e=>new Me([],_e))):this.expandSegment(M,q,S,q.segments,ne,!0)}expandChildren(M,S,q){const ne=[];for(const _e of Object.keys(q.children))"primary"===_e?ne.unshift(_e):ne.push(_e);return(0,ae.D)(ne).pipe((0,mr.b)(_e=>{const Be=q.children[_e],ot=fe(S,_e);return this.expandSegmentGroup(M,ot,Be,_e).pipe((0,Rt.U)(It=>({segment:It,outlet:_e})))}),(0,mn.R)((_e,Be)=>(_e[Be.outlet]=Be.segment,_e),{}),function Lt(O,M){const S=arguments.length>=2;return q=>q.pipe(O?(0,Bt.h)((ne,_e)=>O(ne,_e,q)):je.y,Re(1),S?(0,Je.d)(M):(0,wt.T)(()=>new St.K))}())}expandSegment(M,S,q,ne,_e,Be){return(0,ae.D)(q).pipe((0,mr.b)(ot=>this.expandSegmentAgainstRoute(M,S,q,ot,ne,_e,Be).pipe((0,Tr.K)(Ut=>{if(Ut instanceof Zi)return(0,dn.of)(null);throw Ut}))),(0,Vt.P)(ot=>!!ot),(0,Tr.K)((ot,It)=>{if(ot instanceof St.K||"EmptyError"===ot.name)return yi(S,ne,_e)?(0,dn.of)(new Me([],{})):Si(S);throw ot}))}expandSegmentAgainstRoute(M,S,q,ne,_e,Be,ot){return ni(ne,S,_e,Be)?void 0===ne.redirectTo?this.matchSegmentAgainstRoute(M,S,ne,_e,Be):ot&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(M,S,q,ne,_e,Be):Si(S):Si(S)}expandSegmentAgainstRouteUsingRedirect(M,S,q,ne,_e,Be){return"**"===ne.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(M,q,ne,Be):this.expandRegularSegmentAgainstRouteUsingRedirect(M,S,q,ne,_e,Be)}expandWildCardWithParamsAgainstRouteUsingRedirect(M,S,q,ne){const _e=this.applyRedirectCommands([],q.redirectTo,{});return q.redirectTo.startsWith("/")?oo(_e):this.lineralizeSegments(q,_e).pipe((0,kt.z)(Be=>{const ot=new Me(Be,{});return this.expandSegment(M,ot,S,Be,ne,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(M,S,q,ne,_e,Be){const{matched:ot,consumedSegments:It,remainingSegments:Ut,positionalParamSegments:Xn}=ve(S,ne,_e);if(!ot)return Si(S);const Zn=this.applyRedirectCommands(It,ne.redirectTo,Xn);return ne.redirectTo.startsWith("/")?oo(Zn):this.lineralizeSegments(ne,Zn).pipe((0,kt.z)(Er=>this.expandSegment(M,S,q,Er.concat(Ut),Be,!1)))}matchSegmentAgainstRoute(M,S,q,ne,_e){if("**"===q.path)return q.loadChildren?(q._loadedConfig?(0,dn.of)(q._loadedConfig):this.configLoader.load(M.injector,q)).pipe((0,Rt.U)(Zn=>(q._loadedConfig=Zn,new Me(ne,{})))):(0,dn.of)(new Me(ne,{}));const{matched:Be,consumedSegments:ot,remainingSegments:It}=ve(S,q,ne);return Be?this.getChildConfig(M,q,ne).pipe((0,kt.z)(Xn=>{const Zn=Xn.module,Er=Xn.routes,{segmentGroup:zn,slicedSegments:Is}=Ke(S,ot,It,Er),$r=new Me(zn.segments,zn.children);if(0===Is.length&&$r.hasChildren())return this.expandChildren(Zn,Er,$r).pipe((0,Rt.U)(vs=>new Me(ot,vs)));if(0===Er.length&&0===Is.length)return(0,dn.of)(new Me(ot,{}));const cs=B(q)===_e;return this.expandSegment(Zn,$r,Er,Is,cs?Gt:_e,!0).pipe((0,Rt.U)(rr=>new Me(ot.concat(rr.segments),rr.children)))})):Si(S)}getChildConfig(M,S,q){return S.children?(0,dn.of)(new Gs(S.children,M)):S.loadChildren?void 0!==S._loadedConfig?(0,dn.of)(S._loadedConfig):this.runCanLoadGuards(M.injector,S,q).pipe((0,kt.z)(ne=>ne?this.configLoader.load(M.injector,S).pipe((0,Rt.U)(_e=>(S._loadedConfig=_e,_e))):function Kr(O){return(0,Ge._)(Jr(`Cannot load children because the guard of the route "path: '${O.path}'" returned false`))}(S))):(0,dn.of)(new Gs([],M))}runCanLoadGuards(M,S,q){const ne=S.canLoad;if(!ne||0===ne.length)return(0,dn.of)(!0);const _e=ne.map(Be=>{const ot=M.get(Be);let It;if(function Ws(O){return O&&zs(O.canLoad)}(ot))It=ot.canLoad(S,q);else{if(!zs(ot))throw new Error("Invalid CanLoad guard");It=ot(S,q)}return kn(It)});return(0,dn.of)(_e).pipe(so(),(0,it.b)(Be=>{if(!Qs(Be))return;const ot=Jr(`Redirecting to "${this.urlSerializer.serialize(Be)}"`);throw ot.url=Be,ot}),(0,Rt.U)(Be=>!0===Be))}lineralizeSegments(M,S){let q=[],ne=S.root;for(;;){if(q=q.concat(ne.segments),0===ne.numberOfChildren)return(0,dn.of)(q);if(ne.numberOfChildren>1||!ne.children[Gt])return(0,Ge._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${M.redirectTo}'`));ne=ne.children[Gt]}}applyRedirectCommands(M,S,q){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),M,q)}applyRedirectCreatreUrlTree(M,S,q,ne){const _e=this.createSegmentGroup(M,S.root,q,ne);return new ze(_e,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(M,S){const q={};return ki(M,(ne,_e)=>{if("string"==typeof ne&&ne.startsWith(":")){const ot=ne.substring(1);q[_e]=S[ot]}else q[_e]=ne}),q}createSegmentGroup(M,S,q,ne){const _e=this.createSegments(M,S.segments,q,ne);let Be={};return ki(S.children,(ot,It)=>{Be[It]=this.createSegmentGroup(M,ot,q,ne)}),new Me(_e,Be)}createSegments(M,S,q,ne){return S.map(_e=>_e.path.startsWith(":")?this.findPosParam(M,_e,ne):this.findOrReturn(_e,q))}findPosParam(M,S,q){const ne=q[S.path.substring(1)];if(!ne)throw new Error(`Cannot redirect to '${M}'. Cannot find '${S.path}'.`);return ne}findOrReturn(M,S){let q=0;for(const ne of S){if(ne.path===M.path)return S.splice(q),ne;q++}return M}}function ws(O){const M={};for(const q of Object.keys(O.children)){const _e=ws(O.children[q]);(_e.segments.length>0||_e.hasChildren())&&(M[q]=_e)}return function To(O){if(1===O.numberOfChildren&&O.children[Gt]){const M=O.children[Gt];return new Me(O.segments.concat(M.segments),M.children)}return O}(new Me(O.segments,M))}class G{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class V{constructor(M,S){this.component=M,this.route=S}}function ye(O,M,S){const q=O._root;return K(q,M?M._root:null,S,[q.value])}function xn(O,M,S){const q=function ee(O){if(!O)return null;for(let M=O.parent;M;M=M.parent){const S=M.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(M);return(q?q.module.injector:S).get(O)}function K(O,M,S,q,ne={canDeactivateChecks:[],canActivateChecks:[]}){const _e=Sr(M);return O.children.forEach(Be=>{(function Ce(O,M,S,q,ne={canDeactivateChecks:[],canActivateChecks:[]}){const _e=O.value,Be=M?M.value:null,ot=S?S.getContext(O.value.outlet):null;if(Be&&_e.routeConfig===Be.routeConfig){const It=function Le(O,M,S){if("function"==typeof S)return S(O,M);switch(S){case"pathParamsChange":return!sn(O.url,M.url);case"pathParamsOrQueryParamsChange":return!sn(O.url,M.url)||!Oi(O.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bi(O,M)||!Oi(O.queryParams,M.queryParams);default:return!Bi(O,M)}}(Be,_e,_e.routeConfig.runGuardsAndResolvers);It?ne.canActivateChecks.push(new G(q)):(_e.data=Be.data,_e._resolvedData=Be._resolvedData),K(O,M,_e.component?ot?ot.children:null:S,q,ne),It&&ot&&ot.outlet&&ot.outlet.isActivated&&ne.canDeactivateChecks.push(new V(ot.outlet.component,Be))}else Be&&rt(M,ot,ne),ne.canActivateChecks.push(new G(q)),K(O,null,_e.component?ot?ot.children:null:S,q,ne)})(Be,_e[Be.value.outlet],S,q.concat([Be.value]),ne),delete _e[Be.value.outlet]}),ki(_e,(Be,ot)=>rt(Be,S.getContext(ot),ne)),ne}function rt(O,M,S){const q=Sr(O),ne=O.value;ki(q,(_e,Be)=>{rt(_e,ne.component?M?M.children.getContext(Be):null:M,S)}),S.canDeactivateChecks.push(new V(ne.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,ne))}class rs{}function l(O){return new k.y(M=>M.error(O))}class I{constructor(M,S,q,ne,_e,Be){this.rootComponentType=M,this.config=S,this.urlTree=q,this.url=ne,this.paramsInheritanceStrategy=_e,this.relativeLinkResolution=Be}recognize(){const M=Ke(this.urlTree.root,[],[],this.config.filter(Be=>void 0===Be.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,M,Gt);if(null===S)return null;const q=new ui([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),ne=new wr(q,S),_e=new Ir(this.url,ne);return this.inheritParamsAndData(_e._root),_e}inheritParamsAndData(M){const S=M.value,q=Gi(S,this.paramsInheritanceStrategy);S.params=Object.freeze(q.params),S.data=Object.freeze(q.data),M.children.forEach(ne=>this.inheritParamsAndData(ne))}processSegmentGroup(M,S,q){return 0===S.segments.length&&S.hasChildren()?this.processChildren(M,S):this.processSegment(M,S,S.segments,q)}processChildren(M,S){const q=[];for(const _e of Object.keys(S.children)){const Be=S.children[_e],ot=fe(M,_e),It=this.processSegmentGroup(ot,Be,_e);if(null===It)return null;q.push(...It)}const ne=ge(q);return function P(O){O.sort((M,S)=>M.value.outlet===Gt?-1:S.value.outlet===Gt?1:M.value.outlet.localeCompare(S.value.outlet))}(ne),ne}processSegment(M,S,q,ne){for(const _e of M){const Be=this.processSegmentAgainstRoute(_e,S,q,ne);if(null!==Be)return Be}return yi(S,q,ne)?[]:null}processSegmentAgainstRoute(M,S,q,ne){if(M.redirectTo||!ni(M,S,q,ne))return null;let _e,Be=[],ot=[];if("**"===M.path){const zn=q.length>0?mi(q).parameters:{};_e=new ui(q,zn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ce(M),B(M),M.component,M,oe(S),me(S)+q.length,le(M))}else{const zn=ve(S,M,q);if(!zn.matched)return null;Be=zn.consumedSegments,ot=zn.remainingSegments,_e=new ui(Be,zn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ce(M),B(M),M.component,M,oe(S),me(S)+Be.length,le(M))}const It=function z(O){return O.children?O.children:O.loadChildren?O._loadedConfig.routes:[]}(M),{segmentGroup:Ut,slicedSegments:Xn}=Ke(S,Be,ot,It.filter(zn=>void 0===zn.redirectTo),this.relativeLinkResolution);if(0===Xn.length&&Ut.hasChildren()){const zn=this.processChildren(It,Ut);return null===zn?null:[new wr(_e,zn)]}if(0===It.length&&0===Xn.length)return[new wr(_e,[])];const Zn=B(M)===ne,Er=this.processSegment(It,Ut,Xn,Zn?Gt:ne);return null===Er?null:[new wr(_e,Er)]}}function J(O){const M=O.value.routeConfig;return M&&""===M.path&&void 0===M.redirectTo}function ge(O){const M=[],S=new Set;for(const q of O){if(!J(q)){M.push(q);continue}const ne=M.find(_e=>q.value.routeConfig===_e.value.routeConfig);void 0!==ne?(ne.children.push(...q.children),S.add(ne)):M.push(q)}for(const q of S){const ne=ge(q.children);M.push(new wr(q.value,ne))}return M.filter(q=>!S.has(q))}function oe(O){let M=O;for(;M._sourceSegment;)M=M._sourceSegment;return M}function me(O){let M=O,S=M._segmentIndexShift?M._segmentIndexShift:0;for(;M._sourceSegment;)M=M._sourceSegment,S+=M._segmentIndexShift?M._segmentIndexShift:0;return S-1}function ce(O){return O.data||{}}function le(O){return O.resolve||{}}function ke(O){return[...Object.keys(O),...Object.getOwnPropertySymbols(O)]}function et(O){return(0,Sn.w)(M=>{const S=O(M);return S?(0,ae.D)(S).pipe((0,Rt.U)(()=>M)):(0,dn.of)(M)})}class Dn extends class vn{shouldDetach(M){return!1}store(M,S){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,S){return M.routeConfig===S.routeConfig}}{}const gn=new g.OlP("ROUTES");class Mn{constructor(M,S,q,ne){this.injector=M,this.compiler=S,this.onLoadStartListener=q,this.onLoadEndListener=ne}load(M,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const ne=this.loadModuleFactory(S.loadChildren).pipe((0,Rt.U)(_e=>{this.onLoadEndListener&&this.onLoadEndListener(S);const Be=_e.create(M);return new Gs(Bn(Be.injector.get(gn,void 0,g.XFs.Self|g.XFs.Optional)).map(Ti),Be)}),(0,Tr.K)(_e=>{throw S._loader$=void 0,_e}));return S._loader$=new Ln(ne,()=>new Oe.x).pipe(tn()),S._loader$}loadModuleFactory(M){return kn(M()).pipe((0,kt.z)(S=>S instanceof g.YKP?(0,dn.of)(S):(0,ae.D)(this.compiler.compileModuleAsync(S))))}}class _r{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,S){return M}}function Fn(O){throw O}function Jt(O,M,S){return M.parse("/")}function Pt(O,M){return(0,dn.of)(null)}const hn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ar=(()=>{class O{constructor(S,q,ne,_e,Be,ot,It){this.rootComponentType=S,this.urlSerializer=q,this.rootContexts=ne,this.location=_e,this.config=It,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oe.x,this.errorHandler=Fn,this.malformedUriErrorHandler=Jt,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Pt,afterPreactivation:Pt},this.urlHandlingStrategy=new _r,this.routeReuseStrategy=new Dn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Be.get(g.h0i),this.console=Be.get(g.c2e);const Zn=Be.get(g.R0b);this.isNgZoneEnabled=Zn instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(It),this.currentUrlTree=function zt(){return new ze(new Me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Mn(Be,ot,Er=>this.triggerEvent(new xr(Er)),Er=>this.triggerEvent(new Mr(Er))),this.routerState=Br(this.currentUrlTree,this.rootComponentType),this.transitions=new xe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const q=this.events;return S.pipe((0,Bt.h)(ne=>0!==ne.id),(0,Rt.U)(ne=>Object.assign(Object.assign({},ne),{extractedUrl:this.urlHandlingStrategy.extract(ne.rawUrl)})),(0,Sn.w)(ne=>{let _e=!1,Be=!1;return(0,dn.of)(ne).pipe((0,it.b)(ot=>{this.currentNavigation={id:ot.id,initialUrl:ot.currentRawUrl,extractedUrl:ot.extractedUrl,trigger:ot.source,extras:ot.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Sn.w)(ot=>{const It=this.browserUrlTree.toString(),Ut=!this.navigated||ot.extractedUrl.toString()!==It||It!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ut)&&this.urlHandlingStrategy.shouldProcessUrl(ot.rawUrl))return cr(ot.source)&&(this.browserUrlTree=ot.extractedUrl),(0,dn.of)(ot).pipe((0,Sn.w)(Zn=>{const Er=this.transitions.getValue();return q.next(new Mt(Zn.id,this.serializeUrl(Zn.extractedUrl),Zn.source,Zn.restoredState)),Er!==this.transitions.getValue()?Ht.E:Promise.resolve(Zn)}),function Q(O,M,S,q){return(0,Sn.w)(ne=>function Js(O,M,S,q,ne){return new Ao(O,M,S,q,ne).apply()}(O,M,S,ne.extractedUrl,q).pipe((0,Rt.U)(_e=>Object.assign(Object.assign({},ne),{urlAfterRedirects:_e}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,it.b)(Zn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Zn.urlAfterRedirects})}),function Te(O,M,S,q,ne){return(0,kt.z)(_e=>function A(O,M,S,q,ne="emptyOnly",_e="legacy"){try{const Be=new I(O,M,S,q,ne,_e).recognize();return null===Be?l(new rs):(0,dn.of)(Be)}catch(Be){return l(Be)}}(O,M,_e.urlAfterRedirects,S(_e.urlAfterRedirects),q,ne).pipe((0,Rt.U)(Be=>Object.assign(Object.assign({},_e),{targetSnapshot:Be}))))}(this.rootComponentType,this.config,Zn=>this.serializeUrl(Zn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,it.b)(Zn=>{if("eager"===this.urlUpdateStrategy){if(!Zn.extras.skipLocationChange){const zn=this.urlHandlingStrategy.merge(Zn.urlAfterRedirects,Zn.rawUrl);this.setBrowserUrl(zn,Zn)}this.browserUrlTree=Zn.urlAfterRedirects}const Er=new ur(Zn.id,this.serializeUrl(Zn.extractedUrl),this.serializeUrl(Zn.urlAfterRedirects),Zn.targetSnapshot);q.next(Er)}));if(Ut&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Er,extractedUrl:zn,source:Is,restoredState:$r,extras:cs}=ot,Ss=new Mt(Er,this.serializeUrl(zn),Is,$r);q.next(Ss);const rr=Br(zn,this.rootComponentType).snapshot;return(0,dn.of)(Object.assign(Object.assign({},ot),{targetSnapshot:rr,urlAfterRedirects:zn,extras:Object.assign(Object.assign({},cs),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ot.rawUrl,ot.resolve(null),Ht.E}),et(ot=>{const{targetSnapshot:It,id:Ut,extractedUrl:Xn,rawUrl:Zn,extras:{skipLocationChange:Er,replaceUrl:zn}}=ot;return this.hooks.beforePreactivation(It,{navigationId:Ut,appliedUrlTree:Xn,rawUrlTree:Zn,skipLocationChange:!!Er,replaceUrl:!!zn})}),(0,it.b)(ot=>{const It=new Yr(ot.id,this.serializeUrl(ot.extractedUrl),this.serializeUrl(ot.urlAfterRedirects),ot.targetSnapshot);this.triggerEvent(It)}),(0,Rt.U)(ot=>Object.assign(Object.assign({},ot),{guards:ye(ot.targetSnapshot,ot.currentSnapshot,this.rootContexts)})),function Zt(O,M){return(0,kt.z)(S=>{const{targetSnapshot:q,currentSnapshot:ne,guards:{canActivateChecks:_e,canDeactivateChecks:Be}}=S;return 0===Be.length&&0===_e.length?(0,dn.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function An(O,M,S,q){return(0,ae.D)(O).pipe((0,kt.z)(ne=>function $i(O,M,S,q,ne){const _e=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!_e||0===_e.length)return(0,dn.of)(!0);const Be=_e.map(ot=>{const It=xn(ot,M,ne);let Ut;if(function Qo(O){return O&&zs(O.canDeactivate)}(It))Ut=kn(It.canDeactivate(O,M,S,q));else{if(!zs(It))throw new Error("Invalid CanDeactivate guard");Ut=kn(It(O,M,S,q))}return Ut.pipe((0,Vt.P)())});return(0,dn.of)(Be).pipe(so())}(ne.component,ne.route,S,M,q)),(0,Vt.P)(ne=>!0!==ne,!0))}(Be,q,ne,O).pipe((0,kt.z)(ot=>ot&&function Vo(O){return"boolean"==typeof O}(ot)?function fr(O,M,S,q){return(0,ae.D)(M).pipe((0,mr.b)(ne=>(0,on.z)(function ri(O,M){return null!==O&&M&&M(new is(O)),(0,dn.of)(!0)}(ne.route.parent,q),function Kn(O,M){return null!==O&&M&&M(new cn(O)),(0,dn.of)(!0)}(ne.route,q),function hi(O,M,S){const q=M[M.length-1],_e=M.slice(0,M.length-1).reverse().map(Be=>function Ye(O){const M=O.routeConfig?O.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:O,guards:M}:null}(Be)).filter(Be=>null!==Be).map(Be=>un(()=>{const ot=Be.guards.map(It=>{const Ut=xn(It,Be.node,S);let Xn;if(function xs(O){return O&&zs(O.canActivateChild)}(Ut))Xn=kn(Ut.canActivateChild(q,O));else{if(!zs(Ut))throw new Error("Invalid CanActivateChild guard");Xn=kn(Ut(q,O))}return Xn.pipe((0,Vt.P)())});return(0,dn.of)(ot).pipe(so())}));return(0,dn.of)(_e).pipe(so())}(O,ne.path,S),function vi(O,M,S){const q=M.routeConfig?M.routeConfig.canActivate:null;if(!q||0===q.length)return(0,dn.of)(!0);const ne=q.map(_e=>un(()=>{const Be=xn(_e,M,S);let ot;if(function Bs(O){return O&&zs(O.canActivate)}(Be))ot=kn(Be.canActivate(M,O));else{if(!zs(Be))throw new Error("Invalid CanActivate guard");ot=kn(Be(M,O))}return ot.pipe((0,Vt.P)())}));return(0,dn.of)(ne).pipe(so())}(O,ne.route,S))),(0,Vt.P)(ne=>!0!==ne,!0))}(q,_e,O,M):(0,dn.of)(ot)),(0,Rt.U)(ot=>Object.assign(Object.assign({},S),{guardsResult:ot})))})}(this.ngModule.injector,ot=>this.triggerEvent(ot)),(0,it.b)(ot=>{if(Qs(ot.guardsResult)){const Ut=Jr(`Redirecting to "${this.serializeUrl(ot.guardsResult)}"`);throw Ut.url=ot.guardsResult,Ut}const It=new oi(ot.id,this.serializeUrl(ot.extractedUrl),this.serializeUrl(ot.urlAfterRedirects),ot.targetSnapshot,!!ot.guardsResult);this.triggerEvent(It)}),(0,Bt.h)(ot=>!!ot.guardsResult||(this.restoreHistory(ot),this.cancelNavigationTransition(ot,""),!1)),et(ot=>{if(ot.guards.canActivateChecks.length)return(0,dn.of)(ot).pipe((0,it.b)(It=>{const Ut=new er(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(Ut)}),(0,Sn.w)(It=>{let Ut=!1;return(0,dn.of)(It).pipe(function We(O,M){return(0,kt.z)(S=>{const{targetSnapshot:q,guards:{canActivateChecks:ne}}=S;if(!ne.length)return(0,dn.of)(S);let _e=0;return(0,ae.D)(ne).pipe((0,mr.b)(Be=>function tt(O,M,S,q){return function De(O,M,S,q){const ne=ke(O);if(0===ne.length)return(0,dn.of)({});const _e={};return(0,ae.D)(ne).pipe((0,kt.z)(Be=>function _t(O,M,S,q){const ne=xn(O,M,q);return kn(ne.resolve?ne.resolve(M,S):ne(M,S))}(O[Be],M,S,q).pipe((0,it.b)(ot=>{_e[Be]=ot}))),Re(1),(0,kt.z)(()=>ke(_e).length===ne.length?(0,dn.of)(_e):Ht.E))}(O._resolve,O,M,q).pipe((0,Rt.U)(_e=>(O._resolvedData=_e,O.data=Object.assign(Object.assign({},O.data),Gi(O,S).resolve),null)))}(Be.route,q,O,M)),(0,it.b)(()=>_e++),Re(1),(0,kt.z)(Be=>_e===ne.length?(0,dn.of)(S):Ht.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,it.b)({next:()=>Ut=!0,complete:()=>{Ut||(this.restoreHistory(It),this.cancelNavigationTransition(It,"At least one route resolver didn't emit any value."))}}))}),(0,it.b)(It=>{const Ut=new Wr(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(Ut)}))}),et(ot=>{const{targetSnapshot:It,id:Ut,extractedUrl:Xn,rawUrl:Zn,extras:{skipLocationChange:Er,replaceUrl:zn}}=ot;return this.hooks.afterPreactivation(It,{navigationId:Ut,appliedUrlTree:Xn,rawUrlTree:Zn,skipLocationChange:!!Er,replaceUrl:!!zn})}),(0,Rt.U)(ot=>{const It=function $o(O,M,S){const q=co(O,M._root,S?S._root:void 0);return new Ki(q,M)}(this.routeReuseStrategy,ot.targetSnapshot,ot.currentRouterState);return Object.assign(Object.assign({},ot),{targetRouterState:It})}),(0,it.b)(ot=>{this.currentUrlTree=ot.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ot.urlAfterRedirects,ot.rawUrl),this.routerState=ot.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ot.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ot),this.browserUrlTree=ot.urlAfterRedirects)}),((O,M,S)=>(0,Rt.U)(q=>(new ho(M,q.targetRouterState,q.currentRouterState,S).activate(O),q)))(this.rootContexts,this.routeReuseStrategy,ot=>this.triggerEvent(ot)),(0,it.b)({next(){_e=!0},complete(){_e=!0}}),function pt(O){return(0,Ot.e)((M,S)=>{try{M.subscribe(S)}finally{S.add(O)}})}(()=>{var ot;_e||Be||this.cancelNavigationTransition(ne,`Navigation ID ${ne.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ot=this.currentNavigation)||void 0===ot?void 0:ot.id)===ne.id&&(this.currentNavigation=null)}),(0,Tr.K)(ot=>{if(Be=!0,function Hr(O){return O&&O[qn]}(ot)){const It=Qs(ot.url);It||(this.navigated=!0,this.restoreHistory(ne,!0));const Ut=new Hn(ne.id,this.serializeUrl(ne.extractedUrl),ot.message);q.next(Ut),It?setTimeout(()=>{const Xn=this.urlHandlingStrategy.merge(ot.url,this.rawUrlTree),Zn={skipLocationChange:ne.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cr(ne.source)};this.scheduleNavigation(Xn,"imperative",null,Zn,{resolve:ne.resolve,reject:ne.reject,promise:ne.promise})},0):ne.resolve(!1)}else{this.restoreHistory(ne,!0);const It=new ir(ne.id,this.serializeUrl(ne.extractedUrl),ot);q.next(It);try{ne.resolve(this.errorHandler(ot))}catch(Ut){ne.reject(Ut)}}return Ht.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const q="popstate"===S.type?"popstate":"hashchange";"popstate"===q&&setTimeout(()=>{var ne;const _e={replaceUrl:!0},Be=(null===(ne=S.state)||void 0===ne?void 0:ne.navigationId)?S.state:null;if(Be){const It=Object.assign({},Be);delete It.navigationId,delete It.\u0275routerPageId,0!==Object.keys(It).length&&(_e.state=It)}const ot=this.parseUrl(S.url);this.scheduleNavigation(ot,q,Be,_e)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){Rs(S),this.config=S.map(Ti),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,q={}){const{relativeTo:ne,queryParams:_e,fragment:Be,queryParamsHandling:ot,preserveFragment:It}=q,Ut=ne||this.routerState.root,Xn=It?this.currentUrlTree.fragment:Be;let Zn=null;switch(ot){case"merge":Zn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),_e);break;case"preserve":Zn=this.currentUrlTree.queryParams;break;default:Zn=_e||null}return null!==Zn&&(Zn=this.removeEmptyProps(Zn)),function Ct(O,M,S,q,ne){if(0===S.length)return _n(M.root,M.root,M.root,q,ne);const _e=function ei(O){if("string"==typeof O[0]&&1===O.length&&"/"===O[0])return new Dr(!0,0,O);let M=0,S=!1;const q=O.reduce((ne,_e,Be)=>{if("object"==typeof _e&&null!=_e){if(_e.outlets){const ot={};return ki(_e.outlets,(It,Ut)=>{ot[Ut]="string"==typeof It?It.split("/"):It}),[...ne,{outlets:ot}]}if(_e.segmentPath)return[...ne,_e.segmentPath]}return"string"!=typeof _e?[...ne,_e]:0===Be?(_e.split("/").forEach((ot,It)=>{0==It&&"."===ot||(0==It&&""===ot?S=!0:".."===ot?M++:""!=ot&&ne.push(ot))}),ne):[...ne,_e]},[]);return new Dr(S,M,q)}(S);if(_e.toRoot())return _n(M.root,M.root,new Me([],{}),q,ne);const Be=function Mi(O,M,S){if(O.isAbsolute)return new zi(M.root,!0,0);if(-1===S.snapshot._lastPathIndex){const _e=S.snapshot._urlSegment;return new zi(_e,_e===M.root,0)}const q=ht(O.commands[0])?0:1;return function ys(O,M,S){let q=O,ne=M,_e=S;for(;_e>ne;){if(_e-=ne,q=q.parent,!q)throw new Error("Invalid number of '../'");ne=q.segments.length}return new zi(q,!1,ne-_e)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+q,O.numberOfDoubleDots)}(_e,M,O),ot=Be.processChildren?As(Be.segmentGroup,Be.index,_e.commands):_s(Be.segmentGroup,Be.index,_e.commands);return _n(M.root,Be.segmentGroup,ot,q,ne)}(Ut,this.currentUrlTree,S,Zn,null!=Xn?Xn:null)}navigateByUrl(S,q={skipLocationChange:!1}){const ne=Qs(S)?S:this.parseUrl(S),_e=this.urlHandlingStrategy.merge(ne,this.rawUrlTree);return this.scheduleNavigation(_e,"imperative",null,q)}navigate(S,q={skipLocationChange:!1}){return function Wt(O){for(let M=0;M<O.length;M++){const S=O[M];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${M}`)}}(S),this.navigateByUrl(this.createUrlTree(S,q),q)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let q;try{q=this.urlSerializer.parse(S)}catch(ne){q=this.malformedUriErrorHandler(ne,this.urlSerializer,S)}return q}isActive(S,q){let ne;if(ne=!0===q?Object.assign({},hn):!1===q?Object.assign({},lr):q,Qs(S))return Or(this.currentUrlTree,S,ne);const _e=this.parseUrl(S);return Or(this.currentUrlTree,_e,ne)}removeEmptyProps(S){return Object.keys(S).reduce((q,ne)=>{const _e=S[ne];return null!=_e&&(q[ne]=_e),q},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new Xt(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,q,ne,_e,Be){var ot,It;if(this.disposed)return Promise.resolve(!1);let Ut,Xn,Zn;Be?(Ut=Be.resolve,Xn=Be.reject,Zn=Be.promise):Zn=new Promise((Is,$r)=>{Ut=Is,Xn=$r});const Er=++this.navigationId;let zn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ne=this.location.getState()),zn=ne&&ne.\u0275routerPageId?ne.\u0275routerPageId:_e.replaceUrl||_e.skipLocationChange?null!==(ot=this.browserPageId)&&void 0!==ot?ot:0:(null!==(It=this.browserPageId)&&void 0!==It?It:0)+1):zn=0,this.setTransition({id:Er,targetPageId:zn,source:q,restoredState:ne,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:_e,resolve:Ut,reject:Xn,promise:Zn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Zn.catch(Is=>Promise.reject(Is))}setBrowserUrl(S,q){const ne=this.urlSerializer.serialize(S),_e=Object.assign(Object.assign({},q.extras.state),this.generateNgRouterState(q.id,q.targetPageId));this.location.isCurrentPathEqualTo(ne)||q.extras.replaceUrl?this.location.replaceState(ne,"",_e):this.location.go(ne,"",_e)}restoreHistory(S,q=!1){var ne,_e;if("computed"===this.canceledNavigationResolution){const Be=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.finalUrl)||0===Be?this.currentUrlTree===(null===(_e=this.currentNavigation)||void 0===_e?void 0:_e.finalUrl)&&0===Be&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Be)}else"replace"===this.canceledNavigationResolution&&(q&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,q){const ne=new Hn(S.id,this.serializeUrl(S.extractedUrl),q);this.triggerEvent(ne),S.resolve(!1)}generateNgRouterState(S,q){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:q}:{navigationId:S}}}return O.\u0275fac=function(S){g.$Z()},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})();function cr(O){return"imperative"!==O}let tr=(()=>{class O{constructor(S,q,ne,_e,Be){this.router=S,this.route=q,this.tabIndexAttribute=ne,this.renderer=_e,this.el=Be,this.commands=null,this.onChanges=new Oe.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(S){if(null!=this.tabIndexAttribute)return;const q=this.renderer,ne=this.el.nativeElement;null!==S?q.setAttribute(ne,"tabindex",S):q.removeAttribute(ne,"tabindex")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const S={skipLocationChange:Di(this.skipLocationChange),replaceUrl:Di(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,S),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Di(this.preserveFragment)})}}return O.\u0275fac=function(S){return new(S||O)(g.Y36(ar),g.Y36(Vs),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},O.\u0275dir=g.lG2({type:O,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,q){1&S&&g.NdJ("click",function(){return q.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),O})(),_i=(()=>{class O{constructor(S,q,ne){this.router=S,this.route=q,this.locationStrategy=ne,this.commands=null,this.href=null,this.onChanges=new Oe.x,this.subscription=S.events.subscribe(_e=>{_e instanceof Xt&&this.updateTargetUrlAndHref()})}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:null}ngOnChanges(S){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(S,q,ne,_e,Be){if(0!==S||q||ne||_e||Be||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ot={skipLocationChange:Di(this.skipLocationChange),replaceUrl:Di(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ot),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Di(this.preserveFragment)})}}return O.\u0275fac=function(S){return new(S||O)(g.Y36(ar),g.Y36(Vs),g.Y36(ut.S$))},O.\u0275dir=g.lG2({type:O,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(S,q){1&S&&g.NdJ("click",function(_e){return q.onClick(_e.button,_e.ctrlKey,_e.shiftKey,_e.altKey,_e.metaKey)}),2&S&&g.uIk("target",q.target)("href",q.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),O})();function Di(O){return""===O||!!O}class Z{}class T{preload(M,S){return(0,dn.of)(null)}}let F=(()=>{class O{constructor(S,q,ne,_e){this.router=S,this.injector=ne,this.preloadingStrategy=_e,this.loader=new Mn(ne,q,It=>S.triggerEvent(new xr(It)),It=>S.triggerEvent(new Mr(It)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Bt.h)(S=>S instanceof Xt),(0,mr.b)(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(g.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,q){const ne=[];for(const _e of q)if(_e.loadChildren&&!_e.canLoad&&_e._loadedConfig){const Be=_e._loadedConfig;ne.push(this.processRoutes(Be.module,Be.routes))}else _e.loadChildren&&!_e.canLoad?ne.push(this.preloadConfig(S,_e)):_e.children&&ne.push(this.processRoutes(S,_e.children));return(0,ae.D)(ne).pipe((0,At.J)(),(0,Rt.U)(_e=>{}))}preloadConfig(S,q){return this.preloadingStrategy.preload(q,()=>(q._loadedConfig?(0,dn.of)(q._loadedConfig):this.loader.load(S.injector,q)).pipe((0,kt.z)(_e=>(q._loadedConfig=_e,this.processRoutes(_e.module,_e.routes)))))}}return O.\u0275fac=function(S){return new(S||O)(g.LFG(ar),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Z))},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})(),ue=(()=>{class O{constructor(S,q,ne={}){this.router=S,this.viewportScroller=q,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof Mt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof Xt&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof ct&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,q){this.router.triggerEvent(new ct(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,q))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return O.\u0275fac=function(S){g.$Z()},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})();const Ve=new g.OlP("ROUTER_CONFIGURATION"),Xe=new g.OlP("ROUTER_FORROOT_GUARD"),vt=[ut.Ye,{provide:Yn,useClass:ai},{provide:ar,useFactory:function Nn(O,M,S,q,ne,_e,Be={},ot,It){const Ut=new ar(null,O,M,S,q,ne,Bn(_e));return ot&&(Ut.urlHandlingStrategy=ot),It&&(Ut.routeReuseStrategy=It),function Jn(O,M){O.errorHandler&&(M.errorHandler=O.errorHandler),O.malformedUriErrorHandler&&(M.malformedUriErrorHandler=O.malformedUriErrorHandler),O.onSameUrlNavigation&&(M.onSameUrlNavigation=O.onSameUrlNavigation),O.paramsInheritanceStrategy&&(M.paramsInheritanceStrategy=O.paramsInheritanceStrategy),O.relativeLinkResolution&&(M.relativeLinkResolution=O.relativeLinkResolution),O.urlUpdateStrategy&&(M.urlUpdateStrategy=O.urlUpdateStrategy),O.canceledNavigationResolution&&(M.canceledNavigationResolution=O.canceledNavigationResolution)}(Be,Ut),Be.enableTracing&&Ut.events.subscribe(Xn=>{var Zn,Er;null===(Zn=console.group)||void 0===Zn||Zn.call(console,`Router Event: ${Xn.constructor.name}`),console.log(Xn.toString()),console.log(Xn),null===(Er=console.groupEnd)||void 0===Er||Er.call(console)}),Ut},deps:[Yn,Li,ut.Ye,g.zs3,g.Sil,gn,Ve,[class nr{},new g.FiY],[class yt{},new g.FiY]]},Li,{provide:Vs,useFactory:function eo(O){return O.routerState.root},deps:[ar]},F,T,class C{preload(M,S){return S().pipe((0,Tr.K)(()=>(0,dn.of)(null)))}},{provide:Ve,useValue:{enableTracing:!1}}];function fn(){return new g.PXZ("Router",ar)}let pr=(()=>{class O{constructor(S,q){}static forRoot(S,q){return{ngModule:O,providers:[vt,Ur(S),{provide:Xe,useFactory:Rr,deps:[[ar,new g.FiY,new g.tp0]]},{provide:Ve,useValue:q||{}},{provide:ut.S$,useFactory:yr,deps:[ut.lw,[new g.tBr(ut.mr),new g.FiY],Ve]},{provide:ue,useFactory:$t,deps:[ar,ut.EM,Ve]},{provide:Z,useExisting:q&&q.preloadingStrategy?q.preloadingStrategy:T},{provide:g.PXZ,multi:!0,useFactory:fn},[Gn,{provide:g.ip1,multi:!0,useFactory:qt,deps:[Gn]},{provide:Os,useFactory:yn,deps:[Gn]},{provide:g.tb,multi:!0,useExisting:Os}]]}}static forChild(S){return{ngModule:O,providers:[Ur(S)]}}}return O.\u0275fac=function(S){return new(S||O)(g.LFG(Xe,8),g.LFG(ar,8))},O.\u0275mod=g.oAB({type:O}),O.\u0275inj=g.cJS({}),O})();function $t(O,M,S){return S.scrollOffset&&M.setOffset(S.scrollOffset),new ue(O,M,S)}function yr(O,M,S={}){return S.useHash?new ut.Do(O,M):new ut.b0(O,M)}function Rr(O){return"guarded"}function Ur(O){return[{provide:g.deG,multi:!0,useValue:O},{provide:gn,multi:!0,useValue:O}]}let Gn=(()=>{class O{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Oe.x}appInitializer(){return this.injector.get(ut.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let q=null;const ne=new Promise(ot=>q=ot),_e=this.injector.get(ar),Be=this.injector.get(Ve);return"disabled"===Be.initialNavigation?(_e.setUpLocationChangeListener(),q(!0)):"enabled"===Be.initialNavigation||"enabledBlocking"===Be.initialNavigation?(_e.hooks.afterPreactivation=()=>this.initNavigation?(0,dn.of)(null):(this.initNavigation=!0,q(!0),this.resultOfPreactivationDone),_e.initialNavigation()):q(!0),ne})}bootstrapListener(S){const q=this.injector.get(Ve),ne=this.injector.get(F),_e=this.injector.get(ue),Be=this.injector.get(ar),ot=this.injector.get(g.z2F);S===ot.components[0]&&(("enabledNonBlocking"===q.initialNavigation||void 0===q.initialNavigation)&&Be.initialNavigation(),ne.setUpPreloading(),_e.init(),Be.resetRootComponentType(ot.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return O.\u0275fac=function(S){return new(S||O)(g.LFG(g.zs3))},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})();function qt(O){return O.appInitializer.bind(O)}function yn(O){return O.bootstrapListener.bind(O)}const Os=new g.OlP("Router Initializer")},3942:(Wn,Dt,j)=>{j.d(Dt,{Z:()=>un});var g=j(2090),k=j(4859),he=j(9681),ae=j(1877);class je{constructor(Ot,tn){this._delegate=Ot,this.firebase=tn,(0,he._addComponent)(Ot,new k.wA("app-compat",()=>this,"PUBLIC")),this.container=Ot.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ot){this._delegate.automaticDataCollectionEnabled=Ot}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ot=>{this._delegate.checkDestroyed(),Ot()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,he.deleteApp)(this._delegate)))}_getService(Ot,tn=he._DEFAULT_ENTRY_NAME){var Ln;this._delegate.checkDestroyed();const dn=this._delegate.container.getProvider(Ot);return!dn.isInitialized()&&"EXPLICIT"===(null===(Ln=dn.getComponent())||void 0===Ln?void 0:Ln.instantiationMode)&&dn.initialize(),dn.getImmediate({identifier:tn})}_removeServiceInstance(Ot,tn=he._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ot).clearInstance(tn)}_addComponent(Ot){(0,he._addComponent)(this._delegate,Ot)}_addOrOverwriteComponent(Ot){(0,he._addOrOverwriteComponent)(this._delegate,Ot)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const dt=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ne=function at(){const In=function qe(In){const Ot={},tn={__esModule:!0,initializeApp:function xe(Ht,Oe={}){const Bt=he.initializeApp(Ht,Oe);if((0,g.r3)(Ot,Bt.name))return Ot[Bt.name];const Re=new In(Bt,tn);return Ot[Bt.name]=Re,Re},app:dn,registerVersion:he.registerVersion,setLogLevel:he.setLogLevel,onLog:he.onLog,apps:null,SDK_VERSION:he.SDK_VERSION,INTERNAL:{registerComponent:function St(Ht){const Oe=Ht.name,Bt=Oe.replace("-compat","");if(he._registerComponent(Ht)&&"PUBLIC"===Ht.type){const Re=(wt=dn())=>{if("function"!=typeof wt[Bt])throw dt.create("invalid-app-argument",{appName:Oe});return wt[Bt]()};void 0!==Ht.serviceProps&&(0,g.ZB)(Re,Ht.serviceProps),tn[Bt]=Re,In.prototype[Bt]=function(...wt){return this._getService.bind(this,Oe).apply(this,Ht.multipleInstances?wt:[])}}return"PUBLIC"===Ht.type?tn[Bt]:null},removeApp:function Ln(Ht){delete Ot[Ht]},useAsService:function on(Ht,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:he}};function dn(Ht){if(!(0,g.r3)(Ot,Ht=Ht||he._DEFAULT_ENTRY_NAME))throw dt.create("no-app",{appName:Ht});return Ot[Ht]}return tn.default=tn,Object.defineProperty(tn,"apps",{get:function Ge(){return Object.keys(Ot).map(Ht=>Ot[Ht])}}),dn.App=In,tn}(je);return In.INTERNAL=Object.assign(Object.assign({},In.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function Ot(tn){(0,g.ZB)(In,tn)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),In}(),Pe=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){Pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const In=self.firebase.SDK_VERSION;In&&In.indexOf("LITE")>=0&&Pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const un=Ne;!function Et(In){(0,he.registerVersion)("@firebase/app-compat","0.2.0",In)}()},9681:(Wn,Dt,j)=>{j.r(Dt),j.d(Dt,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ir,_DEFAULT_ENTRY_NAME:()=>or,_addComponent:()=>Vt,_addOrOverwriteComponent:()=>kt,_apps:()=>Tr,_clearComponents:()=>Qt,_components:()=>mr,_getProvider:()=>At,_registerComponent:()=>it,_removeServiceInstance:()=>ut,deleteApp:()=>er,getApp:()=>Yr,getApps:()=>oi,initializeApp:()=>ur,onLog:()=>Mr,registerVersion:()=>xr,setLogLevel:()=>is});var g=j(5861),k=j(4859),he=j(1877),ae=j(2090),je=j(8766);class He{constructor(zt){this.container=zt}getPlatformInfoString(){return this.container.getProviders().map(Vn=>{if(function dt(kn){const zt=kn.getComponent();return"VERSION"===(null==zt?void 0:zt.type)}(Vn)){const Pr=Vn.getImmediate();return`${Pr.library}/${Pr.version}`}return null}).filter(Vn=>Vn).join(" ")}}const qe="@firebase/app",Ne=new he.Yd("@firebase/app"),or="[DEFAULT]",mn={[qe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tr=new Map,mr=new Map;function Vt(kn,zt){try{kn.container.addComponent(zt)}catch(Vn){Ne.debug(`Component ${zt.name} failed to register with FirebaseApp ${kn.name}`,Vn)}}function kt(kn,zt){kn.container.addOrOverwriteComponent(zt)}function it(kn){const zt=kn.name;if(mr.has(zt))return Ne.debug(`There were multiple attempts to register component ${zt}.`),!1;mr.set(zt,kn);for(const Vn of Tr.values())Vt(Vn,kn);return!0}function At(kn,zt){const Vn=kn.container.getProvider("heartbeat").getImmediate({optional:!0});return Vn&&Vn.triggerHeartbeat(),kn.container.getProvider(zt)}function ut(kn,zt,Vn=or){At(kn,zt).clearInstance(Vn)}function Qt(){mr.clear()}const Xt=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Hn{constructor(zt,Vn,Pr){this._isDeleted=!1,this._options=Object.assign({},zt),this._config=Object.assign({},Vn),this._name=Vn.name,this._automaticDataCollectionEnabled=Vn.automaticDataCollectionEnabled,this._container=Pr,this.container.addComponent(new k.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(zt){this.checkDestroyed(),this._automaticDataCollectionEnabled=zt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(zt){this._isDeleted=zt}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}}const ir="9.15.0";function ur(kn,zt={}){let Vn=kn;"object"!=typeof zt&&(zt={name:zt});const Pr=Object.assign({name:or,automaticDataCollectionEnabled:!1},zt),Or=Pr.name;if("string"!=typeof Or||!Or)throw Xt.create("bad-app-name",{appName:String(Or)});if(Vn||(Vn=(0,ae.aH)()),!Vn)throw Xt.create("no-options");const Vr=Tr.get(Or);if(Vr){if((0,ae.vZ)(Vn,Vr.options)&&(0,ae.vZ)(Pr,Vr.config))return Vr;throw Xt.create("duplicate-app",{appName:Or})}const Qe=new k.H0(Or);for(const ft of mr.values())Qe.addComponent(ft);const Ue=new Hn(Vn,Pr,Qe);return Tr.set(Or,Ue),Ue}function Yr(kn=or){const zt=Tr.get(kn);if(!zt&&kn===or)return ur();if(!zt)throw Xt.create("no-app",{appName:kn});return zt}function oi(){return Array.from(Tr.values())}function er(kn){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(kn){const zt=kn.name;Tr.has(zt)&&(Tr.delete(zt),yield Promise.all(kn.container.getProviders().map(Vn=>Vn.delete())),kn.isDeleted=!0)})).apply(this,arguments)}function xr(kn,zt,Vn){var Pr;let Or=null!==(Pr=mn[kn])&&void 0!==Pr?Pr:kn;Vn&&(Or+=`-${Vn}`);const Vr=Or.match(/\s|\//),Qe=zt.match(/\s|\//);if(Vr||Qe){const Ue=[`Unable to register library "${Or}" with version "${zt}":`];return Vr&&Ue.push(`library name "${Or}" contains illegal characters (whitespace or "/")`),Vr&&Qe&&Ue.push("and"),Qe&&Ue.push(`version name "${zt}" contains illegal characters (whitespace or "/")`),void Ne.warn(Ue.join(" "))}it(new k.wA(`${Or}-version`,()=>({library:Or,version:zt}),"VERSION"))}function Mr(kn,zt){if(null!==kn&&"function"!=typeof kn)throw Xt.create("invalid-log-argument");(0,he.Am)(kn,zt)}function is(kn){(0,he.Ub)(kn)}const nt="firebase-heartbeat-store";let ct=null;function Gt(){return ct||(ct=(0,je.X3)("firebase-heartbeat-database",1,{upgrade:(kn,zt)=>{0===zt&&kn.createObjectStore(nt)}}).catch(kn=>{throw Xt.create("idb-open",{originalErrorMessage:kn.message})})),ct}function En(){return(En=(0,g.Z)(function*(kn){try{return(yield Gt()).transaction(nt).objectStore(nt).get(Hr(kn))}catch(zt){if(zt instanceof ae.ZR)Ne.warn(zt.message);else{const Vn=Xt.create("idb-get",{originalErrorMessage:null==zt?void 0:zt.message});Ne.warn(Vn.message)}}})).apply(this,arguments)}function qn(kn,zt){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(kn,zt){try{const Pr=(yield Gt()).transaction(nt,"readwrite");return yield Pr.objectStore(nt).put(zt,Hr(kn)),Pr.done}catch(Vn){if(Vn instanceof ae.ZR)Ne.warn(Vn.message);else{const Pr=Xt.create("idb-set",{originalErrorMessage:null==Vn?void 0:Vn.message});Ne.warn(Pr.message)}}})).apply(this,arguments)}function Hr(kn){return`${kn.name}!${kn.options.appId}`}class Oi{constructor(zt){this.container=zt,this._heartbeatsCache=null;const Vn=this.container.getProvider("app").getImmediate();this._storage=new mi(Vn),this._heartbeatsCachePromise=this._storage.read().then(Pr=>(this._heartbeatsCache=Pr,Pr))}triggerHeartbeat(){var zt=this;return(0,g.Z)(function*(){const Pr=zt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Or=gi();if(null===zt._heartbeatsCache&&(zt._heartbeatsCache=yield zt._heartbeatsCachePromise),zt._heartbeatsCache.lastSentHeartbeatDate!==Or&&!zt._heartbeatsCache.heartbeats.some(Vr=>Vr.date===Or))return zt._heartbeatsCache.heartbeats.push({date:Or,agent:Pr}),zt._heartbeatsCache.heartbeats=zt._heartbeatsCache.heartbeats.filter(Vr=>{const Qe=new Date(Vr.date).valueOf();return Date.now()-Qe<=2592e6}),zt._storage.overwrite(zt._heartbeatsCache)})()}getHeartbeatsHeader(){var zt=this;return(0,g.Z)(function*(){if(null===zt._heartbeatsCache&&(yield zt._heartbeatsCachePromise),null===zt._heartbeatsCache||0===zt._heartbeatsCache.heartbeats.length)return"";const Vn=gi(),{heartbeatsToSend:Pr,unsentEntries:Or}=function Bn(kn,zt=1024){const Vn=[];let Pr=kn.slice();for(const Or of kn){const Vr=Vn.find(Qe=>Qe.agent===Or.agent);if(Vr){if(Vr.dates.push(Or.date),Lr(Vn)>zt){Vr.dates.pop();break}}else if(Vn.push({agent:Or.agent,dates:[Or.date]}),Lr(Vn)>zt){Vn.pop();break}Pr=Pr.slice(1)}return{heartbeatsToSend:Vn,unsentEntries:Pr}}(zt._heartbeatsCache.heartbeats),Vr=(0,ae.L)(JSON.stringify({version:2,heartbeats:Pr}));return zt._heartbeatsCache.lastSentHeartbeatDate=Vn,Or.length>0?(zt._heartbeatsCache.heartbeats=Or,yield zt._storage.overwrite(zt._heartbeatsCache)):(zt._heartbeatsCache.heartbeats=[],zt._storage.overwrite(zt._heartbeatsCache)),Vr})()}}function gi(){return(new Date).toISOString().substring(0,10)}class mi{constructor(zt){this.app=zt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var zt=this;return(0,g.Z)(function*(){return(yield zt._canUseIndexedDBPromise)&&(yield function nn(kn){return En.apply(this,arguments)}(zt.app))||{heartbeats:[]}})()}overwrite(zt){var Vn=this;return(0,g.Z)(function*(){var Pr;if(yield Vn._canUseIndexedDBPromise){const Vr=yield Vn.read();return qn(Vn.app,{lastSentHeartbeatDate:null!==(Pr=zt.lastSentHeartbeatDate)&&void 0!==Pr?Pr:Vr.lastSentHeartbeatDate,heartbeats:zt.heartbeats})}})()}add(zt){var Vn=this;return(0,g.Z)(function*(){var Pr;if(yield Vn._canUseIndexedDBPromise){const Vr=yield Vn.read();return qn(Vn.app,{lastSentHeartbeatDate:null!==(Pr=zt.lastSentHeartbeatDate)&&void 0!==Pr?Pr:Vr.lastSentHeartbeatDate,heartbeats:[...Vr.heartbeats,...zt.heartbeats]})}})()}}function Lr(kn){return(0,ae.L)(JSON.stringify({version:2,heartbeats:kn})).length}!function ki(kn){it(new k.wA("platform-logger",zt=>new He(zt),"PRIVATE")),it(new k.wA("heartbeat",zt=>new Oi(zt),"PRIVATE")),xr(qe,"0.9.0",kn),xr(qe,"0.9.0","esm2017"),xr("fire-js","")}("")},4859:(Wn,Dt,j)=>{j.d(Dt,{H0:()=>qe,wA:()=>he});var g=j(5861),k=j(2090);class he{constructor(Ne,Pe,bt){this.name=Ne,this.instanceFactory=Pe,this.type=bt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ne){return this.instantiationMode=Ne,this}setMultipleInstances(Ne){return this.multipleInstances=Ne,this}setServiceProps(Ne){return this.serviceProps=Ne,this}setInstanceCreatedCallback(Ne){return this.onInstanceCreated=Ne,this}}const ae="[DEFAULT]";class je{constructor(Ne,Pe){this.name=Ne,this.container=Pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ne){const Pe=this.normalizeInstanceIdentifier(Ne);if(!this.instancesDeferred.has(Pe)){const bt=new k.BH;if(this.instancesDeferred.set(Pe,bt),this.isInitialized(Pe)||this.shouldAutoInitialize())try{const Tn=this.getOrInitializeService({instanceIdentifier:Pe});Tn&&bt.resolve(Tn)}catch(Tn){}}return this.instancesDeferred.get(Pe).promise}getImmediate(Ne){var Pe;const bt=this.normalizeInstanceIdentifier(null==Ne?void 0:Ne.identifier),Tn=null!==(Pe=null==Ne?void 0:Ne.optional)&&void 0!==Pe&&Pe;if(!this.isInitialized(bt)&&!this.shouldAutoInitialize()){if(Tn)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:bt})}catch(Et){if(Tn)return null;throw Et}}getComponent(){return this.component}setComponent(Ne){if(Ne.name!==this.name)throw Error(`Mismatching Component ${Ne.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ne,this.shouldAutoInitialize()){if(function dt(at){return"EAGER"===at.instantiationMode}(Ne))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(Pe){}for(const[Pe,bt]of this.instancesDeferred.entries()){const Tn=this.normalizeInstanceIdentifier(Pe);try{const Et=this.getOrInitializeService({instanceIdentifier:Tn});bt.resolve(Et)}catch(Et){}}}}clearInstance(Ne=ae){this.instancesDeferred.delete(Ne),this.instancesOptions.delete(Ne),this.instances.delete(Ne)}delete(){var Ne=this;return(0,g.Z)(function*(){const Pe=Array.from(Ne.instances.values());yield Promise.all([...Pe.filter(bt=>"INTERNAL"in bt).map(bt=>bt.INTERNAL.delete()),...Pe.filter(bt=>"_delete"in bt).map(bt=>bt._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ne=ae){return this.instances.has(Ne)}getOptions(Ne=ae){return this.instancesOptions.get(Ne)||{}}initialize(Ne={}){const{options:Pe={}}=Ne,bt=this.normalizeInstanceIdentifier(Ne.instanceIdentifier);if(this.isInitialized(bt))throw Error(`${this.name}(${bt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Tn=this.getOrInitializeService({instanceIdentifier:bt,options:Pe});for(const[Et,un]of this.instancesDeferred.entries())bt===this.normalizeInstanceIdentifier(Et)&&un.resolve(Tn);return Tn}onInit(Ne,Pe){var bt;const Tn=this.normalizeInstanceIdentifier(Pe),Et=null!==(bt=this.onInitCallbacks.get(Tn))&&void 0!==bt?bt:new Set;Et.add(Ne),this.onInitCallbacks.set(Tn,Et);const un=this.instances.get(Tn);return un&&Ne(un,Tn),()=>{Et.delete(Ne)}}invokeOnInitCallbacks(Ne,Pe){const bt=this.onInitCallbacks.get(Pe);if(bt)for(const Tn of bt)try{Tn(Ne,Pe)}catch(Et){}}getOrInitializeService({instanceIdentifier:Ne,options:Pe={}}){let bt=this.instances.get(Ne);if(!bt&&this.component&&(bt=this.component.instanceFactory(this.container,{instanceIdentifier:(at=Ne,at===ae?void 0:at),options:Pe}),this.instances.set(Ne,bt),this.instancesOptions.set(Ne,Pe),this.invokeOnInitCallbacks(bt,Ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ne,bt)}catch(Tn){}var at;return bt||null}normalizeInstanceIdentifier(Ne=ae){return this.component?this.component.multipleInstances?Ne:ae:Ne}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qe{constructor(Ne){this.name=Ne,this.providers=new Map}addComponent(Ne){const Pe=this.getProvider(Ne.name);if(Pe.isComponentSet())throw new Error(`Component ${Ne.name} has already been registered with ${this.name}`);Pe.setComponent(Ne)}addOrOverwriteComponent(Ne){this.getProvider(Ne.name).isComponentSet()&&this.providers.delete(Ne.name),this.addComponent(Ne)}getProvider(Ne){if(this.providers.has(Ne))return this.providers.get(Ne);const Pe=new je(Ne,this);return this.providers.set(Ne,Pe),Pe}getProviders(){return Array.from(this.providers.values())}}},1877:(Wn,Dt,j)=>{j.d(Dt,{Am:()=>at,Ub:()=>qe,Yd:()=>dt,in:()=>k});const g=[];var k=(()=>{return(Ne=k||(k={}))[Ne.DEBUG=0]="DEBUG",Ne[Ne.VERBOSE=1]="VERBOSE",Ne[Ne.INFO=2]="INFO",Ne[Ne.WARN=3]="WARN",Ne[Ne.ERROR=4]="ERROR",Ne[Ne.SILENT=5]="SILENT",k;var Ne})();const he={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},ae=k.INFO,je={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},He=(Ne,Pe,...bt)=>{if(Pe<Ne.logLevel)return;const Tn=(new Date).toISOString(),Et=je[Pe];if(!Et)throw new Error(`Attempted to log a message with an invalid logType (value: ${Pe})`);console[Et](`[${Tn}]  ${Ne.name}:`,...bt)};class dt{constructor(Pe){this.name=Pe,this._logLevel=ae,this._logHandler=He,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(Pe){if(!(Pe in k))throw new TypeError(`Invalid value "${Pe}" assigned to \`logLevel\``);this._logLevel=Pe}setLogLevel(Pe){this._logLevel="string"==typeof Pe?he[Pe]:Pe}get logHandler(){return this._logHandler}set logHandler(Pe){if("function"!=typeof Pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(Pe){this._userLogHandler=Pe}debug(...Pe){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...Pe),this._logHandler(this,k.DEBUG,...Pe)}log(...Pe){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...Pe),this._logHandler(this,k.VERBOSE,...Pe)}info(...Pe){this._userLogHandler&&this._userLogHandler(this,k.INFO,...Pe),this._logHandler(this,k.INFO,...Pe)}warn(...Pe){this._userLogHandler&&this._userLogHandler(this,k.WARN,...Pe),this._logHandler(this,k.WARN,...Pe)}error(...Pe){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...Pe),this._logHandler(this,k.ERROR,...Pe)}}function qe(Ne){g.forEach(Pe=>{Pe.setLogLevel(Ne)})}function at(Ne,Pe){for(const bt of g){let Tn=null;Pe&&Pe.level&&(Tn=he[Pe.level]),bt.userLogHandler=null===Ne?null:(Et,un,...In)=>{const Ot=In.map(tn=>{if(null==tn)return null;if("string"==typeof tn)return tn;if("number"==typeof tn||"boolean"==typeof tn)return tn.toString();if(tn instanceof Error)return tn.message;try{return JSON.stringify(tn)}catch(Ln){return null}}).filter(tn=>tn).join(" ");un>=(null!=Tn?Tn:Et.logLevel)&&Ne({level:k[un].toLowerCase(),message:Ot,args:In,type:Et.name})}}}},259:(Wn,Dt,j)=>{j.d(Dt,{C6:()=>g.getApps,Mq:()=>g.getApp,ZF:()=>g.initializeApp});var g=j(9681);(0,g.registerVersion)("firebase","9.15.0","app")},9260:(Wn,Dt,j)=>{j.d(Dt,{Z:()=>g.Z});var g=j(3942);g.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(Wn,Dt,j)=>{j.r(Dt);var g=j(5861),k=j(3942),he=j(2090),ae=j(9681),je=j(1877),He=j(655),dt=j(4859);const un=function Tn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},In=function Et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ot=new he.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ln=new je.Yd("@firebase/auth");function dn(b,...p){Ln.logLevel<=je.in.ERROR&&Ln.error(`Auth (${ae.SDK_VERSION}): ${b}`,...p)}function xe(b,...p){throw Ht(b,...p)}function Ge(b,...p){return Ht(b,...p)}function St(b,p,y){const D=Object.assign(Object.assign({},In()),{[p]:y});return new he.LL("auth","Firebase",D).create(p,{appName:b.name})}function on(b,p,y){if(!(p instanceof y))throw y.name!==p.constructor.name&&xe(b,"argument-error"),St(b,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ht(b,...p){if("string"!=typeof b){const y=p[0],D=[...p.slice(1)];return D[0]&&(D[0].appName=b.name),b._errorFactory.create(y,...D)}return Ot.create(b,...p)}function Oe(b,p,...y){if(!b)throw Ht(p,...y)}function Bt(b){const p="INTERNAL ASSERTION FAILED: "+b;throw dn(p),new Error(p)}function Re(b,p){b||Bt(p)}const wt=new Map;function Je(b){Re(b instanceof Function,"Expected a class definition");let p=wt.get(b);return p?(Re(p instanceof b,"Instance stored in cache mismatched with class"),p):(p=new b,wt.set(b,p),p)}function Rt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Sn(){return"http:"===sr()||"https:"===sr()}function sr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Tr{constructor(p,y){this.shortDelay=p,this.longDelay=y,Re(y>p,"Short delay should be less than long delay!"),this.isMobile=(0,he.uI)()||(0,he.b$)()}get(){return function or(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Sn()||(0,he.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mr(b,p){Re(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return p?`${y}${p.startsWith("/")?p.slice(1):p}`:y}class Vt{static initialize(p,y,D){this.fetchImpl=p,y&&(this.headersImpl=y),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},it=new Tr(3e4,6e4);function At(b,p){return b.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:b.tenantId}):p}function ut(b,p,y,D){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,g.Z)(function*(b,p,y,D,re={}){return Mt(b,re,(0,g.Z)(function*(){let Ee={},Tt={};D&&("GET"===p?Tt=D:Ee={body:JSON.stringify(D)});const pn=(0,he.xO)(Object.assign({key:b.config.apiKey},Tt)).slice(1),dr=yield b._getAdditionalHeaders();return dr["Content-Type"]="application/json",b.languageCode&&(dr["X-Firebase-Locale"]=b.languageCode),Vt.fetch()(ur(b,b.config.apiHost,y,pn),Object.assign({method:p,headers:dr,referrerPolicy:"no-referrer"},Ee))}))})).apply(this,arguments)}function Mt(b,p,y){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,g.Z)(function*(b,p,y){b._canInitEmulator=!1;const D=Object.assign(Object.assign({},kt),p);try{const re=new Yr(b),Ee=yield Promise.race([y(),re.promise]);re.clearNetworkTimeout();const Tt=yield Ee.json();if("needConfirmation"in Tt)throw oi(b,"account-exists-with-different-credential",Tt);if(Ee.ok&&!("errorMessage"in Tt))return Tt;{const pn=Ee.ok?Tt.errorMessage:Tt.error.message,[dr,kr]=pn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===dr)throw oi(b,"credential-already-in-use",Tt);if("EMAIL_EXISTS"===dr)throw oi(b,"email-already-in-use",Tt);if("USER_DISABLED"===dr)throw oi(b,"user-disabled",Tt);const Ci=D[dr]||dr.toLowerCase().replace(/[_\s]+/g,"-");if(kr)throw St(b,Ci,kr);xe(b,Ci)}}catch(re){if(re instanceof he.ZR)throw re;xe(b,"network-request-failed")}})).apply(this,arguments)}function Hn(b,p,y,D){return ir.apply(this,arguments)}function ir(){return(ir=(0,g.Z)(function*(b,p,y,D,re={}){const Ee=yield ut(b,p,y,D,re);return"mfaPendingCredential"in Ee&&xe(b,"multi-factor-auth-required",{_serverResponse:Ee}),Ee})).apply(this,arguments)}function ur(b,p,y,D){const re=`${p}${y}?${D}`;return b.config.emulator?mr(b.config,re):`${b.config.apiScheme}://${re}`}class Yr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((y,D)=>{this.timer=setTimeout(()=>D(Ge(this.auth,"network-request-failed")),it.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function oi(b,p,y){const D={appName:b.name};y.email&&(D.email=y.email),y.phoneNumber&&(D.phoneNumber=y.phoneNumber);const re=Ge(b,p,D);return re.customData._tokenResponse=y,re}function Wr(){return(Wr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function xr(b,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function is(b,p){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function cn(b){if(b)try{const p=new Date(Number(b));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Gt(){return(Gt=(0,g.Z)(function*(b,p=!1){const y=(0,he.m9)(b),D=yield y.getIdToken(p),re=En(D);Oe(re&&re.exp&&re.auth_time&&re.iat,y.auth,"internal-error");const Ee="object"==typeof re.firebase?re.firebase:void 0,Tt=null==Ee?void 0:Ee.sign_in_provider;return{claims:re,token:D,authTime:cn(nn(re.auth_time)),issuedAtTime:cn(nn(re.iat)),expirationTime:cn(nn(re.exp)),signInProvider:Tt||null,signInSecondFactor:(null==Ee?void 0:Ee.sign_in_second_factor)||null}})).apply(this,arguments)}function nn(b){return 1e3*Number(b)}function En(b){const[p,y,D]=b.split(".");if(void 0===p||void 0===y||void 0===D)return dn("JWT malformed, contained fewer than 3 sections"),null;try{const re=(0,he.tV)(y);return re?JSON.parse(re):(dn("Failed to decode base64 JWT payload"),null)}catch(re){return dn("Caught error parsing JWT payload as JSON",null==re?void 0:re.toString()),null}}function Jr(b,p){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(b,p,y=!1){if(y)return p;try{return yield p}catch(D){throw D instanceof he.ZR&&Fr(D)&&b.auth.currentUser===b&&(yield b.auth.signOut()),D}})).apply(this,arguments)}function Fr({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class ds{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var y;if(p){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const re=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,re)}}schedule(p=!1){var y=this;if(!this.isRunning)return;const D=this.getInterval(p);this.timerId=setTimeout((0,g.Z)(function*(){yield y.iteration()}),D)}iteration(){var p=this;return(0,g.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===(null==y?void 0:y.code)&&p.schedule(!0))}p.schedule()})()}}class Oi{constructor(p,y){this.createdAt=p,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=cn(this.lastLoginAt),this.creationTime=cn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gi(b){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,g.Z)(function*(b){var p;const y=b.auth,D=yield b.getIdToken(),re=yield Jr(b,is(y,{idToken:D}));Oe(null==re?void 0:re.users.length,y,"internal-error");const Ee=re.users[0];b._notifyReloadListener(Ee);const Tt=(null===(p=Ee.providerUserInfo)||void 0===p?void 0:p.length)?kn(Ee.providerUserInfo):[],pn=ki(b.providerData,Tt),Ci=!!b.isAnonymous&&!(b.email&&Ee.passwordHash||(null==pn?void 0:pn.length)),di={uid:Ee.localId,displayName:Ee.displayName||null,photoURL:Ee.photoUrl||null,email:Ee.email||null,emailVerified:Ee.emailVerified||!1,phoneNumber:Ee.phoneNumber||null,tenantId:Ee.tenantId||null,providerData:pn,metadata:new Oi(Ee.createdAt,Ee.lastLoginAt),isAnonymous:Ci};Object.assign(b,di)})).apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(b){const p=(0,he.m9)(b);yield gi(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function ki(b,p){return[...b.filter(D=>!p.some(re=>re.providerId===D.providerId)),...p]}function kn(b){return b.map(p=>{var{providerId:y}=p,D=(0,He._T)(p,["providerId"]);return{providerId:y,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function Vn(){return(Vn=(0,g.Z)(function*(b,p){const y=yield Mt(b,{},(0,g.Z)(function*(){const D=(0,he.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:re,apiKey:Ee}=b.config,Tt=ur(b,re,"/v1/token",`key=${Ee}`),pn=yield b._getAdditionalHeaders();return pn["Content-Type"]="application/x-www-form-urlencoded",Vt.fetch()(Tt,{method:"POST",headers:pn,body:D})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Pr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Oe(p.idToken,"internal-error"),Oe(void 0!==p.idToken,"internal-error"),Oe(void 0!==p.refreshToken,"internal-error");const y="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function qn(b){const p=En(b);return Oe(p,"internal-error"),Oe(void 0!==p.exp,"internal-error"),Oe(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,y)}getToken(p,y=!1){var D=this;return(0,g.Z)(function*(){return Oe(!D.accessToken||D.refreshToken,p,"user-token-expired"),y||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(p,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,y){var D=this;return(0,g.Z)(function*(){const{accessToken:re,refreshToken:Ee,expiresIn:Tt}=yield function zt(b,p){return Vn.apply(this,arguments)}(p,y);D.updateTokensAndExpiration(re,Ee,Number(Tt))})()}updateTokensAndExpiration(p,y,D){this.refreshToken=y||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(p,y){const{refreshToken:D,accessToken:re,expirationTime:Ee}=y,Tt=new Pr;return D&&(Oe("string"==typeof D,"internal-error",{appName:p}),Tt.refreshToken=D),re&&(Oe("string"==typeof re,"internal-error",{appName:p}),Tt.accessToken=re),Ee&&(Oe("number"==typeof Ee,"internal-error",{appName:p}),Tt.expirationTime=Ee),Tt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Pr,this.toJSON())}_performRefresh(){return Bt("not implemented")}}function Or(b,p){Oe("string"==typeof b||void 0===b,"internal-error",{appName:p})}class Vr{constructor(p){var{uid:y,auth:D,stsTokenManager:re}=p,Ee=(0,He._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ds(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=D,this.stsTokenManager=re,this.accessToken=re.accessToken,this.displayName=Ee.displayName||null,this.email=Ee.email||null,this.emailVerified=Ee.emailVerified||!1,this.phoneNumber=Ee.phoneNumber||null,this.photoURL=Ee.photoURL||null,this.isAnonymous=Ee.isAnonymous||!1,this.tenantId=Ee.tenantId||null,this.providerData=Ee.providerData?[...Ee.providerData]:[],this.metadata=new Oi(Ee.createdAt||void 0,Ee.lastLoginAt||void 0)}getIdToken(p){var y=this;return(0,g.Z)(function*(){const D=yield Jr(y,y.stsTokenManager.getToken(y.auth,p));return Oe(D,y.auth,"internal-error"),y.accessToken!==D&&(y.accessToken=D,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),D})()}getIdTokenResult(p){return function ct(b){return Gt.apply(this,arguments)}(this,p)}reload(){return function mi(b){return Lr.apply(this,arguments)}(this)}_assign(p){this!==p&&(Oe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(y=>Object.assign({},y)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Vr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,y=!1){var D=this;return(0,g.Z)(function*(){let re=!1;p.idToken&&p.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(p),re=!0),y&&(yield gi(D)),yield D.auth._persistUserIfCurrent(D),re&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var p=this;return(0,g.Z)(function*(){const y=yield p.getIdToken();return yield Jr(p,function er(b,p){return Wr.apply(this,arguments)}(p.auth,{idToken:y})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,y){var D,re,Ee,Tt,pn,dr,kr,Ci;const di=null!==(D=y.displayName)&&void 0!==D?D:void 0,qo=null!==(re=y.email)&&void 0!==re?re:void 0,f=null!==(Ee=y.phoneNumber)&&void 0!==Ee?Ee:void 0,c=null!==(Tt=y.photoURL)&&void 0!==Tt?Tt:void 0,d=null!==(pn=y.tenantId)&&void 0!==pn?pn:void 0,v=null!==(dr=y._redirectEventId)&&void 0!==dr?dr:void 0,x=null!==(kr=y.createdAt)&&void 0!==kr?kr:void 0,H=null!==(Ci=y.lastLoginAt)&&void 0!==Ci?Ci:void 0,{uid:te,emailVerified:we,isAnonymous:Ze,providerData:lt,stsTokenManager:an}=y;Oe(te&&an,p,"internal-error");const bn=Pr.fromJSON(this.name,an);Oe("string"==typeof te,p,"internal-error"),Or(di,p.name),Or(qo,p.name),Oe("boolean"==typeof we,p,"internal-error"),Oe("boolean"==typeof Ze,p,"internal-error"),Or(f,p.name),Or(c,p.name),Or(d,p.name),Or(v,p.name),Or(x,p.name),Or(H,p.name);const Rn=new Vr({uid:te,auth:p,email:qo,emailVerified:we,displayName:di,isAnonymous:Ze,photoURL:c,phoneNumber:f,tenantId:d,stsTokenManager:bn,createdAt:x,lastLoginAt:H});return lt&&Array.isArray(lt)&&(Rn.providerData=lt.map(Cr=>Object.assign({},Cr))),v&&(Rn._redirectEventId=v),Rn}static _fromIdTokenResponse(p,y,D=!1){return(0,g.Z)(function*(){const re=new Pr;re.updateFromServerResponse(y);const Ee=new Vr({uid:y.localId,auth:p,stsTokenManager:re,isAnonymous:D});return yield gi(Ee),Ee})()}}const Ue=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(y,D){var re=this;return(0,g.Z)(function*(){re.storage[y]=D})()}_get(y){var D=this;return(0,g.Z)(function*(){const re=D.storage[y];return void 0===re?null:re})()}_remove(y){var D=this;return(0,g.Z)(function*(){delete D.storage[y]})()}_addListener(y,D){}_removeListener(y,D){}}return b.type="NONE",b})();function ft(b,p,y){return`firebase:${b}:${p}:${y}`}class ln{constructor(p,y,D){this.persistence=p,this.auth=y,this.userKey=D;const{config:re,name:Ee}=this.auth;this.fullUserKey=ft(this.userKey,re.apiKey,Ee),this.fullPersistenceKey=ft("persistence",re.apiKey,Ee),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,g.Z)(function*(){const y=yield p.persistence._get(p.fullUserKey);return y?Vr._fromJSON(p.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var y=this;return(0,g.Z)(function*(){if(y.persistence===p)return;const D=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=p,D?y.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,y,D="authUser"){return(0,g.Z)(function*(){if(!y.length)return new ln(Je(Ue),p,D);const re=(yield Promise.all(y.map(function(){var kr=(0,g.Z)(function*(Ci){if(yield Ci._isAvailable())return Ci});return function(Ci){return kr.apply(this,arguments)}}()))).filter(kr=>kr);let Ee=re[0]||Je(Ue);const Tt=ft(D,p.config.apiKey,p.name);let pn=null;for(const kr of y)try{const Ci=yield kr._get(Tt);if(Ci){const di=Vr._fromJSON(p,Ci);kr!==Ee&&(pn=di),Ee=kr;break}}catch(Ci){}const dr=re.filter(kr=>kr._shouldAllowMigration);return Ee._shouldAllowMigration&&dr.length?(Ee=dr[0],pn&&(yield Ee._set(Tt,pn.toJSON())),yield Promise.all(y.map(function(){var kr=(0,g.Z)(function*(Ci){if(Ci!==Ee)try{yield Ci._remove(Tt)}catch(di){}});return function(Ci){return kr.apply(this,arguments)}}())),new ln(Ee,p,D)):new ln(Ee,p,D)})()}}function Ft(b){const p=b.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(gt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(ze(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(vr(p))return"Blackberry";if(Yn(p))return"Webos";if(Me(p))return"Safari";if((p.includes("chrome/")||Ae(p))&&!p.includes("edge/"))return"Chrome";if(sn(p))return"Android";{const D=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function ze(b=(0,he.z$)()){return/firefox\//i.test(b)}function Me(b=(0,he.z$)()){const p=b.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ae(b=(0,he.z$)()){return/crios\//i.test(b)}function gt(b=(0,he.z$)()){return/iemobile/i.test(b)}function sn(b=(0,he.z$)()){return/android/i.test(b)}function vr(b=(0,he.z$)()){return/blackberry/i.test(b)}function Yn(b=(0,he.z$)()){return/webos/i.test(b)}function ai(b=(0,he.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Fi(b=(0,he.z$)()){return ai(b)||sn(b)||Yn(b)||vr(b)||/windows phone/i.test(b)||gt(b)}function as(b,p=[]){let y;switch(b){case"Browser":y=Ft((0,he.z$)());break;case"Worker":y=`${Ft((0,he.z$)())}-${b}`;break;default:y=b}const D=p.length?p.join(","):"FirebaseCore-web";return`${y}/JsCore/${ae.SDK_VERSION}/${D}`}class wi{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,y){const D=Ee=>new Promise((Tt,pn)=>{try{Tt(p(Ee))}catch(dr){pn(dr)}});D.onAbort=y,this.queue.push(D);const re=this.queue.length-1;return()=>{this.queue[re]=()=>Promise.resolve()}}runMiddleware(p){var y=this;return(0,g.Z)(function*(){if(y.auth.currentUser===p)return;const D=[];try{for(const re of y.queue)yield re(p),re.onAbort&&D.push(re.onAbort)}catch(re){D.reverse();for(const Ee of D)try{Ee()}catch(Tt){}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null==re?void 0:re.message})}})()}}class Cn{constructor(p,y,D){this.app=p,this.heartbeatServiceProvider=y,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new li(this),this.idTokenSubscription=new li(this),this.beforeStateQueue=new wi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(p,y){var D=this;return y&&(this._popupRedirectResolver=Je(y)),this._initializationPromise=this.queue((0,g.Z)(function*(){var re,Ee;if(!D._deleted&&(D.persistenceManager=yield ln.create(D,p),!D._deleted)){if(null===(re=D._popupRedirectResolver)||void 0===re?void 0:re._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch(Tt){}yield D.initializeCurrentUser(y),D.lastNotifiedUid=(null===(Ee=D.currentUser)||void 0===Ee?void 0:Ee.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,g.Z)(function*(){if(p._deleted)return;const y=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||y){if(p.currentUser&&y&&p.currentUser.uid===y.uid)return p._currentUser._assign(y),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(y,!0)}})()}initializeCurrentUser(p){var y=this;return(0,g.Z)(function*(){var D;const re=yield y.assertedPersistence.getCurrentUser();let Ee=re,Tt=!1;if(p&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const pn=null===(D=y.redirectUser)||void 0===D?void 0:D._redirectEventId,dr=null==Ee?void 0:Ee._redirectEventId,kr=yield y.tryRedirectSignIn(p);(!pn||pn===dr)&&(null==kr?void 0:kr.user)&&(Ee=kr.user,Tt=!0)}if(!Ee)return y.directlySetCurrentUser(null);if(!Ee._redirectEventId){if(Tt)try{yield y.beforeStateQueue.runMiddleware(Ee)}catch(pn){Ee=re,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(pn))}return Ee?y.reloadAndSetCurrentUserOrClear(Ee):y.directlySetCurrentUser(null)}return Oe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===Ee._redirectEventId?y.directlySetCurrentUser(Ee):y.reloadAndSetCurrentUserOrClear(Ee)})()}tryRedirectSignIn(p){var y=this;return(0,g.Z)(function*(){let D=null;try{D=yield y._popupRedirectResolver._completeRedirectFn(y,p,!0)}catch(re){yield y._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(p){var y=this;return(0,g.Z)(function*(){try{yield gi(p)}catch(D){if("auth/network-request-failed"!==(null==D?void 0:D.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function mn(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var p=this;return(0,g.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var y=this;return(0,g.Z)(function*(){const D=p?(0,he.m9)(p):null;return D&&Oe(D.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(D&&D._clone(y))})()}_updateCurrentUser(p,y=!1){var D=this;return(0,g.Z)(function*(){if(!D._deleted)return p&&Oe(D.tenantId===p.tenantId,D,"tenant-id-mismatch"),y||(yield D.beforeStateQueue.runMiddleware(p)),D.queue((0,g.Z)(function*(){yield D.directlySetCurrentUser(p),D.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,g.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var y=this;return this.queue((0,g.Z)(function*(){yield y.assertedPersistence.setPersistence(Je(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new he.LL("auth","Firebase",p())}onAuthStateChanged(p,y,D){return this.registerStateListener(this.authStateSubscription,p,y,D)}beforeAuthStateChanged(p,y){return this.beforeStateQueue.pushCallback(p,y)}onIdTokenChanged(p,y,D){return this.registerStateListener(this.idTokenSubscription,p,y,D)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,y){var D=this;return(0,g.Z)(function*(){const re=yield D.getOrInitRedirectPersistenceManager(y);return null===p?re.removeCurrentUser():re.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var y=this;return(0,g.Z)(function*(){if(!y.redirectPersistenceManager){const D=p&&Je(p)||y._popupRedirectResolver;Oe(D,y,"argument-error"),y.redirectPersistenceManager=yield ln.create(y,[Je(D._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(p){var y=this;return(0,g.Z)(function*(){var D,re;return y._isInitialized&&(yield y.queue((0,g.Z)(function*(){}))),(null===(D=y._currentUser)||void 0===D?void 0:D._redirectEventId)===p?y._currentUser:(null===(re=y.redirectUser)||void 0===re?void 0:re._redirectEventId)===p?y.redirectUser:null})()}_persistUserIfCurrent(p){var y=this;return(0,g.Z)(function*(){if(p===y.currentUser)return y.queue((0,g.Z)(function*(){return y.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(y=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,y,D,re){if(this._deleted)return()=>{};const Ee="function"==typeof y?y:y.next.bind(y),Tt=this._isInitialized?Promise.resolve():this._initializationPromise;return Oe(Tt,this,"internal-error"),Tt.then(()=>Ee(this.currentUser)),"function"==typeof y?p.addObserver(y,D,re):p.addObserver(y)}directlySetCurrentUser(p){var y=this;return(0,g.Z)(function*(){y.currentUser&&y.currentUser!==p&&y._currentUser._stopProactiveRefresh(),p&&y.isProactiveRefreshEnabled&&p._startProactiveRefresh(),y.currentUser=p,p?yield y.assertedPersistence.setCurrentUser(p):yield y.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=as(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,g.Z)(function*(){var y;const D={"X-Client-Version":p.clientVersion};p.app.options.appId&&(D["X-Firebase-gmpid"]=p.app.options.appId);const re=yield null===(y=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return re&&(D["X-Firebase-Client"]=re),D})()}}function br(b){return(0,he.m9)(b)}class li{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,he.ne)(y=>this.observer=y)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hs(b){const p=b.indexOf(":");return p<0?"":b.substr(0,p+1)}function Ji(b){if(!b)return null;const p=Number(b);return isNaN(p)?null:p}class Ii{constructor(p,y){this.providerId=p,this.signInMethod=y}toJSON(){return Bt("not implemented")}_getIdTokenResponse(p){return Bt("not implemented")}_linkToIdToken(p,y){return Bt("not implemented")}_getReauthenticationResolver(p){return Bt("not implemented")}}function Hi(b,p){return qr.apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:resetPassword",At(b,p))})).apply(this,arguments)}function es(b,p){return ls.apply(this,arguments)}function ls(){return(ls=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Cs(b,p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",At(b,p))})).apply(this,arguments)}function Sr(){return(Sr=(0,g.Z)(function*(b,p){return Hn(b,"POST","/v1/accounts:signInWithPassword",At(b,p))})).apply(this,arguments)}function Ki(b,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:sendOobCode",At(b,p))})).apply(this,arguments)}function xi(b,p){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,g.Z)(function*(b,p){return Ki(b,p)})).apply(this,arguments)}function Gi(b,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,g.Z)(function*(b,p){return Ki(b,p)})).apply(this,arguments)}function ui(b,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,g.Z)(function*(b,p){return Ki(b,p)})).apply(this,arguments)}function gs(b,p){return ms.apply(this,arguments)}function ms(){return(ms=(0,g.Z)(function*(b,p){return Ki(b,p)})).apply(this,arguments)}function Bi(){return(Bi=(0,g.Z)(function*(b,p){return Hn(b,"POST","/v1/accounts:signInWithEmailLink",At(b,p))})).apply(this,arguments)}function co(){return(co=(0,g.Z)(function*(b,p){return Hn(b,"POST","/v1/accounts:signInWithEmailLink",At(b,p))})).apply(this,arguments)}class Ns extends Ii{constructor(p,y,D,re=null){super("password",D),this._email=p,this._password=y,this._tenantId=re}static _fromEmailAndPassword(p,y){return new Ns(p,y,"password")}static _fromEmailAndCode(p,y,D=null){return new Ns(p,y,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(p){var y=this;return(0,g.Z)(function*(){switch(y.signInMethod){case"password":return function wr(b,p){return Sr.apply(this,arguments)}(p,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function bs(b,p){return Bi.apply(this,arguments)}(p,{email:y._email,oobCode:y._password});default:xe(p,"internal-error")}})()}_linkToIdToken(p,y){var D=this;return(0,g.Z)(function*(){switch(D.signInMethod){case"password":return es(p,{idToken:y,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function $o(b,p){return co.apply(this,arguments)}(p,{idToken:y,email:D._email,oobCode:D._password});default:xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ns(b,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(b,p){return Hn(b,"POST","/v1/accounts:signInWithIdp",At(b,p))})).apply(this,arguments)}class xt extends Ii{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const y=new xt(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(y.idToken=p.idToken),p.accessToken&&(y.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(y.nonce=p.nonce),p.pendingToken&&(y.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(y.accessToken=p.oauthToken,y.secret=p.oauthTokenSecret):xe("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:re}=y,Ee=(0,He._T)(y,["providerId","signInMethod"]);if(!D||!re)return null;const Tt=new xt(D,re);return Tt.idToken=Ee.idToken||void 0,Tt.accessToken=Ee.accessToken||void 0,Tt.secret=Ee.secret,Tt.nonce=Ee.nonce,Tt.pendingToken=Ee.pendingToken||null,Tt}_getIdTokenResponse(p){return ns(p,this.buildRequest())}_linkToIdToken(p,y){const D=this.buildRequest();return D.idToken=y,ns(p,D)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,ns(p,y)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),p.postBody=(0,he.xO)(y)}return p}}function _n(b,p){return $n.apply(this,arguments)}function $n(){return($n=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:sendVerificationCode",At(b,p))})).apply(this,arguments)}function ei(){return(ei=(0,g.Z)(function*(b,p){return Hn(b,"POST","/v1/accounts:signInWithPhoneNumber",At(b,p))})).apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(b,p){const y=yield Hn(b,"POST","/v1/accounts:signInWithPhoneNumber",At(b,p));if(y.temporaryProof)throw oi(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const ys={USER_NOT_FOUND:"user-not-found"};function _s(){return(_s=(0,g.Z)(function*(b,p){return Hn(b,"POST","/v1/accounts:signInWithPhoneNumber",At(b,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ys)})).apply(this,arguments)}class As extends Ii{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,y){return new As({verificationId:p,verificationCode:y})}static _fromTokenResponse(p,y){return new As({phoneNumber:p,temporaryProof:y})}_getIdTokenResponse(p){return function Dr(b,p){return ei.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,y){return function zi(b,p){return Mi.apply(this,arguments)}(p,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ti(b,p){return _s.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:y,verificationId:D,verificationCode:re}=this.params;return p&&y?{temporaryProof:p,phoneNumber:y}:{sessionInfo:D,code:re}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:y,verificationCode:D,phoneNumber:re,temporaryProof:Ee}=p;return D||y||re||Ee?new As({verificationId:y,verificationCode:D,phoneNumber:re,temporaryProof:Ee}):null}}class mo{constructor(p){var y,D,re,Ee,Tt,pn;const dr=(0,he.zd)((0,he.pd)(p)),kr=null!==(y=dr.apiKey)&&void 0!==y?y:null,Ci=null!==(D=dr.oobCode)&&void 0!==D?D:null,di=function Yo(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(re=dr.mode)&&void 0!==re?re:null);Oe(kr&&Ci&&di,"argument-error"),this.apiKey=kr,this.operation=di,this.code=Ci,this.continueUrl=null!==(Ee=dr.continueUrl)&&void 0!==Ee?Ee:null,this.languageCode=null!==(Tt=dr.languageCode)&&void 0!==Tt?Tt:null,this.tenantId=null!==(pn=dr.tenantId)&&void 0!==pn?pn:null}static parseLink(p){const y=function Ts(b){const p=(0,he.zd)((0,he.pd)(b)).link,y=p?(0,he.zd)((0,he.pd)(p)).deep_link_id:null,D=(0,he.zd)((0,he.pd)(b)).deep_link_id;return(D?(0,he.zd)((0,he.pd)(D)).link:null)||D||y||p||b}(p);try{return new mo(y)}catch(D){return null}}}let Lo=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,D){return Ns._fromEmailAndPassword(y,D)}static credentialWithLink(y,D){const re=mo.parseLink(D);return Oe(re,"argument-error"),Ns._fromEmailAndCode(y,re.code,re.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class bi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ho extends bi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Us extends ho{static credentialFromJSON(p){const y="string"==typeof p?JSON.parse(p):p;return Oe("providerId"in y&&"signInMethod"in y,"argument-error"),xt._fromParams(y)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Oe(p.idToken||p.accessToken,"argument-error"),xt._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Us.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Us.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:y,oauthAccessToken:D,oauthTokenSecret:re,pendingToken:Ee,nonce:Tt,providerId:pn}=p;if(!D&&!re&&!y&&!Ee||!pn)return null;try{return new Us(pn)._credential({idToken:y,accessToken:D,nonce:Tt,pendingToken:Ee})}catch(dr){return null}}}let Gs=(()=>{class b extends ho{constructor(){super("facebook.com")}static credential(y){return xt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(D){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),zs=(()=>{class b extends ho{constructor(){super("google.com"),this.addScope("profile")}static credential(y,D){return xt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:D})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:D,oauthAccessToken:re}=y;if(!D&&!re)return null;try{return b.credential(D,re)}catch(Ee){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Vo=(()=>{class b extends ho{constructor(){super("github.com")}static credential(y){return xt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(D){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Ws extends Ii{constructor(p,y){super(p,p),this.pendingToken=y}_getIdTokenResponse(p){return ns(p,this.buildRequest())}_linkToIdToken(p,y){const D=this.buildRequest();return D.idToken=y,ns(p,D)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,ns(p,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:re,pendingToken:Ee}=y;return D&&re&&Ee&&D===re?new Ws(D,Ee):null}static _create(p,y){return new Ws(p,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xs extends bi{constructor(p){Oe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return xs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return xs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const y=Ws.fromJSON(p);return Oe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:y,providerId:D}=p;if(!y||!D)return null;try{return Ws._create(D,y)}catch(re){return null}}}let Qo=(()=>{class b extends ho{constructor(){super("twitter.com")}static credential(y,D){return xt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:D})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:D,oauthTokenSecret:re}=y;if(!D||!re)return null;try{return b.credential(D,re)}catch(Ee){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function us(b,p){return so.apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(b,p){return Hn(b,"POST","/v1/accounts:signUp",At(b,p))})).apply(this,arguments)}class Ms{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,y,D,re=!1){return(0,g.Z)(function*(){const Ee=yield Vr._fromIdTokenResponse(p,D,re),Tt=Li(D);return new Ms({user:Ee,providerId:Tt,_tokenResponse:D,operationType:y})})()}static _forOperation(p,y,D){return(0,g.Z)(function*(){yield p._updateTokensIfNecessary(D,!0);const re=Li(D);return new Ms({user:p,providerId:re,_tokenResponse:D,operationType:y})})()}}function Li(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function fo(){return(fo=(0,g.Z)(function*(b){var p;const y=br(b);if(yield y._initializationPromise,null===(p=y.currentUser)||void 0===p?void 0:p.isAnonymous)return new Ms({user:y.currentUser,providerId:null,operationType:"signIn"});const D=yield us(y,{returnSecureToken:!0}),re=yield Ms._fromIdTokenResponse(y,"signIn",D,!0);return yield y._updateCurrentUser(re.user),re})).apply(this,arguments)}class Zs extends he.ZR{constructor(p,y,D,re){var Ee;super(y.code,y.message),this.operationType=D,this.user=re,Object.setPrototypeOf(this,Zs.prototype),this.customData={appName:p.name,tenantId:null!==(Ee=p.tenantId)&&void 0!==Ee?Ee:void 0,_serverResponse:y.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(p,y,D,re){return new Zs(p,y,D,re)}}function Rs(b,p,y,D){return("reauthenticate"===p?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(Ee=>{throw"auth/multi-factor-auth-required"===Ee.code?Zs._fromErrorAndOperation(b,Ee,p,D):Ee})}function qs(b){return new Set(b.map(({providerId:p})=>p).filter(p=>!!p))}function Ti(){return(Ti=(0,g.Z)(function*(b,p){const y=(0,he.m9)(b);yield W(!0,y,p);const{providerUserInfo:D}=yield xr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[p]}),re=qs(D||[]);return y.providerData=y.providerData.filter(Ee=>re.has(Ee.providerId)),re.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function B(b,p){return fe.apply(this,arguments)}function fe(){return(fe=(0,g.Z)(function*(b,p,y=!1){const D=yield Jr(b,p._linkToIdToken(b.auth,yield b.getIdToken()),y);return Ms._forOperation(b,"link",D)})).apply(this,arguments)}function W(b,p,y){return ve.apply(this,arguments)}function ve(){return(ve=(0,g.Z)(function*(b,p,y){yield gi(p);const re=!1===b?"provider-already-linked":"no-such-provider";Oe(qs(p.providerData).has(y)===b,p.auth,re)})).apply(this,arguments)}function Ke(b,p){return rn.apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(b,p,y=!1){const{auth:D}=b,re="reauthenticate";try{const Ee=yield Jr(b,Rs(D,re,p,b),y);Oe(Ee.idToken,D,"internal-error");const Tt=En(Ee.idToken);Oe(Tt,D,"internal-error");const{sub:pn}=Tt;return Oe(b.uid===pn,D,"user-mismatch"),Ms._forOperation(b,re,Ee)}catch(Ee){throw"auth/user-not-found"===(null==Ee?void 0:Ee.code)&&xe(D,"user-mismatch"),Ee}})).apply(this,arguments)}function wn(b,p){return hr.apply(this,arguments)}function hr(){return(hr=(0,g.Z)(function*(b,p,y=!1){const D="signIn",re=yield Rs(b,D,p),Ee=yield Ms._fromIdTokenResponse(b,D,re);return y||(yield b._updateCurrentUser(Ee.user)),Ee})).apply(this,arguments)}function Gr(b,p){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(b,p){return wn(br(b),p)})).apply(this,arguments)}function ni(b,p){return yi.apply(this,arguments)}function yi(){return(yi=(0,g.Z)(function*(b,p){const y=(0,he.m9)(b);return yield W(!1,y,p.providerId),B(y,p)})).apply(this,arguments)}function Zi(b,p){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(function*(b,p){return Ke((0,he.m9)(b),p)})).apply(this,arguments)}function Si(b,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,g.Z)(function*(b,p){return Hn(b,"POST","/v1/accounts:signInWithCustomToken",At(b,p))})).apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(b,p){const y=br(b),D=yield Si(y,{token:p,returnSecureToken:!0}),re=yield Ms._fromIdTokenResponse(y,"signIn",D);return yield y._updateCurrentUser(re.user),re})).apply(this,arguments)}class Js{constructor(p,y){this.factorId=p,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(p,y){return"phoneInfo"in y?Ao._fromServerResponse(p,y):xe(p,"internal-error")}}class Ao extends Js{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,y){return new Ao(y)}}function To(b,p,y){var D;Oe((null===(D=y.url)||void 0===D?void 0:D.length)>0,b,"invalid-continue-uri"),Oe(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),p.continueUrl=y.url,p.dynamicLinkDomain=y.dynamicLinkDomain,p.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Oe(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),p.iOSBundleId=y.iOS.bundleId),y.android&&(Oe(y.android.packageName.length>0,b,"missing-android-pkg-name"),p.androidInstallApp=y.android.installApp,p.androidMinimumVersionCode=y.android.minimumVersion,p.androidPackageName=y.android.packageName)}function Q(){return(Q=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),re={requestType:"PASSWORD_RESET",email:p};y&&To(D,re,y),yield Gi(D,re)})).apply(this,arguments)}function V(){return(V=(0,g.Z)(function*(b,p,y){yield Hi((0,he.m9)(b),{oobCode:p,newPassword:y})})).apply(this,arguments)}function Ye(){return(Ye=(0,g.Z)(function*(b,p){yield Cs((0,he.m9)(b),{oobCode:p})})).apply(this,arguments)}function xn(b,p){return ee.apply(this,arguments)}function ee(){return(ee=(0,g.Z)(function*(b,p){const y=(0,he.m9)(b),D=yield Hi(y,{oobCode:p}),re=D.requestType;switch(Oe(re,y,"internal-error"),re){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(D.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(D.mfaInfo,y,"internal-error");default:Oe(D.email,y,"internal-error")}let Ee=null;return D.mfaInfo&&(Ee=Js._fromServerResponse(br(y),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:Ee},operation:re}})).apply(this,arguments)}function Ce(){return(Ce=(0,g.Z)(function*(b,p){const{data:y}=yield xn((0,he.m9)(b),p);return y.email})).apply(this,arguments)}function rt(){return(rt=(0,g.Z)(function*(b,p,y){const D=br(b),re=yield us(D,{returnSecureToken:!0,email:p,password:y}),Ee=yield Ms._fromIdTokenResponse(D,"signIn",re);return yield D._updateCurrentUser(Ee.user),Ee})).apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),re={requestType:"EMAIL_SIGNIN",email:p};Oe(y.handleCodeInApp,D,"argument-error"),y&&To(D,re,y),yield ui(D,re)})).apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),re=Lo.credentialWithLink(p,y||Rt());return Oe(re._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),Gr(D,re)})).apply(this,arguments)}function hi(b,p){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:createAuthUri",At(b,p))})).apply(this,arguments)}function l(){return(l=(0,g.Z)(function*(b,p){const D={identifier:p,continueUri:Sn()?Rt():"http://localhost"},{signinMethods:re}=yield hi((0,he.m9)(b),D);return re||[]})).apply(this,arguments)}function I(){return(I=(0,g.Z)(function*(b,p){const y=(0,he.m9)(b),re={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};p&&To(y.auth,re,p);const{email:Ee}=yield xi(y.auth,re);Ee!==b.email&&(yield b.reload())})).apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),Ee={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:p};y&&To(D.auth,Ee,y);const{email:Tt}=yield gs(D.auth,Ee);Tt!==b.email&&(yield b.reload())})).apply(this,arguments)}function J(b,p){return ge.apply(this,arguments)}function ge(){return(ge=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function oe(){return(oe=(0,g.Z)(function*(b,{displayName:p,photoURL:y}){if(void 0===p&&void 0===y)return;const D=(0,he.m9)(b),Ee={idToken:yield D.getIdToken(),displayName:p,photoUrl:y,returnSecureToken:!0},Tt=yield Jr(D,J(D.auth,Ee));D.displayName=Tt.displayName||null,D.photoURL=Tt.photoUrl||null;const pn=D.providerData.find(({providerId:dr})=>"password"===dr);pn&&(pn.displayName=D.displayName,pn.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Tt)})).apply(this,arguments)}function le(b,p,y){return Te.apply(this,arguments)}function Te(){return(Te=(0,g.Z)(function*(b,p,y){const{auth:D}=b,Ee={idToken:yield b.getIdToken(),returnSecureToken:!0};p&&(Ee.email=p),y&&(Ee.password=y);const Tt=yield Jr(b,es(D,Ee));yield b._updateTokensIfNecessary(Tt,!0)})).apply(this,arguments)}class tt{constructor(p,y,D={}){this.isNewUser=p,this.providerId=y,this.profile=D}}class De extends tt{constructor(p,y,D,re){super(p,y,D),this.username=re}}class ke extends tt{constructor(p,y){super(p,"facebook.com",y)}}class _t extends De{constructor(p,y){super(p,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class et extends tt{constructor(p,y){super(p,"google.com",y)}}class yt extends De{constructor(p,y,D){super(p,"twitter.com",y,D)}}function vn(b){const{user:p,_tokenResponse:y}=b;return p.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function We(b){var p,y;if(!b)return null;const{providerId:D}=b,re=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},Ee=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!D&&(null==b?void 0:b.idToken)){const Tt=null===(y=null===(p=En(b.idToken))||void 0===p?void 0:p.firebase)||void 0===y?void 0:y.sign_in_provider;if(Tt)return new tt(Ee,"anonymous"!==Tt&&"custom"!==Tt?Tt:null)}if(!D)return null;switch(D){case"facebook.com":return new ke(Ee,re);case"github.com":return new _t(Ee,re);case"google.com":return new et(Ee,re);case"twitter.com":return new yt(Ee,re,b.screenName||null);case"custom":case"anonymous":return new tt(Ee,null);default:return new tt(Ee,D,re)}}(y)}class lr{constructor(p,y,D){this.type=p,this.credential=y,this.auth=D}static _fromIdtoken(p,y){return new lr("enroll",p,y)}static _fromMfaPendingCredential(p){return new lr("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var y,D;if(null==p?void 0:p.multiFactorSession){if(null===(y=p.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return lr._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(D=p.multiFactorSession)||void 0===D?void 0:D.idToken)return lr._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ar{constructor(p,y,D){this.session=p,this.hints=y,this.signInResolver=D}static _fromError(p,y){const D=br(p),re=y.customData._serverResponse,Ee=(re.mfaInfo||[]).map(pn=>Js._fromServerResponse(D,pn));Oe(re.mfaPendingCredential,D,"internal-error");const Tt=lr._fromMfaPendingCredential(re.mfaPendingCredential);return new ar(Tt,Ee,function(){var pn=(0,g.Z)(function*(dr){const kr=yield dr._process(D,Tt);delete re.mfaInfo,delete re.mfaPendingCredential;const Ci=Object.assign(Object.assign({},re),{idToken:kr.idToken,refreshToken:kr.refreshToken});switch(y.operationType){case"signIn":const di=yield Ms._fromIdTokenResponse(D,y.operationType,Ci);return yield D._updateCurrentUser(di.user),di;case"reauthenticate":return Oe(y.user,D,"internal-error"),Ms._forOperation(y.user,y.operationType,Ci);default:xe(D,"internal-error")}});return function(dr){return pn.apply(this,arguments)}}())}resolveSignIn(p){var y=this;return(0,g.Z)(function*(){return y.signInResolver(p)})()}}function cr(b,p){return ut(b,"POST","/v2/accounts/mfaEnrollment:start",At(b,p))}class Di{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(D=>Js._fromServerResponse(p.auth,D)))})}static _fromUser(p){return new Di(p)}getSession(){var p=this;return(0,g.Z)(function*(){return lr._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,y){var D=this;return(0,g.Z)(function*(){const re=p,Ee=yield D.getSession(),Tt=yield Jr(D.user,re._process(D.user.auth,Ee,y));return yield D.user._updateTokensIfNecessary(Tt),D.user.reload()})()}unenroll(p){var y=this;return(0,g.Z)(function*(){const D="string"==typeof p?p:p.uid,re=yield y.user.getIdToken(),Ee=yield Jr(y.user,function _i(b,p){return ut(b,"POST","/v2/accounts/mfaEnrollment:withdraw",At(b,p))}(y.user.auth,{idToken:re,mfaEnrollmentId:D}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Tt})=>Tt!==D),yield y.user._updateTokensIfNecessary(Ee);try{yield y.user.reload()}catch(Tt){if("auth/user-token-expired"!==(null==Tt?void 0:Tt.code))throw Tt}})()}}const Ys=new WeakMap,Z="__sak";class C{constructor(p,y){this.storageRetriever=p,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Z,"1"),this.storage.removeItem(Z),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,y){return this.storage.setItem(p,JSON.stringify(y)),Promise.resolve()}_get(p){const y=this.storage.getItem(p);return Promise.resolve(y?JSON.parse(y):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ve=(()=>{class b extends C{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,D)=>this.onStorageEvent(y,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function T(){const b=(0,he.z$)();return Me(b)||ai(b)}()&&function ci(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Fi(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const D of Object.keys(this.listeners)){const re=this.storage.getItem(D),Ee=this.localCache[D];re!==Ee&&y(D,Ee,re)}}onStorageEvent(y,D=!1){if(!y.key)return void this.forAllChangedKeys((pn,dr,kr)=>{this.notifyListeners(pn,kr)});const re=y.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pn=this.storage.getItem(re);if(y.newValue!==pn)null!==y.newValue?this.storage.setItem(re,y.newValue):this.storage.removeItem(re);else if(this.localCache[re]===y.newValue&&!D)return}const Ee=()=>{const pn=this.storage.getItem(re);!D&&this.localCache[re]===pn||this.notifyListeners(re,pn)},Tt=this.storage.getItem(re);!function Hs(){return(0,he.w1)()&&10===document.documentMode}()||Tt===y.newValue||y.newValue===y.oldValue?Ee():setTimeout(Ee,10)}notifyListeners(y,D){this.localCache[y]=D;const re=this.listeners[y];if(re)for(const Ee of Array.from(re))Ee(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,D,re)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:D,newValue:re}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,D){var re=()=>super._set,Ee=this;return(0,g.Z)(function*(){yield re().call(Ee,y,D),Ee.localCache[y]=JSON.stringify(D)})()}_get(y){var D=()=>super._get,re=this;return(0,g.Z)(function*(){const Ee=yield D().call(re,y);return re.localCache[y]=JSON.stringify(Ee),Ee})()}_remove(y){var D=()=>super._remove,re=this;return(0,g.Z)(function*(){yield D().call(re,y),delete re.localCache[y]})()}}return b.type="LOCAL",b})(),vt=(()=>{class b extends C{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,D){}_removeListener(y,D){}}return b.type="SESSION",b})();let pr=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const D=this.receivers.find(Ee=>Ee.isListeningto(y));if(D)return D;const re=new b(y);return this.receivers.push(re),re}isListeningto(y){return this.eventTarget===y}handleEvent(y){var D=this;return(0,g.Z)(function*(){const re=y,{eventId:Ee,eventType:Tt,data:pn}=re.data,dr=D.handlersMap[Tt];if(!(null==dr?void 0:dr.size))return;re.ports[0].postMessage({status:"ack",eventId:Ee,eventType:Tt});const kr=Array.from(dr).map(function(){var di=(0,g.Z)(function*(qo){return qo(re.origin,pn)});return function(qo){return di.apply(this,arguments)}}()),Ci=yield function fn(b){return Promise.all(b.map(function(){var p=(0,g.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(D){return{fulfilled:!1,reason:D}}});return function(y){return p.apply(this,arguments)}}()))}(kr);re.ports[0].postMessage({status:"done",eventId:Ee,eventType:Tt,response:Ci})})()}_subscribe(y,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(D)}_unsubscribe(y,D){this.handlersMap[y]&&D&&this.handlersMap[y].delete(D),(!D||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function $t(b="",p=10){let y="";for(let D=0;D<p;D++)y+=Math.floor(10*Math.random());return b+y}class yr{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,y,D=50){var re=this;return(0,g.Z)(function*(){const Ee="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Ee)throw new Error("connection_unavailable");let Tt,pn;return new Promise((dr,kr)=>{const Ci=$t("",20);Ee.port1.start();const di=setTimeout(()=>{kr(new Error("unsupported_event"))},D);pn={messageChannel:Ee,onMessage(qo){const f=qo;if(f.data.eventId===Ci)switch(f.data.status){case"ack":clearTimeout(di),Tt=setTimeout(()=>{kr(new Error("timeout"))},3e3);break;case"done":clearTimeout(Tt),dr(f.data.response);break;default:clearTimeout(di),clearTimeout(Tt),kr(new Error("invalid_response"))}}},re.handlers.add(pn),Ee.port1.addEventListener("message",pn.onMessage),re.target.postMessage({eventType:p,eventId:Ci,data:y},[Ee.port2])}).finally(()=>{pn&&re.removeMessageHandler(pn)})})()}}function Rr(){return window}function Nn(){return void 0!==Rr().WorkerGlobalScope&&"function"==typeof Rr().importScripts}function eo(){return(eo=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const yn="firebaseLocalStorageDb",ao="firebaseLocalStorage",yo="fbase_key";class O{constructor(p){this.request=p}toPromise(){return new Promise((p,y)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function M(b,p){return b.transaction([ao],p?"readwrite":"readonly").objectStore(ao)}function q(){const b=indexedDB.open(yn,1);return new Promise((p,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const D=b.result;try{D.createObjectStore(ao,{keyPath:yo})}catch(re){y(re)}}),b.addEventListener("success",(0,g.Z)(function*(){const D=b.result;D.objectStoreNames.contains(ao)?p(D):(D.close(),yield function S(){const b=indexedDB.deleteDatabase(yn);return new O(b).toPromise()}(),p(yield q()))}))})}function ne(b,p,y){return _e.apply(this,arguments)}function _e(){return(_e=(0,g.Z)(function*(b,p,y){const D=M(b,!0).put({[yo]:p,value:y});return new O(D).toPromise()})).apply(this,arguments)}function ot(){return(ot=(0,g.Z)(function*(b,p){const y=M(b,!1).get(p),D=yield new O(y).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function It(b,p){const y=M(b,!0).delete(p);return new O(y).toPromise()}const Er=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,g.Z)(function*(){return y.db||(y.db=yield q()),y.db})()}_withRetries(y){var D=this;return(0,g.Z)(function*(){let re=0;for(;;)try{const Ee=yield D._openDb();return yield y(Ee)}catch(Ee){if(re++>3)throw Ee;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,g.Z)(function*(){return Nn()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,g.Z)(function*(){y.receiver=pr._getInstance(function qt(){return Nn()?self:null}()),y.receiver._subscribe("keyChanged",function(){var D=(0,g.Z)(function*(re,Ee){return{keyProcessed:(yield y._poll()).includes(Ee.key)}});return function(re,Ee){return D.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var D=(0,g.Z)(function*(re,Ee){return["keyChanged"]});return function(re,Ee){return D.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,g.Z)(function*(){var D,re;if(y.activeServiceWorker=yield function Jn(){return eo.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new yr(y.activeServiceWorker);const Ee=yield y.sender._send("ping",{},800);!Ee||(null===(D=Ee[0])||void 0===D?void 0:D.fulfilled)&&(null===(re=Ee[0])||void 0===re?void 0:re.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var D=this;return(0,g.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Gn(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:y},D.serviceWorkerReceiverAvailable?800:50)}catch(re){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const y=yield q();return yield ne(y,Z,"1"),yield It(y,Z),!0}catch(y){}return!1})()}_withPendingWrite(y){var D=this;return(0,g.Z)(function*(){D.pendingWrites++;try{yield y()}finally{D.pendingWrites--}})()}_set(y,D){var re=this;return(0,g.Z)(function*(){return re._withPendingWrite((0,g.Z)(function*(){return yield re._withRetries(Ee=>ne(Ee,y,D)),re.localCache[y]=D,re.notifyServiceWorker(y)}))})()}_get(y){var D=this;return(0,g.Z)(function*(){const re=yield D._withRetries(Ee=>function Be(b,p){return ot.apply(this,arguments)}(Ee,y));return D.localCache[y]=re,re})()}_remove(y){var D=this;return(0,g.Z)(function*(){return D._withPendingWrite((0,g.Z)(function*(){return yield D._withRetries(re=>It(re,y)),delete D.localCache[y],D.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,g.Z)(function*(){const D=yield y._withRetries(Tt=>{const pn=M(Tt,!1).getAll();return new O(pn).toPromise()});if(!D)return[];if(0!==y.pendingWrites)return[];const re=[],Ee=new Set;for(const{fbase_key:Tt,value:pn}of D)Ee.add(Tt),JSON.stringify(y.localCache[Tt])!==JSON.stringify(pn)&&(y.notifyListeners(Tt,pn),re.push(Tt));for(const Tt of Object.keys(y.localCache))y.localCache[Tt]&&!Ee.has(Tt)&&(y.notifyListeners(Tt,null),re.push(Tt));return re})()}notifyListeners(y,D){this.localCache[y]=D;const re=this.listeners[y];if(re)for(const Ee of Array.from(re))Ee(D)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function zn(b,p){return ut(b,"POST","/v2/accounts/mfaSignIn:start",At(b,p))}function cs(){return(cs=(0,g.Z)(function*(b){return(yield ut(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function rr(b){return new Promise((p,y)=>{const D=document.createElement("script");D.setAttribute("src",b),D.onload=p,D.onerror=re=>{const Ee=Ge("internal-error");Ee.customData=re,y(Ee)},D.type="text/javascript",D.charset="UTF-8",function Ss(){var b,p;return null!==(p=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==p?p:document}().appendChild(D)})}function vs(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Jo=1e12;class Ua{constructor(p){this.auth=p,this.counter=Jo,this._widgets=new Map}render(p,y){const D=this.counter;return this._widgets.set(D,new Qa(p,this.auth.name,y||{})),this.counter++,D}reset(p){var y;const D=p||Jo;null===(y=this._widgets.get(D))||void 0===y||y.delete(),this._widgets.delete(D)}getResponse(p){var y;return(null===(y=this._widgets.get(p||Jo))||void 0===y?void 0:y.getResponse())||""}execute(p){var y=this;return(0,g.Z)(function*(){var D;return null===(D=y._widgets.get(p||Jo))||void 0===D||D.execute(),""})()}}class Qa{constructor(p,y,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const re="string"==typeof p?document.getElementById(p):p;Oe(re,"argument-error",{appName:y}),this.container=re,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ll(b){const p=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<b;D++)p.push(y.charAt(Math.floor(Math.random()*y.length)));return p.join("")}(50);const{callback:p,"expired-callback":y}=this.params;if(p)try{p(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mu=vs("rcb"),po=new Tr(3e4,6e4);class Ca{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=Rr().grecaptcha)||void 0===p?void 0:p.render)}load(p,y=""){return Oe(function wc(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),p,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Rr().grecaptcha):new Promise((D,re)=>{const Ee=Rr().setTimeout(()=>{re(Ge(p,"network-request-failed"))},po.get());Rr()[mu]=()=>{Rr().clearTimeout(Ee),delete Rr()[mu];const pn=Rr().grecaptcha;if(!pn)return void re(Ge(p,"internal-error"));const dr=pn.render;pn.render=(kr,Ci)=>{const di=dr(kr,Ci);return this.counter++,di},this.hostLanguage=y,D(pn)},rr(`https://www.google.com/recaptcha/api.js??${(0,he.xO)({onload:mu,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(Ee),re(Ge(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var y;return!!(null===(y=Rr().grecaptcha)||void 0===y?void 0:y.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ic{load(p){return(0,g.Z)(function*(){return new Ua(p)})()}clearedOneInstance(){}}const oa="recaptcha",Xl={theme:"light",type:"image"};class en{constructor(p,y=Object.assign({},Xl),D){this.parameters=y,this.type=oa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=br(D),this.isInvisible="invisible"===this.parameters.size,Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const re="string"==typeof p?document.getElementById(p):p;Oe(re,this.auth,"argument-error"),this.container=re,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ic:new Ca,this.validateStartingState()}verify(){var p=this;return(0,g.Z)(function*(){p.assertNotDestroyed();const y=yield p.render(),D=p.getAssertedRecaptcha();return D.getResponse(y)||new Promise(Ee=>{const Tt=pn=>{!pn||(p.tokenChangeListeners.delete(Tt),Ee(pn))};p.tokenChangeListeners.add(Tt),p.isInvisible&&D.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return y=>{if(this.tokenChangeListeners.forEach(D=>D(y)),"function"==typeof p)p(y);else if("string"==typeof p){const D=Rr()[p];"function"==typeof D&&D(y)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,g.Z)(function*(){if(yield p.init(),!p.widgetId){let y=p.container;if(!p.isInvisible){const D=document.createElement("div");y.appendChild(D),y=D}p.widgetId=p.getAssertedRecaptcha().render(y,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,g.Z)(function*(){Oe(Sn()&&!Nn(),p.auth,"internal-error"),yield function Xa(){let b=null;return new Promise(p=>{"complete"!==document.readyState?(b=()=>p(),window.addEventListener("load",b)):p()}).catch(p=>{throw b&&window.removeEventListener("load",b),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const y=yield function $r(b){return cs.apply(this,arguments)}(p.auth);Oe(y,p.auth,"internal-error"),p.parameters.sitekey=y})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ba{constructor(p,y){this.verificationId=p,this.onConfirmation=y}confirm(p){const y=As._fromVerification(this.verificationId,p);return this.onConfirmation(y)}}function Ta(){return(Ta=(0,g.Z)(function*(b,p,y){const D=br(b),re=yield ea(D,p,(0,he.m9)(y));return new ba(re,Ee=>Gr(D,Ee))})).apply(this,arguments)}function Gu(){return(Gu=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);yield W(!1,D,"phone");const re=yield ea(D.auth,p,(0,he.m9)(y));return new ba(re,Ee=>ni(D,Ee))})).apply(this,arguments)}function xo(){return(xo=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b),re=yield ea(D.auth,p,(0,he.m9)(y));return new ba(re,Ee=>Zi(D,Ee))})).apply(this,arguments)}function ea(b,p,y){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,g.Z)(function*(b,p,y){var D;const re=yield y.verify();try{let Ee;if(Oe("string"==typeof re,b,"argument-error"),Oe(y.type===oa,b,"argument-error"),Ee="string"==typeof p?{phoneNumber:p}:p,"session"in Ee){const Tt=Ee.session;if("phoneNumber"in Ee)return Oe("enroll"===Tt.type,b,"internal-error"),(yield cr(b,{idToken:Tt.credential,phoneEnrollmentInfo:{phoneNumber:Ee.phoneNumber,recaptchaToken:re}})).phoneSessionInfo.sessionInfo;{Oe("signin"===Tt.type,b,"internal-error");const pn=(null===(D=Ee.multiFactorHint)||void 0===D?void 0:D.uid)||Ee.multiFactorUid;return Oe(pn,b,"missing-multi-factor-info"),(yield zn(b,{mfaPendingCredential:Tt.credential,mfaEnrollmentId:pn,phoneSignInInfo:{recaptchaToken:re}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Tt}=yield _n(b,{phoneNumber:Ee.phoneNumber,recaptchaToken:re});return Tt}}finally{y._reset()}})).apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(b,p){yield B((0,he.m9)(b),p)})).apply(this,arguments)}let dl=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=br(y)}verifyPhoneNumber(y,D){return ea(this.auth,y,(0,he.m9)(D))}static credential(y,D){return As._fromVerification(y,D)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:D,temporaryProof:re}=y;return D&&re?As._fromTokenResponse(D,re):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function ta(b,p){return p?Je(p):(Oe(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Sl extends Ii{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ns(p,this._buildIdpRequest())}_linkToIdToken(p,y){return ns(p,this._buildIdpRequest(y))}_getReauthenticationResolver(p){return ns(p,this._buildIdpRequest())}_buildIdpRequest(p){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(y.idToken=p),y}}function Ba(b){return wn(b.auth,new Sl(b),b.bypassAuthState)}function _u(b){const{auth:p,user:y}=b;return Oe(y,p,"internal-error"),Ke(y,new Sl(b),b.bypassAuthState)}function da(b){return vo.apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(b){const{auth:p,user:y}=b;return Oe(y,p,"internal-error"),B(y,new Sl(b),b.bypassAuthState)})).apply(this,arguments)}class Ja{constructor(p,y,D,re,Ee=!1){this.auth=p,this.resolver=D,this.user=re,this.bypassAuthState=Ee,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var p=this;return new Promise(function(){var y=(0,g.Z)(function*(D,re){p.pendingPromise={resolve:D,reject:re};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(Ee){p.reject(Ee)}});return function(D,re){return y.apply(this,arguments)}}())}onAuthEvent(p){var y=this;return(0,g.Z)(function*(){const{urlResponse:D,sessionId:re,postBody:Ee,tenantId:Tt,error:pn,type:dr}=p;if(pn)return void y.reject(pn);const kr={auth:y.auth,requestUri:D,sessionId:re,tenantId:Tt||void 0,postBody:Ee||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(dr)(kr))}catch(Ci){y.reject(Ci)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ba;case"linkViaPopup":case"linkViaRedirect":return da;case"reauthViaPopup":case"reauthViaRedirect":return _u;default:xe(this.auth,"internal-error")}}resolve(p){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $a=new Tr(2e3,1e4);function ja(){return(ja=(0,g.Z)(function*(b,p,y){const D=br(b);on(b,p,bi);const re=ta(D,y);return new tl(D,"signInViaPopup",p,re).executeNotNull()})).apply(this,arguments)}function to(){return(to=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);on(D.auth,p,bi);const re=ta(D.auth,y);return new tl(D.auth,"reauthViaPopup",p,re,D).executeNotNull()})).apply(this,arguments)}function Vl(){return(Vl=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);on(D.auth,p,bi);const re=ta(D.auth,y);return new tl(D.auth,"linkViaPopup",p,re,D).executeNotNull()})).apply(this,arguments)}let tl=(()=>{class b extends Ja{constructor(y,D,re,Ee,Tt){super(y,D,Ee,Tt),this.provider=re,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,g.Z)(function*(){const D=yield y.execute();return Oe(D,y.auth,"internal-error"),D})()}onExecution(){var y=this;return(0,g.Z)(function*(){Re(1===y.filter.length,"Popup operations only handle one event");const D=$t();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],D),y.authWindow.associatedEvent=D,y.resolver._originValidation(y.auth).catch(re=>{y.reject(re)}),y.resolver._isIframeWebStorageSupported(y.auth,re=>{re||y.reject(Ge(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var D,re;this.pollId=(null===(re=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===re?void 0:re.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ge(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,$a.get())};y()}}return b.currentPopupAction=null,b})();const na=new Map;class hl extends Ja{constructor(p,y,D=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,D),this.eventId=null}execute(){var p=()=>super.execute,y=this;return(0,g.Z)(function*(){let D=na.get(y.auth._key());if(!D){try{const Ee=(yield function nl(b,p){return uo.apply(this,arguments)}(y.resolver,y.auth))?yield p().call(y):null;D=()=>Promise.resolve(Ee)}catch(re){D=()=>Promise.reject(re)}na.set(y.auth._key(),D)}return y.bypassAuthState||na.set(y.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(p){var y=()=>super.onAuthEvent,D=this;return(0,g.Z)(function*(){if("signInViaRedirect"===p.type)return y().call(D,p);if("unknown"!==p.type){if(p.eventId){const re=yield D.auth._redirectUserForId(p.eventId);if(re)return D.user=re,y().call(D,p);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function uo(){return(uo=(0,g.Z)(function*(b,p){const y=Ia(p),D=Dl(b);if(!(yield D._isAvailable()))return!1;const re="true"===(yield D._get(y));return yield D._remove(y),re})).apply(this,arguments)}function Ga(b,p){return Io.apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(b,p){return Dl(b)._set(Ia(p),"true")})).apply(this,arguments)}function fl(b,p){na.set(b._key(),p)}function Dl(b){return Je(b._redirectPersistence)}function Ia(b){return ft("pendingRedirect",b.config.apiKey,b.name)}function U(){return(U=(0,g.Z)(function*(b,p,y){const D=br(b);on(b,p,bi);const re=ta(D,y);return yield Ga(re,D),re._openRedirect(D,p,"signInViaRedirect")})).apply(this,arguments)}function $e(){return($e=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);on(D.auth,p,bi);const re=ta(D.auth,y);yield Ga(re,D.auth);const Ee=yield Ei(D);return re._openRedirect(D.auth,p,"reauthViaRedirect",Ee)})).apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(b,p,y){const D=(0,he.m9)(b);on(D.auth,p,bi);const re=ta(D.auth,y);yield W(!1,D,p.providerId),yield Ga(re,D.auth);const Ee=yield Ei(D);return re._openRedirect(D.auth,p,"linkViaRedirect",Ee)})).apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(b,p){return yield br(b)._initializationPromise,zr(b,p,!1)})).apply(this,arguments)}function zr(b,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(b,p,y=!1){const D=br(b),re=ta(D,p),Tt=yield new hl(D,re,y).execute();return Tt&&!y&&(delete Tt.user._redirectEventId,yield D._persistUserIfCurrent(Tt.user),yield D._setRedirectUser(null,p)),Tt})).apply(this,arguments)}function Ei(b){return jo.apply(this,arguments)}function jo(){return(jo=(0,g.Z)(function*(b){const p=$t(`${b.uid}:::`);return b._redirectEventId=p,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),p})).apply(this,arguments)}class ss{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let y=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(p,D)&&(y=!0,this.sendToConsumer(p,D),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Mo(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pa(b);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=p,y=!0)),y}sendToConsumer(p,y){var D;if(p.error&&!Pa(p)){const re=(null===(D=p.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";y.onError(Ge(this.auth,re))}else y.onAuthEvent(p)}isEventForConsumer(p,y){const D=null===y.eventId||!!p.eventId&&p.eventId===y.eventId;return y.filter.includes(p.type)&&D}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sa(p))}saveEventToCache(p){this.cachedEventUids.add(Sa(p)),this.lastProcessedEventTime=Date.now()}}function Sa(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(p=>p).join("-")}function Pa({type:b,error:p}){return"unknown"===b&&"auth/no-auth-event"===(null==p?void 0:p.code)}function So(b){return za.apply(this,arguments)}function za(){return(za=(0,g.Z)(function*(b,p={}){return ut(b,"GET","/v1/projects",p)})).apply(this,arguments)}const ad=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Al=/^https?/;function Bl(){return(Bl=(0,g.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:p}=yield So(b);for(const y of p)try{if(ld(y))return}catch(D){}xe(b,"unauthorized-domain")})).apply(this,arguments)}function ld(b){const p=Rt(),{protocol:y,hostname:D}=new URL(p);if(b.startsWith("chrome-extension://")){const Tt=new URL(b);return""===Tt.hostname&&""===D?"chrome-extension:"===y&&b.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===y&&Tt.hostname===D}if(!Al.test(y))return!1;if(ad.test(b))return D===b;const re=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+re+"|"+re+")$","i").test(D)}const ud=new Tr(3e4,6e4);function Na(){const b=Rr().___jsl;if(null==b?void 0:b.H)for(const p of Object.keys(b.H))if(b.H[p].r=b.H[p].r||[],b.H[p].L=b.H[p].L||[],b.H[p].r=[...b.H[p].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let vu=null;function Wu(b){return vu=vu||function qd(b){return new Promise((p,y)=>{var D,re,Ee;function Tt(){Na(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Na(),y(Ge(b,"network-request-failed"))},timeout:ud.get()})}if(null===(re=null===(D=Rr().gapi)||void 0===D?void 0:D.iframes)||void 0===re?void 0:re.Iframe)p(gapi.iframes.getContext());else{if(!(null===(Ee=Rr().gapi)||void 0===Ee?void 0:Ee.load)){const pn=vs("iframefcb");return Rr()[pn]=()=>{gapi.load?Tt():y(Ge(b,"network-request-failed"))},rr(`https://apis.google.com/js/api.js?onload=${pn}`).catch(dr=>y(dr))}Tt()}}).catch(p=>{throw vu=null,p})}(b),vu}const cd=new Tr(5e3,15e3),no={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ra(b){const p=b.config;Oe(p.authDomain,b,"auth-domain-config-required");const y=p.emulator?mr(p,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,D={apiKey:p.apiKey,appName:b.name,v:ae.SDK_VERSION},re=Eu.get(b.config.apiHost);re&&(D.eid=re);const Ee=b._getFrameworks();return Ee.length&&(D.fw=Ee.join(",")),`${y}?${(0,he.xO)(D).slice(1)}`}function $l(){return $l=(0,g.Z)(function*(b){const p=yield Wu(b),y=Rr().gapi;return Oe(y,b,"internal-error"),p.open({where:document.body,url:ra(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:no,dontclear:!0},D=>new Promise(function(){var re=(0,g.Z)(function*(Ee,Tt){yield D.restyle({setHideOnLeave:!1});const pn=Ge(b,"network-request-failed"),dr=Rr().setTimeout(()=>{Tt(pn)},cd.get());function kr(){Rr().clearTimeout(dr),Ee(D)}D.ping(kr).then(kr,()=>{Tt(pn)})});return function(Ee,Tt){return re.apply(this,arguments)}}()))}),$l.apply(this,arguments)}const pl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zu{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function _a(b,p,y,D,re,Ee){Oe(b.config.authDomain,b,"auth-domain-config-required"),Oe(b.config.apiKey,b,"invalid-api-key");const Tt={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:D,v:ae.SDK_VERSION,eventId:re};if(p instanceof bi){p.setDefaultLanguage(b.languageCode),Tt.providerId=p.providerId||"",(0,he.xb)(p.getCustomParameters())||(Tt.customParameters=JSON.stringify(p.getCustomParameters()));for(const[dr,kr]of Object.entries(Ee||{}))Tt[dr]=kr}if(p instanceof ho){const dr=p.getScopes().filter(kr=>""!==kr);dr.length>0&&(Tt.scopes=dr.join(","))}b.tenantId&&(Tt.tid=b.tenantId);const pn=Tt;for(const dr of Object.keys(pn))void 0===pn[dr]&&delete pn[dr];return`${function Gl({config:b}){return b.emulator?mr(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,he.xO)(pn).slice(1)}`}const tu="webStorageSupport";class ru extends class nu{constructor(p){this.factorId=p}_process(p,y,D){switch(y.type){case"enroll":return this._finalizeEnroll(p,y.credential,D);case"signin":return this._finalizeSignIn(p,y.credential);default:return Bt("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ru(p)}_finalizeEnroll(p,y,D){return function tr(b,p){return ut(b,"POST","/v2/accounts/mfaEnrollment:finalize",At(b,p))}(p,{idToken:y,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,y){return function Is(b,p){return ut(b,"POST","/v2/accounts/mfaSignIn:finalize",At(b,p))}(p,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qu=(()=>{class b{constructor(){}static assertion(y){return ru._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var iu="@firebase/auth";class va{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var y=this;return(0,g.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const y=this.auth.onIdTokenChanged(D=>{p((null==D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,y),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const y=this.internalListeners.get(p);!y||(this.internalListeners.delete(p),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Da(){return window}function zl(){return(zl=(0,g.Z)(function*(b,p,y){var D;const{BuildInfo:re}=Da();Re(p.sessionId,"AuthEvent did not contain a session ID");const Ee=yield Du(p.sessionId),Tt={};return ai()?Tt.ibi=re.packageName:sn()?Tt.apn=re.packageName:xe(b,"operation-not-supported-in-this-environment"),re.displayName&&(Tt.appDisplayName=re.displayName),Tt.sessionId=Ee,_a(b,y,p.type,void 0,null!==(D=p.eventId)&&void 0!==D?D:void 0,Tt)})).apply(this,arguments)}function Ac(){return(Ac=(0,g.Z)(function*(b){const{BuildInfo:p}=Da(),y={};ai()?y.iosBundleId=p.packageName:sn()?y.androidPackageName=p.packageName:xe(b,"operation-not-supported-in-this-environment"),yield So(b,y)})).apply(this,arguments)}function Iu(){return(Iu=(0,g.Z)(function*(b,p,y){const{cordova:D}=Da();let re=()=>{};try{yield new Promise((Ee,Tt)=>{let pn=null;function dr(){var di;Ee();const qo=null===(di=D.plugins.browsertab)||void 0===di?void 0:di.close;"function"==typeof qo&&qo(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function kr(){pn||(pn=window.setTimeout(()=>{Tt(Ge(b,"redirect-cancelled-by-user"))},2e3))}function Ci(){"visible"===(null==document?void 0:document.visibilityState)&&kr()}p.addPassiveListener(dr),document.addEventListener("resume",kr,!1),sn()&&document.addEventListener("visibilitychange",Ci,!1),re=()=>{p.removePassiveListener(dr),document.removeEventListener("resume",kr,!1),document.removeEventListener("visibilitychange",Ci,!1),pn&&window.clearTimeout(pn)}})}finally{re()}})).apply(this,arguments)}function Du(b){return yl.apply(this,arguments)}function yl(){return(yl=(0,g.Z)(function*(b){const p=ec(b),y=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(y)).map(re=>re.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ec(b){if(Re(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const p=new ArrayBuffer(b.length),y=new Uint8Array(p);for(let D=0;D<b.length;D++)y[D]=b.charCodeAt(D);return y}(0,he.Pz)("authIdTokenMaxAge"),function Cu(b){(0,ae._registerComponent)(new dt.wA("auth",(p,{options:y})=>{const D=p.getProvider("app").getImmediate(),re=p.getProvider("heartbeat"),{apiKey:Ee,authDomain:Tt}=D.options;return((pn,dr)=>{Oe(Ee&&!Ee.includes(":"),"invalid-api-key",{appName:pn.name}),Oe(!(null==Tt?void 0:Tt.includes(":")),"argument-error",{appName:pn.name});const kr={apiKey:Ee,authDomain:Tt,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:as(b)},Ci=new Cn(pn,dr,kr);return function pt(b,p){const y=(null==p?void 0:p.persistence)||[],D=(Array.isArray(y)?y:[y]).map(Je);(null==p?void 0:p.errorMap)&&b._updateErrorMap(p.errorMap),b._initializeWithPersistence(D,null==p?void 0:p.popupRedirectResolver)}(Ci,y),Ci})(D,re)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,y,D)=>{p.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new dt.wA("auth-internal",p=>{const y=br(p.getProvider("auth").getImmediate());return new va(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(iu,"0.21.0",function ha(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,ae.registerVersion)(iu,"0.21.0","esm2017")}("Browser");class dd extends ss{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(p)),super.onEvent(p)}initialized(){var p=this;return(0,g.Z)(function*(){yield p.initPromise})()}}function Wa(b){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,g.Z)(function*(b){const p=yield io()._get(go(b));return p&&(yield io()._remove(go(b))),p})).apply(this,arguments)}function vl(){const b=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const D=Math.floor(Math.random()*p.length);b.push(p.charAt(D))}return b.join("")}function io(){return Je(Ve)}function go(b){return ft("authEvent",b.config.apiKey,b.name)}function xu(b){if(!(null==b?void 0:b.includes("?")))return{};const[p,...y]=b.split("?");return(0,he.zd)(y.join("?"))}function ou(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ge("no-auth-event")}}function zo(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function Rc(b=(0,he.z$)()){return!("file:"!==zo()&&"ionic:"!==zo()&&"capacitor:"!==zo()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function il(){try{const b=self.localStorage,p=$t();if(b)return b.setItem(p,"1"),b.removeItem(p),!function Pu(b=(0,he.z$)()){return function Es(){return(0,he.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ua(b=(0,he.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,he.hl)()}catch(b){return nc()&&(0,he.hl)()}return!1}function nc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function fa(){return(function Wo(){return"http:"===zo()||"https:"===zo()}()||(0,he.ru)()||Rc())&&!function ko(){return(0,he.b$)()||(0,he.UG)()}()&&il()&&!nc()}function rc(){return Rc()&&"undefined"!=typeof document}function au(){return(au=(0,g.Z)(function*(){return!!rc()&&new Promise(b=>{const p=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),b(!0)})})})).apply(this,arguments)}const pa={LOCAL:"local",NONE:"none",SESSION:"session"},Rl=Oe,hd="persistence";function qi(b){return pd.apply(this,arguments)}function pd(){return(pd=(0,g.Z)(function*(b){yield b._initializationPromise;const p=Nu(),y=ft(hd,b.config.apiKey,b.name);p&&p.setItem(y,b._getPersistence())})).apply(this,arguments)}function Nu(){var b;try{return(null===(b=function El(){return"undefined"!=typeof window?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(p){return null}}const Ou=Oe;class xa{constructor(){this.browserResolver=Je(class gl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vt,this._completeRedirectFn=zr,this._overrideRedirectResult=fl}_openPopup(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){var Tt;Re(null===(Tt=Ee.eventManagers[p._key()])||void 0===Tt?void 0:Tt.manager,"_initialize() not called before _openPopup()");const pn=_a(p,y,D,Rt(),re);return function eu(b,p,y,D=500,re=600){const Ee=Math.max((window.screen.availHeight-re)/2,0).toString(),Tt=Math.max((window.screen.availWidth-D)/2,0).toString();let pn="";const dr=Object.assign(Object.assign({},pl),{width:D.toString(),height:re.toString(),top:Ee,left:Tt}),kr=(0,he.z$)().toLowerCase();y&&(pn=Ae(kr)?"_blank":y),ze(kr)&&(p=p||"http://localhost",dr.scrollbars="yes");const Ci=Object.entries(dr).reduce((qo,[f,c])=>`${qo}${f}=${c},`,"");if(function os(b=(0,he.z$)()){var p;return ai(b)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(kr)&&"_self"!==pn)return function jl(b,p){const y=document.createElement("a");y.href=b,y.target=p;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(D)}(p||"",pn),new Zu(null);const di=window.open(p||"",pn,Ci);Oe(di,b,"popup-blocked");try{di.focus()}catch(qo){}return new Zu(di)}(p,pn,$t())})()}_openRedirect(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){return yield Ee._originValidation(p),function Ur(b){Rr().location.href=b}(_a(p,y,D,Rt(),re)),new Promise(()=>{})})()}_initialize(p){const y=p._key();if(this.eventManagers[y]){const{manager:re,promise:Ee}=this.eventManagers[y];return re?Promise.resolve(re):(Re(Ee,"If manager is not set, promise should be"),Ee)}const D=this.initAndGetManager(p);return this.eventManagers[y]={promise:D},D.catch(()=>{delete this.eventManagers[y]}),D}initAndGetManager(p){var y=this;return(0,g.Z)(function*(){const D=yield function ro(b){return $l.apply(this,arguments)}(p),re=new ss(p);return D.register("authEvent",Ee=>(Oe(null==Ee?void 0:Ee.authEvent,p,"invalid-auth-event"),{status:re.onEvent(Ee.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[p._key()]={manager:re},y.iframes[p._key()]=D,re})()}_isIframeWebStorageSupported(p,y){this.iframes[p._key()].send(tu,{type:tu},re=>{var Ee;const Tt=null===(Ee=null==re?void 0:re[0])||void 0===Ee?void 0:Ee[tu];void 0!==Tt&&y(!!Tt),xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function xl(b){return Bl.apply(this,arguments)}(p)),this.originValidationPromises[y]}get _shouldInitProactively(){return Fi()||Me()||ai()}}),this.cordovaResolver=Je(class Mc{constructor(){this._redirectPersistence=vt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zr,this._overrideRedirectResult=fl}_initialize(p){var y=this;return(0,g.Z)(function*(){const D=p._key();let re=y.eventManagers.get(D);return re||(re=new dd(p),y.eventManagers.set(D,re),y.attachCallbackListeners(p,re)),re})()}_openPopup(p){xe(p,"operation-not-supported-in-this-environment")}_openRedirect(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){!function Su(b){var p,y,D,re,Ee,Tt,pn,dr,kr,Ci;const di=Da();Oe("function"==typeof(null===(p=null==di?void 0:di.universalLinks)||void 0===p?void 0:p.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Oe(void 0!==(null===(y=null==di?void 0:di.BuildInfo)||void 0===y?void 0:y.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Oe("function"==typeof(null===(Ee=null===(re=null===(D=null==di?void 0:di.cordova)||void 0===D?void 0:D.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ee?void 0:Ee.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(dr=null===(pn=null===(Tt=null==di?void 0:di.cordova)||void 0===Tt?void 0:Tt.plugins)||void 0===pn?void 0:pn.browsertab)||void 0===dr?void 0:dr.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(Ci=null===(kr=null==di?void 0:di.cordova)||void 0===kr?void 0:kr.InAppBrowser)||void 0===Ci?void 0:Ci.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Tt=yield Ee._initialize(p);yield Tt.initialized(),Tt.resetRedirect(),function zu(){na.clear()}(),yield Ee._originValidation(p);const pn=function Go(b,p,y=null){return{type:p,eventId:y,urlResponse:null,sessionId:vl(),postBody:null,tenantId:b.tenantId,error:Ge(b,"no-auth-event")}}(p,D,re);yield function Au(b,p){return io()._set(go(b),p)}(p,pn);const dr=yield function Tu(b,p,y){return zl.apply(this,arguments)}(p,pn,y),kr=yield function xc(b){const{cordova:p}=Da();return new Promise(y=>{p.plugins.browsertab.isAvailable(D=>{let re=null;D?p.plugins.browsertab.openUrl(b):re=p.InAppBrowser.open(b,function Qi(b=(0,he.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),y(re)})})}(dr);return function wu(b,p,y){return Iu.apply(this,arguments)}(p,Tt,kr)})()}_isIframeWebStorageSupported(p,y){throw new Error("Method not implemented.")}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Dc(b){return Ac.apply(this,arguments)}(p)),this.originValidationPromises[y]}attachCallbackListeners(p,y){const{universalLinks:D,handleOpenURL:re,BuildInfo:Ee}=Da(),Tt=setTimeout((0,g.Z)(function*(){yield Wa(p),y.onEvent(ou())}),500),pn=function(){var Ci=(0,g.Z)(function*(di){clearTimeout(Tt);const qo=yield Wa(p);let f=null;qo&&(null==di?void 0:di.url)&&(f=function Fa(b,p){var y,D;const re=function Kd(b){const p=xu(b),y=p.link?decodeURIComponent(p.link):void 0,D=xu(y).link,re=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return xu(re).link||re||D||y||b}(p);if(re.includes("/__/auth/callback")){const Ee=xu(re),Tt=Ee.firebaseError?function rl(b){try{return JSON.parse(b)}catch(p){return null}}(decodeURIComponent(Ee.firebaseError)):null,pn=null===(D=null===(y=null==Tt?void 0:Tt.code)||void 0===y?void 0:y.split("auth/"))||void 0===D?void 0:D[1],dr=pn?Ge(pn):null;return dr?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:dr,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:re,postBody:null}}return null}(qo,di.url)),y.onEvent(f||ou())});return function(qo){return Ci.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,pn);const dr=re,kr=`${Ee.packageName.toLowerCase()}://`;Da().handleOpenURL=function(){var Ci=(0,g.Z)(function*(di){if(di.toLowerCase().startsWith(kr)&&pn({url:di}),"function"==typeof dr)try{dr(di)}catch(qo){console.error(qo)}});return function(di){return Ci.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=vt,this._completeRedirectFn=zr,this._overrideRedirectResult=fl}_initialize(p){var y=this;return(0,g.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openPopup(p,y,D,re)})()}_openRedirect(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openRedirect(p,y,D,re)})()}_isIframeWebStorageSupported(p,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,y)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return rc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ou(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,g.Z)(function*(){if(p.underlyingResolver)return;const y=yield function ic(){return au.apply(this,arguments)}();p.underlyingResolver=y?p.cordovaResolver:p.browserResolver})()}}function Pc(b){return b.unwrap()}function gd(b){return Nc(b)}function Nc(b){const{_tokenResponse:p}=b instanceof he.ZR?b.customData:b;if(!p)return null;if(!(b instanceof he.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return dl.credentialFromResult(b);const y=p.providerId;if(!y||"password"===y)return null;let D;switch(y){case"google.com":D=zs;break;case"facebook.com":D=Gs;break;case"github.com":D=Vo;break;case"twitter.com":D=Qo;break;default:const{oauthIdToken:re,oauthAccessToken:Ee,oauthTokenSecret:Tt,pendingToken:pn,nonce:dr}=p;return Ee||Tt||re||pn?pn?y.startsWith("saml.")?Ws._create(y,pn):xt._fromParams({providerId:y,signInMethod:y,pendingToken:pn,idToken:re,accessToken:Ee}):new Us(y).credential({idToken:re,accessToken:Ee,rawNonce:dr}):null}return b instanceof he.ZR?D.credentialFromError(b):D.credentialFromResult(b)}function ga(b,p){return p.catch(y=>{throw y instanceof he.ZR&&function Fh(b,p){var y;const D=null===(y=p.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===(null==p?void 0:p.code))p.resolver=new kc(b,function Wt(b,p){var y;const D=(0,he.m9)(b),re=p;return Oe(p.customData.operationType,D,"argument-error"),Oe(null===(y=re.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,D,"argument-error"),ar._fromError(D,re)}(b,p));else if(D){const re=Nc(p),Ee=p;re&&(Ee.credential=re,Ee.tenantId=D.tenantId||void 0,Ee.email=D.email||void 0,Ee.phoneNumber=D.phoneNumber||void 0)}}(b,y),y}).then(y=>{const re=y.user;return{operationType:y.operationType,credential:gd(y),additionalUserInfo:vn(y),user:sl.getOrCreate(re)}})}function md(b,p){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(b,p){const y=yield p;return{verificationId:y.verificationId,confirm:D=>ga(b,y.confirm(D))}})).apply(this,arguments)}class kc{constructor(p,y){this.resolver=y,this.auth=function Qd(b){return b.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ga(Pc(this.auth),this.resolver.resolveSignIn(p))}}class sl{constructor(p){this._delegate=p,this.multiFactor=function Xo(b){const p=(0,he.m9)(b);return Ys.has(p)||Ys.set(p,Di._fromUser(p)),Ys.get(p)}(p)}static getOrCreate(p){return sl.USER_MAP.has(p)||sl.USER_MAP.set(p,new sl(p)),sl.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var y=this;return(0,g.Z)(function*(){return ga(y.auth,ni(y._delegate,p))})()}linkWithPhoneNumber(p,y){var D=this;return(0,g.Z)(function*(){return md(D.auth,function aa(b,p,y){return Gu.apply(this,arguments)}(D._delegate,p,y))})()}linkWithPopup(p){var y=this;return(0,g.Z)(function*(){return ga(y.auth,function el(b,p,y){return Vl.apply(this,arguments)}(y._delegate,p,xa))})()}linkWithRedirect(p){var y=this;return(0,g.Z)(function*(){return yield qi(br(y.auth)),function Nt(b,p,y){return function Yt(b,p,y){return Un.apply(this,arguments)}(b,p,y)}(y._delegate,p,xa)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var y=this;return(0,g.Z)(function*(){return ga(y.auth,Zi(y._delegate,p))})()}reauthenticateWithPhoneNumber(p,y){return md(this.auth,function la(b,p,y){return xo.apply(this,arguments)}(this._delegate,p,y))}reauthenticateWithPopup(p){return ga(this.auth,function Ha(b,p,y){return to.apply(this,arguments)}(this._delegate,p,xa))}reauthenticateWithRedirect(p){var y=this;return(0,g.Z)(function*(){return yield qi(br(y.auth)),function Y(b,p,y){return function de(b,p,y){return $e.apply(this,arguments)}(b,p,y)}(y._delegate,p,xa)})()}sendEmailVerification(p){return function A(b,p){return I.apply(this,arguments)}(this._delegate,p)}unlink(p){var y=this;return(0,g.Z)(function*(){return yield function Vi(b,p){return Ti.apply(this,arguments)}(y._delegate,p),y})()}updateEmail(p){return function me(b,p){return le((0,he.m9)(b),p,null)}(this._delegate,p)}updatePassword(p){return function ce(b,p){return le((0,he.m9)(b),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function yu(b,p){return _o.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function be(b,p){return oe.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,y){return function P(b,p,y){return z.apply(this,arguments)}(this._delegate,p,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}sl.USER_MAP=new WeakMap;const ol=Oe;let Fc=(()=>{class b{constructor(y,D){if(this.app=y,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:re}=y.options;ol(re,"invalid-api-key",{appName:y.name}),ol(re,"invalid-api-key",{appName:y.name});const Ee="undefined"!=typeof window?xa:void 0;this._delegate=D.initialize({options:{persistence:Po(re,y.name),popupRedirectResolver:Ee}}),this._delegate._updateErrorMap(un),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?sl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,D){!function Pi(b,p,y){const D=br(b);Oe(D._canInitEmulator,D,"emulator-config-failed"),Oe(/^https?:\/\//.test(p),D,"invalid-emulator-scheme");const re=!!(null==y?void 0:y.disableWarnings),Ee=hs(p),{host:Tt,port:pn}=function Xi(b){const p=hs(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(p.length));if(!y)return{host:"",port:null};const D=y[2].split("@").pop()||"",re=/^(\[[^\]]+\])(:|$)/.exec(D);if(re){const Ee=re[1];return{host:Ee,port:Ji(D.substr(Ee.length+1))}}{const[Ee,Tt]=D.split(":");return{host:Ee,port:Ji(Tt)}}}(p);D.config.emulator={url:`${Ee}//${Tt}${null===pn?"":`:${pn}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Tt,port:pn,protocol:Ee.replace(":",""),options:Object.freeze({disableWarnings:re})}),re||function ji(){function b(){const p=document.createElement("p"),y=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,y,D)}applyActionCode(y){return function ye(b,p){return Ye.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return xn(this._delegate,y)}confirmPasswordReset(y,D){return function G(b,p,y){return V.apply(this,arguments)}(this._delegate,y,D)}createUserWithEmailAndPassword(y,D){var re=this;return(0,g.Z)(function*(){return ga(re._delegate,function Le(b,p,y){return rt.apply(this,arguments)}(re._delegate,y,D))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function rs(b,p){return l.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Kn(b,p){const y=mo.parseLink(p);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,g.Z)(function*(){ol(fa(),y._delegate,"operation-not-supported-in-this-environment");const D=yield function jr(b,p){return Zr.apply(this,arguments)}(y._delegate,xa);return D?ga(y._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function Ml(b,p){br(b)._logFramework(p)}(this._delegate,y)}onAuthStateChanged(y,D,re){const{next:Ee,error:Tt,complete:pn}=yd(y,D,re);return this._delegate.onAuthStateChanged(Ee,Tt,pn)}onIdTokenChanged(y,D,re){const{next:Ee,error:Tt,complete:pn}=yd(y,D,re);return this._delegate.onIdTokenChanged(Ee,Tt,pn)}sendSignInLinkToEmail(y,D){return function An(b,p,y){return fr.apply(this,arguments)}(this._delegate,y,D)}sendPasswordResetEmail(y,D){return function ws(b,p,y){return Q.apply(this,arguments)}(this._delegate,y,D||void 0)}setPersistence(y){var D=this;return(0,g.Z)(function*(){let re;switch(function fd(b,p){Rl(Object.values(pa).includes(p),b,"invalid-persistence-type"),(0,he.b$)()?Rl(p!==pa.SESSION,b,"unsupported-persistence-type"):(0,he.UG)()?Rl(p===pa.NONE,b,"unsupported-persistence-type"):nc()?Rl(p===pa.NONE||p===pa.LOCAL&&(0,he.hl)(),b,"unsupported-persistence-type"):Rl(p===pa.NONE||il(),b,"unsupported-persistence-type")}(D._delegate,y),y){case pa.SESSION:re=vt;break;case pa.LOCAL:re=(yield Je(Er)._isAvailable())?Er:Ve;break;case pa.NONE:re=Ue;break;default:return xe("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(re)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return ga(this._delegate,function Xs(b){return fo.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return ga(this._delegate,Gr(this._delegate,y))}signInWithCustomToken(y){return ga(this._delegate,function ts(b,p){return Kr.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,D){return ga(this._delegate,function Zt(b,p,y){return Gr((0,he.m9)(b),Lo.credential(p,y))}(this._delegate,y,D))}signInWithEmailLink(y,D){return ga(this._delegate,function ri(b,p,y){return vi.apply(this,arguments)}(this._delegate,y,D))}signInWithPhoneNumber(y,D){return md(this._delegate,function wo(b,p,y){return Ta.apply(this,arguments)}(this._delegate,y,D))}signInWithPopup(y){var D=this;return(0,g.Z)(function*(){return ol(fa(),D._delegate,"operation-not-supported-in-this-environment"),ga(D._delegate,function lo(b,p,y){return ja.apply(this,arguments)}(D._delegate,y,xa))})()}signInWithRedirect(y){var D=this;return(0,g.Z)(function*(){return ol(fa(),D._delegate,"operation-not-supported-in-this-environment"),yield qi(D._delegate),function Ul(b,p,y){return function Ra(b,p,y){return U.apply(this,arguments)}(b,p,y)}(D._delegate,y,xa)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function K(b,p){return Ce.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=pa,b})();function yd(b,p,y){let D=b;"function"!=typeof b&&({next:D,error:p,complete:y}=b);const re=D;return{next:Tt=>re(Tt&&sl.getOrCreate(Tt)),error:p,complete:y}}function Po(b,p){const y=function lu(b,p){const y=Nu();if(!y)return[];const D=ft(hd,b,p);switch(y.getItem(D)){case pa.NONE:return[Ue];case pa.LOCAL:return[Er,vt];case pa.SESSION:return[vt];default:return[]}}(b,p);if("undefined"!=typeof self&&!y.includes(Er)&&y.push(Er),"undefined"!=typeof window)for(const D of[Ve,vt])y.includes(D)||y.push(D);return y.includes(Ue)||y.push(Ue),y}class al{constructor(){this.providerId="phone",this._delegate=new dl(Pc(k.Z.auth()))}static credential(p,y){return dl.credential(p,y)}verifyPhoneNumber(p,y){return this._delegate.verifyPhoneNumber(p,y)}unwrap(){return this._delegate}}al.PHONE_SIGN_IN_METHOD=dl.PHONE_SIGN_IN_METHOD,al.PROVIDER_ID=dl.PROVIDER_ID;const qa=Oe;class ku{constructor(p,y,D=k.Z.app()){var re;qa(null===(re=D.options)||void 0===re?void 0:re.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new en(p,y,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Lc(b){b.INTERNAL.registerComponent(new dt.wA("auth-compat",p=>{const y=p.getProvider("app-compat").getImmediate(),D=p.getProvider("auth");return new Fc(y,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Lo,FacebookAuthProvider:Gs,GithubAuthProvider:Vo,GoogleAuthProvider:zs,OAuthProvider:Us,SAMLAuthProvider:xs,PhoneAuthProvider:al,PhoneMultiFactorGenerator:Qu,RecaptchaVerifier:ku,TwitterAuthProvider:Qo,Auth:Fc,AuthCredential:Ii,Error:he.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.3.0")}(k.Z)},6197:(Wn,Dt,j)=>{j.d(Dt,{N8:()=>b,jM:()=>Wo,iH:()=>io,t8:()=>Mc});var g=j(5861),k=j(9681),he=j(4859),ae=j(2090),je=j(1877);const He="@firebase/database";let qe="";class Ne{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,d){null==d?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,ae.Wl)(d))}get(c){const d=this.domStorage_.getItem(this.prefixedName_(c));return null==d?null:(0,ae.cI)(d)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class Pe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,d){null==d?delete this.cache_[c]:this.cache_[c]=d}get(c){return(0,ae.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const bt=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){const c=window[f];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new Ne(c)}}catch(c){}return new Pe},Tn=bt("localStorage"),Et=bt("sessionStorage"),un=new je.Yd("@firebase/database"),In=function(){let f=1;return function(){return f++}}(),Ot=function(f){const c=(0,ae.dS)(f),d=new ae.gQ;d.update(c);const v=d.digest();return ae.US.encodeByteArray(v)},tn=function(...f){let c="";for(let d=0;d<f.length;d++){const v=f[d];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?c+=tn.apply(null,v):c+="object"==typeof v?(0,ae.Wl)(v):v,c+=" "}return c};let Ln=null,dn=!0;const Ge=function(...f){if(!0===dn&&(dn=!1,null===Ln&&!0===Et.get("logging_enabled")&&function(f,c){(0,ae.hu)(!c||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(un.logLevel=je.in.VERBOSE,Ln=un.log.bind(un),c&&Et.set("logging_enabled",!0)):"function"==typeof f?Ln=f:(Ln=null,Et.remove("logging_enabled"))}(!0)),Ln){const c=tn.apply(null,f);Ln(c)}},St=function(f){return function(...c){Ge(f,...c)}},on=function(...f){const c="FIREBASE INTERNAL ERROR: "+tn(...f);un.error(c)},Ht=function(...f){const c=`FIREBASE FATAL ERROR: ${tn(...f)}`;throw un.error(c),new Error(c)},Oe=function(...f){const c="FIREBASE WARNING: "+tn(...f);un.warn(c)},Re=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},Je="[MIN_NAME]",Lt="[MAX_NAME]",pt=function(f,c){if(f===c)return 0;if(f===Je||c===Lt)return-1;if(c===Je||f===Lt)return 1;{const d=Qt(f),v=Qt(c);return null!==d?null!==v?d-v==0?f.length-c.length:d-v:-1:null!==v?1:f<c?-1:1}},Rt=function(f,c){return f===c?0:f<c?-1:1},Sn=function(f,c){if(c&&f in c)return c[f];throw new Error("Missing required key ("+f+") in object: "+(0,ae.Wl)(c))},sr=function(f){if("object"!=typeof f||null===f)return(0,ae.Wl)(f);const c=[];for(const v in f)c.push(v);c.sort();let d="{";for(let v=0;v<c.length;v++)0!==v&&(d+=","),d+=(0,ae.Wl)(c[v]),d+=":",d+=sr(f[c[v]]);return d+="}",d},or=function(f,c){const d=f.length;if(d<=c)return[f];const v=[];for(let x=0;x<d;x+=c)v.push(f.substring(x,x+c>d?d:x+c));return v};function mn(f,c){for(const d in f)f.hasOwnProperty(d)&&c(d,f[d])}const Tr=function(f){(0,ae.hu)(!Re(f),"Invalid JSON number");const v=1023;let x,H,te,we,Ze;0===f?(H=0,te=0,x=1/f==-1/0?1:0):(x=f<0,(f=Math.abs(f))>=Math.pow(2,1-v)?(we=Math.min(Math.floor(Math.log(f)/Math.LN2),v),H=we+v,te=Math.round(f*Math.pow(2,52-we)-Math.pow(2,52))):(H=0,te=Math.round(f/Math.pow(2,-1074))));const lt=[];for(Ze=52;Ze;Ze-=1)lt.push(te%2?1:0),te=Math.floor(te/2);for(Ze=11;Ze;Ze-=1)lt.push(H%2?1:0),H=Math.floor(H/2);lt.push(x?1:0),lt.reverse();const an=lt.join("");let bn="";for(Ze=0;Ze<64;Ze+=8){let Rn=parseInt(an.substr(Ze,8),2).toString(16);1===Rn.length&&(Rn="0"+Rn),bn+=Rn}return bn.toLowerCase()},it=new RegExp("^-?(0*)\\d{1,10}$"),Qt=function(f){if(it.test(f)){const c=Number(f);if(c>=-2147483648&&c<=2147483647)return c}return null},Mt=function(f){try{f()}catch(c){setTimeout(()=>{throw Oe("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},Hn=function(f,c){const d=setTimeout(f,c);return"number"==typeof d&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(d):"object"==typeof d&&d.unref&&d.unref(),d};class ir{constructor(c,d){this.appName_=c,this.appCheckProvider=d,this.appCheck=null==d?void 0:d.getImmediate({optional:!0}),this.appCheck||null==d||d.get().then(v=>this.appCheck=v)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((d,v)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){var d;null===(d=this.appCheckProvider)||void 0===d||d.get().then(v=>v.addTokenListener(c))}notifyForInvalidToken(){Oe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ur{constructor(c,d,v){this.appName_=c,this.firebaseOptions_=d,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(x=>this.auth_=x)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(d=>d&&"auth/token-not-initialized"===d.code?(Ge("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)):new Promise((d,v)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(d=>d.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(d=>d.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oe(c)}}let Yr=(()=>{class f{constructor(d){this.accessToken=d}getToken(d){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(d){d(this.accessToken)}removeTokenChangeListener(d){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const is=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ct="websocket",Gt="long_polling";class nn{constructor(c,d,v,x,H=!1,te="",we=!1){this.secure=d,this.namespace=v,this.webSocketOnly=x,this.nodeAdmin=H,this.persistenceKey=te,this.includeNamespaceInQueryParams=we,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tn.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&Tn.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qn(f,c,d){let v;if((0,ae.hu)("string"==typeof c,"typeof type must == string"),(0,ae.hu)("object"==typeof d,"typeof params must == object"),c===ct)v=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(c!==Gt)throw new Error("Unknown connection type: "+c);v=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function En(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(d.ns=f.namespace);const x=[];return mn(d,(H,te)=>{x.push(H+"="+te)}),v+x.join("&")}class Jr{constructor(){this.counters_={}}incrementCounter(c,d=1){(0,ae.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=d}get(){return(0,ae.p$)(this.counters_)}}const Hr={},Fr={};function ds(f){const c=f.toString();return Hr[c]||(Hr[c]=new Jr),Hr[c]}class gi{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,d){this.closeAfterResponse=c,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,d){for(this.pendingResponses[c]=d;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let x=0;x<v.length;++x)v[x]&&Mt(()=>{this.onMessage_(v[x])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ae{constructor(c,d,v,x,H,te,we){this.connId=c,this.repoInfo=d,this.applicationId=v,this.appCheckToken=x,this.authToken=H,this.transportSessionId=te,this.lastSessionId=we,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=St(c),this.stats_=ds(d),this.urlFn=Ze=>(this.appCheckToken&&(Ze.ac=this.appCheckToken),qn(d,Gt,Ze))}open(c,d){this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new gi(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,ae.Yr)()||"complete"===document.readyState)f();else{let c=!1;const d=function(){document.body?c||(c=!0,f()):setTimeout(d,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&d()}),window.attachEvent("onload",d))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gt((...H)=>{const[te,we,Ze,lt,an]=H;if(this.incrementIncomingBytes_(H),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===te)this.id=we,this.password=Ze;else{if("close"!==te)throw new Error("Unrecognized command received: "+te);we?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(we,()=>{this.onClosed_()})):this.onClosed_()}},(...H)=>{const[te,we]=H;this.incrementIncomingBytes_(H),this.myPacketOrderer.handleResponse(te,we)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&is.test(location.hostname)&&(v.r="f");const x=this.urlFn(v);this.log_("Connecting via long-poll to "+x),this.scriptTagHolder.addTag(x,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ae.forceAllow_=!0}static forceDisallow(){Ae.forceDisallow_=!0}static isAvailable(){return!((0,ae.Yr)()||!Ae.forceAllow_&&(Ae.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const d=(0,ae.Wl)(c);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const v=(0,ae.h$)(d),x=or(v,1840);for(let H=0;H<x.length;H++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,x.length,x[H]),this.curSegmentNum++}addDisconnectPingFrame(c,d){if((0,ae.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=c,v.pw=d,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const d=(0,ae.Wl)(c).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)}}class gt{constructor(c,d,v,x){if(this.onDisconnect=v,this.urlFn=x,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ae.Yr)())this.commandCB=c,this.onMessageCB=d;else{this.uniqueCallbackIdentifier=In(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=d,this.myIFrame=gt.createIFrame_();let H="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(H='<script>document.domain="'+document.domain+'";<\/script>');const te="<html><body>"+H+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(te),this.myIFrame.doc.close()}catch(we){Ge("frame writing exception"),we.stack&&Ge(we.stack),Ge(we)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||Ge("No IE domain setting required")}catch(d){const v=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,d){for(this.myID=c,this.myPW=d,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let d=this.urlFn(c),v="",x=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const te=this.pendingSegs.shift();v=v+"&seg"+x+"="+te.seg+"&ts"+x+"="+te.ts+"&d"+x+"="+te.d,x++}return d+=v,this.addLongPollTag_(d,this.currentSerial),!0}return!1}enqueueSegment(c,d,v){this.pendingSegs.push({seg:c,ts:d,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(c,d){this.outstandingRequests.add(d);const v=()=>{this.outstandingRequests.delete(d),this.newRequest_()},x=setTimeout(v,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(x),v()})}addTag(c,d){(0,ae.Yr)()?this.doNodeLongPoll(c,d):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=c,v.onload=v.onreadystatechange=function(){const x=v.readyState;(!x||"loaded"===x||"complete"===x)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),d())},v.onerror=()=>{Ge("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let Yn=null;"undefined"!=typeof MozWebSocket?Yn=MozWebSocket:"undefined"!=typeof WebSocket&&(Yn=WebSocket);let ai=(()=>{class f{constructor(d,v,x,H,te,we,Ze){this.connId=d,this.applicationId=x,this.appCheckToken=H,this.authToken=te,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=St(this.connId),this.stats_=ds(v),this.connURL=f.connectionURL_(v,we,Ze,H,x),this.nodeAdmin=v.nodeAdmin}static connectionURL_(d,v,x,H,te){const we={v:"5"};return!(0,ae.Yr)()&&"undefined"!=typeof location&&location.hostname&&is.test(location.hostname)&&(we.r="f"),v&&(we.s=v),x&&(we.ls=x),H&&(we.ac=H),te&&(we.p=te),qn(d,ct,we)}open(d,v){this.onDisconnect=v,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tn.set("previous_websocket_failure",!0);try{let x;if((0,ae.Yr)()){x={headers:{"User-Agent":`Firebase/5/${qe}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(x.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(x.headers["X-Firebase-AppCheck"]=this.appCheckToken);const te=process.env,we=0===this.connURL.indexOf("wss://")?te.HTTPS_PROXY||te.https_proxy:te.HTTP_PROXY||te.http_proxy;we&&(x.proxy={origin:we})}this.mySock=new Yn(this.connURL,[],x)}catch(x){this.log_("Error instantiating WebSocket.");const H=x.message||x.data;return H&&this.log_(H),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=x=>{this.handleIncomingFrame(x)},this.mySock.onerror=x=>{this.log_("WebSocket error.  Closing connection.");const H=x.message||x.data;H&&this.log_(H),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let d=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const x=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);x&&x.length>1&&parseFloat(x[1])<4.4&&(d=!0)}return!d&&null!==Yn&&!f.forceDisallow_}static previouslyFailed(){return Tn.isInMemoryStorage||!0===Tn.get("previous_websocket_failure")}markConnectionHealthy(){Tn.remove("previous_websocket_failure")}appendFrame_(d){if(this.frames.push(d),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const x=(0,ae.cI)(v);this.onMessage(x)}}handleNewFrameCount_(d){this.totalFrames=d,this.frames=[]}extractFrameCount_(d){if((0,ae.hu)(null===this.frames,"We already have a frame buffer"),d.length<=6){const v=Number(d);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),d}handleIncomingFrame(d){if(null===this.mySock)return;const v=d.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const x=this.extractFrameCount_(v);null!==x&&this.appendFrame_(x)}}send(d){this.resetKeepAlive();const v=(0,ae.Wl)(d);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const x=or(v,16384);x.length>1&&this.sendString_(String(x.length));for(let H=0;H<x.length;H++)this.sendString_(x[H])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(d){try{this.mySock.send(d)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),Qi=(()=>{class f{constructor(d){this.initTransports_(d)}static get ALL_TRANSPORTS(){return[Ae,ai]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(d){const v=ai&&ai.isAvailable();let x=v&&!ai.previouslyFailed();if(d.webSocketOnly&&(v||Oe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),x=!0),x)this.transports_=[ai];else{const H=this.transports_=[];for(const te of f.ALL_TRANSPORTS)te&&te.isAvailable()&&H.push(te);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class Ii{constructor(c,d,v,x,H,te,we,Ze,lt,an){this.id=c,this.repoInfo_=d,this.applicationId_=v,this.appCheckToken_=x,this.authToken_=H,this.onMessage_=te,this.onReady_=we,this.onDisconnect_=Ze,this.onKill_=lt,this.lastSessionId=an,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=St("c:"+this.id+":"),this.transportManager_=new Qi(d),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(d,v)},Math.floor(0));const x=c.healthyTimeout||0;x>0&&(this.healthyTimeout_=Hn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(x)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return d=>{c===this.conn_?this.onConnectionLost_(d):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return d=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(d):c===this.secondaryConn_?this.onSecondaryMessageReceived_(d):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const d=c.t;"a"===d?this.upgradeIfSecondaryHealthy_():"r"===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const d=Sn("t",c),v=Sn("d",c);if("c"===d)this.onSecondaryControl_(v);else{if("d"!==d)throw new Error("Unknown protocol layer: "+d);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const d=Sn("t",c),v=Sn("d",c);"c"===d?this.onControl_(v):"d"===d&&this.onDataMessage_(v)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const d=Sn("t",c);if("d"in c){const v=c.d;if("h"===d)this.onHandshake_(v);else if("n"===d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let x=0;x<this.pendingDataMessages.length;++x)this.onDataMessage_(this.pendingDataMessages[x]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===d?this.onConnectionShutdown_(v):"r"===d?this.onReset_(v):"e"===d?on("Server Error: "+v):"o"===d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):on("Unknown control packet command: "+d)}}onHandshake_(c){const d=c.ts,v=c.v,x=c.h;this.sessionId=c.s,this.repoInfo_.host=x,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),"5"!==v&&Oe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,v),Hn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,d){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Hi{put(c,d,v,x){}merge(c,d,v,x){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,d,v){}onDisconnectMerge(c,d,v){}onDisconnectCancel(c,d){}reportStats(c){}}class qr{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,ae.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...d){if(Array.isArray(this.listeners_[c])){const v=[...this.listeners_[c]];for(let x=0;x<v.length;x++)v[x].callback.apply(v[x].context,d)}}on(c,d,v){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:d,context:v});const x=this.getInitialEvent(c);x&&d.apply(v,x)}off(c,d,v){this.validateEventType_(c);const x=this.listeners_[c]||[];for(let H=0;H<x.length;H++)if(x[H].callback===d&&(!v||v===x[H].context))return void x.splice(H,1)}validateEventType_(c){(0,ae.hu)(this.allowedEvents_.find(d=>d===c),"Unknown event: "+c)}}class es extends qr{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ae.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new es}getInitialEvent(c){return(0,ae.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}class Qr{constructor(c,d){if(void 0===d){this.pieces_=c.split("/");let v=0;for(let x=0;x<this.pieces_.length;x++)this.pieces_[x].length>0&&(this.pieces_[v]=this.pieces_[x],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=d}toString(){let c="";for(let d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(c+="/"+this.pieces_[d]);return c||"/"}}function wr(){return new Qr("")}function Sr(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function Ki(f){return f.pieces_.length-f.pieceNum_}function Br(f){let c=f.pieceNum_;return c<f.pieces_.length&&c++,new Qr(f.pieces_,c)}function xi(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Gi(f,c=0){return f.pieces_.slice(f.pieceNum_+c)}function fs(f){if(f.pieceNum_>=f.pieces_.length)return null;const c=[];for(let d=f.pieceNum_;d<f.pieces_.length-1;d++)c.push(f.pieces_[d]);return new Qr(c,0)}function ui(f,c){const d=[];for(let v=f.pieceNum_;v<f.pieces_.length;v++)d.push(f.pieces_[v]);if(c instanceof Qr)for(let v=c.pieceNum_;v<c.pieces_.length;v++)d.push(c.pieces_[v]);else{const v=c.split("/");for(let x=0;x<v.length;x++)v[x].length>0&&d.push(v[x])}return new Qr(d,0)}function Ir(f){return f.pieceNum_>=f.pieces_.length}function gs(f,c){const d=Sr(f),v=Sr(c);if(null===d)return c;if(d===v)return gs(Br(f),Br(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+f+")")}function bs(f,c){if(Ki(f)!==Ki(c))return!1;for(let d=f.pieceNum_,v=c.pieceNum_;d<=f.pieces_.length;d++,v++)if(f.pieces_[d]!==c.pieces_[v])return!1;return!0}function Bi(f,c){let d=f.pieceNum_,v=c.pieceNum_;if(Ki(f)>Ki(c))return!1;for(;d<f.pieces_.length;){if(f.pieces_[d]!==c.pieces_[v])return!1;++d,++v}return!0}class $o{constructor(c,d){this.errorPrefix_=d,this.parts_=Gi(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,ae.ug)(this.parts_[v]);ns(this)}}function ns(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ct(f))}function Ct(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class ht extends qr{constructor(){let c,d;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(d="visibilitychange",c="hidden"):void 0!==document.mozHidden?(d="mozvisibilitychange",c="mozHidden"):void 0!==document.msHidden?(d="msvisibilitychange",c="msHidden"):void 0!==document.webkitHidden&&(d="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,d&&document.addEventListener(d,()=>{const v=!document[c];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new ht}getInitialEvent(c){return(0,ae.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const xt=1e3;let As,ys=(()=>{class f extends Hi{constructor(d,v,x,H,te,we,Ze,lt){if(super(),this.repoInfo_=d,this.applicationId_=v,this.onDataUpdate_=x,this.onConnectStatus_=H,this.onServerInfoUpdate_=te,this.authTokenProvider_=we,this.appCheckTokenProvider_=Ze,this.authOverride_=lt,this.id=f.nextPersistentConnectionId_++,this.log_=St("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,lt&&!(0,ae.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ht.getInstance().on("visible",this.onVisible_,this),-1===d.host.indexOf("fblocal")&&es.getInstance().on("online",this.onOnline_,this)}sendRequest(d,v,x){const H=++this.requestNumber_,te={r:H,a:d,b:v};this.log_((0,ae.Wl)(te)),(0,ae.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(te),x&&(this.requestCBHash_[H]=x)}get(d){this.initConnection_();const v=new ae.BH,x={p:d._path.toString(),q:d._queryObject};return this.outstandingGets_.push({action:"g",request:x,onComplete:we=>{const Ze=we.d;"ok"===we.s?v.resolve(Ze):v.reject(Ze)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(d,v,x,H){this.initConnection_();const te=d._queryIdentifier,we=d._path.toString();this.log_("Listen called for "+we+" "+te),this.listens.has(we)||this.listens.set(we,new Map),(0,ae.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ae.hu)(!this.listens.get(we).has(te),"listen() called twice for same path/queryId.");const Ze={onComplete:H,hashFn:v,query:d,tag:x};this.listens.get(we).set(te,Ze),this.connected_&&this.sendListen_(Ze)}sendGet_(d){const v=this.outstandingGets_[d];this.sendRequest("g",v.request,x=>{delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(x)})}sendListen_(d){const v=d.query,x=v._path.toString(),H=v._queryIdentifier;this.log_("Listen on "+x+" for "+H);const te={p:x};d.tag&&(te.q=v._queryObject,te.t=d.tag),te.h=d.hashFn(),this.sendRequest("q",te,Ze=>{const lt=Ze.d,an=Ze.s;f.warnOnListenWarnings_(lt,v),(this.listens.get(x)&&this.listens.get(x).get(H))===d&&(this.log_("listen response",Ze),"ok"!==an&&this.removeListen_(x,H),d.onComplete&&d.onComplete(an,lt))})}static warnOnListenWarnings_(d,v){if(d&&"object"==typeof d&&(0,ae.r3)(d,"w")){const x=(0,ae.DV)(d,"w");if(Array.isArray(x)&&~x.indexOf("no_index")){const H='".indexOn": "'+v._queryParams.getIndex().toString()+'"',te=v._path.toString();Oe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${H} at ${te} to your security rules for better performance.`)}}}refreshAuthToken(d){this.authToken_=d,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(d)}reduceReconnectDelayIfAdminCredential_(d){(d&&40===d.length||(0,ae.GJ)(d))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(d){this.appCheckToken_=d,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const d=this.authToken_,v=(0,ae.w9)(d)?"auth":"gauth",x={cred:d};null===this.authOverride_?x.noauth=!0:"object"==typeof this.authOverride_&&(x.authvar=this.authOverride_),this.sendRequest(v,x,H=>{const te=H.s,we=H.d||"error";this.authToken_===d&&("ok"===te?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(te,we))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},d=>{const v=d.s,x=d.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,x)})}unlisten(d,v){const x=d._path.toString(),H=d._queryIdentifier;this.log_("Unlisten called for "+x+" "+H),(0,ae.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(x,H)&&this.connected_&&this.sendUnlisten_(x,H,d._queryObject,v)}sendUnlisten_(d,v,x,H){this.log_("Unlisten on "+d+" for "+v);const te={p:d};H&&(te.q=x,te.t=H),this.sendRequest("n",te)}onDisconnectPut(d,v,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",d,v,x):this.onDisconnectRequestQueue_.push({pathString:d,action:"o",data:v,onComplete:x})}onDisconnectMerge(d,v,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",d,v,x):this.onDisconnectRequestQueue_.push({pathString:d,action:"om",data:v,onComplete:x})}onDisconnectCancel(d,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",d,null,v):this.onDisconnectRequestQueue_.push({pathString:d,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(d,v,x,H){const te={p:v,d:x};this.log_("onDisconnect "+d,te),this.sendRequest(d,te,we=>{H&&setTimeout(()=>{H(we.s,we.d)},Math.floor(0))})}put(d,v,x,H){this.putInternal("p",d,v,x,H)}merge(d,v,x,H){this.putInternal("m",d,v,x,H)}putInternal(d,v,x,H,te){this.initConnection_();const we={p:v,d:x};void 0!==te&&(we.h=te),this.outstandingPuts_.push({action:d,request:we,onComplete:H}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(d){const v=this.outstandingPuts_[d].action,x=this.outstandingPuts_[d].request,H=this.outstandingPuts_[d].onComplete;this.outstandingPuts_[d].queued=this.connected_,this.sendRequest(v,x,te=>{this.log_(v+" response",te),delete this.outstandingPuts_[d],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),H&&H(te.s,te.d)})}reportStats(d){if(this.connected_){const v={c:d};this.log_("reportStats",v),this.sendRequest("s",v,x=>{"ok"!==x.s&&this.log_("reportStats","Error sending stats: "+x.d)})}}onDataMessage_(d){if("r"in d){this.log_("from server: "+(0,ae.Wl)(d));const v=d.r,x=this.requestCBHash_[v];x&&(delete this.requestCBHash_[v],x(d.b))}else{if("error"in d)throw"A server-side error has occurred: "+d.error;"a"in d&&this.onDataPush_(d.a,d.b)}}onDataPush_(d,v){this.log_("handleServerMessage",d,v),"d"===d?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===d?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===d?this.onListenRevoked_(v.p,v.q):"ac"===d?this.onAuthRevoked_(v.s,v.d):"apc"===d?this.onAppCheckRevoked_(v.s,v.d):"sd"===d?this.onSecurityDebugPacket_(v):on("Unrecognized action received from server: "+(0,ae.Wl)(d)+"\nAre you using the latest client?")}onReady_(d,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(d),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(d){(0,ae.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(d))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(d){d&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xt,this.realtime_||this.scheduleConnect_(0)),this.visible_=d}onOnline_(d){d?(this.log_("Browser went online."),this.reconnectDelay_=xt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=xt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const d=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-d);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var d=this;return(0,g.Z)(function*(){if(d.shouldReconnect_()){d.log_("Making a connection attempt"),d.lastConnectionAttemptTime_=(new Date).getTime(),d.lastConnectionEstablishedTime_=null;const v=d.onDataMessage_.bind(d),x=d.onReady_.bind(d),H=d.onRealtimeDisconnect_.bind(d),te=d.id+":"+f.nextConnectionId_++,we=d.lastSessionId;let Ze=!1,lt=null;const an=function(){lt?lt.close():(Ze=!0,H())};d.realtime_={close:an,sendRequest:function(Cr){(0,ae.hu)(lt,"sendRequest call when we're not connected not allowed."),lt.sendRequest(Cr)}};const Rn=d.forceTokenRefresh_;d.forceTokenRefresh_=!1;try{const[Cr,fi]=yield Promise.all([d.authTokenProvider_.getToken(Rn),d.appCheckTokenProvider_.getToken(Rn)]);Ze?Ge("getToken() completed but was canceled"):(Ge("getToken() completed. Creating connection."),d.authToken_=Cr&&Cr.accessToken,d.appCheckToken_=fi&&fi.token,lt=new Ii(te,d.repoInfo_,d.applicationId_,d.appCheckToken_,d.authToken_,v,x,H,Ps=>{Oe(Ps+" ("+d.repoInfo_.toString()+")"),d.interrupt("server_kill")},we))}catch(Cr){d.log_("Failed to get token: "+Cr),Ze||(d.repoInfo_.nodeAdmin&&Oe(Cr),an())}}})()}interrupt(d){Ge("Interrupting connection for reason: "+d),this.interruptReasons_[d]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(d){Ge("Resuming connection for reason: "+d),delete this.interruptReasons_[d],(0,ae.xb)(this.interruptReasons_)&&(this.reconnectDelay_=xt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(d){const v=d-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let d=0;d<this.outstandingPuts_.length;d++){const v=this.outstandingPuts_[d];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[d],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(d,v){let x;x=v?v.map(te=>sr(te)).join("$"):"default";const H=this.removeListen_(d,x);H&&H.onComplete&&H.onComplete("permission_denied")}removeListen_(d,v){const x=new Qr(d).toString();let H;if(this.listens.has(x)){const te=this.listens.get(x);H=te.get(v),te.delete(v),0===te.size&&this.listens.delete(x)}else H=void 0;return H}onAuthRevoked_(d,v){Ge("Auth token revoked: "+d+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===d||"permission_denied"===d)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(d,v){Ge("App check token revoked: "+d+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===d||"permission_denied"===d)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(d){this.securityDebugCallback_?this.securityDebugCallback_(d):"msg"in d&&console.log("FIREBASE: "+d.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const d of this.listens.values())for(const v of d.values())this.sendListen_(v);for(let d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){const d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(let d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)}sendConnectStats_(){const d={};let v="js";(0,ae.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),d["sdk."+v+"."+qe.replace(/\./g,"-")]=1,(0,ae.uI)()?d["framework.cordova"]=1:(0,ae.b$)()&&(d["framework.reactnative"]=1),this.reportStats(d)}shouldReconnect_(){const d=es.getInstance().currentlyOnline();return(0,ae.xb)(this.interruptReasons_)&&d}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class ti{constructor(c,d){this.name=c,this.node=d}static Wrap(c,d){return new ti(c,d)}}class _s{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,d){const v=new ti(Je,c),x=new ti(Je,d);return 0!==this.compare(v,x)}minPost(){return ti.MIN}}class Yo extends _s{static get __EMPTY_NODE(){return As}static set __EMPTY_NODE(c){As=c}compare(c,d){return pt(c.name,d.name)}isDefinedOn(c){throw(0,ae.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,d){return!1}minPost(){return ti.MIN}maxPost(){return new ti(Lt,As)}makePost(c,d){return(0,ae.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new ti(c,As)}toString(){return".key"}}const Ts=new Yo;class mo{constructor(c,d,v,x,H=null){this.isReverse_=x,this.resultGenerator_=H,this.nodeStack_=[];let te=1;for(;!c.isEmpty();)if(te=d?v(c.key,d):1,x&&(te*=-1),te<0)c=this.isReverse_?c.left:c.right;else{if(0===te){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let d,c=this.nodeStack_.pop();if(d=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return d}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let Gs,ps=(()=>{class f{constructor(d,v,x,H,te){this.key=d,this.value=v,this.color=null!=x?x:f.RED,this.left=null!=H?H:bi.EMPTY_NODE,this.right=null!=te?te:bi.EMPTY_NODE}copy(d,v,x,H,te){return new f(null!=d?d:this.key,null!=v?v:this.value,null!=x?x:this.color,null!=H?H:this.left,null!=te?te:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)}reverseTraversal(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(d,v,x){let H=this;const te=x(d,H.key);return H=te<0?H.copy(null,null,null,H.left.insert(d,v,x),null):0===te?H.copy(null,v,null,null,null):H.copy(null,null,null,null,H.right.insert(d,v,x)),H.fixUp_()}removeMin_(){if(this.left.isEmpty())return bi.EMPTY_NODE;let d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.removeMin_(),null),d.fixUp_()}remove(d,v){let x,H;if(x=this,v(d,x.key)<0)!x.left.isEmpty()&&!x.left.isRed_()&&!x.left.left.isRed_()&&(x=x.moveRedLeft_()),x=x.copy(null,null,null,x.left.remove(d,v),null);else{if(x.left.isRed_()&&(x=x.rotateRight_()),!x.right.isEmpty()&&!x.right.isRed_()&&!x.right.left.isRed_()&&(x=x.moveRedRight_()),0===v(d,x.key)){if(x.right.isEmpty())return bi.EMPTY_NODE;H=x.right.min_(),x=x.copy(H.key,H.value,null,null,x.right.removeMin_())}x=x.copy(null,null,null,null,x.right.remove(d,v))}return x.fixUp_()}isRed_(){return this.color}fixUp_(){let d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d}moveRedLeft_(){let d=this.colorFlip_();return d.right.left.isRed_()&&(d=d.copy(null,null,null,null,d.right.rotateRight_()),d=d.rotateLeft_(),d=d.colorFlip_()),d}moveRedRight_(){let d=this.colorFlip_();return d.left.left.isRed_()&&(d=d.rotateRight_(),d=d.colorFlip_()),d}rotateLeft_(){const d=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)}rotateRight_(){const d=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)}colorFlip_(){const d=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,v)}checkMaxDepth_(){const d=this.check_();return Math.pow(2,d)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class bi{constructor(c,d=bi.EMPTY_NODE){this.comparator_=c,this.root_=d}insert(c,d){return new bi(this.comparator_,this.root_.insert(c,d,this.comparator_).copy(null,null,ps.BLACK,null,null))}remove(c){return new bi(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,ps.BLACK,null,null))}get(c){let d,v=this.root_;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d)return v.value;d<0?v=v.left:d>0&&(v=v.right)}return null}getPredecessorKey(c){let d,v=this.root_,x=null;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d){if(v.left.isEmpty())return x?x.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}d<0?v=v.left:d>0&&(x=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new mo(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,d){return new mo(this.root_,c,this.comparator_,!1,d)}getReverseIteratorFrom(c,d){return new mo(this.root_,c,this.comparator_,!0,d)}getReverseIterator(c){return new mo(this.root_,null,this.comparator_,!0,c)}}function ho(f,c){return pt(f.name,c.name)}function Us(f,c){return pt(f,c)}bi.EMPTY_NODE=new class Lo{copy(c,d,v,x,H){return this}insert(c,d,v){return new ps(c,d,null)}remove(c,d){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Vo=function(f){return"number"==typeof f?"number:"+Tr(f):"string:"+f},Qs=function(f){if(f.isLeafNode()){const c=f.val();(0,ae.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,ae.r3)(c,".sv"),"Priority must be a string or number.")}else(0,ae.hu)(f===Gs||f.isEmpty(),"priority of unexpected type.");(0,ae.hu)(f===Gs||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ws,xs,Qo,Bs=(()=>{class f{constructor(d,v=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=d,this.priorityNode_=v,this.lazyHash_=null,(0,ae.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qs(this.priorityNode_)}static set __childrenNodeConstructor(d){Ws=d}static get __childrenNodeConstructor(){return Ws}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(d){return new f(this.value_,d)}getImmediateChild(d){return".priority"===d?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(d){return Ir(d)?this:".priority"===Sr(d)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(d,v){return null}updateImmediateChild(d,v){return".priority"===d?this.updatePriority(v):v.isEmpty()&&".priority"!==d?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,v).updatePriority(this.priorityNode_)}updateChild(d,v){const x=Sr(d);return null===x?v:v.isEmpty()&&".priority"!==x?this:((0,ae.hu)(".priority"!==x||1===Ki(d),".priority must be the last token in a path"),this.updateImmediateChild(x,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(Br(d),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(d,v){return!1}val(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let d="";this.priorityNode_.isEmpty()||(d+="priority:"+Vo(this.priorityNode_.val())+":");const v=typeof this.value_;d+=v+":",d+="number"===v?Tr(this.value_):this.value_,this.lazyHash_=Ot(d)}return this.lazyHash_}getValue(){return this.value_}compareTo(d){return d===f.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof f.__childrenNodeConstructor?-1:((0,ae.hu)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))}compareToLeafNode_(d){const v=typeof d.value_,x=typeof this.value_,H=f.VALUE_TYPE_ORDER.indexOf(v),te=f.VALUE_TYPE_ORDER.indexOf(x);return(0,ae.hu)(H>=0,"Unknown leaf type: "+v),(0,ae.hu)(te>=0,"Unknown leaf type: "+x),H===te?"object"===x?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:te-H}withIndex(){return this}isIndexed(){return!0}equals(d){if(d===this)return!0;if(d.isLeafNode()){const v=d;return this.value_===v.value_&&this.priorityNode_.equals(v.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const Li=new class Ms extends _s{compare(c,d){const v=c.node.getPriority(),x=d.node.getPriority(),H=v.compareTo(x);return 0===H?pt(c.name,d.name):H}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,d){return!c.getPriority().equals(d.getPriority())}minPost(){return ti.MIN}maxPost(){return new ti(Lt,new Bs("[PRIORITY-POST]",Qo))}makePost(c,d){const v=xs(c);return new ti(d,new Bs("[PRIORITY-POST]",v))}toString(){return".priority"}},Xs=Math.log(2);class fo{constructor(c){this.count=parseInt(Math.log(c+1)/Xs,10),this.current_=this.count-1;const x=(H=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&x}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const Zs=function(f,c,d,v){f.sort(c);const x=function(Ze,lt){const an=lt-Ze;let bn,Rn;if(0===an)return null;if(1===an)return bn=f[Ze],Rn=d?d(bn):bn,new ps(Rn,bn.node,ps.BLACK,null,null);{const Cr=parseInt(an/2,10)+Ze,fi=x(Ze,Cr),Ps=x(Cr+1,lt);return bn=f[Cr],Rn=d?d(bn):bn,new ps(Rn,bn.node,ps.BLACK,fi,Ps)}},we=function(Ze){let lt=null,an=null,bn=f.length;const Rn=function(fi,Ps){const ca=bn-fi,Fu=bn;bn-=fi;const Vc=x(ca+1,Fu),Wl=f[ca],Lh=d?d(Wl):Wl;Cr(new ps(Lh,Wl.node,Ps,null,Vc))},Cr=function(fi){lt?(lt.left=fi,lt=fi):(an=fi,lt=fi)};for(let fi=0;fi<Ze.count;++fi){const Ps=Ze.nextBitIsOne(),ca=Math.pow(2,Ze.count-(fi+1));Ps?Rn(ca,ps.BLACK):(Rn(ca,ps.BLACK),Rn(ca,ps.RED))}return an}(new fo(f.length));return new bi(v||c,we)};let Rs;const qs={};class Vi{constructor(c,d){this.indexes_=c,this.indexSet_=d}static get Default(){return(0,ae.hu)(qs&&Li,"ChildrenNode.ts has not been loaded"),Rs=Rs||new Vi({".priority":qs},{".priority":Li}),Rs}get(c){const d=(0,ae.DV)(this.indexes_,c);if(!d)throw new Error("No index defined for "+c);return d instanceof bi?d:null}hasIndex(c){return(0,ae.r3)(this.indexSet_,c.toString())}addIndex(c,d){(0,ae.hu)(c!==Ts,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let x=!1;const H=d.getIterator(ti.Wrap);let we,te=H.getNext();for(;te;)x=x||c.isDefinedOn(te.node),v.push(te),te=H.getNext();we=x?Zs(v,c.getCompare()):qs;const Ze=c.toString(),lt=Object.assign({},this.indexSet_);lt[Ze]=c;const an=Object.assign({},this.indexes_);return an[Ze]=we,new Vi(an,lt)}addToIndexes(c,d){const v=(0,ae.UI)(this.indexes_,(x,H)=>{const te=(0,ae.DV)(this.indexSet_,H);if((0,ae.hu)(te,"Missing index implementation for "+H),x===qs){if(te.isDefinedOn(c.node)){const we=[],Ze=d.getIterator(ti.Wrap);let lt=Ze.getNext();for(;lt;)lt.name!==c.name&&we.push(lt),lt=Ze.getNext();return we.push(c),Zs(we,te.getCompare())}return qs}{const we=d.get(c.name);let Ze=x;return we&&(Ze=Ze.remove(new ti(c.name,we))),Ze.insert(c,c.node)}});return new Vi(v,this.indexSet_)}removeFromIndexes(c,d){const v=(0,ae.UI)(this.indexes_,x=>{if(x===qs)return x;{const H=d.get(c.name);return H?x.remove(new ti(c.name,H)):x}});return new Vi(v,this.indexSet_)}}let Ti,B=(()=>{class f{constructor(d,v,x){this.children_=d,this.priorityNode_=v,this.indexMap_=x,this.lazyHash_=null,this.priorityNode_&&Qs(this.priorityNode_),this.children_.isEmpty()&&(0,ae.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ti||(Ti=new f(new bi(Us),null,Vi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ti}updatePriority(d){return this.children_.isEmpty()?this:new f(this.children_,d,this.indexMap_)}getImmediateChild(d){if(".priority"===d)return this.getPriority();{const v=this.children_.get(d);return null===v?Ti:v}}getChild(d){const v=Sr(d);return null===v?this:this.getImmediateChild(v).getChild(Br(d))}hasChild(d){return null!==this.children_.get(d)}updateImmediateChild(d,v){if((0,ae.hu)(v,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(v);{const x=new ti(d,v);let H,te;v.isEmpty()?(H=this.children_.remove(d),te=this.indexMap_.removeFromIndexes(x,this.children_)):(H=this.children_.insert(d,v),te=this.indexMap_.addToIndexes(x,this.children_));const we=H.isEmpty()?Ti:this.priorityNode_;return new f(H,we,te)}}updateChild(d,v){const x=Sr(d);if(null===x)return v;{(0,ae.hu)(".priority"!==Sr(d)||1===Ki(d),".priority must be the last token in a path");const H=this.getImmediateChild(x).updateChild(Br(d),v);return this.updateImmediateChild(x,H)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(d){if(this.isEmpty())return null;const v={};let x=0,H=0,te=!0;if(this.forEachChild(Li,(we,Ze)=>{v[we]=Ze.val(d),x++,te&&f.INTEGER_REGEXP_.test(we)?H=Math.max(H,Number(we)):te=!1}),!d&&te&&H<2*x){const we=[];for(const Ze in v)we[Ze]=v[Ze];return we}return d&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let d="";this.getPriority().isEmpty()||(d+="priority:"+Vo(this.getPriority().val())+":"),this.forEachChild(Li,(v,x)=>{const H=x.hash();""!==H&&(d+=":"+v+":"+H)}),this.lazyHash_=""===d?"":Ot(d)}return this.lazyHash_}getPredecessorChildName(d,v,x){const H=this.resolveIndex_(x);if(H){const te=H.getPredecessorKey(new ti(d,v));return te?te.name:null}return this.children_.getPredecessorKey(d)}getFirstChildName(d){const v=this.resolveIndex_(d);if(v){const x=v.minKey();return x&&x.name}return this.children_.minKey()}getFirstChild(d){const v=this.getFirstChildName(d);return v?new ti(v,this.children_.get(v)):null}getLastChildName(d){const v=this.resolveIndex_(d);if(v){const x=v.maxKey();return x&&x.name}return this.children_.maxKey()}getLastChild(d){const v=this.getLastChildName(d);return v?new ti(v,this.children_.get(v)):null}forEachChild(d,v){const x=this.resolveIndex_(d);return x?x.inorderTraversal(H=>v(H.name,H.node)):this.children_.inorderTraversal(v)}getIterator(d){return this.getIteratorFrom(d.minPost(),d)}getIteratorFrom(d,v){const x=this.resolveIndex_(v);if(x)return x.getIteratorFrom(d,H=>H);{const H=this.children_.getIteratorFrom(d.name,ti.Wrap);let te=H.peek();for(;null!=te&&v.compare(te,d)<0;)H.getNext(),te=H.peek();return H}}getReverseIterator(d){return this.getReverseIteratorFrom(d.maxPost(),d)}getReverseIteratorFrom(d,v){const x=this.resolveIndex_(v);if(x)return x.getReverseIteratorFrom(d,H=>H);{const H=this.children_.getReverseIteratorFrom(d.name,ti.Wrap);let te=H.peek();for(;null!=te&&v.compare(te,d)>0;)H.getNext(),te=H.peek();return H}}compareTo(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===W?-1:0}withIndex(d){if(d===Ts||this.indexMap_.hasIndex(d))return this;{const v=this.indexMap_.addIndex(d,this.children_);return new f(this.children_,this.priorityNode_,v)}}isIndexed(d){return d===Ts||this.indexMap_.hasIndex(d)}equals(d){if(d===this)return!0;if(d.isLeafNode())return!1;{const v=d;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const x=this.getIterator(Li),H=v.getIterator(Li);let te=x.getNext(),we=H.getNext();for(;te&&we;){if(te.name!==we.name||!te.node.equals(we.node))return!1;te=x.getNext(),we=H.getNext()}return null===te&&null===we}return!1}return!1}}resolveIndex_(d){return d===Ts?null:this.indexMap_.get(d.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const W=new class fe extends B{constructor(){super(new bi(Us),B.EMPTY_NODE,Vi.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return B.EMPTY_NODE}isEmpty(){return!1}};function Ke(f,c=null){if(null===f)return B.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(c=f[".priority"]),(0,ae.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new Bs(f,Ke(c));if(f instanceof Array){let d=B.EMPTY_NODE;return mn(f,(v,x)=>{if((0,ae.r3)(f,v)&&"."!==v.substring(0,1)){const H=Ke(x);(H.isLeafNode()||!H.isEmpty())&&(d=d.updateImmediateChild(v,H))}}),d.updatePriority(Ke(c))}{const d=[];let v=!1;if(mn(f,(te,we)=>{if("."!==te.substring(0,1)){const Ze=Ke(we);Ze.isEmpty()||(v=v||!Ze.getPriority().isEmpty(),d.push(new ti(te,Ze)))}}),0===d.length)return B.EMPTY_NODE;const H=Zs(d,ho,te=>te.name,Us);if(v){const te=Zs(d,Li.getCompare());return new B(H,Ke(c),new Vi({".priority":te},{".priority":Li}))}return new B(H,Ke(c),Vi.Default)}}Object.defineProperties(ti,{MIN:{value:new ti(Je,B.EMPTY_NODE)},MAX:{value:new ti(Lt,W)}}),Yo.__EMPTY_NODE=B.EMPTY_NODE,Bs.__childrenNodeConstructor=B,function zs(f){Gs=f}(W),function so(f){Qo=f}(W),function us(f){xs=f}(Ke);class rn extends _s{constructor(c){super(),this.indexPath_=c,(0,ae.hu)(!Ir(c)&&".priority"!==Sr(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,d){const v=this.extractChild(c.node),x=this.extractChild(d.node),H=v.compareTo(x);return 0===H?pt(c.name,d.name):H}makePost(c,d){const v=Ke(c),x=B.EMPTY_NODE.updateChild(this.indexPath_,v);return new ti(d,x)}maxPost(){const c=B.EMPTY_NODE.updateChild(this.indexPath_,W);return new ti(Lt,c)}toString(){return Gi(this.indexPath_,0).join("/")}}const hr=new class wn extends _s{compare(c,d){const v=c.node.compareTo(d.node);return 0===v?pt(c.name,d.name):v}isDefinedOn(c){return!0}indexedValueChanged(c,d){return!c.equals(d)}minPost(){return ti.MIN}maxPost(){return ti.MAX}makePost(c,d){const v=Ke(c);return new ti(d,v)}toString(){return".value"}};function Gr(f){return{type:"value",snapshotNode:f}}function Xr(f,c){return{type:"child_added",snapshotNode:c,childName:f}}function ni(f,c){return{type:"child_removed",snapshotNode:c,childName:f}}function yi(f,c,d){return{type:"child_changed",snapshotNode:c,childName:f,oldSnap:d}}class Ni{constructor(c){this.index_=c}updateChild(c,d,v,x,H,te){(0,ae.hu)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const we=c.getImmediateChild(d);return we.getChild(x).equals(v.getChild(x))&&we.isEmpty()===v.isEmpty()||(null!=te&&(v.isEmpty()?c.hasChild(d)?te.trackChildChange(ni(d,we)):(0,ae.hu)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):we.isEmpty()?te.trackChildChange(Xr(d,v)):te.trackChildChange(yi(d,v,we))),c.isLeafNode()&&v.isEmpty())?c:c.updateImmediateChild(d,v).withIndex(this.index_)}updateFullNode(c,d,v){return null!=v&&(c.isLeafNode()||c.forEachChild(Li,(x,H)=>{d.hasChild(x)||v.trackChildChange(ni(x,H))}),d.isLeafNode()||d.forEachChild(Li,(x,H)=>{if(c.hasChild(x)){const te=c.getImmediateChild(x);te.equals(H)||v.trackChildChange(yi(x,H,te))}else v.trackChildChange(Xr(x,H))})),d.withIndex(this.index_)}updatePriority(c,d){return c.isEmpty()?B.EMPTY_NODE:c.updatePriority(d)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Si{constructor(c){this.indexedFilter_=new Ni(c.getIndex()),this.index_=c.getIndex(),this.startPost_=Si.getStartPost_(c),this.endPost_=Si.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const d=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,v=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return d&&v}updateChild(c,d,v,x,H,te){return this.matches(new ti(d,v))||(v=B.EMPTY_NODE),this.indexedFilter_.updateChild(c,d,v,x,H,te)}updateFullNode(c,d,v){d.isLeafNode()&&(d=B.EMPTY_NODE);let x=d.withIndex(this.index_);x=x.updatePriority(B.EMPTY_NODE);const H=this;return d.forEachChild(Li,(te,we)=>{H.matches(new ti(te,we))||(x=x.updateImmediateChild(te,B.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,x,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const d=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),d)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const d=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),d)}return c.getIndex().maxPost()}}class oo{constructor(c){this.withinDirectionalStart=d=>this.reverse_?this.withinEndPost(d):this.withinStartPost(d),this.withinDirectionalEnd=d=>this.reverse_?this.withinStartPost(d):this.withinEndPost(d),this.withinStartPost=d=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),d);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=d=>{const v=this.index_.compare(d,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new Si(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,d,v,x,H,te){return this.rangedFilter_.matches(new ti(d,v))||(v=B.EMPTY_NODE),c.getImmediateChild(d).equals(v)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,d,v,x,H,te):this.fullLimitUpdateChild_(c,d,v,H,te)}updateFullNode(c,d,v){let x;if(d.isLeafNode()||d.isEmpty())x=B.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<d.numChildren()&&d.isIndexed(this.index_)){let H;x=B.EMPTY_NODE.withIndex(this.index_),H=this.reverse_?d.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let te=0;for(;H.hasNext()&&te<this.limit_;){const we=H.getNext();if(this.withinDirectionalStart(we)){if(!this.withinDirectionalEnd(we))break;x=x.updateImmediateChild(we.name,we.node),te++}}}else{let H;x=d.withIndex(this.index_),x=x.updatePriority(B.EMPTY_NODE),H=this.reverse_?x.getReverseIterator(this.index_):x.getIterator(this.index_);let te=0;for(;H.hasNext();){const we=H.getNext();te<this.limit_&&this.withinDirectionalStart(we)&&this.withinDirectionalEnd(we)?te++:x=x.updateImmediateChild(we.name,B.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,x,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,d,v,x,H){let te;if(this.reverse_){const bn=this.index_.getCompare();te=(Rn,Cr)=>bn(Cr,Rn)}else te=this.index_.getCompare();const we=c;(0,ae.hu)(we.numChildren()===this.limit_,"");const Ze=new ti(d,v),lt=this.reverse_?we.getFirstChild(this.index_):we.getLastChild(this.index_),an=this.rangedFilter_.matches(Ze);if(we.hasChild(d)){const bn=we.getImmediateChild(d);let Rn=x.getChildAfterChild(this.index_,lt,this.reverse_);for(;null!=Rn&&(Rn.name===d||we.hasChild(Rn.name));)Rn=x.getChildAfterChild(this.index_,Rn,this.reverse_);const Cr=null==Rn?1:te(Rn,Ze);if(an&&!v.isEmpty()&&Cr>=0)return null!=H&&H.trackChildChange(yi(d,v,bn)),we.updateImmediateChild(d,v);{null!=H&&H.trackChildChange(ni(d,bn));const Ps=we.updateImmediateChild(d,B.EMPTY_NODE);return null!=Rn&&this.rangedFilter_.matches(Rn)?(null!=H&&H.trackChildChange(Xr(Rn.name,Rn.node)),Ps.updateImmediateChild(Rn.name,Rn.node)):Ps}}return v.isEmpty()?c:an&&te(lt,Ze)>=0?(null!=H&&(H.trackChildChange(ni(lt.name,lt.node)),H.trackChildChange(Xr(d,v))),we.updateImmediateChild(d,v).updateImmediateChild(lt.name,B.EMPTY_NODE)):c}}class ts{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Li}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ae.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ae.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Je}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ae.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ae.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ae.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Li}copy(){const c=new ts;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function ye(f){const c={};if(f.isDefault())return c;let d;if(f.index_===Li?d="$priority":f.index_===hr?d="$value":f.index_===Ts?d="$key":((0,ae.hu)(f.index_ instanceof rn,"Unrecognized index type!"),d=f.index_.toString()),c.orderBy=(0,ae.Wl)(d),f.startSet_){const v=f.startAfterSet_?"startAfter":"startAt";c[v]=(0,ae.Wl)(f.indexStartValue_),f.startNameSet_&&(c[v]+=","+(0,ae.Wl)(f.indexStartName_))}if(f.endSet_){const v=f.endBeforeSet_?"endBefore":"endAt";c[v]=(0,ae.Wl)(f.indexEndValue_),f.endNameSet_&&(c[v]+=","+(0,ae.Wl)(f.indexEndName_))}return f.limitSet_&&(f.isViewFromLeft()?c.limitToFirst=f.limit_:c.limitToLast=f.limit_),c}function Ye(f){const c={};if(f.startSet_&&(c.sp=f.indexStartValue_,f.startNameSet_&&(c.sn=f.indexStartName_),c.sin=!f.startAfterSet_),f.endSet_&&(c.ep=f.indexEndValue_,f.endNameSet_&&(c.en=f.indexEndName_),c.ein=!f.endBeforeSet_),f.limitSet_){c.l=f.limit_;let d=f.viewFrom_;""===d&&(d=f.isViewFromLeft()?"l":"r"),c.vf=d}return f.index_!==Li&&(c.i=f.index_.toString()),c}class xn extends Hi{constructor(c,d,v,x){super(),this.repoInfo_=c,this.onDataUpdate_=d,this.authTokenProvider_=v,this.appCheckTokenProvider_=x,this.log_=St("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,d){return void 0!==d?"tag$"+d:((0,ae.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,d,v,x){const H=c._path.toString();this.log_("Listen called for "+H+" "+c._queryIdentifier);const te=xn.getListenId_(c,v),we={};this.listens_[te]=we;const Ze=ye(c._queryParams);this.restRequest_(H+".json",Ze,(lt,an)=>{let bn=an;if(404===lt&&(bn=null,lt=null),null===lt&&this.onDataUpdate_(H,bn,!1,v),(0,ae.DV)(this.listens_,te)===we){let Rn;Rn=lt?401===lt?"permission_denied":"rest_error:"+lt:"ok",x(Rn,null)}})}unlisten(c,d){const v=xn.getListenId_(c,d);delete this.listens_[v]}get(c){const d=ye(c._queryParams),v=c._path.toString(),x=new ae.BH;return this.restRequest_(v+".json",d,(H,te)=>{let we=te;404===H&&(we=null,H=null),null===H?(this.onDataUpdate_(v,we,!1,null),x.resolve(we)):x.reject(new Error(we))}),x.promise}refreshAuthToken(c){}restRequest_(c,d={},v){return d.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([x,H])=>{x&&x.accessToken&&(d.auth=x.accessToken),H&&H.token&&(d.ac=H.token);const te=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,ae.xO)(d);this.log_("Sending REST request for "+te);const we=new XMLHttpRequest;we.onreadystatechange=()=>{if(v&&4===we.readyState){this.log_("REST Response for "+te+" received. status:",we.status,"response:",we.responseText);let Ze=null;if(we.status>=200&&we.status<300){try{Ze=(0,ae.cI)(we.responseText)}catch(lt){Oe("Failed to parse JSON response for "+te+": "+we.responseText)}v(null,Ze)}else 401!==we.status&&404!==we.status&&Oe("Got unsuccessful REST response for "+te+" Status: "+we.status),v(we.status);v=null}},we.open("GET",te,!0),we.send()})}}class ee{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,d){this.rootNode_=this.rootNode_.updateChild(c,d)}}function K(){return{value:null,children:new Map}}function Ce(f,c,d){if(Ir(c))f.value=d,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(c,d);else{const v=Sr(c);f.children.has(v)||f.children.set(v,K()),Ce(f.children.get(v),c=Br(c),d)}}function rt(f,c,d){null!==f.value?d(c,f.value):function Zt(f,c){f.children.forEach((d,v)=>{c(v,d)})}(f,(v,x)=>{rt(x,new Qr(c.toString()+"/"+v),d)})}class An{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),d=Object.assign({},c);return this.last_&&mn(this.last_,(v,x)=>{d[v]=d[v]-x}),this.last_=c,d}}class vi{constructor(c,d){this.server_=d,this.statsToReport_={},this.statsListener_=new An(c);const v=1e4+2e4*Math.random();Hn(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const c=this.statsListener_.get(),d={};let v=!1;mn(c,(x,H)=>{H>0&&(0,ae.r3)(this.statsToReport_,x)&&(d[x]=H,v=!0)}),v&&this.server_.reportStats(d),Hn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var hi=(()=>{return(f=hi||(hi={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",hi;var f})();function l(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class A{constructor(c,d,v){this.path=c,this.affectedTree=d,this.revert=v,this.type=hi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(Ir(this.path)){if(null!=this.affectedTree.value)return(0,ae.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const d=this.affectedTree.subtree(new Qr(c));return new A(wr(),d,this.revert)}}return(0,ae.hu)(Sr(this.path)===c,"operationForChild called for unrelated child."),new A(Br(this.path),this.affectedTree,this.revert)}}class I{constructor(c,d){this.source=c,this.path=d,this.type=hi.LISTEN_COMPLETE}operationForChild(c){return Ir(this.path)?new I(this.source,wr()):new I(this.source,Br(this.path))}}class P{constructor(c,d,v){this.source=c,this.path=d,this.snap=v,this.type=hi.OVERWRITE}operationForChild(c){return Ir(this.path)?new P(this.source,wr(),this.snap.getImmediateChild(c)):new P(this.source,Br(this.path),this.snap)}}class z{constructor(c,d,v){this.source=c,this.path=d,this.children=v,this.type=hi.MERGE}operationForChild(c){if(Ir(this.path)){const d=this.children.subtree(new Qr(c));return d.isEmpty()?null:d.value?new P(this.source,wr(),d.value):new z(this.source,wr(),d)}return(0,ae.hu)(Sr(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new z(this.source,Br(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class J{constructor(c,d,v){this.node_=c,this.fullyInitialized_=d,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(Ir(c))return this.isFullyInitialized()&&!this.filtered_;const d=Sr(c);return this.isCompleteForChild(d)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class ge{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function oe(f,c,d,v,x,H){const te=v.filter(we=>we.type===d);te.sort((we,Ze)=>function ce(f,c,d){if(null==c.childName||null==d.childName)throw(0,ae.g5)("Should only compare child_ events.");const v=new ti(c.childName,c.snapshotNode),x=new ti(d.childName,d.snapshotNode);return f.index_.compare(v,x)}(f,we,Ze)),te.forEach(we=>{const Ze=function me(f,c,d){return"value"===c.type||"child_removed"===c.type||(c.prevName=d.getPredecessorChildName(c.childName,c.snapshotNode,f.index_)),c}(f,we,H);x.forEach(lt=>{lt.respondsTo(we.type)&&c.push(lt.createEvent(Ze,f.query_))})})}function le(f,c){return{eventCache:f,serverCache:c}}function Te(f,c,d,v){return le(new J(c,d,v),f.serverCache)}function We(f,c,d,v){return le(f.eventCache,new J(c,d,v))}function tt(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function De(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let ke;class et{constructor(c,d=(()=>(ke||(ke=new bi(Rt)),ke))()){this.value=c,this.children=d}static fromObject(c){let d=new et(null);return mn(c,(v,x)=>{d=d.set(new Qr(v),x)}),d}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,d){if(null!=this.value&&d(this.value))return{path:wr(),value:this.value};if(Ir(c))return null;{const v=Sr(c),x=this.children.get(v);if(null!==x){const H=x.findRootMostMatchingPathAndValue(Br(c),d);return null!=H?{path:ui(new Qr(v),H.path),value:H.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(Ir(c))return this;{const d=Sr(c),v=this.children.get(d);return null!==v?v.subtree(Br(c)):new et(null)}}set(c,d){if(Ir(c))return new et(d,this.children);{const v=Sr(c),H=(this.children.get(v)||new et(null)).set(Br(c),d),te=this.children.insert(v,H);return new et(this.value,te)}}remove(c){if(Ir(c))return this.children.isEmpty()?new et(null):new et(null,this.children);{const d=Sr(c),v=this.children.get(d);if(v){const x=v.remove(Br(c));let H;return H=x.isEmpty()?this.children.remove(d):this.children.insert(d,x),null===this.value&&H.isEmpty()?new et(null):new et(this.value,H)}return this}}get(c){if(Ir(c))return this.value;{const d=Sr(c),v=this.children.get(d);return v?v.get(Br(c)):null}}setTree(c,d){if(Ir(c))return d;{const v=Sr(c),H=(this.children.get(v)||new et(null)).setTree(Br(c),d);let te;return te=H.isEmpty()?this.children.remove(v):this.children.insert(v,H),new et(this.value,te)}}fold(c){return this.fold_(wr(),c)}fold_(c,d){const v={};return this.children.inorderTraversal((x,H)=>{v[x]=H.fold_(ui(c,x),d)}),d(c,this.value,v)}findOnPath(c,d){return this.findOnPath_(c,wr(),d)}findOnPath_(c,d,v){const x=!!this.value&&v(d,this.value);if(x)return x;if(Ir(c))return null;{const H=Sr(c),te=this.children.get(H);return te?te.findOnPath_(Br(c),ui(d,H),v):null}}foreachOnPath(c,d){return this.foreachOnPath_(c,wr(),d)}foreachOnPath_(c,d,v){if(Ir(c))return this;{this.value&&v(d,this.value);const x=Sr(c),H=this.children.get(x);return H?H.foreachOnPath_(Br(c),ui(d,x),v):new et(null)}}foreach(c){this.foreach_(wr(),c)}foreach_(c,d){this.children.inorderTraversal((v,x)=>{x.foreach_(ui(c,v),d)}),this.value&&d(c,this.value)}foreachChild(c){this.children.inorderTraversal((d,v)=>{v.value&&c(d,v.value)})}}class yt{constructor(c){this.writeTree_=c}static empty(){return new yt(new et(null))}}function vn(f,c,d){if(Ir(c))return new yt(new et(d));{const v=f.writeTree_.findRootMostValueAndPath(c);if(null!=v){const x=v.path;let H=v.value;const te=gs(x,c);return H=H.updateChild(te,d),new yt(f.writeTree_.set(x,H))}{const x=new et(d),H=f.writeTree_.setTree(c,x);return new yt(H)}}}function Dn(f,c,d){let v=f;return mn(d,(x,H)=>{v=vn(v,ui(c,x),H)}),v}function gn(f,c){if(Ir(c))return yt.empty();{const d=f.writeTree_.setTree(c,new et(null));return new yt(d)}}function Mn(f,c){return null!=nr(f,c)}function nr(f,c){const d=f.writeTree_.findRootMostValueAndPath(c);return null!=d?f.writeTree_.get(d.path).getChild(gs(d.path,c)):null}function _r(f){const c=[],d=f.writeTree_.value;return null!=d?d.isLeafNode()||d.forEachChild(Li,(v,x)=>{c.push(new ti(v,x))}):f.writeTree_.children.inorderTraversal((v,x)=>{null!=x.value&&c.push(new ti(v,x.value))}),c}function Fn(f,c){if(Ir(c))return f;{const d=nr(f,c);return new yt(null!=d?new et(d):f.writeTree_.subtree(c))}}function Jt(f){return f.writeTree_.isEmpty()}function Pt(f,c){return hn(wr(),f.writeTree_,c)}function hn(f,c,d){if(null!=c.value)return d.updateChild(f,c.value);{let v=null;return c.children.inorderTraversal((x,H)=>{".priority"===x?((0,ae.hu)(null!==H.value,"Priority writes must always be leaf nodes"),v=H.value):d=hn(ui(f,x),H,d)}),!d.getChild(f).isEmpty()&&null!==v&&(d=d.updateChild(ui(f,".priority"),v)),d}}function lr(f,c){return Ur(c,f)}function _i(f,c){if(f.snap)return Bi(f.path,c);for(const d in f.children)if(f.children.hasOwnProperty(d)&&Bi(ui(f.path,d),c))return!0;return!1}function Ys(f){return f.visible}function Xo(f,c,d){let v=yt.empty();for(let x=0;x<f.length;++x){const H=f[x];if(c(H)){const te=H.path;let we;if(H.snap)Bi(d,te)?(we=gs(d,te),v=vn(v,we,H.snap)):Bi(te,d)&&(we=gs(te,d),v=vn(v,wr(),H.snap.getChild(we)));else{if(!H.children)throw(0,ae.g5)("WriteRecord should have .snap or .children");if(Bi(d,te))we=gs(d,te),v=Dn(v,we,H.children);else if(Bi(te,d))if(we=gs(te,d),Ir(we))v=Dn(v,wr(),H.children);else{const Ze=(0,ae.DV)(H.children,Sr(we));if(Ze){const lt=Ze.getChild(Br(we));v=vn(v,wr(),lt)}}}}}return v}function Z(f,c,d,v,x){if(v||x){const H=Fn(f.visibleWrites,c);return!x&&Jt(H)?d:x||null!=d||Mn(H,wr())?Pt(Xo(f.allWrites,function(lt){return(lt.visible||x)&&(!v||!~v.indexOf(lt.writeId))&&(Bi(lt.path,c)||Bi(c,lt.path))},c),d||B.EMPTY_NODE):null}{const H=nr(f.visibleWrites,c);if(null!=H)return H;{const te=Fn(f.visibleWrites,c);return Jt(te)?d:null!=d||Mn(te,wr())?Pt(te,d||B.EMPTY_NODE):null}}}function Xe(f,c,d,v){return Z(f.writeTree,f.treePath,c,d,v)}function vt(f,c){return function C(f,c,d){let v=B.EMPTY_NODE;const x=nr(f.visibleWrites,c);if(x)return x.isLeafNode()||x.forEachChild(Li,(H,te)=>{v=v.updateImmediateChild(H,te)}),v;if(d){const H=Fn(f.visibleWrites,c);return d.forEachChild(Li,(te,we)=>{const Ze=Pt(Fn(H,new Qr(te)),we);v=v.updateImmediateChild(te,Ze)}),_r(H).forEach(te=>{v=v.updateImmediateChild(te.name,te.node)}),v}return _r(Fn(f.visibleWrites,c)).forEach(te=>{v=v.updateImmediateChild(te.name,te.node)}),v}(f.writeTree,f.treePath,c)}function fn(f,c,d,v){return function T(f,c,d,v,x){(0,ae.hu)(v||x,"Either existingEventSnap or existingServerSnap must exist");const H=ui(c,d);if(Mn(f.visibleWrites,H))return null;{const te=Fn(f.visibleWrites,H);return Jt(te)?x.getChild(d):Pt(te,x.getChild(d))}}(f.writeTree,f.treePath,c,d,v)}function pr(f,c){return function ue(f,c){return nr(f.visibleWrites,c)}(f.writeTree,ui(f.treePath,c))}function yr(f,c,d){return function F(f,c,d,v){const x=ui(c,d),H=nr(f.visibleWrites,x);return null!=H?H:v.isCompleteForChild(d)?Pt(Fn(f.visibleWrites,x),v.getNode().getImmediateChild(d)):null}(f.writeTree,f.treePath,c,d)}function Rr(f,c){return Ur(ui(f.treePath,c),f.writeTree)}function Ur(f,c){return{treePath:f,writeTree:c}}class Nn{constructor(){this.changeMap=new Map}trackChildChange(c){const d=c.type,v=c.childName;(0,ae.hu)("child_added"===d||"child_changed"===d||"child_removed"===d,"Only child changes supported for tracking"),(0,ae.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const x=this.changeMap.get(v);if(x){const H=x.type;if("child_added"===d&&"child_removed"===H)this.changeMap.set(v,yi(v,c.snapshotNode,x.snapshotNode));else if("child_removed"===d&&"child_added"===H)this.changeMap.delete(v);else if("child_removed"===d&&"child_changed"===H)this.changeMap.set(v,ni(v,x.oldSnap));else if("child_changed"===d&&"child_added"===H)this.changeMap.set(v,Xr(v,c.snapshotNode));else{if("child_changed"!==d||"child_changed"!==H)throw(0,ae.g5)("Illegal combination of changes: "+c+" occurred after "+x);this.changeMap.set(v,yi(v,c.snapshotNode,x.oldSnap))}}else this.changeMap.set(v,c)}getChanges(){return Array.from(this.changeMap.values())}}const eo=new class Jn{getCompleteChild(c){return null}getChildAfterChild(c,d,v){return null}};class Gn{constructor(c,d,v=null){this.writes_=c,this.viewCache_=d,this.optCompleteServerCache_=v}getCompleteChild(c){const d=this.viewCache_.eventCache;if(d.isCompleteForChild(c))return d.getNode().getImmediateChild(c);{const v=null!=this.optCompleteServerCache_?new J(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yr(this.writes_,c,v)}}getChildAfterChild(c,d,v){const x=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:De(this.viewCache_),H=function $t(f,c,d,v,x,H){return function Ie(f,c,d,v,x,H,te){let we;const Ze=Fn(f.visibleWrites,c),lt=nr(Ze,wr());if(null!=lt)we=lt;else{if(null==d)return[];we=Pt(Ze,d)}if(we=we.withIndex(te),we.isEmpty()||we.isLeafNode())return[];{const an=[],bn=te.getCompare(),Rn=H?we.getReverseIteratorFrom(v,te):we.getIteratorFrom(v,te);let Cr=Rn.getNext();for(;Cr&&an.length<x;)0!==bn(Cr,v)&&an.push(Cr),Cr=Rn.getNext();return an}}(f.writeTree,f.treePath,c,d,v,x,H)}(this.writes_,x,d,1,v,c);return 0===H.length?null:H[0]}}function yo(f,c,d,v,x,H){const te=c.eventCache;if(null!=pr(v,d))return c;{let we,Ze;if(Ir(d))if((0,ae.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const lt=De(c),bn=vt(v,lt instanceof B?lt:B.EMPTY_NODE);we=f.filter.updateFullNode(c.eventCache.getNode(),bn,H)}else{const lt=Xe(v,De(c));we=f.filter.updateFullNode(c.eventCache.getNode(),lt,H)}else{const lt=Sr(d);if(".priority"===lt){(0,ae.hu)(1===Ki(d),"Can't have a priority with additional path components");const an=te.getNode();Ze=c.serverCache.getNode();const bn=fn(v,d,an,Ze);we=null!=bn?f.filter.updatePriority(an,bn):te.getNode()}else{const an=Br(d);let bn;if(te.isCompleteForChild(lt)){Ze=c.serverCache.getNode();const Rn=fn(v,d,te.getNode(),Ze);bn=null!=Rn?te.getNode().getImmediateChild(lt).updateChild(an,Rn):te.getNode().getImmediateChild(lt)}else bn=yr(v,lt,c.serverCache);we=null!=bn?f.filter.updateChild(te.getNode(),lt,bn,an,x,H):te.getNode()}}return Te(c,we,te.isFullyInitialized()||Ir(d),f.filter.filtersNodes())}}function O(f,c,d,v,x,H,te,we){const Ze=c.serverCache;let lt;const an=te?f.filter:f.filter.getIndexedFilter();if(Ir(d))lt=an.updateFullNode(Ze.getNode(),v,null);else if(an.filtersNodes()&&!Ze.isFiltered()){const Cr=Ze.getNode().updateChild(d,v);lt=an.updateFullNode(Ze.getNode(),Cr,null)}else{const Cr=Sr(d);if(!Ze.isCompleteForPath(d)&&Ki(d)>1)return c;const fi=Br(d),ca=Ze.getNode().getImmediateChild(Cr).updateChild(fi,v);lt=".priority"===Cr?an.updatePriority(Ze.getNode(),ca):an.updateChild(Ze.getNode(),Cr,ca,fi,eo,null)}const bn=We(c,lt,Ze.isFullyInitialized()||Ir(d),an.filtersNodes());return yo(f,bn,d,x,new Gn(x,bn,H),we)}function M(f,c,d,v,x,H,te){const we=c.eventCache;let Ze,lt;const an=new Gn(x,c,H);if(Ir(d))lt=f.filter.updateFullNode(c.eventCache.getNode(),v,te),Ze=Te(c,lt,!0,f.filter.filtersNodes());else{const bn=Sr(d);if(".priority"===bn)lt=f.filter.updatePriority(c.eventCache.getNode(),v),Ze=Te(c,lt,we.isFullyInitialized(),we.isFiltered());else{const Rn=Br(d),Cr=we.getNode().getImmediateChild(bn);let fi;if(Ir(Rn))fi=v;else{const Ps=an.getCompleteChild(bn);fi=null!=Ps?".priority"===xi(Rn)&&Ps.getChild(fs(Rn)).isEmpty()?Ps:Ps.updateChild(Rn,v):B.EMPTY_NODE}Ze=Cr.equals(fi)?c:Te(c,f.filter.updateChild(we.getNode(),bn,fi,Rn,an,te),we.isFullyInitialized(),f.filter.filtersNodes())}}return Ze}function S(f,c){return f.eventCache.isCompleteForChild(c)}function ne(f,c,d){return d.foreach((v,x)=>{c=c.updateChild(v,x)}),c}function _e(f,c,d,v,x,H,te,we){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let lt,Ze=c;lt=Ir(d)?v:new et(null).setTree(d,v);const an=c.serverCache.getNode();return lt.children.inorderTraversal((bn,Rn)=>{if(an.hasChild(bn)){const fi=ne(0,c.serverCache.getNode().getImmediateChild(bn),Rn);Ze=O(f,Ze,new Qr(bn),fi,x,H,te,we)}}),lt.children.inorderTraversal((bn,Rn)=>{const Cr=!c.serverCache.isCompleteForChild(bn)&&null===Rn.value;if(!an.hasChild(bn)&&!Cr){const Ps=ne(0,c.serverCache.getNode().getImmediateChild(bn),Rn);Ze=O(f,Ze,new Qr(bn),Ps,x,H,te,we)}}),Ze}class Ut{constructor(c,d){this.query_=c,this.eventRegistrations_=[];const v=this.query_._queryParams,x=new Ni(v.getIndex()),H=function Kr(f){return f.loadsAllData()?new Ni(f.getIndex()):f.hasLimit()?new oo(f):new Si(f)}(v);this.processor_=function qt(f){return{filter:f}}(H);const te=d.serverCache,we=d.eventCache,Ze=x.updateFullNode(B.EMPTY_NODE,te.getNode(),null),lt=H.updateFullNode(B.EMPTY_NODE,we.getNode(),null),an=new J(Ze,te.isFullyInitialized(),x.filtersNodes()),bn=new J(lt,we.isFullyInitialized(),H.filtersNodes());this.viewCache_=le(bn,an),this.eventGenerator_=new ge(this.query_)}get query(){return this.query_}}function Er(f,c){const d=De(f.viewCache_);return d&&(f.query._queryParams.loadsAllData()||!Ir(c)&&!d.getImmediateChild(Sr(c)).isEmpty())?d.getChild(c):null}function zn(f){return 0===f.eventRegistrations_.length}function $r(f,c,d){const v=[];if(d){(0,ae.hu)(null==c,"A cancel should cancel all event registrations.");const x=f.query._path;f.eventRegistrations_.forEach(H=>{const te=H.createCancelEvent(d,x);te&&v.push(te)})}if(c){let x=[];for(let H=0;H<f.eventRegistrations_.length;++H){const te=f.eventRegistrations_[H];if(te.matches(c)){if(c.hasAnyCallback()){x=x.concat(f.eventRegistrations_.slice(H+1));break}}else x.push(te)}f.eventRegistrations_=x}else f.eventRegistrations_=[];return v}function cs(f,c,d,v){c.type===hi.MERGE&&null!==c.source.queryId&&((0,ae.hu)(De(f.viewCache_),"We should always have a full cache before handling merges"),(0,ae.hu)(tt(f.viewCache_),"Missing event cache, even though we have a server cache"));const x=f.viewCache_,H=function Os(f,c,d,v,x){const H=new Nn;let te,we;if(d.type===hi.OVERWRITE){const lt=d;lt.source.fromUser?te=M(f,c,lt.path,lt.snap,v,x,H):((0,ae.hu)(lt.source.fromServer,"Unknown source."),we=lt.source.tagged||c.serverCache.isFiltered()&&!Ir(lt.path),te=O(f,c,lt.path,lt.snap,v,x,we,H))}else if(d.type===hi.MERGE){const lt=d;lt.source.fromUser?te=function q(f,c,d,v,x,H,te){let we=c;return v.foreach((Ze,lt)=>{const an=ui(d,Ze);S(c,Sr(an))&&(we=M(f,we,an,lt,x,H,te))}),v.foreach((Ze,lt)=>{const an=ui(d,Ze);S(c,Sr(an))||(we=M(f,we,an,lt,x,H,te))}),we}(f,c,lt.path,lt.children,v,x,H):((0,ae.hu)(lt.source.fromServer,"Unknown source."),we=lt.source.tagged||c.serverCache.isFiltered(),te=_e(f,c,lt.path,lt.children,v,x,we,H))}else if(d.type===hi.ACK_USER_WRITE){const lt=d;te=lt.revert?function It(f,c,d,v,x,H){let te;if(null!=pr(v,d))return c;{const we=new Gn(v,c,x),Ze=c.eventCache.getNode();let lt;if(Ir(d)||".priority"===Sr(d)){let an;if(c.serverCache.isFullyInitialized())an=Xe(v,De(c));else{const bn=c.serverCache.getNode();(0,ae.hu)(bn instanceof B,"serverChildren would be complete if leaf node"),an=vt(v,bn)}lt=f.filter.updateFullNode(Ze,an,H)}else{const an=Sr(d);let bn=yr(v,an,c.serverCache);null==bn&&c.serverCache.isCompleteForChild(an)&&(bn=Ze.getImmediateChild(an)),lt=null!=bn?f.filter.updateChild(Ze,an,bn,Br(d),we,H):c.eventCache.getNode().hasChild(an)?f.filter.updateChild(Ze,an,B.EMPTY_NODE,Br(d),we,H):Ze,lt.isEmpty()&&c.serverCache.isFullyInitialized()&&(te=Xe(v,De(c)),te.isLeafNode()&&(lt=f.filter.updateFullNode(lt,te,H)))}return te=c.serverCache.isFullyInitialized()||null!=pr(v,wr()),Te(c,lt,te,f.filter.filtersNodes())}}(f,c,lt.path,v,x,H):function Be(f,c,d,v,x,H,te){if(null!=pr(x,d))return c;const we=c.serverCache.isFiltered(),Ze=c.serverCache;if(null!=v.value){if(Ir(d)&&Ze.isFullyInitialized()||Ze.isCompleteForPath(d))return O(f,c,d,Ze.getNode().getChild(d),x,H,we,te);if(Ir(d)){let lt=new et(null);return Ze.getNode().forEachChild(Ts,(an,bn)=>{lt=lt.set(new Qr(an),bn)}),_e(f,c,d,lt,x,H,we,te)}return c}{let lt=new et(null);return v.foreach((an,bn)=>{const Rn=ui(d,an);Ze.isCompleteForPath(Rn)&&(lt=lt.set(an,Ze.getNode().getChild(Rn)))}),_e(f,c,d,lt,x,H,we,te)}}(f,c,lt.path,lt.affectedTree,v,x,H)}else{if(d.type!==hi.LISTEN_COMPLETE)throw(0,ae.g5)("Unknown operation type: "+d.type);te=function ot(f,c,d,v,x){const H=c.serverCache;return yo(f,We(c,H.getNode(),H.isFullyInitialized()||Ir(d),H.isFiltered()),d,v,eo,x)}(f,c,d.path,v,H)}const Ze=H.getChanges();return function ao(f,c,d){const v=c.eventCache;if(v.isFullyInitialized()){const x=v.getNode().isLeafNode()||v.getNode().isEmpty(),H=tt(f);(d.length>0||!f.eventCache.isFullyInitialized()||x&&!v.getNode().equals(H)||!v.getNode().getPriority().equals(H.getPriority()))&&d.push(Gr(tt(c)))}}(c,te,Ze),{viewCache:te,changes:Ze}}(f.processor_,x,c,d,v);return function yn(f,c){(0,ae.hu)(c.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,ae.hu)(c.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,H.viewCache),(0,ae.hu)(H.viewCache.serverCache.isFullyInitialized()||!x.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=H.viewCache,rr(f,H.changes,H.viewCache.eventCache.getNode(),null)}function rr(f,c,d,v){return function be(f,c,d,v){const x=[],H=[];return c.forEach(te=>{"child_changed"===te.type&&f.index_.indexedValueChanged(te.oldSnap,te.snapshotNode)&&H.push(function Zi(f,c){return{type:"child_moved",snapshotNode:c,childName:f}}(te.childName,te.snapshotNode))}),oe(f,x,"child_removed",c,v,d),oe(f,x,"child_added",c,v,d),oe(f,x,"child_moved",H,v,d),oe(f,x,"child_changed",c,v,d),oe(f,x,"value",c,v,d),x}(f.eventGenerator_,c,d,v?[v]:f.eventRegistrations_)}let vs,en;class Oo{constructor(){this.views=new Map}}function Qa(f,c,d,v){const x=c.source.queryId;if(null!==x){const H=f.views.get(x);return(0,ae.hu)(null!=H,"SyncTree gave us an op for an invalid query."),cs(H,c,d,v)}{let H=[];for(const te of f.views.values())H=H.concat(cs(te,c,d,v));return H}}function mu(f,c,d,v,x,H){const te=function Ll(f,c,d,v,x){const te=f.views.get(c._queryIdentifier);if(!te){let we=Xe(d,x?v:null),Ze=!1;we?Ze=!0:v instanceof B?(we=vt(d,v),Ze=!1):(we=B.EMPTY_NODE,Ze=!1);const lt=le(new J(we,Ze,!1),new J(v,x,!1));return new Ut(c,lt)}return te}(f,c,v,x,H);return f.views.has(c._queryIdentifier)||f.views.set(c._queryIdentifier,te),function Is(f,c){f.eventRegistrations_.push(c)}(te,d),function Ss(f,c){const d=f.viewCache_.eventCache,v=[];return d.getNode().isLeafNode()||d.getNode().forEachChild(Li,(H,te)=>{v.push(Xr(H,te))}),d.isFullyInitialized()&&v.push(Gr(d.getNode())),rr(f,v,d.getNode(),c)}(te,d)}function sa(f){const c=[];for(const d of f.views.values())d.query._queryParams.loadsAllData()||c.push(d);return c}function Ca(f,c){let d=null;for(const v of f.views.values())d=d||Er(v,c);return d}function wc(f,c){return c._queryParams.loadsAllData()?Xl(f):f.views.get(c._queryIdentifier)}function Ic(f,c){return null!=wc(f,c)}function oa(f){return null!=Xl(f)}function Xl(f){for(const c of f.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let wo=1;class Ta{constructor(c){this.listenProvider_=c,this.syncPointTree_=new et(null),this.pendingWriteTree_=function Ve(){return{visibleWrites:yt.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function aa(f,c,d,v,x){return function ar(f,c,d,v,x){(0,ae.hu)(v>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===x&&(x=!0),f.allWrites.push({path:c,snap:d,writeId:v,visible:x}),x&&(f.visibleWrites=vn(f.visibleWrites,c,d)),f.lastWriteId=v}(f.pendingWriteTree_,c,d,v,x),x?da(f,new P({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,d)):[]}function la(f,c,d=!1){const v=function cr(f,c){for(let d=0;d<f.allWrites.length;d++){const v=f.allWrites[d];if(v.writeId===c)return v}return null}(f.pendingWriteTree_,c);if(function tr(f,c){const d=f.allWrites.findIndex(we=>we.writeId===c);(0,ae.hu)(d>=0,"removeWrite called with nonexistent writeId.");const v=f.allWrites[d];f.allWrites.splice(d,1);let x=v.visible,H=!1,te=f.allWrites.length-1;for(;x&&te>=0;){const we=f.allWrites[te];we.visible&&(te>=d&&_i(we,v.path)?x=!1:Bi(v.path,we.path)&&(H=!0)),te--}return!!x&&(H?(function Di(f){f.visibleWrites=Xo(f.allWrites,Ys,wr()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(v.snap?f.visibleWrites=gn(f.visibleWrites,v.path):mn(v.children,Ze=>{f.visibleWrites=gn(f.visibleWrites,ui(v.path,Ze))}),!0))}(f.pendingWriteTree_,c)){let H=new et(null);return null!=v.snap?H=H.set(wr(),!0):mn(v.children,te=>{H=H.set(new Qr(te),!0)}),da(f,new A(v.path,H,d))}return[]}function xo(f,c,d){return da(f,new P({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,d))}function _o(f,c,d,v,x=!1){const H=c._path,te=f.syncPointTree_.get(H);let we=[];if(te&&("default"===c._queryIdentifier||Ic(te,c))){const Ze=function po(f,c,d,v){const x=c._queryIdentifier,H=[];let te=[];const we=oa(f);if("default"===x)for(const[Ze,lt]of f.views.entries())te=te.concat($r(lt,d,v)),zn(lt)&&(f.views.delete(Ze),lt.query._queryParams.loadsAllData()||H.push(lt.query));else{const Ze=f.views.get(x);Ze&&(te=te.concat($r(Ze,d,v)),zn(Ze)&&(f.views.delete(x),Ze.query._queryParams.loadsAllData()||H.push(Ze.query)))}return we&&!oa(f)&&H.push(new(function Jo(){return(0,ae.hu)(vs,"Reference.ts has not been loaded"),vs}())(c._repo,c._path)),{removed:H,events:te}}(te,c,d,v);(function Ua(f){return 0===f.views.size})(te)&&(f.syncPointTree_=f.syncPointTree_.remove(H));const lt=Ze.removed;if(we=Ze.events,!x){const an=-1!==lt.findIndex(Rn=>Rn._queryParams.loadsAllData()),bn=f.syncPointTree_.findOnPath(H,(Rn,Cr)=>oa(Cr));if(an&&!bn){const Rn=f.syncPointTree_.subtree(H);if(!Rn.isEmpty()){const Cr=function Vl(f){return f.fold((c,d,v)=>{if(d&&oa(d))return[Xl(d)];{let x=[];return d&&(x=sa(d)),mn(v,(H,te)=>{x=x.concat(te)}),x}})}(Rn);for(let fi=0;fi<Cr.length;++fi){const Ps=Cr[fi],ca=Ps.query,Fu=$a(f,Ps);f.listenProvider_.startListening(tl(ca),lo(f,ca),Fu.hashFn,Fu.onComplete)}}}!bn&&lt.length>0&&!v&&(an?f.listenProvider_.stopListening(tl(c),null):lt.forEach(Rn=>{const Cr=f.queryToTagMap.get(ja(Rn));f.listenProvider_.stopListening(tl(Rn),Cr)}))}!function wa(f,c){for(let d=0;d<c.length;++d){const v=c[d];if(!v._queryParams.loadsAllData()){const x=ja(v),H=f.queryToTagMap.get(x);f.queryToTagMap.delete(x),f.tagToQueryMap.delete(H)}}}(f,lt)}return we}function Sl(f,c,d,v=!1){const x=c._path;let H=null,te=!1;f.syncPointTree_.foreachOnPath(x,(Rn,Cr)=>{const fi=gs(Rn,x);H=H||Ca(Cr,fi),te=te||oa(Cr)});let Ze,we=f.syncPointTree_.get(x);we?(te=te||oa(we),H=H||Ca(we,wr())):(we=new Oo,f.syncPointTree_=f.syncPointTree_.set(x,we)),null!=H?Ze=!0:(Ze=!1,H=B.EMPTY_NODE,f.syncPointTree_.subtree(x).foreachChild((Cr,fi)=>{const Ps=Ca(fi,wr());Ps&&(H=H.updateImmediateChild(Cr,Ps))}));const lt=Ic(we,c);if(!lt&&!c._queryParams.loadsAllData()){const Rn=ja(c);(0,ae.hu)(!f.queryToTagMap.has(Rn),"View does not exist, but we have a tag");const Cr=function na(){return wo++}();f.queryToTagMap.set(Rn,Cr),f.tagToQueryMap.set(Cr,Rn)}let bn=mu(we,c,d,lr(f.pendingWriteTree_,x),H,Ze);if(!lt&&!te&&!v){const Rn=wc(we,c);bn=bn.concat(function hl(f,c,d){const v=c._path,x=lo(f,c),H=$a(f,d),te=f.listenProvider_.startListening(tl(c),x,H.hashFn,H.onComplete),we=f.syncPointTree_.subtree(v);if(x)(0,ae.hu)(!oa(we.value),"If we're adding a query, it shouldn't be shadowed");else{const Ze=we.fold((lt,an,bn)=>{if(!Ir(lt)&&an&&oa(an))return[Xl(an).query];{let Rn=[];return an&&(Rn=Rn.concat(sa(an).map(Cr=>Cr.query))),mn(bn,(Cr,fi)=>{Rn=Rn.concat(fi)}),Rn}});for(let lt=0;lt<Ze.length;++lt){const an=Ze[lt];f.listenProvider_.stopListening(tl(an),lo(f,an))}}return te}(f,c,Rn))}return bn}function Ba(f,c,d){const x=f.pendingWriteTree_,H=f.syncPointTree_.findOnPath(c,(te,we)=>{const lt=Ca(we,gs(te,c));if(lt)return lt});return Z(x,c,H,d,!0)}function da(f,c){return vo(c,f.syncPointTree_,null,lr(f.pendingWriteTree_,wr()))}function vo(f,c,d,v){if(Ir(f.path))return Ja(f,c,d,v);{const x=c.get(wr());null==d&&null!=x&&(d=Ca(x,wr()));let H=[];const te=Sr(f.path),we=f.operationForChild(te),Ze=c.children.get(te);if(Ze&&we){const lt=d?d.getImmediateChild(te):null,an=Rr(v,te);H=H.concat(vo(we,Ze,lt,an))}return x&&(H=H.concat(Qa(x,f,v,d))),H}}function Ja(f,c,d,v){const x=c.get(wr());null==d&&null!=x&&(d=Ca(x,wr()));let H=[];return c.children.inorderTraversal((te,we)=>{const Ze=d?d.getImmediateChild(te):null,lt=Rr(v,te),an=f.operationForChild(te);an&&(H=H.concat(Ja(an,we,Ze,lt)))}),x&&(H=H.concat(Qa(x,f,v,d))),H}function $a(f,c){const d=c.query,v=lo(f,d);return{hashFn:()=>(function Xn(f){return f.viewCache_.serverCache.getNode()}(c)||B.EMPTY_NODE).hash(),onComplete:x=>{if("ok"===x)return v?function yu(f,c,d){const v=Ha(f,d);if(v){const x=to(v),H=x.path,te=x.queryId,we=gs(H,c);return el(f,H,new I(l(te),we))}return[]}(f,d._path,v):function Jl(f,c){return da(f,new I({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(f,d._path);{const H=function kt(f,c){let d="Unknown Error";"too_big"===f?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?d="Client doesn't have permission to access the desired data.":"unavailable"===f&&(d="The service is unavailable");const v=new Error(f+" at "+c._path.toString()+": "+d);return v.code=f.toUpperCase(),v}(x,d);return _o(f,d,null,H)}}}}function lo(f,c){const d=ja(c);return f.queryToTagMap.get(d)}function ja(f){return f._path.toString()+"$"+f._queryIdentifier}function Ha(f,c){return f.tagToQueryMap.get(c)}function to(f){const c=f.indexOf("$");return(0,ae.hu)(-1!==c&&c<f.length-1,"Bad queryKey."),{queryId:f.substr(c+1),path:new Qr(f.substr(0,c))}}function el(f,c,d){const v=f.syncPointTree_.get(c);return(0,ae.hu)(v,"Missing sync point for query tag that we're tracking"),Qa(v,d,lr(f.pendingWriteTree_,c),null)}function tl(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function ba(){return(0,ae.hu)(en,"Reference.ts has not been loaded"),en}())(f._repo,f._path):f}class nl{constructor(c){this.node_=c}getImmediateChild(c){const d=this.node_.getImmediateChild(c);return new nl(d)}node(){return this.node_}}class uo{constructor(c,d){this.syncTree_=c,this.path_=d}getImmediateChild(c){const d=ui(this.path_,c);return new uo(this.syncTree_,d)}node(){return Ba(this.syncTree_,this.path_)}}const Io=function(f,c,d){return f&&"object"==typeof f?((0,ae.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?zu(f[".sv"],c,d):"object"==typeof f[".sv"]?fl(f[".sv"],c):void(0,ae.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},zu=function(f,c,d){if("timestamp"===f)return d.timestamp;(0,ae.hu)(!1,"Unexpected server value: "+f)},fl=function(f,c,d){f.hasOwnProperty("increment")||(0,ae.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const v=f.increment;"number"!=typeof v&&(0,ae.hu)(!1,"Unexpected increment value: "+v);const x=c.node();if((0,ae.hu)(null!=x,"Expected ChildrenNode.EMPTY_NODE for nulls"),!x.isLeafNode())return v;const te=x.getValue();return"number"!=typeof te?v:te+v},Ia=function(f,c,d){return Ul(f,new nl(c),d)};function Ul(f,c,d){const v=f.getPriority().val(),x=Io(v,c.getImmediateChild(".priority"),d);let H;if(f.isLeafNode()){const te=f,we=Io(te.getValue(),c,d);return we!==te.getValue()||x!==te.getPriority().val()?new Bs(we,Ke(x)):f}{const te=f;return H=te,x!==te.getPriority().val()&&(H=H.updatePriority(new Bs(x))),te.forEachChild(Li,(we,Ze)=>{const lt=Ul(Ze,c.getImmediateChild(we),d);lt!==Ze&&(H=H.updateImmediateChild(we,lt))}),H}}class Ra{constructor(c="",d=null,v={children:{},childCount:0}){this.name=c,this.parent=d,this.node=v}}function U(f,c){let d=c instanceof Qr?c:new Qr(c),v=f,x=Sr(d);for(;null!==x;){const H=(0,ae.DV)(v.node.children,x)||{children:{},childCount:0};v=new Ra(x,v,H),d=Br(d),x=Sr(d)}return v}function Y(f){return f.node.value}function de(f,c){f.node.value=c,zr(f)}function $e(f){return f.node.childCount>0}function Yt(f,c){mn(f.node.children,(d,v)=>{c(new Ra(d,f,v))})}function Un(f,c,d,v){d&&!v&&c(f),Yt(f,x=>{Un(x,c,!0,v)}),d&&v&&c(f)}function Zr(f){return new Qr(null===f.parent?f.name:Zr(f.parent)+"/"+f.name)}function zr(f){null!==f.parent&&function Wi(f,c,d){const v=function Nt(f){return void 0===Y(f)&&!$e(f)}(d),x=(0,ae.r3)(f.node.children,c);v&&x?(delete f.node.children[c],f.node.childCount--,zr(f)):!v&&!x&&(f.node.children[c]=d.node,f.node.childCount++,zr(f))}(f.parent,f.name,f)}const Ei=/[\[\].#$\/\u0000-\u001F\u007F]/,jo=/[\[\].#$\u0000-\u001F\u007F]/,ii=10485760,ss=function(f){return"string"==typeof f&&0!==f.length&&!Ei.test(f)},Sa=function(f){return"string"==typeof f&&0!==f.length&&!jo.test(f)},za=function(f,c,d){const v=d instanceof Qr?new $o(d,f):d;if(void 0===c)throw new Error(f+"contains undefined "+Ct(v));if("function"==typeof c)throw new Error(f+"contains a function "+Ct(v)+" with contents = "+c.toString());if(Re(c))throw new Error(f+"contains "+c.toString()+" "+Ct(v));if("string"==typeof c&&c.length>ii/3&&(0,ae.ug)(c)>ii)throw new Error(f+"contains a string greater than "+ii+" utf8 bytes "+Ct(v)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let x=!1,H=!1;if(mn(c,(te,we)=>{if(".value"===te)x=!0;else if(".priority"!==te&&".sv"!==te&&(H=!0,!ss(te)))throw new Error(f+" contains an invalid key ("+te+") "+Ct(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function co(f,c){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(c),f.byteLength_+=(0,ae.ug)(c),ns(f)})(v,te),za(f,we,v),function Ns(f){const c=f.parts_.pop();f.byteLength_-=(0,ae.ug)(c),f.parts_.length>0&&(f.byteLength_-=1)}(v)}),x&&H)throw new Error(f+' contains ".value" child '+Ct(v)+" in addition to actual children.")}},ld=function(f,c,d,v){if(!(v&&void 0===d||Sa(d)))throw new Error((0,ae.gK)(f,c)+'was an invalid path = "'+d+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class vu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wu(f,c){let d=null;for(let v=0;v<c.length;v++){const x=c[v],H=x.getPath();null!==d&&!bs(H,d.path)&&(f.eventLists_.push(d),d=null),null===d&&(d={events:[],path:H}),d.events.push(x)}d&&f.eventLists_.push(d)}function cd(f,c,d){Wu(f,d),qu(f,v=>bs(v,c))}function Ro(f,c,d){Wu(f,d),qu(f,v=>Bi(v,c)||Bi(c,v))}function qu(f,c){f.recursionDepth_++;let d=!0;for(let v=0;v<f.eventLists_.length;v++){const x=f.eventLists_[v];x&&(c(x.path)?(no(f.eventLists_[v]),f.eventLists_[v]=null):d=!1)}d&&(f.eventLists_=[]),f.recursionDepth_--}function no(f){for(let c=0;c<f.events.length;c++){const d=f.events[c];if(null!==d){f.events[c]=null;const v=d.getEventRunner();Ln&&Ge("event: "+d.toString()),Mt(v)}}}class ro{constructor(c,d,v,x){this.repoInfo_=c,this.forceRestClient_=d,this.authTokenProvider_=v,this.appCheckProvider_=x,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=K(),this.transactionQueueTree_=new Ra,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pl(f){const d=f.infoData_.getNode(new Qr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+d}function Ho(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:pl(f)})}function Uo(f,c,d,v,x){f.dataUpdateCount++;const H=new Qr(c);d=f.interceptServerDataCallback_?f.interceptServerDataCallback_(c,d):d;let te=[];if(x)if(v){const Ze=(0,ae.UI)(d,lt=>Ke(lt));te=function ta(f,c,d,v){const x=Ha(f,v);if(x){const H=to(x),te=H.path,we=H.queryId,Ze=gs(te,c),lt=et.fromObject(d);return el(f,te,new z(l(we),Ze,lt))}return[]}(f.serverSyncTree_,H,Ze,x)}else{const Ze=Ke(d);te=function dl(f,c,d,v){const x=Ha(f,v);if(null!=x){const H=to(x),te=H.path,we=H.queryId,Ze=gs(te,c);return el(f,te,new P(l(we),Ze,d))}return[]}(f.serverSyncTree_,H,Ze,x)}else if(v){const Ze=(0,ae.UI)(d,lt=>Ke(lt));te=function ea(f,c,d){const v=et.fromObject(d);return da(f,new z({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,v))}(f.serverSyncTree_,H,Ze)}else{const Ze=Ke(d);te=xo(f.serverSyncTree_,H,Ze)}let we=H;te.length>0&&(we=Oa(f,H)),Ro(f.eventQueue_,we,te)}function Ku(f,c){Zu(f,"connected",c),!1===c&&function _a(f){ml(f,"onDisconnectEvents");const c=Ho(f),d=K();rt(f.onDisconnect_,wr(),(x,H)=>{const te=function(f,c,d,v){return Ul(c,new uo(d,f),v)}(x,H,f.serverSyncTree_,c);Ce(d,x,te)});let v=[];rt(d,wr(),(x,H)=>{v=v.concat(xo(f.serverSyncTree_,x,H));const te=zl(f,x);Oa(f,te)}),f.onDisconnect_=K(),Ro(f.eventQueue_,wr(),v)}(f)}function Zu(f,c,d){const v=new Qr("/.info/"+c),x=Ke(d);f.infoData_.updateSnapshot(v,x);const H=xo(f.infoSyncTree_,v,x);Ro(f.eventQueue_,v,H)}function eu(f){return f.nextWriteId_++}function Hl(f,c,d,v,x){ml(f,"set",{path:c.toString(),value:d,priority:v});const H=Ho(f),te=Ke(d,v),we=Ba(f.serverSyncTree_,c),Ze=Ia(te,we,H),lt=eu(f),an=aa(f.serverSyncTree_,c,Ze,lt,!0);Wu(f.eventQueue_,an),f.server_.put(c.toString(),te.val(!0),(Rn,Cr)=>{const fi="ok"===Rn;fi||Oe("set at "+c+" failed: "+Rn);const Ps=la(f.serverSyncTree_,lt,!fi);Ro(f.eventQueue_,c,Ps),function va(f,c,d,v){c&&Mt(()=>{if("ok"===d)c(null);else{const x=(d||"error").toUpperCase();let H=x;v&&(H+=": "+v);const te=new Error(H);te.code=x,c(te)}})}(0,x,Rn,Cr)});const bn=zl(f,c);Oa(f,bn),Ro(f.eventQueue_,bn,[])}function ru(f,c,d){let v;v=".info"===Sr(c._path)?_o(f.infoSyncTree_,c,d):_o(f.serverSyncTree_,c,d),cd(f.eventQueue_,c._path,v)}function ml(f,...c){let d="";f.persistentConnection_&&(d=f.persistentConnection_.id+":"),Ge(d,...c)}function Cu(f,c,d){return Ba(f.serverSyncTree_,c,d)||B.EMPTY_NODE}function su(f,c=f.transactionQueueTree_){if(c||Tu(f,c),Y(c)){const d=Da(f,c);(0,ae.hu)(d.length>0,"Sending zero length transaction queue"),d.every(x=>0===x.status)&&function bu(f,c,d){const v=d.map(lt=>lt.currentWriteId),x=Cu(f,c,v);let H=x;const te=x.hash();for(let lt=0;lt<d.length;lt++){const an=d[lt];(0,ae.hu)(0===an.status,"tryToSendTransactionQueue_: items in queue should all be run."),an.status=1,an.retryCount++;const bn=gs(c,an.path);H=H.updateChild(bn,an.currentOutputSnapshotRaw)}const we=H.val(!0),Ze=c;f.server_.put(Ze.toString(),we,lt=>{ml(f,"transaction put response",{path:Ze.toString(),status:lt});let an=[];if("ok"===lt){const bn=[];for(let Rn=0;Rn<d.length;Rn++)d[Rn].status=2,an=an.concat(la(f.serverSyncTree_,d[Rn].currentWriteId)),d[Rn].onComplete&&bn.push(()=>d[Rn].onComplete(null,!0,d[Rn].currentOutputSnapshotResolved)),d[Rn].unwatcher();Tu(f,U(f.transactionQueueTree_,c)),su(f,f.transactionQueueTree_),Ro(f.eventQueue_,c,an);for(let Rn=0;Rn<bn.length;Rn++)Mt(bn[Rn])}else{if("datastale"===lt)for(let bn=0;bn<d.length;bn++)d[bn].status=3===d[bn].status?4:0;else{Oe("transaction at "+Ze.toString()+" failed: "+lt);for(let bn=0;bn<d.length;bn++)d[bn].status=4,d[bn].abortReason=lt}Oa(f,c)}},te)}(f,Zr(c),d)}else $e(c)&&Yt(c,d=>{su(f,d)})}function Oa(f,c){const d=ka(f,c),v=Zr(d);return function Xu(f,c,d){if(0===c.length)return;const v=[];let x=[];const te=c.filter(we=>0===we.status).map(we=>we.currentWriteId);for(let we=0;we<c.length;we++){const Ze=c[we],lt=gs(d,Ze.path);let bn,an=!1;if((0,ae.hu)(null!==lt,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ze.status)an=!0,bn=Ze.abortReason,x=x.concat(la(f.serverSyncTree_,Ze.currentWriteId,!0));else if(0===Ze.status)if(Ze.retryCount>=25)an=!0,bn="maxretry",x=x.concat(la(f.serverSyncTree_,Ze.currentWriteId,!0));else{const Rn=Cu(f,Ze.path,te);Ze.currentInputSnapshot=Rn;const Cr=c[we].update(Rn.val());if(void 0!==Cr){za("transaction failed: Data returned ",Cr,Ze.path);let fi=Ke(Cr);"object"==typeof Cr&&null!=Cr&&(0,ae.r3)(Cr,".priority")||(fi=fi.updatePriority(Rn.getPriority()));const ca=Ze.currentWriteId,Fu=Ho(f),Vc=Ia(fi,Rn,Fu);Ze.currentOutputSnapshotRaw=fi,Ze.currentOutputSnapshotResolved=Vc,Ze.currentWriteId=eu(f),te.splice(te.indexOf(ca),1),x=x.concat(aa(f.serverSyncTree_,Ze.path,Vc,Ze.currentWriteId,Ze.applyLocally)),x=x.concat(la(f.serverSyncTree_,ca,!0))}else an=!0,bn="nodata",x=x.concat(la(f.serverSyncTree_,Ze.currentWriteId,!0))}Ro(f.eventQueue_,d,x),x=[],an&&(c[we].status=2,setTimeout(c[we].unwatcher,Math.floor(0)),c[we].onComplete&&v.push("nodata"===bn?()=>c[we].onComplete(null,!1,c[we].currentInputSnapshot):()=>c[we].onComplete(new Error(bn),!1,null)))}Tu(f,f.transactionQueueTree_);for(let we=0;we<v.length;we++)Mt(v[we]);su(f,f.transactionQueueTree_)}(f,Da(f,d),v),v}function ka(f,c){let d,v=f.transactionQueueTree_;for(d=Sr(c);null!==d&&void 0===Y(v);)v=U(v,d),d=Sr(c=Br(c));return v}function Da(f,c){const d=[];return Ju(f,c,d),d.sort((v,x)=>v.order-x.order),d}function Ju(f,c,d){const v=Y(c);if(v)for(let x=0;x<v.length;x++)d.push(v[x]);Yt(c,x=>{Ju(f,x,d)})}function Tu(f,c){const d=Y(c);if(d){let v=0;for(let x=0;x<d.length;x++)2!==d[x].status&&(d[v]=d[x],v++);d.length=v,de(c,d.length>0?d:void 0)}Yt(c,v=>{Tu(f,v)})}function zl(f,c){const d=Zr(ka(f,c)),v=U(f.transactionQueueTree_,c);return function jr(f,c,d){let v=d?f:f.parent;for(;null!==v;){if(c(v))return!0;v=v.parent}}(v,x=>{Dc(f,x)}),Dc(f,v),Un(v,x=>{Dc(f,x)}),d}function Dc(f,c){const d=Y(c);if(d){const v=[];let x=[],H=-1;for(let te=0;te<d.length;te++)3===d[te].status||(1===d[te].status?((0,ae.hu)(H===te-1,"All SENT items should be at beginning of queue."),H=te,d[te].status=3,d[te].abortReason="set"):((0,ae.hu)(0===d[te].status,"Unexpected transaction status in abort"),d[te].unwatcher(),x=x.concat(la(f.serverSyncTree_,d[te].currentWriteId,!0)),d[te].onComplete&&v.push(d[te].onComplete.bind(null,new Error("set"),!1,null))));-1===H?de(c,void 0):d.length=H+1,Ro(f.eventQueue_,Zr(c),x);for(let te=0;te<v.length;te++)Mt(v[te])}}const wu=function(f,c){const d=Iu(f),v=d.namespace;return"firebase.com"===d.domain&&Ht(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==d.domain&&Ht("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nn(d.host,d.secure,v,"ws"===d.scheme||"wss"===d.scheme,c,"",v!==d.subdomain),path:new Qr(d.pathString)}},Iu=function(f){let c="",d="",v="",x="",H="",te=!0,we="https",Ze=443;if("string"==typeof f){let lt=f.indexOf("//");lt>=0&&(we=f.substring(0,lt-1),f=f.substring(lt+2));let an=f.indexOf("/");-1===an&&(an=f.length);let bn=f.indexOf("?");-1===bn&&(bn=f.length),c=f.substring(0,Math.min(an,bn)),an<bn&&(x=function Ac(f){let c="";const d=f.split("/");for(let v=0;v<d.length;v++)if(d[v].length>0){let x=d[v];try{x=decodeURIComponent(x.replace(/\+/g," "))}catch(H){}c+="/"+x}return c}(f.substring(an,bn)));const Rn=function xc(f){const c={};"?"===f.charAt(0)&&(f=f.substring(1));for(const d of f.split("&")){if(0===d.length)continue;const v=d.split("=");2===v.length?c[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):Oe(`Invalid query segment '${d}' in query '${f}'`)}return c}(f.substring(Math.min(f.length,bn)));lt=c.indexOf(":"),lt>=0?(te="https"===we||"wss"===we,Ze=parseInt(c.substring(lt+1),10)):lt=c.length;const Cr=c.slice(0,lt);if("localhost"===Cr.toLowerCase())d="localhost";else if(Cr.split(".").length<=2)d=Cr;else{const fi=c.indexOf(".");v=c.substring(0,fi).toLowerCase(),d=c.substring(fi+1),H=v}"ns"in Rn&&(H=Rn.ns)}return{host:c,port:Ze,domain:d,subdomain:v,secure:te,scheme:we,pathString:x,namespace:H}};class yl{constructor(c,d,v,x){this.eventType=c,this.eventRegistration=d,this.snapshot=v,this.prevName=x}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ae.Wl)(this.snapshot.exportVal())}}class ec{constructor(c,d,v){this.eventRegistration=c,this.error=d,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class _l{constructor(c,d){this.snapshotCallback=c,this.cancelCallback=d}onValue(c,d){this.snapshotCallback.call(null,c,d)}onCancel(c){return(0,ae.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class Go{constructor(c,d,v,x){this._repo=c,this._path=d,this._queryParams=v,this._orderByCalled=x}get key(){return Ir(this._path)?null:xi(this._path)}get ref(){return new Fa(this._repo,this._path)}get _queryIdentifier(){const c=Ye(this._queryParams),d=sr(c);return"{}"===d?"default":d}get _queryObject(){return Ye(this._queryParams)}isEqual(c){if(!((c=(0,ae.m9)(c))instanceof Go))return!1;const d=this._repo===c._repo,v=bs(this._path,c._path);return d&&v&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Vs(f){let c="";for(let d=f.pieceNum_;d<f.pieces_.length;d++)""!==f.pieces_[d]&&(c+="/"+encodeURIComponent(String(f.pieces_[d])));return c||"/"}(this._path)}}class Fa extends Go{constructor(c,d){super(c,d,new ts,!1)}get parent(){const c=fs(this._path);return null===c?null:new Fa(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class vl{constructor(c,d,v){this._node=c,this.ref=d,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const d=new Qr(c),v=rl(this.ref,c);return new vl(this._node.getChild(d),v,Li)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,x)=>c(new vl(x,rl(this.ref,v),Li)))}hasChild(c){const d=new Qr(c);return!this._node.getChild(d).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function io(f,c){return(f=(0,ae.m9)(f))._checkNotDeleted("ref"),void 0!==c?rl(f._root,c):f._root}function rl(f,c){return null===Sr((f=(0,ae.m9)(f))._path)?(d=c,d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),ld("child","path",d,!1)):ld("child","path",c,!1),new Fa(f._repo,ui(f._path,c));var d}function Mc(f,c){(function(f,c){if(".info"===Sr(c))throw new Error(f+" failed = Can't modify data under /.info/")})("set",(f=(0,ae.m9)(f))._path),function(f,c,d,v){v&&void 0===c||za((0,ae.gK)(f,"value"),c,d)}("set",c,f._path,!1);const d=new ae.BH;return Hl(f._repo,f._path,c,null,d.wrapCallback(()=>{})),d.promise}class Ru{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,d){const v=d._queryParams.getIndex();return new yl("value",this,new vl(c.snapshotNode,new Fa(d._repo,d._path),v))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new ec(this,c,d):null}matches(c){return c instanceof Ru&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tc{constructor(c,d){this.eventType=c,this.callbackContext=d}respondsTo(c){let d="children_added"===c?"child_added":c;return d="children_removed"===d?"child_removed":d,this.eventType===d}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new ec(this,c,d):null}createEvent(c,d){(0,ae.hu)(null!=c.childName,"Child events should have a childName.");const v=rl(new Fa(d._repo,d._path),c.childName),x=d._queryParams.getIndex();return new yl(c.type,this,new vl(c.snapshotNode,v,x),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof tc&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Wo(f,c,d,v){return function zo(f,c,d,v,x){let H;if("object"==typeof v&&(H=void 0,x=v),"function"==typeof v&&(H=v),x&&x.onlyOnce){const Ze=d,lt=(an,bn)=>{ru(f._repo,f,we),Ze(an,bn)};lt.userCallback=d.userCallback,lt.context=d.context,d=lt}const te=new _l(d,H||void 0),we="value"===c?new Ru(te):new tc(c,te);return function nu(f,c,d){let v;v=".info"===Sr(c._path)?Sl(f.infoSyncTree_,c,d):Sl(f.serverSyncTree_,c,d),cd(f.eventQueue_,c._path,v)}(f._repo,f,we),()=>ru(f._repo,f,we)}(f,"value",c,d,v)}(function ks(f){(0,ae.hu)(!vs,"__referenceConstructor has already been defined"),vs=f})(Fa),function Xa(f){(0,ae.hu)(!en,"__referenceConstructor has already been defined"),en=f}(Fa);const kc={};function Fc(f,c,d,v,x){let H=v||f.options.databaseURL;void 0===H&&(f.options.projectId||Ht("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ge("Using default host for project ",f.options.projectId),H=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Ze,lt,te=wu(H,x),we=te.repoInfo;"undefined"!=typeof process&&process.env&&(lt=process.env.FIREBASE_DATABASE_EMULATOR_HOST),lt?(Ze=!0,H=`http://${lt}?ns=${we.namespace}`,te=wu(H,x),we=te.repoInfo):Ze=!te.repoInfo.secure;const an=x&&Ze?new Yr(Yr.OWNER):new ur(f.name,f.options,c);(function(f,c){const d=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!ss(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==d.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),Sa(f)}(d))throw new Error((0,ae.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",te),Ir(te.path)||Ht("Database URL must point to the root of a Firebase Database (not including a child path).");const bn=function Po(f,c,d,v){let x=kc[c.name];x||(x={},kc[c.name]=x);let H=x[f.toURLString()];return H&&Ht("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),H=new ro(f,false,d,v),x[f.toURLString()]=H,H}(we,f,an,new ir(f.name,d));return new qa(bn,f)}class qa{constructor(c,d){this._repoInternal=c,this.app=d,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $l(f,c,d){if(f.stats_=ds(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new xn(f.repoInfo_,(v,x,H,te)=>{Uo(f,v,x,H,te)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>Ku(f,!0),0);else{if(null!=d){if("object"!=typeof d)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ae.Wl)(d)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}f.persistentConnection_=new ys(f.repoInfo_,c,(v,x,H,te)=>{Uo(f,v,x,H,te)},v=>{Ku(f,v)},v=>{!function Fs(f,c){mn(c,(d,v)=>{Zu(f,d,v)})}(f,v)},f.authTokenProvider_,f.appCheckProvider_,d),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(v=>{f.server_.refreshAuthToken(v)}),f.appCheckProvider_.addTokenChangeListener(v=>{f.server_.refreshAppCheckToken(v.token)}),f.statsReporter_=function Oi(f,c){const d=f.toString();return Fr[d]||(Fr[d]=c()),Fr[d]}(f.repoInfo_,()=>new vi(f.stats_,f.server_)),f.infoData_=new ee,f.infoSyncTree_=new Ta({startListening:(v,x,H,te)=>{let we=[];const Ze=f.infoData_.getNode(v._path);return Ze.isEmpty()||(we=xo(f.infoSyncTree_,v._path,Ze),setTimeout(()=>{te("ok")},0)),we},stopListening:()=>{}}),Zu(f,"connected",!1),f.serverSyncTree_=new Ta({startListening:(v,x,H,te)=>(f.server_.listen(v,H,x,(we,Ze)=>{const lt=te(we,Ze);Ro(f.eventQueue_,v._path,lt)}),[]),stopListening:(v,x)=>{f.server_.unlisten(v,x)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fa(this._repo,wr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function yd(f,c){const d=kc[c];(!d||d[f.key]!==f)&&Ht(`Database ${c}(${f.repoInfo_}) has already been deleted.`),function Qu(f){f.persistentConnection_&&f.persistentConnection_.interrupt("repo_interrupt")}(f),delete d[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&Ht("Cannot call "+c+" on a deleted database.")}}function b(f=(0,k.getApp)(),c){const d=(0,k._getProvider)(f,"database").getImmediate({identifier:c}),v=(0,ae.P0)("database");return v&&function p(f,c,d,v={}){(f=(0,ae.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&Ht("Cannot call useEmulator() after instance has already been initialized.");const x=f._repoInternal;let H;if(x.repoInfo_.nodeAdmin)v.mockUserToken&&Ht('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),H=new Yr(Yr.OWNER);else if(v.mockUserToken){const te="string"==typeof v.mockUserToken?v.mockUserToken:(0,ae.Sg)(v.mockUserToken,f.app.options.projectId);H=new Yr(te)}!function ol(f,c,d,v){f.repoInfo_=new nn(`${c}:${d}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams),v&&(f.authTokenProvider_=v)}(x,c,d,H)}(d,...v),d}ys.prototype.simpleListen=function(f,c){this.sendRequest("q",{p:f},c)},ys.prototype.echo=function(f,c){this.sendRequest("echo",{d:f},c)},function Ee(f){(function at(f){qe=f})(k.SDK_VERSION),(0,k._registerComponent)(new he.wA("database",(c,{instanceIdentifier:d})=>Fc(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),d),"PUBLIC").setMultipleInstances(!0)),(0,k.registerVersion)(He,"0.14.0",f),(0,k.registerVersion)(He,"0.14.0","esm2017")}()},8766:(Wn,Dt,j)=>{j.d(Dt,{Lj:()=>xe,X3:()=>dn});var g=j(5861);let he,ae;const dt=new WeakMap,qe=new WeakMap,at=new WeakMap,Ne=new WeakMap,Pe=new WeakMap;let Et={get(Oe,Bt,Re){if(Oe instanceof IDBTransaction){if("done"===Bt)return qe.get(Oe);if("objectStoreNames"===Bt)return Oe.objectStoreNames||at.get(Oe);if("store"===Bt)return Re.objectStoreNames[1]?void 0:Re.objectStore(Re.objectStoreNames[0])}return tn(Oe[Bt])},set:(Oe,Bt,Re)=>(Oe[Bt]=Re,!0),has:(Oe,Bt)=>Oe instanceof IDBTransaction&&("done"===Bt||"store"===Bt)||Bt in Oe};function Ot(Oe){return"function"==typeof Oe?function In(Oe){return Oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function He(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Oe)?function(...Bt){return Oe.apply(Ln(this),Bt),tn(dt.get(this))}:function(...Bt){return tn(Oe.apply(Ln(this),Bt))}:function(Bt,...Re){const wt=Oe.call(Ln(this),Bt,...Re);return at.set(wt,Bt.sort?Bt.sort():[Bt]),tn(wt)}}(Oe):(Oe instanceof IDBTransaction&&function Tn(Oe){if(qe.has(Oe))return;const Bt=new Promise((Re,wt)=>{const Je=()=>{Oe.removeEventListener("complete",Lt),Oe.removeEventListener("error",pt),Oe.removeEventListener("abort",pt)},Lt=()=>{Re(),Je()},pt=()=>{wt(Oe.error||new DOMException("AbortError","AbortError")),Je()};Oe.addEventListener("complete",Lt),Oe.addEventListener("error",pt),Oe.addEventListener("abort",pt)});qe.set(Oe,Bt)}(Oe),((Oe,Bt)=>Bt.some(Re=>Oe instanceof Re))(Oe,function je(){return he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Oe,Et):Oe)}function tn(Oe){if(Oe instanceof IDBRequest)return function bt(Oe){const Bt=new Promise((Re,wt)=>{const Je=()=>{Oe.removeEventListener("success",Lt),Oe.removeEventListener("error",pt)},Lt=()=>{Re(tn(Oe.result)),Je()},pt=()=>{wt(Oe.error),Je()};Oe.addEventListener("success",Lt),Oe.addEventListener("error",pt)});return Bt.then(Re=>{Re instanceof IDBCursor&&dt.set(Re,Oe)}).catch(()=>{}),Pe.set(Bt,Oe),Bt}(Oe);if(Ne.has(Oe))return Ne.get(Oe);const Bt=Ot(Oe);return Bt!==Oe&&(Ne.set(Oe,Bt),Pe.set(Bt,Oe)),Bt}const Ln=Oe=>Pe.get(Oe);function dn(Oe,Bt,{blocked:Re,upgrade:wt,blocking:Je,terminated:Lt}={}){const pt=indexedDB.open(Oe,Bt),Rt=tn(pt);return wt&&pt.addEventListener("upgradeneeded",Sn=>{wt(tn(pt.result),Sn.oldVersion,Sn.newVersion,tn(pt.transaction))}),Re&&pt.addEventListener("blocked",()=>Re()),Rt.then(Sn=>{Lt&&Sn.addEventListener("close",()=>Lt()),Je&&Sn.addEventListener("versionchange",()=>Je())}).catch(()=>{}),Rt}function xe(Oe,{blocked:Bt}={}){const Re=indexedDB.deleteDatabase(Oe);return Bt&&Re.addEventListener("blocked",()=>Bt()),tn(Re).then(()=>{})}const Ge=["get","getKey","getAll","getAllKeys","count"],St=["put","add","delete","clear"],on=new Map;function Ht(Oe,Bt){if(!(Oe instanceof IDBDatabase)||Bt in Oe||"string"!=typeof Bt)return;if(on.get(Bt))return on.get(Bt);const Re=Bt.replace(/FromIndex$/,""),wt=Bt!==Re,Je=St.includes(Re);if(!(Re in(wt?IDBIndex:IDBObjectStore).prototype)||!Je&&!Ge.includes(Re))return;const Lt=function(){var pt=(0,g.Z)(function*(Rt,...Sn){const sr=this.transaction(Rt,Je?"readwrite":"readonly");let or=sr.store;return wt&&(or=or.index(Sn.shift())),(yield Promise.all([or[Re](...Sn),Je&&sr.done]))[0]});return function(Sn){return pt.apply(this,arguments)}}();return on.set(Bt,Lt),Lt}!function un(Oe){Et=Oe(Et)}(Oe=>cC(uC({},Oe),{get:(Bt,Re,wt)=>Ht(Bt,Re)||Oe.get(Bt,Re,wt),has:(Bt,Re)=>!!Ht(Bt,Re)||Oe.has(Bt,Re)}))},2290:(Wn,Dt,j)=>{j.d(Dt,{Rh:()=>sr,_W:()=>pt});var g=j(5e3),k=j(1777),he=j(7579),ae=j(9808),je=j(2313);const He=["toast-component",""];function dt(Vt,kt){if(1&Vt){const it=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(it),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function qe(Vt,kt){if(1&Vt&&(g.ynx(0),g._uU(1),g.BQk()),2&Vt){const it=g.oxw(2);g.xp6(1),g.hij("[",it.duplicatesCount+1,"]")}}function at(Vt,kt){if(1&Vt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,qe,2,1,"ng-container",4),g.qZA()),2&Vt){const it=g.oxw();g.Tol(it.options.titleClass),g.uIk("aria-label",it.title),g.xp6(1),g.hij(" ",it.title," "),g.xp6(1),g.Q6J("ngIf",it.duplicatesCount)}}function Ne(Vt,kt){if(1&Vt&&g._UZ(0,"div",7),2&Vt){const it=g.oxw();g.Tol(it.options.messageClass),g.Q6J("innerHTML",it.message,g.oJD)}}function Pe(Vt,kt){if(1&Vt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&Vt){const it=g.oxw();g.Tol(it.options.messageClass),g.uIk("aria-label",it.message),g.xp6(1),g.hij(" ",it.message," ")}}function bt(Vt,kt){if(1&Vt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&Vt){const it=g.oxw();g.xp6(1),g.Udp("width",it.width+"%")}}function Tn(Vt,kt){if(1&Vt){const it=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(it),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function Et(Vt,kt){if(1&Vt&&(g.ynx(0),g._uU(1),g.BQk()),2&Vt){const it=g.oxw(2);g.xp6(1),g.hij("[",it.duplicatesCount+1,"]")}}function un(Vt,kt){if(1&Vt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,Et,2,1,"ng-container",4),g.qZA()),2&Vt){const it=g.oxw();g.Tol(it.options.titleClass),g.uIk("aria-label",it.title),g.xp6(1),g.hij(" ",it.title," "),g.xp6(1),g.Q6J("ngIf",it.duplicatesCount)}}function In(Vt,kt){if(1&Vt&&g._UZ(0,"div",7),2&Vt){const it=g.oxw();g.Tol(it.options.messageClass),g.Q6J("innerHTML",it.message,g.oJD)}}function Ot(Vt,kt){if(1&Vt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&Vt){const it=g.oxw();g.Tol(it.options.messageClass),g.uIk("aria-label",it.message),g.xp6(1),g.hij(" ",it.message," ")}}function tn(Vt,kt){if(1&Vt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&Vt){const it=g.oxw();g.xp6(1),g.Udp("width",it.width+"%")}}class xe{constructor(kt,it){this.component=kt,this.injector=it}attach(kt,it){return this._attachedHost=kt,kt.attach(this,it)}detach(){const kt=this._attachedHost;if(kt)return this._attachedHost=void 0,kt.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(kt){this._attachedHost=kt}}class St{constructor(kt,it,At,ut,Qt,Mt){this.toastId=kt,this.config=it,this.message=At,this.title=ut,this.toastType=Qt,this.toastRef=Mt,this._onTap=new he.x,this._onAction=new he.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(kt){this._onAction.next(kt)}onAction(){return this._onAction.asObservable()}}const on={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},Ht=new g.OlP("ToastConfig");class Oe{constructor(kt){this._overlayRef=kt,this.duplicatesCount=0,this._afterClosed=new he.x,this._activate=new he.x,this._manualClose=new he.x,this._resetTimeout=new he.x,this._countDuplicate=new he.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(kt,it){kt&&this._resetTimeout.next(),it&&this._countDuplicate.next(++this.duplicatesCount)}}class Bt{constructor(kt,it){this._toastPackage=kt,this._parentInjector=it}get(kt,it,At){return kt===St?this._toastPackage:this._parentInjector.get(kt,it,At)}}class Re extends class Ge{attach(kt,it){return this._attachedPortal=kt,this.attachComponentPortal(kt,it)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(kt){this._disposeFn=kt}}{constructor(kt,it,At){super(),this._hostDomElement=kt,this._componentFactoryResolver=it,this._appRef=At}attachComponentPortal(kt,it){const At=this._componentFactoryResolver.resolveComponentFactory(kt.component);let ut;return ut=At.create(kt.injector),this._appRef.attachView(ut.hostView),this.setDisposeFn(()=>{this._appRef.detachView(ut.hostView),ut.destroy()}),it?this._hostDomElement.insertBefore(this._getComponentRootNode(ut),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(ut)),ut}_getComponentRootNode(kt){return kt.hostView.rootNodes[0]}}class wt{constructor(kt){this._portalHost=kt}attach(kt,it=!0){return this._portalHost.attach(kt,it)}detach(){return this._portalHost.detach()}}let Je=(()=>{class Vt{constructor(it){this._document=it}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const it=this._document.createElement("div");it.classList.add("overlay-container"),it.setAttribute("aria-live","polite"),this._document.body.appendChild(it),this._containerElement=it}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.LFG(ae.K0))},Vt.\u0275prov=g.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})(),Lt=(()=>{class Vt{constructor(it,At,ut,Qt){this._overlayContainer=it,this._componentFactoryResolver=At,this._appRef=ut,this._document=Qt,this._paneElements=new Map}create(it,At){return this._createOverlayRef(this.getPaneElement(it,At))}getPaneElement(it="",At){return this._paneElements.get(At)||this._paneElements.set(At,{}),this._paneElements.get(At)[it]||(this._paneElements.get(At)[it]=this._createPaneElement(it,At)),this._paneElements.get(At)[it]}_createPaneElement(it,At){const ut=this._document.createElement("div");return ut.id="toast-container",ut.classList.add(it),ut.classList.add("toast-container"),At?At.getContainerElement().appendChild(ut):this._overlayContainer.getContainerElement().appendChild(ut),ut}_createPortalHost(it){return new Re(it,this._componentFactoryResolver,this._appRef)}_createOverlayRef(it){return new wt(this._createPortalHost(it))}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.LFG(Je),g.LFG(g._Vd),g.LFG(g.z2F),g.LFG(ae.K0))},Vt.\u0275prov=g.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})(),pt=(()=>{class Vt{constructor(it,At,ut,Qt,Mt){this.overlay=At,this._injector=ut,this.sanitizer=Qt,this.ngZone=Mt,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},it.default),it.config),it.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},it.default.iconClasses),it.config.iconClasses))}show(it,At,ut={},Qt=""){return this._preBuildNotification(Qt,it,At,this.applyConfig(ut))}success(it,At,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",it,At,this.applyConfig(ut))}error(it,At,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",it,At,this.applyConfig(ut))}info(it,At,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",it,At,this.applyConfig(ut))}warning(it,At,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",it,At,this.applyConfig(ut))}clear(it){for(const At of this.toasts)if(void 0!==it){if(At.toastId===it)return void At.toastRef.manualClose()}else At.toastRef.manualClose()}remove(it){const At=this._findToast(it);if(!At||(At.activeToast.toastRef.close(),this.toasts.splice(At.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const ut=this.toasts[this.currentlyActive].toastRef;ut.isInactive()||(this.currentlyActive=this.currentlyActive+1,ut.activate())}return!0}findDuplicate(it="",At="",ut,Qt){const{includeTitleDuplicates:Mt}=this.toastrConfig;for(const Xt of this.toasts){const Hn=Mt&&Xt.title===it;if((!Mt||Hn)&&Xt.message===At)return Xt.toastRef.onDuplicate(ut,Qt),Xt}return null}applyConfig(it={}){return Object.assign(Object.assign({},this.toastrConfig),it)}_findToast(it){for(let At=0;At<this.toasts.length;At++)if(this.toasts[At].toastId===it)return{index:At,activeToast:this.toasts[At]};return null}_preBuildNotification(it,At,ut,Qt){return Qt.onActivateTick?this.ngZone.run(()=>this._buildNotification(it,At,ut,Qt)):this._buildNotification(it,At,ut,Qt)}_buildNotification(it,At,ut,Qt){if(!Qt.toastComponent)throw new Error("toastComponent required");const Mt=this.findDuplicate(ut,At,this.toastrConfig.resetTimeoutOnDuplicate&&Qt.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&ut||At)&&this.toastrConfig.preventDuplicates&&null!==Mt)return Mt;this.previousToastMessage=At;let Xt=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Xt=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Hn=this.overlay.create(Qt.positionClass,this.overlayContainer);this.index=this.index+1;let ir=At;At&&Qt.enableHtml&&(ir=this.sanitizer.sanitize(g.q3G.HTML,At));const ur=new Oe(Hn),Yr=new St(this.index,Qt,ir,ut,it,ur),oi=new Bt(Yr,this._injector),er=new xe(Qt.toastComponent,oi),Wr=Hn.attach(er,this.toastrConfig.newestOnTop);ur.componentInstance=Wr.instance;const xr={toastId:this.index,title:ut||"",message:At||"",toastRef:ur,onShown:ur.afterActivate(),onHidden:ur.afterClosed(),onTap:Yr.onTap(),onAction:Yr.onAction(),portal:Wr};return Xt||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{xr.toastRef.activate()})),this.toasts.push(xr),xr}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.LFG(Ht),g.LFG(Lt),g.LFG(g.zs3),g.LFG(je.H7),g.LFG(g.R0b))},Vt.\u0275prov=g.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})(),Rt=(()=>{class Vt{constructor(it,At,ut){this.toastrService=it,this.toastPackage=At,this.ngZone=ut,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=At.message,this.title=At.title,this.options=At.config,this.originalTimeout=At.config.timeOut,this.toastClasses=`${At.toastType} ${At.config.toastClass}`,this.sub=At.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=At.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=At.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=At.toastRef.countDuplicate().subscribe(Qt=>{this.duplicatesCount=Qt})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const it=(new Date).getTime();this.width=(this.hideTime-it)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(it,At){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(it),At)):this.timeout=setTimeout(()=>it(),At)}outsideInterval(it,At){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(it),At)):this.intervalId=setInterval(()=>it(),At)}runInsideAngular(it){this.ngZone?this.ngZone.run(()=>it()):it()}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.Y36(pt),g.Y36(St),g.Y36(g.R0b))},Vt.\u0275cmp=g.Xpm({type:Vt,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(it,At){1&it&&g.NdJ("click",function(){return At.tapToast()})("mouseenter",function(){return At.stickAround()})("mouseleave",function(){return At.delayedHideToast()}),2&it&&(g.d8E("@flyInOut",At.state),g.Tol(At.toastClasses),g.Udp("display",At.displayStyle))},attrs:He,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(it,At){1&it&&(g.YNc(0,dt,3,0,"button",0),g.YNc(1,at,3,5,"div",1),g.YNc(2,Ne,1,3,"div",2),g.YNc(3,Pe,2,4,"div",3),g.YNc(4,bt,2,2,"div",4)),2&it&&(g.Q6J("ngIf",At.options.closeButton),g.xp6(1),g.Q6J("ngIf",At.title),g.xp6(1),g.Q6J("ngIf",At.message&&At.options.enableHtml),g.xp6(1),g.Q6J("ngIf",At.message&&!At.options.enableHtml),g.xp6(1),g.Q6J("ngIf",At.options.progressBar))},directives:[ae.O5],encapsulation:2,data:{animation:[(0,k.X$)("flyInOut",[(0,k.SB)("inactive",(0,k.oB)({opacity:0})),(0,k.SB)("active",(0,k.oB)({opacity:1})),(0,k.SB)("removed",(0,k.oB)({opacity:0})),(0,k.eR)("inactive => active",(0,k.jt)("{{ easeTime }}ms {{ easing }}")),(0,k.eR)("active => removed",(0,k.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),Vt})();const Sn=Object.assign(Object.assign({},on),{toastComponent:Rt});let sr=(()=>{class Vt{static forRoot(it={}){return{ngModule:Vt,providers:[{provide:Ht,useValue:{default:Sn,config:it}}]}}}return Vt.\u0275fac=function(it){return new(it||Vt)},Vt.\u0275mod=g.oAB({type:Vt}),Vt.\u0275inj=g.cJS({imports:[[ae.ez]]}),Vt})(),mn=(()=>{class Vt{constructor(it,At,ut){this.toastrService=it,this.toastPackage=At,this.appRef=ut,this.width=-1,this.toastClasses="",this.state="inactive",this.message=At.message,this.title=At.title,this.options=At.config,this.originalTimeout=At.config.timeOut,this.toastClasses=`${At.toastType} ${At.config.toastClass}`,this.sub=At.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=At.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=At.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=At.toastRef.countDuplicate().subscribe(Qt=>{this.duplicatesCount=Qt})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const it=(new Date).getTime();this.width=(this.hideTime-it)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return Vt.\u0275fac=function(it){return new(it||Vt)(g.Y36(pt),g.Y36(St),g.Y36(g.z2F))},Vt.\u0275cmp=g.Xpm({type:Vt,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(it,At){1&it&&g.NdJ("click",function(){return At.tapToast()})("mouseenter",function(){return At.stickAround()})("mouseleave",function(){return At.delayedHideToast()}),2&it&&(g.Tol(At.toastClasses),g.Udp("display",At.displayStyle))},attrs:He,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(it,At){1&it&&(g.YNc(0,Tn,3,0,"button",0),g.YNc(1,un,3,5,"div",1),g.YNc(2,In,1,3,"div",2),g.YNc(3,Ot,2,4,"div",3),g.YNc(4,tn,2,2,"div",4)),2&it&&(g.Q6J("ngIf",At.options.closeButton),g.xp6(1),g.Q6J("ngIf",At.title),g.xp6(1),g.Q6J("ngIf",At.message&&At.options.enableHtml),g.xp6(1),g.Q6J("ngIf",At.message&&!At.options.enableHtml),g.xp6(1),g.Q6J("ngIf",At.options.progressBar))},directives:[ae.O5],encapsulation:2}),Vt})();Object.assign(Object.assign({},on),{toastComponent:mn})},9485:(Wn,Dt,j)=>{j.d(Dt,{YC:()=>kt,kz:()=>At,nF:()=>it});var g=j(5e3),k=j(9808),he=j(8879),ae=j(7579),je=j(9646);const He=["prevElRef"],dt=["nextElRef"],qe=["scrollbarElRef"],at=["paginationElRef"];function Ne(ut,Qt){1&ut&&(g.ynx(0),g._UZ(1,"div",6,7)(3,"div",8,9),g.BQk())}function Pe(ut,Qt){1&ut&&g._UZ(0,"div",10,11)}function bt(ut,Qt){1&ut&&g._UZ(0,"div",12,13)}function Tn(ut,Qt){}function Et(ut,Qt){1&ut&&g.YNc(0,Tn,0,0,"ng-template")}function un(ut,Qt){}function In(ut,Qt){1&ut&&g.YNc(0,un,0,0,"ng-template")}function Ot(ut,Qt){}function tn(ut,Qt){1&ut&&g.YNc(0,Ot,0,0,"ng-template")}function Ln(ut,Qt){}const dn=function(ut){return{$implicit:ut}};function xe(ut,Qt){if(1&ut&&(g.TgZ(0,"div",3),g.YNc(1,Ln,0,0,"ng-template",18),g.qZA()),2&ut){const Mt=g.oxw().$implicit,Xt=g.oxw(2);g.Q6J("ngClass",Xt.zoomContainerClass),g.xp6(1),g.Q6J("ngTemplateOutlet",Mt.template)("ngTemplateOutletContext",g.VKq(3,dn,Mt.slideData))}}function Ge(ut,Qt){}function St(ut,Qt){if(1&ut&&(g.ynx(0),g.YNc(1,Ge,0,0,"ng-template",18),g.BQk()),2&ut){const Mt=g.oxw().$implicit;g.xp6(1),g.Q6J("ngTemplateOutlet",Mt.template)("ngTemplateOutletContext",g.VKq(2,dn,Mt.slideData))}}function on(ut,Qt){if(1&ut&&(g.TgZ(0,"div",15),g.YNc(1,xe,2,5,"div",16),g.YNc(2,St,2,4,"ng-container",17),g.qZA()),2&ut){const Mt=Qt.$implicit,Xt=g.oxw().key,Hn=g.oxw();g.Akn(Hn.style),g.Q6J("ngClass",(Mt.class?Mt.class+" ":"")+Hn.slideClass+(""!==Xt?" "+Hn.slideDuplicateClass:""))("ngSwitch",Mt.zoom),g.uIk("data-swiper-slide-index",Mt.virtualIndex?Mt.virtualIndex:Mt.slideIndex)("data-swiper-autoplay",Mt.autoplayDelay),g.xp6(1),g.Q6J("ngSwitchCase",!0)}}function Ht(ut,Qt){1&ut&&(g.YNc(0,on,3,7,"div",14),g.ALo(1,"async")),2&ut&&g.Q6J("ngForOf",g.lcZ(1,1,Qt.loopSlides))}const Oe=[[["","slot","container-start"]],[["","slot","wrapper-start"]],[["","slot","wrapper-end"]],[["","slot","container-end"]]],Bt=function(ut){return{loopSlides:ut,key:"prepend"}},Re=function(ut){return{loopSlides:ut,key:""}},wt=function(ut){return{loopSlides:ut,key:"append"}},Je=["[slot=container-start]","[slot=wrapper-start]","[slot=wrapper-end]","[slot=container-end]"],Lt=["init","enabled","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","on"];function pt(ut){return"object"==typeof ut&&null!==ut&&ut.constructor&&"Object"===Object.prototype.toString.call(ut).slice(8,-1)}function Rt(ut){return void 0!==ut&&"boolean"!=typeof ut&&!0===ut.enabled}function Sn(ut,Qt,Mt){return!0===or(ut)&&Qt&&!Qt.el||!("boolean"!=typeof Qt&&Qt.el!==(null==Mt?void 0:Mt.nativeElement)&&("string"==typeof Qt.el||"object"==typeof Qt.el))}function sr(ut,Qt){const Mt=["__proto__","constructor","prototype"];Object.keys(Qt).filter(Xt=>Mt.indexOf(Xt)<0).forEach(Xt=>{void 0!==ut[Xt]?ut[Xt]&&!Qt[Xt]||(pt(Qt[Xt])&&pt(ut[Xt])&&Object.keys(Qt[Xt]).length>0?Qt[Xt].__swiper__?ut[Xt]=Qt[Xt]:sr(ut[Xt],Qt[Xt]):ut[Xt]=Qt[Xt]):ut[Xt]=Qt[Xt]})}function or(ut){return null!=ut&&"false"!=`${ut}`}const mn=["pagination","navigation","scrollbar","virtual"];function Tr(ut,Qt={}){return pt(ut)?ut:!0===or(ut)&&Qt}function Vt(ut={}){const Qt={on:{}},Mt={};sr(Qt,he.ZP.defaults),sr(Qt,he.ZP.extendedDefaults),Qt._emitClasses=!0,Qt.init=!1;const Xt={},Hn=Lt.map(ir=>ir.replace(/_/,""));return Object.keys(ut).forEach(ir=>{const ur=ir.replace(/^_/,"");Hn.indexOf(ur)>=0?pt(ut[ir])?(Qt[ur]={},Mt[ur]={},sr(Qt[ur],ut[ir]),sr(Mt[ur],ut[ir])):(Qt[ur]=ut[ir],Mt[ur]=ut[ir]):Xt[ur]=ut[ir]}),["navigation","pagination","scrollbar"].forEach(ir=>{!0===Qt[ir]&&(Qt[ir]={}),!1===Qt[ir]&&delete Qt[ir]}),{params:Qt,passedParams:Mt,rest:Xt}}Lt.map(ut=>ut.replace(/_/,""));let kt=(()=>{class ut{constructor(Mt){this.template=Mt,this.class="",this.autoplayDelay=null,this.slideData={isActive:!1,isPrev:!1,isNext:!1,isVisible:!1,isDuplicate:!1}}set ngClass(Mt){this.class=[this.class||"",Mt].join(" ")}set zoom(Mt){this._zoom=or(Mt)}get zoom(){return this._zoom}get classNames(){return this._classNames}set classNames(Mt){this._classNames!==Mt&&(this._classNames=Mt,this.slideData={isActive:this._hasClass(["swiper-slide-active","swiper-slide-duplicate-active"]),isVisible:this._hasClass(["swiper-slide-visible"]),isDuplicate:this._hasClass(["swiper-slide-duplicate"]),isPrev:this._hasClass(["swiper-slide-prev","swiper-slide-duplicate-prev"]),isNext:this._hasClass(["swiper-slide-next","swiper-slide-duplicate-next"])})}_hasClass(Mt){return Mt.some(Xt=>this._classNames.indexOf(Xt)>=0)}}return ut.\u0275fac=function(Mt){return new(Mt||ut)(g.Y36(g.Rgc))},ut.\u0275dir=g.lG2({type:ut,selectors:[["ng-template","swiperSlide",""]],inputs:{virtualIndex:"virtualIndex",class:"class",ngClass:"ngClass",autoplayDelay:["data-swiper-autoplay","autoplayDelay"],zoom:"zoom"}}),ut})(),it=(()=>{class ut{constructor(Mt,Xt,Hn,ir){this._ngZone=Mt,this.elementRef=Xt,this._changeDetectorRef=Hn,this._platformId=ir,this.slideClass="swiper-slide",this.wrapperClass="swiper-wrapper",this.showNavigation=!0,this.showPagination=!0,this.showScrollbar=!0,this.s__beforeBreakpoint=new g.vpe,this.s__containerClasses=new g.vpe,this.s__slideClass=new g.vpe,this.s__swiper=new g.vpe,this.s_activeIndexChange=new g.vpe,this.s_afterInit=new g.vpe,this.s_autoplay=new g.vpe,this.s_autoplayStart=new g.vpe,this.s_autoplayStop=new g.vpe,this.s_autoplayPause=new g.vpe,this.s_autoplayResume=new g.vpe,this.s_beforeDestroy=new g.vpe,this.s_beforeInit=new g.vpe,this.s_beforeLoopFix=new g.vpe,this.s_beforeResize=new g.vpe,this.s_beforeSlideChangeStart=new g.vpe,this.s_beforeTransitionStart=new g.vpe,this.s_breakpoint=new g.vpe,this.s_changeDirection=new g.vpe,this.s_click=new g.vpe,this.s_doubleTap=new g.vpe,this.s_doubleClick=new g.vpe,this.s_destroy=new g.vpe,this.s_fromEdge=new g.vpe,this.s_hashChange=new g.vpe,this.s_hashSet=new g.vpe,this.s_imagesReady=new g.vpe,this.s_init=new g.vpe,this.s_keyPress=new g.vpe,this.s_lazyImageLoad=new g.vpe,this.s_lazyImageReady=new g.vpe,this.s_loopFix=new g.vpe,this.s_momentumBounce=new g.vpe,this.s_navigationHide=new g.vpe,this.s_navigationShow=new g.vpe,this.s_navigationPrev=new g.vpe,this.s_navigationNext=new g.vpe,this.s_observerUpdate=new g.vpe,this.s_orientationchange=new g.vpe,this.s_paginationHide=new g.vpe,this.s_paginationRender=new g.vpe,this.s_paginationShow=new g.vpe,this.s_paginationUpdate=new g.vpe,this.s_progress=new g.vpe,this.s_reachBeginning=new g.vpe,this.s_reachEnd=new g.vpe,this.s_realIndexChange=new g.vpe,this.s_resize=new g.vpe,this.s_scroll=new g.vpe,this.s_scrollbarDragEnd=new g.vpe,this.s_scrollbarDragMove=new g.vpe,this.s_scrollbarDragStart=new g.vpe,this.s_setTransition=new g.vpe,this.s_setTranslate=new g.vpe,this.s_slideChange=new g.vpe,this.s_slideChangeTransitionEnd=new g.vpe,this.s_slideChangeTransitionStart=new g.vpe,this.s_slideNextTransitionEnd=new g.vpe,this.s_slideNextTransitionStart=new g.vpe,this.s_slidePrevTransitionEnd=new g.vpe,this.s_slidePrevTransitionStart=new g.vpe,this.s_slideResetTransitionStart=new g.vpe,this.s_slideResetTransitionEnd=new g.vpe,this.s_sliderMove=new g.vpe,this.s_sliderFirstMove=new g.vpe,this.s_slidesLengthChange=new g.vpe,this.s_slidesGridLengthChange=new g.vpe,this.s_snapGridLengthChange=new g.vpe,this.s_snapIndexChange=new g.vpe,this.s_tap=new g.vpe,this.s_toEdge=new g.vpe,this.s_touchEnd=new g.vpe,this.s_touchMove=new g.vpe,this.s_touchMoveOpposite=new g.vpe,this.s_touchStart=new g.vpe,this.s_transitionEnd=new g.vpe,this.s_transitionStart=new g.vpe,this.s_update=new g.vpe,this.s_zoomChange=new g.vpe,this.s_swiper=new g.vpe,this.s_lock=new g.vpe,this.s_unlock=new g.vpe,this._activeSlides=new ae.x,this.containerClasses="swiper",this.slidesChanges=ur=>{this.slides=ur.map((Yr,oi)=>(Yr.slideIndex=oi,Yr.classNames=this.slideClass||"",Yr)),this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.virtual?this.swiperRef&&this.swiperRef.virtual&&this._ngZone.runOutsideAngular(()=>{this.swiperRef.virtual.slides=this.slides,this.swiperRef.virtual.update(!0)}):this.loopedSlides&&(this.prependSlides=(0,je.of)(this.slides.slice(this.slides.length-this.loopedSlides)),this.appendSlides=(0,je.of)(this.slides.slice(0,this.loopedSlides))),this._changeDetectorRef.detectChanges()},this.style=null,this.updateVirtualSlides=ur=>{!this.swiperRef||this.currentVirtualData&&this.currentVirtualData.from===ur.from&&this.currentVirtualData.to===ur.to&&this.currentVirtualData.offset===ur.offset||(this.style=this.swiperRef.isHorizontal()?{[this.swiperRef.rtlTranslate?"right":"left"]:`${ur.offset}px`}:{top:`${ur.offset}px`},this.currentVirtualData=ur,this._activeSlides.next(ur.slides),this._ngZone.run(()=>{this._changeDetectorRef.detectChanges()}),this._ngZone.runOutsideAngular(()=>{this.swiperRef.updateSlides(),this.swiperRef.updateProgress(),this.swiperRef.updateSlidesClasses(),Rt(this.swiperRef.params.lazy)&&this.swiperRef.lazy.load(),this.swiperRef.virtual.update(!0)}))}}set navigation(Mt){var Xt,Hn,ir;const ur="boolean"!=typeof this._navigation&&""!==this._navigation?null===(Xt=this._navigation)||void 0===Xt?void 0:Xt.nextEl:null,Yr="boolean"!=typeof this._navigation&&""!==this._navigation?null===(Hn=this._navigation)||void 0===Hn?void 0:Hn.prevEl:null;this._navigation=Tr(Mt,{nextEl:ur||null,prevEl:Yr||null}),this.showNavigation=!(!0!==or(Mt)||this._navigation&&"boolean"!=typeof this._navigation&&this._navigation.prevEl!==(null===(ir=this._prevElRef)||void 0===ir?void 0:ir.nativeElement)&&(null!==this._navigation.prevEl||null!==this._navigation.nextEl)&&("string"==typeof this._navigation.nextEl||"string"==typeof this._navigation.prevEl||"object"==typeof this._navigation.nextEl||"object"==typeof this._navigation.prevEl))}get navigation(){return this._navigation}set pagination(Mt){var Xt;const Hn="boolean"!=typeof this._pagination&&""!==this._pagination?null===(Xt=this._pagination)||void 0===Xt?void 0:Xt.el:null;this._pagination=Tr(Mt,{el:Hn||null}),this.showPagination=Sn(Mt,this._pagination,this._paginationElRef)}get pagination(){return this._pagination}set scrollbar(Mt){var Xt;const Hn="boolean"!=typeof this._scrollbar&&""!==this._scrollbar?null===(Xt=this._scrollbar)||void 0===Xt?void 0:Xt.el:null;this._scrollbar=Tr(Mt,{el:Hn||null}),this.showScrollbar=Sn(Mt,this._scrollbar,this._scrollbarElRef)}get scrollbar(){return this._scrollbar}set virtual(Mt){this._virtual=Tr(Mt)}get virtual(){return this._virtual}set config(Mt){this.updateSwiper(Mt);const{params:Xt}=Vt(Mt);Object.assign(this,Xt)}set prevElRef(Mt){this._prevElRef=Mt,this._setElement(Mt,this.navigation,"navigation","prevEl")}set nextElRef(Mt){this._nextElRef=Mt,this._setElement(Mt,this.navigation,"navigation","nextEl")}set scrollbarElRef(Mt){this._scrollbarElRef=Mt,this._setElement(Mt,this.scrollbar,"scrollbar")}set paginationElRef(Mt){this._paginationElRef=Mt,this._setElement(Mt,this.pagination,"pagination")}get activeSlides(){return this.virtual?this._activeSlides:(0,je.of)(this.slides)}get zoomContainerClass(){return this.zoom&&"boolean"!=typeof this.zoom?this.zoom.containerClass:"swiper-zoom-container"}_setElement(Mt,Xt,Hn,ir="el"){if(!Xt||!Mt)return;if(Mt.nativeElement){if(Xt[ir]===Mt.nativeElement)return;Xt[ir]=Mt.nativeElement}const ur={};ur[Hn]=!0,this.updateInitSwiper(ur)}ngOnInit(){const{params:Mt}=Vt(this);Object.assign(this,Mt)}ngAfterViewInit(){this.childrenSlidesInit(),this.initSwiper(),this._changeDetectorRef.detectChanges(),setTimeout(()=>{this.s_swiper.emit(this.swiperRef)})}childrenSlidesInit(){this.slidesChanges(this.slidesEl),this.slidesEl.changes.subscribe(this.slidesChanges)}get isSwiperActive(){return this.swiperRef&&!this.swiperRef.destroyed}initSwiper(){const{params:Mt}=Vt(this);Object.assign(this,Mt),this._ngZone.runOutsideAngular(()=>{Mt.init=!1,Mt.virtual||(Mt.observer=!0),Mt.onAny=(oi,...er)=>{const Wr=this["s_"+oi];Wr&&Wr.emit([...er])},Object.assign(Mt.on,{_containerClasses:(oi,er)=>{setTimeout(()=>{this.containerClasses=er})},_slideClasses:(oi,er)=>{er.forEach(({slideEl:Wr,classNames:xr},Mr)=>{const is=Wr.getAttribute("data-swiper-slide-index"),Yi=is?parseInt(is):Mr;if(this.virtual){const cn=this.slides.find(nt=>nt.virtualIndex&&nt.virtualIndex===Yi);if(cn)return void(cn.classNames=xr)}this.slides[Yi]&&(this.slides[Yi].classNames=xr)}),this._changeDetectorRef.detectChanges()}});const ur=new he.ZP(Mt);ur.loopCreate=()=>{},ur.loopDestroy=()=>{},Mt.loop&&(ur.loopedSlides=this.loopedSlides);const Yr=Rt(ur.params.virtual);if(ur.virtual&&Yr){ur.virtual.slides=this.slides;const oi={cache:!1,slides:this.slides,renderExternal:this.updateVirtualSlides,renderExternalUpdate:!1};sr(ur.params.virtual,oi),sr(ur.originalParams.virtual,oi)}if((0,k.NF)(this._platformId)){this.swiperRef=ur.init(this.elementRef.nativeElement);const oi=Rt(this.swiperRef.params.virtual);this.swiperRef.virtual&&oi&&this.swiperRef.virtual.update(!0),this._changeDetectorRef.detectChanges()}})}ngOnChanges(Mt){this.updateSwiper(Mt),this._changeDetectorRef.detectChanges()}updateInitSwiper(Mt){!Mt||!this.swiperRef||this.swiperRef.destroyed||this._ngZone.runOutsideAngular(()=>{const{pagination:Hn,navigation:ir,scrollbar:ur,thumbs:oi}=this.swiperRef;Mt.pagination&&(this.pagination&&"boolean"!=typeof this.pagination&&this.pagination.el&&Hn&&!Hn.el?(this.updateParameter("pagination",this.pagination),Hn.init(),Hn.render(),Hn.update()):(Hn.destroy(),Hn.el=null)),Mt.scrollbar&&(this.scrollbar&&"boolean"!=typeof this.scrollbar&&this.scrollbar.el&&ur&&!ur.el?(this.updateParameter("scrollbar",this.scrollbar),ur.init(),ur.updateSize(),ur.setTranslate()):(ur.destroy(),ur.el=null)),Mt.navigation&&(this.navigation&&"boolean"!=typeof this.navigation&&this.navigation.prevEl&&this.navigation.nextEl&&ir&&!ir.prevEl&&!ir.nextEl?(this.updateParameter("navigation",this.navigation),ir.init(),ir.update()):ir.prevEl&&ir.nextEl&&(ir.destroy(),ir.nextEl=null,ir.prevEl=null)),Mt.thumbs&&this.thumbs&&this.thumbs.swiper&&(this.updateParameter("thumbs",this.thumbs),oi.init()&&oi.update(!0)),Mt.controller&&this.controller&&this.controller.control&&(this.swiperRef.controller.control=this.controller.control),this.swiperRef.update()})}updateSwiper(Mt){this._ngZone.runOutsideAngular(()=>{var Xt,Hn;if(!Mt.config&&Mt&&this.swiperRef&&!this.swiperRef.destroyed){for(const ir in Mt){if(mn.indexOf(ir)>=0)continue;const ur=null!==(Hn=null===(Xt=Mt[ir])||void 0===Xt?void 0:Xt.currentValue)&&void 0!==Hn?Hn:Mt[ir];this.updateParameter(ir,ur)}Mt.allowSlideNext&&(this.swiperRef.allowSlideNext=this.allowSlideNext),Mt.allowSlidePrev&&(this.swiperRef.allowSlidePrev=this.allowSlidePrev),Mt.direction&&this.swiperRef.changeDirection(this.direction,!1),Mt.breakpoints&&(this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.swiperRef.currentBreakpoint=null,this.swiperRef.setBreakpoint()),(Mt.thumbs||Mt.controller)&&this.updateInitSwiper(Mt),this.swiperRef.update()}})}calcLoopedSlides(){if(!this.loop)return!1;let Mt=this.slidesPerView;if(this.breakpoints){const Hn=he.ZP.prototype.getBreakpoint(this.breakpoints),ir=Hn in this.breakpoints?this.breakpoints[Hn]:void 0;ir&&ir.slidesPerView&&(Mt=ir.slidesPerView)}if("auto"===Mt)return this.loopedSlides=this.slides.length,this.slides.length;let Xt=this.loopedSlides||Mt;return!!Xt&&(this.loopAdditionalSlides&&(Xt+=this.loopAdditionalSlides),Xt>this.slides.length&&(Xt=this.slides.length),this.loopedSlides=Xt,!0)}updateParameter(Mt,Xt){if(!this.swiperRef||this.swiperRef.destroyed)return;const Hn=Mt.replace(/^_/,""),ir=pt(this.swiperRef.params[Hn]);"enabled"!==Hn?ir&&pt(Xt)?sr(this.swiperRef.params[Hn],Xt):this.swiperRef.params[Hn]=Xt:!0===Xt?this.swiperRef.enable():!1===Xt&&this.swiperRef.disable()}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{var Mt;null===(Mt=this.swiperRef)||void 0===Mt||Mt.destroy(!0,!1)})}}return ut.\u0275fac=function(Mt){return new(Mt||ut)(g.Y36(g.R0b),g.Y36(g.SBq),g.Y36(g.sBO),g.Y36(g.Lbi))},ut.\u0275cmp=g.Xpm({type:ut,selectors:[["swiper"],["","swiper",""]],contentQueries:function(Mt,Xt,Hn){if(1&Mt&&g.Suo(Hn,kt,4),2&Mt){let ir;g.iGM(ir=g.CRH())&&(Xt.slidesEl=ir)}},viewQuery:function(Mt,Xt){if(1&Mt&&(g.Gf(He,5),g.Gf(dt,5),g.Gf(qe,5),g.Gf(at,5)),2&Mt){let Hn;g.iGM(Hn=g.CRH())&&(Xt.prevElRef=Hn.first),g.iGM(Hn=g.CRH())&&(Xt.nextElRef=Hn.first),g.iGM(Hn=g.CRH())&&(Xt.scrollbarElRef=Hn.first),g.iGM(Hn=g.CRH())&&(Xt.paginationElRef=Hn.first)}},hostVars:2,hostBindings:function(Mt,Xt){2&Mt&&g.Tol(Xt.containerClasses)},inputs:{enabled:"enabled",on:"on",direction:"direction",touchEventsTarget:"touchEventsTarget",initialSlide:"initialSlide",speed:"speed",cssMode:"cssMode",updateOnWindowResize:"updateOnWindowResize",resizeObserver:"resizeObserver",nested:"nested",focusableElements:"focusableElements",width:"width",height:"height",preventInteractionOnTransition:"preventInteractionOnTransition",userAgent:"userAgent",url:"url",edgeSwipeDetection:"edgeSwipeDetection",edgeSwipeThreshold:"edgeSwipeThreshold",freeMode:"freeMode",autoHeight:"autoHeight",setWrapperSize:"setWrapperSize",virtualTranslate:"virtualTranslate",effect:"effect",breakpoints:"breakpoints",spaceBetween:"spaceBetween",slidesPerView:"slidesPerView",maxBackfaceHiddenSlides:"maxBackfaceHiddenSlides",grid:"grid",slidesPerGroup:"slidesPerGroup",slidesPerGroupSkip:"slidesPerGroupSkip",centeredSlides:"centeredSlides",centeredSlidesBounds:"centeredSlidesBounds",slidesOffsetBefore:"slidesOffsetBefore",slidesOffsetAfter:"slidesOffsetAfter",normalizeSlideIndex:"normalizeSlideIndex",centerInsufficientSlides:"centerInsufficientSlides",watchOverflow:"watchOverflow",roundLengths:"roundLengths",touchRatio:"touchRatio",touchAngle:"touchAngle",simulateTouch:"simulateTouch",shortSwipes:"shortSwipes",longSwipes:"longSwipes",longSwipesRatio:"longSwipesRatio",longSwipesMs:"longSwipesMs",followFinger:"followFinger",allowTouchMove:"allowTouchMove",threshold:"threshold",touchMoveStopPropagation:"touchMoveStopPropagation",touchStartPreventDefault:"touchStartPreventDefault",touchStartForcePreventDefault:"touchStartForcePreventDefault",touchReleaseOnEdges:"touchReleaseOnEdges",uniqueNavElements:"uniqueNavElements",resistance:"resistance",resistanceRatio:"resistanceRatio",watchSlidesProgress:"watchSlidesProgress",grabCursor:"grabCursor",preventClicks:"preventClicks",preventClicksPropagation:"preventClicksPropagation",slideToClickedSlide:"slideToClickedSlide",preloadImages:"preloadImages",updateOnImagesReady:"updateOnImagesReady",loop:"loop",loopAdditionalSlides:"loopAdditionalSlides",loopedSlides:"loopedSlides",loopedSlidesLimit:"loopedSlidesLimit",loopFillGroupWithBlank:"loopFillGroupWithBlank",loopPreventsSlide:"loopPreventsSlide",rewind:"rewind",allowSlidePrev:"allowSlidePrev",allowSlideNext:"allowSlideNext",swipeHandler:"swipeHandler",noSwiping:"noSwiping",noSwipingClass:"noSwipingClass",noSwipingSelector:"noSwipingSelector",passiveListeners:"passiveListeners",containerModifierClass:"containerModifierClass",slideClass:"slideClass",slideBlankClass:"slideBlankClass",slideActiveClass:"slideActiveClass",slideDuplicateActiveClass:"slideDuplicateActiveClass",slideVisibleClass:"slideVisibleClass",slideDuplicateClass:"slideDuplicateClass",slideNextClass:"slideNextClass",slideDuplicateNextClass:"slideDuplicateNextClass",slidePrevClass:"slidePrevClass",slideDuplicatePrevClass:"slideDuplicatePrevClass",wrapperClass:"wrapperClass",runCallbacksOnInit:"runCallbacksOnInit",observeParents:"observeParents",observeSlideChildren:"observeSlideChildren",a11y:"a11y",autoplay:"autoplay",controller:"controller",coverflowEffect:"coverflowEffect",cubeEffect:"cubeEffect",fadeEffect:"fadeEffect",flipEffect:"flipEffect",creativeEffect:"creativeEffect",cardsEffect:"cardsEffect",hashNavigation:"hashNavigation",history:"history",keyboard:"keyboard",lazy:"lazy",mousewheel:"mousewheel",parallax:"parallax",thumbs:"thumbs",zoom:"zoom",class:"class",id:"id",navigation:"navigation",pagination:"pagination",scrollbar:"scrollbar",virtual:"virtual",config:"config"},outputs:{s__beforeBreakpoint:"_beforeBreakpoint",s__containerClasses:"_containerClasses",s__slideClass:"_slideClass",s__swiper:"_swiper",s_activeIndexChange:"activeIndexChange",s_afterInit:"afterInit",s_autoplay:"autoplay",s_autoplayStart:"autoplayStart",s_autoplayStop:"autoplayStop",s_autoplayPause:"autoplayPause",s_autoplayResume:"autoplayResume",s_beforeDestroy:"beforeDestroy",s_beforeInit:"beforeInit",s_beforeLoopFix:"beforeLoopFix",s_beforeResize:"beforeResize",s_beforeSlideChangeStart:"beforeSlideChangeStart",s_beforeTransitionStart:"beforeTransitionStart",s_breakpoint:"breakpoint",s_changeDirection:"changeDirection",s_click:"click",s_doubleTap:"doubleTap",s_doubleClick:"doubleClick",s_destroy:"destroy",s_fromEdge:"fromEdge",s_hashChange:"hashChange",s_hashSet:"hashSet",s_imagesReady:"imagesReady",s_init:"init",s_keyPress:"keyPress",s_lazyImageLoad:"lazyImageLoad",s_lazyImageReady:"lazyImageReady",s_loopFix:"loopFix",s_momentumBounce:"momentumBounce",s_navigationHide:"navigationHide",s_navigationShow:"navigationShow",s_navigationPrev:"navigationPrev",s_navigationNext:"navigationNext",s_observerUpdate:"observerUpdate",s_orientationchange:"orientationchange",s_paginationHide:"paginationHide",s_paginationRender:"paginationRender",s_paginationShow:"paginationShow",s_paginationUpdate:"paginationUpdate",s_progress:"progress",s_reachBeginning:"reachBeginning",s_reachEnd:"reachEnd",s_realIndexChange:"realIndexChange",s_resize:"resize",s_scroll:"scroll",s_scrollbarDragEnd:"scrollbarDragEnd",s_scrollbarDragMove:"scrollbarDragMove",s_scrollbarDragStart:"scrollbarDragStart",s_setTransition:"setTransition",s_setTranslate:"setTranslate",s_slideChange:"slideChange",s_slideChangeTransitionEnd:"slideChangeTransitionEnd",s_slideChangeTransitionStart:"slideChangeTransitionStart",s_slideNextTransitionEnd:"slideNextTransitionEnd",s_slideNextTransitionStart:"slideNextTransitionStart",s_slidePrevTransitionEnd:"slidePrevTransitionEnd",s_slidePrevTransitionStart:"slidePrevTransitionStart",s_slideResetTransitionStart:"slideResetTransitionStart",s_slideResetTransitionEnd:"slideResetTransitionEnd",s_sliderMove:"sliderMove",s_sliderFirstMove:"sliderFirstMove",s_slidesLengthChange:"slidesLengthChange",s_slidesGridLengthChange:"slidesGridLengthChange",s_snapGridLengthChange:"snapGridLengthChange",s_snapIndexChange:"snapIndexChange",s_tap:"tap",s_toEdge:"toEdge",s_touchEnd:"touchEnd",s_touchMove:"touchMove",s_touchMoveOpposite:"touchMoveOpposite",s_touchStart:"touchStart",s_transitionEnd:"transitionEnd",s_transitionStart:"transitionStart",s_update:"update",s_zoomChange:"zoomChange",s_swiper:"swiper",s_lock:"lock",s_unlock:"unlock"},features:[g.TTD],ngContentSelectors:Je,decls:13,vars:17,consts:[[4,"ngIf"],["class","swiper-scrollbar",4,"ngIf"],["class","swiper-pagination",4,"ngIf"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["slidesTemplate",""],[1,"swiper-button-prev"],["prevElRef",""],[1,"swiper-button-next"],["nextElRef",""],[1,"swiper-scrollbar"],["scrollbarElRef",""],[1,"swiper-pagination"],["paginationElRef",""],[3,"ngClass","style","ngSwitch",4,"ngFor","ngForOf"],[3,"ngClass","ngSwitch"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(Mt,Xt){if(1&Mt&&(g.F$t(Oe),g.Hsn(0),g.YNc(1,Ne,5,0,"ng-container",0),g.YNc(2,Pe,2,0,"div",1),g.YNc(3,bt,2,0,"div",2),g.TgZ(4,"div",3),g.Hsn(5,1),g.YNc(6,Et,1,0,null,4),g.YNc(7,In,1,0,null,4),g.YNc(8,tn,1,0,null,4),g.Hsn(9,2),g.qZA(),g.Hsn(10,3),g.YNc(11,Ht,2,3,"ng-template",null,5,g.W1O)),2&Mt){const Hn=g.MAs(12);g.xp6(1),g.Q6J("ngIf",Xt.navigation&&Xt.showNavigation),g.xp6(1),g.Q6J("ngIf",Xt.scrollbar&&Xt.showScrollbar),g.xp6(1),g.Q6J("ngIf",Xt.pagination&&Xt.showPagination),g.xp6(1),g.Q6J("ngClass",Xt.wrapperClass),g.uIk("id",Xt.id),g.xp6(2),g.Q6J("ngTemplateOutlet",Hn)("ngTemplateOutletContext",g.VKq(11,Bt,Xt.prependSlides)),g.xp6(1),g.Q6J("ngTemplateOutlet",Hn)("ngTemplateOutletContext",g.VKq(13,Re,Xt.activeSlides)),g.xp6(1),g.Q6J("ngTemplateOutlet",Hn)("ngTemplateOutletContext",g.VKq(15,wt,Xt.appendSlides))}},directives:[k.O5,k.mk,k.tP,k.sg,k.RF,k.n9,k.ED],pipes:[k.Ov],styles:["swiper{display:block}\n"],encapsulation:2,changeDetection:0}),ut})(),At=(()=>{class ut{}return ut.\u0275fac=function(Mt){return new(Mt||ut)},ut.\u0275mod=g.oAB({type:ut}),ut.\u0275inj=g.cJS({imports:[[k.ez]]}),ut})()},8879:(Wn,Dt,j)=>{function g(l){return null!==l&&"object"==typeof l&&"constructor"in l&&l.constructor===Object}function k(l={},A={}){Object.keys(A).forEach(I=>{void 0===l[I]?l[I]=A[I]:g(A[I])&&g(l[I])&&Object.keys(A[I]).length>0&&k(l[I],A[I])})}j.d(Dt,{W_:()=>Q,tl:()=>V,ZP:()=>Kr});const he={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ae(){const l="undefined"!=typeof document?document:{};return k(l,he),l}const je={document:he,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:l=>"undefined"==typeof setTimeout?(l(),null):setTimeout(l,0),cancelAnimationFrame(l){"undefined"!=typeof setTimeout&&clearTimeout(l)}};function He(){const l="undefined"!=typeof window?window:{};return k(l,je),l}class qe extends Array{constructor(A){"number"==typeof A?super(A):(super(...A||[]),function dt(l){const A=l.__proto__;Object.defineProperty(l,"__proto__",{get:()=>A,set(I){A.__proto__=I}})}(this))}}function at(l=[]){const A=[];return l.forEach(I=>{Array.isArray(I)?A.push(...at(I)):A.push(I)}),A}function Ne(l,A){return Array.prototype.filter.call(l,A)}function Et(l,A){const I=He(),P=ae();let z=[];if(!A&&l instanceof qe)return l;if(!l)return new qe(z);if("string"==typeof l){const J=l.trim();if(J.indexOf("<")>=0&&J.indexOf(">")>=0){let ge="div";0===J.indexOf("<li")&&(ge="ul"),0===J.indexOf("<tr")&&(ge="tbody"),(0===J.indexOf("<td")||0===J.indexOf("<th"))&&(ge="tr"),0===J.indexOf("<tbody")&&(ge="table"),0===J.indexOf("<option")&&(ge="select");const be=P.createElement(ge);be.innerHTML=J;for(let oe=0;oe<be.childNodes.length;oe+=1)z.push(be.childNodes[oe])}else z=function Tn(l,A){if("string"!=typeof l)return[l];const I=[],P=A.querySelectorAll(l);for(let z=0;z<P.length;z+=1)I.push(P[z]);return I}(l.trim(),A||P)}else if(l.nodeType||l===I||l===P)z.push(l);else if(Array.isArray(l)){if(l instanceof qe)return l;z=l}return new qe(function Pe(l){const A=[];for(let I=0;I<l.length;I+=1)-1===A.indexOf(l[I])&&A.push(l[I]);return A}(z))}Et.fn=qe.prototype;const kn="resize scroll".split(" ");function zt(l){return function A(...I){if(void 0===I[0]){for(let P=0;P<this.length;P+=1)kn.indexOf(l)<0&&(l in this[P]?this[P][l]():Et(this[P]).trigger(l));return this}return this.on(l,...I)}}zt("click"),zt("blur"),zt("focus"),zt("focusin"),zt("focusout"),zt("keyup"),zt("keydown"),zt("keypress"),zt("submit"),zt("change"),zt("mousedown"),zt("mousemove"),zt("mouseup"),zt("mouseenter"),zt("mouseleave"),zt("mouseout"),zt("mouseover"),zt("touchstart"),zt("touchend"),zt("touchmove"),zt("resize"),zt("scroll");const wi={addClass:function un(...l){const A=at(l.map(I=>I.split(" ")));return this.forEach(I=>{I.classList.add(...A)}),this},removeClass:function In(...l){const A=at(l.map(I=>I.split(" ")));return this.forEach(I=>{I.classList.remove(...A)}),this},hasClass:function tn(...l){const A=at(l.map(I=>I.split(" ")));return Ne(this,I=>A.filter(P=>I.classList.contains(P)).length>0).length>0},toggleClass:function Ot(...l){const A=at(l.map(I=>I.split(" ")));this.forEach(I=>{A.forEach(P=>{I.classList.toggle(P)})})},attr:function Ln(l,A){if(1===arguments.length&&"string"==typeof l)return this[0]?this[0].getAttribute(l):void 0;for(let I=0;I<this.length;I+=1)if(2===arguments.length)this[I].setAttribute(l,A);else for(const P in l)this[I][P]=l[P],this[I].setAttribute(P,l[P]);return this},removeAttr:function dn(l){for(let A=0;A<this.length;A+=1)this[A].removeAttribute(l);return this},transform:function Bt(l){for(let A=0;A<this.length;A+=1)this[A].style.transform=l;return this},transition:function Re(l){for(let A=0;A<this.length;A+=1)this[A].style.transitionDuration="string"!=typeof l?`${l}ms`:l;return this},on:function wt(...l){let[A,I,P,z]=l;function J(me){const ce=me.target;if(!ce)return;const le=me.target.dom7EventData||[];if(le.indexOf(me)<0&&le.unshift(me),Et(ce).is(I))P.apply(ce,le);else{const Te=Et(ce).parents();for(let We=0;We<Te.length;We+=1)Et(Te[We]).is(I)&&P.apply(Te[We],le)}}function ge(me){const ce=me&&me.target&&me.target.dom7EventData||[];ce.indexOf(me)<0&&ce.unshift(me),P.apply(this,ce)}"function"==typeof l[1]&&([A,P,z]=l,I=void 0),z||(z=!1);const be=A.split(" ");let oe;for(let me=0;me<this.length;me+=1){const ce=this[me];if(I)for(oe=0;oe<be.length;oe+=1){const le=be[oe];ce.dom7LiveListeners||(ce.dom7LiveListeners={}),ce.dom7LiveListeners[le]||(ce.dom7LiveListeners[le]=[]),ce.dom7LiveListeners[le].push({listener:P,proxyListener:J}),ce.addEventListener(le,J,z)}else for(oe=0;oe<be.length;oe+=1){const le=be[oe];ce.dom7Listeners||(ce.dom7Listeners={}),ce.dom7Listeners[le]||(ce.dom7Listeners[le]=[]),ce.dom7Listeners[le].push({listener:P,proxyListener:ge}),ce.addEventListener(le,ge,z)}}return this},off:function Je(...l){let[A,I,P,z]=l;"function"==typeof l[1]&&([A,P,z]=l,I=void 0),z||(z=!1);const J=A.split(" ");for(let ge=0;ge<J.length;ge+=1){const be=J[ge];for(let oe=0;oe<this.length;oe+=1){const me=this[oe];let ce;if(!I&&me.dom7Listeners?ce=me.dom7Listeners[be]:I&&me.dom7LiveListeners&&(ce=me.dom7LiveListeners[be]),ce&&ce.length)for(let le=ce.length-1;le>=0;le-=1){const Te=ce[le];P&&Te.listener===P||P&&Te.listener&&Te.listener.dom7proxy&&Te.listener.dom7proxy===P?(me.removeEventListener(be,Te.proxyListener,z),ce.splice(le,1)):P||(me.removeEventListener(be,Te.proxyListener,z),ce.splice(le,1))}}}return this},trigger:function pt(...l){const A=He(),I=l[0].split(" "),P=l[1];for(let z=0;z<I.length;z+=1){const J=I[z];for(let ge=0;ge<this.length;ge+=1){const be=this[ge];if(A.CustomEvent){const oe=new A.CustomEvent(J,{detail:P,bubbles:!0,cancelable:!0});be.dom7EventData=l.filter((me,ce)=>ce>0),be.dispatchEvent(oe),be.dom7EventData=[],delete be.dom7EventData}}}return this},transitionEnd:function Rt(l){const A=this;return l&&A.on("transitionend",function I(P){P.target===this&&(l.call(this,P),A.off("transitionend",I))}),this},outerWidth:function or(l){if(this.length>0){if(l){const A=this.styles();return this[0].offsetWidth+parseFloat(A.getPropertyValue("margin-right"))+parseFloat(A.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function Tr(l){if(this.length>0){if(l){const A=this.styles();return this[0].offsetHeight+parseFloat(A.getPropertyValue("margin-top"))+parseFloat(A.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function it(){const l=He();return this[0]?l.getComputedStyle(this[0],null):{}},offset:function mr(){if(this.length>0){const l=He(),A=ae(),I=this[0],P=I.getBoundingClientRect(),z=A.body;return{top:P.top+(I===l?l.scrollY:I.scrollTop)-(I.clientTop||z.clientTop||0),left:P.left+(I===l?l.scrollX:I.scrollLeft)-(I.clientLeft||z.clientLeft||0)}}return null},css:function At(l,A){const I=He();let P;if(1===arguments.length){if("string"!=typeof l){for(P=0;P<this.length;P+=1)for(const z in l)this[P].style[z]=l[z];return this}if(this[0])return I.getComputedStyle(this[0],null).getPropertyValue(l)}if(2===arguments.length&&"string"==typeof l){for(P=0;P<this.length;P+=1)this[P].style[l]=A;return this}return this},each:function ut(l){return l?(this.forEach((A,I)=>{l.apply(A,[A,I])}),this):this},html:function Mt(l){if(void 0===l)return this[0]?this[0].innerHTML:null;for(let A=0;A<this.length;A+=1)this[A].innerHTML=l;return this},text:function Xt(l){if(void 0===l)return this[0]?this[0].textContent.trim():null;for(let A=0;A<this.length;A+=1)this[A].textContent=l;return this},is:function Hn(l){const A=He(),I=ae(),P=this[0];let z,J;if(!P||void 0===l)return!1;if("string"==typeof l){if(P.matches)return P.matches(l);if(P.webkitMatchesSelector)return P.webkitMatchesSelector(l);if(P.msMatchesSelector)return P.msMatchesSelector(l);for(z=Et(l),J=0;J<z.length;J+=1)if(z[J]===P)return!0;return!1}if(l===I)return P===I;if(l===A)return P===A;if(l.nodeType||l instanceof qe){for(z=l.nodeType?[l]:l,J=0;J<z.length;J+=1)if(z[J]===P)return!0;return!1}return!1},index:function ir(){let A,l=this[0];if(l){for(A=0;null!==(l=l.previousSibling);)1===l.nodeType&&(A+=1);return A}},eq:function ur(l){if(void 0===l)return this;const A=this.length;if(l>A-1)return Et([]);if(l<0){const I=A+l;return Et(I<0?[]:[this[I]])}return Et([this[l]])},append:function Yr(...l){let A;const I=ae();for(let P=0;P<l.length;P+=1){A=l[P];for(let z=0;z<this.length;z+=1)if("string"==typeof A){const J=I.createElement("div");for(J.innerHTML=A;J.firstChild;)this[z].appendChild(J.firstChild)}else if(A instanceof qe)for(let J=0;J<A.length;J+=1)this[z].appendChild(A[J]);else this[z].appendChild(A)}return this},prepend:function er(l){const A=ae();let I,P;for(I=0;I<this.length;I+=1)if("string"==typeof l){const z=A.createElement("div");for(z.innerHTML=l,P=z.childNodes.length-1;P>=0;P-=1)this[I].insertBefore(z.childNodes[P],this[I].childNodes[0])}else if(l instanceof qe)for(P=0;P<l.length;P+=1)this[I].insertBefore(l[P],this[I].childNodes[0]);else this[I].insertBefore(l,this[I].childNodes[0]);return this},next:function is(l){return this.length>0?l?this[0].nextElementSibling&&Et(this[0].nextElementSibling).is(l)?Et([this[0].nextElementSibling]):Et([]):Et(this[0].nextElementSibling?[this[0].nextElementSibling]:[]):Et([])},nextAll:function Yi(l){const A=[];let I=this[0];if(!I)return Et([]);for(;I.nextElementSibling;){const P=I.nextElementSibling;l?Et(P).is(l)&&A.push(P):A.push(P),I=P}return Et(A)},prev:function cn(l){if(this.length>0){const A=this[0];return l?A.previousElementSibling&&Et(A.previousElementSibling).is(l)?Et([A.previousElementSibling]):Et([]):Et(A.previousElementSibling?[A.previousElementSibling]:[])}return Et([])},prevAll:function nt(l){const A=[];let I=this[0];if(!I)return Et([]);for(;I.previousElementSibling;){const P=I.previousElementSibling;l?Et(P).is(l)&&A.push(P):A.push(P),I=P}return Et(A)},parent:function Gt(l){const A=[];for(let I=0;I<this.length;I+=1)null!==this[I].parentNode&&(l?Et(this[I].parentNode).is(l)&&A.push(this[I].parentNode):A.push(this[I].parentNode));return Et(A)},parents:function nn(l){const A=[];for(let I=0;I<this.length;I+=1){let P=this[I].parentNode;for(;P;)l?Et(P).is(l)&&A.push(P):A.push(P),P=P.parentNode}return Et(A)},closest:function En(l){let A=this;return void 0===l?Et([]):(A.is(l)||(A=A.parents(l).eq(0)),A)},find:function qn(l){const A=[];for(let I=0;I<this.length;I+=1){const P=this[I].querySelectorAll(l);for(let z=0;z<P.length;z+=1)A.push(P[z])}return Et(A)},children:function Jr(l){const A=[];for(let I=0;I<this.length;I+=1){const P=this[I].children;for(let z=0;z<P.length;z+=1)(!l||Et(P[z]).is(l))&&A.push(P[z])}return Et(A)},filter:function Qt(l){return Et(Ne(this,l))},remove:function Hr(){for(let l=0;l<this.length;l+=1)this[l].parentNode&&this[l].parentNode.removeChild(this[l]);return this}};Object.keys(wi).forEach(l=>{Object.defineProperty(Et.fn,l,{value:wi[l],writable:!0})});const Cn=Et;function li(l,A=0){return setTimeout(l,A)}function Pi(){return Date.now()}function Ji(l){return"object"==typeof l&&null!==l&&l.constructor&&"Object"===Object.prototype.toString.call(l).slice(8,-1)}function ji(l){return"undefined"!=typeof window&&void 0!==window.HTMLElement?l instanceof HTMLElement:l&&(1===l.nodeType||11===l.nodeType)}function Ii(...l){const A=Object(l[0]),I=["__proto__","constructor","prototype"];for(let P=1;P<l.length;P+=1){const z=l[P];if(null!=z&&!ji(z)){const J=Object.keys(Object(z)).filter(ge=>I.indexOf(ge)<0);for(let ge=0,be=J.length;ge<be;ge+=1){const oe=J[ge],me=Object.getOwnPropertyDescriptor(z,oe);void 0!==me&&me.enumerable&&(Ji(A[oe])&&Ji(z[oe])?z[oe].__swiper__?A[oe]=z[oe]:Ii(A[oe],z[oe]):!Ji(A[oe])&&Ji(z[oe])?(A[oe]={},z[oe].__swiper__?A[oe]=z[oe]:Ii(A[oe],z[oe])):A[oe]=z[oe])}}}return A}function Hi(l,A,I){l.style.setProperty(A,I)}function qr({swiper:l,targetPosition:A,side:I}){const P=He(),z=-l.translate;let ge,J=null;const be=l.params.speed;l.wrapperEl.style.scrollSnapType="none",P.cancelAnimationFrame(l.cssModeFrameID);const oe=A>z?"next":"prev",me=(le,Te)=>"next"===oe&&le>=Te||"prev"===oe&&le<=Te,ce=()=>{ge=(new Date).getTime(),null===J&&(J=ge);const le=Math.max(Math.min((ge-J)/be,1),0),Te=.5-Math.cos(le*Math.PI)/2;let We=z+Te*(A-z);if(me(We,A)&&(We=A),l.wrapperEl.scrollTo({[I]:We}),me(We,A))return l.wrapperEl.style.overflow="hidden",l.wrapperEl.style.scrollSnapType="",setTimeout(()=>{l.wrapperEl.style.overflow="",l.wrapperEl.scrollTo({[I]:We})}),void P.cancelAnimationFrame(l.cssModeFrameID);l.cssModeFrameID=P.requestAnimationFrame(ce)};ce()}let es,Qr,Ki;function Cs(){return es||(es=function ls(){const l=He(),A=ae();return{smoothScroll:A.documentElement&&"scrollBehavior"in A.documentElement.style,touch:!!("ontouchstart"in l||l.DocumentTouch&&A instanceof l.DocumentTouch),passiveListener:function(){let P=!1;try{const z=Object.defineProperty({},"passive",{get(){P=!0}});l.addEventListener("testPassiveListener",null,z)}catch(z){}return P}(),gestures:"ongesturestart"in l}}()),es}function zi({swiper:l,runCallbacks:A,direction:I,step:P}){const{activeIndex:z,previousIndex:J}=l;let ge=I;if(ge||(ge=z>J?"next":z<J?"prev":"reset"),l.emit(`transition${P}`),A&&z!==J){if("reset"===ge)return void l.emit(`slideResetTransition${P}`);l.emit(`slideChangeTransition${P}`),l.emit("next"===ge?`slideNextTransition${P}`:`slidePrevTransition${P}`)}}function xs(l){const A=this,I=ae(),P=He(),z=A.touchEventsData,{params:J,touches:ge,enabled:be}=A;if(!be||A.animating&&J.preventInteractionOnTransition)return;!A.animating&&J.cssMode&&J.loop&&A.loopFix();let oe=l;oe.originalEvent&&(oe=oe.originalEvent);let me=Cn(oe.target);if("wrapper"===J.touchEventsTarget&&!me.closest(A.wrapperEl).length||(z.isTouchEvent="touchstart"===oe.type,!z.isTouchEvent&&"which"in oe&&3===oe.which)||!z.isTouchEvent&&"button"in oe&&oe.button>0||z.isTouched&&z.isMoved)return;const ce=!!J.noSwipingClass&&""!==J.noSwipingClass,le=l.composedPath?l.composedPath():l.path;ce&&oe.target&&oe.target.shadowRoot&&le&&(me=Cn(le[0]));const Te=J.noSwipingSelector?J.noSwipingSelector:`.${J.noSwipingClass}`;if(J.noSwiping&&(oe.target&&oe.target.shadowRoot?function Bs(l,A=this){return function I(P){if(!P||P===ae()||P===He())return null;P.assignedSlot&&(P=P.assignedSlot);const z=P.closest(l);return z||P.getRootNode?z||I(P.getRootNode().host):null}(A)}(Te,me[0]):me.closest(Te)[0]))return void(A.allowClick=!0);if(J.swipeHandler&&!me.closest(J.swipeHandler)[0])return;ge.currentX="touchstart"===oe.type?oe.targetTouches[0].pageX:oe.pageX,ge.currentY="touchstart"===oe.type?oe.targetTouches[0].pageY:oe.pageY;const tt=ge.currentX,De=ge.currentY,ke=J.edgeSwipeDetection||J.iOSEdgeSwipeDetection,_t=J.edgeSwipeThreshold||J.iOSEdgeSwipeThreshold;if(ke&&(tt<=_t||tt>=P.innerWidth-_t)){if("prevent"!==ke)return;l.preventDefault()}if(Object.assign(z,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),ge.startX=tt,ge.startY=De,z.touchStartTime=Pi(),A.allowClick=!0,A.updateSize(),A.swipeDirection=void 0,J.threshold>0&&(z.allowThresholdMove=!1),"touchstart"!==oe.type){let et=!0;me.is(z.focusableElements)&&(et=!1,"SELECT"===me[0].nodeName&&(z.isTouched=!1)),I.activeElement&&Cn(I.activeElement).is(z.focusableElements)&&I.activeElement!==me[0]&&I.activeElement.blur();const yt=et&&A.allowTouchMove&&J.touchStartPreventDefault;(J.touchStartForcePreventDefault||yt)&&!me[0].isContentEditable&&oe.preventDefault()}A.params.freeMode&&A.params.freeMode.enabled&&A.freeMode&&A.animating&&!J.cssMode&&A.freeMode.onTouchStart(),A.emit("touchStart",oe)}function Qo(l){const A=ae(),I=this,P=I.touchEventsData,{params:z,touches:J,rtlTranslate:ge,enabled:be}=I;if(!be)return;let oe=l;if(oe.originalEvent&&(oe=oe.originalEvent),!P.isTouched)return void(P.startMoving&&P.isScrolling&&I.emit("touchMoveOpposite",oe));if(P.isTouchEvent&&"touchmove"!==oe.type)return;const me="touchmove"===oe.type&&oe.targetTouches&&(oe.targetTouches[0]||oe.changedTouches[0]),ce="touchmove"===oe.type?me.pageX:oe.pageX,le="touchmove"===oe.type?me.pageY:oe.pageY;if(oe.preventedByNestedSwiper)return J.startX=ce,void(J.startY=le);if(!I.allowTouchMove)return Cn(oe.target).is(P.focusableElements)||(I.allowClick=!1),void(P.isTouched&&(Object.assign(J,{startX:ce,startY:le,currentX:ce,currentY:le}),P.touchStartTime=Pi()));if(P.isTouchEvent&&z.touchReleaseOnEdges&&!z.loop)if(I.isVertical()){if(le<J.startY&&I.translate<=I.maxTranslate()||le>J.startY&&I.translate>=I.minTranslate())return P.isTouched=!1,void(P.isMoved=!1)}else if(ce<J.startX&&I.translate<=I.maxTranslate()||ce>J.startX&&I.translate>=I.minTranslate())return;if(P.isTouchEvent&&A.activeElement&&oe.target===A.activeElement&&Cn(oe.target).is(P.focusableElements))return P.isMoved=!0,void(I.allowClick=!1);if(P.allowTouchCallbacks&&I.emit("touchMove",oe),oe.targetTouches&&oe.targetTouches.length>1)return;J.currentX=ce,J.currentY=le;const Te=J.currentX-J.startX,We=J.currentY-J.startY;if(I.params.threshold&&Math.sqrt(Te**2+We**2)<I.params.threshold)return;if(void 0===P.isScrolling){let _t;I.isHorizontal()&&J.currentY===J.startY||I.isVertical()&&J.currentX===J.startX?P.isScrolling=!1:Te*Te+We*We>=25&&(_t=180*Math.atan2(Math.abs(We),Math.abs(Te))/Math.PI,P.isScrolling=I.isHorizontal()?_t>z.touchAngle:90-_t>z.touchAngle)}if(P.isScrolling&&I.emit("touchMoveOpposite",oe),void 0===P.startMoving&&(J.currentX!==J.startX||J.currentY!==J.startY)&&(P.startMoving=!0),P.isScrolling)return void(P.isTouched=!1);if(!P.startMoving)return;I.allowClick=!1,!z.cssMode&&oe.cancelable&&oe.preventDefault(),z.touchMoveStopPropagation&&!z.nested&&oe.stopPropagation(),P.isMoved||(z.loop&&!z.cssMode&&I.loopFix(),P.startTranslate=I.getTranslate(),I.setTransition(0),I.animating&&I.$wrapperEl.trigger("webkitTransitionEnd transitionend"),P.allowMomentumBounce=!1,z.grabCursor&&(!0===I.allowSlideNext||!0===I.allowSlidePrev)&&I.setGrabCursor(!0),I.emit("sliderFirstMove",oe)),I.emit("sliderMove",oe),P.isMoved=!0;let tt=I.isHorizontal()?Te:We;J.diff=tt,tt*=z.touchRatio,ge&&(tt=-tt),I.swipeDirection=tt>0?"prev":"next",P.currentTranslate=tt+P.startTranslate;let De=!0,ke=z.resistanceRatio;if(z.touchReleaseOnEdges&&(ke=0),tt>0&&P.currentTranslate>I.minTranslate()?(De=!1,z.resistance&&(P.currentTranslate=I.minTranslate()-1+(-I.minTranslate()+P.startTranslate+tt)**ke)):tt<0&&P.currentTranslate<I.maxTranslate()&&(De=!1,z.resistance&&(P.currentTranslate=I.maxTranslate()+1-(I.maxTranslate()-P.startTranslate-tt)**ke)),De&&(oe.preventedByNestedSwiper=!0),!I.allowSlideNext&&"next"===I.swipeDirection&&P.currentTranslate<P.startTranslate&&(P.currentTranslate=P.startTranslate),!I.allowSlidePrev&&"prev"===I.swipeDirection&&P.currentTranslate>P.startTranslate&&(P.currentTranslate=P.startTranslate),!I.allowSlidePrev&&!I.allowSlideNext&&(P.currentTranslate=P.startTranslate),z.threshold>0){if(!(Math.abs(tt)>z.threshold||P.allowThresholdMove))return void(P.currentTranslate=P.startTranslate);if(!P.allowThresholdMove)return P.allowThresholdMove=!0,J.startX=J.currentX,J.startY=J.currentY,P.currentTranslate=P.startTranslate,void(J.diff=I.isHorizontal()?J.currentX-J.startX:J.currentY-J.startY)}!z.followFinger||z.cssMode||((z.freeMode&&z.freeMode.enabled&&I.freeMode||z.watchSlidesProgress)&&(I.updateActiveIndex(),I.updateSlidesClasses()),I.params.freeMode&&z.freeMode.enabled&&I.freeMode&&I.freeMode.onTouchMove(),I.updateProgress(P.currentTranslate),I.setTranslate(P.currentTranslate))}function us(l){const A=this,I=A.touchEventsData,{params:P,touches:z,rtlTranslate:J,slidesGrid:ge,enabled:be}=A;if(!be)return;let oe=l;if(oe.originalEvent&&(oe=oe.originalEvent),I.allowTouchCallbacks&&A.emit("touchEnd",oe),I.allowTouchCallbacks=!1,!I.isTouched)return I.isMoved&&P.grabCursor&&A.setGrabCursor(!1),I.isMoved=!1,void(I.startMoving=!1);P.grabCursor&&I.isMoved&&I.isTouched&&(!0===A.allowSlideNext||!0===A.allowSlidePrev)&&A.setGrabCursor(!1);const me=Pi(),ce=me-I.touchStartTime;if(A.allowClick){const et=oe.path||oe.composedPath&&oe.composedPath();A.updateClickedSlide(et&&et[0]||oe.target),A.emit("tap click",oe),ce<300&&me-I.lastClickTime<300&&A.emit("doubleTap doubleClick",oe)}if(I.lastClickTime=Pi(),li(()=>{A.destroyed||(A.allowClick=!0)}),!I.isTouched||!I.isMoved||!A.swipeDirection||0===z.diff||I.currentTranslate===I.startTranslate)return I.isTouched=!1,I.isMoved=!1,void(I.startMoving=!1);let le;if(I.isTouched=!1,I.isMoved=!1,I.startMoving=!1,le=P.followFinger?J?A.translate:-A.translate:-I.currentTranslate,P.cssMode)return;if(A.params.freeMode&&P.freeMode.enabled)return void A.freeMode.onTouchEnd({currentPos:le});let Te=0,We=A.slidesSizesGrid[0];for(let et=0;et<ge.length;et+=et<P.slidesPerGroupSkip?1:P.slidesPerGroup){const yt=et<P.slidesPerGroupSkip-1?1:P.slidesPerGroup;void 0!==ge[et+yt]?le>=ge[et]&&le<ge[et+yt]&&(Te=et,We=ge[et+yt]-ge[et]):le>=ge[et]&&(Te=et,We=ge[ge.length-1]-ge[ge.length-2])}let tt=null,De=null;P.rewind&&(A.isBeginning?De=A.params.virtual&&A.params.virtual.enabled&&A.virtual?A.virtual.slides.length-1:A.slides.length-1:A.isEnd&&(tt=0));const ke=(le-ge[Te])/We,_t=Te<P.slidesPerGroupSkip-1?1:P.slidesPerGroup;if(ce>P.longSwipesMs){if(!P.longSwipes)return void A.slideTo(A.activeIndex);"next"===A.swipeDirection&&A.slideTo(ke>=P.longSwipesRatio?P.rewind&&A.isEnd?tt:Te+_t:Te),"prev"===A.swipeDirection&&(ke>1-P.longSwipesRatio?A.slideTo(Te+_t):null!==De&&ke<0&&Math.abs(ke)>P.longSwipesRatio?A.slideTo(De):A.slideTo(Te))}else{if(!P.shortSwipes)return void A.slideTo(A.activeIndex);!A.navigation||oe.target!==A.navigation.nextEl&&oe.target!==A.navigation.prevEl?("next"===A.swipeDirection&&A.slideTo(null!==tt?tt:Te+_t),"prev"===A.swipeDirection&&A.slideTo(null!==De?De:Te)):A.slideTo(oe.target===A.navigation.nextEl?Te+_t:Te)}}function so(){const l=this,{params:A,el:I}=l;if(I&&0===I.offsetWidth)return;A.breakpoints&&l.setBreakpoint();const{allowSlideNext:P,allowSlidePrev:z,snapGrid:J}=l;l.allowSlideNext=!0,l.allowSlidePrev=!0,l.updateSize(),l.updateSlides(),l.updateSlidesClasses(),l.slideTo(("auto"===A.slidesPerView||A.slidesPerView>1)&&l.isEnd&&!l.isBeginning&&!l.params.centeredSlides?l.slides.length-1:l.activeIndex,0,!1,!0),l.autoplay&&l.autoplay.running&&l.autoplay.paused&&l.autoplay.run(),l.allowSlidePrev=z,l.allowSlideNext=P,l.params.watchOverflow&&J!==l.snapGrid&&l.checkOverflow()}function Ms(l){const A=this;!A.enabled||A.allowClick||(A.params.preventClicks&&l.preventDefault(),A.params.preventClicksPropagation&&A.animating&&(l.stopPropagation(),l.stopImmediatePropagation()))}function Li(){const l=this,{wrapperEl:A,rtlTranslate:I,enabled:P}=l;if(!P)return;let z;l.previousTranslate=l.translate,l.translate=l.isHorizontal()?-A.scrollLeft:-A.scrollTop,0===l.translate&&(l.translate=0),l.updateActiveIndex(),l.updateSlidesClasses();const J=l.maxTranslate()-l.minTranslate();z=0===J?0:(l.translate-l.minTranslate())/J,z!==l.progress&&l.updateProgress(I?-l.translate:l.translate),l.emit("setTranslate",l.translate,!1)}let Xs=!1;function fo(){}const Zs=(l,A)=>{const I=ae(),{params:P,touchEvents:z,el:J,wrapperEl:ge,device:be,support:oe}=l,me=!!P.nested,ce="on"===A?"addEventListener":"removeEventListener",le=A;if(oe.touch){const Te=!("touchstart"!==z.start||!oe.passiveListener||!P.passiveListeners)&&{passive:!0,capture:!1};J[ce](z.start,l.onTouchStart,Te),J[ce](z.move,l.onTouchMove,oe.passiveListener?{passive:!1,capture:me}:me),J[ce](z.end,l.onTouchEnd,Te),z.cancel&&J[ce](z.cancel,l.onTouchEnd,Te)}else J[ce](z.start,l.onTouchStart,!1),I[ce](z.move,l.onTouchMove,me),I[ce](z.end,l.onTouchEnd,!1);(P.preventClicks||P.preventClicksPropagation)&&J[ce]("click",l.onClick,!0),P.cssMode&&ge[ce]("scroll",l.onScroll),l[le](P.updateOnWindowResize?be.ios||be.android?"resize orientationchange observerUpdate":"resize observerUpdate":"observerUpdate",so,!0)},Ti=(l,A)=>l.grid&&A.grid&&A.grid.rows>1,Zi={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Ni(l,A){return function(P={}){const z=Object.keys(P)[0],J=P[z];"object"==typeof J&&null!==J?(["navigation","pagination","scrollbar"].indexOf(z)>=0&&!0===l[z]&&(l[z]={auto:!0}),z in l&&"enabled"in J?(!0===l[z]&&(l[z]={enabled:!0}),"object"==typeof l[z]&&!("enabled"in l[z])&&(l[z].enabled=!0),l[z]||(l[z]={enabled:!1}),Ii(A,P)):Ii(A,P)):Ii(A,P)}}const Si={eventsEmitter:{on(l,A,I){const P=this;if(!P.eventsListeners||P.destroyed||"function"!=typeof A)return P;const z=I?"unshift":"push";return l.split(" ").forEach(J=>{P.eventsListeners[J]||(P.eventsListeners[J]=[]),P.eventsListeners[J][z](A)}),P},once(l,A,I){const P=this;if(!P.eventsListeners||P.destroyed||"function"!=typeof A)return P;function z(...J){P.off(l,z),z.__emitterProxy&&delete z.__emitterProxy,A.apply(P,J)}return z.__emitterProxy=A,P.on(l,z,I)},onAny(l,A){const I=this;if(!I.eventsListeners||I.destroyed||"function"!=typeof l)return I;const P=A?"unshift":"push";return I.eventsAnyListeners.indexOf(l)<0&&I.eventsAnyListeners[P](l),I},offAny(l){const A=this;if(!A.eventsListeners||A.destroyed||!A.eventsAnyListeners)return A;const I=A.eventsAnyListeners.indexOf(l);return I>=0&&A.eventsAnyListeners.splice(I,1),A},off(l,A){const I=this;return!I.eventsListeners||I.destroyed||!I.eventsListeners||l.split(" ").forEach(P=>{void 0===A?I.eventsListeners[P]=[]:I.eventsListeners[P]&&I.eventsListeners[P].forEach((z,J)=>{(z===A||z.__emitterProxy&&z.__emitterProxy===A)&&I.eventsListeners[P].splice(J,1)})}),I},emit(...l){const A=this;if(!A.eventsListeners||A.destroyed||!A.eventsListeners)return A;let I,P,z;return"string"==typeof l[0]||Array.isArray(l[0])?(I=l[0],P=l.slice(1,l.length),z=A):(I=l[0].events,P=l[0].data,z=l[0].context||A),P.unshift(z),(Array.isArray(I)?I:I.split(" ")).forEach(ge=>{A.eventsAnyListeners&&A.eventsAnyListeners.length&&A.eventsAnyListeners.forEach(be=>{be.apply(z,[ge,...P])}),A.eventsListeners&&A.eventsListeners[ge]&&A.eventsListeners[ge].forEach(be=>{be.apply(z,P)})}),A}},update:{updateSize:function ui(){const l=this;let A,I;const P=l.$el;A=null!=l.params.width?l.params.width:P[0].clientWidth,I=null!=l.params.height?l.params.height:P[0].clientHeight,!(0===A&&l.isHorizontal()||0===I&&l.isVertical())&&(A=A-parseInt(P.css("padding-left")||0,10)-parseInt(P.css("padding-right")||0,10),I=I-parseInt(P.css("padding-top")||0,10)-parseInt(P.css("padding-bottom")||0,10),Number.isNaN(A)&&(A=0),Number.isNaN(I)&&(I=0),Object.assign(l,{width:A,height:I,size:l.isHorizontal()?A:I}))},updateSlides:function Ir(){const l=this;function A(Fn){return l.isHorizontal()?Fn:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Fn]}function I(Fn,Jt){return parseFloat(Fn.getPropertyValue(A(Jt))||0)}const P=l.params,{$wrapperEl:z,size:J,rtlTranslate:ge,wrongRTL:be}=l,oe=l.virtual&&P.virtual.enabled,me=oe?l.virtual.slides.length:l.slides.length,ce=z.children(`.${l.params.slideClass}`),le=oe?l.virtual.slides.length:ce.length;let Te=[];const We=[],tt=[];let De=P.slidesOffsetBefore;"function"==typeof De&&(De=P.slidesOffsetBefore.call(l));let ke=P.slidesOffsetAfter;"function"==typeof ke&&(ke=P.slidesOffsetAfter.call(l));const _t=l.snapGrid.length,et=l.slidesGrid.length;let yt=P.spaceBetween,vn=-De,Dn=0,gn=0;if(void 0===J)return;"string"==typeof yt&&yt.indexOf("%")>=0&&(yt=parseFloat(yt.replace("%",""))/100*J),l.virtualSize=-yt,ce.css(ge?{marginLeft:"",marginBottom:"",marginTop:""}:{marginRight:"",marginBottom:"",marginTop:""}),P.centeredSlides&&P.cssMode&&(Hi(l.wrapperEl,"--swiper-centered-offset-before",""),Hi(l.wrapperEl,"--swiper-centered-offset-after",""));const Mn=P.grid&&P.grid.rows>1&&l.grid;let nr;Mn&&l.grid.initSlides(le);const _r="auto"===P.slidesPerView&&P.breakpoints&&Object.keys(P.breakpoints).filter(Fn=>void 0!==P.breakpoints[Fn].slidesPerView).length>0;for(let Fn=0;Fn<le;Fn+=1){nr=0;const Jt=ce.eq(Fn);if(Mn&&l.grid.updateSlide(Fn,Jt,le,A),"none"!==Jt.css("display")){if("auto"===P.slidesPerView){_r&&(ce[Fn].style[A("width")]="");const Pt=getComputedStyle(Jt[0]),hn=Jt[0].style.transform,lr=Jt[0].style.webkitTransform;if(hn&&(Jt[0].style.transform="none"),lr&&(Jt[0].style.webkitTransform="none"),P.roundLengths)nr=l.isHorizontal()?Jt.outerWidth(!0):Jt.outerHeight(!0);else{const ar=I(Pt,"width"),Wt=I(Pt,"padding-left"),cr=I(Pt,"padding-right"),tr=I(Pt,"margin-left"),_i=I(Pt,"margin-right"),Di=Pt.getPropertyValue("box-sizing");if(Di&&"border-box"===Di)nr=ar+tr+_i;else{const{clientWidth:Ys,offsetWidth:Xo}=Jt[0];nr=ar+Wt+cr+tr+_i+(Xo-Ys)}}hn&&(Jt[0].style.transform=hn),lr&&(Jt[0].style.webkitTransform=lr),P.roundLengths&&(nr=Math.floor(nr))}else nr=(J-(P.slidesPerView-1)*yt)/P.slidesPerView,P.roundLengths&&(nr=Math.floor(nr)),ce[Fn]&&(ce[Fn].style[A("width")]=`${nr}px`);ce[Fn]&&(ce[Fn].swiperSlideSize=nr),tt.push(nr),P.centeredSlides?(vn=vn+nr/2+Dn/2+yt,0===Dn&&0!==Fn&&(vn=vn-J/2-yt),0===Fn&&(vn=vn-J/2-yt),Math.abs(vn)<.001&&(vn=0),P.roundLengths&&(vn=Math.floor(vn)),gn%P.slidesPerGroup==0&&Te.push(vn),We.push(vn)):(P.roundLengths&&(vn=Math.floor(vn)),(gn-Math.min(l.params.slidesPerGroupSkip,gn))%l.params.slidesPerGroup==0&&Te.push(vn),We.push(vn),vn=vn+nr+yt),l.virtualSize+=nr+yt,Dn=nr,gn+=1}}if(l.virtualSize=Math.max(l.virtualSize,J)+ke,ge&&be&&("slide"===P.effect||"coverflow"===P.effect)&&z.css({width:`${l.virtualSize+P.spaceBetween}px`}),P.setWrapperSize&&z.css({[A("width")]:`${l.virtualSize+P.spaceBetween}px`}),Mn&&l.grid.updateWrapperSize(nr,Te,A),!P.centeredSlides){const Fn=[];for(let Jt=0;Jt<Te.length;Jt+=1){let Pt=Te[Jt];P.roundLengths&&(Pt=Math.floor(Pt)),Te[Jt]<=l.virtualSize-J&&Fn.push(Pt)}Te=Fn,Math.floor(l.virtualSize-J)-Math.floor(Te[Te.length-1])>1&&Te.push(l.virtualSize-J)}if(0===Te.length&&(Te=[0]),0!==P.spaceBetween){const Fn=l.isHorizontal()&&ge?"marginLeft":A("marginRight");ce.filter((Jt,Pt)=>!P.cssMode||Pt!==ce.length-1).css({[Fn]:`${yt}px`})}if(P.centeredSlides&&P.centeredSlidesBounds){let Fn=0;tt.forEach(Pt=>{Fn+=Pt+(P.spaceBetween?P.spaceBetween:0)}),Fn-=P.spaceBetween;const Jt=Fn-J;Te=Te.map(Pt=>Pt<0?-De:Pt>Jt?Jt+ke:Pt)}if(P.centerInsufficientSlides){let Fn=0;if(tt.forEach(Jt=>{Fn+=Jt+(P.spaceBetween?P.spaceBetween:0)}),Fn-=P.spaceBetween,Fn<J){const Jt=(J-Fn)/2;Te.forEach((Pt,hn)=>{Te[hn]=Pt-Jt}),We.forEach((Pt,hn)=>{We[hn]=Pt+Jt})}}if(Object.assign(l,{slides:ce,snapGrid:Te,slidesGrid:We,slidesSizesGrid:tt}),P.centeredSlides&&P.cssMode&&!P.centeredSlidesBounds){Hi(l.wrapperEl,"--swiper-centered-offset-before",-Te[0]+"px"),Hi(l.wrapperEl,"--swiper-centered-offset-after",l.size/2-tt[tt.length-1]/2+"px");const Fn=-l.snapGrid[0],Jt=-l.slidesGrid[0];l.snapGrid=l.snapGrid.map(Pt=>Pt+Fn),l.slidesGrid=l.slidesGrid.map(Pt=>Pt+Jt)}if(le!==me&&l.emit("slidesLengthChange"),Te.length!==_t&&(l.params.watchOverflow&&l.checkOverflow(),l.emit("snapGridLengthChange")),We.length!==et&&l.emit("slidesGridLengthChange"),P.watchSlidesProgress&&l.updateSlidesOffset(),!(oe||P.cssMode||"slide"!==P.effect&&"fade"!==P.effect)){const Fn=`${P.containerModifierClass}backface-hidden`,Jt=l.$el.hasClass(Fn);le<=P.maxBackfaceHiddenSlides?Jt||l.$el.addClass(Fn):Jt&&l.$el.removeClass(Fn)}},updateAutoHeight:function gs(l){const A=this,I=[],P=A.virtual&&A.params.virtual.enabled;let J,z=0;"number"==typeof l?A.setTransition(l):!0===l&&A.setTransition(A.params.speed);const ge=be=>P?A.slides.filter(oe=>parseInt(oe.getAttribute("data-swiper-slide-index"),10)===be)[0]:A.slides.eq(be)[0];if("auto"!==A.params.slidesPerView&&A.params.slidesPerView>1)if(A.params.centeredSlides)(A.visibleSlides||Cn([])).each(be=>{I.push(be)});else for(J=0;J<Math.ceil(A.params.slidesPerView);J+=1){const be=A.activeIndex+J;if(be>A.slides.length&&!P)break;I.push(ge(be))}else I.push(ge(A.activeIndex));for(J=0;J<I.length;J+=1)if(void 0!==I[J]){const be=I[J].offsetHeight;z=be>z?be:z}(z||0===z)&&A.$wrapperEl.css("height",`${z}px`)},updateSlidesOffset:function ms(){const l=this,A=l.slides;for(let I=0;I<A.length;I+=1)A[I].swiperSlideOffset=l.isHorizontal()?A[I].offsetLeft:A[I].offsetTop},updateSlidesProgress:function bs(l=this&&this.translate||0){const A=this,I=A.params,{slides:P,rtlTranslate:z,snapGrid:J}=A;if(0===P.length)return;void 0===P[0].swiperSlideOffset&&A.updateSlidesOffset();let ge=-l;z&&(ge=l),P.removeClass(I.slideVisibleClass),A.visibleSlidesIndexes=[],A.visibleSlides=[];for(let be=0;be<P.length;be+=1){const oe=P[be];let me=oe.swiperSlideOffset;I.cssMode&&I.centeredSlides&&(me-=P[0].swiperSlideOffset);const ce=(ge+(I.centeredSlides?A.minTranslate():0)-me)/(oe.swiperSlideSize+I.spaceBetween),le=(ge-J[0]+(I.centeredSlides?A.minTranslate():0)-me)/(oe.swiperSlideSize+I.spaceBetween),Te=-(ge-me),We=Te+A.slidesSizesGrid[be];(Te>=0&&Te<A.size-1||We>1&&We<=A.size||Te<=0&&We>=A.size)&&(A.visibleSlides.push(oe),A.visibleSlidesIndexes.push(be),P.eq(be).addClass(I.slideVisibleClass)),oe.progress=z?-ce:ce,oe.originalProgress=z?-le:le}A.visibleSlides=Cn(A.visibleSlides)},updateProgress:function Bi(l){const A=this;if(void 0===l){const me=A.rtlTranslate?-1:1;l=A&&A.translate&&A.translate*me||0}const I=A.params,P=A.maxTranslate()-A.minTranslate();let{progress:z,isBeginning:J,isEnd:ge}=A;const be=J,oe=ge;0===P?(z=0,J=!0,ge=!0):(z=(l-A.minTranslate())/P,J=z<=0,ge=z>=1),Object.assign(A,{progress:z,isBeginning:J,isEnd:ge}),(I.watchSlidesProgress||I.centeredSlides&&I.autoHeight)&&A.updateSlidesProgress(l),J&&!be&&A.emit("reachBeginning toEdge"),ge&&!oe&&A.emit("reachEnd toEdge"),(be&&!J||oe&&!ge)&&A.emit("fromEdge"),A.emit("progress",z)},updateSlidesClasses:function $o(){const l=this,{slides:A,params:I,$wrapperEl:P,activeIndex:z,realIndex:J}=l,ge=l.virtual&&I.virtual.enabled;let be;A.removeClass(`${I.slideActiveClass} ${I.slideNextClass} ${I.slidePrevClass} ${I.slideDuplicateActiveClass} ${I.slideDuplicateNextClass} ${I.slideDuplicatePrevClass}`),be=ge?l.$wrapperEl.find(`.${I.slideClass}[data-swiper-slide-index="${z}"]`):A.eq(z),be.addClass(I.slideActiveClass),I.loop&&(be.hasClass(I.slideDuplicateClass)?P.children(`.${I.slideClass}:not(.${I.slideDuplicateClass})[data-swiper-slide-index="${J}"]`).addClass(I.slideDuplicateActiveClass):P.children(`.${I.slideClass}.${I.slideDuplicateClass}[data-swiper-slide-index="${J}"]`).addClass(I.slideDuplicateActiveClass));let oe=be.nextAll(`.${I.slideClass}`).eq(0).addClass(I.slideNextClass);I.loop&&0===oe.length&&(oe=A.eq(0),oe.addClass(I.slideNextClass));let me=be.prevAll(`.${I.slideClass}`).eq(0).addClass(I.slidePrevClass);I.loop&&0===me.length&&(me=A.eq(-1),me.addClass(I.slidePrevClass)),I.loop&&(oe.hasClass(I.slideDuplicateClass)?P.children(`.${I.slideClass}:not(.${I.slideDuplicateClass})[data-swiper-slide-index="${oe.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicateNextClass):P.children(`.${I.slideClass}.${I.slideDuplicateClass}[data-swiper-slide-index="${oe.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicateNextClass),me.hasClass(I.slideDuplicateClass)?P.children(`.${I.slideClass}:not(.${I.slideDuplicateClass})[data-swiper-slide-index="${me.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicatePrevClass):P.children(`.${I.slideClass}.${I.slideDuplicateClass}[data-swiper-slide-index="${me.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicatePrevClass)),l.emitSlidesClasses()},updateActiveIndex:function co(l){const A=this,I=A.rtlTranslate?A.translate:-A.translate,{slidesGrid:P,snapGrid:z,params:J,activeIndex:ge,realIndex:be,snapIndex:oe}=A;let ce,me=l;if(void 0===me){for(let Te=0;Te<P.length;Te+=1)void 0!==P[Te+1]?I>=P[Te]&&I<P[Te+1]-(P[Te+1]-P[Te])/2?me=Te:I>=P[Te]&&I<P[Te+1]&&(me=Te+1):I>=P[Te]&&(me=Te);J.normalizeSlideIndex&&(me<0||void 0===me)&&(me=0)}if(z.indexOf(I)>=0)ce=z.indexOf(I);else{const Te=Math.min(J.slidesPerGroupSkip,me);ce=Te+Math.floor((me-Te)/J.slidesPerGroup)}if(ce>=z.length&&(ce=z.length-1),me===ge)return void(ce!==oe&&(A.snapIndex=ce,A.emit("snapIndexChange")));const le=parseInt(A.slides.eq(me).attr("data-swiper-slide-index")||me,10);Object.assign(A,{snapIndex:ce,realIndex:le,previousIndex:ge,activeIndex:me}),A.emit("activeIndexChange"),A.emit("snapIndexChange"),be!==le&&A.emit("realIndexChange"),(A.initialized||A.params.runCallbacksOnInit)&&A.emit("slideChange")},updateClickedSlide:function Ns(l){const A=this,I=A.params,P=Cn(l).closest(`.${I.slideClass}`)[0];let J,z=!1;if(P)for(let ge=0;ge<A.slides.length;ge+=1)if(A.slides[ge]===P){z=!0,J=ge;break}if(!P||!z)return A.clickedSlide=void 0,void(A.clickedIndex=void 0);A.clickedSlide=P,A.clickedIndex=A.virtual&&A.params.virtual.enabled?parseInt(Cn(P).attr("data-swiper-slide-index"),10):J,I.slideToClickedSlide&&void 0!==A.clickedIndex&&A.clickedIndex!==A.activeIndex&&A.slideToClickedSlide()}},translate:{getTranslate:function Ct(l=(this.isHorizontal()?"x":"y")){const{params:I,rtlTranslate:P,translate:z,$wrapperEl:J}=this;if(I.virtualTranslate)return P?-z:z;if(I.cssMode)return z;let ge=function Xi(l,A="x"){const I=He();let P,z,J;const ge=function hs(l){const A=He();let I;return A.getComputedStyle&&(I=A.getComputedStyle(l,null)),!I&&l.currentStyle&&(I=l.currentStyle),I||(I=l.style),I}(l);return I.WebKitCSSMatrix?(z=ge.transform||ge.webkitTransform,z.split(",").length>6&&(z=z.split(", ").map(be=>be.replace(",",".")).join(", ")),J=new I.WebKitCSSMatrix("none"===z?"":z)):(J=ge.MozTransform||ge.OTransform||ge.MsTransform||ge.msTransform||ge.transform||ge.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),P=J.toString().split(",")),"x"===A&&(z=I.WebKitCSSMatrix?J.m41:16===P.length?parseFloat(P[12]):parseFloat(P[4])),"y"===A&&(z=I.WebKitCSSMatrix?J.m42:16===P.length?parseFloat(P[13]):parseFloat(P[5])),z||0}(J[0],l);return P&&(ge=-ge),ge||0},setTranslate:function ht(l,A){const I=this,{rtlTranslate:P,params:z,$wrapperEl:J,wrapperEl:ge,progress:be}=I;let le,oe=0,me=0;I.isHorizontal()?oe=P?-l:l:me=l,z.roundLengths&&(oe=Math.floor(oe),me=Math.floor(me)),z.cssMode?ge[I.isHorizontal()?"scrollLeft":"scrollTop"]=I.isHorizontal()?-oe:-me:z.virtualTranslate||J.transform(`translate3d(${oe}px, ${me}px, 0px)`),I.previousTranslate=I.translate,I.translate=I.isHorizontal()?oe:me;const Te=I.maxTranslate()-I.minTranslate();le=0===Te?0:(l-I.minTranslate())/Te,le!==be&&I.updateProgress(l),I.emit("setTranslate",I.translate,A)},minTranslate:function xt(){return-this.snapGrid[0]},maxTranslate:function _n(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function $n(l=0,A=this.params.speed,I=!0,P=!0,z){const J=this,{params:ge,wrapperEl:be}=J;if(J.animating&&ge.preventInteractionOnTransition)return!1;const oe=J.minTranslate(),me=J.maxTranslate();let ce;if(ce=P&&l>oe?oe:P&&l<me?me:l,J.updateProgress(ce),ge.cssMode){const le=J.isHorizontal();if(0===A)be[le?"scrollLeft":"scrollTop"]=-ce;else{if(!J.support.smoothScroll)return qr({swiper:J,targetPosition:-ce,side:le?"left":"top"}),!0;be.scrollTo({[le?"left":"top"]:-ce,behavior:"smooth"})}return!0}return 0===A?(J.setTransition(0),J.setTranslate(ce),I&&(J.emit("beforeTransitionStart",A,z),J.emit("transitionEnd"))):(J.setTransition(A),J.setTranslate(ce),I&&(J.emit("beforeTransitionStart",A,z),J.emit("transitionStart")),J.animating||(J.animating=!0,J.onTranslateToWrapperTransitionEnd||(J.onTranslateToWrapperTransitionEnd=function(Te){!J||J.destroyed||Te.target===this&&(J.$wrapperEl[0].removeEventListener("transitionend",J.onTranslateToWrapperTransitionEnd),J.$wrapperEl[0].removeEventListener("webkitTransitionEnd",J.onTranslateToWrapperTransitionEnd),J.onTranslateToWrapperTransitionEnd=null,delete J.onTranslateToWrapperTransitionEnd,I&&J.emit("transitionEnd"))}),J.$wrapperEl[0].addEventListener("transitionend",J.onTranslateToWrapperTransitionEnd),J.$wrapperEl[0].addEventListener("webkitTransitionEnd",J.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function ei(l,A){const I=this;I.params.cssMode||I.$wrapperEl.transition(l),I.emit("setTransition",l,A)},transitionStart:function Mi(l=!0,A){const I=this,{params:P}=I;P.cssMode||(P.autoHeight&&I.updateAutoHeight(),zi({swiper:I,runCallbacks:l,direction:A,step:"Start"}))},transitionEnd:function ys(l=!0,A){const I=this,{params:P}=I;I.animating=!1,!P.cssMode&&(I.setTransition(0),zi({swiper:I,runCallbacks:l,direction:A,step:"End"}))}},slide:{slideTo:function _s(l=0,A=this.params.speed,I=!0,P,z){if("number"!=typeof l&&"string"!=typeof l)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof l}] given.`);if("string"==typeof l){const yt=parseInt(l,10);if(!isFinite(yt))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${l}] given.`);l=yt}const J=this;let ge=l;ge<0&&(ge=0);const{params:be,snapGrid:oe,slidesGrid:me,previousIndex:ce,activeIndex:le,rtlTranslate:Te,wrapperEl:We,enabled:tt}=J;if(J.animating&&be.preventInteractionOnTransition||!tt&&!P&&!z)return!1;const De=Math.min(J.params.slidesPerGroupSkip,ge);let ke=De+Math.floor((ge-De)/J.params.slidesPerGroup);ke>=oe.length&&(ke=oe.length-1);const _t=-oe[ke];if(be.normalizeSlideIndex)for(let yt=0;yt<me.length;yt+=1){const vn=-Math.floor(100*_t),Dn=Math.floor(100*me[yt]),gn=Math.floor(100*me[yt+1]);void 0!==me[yt+1]?vn>=Dn&&vn<gn-(gn-Dn)/2?ge=yt:vn>=Dn&&vn<gn&&(ge=yt+1):vn>=Dn&&(ge=yt)}if(J.initialized&&ge!==le&&(!J.allowSlideNext&&_t<J.translate&&_t<J.minTranslate()||!J.allowSlidePrev&&_t>J.translate&&_t>J.maxTranslate()&&(le||0)!==ge))return!1;let et;if(ge!==(ce||0)&&I&&J.emit("beforeSlideChangeStart"),J.updateProgress(_t),et=ge>le?"next":ge<le?"prev":"reset",Te&&-_t===J.translate||!Te&&_t===J.translate)return J.updateActiveIndex(ge),be.autoHeight&&J.updateAutoHeight(),J.updateSlidesClasses(),"slide"!==be.effect&&J.setTranslate(_t),"reset"!==et&&(J.transitionStart(I,et),J.transitionEnd(I,et)),!1;if(be.cssMode){const yt=J.isHorizontal(),vn=Te?_t:-_t;if(0===A){const Dn=J.virtual&&J.params.virtual.enabled;Dn&&(J.wrapperEl.style.scrollSnapType="none",J._immediateVirtual=!0),We[yt?"scrollLeft":"scrollTop"]=vn,Dn&&requestAnimationFrame(()=>{J.wrapperEl.style.scrollSnapType="",J._swiperImmediateVirtual=!1})}else{if(!J.support.smoothScroll)return qr({swiper:J,targetPosition:vn,side:yt?"left":"top"}),!0;We.scrollTo({[yt?"left":"top"]:vn,behavior:"smooth"})}return!0}return J.setTransition(A),J.setTranslate(_t),J.updateActiveIndex(ge),J.updateSlidesClasses(),J.emit("beforeTransitionStart",A,P),J.transitionStart(I,et),0===A?J.transitionEnd(I,et):J.animating||(J.animating=!0,J.onSlideToWrapperTransitionEnd||(J.onSlideToWrapperTransitionEnd=function(vn){!J||J.destroyed||vn.target===this&&(J.$wrapperEl[0].removeEventListener("transitionend",J.onSlideToWrapperTransitionEnd),J.$wrapperEl[0].removeEventListener("webkitTransitionEnd",J.onSlideToWrapperTransitionEnd),J.onSlideToWrapperTransitionEnd=null,delete J.onSlideToWrapperTransitionEnd,J.transitionEnd(I,et))}),J.$wrapperEl[0].addEventListener("transitionend",J.onSlideToWrapperTransitionEnd),J.$wrapperEl[0].addEventListener("webkitTransitionEnd",J.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function As(l=0,A=this.params.speed,I=!0,P){if("string"==typeof l){const ge=parseInt(l,10);if(!isFinite(ge))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${l}] given.`);l=ge}const z=this;let J=l;return z.params.loop&&(J+=z.loopedSlides),z.slideTo(J,A,I,P)},slideNext:function Yo(l=this.params.speed,A=!0,I){const P=this,{animating:z,enabled:J,params:ge}=P;if(!J)return P;let be=ge.slidesPerGroup;"auto"===ge.slidesPerView&&1===ge.slidesPerGroup&&ge.slidesPerGroupAuto&&(be=Math.max(P.slidesPerViewDynamic("current",!0),1));const oe=P.activeIndex<ge.slidesPerGroupSkip?1:be;if(ge.loop){if(z&&ge.loopPreventsSlide)return!1;P.loopFix(),P._clientLeft=P.$wrapperEl[0].clientLeft}return P.slideTo(ge.rewind&&P.isEnd?0:P.activeIndex+oe,l,A,I)},slidePrev:function Ts(l=this.params.speed,A=!0,I){const P=this,{params:z,animating:J,snapGrid:ge,slidesGrid:be,rtlTranslate:oe,enabled:me}=P;if(!me)return P;if(z.loop){if(J&&z.loopPreventsSlide)return!1;P.loopFix(),P._clientLeft=P.$wrapperEl[0].clientLeft}function le(ke){return ke<0?-Math.floor(Math.abs(ke)):Math.floor(ke)}const Te=le(oe?P.translate:-P.translate),We=ge.map(ke=>le(ke));let tt=ge[We.indexOf(Te)-1];if(void 0===tt&&z.cssMode){let ke;ge.forEach((_t,et)=>{Te>=_t&&(ke=et)}),void 0!==ke&&(tt=ge[ke>0?ke-1:ke])}let De=0;return void 0!==tt&&(De=be.indexOf(tt),De<0&&(De=P.activeIndex-1),"auto"===z.slidesPerView&&1===z.slidesPerGroup&&z.slidesPerGroupAuto&&(De=De-P.slidesPerViewDynamic("previous",!0)+1,De=Math.max(De,0))),P.slideTo(z.rewind&&P.isBeginning?P.params.virtual&&P.params.virtual.enabled&&P.virtual?P.virtual.slides.length-1:P.slides.length-1:De,l,A,I)},slideReset:function mo(l=this.params.speed,A=!0,I){return this.slideTo(this.activeIndex,l,A,I)},slideToClosest:function ps(l=this.params.speed,A=!0,I,P=.5){const z=this;let J=z.activeIndex;const ge=Math.min(z.params.slidesPerGroupSkip,J),be=ge+Math.floor((J-ge)/z.params.slidesPerGroup),oe=z.rtlTranslate?z.translate:-z.translate;if(oe>=z.snapGrid[be]){const me=z.snapGrid[be];oe-me>(z.snapGrid[be+1]-me)*P&&(J+=z.params.slidesPerGroup)}else{const me=z.snapGrid[be-1];oe-me<=(z.snapGrid[be]-me)*P&&(J-=z.params.slidesPerGroup)}return J=Math.max(J,0),J=Math.min(J,z.slidesGrid.length-1),z.slideTo(J,l,A,I)},slideToClickedSlide:function Lo(){const l=this,{params:A,$wrapperEl:I}=l,P="auto"===A.slidesPerView?l.slidesPerViewDynamic():A.slidesPerView;let J,z=l.clickedIndex;if(A.loop){if(l.animating)return;J=parseInt(Cn(l.clickedSlide).attr("data-swiper-slide-index"),10),A.centeredSlides?z<l.loopedSlides-P/2||z>l.slides.length-l.loopedSlides+P/2?(l.loopFix(),z=I.children(`.${A.slideClass}[data-swiper-slide-index="${J}"]:not(.${A.slideDuplicateClass})`).eq(0).index(),li(()=>{l.slideTo(z)})):l.slideTo(z):z>l.slides.length-P?(l.loopFix(),z=I.children(`.${A.slideClass}[data-swiper-slide-index="${J}"]:not(.${A.slideDuplicateClass})`).eq(0).index(),li(()=>{l.slideTo(z)})):l.slideTo(z)}else l.slideTo(z)}},loop:{loopCreate:function ho(){const l=this,A=ae(),{params:I,$wrapperEl:P}=l,z=P.children().length>0?Cn(P.children()[0].parentNode):P;z.children(`.${I.slideClass}.${I.slideDuplicateClass}`).remove();let J=z.children(`.${I.slideClass}`);if(I.loopFillGroupWithBlank){const oe=I.slidesPerGroup-J.length%I.slidesPerGroup;if(oe!==I.slidesPerGroup){for(let me=0;me<oe;me+=1){const ce=Cn(A.createElement("div")).addClass(`${I.slideClass} ${I.slideBlankClass}`);z.append(ce)}J=z.children(`.${I.slideClass}`)}}"auto"===I.slidesPerView&&!I.loopedSlides&&(I.loopedSlides=J.length),l.loopedSlides=Math.ceil(parseFloat(I.loopedSlides||I.slidesPerView,10)),l.loopedSlides+=I.loopAdditionalSlides,l.loopedSlides>J.length&&l.params.loopedSlidesLimit&&(l.loopedSlides=J.length);const ge=[],be=[];J.each((oe,me)=>{Cn(oe).attr("data-swiper-slide-index",me)});for(let oe=0;oe<l.loopedSlides;oe+=1){const me=oe-Math.floor(oe/J.length)*J.length;be.push(J.eq(me)[0]),ge.unshift(J.eq(J.length-me-1)[0])}for(let oe=0;oe<be.length;oe+=1)z.append(Cn(be[oe].cloneNode(!0)).addClass(I.slideDuplicateClass));for(let oe=ge.length-1;oe>=0;oe-=1)z.prepend(Cn(ge[oe].cloneNode(!0)).addClass(I.slideDuplicateClass))},loopFix:function Us(){const l=this;l.emit("beforeLoopFix");const{activeIndex:A,slides:I,loopedSlides:P,allowSlidePrev:z,allowSlideNext:J,snapGrid:ge,rtlTranslate:be}=l;let oe;l.allowSlidePrev=!0,l.allowSlideNext=!0;const ce=-ge[A]-l.getTranslate();A<P?(oe=I.length-3*P+A,oe+=P,l.slideTo(oe,0,!1,!0)&&0!==ce&&l.setTranslate((be?-l.translate:l.translate)-ce)):A>=I.length-P&&(oe=-I.length+A+P,oe+=P,l.slideTo(oe,0,!1,!0)&&0!==ce&&l.setTranslate((be?-l.translate:l.translate)-ce)),l.allowSlidePrev=z,l.allowSlideNext=J,l.emit("loopFix")},loopDestroy:function Gs(){const{$wrapperEl:A,params:I,slides:P}=this;A.children(`.${I.slideClass}.${I.slideDuplicateClass},.${I.slideClass}.${I.slideBlankClass}`).remove(),P.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function Vo(l){const A=this;if(A.support.touch||!A.params.simulateTouch||A.params.watchOverflow&&A.isLocked||A.params.cssMode)return;const I="container"===A.params.touchEventsTarget?A.el:A.wrapperEl;I.style.cursor="move",I.style.cursor=l?"grabbing":"grab"},unsetGrabCursor:function Qs(){const l=this;l.support.touch||l.params.watchOverflow&&l.isLocked||l.params.cssMode||(l["container"===l.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:{attachEvents:function Rs(){const l=this,A=ae(),{params:I,support:P}=l;l.onTouchStart=xs.bind(l),l.onTouchMove=Qo.bind(l),l.onTouchEnd=us.bind(l),I.cssMode&&(l.onScroll=Li.bind(l)),l.onClick=Ms.bind(l),P.touch&&!Xs&&(A.addEventListener("touchstart",fo),Xs=!0),Zs(l,"on")},detachEvents:function qs(){Zs(this,"off")}},breakpoints:{setBreakpoint:function B(){const l=this,{activeIndex:A,initialized:I,loopedSlides:P=0,params:z,$el:J}=l,ge=z.breakpoints;if(!ge||ge&&0===Object.keys(ge).length)return;const be=l.getBreakpoint(ge,l.params.breakpointsBase,l.el);if(!be||l.currentBreakpoint===be)return;const me=(be in ge?ge[be]:void 0)||l.originalParams,ce=Ti(l,z),le=Ti(l,me),Te=z.enabled;ce&&!le?(J.removeClass(`${z.containerModifierClass}grid ${z.containerModifierClass}grid-column`),l.emitContainerClasses()):!ce&&le&&(J.addClass(`${z.containerModifierClass}grid`),(me.grid.fill&&"column"===me.grid.fill||!me.grid.fill&&"column"===z.grid.fill)&&J.addClass(`${z.containerModifierClass}grid-column`),l.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(ke=>{const _t=z[ke]&&z[ke].enabled,et=me[ke]&&me[ke].enabled;_t&&!et&&l[ke].disable(),!_t&&et&&l[ke].enable()});const We=me.direction&&me.direction!==z.direction,tt=z.loop&&(me.slidesPerView!==z.slidesPerView||We);We&&I&&l.changeDirection(),Ii(l.params,me);const De=l.params.enabled;Object.assign(l,{allowTouchMove:l.params.allowTouchMove,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev}),Te&&!De?l.disable():!Te&&De&&l.enable(),l.currentBreakpoint=be,l.emit("_beforeBreakpoint",me),tt&&I&&(l.loopDestroy(),l.loopCreate(),l.updateSlides(),l.slideTo(A-P+l.loopedSlides,0,!1)),l.emit("breakpoint",me)},getBreakpoint:function fe(l,A="window",I){if(!l||"container"===A&&!I)return;let P=!1;const z=He(),J="window"===A?z.innerHeight:I.clientHeight,ge=Object.keys(l).map(be=>{if("string"==typeof be&&0===be.indexOf("@")){const oe=parseFloat(be.substr(1));return{value:J*oe,point:be}}return{value:be,point:be}});ge.sort((be,oe)=>parseInt(be.value,10)-parseInt(oe.value,10));for(let be=0;be<ge.length;be+=1){const{point:oe,value:me}=ge[be];"window"===A?z.matchMedia(`(min-width: ${me}px)`).matches&&(P=oe):me<=I.clientWidth&&(P=oe)}return P||"max"}},checkOverflow:{checkOverflow:function ni(){const l=this,{isLocked:A,params:I}=l,{slidesOffsetBefore:P}=I;if(P){const z=l.slides.length-1;l.isLocked=l.size>l.slidesGrid[z]+l.slidesSizesGrid[z]+2*P}else l.isLocked=1===l.snapGrid.length;!0===I.allowSlideNext&&(l.allowSlideNext=!l.isLocked),!0===I.allowSlidePrev&&(l.allowSlidePrev=!l.isLocked),A&&A!==l.isLocked&&(l.isEnd=!1),A!==l.isLocked&&l.emit(l.isLocked?"lock":"unlock")}},classes:{addClasses:function Ke(){const l=this,{classNames:A,params:I,rtl:P,$el:z,device:J,support:ge}=l,be=function ve(l,A){const I=[];return l.forEach(P=>{"object"==typeof P?Object.keys(P).forEach(z=>{P[z]&&I.push(A+z)}):"string"==typeof P&&I.push(A+P)}),I}(["initialized",I.direction,{"pointer-events":!ge.touch},{"free-mode":l.params.freeMode&&I.freeMode.enabled},{autoheight:I.autoHeight},{rtl:P},{grid:I.grid&&I.grid.rows>1},{"grid-column":I.grid&&I.grid.rows>1&&"column"===I.grid.fill},{android:J.android},{ios:J.ios},{"css-mode":I.cssMode},{centered:I.cssMode&&I.centeredSlides},{"watch-progress":I.watchSlidesProgress}],I.containerModifierClass);A.push(...be),z.addClass([...A].join(" ")),l.emitContainerClasses()},removeClasses:function rn(){const{$el:A,classNames:I}=this;A.removeClass(I.join(" ")),this.emitContainerClasses()}},images:{loadImage:function hr(l,A,I,P,z,J){const ge=He();let be;function oe(){J&&J()}Cn(l).parent("picture")[0]||l.complete&&z||!A?oe():(be=new ge.Image,be.onload=oe,be.onerror=oe,P&&(be.sizes=P),I&&(be.srcset=I),A&&(be.src=A))},preloadImages:function Gr(){const l=this;function A(){null==l||!l||l.destroyed||(void 0!==l.imagesLoaded&&(l.imagesLoaded+=1),l.imagesLoaded===l.imagesToLoad.length&&(l.params.updateOnImagesReady&&l.update(),l.emit("imagesReady")))}l.imagesToLoad=l.$el.find("img");for(let I=0;I<l.imagesToLoad.length;I+=1){const P=l.imagesToLoad[I];l.loadImage(P,P.currentSrc||P.getAttribute("src"),P.srcset||P.getAttribute("srcset"),P.sizes||P.getAttribute("sizes"),!0,A)}}}},oo={};class ts{constructor(...A){let I,P;if(1===A.length&&A[0].constructor&&"Object"===Object.prototype.toString.call(A[0]).slice(8,-1)?P=A[0]:[I,P]=A,P||(P={}),P=Ii({},P),I&&!P.el&&(P.el=I),P.el&&Cn(P.el).length>1){const be=[];return Cn(P.el).each(oe=>{const me=Ii({},P,{el:oe});be.push(new ts(me))}),be}const z=this;z.__swiper__=!0,z.support=Cs(),z.device=function Sr(l={}){return Qr||(Qr=function wr({userAgent:l}={}){const A=Cs(),I=He(),P=I.navigator.platform,z=l||I.navigator.userAgent,J={ios:!1,android:!1},ge=I.screen.width,be=I.screen.height,oe=z.match(/(Android);?[\s\/]+([\d.]+)?/);let me=z.match(/(iPad).*OS\s([\d_]+)/);const ce=z.match(/(iPod)(.*OS\s([\d_]+))?/),le=!me&&z.match(/(iPhone\sOS|iOS)\s([\d_]+)/),Te="Win32"===P;let We="MacIntel"===P;return!me&&We&&A.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${ge}x${be}`)>=0&&(me=z.match(/(Version)\/([\d.]+)/),me||(me=[0,1,"13_0_0"]),We=!1),oe&&!Te&&(J.os="android",J.android=!0),(me||le||ce)&&(J.os="ios",J.ios=!0),J}(l)),Qr}({userAgent:P.userAgent}),z.browser=function xi(){return Ki||(Ki=function Br(){const l=He();return{isSafari:function A(){const I=l.navigator.userAgent.toLowerCase();return I.indexOf("safari")>=0&&I.indexOf("chrome")<0&&I.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(l.navigator.userAgent)}}()),Ki}(),z.eventsListeners={},z.eventsAnyListeners=[],z.modules=[...z.__modules__],P.modules&&Array.isArray(P.modules)&&z.modules.push(...P.modules);const J={};z.modules.forEach(be=>{be({swiper:z,extendParams:Ni(P,J),on:z.on.bind(z),once:z.once.bind(z),off:z.off.bind(z),emit:z.emit.bind(z)})});const ge=Ii({},Zi,J);return z.params=Ii({},ge,oo,P),z.originalParams=Ii({},z.params),z.passedParams=Ii({},P),z.params&&z.params.on&&Object.keys(z.params.on).forEach(be=>{z.on(be,z.params.on[be])}),z.params&&z.params.onAny&&z.onAny(z.params.onAny),z.$=Cn,Object.assign(z,{enabled:z.params.enabled,el:I,classNames:[],slides:Cn(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===z.params.direction,isVertical:()=>"vertical"===z.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:z.params.allowSlideNext,allowSlidePrev:z.params.allowSlidePrev,touchEvents:function(){const oe=["touchstart","touchmove","touchend","touchcancel"],me=["pointerdown","pointermove","pointerup"];return z.touchEventsTouch={start:oe[0],move:oe[1],end:oe[2],cancel:oe[3]},z.touchEventsDesktop={start:me[0],move:me[1],end:me[2]},z.support.touch||!z.params.simulateTouch?z.touchEventsTouch:z.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:z.params.focusableElements,lastClickTime:Pi(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:z.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),z.emit("_swiper"),z.params.init&&z.init(),z}enable(){const A=this;A.enabled||(A.enabled=!0,A.params.grabCursor&&A.setGrabCursor(),A.emit("enable"))}disable(){const A=this;!A.enabled||(A.enabled=!1,A.params.grabCursor&&A.unsetGrabCursor(),A.emit("disable"))}setProgress(A,I){const P=this;A=Math.min(Math.max(A,0),1);const z=P.minTranslate(),ge=(P.maxTranslate()-z)*A+z;P.translateTo(ge,void 0===I?0:I),P.updateActiveIndex(),P.updateSlidesClasses()}emitContainerClasses(){const A=this;if(!A.params._emitClasses||!A.el)return;const I=A.el.className.split(" ").filter(P=>0===P.indexOf("swiper")||0===P.indexOf(A.params.containerModifierClass));A.emit("_containerClasses",I.join(" "))}getSlideClasses(A){const I=this;return I.destroyed?"":A.className.split(" ").filter(P=>0===P.indexOf("swiper-slide")||0===P.indexOf(I.params.slideClass)).join(" ")}emitSlidesClasses(){const A=this;if(!A.params._emitClasses||!A.el)return;const I=[];A.slides.each(P=>{const z=A.getSlideClasses(P);I.push({slideEl:P,classNames:z}),A.emit("_slideClass",P,z)}),A.emit("_slideClasses",I)}slidesPerViewDynamic(A="current",I=!1){const{params:z,slides:J,slidesGrid:ge,slidesSizesGrid:be,size:oe,activeIndex:me}=this;let ce=1;if(z.centeredSlides){let Te,le=J[me].swiperSlideSize;for(let We=me+1;We<J.length;We+=1)J[We]&&!Te&&(le+=J[We].swiperSlideSize,ce+=1,le>oe&&(Te=!0));for(let We=me-1;We>=0;We-=1)J[We]&&!Te&&(le+=J[We].swiperSlideSize,ce+=1,le>oe&&(Te=!0))}else if("current"===A)for(let le=me+1;le<J.length;le+=1)(I?ge[le]+be[le]-ge[me]<oe:ge[le]-ge[me]<oe)&&(ce+=1);else for(let le=me-1;le>=0;le-=1)ge[me]-ge[le]<oe&&(ce+=1);return ce}update(){const A=this;if(!A||A.destroyed)return;const{snapGrid:I,params:P}=A;function z(){const be=Math.min(Math.max(A.rtlTranslate?-1*A.translate:A.translate,A.maxTranslate()),A.minTranslate());A.setTranslate(be),A.updateActiveIndex(),A.updateSlidesClasses()}let J;P.breakpoints&&A.setBreakpoint(),A.updateSize(),A.updateSlides(),A.updateProgress(),A.updateSlidesClasses(),A.params.freeMode&&A.params.freeMode.enabled?(z(),A.params.autoHeight&&A.updateAutoHeight()):(J=A.slideTo(("auto"===A.params.slidesPerView||A.params.slidesPerView>1)&&A.isEnd&&!A.params.centeredSlides?A.slides.length-1:A.activeIndex,0,!1,!0),J||z()),P.watchOverflow&&I!==A.snapGrid&&A.checkOverflow(),A.emit("update")}changeDirection(A,I=!0){const P=this,z=P.params.direction;return A||(A="horizontal"===z?"vertical":"horizontal"),A===z||"horizontal"!==A&&"vertical"!==A||(P.$el.removeClass(`${P.params.containerModifierClass}${z}`).addClass(`${P.params.containerModifierClass}${A}`),P.emitContainerClasses(),P.params.direction=A,P.slides.each(J=>{"vertical"===A?J.style.width="":J.style.height=""}),P.emit("changeDirection"),I&&P.update()),P}changeLanguageDirection(A){const I=this;I.rtl&&"rtl"===A||!I.rtl&&"ltr"===A||(I.rtl="rtl"===A,I.rtlTranslate="horizontal"===I.params.direction&&I.rtl,I.rtl?(I.$el.addClass(`${I.params.containerModifierClass}rtl`),I.el.dir="rtl"):(I.$el.removeClass(`${I.params.containerModifierClass}rtl`),I.el.dir="ltr"),I.update())}mount(A){const I=this;if(I.mounted)return!0;const P=Cn(A||I.params.el);if(!(A=P[0]))return!1;A.swiper=I;const z=()=>`.${(I.params.wrapperClass||"").trim().split(" ").join(".")}`;let ge=(()=>{if(A&&A.shadowRoot&&A.shadowRoot.querySelector){const be=Cn(A.shadowRoot.querySelector(z()));return be.children=oe=>P.children(oe),be}return P.children?P.children(z()):Cn(P).children(z())})();if(0===ge.length&&I.params.createElements){const oe=ae().createElement("div");ge=Cn(oe),oe.className=I.params.wrapperClass,P.append(oe),P.children(`.${I.params.slideClass}`).each(me=>{ge.append(me)})}return Object.assign(I,{$el:P,el:A,$wrapperEl:ge,wrapperEl:ge[0],mounted:!0,rtl:"rtl"===A.dir.toLowerCase()||"rtl"===P.css("direction"),rtlTranslate:"horizontal"===I.params.direction&&("rtl"===A.dir.toLowerCase()||"rtl"===P.css("direction")),wrongRTL:"-webkit-box"===ge.css("display")}),!0}init(A){const I=this;return I.initialized||!1===I.mount(A)||(I.emit("beforeInit"),I.params.breakpoints&&I.setBreakpoint(),I.addClasses(),I.params.loop&&I.loopCreate(),I.updateSize(),I.updateSlides(),I.params.watchOverflow&&I.checkOverflow(),I.params.grabCursor&&I.enabled&&I.setGrabCursor(),I.params.preloadImages&&I.preloadImages(),I.slideTo(I.params.loop?I.params.initialSlide+I.loopedSlides:I.params.initialSlide,0,I.params.runCallbacksOnInit,!1,!0),I.attachEvents(),I.initialized=!0,I.emit("init"),I.emit("afterInit")),I}destroy(A=!0,I=!0){const P=this,{params:z,$el:J,$wrapperEl:ge,slides:be}=P;return void 0===P.params||P.destroyed||(P.emit("beforeDestroy"),P.initialized=!1,P.detachEvents(),z.loop&&P.loopDestroy(),I&&(P.removeClasses(),J.removeAttr("style"),ge.removeAttr("style"),be&&be.length&&be.removeClass([z.slideVisibleClass,z.slideActiveClass,z.slideNextClass,z.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),P.emit("destroy"),Object.keys(P.eventsListeners).forEach(oe=>{P.off(oe)}),!1!==A&&(P.$el[0].swiper=null,function br(l){const A=l;Object.keys(A).forEach(I=>{try{A[I]=null}catch(P){}try{delete A[I]}catch(P){}})}(P)),P.destroyed=!0),null}static extendDefaults(A){Ii(oo,A)}static get extendedDefaults(){return oo}static get defaults(){return Zi}static installModule(A){ts.prototype.__modules__||(ts.prototype.__modules__=[]);const I=ts.prototype.__modules__;"function"==typeof A&&I.indexOf(A)<0&&I.push(A)}static use(A){return Array.isArray(A)?(A.forEach(I=>ts.installModule(I)),ts):(ts.installModule(A),ts)}}Object.keys(Si).forEach(l=>{Object.keys(Si[l]).forEach(A=>{ts.prototype[A]=Si[l][A]})}),ts.use([function Vs({swiper:l,on:A,emit:I}){const P=He();let z=null,J=null;const ge=()=>{!l||l.destroyed||!l.initialized||(I("beforeResize"),I("resize"))},me=()=>{!l||l.destroyed||!l.initialized||I("orientationchange")};A("init",()=>{l.params.resizeObserver&&void 0!==P.ResizeObserver?!l||l.destroyed||!l.initialized||(z=new ResizeObserver(ce=>{J=P.requestAnimationFrame(()=>{const{width:le,height:Te}=l;let We=le,tt=Te;ce.forEach(({contentBoxSize:De,contentRect:ke,target:_t})=>{_t&&_t!==l.el||(We=ke?ke.width:(De[0]||De).inlineSize,tt=ke?ke.height:(De[0]||De).blockSize)}),(We!==le||tt!==Te)&&ge()})}),z.observe(l.el)):(P.addEventListener("resize",ge),P.addEventListener("orientationchange",me))}),A("destroy",()=>{J&&P.cancelAnimationFrame(J),z&&z.unobserve&&l.el&&(z.unobserve(l.el),z=null),P.removeEventListener("resize",ge),P.removeEventListener("orientationchange",me)})},function Gi({swiper:l,extendParams:A,on:I,emit:P}){const z=[],J=He(),ge=(me,ce={})=>{const Te=new(J.MutationObserver||J.WebkitMutationObserver)(We=>{if(1===We.length)return void P("observerUpdate",We[0]);const tt=function(){P("observerUpdate",We[0])};J.requestAnimationFrame?J.requestAnimationFrame(tt):J.setTimeout(tt,0)});Te.observe(me,{attributes:void 0===ce.attributes||ce.attributes,childList:void 0===ce.childList||ce.childList,characterData:void 0===ce.characterData||ce.characterData}),z.push(Te)};A({observer:!1,observeParents:!1,observeSlideChildren:!1}),I("init",()=>{if(l.params.observer){if(l.params.observeParents){const me=l.$el.parents();for(let ce=0;ce<me.length;ce+=1)ge(me[ce])}ge(l.$el[0],{childList:l.params.observeSlideChildren}),ge(l.$wrapperEl[0],{attributes:!1})}}),I("destroy",()=>{z.forEach(me=>{me.disconnect()}),z.splice(0,z.length)})}]);const Kr=ts;function ws(l,A,I,P){const z=ae();return l.params.createElements&&Object.keys(P).forEach(J=>{if(!I[J]&&!0===I.auto){let ge=l.$el.children(`.${P[J]}`)[0];ge||(ge=z.createElement("div"),ge.className=P[J],l.$el.append(ge)),I[J]=ge,A[J]=ge}}),I}function Q({swiper:l,extendParams:A,on:I,emit:P}){function z(We){let tt;return We&&(tt=Cn(We),l.params.uniqueNavElements&&"string"==typeof We&&tt.length>1&&1===l.$el.find(We).length&&(tt=l.$el.find(We))),tt}function J(We,tt){const De=l.params.navigation;We&&We.length>0&&(We[tt?"addClass":"removeClass"](De.disabledClass),We[0]&&"BUTTON"===We[0].tagName&&(We[0].disabled=tt),l.params.watchOverflow&&l.enabled&&We[l.isLocked?"addClass":"removeClass"](De.lockClass))}function ge(){if(l.params.loop)return;const{$nextEl:We,$prevEl:tt}=l.navigation;J(tt,l.isBeginning&&!l.params.rewind),J(We,l.isEnd&&!l.params.rewind)}function be(We){We.preventDefault(),(!l.isBeginning||l.params.loop||l.params.rewind)&&(l.slidePrev(),P("navigationPrev"))}function oe(We){We.preventDefault(),(!l.isEnd||l.params.loop||l.params.rewind)&&(l.slideNext(),P("navigationNext"))}function me(){const We=l.params.navigation;if(l.params.navigation=ws(l,l.originalParams.navigation,l.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!We.nextEl&&!We.prevEl)return;const tt=z(We.nextEl),De=z(We.prevEl);tt&&tt.length>0&&tt.on("click",oe),De&&De.length>0&&De.on("click",be),Object.assign(l.navigation,{$nextEl:tt,nextEl:tt&&tt[0],$prevEl:De,prevEl:De&&De[0]}),l.enabled||(tt&&tt.addClass(We.lockClass),De&&De.addClass(We.lockClass))}function ce(){const{$nextEl:We,$prevEl:tt}=l.navigation;We&&We.length&&(We.off("click",oe),We.removeClass(l.params.navigation.disabledClass)),tt&&tt.length&&(tt.off("click",be),tt.removeClass(l.params.navigation.disabledClass))}A({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),l.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},I("init",()=>{!1===l.params.navigation.enabled?Te():(me(),ge())}),I("toEdge fromEdge lock unlock",()=>{ge()}),I("destroy",()=>{ce()}),I("enable disable",()=>{const{$nextEl:We,$prevEl:tt}=l.navigation;We&&We[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass),tt&&tt[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass)}),I("click",(We,tt)=>{const{$nextEl:De,$prevEl:ke}=l.navigation,_t=tt.target;if(l.params.navigation.hideOnClick&&!Cn(_t).is(ke)&&!Cn(_t).is(De)){if(l.pagination&&l.params.pagination&&l.params.pagination.clickable&&(l.pagination.el===_t||l.pagination.el.contains(_t)))return;let et;De?et=De.hasClass(l.params.navigation.hiddenClass):ke&&(et=ke.hasClass(l.params.navigation.hiddenClass)),P(!0===et?"navigationShow":"navigationHide"),De&&De.toggleClass(l.params.navigation.hiddenClass),ke&&ke.toggleClass(l.params.navigation.hiddenClass)}});const Te=()=>{l.$el.addClass(l.params.navigation.navigationDisabledClass),ce()};Object.assign(l.navigation,{enable:()=>{l.$el.removeClass(l.params.navigation.navigationDisabledClass),me(),ge()},disable:Te,update:ge,init:me,destroy:ce})}function G(l=""){return`.${l.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function V({swiper:l,extendParams:A,on:I,emit:P}){const z="swiper-pagination";A({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:De=>De,formatFractionTotal:De=>De,bulletClass:`${z}-bullet`,bulletActiveClass:`${z}-bullet-active`,modifierClass:`${z}-`,currentClass:`${z}-current`,totalClass:`${z}-total`,hiddenClass:`${z}-hidden`,progressbarFillClass:`${z}-progressbar-fill`,progressbarOppositeClass:`${z}-progressbar-opposite`,clickableClass:`${z}-clickable`,lockClass:`${z}-lock`,horizontalClass:`${z}-horizontal`,verticalClass:`${z}-vertical`,paginationDisabledClass:`${z}-disabled`}}),l.pagination={el:null,$el:null,bullets:[]};let J,ge=0;function be(){return!l.params.pagination.el||!l.pagination.el||!l.pagination.$el||0===l.pagination.$el.length}function oe(De,ke){const{bulletActiveClass:_t}=l.params.pagination;De[ke]().addClass(`${_t}-${ke}`)[ke]().addClass(`${_t}-${ke}-${ke}`)}function me(){const De=l.rtl,ke=l.params.pagination;if(be())return;const _t=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,et=l.pagination.$el;let yt;const vn=l.params.loop?Math.ceil((_t-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;if(l.params.loop?(yt=Math.ceil((l.activeIndex-l.loopedSlides)/l.params.slidesPerGroup),yt>_t-1-2*l.loopedSlides&&(yt-=_t-2*l.loopedSlides),yt>vn-1&&(yt-=vn),yt<0&&"bullets"!==l.params.paginationType&&(yt=vn+yt)):yt=void 0!==l.snapIndex?l.snapIndex:l.activeIndex||0,"bullets"===ke.type&&l.pagination.bullets&&l.pagination.bullets.length>0){const Dn=l.pagination.bullets;let gn,Mn,nr;if(ke.dynamicBullets&&(J=Dn.eq(0)[l.isHorizontal()?"outerWidth":"outerHeight"](!0),et.css(l.isHorizontal()?"width":"height",J*(ke.dynamicMainBullets+4)+"px"),ke.dynamicMainBullets>1&&void 0!==l.previousIndex&&(ge+=yt-(l.previousIndex-l.loopedSlides||0),ge>ke.dynamicMainBullets-1?ge=ke.dynamicMainBullets-1:ge<0&&(ge=0)),gn=Math.max(yt-ge,0),Mn=gn+(Math.min(Dn.length,ke.dynamicMainBullets)-1),nr=(Mn+gn)/2),Dn.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(_r=>`${ke.bulletActiveClass}${_r}`).join(" ")),et.length>1)Dn.each(_r=>{const Fn=Cn(_r),Jt=Fn.index();Jt===yt&&Fn.addClass(ke.bulletActiveClass),ke.dynamicBullets&&(Jt>=gn&&Jt<=Mn&&Fn.addClass(`${ke.bulletActiveClass}-main`),Jt===gn&&oe(Fn,"prev"),Jt===Mn&&oe(Fn,"next"))});else{const _r=Dn.eq(yt),Fn=_r.index();if(_r.addClass(ke.bulletActiveClass),ke.dynamicBullets){const Jt=Dn.eq(gn),Pt=Dn.eq(Mn);for(let hn=gn;hn<=Mn;hn+=1)Dn.eq(hn).addClass(`${ke.bulletActiveClass}-main`);if(l.params.loop)if(Fn>=Dn.length){for(let hn=ke.dynamicMainBullets;hn>=0;hn-=1)Dn.eq(Dn.length-hn).addClass(`${ke.bulletActiveClass}-main`);Dn.eq(Dn.length-ke.dynamicMainBullets-1).addClass(`${ke.bulletActiveClass}-prev`)}else oe(Jt,"prev"),oe(Pt,"next");else oe(Jt,"prev"),oe(Pt,"next")}}if(ke.dynamicBullets){const _r=Math.min(Dn.length,ke.dynamicMainBullets+4),Fn=(J*_r-J)/2-nr*J,Jt=De?"right":"left";Dn.css(l.isHorizontal()?Jt:"top",`${Fn}px`)}}if("fraction"===ke.type&&(et.find(G(ke.currentClass)).text(ke.formatFractionCurrent(yt+1)),et.find(G(ke.totalClass)).text(ke.formatFractionTotal(vn))),"progressbar"===ke.type){let Dn;Dn=ke.progressbarOpposite?l.isHorizontal()?"vertical":"horizontal":l.isHorizontal()?"horizontal":"vertical";const gn=(yt+1)/vn;let Mn=1,nr=1;"horizontal"===Dn?Mn=gn:nr=gn,et.find(G(ke.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${Mn}) scaleY(${nr})`).transition(l.params.speed)}"custom"===ke.type&&ke.renderCustom?(et.html(ke.renderCustom(l,yt+1,vn)),P("paginationRender",et[0])):P("paginationUpdate",et[0]),l.params.watchOverflow&&l.enabled&&et[l.isLocked?"addClass":"removeClass"](ke.lockClass)}function ce(){const De=l.params.pagination;if(be())return;const ke=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,_t=l.pagination.$el;let et="";if("bullets"===De.type){let yt=l.params.loop?Math.ceil((ke-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;l.params.freeMode&&l.params.freeMode.enabled&&!l.params.loop&&yt>ke&&(yt=ke);for(let vn=0;vn<yt;vn+=1)et+=De.renderBullet?De.renderBullet.call(l,vn,De.bulletClass):`<${De.bulletElement} class="${De.bulletClass}"></${De.bulletElement}>`;_t.html(et),l.pagination.bullets=_t.find(G(De.bulletClass))}"fraction"===De.type&&(et=De.renderFraction?De.renderFraction.call(l,De.currentClass,De.totalClass):`<span class="${De.currentClass}"></span> / <span class="${De.totalClass}"></span>`,_t.html(et)),"progressbar"===De.type&&(et=De.renderProgressbar?De.renderProgressbar.call(l,De.progressbarFillClass):`<span class="${De.progressbarFillClass}"></span>`,_t.html(et)),"custom"!==De.type&&P("paginationRender",l.pagination.$el[0])}function le(){l.params.pagination=ws(l,l.originalParams.pagination,l.params.pagination,{el:"swiper-pagination"});const De=l.params.pagination;if(!De.el)return;let ke=Cn(De.el);0!==ke.length&&(l.params.uniqueNavElements&&"string"==typeof De.el&&ke.length>1&&(ke=l.$el.find(De.el),ke.length>1&&(ke=ke.filter(_t=>Cn(_t).parents(".swiper")[0]===l.el))),"bullets"===De.type&&De.clickable&&ke.addClass(De.clickableClass),ke.addClass(De.modifierClass+De.type),ke.addClass(l.isHorizontal()?De.horizontalClass:De.verticalClass),"bullets"===De.type&&De.dynamicBullets&&(ke.addClass(`${De.modifierClass}${De.type}-dynamic`),ge=0,De.dynamicMainBullets<1&&(De.dynamicMainBullets=1)),"progressbar"===De.type&&De.progressbarOpposite&&ke.addClass(De.progressbarOppositeClass),De.clickable&&ke.on("click",G(De.bulletClass),function(et){et.preventDefault();let yt=Cn(this).index()*l.params.slidesPerGroup;l.params.loop&&(yt+=l.loopedSlides),l.slideTo(yt)}),Object.assign(l.pagination,{$el:ke,el:ke[0]}),l.enabled||ke.addClass(De.lockClass))}function Te(){const De=l.params.pagination;if(be())return;const ke=l.pagination.$el;ke.removeClass(De.hiddenClass),ke.removeClass(De.modifierClass+De.type),ke.removeClass(l.isHorizontal()?De.horizontalClass:De.verticalClass),l.pagination.bullets&&l.pagination.bullets.removeClass&&l.pagination.bullets.removeClass(De.bulletActiveClass),De.clickable&&ke.off("click",G(De.bulletClass))}I("init",()=>{!1===l.params.pagination.enabled?tt():(le(),ce(),me())}),I("activeIndexChange",()=>{(l.params.loop||void 0===l.snapIndex)&&me()}),I("snapIndexChange",()=>{l.params.loop||me()}),I("slidesLengthChange",()=>{l.params.loop&&(ce(),me())}),I("snapGridLengthChange",()=>{l.params.loop||(ce(),me())}),I("destroy",()=>{Te()}),I("enable disable",()=>{const{$el:De}=l.pagination;De&&De[l.enabled?"removeClass":"addClass"](l.params.pagination.lockClass)}),I("lock unlock",()=>{me()}),I("click",(De,ke)=>{const _t=ke.target,{$el:et}=l.pagination;if(l.params.pagination.el&&l.params.pagination.hideOnClick&&et&&et.length>0&&!Cn(_t).hasClass(l.params.pagination.bulletClass)){if(l.navigation&&(l.navigation.nextEl&&_t===l.navigation.nextEl||l.navigation.prevEl&&_t===l.navigation.prevEl))return;const yt=et.hasClass(l.params.pagination.hiddenClass);P(!0===yt?"paginationShow":"paginationHide"),et.toggleClass(l.params.pagination.hiddenClass)}});const tt=()=>{l.$el.addClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.addClass(l.params.pagination.paginationDisabledClass),Te()};Object.assign(l.pagination,{enable:()=>{l.$el.removeClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.removeClass(l.params.pagination.paginationDisabledClass),le(),ce(),me()},disable:tt,render:ce,update:me,init:le,destroy:Te})}},5861:(Wn,Dt,j)=>{function g(he,ae,je,He,dt,qe,at){try{var Ne=he[qe](at),Pe=Ne.value}catch(bt){return void je(bt)}Ne.done?ae(Pe):Promise.resolve(Pe).then(He,dt)}function k(he){return function(){var ae=this,je=arguments;return new Promise(function(He,dt){var qe=he.apply(ae,je);function at(Pe){g(qe,He,dt,at,Ne,"next",Pe)}function Ne(Pe){g(qe,He,dt,at,Ne,"throw",Pe)}at(void 0)})}}j.d(Dt,{Z:()=>k})}},Wn=>{Wn(Wn.s=1201)}]);