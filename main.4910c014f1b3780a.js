"use strict";var fT=Object.defineProperty,pT=Object.defineProperties,gT=Object.getOwnPropertyDescriptors,aC=Object.getOwnPropertySymbols,mT=Object.prototype.hasOwnProperty,yT=Object.prototype.propertyIsEnumerable,lC=(Wn,At,j)=>At in Wn?fT(Wn,At,{enumerable:!0,configurable:!0,writable:!0,value:j}):Wn[At]=j,uC=(Wn,At)=>{for(var j in At||(At={}))mT.call(At,j)&&lC(Wn,j,At[j]);if(aC)for(var j of aC(At))yT.call(At,j)&&lC(Wn,j,At[j]);return Wn},cC=(Wn,At)=>pT(Wn,gT(At));(self.webpackChunkdrasti=self.webpackChunkdrasti||[]).push([[179],{6217:(Wn,At,j)=>{j.d(At,{nm:()=>Xi});var g=j(2122);j(5e3),j(259);var xe=j(5861),He=j(9681),St=j(4859),an=j(2090),Ht=j(1877);const ke=new Map,Ut={activated:!1,tokenObservers:[]},Me={initialized:!1,enabled:!1};function Tt(Ct){return ke.get(Ct)||Object.assign({},Ut)}function wt(){return Me}class Tr{constructor(dt,xt,mn,$n,Pr){if(this.operation=dt,this.retryPolicy=xt,this.getWaitDuration=mn,this.lowerBound=$n,this.upperBound=Pr,this.pending=null,this.nextErrorWaitInterval=$n,$n>Pr)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(dt){var xt=this;return(0,xe.Z)(function*(){xt.stop();try{xt.pending=new an.BH,yield function mr(Ct){return new Promise(dt=>{setTimeout(dt,Ct)})}(xt.getNextRun(dt)),xt.pending.resolve(),yield xt.pending.promise,xt.pending=new an.BH,yield xt.operation(),xt.pending.resolve(),yield xt.pending.promise,xt.process(!0).catch(()=>{})}catch(mn){xt.retryPolicy(mn)?xt.process(!1).catch(()=>{}):xt.stop()}})()}getNextRun(dt){if(dt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const xt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),xt}}}const kt=new an.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Dt(Ct){if(!Tt(Ct).activated)throw kt.create("use-before-activation",{appName:Ct.name})}function Rt(Ct,dt){return tn.apply(this,arguments)}function tn(){return(tn=(0,xe.Z)(function*({url:Ct,body:dt},xt){const mn={"Content-Type":"application/json"},$n=xt.getImmediate({optional:!0});if($n){const ms=yield $n.getHeartbeatsHeader();ms&&(mn["X-Firebase-Client"]=ms)}const Pr={method:"POST",body:JSON.stringify(dt),headers:mn};let ti,Yi;try{ti=yield fetch(Ct,Pr)}catch(ms){throw kt.create("fetch-network-error",{originalErrorMessage:null==ms?void 0:ms.message})}if(200!==ti.status)throw kt.create("fetch-status-error",{httpStatus:ti.status});try{Yi=yield ti.json()}catch(ms){throw kt.create("fetch-parse-error",{originalErrorMessage:null==ms?void 0:ms.message})}const Ii=Yi.ttl.match(/^([\d.]+)(s)$/);if(!Ii||!Ii[2]||isNaN(Number(Ii[1])))throw kt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Yi.ttl}`});const vs=1e3*Number(Ii[1]),ai=Date.now();return{token:Yi.token,expireTimeMillis:ai+vs,issuedAtTimeMillis:ai}})).apply(this,arguments)}function lr(Ct,dt){const{projectId:xt,appId:mn,apiKey:$n}=Ct.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${xt}/apps/${mn}:exchangeDebugToken?key=${$n}`,body:{debug_token:dt}}}const Qn="firebase-app-check-store";let xr=null;function Mr(){return xr||(xr=new Promise((Ct,dt)=>{try{const xt=indexedDB.open("firebase-app-check-database",1);xt.onsuccess=mn=>{Ct(mn.target.result)},xt.onerror=mn=>{var $n;dt(kt.create("storage-open",{originalErrorMessage:null===($n=mn.target.error)||void 0===$n?void 0:$n.message}))},xt.onupgradeneeded=mn=>{0===mn.oldVersion&&mn.target.result.createObjectStore(Qn,{keyPath:"compositeKey"})}}catch(xt){dt(kt.create("storage-open",{originalErrorMessage:null==xt?void 0:xt.message}))}}),xr)}function Gt(){return(Gt=(0,xe.Z)(function*(Ct,dt){const mn=(yield Mr()).transaction(Qn,"readwrite"),Pr=mn.objectStore(Qn).put({compositeKey:Ct,value:dt});return new Promise((ti,Yi)=>{Pr.onsuccess=Ii=>{ti()},mn.onerror=Ii=>{var vs;Yi(kt.create("storage-set",{originalErrorMessage:null===(vs=Ii.target.error)||void 0===vs?void 0:vs.message}))}})})).apply(this,arguments)}const Jr=new Ht.Yd("@firebase/app-check");function as(Ct,dt){return(0,an.hl)()?function Ji(Ct,dt){return function ct(Ct,dt){return Gt.apply(this,arguments)}(function zn(Ct){return`${Ct.options.appId}-${Ct.name}`}(Ct),dt)}(Ct,dt).catch(xt=>{Jr.warn(`Failed to write token to IndexedDB. Error: ${xt}`)}):Promise.resolve()}function On(){return wt().enabled}function Si(){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,xe.Z)(function*(){const Ct=wt();if(Ct.enabled&&Ct.token)return Ct.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const kn={error:"UNKNOWN_ERROR"};function Ft(Ct){return an.US.encodeString(JSON.stringify(Ct),!1)}function Yn(Ct){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,xe.Z)(function*(Ct,dt=!1){const xt=Ct.app;Dt(xt);const mn=Tt(xt);let Pr,$n=mn.token;if($n&&!Xt($n)&&(mn.token=void 0,$n=void 0),!$n){const Ii=yield mn.cachedTokenPromise;Ii&&(Xt(Ii)?$n=Ii:yield as(xt,void 0))}if(!dt&&$n&&Xt($n))return{token:$n.token};let Yi,ti=!1;if(On()){mn.exchangeTokenPromise||(mn.exchangeTokenPromise=Rt(lr(xt,yield Si()),Ct.heartbeatServiceProvider).finally(()=>{mn.exchangeTokenPromise=void 0}),ti=!0);const Ii=yield mn.exchangeTokenPromise;return yield as(xt,Ii),mn.token=Ii,{token:Ii.token}}try{mn.exchangeTokenPromise||(mn.exchangeTokenPromise=mn.provider.getToken().finally(()=>{mn.exchangeTokenPromise=void 0}),ti=!0),$n=yield Tt(xt).exchangeTokenPromise}catch(Ii){"appCheck/throttled"===Ii.code?Jr.warn(Ii.message):Jr.error(Ii),Pr=Ii}return $n?Pr?Yi=Xt($n)?{token:$n.token,internalError:Pr}:Lt(Pr):(Yi={token:$n.token},mn.token=$n,yield as(xt,$n)):Yi=Lt(Pr),ti&&ft(xt,Yi),Yi})).apply(this,arguments)}function $r(Ct,dt){const xt=Tt(Ct),mn=xt.tokenObservers.filter($n=>$n.next!==dt);0===mn.length&&xt.tokenRefresher&&xt.tokenRefresher.isRunning()&&xt.tokenRefresher.stop(),xt.tokenObservers=mn}function Je(Ct){const{app:dt}=Ct,xt=Tt(dt);let mn=xt.tokenRefresher;mn||(mn=function Ue(Ct){const{app:dt}=Ct;return new Tr((0,xe.Z)(function*(){let mn;if(mn=Tt(dt).token?yield Yn(Ct,!0):yield Yn(Ct),mn.error)throw mn.error;if(mn.internalError)throw mn.internalError}),()=>!0,()=>{const xt=Tt(dt);if(xt.token){let mn=xt.token.issuedAtTimeMillis+.5*(xt.token.expireTimeMillis-xt.token.issuedAtTimeMillis)+3e5;return mn=Math.min(mn,xt.token.expireTimeMillis-3e5),Math.max(0,mn-Date.now())}return 0},3e4,96e4)}(Ct),xt.tokenRefresher=mn),!mn.isRunning()&&xt.isTokenAutoRefreshEnabled&&mn.start()}function ft(Ct,dt){const xt=Tt(Ct).tokenObservers;for(const mn of xt)try{"EXTERNAL"===mn.type&&null!=dt.error?mn.error(dt.error):mn.next(dt)}catch($n){}}function Xt(Ct){return Ct.expireTimeMillis-Date.now()>0}function Lt(Ct){return{token:Ft(kn),error:Ct}}class Ge{constructor(dt,xt){this.app=dt,this.heartbeatServiceProvider=xt}_delete(){const{tokenObservers:dt}=Tt(this.app);for(const xt of dt)$r(this.app,xt.next);return Promise.resolve()}}const $s="app-check-internal";!function Yr(){(0,He._registerComponent)(new St.wA("app-check",Ct=>function Re(Ct,dt){return new Ge(Ct,dt)}(Ct.getProvider("app").getImmediate(),Ct.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ct,dt,xt)=>{Ct.getProvider($s).initialize()})),(0,He._registerComponent)(new St.wA($s,Ct=>function Ae(Ct){return{getToken:dt=>Yn(Ct,dt),addTokenListener:dt=>function Ur(Ct,dt,xt,mn){const{app:$n}=Ct,Pr=Tt($n);if(Pr.tokenObservers=[...Pr.tokenObservers,{next:xt,error:mn,type:dt}],Pr.token&&Xt(Pr.token)){const Yi=Pr.token;Promise.resolve().then(()=>{xt({token:Yi.token}),Je(Ct)}).catch(()=>{})}Pr.cachedTokenPromise.then(()=>Je(Ct))}(Ct,"INTERNAL",dt),removeTokenListener:dt=>$r(Ct.app,dt)}}(Ct.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,He.registerVersion)("@firebase/app-check","0.6.0")}();class Xi{constructor(){return(0,g.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Wn,At,j)=>{j.d(At,{zQ:()=>at,ww:()=>on,rT:()=>Me,f7:()=>et,L6:()=>ke,_Q:()=>Ut,lh:()=>Tt,Qv:()=>Ht,nw:()=>wt});var g=j(5e3),F=j(7579),pe=j(9646),ae=j(8306),We=j(8996),Xe=j(6451),pt=j(6063);class Ze extends F.x{constructor(nr=1/0,rr=1/0,yn=pt.l){super(),this._bufferSize=nr,this._windowTime=rr,this._timestampProvider=yn,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=rr===1/0,this._bufferSize=Math.max(1,nr),this._windowTime=Math.max(1,rr)}next(nr){const{isStopped:rr,_buffer:yn,_infiniteTimeWindow:Tr,_timestampProvider:mr,_windowTime:Vt}=this;rr||(yn.push(nr),!Tr&&yn.push(mr.now()+Vt)),this._trimBuffer(),super.next(nr)}_subscribe(nr){this._throwIfClosed(),this._trimBuffer();const rr=this._innerSubscribe(nr),{_infiniteTimeWindow:yn,_buffer:Tr}=this,mr=Tr.slice();for(let Vt=0;Vt<mr.length&&!nr.closed;Vt+=yn?1:2)nr.next(mr[Vt]);return this._checkFinalizedStatuses(nr),rr}_trimBuffer(){const{_bufferSize:nr,_timestampProvider:rr,_buffer:yn,_infiniteTimeWindow:Tr}=this,mr=(Tr?1:2)*nr;if(nr<1/0&&mr<yn.length&&yn.splice(0,yn.length-mr),!Tr){const Vt=rr.now();let kt=0;for(let st=1;st<yn.length&&yn[st]<=Vt;st+=2)kt=st;kt&&yn.splice(0,kt+1)}}}var ht=j(3099);function Oe(Dn,nr,rr){let yn,Tr=!1;return Dn&&"object"==typeof Dn?({bufferSize:yn=1/0,windowTime:nr=1/0,refCount:Tr=!1,scheduler:rr}=Dn):yn=null!=Dn?Dn:1/0,(0,ht.B)({connector:()=>new Ze(yn,nr,rr),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Tr})}var Pe=j(3900),Et=j(576);function Cn(Dn,nr){return(0,Et.m)(nr)?(0,Pe.w)(()=>Dn,nr):(0,Pe.w)(()=>Dn)}var vt=j(5363),un=j(4004),In=j(590),Ot=j(9468),Zt=j(9300),Ln=j(2122),fn=j(2011),xe=j(9808),He=j(6217),St=j(9260);const Ht=new g.OlP("angularfire2.auth.use-emulator"),ke=new g.OlP("angularfire2.auth.settings"),Ut=new g.OlP("angularfire2.auth.tenant-id"),Me=new g.OlP("angularfire2.auth.langugage-code"),Tt=new g.OlP("angularfire2.auth.use-device-language"),et=new g.OlP("angularfire.auth.persistence"),wt=(Dn,nr,rr,yn,Tr,mr,Vt,kt)=>(0,fn.cc)(`${Dn.name}.auth`,"AngularFireAuth",Dn.name,()=>{const st=nr.runOutsideAngular(()=>Dn.auth());if(rr&&st.useEmulator(...rr),yn&&(st.tenantId=yn),st.languageCode=Tr,mr&&st.useDeviceLanguage(),Vt)for(const[Dt,ut]of Object.entries(Vt))st.settings[Dt]=ut;return kt&&st.setPersistence(kt),st},[rr,yn,Tr,mr,Vt,kt]);let at=(()=>{class Dn{constructor(rr,yn,Tr,mr,Vt,kt,st,Dt,ut,Yt,Rt,tn){const Gn=new F.x,tr=(0,pe.of)(void 0).pipe((0,vt.Q)(Vt.outsideAngular),(0,Pe.w)(()=>mr.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9169)))),(0,un.U)(()=>(0,fn.on)(rr,mr,yn)),(0,un.U)(lr=>wt(lr,mr,kt,Dt,ut,Yt,st,Rt)),Oe({bufferSize:1,refCount:!1}));if((0,xe.PM)(Tr))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,pe.of)(null);else{tr.pipe((0,In.P)()).subscribe();const Xr=tr.pipe((0,Pe.w)(Wr=>Wr.getRedirectResult().then(xr=>xr,()=>null)),Ln.iC,Oe({bufferSize:1,refCount:!1})),oi=tr.pipe((0,Pe.w)(Wr=>new ae.y(xr=>({unsubscribe:mr.runOutsideAngular(()=>Wr.onAuthStateChanged(Mr=>xr.next(Mr),Mr=>xr.error(Mr),()=>xr.complete()))})))),Qn=tr.pipe((0,Pe.w)(Wr=>new ae.y(xr=>({unsubscribe:mr.runOutsideAngular(()=>Wr.onIdTokenChanged(Mr=>xr.next(Mr),Mr=>xr.error(Mr),()=>xr.complete()))}))));this.authState=Xr.pipe(Cn(oi),(0,Ot.R)(Vt.outsideAngular),(0,vt.Q)(Vt.insideAngular)),this.user=Xr.pipe(Cn(Qn),(0,Ot.R)(Vt.outsideAngular),(0,vt.Q)(Vt.insideAngular)),this.idToken=this.user.pipe((0,Pe.w)(Wr=>Wr?(0,We.D)(Wr.getIdToken()):(0,pe.of)(null))),this.idTokenResult=this.user.pipe((0,Pe.w)(Wr=>Wr?(0,We.D)(Wr.getIdTokenResult()):(0,pe.of)(null))),this.credential=(0,Xe.T)(Xr,Gn,this.authState.pipe((0,Zt.h)(Wr=>!Wr))).pipe((0,un.U)(Wr=>(null==Wr?void 0:Wr.user)?Wr:null),(0,Ot.R)(Vt.outsideAngular),(0,vt.Q)(Vt.insideAngular))}return(0,fn.pX)(this,tr,mr,{spy:{apply:(lr,Xr,oi)=>{(lr.startsWith("signIn")||lr.startsWith("createUser"))&&oi.then(Qn=>Gn.next(Qn))}}})}}return Dn.\u0275fac=function(rr){return new(rr||Dn)(g.LFG(fn.Dh),g.LFG(fn.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ln.HU),g.LFG(Ht,8),g.LFG(ke,8),g.LFG(Ut,8),g.LFG(Me,8),g.LFG(Tt,8),g.LFG(et,8),g.LFG(He.nm,8))},Dn.\u0275prov=g.Yz7({token:Dn,factory:Dn.\u0275fac,providedIn:"any"}),Dn})(),on=(()=>{class Dn{constructor(){St.Z.registerVersion("angularfire",Ln.q4.full,"auth-compat")}}return Dn.\u0275fac=function(rr){return new(rr||Dn)},Dn.\u0275mod=g.oAB({type:Dn}),Dn.\u0275inj=g.cJS({providers:[at]}),Dn})()},2095:(Wn,At,j)=>{j.d(At,{ST:()=>r_,yb:()=>i_});var g=j(5e3),F=j(4986),pe=j(8306),ae=j(8996),We=j(9646),Xe=j(2122),pt=j(4482),Ze=j(5403);function ht(){return(0,pt.e)((i,e)=>{let t,s=!1;i.subscribe((0,Ze.x)(e,u=>{const m=t;t=u,s&&e.next([m,u]),s=!0}))})}var Oe=j(4671);function Et(i,e){return i===e}var Me,Cn=j(8675),vt=j(4004),un=j(5026),In=j(9300),Ot=j(2011),Zt=j(9808),fn=(j(9169),j(3942)),xe=j(5861),He=j(9681),St=j(4859),an=j(1877),Ht=j(2090),ke="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ut={},Tt=Tt||{},et=ke||self;function wt(){}function at(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function on(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var nr="closure_uid_"+(1e9*Math.random()>>>0),rr=0;function yn(i,e,t){return i.call.apply(i.bind,arguments)}function Tr(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function mr(i,e,t){return(mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yn:Tr).apply(null,arguments)}function Vt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function kt(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,u,m){for(var E=Array(arguments.length-2),R=2;R<arguments.length;R++)E[R-2]=arguments[R];return e.prototype[u].apply(s,E)}}function st(){this.s=this.s,this.o=this.o}st.prototype.s=!1,st.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Dn(i){Object.prototype.hasOwnProperty.call(i,nr)&&i[nr]||(i[nr]=++rr)}(this)},st.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ut=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Yt(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Rt(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(at(s)){const u=i.length||0,m=s.length||0;i.length=u+m;for(let E=0;E<m;E++)i[u+E]=s[E]}else i.push(s)}}function tn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}tn.prototype.h=function(){this.defaultPrevented=!0};var Gn=function(){if(!et.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{et.addEventListener("test",wt,e),et.removeEventListener("test",wt,e)}catch(t){}return i}();function tr(i){return/^[\s\xa0]*$/.test(i)}var lr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Xr(i,e){return i<e?-1:i>e?1:0}function oi(){var i=et.navigator;return i&&(i=i.userAgent)?i:""}function Qn(i){return-1!=oi().indexOf(i)}function Wr(i){return Wr[" "](i),i}Wr[" "]=wt;var rn,i,Mr=Qn("Opera"),rs=Qn("Trident")||Qn("MSIE"),Ji=Qn("Edge"),dn=Ji||rs,rt=Qn("Gecko")&&!(-1!=oi().toLowerCase().indexOf("webkit")&&!Qn("Edge"))&&!(Qn("Trident")||Qn("MSIE"))&&!Qn("Edge"),ct=-1!=oi().toLowerCase().indexOf("webkit")&&!Qn("Edge");function Gt(){var i=et.document;return i?i.documentMode:void 0}e:{var bn="",zn=(i=oi(),rt?/rv:([^\);]+)(\)|;)/.exec(i):Ji?/Edge\/([\d\.]+)/.exec(i):rs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ct?/WebKit\/(\S+)/.exec(i):Mr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(zn&&(bn=zn?zn[1]:""),rs){var Jr=Gt();if(null!=Jr&&Jr>parseFloat(bn)){rn=String(Jr);break e}}rn=bn}var Gr={};var ui=et.document&&rs&&(Gt()||parseInt(rn,10))||void 0;function On(i,e){if(tn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(rt){e:{try{Wr(e.nodeName);var u=!0;break e}catch(m){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Si[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&On.X.h.call(this)}}kt(On,tn);var Si={2:"touch",3:"pen",4:"mouse"};On.prototype.h=function(){On.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Vr="closure_listenable_"+(1e6*Math.random()|0),Vi=0;function kn(i,e,t,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=u,this.key=++Vi,this.ba=this.ea=!1}function Ft(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Yn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function Rr(i){const e={};for(const t in i)e[t]=i[t];return e}const Ur="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $r(i,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)i[t]=s[t];for(let m=0;m<Ur.length;m++)t=Ur[m],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Je(i){this.src=i,this.g={},this.h=0}function Ue(i,e){var t=e.type;if(t in i.g){var m,s=i.g[t],u=ut(s,e);(m=0<=u)&&Array.prototype.splice.call(s,u,1),m&&(Ft(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function ft(i,e,t,s){for(var u=0;u<i.length;++u){var m=i[u];if(!m.ba&&m.listener==e&&m.capture==!!t&&m.ha==s)return u}return-1}Je.prototype.add=function(i,e,t,s,u){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var E=ft(i,e,s,u);return-1<E?(e=i[E],t||(e.ea=!1)):((e=new kn(e,this.src,m,!!s,u)).ea=t,i.push(e)),e};var Xt="closure_lm_"+(1e6*Math.random()|0),Lt={};function Ge(i,e,t,s,u){if(s&&s.once)return gt(i,e,t,s,u);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Ge(i,e[m],t,s,u);return null}return t=As(t),i&&i[Vr]?i.N(e,t,on(s)?!!s.capture:!!s,u):Re(i,e,t,!1,s,u)}function Re(i,e,t,s,u,m){if(!e)throw Error("Invalid event type");var E=on(u)?!!u.capture:!!u,R=Qi(i);if(R||(i[Xt]=R=new Je(i)),(t=R.add(e,t,s,E,m)).proxy)return t;if(s=function Ae(){const e=ci;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Gn||(u=E),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(qn(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function gt(i,e,t,s,u){if(Array.isArray(e)){for(var m=0;m<e.length;m++)gt(i,e[m],t,s,u);return null}return t=As(t),i&&i[Vr]?i.O(e,t,on(s)?!!s.capture:!!s,u):Re(i,e,t,!0,s,u)}function cn(i,e,t,s,u){if(Array.isArray(e))for(var m=0;m<e.length;m++)cn(i,e[m],t,s,u);else s=on(s)?!!s.capture:!!s,t=As(t),i&&i[Vr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=ft(m=i.g[e],t,s,u))&&(Ft(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=Qi(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ft(e,t,s,u)),(t=-1<i?e[i]:null)&&_r(t))}function _r(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Vr])Ue(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(qn(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Qi(e))?(Ue(t,i),0==t.h&&(t.src=null,e[Xt]=null)):Ft(i)}}}function qn(i){return i in Lt?Lt[i]:Lt[i]="on"+i}function ci(i,e){if(i.ba)i=!0;else{e=new On(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&_r(i),i=t.call(s,e)}return i}function Qi(i){return(i=i[Xt])instanceof Je?i:null}var ls="__closure_events_fn_"+(1e9*Math.random()>>>0);function As(i){return"function"==typeof i?i:(i[ls]||(i[ls]=function(e){return i.handleEvent(e)}),i[ls])}function Ni(){st.call(this),this.i=new Je(this),this.P=this,this.I=null}function di(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new tn(e,i);else if(e instanceof tn)e.target=e.target||i;else{var u=e;$r(e=new tn(s,i),u)}if(u=!0,t)for(var m=t.length-1;0<=m;m--){var E=e.g=t[m];u=ss(E,s,!0,e)&&u}if(u=ss(E=e.g=i,s,!0,e)&&u,u=ss(E,s,!1,e)&&u,t)for(m=0;m<t.length;m++)u=ss(E=e.g=t[m],s,!1,e)&&u}function ss(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,m=0;m<e.length;++m){var E=e[m];if(E&&!E.ba&&E.capture==t){var R=E.listener,X=E.ha||E.src;E.ea&&Ue(i.i,E),u=!1!==R.call(X,s)&&u}}return u&&!s.defaultPrevented}kt(Ni,st),Ni.prototype[Vr]=!0,Ni.prototype.removeEventListener=function(i,e,t,s){cn(this,i,e,t,s)},Ni.prototype.M=function(){if(Ni.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)Ft(t[s]);delete i.g[e],i.h--}}this.I=null},Ni.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Ni.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Oi=et.JSON.stringify;function En(){var i=Gi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var us,mi=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Mi,i=>i.reset());class Mi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bs(i){et.setTimeout(()=>{throw i},0)}function Ui(i,e){us||function Ti(){var i=et.Promise.resolve(void 0);us=function(){i.then(Ar)}}(),Ki||(us(),Ki=!0),Gi.add(i,e)}var Ki=!1,Gi=new class yr{constructor(){this.h=this.g=null}add(e,t){const s=mi.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Ar(){for(var i;i=En();){try{i.h.call(i.g)}catch(t){bs(t)}var e=mi;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Ki=!1}function os(i,e){Ni.call(this),this.h=i||1,this.g=e||et,this.j=mr(this.lb,this),this.l=Date.now()}function ds(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function $s(i,e,t){if("function"==typeof i)t&&(i=mr(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=mr(i.handleEvent,i)}return 2147483647<Number(e)?-1:et.setTimeout(i,e||0)}function Yr(i){i.g=$s(()=>{i.g=null,i.i&&(i.i=!1,Yr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}kt(os,Ni),(Me=os.prototype).ca=!1,Me.R=null,Me.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),di(this,"tick"),this.ca&&(ds(this),this.start()))}},Me.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Me.M=function(){os.X.M.call(this),ds(this),delete this.g};class wr extends st{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yr(this)}M(){super.M(),this.g&&(et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(i){st.call(this),this.h=i,this.g={}}kt(Ir,st);var Xi=[];function Qr(i,e,t,s){Array.isArray(t)||(t&&(Xi[0]=t.toString()),t=Xi);for(var u=0;u<t.length;u++){var m=Ge(e,t[u],s||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function wi(i){Yn(i.g,function(e,t){this.g.hasOwnProperty(t)&&_r(e)},i),i.g={}}function Ks(){this.g=!0}function kr(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function cs(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var m=u[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var E=1;E<u.length;E++)u[E]=""}}}return Oi(t)}catch(R){return e}}(i,t)+(s?" "+s:"")})}Ir.prototype.M=function(){Ir.X.M.call(this),wi(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ks.prototype.Aa=function(){this.g=!1},Ks.prototype.info=function(){};var gs={},ks=null;function Hi(){return ks=ks||new Ni}function $o(i){tn.call(this,gs.Pa,i)}function mo(i){const e=Hi();di(e,new $o(e))}function xs(i,e){tn.call(this,gs.STAT_EVENT,i),this.stat=e}function Zi(i){const e=Hi();di(e,new xs(e,i))}function Ct(i,e){tn.call(this,gs.Qa,i),this.size=e}function dt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return et.setTimeout(function(){i()},e)}gs.Pa="serverreachability",kt($o,tn),gs.STAT_EVENT="statevent",kt(xs,tn),gs.Qa="timingevent",kt(Ct,tn);var xt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},mn={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function $n(){}function ti(){}$n.prototype.h=null;var ai,Yi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ii(){tn.call(this,"d")}function vs(){tn.call(this,"c")}function ms(){}function Ts(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new Ir(this),this.O=Es,this.T=new os(i=dn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Qo}function Qo(){this.i=null,this.g="",this.h=!1}kt(Ii,tn),kt(vs,tn),kt(ms,$n),ms.prototype.g=function(){return new XMLHttpRequest},ms.prototype.i=function(){return{}},ai=new ms;var Es=45e3,Qs={},ws={};function ho(i,e,t){i.K=1,i.v=bi(yo(e)),i.s=t,i.P=!0,Ri(i,null)}function Ri(i,e){i.F=Date.now(),js(i),i.A=yo(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),es(t.i,"t",s),i.C=0,t=i.l.H,i.h=new Qo,i.g=Nt(i.l,t?e:null,!i.s),0<i.N&&(i.L=new wr(mr(i.La,i,i.g),i.N)),Qr(i.S,i.g,"readystatechange",i.ib),e=i.H?Rr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),mo(),function zi(i,e,t,s,u,m){i.info(function(){if(i.g)if(m)for(var E="",R=m.split("&"),X=0;X<R.length;X++){var se=R[X].split("=");if(1<se.length){var Ie=se[0];se=se[1];var ot=Ie.split("_");E=2<=ot.length&&"type"==ot[1]?E+(Ie+"=")+se+"&":E+(Ie+"=redacted&")}}else E=null;else E=m;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+E})}(i.j,i.u,i.A,i.m,i.U,i.s)}function fo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Ms(i,e,t){let u,s=!0;for(;!i.I&&i.C<t.length;){if(u=io(i,t),u==ws){4==e&&(i.o=4,Zi(14),s=!1),kr(i.j,i.m,null,"[Incomplete Response]");break}if(u==Qs){i.o=4,Zi(15),kr(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}kr(i.j,i.m,u,null),Fs(i,u)}fo(i)&&u!=ws&&u!=Qs&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Zi(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),vn(e),e.K=!0,Zi(11))):(kr(i.j,i.m,t,"[Invalid Chunked Response]"),Is(i),Hs(i))}function io(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?ws:(t=Number(e.substring(t,s)),isNaN(t)?Qs:(s+=1)+t>e.length?ws:(e=e.substr(s,t),i.C=s+t,e))}function js(i){i.V=Date.now()+i.O,Vo(i,i.O)}function Vo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=dt(mr(i.gb,i),e)}function Xs(i){i.B&&(et.clearTimeout(i.B),i.B=null)}function Hs(i){0==i.l.G||i.I||Rn(i.l,i)}function Is(i){Xs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,ds(i.T),wi(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Fs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||ys(t.h,i)))if(!i.J&&ys(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch(se){s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0])e:if(t.u)t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=dt(mr(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;gn(t),le(t)}yt(t),Zi(18)}if(1>=ko(t.h)&&t.ja){try{t.ja()}catch(se){}t.ja=void 0}}else Er(t,11)}else if((i.J||t.g==i)&&gn(t),!tr(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let se=u[e];if(t.T=se[0],se=se[1],2==t.G)if("c"==se[0]){t.I=se[1],t.ka=se[2];const Ie=se[3];null!=Ie&&(t.ma=Ie,t.j.info("VER="+t.ma));const ot=se[4];null!=ot&&(t.Ca=ot,t.j.info("SVER="+t.Ca));const Wt=se[5];null!=Wt&&"number"==typeof Wt&&0<Wt&&(t.J=s=1.5*Wt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const Nn=i.g;if(Nn){const Zn=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zn){var m=s.h;m.g||-1==Zn.indexOf("spdy")&&-1==Zn.indexOf("quic")&&-1==Zn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(_o(m,m.h),m.h=null))}if(s.D){const Fr=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fr&&(s.za=Fr,Bi(s.F,s.D,Fr))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var E=i;if((s=t).sa=en(s,s.H?s.ka:null,s.V),E.J){Q(s.h,E);var R=E,X=s.J;X&&R.setTimeout(X),R.B&&(Xs(R),js(R)),s.g=E}else tt(s);0<t.i.length&&ze(t)}else"stop"!=se[0]&&"close"!=se[0]||Er(t,7);else 3==t.G&&("stop"==se[0]||"close"==se[0]?"stop"==se[0]?Er(t,7):ce(t):"noop"!=se[0]&&t.l&&t.l.wa(se),t.A=0)}mo()}catch(se){}}function Js(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(at(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function fs(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(at(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Oo(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(at(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),u=s.length,m=0;m<u;m++)e.call(void 0,s[m],t&&t[m],i)}(Me=Ts.prototype).setTimeout=function(i){this.O=i},Me.ib=function(i){i=i.target;const e=this.L;e&&3==z(i)?e.l():this.La(i)},Me.La=function(i){try{if(i==this.g)e:{const Ie=z(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Ie)&&(3!=Ie||dn||this.g&&(this.h.h||this.g.fa()||J(this.g)))){this.I||4!=Ie||7==e||mo(),Xs(this);var t=this.g.aa();this.Y=t;t:if(fo(this)){var s=J(this.g);i="";var u=s.length,m=4==z(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Is(this),Hs(this);var E="";break t}this.h.i=new et.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:m&&e==u-1});s.splice(0,u),this.h.g+=i,this.C=0,E=this.h.g}else E=this.g.fa();if(this.i=200==t,function hs(i,e,t,s,u,m,E){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+m+" "+E})}(this.j,this.u,this.A,this.m,this.U,Ie,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var R,X=this.g;if((R=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tr(R)){var se=R;break t}}se=null}if(!(t=se)){this.i=!1,this.o=3,Zi(12),Is(this),Hs(this);break e}kr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fs(this,t)}this.P?(Ms(this,Ie,E),dn&&this.i&&3==Ie&&(Qr(this.S,this.T,"tick",this.hb),this.T.start())):(kr(this.j,this.m,E,null),Fs(this,E)),4==Ie&&Is(this),this.i&&!this.I&&(4==Ie?Rn(this.l,this):(this.i=!1,js(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,Zi(12)):(this.o=0,Zi(13)),Is(this),Hs(this)}}}catch(Ie){}},Me.hb=function(){if(this.g){var i=z(this.g),e=this.g.fa();this.C<e.length&&(Xs(this),Ms(this,i,e),this.i&&4!=i&&js(this))}},Me.cancel=function(){this.I=!0,Is(this)},Me.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function qr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(mo(),Zi(17)),Is(this),this.o=2,Hs(this)):Vo(this,this.V-i)};var Gs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function so(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof so){this.h=void 0!==e?e:i.h,Rs(this,i.j),this.s=i.s,this.g=i.g,zs(this,i.m),this.l=i.l,e=i.i;var t=new jr;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ls(this,t),this.o=i.o}else i&&(t=String(i).match(Gs))?(this.h=!!e,Rs(this,t[1]||"",!0),this.s=B(t[2]||""),this.g=B(t[3]||"",!0),zs(this,t[4]),this.l=B(t[5]||"",!0),Ls(this,t[6]||"",!0),this.o=B(t[7]||"")):(this.h=!!e,this.i=new jr(null,this.h))}function yo(i){return new so(i)}function Rs(i,e,t){i.j=t?B(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function zs(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ls(i,e,t){e instanceof jr?(i.i=e,function Fi(i,e){e&&!i.j&&(ei(i),i.i=null,i.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(ni(this,s),es(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=he(e,wn)),i.i=new jr(e,i.h))}function Bi(i,e,t){i.i.set(e,t)}function bi(i){return Bi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function B(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function he(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,W),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function W(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}so.prototype.toString=function(){var i=[],e=this.j;e&&i.push(he(e,ve,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(he(e,ve,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(he(t,"/"==t.charAt(0)?sn:qe,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",he(t,fr)),i.join("")};var ve=/[#\/\?@]/g,qe=/[#\?:]/g,sn=/[#\?]/g,wn=/[#\?@]/g,fr=/#/g;function jr(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ei(i){i.g||(i.g=new Map,i.h=0,i.i&&function ki(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),u=null;if(0<=s){var m=i[t].substring(0,s);u=i[t].substring(s+1)}else m=i[t];e(m,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ni(i,e){ei(i),e=Di(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function fi(i,e){return ei(i),e=Di(i,e),i.g.has(e)}function es(i,e,t){ni(i,e),0<t.length&&(i.i=null,i.g.set(Di(i,e),Yt(t)),i.h+=t.length)}function Di(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ns(i){this.l=i||Kr,i=et.PerformanceNavigationTiming?0<(i=et.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(et.g&&et.g.Ga&&et.g.Ga()&&et.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Me=jr.prototype).add=function(i,e){ei(this),this.i=null,i=Di(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Me.forEach=function(i,e){ei(this),this.g.forEach(function(t,s){t.forEach(function(u){i.call(e,u,s,this)},this)},this)},Me.oa=function(){ei(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const u=i[s];for(let m=0;m<u.length;m++)t.push(e[s])}return t},Me.W=function(i){ei(this);let e=[];if("string"==typeof i)fi(this,i)&&(e=e.concat(this.g.get(Di(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Me.set=function(i,e){return ei(this),this.i=null,fi(this,i=Di(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Me.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Me.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const m=encodeURIComponent(String(s)),E=this.W(s);for(s=0;s<E.length;s++){var u=m;""!==E[s]&&(u+="="+encodeURIComponent(String(E[s]))),i.push(u)}}return this.i=i.join("&")};var Kr=10;function Zs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ko(i){return i.h?1:i.g?i.g.size:0}function ys(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function _o(i,e){i.g?i.g.add(e):i.h=e}function Q(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function G(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Yt(i.i)}function V(){}function ye(){this.g=new V}function Ye(i,e,t){const s=t||"";try{Js(i,function(u,m){let E=u;on(u)&&(E=Oi(u)),e.push(s+m+"="+encodeURIComponent(E))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function ee(i,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch(m){}}function K(i){this.l=i.ac||null,this.j=i.jb||!1}function Ce(i,e){Ni.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Ve,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ns.prototype.cancel=function(){if(this.i=G(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},V.prototype.stringify=function(i){return et.JSON.stringify(i,void 0)},V.prototype.parse=function(i){return et.JSON.parse(i,void 0)},kt(K,$n),K.prototype.g=function(){return new Ce(this.l,this.j)},K.prototype.i=function(i){return function(){return i}}({}),kt(Ce,Ni);var Ve=0;function it(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function qt(i){i.readyState=4,i.l=null,i.j=null,i.A=null,_n(i)}function _n(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Me=Ce.prototype).open=function(i,e){if(this.readyState!=Ve)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,_n(this)},Me.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||et).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Me.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=Ve},Me.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,_n(this)),this.g&&(this.readyState=3,_n(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==et.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;it(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Me.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?qt(this):_n(this),3==this.readyState&&it(this)}},Me.Va=function(i){this.g&&(this.response=this.responseText=i,qt(this))},Me.Ua=function(i){this.g&&(this.response=i,qt(this))},Me.ga=function(){this.g&&qt(this)},Me.setRequestHeader=function(i,e){this.v.append(i,e)},Me.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Me.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Ce.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var br=et.JSON.parse;function Xn(i){Ni.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ri,this.K=this.L=!1}kt(Xn,Ni);var ri="",_i=/^https?$/i,yi=["POST","PUT"];function ts(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,l(i),I(i)}function l(i){i.D||(i.D=!0,di(i,"complete"),di(i,"error"))}function A(i){if(i.h&&void 0!==Tt&&(!i.C[1]||4!=z(i)||2!=i.aa()))if(i.v&&4==z(i))$s(i.Ha,0,i);else if(di(i,"readystatechange"),4==z(i)){i.h=!1;try{const R=i.aa();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===R){var u=String(i.H).match(Gs)[1]||null;if(!u&&et.self&&et.self.location){var m=et.self.location.protocol;u=m.substr(0,m.length-1)}s=!_i.test(u?u.toLowerCase():"")}t=s}if(t)di(i,"complete"),di(i,"success");else{i.m=6;try{var E=2<z(i)?i.g.statusText:""}catch(X){E=""}i.j=E+" ["+i.aa()+"]",l(i)}}finally{I(i)}}}function I(i,e){if(i.g){P(i);const t=i.g,s=i.C[0]?wt:null;i.g=null,i.C=null,e||di(i,"ready");try{t.onreadystatechange=s}catch(u){}}}function P(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(et.clearTimeout(i.A),i.A=null)}function z(i){return i.g?i.g.readyState:0}function J(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ri:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function me(i){let e="";return Yn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function be(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=me(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Bi(i,e,t))}function oe(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function ge(i){this.Ca=0,this.i=[],this.j=new Ks,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=oe("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=oe("baseRetryDelayMs",5e3,i),this.bb=oe("retryDelaySeedMs",1e4,i),this.$a=oe("forwardChannelMaxRetries",2,i),this.ta=oe("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ns(i&&i.concurrentRequestLimit),this.Fa=new ye,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ce(i){if(Te(i),3==i.G){var e=i.U++,t=yo(i.F);Bi(t,"SID",i.I),Bi(t,"RID",e),Bi(t,"TYPE","terminate"),Fe(i,t),(e=new Ts(i,i.j,e,void 0)).K=2,e.v=bi(yo(t)),t=!1,et.navigator&&et.navigator.sendBeacon&&(t=et.navigator.sendBeacon(e.v.toString(),"")),!t&&et.Image&&((new Image).src=e.v,t=!0),t||(e.g=Nt(e.l,null),e.g.da(e.v)),e.F=Date.now(),js(e)}Fn(i)}function le(i){i.g&&(vn(i),i.g.cancel(),i.g=null)}function Te(i){le(i),i.u&&(et.clearTimeout(i.u),i.u=null),gn(i),i.h.cancel(),i.m&&("number"==typeof i.m&&et.clearTimeout(i.m),i.m=null)}function ze(i){Zs(i.h)||i.m||(i.m=!0,Ui(i.Ja,i),i.C=0)}function De(i,e){var t;t=e?e.m:i.U++;const s=yo(i.F);Bi(s,"SID",i.I),Bi(s,"RID",t),Bi(s,"AID",i.T),Fe(i,s),i.o&&i.s&&be(s,i.o,i.s),t=new Ts(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=_t(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),_o(i.h,t),ho(t,s,e)}function Fe(i,e){i.ia&&Yn(i.ia,function(t,s){Bi(e,s,t)}),i.l&&Js({},function(t,s){Bi(e,s,t)})}function _t(i,e,t){t=Math.min(i.i.length,t);var s=i.l?mr(i.l.Ra,i.l,i):null;e:{var u=i.i;let m=-1;for(;;){const E=["count="+t];-1==m?0<t?(m=u[0].h,E.push("ofs="+m)):m=0:E.push("ofs="+m);let R=!0;for(let X=0;X<t;X++){let se=u[X].h;const Ie=u[X].g;if(se-=m,0>se)m=Math.max(0,u[X].h-100),R=!1;else try{Ye(Ie,E,"req"+se+"_")}catch(ot){s&&s(Ie)}}if(R){s=E.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function tt(i){i.g||i.u||(i.Z=1,Ui(i.Ia,i),i.A=0)}function yt(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=dt(mr(i.Ia,i),er(i,i.A)),i.A++,0))}function vn(i){null!=i.B&&(et.clearTimeout(i.B),i.B=null)}function Sn(i){i.g=new Ts(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=yo(i.sa);Bi(e,"RID","rpc"),Bi(e,"SID",i.I),Bi(e,"CI",i.L?"0":"1"),Bi(e,"AID",i.T),Bi(e,"TYPE","xmlhttp"),Fe(i,e),i.o&&i.s&&be(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=bi(yo(e)),t.s=null,t.P=!0,Ri(t,i)}function gn(i){null!=i.v&&(et.clearTimeout(i.v),i.v=null)}function Rn(i,e){var t=null;if(i.g==e){gn(i),vn(i),i.g=null;var s=2}else{if(!ys(i.h,e))return;t=e.D,Q(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;di(s=Hi(),new Ct(s,t)),ze(i)}else tt(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==s&&function nt(i,e){return!(ko(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=dt(mr(i.Ja,i,e),er(i,i.C)),i.C++,0)))}(i,e)||2==s&&yt(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:Er(i,5);break;case 4:Er(i,10);break;case 3:Er(i,6);break;default:Er(i,2)}}function er(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Er(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=mr(i.kb,i);t||(t=new so("//www.google.com/images/cleardot.gif"),et.location&&"http"==et.location.protocol||Rs(t,"https"),bi(t)),function Pn(i,e){const t=new Ks;if(et.Image){const s=new Image;s.onload=Vt(ee,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Vt(ee,t,s,"TestLoadImage: error",!1,e),s.onabort=Vt(ee,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Vt(ee,t,s,"TestLoadImage: timeout",!1,e),et.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Zi(2);i.G=0,i.l&&i.l.va(e),Fn(i),Te(i)}function Fn(i){if(i.G=0,i.la=[],i.l){const e=G(i.h);(0!=e.length||0!=i.i.length)&&(Rt(i.la,e),Rt(i.la,i.i),i.h.i.length=0,Yt(i.i),i.i.length=0),i.l.ua()}}function en(i,e,t){var s=t instanceof so?yo(t):new so(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),zs(s,s.m);else{var u=et.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var m=new so(null,void 0);s&&Rs(m,s),e&&(m.g=e),u&&zs(m,u),t&&(m.l=t),s=m}return e=i.za,(t=i.D)&&e&&Bi(s,t,e),Bi(s,"VER",i.ma),Fe(i,s),s}function Nt(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(t&&i.Da&&!i.ra?new K({jb:!0}):i.ra)).Ka(i.H),e}function hn(){}function or(){if(rs&&!(10<=Number(ui)))throw Error("Environmental error: no available transport.")}function ir(i,e){Ni.call(this),this.g=new ge(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!tr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tr(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Jn(this)}function zt(i){Ii.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function ur(){vs.call(this),this.status=1}function Jn(i){this.g=i}(Me=Xn.prototype).Ka=function(i){this.L=i},Me.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ai.g(),this.C=function Pr(i){return i.h||(i.h=i.i())}(this.u?this.u:ai),this.g.onreadystatechange=mr(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void ts(this,m)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)t.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const m of s.keys())t.set(m,s.get(m))}s=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),u=et.FormData&&i instanceof et.FormData,!(0<=ut(yi,e))||s||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,E]of t)this.g.setRequestHeader(m,E);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{P(this),0<this.B&&((this.K=function $i(i){return rs&&function Br(){return function xr(i){var e=Gr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=lr(String(rn)).split("."),t=lr("9").split("."),s=Math.max(e.length,t.length);for(let E=0;0==i&&E<s;E++){var u=e[E]||"",m=t[E]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==u[0].length&&0==m[0].length)break;i=Xr(0==u[1].length?0:parseInt(u[1],10),0==m[1].length?0:parseInt(m[1],10))||Xr(0==u[2].length,0==m[2].length)||Xr(u[2],m[2]),u=u[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.qa,this)):this.A=$s(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){ts(this,m)}},Me.qa=function(){void 0!==Tt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,di(this,"timeout"),this.abort(8))},Me.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,di(this,"complete"),di(this,"abort"),I(this))},Me.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),I(this,!0)),Xn.X.M.call(this)},Me.Ha=function(){this.s||(this.F||this.v||this.l?A(this):this.fb())},Me.fb=function(){A(this)},Me.aa=function(){try{return 2<z(this)?this.g.status:-1}catch(i){return-1}},Me.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Me.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),br(e)}},Me.Ea=function(){return this.m},Me.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Me=ge.prototype).ma=8,Me.G=1,Me.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new Ts(this,this.j,i,void 0);let m=this.s;if(this.S&&(m?(m=Rr(m),$r(m,this.S)):m=this.S),null!==this.o||this.N||(u.H=m,m=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_t(this,u,e),Bi(t=yo(this.F),"RID",i),Bi(t,"CVER",22),this.D&&Bi(t,"X-HTTP-Session-Id",this.D),Fe(this,t),m&&(this.N?e="headers="+encodeURIComponent(String(me(m)))+"&"+e:this.o&&be(t,this.o,m)),_o(this.h,u),this.Ya&&Bi(t,"TYPE","init"),this.O?(Bi(t,"$req",e),Bi(t,"SID","null"),u.Z=!0,ho(u,t,null)):ho(u,t,e),this.G=2}}else 3==this.G&&(i?De(this,i):0==this.i.length||Zs(this.h)||De(this))},Me.Ia=function(){if(this.u=null,Sn(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=dt(mr(this.eb,this),i)}},Me.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Zi(10),le(this),Sn(this))},Me.cb=function(){null!=this.v&&(this.v=null,le(this),yt(this),Zi(19))},Me.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Zi(2)):(this.j.info("Failed to ping google.com"),Zi(1))},(Me=hn.prototype).xa=function(){},Me.wa=function(){},Me.va=function(){},Me.ua=function(){},Me.Ra=function(){},or.prototype.g=function(i,e){return new ir(i,e)},kt(ir,Ni),ir.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Zi(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=en(i,null,i.V),ze(i)},ir.prototype.close=function(){ce(this.g)},ir.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Oi(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&ze(e)},ir.prototype.M=function(){this.g.l=null,delete this.j,ce(this.g),delete this.g,ir.X.M.call(this)},kt(zt,Ii),kt(ur,vs),kt(Jn,hn),Jn.prototype.xa=function(){di(this.g,"a")},Jn.prototype.wa=function(i){di(this.g,new zt(i))},Jn.prototype.va=function(i){di(this.g,new ur)},Jn.prototype.ua=function(){di(this.g,"b")},or.prototype.createWebChannel=or.prototype.g,ir.prototype.send=ir.prototype.u,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,xt.NO_ERROR=0,xt.TIMEOUT=8,xt.HTTP_ERROR=6,mn.COMPLETE="complete",ti.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",Ni.prototype.listen=Ni.prototype.N,Xn.prototype.listenOnce=Xn.prototype.O,Xn.prototype.getLastError=Xn.prototype.Oa,Xn.prototype.getLastErrorCode=Xn.prototype.Ea,Xn.prototype.getStatus=Xn.prototype.aa,Xn.prototype.getResponseJson=Xn.prototype.Sa,Xn.prototype.getResponseText=Xn.prototype.fa,Xn.prototype.send=Xn.prototype.da,Xn.prototype.setWithCredentials=Xn.prototype.Ka;var vi=Ut.createWebChannelTransport=function(){return new or},Ai=Ut.getStatEventTarget=function(){return Hi()},Ws=Ut.ErrorCode=xt,Z=Ut.EventType=mn,C=Ut.Event=gs,T=Ut.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},k=Ut.FetchXmlHttpFactory=K,ue=Ut.WebChannel=ti,Se=Ut.XhrIo=Xn;const Ke="@firebase/firestore";class Be{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Be.UNAUTHENTICATED=new Be(null),Be.GOOGLE_CREDENTIALS=new Be("google-credentials-uid"),Be.FIRST_PARTY=new Be("first-party-uid"),Be.MOCK_USER=new Be("mock-user");let It="9.15.0";const Qt=new an.Yd("@firebase/firestore");function ar(){return Qt.logLevel}function Jt(i,...e){if(Qt.logLevel<=an.in.DEBUG){const t=e.map(li);Qt.debug(`Firestore (${It}): ${i}`,...t)}}function Sr(i,...e){if(Qt.logLevel<=an.in.ERROR){const t=e.map(li);Qt.error(`Firestore (${It}): ${i}`,...t)}}function hr(i,...e){if(Qt.logLevel<=an.in.WARN){const t=e.map(li);Qt.warn(`Firestore (${It}): ${i}`,...t)}}function li(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function jn(i="Unexpected state"){const e=`FIRESTORE (${It}) INTERNAL ASSERTION FAILED: `+i;throw Sr(e),new Error(e)}function sr(i,e){i||jn()}function Kn(i,e){return i}const $t={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class An extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ps{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ps{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Be.UNAUTHENTICATED))}shutdown(){}}class O{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class M{constructor(e){this.t=e,this.currentUser=Be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const m=se=>this.i!==u?(u=this.i,t(se)):Promise.resolve();let E=new ps;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new ps,e.enqueueRetryable(()=>m(this.currentUser))};const R=()=>{const se=E;e.enqueueRetryable((0,xe.Z)(function*(){yield se.promise,yield m(s.currentUser)}))},X=se=>{Jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=se,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(se=>X(se)),setTimeout(()=>{if(!this.auth){const se=this.t.getImmediate({optional:!0});se?X(se):(Jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new ps)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(sr("string"==typeof s.accessToken),new Ps(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return sr(null===e||"string"==typeof e),new Be(e)}}class S{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u,this.type="FirstParty",this.user=Be.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(sr(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class q{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u}getToken(){return Promise.resolve(new S(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Be.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ne{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _e{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=m=>{null!=m.error&&Jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const E=m.token!==this.A;return this.A=m.token,Jt("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>s(m))};const u=m=>{Jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>u(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?u(m):Jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(sr("string"==typeof t.token),this.A=t.token,new ne(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ne(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class Mt{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=Ne(40);for(let m=0;m<u.length;++m)s.length<20&&u[m]<t&&(s+=e.charAt(u[m]%e.length))}return s}}function jt(i,e){return i<e?-1:i>e?1:0}function pr(i,e,t){return i.length===e.length&&i.every((s,u)=>t(s,e[u]))}function cr(i){return i+"\0"}class Or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new An($t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new An($t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new An($t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new An($t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Or.fromMillis(Date.now())}static fromDate(e){return Or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Or(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bn(e)}static min(){return new Bn(new Or(0,0))}static max(){return new Bn(new Or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ys{constructor(e,t,s){void 0===t?t=0:t>e.length&&jn(),void 0===s?s=e.length-t:s>e.length-t&&jn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Ys.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const m=e.get(u),E=t.get(u);if(m<E)return-1;if(m>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class vr extends Ys{construct(e,t,s){return new vr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new An($t.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new vr(t)}static emptyPath(){return new vr([])}}const ua=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ss extends Ys{construct(e,t,s){return new Ss(e,t,s)}static isValidIdentifier(e){return ua.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ss.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ss(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const m=()=>{if(0===s.length)throw new An($t.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let E=!1;for(;u<e.length;){const R=e[u];if("\\"===R){if(u+1===e.length)throw new An($t.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[u+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new An($t.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=X,u+=2}else"`"===R?(E=!E,u++):"."!==R||E?(s+=R,u++):(m(),u++)}if(m(),E)throw new An($t.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ss(t)}static emptyPath(){return new Ss([])}}class Un{constructor(e){this.path=e}static fromPath(e){return new Un(vr.fromString(e))}static fromName(e){return new Un(vr.fromString(e).popFirst(5))}static empty(){return new Un(vr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===vr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return vr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Un(new vr(e.slice()))}}class lo{constructor(e,t,s,u){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=u}}function Ao(i){return i.fields.find(e=>2===e.kind)}function Vs(i){return i.fields.filter(e=>2!==e.kind)}lo.UNKNOWN_ID=-1;class Fl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ll{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ll(0,ra.min())}}function mu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=Bn.fromTimestamp(1e9===s?new Or(t+1,0):new Or(t,s));return new ra(u,Un.empty(),e)}function po(i){return new ra(i.readTime,i.key,-1)}class ra{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ra(Bn.min(),Un.empty(),-1)}static max(){return new ra(Bn.max(),Un.empty(),-1)}}function Ca(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Un.comparator(i.documentKey,e.documentKey),0!==t?t:jt(i.largestBatchId,e.largestBatchId))}const wc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ic{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ia(i){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,xe.Z)(function*(i){if(i.code!==$t.FAILED_PRECONDITION||i.message!==wc)throw i;Jt("LocalStore","Unexpectedly lost primary lease")}),Xl.apply(this,arguments)}class nn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&jn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nn((s,u)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(s,u)},this.catchCallback=m=>{this.wrapFailure(t,m).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof nn?t:nn.resolve(t)}catch(t){return nn.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nn.reject(t)}static resolve(e){return new nn((t,s)=>{t(e)})}static reject(e){return new nn((t,s)=>{s(e)})}static waitFor(e){return new nn((t,s)=>{let u=0,m=0,E=!1;e.forEach(R=>{++u,R.next(()=>{++m,E&&m===u&&t()},X=>s(X))}),E=!0,m===u&&t()})}static or(e){let t=nn.resolve(!1);for(const s of e)t=t.next(u=>u?nn.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,m)=>{s.push(t.call(this,u,m))}),this.waitFor(s)}static mapArray(e,t){return new nn((s,u)=>{const m=e.length,E=new Array(m);let R=0;for(let X=0;X<m;X++){const se=X;t(e[se]).next(Ie=>{E[se]=Ie,++R,R===m&&s(E)},Ie=>u(Ie))}})}static doWhile(e,t){return new nn((s,u)=>{const m=()=>{!0===e()?t().next(()=>{m()},u):s()};m()})}}class Qa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ps,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ta(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const u=Xo(s.target.error);this.P.reject(new Ta(e,u))}}static open(e,t,s,u){try{return new Qa(t,e.transaction(u,s))}catch(m){throw new Ta(t,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Jt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Gu(t)}}class ba{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===ba.D((0,Ht.z$)())&&Sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Jt("SimpleDb","Removing database:",e),oa(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ht.hl)())return!1;if(ba.N())return!0;const e=(0,Ht.z$)(),t=ba.D(e),s=0<t&&t<10,u=ba.k(e),m=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,xe.Z)(function*(){return t.db||(Jt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=E=>{s(E.target.result)},m.onblocked=()=>{u(new Ta(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=E=>{const R=E.target.error;u("VersionError"===R.name?new An($t.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new An($t.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Ta(e,R))},m.onupgradeneeded=E=>{Jt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.S.$(E.target.result,m.transaction,E.oldVersion,t.version).next(()=>{Jt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var m=this;return(0,xe.Z)(function*(){const E="readonly"===t;let R=0;for(;;){++R;try{m.db=yield m.F(e);const X=Qa.open(m.db,e,E?"readonly":"readwrite",s),se=u(X).next(Ie=>(X.V(),Ie)).catch(Ie=>(X.abort(Ie),nn.reject(Ie))).toPromise();return se.catch(()=>{}),yield X.v,se}catch(X){const se=X,Ie="FirebaseError"!==se.name&&R<3;if(Jt("SimpleDb","Transaction failed with error:",se.message,"Retrying:",Ie),m.close(),!Ie)return Promise.reject(se)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wo{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return oa(this.q.delete())}}class Ta extends An{constructor(e,t){super($t.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sa(i){return"IndexedDbTransactionError"===i.name}class Gu{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Jt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Jt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),oa(s)}add(e){return Jt("SimpleDb","ADD",this.store.name,e,e),oa(this.store.add(e))}get(e){return oa(this.store.get(e)).next(t=>(void 0===t&&(t=null),Jt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Jt("SimpleDb","DELETE",this.store.name,e),oa(this.store.delete(e))}count(){return Jt("SimpleDb","COUNT",this.store.name),oa(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const u=this.cursor(s),m=[];return this.H(u,(E,R)=>{m.push(R)}).next(()=>m)}{const u=this.store.getAll(s.range);return new nn((m,E)=>{u.onerror=R=>{E(R.target.error)},u.onsuccess=R=>{m(R.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new nn((u,m)=>{s.onerror=E=>{m(E.target.error)},s.onsuccess=E=>{u(E.target.result)}})}Y(e,t){Jt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const u=this.cursor(s);return this.H(u,(m,E,R)=>R.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.H(u,t)}tt(e){const t=this.cursor({});return new nn((s,u)=>{t.onerror=m=>{const E=Xo(m.target.error);u(E)},t.onsuccess=m=>{const E=m.target.result;E?e(E.primaryKey,E.value).next(R=>{R?E.continue():s()}):s()}})}H(e,t){const s=[];return new nn((u,m)=>{e.onerror=E=>{m(E.target.error)},e.onsuccess=E=>{const R=E.target.result;if(!R)return void u();const X=new wo(R),se=t(R.primaryKey,R.value,X);if(se instanceof nn){const Ie=se.catch(ot=>(X.done(),nn.reject(ot)));s.push(Ie)}X.isDone?u():null===X.G?R.continue():R.continue(X.G)}}).next(()=>nn.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oa(i){return new nn((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=Xo(s.target.error);t(u)}})}let xo=!1;function Xo(i){const e=ba.D((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new An("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xo||(xo=!0,setTimeout(()=>{throw s},0)),s}}return i}class Jl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Jt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,xe.Z)(function*(){t.task=null;try{Jt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){sa(s)?Jt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield ia(s)}yield t.nt(6e4)}))}}class yu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,xe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let u=t,m=!0;return nn.doWhile(()=>!0===m&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!s.has(E))return Jt("IndexBackiller",`Processing collection: ${E}`),this.rt(e,E,u).next(R=>{u-=R,s.add(E)});m=!1})).next(()=>t-u)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,s).next(m=>{const E=m.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.ot(u,m)).next(R=>(Jt("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>E.size)}))}ot(e,t){let s=e;return t.changes.forEach((u,m)=>{const E=po(m);Ca(E,s)>0&&(s=E)}),new ra(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let vo=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=u=>this.ut(u),this.ct=u=>s.writeSequenceNumber(u))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class cl{constructor(e,t,s,u,m,E,R,X){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=m,this.forceLongPolling=E,this.autoDetectLongPolling=R,this.useFetchStreams=X}}class Jo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}function Il(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ua(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function _u(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ca(i){return null==i}function Eo(i){return 0===i&&1/i==-1/0}function Xa(i){return"number"==typeof i&&Number.isInteger(i)&&!Eo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class uo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new uo(t)}static fromUint8Array(e){const t=function(s){let u="";for(let m=0;m<s.length;++m)u+=String.fromCharCode(s[m]);return u}(e);return new uo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}uo.EMPTY_BYTE_STRING=new uo("");const $a=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ja(i){if(sr(!!i),"string"==typeof i){let e=0;const t=$a.exec(i);if(sr(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:eo(i.seconds),nanos:eo(i.nanos)}}function eo(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ja(i){return"string"==typeof i?uo.fromBase64String(i):uo.fromUint8Array(i)}function Vl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function el(i){const e=i.mapValue.fields.__previous_value__;return Vl(e)?el(e):e}function wa(i){const e=ja(i.mapValue.fields.__local_write_time__.timestampValue);return new Or(e.seconds,e.nanos)}const ea={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dl={nullValue:"NULL_VALUE"};function tl(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Vl(i)?4:Pt(i)?9007199254740991:10:jn()}function co(i,e){if(i===e)return!0;const t=tl(i);if(t!==tl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return wa(i).isEqual(wa(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const m=ja(s.timestampValue),E=ja(u.timestampValue);return m.seconds===E.seconds&&m.nanos===E.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Ja(i.bytesValue).isEqual(Ja(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,u){return eo(s.geoPointValue.latitude)===eo(u.geoPointValue.latitude)&&eo(s.geoPointValue.longitude)===eo(u.geoPointValue.longitude)}(i,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return eo(s.integerValue)===eo(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const m=eo(s.doubleValue),E=eo(u.doubleValue);return m===E?Eo(m)===Eo(E):isNaN(m)&&isNaN(E)}return!1}(i,e);case 9:return pr(i.arrayValue.values||[],e.arrayValue.values||[],co);case 10:return function(s,u){const m=s.mapValue.fields||{},E=u.mapValue.fields||{};if(Il(m)!==Il(E))return!1;for(const R in m)if(m.hasOwnProperty(R)&&(void 0===E[R]||!co(m[R],E[R])))return!1;return!0}(i,e);default:return jn()}var u}function Ha(i,e){return void 0!==(i.values||[]).find(t=>co(t,e))}function Io(i,e){if(i===e)return 0;const t=tl(i),s=tl(e);if(t!==s)return jt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(i.booleanValue,e.booleanValue);case 2:return function(u,m){const E=eo(u.integerValue||u.doubleValue),R=eo(m.integerValue||m.doubleValue);return E<R?-1:E>R?1:E===R?0:isNaN(E)?isNaN(R)?0:-1:1}(i,e);case 3:return zu(i.timestampValue,e.timestampValue);case 4:return zu(wa(i),wa(e));case 5:return jt(i.stringValue,e.stringValue);case 6:return function(u,m){const E=Ja(u),R=Ja(m);return E.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(u,m){const E=u.split("/"),R=m.split("/");for(let X=0;X<E.length&&X<R.length;X++){const se=jt(E[X],R[X]);if(0!==se)return se}return jt(E.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,m){const E=jt(eo(u.latitude),eo(m.latitude));return 0!==E?E:jt(eo(u.longitude),eo(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,m){const E=u.values||[],R=m.values||[];for(let X=0;X<E.length&&X<R.length;++X){const se=Io(E[X],R[X]);if(se)return se}return jt(E.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,m){if(u===ea.mapValue&&m===ea.mapValue)return 0;if(u===ea.mapValue)return 1;if(m===ea.mapValue)return-1;const E=u.fields||{},R=Object.keys(E),X=m.fields||{},se=Object.keys(X);R.sort(),se.sort();for(let Ie=0;Ie<R.length&&Ie<se.length;++Ie){const ot=jt(R[Ie],se[Ie]);if(0!==ot)return ot;const Wt=Io(E[R[Ie]],X[se[Ie]]);if(0!==Wt)return Wt}return jt(R.length,se.length)}(i.mapValue,e.mapValue);default:throw jn()}}function zu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return jt(i,e);const t=ja(i),s=ja(e),u=jt(t.seconds,s.seconds);return 0!==u?u:jt(t.nanos,s.nanos)}function hl(i){return Sl(i)}function Sl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=ja(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ja(i.bytesValue).toBase64():"referenceValue"in i?Un.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let u="[",m=!0;for(const E of s.values||[])m?m=!1:u+=",",u+=Sl(E);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let m="{",E=!0;for(const R of u)E?E=!1:m+=",",m+=`${R}:${Sl(s.fields[R])}`;return m+"}"}(i.mapValue):jn();var e}function Ia(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ul(i){return!!i&&"integerValue"in i}function Ra(i){return!!i&&"arrayValue"in i}function U(i){return!!i&&"nullValue"in i}function Y(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function de(i){return!!i&&"mapValue"in i}function je(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ua(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=je(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=je(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Pt(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kt(i){return"nullValue"in i?dl:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ia(Jo.empty(),Un.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:jn()}function Vn(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ia(Jo.empty(),Un.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ea:jn()}function Hr(i,e){const t=Io(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Zr(i,e){const t=Io(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class zr{constructor(e,t){this.position=e,this.inclusive=t}}function Wi(i,e,t){let s=0;for(let u=0;u<i.position.length;u++){const m=e[u],E=i.position[u];if(s=m.field.isKeyField()?Un.comparator(Un.fromName(E.referenceValue),t.key):Io(E,t.data.field(m.field)),"desc"===m.dir&&(s*=-1),0!==s)break}return s}function Ei(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!co(i.position[t],e.position[t]))return!1;return!0}class Ho{}class ii extends Ho{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Bl(e,t,s):"array-contains"===t?new qd(e,s):"in"===t?new vu(e,s):"not-in"===t?new Wu(e,s):"array-contains-any"===t?new cd(e,s):new ii(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ld(e,s):new ud(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Io(t,this.value)):null!==t&&tl(this.value)===tl(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class is extends Ho{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new is(e,t)}matches(e){return Sa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Sa(i){return"and"===i.op}function Pa(i){return"or"===i.op}function Mo(i){return So(i)&&Sa(i)}function So(i){for(const e of i.filters)if(e instanceof is)return!1;return!0}function Ga(i){if(i instanceof ii)return i.field.canonicalString()+i.op.toString()+hl(i.value);{const e=i.filters.map(t=>Ga(t)).join(",");return`${i.op}(${e})`}}function ad(i,e){return i instanceof ii?(t=i,(s=e)instanceof ii&&t.op===s.op&&t.field.isEqual(s.field)&&co(t.value,s.value)):i instanceof is?function(t,s){return s instanceof is&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((u,m,E)=>u&&ad(m,s.filters[E]),!0)}(i,e):void jn();var t,s}function Dl(i,e){const t=i.filters.concat(e);return is.create(t,i.op)}function Al(i){return i instanceof ii?`${(e=i).field.canonicalString()} ${e.op} ${hl(e.value)}`:i instanceof is?function(e){return e.op.toString()+" {"+e.getFilters().map(Al).join(" ,")+"}"}(i):"Filter";var e}class Bl extends ii{constructor(e,t,s){super(e,t,s),this.key=Un.fromName(s.referenceValue)}matches(e){const t=Un.comparator(e.key,this.key);return this.matchesComparison(t)}}class ld extends ii{constructor(e,t){super(e,"in",t),this.keys=Na(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ud extends ii{constructor(e,t){super(e,"not-in",t),this.keys=Na(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Na(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Un.fromName(s.referenceValue))}class qd extends ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ra(t)&&Ha(t.arrayValue,this.value)}}class vu extends ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ha(this.value.arrayValue,t)}}class Wu extends ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ha(this.value.arrayValue,t)}}class cd extends ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ra(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ha(this.value.arrayValue,s))}}class Ro{constructor(e,t="asc"){this.field=e,this.dir=t}}function qu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class to{constructor(e,t){this.comparator=e,this.root=t||ta.EMPTY}insert(e,t){return new to(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ta.BLACK,null,null))}remove(e){return new to(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ta.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?s(e.key,t):1,t&&u&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ta{constructor(e,t,s,u,m){this.key=e,this.value=t,this.color=null!=s?s:ta.RED,this.left=null!=u?u:ta.EMPTY,this.right=null!=m?m:ta.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,m){return new ta(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=u?u:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const m=s(e,u.key);return u=m<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===m?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ta.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return ta.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ta.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ta.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jn();const e=this.left.check();if(e!==this.right.check())throw jn();return e+(this.isRed()?0:1)}}ta.EMPTY=null,ta.RED=!0,ta.BLACK=!1,ta.EMPTY=new class{constructor(){this.size=0}get key(){throw jn()}get value(){throw jn()}get color(){throw jn()}get left(){throw jn()}get right(){throw jn()}copy(i,e,t,s,u){return this}insert(i,e,t){return new ta(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class no{constructor(e){this.comparator=e,this.data=new to(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $l(this.data.getIterator())}getIteratorFrom(e){return new $l(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(0!==this.comparator(u,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new no(this.comparator);return t.data=e,t}}class $l{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(i){return i.hasNext()?i.getNext():void 0}class Go{constructor(e){this.fields=e,e.sort(Ss.comparator)}static empty(){return new Go([])}unionWith(e){let t=new no(Ss.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Go(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pr(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Uo{constructor(e){this.value=e}static empty(){return new Uo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!de(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=je(t)}setAll(e){let t=Ss.emptyPath(),s={},u=[];e.forEach((E,R)=>{if(!t.isImmediateParentOf(R)){const X=this.getFieldsMap(t);this.applyChanges(X,s,u),s={},u=[],t=R.popLast()}E?s[R.lastSegment()]=je(E):u.push(R.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,s,u)}delete(e){const t=this.field(e.popLast());de(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return co(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];de(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){Ua(t,(u,m)=>e[u]=m);for(const u of s)delete e[u]}clone(){return new Uo(je(this.value))}}function Ku(i){const e=[];return Ua(i.fields,(t,s)=>{const u=new Ss([t]);if(de(s)){const m=Ku(s.mapValue).fields;if(0===m.length)e.push(u);else for(const E of m)e.push(u.child(E))}else e.push(u)}),new Go(e)}class Ns{constructor(e,t,s,u,m,E,R){this.key=e,this.documentType=t,this.version=s,this.readTime=u,this.createTime=m,this.data=E,this.documentState=R}static newInvalidDocument(e){return new Ns(e,0,Bn.min(),Bn.min(),Bn.min(),Uo.empty(),0)}static newFoundDocument(e,t,s,u){return new Ns(e,1,t,Bn.min(),s,u,0)}static newNoDocument(e,t){return new Ns(e,2,t,Bn.min(),Bn.min(),Uo.empty(),0)}static newUnknownDocument(e,t){return new Ns(e,3,t,Bn.min(),Bn.min(),Uo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Bn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Uo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Uo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ns&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ns(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zu{constructor(e,t=null,s=[],u=[],m=null,E=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=m,this.startAt=E,this.endAt=R,this.ft=null}}function eu(i,e=null,t=[],s=[],u=null,m=null,E=null){return new Zu(i,e,t,s,u,m,E)}function jl(i){const e=Kn(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Ga(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),ca(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>hl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>hl(s)).join(",")),e.ft=t}return e.ft}function Hl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!qu(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!ad(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ei(i.startAt,e.startAt)&&Ei(i.endAt,e.endAt)}function Yu(i){return Un.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function ya(i,e){return i.filters.filter(t=>t instanceof ii&&t.field.isEqual(e))}function Gl(i,e,t){let s=dl,u=!0;for(const m of ya(i,e)){let E=dl,R=!0;switch(m.op){case"<":case"<=":E=Kt(m.value);break;case"==":case"in":case">=":E=m.value;break;case">":E=m.value,R=!1;break;case"!=":case"not-in":E=dl}Hr({value:s,inclusive:u},{value:E,inclusive:R})<0&&(s=E,u=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=t.position[m];Hr({value:s,inclusive:u},{value:E,inclusive:t.inclusive})<0&&(s=E,u=t.inclusive);break}return{value:s,inclusive:u}}function tu(i,e,t){let s=ea,u=!0;for(const m of ya(i,e)){let E=ea,R=!0;switch(m.op){case">=":case">":E=Vn(m.value),R=!1;break;case"==":case"in":case"<=":E=m.value;break;case"<":E=m.value,R=!1;break;case"!=":case"not-in":E=ea}Zr({value:s,inclusive:u},{value:E,inclusive:R})>0&&(s=E,u=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=t.position[m];Zr({value:s,inclusive:u},{value:E,inclusive:t.inclusive})>0&&(s=E,u=t.inclusive);break}return{value:s,inclusive:u}}class pl{constructor(e,t=null,s=[],u=[],m=null,E="F",R=null,X=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=m,this.limitType=E,this.startAt=R,this.endAt=X,this.dt=null,this._t=null}}function Sc(i,e,t,s,u,m,E,R){return new pl(i,e,t,s,u,m,E,R)}function nu(i){return new pl(i)}function ru(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Qu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function iu(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function gl(i){return null!==i.collectionGroup}function _a(i){const e=Kn(i);if(null===e.dt){e.dt=[];const t=iu(e),s=Qu(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new Ro(t)),e.dt.push(new Ro(Ss.keyField(),"asc"));else{let u=!1;for(const m of e.explicitOrderBy)e.dt.push(m),m.field.isKeyField()&&(u=!0);if(!u){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Ro(Ss.keyField(),m))}}}return e.dt}function da(i){const e=Kn(i);if(!e._t)if("F"===e.limitType)e._t=eu(e.path,e.collectionGroup,_a(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of _a(e))t.push(new Ro(m.field,"desc"===m.dir?"asc":"desc"));const s=e.endAt?new zr(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new zr(e.startAt.position,e.startAt.inclusive):null;e._t=eu(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e._t}function Cu(i,e){e.getFirstInequalityField(),iu(i);const t=i.filters.concat([e]);return new pl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function su(i,e,t){return new pl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function bu(i,e){return Hl(da(i),da(e))&&i.limitType===e.limitType}function Oa(i){return`${jl(da(i))}|lt:${i.limitType}`}function Xu(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Al(s)).join(", ")}]`),ca(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>hl(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>hl(s)).join(",")),`Target(${t})`}(da(i))}; limitType=${i.limitType})`}function ka(i,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Un.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,s){for(const u of _a(t))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(u,m,E){const R=Wi(u,m,E);return u.inclusive?R<=0:R<0}(t.startAt,_a(t),s)||t.endAt&&!function(u,m,E){const R=Wi(u,m,E);return u.inclusive?R>=0:R>0}(t.endAt,_a(t),s)));var t,s}function Da(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ju(i){return(e,t)=>{let s=!1;for(const u of _a(i)){const m=Tu(u,e,t);if(0!==m)return m;s=s||u.field.isKeyField()}return 0}}function Tu(i,e,t){const s=i.field.isKeyField()?Un.comparator(e.key,t.key):function(u,m,E){const R=m.data.field(u),X=E.data.field(u);return null!==R&&null!==X?Io(R,X):jn()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return jn()}}function zl(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eo(e)?"-0":e}}function Dc(i){return{integerValue:""+i}}function Ac(i,e){return Xa(e)?Dc(e):zl(i,e)}class xc{constructor(){this._=void 0}}function wu(i,e,t){return i instanceof Du?function(s,u){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(m.fields.__previous_value__=u),{mapValue:m}}(t,e):i instanceof ml?ec(i,e):i instanceof yl?dd(i,e):function(s,u){const m=Su(s,u),E=Au(m)+Au(s.gt);return Ul(m)&&Ul(s.gt)?Dc(E):zl(s.yt,E)}(i,e)}function Iu(i,e,t){return i instanceof ml?ec(i,e):i instanceof yl?dd(i,e):t}function Su(i,e){return i instanceof zo?Ul(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Du extends xc{}class ml extends xc{constructor(e){super(),this.elements=e}}function ec(i,e){const t=za(e);for(const s of i.elements)t.some(u=>co(u,s))||t.push(s);return{arrayValue:{values:t}}}class yl extends xc{constructor(e){super(),this.elements=e}}function dd(i,e){let t=za(e);for(const s of i.elements)t=t.filter(u=>!co(u,s));return{arrayValue:{values:t}}}class zo extends xc{constructor(e,t){super(),this.yt=e,this.gt=t}}function Au(i){return eo(i.integerValue||i.doubleValue)}function za(i){return Ra(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Aa{constructor(e,t){this.field=e,this.transform=t}}class _l{constructor(e,t){this.version=e,this.transformResults=t}}class ro{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ro}static exists(e){return new ro(void 0,e)}static updateTime(e){return new ro(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function go(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class nl{}function Kd(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Wo(i.key,ro.none()):new ou(i.key,i.data,ro.none());{const t=i.data,s=Uo.empty();let u=new no(Ss.comparator);for(let m of e.fields)if(!u.has(m)){let E=t.field(m);null===E&&m.length>1&&(m=m.popLast(),E=t.field(m)),null===E?s.delete(m):s.set(m,E),u=u.add(m)}return new xl(i.key,s,new Go(u.toArray()),ro.none())}}function xu(i,e,t){i instanceof ou?function(s,u,m){const E=s.value.clone(),R=Ru(s.fieldTransforms,u,m.transformResults);E.setAll(R),u.convertToFoundDocument(m.version,E).setHasCommittedMutations()}(i,e,t):i instanceof xl?function(s,u,m){if(!go(s.precondition,u))return void u.convertToUnknownDocument(m.version);const E=Ru(s.fieldTransforms,u,m.transformResults),R=u.data;R.setAll(Yd(s)),R.setAll(E),u.convertToFoundDocument(m.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Mu(i,e,t,s){return i instanceof ou?function(u,m,E,R){if(!go(u.precondition,m))return E;const X=u.value.clone(),se=tc(u.fieldTransforms,R,m);return X.setAll(se),m.convertToFoundDocument(m.version,X).setHasLocalMutations(),null}(i,e,t,s):i instanceof xl?function(u,m,E,R){if(!go(u.precondition,m))return E;const X=tc(u.fieldTransforms,R,m),se=m.data;return se.setAll(Yd(u)),se.setAll(X),m.convertToFoundDocument(m.version,se).setHasLocalMutations(),null===E?null:E.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(Ie=>Ie.field))}(i,e,t,s):(E=t,go(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):E);var m,E}function Mc(i,e){let t=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),m=Su(s.transform,u||null);null!=m&&(null===t&&(t=Uo.empty()),t.set(s.field,m))}return t||null}function Zd(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&pr(t,s,(u,m)=>function Fa(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof ml&&s instanceof ml||t instanceof yl&&s instanceof yl?pr(t.elements,s.elements,co):t instanceof zo&&s instanceof zo?co(t.gt,s.gt):t instanceof Du&&s instanceof Du);var t,s}(u,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class ou extends nl{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class xl extends nl{constructor(e,t,s,u,m=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Yd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Ru(i,e,t){const s=new Map;sr(i.length===t.length);for(let u=0;u<t.length;u++){const m=i[u],E=m.transform,R=e.data.field(m.field);s.set(m.field,Iu(E,R,t[u]))}return s}function tc(i,e,t){const s=new Map;for(const u of i){const m=u.transform,E=t.data.field(u.field);s.set(u.field,wu(m,E,e))}return s}class Wo extends nl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qo extends nl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rc{constructor(e){this.count=e}}var Fo,_s;function aa(i){switch(i){default:return jn();case $t.CANCELLED:case $t.UNKNOWN:case $t.DEADLINE_EXCEEDED:case $t.RESOURCE_EXHAUSTED:case $t.INTERNAL:case $t.UNAVAILABLE:case $t.UNAUTHENTICATED:return!1;case $t.INVALID_ARGUMENT:case $t.NOT_FOUND:case $t.ALREADY_EXISTS:case $t.PERMISSION_DENIED:case $t.FAILED_PRECONDITION:case $t.ABORTED:case $t.OUT_OF_RANGE:case $t.UNIMPLEMENTED:case $t.DATA_LOSS:return!0}}function Pu(i){if(void 0===i)return Sr("GRPC error has no .code"),$t.UNKNOWN;switch(i){case Fo.OK:return $t.OK;case Fo.CANCELLED:return $t.CANCELLED;case Fo.UNKNOWN:return $t.UNKNOWN;case Fo.DEADLINE_EXCEEDED:return $t.DEADLINE_EXCEEDED;case Fo.RESOURCE_EXHAUSTED:return $t.RESOURCE_EXHAUSTED;case Fo.INTERNAL:return $t.INTERNAL;case Fo.UNAVAILABLE:return $t.UNAVAILABLE;case Fo.UNAUTHENTICATED:return $t.UNAUTHENTICATED;case Fo.INVALID_ARGUMENT:return $t.INVALID_ARGUMENT;case Fo.NOT_FOUND:return $t.NOT_FOUND;case Fo.ALREADY_EXISTS:return $t.ALREADY_EXISTS;case Fo.PERMISSION_DENIED:return $t.PERMISSION_DENIED;case Fo.FAILED_PRECONDITION:return $t.FAILED_PRECONDITION;case Fo.ABORTED:return $t.ABORTED;case Fo.OUT_OF_RANGE:return $t.OUT_OF_RANGE;case Fo.UNIMPLEMENTED:return $t.UNIMPLEMENTED;case Fo.DATA_LOSS:return $t.DATA_LOSS;default:return jn()}}(_s=Fo||(Fo={}))[_s.OK=0]="OK",_s[_s.CANCELLED=1]="CANCELLED",_s[_s.UNKNOWN=2]="UNKNOWN",_s[_s.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_s[_s.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_s[_s.NOT_FOUND=5]="NOT_FOUND",_s[_s.ALREADY_EXISTS=6]="ALREADY_EXISTS",_s[_s.PERMISSION_DENIED=7]="PERMISSION_DENIED",_s[_s.UNAUTHENTICATED=16]="UNAUTHENTICATED",_s[_s.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_s[_s.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_s[_s.ABORTED=10]="ABORTED",_s[_s.OUT_OF_RANGE=11]="OUT_OF_RANGE",_s[_s.UNIMPLEMENTED=12]="UNIMPLEMENTED",_s[_s.INTERNAL=13]="INTERNAL",_s[_s.UNAVAILABLE=14]="UNAVAILABLE",_s[_s.DATA_LOSS=15]="DATA_LOSS";class rl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,m]of s)if(this.equalsFn(u,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,t]],void this.innerSize++;for(let m=0;m<u.length;m++)if(this.equalsFn(u[m][0],e))return void(u[m]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,(t,s)=>{for(const[u,m]of s)e(u,m)})}isEmpty(){return _u(this.inner)}size(){return this.innerSize}}const nc=new to(Un.comparator);function ha(){return nc}const rc=new to(Un.comparator);function ic(...i){let e=rc;for(const t of i)e=e.insert(t.key,t);return e}function au(i){let e=rc;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function vl(){return Ml()}function fa(){return Ml()}function Ml(){return new rl(i=>i.toString(),(i,e)=>i.isEqual(e))}const hd=new to(Un.comparator),fd=new no(Un.comparator);function qi(...i){let e=fd;for(const t of i)e=e.add(t);return e}const pd=new no(jt);function lu(){return pd}class Nu{constructor(e,t,s,u,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const u=new Map;return u.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Nu(Bn.min(),u,lu(),ha(),qi())}}class Ou{constructor(e,t,s,u,m){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ou(s,t,qi(),qi(),qi())}}class xa{constructor(e,t,s,u){this.It=e,this.removedTargetIds=t,this.key=s,this.Tt=u}}class Pc{constructor(e,t){this.targetId=e,this.Et=t}}class Qd{constructor(e,t,s=uo.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class gd{constructor(){this.At=0,this.Rt=pa(),this.bt=uo.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=qi(),t=qi(),s=qi();return this.Rt.forEach((u,m)=>{switch(m){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:jn()}}),new Ou(this.bt,this.Pt,e,t,s)}xt(){this.vt=!1,this.Rt=pa()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Fh{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=ha(),this.qt=Nc(),this.Ut=new no(jt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const s=this.Wt(t);switch(e.state){case 0:this.zt(t)&&s.Dt(e.resumeToken);break;case 1:s.Mt(),s.Vt||s.xt(),s.Dt(e.resumeToken);break;case 2:s.Mt(),s.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(s.Ft(),s.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),s.Dt(e.resumeToken));break;default:jn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((s,u)=>{this.zt(u)&&t(u)})}Jt(e){const t=e.targetId,s=e.Et.count,u=this.Yt(t);if(u){const m=u.target;if(Yu(m))if(0===s){const E=new Un(m.path);this.Qt(t,E,Ns.newNoDocument(E,Bn.min()))}else sr(1===s);else this.Xt(t)!==s&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((m,E)=>{const R=this.Yt(E);if(R){if(m.current&&Yu(R.target)){const X=new Un(R.target.path);null!==this.Lt.get(X)||this.te(E,X)||this.Qt(E,X,Ns.newNoDocument(X,e))}m.St&&(t.set(E,m.Ct()),m.xt())}});let s=qi();this.qt.forEach((m,E)=>{let R=!0;E.forEachWhile(X=>{const se=this.Yt(X);return!se||2===se.purpose||(R=!1,!1)}),R&&(s=s.add(m))}),this.Lt.forEach((m,E)=>E.setReadTime(e));const u=new Nu(e,t,this.Ut,this.Lt,s);return this.Lt=ha(),this.qt=Nc(),this.Ut=new no(jt),u}Gt(e,t){if(!this.zt(e))return;const s=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,s),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,s){if(!this.zt(e))return;const u=this.Wt(e);this.te(e,t)?u.Nt(t,1):u.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),s&&(this.Lt=this.Lt.insert(t,s))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new gd,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new no(jt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Jt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new gd),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Nc(){return new to(Un.comparator)}function pa(){return new to(Un.comparator)}const md={asc:"ASCENDING",desc:"DESCENDING"},Oc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kc={and:"AND",or:"OR"};class il{constructor(e,t){this.databaseId=e,this.wt=t}}function sl(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fc(i,e){return i.wt?e.toBase64():e.toUint8Array()}function yd(i,e){return sl(i,e.toTimestamp())}function Po(i){return sr(!!i),Bn.fromTimestamp(function(e){const t=ja(e);return new Or(t.seconds,t.nanos)}(i))}function ol(i,e){return(t=i,new vr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Wa(i){const e=vr.fromString(i);return sr(lt(e)),e}function ku(i,e){return ol(i.databaseId,e.path)}function Rl(i,e){const t=Wa(e);if(t.get(1)!==i.databaseId.projectId)throw new An($t.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new An($t.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Un(y(t))}function Lc(i,e){return ol(i.databaseId,e)}function b(i){const e=Wa(i);return 4===e.length?vr.emptyPath():y(e)}function p(i){return new vr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function y(i){return sr(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function D(i,e,t){return{name:ku(i,e),fields:t.value.mapValue.fields}}function re(i,e,t){const s=Rl(i,e.name),u=Po(e.updateTime),m=e.createTime?Po(e.createTime):Bn.min(),E=new Uo({mapValue:{fields:e.fields}}),R=Ns.newFoundDocument(s,u,m,E);return t&&R.setHasCommittedMutations(),t?R.setHasCommittedMutations():R}function pn(i,e){let t;if(e instanceof ou)t={update:D(i,e.key,e.value)};else if(e instanceof Wo)t={delete:ku(i,e.key)};else if(e instanceof xl)t={update:D(i,e.key,e.data),updateMask:Qe(e.fieldMask)};else{if(!(e instanceof qo))return jn();t={verify:ku(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,m){const E=m.transform;if(E instanceof Du)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof ml)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof yl)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof zo)return{fieldPath:m.field.canonicalString(),increment:E.gt};throw jn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:yd(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:jn()),t;var u}function dr(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?ro.updateTime(Po(u.updateTime)):void 0!==u.exists?ro.exists(u.exists):ro.none():ro.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(m,E){let R=null;"setToServerValue"in E?(sr("REQUEST_TIME"===E.setToServerValue),R=new Du):"appendMissingElements"in E?R=new ml(E.appendMissingElements.values||[]):"removeAllFromArray"in E?R=new yl(E.removeAllFromArray.values||[]):"increment"in E?R=new zo(m,E.increment):jn();const X=Ss.fromServerFormat(E.fieldPath);return new Aa(X,R)}(i,u)):[];var u;if(e.update){const u=Rl(i,e.update.name),m=new Uo({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new Go((e.updateMask.fieldPaths||[]).map(se=>Ss.fromServerFormat(se)));return new xl(u,m,E,t,s)}return new ou(u,m,t,s)}if(e.delete){const u=Rl(i,e.delete);return new Wo(u,t)}if(e.verify){const u=Rl(i,e.verify);return new qo(u,t)}return jn()}function Ci(i,e){return{documents:[Lc(i,e.path)]}}function hi(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Lc(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Lc(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(X){if(0!==X.length)return we(is.create(X,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const m=function(X){if(0!==X.length)return X.map(se=>{return{field:H((Ie=se).field),direction:d(Ie.dir)};var Ie})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const E=(se=e.limit,i.wt||ca(se)?se:{value:se});var se,R,X;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),t}function Ko(i){let e=b(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){sr(1===s);const Ie=t.from[0];Ie.allDescendants?u=Ie.collectionId:e=e.child(Ie.collectionId)}let m=[];t.where&&(m=function(Ie){const ot=c(Ie);return ot instanceof is&&Mo(ot)?ot.getFilters():[ot]}(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(Ie=>{return new Ro(te((ot=Ie).field),function(Wt){switch(Wt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ot.direction));var ot}));let R=null;t.limit&&(R=function(Ie){let ot;return ot="object"==typeof Ie?Ie.value:Ie,ca(ot)?null:ot}(t.limit));let X=null;var Ie;t.startAt&&(X=new zr((Ie=t.startAt).values||[],!!Ie.before));let se=null;return t.endAt&&(se=function(Ie){return new zr(Ie.values||[],!Ie.before)}(t.endAt)),Sc(e,u,E,m,R,"F",X,se)}function c(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=te(e.unaryFilter.field);return ii.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=te(e.unaryFilter.field);return ii.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=te(e.unaryFilter.field);return ii.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=te(e.unaryFilter.field);return ii.create(m,"!=",{nullValue:"NULL_VALUE"});default:return jn()}}(i):void 0!==i.fieldFilter?ii.create(te((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return is.create(e.compositeFilter.filters.map(t=>c(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return jn()}}(e.compositeFilter.op))}(i):jn();var e}function d(i){return md[i]}function v(i){return Oc[i]}function x(i){return kc[i]}function H(i){return{fieldPath:i.canonicalString()}}function te(i){return Ss.fromServerFormat(i.fieldPath)}function we(i){return i instanceof ii?function(e){if("=="===e.op){if(Y(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NAN"}};if(U(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Y(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NOT_NAN"}};if(U(e.value))return{unaryFilter:{field:H(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:H(e.field),op:v(e.op),value:e.value}}}(i):i instanceof is?function(e){const t=e.getFilters().map(s=>we(s));return 1===t.length?t[0]:{compositeFilter:{op:x(e.op),filters:t}}}(i):jn()}function Qe(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lt(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ln(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=xn(e)),e=Tn(i.get(t),e);return xn(e)}function Tn(i,e){let t=e;const s=i.length;for(let u=0;u<s;u++){const m=i.charAt(u);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function xn(i){return i+"\x01\x01"}function Cr(i){const e=i.length;if(sr(e>=2),2===e)return sr("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),vr.emptyPath();const t=e-2,s=[];let u="";for(let m=0;m<e;){const E=i.indexOf("\x01",m);switch((E<0||E>t)&&jn(),i.charAt(E+1)){case"\x01":const R=i.substring(m,E);let X;0===u.length?X=R:(u+=R,X=u,u=""),s.push(X);break;case"\x10":u+=i.substring(m,E),u+="\0";break;case"\x11":u+=i.substring(m,E+1);break;default:jn()}m=E+2}return new vr(s)}const pi=["userId","batchId"];function Ds(i,e){return[i,ln(e)]}function la(i,e,t){return[i,ln(e),t]}const Fu={},Vc=["prefixPath","collectionGroup","readTime","documentId"],Wl=["prefixPath","collectionGroup","documentId"],Lh=["collectionGroup","readTime","prefixPath","documentId"],em=["canonicalId","targetId"],p_=["targetId","path"],Vh=["path","targetId"],g_=["collectionId","parent"],tm=["indexId","uid"],nm=["uid","sequenceNumber"],rm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jf=["indexId","uid","orderedDocumentKey"],im=["userId","collectionPath","documentId"],Uh=["userId","collectionPath","largestBatchId"],Bh=["userId","collectionGroup","largestBatchId"],ep=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tp=[...ep,"documentOverlays"],np=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$h=np,Xd=[...$h,"indexConfiguration","indexState","indexEntries"];class rp extends Ic{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function ga(i,e){const t=Kn(i);return ba.M(t.se,e)}class ip{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const m=this.mutations[u];m.key.isEqual(e.key)&&xu(m,e,s[u])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Mu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Mu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=fa();return this.mutations.forEach(u=>{const m=e.get(u.key),E=m.overlayedDocument;let R=this.applyToLocalView(E,m.mutatedFields);R=t.has(u.key)?null:R;const X=Kd(E,R);null!==X&&s.set(u.key,X),E.isValidDocument()||E.convertToNoDocument(Bn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qi())}isEqual(e){return this.batchId===e.batchId&&pr(this.mutations,e.mutations,(t,s)=>Zd(t,s))&&pr(this.baseMutations,e.baseMutations,(t,s)=>Zd(t,s))}}class sp{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){sr(e.mutations.length===s.length);let u=hd;const m=e.mutations;for(let E=0;E<m.length;E++)u=u.insert(m[E].key,s[E].version);return new sp(e,t,s,u)}}class jh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uu{constructor(e,t,s,u,m=Bn.min(),E=Bn.min(),R=uo.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=R}withSequenceNumber(e){return new uu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new uu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class op{constructor(e){this.ie=e}}function ap(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:ku(u=i.ie,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:sl(u,m.version.toTimestamp()),createTime:sl(u,m.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:sc(e.version)};else{if(!e.isUnknownDocument())return jn();s.unknownDocument={path:t.path.toArray(),version:sc(e.version)}}var u,m;return s}function Hh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function sc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uc(i){const e=new Or(i.seconds,i.nanoseconds);return Bn.fromTimestamp(e)}function Bc(i,e){const t=(e.baseMutations||[]).map(m=>dr(i.ie,m));for(let m=0;m<e.mutations.length-1;++m){const E=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(E.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const s=e.mutations.map(m=>dr(i.ie,m)),u=Or.fromMillis(e.localWriteTimeMs);return new ip(e.batchId,u,t,s)}function qa(i){const e=Uc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Uc(i.lastLimboFreeSnapshotVersion):Bn.min();let s;var u;return void 0!==i.query.documents?(sr(1===(u=i.query).documents.length),s=da(nu(b(u.documents[0])))):s=da(Ko(i.query)),new uu(s,i.targetId,0,i.lastListenSequenceNumber,e,t,uo.fromBase64String(i.resumeToken))}function sm(i,e){const t=sc(e.snapshotVersion),s=sc(e.lastLimboFreeSnapshotVersion);let u;u=Yu(e.target)?Ci(i.ie,e.target):hi(i.ie,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Gh(i){const e=Ko({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?su(e,e.limit,"L"):e}function lp(i,e){return new jh(e.largestBatchId,dr(i.ie,e.overlayMutation))}function om(i,e){const t=e.path.lastSegment();return[i,ln(e.path.popLast()),t]}function am(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:sc(s.readTime),documentKey:ln(s.documentKey.path),largestBatchId:s.largestBatchId}}class m_{getBundleMetadata(e,t){return up(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:Uc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return up(e).put({bundleId:(s=t).id,createTime:sc(Po(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return lm(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:Gh(u.bundledQuery),readTime:Uc(u.readTime)};var u})}saveNamedQuery(e,t){return lm(e).put({name:(s=t).name,readTime:sc(Po(s.readTime)),bundledQuery:s.bundledQuery});var s}}function up(i){return ga(i,"bundles")}function lm(i){return ga(i,"namedQueries")}class zh{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new zh(e,t.uid||"")}getOverlay(e,t){return Jd(e).get(om(this.userId,t)).next(s=>s?lp(this.yt,s):null)}getOverlays(e,t){const s=vl();return nn.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){const u=[];return s.forEach((m,E)=>{const R=new jh(t,E);u.push(this.oe(e,R))}),nn.waitFor(u)}removeOverlaysForBatchId(e,t,s){const u=new Set;t.forEach(E=>u.add(ln(E.getCollectionPath())));const m=[];return u.forEach(E=>{const R=IDBKeyRange.bound([this.userId,E,s],[this.userId,E,s+1],!1,!0);m.push(Jd(e).Y("collectionPathOverlayIndex",R))}),nn.waitFor(m)}getOverlaysForCollection(e,t,s){const u=vl(),m=ln(t),E=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Jd(e).W("collectionPathOverlayIndex",E).next(R=>{for(const X of R){const se=lp(this.yt,X);u.set(se.getKey(),se)}return u})}getOverlaysForCollectionGroup(e,t,s,u){const m=vl();let E;const R=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jd(e).Z({index:"collectionGroupOverlayIndex",range:R},(X,se,Ie)=>{const ot=lp(this.yt,se);m.size()<u||ot.largestBatchId===E?(m.set(ot.getKey(),ot),E=ot.largestBatchId):Ie.done()}).next(()=>m)}oe(e,t){return Jd(e).put(function(s,u,m){const[E,R,X]=om(u,m.mutation.key);return{userId:u,collectionPath:R,documentId:X,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:pn(s.ie,m.mutation)}}(this.yt,this.userId,t))}}function Jd(i){return ga(i,"documentOverlays")}class ji{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(eo(e.integerValue));else if("doubleValue"in e){const s=eo(e.doubleValue);isNaN(s)?this.he(t,13):(this.he(t,15),Eo(s)?t.le(0):t.le(s))}else if("timestampValue"in e){const s=e.timestampValue;this.he(t,20),"string"==typeof s?t.fe(s):(t.fe(`${s.seconds||""}`),t.le(s.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Ja(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.he(t,45),t.le(s.latitude||0),t.le(s.longitude||0)}else"mapValue"in e?Pt(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):jn()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const s=e.fields||{};this.he(t,55);for(const u of Object.keys(s))this.de(u,t),this.ce(s[u],t)}ye(e,t){const s=e.values||[];this.he(t,50);for(const u of s)this.ce(u,t)}me(e,t){this.he(t,37),Un.fromName(e).path.forEach(s=>{this.he(t,60),this.pe(s,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function um(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function cp(i){const e=64-function(t){let s=0;for(let u=0;u<8;++u){const m=um(255&t[u]);if(s+=m,8!==m)break}return s}(i);return Math.ceil(e/8)}ji.Ie=new ji;class cm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ee(s.value),s=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.be(s.value),s=t.next();this.Pe()}ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ee(s);else if(s<2048)this.Ee(960|s>>>6),this.Ee(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s);else{const u=t.codePointAt(0);this.Ee(240|u>>>18),this.Ee(128|63&u>>>12),this.Ee(128|63&u>>>6),this.Ee(128|63&u)}}this.Ae()}Ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.be(s);else if(s<2048)this.be(960|s>>>6),this.be(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.be(480|s>>>12),this.be(128|63&s>>>6),this.be(128|63&s);else{const u=t.codePointAt(0);this.be(240|u>>>18),this.be(128|63&u>>>12),this.be(128|63&u>>>6),this.be(128|63&u)}}this.Pe()}Se(e){const t=this.De(e),s=cp(t);this.Ce(1+s),this.buffer[this.position++]=255&s;for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=255&t[u]}xe(e){const t=this.De(e),s=cp(t);this.Ce(1+s),this.buffer[this.position++]=~(255&s);for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(u){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,u,!1),new Uint8Array(m.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let u=1;u<t.length;++u)t[u]^=s?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Wh{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class ql{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class _d{constructor(){this.$e=new cm,this.Be=new Wh(this.$e),this.Le=new ql(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class $c{constructor(e,t,s,u){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=u}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new $c(this.indexId,this.documentKey,this.arrayValue,s)}}function cu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=du(i.arrayValue,e.arrayValue),0!==t?t:(t=du(i.directionalValue,e.directionalValue),0!==t?t:Un.comparator(i.documentKey,e.documentKey)))}function du(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class dp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const s=t;s.isInequality()?this.Qe=s:this.Ge.push(s)}}je(e){sr(e.collectionGroup===this.collectionId);const t=Ao(e);if(void 0!==t&&!this.We(t))return!1;const s=Vs(e);let u=0,m=0;for(;u<s.length&&this.We(s[u]);++u);if(u===s.length)return!0;if(void 0!==this.Qe){const E=s[u];if(!this.ze(this.Qe,E)||!this.He(this.Ke[m++],E))return!1;++u}for(;u<s.length;++u){const E=s[u];if(m>=this.Ke.length||!this.He(this.Ke[m++],E))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hp(i){var e,t;if(sr(i instanceof ii||i instanceof is),i instanceof ii){if(i instanceof vu){const u=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(m=>ii.create(i.field,"==",m)))||[];return is.create(u,"or")}return i}const s=i.filters.map(u=>hp(u));return is.create(s,i.op)}function fp(i){if(0===i.getFilters().length)return[];const e=vd(hp(i));return sr(y_(e)),dm(e)||qh(e)?[e]:e.getFilters()}function dm(i){return i instanceof ii}function qh(i){return i instanceof is&&Mo(i)}function y_(i){return dm(i)||qh(i)||function(e){if(e instanceof is&&Pa(e)){for(const t of e.getFilters())if(!dm(t)&&!qh(t))return!1;return!0}return!1}(i)}function vd(i){if(sr(i instanceof ii||i instanceof is),i instanceof ii)return i;if(1===i.filters.length)return vd(i.filters[0]);const e=i.filters.map(s=>vd(s));let t=is.create(e,i.op);return t=Cd(t),y_(t)?t:(sr(t instanceof is),sr(Sa(t)),sr(t.filters.length>1),t.filters.reduce((s,u)=>Ed(s,u)))}function Ed(i,e){let t;return sr(i instanceof ii||i instanceof is),sr(e instanceof ii||e instanceof is),t=i instanceof ii?e instanceof ii?is.create([i,e],"and"):Kh(i,e):e instanceof ii?Kh(e,i):function(s,u){if(sr(s.filters.length>0&&u.filters.length>0),Sa(s)&&Sa(u))return Dl(s,u.getFilters());const m=Pa(s)?s:u,E=Pa(s)?u:s,R=m.filters.map(X=>Ed(X,E));return is.create(R,"or")}(i,e),Cd(t)}function Kh(i,e){if(Sa(e))return Dl(e,i.getFilters());{const t=e.filters.map(s=>Ed(i,s));return is.create(t,"or")}}function Cd(i){if(sr(i instanceof ii||i instanceof is),i instanceof ii)return i;const e=i.getFilters();if(1===e.length)return Cd(e[0]);if(So(i))return i;const t=e.map(u=>Cd(u)),s=[];return t.forEach(u=>{u instanceof ii?s.push(u):u instanceof is&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:is.create(s,i.op)}class pp{constructor(){this.Je=new hm}addToCollectionParentIndex(e,t){return this.Je.add(t),nn.resolve()}getCollectionParents(e,t){return nn.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return nn.resolve()}deleteFieldIndex(e,t){return nn.resolve()}getDocumentsMatchingTarget(e,t){return nn.resolve(null)}getIndexType(e,t){return nn.resolve(0)}getFieldIndexes(e,t){return nn.resolve([])}getNextCollectionGroupToUpdate(e){return nn.resolve(null)}getMinOffset(e,t){return nn.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return nn.resolve(ra.min())}updateCollectionGroup(e,t,s){return nn.resolve()}updateIndexEntries(e,t){return nn.resolve()}}class hm{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new no(vr.comparator),m=!u.has(s);return this.index[t]=u.add(s),m}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new no(vr.comparator)).toArray()}}const Zh=new Uint8Array(0);class __{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new hm,this.Xe=new rl(s=>jl(s),(s,u)=>Hl(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const m={collectionId:s,parent:ln(u)};return fm(e).put(m)}return nn.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[cr(t),""],!1,!0);return fm(e).W(u).next(m=>{for(const E of m){if(E.collectionId!==t)break;s.push(Cr(E.parent))}return s})}addFieldIndex(e,t){const s=th(e),u={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var E;delete u.indexId;const m=s.add(u);if(t.indexState){const E=Yh(e);return m.next(R=>{E.put(am(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const s=th(e),u=Yh(e),m=eh(e);return s.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=eh(e);let u=!0;const m=new Map;return nn.forEach(this.Ze(t),E=>this.tn(e,E).next(R=>{u&&(u=!!R),m.set(E,R)})).next(()=>{if(u){let E=qi();const R=[];return nn.forEach(m,(X,se)=>{var Ie;Jt("IndexedDbIndexManager",`Using index ${Ie=X,`id=${Ie.indexId}|cg=${Ie.collectionGroup}|f=${Ie.fields.map(Us=>`${Us.fieldPath}:${Us.kind}`).join(",")}`} to execute ${jl(t)}`);const ot=function(Us,Yo){const Bs=Ao(Yo);if(void 0===Bs)return null;for(const qs of ya(Us,Bs.fieldPath))switch(qs.op){case"array-contains-any":return qs.value.arrayValue.values||[];case"array-contains":return[qs.value]}return null}(se,X),Wt=function(Us,Yo){const Bs=new Map;for(const qs of Vs(Yo))for(const ma of ya(Us,qs.fieldPath))switch(ma.op){case"==":case"in":Bs.set(qs.fieldPath.canonicalString(),ma.value);break;case"not-in":case"!=":return Bs.set(qs.fieldPath.canonicalString(),ma.value),Array.from(Bs.values())}return null}(se,X),Nn=function(Us,Yo){const Bs=[];let qs=!0;for(const ma of Vs(Yo)){const Ph=0===ma.kind?Gl(Us,ma.fieldPath,Us.startAt):tu(Us,ma.fieldPath,Us.startAt);Bs.push(Ph.value),qs&&(qs=Ph.inclusive)}return new zr(Bs,qs)}(se,X),Zn=function(Us,Yo){const Bs=[];let qs=!0;for(const ma of Vs(Yo)){const Ph=0===ma.kind?tu(Us,ma.fieldPath,Us.endAt):Gl(Us,ma.fieldPath,Us.endAt);Bs.push(Ph.value),qs&&(qs=Ph.inclusive)}return new zr(Bs,qs)}(se,X),Fr=this.en(X,se,Nn),gi=this.en(X,se,Zn),bo=this.nn(X,se,Wt),Lo=this.sn(X.indexId,ot,Fr,Nn.inclusive,gi,Zn.inclusive,bo);return nn.forEach(Lo,Us=>s.J(Us,t.limit).next(Yo=>{Yo.forEach(Bs=>{const qs=Un.fromSegments(Bs.documentKey);E.has(qs)||(E=E.add(qs),R.push(qs))})}))}).next(()=>R)}return nn.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:fp(is.create(e.filters,"and")).map(s=>eu(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,s,u,m,E,R){const X=(null!=t?t.length:1)*Math.max(s.length,m.length),se=X/(null!=t?t.length:1),Ie=[];for(let ot=0;ot<X;++ot){const Wt=t?this.rn(t[ot/se]):Zh,Nn=this.on(e,Wt,s[ot%se],u),Zn=this.un(e,Wt,m[ot%se],E),Fr=R.map(gi=>this.on(e,Wt,gi,!0));Ie.push(...this.createRange(Nn,Zn,Fr))}return Ie}on(e,t,s,u){const m=new $c(e,Un.empty(),t,s);return u?m:m.Ue()}un(e,t,s,u){const m=new $c(e,Un.empty(),t,s);return u?m.Ue():m}tn(e,t){const s=new dp(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(m=>{let E=null;for(const R of m)s.je(R)&&(!E||R.fields.length>E.fields.length)&&(E=R);return E})}getIndexType(e,t){let s=2;const u=this.Ze(t);return nn.forEach(u,m=>this.tn(e,m).next(E=>{E?0!==s&&E.fields.length<function(R){let X=new no(Ss.comparator),se=!1;for(const Ie of R.filters)for(const ot of Ie.getFlattenedFilters())ot.field.isKeyField()||("array-contains"===ot.op||"array-contains-any"===ot.op?se=!0:X=X.add(ot.field));for(const Ie of R.orderBy)Ie.field.isKeyField()||(X=X.add(Ie.field));return X.size+(se?1:0)}(m)&&(s=1):s=0})).next(()=>null!==t.limit&&u.length>1&&2===s?1:s)}cn(e,t){const s=new _d;for(const u of Vs(e)){const m=t.data.field(u.fieldPath);if(null==m)return null;const E=s.qe(u.kind);ji.Ie.ue(m,E)}return s.Fe()}rn(e){const t=new _d;return ji.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const s=new _d;return ji.Ie.ue(Ia(this.databaseId,t),s.qe(function(u){const m=Vs(u);return 0===m.length?0:m[m.length-1].kind}(e))),s.Fe()}nn(e,t,s){if(null===s)return[];let u=[];u.push(new _d);let m=0;for(const E of Vs(e)){const R=s[m++];for(const X of u)if(this.hn(t,E.fieldPath)&&Ra(R))u=this.ln(u,E,R);else{const se=X.qe(E.kind);ji.Ie.ue(R,se)}}return this.fn(u)}en(e,t,s){return this.nn(e,t,s.position)}fn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Fe();return t}ln(e,t,s){const u=[...e],m=[];for(const E of s.arrayValue.values||[])for(const R of u){const X=new _d;X.seed(R.Fe()),ji.Ie.ue(E,X.qe(t.kind)),m.push(X)}return m}hn(e,t){return!!e.filters.find(s=>s instanceof ii&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=th(e),u=Yh(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(m=>{const E=[];return nn.forEach(m,R=>u.get([R.indexId,this.uid]).next(X=>{E.push(function(se,Ie){const ot=Ie?new Ll(Ie.sequenceNumber,new ra(Uc(Ie.readTime),new Un(Cr(Ie.documentKey)),Ie.largestBatchId)):Ll.empty(),Wt=se.fields.map(([Nn,Zn])=>new Fl(Ss.fromServerFormat(Nn),Zn));return new lo(se.indexId,se.collectionGroup,Wt,ot)}(R,X))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,u)=>{const m=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==m?m:jt(s.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const u=th(e),m=Yh(e);return this.dn(e).next(E=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>nn.forEach(R,X=>m.put(am(X.indexId,this.user,E,s)))))}updateIndexEntries(e,t){const s=new Map;return nn.forEach(t,(u,m)=>{const E=s.get(u.collectionGroup);return(E?nn.resolve(E):this.getFieldIndexes(e,u.collectionGroup)).next(R=>(s.set(u.collectionGroup,R),nn.forEach(R,X=>this._n(e,u,X).next(se=>{const Ie=this.wn(m,X);return se.isEqual(Ie)?nn.resolve():this.mn(e,m,X,se,Ie)}))))})}gn(e,t,s,u){return eh(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.an(s,t.key),documentKey:t.key.path.toArray()})}yn(e,t,s,u){return eh(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.an(s,t.key),t.key.path.toArray()])}_n(e,t,s){const u=eh(e);let m=new no(cu);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.an(s,t)])},(E,R)=>{m=m.add(new $c(s.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>m)}wn(e,t){let s=new no(cu);const u=this.cn(t,e);if(null==u)return s;const m=Ao(t);if(null!=m){const E=e.data.field(m.fieldPath);if(Ra(E))for(const R of E.arrayValue.values||[])s=s.add(new $c(t.indexId,e.key,this.rn(R),u))}else s=s.add(new $c(t.indexId,e.key,Zh,u));return s}mn(e,t,s,u,m){Jt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(R,X,se,Ie,ot){const Wt=R.getIterator(),Nn=X.getIterator();let Zn=fl(Wt),Fr=fl(Nn);for(;Zn||Fr;){let gi=!1,bo=!1;if(Zn&&Fr){const Lo=se(Zn,Fr);Lo<0?bo=!0:Lo>0&&(gi=!0)}else null!=Zn?bo=!0:gi=!0;gi?(Ie(Fr),Fr=fl(Nn)):bo?(ot(Zn),Zn=fl(Wt)):(Zn=fl(Wt),Fr=fl(Nn))}}(u,m,cu,R=>{E.push(this.gn(e,t,s,R))},R=>{E.push(this.yn(e,t,s,R))}),nn.waitFor(E)}dn(e){let t=1;return Yh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,m)=>{m.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((E,R)=>cu(E,R)).filter((E,R,X)=>!R||0!==cu(E,X[R-1]));const u=[];u.push(e);for(const E of s){const R=cu(E,e),X=cu(E,t);if(0===R)u[0]=e.Ue();else if(R>0&&X<0)u.push(E),u.push(E.Ue());else if(X>0)break}u.push(t);const m=[];for(let E=0;E<u.length;E+=2){if(this.pn(u[E],u[E+1]))return[];m.push(IDBKeyRange.bound([u[E].indexId,this.uid,u[E].arrayValue,u[E].directionalValue,Zh,[]],[u[E+1].indexId,this.uid,u[E+1].arrayValue,u[E+1].directionalValue,Zh,[]]))}return m}pn(e,t){return cu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pm)}getMinOffset(e,t){return nn.mapArray(this.Ze(t),s=>this.tn(e,s).next(u=>u||jn())).next(pm)}}function fm(i){return ga(i,"collectionParents")}function eh(i){return ga(i,"indexEntries")}function th(i){return ga(i,"indexConfiguration")}function Yh(i){return ga(i,"indexState")}function pm(i){sr(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;Ca(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new ra(e.readTime,e.documentKey,t)}const v_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ka{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Ka(e,Ka.DEFAULT_COLLECTION_PERCENTILE,Ka.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gp(i,e,t){const s=i.store("mutations"),u=i.store("documentMutations"),m=[],E=IDBKeyRange.only(t.batchId);let R=0;const X=s.Z({range:E},(Ie,ot,Wt)=>(R++,Wt.delete()));m.push(X.next(()=>{sr(1===R)}));const se=[];for(const Ie of t.mutations){const ot=la(e,Ie.key.path,t.batchId);m.push(u.delete(ot)),se.push(Ie.key)}return nn.waitFor(m).next(()=>se)}function Qh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw jn();e=i.noDocument}return JSON.stringify(e).length}Ka.DEFAULT_COLLECTION_PERCENTILE=10,Ka.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ka.DEFAULT=new Ka(41943040,Ka.DEFAULT_COLLECTION_PERCENTILE,Ka.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ka.DISABLED=new Ka(-1,0,0);class bd{constructor(e,t,s,u){this.userId=e,this.yt=t,this.indexManager=s,this.referenceDelegate=u,this.In={}}static re(e,t,s,u){sr(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new bd(m,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jc(e).Z({index:"userMutationsIndex",range:s},(u,m,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const m=nh(e),E=jc(e);return E.add({}).next(R=>{sr("number"==typeof R);const X=new ip(R,t,s,u),se=function(Wt,Nn,Zn){const Fr=Zn.baseMutations.map(bo=>pn(Wt.ie,bo)),gi=Zn.mutations.map(bo=>pn(Wt.ie,bo));return{userId:Nn,batchId:Zn.batchId,localWriteTimeMs:Zn.localWriteTime.toMillis(),baseMutations:Fr,mutations:gi}}(this.yt,this.userId,X),Ie=[];let ot=new no((Wt,Nn)=>jt(Wt.canonicalString(),Nn.canonicalString()));for(const Wt of u){const Nn=la(this.userId,Wt.key.path,R);ot=ot.add(Wt.key.path.popLast()),Ie.push(E.put(se)),Ie.push(m.put(Nn,Fu))}return ot.forEach(Wt=>{Ie.push(this.indexManager.addToCollectionParentIndex(e,Wt))}),e.addOnCommittedListener(()=>{this.In[R]=X.keys()}),nn.waitFor(Ie).next(()=>X)})}lookupMutationBatch(e,t){return jc(e).get(t).next(s=>s?(sr(s.userId===this.userId),Bc(this.yt,s)):null)}Tn(e,t){return this.In[t]?nn.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let m=null;return jc(e).Z({index:"userMutationsIndex",range:u},(E,R,X)=>{R.userId===this.userId&&(sr(R.batchId>=s),m=Bc(this.yt,R)),X.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return jc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,m,E)=>{s=m.batchId,E.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jc(e).W("userMutationsIndex",t).next(s=>s.map(u=>Bc(this.yt,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Ds(this.userId,t.path),u=IDBKeyRange.lowerBound(s),m=[];return nh(e).Z({range:u},(E,R,X)=>{const[se,Ie,ot]=E,Wt=Cr(Ie);if(se===this.userId&&t.path.isEqual(Wt))return jc(e).get(ot).next(Nn=>{if(!Nn)throw jn();sr(Nn.userId===this.userId),m.push(Bc(this.yt,Nn))});X.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new no(jt);const u=[];return t.forEach(m=>{const E=Ds(this.userId,m.path),R=IDBKeyRange.lowerBound(E),X=nh(e).Z({range:R},(se,Ie,ot)=>{const[Wt,Nn,Zn]=se,Fr=Cr(Nn);Wt===this.userId&&m.path.isEqual(Fr)?s=s.add(Zn):ot.done()});u.push(X)}),nn.waitFor(u).next(()=>this.En(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,m=Ds(this.userId,s),E=IDBKeyRange.lowerBound(m);let R=new no(jt);return nh(e).Z({range:E},(X,se,Ie)=>{const[ot,Wt,Nn]=X,Zn=Cr(Wt);ot===this.userId&&s.isPrefixOf(Zn)?Zn.length===u&&(R=R.add(Nn)):Ie.done()}).next(()=>this.En(e,R))}En(e,t){const s=[],u=[];return t.forEach(m=>{u.push(jc(e).get(m).next(E=>{if(null===E)throw jn();sr(E.userId===this.userId),s.push(Bc(this.yt,E))}))}),nn.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return gp(e.se,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),nn.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return nn.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return nh(e).Z({range:s},(m,E,R)=>{if(m[0]===this.userId){const X=Cr(m[1]);u.push(X)}else R.done()}).next(()=>{sr(0===u.length)})})}containsKey(e,t){return E_(e,this.userId,t)}Rn(e){return C_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function E_(i,e,t){const s=Ds(e,t.path),u=s[1],m=IDBKeyRange.lowerBound(s);let E=!1;return nh(i).Z({range:m,X:!0},(R,X,se)=>{const[Ie,ot,Wt]=R;Ie===e&&ot===u&&(E=!0),se.done()}).next(()=>E)}function jc(i){return ga(i,"mutations")}function nh(i){return ga(i,"documentMutations")}function C_(i){return ga(i,"mutationQueues")}class Td{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Td(0)}static vn(){return new Td(-1)}}class E0{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const s=new Td(t.highestTargetId);return t.highestTargetId=s.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Bn.fromTimestamp(new Or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(s=>(s.targetCount+=1,this.Cn(t,s),this.Sn(e,s))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(s=>(sr(s.targetCount>0),s.targetCount-=1,this.Sn(e,s)))}removeTargets(e,t,s){let u=0;const m=[];return rh(e).Z((E,R)=>{const X=qa(R);X.sequenceNumber<=t&&null===s.get(X.targetId)&&(u++,m.push(this.removeTargetData(e,X)))}).next(()=>nn.waitFor(m)).next(()=>u)}forEachTarget(e,t){return rh(e).Z((s,u)=>{const m=qa(u);t(m)})}Vn(e){return b_(e).get("targetGlobalKey").next(t=>(sr(null!==t),t))}Sn(e,t){return b_(e).put("targetGlobalKey",t)}Dn(e,t){return rh(e).put(sm(this.yt,t))}Cn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=jl(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let m=null;return rh(e).Z({range:u,index:"queryTargetsIndex"},(E,R,X)=>{const se=qa(R);Hl(t,se.target)&&(m=se,X.done())}).next(()=>m)}addMatchingKeys(e,t,s){const u=[],m=Hc(e);return t.forEach(E=>{const R=ln(E.path);u.push(m.put({targetId:s,path:R})),u.push(this.referenceDelegate.addReference(e,s,E))}),nn.waitFor(u)}removeMatchingKeys(e,t,s){const u=Hc(e);return nn.forEach(t,m=>{const E=ln(m.path);return nn.waitFor([u.delete([s,E]),this.referenceDelegate.removeReference(e,s,m)])})}removeMatchingKeysForTargetId(e,t){const s=Hc(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=Hc(e);let m=qi();return u.Z({range:s,X:!0},(E,R,X)=>{const se=Cr(E[1]),Ie=new Un(se);m=m.add(Ie)}).next(()=>m)}containsKey(e,t){const s=ln(t.path),u=IDBKeyRange.bound([s],[cr(s)],!1,!0);let m=0;return Hc(e).Z({index:"documentTargetsIndex",X:!0,range:u},([E,R],X,se)=>{0!==E&&(m++,se.done())}).next(()=>m>0)}ne(e,t){return rh(e).get(t).next(s=>s?qa(s):null)}}function rh(i){return ga(i,"targets")}function b_(i){return ga(i,"targetGlobal")}function Hc(i){return ga(i,"targetDocuments")}function T_([i,e],[t,s]){const u=jt(i,t);return 0===u?jt(e,s):u}class oc{constructor(e){this.xn=e,this.buffer=new no(T_),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();T_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mp{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Jt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,xe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){sa(s)?Jt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ia(s)}yield t.Fn(3e5)}))}}class w_{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return nn.resolve(vo.at);const s=new oc(t);return this.$n.forEachTarget(e,u=>s.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>s.On(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.$n.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Jt("LruGarbageCollector","Garbage collection skipped; disabled"),nn.resolve(v_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Jt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v_):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let s,u,m,E,R,X,se;const Ie=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ot=>(ot>this.params.maximumSequenceNumbersToCollect?(Jt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ot}`),u=this.params.maximumSequenceNumbersToCollect):u=ot,E=Date.now(),this.nthSequenceNumber(e,u))).next(ot=>(s=ot,R=Date.now(),this.removeTargets(e,s,t))).next(ot=>(m=ot,X=Date.now(),this.removeOrphanedDocuments(e,s))).next(ot=>(se=Date.now(),ar()<=an.in.DEBUG&&Jt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-Ie}ms\n\tDetermined least recently used ${u} in `+(R-E)+`ms\n\tRemoved ${m} targets in `+(X-R)+`ms\n\tRemoved ${ot} documents in `+(se-X)+`ms\nTotal Duration: ${se-Ie}ms`),nn.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:m,documentsRemoved:ot})))}}class gm{constructor(e,t){this.db=e,this.garbageCollector=new w_(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Un(e){let t=0;return this.Ln(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(s,u)=>t(u))}addReference(e,t,s){return wd(e,s)}removeReference(e,t,s){return wd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return wd(e,t)}Gn(e,t){return function(s,u){let m=!1;return C_(s).tt(E=>E_(s,E,u).next(R=>(R&&(m=!0),nn.resolve(!R)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let m=0;return this.Kn(e,(E,R)=>{if(R<=t){const X=this.Gn(e,E).next(se=>{if(!se)return m++,s.getEntry(e,E).next(()=>(s.removeEntry(E,Bn.min()),Hc(e).delete([0,ln(E.path)])))});u.push(X)}}).next(()=>nn.waitFor(u)).next(()=>s.apply(e)).next(()=>m)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return wd(e,t)}Kn(e,t){const s=Hc(e);let u,m=vo.at;return s.Z({index:"documentTargetsIndex"},([E,R],{path:X,sequenceNumber:se})=>{0===E?(m!==vo.at&&t(new Un(Cr(u)),m),m=se,u=X):m=vo.at}).next(()=>{m!==vo.at&&t(new Un(Cr(u)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wd(i,e){return Hc(i).put((s=i.currentSequenceNumber,{targetId:0,path:ln(e.path),sequenceNumber:s}));var s}class yp{constructor(){this.changes=new rl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ns.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?nn.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _p{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Gc(e).put(s)}removeEntry(e,t,s){return Gc(e).delete(function(u,m){const E=u.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],Hh(m),E[E.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Qn(e,s)))}getEntry(e,t){let s=Ns.newInvalidDocument(t);return Gc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},(u,m)=>{s=this.jn(t,m)}).next(()=>s)}Wn(e,t){let s={size:0,document:Ns.newInvalidDocument(t)};return Gc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},(u,m)=>{s={document:this.jn(t,m),size:Qh(m)}}).next(()=>s)}getEntries(e,t){let s=ha();return this.zn(e,t,(u,m)=>{const E=this.jn(u,m);s=s.insert(u,E)}).next(()=>s)}Hn(e,t){let s=ha(),u=new to(Un.comparator);return this.zn(e,t,(m,E)=>{const R=this.jn(m,E);s=s.insert(m,R),u=u.insert(m,Qh(E))}).next(()=>({documents:s,Jn:u}))}zn(e,t,s){if(t.isEmpty())return nn.resolve();let u=new no(Ep);t.forEach(X=>u=u.add(X));const m=IDBKeyRange.bound(zc(u.first()),zc(u.last())),E=u.getIterator();let R=E.getNext();return Gc(e).Z({index:"documentKeyIndex",range:m},(X,se,Ie)=>{const ot=Un.fromSegments([...se.prefixPath,se.collectionGroup,se.documentId]);for(;R&&Ep(R,ot)<0;)s(R,null),R=E.getNext();R&&R.isEqual(ot)&&(s(R,se),R=E.hasNext()?E.getNext():null),R?Ie.j(zc(R)):Ie.done()}).next(()=>{for(;R;)s(R,null),R=E.hasNext()?E.getNext():null})}getAllFromCollection(e,t,s){const u=[t.popLast().toArray(),t.lastSegment(),Hh(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gc(e).W(IDBKeyRange.bound(u,m,!0)).next(E=>{let R=ha();for(const X of E){const se=this.jn(Un.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);R=R.insert(se.key,se)}return R})}getAllFromCollectionGroup(e,t,s,u){let m=ha();const E=ym(t,s),R=ym(t,ra.max());return Gc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,R,!0)},(X,se,Ie)=>{const ot=this.jn(Un.fromSegments(se.prefixPath.concat(se.collectionGroup,se.documentId)),se);m=m.insert(ot.key,ot),m.size===u&&Ie.done()}).next(()=>m)}newChangeBuffer(e){return new ac(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vp(e).get("remoteDocumentGlobalKey").next(t=>(sr(!!t),t))}Qn(e,t){return vp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const s=function v0(i,e){let t;if(e.document)t=re(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Un.fromSegments(e.noDocument.path),u=Uc(e.noDocument.readTime);t=Ns.newNoDocument(s,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return jn();{const s=Un.fromSegments(e.unknownDocument.path),u=Uc(e.unknownDocument.version);t=Ns.newUnknownDocument(s,u)}}return e.readTime&&t.setReadTime(function(s){const u=new Or(s[0],s[1]);return Bn.fromTimestamp(u)}(e.readTime)),t}(this.yt,t);if(!s.isNoDocument()||!s.version.isEqual(Bn.min()))return s}return Ns.newInvalidDocument(e)}}function mm(i){return new _p(i)}class ac extends yp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new rl(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new no((m,E)=>jt(m.canonicalString(),E.canonicalString()));return this.changes.forEach((m,E)=>{const R=this.Xn.get(m);if(t.push(this.Yn.removeEntry(e,m,R.readTime)),E.isValidDocument()){const X=ap(this.Yn.yt,E);u=u.add(m.path.popLast()),s+=Qh(X)-R.size,t.push(this.Yn.addEntry(e,m,X))}else if(s-=R.size,this.trackRemovals){const X=ap(this.Yn.yt,E.convertToNoDocument(Bn.min()));t.push(this.Yn.addEntry(e,m,X))}}),u.forEach(m=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Yn.updateMetadata(e,s)),nn.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(s=>(this.Xn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:s,Jn:u})=>(u.forEach((m,E)=>{this.Xn.set(m,{size:E,readTime:s.get(m).readTime})}),s))}}function vp(i){return ga(i,"remoteDocumentGlobal")}function Gc(i){return ga(i,"remoteDocumentsV14")}function zc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ym(i,e){const t=e.documentKey.path.toArray();return[i,Hh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ep(i,e){const t=i.path.toArray(),s=e.path.toArray();let u=0;for(let m=0;m<t.length-2&&m<s.length-2;++m)if(u=jt(t[m],s[m]),u)return u;return u=jt(t.length,s.length),u||(u=jt(t[t.length-2],s[s.length-2]),u||jt(t[t.length-1],s[s.length-1]))}class I_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _m{constructor(e,t,s,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(null!==s&&Mu(s.mutation,u,Go.empty(),Or.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,qi()).next(()=>s))}getLocalViewOfDocuments(e,t,s=qi()){const u=vl();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,s).next(m=>{let E=ic();return m.forEach((R,X)=>{E=E.insert(R,X.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const s=vl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,qi()))}populateOverlays(e,t,s){const u=[];return s.forEach(m=>{t.has(m)||u.push(m)}),this.documentOverlayCache.getOverlays(e,u).next(m=>{m.forEach((E,R)=>{t.set(E,R)})})}computeViews(e,t,s,u){let m=ha();const E=Ml(),R=Ml();return t.forEach((X,se)=>{const Ie=s.get(se.key);u.has(se.key)&&(void 0===Ie||Ie.mutation instanceof xl)?m=m.insert(se.key,se):void 0!==Ie&&(E.set(se.key,Ie.mutation.getFieldMask()),Mu(Ie.mutation,se,Ie.mutation.getFieldMask(),Or.now()))}),this.recalculateAndSaveOverlays(e,m).next(X=>(X.forEach((se,Ie)=>E.set(se,Ie)),t.forEach((se,Ie)=>{var ot;return R.set(se,new I_(Ie,null!==(ot=E.get(se))&&void 0!==ot?ot:null))}),R))}recalculateAndSaveOverlays(e,t){const s=Ml();let u=new to((E,R)=>E-R),m=qi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const R of E)R.keys().forEach(X=>{const se=t.get(X);if(null===se)return;let Ie=s.get(X)||Go.empty();Ie=R.applyToLocalView(se,Ie),s.set(X,Ie);const ot=(u.get(R.batchId)||qi()).add(X);u=u.insert(R.batchId,ot)})}).next(()=>{const E=[],R=u.getReverseIterator();for(;R.hasNext();){const X=R.getNext(),se=X.key,Ie=X.value,ot=fa();Ie.forEach(Wt=>{if(!m.has(Wt)){const Nn=Kd(t.get(Wt),s.get(Wt));null!==Nn&&ot.set(Wt,Nn),m=m.add(Wt)}}),E.push(this.documentOverlayCache.saveOverlays(e,se,ot))}return nn.waitFor(E)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Un.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):gl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var u}getNextDocuments(e,t,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,u).next(m=>{const E=u-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,u-m.size):nn.resolve(vl());let R=-1,X=m;return E.next(se=>nn.forEach(se,(Ie,ot)=>(R<ot.largestBatchId&&(R=ot.largestBatchId),m.get(Ie)?nn.resolve():this.remoteDocumentCache.getEntry(e,Ie).next(Wt=>{X=X.insert(Ie,Wt)}))).next(()=>this.populateOverlays(e,se,m)).next(()=>this.computeViews(e,X,se,qi())).next(Ie=>({batchId:R,changes:au(Ie)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Un(t)).next(s=>{let u=ic();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const u=t.collectionGroup;let m=ic();return this.indexManager.getCollectionParents(e,u).next(E=>nn.forEach(E,R=>{const X=(se=t,Ie=R.child(u),new pl(Ie,null,se.explicitOrderBy.slice(),se.filters.slice(),se.limit,se.limitType,se.startAt,se.endAt));var se,Ie;return this.getDocumentsMatchingCollectionQuery(e,X,s).next(se=>{se.forEach((Ie,ot)=>{m=m.insert(Ie,ot)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,s){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(m=>(u=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(m=>{m.forEach((R,X)=>{const se=X.getKey();null===u.get(se)&&(u=u.insert(se,Ns.newInvalidDocument(se)))});let E=ic();return u.forEach((R,X)=>{const se=m.get(R);void 0!==se&&Mu(se.mutation,X,Go.empty(),Or.now()),ka(t,X)&&(E=E.insert(R,X))}),E})}}class ih{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return nn.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:Po(s.createTime)}),nn.resolve()}getNamedQuery(e,t){return nn.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(s=t).name,query:Gh(s.bundledQuery),readTime:Po(s.readTime)}),nn.resolve();var s}}class Id{constructor(){this.overlays=new to(Un.comparator),this.es=new Map}getOverlay(e,t){return nn.resolve(this.overlays.get(t))}getOverlays(e,t){const s=vl();return nn.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((u,m)=>{this.oe(e,t,m)}),nn.resolve()}removeOverlaysForBatchId(e,t,s){const u=this.es.get(s);return void 0!==u&&(u.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(s)),nn.resolve()}getOverlaysForCollection(e,t,s){const u=vl(),m=t.length+1,E=new Un(t.child("")),R=this.overlays.getIteratorFrom(E);for(;R.hasNext();){const X=R.getNext().value,se=X.getKey();if(!t.isPrefixOf(se.path))break;se.path.length===m&&X.largestBatchId>s&&u.set(X.getKey(),X)}return nn.resolve(u)}getOverlaysForCollectionGroup(e,t,s,u){let m=new to((se,Ie)=>se-Ie);const E=this.overlays.getIterator();for(;E.hasNext();){const se=E.getNext().value;if(se.getKey().getCollectionGroup()===t&&se.largestBatchId>s){let Ie=m.get(se.largestBatchId);null===Ie&&(Ie=vl(),m=m.insert(se.largestBatchId,Ie)),Ie.set(se.getKey(),se)}}const R=vl(),X=m.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((se,Ie)=>R.set(se,Ie)),!(R.size()>=u)););return nn.resolve(R)}oe(e,t,s){const u=this.overlays.get(s.key);if(null!==u){const E=this.es.get(u.largestBatchId).delete(s.key);this.es.set(u.largestBatchId,E)}this.overlays=this.overlays.insert(s.key,new jh(t,s));let m=this.es.get(t);void 0===m&&(m=qi(),this.es.set(t,m)),this.es.set(t,m.add(s.key))}}class sh{constructor(){this.ns=new no(Bo.ss),this.rs=new no(Bo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const s=new Bo(e,t);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.cs(new Bo(e,t))}hs(e,t){e.forEach(s=>this.removeReference(s,t))}ls(e){const t=new Un(new vr([])),s=new Bo(t,e),u=new Bo(t,e+1),m=[];return this.rs.forEachInRange([s,u],E=>{this.cs(E),m.push(E.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Un(new vr([])),s=new Bo(t,e),u=new Bo(t,e+1);let m=qi();return this.rs.forEachInRange([s,u],E=>{m=m.add(E.key)}),m}containsKey(e){const t=new Bo(e,0),s=this.ns.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Bo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Un.comparator(e.key,t.key)||jt(e._s,t._s)}static os(e,t){return jt(e._s,t._s)||Un.comparator(e.key,t.key)}}class oh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new no(Bo.ss)}checkEmpty(e){return nn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,u){const m=this.ws;this.ws++;const E=new ip(m,t,s,u);this.mutationQueue.push(E);for(const R of u)this.gs=this.gs.add(new Bo(R.key,m)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return nn.resolve(E)}lookupMutationBatch(e,t){return nn.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),m=u<0?0:u;return nn.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return nn.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return nn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Bo(t,0),u=new Bo(t,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([s,u],E=>{const R=this.ys(E._s);m.push(R)}),nn.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new no(jt);return t.forEach(u=>{const m=new Bo(u,0),E=new Bo(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,E],R=>{s=s.add(R._s)})}),nn.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let m=s;Un.isDocumentKey(m)||(m=m.child(""));const E=new Bo(new Un(m),0);let R=new no(jt);return this.gs.forEachWhile(X=>{const se=X.key.path;return!!s.isPrefixOf(se)&&(se.length===u&&(R=R.add(X._s)),!0)},E),nn.resolve(this.Is(R))}Is(e){const t=[];return e.forEach(s=>{const u=this.ys(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){sr(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let s=this.gs;return nn.forEach(t.mutations,u=>{const m=new Bo(u.key,t.batchId);return s=s.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,t){const s=new Bo(t,0),u=this.gs.firstAfterOrEqual(s);return nn.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return nn.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sd{constructor(e){this.Es=e,this.docs=new to(Un.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,u=this.docs.get(s),m=u?u.size:0,E=this.Es(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:E}),this.size+=E-m,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return nn.resolve(s?s.document.mutableCopy():Ns.newInvalidDocument(t))}getEntries(e,t){let s=ha();return t.forEach(u=>{const m=this.docs.get(u);s=s.insert(u,m?m.document.mutableCopy():Ns.newInvalidDocument(u))}),nn.resolve(s)}getAllFromCollection(e,t,s){let u=ha();const m=new Un(t.child("")),E=this.docs.getIteratorFrom(m);for(;E.hasNext();){const{key:R,value:{document:X}}=E.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||Ca(po(X),s)<=0||(u=u.insert(X.key,X.mutableCopy()))}return nn.resolve(u)}getAllFromCollectionGroup(e,t,s,u){jn()}As(e,t){return nn.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new S_(this)}getSize(e){return nn.resolve(this.size)}}class S_ extends yp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(s)}),nn.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class vm{constructor(e){this.persistence=e,this.Rs=new rl(t=>jl(t),Hl),this.lastRemoteSnapshotVersion=Bn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new sh,this.targetCount=0,this.vs=Td.Pn()}forEachTarget(e,t){return this.Rs.forEach((s,u)=>t(u)),nn.resolve()}getLastRemoteSnapshotVersion(e){return nn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nn.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),nn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),nn.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Td(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,nn.resolve()}updateTargetData(e,t){return this.Dn(t),nn.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,nn.resolve()}removeTargets(e,t,s){let u=0;const m=[];return this.Rs.forEach((E,R)=>{R.sequenceNumber<=t&&null===s.get(R.targetId)&&(this.Rs.delete(E),m.push(this.removeMatchingKeysForTargetId(e,R.targetId)),u++)}),nn.waitFor(m).next(()=>u)}getTargetCount(e){return nn.resolve(this.targetCount)}getTargetData(e,t){const s=this.Rs.get(t)||null;return nn.resolve(s)}addMatchingKeys(e,t,s){return this.Ps.us(t,s),nn.resolve()}removeMatchingKeys(e,t,s){this.Ps.hs(t,s);const u=this.persistence.referenceDelegate,m=[];return u&&t.forEach(E=>{m.push(u.markPotentiallyOrphaned(e,E))}),nn.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),nn.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ps.ds(t);return nn.resolve(s)}containsKey(e,t){return nn.resolve(this.Ps.containsKey(t))}}class Cp{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new vo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new vm(this),this.indexManager=new pp,this.remoteDocumentCache=new Sd(s=>this.referenceDelegate.xs(s)),this.yt=new op(t),this.Ns=new ih(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Id,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Vs[e.toKey()];return s||(s=new oh(t,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,s){Jt("MemoryPersistence","Starting transaction:",e);const u=new bp(this.Ss.next());return this.referenceDelegate.ks(),s(u).next(m=>this.referenceDelegate.Os(u).next(()=>m)).toPromise().then(m=>(u.raiseOnCommittedEvent(),m))}Ms(e,t){return nn.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,t)))}}class bp extends Ic{constructor(e){super(),this.currentSequenceNumber=e}}class Dd{constructor(e){this.persistence=e,this.Fs=new sh,this.$s=null}static Bs(e){return new Dd(e)}get Ls(){if(this.$s)return this.$s;throw jn()}addReference(e,t,s){return this.Fs.addReference(s,t),this.Ls.delete(s.toString()),nn.resolve()}removeReference(e,t,s){return this.Fs.removeReference(s,t),this.Ls.add(s.toString()),nn.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),nn.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(m=>this.Ls.add(m.toString()))}).next(()=>s.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nn.forEach(this.Ls,s=>{const u=Un.fromPath(s);return this.qs(e,u).next(m=>{m||t.removeEntry(u,Bn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(s=>{s?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return nn.or([()=>nn.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Em{constructor(e){this.yt=e}$(e,t,s,u){const m=new Qa("createOrUpgrade",t);var R;s<1&&u>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pi,{unique:!0}),R.createObjectStore("documentMutations"),ah(e),function(R){R.createObjectStore("remoteDocuments")}(e));let E=nn.resolve();return s<3&&u>=3&&(0!==s&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),ah(e)),E=E.next(()=>function(R){const X=R.store("targetGlobal"),se={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bn.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",se)}(m))),s<4&&u>=4&&(0!==s&&(E=E.next(()=>function(R,X){return X.store("mutations").W().next(se=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pi,{unique:!0});const Ie=X.store("mutations"),ot=se.map(Wt=>Ie.put(Wt));return nn.waitFor(ot)})}(e,m))),E=E.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(E=E.next(()=>this.Us(m))),s<6&&u>=6&&(E=E.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),s<7&&u>=7&&(E=E.next(()=>this.Gs(m))),s<8&&u>=8&&(E=E.next(()=>this.Qs(e,m))),s<9&&u>=9&&(E=E.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(E=E.next(()=>this.js(m))),s<11&&u>=11&&(E=E.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(E=E.next(()=>{!function(R){const X=R.createObjectStore("documentOverlays",{keyPath:im});X.createIndex("collectionPathOverlayIndex",Uh,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",Bh,{unique:!1})}(e)})),s<13&&u>=13&&(E=E.next(()=>function(R){const X=R.createObjectStore("remoteDocumentsV14",{keyPath:Vc});X.createIndex("documentKeyIndex",Wl),X.createIndex("collectionGroupIndex",Lh)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(E=E.next(()=>this.zs(e,m))),s<15&&u>=15&&(E=E.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:tm}).createIndex("sequenceNumberIndex",nm,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:rm}).createIndex("documentKeyIndex",Jf,{unique:!1})}(e))),E}Ks(e){let t=0;return e.store("remoteDocuments").Z((s,u)=>{t+=Qh(u)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Us(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(u=>nn.forEach(u,m=>{const E=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",E).next(R=>nn.forEach(R,X=>{sr(X.userId===m.userId);const se=Bc(this.yt,X);return gp(e,m.userId,se).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const m=[];return s.Z((E,R)=>{const X=new vr(E),se=[0,ln(X)];m.push(t.get(se).next(Ie=>Ie?nn.resolve():t.put({targetId:0,path:ln(X),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>nn.waitFor(m))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:g_});const s=t.store("collectionParents"),u=new hm,m=E=>{if(u.add(E)){const R=E.lastSegment(),X=E.popLast();return s.put({collectionId:R,parent:ln(X)})}};return t.store("remoteDocuments").Z({X:!0},(E,R)=>{const X=new vr(E);return m(X.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([E,R,X],se)=>{const Ie=Cr(R);return m(Ie.popLast())}))}js(e){const t=e.store("targets");return t.Z((s,u)=>{const m=qa(u),E=sm(this.yt,m);return t.put(E)})}Ws(e,t){const s=t.store("remoteDocuments"),u=[];return s.Z((m,E)=>{const R=t.store("remoteDocumentsV14"),X=(se=E,se.document?new Un(vr.fromString(se.document.name).popFirst(5)):se.noDocument?Un.fromSegments(se.noDocument.path):se.unknownDocument?Un.fromSegments(se.unknownDocument.path):jn()).path.toArray();var se;const Ie={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};u.push(R.put(Ie))}).next(()=>nn.waitFor(u))}zs(e,t){const s=t.store("mutations"),u=mm(this.yt),m=new Cp(Dd.Bs,this.yt.ie);return s.W().next(E=>{const R=new Map;return E.forEach(X=>{var se;let Ie=null!==(se=R.get(X.userId))&&void 0!==se?se:qi();Bc(this.yt,X).keys().forEach(ot=>Ie=Ie.add(ot)),R.set(X.userId,Ie)}),nn.forEach(R,(X,se)=>{const Ie=new Be(se),ot=zh.re(this.yt,Ie),Wt=m.getIndexManager(Ie),Nn=bd.re(Ie,this.yt,Wt,m.referenceDelegate);return new _m(u,Nn,ot,Wt).recalculateAndSaveOverlaysForDocumentKeys(new rp(t,vo.at),X).next()})})}}function ah(i){i.createObjectStore("targetDocuments",{keyPath:p_}).createIndex("documentTargetsIndex",Vh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",em,{unique:!0}),i.createObjectStore("targetGlobal")}const Tp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Xh{constructor(e,t,s,u,m,E,R,X,se,Ie,ot=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Hs=m,this.window=E,this.document=R,this.Js=se,this.Ys=Ie,this.Xs=ot,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Wt=>Promise.resolve(),!Xh.C())throw new An($t.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gm(this,u),this.ii=t+"main",this.yt=new op(X),this.ri=new ba(this.ii,this.Xs,new Em(this.yt)),this.Cs=new E0(this.referenceDelegate,this.yt),this.remoteDocumentCache=mm(this.yt),this.Ns=new m_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Ie&&Sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new An($t.FAILED_PRECONDITION,Tp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new vo(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var s=(0,xe.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,xe.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,xe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(sa(e))return Jt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Jt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Jh(e).get("owner").next(t=>nn.resolve(this.mi(t)))}gi(e){return lh(e).delete(this.clientId)}yi(){var e=this;return(0,xe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=ga(s,"clientMetadata");return u.W().next(m=>{const E=e.Ii(m,18e5),R=m.filter(X=>-1===E.indexOf(X));return nn.forEach(R,X=>u.delete(X.clientId)).next(()=>R)})}).catch(()=>[]);if(e.oi)for(const s of t)e.oi.removeItem(e.Ti(s.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?nn.resolve(!0):Jh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new An($t.FAILED_PRECONDITION,Tp);return!1}}return!(!this.networkEnabled||!this.inForeground)||lh(e).W().next(s=>void 0===this.Ii(s,5e3).find(u=>{if(this.clientId!==u.clientId){const E=!this.inForeground&&u.inForeground,R=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||E&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Jt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,xe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new rp(t,vo.at);return e._i(s).next(()=>e.gi(s))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(s=>this.pi(s.updateTimeMs,t)&&!this.Ei(s.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>lh(e).W().next(t=>this.Ii(t,18e5).map(s=>s.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return bd.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new __(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return zh.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,s){Jt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",m=15===(E=this.Xs)?Xd:14===E?$h:13===E?np:12===E?tp:11===E?ep:void jn();var E;let R;return this.ri.runTransaction(e,u,m,X=>(R=new rp(X,this.Ss?this.Ss.next():vo.at),"readwrite-primary"===t?this.fi(R).next(se=>!!se||this.di(R)).next(se=>{if(!se)throw Sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new An($t.FAILED_PRECONDITION,wc);return s(R)}).next(se=>this.wi(R).next(()=>se)):this.Vi(R).next(()=>s(R)))).then(X=>(R.raiseOnCommittedEvent(),X))}Vi(e){return Jh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new An($t.FAILED_PRECONDITION,Tp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jh(e).put("owner",t)}static C(){return ba.C()}_i(e){const t=Jh(e);return t.get("owner").next(s=>this.mi(s)?(Jt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):nn.resolve())}pi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Sr(`Detected an update time that is in the future: ${e} > ${s}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const s=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Jt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Sr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Sr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jh(i){return ga(i,"owner")}function lh(i){return ga(i,"clientMetadata")}function ef(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class wp{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Si=s,this.Di=u}static Ci(e,t){let s=qi(),u=qi();for(const m of t.docChanges)switch(m.type){case 0:s=s.add(m.doc.key);break;case 1:u=u.add(m.doc.key)}return new wp(e,t.fromCache,s,u)}}class Ip{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,s,u){return this.ki(e,t).next(m=>m||this.Oi(e,t,u,s)).next(m=>m||this.Mi(e,t))}ki(e,t){if(ru(t))return nn.resolve(null);let s=da(t);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=su(t,null,"F"),s=da(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(m=>{const E=qi(...m);return this.Ni.getDocuments(e,E).next(R=>this.indexManager.getMinOffset(e,s).next(X=>{const se=this.Fi(t,R);return this.$i(t,se,E,X.readTime)?this.ki(e,su(t,null,"F")):this.Bi(e,se,t,X)}))})))}Oi(e,t,s,u){return ru(t)||u.isEqual(Bn.min())?this.Mi(e,t):this.Ni.getDocuments(e,s).next(m=>{const E=this.Fi(t,m);return this.$i(t,E,s,u)?this.Mi(e,t):(ar()<=an.in.DEBUG&&Jt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Xu(t)),this.Bi(e,E,t,mu(u,-1)))})}Fi(e,t){let s=new no(Ju(e));return t.forEach((u,m)=>{ka(e,m)&&(s=s.add(m))}),s}$i(e,t,s,u){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(u)>0)}Mi(e,t){return ar()<=an.in.DEBUG&&Jt("QueryEngine","Using full collection scan to execute query:",Xu(t)),this.Ni.getDocumentsMatchingQuery(e,t,ra.min())}Bi(e,t,s,u){return this.Ni.getDocumentsMatchingQuery(e,s,u).next(m=>(t.forEach(E=>{m=m.insert(E.key,E)}),m))}}class D_{constructor(e,t,s,u){this.persistence=e,this.Li=t,this.yt=u,this.qi=new to(jt),this.Ui=new rl(m=>jl(m),Hl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _m(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function Cm(i,e,t,s){return new D_(i,e,t,s)}function al(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,xe.Z)(function*(i,e){const t=Kn(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let u;return t.mutationQueue.getAllMutationBatches(s).next(m=>(u=m,t.Qi(e),t.mutationQueue.getAllMutationBatches(s))).next(m=>{const E=[],R=[];let X=qi();for(const se of u){E.push(se.batchId);for(const Ie of se.mutations)X=X.add(Ie.key)}for(const se of m){R.push(se.batchId);for(const Ie of se.mutations)X=X.add(Ie.key)}return t.localDocuments.getDocuments(s,X).next(se=>({ji:se,removedBatchIds:E,addedBatchIds:R}))})})}),Sp.apply(this,arguments)}function A_(i,e){const t=Kn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),m=t.Gi.newChangeBuffer({trackRemovals:!0});return function(E,R,X,se){const Ie=X.batch,ot=Ie.keys();let Wt=nn.resolve();return ot.forEach(Nn=>{Wt=Wt.next(()=>se.getEntry(R,Nn)).next(Zn=>{const Fr=X.docVersions.get(Nn);sr(null!==Fr),Zn.version.compareTo(Fr)<0&&(Ie.applyToRemoteDocument(Zn,X),Zn.isValidDocument()&&(Zn.setReadTime(X.commitVersion),se.addEntry(Zn)))})}),Wt.next(()=>E.mutationQueue.removeMutationBatch(R,Ie))}(t,s,e,m).next(()=>m.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(E){let R=qi();for(let X=0;X<E.mutationResults.length;++X)E.mutationResults[X].transformResults.length>0&&(R=R.add(E.batch.mutations[X].key));return R}(e))).next(()=>t.localDocuments.getDocuments(s,u))})}function x_(i){const e=Kn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function C0(i,e){const t=Kn(i),s=e.snapshotVersion;let u=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const E=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.qi;const R=[];e.targetChanges.forEach((Ie,ot)=>{const Wt=u.get(ot);if(!Wt)return;R.push(t.Cs.removeMatchingKeys(m,Ie.removedDocuments,ot).next(()=>t.Cs.addMatchingKeys(m,Ie.addedDocuments,ot)));let Nn=Wt.withSequenceNumber(m.currentSequenceNumber);var Zn,Fr,gi;e.targetMismatches.has(ot)?Nn=Nn.withResumeToken(uo.EMPTY_BYTE_STRING,Bn.min()).withLastLimboFreeSnapshotVersion(Bn.min()):Ie.resumeToken.approximateByteSize()>0&&(Nn=Nn.withResumeToken(Ie.resumeToken,s)),u=u.insert(ot,Nn),Fr=Nn,gi=Ie,(0===(Zn=Wt).resumeToken.approximateByteSize()||Fr.snapshotVersion.toMicroseconds()-Zn.snapshotVersion.toMicroseconds()>=3e8||gi.addedDocuments.size+gi.modifiedDocuments.size+gi.removedDocuments.size>0)&&R.push(t.Cs.updateTargetData(m,Nn))});let X=ha(),se=qi();if(e.documentUpdates.forEach(Ie=>{e.resolvedLimboDocuments.has(Ie)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(m,Ie))}),R.push(Dp(m,E,e.documentUpdates).next(Ie=>{X=Ie.Wi,se=Ie.zi})),!s.isEqual(Bn.min())){const Ie=t.Cs.getLastRemoteSnapshotVersion(m).next(ot=>t.Cs.setTargetsMetadata(m,m.currentSequenceNumber,s));R.push(Ie)}return nn.waitFor(R).next(()=>E.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,X,se)).next(()=>X)}).then(m=>(t.qi=u,m))}function Dp(i,e,t){let s=qi(),u=qi();return t.forEach(m=>s=s.add(m)),e.getEntries(i,s).next(m=>{let E=ha();return t.forEach((R,X)=>{const se=m.get(R);X.isFoundDocument()!==se.isFoundDocument()&&(u=u.add(R)),X.isNoDocument()&&X.version.isEqual(Bn.min())?(e.removeEntry(R,X.readTime),E=E.insert(R,X)):!se.isValidDocument()||X.version.compareTo(se.version)>0||0===X.version.compareTo(se.version)&&se.hasPendingWrites?(e.addEntry(X),E=E.insert(R,X)):Jt("LocalStore","Ignoring outdated watch update for ",R,". Current version:",se.version," Watch version:",X.version)}),{Wi:E,zi:u}})}function b0(i,e){const t=Kn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ad(i,e){const t=Kn(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.Cs.getTargetData(s,e).next(m=>m?(u=m,nn.resolve(u)):t.Cs.allocateTargetId(s).next(E=>(u=new uu(e,E,0,s.currentSequenceNumber),t.Cs.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.qi.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.qi=t.qi.insert(s.targetId,s),t.Ui.set(e,s.targetId)),s})}function lc(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,xe.Z)(function*(i,e,t){const s=Kn(i),u=s.qi.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",m,E=>s.persistence.referenceDelegate.removeTarget(E,u)))}catch(E){if(!sa(E))throw E;Jt("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}s.qi=s.qi.remove(e),s.Ui.delete(u.target)}),tf.apply(this,arguments)}function nf(i,e,t){const s=Kn(i);let u=Bn.min(),m=qi();return s.persistence.runTransaction("Execute query","readonly",E=>function(R,X,se){const Ie=Kn(R),ot=Ie.Ui.get(se);return void 0!==ot?nn.resolve(Ie.qi.get(ot)):Ie.Cs.getTargetData(X,se)}(s,E,da(e)).next(R=>{if(R)return u=R.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(E,R.targetId).next(X=>{m=X})}).next(()=>s.Li.getDocumentsMatchingQuery(E,e,t?u:Bn.min(),t?m:qi())).next(R=>(Ap(s,Da(e),R),{documents:R,Hi:m})))}function bm(i,e){const t=Kn(i),s=Kn(t.Cs),u=t.qi.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",m=>s.ne(m,e).next(E=>E?E.target:null))}function Tm(i,e){const t=Kn(i),s=t.Ki.get(e)||Bn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,mu(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Ap(t,e,u),u))}function Ap(i,e,t){let s=i.Ki.get(e)||Bn.min();t.forEach((u,m)=>{m.readTime.compareTo(s)>0&&(s=m.readTime)}),i.Ki.set(e,s)}function rf(){return rf=(0,xe.Z)(function*(i,e,t,s){const u=Kn(i);let m=qi(),E=ha();for(const se of t){const Ie=e.Ji(se.metadata.name);se.document&&(m=m.add(Ie));const ot=e.Yi(se);ot.setReadTime(e.Xi(se.metadata.readTime)),E=E.insert(Ie,ot)}const R=u.Gi.newChangeBuffer({trackRemovals:!0}),X=yield Ad(u,(se=s,da(nu(vr.fromString(`__bundle__/docs/${se}`)))));var se;return u.persistence.runTransaction("Apply bundle documents","readwrite",se=>Dp(se,R,E).next(Ie=>(R.apply(se),Ie)).next(Ie=>u.Cs.removeMatchingKeysForTargetId(se,X.targetId).next(()=>u.Cs.addMatchingKeys(se,m,X.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(se,Ie.Wi,Ie.zi)).next(()=>Ie.Wi)))}),rf.apply(this,arguments)}function R_(i,e){return xp.apply(this,arguments)}function xp(){return xp=(0,xe.Z)(function*(i,e,t=qi()){const s=yield Ad(i,da(Gh(e.bundledQuery))),u=Kn(i);return u.persistence.runTransaction("Save named query","readwrite",m=>{const E=Po(e.readTime);if(s.snapshotVersion.compareTo(E)>=0)return u.Ns.saveNamedQuery(m,e);const R=s.withResumeToken(uo.EMPTY_BYTE_STRING,E);return u.qi=u.qi.insert(R.targetId,R),u.Cs.updateTargetData(m,R).next(()=>u.Cs.removeMatchingKeysForTargetId(m,s.targetId)).next(()=>u.Cs.addMatchingKeys(m,t,s.targetId)).next(()=>u.Ns.saveNamedQuery(m,e))})}),xp.apply(this,arguments)}function Mp(i,e){return`firestore_clients_${i}_${e}`}function Rp(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Pp(i,e){return`firestore_targets_${i}_${e}`}class El{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static Zi(e,t,s){const u=JSON.parse(s);let m,E="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return E&&u.error&&(E="string"==typeof u.error.message&&"string"==typeof u.error.code,E&&(m=new An(u.error.code,u.error.message))),E?new El(e,t,u.state,m):(Sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wc{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let u,m="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return m&&s.error&&(m="string"==typeof s.error.message&&"string"==typeof s.error.code,m&&(u=new An(s.error.code,s.error.message))),m?new Wc(e,s.state,u):(Sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,m=lu();for(let E=0;u&&E<s.activeTargetIds.length;++E)u=Xa(s.activeTargetIds[E]),m=m.add(s.activeTargetIds[E]);return u?new sf(e,m):(Sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Np{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Np(t.clientId,t.onlineState):(Sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wm{constructor(){this.activeTargetIds=lu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class af{constructor(e,t,s,u,m){this.window=e,this.Hs=t,this.persistenceKey=s,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new to(jt),this.started=!1,this.cr=[];const E=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=Mp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new wm),this.lr=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,xe.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const m=e.getItem(Mp(e.persistenceKey,u));if(m){const E=sf.Zi(u,m);E&&(e.ur=e.ur.insert(E.clientId,E))}}e.gr();const s=e.storage.getItem(e.wr);if(s){const u=e.yr(s);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,s){this.Tr(e,t,s),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pp(this.persistenceKey,e));if(s){const u=Wc.Zi(e,s);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Rr(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.Er(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Jt("SharedClientState","READ",e,t),t}setItem(e,t){Jt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Jt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Jt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ar)return void Sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,xe.Z)(function*(){if(t.started){if(null!==s.key)if(t.lr.test(s.key)){if(null==s.newValue){const u=t.vr(s.key);return t.Vr(u,null)}{const u=t.Sr(s.key,s.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const u=t.Dr(s.key,s.newValue);if(u)return t.Cr(u)}}else if(t._r.test(s.key)){if(null!==s.newValue){const u=t.Nr(s.key,s.newValue);if(u)return t.kr(u)}}else if(s.key===t.wr){if(null!==s.newValue){const u=t.yr(s.newValue);if(u)return t.pr(u)}}else if(s.key===t.hr){const u=function(m){let E=vo.at;if(null!=m)try{const R=JSON.parse(m);sr("number"==typeof R),E=R}catch(R){Sr("SharedClientState","Failed to read sequence number from WebStorage",R)}return E}(s.newValue);u!==vo.at&&t.sequenceNumberHandler(u)}else if(s.key===t.mr){const u=t.Or(s.newValue);yield Promise.all(u.map(m=>t.syncEngine.Mr(m)))}}else t.cr.push(s)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,s){const u=new El(this.currentUser,e,t,s),m=Rp(this.persistenceKey,this.currentUser,e);this.setItem(m,u.tr())}Er(e){const t=Rp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,s){const u=Pp(this.persistenceKey,e),m=new Wc(e,t,s);this.setItem(u,m.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const s=this.vr(e);return sf.Zi(s,t)}Dr(e,t){const s=this.dr.exec(e),u=Number(s[1]);return El.Zi(new Be(void 0!==s[2]?s[2]:null),u,t)}Nr(e,t){const s=this._r.exec(e),u=Number(s[1]);return Wc.Zi(u,t)}yr(e){return Np.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Jt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const s=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),m=this.Ir(s),E=[],R=[];return m.forEach(X=>{u.has(X)||E.push(X)}),u.forEach(X=>{m.has(X)||R.push(X)}),this.syncEngine.Br(E,R).then(()=>{this.ur=s})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=lu();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class Im{constructor(){this.Lr=new wm,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,s){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new wm,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class P_{Ur(e){}shutdown(){}}class Sm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Jt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Jt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Op={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N_{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class O_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,s,u,m){const E=this.ho(e,t);Jt("RestConnection","Sending: ",E,s);const R={};return this.lo(R,u,m),this.fo(e,E,R,s).then(X=>(Jt("RestConnection","Received: ",X),X),X=>{throw hr("RestConnection",`${e} failed with error: `,X,"url: ",E,"request:",s),X})}_o(e,t,s,u,m,E){return this.ao(e,t,s,u,m)}lo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+It,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,m)=>e[m]=u),s&&s.headers.forEach((u,m)=>e[m]=u)}ho(e,t){return`${this.oo}/v1/${t}:${Op[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,s,u){return new Promise((m,E)=>{const R=new Se;R.setWithCredentials(!0),R.listenOnce(Z.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case Ws.NO_ERROR:const se=R.getResponseJson();Jt("Connection","XHR received:",JSON.stringify(se)),m(se);break;case Ws.TIMEOUT:Jt("Connection",'RPC "'+e+'" timed out'),E(new An($t.DEADLINE_EXCEEDED,"Request time out"));break;case Ws.HTTP_ERROR:const Ie=R.getStatus();if(Jt("Connection",'RPC "'+e+'" failed with status:',Ie,"response text:",R.getResponseText()),Ie>0){let ot=R.getResponseJson();Array.isArray(ot)&&(ot=ot[0]);const Wt=null==ot?void 0:ot.error;if(Wt&&Wt.status&&Wt.message){const Nn=function(Zn){const Fr=Zn.toLowerCase().replace(/_/g,"-");return Object.values($t).indexOf(Fr)>=0?Fr:$t.UNKNOWN}(Wt.status);E(new An(Nn,Wt.message))}else E(new An($t.UNKNOWN,"Server responded with status "+R.getStatus()))}else E(new An($t.UNAVAILABLE,"Connection failed."));break;default:jn()}}finally{Jt("Connection",'RPC "'+e+'" completed.')}});const X=JSON.stringify(u);R.send(t,"POST",X,s,15)})}wo(e,t,s){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=vi(),E=Ai(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new k({})),this.lo(R.initMessageHeaders,t,s),R.encodeInitMessageHeaders=!0;const X=u.join("");Jt("Connection","Creating WebChannel: "+X,R);const se=m.createWebChannel(X,R);let Ie=!1,ot=!1;const Wt=new N_({Hr:Zn=>{ot?Jt("Connection","Not sending because WebChannel is closed:",Zn):(Ie||(Jt("Connection","Opening WebChannel transport."),se.open(),Ie=!0),Jt("Connection","WebChannel sending:",Zn),se.send(Zn))},Jr:()=>se.close()}),Nn=(Zn,Fr,gi)=>{Zn.listen(Fr,bo=>{try{gi(bo)}catch(Lo){setTimeout(()=>{throw Lo},0)}})};return Nn(se,ue.EventType.OPEN,()=>{ot||Jt("Connection","WebChannel transport opened.")}),Nn(se,ue.EventType.CLOSE,()=>{ot||(ot=!0,Jt("Connection","WebChannel transport closed"),Wt.io())}),Nn(se,ue.EventType.ERROR,Zn=>{ot||(ot=!0,hr("Connection","WebChannel transport errored:",Zn),Wt.io(new An($t.UNAVAILABLE,"The operation could not be completed")))}),Nn(se,ue.EventType.MESSAGE,Zn=>{var Fr;if(!ot){const gi=Zn.data[0];sr(!!gi);const bo=gi,Lo=bo.error||(null===(Fr=bo[0])||void 0===Fr?void 0:Fr.error);if(Lo){Jt("Connection","WebChannel received error:",Lo);const Us=Lo.status;let Yo=function(qs){const ma=Fo[qs];if(void 0!==ma)return Pu(ma)}(Us),Bs=Lo.message;void 0===Yo&&(Yo=$t.INTERNAL,Bs="Unknown error status: "+Us+" with message "+Lo.message),ot=!0,Wt.io(new An(Yo,Bs)),se.close()}else Jt("Connection","WebChannel received:",gi),Wt.ro(gi)}}),Nn(E,C.STAT_EVENT,Zn=>{Zn.stat===T.PROXY?Jt("Connection","Detected buffering proxy"):Zn.stat===T.NOPROXY&&Jt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Wt.so()},0),Wt}}function uh(){return"undefined"!=typeof window?window:null}function xd(){return"undefined"!=typeof document?document:null}function ch(i){return new il(i,!0)}class dh{constructor(e,t,s=1e3,u=1.5,m=6e4){this.Hs=e,this.timerId=t,this.mo=s,this.yo=u,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-s);u>0&&Jt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class lf{constructor(e,t,s,u,m,E,R,X){this.Hs=e,this.vo=s,this.Vo=u,this.connection=m,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=R,this.listener=X,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new dh(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,xe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,xe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var s=this;return(0,xe.Z)(function*(){s.Lo(),s.qo(),s.xo.cancel(),s.So++,4!==e?s.xo.reset():t&&t.code===$t.RESOURCE_EXHAUSTED?(Sr(t.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),s.xo.Ao()):t&&t.code===$t.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Uo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.So===t&&this.Go(s,u)},s=>{e(()=>{const u=new An($t.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(u)})})}Go(e,t){const s=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{s(()=>this.Qo(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,xe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Jt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Jt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dm extends lf{constructor(e,t,s,u,m,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,u,E),this.yt=m}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function bt(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:jn(),u=e.targetChange.targetIds||[],m=function(X,se){return X.wt?(sr(void 0===se||"string"==typeof se),uo.fromBase64String(se||"")):(sr(void 0===se||se instanceof Uint8Array),uo.fromUint8Array(se||new Uint8Array))}(i,e.targetChange.resumeToken),E=e.targetChange.cause,R=E&&function(X){const se=void 0===X.code?$t.UNKNOWN:Pu(X.code);return new An(se,X.message||"")}(E);t=new Qd(s,u,m,R||null)}else if("documentChange"in e){const s=e.documentChange,u=Rl(i,s.document.name),m=Po(s.document.updateTime),E=s.document.createTime?Po(s.document.createTime):Bn.min(),R=new Uo({mapValue:{fields:s.document.fields}}),X=Ns.newFoundDocument(u,m,E,R);t=new xa(s.targetIds||[],s.removedTargetIds||[],X.key,X)}else if("documentDelete"in e){const s=e.documentDelete,u=Rl(i,s.document),m=s.readTime?Po(s.readTime):Bn.min(),E=Ns.newNoDocument(u,m);t=new xa([],s.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const s=e.documentRemove,u=Rl(i,s.document);t=new xa([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return jn();{const s=e.filter,m=new Rc(s.count||0);t=new Pc(s.targetId,m)}}var X;return t}(this.yt,e),s=function(u){if(!("targetChange"in u))return Bn.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?Bn.min():m.readTime?Po(m.readTime):Bn.min()}(e);return this.listener.Wo(t,s)}zo(e){const t={};t.database=p(this.yt),t.addTarget=function(u,m){let E;const R=m.target;return E=Yu(R)?{documents:Ci(u,R)}:{query:hi(u,R)},E.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?E.resumeToken=Fc(u,m.resumeToken):m.snapshotVersion.compareTo(Bn.min())>0&&(E.readTime=sl(u,m.snapshotVersion.toTimestamp())),E}(this.yt,e);const s=function f(i,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Bo(t)}Ho(e){const t={};t.database=p(this.yt),t.removeTarget=e,this.Bo(t)}}class T0 extends lf{constructor(e,t,s,u,m,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,u,E),this.yt=m,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(sr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Lr(i,e){return i&&i.length>0?(sr(void 0!==e),i.map(t=>function(s,u){let m=Po(s.updateTime?s.updateTime:u);return m.isEqual(Bn.min())&&(m=Po(u)),new _l(m,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Po(e.commitTime);return this.listener.Zo(s,t)}return sr(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=p(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>pn(this.yt,s))};this.Bo(t)}}class w0 extends class{}{constructor(e,t,s,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.yt=u,this.nu=!1}su(){if(this.nu)throw new An($t.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.connection.ao(e,t,s,u,m)).catch(u=>{throw"FirebaseError"===u.name?(u.code===$t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new An($t.UNKNOWN,u.toString())})}_o(e,t,s,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,E])=>this.connection._o(e,t,s,m,E,u)).catch(m=>{throw"FirebaseError"===m.name?(m.code===$t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new An($t.UNKNOWN,m.toString())})}terminate(){this.nu=!0}}class k_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Sr(t),this.ou=!1):Jt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class xm{constructor(e,t,s,u,m){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=m,this.mu.Ur(R=>{s.enqueueAndForget((0,xe.Z)(function*(){var X;hu(E)&&(Jt("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,xe.Z)(function*(se){const Ie=Kn(se);Ie._u.add(4),yield qc(Ie),Ie.gu.set("Unknown"),Ie._u.delete(4),yield Md(Ie)}),function(se){return X.apply(this,arguments)})(E))}))}),this.gu=new k_(s,u)}}function Md(i){return uf.apply(this,arguments)}function uf(){return uf=(0,xe.Z)(function*(i){if(hu(i))for(const e of i.wu)yield e(!0)}),uf.apply(this,arguments)}function qc(i){return cf.apply(this,arguments)}function cf(){return cf=(0,xe.Z)(function*(i){for(const e of i.wu)yield e(!1)}),cf.apply(this,arguments)}function Pl(i,e){const t=Kn(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),hh(t)?Rm(t):Od(t).ko()&&Fp(t,e))}function uc(i,e){const t=Kn(i),s=Od(t);t.du.delete(e),s.ko()&&Mm(t,e),0===t.du.size&&(s.ko()?s.Fo():hu(t)&&t.gu.set("Unknown"))}function Fp(i,e){i.yu.Ot(e.targetId),Od(i).zo(e)}function Mm(i,e){i.yu.Ot(e),Od(i).Ho(e)}function Rm(i){i.yu=new Fh({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),Od(i).start(),i.gu.uu()}function hh(i){return hu(i)&&!Od(i).No()&&i.du.size>0}function hu(i){return 0===Kn(i)._u.size}function df(i){i.yu=void 0}function fh(i){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,xe.Z)(function*(i){i.du.forEach((e,t)=>{Fp(i,e)})}),Lp.apply(this,arguments)}function Vp(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,xe.Z)(function*(i,e){df(i),hh(i)?(i.gu.hu(e),Rm(i)):i.gu.set("Unknown")}),hf.apply(this,arguments)}function Pm(i,e,t){return ff.apply(this,arguments)}function ff(){return ff=(0,xe.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Qd&&2===e.state&&e.cause)try{yield(s=(0,xe.Z)(function*(u,m){const E=m.cause;for(const R of m.targetIds)u.du.has(R)&&(yield u.remoteSyncer.rejectListen(R,E),u.du.delete(R),u.yu.removeTarget(R))}),function(u,m){return s.apply(this,arguments)})(i,e)}catch(s){Jt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield pf(i,s)}else if(e instanceof xa?i.yu.Kt(e):e instanceof Pc?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(Bn.min()))try{const s=yield x_(i.localStore);t.compareTo(s)>=0&&(yield function(u,m){const E=u.yu.Zt(m);return E.targetChanges.forEach((R,X)=>{if(R.resumeToken.approximateByteSize()>0){const se=u.du.get(X);se&&u.du.set(X,se.withResumeToken(R.resumeToken,m))}}),E.targetMismatches.forEach(R=>{const X=u.du.get(R);if(!X)return;u.du.set(R,X.withResumeToken(uo.EMPTY_BYTE_STRING,X.snapshotVersion)),Mm(u,R);const se=new uu(X.target,R,1,X.sequenceNumber);Fp(u,se)}),u.remoteSyncer.applyRemoteEvent(E)}(i,t))}catch(s){Jt("RemoteStore","Failed to raise snapshot:",s),yield pf(i,s)}var s}),ff.apply(this,arguments)}function pf(i,e,t){return ph.apply(this,arguments)}function ph(){return ph=(0,xe.Z)(function*(i,e,t){if(!sa(e))throw e;i._u.add(1),yield qc(i),i.gu.set("Offline"),t||(t=()=>x_(i.localStore)),i.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){Jt("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Md(i)}))}),ph.apply(this,arguments)}function Nm(i,e){return e().catch(t=>pf(i,t,e))}function Rd(i){return gf.apply(this,arguments)}function gf(){return gf=(0,xe.Z)(function*(i){const e=Kn(i),t=cc(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Pd(e);)try{const u=yield b0(e.localStore,s);if(null===u){0===e.fu.length&&t.Fo();break}s=u.batchId,Om(e,u)}catch(u){yield pf(e,u)}km(e)&&Fm(e)}),gf.apply(this,arguments)}function Pd(i){return hu(i)&&i.fu.length<10}function Om(i,e){i.fu.push(e);const t=cc(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function km(i){return hu(i)&&!cc(i).No()&&i.fu.length>0}function Fm(i){cc(i).start()}function Nd(i){return Up.apply(this,arguments)}function Up(){return Up=(0,xe.Z)(function*(i){cc(i).eu()}),Up.apply(this,arguments)}function F_(i){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,xe.Z)(function*(i){const e=cc(i);for(const t of i.fu)e.Xo(t.mutations)}),Bp.apply(this,arguments)}function L_(i,e,t){return Nl.apply(this,arguments)}function Nl(){return Nl=(0,xe.Z)(function*(i,e,t){const s=i.fu.shift(),u=sp.from(s,e,t);yield Nm(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Rd(i)}),Nl.apply(this,arguments)}function $p(i,e){return mf.apply(this,arguments)}function mf(){return mf=(0,xe.Z)(function*(i,e){var t;e&&cc(i).Yo&&(yield(t=(0,xe.Z)(function*(s,u){if(aa(m=u.code)&&m!==$t.ABORTED){const E=s.fu.shift();cc(s).Mo(),yield Nm(s,()=>s.remoteSyncer.rejectFailedWrite(E.batchId,u)),yield Rd(s)}var m}),function(s,u){return t.apply(this,arguments)})(i,e)),km(i)&&Fm(i)}),mf.apply(this,arguments)}function jp(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,xe.Z)(function*(i,e){const t=Kn(i);t.asyncQueue.verifyOperationInProgress(),Jt("RemoteStore","RemoteStore received new credentials");const s=hu(t);t._u.add(3),yield qc(t),s&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Md(t)}),yf.apply(this,arguments)}function _f(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,xe.Z)(function*(i,e){const t=Kn(i);e?(t._u.delete(2),yield Md(t)):e||(t._u.add(2),yield qc(t),t.gu.set("Unknown"))}),Hp.apply(this,arguments)}function Od(i){return i.pu||(i.pu=function(e,t,s){const u=Kn(e);return u.su(),new Dm(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:fh.bind(null,i),Zr:Vp.bind(null,i),Wo:Pm.bind(null,i)}),i.wu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.pu.Mo(),hh(i)?Rm(i):i.gu.set("Unknown")):(yield i.pu.stop(),df(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function cc(i){return i.Iu||(i.Iu=function(e,t,s){const u=Kn(e);return u.su(),new T0(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:Nd.bind(null,i),Zr:$p.bind(null,i),tu:F_.bind(null,i),Zo:L_.bind(null,i)}),i.wu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.Iu.Mo(),yield Rd(i)):(yield i.Iu.stop(),i.fu.length>0&&(Jt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Gp{constructor(e,t,s,u,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=m,this.deferred=new ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,s,u,m){const E=Date.now()+s,R=new Gp(e,t,E,u,m);return R.start(s),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new An($t.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kc(i,e){if(Sr("AsyncQueue",`${e}: ${i}`),sa(i))return new An($t.UNAVAILABLE,`${e}: ${i}`);throw i}class gh{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Un.comparator(t.key,s.key):(t,s)=>Un.comparator(t.key,s.key),this.keyedMap=ic(),this.sortedSet=new to(this.comparator)}static emptySet(e){return new gh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(!u.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new gh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class zp{constructor(){this.Tu=new to(Un.comparator)}track(e){const t=e.doc.key,s=this.Tu.get(t);s?0!==e.type&&3===s.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==s.type?this.Tu=this.Tu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Tu=this.Tu.remove(t):1===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):jn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,s)=>{e.push(s)}),e}}class kd{constructor(e,t,s,u,m,E,R,X,se){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=m,this.fromCache=E,this.syncStateChanged=R,this.excludesMetadataChanges=X,this.hasCachedResults=se}static fromInitialDocuments(e,t,s,u,m){const E=[];return t.forEach(R=>{E.push({type:0,doc:R})}),new kd(e,t,gh.emptySet(t),E,s,u,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class V_{constructor(){this.Au=void 0,this.listeners=[]}}class I0{constructor(){this.queries=new rl(e=>Oa(e),bu),this.onlineState="Unknown",this.Ru=new Set}}function Lm(i,e){return mh.apply(this,arguments)}function mh(){return mh=(0,xe.Z)(function*(i,e){const t=Kn(i),s=e.query;let u=!1,m=t.queries.get(s);if(m||(u=!0,m=new V_),u)try{m.Au=yield t.onListen(s)}catch(E){const R=Kc(E,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(R)}t.queries.set(s,m),m.listeners.push(e),e.bu(t.onlineState),m.Au&&e.Pu(m.Au)&&Cl(t)}),mh.apply(this,arguments)}function Wp(i,e){return vf.apply(this,arguments)}function vf(){return vf=(0,xe.Z)(function*(i,e){const t=Kn(i),s=e.query;let u=!1;const m=t.queries.get(s);if(m){const E=m.listeners.indexOf(e);E>=0&&(m.listeners.splice(E,1),u=0===m.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)}),vf.apply(this,arguments)}function Vm(i,e){const t=Kn(i);let s=!1;for(const u of e){const E=t.queries.get(u.query);if(E){for(const R of E.listeners)R.Pu(u)&&(s=!0);E.Au=u}}s&&Cl(t)}function S0(i,e,t){const s=Kn(i),u=s.queries.get(e);if(u)for(const m of u.listeners)m.onError(t);s.queries.delete(e)}function Cl(i){i.Ru.forEach(e=>{e.next()})}class Um{constructor(e,t,s){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new kd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class D0{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class qp{constructor(e){this.yt=e}Ji(e){return Rl(this.yt,e)}Yi(e){return e.metadata.exists?re(this.yt,e.document,!1):Ns.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Po(e)}}class Bm{constructor(e,t,s){this.Mu=e,this.localStore=t,this.yt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const s=vr.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,s=new qp(this.yt);for(const u of e)if(u.metadata.queries){const m=s.Ji(u.metadata.name);for(const E of u.metadata.queries){const R=(t.get(E)||qi()).add(m);t.set(E,R)}}return t}complete(){var e=this;return(0,xe.Z)(function*(){const t=yield function M_(i,e,t,s){return rf.apply(this,arguments)}(e.localStore,new qp(e.yt),e.documents,e.Mu.id),s=e.$u(e.documents);for(const u of e.queries)yield R_(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Kp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class $m{constructor(e){this.key=e}}class U_{constructor(e){this.key=e}}class Zp{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=qi(),this.mutatedKeys=qi(),this.Gu=Ju(e),this.Qu=new gh(this.Gu)}get ju(){return this.qu}Wu(e,t){const s=t?t.zu:new zp,u=t?t.Qu:this.Qu;let m=t?t.mutatedKeys:this.mutatedKeys,E=u,R=!1;const X="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,se="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Ie,ot)=>{const Wt=u.get(Ie),Nn=ka(this.query,ot)?ot:null,Zn=!!Wt&&this.mutatedKeys.has(Wt.key),Fr=!!Nn&&(Nn.hasLocalMutations||this.mutatedKeys.has(Nn.key)&&Nn.hasCommittedMutations);let gi=!1;Wt&&Nn?Wt.data.isEqual(Nn.data)?Zn!==Fr&&(s.track({type:3,doc:Nn}),gi=!0):this.Hu(Wt,Nn)||(s.track({type:2,doc:Nn}),gi=!0,(X&&this.Gu(Nn,X)>0||se&&this.Gu(Nn,se)<0)&&(R=!0)):!Wt&&Nn?(s.track({type:0,doc:Nn}),gi=!0):Wt&&!Nn&&(s.track({type:1,doc:Wt}),gi=!0,(X||se)&&(R=!0)),gi&&(Nn?(E=E.add(Nn),m=Fr?m.add(Ie):m.delete(Ie)):(E=E.delete(Ie),m=m.delete(Ie)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const Ie="F"===this.query.limitType?E.last():E.first();E=E.delete(Ie.key),m=m.delete(Ie.key),s.track({type:1,doc:Ie})}return{Qu:E,zu:s,$i:R,mutatedKeys:m}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Eu();m.sort((se,Ie)=>function(ot,Wt){const Nn=Zn=>{switch(Zn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jn()}};return Nn(ot)-Nn(Wt)}(se.type,Ie.type)||this.Gu(se.doc,Ie.doc)),this.Ju(s);const E=t?this.Yu():[],R=0===this.Ku.size&&this.current?1:0,X=R!==this.Uu;return this.Uu=R,0!==m.length||X?{snapshot:new kd(this.query,e.Qu,u,m,e.mutatedKeys,0===R,X,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:E}:{Xu:E}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new zp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=qi(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const t=[];return e.forEach(s=>{this.Ku.has(s)||t.push(new U_(s))}),this.Ku.forEach(s=>{e.has(s)||t.push(new $m(s))}),t}tc(e){this.qu=e.Hi,this.Ku=qi();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return kd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Yp{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class B_{constructor(e){this.key=e,this.nc=!1}}class Qp{constructor(e,t,s,u,m,E){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=m,this.maxConcurrentLimboResolutions=E,this.sc={},this.ic=new rl(R=>Oa(R),bu),this.rc=new Map,this.oc=new Set,this.uc=new to(Un.comparator),this.cc=new Map,this.ac=new sh,this.hc={},this.lc=new Map,this.fc=Td.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function $_(i,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,xe.Z)(function*(i,e){const t=Sf(i);let s,u;const m=t.ic.get(e);if(m)s=m.targetId,t.sharedClientState.addLocalQueryTarget(s),u=m.view.ec();else{const E=yield Ad(t.localStore,da(e));t.isPrimaryClient&&Pl(t.remoteStore,E);const R=t.sharedClientState.addLocalQueryTarget(E.targetId);s=E.targetId,u=yield Jp(t,e,s,"current"===R,E.resumeToken)}return u}),Xp.apply(this,arguments)}function Jp(i,e,t,s,u){return eg.apply(this,arguments)}function eg(){return eg=(0,xe.Z)(function*(i,e,t,s,u){i._c=(ot,Wt,Nn)=>{return(Zn=(0,xe.Z)(function*(Fr,gi,bo,Lo){let Us=gi.view.Wu(bo);Us.$i&&(Us=yield nf(Fr.localStore,gi.query,!1).then(({documents:qs})=>gi.view.Wu(qs,Us)));const Yo=Lo&&Lo.targetChanges.get(gi.targetId),Bs=gi.view.applyChanges(Us,Fr.isPrimaryClient,Yo);return fc(Fr,gi.targetId,Bs.Xu),Bs.snapshot}),function(Fr,gi,bo,Lo){return Zn.apply(this,arguments)})(i,ot,Wt,Nn);var Zn};const m=yield nf(i.localStore,e,!0),E=new Zp(e,m.Hi),R=E.Wu(m.documents),X=Ou.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,u),se=E.applyChanges(R,i.isPrimaryClient,X);fc(i,t,se.Xu);const Ie=new Yp(e,t,E);return i.ic.set(e,Ie),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),se.snapshot}),eg.apply(this,arguments)}function j_(i,e){return tg.apply(this,arguments)}function tg(){return tg=(0,xe.Z)(function*(i,e){const t=Kn(i),s=t.ic.get(e),u=t.rc.get(s.targetId);if(u.length>1)return t.rc.set(s.targetId,u.filter(m=>!bu(m,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield lc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),uc(t.remoteStore,s.targetId),Kl(t,s.targetId)}).catch(ia))):(Kl(t,s.targetId),yield lc(t.localStore,s.targetId,!0))}),tg.apply(this,arguments)}function dc(){return dc=(0,xe.Z)(function*(i,e,t){const s=lg(i);try{const u=yield function(m,E){const R=Kn(m),X=Or.now(),se=E.reduce((Wt,Nn)=>Wt.add(Nn.key),qi());let Ie,ot;return R.persistence.runTransaction("Locally write mutations","readwrite",Wt=>{let Nn=ha(),Zn=qi();return R.Gi.getEntries(Wt,se).next(Fr=>{Nn=Fr,Nn.forEach((gi,bo)=>{bo.isValidDocument()||(Zn=Zn.add(gi))})}).next(()=>R.localDocuments.getOverlayedDocuments(Wt,Nn)).next(Fr=>{Ie=Fr;const gi=[];for(const bo of E){const Lo=Mc(bo,Ie.get(bo.key).overlayedDocument);null!=Lo&&gi.push(new xl(bo.key,Lo,Ku(Lo.value.mapValue),ro.exists(!0)))}return R.mutationQueue.addMutationBatch(Wt,X,gi,E)}).next(Fr=>{ot=Fr;const gi=Fr.applyToLocalDocumentSet(Ie,Zn);return R.documentOverlayCache.saveOverlays(Wt,Fr.batchId,gi)})}).then(()=>({batchId:ot.batchId,changes:au(Ie)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(m,E,R){let X=m.hc[m.currentUser.toKey()];X||(X=new to(jt)),X=X.insert(E,R),m.hc[m.currentUser.toKey()]=X}(s,u.batchId,t),yield ul(s,u.changes),yield Rd(s.remoteStore)}catch(u){const m=Kc(u,"Failed to persist write");t.reject(m)}}),dc.apply(this,arguments)}function jm(i,e){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,xe.Z)(function*(i,e){const t=Kn(i);try{const s=yield C0(t.localStore,e);e.targetChanges.forEach((u,m)=>{const E=t.cc.get(m);E&&(sr(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?E.nc=!0:u.modifiedDocuments.size>0?sr(E.nc):u.removedDocuments.size>0&&(sr(E.nc),E.nc=!1))}),yield ul(t,s,e)}catch(s){yield ia(s)}}),Zc.apply(this,arguments)}function Hm(i,e,t){const s=Kn(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.ic.forEach((m,E)=>{const R=E.view.bu(e);R.snapshot&&u.push(R.snapshot)}),function(m,E){const R=Kn(m);R.onlineState=E;let X=!1;R.queries.forEach((se,Ie)=>{for(const ot of Ie.listeners)ot.bu(E)&&(X=!0)}),X&&Cl(R)}(s.eventManager,e),u.length&&s.sc.Wo(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function H_(i,e,t){return yh.apply(this,arguments)}function yh(){return yh=(0,xe.Z)(function*(i,e,t){const s=Kn(i);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.cc.get(e),m=u&&u.key;if(m){let E=new to(Un.comparator);E=E.insert(m,Ns.newNoDocument(m,Bn.min()));const R=qi().add(m),X=new Nu(Bn.min(),new Map,new no(jt),E,R);yield jm(s,X),s.uc=s.uc.remove(m),s.cc.delete(e),pc(s)}else yield lc(s.localStore,e,!1).then(()=>Kl(s,e,t)).catch(ia)}),yh.apply(this,arguments)}function fu(i,e){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,xe.Z)(function*(i,e){const t=Kn(i),s=e.batch.batchId;try{const u=yield A_(t.localStore,e);hc(t,s,null),_h(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield ul(t,u)}catch(u){yield ia(u)}}),Yc.apply(this,arguments)}function La(i,e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,xe.Z)(function*(i,e,t){const s=Kn(i);try{const u=yield function(m,E){const R=Kn(m);return R.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let se;return R.mutationQueue.lookupMutationBatch(X,E).next(Ie=>(sr(null!==Ie),se=Ie.keys(),R.mutationQueue.removeMutationBatch(X,Ie))).next(()=>R.mutationQueue.performConsistencyCheck(X)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(X,se,E)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,se)).next(()=>R.localDocuments.getDocuments(X,se))})}(s.localStore,e);hc(s,e,t),_h(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield ul(s,u)}catch(u){yield ia(u)}}),Lu.apply(this,arguments)}function ll(){return ll=(0,xe.Z)(function*(i,e){const t=Kn(i);hu(t.remoteStore)||Jt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(m){const E=Kn(m);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>E.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===s)return void e.resolve();const u=t.lc.get(s)||[];u.push(e),t.lc.set(s,u)}catch(s){const u=Kc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),ll.apply(this,arguments)}function _h(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function hc(i,e,t){const s=Kn(i);let u=s.hc[s.currentUser.toKey()];if(u){const m=u.get(e);m&&(t?m.reject(t):m.resolve(),u=u.remove(e)),s.hc[s.currentUser.toKey()]=u}}function Kl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.rc.get(e))i.ic.delete(s),t&&i.sc.wc(s,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(s=>{i.ac.containsKey(s)||Qc(i,s)})}function Qc(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(uc(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),pc(i))}function fc(i,e,t){for(const s of t)s instanceof $m?(i.ac.addReference(s.key,e),Fd(i,s)):s instanceof U_?(Jt("SyncEngine","Document no longer in limbo: "+s.key),i.ac.removeReference(s.key,e),i.ac.containsKey(s.key)||Qc(i,s.key)):jn()}function Fd(i,e){const t=e.key,s=t.path.canonicalString();i.uc.get(t)||i.oc.has(s)||(Jt("SyncEngine","New document in limbo: "+t),i.oc.add(s),pc(i))}function pc(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Un(vr.fromString(e)),s=i.fc.next();i.cc.set(s,new B_(t)),i.uc=i.uc.insert(t,s),Pl(i.remoteStore,new uu(da(nu(t.path)),s,2,vo.at))}}function ul(i,e,t){return gc.apply(this,arguments)}function gc(){return gc=(0,xe.Z)(function*(i,e,t){const s=Kn(i),u=[],m=[],E=[];var R;s.ic.isEmpty()||(s.ic.forEach((R,X)=>{E.push(s._c(X,e,t).then(se=>{if((se||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(X.targetId,(null==se?void 0:se.fromCache)?"not-current":"current"),se){u.push(se);const Ie=wp.Ci(X.targetId,se);m.push(Ie)}}))}),yield Promise.all(E),s.sc.Wo(u),yield(R=(0,xe.Z)(function*(X,se){const Ie=Kn(X);try{yield Ie.persistence.runTransaction("notifyLocalViewChanges","readwrite",ot=>nn.forEach(se,Wt=>nn.forEach(Wt.Si,Nn=>Ie.persistence.referenceDelegate.addReference(ot,Wt.targetId,Nn)).next(()=>nn.forEach(Wt.Di,Nn=>Ie.persistence.referenceDelegate.removeReference(ot,Wt.targetId,Nn)))))}catch(ot){if(!sa(ot))throw ot;Jt("LocalStore","Failed to update sequence numbers: "+ot)}for(const ot of se){const Wt=ot.targetId;if(!ot.fromCache){const Nn=Ie.qi.get(Wt),Fr=Nn.withLastLimboFreeSnapshotVersion(Nn.snapshotVersion);Ie.qi=Ie.qi.insert(Wt,Fr)}}}),function(X,se){return R.apply(this,arguments)})(s.localStore,m))}),gc.apply(this,arguments)}function Ld(i,e){return bf.apply(this,arguments)}function bf(){return bf=(0,xe.Z)(function*(i,e){const t=Kn(i);if(!t.currentUser.isEqual(e)){Jt("SyncEngine","User change. New user:",e.toKey());const s=yield al(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(E=>{E.forEach(R=>{R.reject(new An($t.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield ul(t,s.ji)}var u}),bf.apply(this,arguments)}function Gm(i,e){const t=Kn(i),s=t.cc.get(e);if(s&&s.nc)return qi().add(s.key);{let u=qi();const m=t.rc.get(e);if(!m)return u;for(const E of m){const R=t.ic.get(E);u=u.unionWith(R.view.ju)}return u}}function zm(i,e){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,xe.Z)(function*(i,e){const t=Kn(i),s=yield nf(t.localStore,e.query,!0),u=e.view.tc(s);return t.isPrimaryClient&&fc(t,e.targetId,u.Xu),u}),Tf.apply(this,arguments)}function Wm(i,e){return wf.apply(this,arguments)}function wf(){return wf=(0,xe.Z)(function*(i,e){const t=Kn(i);return Tm(t.localStore,e).then(s=>ul(t,s))}),wf.apply(this,arguments)}function qm(i,e,t,s){return If.apply(this,arguments)}function If(){return If=(0,xe.Z)(function*(i,e,t,s){const u=Kn(i),m=yield function(E,R){const X=Kn(E),se=Kn(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",Ie=>se.Tn(Ie,R).next(ot=>ot?X.localDocuments.getDocuments(Ie,ot):nn.resolve(null)))}(u.localStore,e);var R;null!==m?("pending"===t?yield Rd(u.remoteStore):"acknowledged"===t||"rejected"===t?(hc(u,e,s||null),_h(u,e),R=e,Kn(Kn(u.localStore).mutationQueue).An(R)):jn(),yield ul(u,m)):Jt("SyncEngine","Cannot apply mutation batch with id: "+e)}),If.apply(this,arguments)}function ng(){return ng=(0,xe.Z)(function*(i,e){const t=Kn(i);if(Sf(t),lg(t),!0===e&&!0!==t.dc){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield rg(t,s.toArray());t.dc=!0,yield _f(t.remoteStore,!0);for(const m of u)Pl(t.remoteStore,m)}else if(!1===e&&!1!==t.dc){const s=[];let u=Promise.resolve();t.rc.forEach((m,E)=>{t.sharedClientState.isLocalQueryTarget(E)?s.push(E):u=u.then(()=>(Kl(t,E),lc(t.localStore,E,!0))),uc(t.remoteStore,E)}),yield u,yield rg(t,s),function(m){const E=Kn(m);E.cc.forEach((R,X)=>{uc(E.remoteStore,X)}),E.ac.fs(),E.cc=new Map,E.uc=new to(Un.comparator)}(t),t.dc=!1,yield _f(t.remoteStore,!1)}}),ng.apply(this,arguments)}function rg(i,e,t){return ig.apply(this,arguments)}function ig(){return ig=(0,xe.Z)(function*(i,e,t){const s=Kn(i),u=[],m=[];for(const E of e){let R;const X=s.rc.get(E);if(X&&0!==X.length){R=yield Ad(s.localStore,da(X[0]));for(const se of X){const Ie=s.ic.get(se),ot=yield zm(s,Ie);ot.snapshot&&m.push(ot.snapshot)}}else{const se=yield bm(s.localStore,E);R=yield Ad(s.localStore,se),yield Jp(s,sg(se),E,!1,R.resumeToken)}u.push(R)}return s.sc.Wo(m),u}),ig.apply(this,arguments)}function sg(i){return Sc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Zm(i){const e=Kn(i);return Kn(Kn(e.localStore).persistence).vi()}function G_(i,e,t,s){return og.apply(this,arguments)}function og(){return og=(0,xe.Z)(function*(i,e,t,s){const u=Kn(i);if(u.dc)return void Jt("SyncEngine","Ignoring unexpected query state notification.");const m=u.rc.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const E=yield Tm(u.localStore,Da(m[0])),R=Nu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,uo.EMPTY_BYTE_STRING);yield ul(u,E,R);break}case"rejected":yield lc(u.localStore,e,!0),Kl(u,e,s);break;default:jn()}}),og.apply(this,arguments)}function Ym(i,e,t){return ag.apply(this,arguments)}function ag(){return ag=(0,xe.Z)(function*(i,e,t){const s=Sf(i);if(s.dc){for(const u of e){if(s.rc.has(u)){Jt("SyncEngine","Adding an already active target "+u);continue}const m=yield bm(s.localStore,u),E=yield Ad(s.localStore,m);yield Jp(s,sg(m),E.targetId,!1,E.resumeToken),Pl(s.remoteStore,E)}for(const u of t)s.rc.has(u)&&(yield lc(s.localStore,u,!1).then(()=>{uc(s.remoteStore,u),Kl(s,u)}).catch(ia))}}),ag.apply(this,arguments)}function Sf(i){const e=Kn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H_.bind(null,e),e.sc.Wo=Vm.bind(null,e.eventManager),e.sc.wc=S0.bind(null,e.eventManager),e}function lg(i){const e=Kn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=La.bind(null,e),e}class W_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,xe.Z)(function*(){t.yt=ch(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Cm(this.persistence,new Ip,e.initialUser,this.yt)}yc(e){return new Cp(Dd.Bs,this.yt)}gc(e){return new Im}terminate(){var e=this;return(0,xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qm extends W_{constructor(e,t,s){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e),yield s.Ac.initialize(s,e),yield lg(s.Ac.syncEngine),yield Rd(s.Ac.remoteStore),yield s.persistence.li(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Cm(this.persistence,new Ip,e.initialUser,this.yt)}Tc(e,t){return new mp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const s=new yu(t,this.persistence);return new Jl(e.asyncQueue,s)}yc(e){const t=ef(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ka.withCacheSize(this.cacheSizeBytes):Ka.DEFAULT;return new Xh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,uh(),xd(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Im}}class ug extends Qm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e);const u=s.Ac.syncEngine;s.sharedClientState instanceof af&&(s.sharedClientState.syncEngine={Fr:qm.bind(null,u),$r:G_.bind(null,u),Br:Ym.bind(null,u),vi:Zm.bind(null,u),Mr:Wm.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.li(function(){var m=(0,xe.Z)(function*(E){yield function Km(i,e){return ng.apply(this,arguments)}(s.Ac.syncEngine,E),s.gcScheduler&&(E&&!s.gcScheduler.started?s.gcScheduler.start():E||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(E&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():E||s.indexBackfillerScheduler.stop())});return function(E){return m.apply(this,arguments)}}())})()}gc(e){const t=uh();if(!af.C(t))throw new An($t.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=ef(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new af(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class vh{initialize(e,t){var s=this;return(0,xe.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>Hm(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ld.bind(null,s.syncEngine),yield _f(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new I0}createDatastore(e){const t=ch(e.databaseInfo.databaseId),s=new O_(e.databaseInfo);return new w0(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,m=R=>Hm(this.syncEngine,R,0),E=Sm.C()?new Sm:new P_,new xm(t,s,u,m,E);var t,s,u,m,E}createSyncEngine(e,t){return function(s,u,m,E,R,X,se){const Ie=new Qp(s,u,m,E,R,X);return se&&(Ie.dc=!0),Ie}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,xe.Z)(function*(t){const s=Kn(t);Jt("RemoteStore","RemoteStore shutting down."),s._u.add(5),yield qc(s),s.mu.shutdown(),s.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cg(i,e,t){if(!t)throw new An($t.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function q_(i,e,t,s){if(!0===e&&!0===s)throw new An($t.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function K_(i){if(!Un.isDocumentKey(i))throw new An($t.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Z_(i){if(Un.isDocumentKey(i))throw new An($t.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Df(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":jn()}function Cs(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new An($t.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Df(i);throw new An($t.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Y_(i,e){if(e<=0)throw new An($t.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Xm=new Map;class Xc{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new An($t.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new An($t.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,q_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,t,s,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new An($t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new An($t.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xc(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jo;switch(t.type){case"gapi":return new q(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new An($t.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xm.get(e);t&&(Jt("ComponentProvider","Removing Datastore"),Xm.delete(e),t.terminate())}(this),Promise.resolve()}}class No{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new No(this.firestore,e,this._key)}}class va{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new va(this.firestore,e,this._query)}}class bl extends va{constructor(e,t,s){super(e,t,nu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new No(this.firestore,null,new Un(e))}withConverter(e){return new bl(this.firestore,e,this._path)}}function Jm(i,e,...t){if(i=(0,Ht.m9)(i),cg("collection","path",e),i instanceof Eh){const s=vr.fromString(e,...t);return Z_(s),new bl(i,null,s)}{if(!(i instanceof No||i instanceof bl))throw new An($t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(vr.fromString(e,...t));return Z_(s),new bl(i.firestore,null,s)}}function Af(i,e,...t){if(i=(0,Ht.m9)(i),1===arguments.length&&(e=Mt.R()),cg("doc","path",e),i instanceof Eh){const s=vr.fromString(e,...t);return K_(s),new No(i,null,new Un(s))}{if(!(i instanceof No||i instanceof bl))throw new An($t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(vr.fromString(e,...t));return K_(s),new No(i.firestore,i instanceof bl?i.converter:null,new Un(s))}}function ty(i,e){return i=(0,Ht.m9)(i),e=(0,Ht.m9)(e),(i instanceof No||i instanceof bl)&&(e instanceof No||e instanceof bl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function hg(i,e){return i=(0,Ht.m9)(i),e=(0,Ht.m9)(e),i instanceof va&&e instanceof va&&i.firestore===e.firestore&&bu(i._query,e._query)&&i.converter===e.converter}function ny(i,e=10240){let t=0;return{read:()=>(0,xe.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ry{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new ps,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.ku)}`))},s=>this.metadata.reject(s))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,xe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,xe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const s=e.vc.decode(t),u=Number(s);isNaN(u)&&e.Dc(`length string (${s}) is not valid number`);const m=yield e.Cc(u);return new D0(JSON.parse(m),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,xe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Cc(e){var t=this;return(0,xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const s=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new An($t.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,xe.Z)(function*(m,E){const R=Kn(m),X=p(R.yt)+"/documents",se={documents:E.map(Nn=>ku(R.yt,Nn))},Ie=yield R._o("BatchGetDocuments",X,se,E.length),ot=new Map;Ie.forEach(Nn=>{const Zn=function Ee(i,e){return"found"in e?function(t,s){sr(!!s.found);const u=Rl(t,s.found.name),m=Po(s.found.updateTime),E=s.found.createTime?Po(s.found.createTime):Bn.min(),R=new Uo({mapValue:{fields:s.found.fields}});return Ns.newFoundDocument(u,m,E,R)}(i,e):"missing"in e?function(t,s){sr(!!s.missing),sr(!!s.readTime);const u=Rl(t,s.missing),m=Po(s.readTime);return Ns.newNoDocument(u,m)}(i,e):jn()}(R.yt,Nn);ot.set(Zn.key.toString(),Zn)});const Wt=[];return E.forEach(Nn=>{const Zn=ot.get(Nn.toString());sr(!!Zn),Wt.push(Zn)}),Wt}),function(m,E){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const m=Un.fromPath(u);e.mutations.push(new qo(m,e.precondition(m)))}),yield(s=(0,xe.Z)(function*(u,m){const E=Kn(u),R=p(E.yt)+"/documents",X={writes:m.map(se=>pn(E.yt,se))};yield E.ao("Commit",R,X)}),function(u,m){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jn();t=Bn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new An($t.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Bn.min())?ro.exists(!1):ro.updateTime(t):ro.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Bn.min()))throw new An($t.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ro.updateTime(t)}return ro.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class x0{constructor(e,t,s,u,m){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=u,this.deferred=m,this.kc=s.maxAttempts,this.xo=new dh(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,xe.Z)(function*(){const t=new fg(e.datastore),s=e.Mc(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(m=>{e.Fc(m)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!ca(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!aa(t)}return!1}}class pg{constructor(e,t,s,u){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=u,this.user=Be.UNAUTHENTICATED,this.clientId=Mt.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var E=(0,xe.Z)(function*(R){Jt("FirestoreClient","Received user=",R.uid),yield m.authCredentialListener(R),m.user=R});return function(R){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(s,E=>(Jt("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new An($t.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const u=Kc(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function oy(i,e){return ay.apply(this,arguments)}function ay(){return ay=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Jt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,xe.Z)(function*(m){s.isEqual(m)||(yield al(e.localStore,m),s=m)});return function(m){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),ay.apply(this,arguments)}function Vd(i,e){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Ch(i);Jt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(u=>jp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,m)=>jp(e.remoteStore,m)),i.onlineComponents=e}),Mf.apply(this,arguments)}function Ch(i){return bh.apply(this,arguments)}function bh(){return bh=(0,xe.Z)(function*(i){return i.offlineComponents||(Jt("FirestoreClient","Using default OfflineComponentProvider"),yield oy(i,new W_)),i.offlineComponents}),bh.apply(this,arguments)}function Rf(i){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,xe.Z)(function*(i){return i.onlineComponents||(Jt("FirestoreClient","Using default OnlineComponentProvider"),yield Vd(i,new vh)),i.onlineComponents}),Ud.apply(this,arguments)}function Th(i){return Ch(i).then(e=>e.persistence)}function Bd(i){return Ch(i).then(e=>e.localStore)}function ly(i){return Rf(i).then(e=>e.remoteStore)}function gg(i){return Rf(i).then(e=>e.syncEngine)}function Vu(i){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,xe.Z)(function*(i){const e=yield Rf(i),t=e.eventManager;return t.onListen=$_.bind(null,e.syncEngine),t.onUnlisten=j_.bind(null,e.syncEngine),t}),Pf.apply(this,arguments)}function yg(i,e,t={}){const s=new ps;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(u,m,E,R,X){const se=new xf({next:ot=>{m.enqueueAndForget(()=>Wp(u,Ie));const Wt=ot.docs.has(E);!Wt&&ot.fromCache?X.reject(new An($t.UNAVAILABLE,"Failed to get document because the client is offline.")):Wt&&ot.fromCache&&R&&"server"===R.source?X.reject(new An($t.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(ot)},error:ot=>X.reject(ot)}),Ie=new Um(nu(E.path),se,{includeMetadataChanges:!0,Nu:!0});return Lm(u,Ie)}(yield Vu(i),i.asyncQueue,e,t,s)})),s.promise}function vg(i,e,t={}){const s=new ps;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(u,m,E,R,X){const se=new xf({next:ot=>{m.enqueueAndForget(()=>Wp(u,Ie)),ot.fromCache&&"server"===R.source?X.reject(new An($t.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(ot)},error:ot=>X.reject(ot)}),Ie=new Um(E,se,{includeMetadataChanges:!0,Nu:!0});return Lm(u,Ie)}(yield Vu(i),i.asyncQueue,e,t,s)})),s.promise}class Eg{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new dh(this,"async_queue_retry"),this.Wc=()=>{const t=xd();t&&Jt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=xd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=xd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new ps;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,xe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!sa(t))throw t;Jt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{throw this.Kc=s,this.Gc=!1,Sr("INTERNAL UNHANDLED ERROR: ",function(m){let E=m.message||"";return m.stack&&(E=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),E}(s)),s}).then(s=>(this.Gc=!1,s))));return this.Bc=t,t}enqueueAfterDelay(e,t,s){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=Gp.createAndSchedule(this,e,t,s,m=>this.Yc(m));return this.Uc.push(u),u}zc(){this.Kc&&jn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,xe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Nf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class X_{constructor(){this._progressObserver={},this._taskCompletionResolver=new ps,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Do extends Eh{constructor(e,t,s,u){super(e,t,s,u),this.type="firestore",this._queue=new Eg,this._persistenceKey=(null==u?void 0:u.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cg(this),this._firestoreClient.terminate()}}function Zo(i){return i._firestoreClient||Cg(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Cg(i){var e;const t=i._freezeSettings(),s=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new cl(i._databaseId,m,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var m,R;i._firestoreClient=new pg(i._authCredentials,i._appCheckCredentials,i._queue,s)}function bg(i,e,t){const s=new ps;return i.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield oy(i,t),yield Vd(i,e),s.resolve()}catch(u){const m=u;if(!("FirebaseError"===(E=m).name?E.code===$t.FAILED_PRECONDITION||E.code===$t.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&E instanceof DOMException)||22===E.code||20===E.code||11===E.code))throw m;hr("Error enabling offline persistence. Falling back to persistence disabled: "+m),s.reject(m)}var E})).then(()=>s.promise)}function Cy(i){if(i._initialized||i._terminated)throw new An($t.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(uo.fromBase64String(e))}catch(t){throw new An($t.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Co(uo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new An($t.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ss(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jc{constructor(e){this._methodName=e}}class Ih{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new An($t.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new An($t.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const tv=/^__.*__$/;class by{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new xl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ou(e,this.data,t,this.fieldTransforms)}}class Tg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new xl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ed(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jn()}}class Of{constructor(e,t,s,u,m,E){this.settings=e,this.databaseId=t,this.yt=s,this.ignoreUndefinedProperties=u,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=E||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Of(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.ua(e),u}ca(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return jd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ed(this.sa)&&tv.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class nv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=s||ch(e)}da(e,t,s,u=!1){return new Of({sa:e,methodName:t,fa:s,path:Ss.emptyPath(),oa:!1,la:u},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function mc(i){const e=i._freezeSettings(),t=ch(i._databaseId);return new nv(i._databaseId,!!e.ignoreUndefinedProperties,t)}function kf(i,e,t,s,u,m={}){const E=i.da(m.merge||m.mergeFields?2:0,e,t,u);Dg("Data must be an object, but it was:",E,s);const R=Ig(s,E);let X,se;if(m.merge)X=new Go(E.fieldMask),se=E.fieldTransforms;else if(m.mergeFields){const Ie=[];for(const ot of m.mergeFields){const Wt=Ag(e,ot,t);if(!E.contains(Wt))throw new An($t.INVALID_ARGUMENT,`Field '${Wt}' is specified in your field mask but missing from your input data.`);Hd(Ie,Wt)||Ie.push(Wt)}X=new Go(Ie),se=E.fieldTransforms.filter(ot=>X.covers(ot.field))}else X=null,se=E.fieldTransforms;return new by(new Uo(R),X,se)}class $d extends Jc{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function rv(i,e,t){return new Of({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Sh extends Jc{_toFieldTransform(e){return new Aa(e.path,new Du)}isEqual(e){return e instanceof Sh}}class wg extends Jc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rv(this,e,!0),s=this._a.map(m=>Ma(m,t)),u=new ml(s);return new Aa(e.path,u)}isEqual(e){return this===e}}class Zl extends Jc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rv(this,e,!0),s=this._a.map(m=>Ma(m,t)),u=new yl(s);return new Aa(e.path,u)}isEqual(e){return this===e}}class iv extends Jc{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new zo(e.yt,Ac(e.yt,this.wa));return new Aa(e.path,t)}isEqual(e){return this===e}}function Ff(i,e,t,s){const u=i.da(1,e,t);Dg("Data must be an object, but it was:",u,s);const m=[],E=Uo.empty();Ua(s,(X,se)=>{const Ie=Lf(e,X,t);se=(0,Ht.m9)(se);const ot=u.ca(Ie);if(se instanceof $d)m.push(Ie);else{const Wt=Ma(se,ot);null!=Wt&&(m.push(Ie),E.set(Ie,Wt))}});const R=new Go(m);return new Tg(E,R,u.fieldTransforms)}function Ol(i,e,t,s,u,m){const E=i.da(1,e,t),R=[Ag(e,s,t)],X=[u];if(m.length%2!=0)throw new An($t.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Wt=0;Wt<m.length;Wt+=2)R.push(Ag(e,m[Wt])),X.push(m[Wt+1]);const se=[],Ie=Uo.empty();for(let Wt=R.length-1;Wt>=0;--Wt)if(!Hd(se,R[Wt])){const Nn=R[Wt];let Zn=X[Wt];Zn=(0,Ht.m9)(Zn);const Fr=E.ca(Nn);if(Zn instanceof $d)se.push(Nn);else{const gi=Ma(Zn,Fr);null!=gi&&(se.push(Nn),Ie.set(Nn,gi))}}const ot=new Go(se);return new Tg(Ie,ot,E.fieldTransforms)}function kl(i,e,t,s=!1){return Ma(t,i.da(s?4:3,e))}function Ma(i,e){if(Sg(i=(0,Ht.m9)(i)))return Dg("Unsupported field value:",e,i),Ig(i,e);if(i instanceof Jc)return function(t,s){if(!ed(s.sa))throw s.ha(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,s){const u=[];let m=0;for(const E of t){let R=Ma(E,s.aa(m));null==R&&(R={nullValue:"NULL_VALUE"}),u.push(R),m++}return{arrayValue:{values:u}}}(i,e)}return function(t,s){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ac(s.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Or.fromDate(t);return{timestampValue:sl(s.yt,u)}}if(t instanceof Or){const u=new Or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:sl(s.yt,u)}}if(t instanceof Ih)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Co)return{bytesValue:Fc(s.yt,t._byteString)};if(t instanceof No){const u=s.databaseId,m=t.firestore._databaseId;if(!m.isEqual(u))throw s.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ol(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ha(`Unsupported field value: ${Df(t)}`)}(i,e)}function Ig(i,e){const t={};return _u(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(i,(s,u)=>{const m=Ma(u,e.ra(s));null!=m&&(t[s]=m)}),{mapValue:{fields:t}}}function Sg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Or||i instanceof Ih||i instanceof Co||i instanceof No||i instanceof Jc)}function Dg(i,e,t){if(!Sg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Df(t);throw e.ha("an object"===s?i+" a custom object":i+" "+s)}var s}function Ag(i,e,t){if((e=(0,Ht.m9)(e))instanceof pu)return e._internalPath;if("string"==typeof e)return Lf(i,e);throw jd("Field path arguments must be of type string or ",i,!1,void 0,t)}const sv=new RegExp("[~\\*/\\[\\]]");function Lf(i,e,t){if(e.search(sv)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new pu(...e.split("."))._internalPath}catch(s){throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function jd(i,e,t,s,u){const m=s&&!s.isEmpty(),E=void 0!==u;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let X="";return(m||E)&&(X+=" (found",m&&(X+=` in field ${s}`),E&&(X+=` in document ${u}`),X+=")"),new An($t.INVALID_ARGUMENT,R+i+X)}function Hd(i,e){return i.some(t=>t.isEqual(e))}class Dh{constructor(e,t,s,u,m){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new No(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ty(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ty extends Dh{data(){return super.data()}}function Vf(i,e){return"string"==typeof e?Lf(i,e):e instanceof pu?e._internalPath:e._delegate._internalPath}function xg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new An($t.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class yc extends Uf{}function _c(i,e,...t){let s=[];e instanceof Uf&&s.push(e),s=s.concat(t),function(u){const m=u.filter(R=>R instanceof vc).length,E=u.filter(R=>R instanceof Gd).length;if(m>1||m>0&&E>0)throw new An($t.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class Gd extends yc{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Gd(e,t,s)}_apply(e){const t=this._parse(e);return Py(e._query,t),new va(e.firestore,e.converter,Cu(e._query,t))}_parse(e){const t=mc(e.firestore);return function(u,m,E,R,X,se,Ie){let ot;if(X.isKeyField()){if("array-contains"===se||"array-contains-any"===se)throw new An($t.INVALID_ARGUMENT,`Invalid Query. You can't perform '${se}' queries on documentId().`);if("in"===se||"not-in"===se){Ry(Ie,se);const Wt=[];for(const Nn of Ie)Wt.push(My(R,u,Nn));ot={arrayValue:{values:Wt}}}else ot=My(R,u,Ie)}else"in"!==se&&"not-in"!==se&&"array-contains-any"!==se||Ry(Ie,se),ot=kl(E,"where",Ie,"in"===se||"not-in"===se);return ii.create(X,se,ot)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class vc extends Uf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:is.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let m=s;const E=u.getFlattenedFilters();for(const R of E)Py(m,R),m=Cu(m,R)}(e._query,t),new va(e.firestore,e.converter,Cu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bf extends yc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bf(e,t)}_apply(e){const t=function(s,u,m){if(null!==s.startAt)throw new An($t.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new An($t.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new Ro(u,m);return function(R,X){if(null===Qu(R)){const se=iu(R);null!==se&&Ny(0,se,X.field)}}(s,E),E}(e._query,this._field,this._direction);return new va(e.firestore,e.converter,function(s,u){const m=s.explicitOrderBy.concat([u]);return new pl(s.path,s.collectionGroup,m,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Ah extends yc{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ah(e,t,s)}_apply(e){return new va(e.firestore,e.converter,su(e._query,this._limit,this._limitType))}}class xh extends yc{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new xh(e,t,s)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new va(e.firestore,e.converter,(u=t,new pl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class $f extends yc{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new $f(e,t,s)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new va(e.firestore,e.converter,(u=t,new pl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function xy(i,e,t,s){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof Dh)return function(u,m,E,R,X){if(!R)throw new An($t.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const se=[];for(const Ie of _a(u))if(Ie.field.isKeyField())se.push(Ia(m,R.key));else{const ot=R.data.field(Ie.field);if(Vl(ot))throw new An($t.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ie.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ot){const Wt=Ie.field.canonicalString();throw new An($t.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Wt}' (used as the orderBy) does not exist.`)}se.push(ot)}return new zr(se,X)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const u=mc(i.firestore);return function(m,E,R,X,se,Ie){const ot=m.explicitOrderBy;if(se.length>ot.length)throw new An($t.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Wt=[];for(let Nn=0;Nn<se.length;Nn++){const Zn=se[Nn];if(ot[Nn].field.isKeyField()){if("string"!=typeof Zn)throw new An($t.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof Zn}`);if(!gl(m)&&-1!==Zn.indexOf("/"))throw new An($t.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${Zn}' contains a slash.`);const Fr=m.path.child(vr.fromString(Zn));if(!Un.isDocumentKey(Fr))throw new An($t.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${Fr}' is not because it contains an odd number of segments.`);const gi=new Un(Fr);Wt.push(Ia(E,gi))}else{const Fr=kl(R,X,Zn);Wt.push(Fr)}}return new zr(Wt,Ie)}(i._query,i.firestore._databaseId,u,e,t,s)}}function My(i,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new An($t.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gl(e)&&-1!==t.indexOf("/"))throw new An($t.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(vr.fromString(t));if(!Un.isDocumentKey(s))throw new An($t.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ia(i,new Un(s))}if(t instanceof No)return Ia(i,t._key);throw new An($t.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(t)}.`)}function Ry(i,e){if(!Array.isArray(i)||0===i.length)throw new An($t.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new An($t.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Py(i,e){if(e.isInequality()){const s=iu(i),u=e.field;if(null!==s&&!s.isEqual(u))throw new An($t.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${u.toString()}'`);const m=Qu(i);null!==m&&Ny(0,u,m)}const t=function(s,u){for(const m of s)for(const E of m.getFlattenedFilters())if(u.indexOf(E.op)>=0)return E.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new An($t.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ny(i,e,t){if(!t.isEqual(e))throw new An($t.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Rg{convertValue(e,t="none"){switch(tl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return eo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ja(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jn()}}convertObject(e,t){const s={};return Ua(e.fields,(u,m)=>{s[u]=this.convertValue(m,t)}),s}convertGeoPoint(e){return new Ih(eo(e.latitude),eo(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=el(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const t=ja(e);return new Or(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=vr.fromString(e);sr(lt(s));const u=new Jo(s.get(1),s.get(3)),m=new Un(s.popFirst(5));return u.isEqual(t)||Sr(`Document ${m} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function jf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class cv extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new No(this.firestore,null,t)}}class td{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uu extends Dh{constructor(e,t,s,u,m,E){super(e,t,s,u,E),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Mh extends Uu{data(e={}){return super.data(e)}}class Ec{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new td(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Mh(this._firestore,this._userDataWriter,s.key,s,new td(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new An($t.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let m=0;return s._snapshot.docChanges.map(E=>({type:"added",doc:new Mh(s._firestore,s._userDataWriter,E.doc.key,E.doc,new td(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:m++}))}{let m=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(E=>u||3!==E.type).map(E=>{const R=new Mh(s._firestore,s._userDataWriter,E.doc.key,E.doc,new td(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter);let X=-1,se=-1;return 0!==E.type&&(X=m.indexOf(E.doc.key),m=m.delete(E.doc.key)),1!==E.type&&(m=m.add(E.doc),se=m.indexOf(E.doc.key)),{type:dv(E.type),doc:R,oldIndex:X,newIndex:se}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jn()}}function Pg(i,e){return i instanceof Uu&&e instanceof Uu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ec&&e instanceof Ec&&i._firestore===e._firestore&&hg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Bu extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new No(this.firestore,null,t)}}function Ng(i,e,t){i=Cs(i,No);const s=Cs(i.firestore,Do),u=jf(i.converter,e,t);return Yl(s,[kf(mc(s),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,ro.none())])}function Og(i,e,t,...s){i=Cs(i,No);const u=Cs(i.firestore,Do),m=mc(u);let E;return E="string"==typeof(e=(0,Ht.m9)(e))||e instanceof pu?Ol(m,"updateDoc",i._key,e,t,s):Ff(m,"updateDoc",i._key,e),Yl(u,[E.toMutation(i._key,ro.exists(!0))])}function $y(i,...e){var t,s,u;i=(0,Ht.m9)(i);let m={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||Nf(e[E])||(m=e[E],E++);const R={includeMetadataChanges:m.includeMetadataChanges};if(Nf(e[E])){const ot=e[E];e[E]=null===(t=ot.next)||void 0===t?void 0:t.bind(ot),e[E+1]=null===(s=ot.error)||void 0===s?void 0:s.bind(ot),e[E+2]=null===(u=ot.complete)||void 0===u?void 0:u.bind(ot)}let X,se,Ie;if(i instanceof No)se=Cs(i.firestore,Do),Ie=nu(i._key.path),X={next:ot=>{e[E]&&e[E](jy(se,i,ot))},error:e[E+1],complete:e[E+2]};else{const ot=Cs(i,va);se=Cs(ot.firestore,Do),Ie=ot._query;const Wt=new Bu(se);X={next:Nn=>{e[E]&&e[E](new Ec(se,Wt,ot,Nn))},error:e[E+1],complete:e[E+2]},xg(i._query)}return function(ot,Wt,Nn,Zn){const Fr=new xf(Zn),gi=new Um(Wt,Fr,Nn);return ot.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Lm(yield Vu(ot),gi)})),()=>{Fr.bc(),ot.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Wp(yield Vu(ot),gi)}))}}(Zo(se),Ie,R,X)}function Yl(i,e){return function(t,s){const u=new ps;return t.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Ef(i,e,t){return dc.apply(this,arguments)}(yield gg(t),s,u)})),u.promise}(Zo(i),e)}function jy(i,e,t){const s=t.docs.get(e._key),u=new Bu(i);return new Uu(i,u,e._key,s,new td(t.hasPendingWrites,t.fromCache),e.converter)}const Gy={maxAttempts:5};class Fg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mc(e)}set(e,t,s){this._verifyNotCommitted();const u=rd(e,this._firestore),m=jf(u.converter,t,s),E=kf(this._dataReader,"WriteBatch.set",u._key,m,null!==u.converter,s);return this._mutations.push(E.toMutation(u._key,ro.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const m=rd(e,this._firestore);let E;return E="string"==typeof(t=(0,Ht.m9)(t))||t instanceof pu?Ol(this._dataReader,"WriteBatch.update",m._key,t,s,u):Ff(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(E.toMutation(m._key,ro.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rd(e,this._firestore);return this._mutations=this._mutations.concat(new Wo(t._key,ro.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new An($t.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rd(i,e){if((i=(0,Ht.m9)(i)).firestore!==e)throw new An($t.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Pi extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mc(e)}get(e){const t=rd(e,this._firestore),s=new cv(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return jn();const m=u[0];if(m.isFoundDocument())return new Dh(this._firestore,s,m.key,m,t.converter);if(m.isNoDocument())return new Dh(this._firestore,s,t._key,null,t.converter);throw jn()})}set(e,t,s){const u=rd(e,this._firestore),m=jf(u.converter,t,s),E=kf(this._dataReader,"Transaction.set",u._key,m,null!==u.converter,s);return this._transaction.set(u._key,E),this}update(e,t,s,...u){const m=rd(e,this._firestore);let E;return E="string"==typeof(t=(0,Ht.m9)(t))||t instanceof pu?Ol(this._dataReader,"Transaction.update",m._key,t,s,u):Ff(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,E),this}delete(e){const t=rd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rd(e,this._firestore),s=new Bu(this._firestore);return super.get(e).then(u=>new Uu(this._firestore,s,t._key,u._document,new td(!1,!1),t.converter))}}function Vg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new An("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ug(){if("undefined"==typeof Uint8Array)throw new An("unimplemented","Uint8Arrays are not available in this environment.")}function Bg(){if(!function Ba(){return"undefined"!=typeof atob}())throw new An("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){It=He.SDK_VERSION,(0,He._registerComponent)(new St.wA("firestore",(t,{instanceIdentifier:s,options:u})=>{const m=t.getProvider("app").getImmediate(),E=new Do(new M(t.getProvider("auth-internal")),new _e(t.getProvider("app-check-internal")),function(R,X){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new An($t.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(R.options.projectId,X)}(m,s),m);return u=Object.assign({useFetchStreams:e},u),E._setSettings(u),E},"PUBLIC").setMultipleInstances(!0)),(0,He.registerVersion)(Ke,"3.8.0",i),(0,He.registerVersion)(Ke,"3.8.0","esm2017")}();class zd{constructor(e){this._delegate=e}static fromBase64String(e){return Bg(),new zd(Co.fromBase64String(e))}static fromUint8Array(e){return Ug(),new zd(Co.fromUint8Array(e))}toBase64(){return Bg(),this._delegate.toBase64()}toUint8Array(){return Ug(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zf(i){return function vv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class Ev{enableIndexedDbPersistence(e,t){return function gy(i,e){Cy(i=Cs(i,Do));const t=Zo(i),s=i._freezeSettings(),u=new vh;return bg(t,u,new Qm(u,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function my(i){Cy(i=Cs(i,Do));const e=Zo(i),t=i._freezeSettings(),s=new vh;return bg(e,s,new ug(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yy(i){if(i._initialized&&!i._terminated)throw new An($t.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ps;return i._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield(t=(0,xe.Z)(function*(s){if(!ba.C())return Promise.resolve();const u=s+"main";yield ba.delete(u)}),function(s){return t.apply(this,arguments)})(ef(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Wy{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&hr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function dg(i,e,t,s={}){var u;const m=(i=Cs(i,Eh))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&hr("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let E,R;if("string"==typeof s.mockUserToken)E=s.mockUserToken,R=Be.MOCK_USER;else{E=(0,Ht.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const X=s.mockUserToken.sub||s.mockUserToken.user_id;if(!X)throw new An($t.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Be(X)}i._authCredentials=new O(new Ps(E,R))}}(this._delegate,e,t,s)}enableNetwork(){return function vy(i){return function uy(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Th(i),t=yield ly(i);return e.setNetworkEnabled(!0),function(s){const u=Kn(s);return u._u.delete(0),Md(u)}(t)}))}(Zo(i=Cs(i,Do)))}(this._delegate)}disableNetwork(){return function M0(i){return function mg(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Th(i),t=yield ly(i);return e.setNetworkEnabled(!1),(s=(0,xe.Z)(function*(u){const m=Kn(u);m._u.add(0),yield qc(m),m.gu.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(Zo(i=Cs(i,Do)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,q_("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _y(i){return function(e){const t=new ps;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Cf(i,e){return ll.apply(this,arguments)}(yield gg(e),t)})),t.promise}(Zo(i=Cs(i,Do)))}(this._delegate)}onSnapshotsInSync(e){return function hv(i,e){return function Q_(i,e){const t=new xf(e);return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield Vu(i),u=t,Kn(s).Ru.add(u),void u.next();var s,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield Vu(i),u=t,void Kn(s).Ru.delete(u);var s,u}))}}(Zo(i=Cs(i,Do)),Nf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new An("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new id(this,Jm(this._delegate,e))}catch(t){throw Va(t,"collection()","Firestore.collection()")}}doc(e){try{return new Tl(this,Af(this._delegate,e))}catch(t){throw Va(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Za(this,function ey(i,e){if(i=Cs(i,Eh),cg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new An($t.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new va(i,null,(t=e,new pl(vr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Va(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fv(i,e,t){i=Cs(i,Do);const s=Object.assign(Object.assign({},Gy),t);return function(u){if(u.maxAttempts<1)throw new An($t.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(u,m,E){const R=new ps;return u.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const X=yield function wh(i){return Rf(i).then(e=>e.datastore)}(u);new x0(u.asyncQueue,X,E,m,R).run()})),R.promise}(Zo(i),u=>e(new Pi(i,u)),s)}(this._delegate,t=>e(new qy(this,t)))}batch(){return Zo(this._delegate),new Ky(new Fg(this._delegate,e=>Yl(this._delegate,e)))}loadBundle(e){return function ev(i,e){const t=Zo(i=Cs(i,Do)),s=new X_;return function dy(i,e,t,s){const u=function(m,E){let R;return R="string"==typeof m?(new TextEncoder).encode(m):m,X=function(X,se){if(X instanceof Uint8Array)return ny(X,void 0);if(X instanceof ArrayBuffer)return ny(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new ry(X,E);var X}(t,ch(e));i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function z_(i,e,t){const s=Kn(i);var u;(u=(0,xe.Z)(function*(m,E,R){try{const X=yield E.getMetadata();if(yield function(Wt,Nn){const Zn=Kn(Wt),Fr=Po(Nn.createTime);return Zn.persistence.runTransaction("hasNewerBundle","readonly",gi=>Zn.Ns.getBundleMetadata(gi,Nn.id)).then(gi=>!!gi&&gi.createTime.compareTo(Fr)>=0)}(m.localStore,X))return yield E.close(),R._completeWith({taskState:"Success",documentsLoaded:(Wt=X).totalDocuments,bytesLoaded:Wt.totalBytes,totalDocuments:Wt.totalDocuments,totalBytes:Wt.totalBytes}),Promise.resolve(new Set);R._updateProgress(Kp(X));const se=new Bm(X,m.localStore,E.yt);let Ie=yield E.mc();for(;Ie;){const Wt=yield se.Fu(Ie);Wt&&R._updateProgress(Wt),Ie=yield E.mc()}const ot=yield se.complete();return yield ul(m,ot.Lu,void 0),yield function(Wt,Nn){const Zn=Kn(Wt);return Zn.persistence.runTransaction("Save bundle","readwrite",Fr=>Zn.Ns.saveBundleMetadata(Fr,Nn))}(m.localStore,X),R._completeWith(ot.progress),Promise.resolve(ot.Bu)}catch(X){return hr("SyncEngine",`Loading bundle failed with ${X}`),R._failWith(X),Promise.resolve(new Set)}var Wt}),function(m,E,R){return u.apply(this,arguments)})(s,e,t).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield gg(i),u,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Ey(i,e){return function hy(i,e){return i.asyncQueue.enqueue((0,xe.Z)(function*(){return function(t,s){const u=Kn(t);return u.persistence.runTransaction("Get named query","readonly",m=>u.Ns.getNamedQuery(m,s))}(yield Bd(i),e)}))}(Zo(i=Cs(i,Do)),e).then(t=>t?new va(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Za(this,t):null)}}class Cc extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new zd(new Co(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Tl.forKey(t,this.firestore,null)}}class qy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cc(e)}get(e){const t=bc(e);return this._delegate.get(t).then(s=>new $u(this._firestore,new Uu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=bc(e);return s?(Vg("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=bc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=bc(e);return this._delegate.delete(t),this}}class Ky{constructor(e){this._delegate=e}set(e,t,s){const u=bc(e);return s?(Vg("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=bc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=bc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gu{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Mh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ju(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=gu.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let m=u.get(t);return m||(m=new gu(e,new Cc(e),t),u.set(t,m)),m}}gu.INSTANCES=new WeakMap;class Tl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cc(e)}static forPath(e,t,s){if(e.length%2!=0)throw new An("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Tl(t,new No(t._delegate,s,new Un(e)))}static forKey(e,t,s){return new Tl(t,new No(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new id(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new id(this.firestore,Jm(this._delegate,e))}catch(t){throw Va(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof No&&ty(this._delegate,e)}set(e,t){t=Vg("DocumentReference.set",t);try{return t?Ng(this._delegate,e,t):Ng(this._delegate,e)}catch(s){throw Va(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Og(this._delegate,e):Og(this._delegate,e,t,...s)}catch(u){throw Va(u,"updateDoc()","DocumentReference.update()")}}delete(){return function kg(i){return Yl(Cs(i.firestore,Do),[new Wo(i._key,ro.none())])}(this._delegate)}onSnapshot(...e){const t=$g(e),s=Zy(e,u=>new $u(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return $y(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Fy(i){i=Cs(i,No);const e=Cs(i.firestore,Do),t=Zo(e),s=new Bu(e);return function cy(i,e){const t=new ps;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(u,m,E){try{const R=yield function(X,se){const Ie=Kn(X);return Ie.persistence.runTransaction("read document","readonly",ot=>Ie.localDocuments.getDocument(ot,se))}(u,m);R.isFoundDocument()?E.resolve(R):R.isNoDocument()?E.resolve(null):E.reject(new An($t.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const X=Kc(R,`Failed to get document '${m} from cache`);E.reject(X)}}),function(u,m,E){return s.apply(this,arguments)})(yield Bd(i),e,t);var s})),t.promise}(t,i._key).then(u=>new Uu(e,s,i._key,u,new td(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ly(i){i=Cs(i,No);const e=Cs(i.firestore,Do);return yg(Zo(e),i._key,{source:"server"}).then(t=>jy(e,i,t))}(this._delegate):function ky(i){i=Cs(i,No);const e=Cs(i.firestore,Do);return yg(Zo(e),i._key).then(t=>jy(e,i,t))}(this._delegate),t.then(s=>new $u(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Tl(this.firestore,this._delegate.withConverter(e?gu.getInstance(this.firestore,e):null))}}function Va(i,e,t){return i.message=i.message.replace(e,t),i}function $g(i){for(const e of i)if("object"==typeof e&&!zf(e))return e;return{}}function Zy(i,e){var t,s;let u;return u=zf(i[0])?i[0]:zf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{u.next&&u.next(e(m))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class $u{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Tl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Pg(this._delegate,e._delegate)}}class ju extends $u{data(e){const t=this._delegate.data(e);return function ao(i,e){i||jn()}(void 0!==t),t}}class Za{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cc(e)}where(e,t,s){try{return new Za(this.firestore,_c(this._delegate,function wy(i,e,t){const s=e,u=Vf("where",i);return Gd._create(u,s,t)}(e,t,s)))}catch(u){throw Va(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Za(this.firestore,_c(this._delegate,function Iy(i,e="asc"){const t=e,s=Vf("orderBy",i);return Bf._create(s,t)}(e,t)))}catch(s){throw Va(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Za(this.firestore,_c(this._delegate,function Sy(i){return Y_("limit",i),Ah._create("limit",i,"F")}(e)))}catch(t){throw Va(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Za(this.firestore,_c(this._delegate,function Dy(i){return Y_("limitToLast",i),Ah._create("limitToLast",i,"L")}(e)))}catch(t){throw Va(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Za(this.firestore,_c(this._delegate,function Ay(...i){return xh._create("startAt",i,!0)}(...e)))}catch(t){throw Va(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Za(this.firestore,_c(this._delegate,function av(...i){return xh._create("startAfter",i,!1)}(...e)))}catch(t){throw Va(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Za(this.firestore,_c(this._delegate,function lv(...i){return $f._create("endBefore",i,!1)}(...e)))}catch(t){throw Va(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Za(this.firestore,_c(this._delegate,function uv(...i){return $f._create("endAt",i,!0)}(...e)))}catch(t){throw Va(t,"endAt()","Query.endAt()")}}isEqual(e){return hg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Uy(i){i=Cs(i,va);const e=Cs(i.firestore,Do),t=Zo(e),s=new Bu(e);return function _g(i,e){const t=new ps;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(u,m,E){try{const R=yield nf(u,m,!0),X=new Zp(m,R.Hi),se=X.Wu(R.documents),Ie=X.applyChanges(se,!1);E.resolve(Ie.snapshot)}catch(R){const X=Kc(R,`Failed to execute query '${m} against cache`);E.reject(X)}}),function(u,m,E){return s.apply(this,arguments)})(yield Bd(i),e,t);var s})),t.promise}(t,i._query).then(u=>new Ec(e,s,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function By(i){i=Cs(i,va);const e=Cs(i.firestore,Do),t=Zo(e),s=new Bu(e);return vg(t,i._query,{source:"server"}).then(u=>new Ec(e,s,i,u))}(this._delegate):function Vy(i){i=Cs(i,va);const e=Cs(i.firestore,Do),t=Zo(e),s=new Bu(e);return xg(i._query),vg(t,i._query).then(u=>new Ec(e,s,i,u))}(this._delegate),t.then(s=>new jg(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=$g(e),s=Zy(e,u=>new jg(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return $y(this._delegate,t,s)}withConverter(e){return new Za(this.firestore,this._delegate.withConverter(e?gu.getInstance(this.firestore,e):null))}}class bv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ju(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Za(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ju(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bv(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new ju(this._firestore,s))})}isEqual(e){return Pg(this._delegate,e._delegate)}}class id extends Za{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Tl(this.firestore,e):null}doc(e){try{return new Tl(this.firestore,void 0===e?Af(this._delegate):Af(this._delegate,e))}catch(t){throw Va(t,"doc()","CollectionReference.doc()")}}add(e){return function nd(i,e){const t=Cs(i.firestore,Do),s=Af(i),u=jf(i.converter,e);return Yl(t,[kf(mc(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,ro.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Tl(this.firestore,t))}isEqual(e){return ty(this._delegate,e._delegate)}withConverter(e){return new id(this.firestore,this._delegate.withConverter(e?gu.getInstance(this.firestore,e):null))}}function bc(i){return Cs(i,No)}class Wf{constructor(...e){this._delegate=new pu(...e)}static documentId(){return new Wf(Ss.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof pu&&this._delegate._internalPath.isEqual(e._internalPath)}}class sd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gv(){return new Sh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sd(e)}static delete(){const e=function pv(){return new $d("deleteField")}();return e._methodName="FieldValue.delete",new sd(e)}static arrayUnion(...e){const t=function Hf(...i){return new wg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new sd(t)}static arrayRemove(...e){const t=function mv(...i){return new Zl("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new sd(t)}static increment(e){const t=function Gf(i){return new iv("increment",i)}(e);return t._methodName="FieldValue.increment",new sd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Yy={Firestore:Wy,GeoPoint:Ih,Timestamp:Or,Blob:zd,Transaction:qy,WriteBatch:Ky,DocumentReference:Tl,DocumentSnapshot:$u,Query:Za,QueryDocumentSnapshot:ju,QuerySnapshot:jg,CollectionReference:id,FieldPath:Wf,FieldValue:sd,setLogLevel:function Cv(i){!function Nr(i){Qt.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function wv(i){(function Tv(i,e){i.INTERNAL.registerComponent(new St.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},Yy)))})(i,(e,t)=>new Wy(e,t,new Ev)),i.registerVersion("@firebase/firestore-compat","0.3.0")}(fn.Z);var od=j(1205),N0=j(6217),O0=j(9260);function Hg(i,e){return function k0(i,e=F.z){return new pe.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Gg(i,e){return Hg(i,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function Kf(i,e){return Gg(i,e).pipe((0,Cn.O)(void 0),ht(),(0,vt.U)(([t,s])=>{const u=s.payload.docChanges(),m=u.map(E=>({type:E.type,payload:E}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((E,R)=>{const X=u.find(Ie=>Ie.doc.ref.isEqual(E.ref)),se=null==t?void 0:t.payload.docs.find(Ie=>Ie.ref.isEqual(E.ref));X&&JSON.stringify(X.doc.metadata)===JSON.stringify(E.metadata)||!X&&se&&JSON.stringify(se.metadata)===JSON.stringify(E.metadata)||m.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:E}})}),m}))}function zg(i,e,t){return Kf(i,t).pipe((0,un.R)((s,u)=>function Rh(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function Iv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Wg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Wg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Wg(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(m=>m.payload),e),[]),function Pe(i,e=Oe.y){return i=null!=i?i:Et,(0,pt.e)((t,s)=>{let u,m=!0;t.subscribe((0,Ze.x)(s,E=>{const R=e(E);(m||!i(u,R))&&(m=!1,u=R,s.next(E))}))})}(),(0,vt.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function Wg(i,e,t,...s){const u=i.slice();return u.splice(e,t,...s),u}function Qy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Xy{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Kf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,Cn.O)(void 0),ht(),(0,In.h)(([s,u])=>u.length>0||!s),(0,vt.U)(([s,u])=>u),Xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,un.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qy(e);return zg(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Xe.iC)}get(e){return(0,ae.D)(this.query.get(e)).pipe(Xe.iC)}add(e){return this.ref.add(e)}doc(e){return new Jy(this.ref.doc(e),this.afs)}}class Jy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:m}=qg(s,t);return new Xy(u,m,this.afs)}snapshotChanges(){return function qf(i,e){return Hg(i,e).pipe((0,Cn.O)(void 0),ht(),(0,vt.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ae.D)(this.ref.get(e)).pipe(Xe.iC)}}class e_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Kf(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,In.h)(t=>t.length>0),Xe.iC):Kf(this.query,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,un.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qy(e);return zg(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Xe.iC)}get(e){return(0,ae.D)(this.query.get(e)).pipe(Xe.iC)}}const t_=new g.OlP("angularfire2.enableFirestorePersistence"),n_=new g.OlP("angularfire2.firestore.persistenceSettings"),Wd=new g.OlP("angularfire2.firestore.settings"),Sv=new g.OlP("angularfire2.firestore.use-emulator");function qg(i,e=(t=>t)){return{query:e(i),ref:i}}let r_=(()=>{class i{constructor(t,s,u,m,E,R,X,se,Ie,ot,Wt,Nn,Zn,Fr,gi,bo,Lo){this.schedulers=X;const Us=(0,Ot.on)(t,R,s),Yo=Ie;ot&&(0,od.nw)(Us,R,Wt,Zn,Fr,gi,Nn,bo),[this.firestore,this.persistenceEnabled$]=(0,Ot.cc)(`${Us.name}.firestore`,"AngularFirestore",Us.name,()=>{const Bs=R.runOutsideAngular(()=>Us.firestore());if(m&&Bs.settings(m),Yo&&Bs.useEmulator(...Yo),u&&!(0,Zt.PM)(E)){const qs=()=>{try{return(0,ae.D)(Bs.enablePersistence(se||void 0).then(()=>!0,()=>!1))}catch(ma){return"undefined"!=typeof console&&console.warn(ma),(0,We.of)(!1)}};return[Bs,R.runOutsideAngular(qs)]}return[Bs,(0,We.of)(!1)]},[m,Yo,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:E}=qg(u,s),R=this.schedulers.ngZone.run(()=>m);return new Xy(R,E,this)}collectionGroup(t,s){const u=s||(E=>E),m=this.firestore.collectionGroup(t);return new e_(u(m),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new Jy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(g.LFG(Ot.Dh),g.LFG(Ot.xv,8),g.LFG(t_,8),g.LFG(Wd,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Xe.HU),g.LFG(n_,8),g.LFG(Sv,8),g.LFG(od.zQ,8),g.LFG(od.Qv,8),g.LFG(od.L6,8),g.LFG(od._Q,8),g.LFG(od.rT,8),g.LFG(od.lh,8),g.LFG(od.f7,8),g.LFG(N0.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),i_=(()=>{class i{constructor(){O0.Z.registerVersion("angularfire",Xe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:t_,useValue:!0},{provide:n_,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[r_]}),i})()},377:(Wn,At,j)=>{j.d(At,{Q1:()=>V,TE:()=>Pn});var g=j(8306),F=j(9646),pe=j(8996),ae=j(4986),We=j(4482),Xe=j(5403),Ze=j(4004),ht=j(3900),Oe=j(2122),Pe=j(5e3),Et=j(2011),Cn=j(3942),vt=j(5861),un=j(9681),In=j(2090),Ot=j(4859);const Zt="firebasestorage.googleapis.com",Ln="storageBucket";class St extends In.ZR{constructor(K,Ce,Ve=0){super(an(K),`Firebase Storage: ${Ce} (${an(K)})`),this.status_=Ve,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(K){this.status_=K}_codeEquals(K){return an(K)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(K){this.customData.serverResponse=K,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function an(ee){return"storage/"+ee}function Ht(){return new St("unknown","An unknown error occurred, please check the error payload for server response.")}function wt(){return new St("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function at(){return new St("canceled","User canceled the upload/download.")}function rr(){return new St("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Vt(ee){return new St("invalid-argument",ee)}function kt(){return new St("app-deleted","The Firebase app was deleted.")}function st(ee){return new St("invalid-root-operation","The operation '"+ee+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dt(ee,K){return new St("invalid-format","String does not match format '"+ee+"': "+K)}function ut(ee){throw new St("internal-error","Internal error: "+ee)}class Yt{constructor(K,Ce){this.bucket=K,this.path_=Ce}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const K=encodeURIComponent;return"/b/"+K(this.bucket)+"/o/"+K(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(K,Ce){let Ve;try{Ve=Yt.makeFromUrl(K,Ce)}catch(it){return new Yt(K,"")}if(""===Ve.path)return Ve;throw function Dn(ee){return new St("invalid-default-bucket","Invalid default bucket '"+ee+"'.")}(K)}static makeFromUrl(K,Ce){let Ve=null;const it="([A-Za-z0-9.\\-_]+)",br=new RegExp("^gs://"+it+"(/(.*))?$","i");function ri(me){me.path_=decodeURIComponent(me.path)}const yi=Ce.replace(/[.]/g,"\\."),J=[{regex:br,indices:{bucket:1,path:3},postModify:function qt(me){"/"===me.path.charAt(me.path.length-1)&&(me.path_=me.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${yi}/v[A-Za-z0-9_]+/b/${it}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ri},{regex:new RegExp(`^https?://${Ce===Zt?"(?:storage.googleapis.com|storage.cloud.google.com)":Ce}/${it}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ri}];for(let me=0;me<J.length;me++){const be=J[me],oe=be.regex.exec(K);if(oe){let ce=oe[be.indices.path];ce||(ce=""),Ve=new Yt(oe[be.indices.bucket],ce),be.postModify(Ve);break}}if(null==Ve)throw function on(ee){return new St("invalid-url","Invalid URL '"+ee+"'.")}(K);return Ve}}class Rt{constructor(K){this.promise_=Promise.reject(K)}getPromise(){return this.promise_}cancel(K=!1){}}function oi(ee){return"string"==typeof ee||ee instanceof String}function Qn(ee){return Wr()&&ee instanceof Blob}function Wr(){return"undefined"!=typeof Blob&&!(0,In.UG)()}function xr(ee,K,Ce,Ve){if(Ve<K)throw Vt(`Invalid value for '${ee}'. Expected ${K} or greater.`);if(Ve>Ce)throw Vt(`Invalid value for '${ee}'. Expected ${Ce} or less.`)}function Mr(ee,K,Ce){let Ve=K;return null==Ce&&(Ve=`https://${K}`),`${Ce}://${Ve}/v0${ee}`}function rs(ee){const K=encodeURIComponent;let Ce="?";for(const Ve in ee)ee.hasOwnProperty(Ve)&&(Ce=Ce+(K(Ve)+"=")+K(ee[Ve])+"&");return Ce=Ce.slice(0,-1),Ce}var Ji=(()=>{return(ee=Ji||(Ji={}))[ee.NO_ERROR=0]="NO_ERROR",ee[ee.NETWORK_ERROR=1]="NETWORK_ERROR",ee[ee.ABORT=2]="ABORT",Ji;var ee})();function dn(ee,K){const Ce=ee>=500&&ee<600,it=-1!==[408,429].indexOf(ee),qt=-1!==K.indexOf(ee);return Ce||it||qt}class rt{constructor(K,Ce,Ve,it,qt,_n,br,Xn,ri,_i,yi,$i=!0){this.url_=K,this.method_=Ce,this.headers_=Ve,this.body_=it,this.successCodes_=qt,this.additionalRetryCodes_=_n,this.callback_=br,this.errorCallback_=Xn,this.timeout_=ri,this.progressCallback_=_i,this.connectionFactory_=yi,this.retry=$i,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ts,l)=>{this.resolve_=ts,this.reject_=l,this.start_()})}start_(){const Ce=(Ve,it)=>{const qt=this.resolve_,_n=this.reject_,br=it.connection;if(it.wasSuccessCode)try{const Xn=this.callback_(br,br.getResponse());!function tr(ee){return void 0!==ee}(Xn)?qt():qt(Xn)}catch(Xn){_n(Xn)}else if(null!==br){const Xn=Ht();Xn.serverResponse=br.getErrorText(),_n(this.errorCallback_?this.errorCallback_(br,Xn):Xn)}else _n(it.canceled?this.appDelete_?kt():at():wt())};this.canceled_?Ce(0,new ct(!1,null,!0)):this.backoffId_=function tn(ee,K,Ce){let Ve=1,it=null,qt=null,_n=!1,br=0;function Xn(){return 2===br}let ri=!1;function _i(...I){ri||(ri=!0,K.apply(null,I))}function yi(I){it=setTimeout(()=>{it=null,ee(ts,Xn())},I)}function $i(){qt&&clearTimeout(qt)}function ts(I,...P){if(ri)return void $i();if(I)return $i(),void _i.call(null,I,...P);if(Xn()||_n)return $i(),void _i.call(null,I,...P);let J;Ve<64&&(Ve*=2),1===br?(br=2,J=0):J=1e3*(Ve+Math.random()),yi(J)}let l=!1;function A(I){l||(l=!0,$i(),!ri&&(null!==it?(I||(br=2),clearTimeout(it),yi(0)):I||(br=1)))}return yi(0),qt=setTimeout(()=>{_n=!0,A(!0)},Ce),A}((Ve,it)=>{if(it)return void Ve(!1,new ct(!1,null,!0));const qt=this.connectionFactory_();this.pendingConnection_=qt;const _n=br=>{null!==this.progressCallback_&&this.progressCallback_(br.loaded,br.lengthComputable?br.total:-1)};null!==this.progressCallback_&&qt.addUploadProgressListener(_n),qt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&qt.removeUploadProgressListener(_n),this.pendingConnection_=null;const br=qt.getErrorCode()===Ji.NO_ERROR,Xn=qt.getStatus();if((!br||dn(Xn,this.additionalRetryCodes_))&&this.retry){const _i=qt.getErrorCode()===Ji.ABORT;return void Ve(!1,new ct(!1,null,_i))}const ri=-1!==this.successCodes_.indexOf(Xn);Ve(!0,new ct(ri,qt))})},Ce,this.timeout_)}getPromise(){return this.promise_}cancel(K){this.canceled_=!0,this.appDelete_=K||!1,null!==this.backoffId_&&function Gn(ee){ee(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ct{constructor(K,Ce,Ve){this.wasSuccessCode=K,this.connection=Ce,this.canceled=!!Ve}}function Br(...ee){const K=function Gr(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==K){const Ce=new K;for(let Ve=0;Ve<ee.length;Ve++)Ce.append(ee[Ve]);return Ce.getBlob()}if(Wr())return new Blob(ee);throw new St("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ui={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class On{constructor(K,Ce){this.data=K,this.contentType=Ce||null}}function Si(ee,K){switch(ee){case ui.RAW:return new On(Vr(K));case ui.BASE64:case ui.BASE64URL:return new On(kn(ee,K));case ui.DATA_URL:return new On(function Yn(ee){const K=new Ft(ee);return K.base64?kn(ui.BASE64,K.rest):function Vi(ee){let K;try{K=decodeURIComponent(ee)}catch(Ce){throw Dt(ui.DATA_URL,"Malformed data URL.")}return Vr(K)}(K.rest)}(K),function Rr(ee){return new Ft(ee).contentType}(K))}throw Ht()}function Vr(ee){const K=[];for(let Ce=0;Ce<ee.length;Ce++){let Ve=ee.charCodeAt(Ce);Ve<=127?K.push(Ve):Ve<=2047?K.push(192|Ve>>6,128|63&Ve):55296==(64512&Ve)?Ce<ee.length-1&&56320==(64512&ee.charCodeAt(Ce+1))?(Ve=65536|(1023&Ve)<<10|1023&ee.charCodeAt(++Ce),K.push(240|Ve>>18,128|Ve>>12&63,128|Ve>>6&63,128|63&Ve)):K.push(239,191,189):56320==(64512&Ve)?K.push(239,191,189):K.push(224|Ve>>12,128|Ve>>6&63,128|63&Ve)}return new Uint8Array(K)}function kn(ee,K){switch(ee){case ui.BASE64:{const it=-1!==K.indexOf("-"),qt=-1!==K.indexOf("_");if(it||qt)throw Dt(ee,"Invalid character '"+(it?"-":"_")+"' found: is it base64url encoded?");break}case ui.BASE64URL:{const it=-1!==K.indexOf("+"),qt=-1!==K.indexOf("/");if(it||qt)throw Dt(ee,"Invalid character '"+(it?"+":"/")+"' found: is it base64 encoded?");K=K.replace(/-/g,"+").replace(/_/g,"/");break}}let Ce;try{Ce=function Li(ee){if("undefined"==typeof atob)throw function mr(ee){return new St("unsupported-environment",`${ee} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(ee)}(K)}catch(it){throw it.message.includes("polyfill")?it:Dt(ee,"Invalid character found")}const Ve=new Uint8Array(Ce.length);for(let it=0;it<Ce.length;it++)Ve[it]=Ce.charCodeAt(it);return Ve}class Ft{constructor(K){this.base64=!1,this.contentType=null;const Ce=K.match(/^data:([^,]+)?,/);if(null===Ce)throw Dt(ui.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Ve=Ce[1]||null;null!=Ve&&(this.base64=function Ur(ee,K){return ee.length>=K.length&&ee.substring(ee.length-K.length)===K}(Ve,";base64"),this.contentType=this.base64?Ve.substring(0,Ve.length-7):Ve),this.rest=K.substring(K.indexOf(",")+1)}}class $r{constructor(K,Ce){let Ve=0,it="";Qn(K)?(this.data_=K,Ve=K.size,it=K.type):K instanceof ArrayBuffer?(Ce?this.data_=new Uint8Array(K):(this.data_=new Uint8Array(K.byteLength),this.data_.set(new Uint8Array(K))),Ve=this.data_.length):K instanceof Uint8Array&&(Ce?this.data_=K:(this.data_=new Uint8Array(K.length),this.data_.set(K)),Ve=K.length),this.size_=Ve,this.type_=it}size(){return this.size_}type(){return this.type_}slice(K,Ce){if(Qn(this.data_)){const it=function as(ee,K,Ce){return ee.webkitSlice?ee.webkitSlice(K,Ce):ee.mozSlice?ee.mozSlice(K,Ce):ee.slice?ee.slice(K,Ce):null}(this.data_,K,Ce);return null===it?null:new $r(it)}{const Ve=new Uint8Array(this.data_.buffer,K,Ce-K);return new $r(Ve,!0)}}static getBlob(...K){if(Wr()){const Ce=K.map(Ve=>Ve instanceof $r?Ve.data_:Ve);return new $r(Br.apply(null,Ce))}{const Ce=K.map(_n=>oi(_n)?Si(ui.RAW,_n).data:_n.data_);let Ve=0;Ce.forEach(_n=>{Ve+=_n.byteLength});const it=new Uint8Array(Ve);let qt=0;return Ce.forEach(_n=>{for(let br=0;br<_n.length;br++)it[qt++]=_n[br]}),new $r(it,!0)}}uploadData(){return this.data_}}function Je(ee){let K;try{K=JSON.parse(ee)}catch(Ce){return null}return function Xr(ee){return"object"==typeof ee&&!Array.isArray(ee)}(K)?K:null}function Xt(ee){const K=ee.lastIndexOf("/",ee.length-2);return-1===K?ee:ee.slice(K+1)}function Lt(ee,K){return K}class Ge{constructor(K,Ce,Ve,it){this.server=K,this.local=Ce||K,this.writable=!!Ve,this.xform=it||Lt}}let Re=null;function gt(){if(Re)return Re;const ee=[];ee.push(new Ge("bucket")),ee.push(new Ge("generation")),ee.push(new Ge("metageneration")),ee.push(new Ge("name","fullPath",!0));const Ce=new Ge("name");Ce.xform=function K(qt,_n){return function Ae(ee){return!oi(ee)||ee.length<2?ee:Xt(ee)}(_n)},ee.push(Ce);const it=new Ge("size");return it.xform=function Ve(qt,_n){return void 0!==_n?Number(_n):_n},ee.push(it),ee.push(new Ge("timeCreated")),ee.push(new Ge("updated")),ee.push(new Ge("md5Hash",null,!0)),ee.push(new Ge("cacheControl",null,!0)),ee.push(new Ge("contentDisposition",null,!0)),ee.push(new Ge("contentEncoding",null,!0)),ee.push(new Ge("contentLanguage",null,!0)),ee.push(new Ge("contentType",null,!0)),ee.push(new Ge("metadata","customMetadata",!0)),Re=ee,Re}function qn(ee,K,Ce){const Ve=Je(K);return null===Ve?null:function _r(ee,K,Ce){const Ve={type:"file"},it=Ce.length;for(let qt=0;qt<it;qt++){const _n=Ce[qt];Ve[_n.local]=_n.xform(Ve,K[_n.server])}return function cn(ee,K){Object.defineProperty(ee,"ref",{get:function Ce(){const qt=new Yt(ee.bucket,ee.fullPath);return K._makeStorageReference(qt)}})}(Ve,ee),Ve}(ee,Ve,Ce)}function Qi(ee,K){const Ce={},Ve=K.length;for(let it=0;it<Ve;it++){const qt=K[it];qt.writable&&(Ce[qt.server]=ee[qt.local])}return JSON.stringify(Ce)}const ls="prefixes";class ss{constructor(K,Ce,Ve,it){this.url=K,this.method=Ce,this.handler=Ve,this.timeout=it,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Oi(ee){if(!ee)throw Ht()}function En(ee,K){return function Ce(Ve,it){const qt=qn(ee,it,K);return Oi(null!==qt),qt}}function Mi(ee){return function K(Ce,Ve){let it;return it=401===Ce.getStatus()?Ce.getErrorText().includes("Firebase App Check token is invalid")?function Tt(){return new St("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Me(){return new St("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Ce.getStatus()?function Ut(ee){return new St("quota-exceeded","Quota for bucket '"+ee+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(ee.bucket):403===Ce.getStatus()?function et(ee){return new St("unauthorized","User does not have permission to access '"+ee+"'.")}(ee.path):Ve,it.status=Ce.getStatus(),it.serverResponse=Ve.serverResponse,it}}function bs(ee){const K=Mi(ee);return function Ce(Ve,it){let qt=K(Ve,it);return 404===Ve.getStatus()&&(qt=function ke(ee){return new St("object-not-found","Object '"+ee+"' does not exist.")}(ee.path)),qt.serverResponse=it.serverResponse,qt}}function Ui(ee,K,Ce){const it=Mr(K.fullServerUrl(),ee.host,ee._protocol),_n=ee.maxOperationRetryTime,br=new ss(it,"GET",En(ee,Ce),_n);return br.errorHandler=bs(K),br}function us(ee,K,Ce,Ve,it){const qt={};qt.prefix=K.isRoot?"":K.path+"/",Ce&&Ce.length>0&&(qt.delimiter=Ce),Ve&&(qt.pageToken=Ve),it&&(qt.maxResults=it);const br=Mr(K.bucketOnlyServerUrl(),ee.host,ee._protocol),ri=ee.maxOperationRetryTime,_i=new ss(br,"GET",function yr(ee,K){return function Ce(Ve,it){const qt=function di(ee,K,Ce){const Ve=Je(Ce);return null===Ve?null:function Ni(ee,K,Ce){const Ve={prefixes:[],items:[],nextPageToken:Ce.nextPageToken};if(Ce[ls])for(const it of Ce[ls]){const qt=it.replace(/\/$/,""),_n=ee._makeStorageReference(new Yt(K,qt));Ve.prefixes.push(_n)}if(Ce.items)for(const it of Ce.items){const qt=ee._makeStorageReference(new Yt(K,it.name));Ve.items.push(qt)}return Ve}(ee,K,Ve)}(ee,K,it);return Oi(null!==qt),qt}}(ee,K.bucket),ri);return _i.urlParams=qt,_i.errorHandler=Mi(K),_i}function ds(ee,K,Ce){const Ve=Object.assign({},Ce);return Ve.fullPath=ee.path,Ve.size=K.size(),Ve.contentType||(Ve.contentType=function os(ee,K){return ee&&ee.contentType||K&&K.type()||"application/octet-stream"}(null,K)),Ve}class Yr{constructor(K,Ce,Ve,it){this.current=K,this.total=Ce,this.finalized=!!Ve,this.metadata=it||null}}function wr(ee,K){let Ce=null;try{Ce=ee.getResponseHeader("X-Goog-Upload-Status")}catch(it){Oi(!1)}return Oi(!!Ce&&-1!==(K||["active"]).indexOf(Ce)),Ce}const Ks={STATE_CHANGED:"state_changed"},zi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hs(ee){switch(ee){case"running":case"pausing":case"canceling":return zi.RUNNING;case"paused":return zi.PAUSED;case"success":return zi.SUCCESS;case"canceled":return zi.CANCELED;default:return zi.ERROR}}class kr{constructor(K,Ce,Ve){if(function lr(ee){return"function"==typeof ee}(K)||null!=Ce||null!=Ve)this.next=K,this.error=null!=Ce?Ce:void 0,this.complete=null!=Ve?Ve:void 0;else{const qt=K;this.next=qt.next,this.error=qt.error,this.complete=qt.complete}}}function qr(ee){return(...K)=>{Promise.resolve().then(()=>ee(...K))}}class ks extends class gs{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ji.NO_ERROR,this.sendPromise_=new Promise(K=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ji.ABORT,K()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ji.NETWORK_ERROR,K()}),this.xhr_.addEventListener("load",()=>{K()})})}send(K,Ce,Ve,it){if(this.sent_)throw ut("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Ce,K,!0),void 0!==it)for(const qt in it)it.hasOwnProperty(qt)&&this.xhr_.setRequestHeader(qt,it[qt].toString());return void 0!==Ve?this.xhr_.send(Ve):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ut("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ut("cannot .getStatus() before sending");try{return this.xhr_.status}catch(K){return-1}}getResponse(){if(!this.sent_)throw ut("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ut("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(K){return this.xhr_.getResponseHeader(K)}addUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",K)}removeUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",K)}}{initXhr(){this.xhr_.responseType="text"}}function Hi(){return new ks}class Ct{constructor(K,Ce,Ve=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=K,this._blob=Ce,this._metadata=Ve,this._mappings=gt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=it=>{if(this._request=void 0,this._chunkMultiplier=1,it._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const qt=this.isExponentialBackoffExpired();if(dn(it.status,[])){if(!qt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();it=wt()}this._error=it,this._transition("error")}},this._metadataErrorHandler=it=>{this._request=void 0,it._codeEquals("canceled")?this.completeTransitions_():(this._error=it,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((it,qt)=>{this._resolve=it,this._reject=qt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const K=this._transferred;return Ce=>this._updateProgress(K+Ce)}_shouldDoResumable(K){return K.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(K){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Ce,Ve])=>{switch(this._state){case"running":K(Ce,Ve);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((K,Ce)=>{const Ve=function Ir(ee,K,Ce,Ve,it){const qt=K.bucketOnlyServerUrl(),_n=ds(K,Ve,it),br={name:_n.fullPath},Xn=Mr(qt,ee.host,ee._protocol),_i={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Ve.size()}`,"X-Goog-Upload-Header-Content-Type":_n.contentType,"Content-Type":"application/json; charset=utf-8"},yi=Qi(_n,Ce),l=new ss(Xn,"POST",function ts(A){let I;wr(A);try{I=A.getResponseHeader("X-Goog-Upload-URL")}catch(P){Oi(!1)}return Oi(oi(I)),I},ee.maxUploadRetryTime);return l.urlParams=br,l.headers=_i,l.body=yi,l.errorHandler=Mi(K),l}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),it=this._ref.storage._makeRequest(Ve,Hi,K,Ce);this._request=it,it.getPromise().then(qt=>{this._request=void 0,this._uploadUrl=qt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const K=this._uploadUrl;this._resolveToken((Ce,Ve)=>{const it=function Xi(ee,K,Ce,Ve){const Xn=new ss(Ce,"POST",function qt(ri){const _i=wr(ri,["active","final"]);let yi=null;try{yi=ri.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ts){Oi(!1)}yi||Oi(!1);const $i=Number(yi);return Oi(!isNaN($i)),new Yr($i,Ve.size(),"final"===_i)},ee.maxUploadRetryTime);return Xn.headers={"X-Goog-Upload-Command":"query"},Xn.errorHandler=Mi(K),Xn}(this._ref.storage,this._ref._location,K,this._blob),qt=this._ref.storage._makeRequest(it,Hi,Ce,Ve);this._request=qt,qt.getPromise().then(_n=>{this._request=void 0,this._updateProgress(_n.current),this._needToFetchStatus=!1,_n.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const K=262144*this._chunkMultiplier,Ce=new Yr(this._transferred,this._blob.size()),Ve=this._uploadUrl;this._resolveToken((it,qt)=>{let _n;try{_n=function wi(ee,K,Ce,Ve,it,qt,_n,br){const Xn=new Yr(0,0);if(_n?(Xn.current=_n.current,Xn.total=_n.total):(Xn.current=0,Xn.total=Ve.size()),Ve.size()!==Xn.total)throw function yn(){return new St("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const ri=Xn.total-Xn.current;let _i=ri;it>0&&(_i=Math.min(_i,it));const yi=Xn.current;let ts="";ts=0===_i?"finalize":ri===_i?"upload, finalize":"upload";const l={"X-Goog-Upload-Command":ts,"X-Goog-Upload-Offset":`${Xn.current}`},A=Ve.slice(yi,yi+_i);if(null===A)throw rr();const J=new ss(Ce,"POST",function I(me,be){const oe=wr(me,["active","final"]),ge=Xn.current+_i,ce=Ve.size();let le;return le="final"===oe?En(K,qt)(me,be):null,new Yr(ge,ce,"final"===oe,le)},K.maxUploadRetryTime);return J.headers=l,J.body=A.uploadData(),J.progressCallback=br||null,J.errorHandler=Mi(ee),J}(this._ref._location,this._ref.storage,Ve,this._blob,K,this._mappings,Ce,this._makeProgressCallback())}catch(Xn){return this._error=Xn,void this._transition("error")}const br=this._ref.storage._makeRequest(_n,Hi,it,qt,!1);this._request=br,br.getPromise().then(Xn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Xn.current),Xn.finalized?(this._metadata=Xn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((K,Ce)=>{const Ve=Ui(this._ref.storage,this._ref._location,this._mappings),it=this._ref.storage._makeRequest(Ve,Hi,K,Ce);this._request=it,it.getPromise().then(qt=>{this._request=void 0,this._metadata=qt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((K,Ce)=>{const Ve=function $s(ee,K,Ce,Ve,it){const qt=K.bucketOnlyServerUrl(),_n={"X-Goog-Upload-Protocol":"multipart"},Xn=function br(){let J="";for(let me=0;me<2;me++)J+=Math.random().toString().slice(2);return J}();_n["Content-Type"]="multipart/related; boundary="+Xn;const ri=ds(K,Ve,it),_i=Qi(ri,Ce),ts=$r.getBlob("--"+Xn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_i+"\r\n--"+Xn+"\r\nContent-Type: "+ri.contentType+"\r\n\r\n",Ve,"\r\n--"+Xn+"--");if(null===ts)throw rr();const l={name:ri.fullPath},A=Mr(qt,ee.host,ee._protocol),P=ee.maxUploadRetryTime,z=new ss(A,"POST",En(ee,Ce),P);return z.urlParams=l,z.headers=_n,z.body=ts.uploadData(),z.errorHandler=Mi(K),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),it=this._ref.storage._makeRequest(Ve,Hi,K,Ce);this._request=it,it.getPromise().then(qt=>{this._request=void 0,this._metadata=qt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(K){const Ce=this._transferred;this._transferred=K,this._transferred!==Ce&&this._notifyObservers()}_transition(K){if(this._state!==K)switch(K){case"canceling":case"pausing":this._state=K,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Ce="paused"===this._state;this._state=K,Ce&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=K,this._notifyObservers();break;case"canceled":this._error=at(),this._state=K,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const K=hs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:K,metadata:this._metadata,task:this,ref:this._ref}}on(K,Ce,Ve,it){const qt=new kr(Ce||void 0,Ve||void 0,it||void 0);return this._addObserver(qt),()=>{this._removeObserver(qt)}}then(K,Ce){return this._promise.then(K,Ce)}catch(K){return this.then(null,K)}_addObserver(K){this._observers.push(K),this._notifyObserver(K)}_removeObserver(K){const Ce=this._observers.indexOf(K);-1!==Ce&&this._observers.splice(Ce,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Ce=>{this._notifyObserver(Ce)})}_finishPromise(){if(void 0!==this._resolve){let K=!0;switch(hs(this._state)){case zi.SUCCESS:qr(this._resolve.bind(null,this.snapshot))();break;case zi.CANCELED:case zi.ERROR:qr(this._reject.bind(null,this._error))();break;default:K=!1}K&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(K){switch(hs(this._state)){case zi.RUNNING:case zi.PAUSED:K.next&&qr(K.next.bind(K,this.snapshot))();break;case zi.SUCCESS:K.complete&&qr(K.complete.bind(K))();break;default:K.error&&qr(K.error.bind(K,this._error))()}}resume(){const K="paused"===this._state||"pausing"===this._state;return K&&this._transition("running"),K}pause(){const K="running"===this._state;return K&&this._transition("pausing"),K}cancel(){const K="running"===this._state||"pausing"===this._state;return K&&this._transition("canceling"),K}}class dt{constructor(K,Ce){this._service=K,this._location=Ce instanceof Yt?Ce:Yt.makeFromUrl(Ce,K.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(K,Ce){return new dt(K,Ce)}get root(){const K=new Yt(this._location.bucket,"");return this._newRef(this._service,K)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xt(this._location.path)}get storage(){return this._service}get parent(){const K=function Ue(ee){if(0===ee.length)return null;const K=ee.lastIndexOf("/");return-1===K?"":ee.slice(0,K)}(this._location.path);if(null===K)return null;const Ce=new Yt(this._location.bucket,K);return new dt(this._service,Ce)}_throwIfRoot(K){if(""===this._location.path)throw st(K)}}function Ii(ee,K,Ce){return vs.apply(this,arguments)}function vs(){return(vs=(0,vt.Z)(function*(ee,K,Ce){const it=yield ai(ee,{pageToken:Ce});K.prefixes.push(...it.prefixes),K.items.push(...it.items),null!=it.nextPageToken&&(yield Ii(ee,K,it.nextPageToken))})).apply(this,arguments)}function ai(ee,K){null!=K&&"number"==typeof K.maxResults&&xr("options.maxResults",1,1e3,K.maxResults);const Ce=K||{},Ve=us(ee.storage,ee._location,"/",Ce.pageToken,Ce.maxResults);return ee.storage.makeRequestWithTokens(Ve,Hi)}function Qo(ee){ee._throwIfRoot("getDownloadURL");const K=function Ki(ee,K,Ce){const it=Mr(K.fullServerUrl(),ee.host,ee._protocol),_n=ee.maxOperationRetryTime,br=new ss(it,"GET",function mi(ee,K){return function Ce(Ve,it){const qt=qn(ee,it,K);return Oi(null!==qt),function ci(ee,K,Ce,Ve){const it=Je(K);if(null===it||!oi(it.downloadTokens))return null;const qt=it.downloadTokens;if(0===qt.length)return null;const _n=encodeURIComponent;return qt.split(",").map(ri=>{const yi=ee.fullPath;return Mr("/b/"+_n(ee.bucket)+"/o/"+_n(yi),Ce,Ve)+rs({alt:"media",token:ri})})[0]}(qt,it,ee.host,ee._protocol)}}(ee,Ce),_n);return br.errorHandler=bs(K),br}(ee.storage,ee._location,gt());return ee.storage.makeRequestWithTokens(K,Hi).then(Ce=>{if(null===Ce)throw function Tr(){return new St("no-download-url","The given file does not have any download URLs.")}();return Ce})}function Qs(ee,K){const Ce=function ft(ee,K){const Ce=K.split("/").filter(Ve=>Ve.length>0).join("/");return 0===ee.length?Ce:ee+"/"+Ce}(ee._location.path,K),Ve=new Yt(ee._location.bucket,Ce);return new dt(ee.storage,Ve)}function Ri(ee,K){if(ee instanceof js){const Ce=ee;if(null==Ce._bucket)throw function nr(){return new St("no-default-bucket","No default bucket found. Did you set the '"+Ln+"' property when initializing the app?")}();const Ve=new dt(Ce,Ce._bucket);return null!=K?Ri(Ve,K):Ve}return void 0!==K?Qs(ee,K):ee}function fo(ee,K){if(K&&function ws(ee){return/^[A-Za-z]+:\/\//.test(ee)}(K)){if(ee instanceof js)return function ho(ee,K){return new dt(ee,K)}(ee,K);throw Vt("To use ref(service, url), the first argument must be a Storage instance.")}return Ri(ee,K)}function Ms(ee,K){const Ce=null==K?void 0:K[Ln];return null==Ce?null:Yt.makeFromBucketSpec(Ce,ee)}class js{constructor(K,Ce,Ve,it,qt){this.app=K,this._authProvider=Ce,this._appCheckProvider=Ve,this._url=it,this._firebaseVersion=qt,this._bucket=null,this._host=Zt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=it?Yt.makeFromBucketSpec(it,this._host):Ms(this._host,this.app.options)}get host(){return this._host}set host(K){this._host=K,this._bucket=null!=this._url?Yt.makeFromBucketSpec(this._url,K):Ms(K,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(K){xr("time",0,Number.POSITIVE_INFINITY,K),this._maxUploadRetryTime=K}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(K){xr("time",0,Number.POSITIVE_INFINITY,K),this._maxOperationRetryTime=K}_getAuthToken(){var K=this;return(0,vt.Z)(function*(){if(K._overrideAuthToken)return K._overrideAuthToken;const Ce=K._authProvider.getImmediate({optional:!0});if(Ce){const Ve=yield Ce.getToken();if(null!==Ve)return Ve.accessToken}return null})()}_getAppCheckToken(){var K=this;return(0,vt.Z)(function*(){const Ce=K._appCheckProvider.getImmediate({optional:!0});return Ce?(yield Ce.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(K=>K.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(K){return new dt(this,K)}_makeRequest(K,Ce,Ve,it,qt=!0){if(this._deleted)return new Rt(kt());{const _n=function Jr(ee,K,Ce,Ve,it,qt,_n=!0){const br=rs(ee.urlParams),Xn=ee.url+br,ri=Object.assign({},ee.headers);return function bn(ee,K){K&&(ee["X-Firebase-GMPID"]=K)}(ri,K),function Gt(ee,K){null!==K&&K.length>0&&(ee.Authorization="Firebase "+K)}(ri,Ce),function rn(ee,K){ee["X-Firebase-Storage-Version"]="webjs/"+(null!=K?K:"AppManager")}(ri,qt),function zn(ee,K){null!==K&&(ee["X-Firebase-AppCheck"]=K)}(ri,Ve),new rt(Xn,ee.method,ri,ee.body,ee.successCodes,ee.additionalRetryCodes,ee.handler,ee.errorHandler,ee.timeout,ee.progressCallback,it,_n)}(K,this._appId,Ve,it,Ce,this._firebaseVersion,qt);return this._requests.add(_n),_n.getPromise().then(()=>this._requests.delete(_n),()=>this._requests.delete(_n)),_n}}makeRequestWithTokens(K,Ce){var Ve=this;return(0,vt.Z)(function*(){const[it,qt]=yield Promise.all([Ve._getAuthToken(),Ve._getAppCheckToken()]);return Ve._makeRequest(K,Ce,it,qt).getPromise()})()}}const Vo="@firebase/storage";function zs(ee,K){return fo(ee=(0,In.m9)(ee),K)}function W(ee,{instanceIdentifier:K}){const Ce=ee.getProvider("app").getImmediate(),Ve=ee.getProvider("auth-internal"),it=ee.getProvider("app-check-internal");return new js(Ce,Ve,it,K,un.SDK_VERSION)}!function ve(){(0,un._registerComponent)(new Ot.wA("storage",W,"PUBLIC").setMultipleInstances(!0)),(0,un.registerVersion)(Vo,"0.10.0",""),(0,un.registerVersion)(Vo,"0.10.0","esm2017")}();class qe{constructor(K,Ce,Ve){this._delegate=K,this.task=Ce,this.ref=Ve}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class sn{constructor(K,Ce){this._delegate=K,this._ref=Ce,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new qe(this._delegate.snapshot,this,this._ref)}then(K,Ce){return this._delegate.then(Ve=>{if(K)return K(new qe(Ve,this,this._ref))},Ce)}on(K,Ce,Ve,it){let qt;return Ce&&(qt="function"==typeof Ce?_n=>Ce(new qe(_n,this,this._ref)):{next:Ce.next?_n=>Ce.next(new qe(_n,this,this._ref)):void 0,complete:Ce.complete||void 0,error:Ce.error||void 0}),this._delegate.on(K,qt,Ve||void 0,it||void 0)}}class wn{constructor(K,Ce){this._delegate=K,this._service=Ce}get prefixes(){return this._delegate.prefixes.map(K=>new fr(K,this._service))}get items(){return this._delegate.items.map(K=>new fr(K,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class fr{constructor(K,Ce){this._delegate=K,this.storage=Ce}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(K){const Ce=function Ls(ee,K){return Qs(ee,K)}(this._delegate,K);return new fr(Ce,this.storage)}get root(){return new fr(this._delegate.root,this.storage)}get parent(){const K=this._delegate.parent;return null==K?null:new fr(K,this.storage)}put(K,Ce){return this._throwIfRoot("put"),new sn(function fs(ee,K,Ce){return function Pr(ee,K,Ce){return ee._throwIfRoot("uploadBytesResumable"),new Ct(ee,new $r(K),Ce)}(ee=(0,In.m9)(ee),K,Ce)}(this._delegate,K,Ce),this)}putString(K,Ce=ui.RAW,Ve){this._throwIfRoot("putString");const it=Si(Ce,K),qt=Object.assign({},Ve);return null==qt.contentType&&null!=it.contentType&&(qt.contentType=it.contentType),new sn(new Ct(this._delegate,new $r(it.data,!0),qt),this)}listAll(){return function so(ee){return function Yi(ee){const K={prefixes:[],items:[]};return Ii(ee,K).then(()=>K)}(ee=(0,In.m9)(ee))}(this._delegate).then(K=>new wn(K,this.storage))}list(K){return function ki(ee,K){return ai(ee=(0,In.m9)(ee),K)}(this._delegate,K||void 0).then(Ce=>new wn(Ce,this.storage))}getMetadata(){return function Js(ee){return function ms(ee){ee._throwIfRoot("getMetadata");const K=Ui(ee.storage,ee._location,gt());return ee.storage.makeRequestWithTokens(K,Hi)}(ee=(0,In.m9)(ee))}(this._delegate)}updateMetadata(K){return function Gs(ee,K){return function Ts(ee,K){ee._throwIfRoot("updateMetadata");const Ce=function Gi(ee,K,Ce,Ve){const qt=Mr(K.fullServerUrl(),ee.host,ee._protocol),br=Qi(Ce,Ve),ri=ee.maxOperationRetryTime,_i=new ss(qt,"PATCH",En(ee,Ve),ri);return _i.headers={"Content-Type":"application/json; charset=utf-8"},_i.body=br,_i.errorHandler=bs(K),_i}(ee.storage,ee._location,K,gt());return ee.storage.makeRequestWithTokens(Ce,Hi)}(ee=(0,In.m9)(ee),K)}(this._delegate,K)}getDownloadURL(){return function yo(ee){return Qo(ee=(0,In.m9)(ee))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Rs(ee){return function Es(ee){ee._throwIfRoot("deleteObject");const K=function Ar(ee,K){const Ve=Mr(K.fullServerUrl(),ee.host,ee._protocol),br=new ss(Ve,"DELETE",function _n(Xn,ri){},ee.maxOperationRetryTime);return br.successCodes=[200,204],br.errorHandler=bs(K),br}(ee.storage,ee._location);return ee.storage.makeRequestWithTokens(K,Hi)}(ee=(0,In.m9)(ee))}(this._delegate)}_throwIfRoot(K){if(""===this._delegate._location.path)throw st(K)}}class jr{constructor(K,Ce){this.app=K,this._delegate=Ce}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(K){if(ei(K))throw Vt("ref() expected a child path but got a URL, use refFromURL instead.");return new fr(zs(this._delegate,K),this)}refFromURL(K){if(!ei(K))throw Vt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Yt.makeFromUrl(K,this._delegate.host)}catch(Ce){throw Vt("refFromUrl() expected a valid full URL but got an invalid one.")}return new fr(zs(this._delegate,K),this)}setMaxUploadRetryTime(K){this._delegate.maxUploadRetryTime=K}setMaxOperationRetryTime(K){this._delegate.maxOperationRetryTime=K}useEmulator(K,Ce,Ve={}){!function bi(ee,K,Ce,Ve={}){!function io(ee,K,Ce,Ve={}){ee.host=`${K}:${Ce}`,ee._protocol="http";const{mockUserToken:it}=Ve;it&&(ee._overrideAuthToken="string"==typeof it?it:(0,In.Sg)(it,ee.app.options.projectId))}(ee,K,Ce,Ve)}(this._delegate,K,Ce,Ve)}}function ei(ee){return/^[A-Za-z]+:\/\//.test(ee)}function Di(ee,{instanceIdentifier:K}){const Ce=ee.getProvider("app-compat").getImmediate(),Ve=ee.getProvider("storage").getImmediate({identifier:K});return new jr(Ce,Ve)}!function Fi(ee){const K={TaskState:zi,TaskEvent:Ks,StringFormat:ui,Storage:jr,Reference:fr};ee.INTERNAL.registerComponent(new Ot.wA("storage-compat",Di,"PUBLIC").setServiceProps(K).setMultipleInstances(!0)),ee.registerVersion("@firebase/storage-compat","0.2.0")}(Cn.Z);var oo=j(6217),ns=j(9260);function Zs(ee){const K=function Kr(ee){return new g.y(K=>{const Ce=_n=>K.next(_n);Ce(ee.snapshot);const qt=ee.on("state_changed",Ce);return ee.then(_n=>{Ce(_n),K.complete()},_n=>{Ce(ee.snapshot),(_n=>{K.error(_n)})(_n)}),function(){qt()}}).pipe(function pt(ee,K=ae.z){return(0,We.e)((Ce,Ve)=>{let it=null,qt=null,_n=null;const br=()=>{if(it){it.unsubscribe(),it=null;const ri=qt;qt=null,Ve.next(ri)}};function Xn(){const ri=_n+ee,_i=K.now();if(_i<ri)return it=this.schedule(void 0,ri-_i),void Ve.add(it);br()}Ce.subscribe((0,Xe.x)(Ve,ri=>{qt=ri,_n=K.now(),it||(it=K.schedule(Xn,ee),Ve.add(it))},()=>{br(),Ve.complete()},void 0,()=>{qt=it=null}))})}(0))}(ee);return{task:ee,then:ee.then.bind(ee),catch:ee.catch.bind(ee),pause:ee.pause.bind(ee),cancel:ee.cancel.bind(ee),resume:ee.resume.bind(ee),snapshotChanges:()=>K,percentageChanges:()=>K.pipe((0,Ze.U)(Ce=>Ce.bytesTransferred/Ce.totalBytes*100))}}function ko(ee){return{getDownloadURL:()=>(0,F.of)(void 0).pipe(Oe.fc,(0,ht.w)(()=>ee.getDownloadURL()),Oe.iC),getMetadata:()=>(0,F.of)(void 0).pipe(Oe.fc,(0,ht.w)(()=>ee.getMetadata()),Oe.iC),delete:()=>(0,pe.D)(ee.delete()),child:K=>ko(ee.child(K)),updateMetadata:K=>(0,pe.D)(ee.updateMetadata(K)),put:(K,Ce)=>Zs(ee.put(K,Ce)),putString:(K,Ce,Ve)=>Zs(ee.putString(K,Ce,Ve)),list:K=>(0,pe.D)(ee.list(K)),listAll:()=>(0,pe.D)(ee.listAll())}}const ys=new Pe.OlP("angularfire2.storageBucket"),_o=new Pe.OlP("angularfire2.storage.maxUploadRetryTime"),Q=new Pe.OlP("angularfire2.storage.maxOperationRetryTime"),G=new Pe.OlP("angularfire2.storage.use-emulator");let V=(()=>{class ee{constructor(Ce,Ve,it,qt,_n,br,Xn,ri,_i,yi){const $i=(0,Et.on)(Ce,_n,Ve);this.storage=(0,Et.cc)(`${$i.name}.storage.${it}`,"AngularFireStorage",$i.name,()=>{const ts=_n.runOutsideAngular(()=>$i.storage(it||void 0)),l=_i;return l&&ts.useEmulator(...l),Xn&&ts.setMaxUploadRetryTime(Xn),ri&&ts.setMaxOperationRetryTime(ri),ts},[Xn,ri])}ref(Ce){return ko(this.storage.ref(Ce))}refFromURL(Ce){return ko(this.storage.refFromURL(Ce))}upload(Ce,Ve,it){return ko(this.storage.ref(Ce)).put(Ve,it)}}return ee.\u0275fac=function(Ce){return new(Ce||ee)(Pe.LFG(Et.Dh),Pe.LFG(Et.xv,8),Pe.LFG(ys,8),Pe.LFG(Pe.Lbi),Pe.LFG(Pe.R0b),Pe.LFG(Oe.HU),Pe.LFG(_o,8),Pe.LFG(Q,8),Pe.LFG(G,8),Pe.LFG(oo.nm,8))},ee.\u0275prov=Pe.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"any"}),ee})(),Ye=(()=>{class ee{}return ee.\u0275fac=function(Ce){return new(Ce||ee)},ee.\u0275mod=Pe.oAB({type:ee}),ee.\u0275inj=Pe.cJS({}),ee})(),Pn=(()=>{class ee{constructor(){ns.Z.registerVersion("angularfire",Oe.q4.full,"gcs-compat")}}return ee.\u0275fac=function(Ce){return new(Ce||ee)},ee.\u0275mod=Pe.oAB({type:ee}),ee.\u0275inj=Pe.cJS({providers:[V],imports:[Ye]}),ee})()},2011:(Wn,At,j)=>{j.d(At,{Dh:()=>Ze,GT:()=>Xe,cc:()=>vt,hO:()=>Cn,on:()=>Oe,pX:()=>We,xv:()=>ht});var g=j(5e3),F=j(9260),pe=j(2122);Wn=j.hmd(Wn);const ae=["ngOnDestroy"],We=(Zt,Ln,fn,xe={})=>new Proxy(Zt,{get:(He,St)=>fn.runOutsideAngular(()=>{var an;if(Zt[St])return(null===(an=null==xe?void 0:xe.spy)||void 0===an?void 0:an.get)&&xe.spy.get(St,Zt[St]),Zt[St];if(ae.indexOf(St)>-1)return()=>{};const Ht=Ln.toPromise().then(ke=>{const Ut=ke&&ke[St];return"function"==typeof Ut?Ut.bind(ke):Ut&&Ut.then?Ut.then(Me=>fn.run(()=>Me)):fn.run(()=>Ut)});return new Proxy(()=>{},{get:(ke,Ut)=>Ht[Ut],apply:(ke,Ut,Me)=>Ht.then(Tt=>{var et;const wt=Tt&&Tt(...Me);return(null===(et=null==xe?void 0:xe.spy)||void 0===et?void 0:et.apply)&&xe.spy.apply(St,Me,wt),wt})})})}),Xe=(Zt,Ln)=>{Ln.forEach(fn=>{Object.getOwnPropertyNames(fn.prototype||fn).forEach(xe=>{Object.defineProperty(Zt.prototype,xe,Object.getOwnPropertyDescriptor(fn.prototype||fn,xe))})})};class pt{constructor(Ln){return Ln}}const Ze=new g.OlP("angularfire2.app.options"),ht=new g.OlP("angularfire2.app.name");function Oe(Zt,Ln,fn){const He="object"==typeof fn&&fn||{};He.name=He.name||"string"==typeof fn&&fn||"[DEFAULT]";const an=F.Z.apps.filter(Ht=>Ht&&Ht.name===He.name)[0]||Ln.runOutsideAngular(()=>F.Z.initializeApp(Zt,He));try{JSON.stringify(Zt)!==JSON.stringify(an.options)&&Pe("error",`${an.name} Firebase App already initialized with different options${Wn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ht){}return new pt(an)}const Pe=(Zt,...Ln)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Zt](...Ln)},Et={provide:pt,useFactory:Oe,deps:[Ze,g.R0b,[new g.FiY,ht]]};let Cn=(()=>{class Zt{constructor(fn){F.Z.registerVersion("angularfire",pe.q4.full,"core"),F.Z.registerVersion("angularfire",pe.q4.full,"app-compat"),F.Z.registerVersion("angular",g.q4F.full,fn.toString())}static initializeApp(fn,xe){return{ngModule:Zt,providers:[{provide:Ze,useValue:fn},{provide:ht,useValue:xe}]}}}return Zt.\u0275fac=function(fn){return new(fn||Zt)(g.LFG(g.Lbi))},Zt.\u0275mod=g.oAB({type:Zt}),Zt.\u0275inj=g.cJS({providers:[Et]}),Zt})();function vt(Zt,Ln,fn,xe,He){const[,St,an]=globalThis.\u0275AngularfireInstanceCache.find(Ht=>Ht[0]===Zt)||[];if(St)return function un(Zt,Ln){try{return Zt.toString()===Ln.toString()}catch(fn){return Zt===Ln}}(He,an)||(Ot("error",`${Ln} was already initialized on the ${fn} Firebase App with different settings.${In?" You may need to reload as Firebase is not HMR aware.":""}`),Ot("warn",{is:He,was:an})),St;{const Ht=xe();return globalThis.\u0275AngularfireInstanceCache.push([Zt,Ht,He]),Ht}}const In=!!Wn.hot,Ot=(Zt,...Ln)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Zt](...Ln)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Wn,At,j)=>{j.d(At,{q4:()=>Ua,iC:()=>Sl,fc:()=>zu,HU:()=>tl,vb:()=>el,JM:()=>Vl});var g=j(5e3),F=j(259),pe=j(5861),ae=j(9681),We=j(2090),Xe=j(4859),pt=j(1877),Ze=j(8766);const ht="@firebase/installations",Et="w:0.6.0",Cn="FIS_v2",Ln=new We.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fn(U){return U instanceof We.ZR&&U.code.includes("request-failed")}function xe({projectId:U}){return`https://firebaseinstallations.googleapis.com/v1/projects/${U}/installations`}function He(U){return{token:U.token,requestStatus:2,expiresIn:Tt(U.expiresIn),creationTime:Date.now()}}function St(U,Y){return an.apply(this,arguments)}function an(){return(an=(0,pe.Z)(function*(U,Y){const je=(yield Y.json()).error;return Ln.create("request-failed",{requestName:U,serverCode:je.code,serverMessage:je.message,serverStatus:je.status})})).apply(this,arguments)}function Ht({apiKey:U}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U})}function ke(U,{refreshToken:Y}){const de=Ht(U);return de.append("Authorization",function et(U){return`${Cn} ${U}`}(Y)),de}function Ut(U){return Me.apply(this,arguments)}function Me(){return(Me=(0,pe.Z)(function*(U){const Y=yield U();return Y.status>=500&&Y.status<600?U():Y})).apply(this,arguments)}function Tt(U){return Number(U.replace("s","000"))}function wt(U,Y){return at.apply(this,arguments)}function at(){return(at=(0,pe.Z)(function*({appConfig:U,heartbeatServiceProvider:Y},{fid:de}){const je=xe(U),Pt=Ht(U),Kt=Y.getImmediate({optional:!0});if(Kt){const zr=yield Kt.getHeartbeatsHeader();zr&&Pt.append("x-firebase-client",zr)}const Hr={method:"POST",headers:Pt,body:JSON.stringify({fid:de,authVersion:Cn,appId:U.appId,sdkVersion:Et})},Zr=yield Ut(()=>fetch(je,Hr));if(Zr.ok){const zr=yield Zr.json();return{fid:zr.fid||de,registrationStatus:2,refreshToken:zr.refreshToken,authToken:He(zr.authToken)}}throw yield St("Create Installation",Zr)})).apply(this,arguments)}function on(U){return new Promise(Y=>{setTimeout(Y,U)})}const nr=/^[cdef][\w-]{21}$/;function yn(){try{const U=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(U),U[0]=112+U[0]%16;const de=function Tr(U){return function Dn(U){return btoa(String.fromCharCode(...U)).replace(/\+/g,"-").replace(/\//g,"_")}(U).substr(0,22)}(U);return nr.test(de)?de:""}catch(U){return""}}function mr(U){return`${U.appName}!${U.appId}`}const Vt=new Map;function kt(U,Y){const de=mr(U);ut(de,Y),function Yt(U,Y){const de=function tn(){return!Rt&&"BroadcastChannel"in self&&(Rt=new BroadcastChannel("[Firebase] FID Change"),Rt.onmessage=U=>{ut(U.data.key,U.data.fid)}),Rt}();de&&de.postMessage({key:U,fid:Y}),function Gn(){0===Vt.size&&Rt&&(Rt.close(),Rt=null)}()}(de,Y)}function ut(U,Y){const de=Vt.get(U);if(de)for(const je of de)je(Y)}let Rt=null;const Xr="firebase-installations-store";let oi=null;function Qn(){return oi||(oi=(0,Ze.X3)("firebase-installations-database",1,{upgrade:(U,Y)=>{0===Y&&U.createObjectStore(Xr)}})),oi}function Wr(U,Y){return xr.apply(this,arguments)}function xr(){return(xr=(0,pe.Z)(function*(U,Y){const de=mr(U),Pt=(yield Qn()).transaction(Xr,"readwrite"),Kt=Pt.objectStore(Xr),Vn=yield Kt.get(de);return yield Kt.put(Y,de),yield Pt.done,(!Vn||Vn.fid!==Y.fid)&&kt(U,Y.fid),Y})).apply(this,arguments)}function Mr(U){return rs.apply(this,arguments)}function rs(){return(rs=(0,pe.Z)(function*(U){const Y=mr(U),je=(yield Qn()).transaction(Xr,"readwrite");yield je.objectStore(Xr).delete(Y),yield je.done})).apply(this,arguments)}function Ji(U,Y){return dn.apply(this,arguments)}function dn(){return(dn=(0,pe.Z)(function*(U,Y){const de=mr(U),Pt=(yield Qn()).transaction(Xr,"readwrite"),Kt=Pt.objectStore(Xr),Vn=yield Kt.get(de),Hr=Y(Vn);return void 0===Hr?yield Kt.delete(de):yield Kt.put(Hr,de),yield Pt.done,Hr&&(!Vn||Vn.fid!==Hr.fid)&&kt(U,Hr.fid),Hr})).apply(this,arguments)}function rt(U){return ct.apply(this,arguments)}function ct(){return(ct=(0,pe.Z)(function*(U){let Y;const de=yield Ji(U.appConfig,je=>{const Pt=Gt(je),Kt=rn(U,Pt);return Y=Kt.registrationPromise,Kt.installationEntry});return""===de.fid?{installationEntry:yield Y}:{installationEntry:de,registrationPromise:Y}})).apply(this,arguments)}function Gt(U){return as(U||{fid:yn(),registrationStatus:0})}function rn(U,Y){if(0===Y.registrationStatus){if(!navigator.onLine)return{installationEntry:Y,registrationPromise:Promise.reject(Ln.create("app-offline"))};const de={fid:Y.fid,registrationStatus:1,registrationTime:Date.now()},je=function bn(U,Y){return zn.apply(this,arguments)}(U,de);return{installationEntry:de,registrationPromise:je}}return 1===Y.registrationStatus?{installationEntry:Y,registrationPromise:Jr(U)}:{installationEntry:Y}}function zn(){return(zn=(0,pe.Z)(function*(U,Y){try{const de=yield wt(U,Y);return Wr(U.appConfig,de)}catch(de){throw fn(de)&&409===de.customData.serverCode?yield Mr(U.appConfig):yield Wr(U.appConfig,{fid:Y.fid,registrationStatus:0}),de}})).apply(this,arguments)}function Jr(U){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,pe.Z)(function*(U){let Y=yield Br(U.appConfig);for(;1===Y.registrationStatus;)yield on(100),Y=yield Br(U.appConfig);if(0===Y.registrationStatus){const{installationEntry:de,registrationPromise:je}=yield rt(U);return je||de}return Y})).apply(this,arguments)}function Br(U){return Ji(U,Y=>{if(!Y)throw Ln.create("installation-not-found");return as(Y)})}function as(U){return function Li(U){return 1===U.registrationStatus&&U.registrationTime+1e4<Date.now()}(U)?{fid:U.fid,registrationStatus:0}:U}function ui(U,Y){return On.apply(this,arguments)}function On(){return(On=(0,pe.Z)(function*({appConfig:U,heartbeatServiceProvider:Y},de){const je=Si(U,de),Pt=ke(U,de),Kt=Y.getImmediate({optional:!0});if(Kt){const zr=yield Kt.getHeartbeatsHeader();zr&&Pt.append("x-firebase-client",zr)}const Hr={method:"POST",headers:Pt,body:JSON.stringify({installation:{sdkVersion:Et,appId:U.appId}})},Zr=yield Ut(()=>fetch(je,Hr));if(Zr.ok)return He(yield Zr.json());throw yield St("Generate Auth Token",Zr)})).apply(this,arguments)}function Si(U,{fid:Y}){return`${xe(U)}/${Y}/authTokens:generate`}function Vr(U){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,pe.Z)(function*(U,Y=!1){let de;const je=yield Ji(U.appConfig,Kt=>{if(!$r(Kt))throw Ln.create("not-registered");const Vn=Kt.authToken;if(!Y&&Je(Vn))return Kt;if(1===Vn.requestStatus)return de=kn(U,Y),Kt;{if(!navigator.onLine)throw Ln.create("app-offline");const Hr=ft(Kt);return de=Rr(U,Hr),Hr}});return de?yield de:je.authToken})).apply(this,arguments)}function kn(U,Y){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,pe.Z)(function*(U,Y){let de=yield Yn(U.appConfig);for(;1===de.authToken.requestStatus;)yield on(100),de=yield Yn(U.appConfig);const je=de.authToken;return 0===je.requestStatus?Vr(U,Y):je})).apply(this,arguments)}function Yn(U){return Ji(U,Y=>{if(!$r(Y))throw Ln.create("not-registered");return function Xt(U){return 1===U.requestStatus&&U.requestTime+1e4<Date.now()}(Y.authToken)?Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}}):Y})}function Rr(U,Y){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,pe.Z)(function*(U,Y){try{const de=yield ui(U,Y),je=Object.assign(Object.assign({},Y),{authToken:de});return yield Wr(U.appConfig,je),de}catch(de){if(!fn(de)||401!==de.customData.serverCode&&404!==de.customData.serverCode){const je=Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}});yield Wr(U.appConfig,je)}else yield Mr(U.appConfig);throw de}})).apply(this,arguments)}function $r(U){return void 0!==U&&2===U.registrationStatus}function Je(U){return 2===U.requestStatus&&!function Ue(U){const Y=Date.now();return Y<U.creationTime||U.creationTime+U.expiresIn<Y+36e5}(U)}function ft(U){const Y={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},U),{authToken:Y})}function Ge(){return(Ge=(0,pe.Z)(function*(U){const Y=U,{installationEntry:de,registrationPromise:je}=yield rt(Y);return je?je.catch(console.error):Vr(Y).catch(console.error),de.fid})).apply(this,arguments)}function Ae(){return(Ae=(0,pe.Z)(function*(U,Y=!1){const de=U;return yield gt(de),(yield Vr(de,Y)).token})).apply(this,arguments)}function gt(U){return cn.apply(this,arguments)}function cn(){return(cn=(0,pe.Z)(function*(U){const{registrationPromise:Y}=yield rt(U);Y&&(yield Y)})).apply(this,arguments)}function ss(U){return Ln.create("missing-app-config-values",{valueName:U})}const Oi="installations",yr=U=>{const Y=U.getProvider("app").getImmediate(),de=function di(U){if(!U||!U.options)throw ss("App Configuration");if(!U.name)throw ss("App Name");const Y=["projectId","apiKey","appId"];for(const de of Y)if(!U.options[de])throw ss(de);return{appName:U.name,projectId:U.options.projectId,apiKey:U.options.apiKey,appId:U.options.appId}}(Y);return{app:Y,appConfig:de,heartbeatServiceProvider:(0,ae._getProvider)(Y,"heartbeat"),_delete:()=>Promise.resolve()}},mi=U=>{const Y=U.getProvider("app").getImmediate(),de=(0,ae._getProvider)(Y,Oi).getImmediate();return{getId:()=>function Lt(U){return Ge.apply(this,arguments)}(de),getToken:Pt=>function Re(U){return Ae.apply(this,arguments)}(de,Pt)}};(function Mi(){(0,ae._registerComponent)(new Xe.wA(Oi,yr,"PUBLIC")),(0,ae._registerComponent)(new Xe.wA("installations-internal",mi,"PRIVATE"))})(),(0,ae.registerVersion)(ht,"0.6.0"),(0,ae.registerVersion)(ht,"0.6.0","esm2017");const bs="@firebase/remote-config",Gi=new We.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $o{constructor(Y,de,je,Pt){this.client=Y,this.storage=de,this.storageCache=je,this.logger=Pt}isCachedDataFresh(Y,de){if(!de)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const je=Date.now()-de,Pt=je<=Y;return this.logger.debug(`Config fetch cache check. Cache age millis: ${je}. Cache max age millis (minimumFetchIntervalMillis setting): ${Y}. Is cache hit: ${Pt}.`),Pt}fetch(Y){var de=this;return(0,pe.Z)(function*(){const[je,Pt]=yield Promise.all([de.storage.getLastSuccessfulFetchTimestampMillis(),de.storage.getLastSuccessfulFetchResponse()]);if(Pt&&de.isCachedDataFresh(Y.cacheMaxAgeMillis,je))return Pt;Y.eTag=Pt&&Pt.eTag;const Kt=yield de.client.fetch(Y),Vn=[de.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Kt.status&&Vn.push(de.storage.setLastSuccessfulFetchResponse(Kt)),yield Promise.all(Vn),Kt})()}}function mo(U=navigator){return U.languages&&U.languages[0]||U.language}class xs{constructor(Y,de,je,Pt,Kt,Vn){this.firebaseInstallations=Y,this.sdkVersion=de,this.namespace=je,this.projectId=Pt,this.apiKey=Kt,this.appId=Vn}fetch(Y){var de=this;return(0,pe.Z)(function*(){const[je,Pt]=yield Promise.all([de.firebaseInstallations.getId(),de.firebaseInstallations.getToken()]),Vn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${de.projectId}/namespaces/${de.namespace}:fetch?key=${de.apiKey}`,Hr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Y.eTag||"*"},Zr={sdk_version:de.sdkVersion,app_instance_id:je,app_instance_id_token:Pt,app_id:de.appId,language_code:mo()},zr={method:"POST",headers:Hr,body:JSON.stringify(Zr)},Wi=fetch(Vn,zr),Ei=new Promise((Mo,So)=>{Y.signal.addEventListener(()=>{const Ga=new Error("The operation was aborted.");Ga.name="AbortError",So(Ga)})});let Ho;try{yield Promise.race([Wi,Ei]),Ho=yield Wi}catch(Mo){let So="fetch-client-network";throw"AbortError"===(null==Mo?void 0:Mo.name)&&(So="fetch-timeout"),Gi.create(So,{originalErrorMessage:null==Mo?void 0:Mo.message})}let ii=Ho.status;const is=Ho.headers.get("ETag")||void 0;let Sa,Pa;if(200===Ho.status){let Mo;try{Mo=yield Ho.json()}catch(So){throw Gi.create("fetch-client-parse",{originalErrorMessage:null==So?void 0:So.message})}Sa=Mo.entries,Pa=Mo.state}if("INSTANCE_STATE_UNSPECIFIED"===Pa?ii=500:"NO_CHANGE"===Pa?ii=304:("NO_TEMPLATE"===Pa||"EMPTY_CONFIG"===Pa)&&(Sa={}),304!==ii&&200!==ii)throw Gi.create("fetch-status",{httpStatus:ii});return{status:ii,eTag:is,config:Sa}})()}}class dt{constructor(Y,de){this.client=Y,this.storage=de}fetch(Y){var de=this;return(0,pe.Z)(function*(){const je=(yield de.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return de.attemptFetch(Y,je)})()}attemptFetch(Y,{throttleEndTimeMillis:de,backoffCount:je}){var Pt=this;return(0,pe.Z)(function*(){yield function Zi(U,Y){return new Promise((de,je)=>{const Pt=Math.max(Y-Date.now(),0),Kt=setTimeout(de,Pt);U.addEventListener(()=>{clearTimeout(Kt),je(Gi.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}(Y.signal,de);try{const Kt=yield Pt.client.fetch(Y);return yield Pt.storage.deleteThrottleMetadata(),Kt}catch(Kt){if(!function Ct(U){if(!(U instanceof We.ZR&&U.customData))return!1;const Y=Number(U.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}(Kt))throw Kt;const Vn={throttleEndTimeMillis:Date.now()+(0,We.$s)(je),backoffCount:je+1};return yield Pt.storage.setThrottleMetadata(Vn),Pt.attemptFetch(Y,Vn)}})()}}class $n{constructor(Y,de,je,Pt,Kt){this.app=Y,this._client=de,this._storageCache=je,this._storage=Pt,this._logger=Kt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Pr(U,Y){const de=U.target.error||void 0;return Gi.create(Y,{originalErrorMessage:de&&(null==de?void 0:de.message)})}const ti="app_namespace_store";class ai{constructor(Y,de,je,Pt=function vs(){return new Promise((U,Y)=>{try{const de=indexedDB.open("firebase_remote_config",1);de.onerror=je=>{Y(Pr(je,"storage-open"))},de.onsuccess=je=>{U(je.target.result)},de.onupgradeneeded=je=>{0===je.oldVersion&&je.target.result.createObjectStore(ti,{keyPath:"compositeKey"})}}catch(de){Y(Gi.create("storage-open",{originalErrorMessage:null==de?void 0:de.message}))}})}()){this.appId=Y,this.appName=de,this.namespace=je,this.openDbPromise=Pt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Y){return this.set("last_fetch_status",Y)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Y){return this.set("last_successful_fetch_timestamp_millis",Y)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Y){return this.set("last_successful_fetch_response",Y)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Y){return this.set("active_config",Y)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Y){return this.set("active_config_etag",Y)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Y){return this.set("throttle_metadata",Y)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Y){var de=this;return(0,pe.Z)(function*(){const je=yield de.openDbPromise;return new Promise((Pt,Kt)=>{const Hr=je.transaction([ti],"readonly").objectStore(ti),Zr=de.createCompositeKey(Y);try{const zr=Hr.get(Zr);zr.onerror=Wi=>{Kt(Pr(Wi,"storage-get"))},zr.onsuccess=Wi=>{const Ei=Wi.target.result;Pt(Ei?Ei.value:void 0)}}catch(zr){Kt(Gi.create("storage-get",{originalErrorMessage:null==zr?void 0:zr.message}))}})})()}set(Y,de){var je=this;return(0,pe.Z)(function*(){const Pt=yield je.openDbPromise;return new Promise((Kt,Vn)=>{const Zr=Pt.transaction([ti],"readwrite").objectStore(ti),zr=je.createCompositeKey(Y);try{const Wi=Zr.put({compositeKey:zr,value:de});Wi.onerror=Ei=>{Vn(Pr(Ei,"storage-set"))},Wi.onsuccess=()=>{Kt()}}catch(Wi){Vn(Gi.create("storage-set",{originalErrorMessage:null==Wi?void 0:Wi.message}))}})})()}delete(Y){var de=this;return(0,pe.Z)(function*(){const je=yield de.openDbPromise;return new Promise((Pt,Kt)=>{const Hr=je.transaction([ti],"readwrite").objectStore(ti),Zr=de.createCompositeKey(Y);try{const zr=Hr.delete(Zr);zr.onerror=Wi=>{Kt(Pr(Wi,"storage-delete"))},zr.onsuccess=()=>{Pt()}}catch(zr){Kt(Gi.create("storage-delete",{originalErrorMessage:null==zr?void 0:zr.message}))}})})()}createCompositeKey(Y){return[this.appId,this.appName,this.namespace,Y].join()}}class ms{constructor(Y){this.storage=Y}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Y=this;return(0,pe.Z)(function*(){const de=Y.storage.getLastFetchStatus(),je=Y.storage.getLastSuccessfulFetchTimestampMillis(),Pt=Y.storage.getActiveConfig(),Kt=yield de;Kt&&(Y.lastFetchStatus=Kt);const Vn=yield je;Vn&&(Y.lastSuccessfulFetchTimestampMillis=Vn);const Hr=yield Pt;Hr&&(Y.activeConfig=Hr)})()}setLastFetchStatus(Y){return this.lastFetchStatus=Y,this.storage.setLastFetchStatus(Y)}setLastSuccessfulFetchTimestampMillis(Y){return this.lastSuccessfulFetchTimestampMillis=Y,this.storage.setLastSuccessfulFetchTimestampMillis(Y)}setActiveConfig(Y){return this.activeConfig=Y,this.storage.setActiveConfig(Y)}}function Qs(){return ws.apply(this,arguments)}function ws(){return(ws=(0,pe.Z)(function*(){if(!(0,We.hl)())return!1;try{return yield(0,We.eu)()}catch(U){return!1}})).apply(this,arguments)}!function Ts(){(0,ae._registerComponent)(new Xe.wA("remote-config",function U(Y,{instanceIdentifier:de}){const je=Y.getProvider("app").getImmediate(),Pt=Y.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Gi.create("registration-window");if(!(0,We.hl)())throw Gi.create("indexed-db-unavailable");const{projectId:Kt,apiKey:Vn,appId:Hr}=je.options;if(!Kt)throw Gi.create("registration-project-id");if(!Vn)throw Gi.create("registration-api-key");if(!Hr)throw Gi.create("registration-app-id");const Zr=new ai(Hr,je.name,de=de||"firebase"),zr=new ms(Zr),Wi=new pt.Yd(bs);Wi.logLevel=pt.in.ERROR;const Ei=new xs(Pt,ae.SDK_VERSION,de,Kt,Vn,Hr),Ho=new dt(Ei,Zr),ii=new $o(Ho,Zr,zr,Wi),is=new $n(je,ii,zr,Zr,Wi);return function wi(U){const Y=(0,We.m9)(U);Y._initializePromise||(Y._initializePromise=Y._storageCache.loadFromStorage().then(()=>{Y._isInitializationComplete=!0}))}(is),is},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(bs,"0.4.0"),(0,ae.registerVersion)(bs,"0.4.0","esm2017")}();const ho="/firebase-messaging-sw.js",Ri="/firebase-cloud-messaging-push-scope",fo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",io="google.c.a.c_id",js="google.c.a.c_l",Vo="google.c.a.ts",Xs="google.c.a.e";var Is=(()=>{return(U=Is||(Is={})).PUSH_RECEIVED="push-received",U.NOTIFICATION_CLICKED="notification-clicked",Is;var U})();function Fs(U){const Y=new Uint8Array(U);return btoa(String.fromCharCode(...Y)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oo(U){const de=(U+"=".repeat((4-U.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),je=atob(de),Pt=new Uint8Array(je.length);for(let Kt=0;Kt<je.length;++Kt)Pt[Kt]=je.charCodeAt(Kt);return Pt}const fs="fcm_token_details_db",Gs="fcm_token_object_Store";function ki(U){return so.apply(this,arguments)}function so(){return so=(0,pe.Z)(function*(U){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Kt=>Kt.name).includes(fs))return null;let Y=null;return(yield(0,Ze.X3)(fs,5,{upgrade:(je=(0,pe.Z)(function*(Pt,Kt,Vn,Hr){var Zr;if(Kt<2||!Pt.objectStoreNames.contains(Gs))return;const zr=Hr.objectStore(Gs),Wi=yield zr.index("fcmSenderId").get(U);if(yield zr.clear(),Wi)if(2===Kt){const Ei=Wi;if(!Ei.auth||!Ei.p256dh||!Ei.endpoint)return;Y={token:Ei.fcmToken,createTime:null!==(Zr=Ei.createTime)&&void 0!==Zr?Zr:Date.now(),subscriptionOptions:{auth:Ei.auth,p256dh:Ei.p256dh,endpoint:Ei.endpoint,swScope:Ei.swScope,vapidKey:"string"==typeof Ei.vapidKey?Ei.vapidKey:Fs(Ei.vapidKey)}}}else if(3===Kt){const Ei=Wi;Y={token:Ei.fcmToken,createTime:Ei.createTime,subscriptionOptions:{auth:Fs(Ei.auth),p256dh:Fs(Ei.p256dh),endpoint:Ei.endpoint,swScope:Ei.swScope,vapidKey:Fs(Ei.vapidKey)}}}else if(4===Kt){const Ei=Wi;Y={token:Ei.fcmToken,createTime:Ei.createTime,subscriptionOptions:{auth:Fs(Ei.auth),p256dh:Fs(Ei.p256dh),endpoint:Ei.endpoint,swScope:Ei.swScope,vapidKey:Fs(Ei.vapidKey)}}}}),function(Kt,Vn,Hr,Zr){return je.apply(this,arguments)})})).close(),yield(0,Ze.Lj)(fs),yield(0,Ze.Lj)("fcm_vapid_details_db"),yield(0,Ze.Lj)("undefined"),yo(Y)?Y:null;var je}),so.apply(this,arguments)}function yo(U){if(!U||!U.subscriptionOptions)return!1;const{subscriptionOptions:Y}=U;return"number"==typeof U.createTime&&U.createTime>0&&"string"==typeof U.token&&U.token.length>0&&"string"==typeof Y.auth&&Y.auth.length>0&&"string"==typeof Y.p256dh&&Y.p256dh.length>0&&"string"==typeof Y.endpoint&&Y.endpoint.length>0&&"string"==typeof Y.swScope&&Y.swScope.length>0&&"string"==typeof Y.vapidKey&&Y.vapidKey.length>0}const Ls="firebase-messaging-store";let Bi=null;function bi(){return Bi||(Bi=(0,Ze.X3)("firebase-messaging-database",1,{upgrade:(U,Y)=>{0===Y&&U.createObjectStore(Ls)}})),Bi}function B(U){return he.apply(this,arguments)}function he(){return(he=(0,pe.Z)(function*(U){const Y=wn(U),je=yield(yield bi()).transaction(Ls).objectStore(Ls).get(Y);if(je)return je;{const Pt=yield ki(U.appConfig.senderId);if(Pt)return yield W(U,Pt),Pt}})).apply(this,arguments)}function W(U,Y){return ve.apply(this,arguments)}function ve(){return(ve=(0,pe.Z)(function*(U,Y){const de=wn(U),Pt=(yield bi()).transaction(Ls,"readwrite");return yield Pt.objectStore(Ls).put(Y,de),yield Pt.done,Y})).apply(this,arguments)}function qe(U){return sn.apply(this,arguments)}function sn(){return(sn=(0,pe.Z)(function*(U){const Y=wn(U),je=(yield bi()).transaction(Ls,"readwrite");yield je.objectStore(Ls).delete(Y),yield je.done})).apply(this,arguments)}function wn({appConfig:U}){return U.appId}const jr=new We.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ei(U,Y){return ni.apply(this,arguments)}function ni(){return(ni=(0,pe.Z)(function*(U,Y){const de=yield ns(U),je=Zs(Y),Pt={method:"POST",headers:de,body:JSON.stringify(je)};let Kt;try{Kt=yield(yield fetch(oo(U.appConfig),Pt)).json()}catch(Vn){throw jr.create("token-subscribe-failed",{errorInfo:null==Vn?void 0:Vn.toString()})}if(Kt.error)throw jr.create("token-subscribe-failed",{errorInfo:Kt.error.message});if(!Kt.token)throw jr.create("token-subscribe-no-token");return Kt.token})).apply(this,arguments)}function fi(U,Y){return es.apply(this,arguments)}function es(){return(es=(0,pe.Z)(function*(U,Y){const de=yield ns(U),je=Zs(Y.subscriptionOptions),Pt={method:"PATCH",headers:de,body:JSON.stringify(je)};let Kt;try{Kt=yield(yield fetch(`${oo(U.appConfig)}/${Y.token}`,Pt)).json()}catch(Vn){throw jr.create("token-update-failed",{errorInfo:null==Vn?void 0:Vn.toString()})}if(Kt.error)throw jr.create("token-update-failed",{errorInfo:Kt.error.message});if(!Kt.token)throw jr.create("token-update-no-token");return Kt.token})).apply(this,arguments)}function Di(U,Y){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,pe.Z)(function*(U,Y){const je={method:"DELETE",headers:yield ns(U)};try{const Kt=yield(yield fetch(`${oo(U.appConfig)}/${Y}`,je)).json();if(Kt.error)throw jr.create("token-unsubscribe-failed",{errorInfo:Kt.error.message})}catch(Pt){throw jr.create("token-unsubscribe-failed",{errorInfo:null==Pt?void 0:Pt.toString()})}})).apply(this,arguments)}function oo({projectId:U}){return`https://fcmregistrations.googleapis.com/v1/projects/${U}/registrations`}function ns(U){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,pe.Z)(function*({appConfig:U,installations:Y}){const de=yield Y.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U.apiKey,"x-goog-firebase-installations-auth":`FIS ${de}`})})).apply(this,arguments)}function Zs({p256dh:U,auth:Y,endpoint:de,vapidKey:je}){const Pt={web:{endpoint:de,auth:Y,p256dh:U}};return je!==fo&&(Pt.web.applicationPubKey=je),Pt}const ko=6048e5;function ys(U){return _o.apply(this,arguments)}function _o(){return(_o=(0,pe.Z)(function*(U){const Y=yield ee(U.swRegistration,U.vapidKey),de={vapidKey:U.vapidKey,swScope:U.swRegistration.scope,endpoint:Y.endpoint,auth:Fs(Y.getKey("auth")),p256dh:Fs(Y.getKey("p256dh"))},je=yield B(U.firebaseDependencies);if(je){if(Ce(je.subscriptionOptions,de))return Date.now()>=je.createTime+ko?V(U,{token:je.token,createTime:Date.now(),subscriptionOptions:de}):je.token;try{yield Di(U.firebaseDependencies,je.token)}catch(Pt){console.warn(Pt)}return Ye(U.firebaseDependencies,de)}return Ye(U.firebaseDependencies,de)})).apply(this,arguments)}function Q(U){return G.apply(this,arguments)}function G(){return(G=(0,pe.Z)(function*(U){const Y=yield B(U.firebaseDependencies);Y&&(yield Di(U.firebaseDependencies,Y.token),yield qe(U.firebaseDependencies));const de=yield U.swRegistration.pushManager.getSubscription();return!de||de.unsubscribe()})).apply(this,arguments)}function V(U,Y){return ye.apply(this,arguments)}function ye(){return(ye=(0,pe.Z)(function*(U,Y){try{const de=yield fi(U.firebaseDependencies,Y),je=Object.assign(Object.assign({},Y),{token:de,createTime:Date.now()});return yield W(U.firebaseDependencies,je),de}catch(de){throw yield Q(U),de}})).apply(this,arguments)}function Ye(U,Y){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,pe.Z)(function*(U,Y){const je={token:yield ei(U,Y),createTime:Date.now(),subscriptionOptions:Y};return yield W(U,je),je.token})).apply(this,arguments)}function ee(U,Y){return K.apply(this,arguments)}function K(){return(K=(0,pe.Z)(function*(U,Y){return(yield U.pushManager.getSubscription())||U.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oo(Y)})})).apply(this,arguments)}function Ce(U,Y){return Y.vapidKey===U.vapidKey&&Y.endpoint===U.endpoint&&Y.auth===U.auth&&Y.p256dh===U.p256dh}function Ve(U){const Y={from:U.from,collapseKey:U.collapse_key,messageId:U.fcmMessageId};return function it(U,Y){if(!Y.notification)return;U.notification={};const de=Y.notification.title;de&&(U.notification.title=de);const je=Y.notification.body;je&&(U.notification.body=je);const Pt=Y.notification.image;Pt&&(U.notification.image=Pt);const Kt=Y.notification.icon;Kt&&(U.notification.icon=Kt)}(Y,U),function qt(U,Y){!Y.data||(U.data=Y.data)}(Y,U),function _n(U,Y){var de,je,Pt,Kt,Vn;if(!Y.fcmOptions&&!(null===(de=Y.notification)||void 0===de?void 0:de.click_action))return;U.fcmOptions={};const Hr=null!==(Pt=null===(je=Y.fcmOptions)||void 0===je?void 0:je.link)&&void 0!==Pt?Pt:null===(Kt=Y.notification)||void 0===Kt?void 0:Kt.click_action;Hr&&(U.fcmOptions.link=Hr);const Zr=null===(Vn=Y.fcmOptions)||void 0===Vn?void 0:Vn.analytics_label;Zr&&(U.fcmOptions.analyticsLabel=Zr)}(Y,U),Y}function br(U){return"object"==typeof U&&!!U&&io in U}function Xn(U,Y){const de=[];for(let je=0;je<U.length;je++)de.push(U.charAt(je)),je<Y.length&&de.push(Y.charAt(je));return de.join("")}function _i(U){return jr.create("missing-app-config-values",{valueName:U})}Xn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yi{constructor(Y,de,je){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Pt=function ri(U){if(!U||!U.options)throw _i("App Configuration Object");if(!U.name)throw _i("App Name");const Y=["projectId","apiKey","appId","messagingSenderId"],{options:de}=U;for(const je of Y)if(!de[je])throw _i(je);return{appName:U.name,projectId:de.projectId,apiKey:de.apiKey,appId:de.appId,senderId:de.messagingSenderId}}(Y);this.firebaseDependencies={app:Y,appConfig:Pt,installations:de,analyticsProvider:je}}_delete(){return Promise.resolve()}}function $i(U){return ts.apply(this,arguments)}function ts(){return(ts=(0,pe.Z)(function*(U){try{U.swRegistration=yield navigator.serviceWorker.register(ho,{scope:Ri}),U.swRegistration.update().catch(()=>{})}catch(Y){throw jr.create("failed-service-worker-registration",{browserErrorMessage:null==Y?void 0:Y.message})}})).apply(this,arguments)}function l(U,Y){return A.apply(this,arguments)}function A(){return(A=(0,pe.Z)(function*(U,Y){if(!Y&&!U.swRegistration&&(yield $i(U)),Y||!U.swRegistration){if(!(Y instanceof ServiceWorkerRegistration))throw jr.create("invalid-sw-registration");U.swRegistration=Y}})).apply(this,arguments)}function I(U,Y){return P.apply(this,arguments)}function P(){return(P=(0,pe.Z)(function*(U,Y){Y?U.vapidKey=Y:U.vapidKey||(U.vapidKey=fo)})).apply(this,arguments)}function J(){return(J=(0,pe.Z)(function*(U,Y){if(!navigator)throw jr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jr.create("permission-blocked");return yield I(U,null==Y?void 0:Y.vapidKey),yield l(U,null==Y?void 0:Y.serviceWorkerRegistration),ys(U)})).apply(this,arguments)}function me(U,Y,de){return be.apply(this,arguments)}function be(){return(be=(0,pe.Z)(function*(U,Y,de){const je=oe(Y);(yield U.firebaseDependencies.analyticsProvider.get()).logEvent(je,{message_id:de[io],message_name:de[js],message_time:de[Vo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function oe(U){switch(U){case Is.NOTIFICATION_CLICKED:return"notification_open";case Is.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ce(){return(ce=(0,pe.Z)(function*(U,Y){const de=Y.data;if(!de.isFirebaseMessaging)return;U.onMessageHandler&&de.messageType===Is.PUSH_RECEIVED&&("function"==typeof U.onMessageHandler?U.onMessageHandler(Ve(de)):U.onMessageHandler.next(Ve(de)));const je=de.data;br(je)&&"1"===je[Xs]&&(yield me(U,de.messageType,je))})).apply(this,arguments)}const le="@firebase/messaging",ze=U=>{const Y=new yi(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),U.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",de=>function ge(U,Y){return ce.apply(this,arguments)}(Y,de)),Y},nt=U=>{const Y=U.getProvider("messaging").getImmediate();return{getToken:je=>function z(U,Y){return J.apply(this,arguments)}(Y,je)}};function Fe(){return _t.apply(this,arguments)}function _t(){return(_t=(0,pe.Z)(function*(){try{yield(0,We.eu)()}catch(U){return!1}return"undefined"!=typeof window&&(0,We.hl)()&&(0,We.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function De(){(0,ae._registerComponent)(new Xe.wA("messaging",ze,"PUBLIC")),(0,ae._registerComponent)(new Xe.wA("messaging-internal",nt,"PRIVATE")),(0,ae.registerVersion)(le,"0.12.0"),(0,ae.registerVersion)(le,"0.12.0","esm2017")}();const Fn="analytics",en="firebase_id",or="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ir="https://www.googletagmanager.com/gtag/js",zt=new pt.Yd("@firebase/analytics");function ur(U){return Promise.all(U.map(Y=>Y.catch(de=>de)))}function Jn(U,Y){const de=document.createElement("script");de.src=`${ir}?l=${U}&id=${Y}`,de.async=!0,document.head.appendChild(de)}function Ai(U,Y,de,je,Pt,Kt){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,pe.Z)(function*(U,Y,de,je,Pt,Kt){const Vn=je[Pt];try{if(Vn)yield Y[Vn];else{const Zr=(yield ur(de)).find(zr=>zr.measurementId===Pt);Zr&&(yield Y[Zr.appId])}}catch(Hr){zt.error(Hr)}U("config",Pt,Kt)})).apply(this,arguments)}function Z(U,Y,de,je,Pt){return C.apply(this,arguments)}function C(){return(C=(0,pe.Z)(function*(U,Y,de,je,Pt){try{let Kt=[];if(Pt&&Pt.send_to){let Vn=Pt.send_to;Array.isArray(Vn)||(Vn=[Vn]);const Hr=yield ur(de);for(const Zr of Vn){const zr=Hr.find(Ei=>Ei.measurementId===Zr),Wi=zr&&Y[zr.appId];if(!Wi){Kt=[];break}Kt.push(Wi)}}0===Kt.length&&(Kt=Object.values(Y)),yield Promise.all(Kt),U("event",je,Pt||{})}catch(Kt){zt.error(Kt)}})).apply(this,arguments)}function ue(U){const Y=window.document.getElementsByTagName("script");for(const de of Object.values(Y))if(de.src&&de.src.includes(ir)&&de.src.includes(U))return de;return null}const Ke=new We.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ar=new class Qt{constructor(Y={},de=1e3){this.throttleMetadata=Y,this.intervalMillis=de}getThrottleMetadata(Y){return this.throttleMetadata[Y]}setThrottleMetadata(Y,de){this.throttleMetadata[Y]=de}deleteThrottleMetadata(Y){delete this.throttleMetadata[Y]}};function Nr(U){return new Headers({Accept:"application/json","x-goog-api-key":U})}function Jt(U){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,pe.Z)(function*(U){var Y;const{appId:de,apiKey:je}=U,Pt={method:"GET",headers:Nr(je)},Kt=or.replace("{app-id}",de),Vn=yield fetch(Kt,Pt);if(200!==Vn.status&&304!==Vn.status){let Hr="";try{const Zr=yield Vn.json();(null===(Y=Zr.error)||void 0===Y?void 0:Y.message)&&(Hr=Zr.error.message)}catch(Zr){}throw Ke.create("config-fetch-failed",{httpStatus:Vn.status,responseMessage:Hr})}return Vn.json()})).apply(this,arguments)}function hr(U){return li.apply(this,arguments)}function li(){return(li=(0,pe.Z)(function*(U,Y=ar,de){const{appId:je,apiKey:Pt,measurementId:Kt}=U.options;if(!je)throw Ke.create("no-app-id");if(!Pt){if(Kt)return{measurementId:Kt,appId:je};throw Ke.create("no-api-key")}const Vn=Y.getThrottleMetadata(je)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Hr=new $t;return setTimeout((0,pe.Z)(function*(){Hr.abort()}),void 0!==de?de:6e4),jn({appId:je,apiKey:Pt,measurementId:Kt},Vn,Hr,Y)})).apply(this,arguments)}function jn(U,Y,de){return sr.apply(this,arguments)}function sr(){return(sr=(0,pe.Z)(function*(U,{throttleEndTimeMillis:Y,backoffCount:de},je,Pt=ar){var Kt;const{appId:Vn,measurementId:Hr}=U;try{yield ao(je,Y)}catch(Zr){if(Hr)return zt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Hr} provided in the "measurementId" field in the local Firebase config. [${null==Zr?void 0:Zr.message}]`),{appId:Vn,measurementId:Hr};throw Zr}try{const Zr=yield Jt(U);return Pt.deleteThrottleMetadata(Vn),Zr}catch(Zr){const zr=Zr;if(!Kn(zr)){if(Pt.deleteThrottleMetadata(Vn),Hr)return zt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Hr} provided in the "measurementId" field in the local Firebase config. [${null==zr?void 0:zr.message}]`),{appId:Vn,measurementId:Hr};throw Zr}const Wi=503===Number(null===(Kt=null==zr?void 0:zr.customData)||void 0===Kt?void 0:Kt.httpStatus)?(0,We.$s)(de,Pt.intervalMillis,30):(0,We.$s)(de,Pt.intervalMillis),Ei={throttleEndTimeMillis:Date.now()+Wi,backoffCount:de+1};return Pt.setThrottleMetadata(Vn,Ei),zt.debug(`Calling attemptFetch again in ${Wi} millis`),jn(U,Ei,je,Pt)}})).apply(this,arguments)}function ao(U,Y){return new Promise((de,je)=>{const Pt=Math.max(Y-Date.now(),0),Kt=setTimeout(de,Pt);U.addEventListener(()=>{clearTimeout(Kt),je(Ke.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}function Kn(U){if(!(U instanceof We.ZR&&U.customData))return!1;const Y=Number(U.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}class $t{constructor(){this.listeners=[]}addEventListener(Y){this.listeners.push(Y)}abort(){this.listeners.forEach(Y=>Y())}}let An,Ne;function Ps(){return(Ps=(0,pe.Z)(function*(U,Y,de,je,Pt){if(Pt&&Pt.global)U("event",de,je);else{const Kt=yield Y;U("event",de,Object.assign(Object.assign({},je),{send_to:Kt}))}})).apply(this,arguments)}function Mt(U){Ne=U}function jt(U){An=U}function pr(){return cr.apply(this,arguments)}function cr(){return(cr=(0,pe.Z)(function*(){if(!(0,We.hl)())return zt.warn(Ke.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,We.eu)()}catch(U){return zt.warn(Ke.create("indexeddb-unavailable",{errorInfo:null==U?void 0:U.toString()}).message),!1}return!0})).apply(this,arguments)}function Bn(){return(Bn=(0,pe.Z)(function*(U,Y,de,je,Pt,Kt,Vn){var Hr;const Zr=hr(U);Zr.then(ii=>{de[ii.measurementId]=ii.appId,U.options.measurementId&&ii.measurementId!==U.options.measurementId&&zt.warn(`The measurement ID in the local Firebase config (${U.options.measurementId}) does not match the measurement ID fetched from the server (${ii.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ii=>zt.error(ii)),Y.push(Zr);const zr=pr().then(ii=>{if(ii)return je.getId()}),[Wi,Ei]=yield Promise.all([Zr,zr]);ue(Kt)||Jn(Kt,Wi.measurementId),Ne&&(Pt("consent","default",Ne),Mt(void 0)),Pt("js",new Date);const Ho=null!==(Hr=null==Vn?void 0:Vn.config)&&void 0!==Hr?Hr:{};return Ho.origin="firebase",Ho.update=!0,null!=Ei&&(Ho[en]=Ei),Pt("config",Wi.measurementId,Ho),An&&(Pt("set",An),jt(void 0)),Wi.measurementId})).apply(this,arguments)}class Ys{constructor(Y){this.app=Y}_delete(){return delete vr[this.app.options.appId],Promise.resolve()}}let vr={},ua=[];const Ss={};let Ao,Vs,Un="dataLayer",Ea=!1;function Ll(U,Y,de){!function Ya(){const U=[];if((0,We.ru)()&&U.push("This is a browser extension environment."),(0,We.zI)()||U.push("Cookies are not available."),U.length>0){const Y=U.map((je,Pt)=>`(${Pt+1}) ${je}`).join(" "),de=Ke.create("invalid-analytics-context",{errorInfo:Y});zt.warn(de.message)}}();const je=U.options.appId;if(!je)throw Ke.create("no-app-id");if(!U.options.apiKey){if(!U.options.measurementId)throw Ke.create("no-api-key");zt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${U.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=vr[je])throw Ke.create("already-exists",{id:je});if(!Ea){!function vi(U){let Y=[];Array.isArray(window[U])?Y=window[U]:window[U]=Y}(Un);const{wrappedGtag:Kt,gtagCore:Vn}=function k(U,Y,de,je,Pt){let Kt=function(...Vn){window[je].push(arguments)};return window[Pt]&&"function"==typeof window[Pt]&&(Kt=window[Pt]),window[Pt]=function T(U,Y,de,je){function Kt(){return(Kt=(0,pe.Z)(function*(Vn,Hr,Zr){try{"event"===Vn?yield Z(U,Y,de,Hr,Zr):"config"===Vn?yield Ai(U,Y,de,je,Hr,Zr):"consent"===Vn?U("consent","update",Zr):U("set",Hr)}catch(zr){zt.error(zr)}})).apply(this,arguments)}return function Pt(Vn,Hr,Zr){return Kt.apply(this,arguments)}}(Kt,U,Y,de),{gtagCore:Kt,wrappedGtag:window[Pt]}}(vr,ua,Ss,Un,"gtag");Vs=Kt,Ao=Vn,Ea=!0}return vr[je]=function Or(U,Y,de,je,Pt,Kt,Vn){return Bn.apply(this,arguments)}(U,ua,Ss,Y,Ao,Un,de),new Ys(U)}function ra(){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,pe.Z)(function*(){if((0,We.ru)()||!(0,We.zI)()||!(0,We.hl)())return!1;try{return yield(0,We.eu)()}catch(U){return!1}})).apply(this,arguments)}const wo="@firebase/analytics";!function sa(){(0,ae._registerComponent)(new Xe.wA(Fn,(Y,{options:de})=>Ll(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),de),"PUBLIC")),(0,ae._registerComponent)(new Xe.wA("analytics-internal",function U(Y){try{const de=Y.getProvider(Fn).getImmediate();return{logEvent:(je,Pt,Kt)=>function Qa(U,Y,de,je){U=(0,We.m9)(U),function ps(U,Y,de,je,Pt){return Ps.apply(this,arguments)}(Vs,vr[U.app.options.appId],Y,de,je).catch(Pt=>zt.error(Pt))}(de,je,Pt,Kt)}}catch(de){throw Ke.create("interop-component-reg-failed",{reason:de})}},"PRIVATE")),(0,ae.registerVersion)(wo,"0.9.0"),(0,ae.registerVersion)(wo,"0.9.0","esm2017")}();var Gu=j(4408),xo=j(7565);const Jl=new class Xo extends xo.v{}(class oa extends Gu.o{constructor(Y,de){super(Y,de),this.scheduler=Y,this.work=de}schedule(Y,de=0){return de>0?super.schedule(Y,de):(this.delay=de,this.state=Y,this.scheduler.flush(this),this)}execute(Y,de){return de>0||this.closed?super.execute(Y,de):this._execute(Y,de)}requestAsyncId(Y,de,je=0){return null!=je&&je>0||null==je&&this.delay>0?super.requestAsyncId(Y,de,je):(Y.flush(this),0)}});var vo=j(4986),cl=j(8505),Jo=j(5363),Il=j(9468);const Ua=new g.GfV("7.5.0"),_u="__angularfire_symbol__analyticsIsSupportedValue",ca="__angularfire_symbol__analyticsIsSupported",Eo="__angularfire_symbol__remoteConfigIsSupportedValue",Xa="__angularfire_symbol__remoteConfigIsSupported",Ba="__angularfire_symbol__messagingIsSupportedValue",uo="__angularfire_symbol__messagingIsSupported";function Vl(U,Y,de){if(Y){if(1===Y.length)return Y[0];const Kt=Y.filter(Vn=>Vn.app===de);if(1===Kt.length)return Kt[0]}return de.container.getProvider(U).getImmediate({optional:!0})}globalThis[ca]||(globalThis[ca]=ra().then(U=>globalThis[_u]=U).catch(()=>globalThis[_u]=!1)),globalThis[uo]||(globalThis[uo]=Fe().then(U=>globalThis[Ba]=U).catch(()=>globalThis[Ba]=!1)),globalThis[Xa]||(globalThis[Xa]=Qs().then(U=>globalThis[Eo]=U).catch(()=>globalThis[Eo]=!1));const el=(U,Y)=>{const de=Y?[Y]:(0,F.C6)(),je=[];return de.forEach(Pt=>{Pt.container.getProvider(U).instances.forEach(Vn=>{je.includes(Vn)||je.push(Vn)})}),je};function wa(){}class ea{constructor(Y,de=Jl){this.zone=Y,this.delegate=de}now(){return this.delegate.now()}schedule(Y,de,je){const Pt=this.zone;return this.delegate.schedule(function(Vn){Pt.runGuarded(()=>{Y.apply(this,[Vn])})},de,je)}}class dl{constructor(Y){this.zone=Y,this.task=null}call(Y,de){const je=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wa,{},wa,wa)),de.pipe((0,cl.b)({next:je,complete:je,error:je})).subscribe(Y).add(je)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let tl=(()=>{class U{constructor(de){this.ngZone=de,this.outsideAngular=de.runOutsideAngular(()=>new ea(Zone.current)),this.insideAngular=de.run(()=>new ea(Zone.current,vo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return U.\u0275fac=function(de){return new(de||U)(g.LFG(g.R0b))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();function co(){const U=globalThis.\u0275AngularFireScheduler;if(!U)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return U}function zu(U){return U.pipe((0,Jo.Q)(co().outsideAngular))}function Sl(U){return co(),function Ia(U){return function(de){return(de=de.lift(new dl(U.ngZone))).pipe((0,Il.R)(U.outsideAngular),(0,Jo.Q)(U.insideAngular))}}(co())(U)}},2090:(Wn,At,j)=>{j.d(At,{$s:()=>Yn,BH:()=>rr,DV:()=>Xr,G6:()=>St,GJ:()=>tr,L:()=>Ze,LL:()=>Vt,P0:()=>on,Pz:()=>nr,Sg:()=>yn,UG:()=>un,UI:()=>Qn,US:()=>Xe,Wl:()=>ut,Yr:()=>He,ZB:()=>Pe,ZR:()=>mr,aH:()=>Dn,b$:()=>Zt,cI:()=>Dt,dS:()=>ui,eu:()=>Ht,g5:()=>pe,gK:()=>Gr,gQ:()=>rt,h$:()=>pt,hl:()=>an,hu:()=>F,jU:()=>In,m9:()=>$r,ne:()=>ct,p$:()=>Oe,pd:()=>dn,r3:()=>lr,ru:()=>Ot,tV:()=>ht,uI:()=>vt,ug:()=>On,vZ:()=>Wr,w1:()=>fn,w9:()=>Gn,xO:()=>rs,xb:()=>oi,z$:()=>Cn,zI:()=>ke,zd:()=>Ji});const F=function(Je,Ue){if(!Je)throw pe(Ue)},pe=function(Je){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Je)},ae=function(Je){const Ue=[];let ft=0;for(let Xt=0;Xt<Je.length;Xt++){let Lt=Je.charCodeAt(Xt);Lt<128?Ue[ft++]=Lt:Lt<2048?(Ue[ft++]=Lt>>6|192,Ue[ft++]=63&Lt|128):55296==(64512&Lt)&&Xt+1<Je.length&&56320==(64512&Je.charCodeAt(Xt+1))?(Lt=65536+((1023&Lt)<<10)+(1023&Je.charCodeAt(++Xt)),Ue[ft++]=Lt>>18|240,Ue[ft++]=Lt>>12&63|128,Ue[ft++]=Lt>>6&63|128,Ue[ft++]=63&Lt|128):(Ue[ft++]=Lt>>12|224,Ue[ft++]=Lt>>6&63|128,Ue[ft++]=63&Lt|128)}return Ue},Xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Je,Ue){if(!Array.isArray(Je))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ft=Ue?this.byteToCharMapWebSafe_:this.byteToCharMap_,Xt=[];for(let Lt=0;Lt<Je.length;Lt+=3){const Ge=Je[Lt],Re=Lt+1<Je.length,Ae=Re?Je[Lt+1]:0,gt=Lt+2<Je.length,cn=gt?Je[Lt+2]:0;let ci=(15&Ae)<<2|cn>>6,Qi=63&cn;gt||(Qi=64,Re||(ci=64)),Xt.push(ft[Ge>>2],ft[(3&Ge)<<4|Ae>>4],ft[ci],ft[Qi])}return Xt.join("")},encodeString(Je,Ue){return this.HAS_NATIVE_SUPPORT&&!Ue?btoa(Je):this.encodeByteArray(ae(Je),Ue)},decodeString(Je,Ue){return this.HAS_NATIVE_SUPPORT&&!Ue?atob(Je):function(Je){const Ue=[];let ft=0,Xt=0;for(;ft<Je.length;){const Lt=Je[ft++];if(Lt<128)Ue[Xt++]=String.fromCharCode(Lt);else if(Lt>191&&Lt<224){const Ge=Je[ft++];Ue[Xt++]=String.fromCharCode((31&Lt)<<6|63&Ge)}else if(Lt>239&&Lt<365){const gt=((7&Lt)<<18|(63&Je[ft++])<<12|(63&Je[ft++])<<6|63&Je[ft++])-65536;Ue[Xt++]=String.fromCharCode(55296+(gt>>10)),Ue[Xt++]=String.fromCharCode(56320+(1023&gt))}else{const Ge=Je[ft++],Re=Je[ft++];Ue[Xt++]=String.fromCharCode((15&Lt)<<12|(63&Ge)<<6|63&Re)}}return Ue.join("")}(this.decodeStringToByteArray(Je,Ue))},decodeStringToByteArray(Je,Ue){this.init_();const ft=Ue?this.charToByteMapWebSafe_:this.charToByteMap_,Xt=[];for(let Lt=0;Lt<Je.length;){const Ge=ft[Je.charAt(Lt++)],Ae=Lt<Je.length?ft[Je.charAt(Lt)]:0;++Lt;const cn=Lt<Je.length?ft[Je.charAt(Lt)]:64;++Lt;const qn=Lt<Je.length?ft[Je.charAt(Lt)]:64;if(++Lt,null==Ge||null==Ae||null==cn||null==qn)throw Error();Xt.push(Ge<<2|Ae>>4),64!==cn&&(Xt.push(Ae<<4&240|cn>>2),64!==qn&&Xt.push(cn<<6&192|qn))}return Xt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Je=0;Je<this.ENCODED_VALS.length;Je++)this.byteToCharMap_[Je]=this.ENCODED_VALS.charAt(Je),this.charToByteMap_[this.byteToCharMap_[Je]]=Je,this.byteToCharMapWebSafe_[Je]=this.ENCODED_VALS_WEBSAFE.charAt(Je),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Je]]=Je,Je>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Je)]=Je,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Je)]=Je)}}},pt=function(Je){const Ue=ae(Je);return Xe.encodeByteArray(Ue,!0)},Ze=function(Je){return pt(Je).replace(/\./g,"")},ht=function(Je){try{return Xe.decodeString(Je,!0)}catch(Ue){console.error("base64Decode failed: ",Ue)}return null};function Oe(Je){return Pe(void 0,Je)}function Pe(Je,Ue){if(!(Ue instanceof Object))return Ue;switch(Ue.constructor){case Date:return new Date(Ue.getTime());case Object:void 0===Je&&(Je={});break;case Array:Je=[];break;default:return Ue}for(const ft in Ue)!Ue.hasOwnProperty(ft)||!Et(ft)||(Je[ft]=Pe(Je[ft],Ue[ft]));return Je}function Et(Je){return"__proto__"!==Je}function Cn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function un(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Je){return!1}}function In(){return"object"==typeof self&&self.self===self}function Ot(){const Je="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Je&&void 0!==Je.id}function Zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function fn(){const Je=Cn();return Je.indexOf("MSIE ")>=0||Je.indexOf("Trident/")>=0}function He(){return!1}function St(){return!un()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function an(){try{return"object"==typeof indexedDB}catch(Je){return!1}}function Ht(){return new Promise((Je,Ue)=>{try{let ft=!0;const Xt="validate-browser-context-for-indexeddb-analytics-module",Lt=self.indexedDB.open(Xt);Lt.onsuccess=()=>{Lt.result.close(),ft||self.indexedDB.deleteDatabase(Xt),Je(!0)},Lt.onupgradeneeded=()=>{ft=!1},Lt.onerror=()=>{var Ge;Ue((null===(Ge=Lt.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(ft){Ue(ft)}})}function ke(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const wt=()=>{try{return function Ut(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Je=process.env.__FIREBASE_DEFAULTS__;return Je?JSON.parse(Je):void 0})()||(()=>{if("undefined"==typeof document)return;let Je;try{Je=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ft){return}const Ue=Je&&ht(Je[1]);return Ue&&JSON.parse(Ue)})()}catch(Je){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Je}`)}},on=Je=>{const Ue=(Je=>{var Ue,ft;return null===(ft=null===(Ue=wt())||void 0===Ue?void 0:Ue.emulatorHosts)||void 0===ft?void 0:ft[Je]})(Je);if(!Ue)return;const ft=Ue.lastIndexOf(":");if(ft<=0||ft+1===Ue.length)throw new Error(`Invalid host ${Ue} with no separate hostname and port!`);const Xt=parseInt(Ue.substring(ft+1),10);return"["===Ue[0]?[Ue.substring(1,ft-1),Xt]:[Ue.substring(0,ft),Xt]},Dn=()=>{var Je;return null===(Je=wt())||void 0===Je?void 0:Je.config},nr=Je=>{var Ue;return null===(Ue=wt())||void 0===Ue?void 0:Ue[`_${Je}`]};class rr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ue,ft)=>{this.resolve=Ue,this.reject=ft})}wrapCallback(Ue){return(ft,Xt)=>{ft?this.reject(ft):this.resolve(Xt),"function"==typeof Ue&&(this.promise.catch(()=>{}),1===Ue.length?Ue(ft):Ue(ft,Xt))}}}function yn(Je,Ue){if(Je.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Xt=Ue||"demo-project",Lt=Je.iat||0,Ge=Je.sub||Je.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${Xt}`,aud:Xt,iat:Lt,exp:Lt+3600,auth_time:Lt,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},Je);return[Ze(JSON.stringify({alg:"none",type:"JWT"})),Ze(JSON.stringify(Re)),""].join(".")}class mr extends Error{constructor(Ue,ft,Xt){super(ft),this.code=Ue,this.customData=Xt,this.name="FirebaseError",Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vt.prototype.create)}}class Vt{constructor(Ue,ft,Xt){this.service=Ue,this.serviceName=ft,this.errors=Xt}create(Ue,...ft){const Xt=ft[0]||{},Lt=`${this.service}/${Ue}`,Ge=this.errors[Ue],Re=Ge?function kt(Je,Ue){return Je.replace(st,(ft,Xt)=>{const Lt=Ue[Xt];return null!=Lt?String(Lt):`<${Xt}?>`})}(Ge,Xt):"Error";return new mr(Lt,`${this.serviceName}: ${Re} (${Lt}).`,Xt)}}const st=/\{\$([^}]+)}/g;function Dt(Je){return JSON.parse(Je)}function ut(Je){return JSON.stringify(Je)}const Yt=function(Je){let Ue={},ft={},Xt={},Lt="";try{const Ge=Je.split(".");Ue=Dt(ht(Ge[0])||""),ft=Dt(ht(Ge[1])||""),Lt=Ge[2],Xt=ft.d||{},delete ft.d}catch(Ge){}return{header:Ue,claims:ft,data:Xt,signature:Lt}},Gn=function(Je){const ft=Yt(Je).claims;return!!ft&&"object"==typeof ft&&ft.hasOwnProperty("iat")},tr=function(Je){const Ue=Yt(Je).claims;return"object"==typeof Ue&&!0===Ue.admin};function lr(Je,Ue){return Object.prototype.hasOwnProperty.call(Je,Ue)}function Xr(Je,Ue){if(Object.prototype.hasOwnProperty.call(Je,Ue))return Je[Ue]}function oi(Je){for(const Ue in Je)if(Object.prototype.hasOwnProperty.call(Je,Ue))return!1;return!0}function Qn(Je,Ue,ft){const Xt={};for(const Lt in Je)Object.prototype.hasOwnProperty.call(Je,Lt)&&(Xt[Lt]=Ue.call(ft,Je[Lt],Lt,Je));return Xt}function Wr(Je,Ue){if(Je===Ue)return!0;const ft=Object.keys(Je),Xt=Object.keys(Ue);for(const Lt of ft){if(!Xt.includes(Lt))return!1;const Ge=Je[Lt],Re=Ue[Lt];if(xr(Ge)&&xr(Re)){if(!Wr(Ge,Re))return!1}else if(Ge!==Re)return!1}for(const Lt of Xt)if(!ft.includes(Lt))return!1;return!0}function xr(Je){return null!==Je&&"object"==typeof Je}function rs(Je){const Ue=[];for(const[ft,Xt]of Object.entries(Je))Array.isArray(Xt)?Xt.forEach(Lt=>{Ue.push(encodeURIComponent(ft)+"="+encodeURIComponent(Lt))}):Ue.push(encodeURIComponent(ft)+"="+encodeURIComponent(Xt));return Ue.length?"&"+Ue.join("&"):""}function Ji(Je){const Ue={};return Je.replace(/^\?/,"").split("&").forEach(Xt=>{if(Xt){const[Lt,Ge]=Xt.split("=");Ue[decodeURIComponent(Lt)]=decodeURIComponent(Ge)}}),Ue}function dn(Je){const Ue=Je.indexOf("?");if(!Ue)return"";const ft=Je.indexOf("#",Ue);return Je.substring(Ue,ft>0?ft:void 0)}class rt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ue=1;Ue<this.blockSize;++Ue)this.pad_[Ue]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ue,ft){ft||(ft=0);const Xt=this.W_;if("string"==typeof Ue)for(let qn=0;qn<16;qn++)Xt[qn]=Ue.charCodeAt(ft)<<24|Ue.charCodeAt(ft+1)<<16|Ue.charCodeAt(ft+2)<<8|Ue.charCodeAt(ft+3),ft+=4;else for(let qn=0;qn<16;qn++)Xt[qn]=Ue[ft]<<24|Ue[ft+1]<<16|Ue[ft+2]<<8|Ue[ft+3],ft+=4;for(let qn=16;qn<80;qn++){const ci=Xt[qn-3]^Xt[qn-8]^Xt[qn-14]^Xt[qn-16];Xt[qn]=4294967295&(ci<<1|ci>>>31)}let cn,_r,Lt=this.chain_[0],Ge=this.chain_[1],Re=this.chain_[2],Ae=this.chain_[3],gt=this.chain_[4];for(let qn=0;qn<80;qn++){qn<40?qn<20?(cn=Ae^Ge&(Re^Ae),_r=1518500249):(cn=Ge^Re^Ae,_r=1859775393):qn<60?(cn=Ge&Re|Ae&(Ge|Re),_r=2400959708):(cn=Ge^Re^Ae,_r=3395469782);const ci=(Lt<<5|Lt>>>27)+cn+gt+_r+Xt[qn]&4294967295;gt=Ae,Ae=Re,Re=4294967295&(Ge<<30|Ge>>>2),Ge=Lt,Lt=ci}this.chain_[0]=this.chain_[0]+Lt&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+Re&4294967295,this.chain_[3]=this.chain_[3]+Ae&4294967295,this.chain_[4]=this.chain_[4]+gt&4294967295}update(Ue,ft){if(null==Ue)return;void 0===ft&&(ft=Ue.length);const Xt=ft-this.blockSize;let Lt=0;const Ge=this.buf_;let Re=this.inbuf_;for(;Lt<ft;){if(0===Re)for(;Lt<=Xt;)this.compress_(Ue,Lt),Lt+=this.blockSize;if("string"==typeof Ue){for(;Lt<ft;)if(Ge[Re]=Ue.charCodeAt(Lt),++Re,++Lt,Re===this.blockSize){this.compress_(Ge),Re=0;break}}else for(;Lt<ft;)if(Ge[Re]=Ue[Lt],++Re,++Lt,Re===this.blockSize){this.compress_(Ge),Re=0;break}}this.inbuf_=Re,this.total_+=ft}digest(){const Ue=[];let ft=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Lt=this.blockSize-1;Lt>=56;Lt--)this.buf_[Lt]=255&ft,ft/=256;this.compress_(this.buf_);let Xt=0;for(let Lt=0;Lt<5;Lt++)for(let Ge=24;Ge>=0;Ge-=8)Ue[Xt]=this.chain_[Lt]>>Ge&255,++Xt;return Ue}}function ct(Je,Ue){const ft=new Gt(Je,Ue);return ft.subscribe.bind(ft)}class Gt{constructor(Ue,ft){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ft,this.task.then(()=>{Ue(this)}).catch(Xt=>{this.error(Xt)})}next(Ue){this.forEachObserver(ft=>{ft.next(Ue)})}error(Ue){this.forEachObserver(ft=>{ft.error(Ue)}),this.close(Ue)}complete(){this.forEachObserver(Ue=>{Ue.complete()}),this.close()}subscribe(Ue,ft,Xt){let Lt;if(void 0===Ue&&void 0===ft&&void 0===Xt)throw new Error("Missing Observer.");Lt=function bn(Je,Ue){if("object"!=typeof Je||null===Je)return!1;for(const ft of Ue)if(ft in Je&&"function"==typeof Je[ft])return!0;return!1}(Ue,["next","error","complete"])?Ue:{next:Ue,error:ft,complete:Xt},void 0===Lt.next&&(Lt.next=zn),void 0===Lt.error&&(Lt.error=zn),void 0===Lt.complete&&(Lt.complete=zn);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Lt.error(this.finalError):Lt.complete()}catch(Re){}}),this.observers.push(Lt),Ge}unsubscribeOne(Ue){void 0===this.observers||void 0===this.observers[Ue]||(delete this.observers[Ue],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ue){if(!this.finalized)for(let ft=0;ft<this.observers.length;ft++)this.sendOne(ft,Ue)}sendOne(Ue,ft){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ue])try{ft(this.observers[Ue])}catch(Xt){"undefined"!=typeof console&&console.error&&console.error(Xt)}})}close(Ue){this.finalized||(this.finalized=!0,void 0!==Ue&&(this.finalError=Ue),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}function Gr(Je,Ue){return`${Je} failed: ${Ue} argument `}const ui=function(Je){const Ue=[];let ft=0;for(let Xt=0;Xt<Je.length;Xt++){let Lt=Je.charCodeAt(Xt);if(Lt>=55296&&Lt<=56319){const Ge=Lt-55296;Xt++,F(Xt<Je.length,"Surrogate pair missing trail surrogate."),Lt=65536+(Ge<<10)+(Je.charCodeAt(Xt)-56320)}Lt<128?Ue[ft++]=Lt:Lt<2048?(Ue[ft++]=Lt>>6|192,Ue[ft++]=63&Lt|128):Lt<65536?(Ue[ft++]=Lt>>12|224,Ue[ft++]=Lt>>6&63|128,Ue[ft++]=63&Lt|128):(Ue[ft++]=Lt>>18|240,Ue[ft++]=Lt>>12&63|128,Ue[ft++]=Lt>>6&63|128,Ue[ft++]=63&Lt|128)}return Ue},On=function(Je){let Ue=0;for(let ft=0;ft<Je.length;ft++){const Xt=Je.charCodeAt(ft);Xt<128?Ue++:Xt<2048?Ue+=2:Xt>=55296&&Xt<=56319?(Ue+=4,ft++):Ue+=3}return Ue};function Yn(Je,Ue=1e3,ft=2){const Xt=Ue*Math.pow(ft,Je),Lt=Math.round(.5*Xt*(Math.random()-.5)*2);return Math.min(144e5,Xt+Lt)}function $r(Je){return Je&&Je._delegate?Je._delegate:Je}},5089:(Wn,At,j)=>{j.d(At,{e:()=>Xe});var g=j(2340),F=j(5e3),pe=j(520),ae=j(6115),We=j(8177);let Xe=(()=>{class pt{constructor(ht,Oe,Pe){this.http=ht,this.router=Oe,this.cartService=Pe,this.logoutloading=!1}login(ht){return this.http.post(`${g.N.apiUrl}login`,ht)}register(ht){return this.http.post(`${g.N.apiUrl}register`,ht)}sent_otp(ht){return this.http.post(`${g.N.apiUrl}sent_otp`,ht)}verify_otp(ht){return this.http.post(`${g.N.apiUrl}verify_otp`,ht)}resetPassword(ht){return this.http.post(`${g.N.apiUrl}reset_password`,ht)}contact_us(ht){return this.http.post(`${g.N.apiUrl}contact_us`,ht)}logout(){this.logoutloading=!0,this.http.post(`${g.N.apiUrl}logout`,{}).subscribe(ht=>{this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]),this.logoutloading=!1})}set_online_offline(ht){this.http.post(`${g.N.apiUrl}set_online_offline`,{is_online:ht}).subscribe(Oe=>console.log())}}return pt.\u0275fac=function(ht){return new(ht||pt)(F.LFG(pe.eN),F.LFG(ae.F0),F.LFG(We.N))},pt.\u0275prov=F.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})()},8177:(Wn,At,j)=>{j.d(At,{N:()=>We});var g=j(1135),F=j(2340),pe=j(5e3),ae=j(520);let We=(()=>{class Xe{constructor(Ze){this.http=Ze,this.cartItems=new g.X(null),this.discount=new g.X(0),this.showCopon=!1,this.coponid=new g.X(null)}addToCart(Ze){return this.http.post(`${F.N.apiUrl}add_to_cart`,Ze)}deleteItemFromCart(Ze){return this.http.post(`${F.N.apiUrl}delete_from_cart`,Ze)}getCart(){return this.http.get(`${F.N.apiUrl}my_cart`).subscribe(Ze=>{var ht,Oe;(null===(ht=null==Ze?void 0:Ze.data)||void 0===ht?void 0:ht.cartdetails)?this.cartItems.next(null===(Oe=null==Ze?void 0:Ze.data)||void 0===Oe?void 0:Oe.cartdetails):this.cartItems.next([])})}getcartProducts(){return this.http.get(`${F.N.apiUrl}my_cart`)}getRecomnded(){return this.http.get(`${F.N.apiUrl}recommed_materials_offers`)}verifyCopon(Ze){return this.http.get(`${F.N.apiUrl}coupon/${Ze}`)}addOrder(Ze){return this.http.post(`${F.N.apiUrl}add_order`,Ze)}}return Xe.\u0275fac=function(Ze){return new(Ze||Xe)(pe.LFG(ae.eN))},Xe.\u0275prov=pe.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})()},452:(Wn,At,j)=>{j.d(At,{g:()=>ae});var g=j(2340),F=j(5e3),pe=j(520);let ae=(()=>{class We{constructor(pt){this.http=pt}getSettings(){return this.http.get(`${g.N.apiUrl}settings`)}}return We.\u0275fac=function(pt){return new(pt||We)(F.LFG(pe.eN))},We.\u0275prov=F.Yz7({token:We,factory:We.\u0275fac,providedIn:"root"}),We})()},4466:(Wn,At,j)=>{j.d(At,{m:()=>ht});var g=j(9808),F=j(6115),pe=j(2382),ae=j(520),We=j(2290),Xe=j(9485),pt=j(377),Ze=j(5e3);let ht=(()=>{class Oe{}return Oe.\u0275fac=function(Et){return new(Et||Oe)},Oe.\u0275mod=Ze.oAB({type:Oe}),Oe.\u0275inj=Ze.cJS({providers:[g.uU],imports:[[pt.TE,g.ez,F.Bz,pe.UX,pe.u5,ae.JF,We.Rh.forRoot(),Xe.kz],pt.TE,Xe.kz,pe.UX,pe.u5,ae.JF,We.Rh]}),Oe})()},2340:(Wn,At,j)=>{j.d(At,{N:()=>g});const g={production:!0,apiUrl:"https://drastiiq8.com/dashboard/public/api/"}},1201:(Wn,At,j)=>{var g=j(2313),F=j(5e3),pe=j(6115);let ae=(()=>{class Z{constructor(T){this.title=T}ngOnInit(){this.title.setTitle("\u0627\u0644\u0635\u0641\u062d\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629 - \u062f\u0631\u0627\u0633\u062a\u064a")}}return Z.\u0275fac=function(T){return new(T||Z)(F.Y36(g.Dx))},Z.\u0275cmp=F.Xpm({type:Z,selectors:[["app-not-found"]],decls:5,vars:0,consts:[[1,"conditions","py-5",2,"min-height","100vh"],[1,"container"],[1,"bg-white","rounded","p-5"],[2,"font-size","30px"]],template:function(T,k){1&T&&(F.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),F._uU(4," \u0639\u0641\u0648\u0627! \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a\u0647\u0627. "),F.qZA()()()())},styles:[""]}),Z})();var We=j(2382),Xe=j(5089),pt=j(2290),Ze=j(9808);function ht(Z,C){1&Z&&(F.TgZ(0,"p",12),F._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),F.qZA())}function Oe(Z,C){1&Z&&(F.TgZ(0,"p",12),F._uU(1," \u0623\u062f\u062e\u0644 \u0628\u0631\u064a\u062f \u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0635\u0627\u0644\u062d "),F.qZA())}function Pe(Z,C){1&Z&&(F.TgZ(0,"p",12),F._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),F.qZA())}let Et=(()=>{class Z{constructor(T,k,ue,Se){this.fb=T,this.authService=k,this.router=ue,this.toastr=Se,this.submitLoading=!1,this.submited=!1}ngOnInit(){this.sendnowForm=this.fb.group({name:["",We.kI.required],email:["",[We.kI.required,We.kI.email]],message:["",We.kI.required]})}senMsg(){this.submited=!0,this.sendnowForm.valid&&(this.submitLoading=!0,this.authService.contact_us(this.sendnowForm.value).subscribe(T=>{this.toastr.success("\u062a\u0645 \u0627\u0644\u0627\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d"),this.router.navigate(["/"])},T=>{this.submitLoading=!1}))}}return Z.\u0275fac=function(T){return new(T||Z)(F.Y36(We.qu),F.Y36(Xe.e),F.Y36(pe.F0),F.Y36(pt._W))},Z.\u0275cmp=F.Xpm({type:Z,selectors:[["app-send-now"]],decls:20,vars:5,consts:[[1,"container","my-5",2,"min-height","100vh"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[3,"formGroup","ngSubmit"],[1,"text-center"],[1,"form-group","mb-3"],["formControlName","name","placeholder","\u0627\u0644\u0623\u0633\u0645 *","type","text",1,"form-control"],["class","text-danger my-1",4,"ngIf"],["formControlName","email","placeholder","\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0623\u0644\u0643\u062a\u0631\u0648\u0646\u064a *","type","email",1,"form-control"],["formControlName","message","placeholder","\u0627\u0644\u0631\u0633\u0627\u0644\u0629 *","rows","5",1,"form-control"],[1,"bluButton",3,"disabled"],[1,"text-danger","my-1"]],template:function(T,k){1&T&&(F.TgZ(0,"section",0)(1,"div",1),F._UZ(2,"div",2),F.TgZ(3,"div",3)(4,"form",4),F.NdJ("ngSubmit",function(){return k.senMsg()}),F.TgZ(5,"h3",5),F._uU(6,"\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627"),F.qZA(),F.TgZ(7,"div",6),F._UZ(8,"input",7),F.YNc(9,ht,2,0,"p",8),F.qZA(),F.TgZ(10,"div",6),F._UZ(11,"input",9),F.YNc(12,Oe,2,0,"p",8),F.qZA(),F.TgZ(13,"div",6),F._UZ(14,"textarea",10),F.YNc(15,Pe,2,0,"p",8),F.qZA(),F.TgZ(16,"div",5)(17,"button",11),F._uU(18," \u0623\u0631\u0633\u0627\u0644 "),F.qZA()()()(),F._UZ(19,"div",2),F.qZA()()),2&T&&(F.xp6(4),F.Q6J("formGroup",k.sendnowForm),F.xp6(5),F.Q6J("ngIf",null!=k.sendnowForm.controls.name.errors&&k.sendnowForm.controls.name.touched||null!=k.sendnowForm.controls.name.errors&&k.submited),F.xp6(3),F.Q6J("ngIf",null!=k.sendnowForm.controls.email.errors&&k.sendnowForm.controls.email.touched||null!=k.sendnowForm.controls.email.errors&&k.submited),F.xp6(3),F.Q6J("ngIf",null!=k.sendnowForm.controls.message.errors&&k.sendnowForm.controls.message.touched||null!=k.sendnowForm.controls.message.errors&&k.submited),F.xp6(2),F.Q6J("disabled",k.submitLoading))},directives:[We._Y,We.JL,We.sg,We.Fj,We.JJ,We.u,Ze.O5],styles:[""]}),Z})(),Cn=(()=>{class Z{constructor(T){this.router=T}canActivate(T,k){return!!localStorage.getItem("drastitoken")||(this.router.navigate(["/auth/login"]),!1)}}return Z.\u0275fac=function(T){return new(T||Z)(F.LFG(pe.F0))},Z.\u0275prov=F.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})();const un=[{path:"",loadChildren:()=>j.e(954).then(j.bind(j,3954)).then(Z=>Z.HomeModule)},{path:"auth",loadChildren:()=>j.e(133).then(j.bind(j,1133)).then(Z=>Z.AuthModule),canActivate:[(()=>{class Z{constructor(T){this.router=T}canActivate(T,k){return!localStorage.getItem("drastitoken")||(this.router.navigate(["/"]),!1)}}return Z.\u0275fac=function(T){return new(T||Z)(F.LFG(pe.F0))},Z.\u0275prov=F.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()]},{path:"stage/:id",loadChildren:()=>Promise.all([j.e(592),j.e(362)]).then(j.bind(j,362)).then(Z=>Z.StageDetailsModule)},{path:"classes/:id/:spe",loadChildren:()=>Promise.all([j.e(592),j.e(854)]).then(j.bind(j,2532)).then(Z=>Z.ClassesModule)},{path:"specialist/:id/:specialist",loadChildren:()=>Promise.all([j.e(592),j.e(667)]).then(j.bind(j,5667)).then(Z=>Z.HasSpecialistModule)},{path:"class-details/:id/:type/:class/:spe",loadChildren:()=>Promise.all([j.e(955),j.e(592),j.e(804)]).then(j.bind(j,5804)).then(Z=>Z.ClassDetailsModule)},{path:"conditions",loadChildren:()=>j.e(36).then(j.bind(j,5036)).then(Z=>Z.ConditionsModule)},{path:"subject-videos/:id/:lessonid/:unitid",canActivate:[Cn],loadChildren:()=>Promise.all([j.e(955),j.e(324)]).then(j.bind(j,2324)).then(Z=>Z.SubjectVideosModule)},{path:"cart",loadChildren:()=>Promise.all([j.e(592),j.e(764)]).then(j.bind(j,3764)).then(Z=>Z.CartModule)},{path:"checkout",loadChildren:()=>Promise.all([j.e(133),j.e(592),j.e(228)]).then(j.bind(j,3228)).then(Z=>Z.CheckoutModule)},{path:"my-courses",canActivate:[Cn],loadChildren:()=>Promise.all([j.e(592),j.e(769)]).then(j.bind(j,9769)).then(Z=>Z.MyCoursesModule)},{path:"support",component:Et},{path:"**",component:ae}];let In=(()=>{class Z{}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=F.oAB({type:Z}),Z.\u0275inj=F.cJS({imports:[[pe.Bz.forRoot(un,{initialNavigation:"enabled",scrollPositionRestoration:"enabled",useHash:!0})],pe.Bz]}),Z})();var Ot=j(259),Zt=j(6197),Ln=j(8177);function fn(Z,C){1&Z&&(F.TgZ(0,"a",19),F._uU(1," \u0645\u0648\u0627\u062f\u064a "),F.qZA())}function xe(Z,C){1&Z&&F._UZ(0,"span",16)}function He(Z,C){1&Z&&(F.TgZ(0,"a",20),F._uU(1," \u0645\u0648\u0627\u062f\u064a "),F.qZA())}function St(Z,C){1&Z&&F._UZ(0,"span",16)}function an(Z,C){1&Z&&(F.TgZ(0,"a",21),F._uU(1," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 "),F.qZA())}function Ht(Z,C){if(1&Z){const T=F.EpF();F.TgZ(0,"button",22),F.NdJ("click",function(){return F.CHM(T),F.oxw().authService.logout()}),F._uU(1," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c "),F.qZA()}if(2&Z){const T=F.oxw();F.Q6J("disabled",T.authService.logoutloading)}}let ke=(()=>{class Z{constructor(T,k){this.cartService=T,this.authService=k,this.cartLength=0}ngOnInit(){localStorage.getItem("drastitoken")?this.cartService.getCart():this.cartService.cartItems.next([]),this.cartService.cartItems.subscribe(T=>{T&&(this.cartLength=null==T?void 0:T.length)})}islogin(){return!!localStorage.getItem("drastitoken")}}return Z.\u0275fac=function(T){return new(T||Z)(F.Y36(Ln.N),F.Y36(Xe.e))},Z.\u0275cmp=F.Xpm({type:Z,selectors:[["app-navbar"]],decls:27,vars:8,consts:[[1,"container","mt-2","d-md-none",2,"direction","ltr","text-align","left"],[2,"direction","ltr","text-align","left"],["aria-label","\u0645\u0648\u0627\u062f\u064a","class","text-primary ","routerLink","/my-courses",4,"ngIf"],["class","mx-2",4,"ngIf"],["aria-label","\u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642","routerLink","/cart",1,""],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag-check","text-primary"],["fill-rule","evenodd","d","M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z"],["d","M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"],[1,"mx-1","cartCount"],[1,"container","flx"],[1,"logoParent"],["routerLink","/","aria-label","\u062f\u0631\u0627\u0633\u062a\u064a"],["src","assets/logo.png","alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"mainlogo"],[1,"loginParent"],["aria-label","\u0645\u0648\u0627\u062f\u064a","class","text-primary d-none d-md-inline-block","routerLink","/my-courses",4,"ngIf"],["aria-label","\u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642","routerLink","/cart",1,"d-none","d-md-inline-block"],[1,"mx-2"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644","routerLink","/auth/login","class","bluButton login",4,"ngIf"],["style","cursor: pointer;","aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c","class","bluButton logout",3,"disabled","click",4,"ngIf"],["aria-label","\u0645\u0648\u0627\u062f\u064a","routerLink","/my-courses",1,"text-primary"],["aria-label","\u0645\u0648\u0627\u062f\u064a","routerLink","/my-courses",1,"text-primary","d-none","d-md-inline-block"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644","routerLink","/auth/login",1,"bluButton","login"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",1,"bluButton","logout",2,"cursor","pointer",3,"disabled","click"]],template:function(T,k){1&T&&(F.TgZ(0,"nav")(1,"div",0)(2,"div",1),F.YNc(3,fn,2,0,"a",2),F.YNc(4,xe,1,0,"span",3),F.TgZ(5,"a",4),F.O4$(),F.TgZ(6,"svg",5),F._UZ(7,"path",6)(8,"path",7),F.qZA(),F.kcU(),F.TgZ(9,"small",8),F._uU(10),F.qZA()()()(),F.TgZ(11,"div",9)(12,"div",10)(13,"a",11),F._UZ(14,"img",12),F.qZA()(),F.TgZ(15,"div",13),F.YNc(16,He,2,0,"a",14),F.YNc(17,St,1,0,"span",3),F.TgZ(18,"a",15),F.O4$(),F.TgZ(19,"svg",5),F._UZ(20,"path",6)(21,"path",7),F.qZA(),F.kcU(),F.TgZ(22,"small",8),F._uU(23),F.qZA()(),F._UZ(24,"span",16),F.YNc(25,an,2,0,"a",17),F.YNc(26,Ht,2,1,"button",18),F.qZA()()()),2&T&&(F.xp6(3),F.Q6J("ngIf",k.islogin()),F.xp6(1),F.Q6J("ngIf",k.islogin()),F.xp6(6),F.Oqu(k.cartLength),F.xp6(6),F.Q6J("ngIf",k.islogin()),F.xp6(1),F.Q6J("ngIf",k.islogin()),F.xp6(6),F.Oqu(k.cartLength),F.xp6(2),F.Q6J("ngIf",!k.islogin()),F.xp6(1),F.Q6J("ngIf",k.islogin()))},directives:[Ze.O5,pe.yS],styles:[""]}),Z})();var Ut=j(452);function Me(Z,C){1&Z&&(F.TgZ(0,"tr",15)(1,"td"),F._uU(2,"94181196 965+"),F.qZA(),F.TgZ(3,"td"),F._UZ(4,"i",11),F.qZA()())}let Tt=(()=>{class Z{constructor(T,k){this.settingsService=T,this.cartService=k}ngOnInit(){this.settingsService.getSettings().subscribe(T=>{var k;this.settings=null==T?void 0:T.data,1==(null===(k=null==T?void 0:T.data)||void 0===k?void 0:k.show_coupon)&&(this.cartService.showCopon=!0)})}}return Z.\u0275fac=function(T){return new(T||Z)(F.Y36(Ut.g),F.Y36(Ln.N))},Z.\u0275cmp=F.Xpm({type:Z,selectors:[["app-footer"]],decls:38,vars:1,consts:[[1,"py-4"],[1,"container"],[1,"row"],[1,"col-md-4","mb-3"],[1,"text-center"],["src","assets/footerlogo.png","alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"img-fluid"],[1,"icons","text-center"],["aria-label","\u0627\u0646\u0633\u062a\u062c\u0631\u0627\u0645","target","_blank","href","http://a7.ae/r/wU7ZW4"],[1,"fa-brands","fa-instagram"],[1,"mx-3"],["aria-label","\u0648\u0627\u062a\u0633\u0627\u0628","target","_blank","href","http://a7.ae/r/fNYKA7"],[1,"fa-brands","fa-whatsapp"],[1,"pt-4"],[1,"mb-3"],["class","pb-5",4,"ngIf"],[1,"pb-5"],[1,"fa-solid","fa-location-dot"],["routerLink","/conditions",1,"text-white"],[1,"fa-solid","fa-file-lines"],[1,"h-100","d-flex","align-items-center"],["target","_blank","href","https://play.google.com/store/apps/details?id=com.codepirates.drasti&hl=en_GB&gl=KW",1,"d-inline-block","mb-3"],["src","assets/googleplay.png","alt","drasti-googleplay",2,"width","100px"],[1,"mx-2"],["target","_blank","href","https://apps.apple.com/eg/app/drasti/id1643300637",1,"d-inline-block","mb-3"],["src","assets/appstore.png","alt","drasti-appstore",2,"width","100px"]],template:function(T,k){1&T&&(F.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4),F._UZ(6,"img",5),F.qZA(),F.TgZ(7,"div",6)(8,"a",7),F._UZ(9,"i",8),F.qZA(),F._UZ(10,"span",9),F.TgZ(11,"a",10),F._UZ(12,"i",11),F.qZA()()()(),F.TgZ(13,"div",3)(14,"div",12)(15,"h2",13),F._uU(16,"\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627"),F.qZA(),F.TgZ(17,"table"),F.YNc(18,Me,5,0,"tr",14),F.TgZ(19,"tr",15)(20,"td"),F._uU(21,"\u0627\u0644\u0643\u0648\u064a\u062a"),F.qZA(),F.TgZ(22,"td"),F._UZ(23,"i",16),F.qZA()(),F.TgZ(24,"tr",15)(25,"td")(26,"a",17),F._uU(27," \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0627\u062d\u0643\u0627\u0645 "),F.qZA()(),F.TgZ(28,"td"),F._UZ(29,"i",18),F.qZA()()()()(),F.TgZ(30,"div",3)(31,"div",19)(32,"div")(33,"a",20),F._UZ(34,"img",21),F.qZA(),F._UZ(35,"span",22),F.TgZ(36,"a",23),F._UZ(37,"img",24),F.qZA()()()()()()()),2&T&&(F.xp6(18),F.Q6J("ngIf",null==k.settings?null:k.settings.whatsapp))},directives:[Ze.O5,pe.yS],styles:[""]}),Z})(),et=(()=>{class Z{constructor(T,k){this.cartService=T,this.router=k,localStorage.getItem("drastitoken")}ngOnInit(){this.app=(0,Ot.ZF)({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),this.db=(0,Zt.N8)(this.app),localStorage.getItem("drastitoken")&&(0,Zt.t8)((0,Zt.iH)(this.db,`Auth/${localStorage.getItem("userid")}`),{user_token:localStorage.getItem("drastitoken")});const T=(0,Zt.iH)(this.db,"Auth");(0,Zt.jM)(T,k=>{var ue;if(localStorage.getItem("drastitoken")){const Se=k.val();for(let Ke in Se)Ke==localStorage.getItem("userid")&&(this.savedToken=Se[Ke]);(null===(ue=this.savedToken)||void 0===ue?void 0:ue.user_token)!=localStorage.getItem("drastitoken")&&(this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]))}})}}return Z.\u0275fac=function(T){return new(T||Z)(F.Y36(Ln.N),F.Y36(pe.F0))},Z.\u0275cmp=F.Xpm({type:Z,selectors:[["app-root"]],decls:3,vars:0,template:function(T,k){1&T&&F._UZ(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},directives:[ke,pe.lC,Tt],styles:[""]}),Z})();var wt=j(1777);const at=!1;function Dn(Z){return new F.vHH(3e3,at)}function Li(){return"undefined"!=typeof window&&void 0!==window.document}function ui(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function On(Z){switch(Z.length){case 0:return new wt.ZN;case 1:return Z[0];default:return new wt.ZE(Z)}}function Si(Z,C,T,k,ue={},Se={}){const Ke=[],Be=[];let It=-1,Qt=null;if(k.forEach(ar=>{const Nr=ar.offset,Jt=Nr==It,Sr=Jt&&Qt||{};Object.keys(ar).forEach(hr=>{let li=hr,jn=ar[hr];if("offset"!==hr)switch(li=C.normalizePropertyName(li,Ke),jn){case wt.k1:jn=ue[hr];break;case wt.l3:jn=Se[hr];break;default:jn=C.normalizeStyleValue(hr,li,jn,Ke)}Sr[li]=jn}),Jt||Be.push(Sr),Qt=Sr,It=Nr}),Ke.length)throw function Ji(Z){return new F.vHH(3502,at)}();return Be}function Vr(Z,C,T,k){switch(C){case"start":Z.onStart(()=>k(T&&Vi(T,"start",Z)));break;case"done":Z.onDone(()=>k(T&&Vi(T,"done",Z)));break;case"destroy":Z.onDestroy(()=>k(T&&Vi(T,"destroy",Z)))}}function Vi(Z,C,T){const k=T.totalTime,Se=kn(Z.element,Z.triggerName,Z.fromState,Z.toState,C||Z.phaseName,null==k?Z.totalTime:k,!!T.disabled),Ke=Z._data;return null!=Ke&&(Se._data=Ke),Se}function kn(Z,C,T,k,ue="",Se=0,Ke){return{element:Z,triggerName:C,fromState:T,toState:k,phaseName:ue,totalTime:Se,disabled:!!Ke}}function Ft(Z,C,T){let k;return Z instanceof Map?(k=Z.get(C),k||Z.set(C,k=T)):(k=Z[C],k||(k=Z[C]=T)),k}function Yn(Z){const C=Z.indexOf(":");return[Z.substring(1,C),Z.substr(C+1)]}let Rr=(Z,C)=>!1,Ur=(Z,C,T)=>[],$r=null;function Je(Z){const C=Z.parentNode||Z.host;return C===$r?null:C}(ui()||"undefined"!=typeof Element)&&(Li()?($r=(()=>document.documentElement)(),Rr=(Z,C)=>{for(;C;){if(C===Z)return!0;C=Je(C)}return!1}):Rr=(Z,C)=>Z.contains(C),Ur=(Z,C,T)=>{if(T)return Array.from(Z.querySelectorAll(C));const k=Z.querySelector(C);return k?[k]:[]});let Xt=null,Lt=!1;function Ge(Z){Xt||(Xt=function Re(){return"undefined"!=typeof document?document.body:null}()||{},Lt=!!Xt.style&&"WebkitAppearance"in Xt.style);let C=!0;return Xt.style&&!function ft(Z){return"ebkit"==Z.substring(1,6)}(Z)&&(C=Z in Xt.style,!C&&Lt&&(C="Webkit"+Z.charAt(0).toUpperCase()+Z.substr(1)in Xt.style)),C}const Ae=Rr,gt=Ur;let _r=(()=>{class Z{validateStyleProperty(T){return Ge(T)}matchesElement(T,k){return!1}containsElement(T,k){return Ae(T,k)}getParentElement(T){return Je(T)}query(T,k,ue){return gt(T,k,ue)}computeStyle(T,k,ue){return ue||""}animate(T,k,ue,Se,Ke,Be=[],It){return new wt.ZN(ue,Se)}}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275prov=F.Yz7({token:Z,factory:Z.\u0275fac}),Z})(),qn=(()=>{class Z{}return Z.NOOP=new _r,Z})();const As="ng-enter",Ni="ng-leave",di="ng-trigger",ss=".ng-trigger",Oi="ng-animating",En=".ng-animating";function yr(Z){if("number"==typeof Z)return Z;const C=Z.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:mi(parseFloat(C[1]),C[2])}function mi(Z,C){return"s"===C?1e3*Z:Z}function Mi(Z,C,T){return Z.hasOwnProperty("duration")?Z:function bs(Z,C,T){let ue,Se=0,Ke="";if("string"==typeof Z){const Be=Z.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Be)return C.push(Dn()),{duration:0,delay:0,easing:""};ue=mi(parseFloat(Be[1]),Be[2]);const It=Be[3];null!=It&&(Se=mi(parseFloat(It),Be[4]));const Qt=Be[5];Qt&&(Ke=Qt)}else ue=Z;if(!T){let Be=!1,It=C.length;ue<0&&(C.push(function nr(){return new F.vHH(3100,at)}()),Be=!0),Se<0&&(C.push(function rr(){return new F.vHH(3101,at)}()),Be=!0),Be&&C.splice(It,0,Dn())}return{duration:ue,delay:Se,easing:Ke}}(Z,C,T)}function Ui(Z,C={}){return Object.keys(Z).forEach(T=>{C[T]=Z[T]}),C}function Ti(Z,C,T={}){if(C)for(let k in Z)T[k]=Z[k];else Ui(Z,T);return T}function Ki(Z,C,T){return T?C+":"+T+";":""}function Gi(Z){let C="";for(let T=0;T<Z.style.length;T++){const k=Z.style.item(T);C+=Ki(0,k,Z.style.getPropertyValue(k))}for(const T in Z.style)Z.style.hasOwnProperty(T)&&!T.startsWith("_")&&(C+=Ki(0,Ks(T),Z.style[T]));Z.setAttribute("style",C)}function Ar(Z,C,T){Z.style&&(Object.keys(C).forEach(k=>{const ue=wi(k);T&&!T.hasOwnProperty(k)&&(T[k]=Z.style[ue]),Z.style[ue]=C[k]}),ui()&&Gi(Z))}function os(Z,C){Z.style&&(Object.keys(C).forEach(T=>{const k=wi(T);Z.style[k]=""}),ui()&&Gi(Z))}function ds(Z){return Array.isArray(Z)?1==Z.length?Z[0]:(0,wt.vP)(Z):Z}const Yr=new RegExp("{{\\s*(.+?)\\s*}}","g");function wr(Z){let C=[];if("string"==typeof Z){let T;for(;T=Yr.exec(Z);)C.push(T[1]);Yr.lastIndex=0}return C}function Ir(Z,C,T){const k=Z.toString(),ue=k.replace(Yr,(Se,Ke)=>{let Be=C[Ke];return C.hasOwnProperty(Ke)||(T.push(function Tr(Z){return new F.vHH(3003,at)}()),Be=""),Be.toString()});return ue==k?Z:ue}function Xi(Z){const C=[];let T=Z.next();for(;!T.done;)C.push(T.value),T=Z.next();return C}const Qr=/-+([a-z0-9])/g;function wi(Z){return Z.replace(Qr,(...C)=>C[1].toUpperCase())}function Ks(Z){return Z.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kr(Z,C,T){switch(C.type){case 7:return Z.visitTrigger(C,T);case 0:return Z.visitState(C,T);case 1:return Z.visitTransition(C,T);case 2:return Z.visitSequence(C,T);case 3:return Z.visitGroup(C,T);case 4:return Z.visitAnimate(C,T);case 5:return Z.visitKeyframes(C,T);case 6:return Z.visitStyle(C,T);case 8:return Z.visitReference(C,T);case 9:return Z.visitAnimateChild(C,T);case 10:return Z.visitAnimateRef(C,T);case 11:return Z.visitQuery(C,T);case 12:return Z.visitStagger(C,T);default:throw function mr(Z){return new F.vHH(3004,at)}()}}function qr(Z,C){return window.getComputedStyle(Z)[C]}function Ct(Z,C){const T=[];return"string"==typeof Z?Z.split(/\s*,\s*/).forEach(k=>function dt(Z,C,T){if(":"==Z[0]){const It=function xt(Z,C){switch(Z){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(T,k)=>parseFloat(k)>parseFloat(T);case":decrement":return(T,k)=>parseFloat(k)<parseFloat(T);default:return C.push(function Wr(Z){return new F.vHH(3016,at)}()),"* => *"}}(Z,T);if("function"==typeof It)return void C.push(It);Z=It}const k=Z.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==k||k.length<4)return T.push(function Qn(Z){return new F.vHH(3015,at)}()),C;const ue=k[1],Se=k[2],Ke=k[3];C.push(Pr(ue,Ke));"<"==Se[0]&&!("*"==ue&&"*"==Ke)&&C.push(Pr(Ke,ue))}(k,T,C)):T.push(Z),T}const mn=new Set(["true","1"]),$n=new Set(["false","0"]);function Pr(Z,C){const T=mn.has(Z)||$n.has(Z),k=mn.has(C)||$n.has(C);return(ue,Se)=>{let Ke="*"==Z||Z==ue,Be="*"==C||C==Se;return!Ke&&T&&"boolean"==typeof ue&&(Ke=ue?mn.has(Z):$n.has(Z)),!Be&&k&&"boolean"==typeof Se&&(Be=Se?mn.has(C):$n.has(C)),Ke&&Be}}const Yi=new RegExp("s*:selfs*,?","g");function Ii(Z,C,T,k){return new ai(Z).build(C,T,k)}class ai{constructor(C){this._driver=C}build(C,T,k){const ue=new Qo(T);this._resetContextStyleTimingState(ue);const Se=kr(this,ds(C),ue);return ue.unsupportedCSSPropertiesFound.size&&ue.unsupportedCSSPropertiesFound.keys(),Se}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles={},C.collectedStyles[""]={},C.currentTime=0}visitTrigger(C,T){let k=T.queryCount=0,ue=T.depCount=0;const Se=[],Ke=[];return"@"==C.name.charAt(0)&&T.errors.push(function kt(){return new F.vHH(3006,at)}()),C.definitions.forEach(Be=>{if(this._resetContextStyleTimingState(T),0==Be.type){const It=Be,Qt=It.name;Qt.toString().split(/\s*,\s*/).forEach(ar=>{It.name=ar,Se.push(this.visitState(It,T))}),It.name=Qt}else if(1==Be.type){const It=this.visitTransition(Be,T);k+=It.queryCount,ue+=It.depCount,Ke.push(It)}else T.errors.push(function st(){return new F.vHH(3007,at)}())}),{type:7,name:C.name,states:Se,transitions:Ke,queryCount:k,depCount:ue,options:null}}visitState(C,T){const k=this.visitStyle(C.styles,T),ue=C.options&&C.options.params||null;if(k.containsDynamicStyles){const Se=new Set,Ke=ue||{};k.styles.forEach(Be=>{if(Qs(Be)){const It=Be;Object.keys(It).forEach(Qt=>{wr(It[Qt]).forEach(ar=>{Ke.hasOwnProperty(ar)||Se.add(ar)})})}}),Se.size&&(Xi(Se.values()),T.errors.push(function Dt(Z,C){return new F.vHH(3008,at)}()))}return{type:0,name:C.name,style:k,options:ue?{params:ue}:null}}visitTransition(C,T){T.queryCount=0,T.depCount=0;const k=kr(this,ds(C.animation),T);return{type:1,matchers:Ct(C.expr,T.errors),animation:k,queryCount:T.queryCount,depCount:T.depCount,options:ho(C.options)}}visitSequence(C,T){return{type:2,steps:C.steps.map(k=>kr(this,k,T)),options:ho(C.options)}}visitGroup(C,T){const k=T.currentTime;let ue=0;const Se=C.steps.map(Ke=>{T.currentTime=k;const Be=kr(this,Ke,T);return ue=Math.max(ue,T.currentTime),Be});return T.currentTime=ue,{type:3,steps:Se,options:ho(C.options)}}visitAnimate(C,T){const k=function ws(Z,C){if(Z.hasOwnProperty("duration"))return Z;if("number"==typeof Z)return Ri(Mi(Z,C).duration,0,"");const T=Z;if(T.split(/\s+/).some(Se=>"{"==Se.charAt(0)&&"{"==Se.charAt(1))){const Se=Ri(0,0,"");return Se.dynamic=!0,Se.strValue=T,Se}const ue=Mi(T,C);return Ri(ue.duration,ue.delay,ue.easing)}(C.timings,T.errors);T.currentAnimateTimings=k;let ue,Se=C.styles?C.styles:(0,wt.oB)({});if(5==Se.type)ue=this.visitKeyframes(Se,T);else{let Ke=C.styles,Be=!1;if(!Ke){Be=!0;const Qt={};k.easing&&(Qt.easing=k.easing),Ke=(0,wt.oB)(Qt)}T.currentTime+=k.duration+k.delay;const It=this.visitStyle(Ke,T);It.isEmptyStep=Be,ue=It}return T.currentAnimateTimings=null,{type:4,timings:k,style:ue,options:null}}visitStyle(C,T){const k=this._makeStyleAst(C,T);return this._validateStyleAst(k,T),k}_makeStyleAst(C,T){const k=[];Array.isArray(C.styles)?C.styles.forEach(Ke=>{"string"==typeof Ke?Ke==wt.l3?k.push(Ke):T.errors.push(function ut(Z){return new F.vHH(3002,at)}()):k.push(Ke)}):k.push(C.styles);let ue=!1,Se=null;return k.forEach(Ke=>{if(Qs(Ke)){const Be=Ke,It=Be.easing;if(It&&(Se=It,delete Be.easing),!ue)for(let Qt in Be)if(Be[Qt].toString().indexOf("{{")>=0){ue=!0;break}}}),{type:6,styles:k,easing:Se,offset:C.offset,containsDynamicStyles:ue,options:null}}_validateStyleAst(C,T){const k=T.currentAnimateTimings;let ue=T.currentTime,Se=T.currentTime;k&&Se>0&&(Se-=k.duration+k.delay),C.styles.forEach(Ke=>{"string"!=typeof Ke&&Object.keys(Ke).forEach(Be=>{if(!this._driver.validateStyleProperty(Be))return delete Ke[Be],void T.unsupportedCSSPropertiesFound.add(Be);const It=T.collectedStyles[T.currentQuerySelector],Qt=It[Be];let ar=!0;Qt&&(Se!=ue&&Se>=Qt.startTime&&ue<=Qt.endTime&&(T.errors.push(function Rt(Z,C,T,k,ue){return new F.vHH(3010,at)}()),ar=!1),Se=Qt.startTime),ar&&(It[Be]={startTime:Se,endTime:ue}),T.options&&function $s(Z,C,T){const k=C.params||{},ue=wr(Z);ue.length&&ue.forEach(Se=>{k.hasOwnProperty(Se)||T.push(function yn(Z){return new F.vHH(3001,at)}())})}(Ke[Be],T.options,T.errors)})})}visitKeyframes(C,T){const k={type:5,styles:[],options:null};if(!T.currentAnimateTimings)return T.errors.push(function tn(){return new F.vHH(3011,at)}()),k;let Se=0;const Ke=[];let Be=!1,It=!1,Qt=0;const ar=C.steps.map(sr=>{const ao=this._makeStyleAst(sr,T);let Kn=null!=ao.offset?ao.offset:function Es(Z){if("string"==typeof Z)return null;let C=null;if(Array.isArray(Z))Z.forEach(T=>{if(Qs(T)&&T.hasOwnProperty("offset")){const k=T;C=parseFloat(k.offset),delete k.offset}});else if(Qs(Z)&&Z.hasOwnProperty("offset")){const T=Z;C=parseFloat(T.offset),delete T.offset}return C}(ao.styles),$t=0;return null!=Kn&&(Se++,$t=ao.offset=Kn),It=It||$t<0||$t>1,Be=Be||$t<Qt,Qt=$t,Ke.push($t),ao});It&&T.errors.push(function Gn(){return new F.vHH(3012,at)}()),Be&&T.errors.push(function tr(){return new F.vHH(3200,at)}());const Nr=C.steps.length;let Jt=0;Se>0&&Se<Nr?T.errors.push(function lr(){return new F.vHH(3202,at)}()):0==Se&&(Jt=1/(Nr-1));const Sr=Nr-1,hr=T.currentTime,li=T.currentAnimateTimings,jn=li.duration;return ar.forEach((sr,ao)=>{const Kn=Jt>0?ao==Sr?1:Jt*ao:Ke[ao],$t=Kn*jn;T.currentTime=hr+li.delay+$t,li.duration=$t,this._validateStyleAst(sr,T),sr.offset=Kn,k.styles.push(sr)}),k}visitReference(C,T){return{type:8,animation:kr(this,ds(C.animation),T),options:ho(C.options)}}visitAnimateChild(C,T){return T.depCount++,{type:9,options:ho(C.options)}}visitAnimateRef(C,T){return{type:10,animation:this.visitReference(C.animation,T),options:ho(C.options)}}visitQuery(C,T){const k=T.currentQuerySelector,ue=C.options||{};T.queryCount++,T.currentQuery=C;const[Se,Ke]=function ms(Z){const C=!!Z.split(/\s*,\s*/).find(T=>":self"==T);return C&&(Z=Z.replace(Yi,"")),Z=Z.replace(/@\*/g,ss).replace(/@\w+/g,T=>ss+"-"+T.substr(1)).replace(/:animating/g,En),[Z,C]}(C.selector);T.currentQuerySelector=k.length?k+" "+Se:Se,Ft(T.collectedStyles,T.currentQuerySelector,{});const Be=kr(this,ds(C.animation),T);return T.currentQuery=null,T.currentQuerySelector=k,{type:11,selector:Se,limit:ue.limit||0,optional:!!ue.optional,includeSelf:Ke,animation:Be,originalSelector:C.selector,options:ho(C.options)}}visitStagger(C,T){T.currentQuery||T.errors.push(function Xr(){return new F.vHH(3013,at)}());const k="full"===C.timings?{duration:0,delay:0,easing:"full"}:Mi(C.timings,T.errors,!0);return{type:12,animation:kr(this,ds(C.animation),T),timings:k,options:null}}}class Qo{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Qs(Z){return!Array.isArray(Z)&&"object"==typeof Z}function ho(Z){return Z?(Z=Ui(Z)).params&&(Z.params=function Ts(Z){return Z?Ui(Z):null}(Z.params)):Z={},Z}function Ri(Z,C,T){return{duration:Z,delay:C,easing:T}}function fo(Z,C,T,k,ue,Se,Ke=null,Be=!1){return{type:1,element:Z,keyframes:C,preStyleProps:T,postStyleProps:k,duration:ue,delay:Se,totalTime:ue+Se,easing:Ke,subTimeline:Be}}class Ms{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,T){let k=this._map.get(C);k||this._map.set(C,k=[]),k.push(...T)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const Vo=new RegExp(":enter","g"),Hs=new RegExp(":leave","g");function Is(Z,C,T,k,ue,Se={},Ke={},Be,It,Qt=[]){return(new Fs).buildKeyframes(Z,C,T,k,ue,Se,Ke,Be,It,Qt)}class Fs{buildKeyframes(C,T,k,ue,Se,Ke,Be,It,Qt,ar=[]){Qt=Qt||new Ms;const Nr=new fs(C,T,Qt,ue,Se,ar,[]);Nr.options=It,Nr.currentTimeline.setStyles([Ke],null,Nr.errors,It),kr(this,k,Nr);const Jt=Nr.timelines.filter(Sr=>Sr.containsAnimation());if(Object.keys(Be).length){let Sr;for(let hr=Jt.length-1;hr>=0;hr--){const li=Jt[hr];if(li.element===T){Sr=li;break}}Sr&&!Sr.allowOnlyTimelineStyles()&&Sr.setStyles([Be],null,Nr.errors,It)}return Jt.length?Jt.map(Sr=>Sr.buildKeyframes()):[fo(T,[],[],[],0,0,"",!1)]}visitTrigger(C,T){}visitState(C,T){}visitTransition(C,T){}visitAnimateChild(C,T){const k=T.subInstructions.get(T.element);if(k){const ue=T.createSubContext(C.options),Se=T.currentTimeline.currentTime,Ke=this._visitSubInstructions(k,ue,ue.options);Se!=Ke&&T.transformIntoNewTimeline(Ke)}T.previousNode=C}visitAnimateRef(C,T){const k=T.createSubContext(C.options);k.transformIntoNewTimeline(),this.visitReference(C.animation,k),T.transformIntoNewTimeline(k.currentTimeline.currentTime),T.previousNode=C}_visitSubInstructions(C,T,k){let Se=T.currentTimeline.currentTime;const Ke=null!=k.duration?yr(k.duration):null,Be=null!=k.delay?yr(k.delay):null;return 0!==Ke&&C.forEach(It=>{const Qt=T.appendInstructionToTimeline(It,Ke,Be);Se=Math.max(Se,Qt.duration+Qt.delay)}),Se}visitReference(C,T){T.updateOptions(C.options,!0),kr(this,C.animation,T),T.previousNode=C}visitSequence(C,T){const k=T.subContextCount;let ue=T;const Se=C.options;if(Se&&(Se.params||Se.delay)&&(ue=T.createSubContext(Se),ue.transformIntoNewTimeline(),null!=Se.delay)){6==ue.previousNode.type&&(ue.currentTimeline.snapshotCurrentStyles(),ue.previousNode=Oo);const Ke=yr(Se.delay);ue.delayNextStep(Ke)}C.steps.length&&(C.steps.forEach(Ke=>kr(this,Ke,ue)),ue.currentTimeline.applyStylesToKeyframe(),ue.subContextCount>k&&ue.transformIntoNewTimeline()),T.previousNode=C}visitGroup(C,T){const k=[];let ue=T.currentTimeline.currentTime;const Se=C.options&&C.options.delay?yr(C.options.delay):0;C.steps.forEach(Ke=>{const Be=T.createSubContext(C.options);Se&&Be.delayNextStep(Se),kr(this,Ke,Be),ue=Math.max(ue,Be.currentTimeline.currentTime),k.push(Be.currentTimeline)}),k.forEach(Ke=>T.currentTimeline.mergeTimelineCollectedStyles(Ke)),T.transformIntoNewTimeline(ue),T.previousNode=C}_visitTiming(C,T){if(C.dynamic){const k=C.strValue;return Mi(T.params?Ir(k,T.params,T.errors):k,T.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,T){const k=T.currentAnimateTimings=this._visitTiming(C.timings,T),ue=T.currentTimeline;k.delay&&(T.incrementTime(k.delay),ue.snapshotCurrentStyles());const Se=C.style;5==Se.type?this.visitKeyframes(Se,T):(T.incrementTime(k.duration),this.visitStyle(Se,T),ue.applyStylesToKeyframe()),T.currentAnimateTimings=null,T.previousNode=C}visitStyle(C,T){const k=T.currentTimeline,ue=T.currentAnimateTimings;!ue&&k.getCurrentStyleProperties().length&&k.forwardFrame();const Se=ue&&ue.easing||C.easing;C.isEmptyStep?k.applyEmptyStep(Se):k.setStyles(C.styles,Se,T.errors,T.options),T.previousNode=C}visitKeyframes(C,T){const k=T.currentAnimateTimings,ue=T.currentTimeline.duration,Se=k.duration,Be=T.createSubContext().currentTimeline;Be.easing=k.easing,C.styles.forEach(It=>{Be.forwardTime((It.offset||0)*Se),Be.setStyles(It.styles,It.easing,T.errors,T.options),Be.applyStylesToKeyframe()}),T.currentTimeline.mergeTimelineCollectedStyles(Be),T.transformIntoNewTimeline(ue+Se),T.previousNode=C}visitQuery(C,T){const k=T.currentTimeline.currentTime,ue=C.options||{},Se=ue.delay?yr(ue.delay):0;Se&&(6===T.previousNode.type||0==k&&T.currentTimeline.getCurrentStyleProperties().length)&&(T.currentTimeline.snapshotCurrentStyles(),T.previousNode=Oo);let Ke=k;const Be=T.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!ue.optional,T.errors);T.currentQueryTotal=Be.length;let It=null;Be.forEach((Qt,ar)=>{T.currentQueryIndex=ar;const Nr=T.createSubContext(C.options,Qt);Se&&Nr.delayNextStep(Se),Qt===T.element&&(It=Nr.currentTimeline),kr(this,C.animation,Nr),Nr.currentTimeline.applyStylesToKeyframe(),Ke=Math.max(Ke,Nr.currentTimeline.currentTime)}),T.currentQueryIndex=0,T.currentQueryTotal=0,T.transformIntoNewTimeline(Ke),It&&(T.currentTimeline.mergeTimelineCollectedStyles(It),T.currentTimeline.snapshotCurrentStyles()),T.previousNode=C}visitStagger(C,T){const k=T.parentContext,ue=T.currentTimeline,Se=C.timings,Ke=Math.abs(Se.duration),Be=Ke*(T.currentQueryTotal-1);let It=Ke*T.currentQueryIndex;switch(Se.duration<0?"reverse":Se.easing){case"reverse":It=Be-It;break;case"full":It=k.currentStaggerTime}const ar=T.currentTimeline;It&&ar.delayNextStep(It);const Nr=ar.currentTime;kr(this,C.animation,T),T.previousNode=C,k.currentStaggerTime=ue.currentTime-Nr+(ue.startTime-k.currentTimeline.startTime)}}const Oo={};class fs{constructor(C,T,k,ue,Se,Ke,Be,It){this._driver=C,this.element=T,this.subInstructions=k,this._enterClassName=ue,this._leaveClassName=Se,this.errors=Ke,this.timelines=Be,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Oo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=It||new Js(this._driver,T,0),Be.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,T){if(!C)return;const k=C;let ue=this.options;null!=k.duration&&(ue.duration=yr(k.duration)),null!=k.delay&&(ue.delay=yr(k.delay));const Se=k.params;if(Se){let Ke=ue.params;Ke||(Ke=this.options.params={}),Object.keys(Se).forEach(Be=>{(!T||!Ke.hasOwnProperty(Be))&&(Ke[Be]=Ir(Se[Be],Ke,this.errors))})}}_copyOptions(){const C={};if(this.options){const T=this.options.params;if(T){const k=C.params={};Object.keys(T).forEach(ue=>{k[ue]=T[ue]})}}return C}createSubContext(C=null,T,k){const ue=T||this.element,Se=new fs(this._driver,ue,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ue,k||0));return Se.previousNode=this.previousNode,Se.currentAnimateTimings=this.currentAnimateTimings,Se.options=this._copyOptions(),Se.updateOptions(C),Se.currentQueryIndex=this.currentQueryIndex,Se.currentQueryTotal=this.currentQueryTotal,Se.parentContext=this,this.subContextCount++,Se}transformIntoNewTimeline(C){return this.previousNode=Oo,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,T,k){const ue={duration:null!=T?T:C.duration,delay:this.currentTimeline.currentTime+(null!=k?k:0)+C.delay,easing:""},Se=new Gs(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,ue,C.stretchStartingKeyframe);return this.timelines.push(Se),ue}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,T,k,ue,Se,Ke){let Be=[];if(ue&&Be.push(this.element),C.length>0){C=(C=C.replace(Vo,"."+this._enterClassName)).replace(Hs,"."+this._leaveClassName);let Qt=this._driver.query(this.element,C,1!=k);0!==k&&(Qt=k<0?Qt.slice(Qt.length+k,Qt.length):Qt.slice(0,k)),Be.push(...Qt)}return!Se&&0==Be.length&&Ke.push(function oi(Z){return new F.vHH(3014,at)}()),Be}}class Js{constructor(C,T,k,ue){this._driver=C,this.element=T,this.startTime=k,this._elementTimelineStylesLookup=ue,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(T),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(T,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const T=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||T?(this.forwardTime(this.currentTime+C),T&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,T){return this.applyStylesToKeyframe(),new Js(this._driver,C,T||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,T){this._localTimelineStyles[C]=T,this._globalTimelineStyles[C]=T,this._styleSummary[C]={time:this.currentTime,value:T}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&(this._previousKeyframe.easing=C),Object.keys(this._globalTimelineStyles).forEach(T=>{this._backFill[T]=this._globalTimelineStyles[T]||wt.l3,this._currentKeyframe[T]=wt.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,T,k,ue){T&&(this._previousKeyframe.easing=T);const Se=ue&&ue.params||{},Ke=function so(Z,C){const T={};let k;return Z.forEach(ue=>{"*"===ue?(k=k||Object.keys(C),k.forEach(Se=>{T[Se]=wt.l3})):Ti(ue,!1,T)}),T}(C,this._globalTimelineStyles);Object.keys(Ke).forEach(Be=>{const It=Ir(Ke[Be],Se,k);this._pendingStyles[Be]=It,this._localTimelineStyles.hasOwnProperty(Be)||(this._backFill[Be]=this._globalTimelineStyles.hasOwnProperty(Be)?this._globalTimelineStyles[Be]:wt.l3),this._updateStyle(Be,It)})}applyStylesToKeyframe(){const C=this._pendingStyles,T=Object.keys(C);0!=T.length&&(this._pendingStyles={},T.forEach(k=>{this._currentKeyframe[k]=C[k]}),Object.keys(this._localTimelineStyles).forEach(k=>{this._currentKeyframe.hasOwnProperty(k)||(this._currentKeyframe[k]=this._localTimelineStyles[k])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(C=>{const T=this._localTimelineStyles[C];this._pendingStyles[C]=T,this._updateStyle(C,T)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let T in this._currentKeyframe)C.push(T);return C}mergeTimelineCollectedStyles(C){Object.keys(C._styleSummary).forEach(T=>{const k=this._styleSummary[T],ue=C._styleSummary[T];(!k||ue.time>k.time)&&this._updateStyle(T,ue.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,T=new Set,k=1===this._keyframes.size&&0===this.duration;let ue=[];this._keyframes.forEach((Be,It)=>{const Qt=Ti(Be,!0);Object.keys(Qt).forEach(ar=>{const Nr=Qt[ar];Nr==wt.k1?C.add(ar):Nr==wt.l3&&T.add(ar)}),k||(Qt.offset=It/this.duration),ue.push(Qt)});const Se=C.size?Xi(C.values()):[],Ke=T.size?Xi(T.values()):[];if(k){const Be=ue[0],It=Ui(Be);Be.offset=0,It.offset=1,ue=[Be,It]}return fo(this.element,ue,Se,Ke,this.duration,this.startTime,this.easing,!1)}}class Gs extends Js{constructor(C,T,k,ue,Se,Ke,Be=!1){super(C,T,Ke.delay),this.keyframes=k,this.preStyleProps=ue,this.postStyleProps=Se,this._stretchStartingKeyframe=Be,this.timings={duration:Ke.duration,delay:Ke.delay,easing:Ke.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:T,duration:k,easing:ue}=this.timings;if(this._stretchStartingKeyframe&&T){const Se=[],Ke=k+T,Be=T/Ke,It=Ti(C[0],!1);It.offset=0,Se.push(It);const Qt=Ti(C[0],!1);Qt.offset=ki(Be),Se.push(Qt);const ar=C.length-1;for(let Nr=1;Nr<=ar;Nr++){let Jt=Ti(C[Nr],!1);Jt.offset=ki((T+Jt.offset*k)/Ke),Se.push(Jt)}k=Ke,T=0,ue="",C=Se}return fo(this.element,C,this.preStyleProps,this.postStyleProps,k,T,ue,!0)}}function ki(Z,C=3){const T=Math.pow(10,C-1);return Math.round(Z*T)/T}class Rs{}class Ls extends Rs{normalizePropertyName(C,T){return wi(C)}normalizeStyleValue(C,T,k,ue){let Se="";const Ke=k.toString().trim();if(Bi[T]&&0!==k&&"0"!==k)if("number"==typeof k)Se="px";else{const Be=k.match(/^[+-]?[\d\.]+([a-z]*)$/);Be&&0==Be[1].length&&ue.push(function Vt(Z,C){return new F.vHH(3005,at)}())}return Ke+Se}}const Bi=(()=>function bi(Z){const C={};return Z.forEach(T=>C[T]=!0),C}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function B(Z,C,T,k,ue,Se,Ke,Be,It,Qt,ar,Nr,Jt){return{type:0,element:Z,triggerName:C,isRemovalTransition:ue,fromState:T,fromStyles:Se,toState:k,toStyles:Ke,timelines:Be,queriedElements:It,preStyleProps:Qt,postStyleProps:ar,totalTime:Nr,errors:Jt}}const he={};class W{constructor(C,T,k){this._triggerName=C,this.ast=T,this._stateStyles=k}match(C,T,k,ue){return function ve(Z,C,T,k,ue){return Z.some(Se=>Se(C,T,k,ue))}(this.ast.matchers,C,T,k,ue)}buildStyles(C,T,k){const ue=this._stateStyles["*"],Se=this._stateStyles[C],Ke=ue?ue.buildStyles(T,k):{};return Se?Se.buildStyles(T,k):Ke}build(C,T,k,ue,Se,Ke,Be,It,Qt,ar){const Nr=[],Jt=this.ast.options&&this.ast.options.params||he,hr=this.buildStyles(k,Be&&Be.params||he,Nr),li=It&&It.params||he,jn=this.buildStyles(ue,li,Nr),sr=new Set,ao=new Map,Kn=new Map,$t="void"===ue,An={params:Object.assign(Object.assign({},Jt),li)},ps=ar?[]:Is(C,T,this.ast.animation,Se,Ke,hr,jn,An,Qt,Nr);let Ps=0;if(ps.forEach(O=>{Ps=Math.max(O.duration+O.delay,Ps)}),Nr.length)return B(T,this._triggerName,k,ue,$t,hr,jn,[],[],ao,Kn,Ps,Nr);ps.forEach(O=>{const M=O.element,S=Ft(ao,M,{});O.preStyleProps.forEach(ne=>S[ne]=!0);const q=Ft(Kn,M,{});O.postStyleProps.forEach(ne=>q[ne]=!0),M!==T&&sr.add(M)});const jo=Xi(sr.values());return B(T,this._triggerName,k,ue,$t,hr,jn,ps,jo,ao,Kn,Ps)}}class qe{constructor(C,T,k){this.styles=C,this.defaultParams=T,this.normalizer=k}buildStyles(C,T){const k={},ue=Ui(this.defaultParams);return Object.keys(C).forEach(Se=>{const Ke=C[Se];null!=Ke&&(ue[Se]=Ke)}),this.styles.styles.forEach(Se=>{if("string"!=typeof Se){const Ke=Se;Object.keys(Ke).forEach(Be=>{let It=Ke[Be];It.length>1&&(It=Ir(It,ue,T));const Qt=this.normalizer.normalizePropertyName(Be,T);It=this.normalizer.normalizeStyleValue(Be,Qt,It,T),k[Qt]=It})}}),k}}class wn{constructor(C,T,k){this.name=C,this.ast=T,this._normalizer=k,this.transitionFactories=[],this.states={},T.states.forEach(ue=>{this.states[ue.name]=new qe(ue.style,ue.options&&ue.options.params||{},k)}),jr(this.states,"true","1"),jr(this.states,"false","0"),T.transitions.forEach(ue=>{this.transitionFactories.push(new W(C,ue,this.states))}),this.fallbackTransition=function fr(Z,C,T){return new W(Z,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ke,Be)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,T,k,ue){return this.transitionFactories.find(Ke=>Ke.match(C,T,k,ue))||null}matchStyles(C,T,k){return this.fallbackTransition.buildStyles(C,T,k)}}function jr(Z,C,T){Z.hasOwnProperty(C)?Z.hasOwnProperty(T)||(Z[T]=Z[C]):Z.hasOwnProperty(T)&&(Z[C]=Z[T])}const ei=new Ms;class ni{constructor(C,T,k){this.bodyNode=C,this._driver=T,this._normalizer=k,this._animations={},this._playersById={},this.players=[]}register(C,T){const k=[],Se=Ii(this._driver,T,k,[]);if(k.length)throw function dn(Z){return new F.vHH(3503,at)}();this._animations[C]=Se}_buildPlayer(C,T,k){const ue=C.element,Se=Si(0,this._normalizer,0,C.keyframes,T,k);return this._driver.animate(ue,Se,C.duration,C.delay,C.easing,[],!0)}create(C,T,k={}){const ue=[],Se=this._animations[C];let Ke;const Be=new Map;if(Se?(Ke=Is(this._driver,T,Se,As,Ni,{},{},k,ei,ue),Ke.forEach(ar=>{const Nr=Ft(Be,ar.element,{});ar.postStyleProps.forEach(Jt=>Nr[Jt]=null)})):(ue.push(function rt(){return new F.vHH(3300,at)}()),Ke=[]),ue.length)throw function ct(Z){return new F.vHH(3504,at)}();Be.forEach((ar,Nr)=>{Object.keys(ar).forEach(Jt=>{ar[Jt]=this._driver.computeStyle(Nr,Jt,wt.l3)})});const Qt=On(Ke.map(ar=>{const Nr=Be.get(ar.element);return this._buildPlayer(ar,{},Nr)}));return this._playersById[C]=Qt,Qt.onDestroy(()=>this.destroy(C)),this.players.push(Qt),Qt}destroy(C){const T=this._getPlayer(C);T.destroy(),delete this._playersById[C];const k=this.players.indexOf(T);k>=0&&this.players.splice(k,1)}_getPlayer(C){const T=this._playersById[C];if(!T)throw function Gt(Z){return new F.vHH(3301,at)}();return T}listen(C,T,k,ue){const Se=kn(T,"","","");return Vr(this._getPlayer(C),k,Se,ue),()=>{}}command(C,T,k,ue){if("register"==k)return void this.register(C,ue[0]);if("create"==k)return void this.create(C,T,ue[0]||{});const Se=this._getPlayer(C);switch(k){case"play":Se.play();break;case"pause":Se.pause();break;case"reset":Se.reset();break;case"restart":Se.restart();break;case"finish":Se.finish();break;case"init":Se.init();break;case"setPosition":Se.setPosition(parseFloat(ue[0]));break;case"destroy":this.destroy(C)}}}const fi="ng-animate-queued",Di="ng-animate-disabled",Kr=[],Zs={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ko={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ys="__ng_removed";class _o{constructor(C,T=""){this.namespaceId=T;const k=C&&C.hasOwnProperty("value");if(this.value=function ee(Z){return null!=Z?Z:null}(k?C.value:C),k){const Se=Ui(C);delete Se.value,this.options=Se}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(C){const T=C.params;if(T){const k=this.options.params;Object.keys(T).forEach(ue=>{null==k[ue]&&(k[ue]=T[ue])})}}}const Q="void",G=new _o(Q);class V{constructor(C,T,k){this.id=C,this.hostElement=T,this._engine=k,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,_n(T,this._hostClassName)}listen(C,T,k,ue){if(!this._triggers.hasOwnProperty(T))throw function rn(Z,C){return new F.vHH(3302,at)}();if(null==k||0==k.length)throw function bn(Z){return new F.vHH(3303,at)}();if(!function Ce(Z){return"start"==Z||"done"==Z}(k))throw function zn(Z,C){return new F.vHH(3400,at)}();const Se=Ft(this._elementListeners,C,[]),Ke={name:T,phase:k,callback:ue};Se.push(Ke);const Be=Ft(this._engine.statesByElement,C,{});return Be.hasOwnProperty(T)||(_n(C,di),_n(C,di+"-"+T),Be[T]=G),()=>{this._engine.afterFlush(()=>{const It=Se.indexOf(Ke);It>=0&&Se.splice(It,1),this._triggers[T]||delete Be[T]})}}register(C,T){return!this._triggers[C]&&(this._triggers[C]=T,!0)}_getTrigger(C){const T=this._triggers[C];if(!T)throw function Jr(Z){return new F.vHH(3401,at)}();return T}trigger(C,T,k,ue=!0){const Se=this._getTrigger(T),Ke=new Ye(this.id,T,C);let Be=this._engine.statesByElement.get(C);Be||(_n(C,di),_n(C,di+"-"+T),this._engine.statesByElement.set(C,Be={}));let It=Be[T];const Qt=new _o(k,this.id);if(!(k&&k.hasOwnProperty("value"))&&It&&Qt.absorbOptions(It.options),Be[T]=Qt,It||(It=G),Qt.value!==Q&&It.value===Qt.value){if(!function yi(Z,C){const T=Object.keys(Z),k=Object.keys(C);if(T.length!=k.length)return!1;for(let ue=0;ue<T.length;ue++){const Se=T[ue];if(!C.hasOwnProperty(Se)||Z[Se]!==C[Se])return!1}return!0}(It.params,Qt.params)){const li=[],jn=Se.matchStyles(It.value,It.params,li),sr=Se.matchStyles(Qt.value,Qt.params,li);li.length?this._engine.reportError(li):this._engine.afterFlush(()=>{os(C,jn),Ar(C,sr)})}return}const Jt=Ft(this._engine.playersByElement,C,[]);Jt.forEach(li=>{li.namespaceId==this.id&&li.triggerName==T&&li.queued&&li.destroy()});let Sr=Se.matchTransition(It.value,Qt.value,C,Qt.params),hr=!1;if(!Sr){if(!ue)return;Sr=Se.fallbackTransition,hr=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:T,transition:Sr,fromState:It,toState:Qt,player:Ke,isFallbackTransition:hr}),hr||(_n(C,fi),Ke.onStart(()=>{br(C,fi)})),Ke.onDone(()=>{let li=this.players.indexOf(Ke);li>=0&&this.players.splice(li,1);const jn=this._engine.playersByElement.get(C);if(jn){let sr=jn.indexOf(Ke);sr>=0&&jn.splice(sr,1)}}),this.players.push(Ke),Jt.push(Ke),Ke}deregister(C){delete this._triggers[C],this._engine.statesByElement.forEach((T,k)=>{delete T[C]}),this._elementListeners.forEach((T,k)=>{this._elementListeners.set(k,T.filter(ue=>ue.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const T=this._engine.playersByElement.get(C);T&&(T.forEach(k=>k.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,T){const k=this._engine.driver.query(C,ss,!0);k.forEach(ue=>{if(ue[ys])return;const Se=this._engine.fetchNamespacesByElement(ue);Se.size?Se.forEach(Ke=>Ke.triggerLeaveAnimation(ue,T,!1,!0)):this.clearElementCache(ue)}),this._engine.afterFlushAnimationsDone(()=>k.forEach(ue=>this.clearElementCache(ue)))}triggerLeaveAnimation(C,T,k,ue){const Se=this._engine.statesByElement.get(C),Ke=new Map;if(Se){const Be=[];if(Object.keys(Se).forEach(It=>{if(Ke.set(It,Se[It].value),this._triggers[It]){const Qt=this.trigger(C,It,Q,ue);Qt&&Be.push(Qt)}}),Be.length)return this._engine.markElementAsRemoved(this.id,C,!0,T,Ke),k&&On(Be).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const T=this._elementListeners.get(C),k=this._engine.statesByElement.get(C);if(T&&k){const ue=new Set;T.forEach(Se=>{const Ke=Se.name;if(ue.has(Ke))return;ue.add(Ke);const It=this._triggers[Ke].fallbackTransition,Qt=k[Ke]||G,ar=new _o(Q),Nr=new Ye(this.id,Ke,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:Ke,transition:It,fromState:Qt,toState:ar,player:Nr,isFallbackTransition:!0})})}}removeNode(C,T){const k=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,T),this.triggerLeaveAnimation(C,T,!0))return;let ue=!1;if(k.totalAnimations){const Se=k.players.length?k.playersByQueriedElement.get(C):[];if(Se&&Se.length)ue=!0;else{let Ke=C;for(;Ke=Ke.parentNode;)if(k.statesByElement.get(Ke)){ue=!0;break}}}if(this.prepareLeaveAnimationListeners(C),ue)k.markElementAsRemoved(this.id,C,!1,T);else{const Se=C[ys];(!Se||Se===Zs)&&(k.afterFlush(()=>this.clearElementCache(C)),k.destroyInnerAnimations(C),k._onRemovalComplete(C,T))}}insertNode(C,T){_n(C,this._hostClassName)}drainQueuedTransitions(C){const T=[];return this._queue.forEach(k=>{const ue=k.player;if(ue.destroyed)return;const Se=k.element,Ke=this._elementListeners.get(Se);Ke&&Ke.forEach(Be=>{if(Be.name==k.triggerName){const It=kn(Se,k.triggerName,k.fromState.value,k.toState.value);It._data=C,Vr(k.player,Be.phase,It,Be.callback)}}),ue.markedForDestroy?this._engine.afterFlush(()=>{ue.destroy()}):T.push(k)}),this._queue=[],T.sort((k,ue)=>{const Se=k.transition.ast.depCount,Ke=ue.transition.ast.depCount;return 0==Se||0==Ke?Se-Ke:this._engine.driver.containsElement(k.element,ue.element)?1:-1})}destroy(C){this.players.forEach(T=>T.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}elementContainsData(C){let T=!1;return this._elementListeners.has(C)&&(T=!0),T=!!this._queue.find(k=>k.element===C)||T,T}}class ye{constructor(C,T,k){this.bodyNode=C,this.driver=T,this._normalizer=k,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ue,Se)=>{}}_onRemovalComplete(C,T){this.onRemovalComplete(C,T)}get queuedPlayers(){const C=[];return this._namespaceList.forEach(T=>{T.players.forEach(k=>{k.queued&&C.push(k)})}),C}createNamespace(C,T){const k=new V(C,T,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,T)?this._balanceNamespaceList(k,T):(this.newHostElements.set(T,k),this.collectEnterElement(T)),this._namespaceLookup[C]=k}_balanceNamespaceList(C,T){const k=this._namespaceList,ue=this.namespacesByHostElement,Se=k.length-1;if(Se>=0){let Ke=!1;if(void 0!==this.driver.getParentElement){let Be=this.driver.getParentElement(T);for(;Be;){const It=ue.get(Be);if(It){const Qt=k.indexOf(It);k.splice(Qt+1,0,C),Ke=!0;break}Be=this.driver.getParentElement(Be)}}else for(let Be=Se;Be>=0;Be--)if(this.driver.containsElement(k[Be].hostElement,T)){k.splice(Be+1,0,C),Ke=!0;break}Ke||k.unshift(C)}else k.push(C);return ue.set(T,C),C}register(C,T){let k=this._namespaceLookup[C];return k||(k=this.createNamespace(C,T)),k}registerTrigger(C,T,k){let ue=this._namespaceLookup[C];ue&&ue.register(T,k)&&this.totalAnimations++}destroy(C,T){if(!C)return;const k=this._fetchNamespace(C);this.afterFlush(()=>{this.namespacesByHostElement.delete(k.hostElement),delete this._namespaceLookup[C];const ue=this._namespaceList.indexOf(k);ue>=0&&this._namespaceList.splice(ue,1)}),this.afterFlushAnimationsDone(()=>k.destroy(T))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const T=new Set,k=this.statesByElement.get(C);if(k){const ue=Object.keys(k);for(let Se=0;Se<ue.length;Se++){const Ke=k[ue[Se]].namespaceId;if(Ke){const Be=this._fetchNamespace(Ke);Be&&T.add(Be)}}}return T}trigger(C,T,k,ue){if(K(T)){const Se=this._fetchNamespace(C);if(Se)return Se.trigger(T,k,ue),!0}return!1}insertNode(C,T,k,ue){if(!K(T))return;const Se=T[ys];if(Se&&Se.setForRemoval){Se.setForRemoval=!1,Se.setForMove=!0;const Ke=this.collectedLeaveElements.indexOf(T);Ke>=0&&this.collectedLeaveElements.splice(Ke,1)}if(C){const Ke=this._fetchNamespace(C);Ke&&Ke.insertNode(T,k)}ue&&this.collectEnterElement(T)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,T){T?this.disabledNodes.has(C)||(this.disabledNodes.add(C),_n(C,Di)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),br(C,Di))}removeNode(C,T,k,ue){if(K(T)){const Se=C?this._fetchNamespace(C):null;if(Se?Se.removeNode(T,ue):this.markElementAsRemoved(C,T,!1,ue),k){const Ke=this.namespacesByHostElement.get(T);Ke&&Ke.id!==C&&Ke.removeNode(T,ue)}}else this._onRemovalComplete(T,ue)}markElementAsRemoved(C,T,k,ue,Se){this.collectedLeaveElements.push(T),T[ys]={namespaceId:C,setForRemoval:ue,hasAnimation:k,removedBeforeQueried:!1,previousTriggersValues:Se}}listen(C,T,k,ue,Se){return K(T)?this._fetchNamespace(C).listen(T,k,ue,Se):()=>{}}_buildInstruction(C,T,k,ue,Se){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,k,ue,C.fromState.options,C.toState.options,T,Se)}destroyInnerAnimations(C){let T=this.driver.query(C,ss,!0);T.forEach(k=>this.destroyActiveAnimationsForElement(k)),0!=this.playersByQueriedElement.size&&(T=this.driver.query(C,En,!0),T.forEach(k=>this.finishActiveQueriedAnimationOnElement(k)))}destroyActiveAnimationsForElement(C){const T=this.playersByElement.get(C);T&&T.forEach(k=>{k.queued?k.markedForDestroy=!0:k.destroy()})}finishActiveQueriedAnimationOnElement(C){const T=this.playersByQueriedElement.get(C);T&&T.forEach(k=>k.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return On(this.players).onDone(()=>C());C()})}processLeaveNode(C){var T;const k=C[ys];if(k&&k.setForRemoval){if(C[ys]=Zs,k.namespaceId){this.destroyInnerAnimations(C);const ue=this._fetchNamespace(k.namespaceId);ue&&ue.clearElementCache(C)}this._onRemovalComplete(C,k.setForRemoval)}(null===(T=C.classList)||void 0===T?void 0:T.contains(Di))&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach(ue=>{this.markElementAsDisabled(ue,!1)})}flush(C=-1){let T=[];if(this.newHostElements.size&&(this.newHostElements.forEach((k,ue)=>this._balanceNamespaceList(k,ue)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let k=0;k<this.collectedEnterElements.length;k++)_n(this.collectedEnterElements[k],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const k=[];try{T=this._flushAnimations(k,C)}finally{for(let ue=0;ue<k.length;ue++)k[ue]()}}else for(let k=0;k<this.collectedLeaveElements.length;k++)this.processLeaveNode(this.collectedLeaveElements[k]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(k=>k()),this._flushFns=[],this._whenQuietFns.length){const k=this._whenQuietFns;this._whenQuietFns=[],T.length?On(T).onDone(()=>{k.forEach(ue=>ue())}):k.forEach(ue=>ue())}}reportError(C){throw function Gr(Z){return new F.vHH(3402,at)}()}_flushAnimations(C,T){const k=new Ms,ue=[],Se=new Map,Ke=[],Be=new Map,It=new Map,Qt=new Map,ar=new Set;this.disabledNodes.forEach(Ne=>{ar.add(Ne);const Mt=this.driver.query(Ne,".ng-animate-queued",!0);for(let jt=0;jt<Mt.length;jt++)ar.add(Mt[jt])});const Nr=this.bodyNode,Jt=Array.from(this.statesByElement.keys()),Sr=qt(Jt,this.collectedEnterElements),hr=new Map;let li=0;Sr.forEach((Ne,Mt)=>{const jt=As+li++;hr.set(Mt,jt),Ne.forEach(pr=>_n(pr,jt))});const jn=[],sr=new Set,ao=new Set;for(let Ne=0;Ne<this.collectedLeaveElements.length;Ne++){const Mt=this.collectedLeaveElements[Ne],jt=Mt[ys];jt&&jt.setForRemoval&&(jn.push(Mt),sr.add(Mt),jt.hasAnimation?this.driver.query(Mt,".ng-star-inserted",!0).forEach(pr=>sr.add(pr)):ao.add(Mt))}const Kn=new Map,$t=qt(Jt,Array.from(sr));$t.forEach((Ne,Mt)=>{const jt=Ni+li++;Kn.set(Mt,jt),Ne.forEach(pr=>_n(pr,jt))}),C.push(()=>{Sr.forEach((Ne,Mt)=>{const jt=hr.get(Mt);Ne.forEach(pr=>br(pr,jt))}),$t.forEach((Ne,Mt)=>{const jt=Kn.get(Mt);Ne.forEach(pr=>br(pr,jt))}),jn.forEach(Ne=>{this.processLeaveNode(Ne)})});const An=[],ps=[];for(let Ne=this._namespaceList.length-1;Ne>=0;Ne--)this._namespaceList[Ne].drainQueuedTransitions(T).forEach(jt=>{const pr=jt.player,cr=jt.element;if(An.push(pr),this.collectedEnterElements.length){const Un=cr[ys];if(Un&&Un.setForMove){if(Un.previousTriggersValues&&Un.previousTriggersValues.has(jt.triggerName)){const lo=Un.previousTriggersValues.get(jt.triggerName),Ao=this.statesByElement.get(jt.element);Ao&&Ao[jt.triggerName]&&(Ao[jt.triggerName].value=lo)}return void pr.destroy()}}const Or=!Nr||!this.driver.containsElement(Nr,cr),Bn=Kn.get(cr),Ys=hr.get(cr),vr=this._buildInstruction(jt,k,Ys,Bn,Or);if(vr.errors&&vr.errors.length)return void ps.push(vr);if(Or)return pr.onStart(()=>os(cr,vr.fromStyles)),pr.onDestroy(()=>Ar(cr,vr.toStyles)),void ue.push(pr);if(jt.isFallbackTransition)return pr.onStart(()=>os(cr,vr.fromStyles)),pr.onDestroy(()=>Ar(cr,vr.toStyles)),void ue.push(pr);const ua=[];vr.timelines.forEach(Un=>{Un.stretchStartingKeyframe=!0,this.disabledNodes.has(Un.element)||ua.push(Un)}),vr.timelines=ua,k.append(cr,vr.timelines),Ke.push({instruction:vr,player:pr,element:cr}),vr.queriedElements.forEach(Un=>Ft(Be,Un,[]).push(pr)),vr.preStyleProps.forEach((Un,lo)=>{const Ao=Object.keys(Un);if(Ao.length){let Vs=It.get(lo);Vs||It.set(lo,Vs=new Set),Ao.forEach(Ea=>Vs.add(Ea))}}),vr.postStyleProps.forEach((Un,lo)=>{const Ao=Object.keys(Un);let Vs=Qt.get(lo);Vs||Qt.set(lo,Vs=new Set),Ao.forEach(Ea=>Vs.add(Ea))})});if(ps.length){const Ne=[];ps.forEach(Mt=>{Ne.push(function as(Z,C){return new F.vHH(3505,at)}())}),An.forEach(Mt=>Mt.destroy()),this.reportError(Ne)}const Ps=new Map,jo=new Map;Ke.forEach(Ne=>{const Mt=Ne.element;k.has(Mt)&&(jo.set(Mt,Mt),this._beforeAnimationBuild(Ne.player.namespaceId,Ne.instruction,Ps))}),ue.forEach(Ne=>{const Mt=Ne.element;this._getPreviousPlayers(Mt,!1,Ne.namespaceId,Ne.triggerName,null).forEach(pr=>{Ft(Ps,Mt,[]).push(pr),pr.destroy()})});const O=jn.filter(Ne=>$i(Ne,It,Qt)),M=new Map;it(M,this.driver,ao,Qt,wt.l3).forEach(Ne=>{$i(Ne,It,Qt)&&O.push(Ne)});const q=new Map;Sr.forEach((Ne,Mt)=>{it(q,this.driver,new Set(Ne),It,wt.k1)}),O.forEach(Ne=>{const Mt=M.get(Ne),jt=q.get(Ne);M.set(Ne,Object.assign(Object.assign({},Mt),jt))});const ne=[],_e=[],$e={};Ke.forEach(Ne=>{const{element:Mt,player:jt,instruction:pr}=Ne;if(k.has(Mt)){if(ar.has(Mt))return jt.onDestroy(()=>Ar(Mt,pr.toStyles)),jt.disabled=!0,jt.overrideTotalTime(pr.totalTime),void ue.push(jt);let cr=$e;if(jo.size>1){let Bn=Mt;const Ys=[];for(;Bn=Bn.parentNode;){const vr=jo.get(Bn);if(vr){cr=vr;break}Ys.push(Bn)}Ys.forEach(vr=>jo.set(vr,cr))}const Or=this._buildAnimation(jt.namespaceId,pr,Ps,Se,q,M);if(jt.setRealPlayer(Or),cr===$e)ne.push(jt);else{const Bn=this.playersByElement.get(cr);Bn&&Bn.length&&(jt.parentPlayer=On(Bn)),ue.push(jt)}}else os(Mt,pr.fromStyles),jt.onDestroy(()=>Ar(Mt,pr.toStyles)),_e.push(jt),ar.has(Mt)&&ue.push(jt)}),_e.forEach(Ne=>{const Mt=Se.get(Ne.element);if(Mt&&Mt.length){const jt=On(Mt);Ne.setRealPlayer(jt)}}),ue.forEach(Ne=>{Ne.parentPlayer?Ne.syncPlayerEvents(Ne.parentPlayer):Ne.destroy()});for(let Ne=0;Ne<jn.length;Ne++){const Mt=jn[Ne],jt=Mt[ys];if(br(Mt,Ni),jt&&jt.hasAnimation)continue;let pr=[];if(Be.size){let Or=Be.get(Mt);Or&&Or.length&&pr.push(...Or);let Bn=this.driver.query(Mt,En,!0);for(let Ys=0;Ys<Bn.length;Ys++){let vr=Be.get(Bn[Ys]);vr&&vr.length&&pr.push(...vr)}}const cr=pr.filter(Or=>!Or.destroyed);cr.length?Xn(this,Mt,cr):this.processLeaveNode(Mt)}return jn.length=0,ne.forEach(Ne=>{this.players.push(Ne),Ne.onDone(()=>{Ne.destroy();const Mt=this.players.indexOf(Ne);this.players.splice(Mt,1)}),Ne.play()}),ne}elementContainsData(C,T){let k=!1;const ue=T[ys];return ue&&ue.setForRemoval&&(k=!0),this.playersByElement.has(T)&&(k=!0),this.playersByQueriedElement.has(T)&&(k=!0),this.statesByElement.has(T)&&(k=!0),this._fetchNamespace(C).elementContainsData(T)||k}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,T,k,ue,Se){let Ke=[];if(T){const Be=this.playersByQueriedElement.get(C);Be&&(Ke=Be)}else{const Be=this.playersByElement.get(C);if(Be){const It=!Se||Se==Q;Be.forEach(Qt=>{Qt.queued||!It&&Qt.triggerName!=ue||Ke.push(Qt)})}}return(k||ue)&&(Ke=Ke.filter(Be=>!(k&&k!=Be.namespaceId||ue&&ue!=Be.triggerName))),Ke}_beforeAnimationBuild(C,T,k){const Se=T.element,Ke=T.isRemovalTransition?void 0:C,Be=T.isRemovalTransition?void 0:T.triggerName;for(const It of T.timelines){const Qt=It.element,ar=Qt!==Se,Nr=Ft(k,Qt,[]);this._getPreviousPlayers(Qt,ar,Ke,Be,T.toState).forEach(Sr=>{const hr=Sr.getRealPlayer();hr.beforeDestroy&&hr.beforeDestroy(),Sr.destroy(),Nr.push(Sr)})}os(Se,T.fromStyles)}_buildAnimation(C,T,k,ue,Se,Ke){const Be=T.triggerName,It=T.element,Qt=[],ar=new Set,Nr=new Set,Jt=T.timelines.map(hr=>{const li=hr.element;ar.add(li);const jn=li[ys];if(jn&&jn.removedBeforeQueried)return new wt.ZN(hr.duration,hr.delay);const sr=li!==It,ao=function ri(Z){const C=[];return _i(Z,C),C}((k.get(li)||Kr).map(Ps=>Ps.getRealPlayer())).filter(Ps=>!!Ps.element&&Ps.element===li),Kn=Se.get(li),$t=Ke.get(li),An=Si(0,this._normalizer,0,hr.keyframes,Kn,$t),ps=this._buildPlayer(hr,An,ao);if(hr.subTimeline&&ue&&Nr.add(li),sr){const Ps=new Ye(C,Be,li);Ps.setRealPlayer(ps),Qt.push(Ps)}return ps});Qt.forEach(hr=>{Ft(this.playersByQueriedElement,hr.element,[]).push(hr),hr.onDone(()=>function Pn(Z,C,T){let k;if(Z instanceof Map){if(k=Z.get(C),k){if(k.length){const ue=k.indexOf(T);k.splice(ue,1)}0==k.length&&Z.delete(C)}}else if(k=Z[C],k){if(k.length){const ue=k.indexOf(T);k.splice(ue,1)}0==k.length&&delete Z[C]}return k}(this.playersByQueriedElement,hr.element,hr))}),ar.forEach(hr=>_n(hr,Oi));const Sr=On(Jt);return Sr.onDestroy(()=>{ar.forEach(hr=>br(hr,Oi)),Ar(It,T.toStyles)}),Nr.forEach(hr=>{Ft(ue,hr,[]).push(Sr)}),Sr}_buildPlayer(C,T,k){return T.length>0?this.driver.animate(C.element,T,C.duration,C.delay,C.easing,k):new wt.ZN(C.duration,C.delay)}}class Ye{constructor(C,T,k){this.namespaceId=C,this.triggerName=T,this.element=k,this._player=new wt.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,Object.keys(this._queuedCallbacks).forEach(T=>{this._queuedCallbacks[T].forEach(k=>Vr(C,T,void 0,k))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const T=this._player;T.triggerCallback&&C.onStart(()=>T.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,T){Ft(this._queuedCallbacks,C,[]).push(T)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const T=this._player;T.triggerCallback&&T.triggerCallback(C)}}function K(Z){return Z&&1===Z.nodeType}function Ve(Z,C){const T=Z.style.display;return Z.style.display=null!=C?C:"none",T}function it(Z,C,T,k,ue){const Se=[];T.forEach(It=>Se.push(Ve(It)));const Ke=[];k.forEach((It,Qt)=>{const ar={};It.forEach(Nr=>{const Jt=ar[Nr]=C.computeStyle(Qt,Nr,ue);(!Jt||0==Jt.length)&&(Qt[ys]=ko,Ke.push(Qt))}),Z.set(Qt,ar)});let Be=0;return T.forEach(It=>Ve(It,Se[Be++])),Ke}function qt(Z,C){const T=new Map;if(Z.forEach(Be=>T.set(Be,[])),0==C.length)return T;const ue=new Set(C),Se=new Map;function Ke(Be){if(!Be)return 1;let It=Se.get(Be);if(It)return It;const Qt=Be.parentNode;return It=T.has(Qt)?Qt:ue.has(Qt)?1:Ke(Qt),Se.set(Be,It),It}return C.forEach(Be=>{const It=Ke(Be);1!==It&&T.get(It).push(Be)}),T}function _n(Z,C){var T;null===(T=Z.classList)||void 0===T||T.add(C)}function br(Z,C){var T;null===(T=Z.classList)||void 0===T||T.remove(C)}function Xn(Z,C,T){On(T).onDone(()=>Z.processLeaveNode(C))}function _i(Z,C){for(let T=0;T<Z.length;T++){const k=Z[T];k instanceof wt.ZE?_i(k.players,C):C.push(k)}}function $i(Z,C,T){const k=T.get(Z);if(!k)return!1;let ue=C.get(Z);return ue?k.forEach(Se=>ue.add(Se)):C.set(Z,k),T.delete(Z),!0}class ts{constructor(C,T,k){this.bodyNode=C,this._driver=T,this._normalizer=k,this._triggerCache={},this.onRemovalComplete=(ue,Se)=>{},this._transitionEngine=new ye(C,T,k),this._timelineEngine=new ni(C,T,k),this._transitionEngine.onRemovalComplete=(ue,Se)=>this.onRemovalComplete(ue,Se)}registerTrigger(C,T,k,ue,Se){const Ke=C+"-"+ue;let Be=this._triggerCache[Ke];if(!Be){const It=[],ar=Ii(this._driver,Se,It,[]);if(It.length)throw function rs(Z,C){return new F.vHH(3404,at)}();Be=function sn(Z,C,T){return new wn(Z,C,T)}(ue,ar,this._normalizer),this._triggerCache[Ke]=Be}this._transitionEngine.registerTrigger(T,ue,Be)}register(C,T){this._transitionEngine.register(C,T)}destroy(C,T){this._transitionEngine.destroy(C,T)}onInsert(C,T,k,ue){this._transitionEngine.insertNode(C,T,k,ue)}onRemove(C,T,k,ue){this._transitionEngine.removeNode(C,T,ue||!1,k)}disableAnimations(C,T){this._transitionEngine.markElementAsDisabled(C,T)}process(C,T,k,ue){if("@"==k.charAt(0)){const[Se,Ke]=Yn(k);this._timelineEngine.command(Se,T,Ke,ue)}else this._transitionEngine.trigger(C,T,k,ue)}listen(C,T,k,ue,Se){if("@"==k.charAt(0)){const[Ke,Be]=Yn(k);return this._timelineEngine.listen(Ke,T,Be,Se)}return this._transitionEngine.listen(C,T,k,ue,Se)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let A=(()=>{class Z{constructor(T,k,ue){this._element=T,this._startStyles=k,this._endStyles=ue,this._state=0;let Se=Z.initialStylesByElement.get(T);Se||Z.initialStylesByElement.set(T,Se={}),this._initialStyles=Se}start(){this._state<1&&(this._startStyles&&Ar(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ar(this._element,this._initialStyles),this._endStyles&&(Ar(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Z.initialStylesByElement.delete(this._element),this._startStyles&&(os(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(os(this._element,this._endStyles),this._endStyles=null),Ar(this._element,this._initialStyles),this._state=3)}}return Z.initialStylesByElement=new WeakMap,Z})();function I(Z){let C=null;const T=Object.keys(Z);for(let k=0;k<T.length;k++){const ue=T[k];P(ue)&&(C=C||{},C[ue]=Z[ue])}return C}function P(Z){return"display"===Z||"position"===Z}class z{constructor(C,T,k,ue){this.element=C,this.keyframes=T,this.options=k,this._specialStyles=ue,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=k.duration,this._delay=k.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(C,T,k){return C.animate(T,k)}onStart(C){this._onStartFns.push(C)}onDone(C){this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C={};if(this.hasStarted()){const T=this._finalKeyframe;Object.keys(T).forEach(k=>{"offset"!=k&&(C[k]=this._finished?T[k]:qr(this.element,k))})}this.currentSnapshot=C}triggerCallback(C){const T="start"==C?this._onStartFns:this._onDoneFns;T.forEach(k=>k()),T.length=0}}class J{validateStyleProperty(C){return Ge(C)}matchesElement(C,T){return!1}containsElement(C,T){return Ae(C,T)}getParentElement(C){return Je(C)}query(C,T,k){return gt(C,T,k)}computeStyle(C,T,k){return window.getComputedStyle(C)[T]}animate(C,T,k,ue,Se,Ke=[]){const It={duration:k,delay:ue,fill:0==ue?"both":"forwards"};Se&&(It.easing=Se);const Qt={},ar=Ke.filter(Jt=>Jt instanceof z);(function zi(Z,C){return 0===Z||0===C})(k,ue)&&ar.forEach(Jt=>{let Sr=Jt.currentSnapshot;Object.keys(Sr).forEach(hr=>Qt[hr]=Sr[hr])}),T=function hs(Z,C,T){const k=Object.keys(T);if(k.length&&C.length){let Se=C[0],Ke=[];if(k.forEach(Be=>{Se.hasOwnProperty(Be)||Ke.push(Be),Se[Be]=T[Be]}),Ke.length)for(var ue=1;ue<C.length;ue++){let Be=C[ue];Ke.forEach(function(It){Be[It]=qr(Z,It)})}}return C}(C,T=T.map(Jt=>Ti(Jt,!1)),Qt);const Nr=function l(Z,C){let T=null,k=null;return Array.isArray(C)&&C.length?(T=I(C[0]),C.length>1&&(k=I(C[C.length-1]))):C&&(T=I(C)),T||k?new A(Z,T,k):null}(C,T);return new z(C,T,It,Nr)}}let me=(()=>{class Z extends wt._j{constructor(T,k){super(),this._nextAnimationId=0,this._renderer=T.createRenderer(k.body,{id:"0",encapsulation:F.ifc.None,styles:[],data:{animation:[]}})}build(T){const k=this._nextAnimationId.toString();this._nextAnimationId++;const ue=Array.isArray(T)?(0,wt.vP)(T):T;return ge(this._renderer,null,k,"register",[ue]),new be(k,this._renderer)}}return Z.\u0275fac=function(T){return new(T||Z)(F.LFG(F.FYo),F.LFG(Ze.K0))},Z.\u0275prov=F.Yz7({token:Z,factory:Z.\u0275fac}),Z})();class be extends wt.LC{constructor(C,T){super(),this._id=C,this._renderer=T}create(C,T){return new oe(this._id,C,T||{},this._renderer)}}class oe{constructor(C,T,k,ue){this.id=C,this.element=T,this._renderer=ue,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",k)}_listen(C,T){return this._renderer.listen(this.element,`@@${this.id}:${C}`,T)}_command(C,...T){return ge(this._renderer,this.element,this.id,C,T)}onDone(C){this._listen("done",C)}onStart(C){this._listen("start",C)}onDestroy(C){this._listen("destroy",C)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(C){this._command("setPosition",C)}getPosition(){var C,T;return null!==(T=null===(C=this._renderer.engine.players[+this.id])||void 0===C?void 0:C.getPosition())&&void 0!==T?T:0}}function ge(Z,C,T,k,ue){return Z.setProperty(C,`@@${T}:${k}`,ue)}const le="@.disabled";let Te=(()=>{class Z{constructor(T,k,ue){this.delegate=T,this.engine=k,this._zone=ue,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),k.onRemovalComplete=(Se,Ke)=>{const Be=null==Ke?void 0:Ke.parentNode(Se);Be&&Ke.removeChild(Be,Se)}}createRenderer(T,k){const Se=this.delegate.createRenderer(T,k);if(!(T&&k&&k.data&&k.data.animation)){let ar=this._rendererCache.get(Se);return ar||(ar=new ze("",Se,this.engine),this._rendererCache.set(Se,ar)),ar}const Ke=k.id,Be=k.id+"-"+this._currentId;this._currentId++,this.engine.register(Be,T);const It=ar=>{Array.isArray(ar)?ar.forEach(It):this.engine.registerTrigger(Ke,Be,T,ar.name,ar)};return k.data.animation.forEach(It),new nt(this,Be,Se,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(T,k,ue){T>=0&&T<this._microtaskId?this._zone.run(()=>k(ue)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Se=>{const[Ke,Be]=Se;Ke(Be)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([k,ue]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Z.\u0275fac=function(T){return new(T||Z)(F.LFG(F.FYo),F.LFG(ts),F.LFG(F.R0b))},Z.\u0275prov=F.Yz7({token:Z,factory:Z.\u0275fac}),Z})();class ze{constructor(C,T,k){this.namespaceId=C,this.delegate=T,this.engine=k,this.destroyNode=this.delegate.destroyNode?ue=>T.destroyNode(ue):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(C,T){return this.delegate.createElement(C,T)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,T){this.delegate.appendChild(C,T),this.engine.onInsert(this.namespaceId,T,C,!1)}insertBefore(C,T,k,ue=!0){this.delegate.insertBefore(C,T,k),this.engine.onInsert(this.namespaceId,T,C,ue)}removeChild(C,T,k){this.engine.onRemove(this.namespaceId,T,this.delegate,k)}selectRootElement(C,T){return this.delegate.selectRootElement(C,T)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,T,k,ue){this.delegate.setAttribute(C,T,k,ue)}removeAttribute(C,T,k){this.delegate.removeAttribute(C,T,k)}addClass(C,T){this.delegate.addClass(C,T)}removeClass(C,T){this.delegate.removeClass(C,T)}setStyle(C,T,k,ue){this.delegate.setStyle(C,T,k,ue)}removeStyle(C,T,k){this.delegate.removeStyle(C,T,k)}setProperty(C,T,k){"@"==T.charAt(0)&&T==le?this.disableAnimations(C,!!k):this.delegate.setProperty(C,T,k)}setValue(C,T){this.delegate.setValue(C,T)}listen(C,T,k){return this.delegate.listen(C,T,k)}disableAnimations(C,T){this.engine.disableAnimations(C,T)}}class nt extends ze{constructor(C,T,k,ue){super(T,k,ue),this.factory=C,this.namespaceId=T}setProperty(C,T,k){"@"==T.charAt(0)?"."==T.charAt(1)&&T==le?this.disableAnimations(C,k=void 0===k||!!k):this.engine.process(this.namespaceId,C,T.substr(1),k):this.delegate.setProperty(C,T,k)}listen(C,T,k){if("@"==T.charAt(0)){const ue=function De(Z){switch(Z){case"body":return document.body;case"document":return document;case"window":return window;default:return Z}}(C);let Se=T.substr(1),Ke="";return"@"!=Se.charAt(0)&&([Se,Ke]=function Fe(Z){const C=Z.indexOf(".");return[Z.substring(0,C),Z.substr(C+1)]}(Se)),this.engine.listen(this.namespaceId,ue,Se,Ke,Be=>{this.factory.scheduleListenerCallback(Be._data||-1,k,Be)})}return this.delegate.listen(C,T,k)}}let _t=(()=>{class Z extends ts{constructor(T,k,ue){super(T.body,k,ue)}ngOnDestroy(){this.flush()}}return Z.\u0275fac=function(T){return new(T||Z)(F.LFG(Ze.K0),F.LFG(qn),F.LFG(Rs))},Z.\u0275prov=F.Yz7({token:Z,factory:Z.\u0275fac}),Z})();const vn=new F.OlP("AnimationModuleType"),Sn=[{provide:wt._j,useClass:me},{provide:Rs,useFactory:function tt(){return new Ls}},{provide:ts,useClass:_t},{provide:F.FYo,useFactory:function yt(Z,C,T){return new Te(Z,C,T)},deps:[g.se,ts,F.R0b]}],gn=[{provide:qn,useFactory:()=>new J},{provide:vn,useValue:"BrowserAnimations"},...Sn],Rn=[{provide:qn,useClass:_r},{provide:vn,useValue:"NoopAnimations"},...Sn];let er=(()=>{class Z{static withConfig(T){return{ngModule:Z,providers:T.disableAnimations?Rn:gn}}}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=F.oAB({type:Z}),Z.\u0275inj=F.cJS({providers:gn,imports:[g.b2]}),Z})();var Fn=j(4466),en=j(520);let Nt=(()=>{class Z{constructor(){}intercept(T,k){let ue=T.clone({setHeaders:{Authorization:`Bearer ${localStorage.getItem("drastitoken")}`}});return k.handle(ue)}}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275prov=F.Yz7({token:Z,factory:Z.\u0275fac}),Z})();var hn=j(262),or=j(2843);let ir=(()=>{class Z{constructor(T,k,ue){this.router=T,this.cartService=k,this.toastr=ue}intercept(T,k){return k.handle(T).pipe((0,hn.K)(ue=>{var Se,Ke,Be;let It=null===(Se=null==ue?void 0:ue.error)||void 0===Se?void 0:Se.errors;if(Array.isArray(It)&&(null==It?void 0:It.length))for(let Qt=0;Qt<(null==It?void 0:It.length);Qt++)(null===(Ke=It[Qt])||void 0===Ke?void 0:Ke.message)&&this.toastr.error(null===(Be=It[Qt])||void 0===Be?void 0:Be.message);else(null==It?void 0:It.message)&&this.toastr.error(null==It?void 0:It.message);return-1!==[401,403].indexOf(ue.status)&&(this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username")),(0,or._)(ue)}))}}return Z.\u0275fac=function(T){return new(T||Z)(F.LFG(pe.F0),F.LFG(Ln.N),F.LFG(pt._W))},Z.\u0275prov=F.Yz7({token:Z,factory:Z.\u0275fac}),Z})();var zt=j(2011),ur=j(1205),Jn=j(2095);let vi=(()=>{class Z{}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=F.oAB({type:Z,bootstrap:[et]}),Z.\u0275inj=F.cJS({providers:[{provide:en.TP,useClass:Nt,multi:!0},{provide:en.TP,useClass:ir,multi:!0}],imports:[[g.b2.withServerTransition({appId:"serverApp"}),In,er,Fn.m,Jn.yb,ur.ww,zt.hO.initializeApp({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"})]]}),Z})();function Ws(){g.q6().bootstrapModule(vi).catch(Z=>console.error(Z))}j(2340).N.production&&(0,F.G48)(),"complete"===document.readyState?Ws():document.addEventListener("DOMContentLoaded",Ws)},1135:(Wn,At,j)=>{j.d(At,{X:()=>F});var g=j(7579);class F extends g.x{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const We=super._subscribe(ae);return!We.closed&&ae.next(this._value),We}getValue(){const{hasError:ae,thrownError:We,_value:Xe}=this;if(ae)throw We;return this._throwIfClosed(),Xe}next(ae){super.next(this._value=ae)}}},8306:(Wn,At,j)=>{j.d(At,{y:()=>Oe});var g=j(2961),F=j(727),pe=j(8822),ae=j(4671);var pt=j(2416),Ze=j(576),ht=j(2806);let Oe=(()=>{class vt{constructor(In){In&&(this._subscribe=In)}lift(In){const Ot=new vt;return Ot.source=this,Ot.operator=In,Ot}subscribe(In,Ot,Zt){const Ln=function Cn(vt){return vt&&vt instanceof g.Lv||function Et(vt){return vt&&(0,Ze.m)(vt.next)&&(0,Ze.m)(vt.error)&&(0,Ze.m)(vt.complete)}(vt)&&(0,F.Nn)(vt)}(In)?In:new g.Hp(In,Ot,Zt);return(0,ht.x)(()=>{const{operator:fn,source:xe}=this;Ln.add(fn?fn.call(Ln,xe):xe?this._subscribe(Ln):this._trySubscribe(Ln))}),Ln}_trySubscribe(In){try{return this._subscribe(In)}catch(Ot){In.error(Ot)}}forEach(In,Ot){return new(Ot=Pe(Ot))((Zt,Ln)=>{const fn=new g.Hp({next:xe=>{try{In(xe)}catch(He){Ln(He),fn.unsubscribe()}},error:Ln,complete:Zt});this.subscribe(fn)})}_subscribe(In){var Ot;return null===(Ot=this.source)||void 0===Ot?void 0:Ot.subscribe(In)}[pe.L](){return this}pipe(...In){return function Xe(vt){return 0===vt.length?ae.y:1===vt.length?vt[0]:function(In){return vt.reduce((Ot,Zt)=>Zt(Ot),In)}}(In)(this)}toPromise(In){return new(In=Pe(In))((Ot,Zt)=>{let Ln;this.subscribe(fn=>Ln=fn,fn=>Zt(fn),()=>Ot(Ln))})}}return vt.create=un=>new vt(un),vt})();function Pe(vt){var un;return null!==(un=null!=vt?vt:pt.v.Promise)&&void 0!==un?un:Promise}},7579:(Wn,At,j)=>{j.d(At,{x:()=>pt});var g=j(8306),F=j(727);const ae=(0,j(3888).d)(ht=>function(){ht(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var We=j(8737),Xe=j(2806);let pt=(()=>{class ht extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Pe){const Et=new Ze(this,this);return Et.operator=Pe,Et}_throwIfClosed(){if(this.closed)throw new ae}next(Pe){(0,Xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Et of this.currentObservers)Et.next(Pe)}})}error(Pe){(0,Xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Pe;const{observers:Et}=this;for(;Et.length;)Et.shift().error(Pe)}})}complete(){(0,Xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Pe;return(null===(Pe=this.observers)||void 0===Pe?void 0:Pe.length)>0}_trySubscribe(Pe){return this._throwIfClosed(),super._trySubscribe(Pe)}_subscribe(Pe){return this._throwIfClosed(),this._checkFinalizedStatuses(Pe),this._innerSubscribe(Pe)}_innerSubscribe(Pe){const{hasError:Et,isStopped:Cn,observers:vt}=this;return Et||Cn?F.Lc:(this.currentObservers=null,vt.push(Pe),new F.w0(()=>{this.currentObservers=null,(0,We.P)(vt,Pe)}))}_checkFinalizedStatuses(Pe){const{hasError:Et,thrownError:Cn,isStopped:vt}=this;Et?Pe.error(Cn):vt&&Pe.complete()}asObservable(){const Pe=new g.y;return Pe.source=this,Pe}}return ht.create=(Oe,Pe)=>new Ze(Oe,Pe),ht})();class Ze extends pt{constructor(Oe,Pe){super(),this.destination=Oe,this.source=Pe}next(Oe){var Pe,Et;null===(Et=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.next)||void 0===Et||Et.call(Pe,Oe)}error(Oe){var Pe,Et;null===(Et=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.error)||void 0===Et||Et.call(Pe,Oe)}complete(){var Oe,Pe;null===(Pe=null===(Oe=this.destination)||void 0===Oe?void 0:Oe.complete)||void 0===Pe||Pe.call(Oe)}_subscribe(Oe){var Pe,Et;return null!==(Et=null===(Pe=this.source)||void 0===Pe?void 0:Pe.subscribe(Oe))&&void 0!==Et?Et:F.Lc}}},2961:(Wn,At,j)=>{j.d(At,{Hp:()=>In,Lv:()=>Et});var g=j(576),F=j(727),pe=j(2416),ae=j(7849);function We(){}const Xe=ht("C",void 0,void 0);function ht(xe,He,St){return{kind:xe,value:He,error:St}}var Oe=j(3410),Pe=j(2806);class Et extends F.w0{constructor(He){super(),this.isStopped=!1,He?(this.destination=He,(0,F.Nn)(He)&&He.add(this)):this.destination=fn}static create(He,St,an){return new In(He,St,an)}next(He){this.isStopped?Ln(function Ze(xe){return ht("N",xe,void 0)}(He),this):this._next(He)}error(He){this.isStopped?Ln(function pt(xe){return ht("E",void 0,xe)}(He),this):(this.isStopped=!0,this._error(He))}complete(){this.isStopped?Ln(Xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(He){this.destination.next(He)}_error(He){try{this.destination.error(He)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Cn=Function.prototype.bind;function vt(xe,He){return Cn.call(xe,He)}class un{constructor(He){this.partialObserver=He}next(He){const{partialObserver:St}=this;if(St.next)try{St.next(He)}catch(an){Ot(an)}}error(He){const{partialObserver:St}=this;if(St.error)try{St.error(He)}catch(an){Ot(an)}else Ot(He)}complete(){const{partialObserver:He}=this;if(He.complete)try{He.complete()}catch(St){Ot(St)}}}class In extends Et{constructor(He,St,an){let Ht;if(super(),(0,g.m)(He)||!He)Ht={next:null!=He?He:void 0,error:null!=St?St:void 0,complete:null!=an?an:void 0};else{let ke;this&&pe.v.useDeprecatedNextContext?(ke=Object.create(He),ke.unsubscribe=()=>this.unsubscribe(),Ht={next:He.next&&vt(He.next,ke),error:He.error&&vt(He.error,ke),complete:He.complete&&vt(He.complete,ke)}):Ht=He}this.destination=new un(Ht)}}function Ot(xe){pe.v.useDeprecatedSynchronousErrorHandling?(0,Pe.O)(xe):(0,ae.h)(xe)}function Ln(xe,He){const{onStoppedNotification:St}=pe.v;St&&Oe.z.setTimeout(()=>St(xe,He))}const fn={closed:!0,next:We,error:function Zt(xe){throw xe},complete:We}},727:(Wn,At,j)=>{j.d(At,{Lc:()=>Xe,w0:()=>We,Nn:()=>pt});var g=j(576);const pe=(0,j(3888).d)(ht=>function(Pe){ht(this),this.message=Pe?`${Pe.length} errors occurred during unsubscription:\n${Pe.map((Et,Cn)=>`${Cn+1}) ${Et.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Pe});var ae=j(8737);class We{constructor(Oe){this.initialTeardown=Oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Oe;if(!this.closed){this.closed=!0;const{_parentage:Pe}=this;if(Pe)if(this._parentage=null,Array.isArray(Pe))for(const vt of Pe)vt.remove(this);else Pe.remove(this);const{initialTeardown:Et}=this;if((0,g.m)(Et))try{Et()}catch(vt){Oe=vt instanceof pe?vt.errors:[vt]}const{_finalizers:Cn}=this;if(Cn){this._finalizers=null;for(const vt of Cn)try{Ze(vt)}catch(un){Oe=null!=Oe?Oe:[],un instanceof pe?Oe=[...Oe,...un.errors]:Oe.push(un)}}if(Oe)throw new pe(Oe)}}add(Oe){var Pe;if(Oe&&Oe!==this)if(this.closed)Ze(Oe);else{if(Oe instanceof We){if(Oe.closed||Oe._hasParent(this))return;Oe._addParent(this)}(this._finalizers=null!==(Pe=this._finalizers)&&void 0!==Pe?Pe:[]).push(Oe)}}_hasParent(Oe){const{_parentage:Pe}=this;return Pe===Oe||Array.isArray(Pe)&&Pe.includes(Oe)}_addParent(Oe){const{_parentage:Pe}=this;this._parentage=Array.isArray(Pe)?(Pe.push(Oe),Pe):Pe?[Pe,Oe]:Oe}_removeParent(Oe){const{_parentage:Pe}=this;Pe===Oe?this._parentage=null:Array.isArray(Pe)&&(0,ae.P)(Pe,Oe)}remove(Oe){const{_finalizers:Pe}=this;Pe&&(0,ae.P)(Pe,Oe),Oe instanceof We&&Oe._removeParent(this)}}We.EMPTY=(()=>{const ht=new We;return ht.closed=!0,ht})();const Xe=We.EMPTY;function pt(ht){return ht instanceof We||ht&&"closed"in ht&&(0,g.m)(ht.remove)&&(0,g.m)(ht.add)&&(0,g.m)(ht.unsubscribe)}function Ze(ht){(0,g.m)(ht)?ht():ht.unsubscribe()}},2416:(Wn,At,j)=>{j.d(At,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Wn,At,j)=>{j.d(At,{z:()=>We});var g=j(8189),pe=j(7669),ae=j(8996);function We(...Xe){return function F(){return(0,g.J)(1)}()((0,ae.D)(Xe,(0,pe.yG)(Xe)))}},515:(Wn,At,j)=>{j.d(At,{E:()=>F});const F=new(j(8306).y)(We=>We.complete())},8996:(Wn,At,j)=>{j.d(At,{D:()=>He});var g=j(8421),F=j(5363),pe=j(9468),Xe=j(8306),Ze=j(2202),ht=j(576),Oe=j(9672);function Et(St,an){if(!St)throw new Error("Iterable cannot be null");return new Xe.y(Ht=>{(0,Oe.f)(Ht,an,()=>{const ke=St[Symbol.asyncIterator]();(0,Oe.f)(Ht,an,()=>{ke.next().then(Ut=>{Ut.done?Ht.complete():Ht.next(Ut.value)})},0,!0)})})}var Cn=j(3670),vt=j(8239),un=j(1144),In=j(6495),Ot=j(2206),Zt=j(4532),Ln=j(3260);function He(St,an){return an?function xe(St,an){if(null!=St){if((0,Cn.c)(St))return function ae(St,an){return(0,g.Xf)(St).pipe((0,pe.R)(an),(0,F.Q)(an))}(St,an);if((0,un.z)(St))return function pt(St,an){return new Xe.y(Ht=>{let ke=0;return an.schedule(function(){ke===St.length?Ht.complete():(Ht.next(St[ke++]),Ht.closed||this.schedule())})})}(St,an);if((0,vt.t)(St))return function We(St,an){return(0,g.Xf)(St).pipe((0,pe.R)(an),(0,F.Q)(an))}(St,an);if((0,Ot.D)(St))return Et(St,an);if((0,In.T)(St))return function Pe(St,an){return new Xe.y(Ht=>{let ke;return(0,Oe.f)(Ht,an,()=>{ke=St[Ze.h](),(0,Oe.f)(Ht,an,()=>{let Ut,Me;try{({value:Ut,done:Me}=ke.next())}catch(Tt){return void Ht.error(Tt)}Me?Ht.complete():Ht.next(Ut)},0,!0)}),()=>(0,ht.m)(null==ke?void 0:ke.return)&&ke.return()})}(St,an);if((0,Ln.L)(St))return function fn(St,an){return Et((0,Ln.Q)(St),an)}(St,an)}throw(0,Zt.z)(St)}(St,an):(0,g.Xf)(St)}},8421:(Wn,At,j)=>{j.d(At,{Xf:()=>Cn});var g=j(655),F=j(1144),pe=j(8239),ae=j(8306),We=j(3670),Xe=j(2206),pt=j(4532),Ze=j(6495),ht=j(3260),Oe=j(576),Pe=j(7849),Et=j(8822);function Cn(xe){if(xe instanceof ae.y)return xe;if(null!=xe){if((0,We.c)(xe))return function vt(xe){return new ae.y(He=>{const St=xe[Et.L]();if((0,Oe.m)(St.subscribe))return St.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,F.z)(xe))return function un(xe){return new ae.y(He=>{for(let St=0;St<xe.length&&!He.closed;St++)He.next(xe[St]);He.complete()})}(xe);if((0,pe.t)(xe))return function In(xe){return new ae.y(He=>{xe.then(St=>{He.closed||(He.next(St),He.complete())},St=>He.error(St)).then(null,Pe.h)})}(xe);if((0,Xe.D)(xe))return Zt(xe);if((0,Ze.T)(xe))return function Ot(xe){return new ae.y(He=>{for(const St of xe)if(He.next(St),He.closed)return;He.complete()})}(xe);if((0,ht.L)(xe))return function Ln(xe){return Zt((0,ht.Q)(xe))}(xe)}throw(0,pt.z)(xe)}function Zt(xe){return new ae.y(He=>{(function fn(xe,He){var St,an,Ht,ke;return(0,g.mG)(this,void 0,void 0,function*(){try{for(St=(0,g.KL)(xe);!(an=yield St.next()).done;)if(He.next(an.value),He.closed)return}catch(Ut){Ht={error:Ut}}finally{try{an&&!an.done&&(ke=St.return)&&(yield ke.call(St))}finally{if(Ht)throw Ht.error}}He.complete()})})(xe,He).catch(St=>He.error(St))})}},6451:(Wn,At,j)=>{j.d(At,{T:()=>Xe});var g=j(8189),F=j(8421),pe=j(515),ae=j(7669),We=j(8996);function Xe(...pt){const Ze=(0,ae.yG)(pt),ht=(0,ae._6)(pt,1/0),Oe=pt;return Oe.length?1===Oe.length?(0,F.Xf)(Oe[0]):(0,g.J)(ht)((0,We.D)(Oe,Ze)):pe.E}},9646:(Wn,At,j)=>{j.d(At,{of:()=>pe});var g=j(7669),F=j(8996);function pe(...ae){const We=(0,g.yG)(ae);return(0,F.D)(ae,We)}},2843:(Wn,At,j)=>{j.d(At,{_:()=>pe});var g=j(8306),F=j(576);function pe(ae,We){const Xe=(0,F.m)(ae)?ae:()=>ae,pt=Ze=>Ze.error(Xe());return new g.y(We?Ze=>We.schedule(pt,0,Ze):pt)}},5403:(Wn,At,j)=>{j.d(At,{x:()=>F});var g=j(2961);function F(ae,We,Xe,pt,Ze){return new pe(ae,We,Xe,pt,Ze)}class pe extends g.Lv{constructor(We,Xe,pt,Ze,ht,Oe){super(We),this.onFinalize=ht,this.shouldUnsubscribe=Oe,this._next=Xe?function(Pe){try{Xe(Pe)}catch(Et){We.error(Et)}}:super._next,this._error=Ze?function(Pe){try{Ze(Pe)}catch(Et){We.error(Et)}finally{this.unsubscribe()}}:super._error,this._complete=pt?function(){try{pt()}catch(Pe){We.error(Pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var We;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Xe}=this;super.unsubscribe(),!Xe&&(null===(We=this.onFinalize)||void 0===We||We.call(this))}}}},262:(Wn,At,j)=>{j.d(At,{K:()=>ae});var g=j(8421),F=j(5403),pe=j(4482);function ae(We){return(0,pe.e)((Xe,pt)=>{let Oe,Ze=null,ht=!1;Ze=Xe.subscribe((0,F.x)(pt,void 0,void 0,Pe=>{Oe=(0,g.Xf)(We(Pe,ae(We)(Xe))),Ze?(Ze.unsubscribe(),Ze=null,Oe.subscribe(pt)):ht=!0})),ht&&(Ze.unsubscribe(),Ze=null,Oe.subscribe(pt))})}},4351:(Wn,At,j)=>{j.d(At,{b:()=>pe});var g=j(5577),F=j(576);function pe(ae,We){return(0,F.m)(We)?(0,g.z)(ae,We,1):(0,g.z)(ae,1)}},6590:(Wn,At,j)=>{j.d(At,{d:()=>pe});var g=j(4482),F=j(5403);function pe(ae){return(0,g.e)((We,Xe)=>{let pt=!1;We.subscribe((0,F.x)(Xe,Ze=>{pt=!0,Xe.next(Ze)},()=>{pt||Xe.next(ae),Xe.complete()}))})}},9300:(Wn,At,j)=>{j.d(At,{h:()=>pe});var g=j(4482),F=j(5403);function pe(ae,We){return(0,g.e)((Xe,pt)=>{let Ze=0;Xe.subscribe((0,F.x)(pt,ht=>ae.call(We,ht,Ze++)&&pt.next(ht)))})}},590:(Wn,At,j)=>{j.d(At,{P:()=>pt});var g=j(6805),F=j(9300),pe=j(5698),ae=j(6590),We=j(8068),Xe=j(4671);function pt(Ze,ht){const Oe=arguments.length>=2;return Pe=>Pe.pipe(Ze?(0,F.h)((Et,Cn)=>Ze(Et,Cn,Pe)):Xe.y,(0,pe.q)(1),Oe?(0,ae.d)(ht):(0,We.T)(()=>new g.K))}},4004:(Wn,At,j)=>{j.d(At,{U:()=>pe});var g=j(4482),F=j(5403);function pe(ae,We){return(0,g.e)((Xe,pt)=>{let Ze=0;Xe.subscribe((0,F.x)(pt,ht=>{pt.next(ae.call(We,ht,Ze++))}))})}},8189:(Wn,At,j)=>{j.d(At,{J:()=>pe});var g=j(5577),F=j(4671);function pe(ae=1/0){return(0,g.z)(F.y,ae)}},5577:(Wn,At,j)=>{j.d(At,{z:()=>Ze});var g=j(4004),F=j(8421),pe=j(4482),ae=j(9672),We=j(5403),pt=j(576);function Ze(ht,Oe,Pe=1/0){return(0,pt.m)(Oe)?Ze((Et,Cn)=>(0,g.U)((vt,un)=>Oe(Et,vt,Cn,un))((0,F.Xf)(ht(Et,Cn))),Pe):("number"==typeof Oe&&(Pe=Oe),(0,pe.e)((Et,Cn)=>function Xe(ht,Oe,Pe,Et,Cn,vt,un,In){const Ot=[];let Zt=0,Ln=0,fn=!1;const xe=()=>{fn&&!Ot.length&&!Zt&&Oe.complete()},He=an=>Zt<Et?St(an):Ot.push(an),St=an=>{vt&&Oe.next(an),Zt++;let Ht=!1;(0,F.Xf)(Pe(an,Ln++)).subscribe((0,We.x)(Oe,ke=>{null==Cn||Cn(ke),vt?He(ke):Oe.next(ke)},()=>{Ht=!0},void 0,()=>{if(Ht)try{for(Zt--;Ot.length&&Zt<Et;){const ke=Ot.shift();un?(0,ae.f)(Oe,un,()=>St(ke)):St(ke)}xe()}catch(ke){Oe.error(ke)}}))};return ht.subscribe((0,We.x)(Oe,He,()=>{fn=!0,xe()})),()=>{null==In||In()}}(Et,Cn,ht,Pe)))}},5363:(Wn,At,j)=>{j.d(At,{Q:()=>ae});var g=j(9672),F=j(4482),pe=j(5403);function ae(We,Xe=0){return(0,F.e)((pt,Ze)=>{pt.subscribe((0,pe.x)(Ze,ht=>(0,g.f)(Ze,We,()=>Ze.next(ht),Xe),()=>(0,g.f)(Ze,We,()=>Ze.complete(),Xe),ht=>(0,g.f)(Ze,We,()=>Ze.error(ht),Xe)))})}},5026:(Wn,At,j)=>{j.d(At,{R:()=>ae});var g=j(4482),F=j(5403);function pe(We,Xe,pt,Ze,ht){return(Oe,Pe)=>{let Et=pt,Cn=Xe,vt=0;Oe.subscribe((0,F.x)(Pe,un=>{const In=vt++;Cn=Et?We(Cn,un,In):(Et=!0,un),Ze&&Pe.next(Cn)},ht&&(()=>{Et&&Pe.next(Cn),Pe.complete()})))}}function ae(We,Xe){return(0,g.e)(pe(We,Xe,arguments.length>=2,!0))}},3099:(Wn,At,j)=>{j.d(At,{B:()=>We});var g=j(8421),F=j(7579),pe=j(2961),ae=j(4482);function We(pt={}){const{connector:Ze=(()=>new F.x),resetOnError:ht=!0,resetOnComplete:Oe=!0,resetOnRefCountZero:Pe=!0}=pt;return Et=>{let Cn,vt,un,In=0,Ot=!1,Zt=!1;const Ln=()=>{null==vt||vt.unsubscribe(),vt=void 0},fn=()=>{Ln(),Cn=un=void 0,Ot=Zt=!1},xe=()=>{const He=Cn;fn(),null==He||He.unsubscribe()};return(0,ae.e)((He,St)=>{In++,!Zt&&!Ot&&Ln();const an=un=null!=un?un:Ze();St.add(()=>{In--,0===In&&!Zt&&!Ot&&(vt=Xe(xe,Pe))}),an.subscribe(St),!Cn&&In>0&&(Cn=new pe.Hp({next:Ht=>an.next(Ht),error:Ht=>{Zt=!0,Ln(),vt=Xe(fn,ht,Ht),an.error(Ht)},complete:()=>{Ot=!0,Ln(),vt=Xe(fn,Oe),an.complete()}}),(0,g.Xf)(He).subscribe(Cn))})(Et)}}function Xe(pt,Ze,...ht){if(!0===Ze)return void pt();if(!1===Ze)return;const Oe=new pe.Hp({next:()=>{Oe.unsubscribe(),pt()}});return Ze(...ht).subscribe(Oe)}},8675:(Wn,At,j)=>{j.d(At,{O:()=>ae});var g=j(7272),F=j(7669),pe=j(4482);function ae(...We){const Xe=(0,F.yG)(We);return(0,pe.e)((pt,Ze)=>{(Xe?(0,g.z)(We,pt,Xe):(0,g.z)(We,pt)).subscribe(Ze)})}},9468:(Wn,At,j)=>{j.d(At,{R:()=>F});var g=j(4482);function F(pe,ae=0){return(0,g.e)((We,Xe)=>{Xe.add(pe.schedule(()=>We.subscribe(Xe),ae))})}},3900:(Wn,At,j)=>{j.d(At,{w:()=>ae});var g=j(8421),F=j(4482),pe=j(5403);function ae(We,Xe){return(0,F.e)((pt,Ze)=>{let ht=null,Oe=0,Pe=!1;const Et=()=>Pe&&!ht&&Ze.complete();pt.subscribe((0,pe.x)(Ze,Cn=>{null==ht||ht.unsubscribe();let vt=0;const un=Oe++;(0,g.Xf)(We(Cn,un)).subscribe(ht=(0,pe.x)(Ze,In=>Ze.next(Xe?Xe(Cn,In,un,vt++):In),()=>{ht=null,Et()}))},()=>{Pe=!0,Et()}))})}},5698:(Wn,At,j)=>{j.d(At,{q:()=>ae});var g=j(515),F=j(4482),pe=j(5403);function ae(We){return We<=0?()=>g.E:(0,F.e)((Xe,pt)=>{let Ze=0;Xe.subscribe((0,pe.x)(pt,ht=>{++Ze<=We&&(pt.next(ht),We<=Ze&&pt.complete())}))})}},8505:(Wn,At,j)=>{j.d(At,{b:()=>We});var g=j(576),F=j(4482),pe=j(5403),ae=j(4671);function We(Xe,pt,Ze){const ht=(0,g.m)(Xe)||pt||Ze?{next:Xe,error:pt,complete:Ze}:Xe;return ht?(0,F.e)((Oe,Pe)=>{var Et;null===(Et=ht.subscribe)||void 0===Et||Et.call(ht);let Cn=!0;Oe.subscribe((0,pe.x)(Pe,vt=>{var un;null===(un=ht.next)||void 0===un||un.call(ht,vt),Pe.next(vt)},()=>{var vt;Cn=!1,null===(vt=ht.complete)||void 0===vt||vt.call(ht),Pe.complete()},vt=>{var un;Cn=!1,null===(un=ht.error)||void 0===un||un.call(ht,vt),Pe.error(vt)},()=>{var vt,un;Cn&&(null===(vt=ht.unsubscribe)||void 0===vt||vt.call(ht)),null===(un=ht.finalize)||void 0===un||un.call(ht)}))}):ae.y}},8068:(Wn,At,j)=>{j.d(At,{T:()=>ae});var g=j(6805),F=j(4482),pe=j(5403);function ae(Xe=We){return(0,F.e)((pt,Ze)=>{let ht=!1;pt.subscribe((0,pe.x)(Ze,Oe=>{ht=!0,Ze.next(Oe)},()=>ht?Ze.complete():Ze.error(Xe())))})}function We(){return new g.K}},4408:(Wn,At,j)=>{j.d(At,{o:()=>We});var g=j(727);class F extends g.w0{constructor(pt,Ze){super()}schedule(pt,Ze=0){return this}}const pe={setInterval(Xe,pt,...Ze){const{delegate:ht}=pe;return(null==ht?void 0:ht.setInterval)?ht.setInterval(Xe,pt,...Ze):setInterval(Xe,pt,...Ze)},clearInterval(Xe){const{delegate:pt}=pe;return((null==pt?void 0:pt.clearInterval)||clearInterval)(Xe)},delegate:void 0};var ae=j(8737);class We extends F{constructor(pt,Ze){super(pt,Ze),this.scheduler=pt,this.work=Ze,this.pending=!1}schedule(pt,Ze=0){var ht;if(this.closed)return this;this.state=pt;const Oe=this.id,Pe=this.scheduler;return null!=Oe&&(this.id=this.recycleAsyncId(Pe,Oe,Ze)),this.pending=!0,this.delay=Ze,this.id=null!==(ht=this.id)&&void 0!==ht?ht:this.requestAsyncId(Pe,this.id,Ze),this}requestAsyncId(pt,Ze,ht=0){return pe.setInterval(pt.flush.bind(pt,this),ht)}recycleAsyncId(pt,Ze,ht=0){if(null!=ht&&this.delay===ht&&!1===this.pending)return Ze;null!=Ze&&pe.clearInterval(Ze)}execute(pt,Ze){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ht=this._execute(pt,Ze);if(ht)return ht;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pt,Ze){let Oe,ht=!1;try{this.work(pt)}catch(Pe){ht=!0,Oe=Pe||new Error("Scheduled action threw falsy error")}if(ht)return this.unsubscribe(),Oe}unsubscribe(){if(!this.closed){const{id:pt,scheduler:Ze}=this,{actions:ht}=Ze;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ht,this),null!=pt&&(this.id=this.recycleAsyncId(Ze,pt,null)),this.delay=null,super.unsubscribe()}}}},7565:(Wn,At,j)=>{j.d(At,{v:()=>pe});var g=j(6063);class F{constructor(We,Xe=F.now){this.schedulerActionCtor=We,this.now=Xe}schedule(We,Xe=0,pt){return new this.schedulerActionCtor(this,We).schedule(pt,Xe)}}F.now=g.l.now;class pe extends F{constructor(We,Xe=F.now){super(We,Xe),this.actions=[],this._active=!1}flush(We){const{actions:Xe}=this;if(this._active)return void Xe.push(We);let pt;this._active=!0;do{if(pt=We.execute(We.state,We.delay))break}while(We=Xe.shift());if(this._active=!1,pt){for(;We=Xe.shift();)We.unsubscribe();throw pt}}}},4986:(Wn,At,j)=>{j.d(At,{z:()=>pe});var g=j(4408);const pe=new(j(7565).v)(g.o)},6063:(Wn,At,j)=>{j.d(At,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Wn,At,j)=>{j.d(At,{z:()=>g});const g={setTimeout(F,pe,...ae){const{delegate:We}=g;return(null==We?void 0:We.setTimeout)?We.setTimeout(F,pe,...ae):setTimeout(F,pe,...ae)},clearTimeout(F){const{delegate:pe}=g;return((null==pe?void 0:pe.clearTimeout)||clearTimeout)(F)},delegate:void 0}},2202:(Wn,At,j)=>{j.d(At,{h:()=>F});const F=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Wn,At,j)=>{j.d(At,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Wn,At,j)=>{j.d(At,{K:()=>F});const F=(0,j(3888).d)(pe=>function(){pe(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Wn,At,j)=>{j.d(At,{_6:()=>Xe,jO:()=>ae,yG:()=>We});var g=j(576);function pe(pt){return pt[pt.length-1]}function ae(pt){return(0,g.m)(pe(pt))?pt.pop():void 0}function We(pt){return function F(pt){return pt&&(0,g.m)(pt.schedule)}(pe(pt))?pt.pop():void 0}function Xe(pt,Ze){return"number"==typeof pe(pt)?pt.pop():Ze}},4742:(Wn,At,j)=>{j.d(At,{D:()=>We});const{isArray:g}=Array,{getPrototypeOf:F,prototype:pe,keys:ae}=Object;function We(pt){if(1===pt.length){const Ze=pt[0];if(g(Ze))return{args:Ze,keys:null};if(function Xe(pt){return pt&&"object"==typeof pt&&F(pt)===pe}(Ze)){const ht=ae(Ze);return{args:ht.map(Oe=>Ze[Oe]),keys:ht}}}return{args:pt,keys:null}}},8737:(Wn,At,j)=>{function g(F,pe){if(F){const ae=F.indexOf(pe);0<=ae&&F.splice(ae,1)}}j.d(At,{P:()=>g})},3888:(Wn,At,j)=>{function g(F){const ae=F(We=>{Error.call(We),We.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}j.d(At,{d:()=>g})},1810:(Wn,At,j)=>{function g(F,pe){return F.reduce((ae,We,Xe)=>(ae[We]=pe[Xe],ae),{})}j.d(At,{n:()=>g})},2806:(Wn,At,j)=>{j.d(At,{O:()=>ae,x:()=>pe});var g=j(2416);let F=null;function pe(We){if(g.v.useDeprecatedSynchronousErrorHandling){const Xe=!F;if(Xe&&(F={errorThrown:!1,error:null}),We(),Xe){const{errorThrown:pt,error:Ze}=F;if(F=null,pt)throw Ze}}else We()}function ae(We){g.v.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=We)}},9672:(Wn,At,j)=>{function g(F,pe,ae,We=0,Xe=!1){const pt=pe.schedule(function(){ae(),Xe?F.add(this.schedule(null,We)):this.unsubscribe()},We);if(F.add(pt),!Xe)return pt}j.d(At,{f:()=>g})},4671:(Wn,At,j)=>{function g(F){return F}j.d(At,{y:()=>g})},1144:(Wn,At,j)=>{j.d(At,{z:()=>g});const g=F=>F&&"number"==typeof F.length&&"function"!=typeof F},2206:(Wn,At,j)=>{j.d(At,{D:()=>F});var g=j(576);function F(pe){return Symbol.asyncIterator&&(0,g.m)(null==pe?void 0:pe[Symbol.asyncIterator])}},576:(Wn,At,j)=>{function g(F){return"function"==typeof F}j.d(At,{m:()=>g})},3670:(Wn,At,j)=>{j.d(At,{c:()=>pe});var g=j(8822),F=j(576);function pe(ae){return(0,F.m)(ae[g.L])}},6495:(Wn,At,j)=>{j.d(At,{T:()=>pe});var g=j(2202),F=j(576);function pe(ae){return(0,F.m)(null==ae?void 0:ae[g.h])}},8239:(Wn,At,j)=>{j.d(At,{t:()=>F});var g=j(576);function F(pe){return(0,g.m)(null==pe?void 0:pe.then)}},3260:(Wn,At,j)=>{j.d(At,{L:()=>ae,Q:()=>pe});var g=j(655),F=j(576);function pe(We){return(0,g.FC)(this,arguments,function*(){const pt=We.getReader();try{for(;;){const{value:Ze,done:ht}=yield(0,g.qq)(pt.read());if(ht)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Ze)}}finally{pt.releaseLock()}})}function ae(We){return(0,F.m)(null==We?void 0:We.getReader)}},4482:(Wn,At,j)=>{j.d(At,{A:()=>F,e:()=>pe});var g=j(576);function F(ae){return(0,g.m)(null==ae?void 0:ae.lift)}function pe(ae){return We=>{if(F(We))return We.lift(function(Xe){try{return ae(Xe,this)}catch(pt){this.error(pt)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Wn,At,j)=>{j.d(At,{Z:()=>ae});var g=j(4004);const{isArray:F}=Array;function ae(We){return(0,g.U)(Xe=>function pe(We,Xe){return F(Xe)?We(...Xe):We(Xe)}(We,Xe))}},7849:(Wn,At,j)=>{j.d(At,{h:()=>pe});var g=j(2416),F=j(3410);function pe(ae){F.z.setTimeout(()=>{const{onUnhandledError:We}=g.v;if(!We)throw ae;We(ae)})}},4532:(Wn,At,j)=>{function g(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(At,{z:()=>g})},655:(Wn,At,j)=>{function ae(Me,Tt){var et={};for(var wt in Me)Object.prototype.hasOwnProperty.call(Me,wt)&&Tt.indexOf(wt)<0&&(et[wt]=Me[wt]);if(null!=Me&&"function"==typeof Object.getOwnPropertySymbols){var at=0;for(wt=Object.getOwnPropertySymbols(Me);at<wt.length;at++)Tt.indexOf(wt[at])<0&&Object.prototype.propertyIsEnumerable.call(Me,wt[at])&&(et[wt[at]]=Me[wt[at]])}return et}function Ze(Me,Tt,et,wt){return new(et||(et=Promise))(function(on,Dn){function nr(Tr){try{yn(wt.next(Tr))}catch(mr){Dn(mr)}}function rr(Tr){try{yn(wt.throw(Tr))}catch(mr){Dn(mr)}}function yn(Tr){Tr.done?on(Tr.value):function at(on){return on instanceof et?on:new et(function(Dn){Dn(on)})}(Tr.value).then(nr,rr)}yn((wt=wt.apply(Me,Tt||[])).next())})}function Ot(Me){return this instanceof Ot?(this.v=Me,this):new Ot(Me)}function Zt(Me,Tt,et){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at,wt=et.apply(Me,Tt||[]),on=[];return at={},Dn("next"),Dn("throw"),Dn("return"),at[Symbol.asyncIterator]=function(){return this},at;function Dn(Vt){wt[Vt]&&(at[Vt]=function(kt){return new Promise(function(st,Dt){on.push([Vt,kt,st,Dt])>1||nr(Vt,kt)})})}function nr(Vt,kt){try{!function rr(Vt){Vt.value instanceof Ot?Promise.resolve(Vt.value.v).then(yn,Tr):mr(on[0][2],Vt)}(wt[Vt](kt))}catch(st){mr(on[0][3],st)}}function yn(Vt){nr("next",Vt)}function Tr(Vt){nr("throw",Vt)}function mr(Vt,kt){Vt(kt),on.shift(),on.length&&nr(on[0][0],on[0][1])}}function fn(Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,Tt=Me[Symbol.asyncIterator];return Tt?Tt.call(Me):(Me=function Et(Me){var Tt="function"==typeof Symbol&&Symbol.iterator,et=Tt&&Me[Tt],wt=0;if(et)return et.call(Me);if(Me&&"number"==typeof Me.length)return{next:function(){return Me&&wt>=Me.length&&(Me=void 0),{value:Me&&Me[wt++],done:!Me}}};throw new TypeError(Tt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Me),et={},wt("next"),wt("throw"),wt("return"),et[Symbol.asyncIterator]=function(){return this},et);function wt(on){et[on]=Me[on]&&function(Dn){return new Promise(function(nr,rr){!function at(on,Dn,nr,rr){Promise.resolve(rr).then(function(yn){on({value:yn,done:nr})},Dn)}(nr,rr,(Dn=Me[on](Dn)).done,Dn.value)})}}}j.d(At,{FC:()=>Zt,KL:()=>fn,_T:()=>ae,mG:()=>Ze,qq:()=>Ot})},1777:(Wn,At,j)=>{j.d(At,{LC:()=>F,SB:()=>ht,X$:()=>ae,ZE:()=>Ln,ZN:()=>Zt,_j:()=>g,eR:()=>Pe,jt:()=>We,k1:()=>fn,l3:()=>pe,oB:()=>Ze,vP:()=>pt});class g{}class F{}const pe="*";function ae(xe,He){return{type:7,name:xe,definitions:He,options:{}}}function We(xe,He=null){return{type:4,styles:He,timings:xe}}function pt(xe,He=null){return{type:2,steps:xe,options:He}}function Ze(xe){return{type:6,styles:xe,offset:null}}function ht(xe,He,St){return{type:0,name:xe,styles:He,options:St}}function Pe(xe,He,St=null){return{type:1,expr:xe,animation:He,options:St}}function Ot(xe){Promise.resolve(null).then(xe)}class Zt{constructor(He=0,St=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=He+St}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(He=>He()),this._onDoneFns=[])}onStart(He){this._onStartFns.push(He)}onDone(He){this._onDoneFns.push(He)}onDestroy(He){this._onDestroyFns.push(He)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ot(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(He=>He()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(He=>He()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(He){this._position=this.totalTime?He*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(He){const St="start"==He?this._onStartFns:this._onDoneFns;St.forEach(an=>an()),St.length=0}}class Ln{constructor(He){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=He;let St=0,an=0,Ht=0;const ke=this.players.length;0==ke?Ot(()=>this._onFinish()):this.players.forEach(Ut=>{Ut.onDone(()=>{++St==ke&&this._onFinish()}),Ut.onDestroy(()=>{++an==ke&&this._onDestroy()}),Ut.onStart(()=>{++Ht==ke&&this._onStart()})}),this.totalTime=this.players.reduce((Ut,Me)=>Math.max(Ut,Me.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(He=>He()),this._onDoneFns=[])}init(){this.players.forEach(He=>He.init())}onStart(He){this._onStartFns.push(He)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(He=>He()),this._onStartFns=[])}onDone(He){this._onDoneFns.push(He)}onDestroy(He){this._onDestroyFns.push(He)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(He=>He.play())}pause(){this.players.forEach(He=>He.pause())}restart(){this.players.forEach(He=>He.restart())}finish(){this._onFinish(),this.players.forEach(He=>He.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(He=>He.destroy()),this._onDestroyFns.forEach(He=>He()),this._onDestroyFns=[])}reset(){this.players.forEach(He=>He.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(He){const St=He*this.totalTime;this.players.forEach(an=>{const Ht=an.totalTime?Math.min(1,St/an.totalTime):1;an.setPosition(Ht)})}getPosition(){const He=this.players.reduce((St,an)=>null===St||an.totalTime>St.totalTime?an:St,null);return null!=He?He.getPosition():0}beforeDestroy(){this.players.forEach(He=>{He.beforeDestroy&&He.beforeDestroy()})}triggerCallback(He){const St="start"==He?this._onStartFns:this._onDoneFns;St.forEach(an=>an()),St.length=0}}const fn="!"},9808:(Wn,At,j)=>{j.d(At,{Do:()=>xe,ED:()=>qr,EM:()=>yo,HT:()=>We,JF:()=>bi,K0:()=>pt,Mx:()=>os,NF:()=>fs,O5:()=>Qr,Ov:()=>mn,PC:()=>Hi,PM:()=>Js,RF:()=>hs,S$:()=>Ot,V_:()=>Oe,Ye:()=>He,b0:()=>fn,bD:()=>Hs,ez:()=>Xs,lw:()=>Ze,mk:()=>ds,mr:()=>Ln,n9:()=>kr,q:()=>pe,sg:()=>wr,tP:()=>$o,uU:()=>vs,w_:()=>Xe});var g=j(5e3);let F=null;function pe(){return F}function We(B){F||(F=B)}class Xe{}const pt=new g.OlP("DocumentToken");let Ze=(()=>{class B{historyGo(W){throw new Error("Not implemented")}}return B.\u0275fac=function(W){return new(W||B)},B.\u0275prov=g.Yz7({token:B,factory:function(){return function ht(){return(0,g.LFG)(Pe)}()},providedIn:"platform"}),B})();const Oe=new g.OlP("Location Initialized");let Pe=(()=>{class B extends Ze{constructor(W){super(),this._doc=W,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pe().getBaseHref(this._doc)}onPopState(W){const ve=pe().getGlobalEventTarget(this._doc,"window");return ve.addEventListener("popstate",W,!1),()=>ve.removeEventListener("popstate",W)}onHashChange(W){const ve=pe().getGlobalEventTarget(this._doc,"window");return ve.addEventListener("hashchange",W,!1),()=>ve.removeEventListener("hashchange",W)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(W){this.location.pathname=W}pushState(W,ve,qe){Et()?this._history.pushState(W,ve,qe):this.location.hash=qe}replaceState(W,ve,qe){Et()?this._history.replaceState(W,ve,qe):this.location.hash=qe}forward(){this._history.forward()}back(){this._history.back()}historyGo(W=0){this._history.go(W)}getState(){return this._history.state}}return B.\u0275fac=function(W){return new(W||B)(g.LFG(pt))},B.\u0275prov=g.Yz7({token:B,factory:function(){return function Cn(){return new Pe((0,g.LFG)(pt))}()},providedIn:"platform"}),B})();function Et(){return!!window.history.pushState}function vt(B,he){if(0==B.length)return he;if(0==he.length)return B;let W=0;return B.endsWith("/")&&W++,he.startsWith("/")&&W++,2==W?B+he.substring(1):1==W?B+he:B+"/"+he}function un(B){const he=B.match(/#|\?|$/),W=he&&he.index||B.length;return B.slice(0,W-("/"===B[W-1]?1:0))+B.slice(W)}function In(B){return B&&"?"!==B[0]?"?"+B:B}let Ot=(()=>{class B{historyGo(W){throw new Error("Not implemented")}}return B.\u0275fac=function(W){return new(W||B)},B.\u0275prov=g.Yz7({token:B,factory:function(){return function Zt(B){const he=(0,g.LFG)(pt).location;return new fn((0,g.LFG)(Ze),he&&he.origin||"")}()},providedIn:"root"}),B})();const Ln=new g.OlP("appBaseHref");let fn=(()=>{class B extends Ot{constructor(W,ve){if(super(),this._platformLocation=W,this._removeListenerFns=[],null==ve&&(ve=this._platformLocation.getBaseHrefFromDOM()),null==ve)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ve}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}prepareExternalUrl(W){return vt(this._baseHref,W)}path(W=!1){const ve=this._platformLocation.pathname+In(this._platformLocation.search),qe=this._platformLocation.hash;return qe&&W?`${ve}${qe}`:ve}pushState(W,ve,qe,sn){const wn=this.prepareExternalUrl(qe+In(sn));this._platformLocation.pushState(W,ve,wn)}replaceState(W,ve,qe,sn){const wn=this.prepareExternalUrl(qe+In(sn));this._platformLocation.replaceState(W,ve,wn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(W=0){var ve,qe;null===(qe=(ve=this._platformLocation).historyGo)||void 0===qe||qe.call(ve,W)}}return B.\u0275fac=function(W){return new(W||B)(g.LFG(Ze),g.LFG(Ln,8))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})(),xe=(()=>{class B extends Ot{constructor(W,ve){super(),this._platformLocation=W,this._baseHref="",this._removeListenerFns=[],null!=ve&&(this._baseHref=ve)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}path(W=!1){let ve=this._platformLocation.hash;return null==ve&&(ve="#"),ve.length>0?ve.substring(1):ve}prepareExternalUrl(W){const ve=vt(this._baseHref,W);return ve.length>0?"#"+ve:ve}pushState(W,ve,qe,sn){let wn=this.prepareExternalUrl(qe+In(sn));0==wn.length&&(wn=this._platformLocation.pathname),this._platformLocation.pushState(W,ve,wn)}replaceState(W,ve,qe,sn){let wn=this.prepareExternalUrl(qe+In(sn));0==wn.length&&(wn=this._platformLocation.pathname),this._platformLocation.replaceState(W,ve,wn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(W=0){var ve,qe;null===(qe=(ve=this._platformLocation).historyGo)||void 0===qe||qe.call(ve,W)}}return B.\u0275fac=function(W){return new(W||B)(g.LFG(Ze),g.LFG(Ln,8))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})(),He=(()=>{class B{constructor(W,ve){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=W;const qe=this._platformStrategy.getBaseHref();this._platformLocation=ve,this._baseHref=un(Ht(qe)),this._platformStrategy.onPopState(sn=>{this._subject.emit({url:this.path(!0),pop:!0,state:sn.state,type:sn.type})})}path(W=!1){return this.normalize(this._platformStrategy.path(W))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(W,ve=""){return this.path()==this.normalize(W+In(ve))}normalize(W){return B.stripTrailingSlash(function an(B,he){return B&&he.startsWith(B)?he.substring(B.length):he}(this._baseHref,Ht(W)))}prepareExternalUrl(W){return W&&"/"!==W[0]&&(W="/"+W),this._platformStrategy.prepareExternalUrl(W)}go(W,ve="",qe=null){this._platformStrategy.pushState(qe,"",W,ve),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+In(ve)),qe)}replaceState(W,ve="",qe=null){this._platformStrategy.replaceState(qe,"",W,ve),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+In(ve)),qe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(W=0){var ve,qe;null===(qe=(ve=this._platformStrategy).historyGo)||void 0===qe||qe.call(ve,W)}onUrlChange(W){this._urlChangeListeners.push(W),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ve=>{this._notifyUrlChangeListeners(ve.url,ve.state)}))}_notifyUrlChangeListeners(W="",ve){this._urlChangeListeners.forEach(qe=>qe(W,ve))}subscribe(W,ve,qe){return this._subject.subscribe({next:W,error:ve,complete:qe})}}return B.normalizeQueryParams=In,B.joinWithSlash=vt,B.stripTrailingSlash=un,B.\u0275fac=function(W){return new(W||B)(g.LFG(Ot),g.LFG(Ze))},B.\u0275prov=g.Yz7({token:B,factory:function(){return function St(){return new He((0,g.LFG)(Ot),(0,g.LFG)(Ze))}()},providedIn:"root"}),B})();function Ht(B){return B.replace(/\/index.html$/,"")}var Tt=(()=>((Tt=Tt||{})[Tt.Format=0]="Format",Tt[Tt.Standalone=1]="Standalone",Tt))(),et=(()=>((et=et||{})[et.Narrow=0]="Narrow",et[et.Abbreviated=1]="Abbreviated",et[et.Wide=2]="Wide",et[et.Short=3]="Short",et))(),wt=(()=>((wt=wt||{})[wt.Short=0]="Short",wt[wt.Medium=1]="Medium",wt[wt.Long=2]="Long",wt[wt.Full=3]="Full",wt))(),at=(()=>((at=at||{})[at.Decimal=0]="Decimal",at[at.Group=1]="Group",at[at.List=2]="List",at[at.PercentSign=3]="PercentSign",at[at.PlusSign=4]="PlusSign",at[at.MinusSign=5]="MinusSign",at[at.Exponential=6]="Exponential",at[at.SuperscriptingExponent=7]="SuperscriptingExponent",at[at.PerMille=8]="PerMille",at[at.Infinity=9]="Infinity",at[at.NaN=10]="NaN",at[at.TimeSeparator=11]="TimeSeparator",at[at.CurrencyDecimal=12]="CurrencyDecimal",at[at.CurrencyGroup=13]="CurrencyGroup",at))();function kt(B,he){return xr((0,g.cg1)(B)[g.wAp.DateFormat],he)}function st(B,he){return xr((0,g.cg1)(B)[g.wAp.TimeFormat],he)}function Dt(B,he){return xr((0,g.cg1)(B)[g.wAp.DateTimeFormat],he)}function ut(B,he){const W=(0,g.cg1)(B),ve=W[g.wAp.NumberSymbols][he];if(void 0===ve){if(he===at.CurrencyDecimal)return W[g.wAp.NumberSymbols][at.Decimal];if(he===at.CurrencyGroup)return W[g.wAp.NumberSymbols][at.Group]}return ve}function Xr(B){if(!B[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${B[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function xr(B,he){for(let W=he;W>-1;W--)if(void 0!==B[W])return B[W];throw new Error("Locale data API: locale data undefined")}function Mr(B){const[he,W]=B.split(":");return{hours:+he,minutes:+W}}const rt=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ct={},Gt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var rn=(()=>((rn=rn||{})[rn.Short=0]="Short",rn[rn.ShortGMT=1]="ShortGMT",rn[rn.Long=2]="Long",rn[rn.Extended=3]="Extended",rn))(),bn=(()=>((bn=bn||{})[bn.FullYear=0]="FullYear",bn[bn.Month=1]="Month",bn[bn.Date=2]="Date",bn[bn.Hours=3]="Hours",bn[bn.Minutes=4]="Minutes",bn[bn.Seconds=5]="Seconds",bn[bn.FractionalSeconds=6]="FractionalSeconds",bn[bn.Day=7]="Day",bn))(),zn=(()=>((zn=zn||{})[zn.DayPeriods=0]="DayPeriods",zn[zn.Days=1]="Days",zn[zn.Months=2]="Months",zn[zn.Eras=3]="Eras",zn))();function Jr(B,he,W,ve){let qe=function Re(B){if(gt(B))return B;if("number"==typeof B&&!isNaN(B))return new Date(B);if("string"==typeof B){if(B=B.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(B)){const[qe,sn=1,wn=1]=B.split("-").map(fr=>+fr);return Gr(qe,sn-1,wn)}const W=parseFloat(B);if(!isNaN(B-W))return new Date(W);let ve;if(ve=B.match(rt))return function Ae(B){const he=new Date(0);let W=0,ve=0;const qe=B[8]?he.setUTCFullYear:he.setFullYear,sn=B[8]?he.setUTCHours:he.setHours;B[9]&&(W=Number(B[9]+B[10]),ve=Number(B[9]+B[11])),qe.call(he,Number(B[1]),Number(B[2])-1,Number(B[3]));const wn=Number(B[4]||0)-W,fr=Number(B[5]||0)-ve,jr=Number(B[6]||0),ei=Math.floor(1e3*parseFloat("0."+(B[7]||0)));return sn.call(he,wn,fr,jr,ei),he}(ve)}const he=new Date(B);if(!gt(he))throw new Error(`Unable to convert "${B}" into a date`);return he}(B);he=Br(W,he)||he;let fr,wn=[];for(;he;){if(fr=Gt.exec(he),!fr){wn.push(he);break}{wn=wn.concat(fr.slice(1));const ni=wn.pop();if(!ni)break;he=ni}}let jr=qe.getTimezoneOffset();ve&&(jr=Xt(ve,jr),qe=function Ge(B,he,W){const ve=W?-1:1,qe=B.getTimezoneOffset();return function Lt(B,he){return(B=new Date(B.getTime())).setMinutes(B.getMinutes()+he),B}(B,ve*(Xt(he,qe)-qe))}(qe,ve,!0));let ei="";return wn.forEach(ni=>{const fi=function ft(B){if(Ue[B])return Ue[B];let he;switch(B){case"G":case"GG":case"GGG":he=Vr(zn.Eras,et.Abbreviated);break;case"GGGG":he=Vr(zn.Eras,et.Wide);break;case"GGGGG":he=Vr(zn.Eras,et.Narrow);break;case"y":he=On(bn.FullYear,1,0,!1,!0);break;case"yy":he=On(bn.FullYear,2,0,!0,!0);break;case"yyy":he=On(bn.FullYear,3,0,!1,!0);break;case"yyyy":he=On(bn.FullYear,4,0,!1,!0);break;case"Y":he=Je(1);break;case"YY":he=Je(2,!0);break;case"YYY":he=Je(3);break;case"YYYY":he=Je(4);break;case"M":case"L":he=On(bn.Month,1,1);break;case"MM":case"LL":he=On(bn.Month,2,1);break;case"MMM":he=Vr(zn.Months,et.Abbreviated);break;case"MMMM":he=Vr(zn.Months,et.Wide);break;case"MMMMM":he=Vr(zn.Months,et.Narrow);break;case"LLL":he=Vr(zn.Months,et.Abbreviated,Tt.Standalone);break;case"LLLL":he=Vr(zn.Months,et.Wide,Tt.Standalone);break;case"LLLLL":he=Vr(zn.Months,et.Narrow,Tt.Standalone);break;case"w":he=$r(1);break;case"ww":he=$r(2);break;case"W":he=$r(1,!0);break;case"d":he=On(bn.Date,1);break;case"dd":he=On(bn.Date,2);break;case"c":case"cc":he=On(bn.Day,1);break;case"ccc":he=Vr(zn.Days,et.Abbreviated,Tt.Standalone);break;case"cccc":he=Vr(zn.Days,et.Wide,Tt.Standalone);break;case"ccccc":he=Vr(zn.Days,et.Narrow,Tt.Standalone);break;case"cccccc":he=Vr(zn.Days,et.Short,Tt.Standalone);break;case"E":case"EE":case"EEE":he=Vr(zn.Days,et.Abbreviated);break;case"EEEE":he=Vr(zn.Days,et.Wide);break;case"EEEEE":he=Vr(zn.Days,et.Narrow);break;case"EEEEEE":he=Vr(zn.Days,et.Short);break;case"a":case"aa":case"aaa":he=Vr(zn.DayPeriods,et.Abbreviated);break;case"aaaa":he=Vr(zn.DayPeriods,et.Wide);break;case"aaaaa":he=Vr(zn.DayPeriods,et.Narrow);break;case"b":case"bb":case"bbb":he=Vr(zn.DayPeriods,et.Abbreviated,Tt.Standalone,!0);break;case"bbbb":he=Vr(zn.DayPeriods,et.Wide,Tt.Standalone,!0);break;case"bbbbb":he=Vr(zn.DayPeriods,et.Narrow,Tt.Standalone,!0);break;case"B":case"BB":case"BBB":he=Vr(zn.DayPeriods,et.Abbreviated,Tt.Format,!0);break;case"BBBB":he=Vr(zn.DayPeriods,et.Wide,Tt.Format,!0);break;case"BBBBB":he=Vr(zn.DayPeriods,et.Narrow,Tt.Format,!0);break;case"h":he=On(bn.Hours,1,-12);break;case"hh":he=On(bn.Hours,2,-12);break;case"H":he=On(bn.Hours,1);break;case"HH":he=On(bn.Hours,2);break;case"m":he=On(bn.Minutes,1);break;case"mm":he=On(bn.Minutes,2);break;case"s":he=On(bn.Seconds,1);break;case"ss":he=On(bn.Seconds,2);break;case"S":he=On(bn.FractionalSeconds,1);break;case"SS":he=On(bn.FractionalSeconds,2);break;case"SSS":he=On(bn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":he=kn(rn.Short);break;case"ZZZZZ":he=kn(rn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":he=kn(rn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":he=kn(rn.Long);break;default:return null}return Ue[B]=he,he}(ni);ei+=fi?fi(qe,W,jr):"''"===ni?"'":ni.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),ei}function Gr(B,he,W){const ve=new Date(0);return ve.setFullYear(B,he,W),ve.setHours(0,0,0),ve}function Br(B,he){const W=function Dn(B){return(0,g.cg1)(B)[g.wAp.LocaleId]}(B);if(ct[W]=ct[W]||{},ct[W][he])return ct[W][he];let ve="";switch(he){case"shortDate":ve=kt(B,wt.Short);break;case"mediumDate":ve=kt(B,wt.Medium);break;case"longDate":ve=kt(B,wt.Long);break;case"fullDate":ve=kt(B,wt.Full);break;case"shortTime":ve=st(B,wt.Short);break;case"mediumTime":ve=st(B,wt.Medium);break;case"longTime":ve=st(B,wt.Long);break;case"fullTime":ve=st(B,wt.Full);break;case"short":const qe=Br(B,"shortTime"),sn=Br(B,"shortDate");ve=as(Dt(B,wt.Short),[qe,sn]);break;case"medium":const wn=Br(B,"mediumTime"),fr=Br(B,"mediumDate");ve=as(Dt(B,wt.Medium),[wn,fr]);break;case"long":const jr=Br(B,"longTime"),ei=Br(B,"longDate");ve=as(Dt(B,wt.Long),[jr,ei]);break;case"full":const ni=Br(B,"fullTime"),fi=Br(B,"fullDate");ve=as(Dt(B,wt.Full),[ni,fi])}return ve&&(ct[W][he]=ve),ve}function as(B,he){return he&&(B=B.replace(/\{([^}]+)}/g,function(W,ve){return null!=he&&ve in he?he[ve]:W})),B}function Li(B,he,W="-",ve,qe){let sn="";(B<0||qe&&B<=0)&&(qe?B=1-B:(B=-B,sn=W));let wn=String(B);for(;wn.length<he;)wn="0"+wn;return ve&&(wn=wn.substr(wn.length-he)),sn+wn}function On(B,he,W=0,ve=!1,qe=!1){return function(sn,wn){let fr=function Si(B,he){switch(B){case bn.FullYear:return he.getFullYear();case bn.Month:return he.getMonth();case bn.Date:return he.getDate();case bn.Hours:return he.getHours();case bn.Minutes:return he.getMinutes();case bn.Seconds:return he.getSeconds();case bn.FractionalSeconds:return he.getMilliseconds();case bn.Day:return he.getDay();default:throw new Error(`Unknown DateType value "${B}".`)}}(B,sn);if((W>0||fr>-W)&&(fr+=W),B===bn.Hours)0===fr&&-12===W&&(fr=12);else if(B===bn.FractionalSeconds)return function ui(B,he){return Li(B,3).substr(0,he)}(fr,he);const jr=ut(wn,at.MinusSign);return Li(fr,he,jr,ve,qe)}}function Vr(B,he,W=Tt.Format,ve=!1){return function(qe,sn){return function Vi(B,he,W,ve,qe,sn){switch(W){case zn.Months:return function yn(B,he,W){const ve=(0,g.cg1)(B),sn=xr([ve[g.wAp.MonthsFormat],ve[g.wAp.MonthsStandalone]],he);return xr(sn,W)}(he,qe,ve)[B.getMonth()];case zn.Days:return function rr(B,he,W){const ve=(0,g.cg1)(B),sn=xr([ve[g.wAp.DaysFormat],ve[g.wAp.DaysStandalone]],he);return xr(sn,W)}(he,qe,ve)[B.getDay()];case zn.DayPeriods:const wn=B.getHours(),fr=B.getMinutes();if(sn){const ei=function oi(B){const he=(0,g.cg1)(B);return Xr(he),(he[g.wAp.ExtraData][2]||[]).map(ve=>"string"==typeof ve?Mr(ve):[Mr(ve[0]),Mr(ve[1])])}(he),ni=function Qn(B,he,W){const ve=(0,g.cg1)(B);Xr(ve);const sn=xr([ve[g.wAp.ExtraData][0],ve[g.wAp.ExtraData][1]],he)||[];return xr(sn,W)||[]}(he,qe,ve),fi=ei.findIndex(es=>{if(Array.isArray(es)){const[Di,Fi]=es,oo=wn>=Di.hours&&fr>=Di.minutes,ns=wn<Fi.hours||wn===Fi.hours&&fr<Fi.minutes;if(Di.hours<Fi.hours){if(oo&&ns)return!0}else if(oo||ns)return!0}else if(es.hours===wn&&es.minutes===fr)return!0;return!1});if(-1!==fi)return ni[fi]}return function nr(B,he,W){const ve=(0,g.cg1)(B),sn=xr([ve[g.wAp.DayPeriodsFormat],ve[g.wAp.DayPeriodsStandalone]],he);return xr(sn,W)}(he,qe,ve)[wn<12?0:1];case zn.Eras:return function Tr(B,he){return xr((0,g.cg1)(B)[g.wAp.Eras],he)}(he,ve)[B.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${W}`)}}(qe,sn,B,he,W,ve)}}function kn(B){return function(he,W,ve){const qe=-1*ve,sn=ut(W,at.MinusSign),wn=qe>0?Math.floor(qe/60):Math.ceil(qe/60);switch(B){case rn.Short:return(qe>=0?"+":"")+Li(wn,2,sn)+Li(Math.abs(qe%60),2,sn);case rn.ShortGMT:return"GMT"+(qe>=0?"+":"")+Li(wn,1,sn);case rn.Long:return"GMT"+(qe>=0?"+":"")+Li(wn,2,sn)+":"+Li(Math.abs(qe%60),2,sn);case rn.Extended:return 0===ve?"Z":(qe>=0?"+":"")+Li(wn,2,sn)+":"+Li(Math.abs(qe%60),2,sn);default:throw new Error(`Unknown zone width "${B}"`)}}}function Ur(B){return Gr(B.getFullYear(),B.getMonth(),B.getDate()+(4-B.getDay()))}function $r(B,he=!1){return function(W,ve){let qe;if(he){const sn=new Date(W.getFullYear(),W.getMonth(),1).getDay()-1,wn=W.getDate();qe=1+Math.floor((wn+sn)/7)}else{const sn=Ur(W),wn=function Rr(B){const he=Gr(B,0,1).getDay();return Gr(B,0,1+(he<=4?4:11)-he)}(sn.getFullYear()),fr=sn.getTime()-wn.getTime();qe=1+Math.round(fr/6048e5)}return Li(qe,B,ut(ve,at.MinusSign))}}function Je(B,he=!1){return function(W,ve){return Li(Ur(W).getFullYear(),B,ut(ve,at.MinusSign),he)}}const Ue={};function Xt(B,he){B=B.replace(/:/g,"");const W=Date.parse("Jan 01, 1970 00:00:00 "+B)/6e4;return isNaN(W)?he:W}function gt(B){return B instanceof Date&&!isNaN(B.valueOf())}function os(B,he){he=encodeURIComponent(he);for(const W of B.split(";")){const ve=W.indexOf("="),[qe,sn]=-1==ve?[W,""]:[W.slice(0,ve),W.slice(ve+1)];if(qe.trim()===he)return decodeURIComponent(sn)}return null}let ds=(()=>{class B{constructor(W,ve,qe,sn){this._iterableDiffers=W,this._keyValueDiffers=ve,this._ngEl=qe,this._renderer=sn,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(W){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof W?W.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(W){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof W?W.split(/\s+/):W,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const W=this._iterableDiffer.diff(this._rawClass);W&&this._applyIterableChanges(W)}else if(this._keyValueDiffer){const W=this._keyValueDiffer.diff(this._rawClass);W&&this._applyKeyValueChanges(W)}}_applyKeyValueChanges(W){W.forEachAddedItem(ve=>this._toggleClass(ve.key,ve.currentValue)),W.forEachChangedItem(ve=>this._toggleClass(ve.key,ve.currentValue)),W.forEachRemovedItem(ve=>{ve.previousValue&&this._toggleClass(ve.key,!1)})}_applyIterableChanges(W){W.forEachAddedItem(ve=>{if("string"!=typeof ve.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(ve.item)}`);this._toggleClass(ve.item,!0)}),W.forEachRemovedItem(ve=>this._toggleClass(ve.item,!1))}_applyClasses(W){W&&(Array.isArray(W)||W instanceof Set?W.forEach(ve=>this._toggleClass(ve,!0)):Object.keys(W).forEach(ve=>this._toggleClass(ve,!!W[ve])))}_removeClasses(W){W&&(Array.isArray(W)||W instanceof Set?W.forEach(ve=>this._toggleClass(ve,!1)):Object.keys(W).forEach(ve=>this._toggleClass(ve,!1)))}_toggleClass(W,ve){(W=W.trim())&&W.split(/\s+/g).forEach(qe=>{ve?this._renderer.addClass(this._ngEl.nativeElement,qe):this._renderer.removeClass(this._ngEl.nativeElement,qe)})}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),B})();class Yr{constructor(he,W,ve,qe){this.$implicit=he,this.ngForOf=W,this.index=ve,this.count=qe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wr=(()=>{class B{constructor(W,ve,qe){this._viewContainer=W,this._template=ve,this._differs=qe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(W){this._ngForOf=W,this._ngForOfDirty=!0}set ngForTrackBy(W){this._trackByFn=W}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(W){W&&(this._template=W)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const W=this._ngForOf;!this._differ&&W&&(this._differ=this._differs.find(W).create(this.ngForTrackBy))}if(this._differ){const W=this._differ.diff(this._ngForOf);W&&this._applyChanges(W)}}_applyChanges(W){const ve=this._viewContainer;W.forEachOperation((qe,sn,wn)=>{if(null==qe.previousIndex)ve.createEmbeddedView(this._template,new Yr(qe.item,this._ngForOf,-1,-1),null===wn?void 0:wn);else if(null==wn)ve.remove(null===sn?void 0:sn);else if(null!==sn){const fr=ve.get(sn);ve.move(fr,wn),Ir(fr,qe)}});for(let qe=0,sn=ve.length;qe<sn;qe++){const fr=ve.get(qe).context;fr.index=qe,fr.count=sn,fr.ngForOf=this._ngForOf}W.forEachIdentityChange(qe=>{Ir(ve.get(qe.currentIndex),qe)})}static ngTemplateContextGuard(W,ve){return!0}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),B})();function Ir(B,he){B.context.$implicit=he.item}let Qr=(()=>{class B{constructor(W,ve){this._viewContainer=W,this._context=new wi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ve}set ngIf(W){this._context.$implicit=this._context.ngIf=W,this._updateView()}set ngIfThen(W){Ks("ngIfThen",W),this._thenTemplateRef=W,this._thenViewRef=null,this._updateView()}set ngIfElse(W){Ks("ngIfElse",W),this._elseTemplateRef=W,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(W,ve){return!0}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b),g.Y36(g.Rgc))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),B})();class wi{constructor(){this.$implicit=null,this.ngIf=null}}function Ks(B,he){if(he&&!he.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,g.AaK)(he)}'.`)}class zi{constructor(he,W){this._viewContainerRef=he,this._templateRef=W,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(he){he&&!this._created?this.create():!he&&this._created&&this.destroy()}}let hs=(()=>{class B{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(W){this._ngSwitch=W,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(W){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(W)}_matchCase(W){const ve=W==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ve,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ve}_updateDefaultCases(W){if(this._defaultViews&&W!==this._defaultUsed){this._defaultUsed=W;for(let ve=0;ve<this._defaultViews.length;ve++)this._defaultViews[ve].enforceState(W)}}}return B.\u0275fac=function(W){return new(W||B)},B.\u0275dir=g.lG2({type:B,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),B})(),kr=(()=>{class B{constructor(W,ve,qe){this.ngSwitch=qe,qe._addCase(),this._view=new zi(W,ve)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(hs,9))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),B})(),qr=(()=>{class B{constructor(W,ve,qe){qe._addDefault(new zi(W,ve))}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(hs,9))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngSwitchDefault",""]]}),B})(),Hi=(()=>{class B{constructor(W,ve,qe){this._ngEl=W,this._differs=ve,this._renderer=qe,this._ngStyle=null,this._differ=null}set ngStyle(W){this._ngStyle=W,!this._differ&&W&&(this._differ=this._differs.find(W).create())}ngDoCheck(){if(this._differ){const W=this._differ.diff(this._ngStyle);W&&this._applyChanges(W)}}_setStyle(W,ve){const[qe,sn]=W.split(".");null!=(ve=null!=ve&&sn?`${ve}${sn}`:ve)?this._renderer.setStyle(this._ngEl.nativeElement,qe,ve):this._renderer.removeStyle(this._ngEl.nativeElement,qe)}_applyChanges(W){W.forEachRemovedItem(ve=>this._setStyle(ve.key,null)),W.forEachAddedItem(ve=>this._setStyle(ve.key,ve.currentValue)),W.forEachChangedItem(ve=>this._setStyle(ve.key,ve.currentValue))}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),B})(),$o=(()=>{class B{constructor(W){this._viewContainerRef=W,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(W){if(W.ngTemplateOutlet){const ve=this._viewContainerRef;this._viewRef&&ve.remove(ve.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?ve.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&W.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.s_b))},B.\u0275dir=g.lG2({type:B,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[g.TTD]}),B})();function xs(B,he){return new g.vHH(2100,"")}class Zi{createSubscription(he,W){return he.subscribe({next:W,error:ve=>{throw ve}})}dispose(he){he.unsubscribe()}onDestroy(he){he.unsubscribe()}}class Ct{createSubscription(he,W){return he.then(W,ve=>{throw ve})}dispose(he){}onDestroy(he){}}const dt=new Ct,xt=new Zi;let mn=(()=>{class B{constructor(W){this._ref=W,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(W){return this._obj?W!==this._obj?(this._dispose(),this.transform(W)):this._latestValue:(W&&this._subscribe(W),this._latestValue)}_subscribe(W){this._obj=W,this._strategy=this._selectStrategy(W),this._subscription=this._strategy.createSubscription(W,ve=>this._updateLatestValue(W,ve))}_selectStrategy(W){if((0,g.QGY)(W))return dt;if((0,g.F4k)(W))return xt;throw xs()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(W,ve){W===this._obj&&(this._latestValue=ve,this._ref.markForCheck())}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.sBO,16))},B.\u0275pipe=g.Yjl({name:"async",type:B,pure:!1}),B})();const Ii=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let vs=(()=>{class B{constructor(W,ve){this.locale=W,this.defaultTimezone=ve}transform(W,ve="mediumDate",qe,sn){var wn;if(null==W||""===W||W!=W)return null;try{return Jr(W,ve,sn||this.locale,null!==(wn=null!=qe?qe:this.defaultTimezone)&&void 0!==wn?wn:void 0)}catch(fr){throw xs()}}}return B.\u0275fac=function(W){return new(W||B)(g.Y36(g.soG,16),g.Y36(Ii,24))},B.\u0275pipe=g.Yjl({name:"date",type:B,pure:!0}),B})(),Xs=(()=>{class B{}return B.\u0275fac=function(W){return new(W||B)},B.\u0275mod=g.oAB({type:B}),B.\u0275inj=g.cJS({}),B})();const Hs="browser";function fs(B){return B===Hs}function Js(B){return"server"===B}let yo=(()=>{class B{}return B.\u0275prov=(0,g.Yz7)({token:B,providedIn:"root",factory:()=>new Rs((0,g.LFG)(pt),window)}),B})();class Rs{constructor(he,W){this.document=he,this.window=W,this.offset=()=>[0,0]}setOffset(he){this.offset=Array.isArray(he)?()=>he:he}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(he){this.supportsScrolling()&&this.window.scrollTo(he[0],he[1])}scrollToAnchor(he){if(!this.supportsScrolling())return;const W=function Ls(B,he){const W=B.getElementById(he)||B.getElementsByName(he)[0];if(W)return W;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const ve=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let qe=ve.currentNode;for(;qe;){const sn=qe.shadowRoot;if(sn){const wn=sn.getElementById(he)||sn.querySelector(`[name="${he}"]`);if(wn)return wn}qe=ve.nextNode()}}return null}(this.document,he);W&&(this.scrollToElement(W),W.focus())}setHistoryScrollRestoration(he){if(this.supportScrollRestoration()){const W=this.window.history;W&&W.scrollRestoration&&(W.scrollRestoration=he)}}scrollToElement(he){const W=he.getBoundingClientRect(),ve=W.left+this.window.pageXOffset,qe=W.top+this.window.pageYOffset,sn=this.offset();this.window.scrollTo(ve-sn[0],qe-sn[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const he=zs(this.window.history)||zs(Object.getPrototypeOf(this.window.history));return!(!he||!he.writable&&!he.set)}catch(he){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(he){return!1}}}function zs(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class bi{}},520:(Wn,At,j)=>{j.d(At,{JF:()=>Mr,TP:()=>Dn,eN:()=>at});var g=j(9808),F=j(5e3),pe=j(9646),ae=j(8306),We=j(4351),Xe=j(9300),pt=j(4004);class Ze{}class ht{}class Oe{constructor(rt){this.normalizedNames=new Map,this.lazyUpdate=null,rt?this.lazyInit="string"==typeof rt?()=>{this.headers=new Map,rt.split("\n").forEach(ct=>{const Gt=ct.indexOf(":");if(Gt>0){const rn=ct.slice(0,Gt),bn=rn.toLowerCase(),zn=ct.slice(Gt+1).trim();this.maybeSetNormalizedName(rn,bn),this.headers.has(bn)?this.headers.get(bn).push(zn):this.headers.set(bn,[zn])}})}:()=>{this.headers=new Map,Object.keys(rt).forEach(ct=>{let Gt=rt[ct];const rn=ct.toLowerCase();"string"==typeof Gt&&(Gt=[Gt]),Gt.length>0&&(this.headers.set(rn,Gt),this.maybeSetNormalizedName(ct,rn))})}:this.headers=new Map}has(rt){return this.init(),this.headers.has(rt.toLowerCase())}get(rt){this.init();const ct=this.headers.get(rt.toLowerCase());return ct&&ct.length>0?ct[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(rt){return this.init(),this.headers.get(rt.toLowerCase())||null}append(rt,ct){return this.clone({name:rt,value:ct,op:"a"})}set(rt,ct){return this.clone({name:rt,value:ct,op:"s"})}delete(rt,ct){return this.clone({name:rt,value:ct,op:"d"})}maybeSetNormalizedName(rt,ct){this.normalizedNames.has(ct)||this.normalizedNames.set(ct,rt)}init(){this.lazyInit&&(this.lazyInit instanceof Oe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(rt=>this.applyUpdate(rt)),this.lazyUpdate=null))}copyFrom(rt){rt.init(),Array.from(rt.headers.keys()).forEach(ct=>{this.headers.set(ct,rt.headers.get(ct)),this.normalizedNames.set(ct,rt.normalizedNames.get(ct))})}clone(rt){const ct=new Oe;return ct.lazyInit=this.lazyInit&&this.lazyInit instanceof Oe?this.lazyInit:this,ct.lazyUpdate=(this.lazyUpdate||[]).concat([rt]),ct}applyUpdate(rt){const ct=rt.name.toLowerCase();switch(rt.op){case"a":case"s":let Gt=rt.value;if("string"==typeof Gt&&(Gt=[Gt]),0===Gt.length)return;this.maybeSetNormalizedName(rt.name,ct);const rn=("a"===rt.op?this.headers.get(ct):void 0)||[];rn.push(...Gt),this.headers.set(ct,rn);break;case"d":const bn=rt.value;if(bn){let zn=this.headers.get(ct);if(!zn)return;zn=zn.filter(Jr=>-1===bn.indexOf(Jr)),0===zn.length?(this.headers.delete(ct),this.normalizedNames.delete(ct)):this.headers.set(ct,zn)}else this.headers.delete(ct),this.normalizedNames.delete(ct)}}forEach(rt){this.init(),Array.from(this.normalizedNames.keys()).forEach(ct=>rt(this.normalizedNames.get(ct),this.headers.get(ct)))}}class Pe{encodeKey(rt){return un(rt)}encodeValue(rt){return un(rt)}decodeKey(rt){return decodeURIComponent(rt)}decodeValue(rt){return decodeURIComponent(rt)}}const Cn=/%(\d[a-f0-9])/gi,vt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function un(dn){return encodeURIComponent(dn).replace(Cn,(rt,ct)=>{var Gt;return null!==(Gt=vt[ct])&&void 0!==Gt?Gt:rt})}function In(dn){return`${dn}`}class Ot{constructor(rt={}){if(this.updates=null,this.cloneFrom=null,this.encoder=rt.encoder||new Pe,rt.fromString){if(rt.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Et(dn,rt){const ct=new Map;return dn.length>0&&dn.replace(/^\?/,"").split("&").forEach(rn=>{const bn=rn.indexOf("="),[zn,Jr]=-1==bn?[rt.decodeKey(rn),""]:[rt.decodeKey(rn.slice(0,bn)),rt.decodeValue(rn.slice(bn+1))],Gr=ct.get(zn)||[];Gr.push(Jr),ct.set(zn,Gr)}),ct}(rt.fromString,this.encoder)}else rt.fromObject?(this.map=new Map,Object.keys(rt.fromObject).forEach(ct=>{const Gt=rt.fromObject[ct];this.map.set(ct,Array.isArray(Gt)?Gt:[Gt])})):this.map=null}has(rt){return this.init(),this.map.has(rt)}get(rt){this.init();const ct=this.map.get(rt);return ct?ct[0]:null}getAll(rt){return this.init(),this.map.get(rt)||null}keys(){return this.init(),Array.from(this.map.keys())}append(rt,ct){return this.clone({param:rt,value:ct,op:"a"})}appendAll(rt){const ct=[];return Object.keys(rt).forEach(Gt=>{const rn=rt[Gt];Array.isArray(rn)?rn.forEach(bn=>{ct.push({param:Gt,value:bn,op:"a"})}):ct.push({param:Gt,value:rn,op:"a"})}),this.clone(ct)}set(rt,ct){return this.clone({param:rt,value:ct,op:"s"})}delete(rt,ct){return this.clone({param:rt,value:ct,op:"d"})}toString(){return this.init(),this.keys().map(rt=>{const ct=this.encoder.encodeKey(rt);return this.map.get(rt).map(Gt=>ct+"="+this.encoder.encodeValue(Gt)).join("&")}).filter(rt=>""!==rt).join("&")}clone(rt){const ct=new Ot({encoder:this.encoder});return ct.cloneFrom=this.cloneFrom||this,ct.updates=(this.updates||[]).concat(rt),ct}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(rt=>this.map.set(rt,this.cloneFrom.map.get(rt))),this.updates.forEach(rt=>{switch(rt.op){case"a":case"s":const ct=("a"===rt.op?this.map.get(rt.param):void 0)||[];ct.push(In(rt.value)),this.map.set(rt.param,ct);break;case"d":if(void 0===rt.value){this.map.delete(rt.param);break}{let Gt=this.map.get(rt.param)||[];const rn=Gt.indexOf(In(rt.value));-1!==rn&&Gt.splice(rn,1),Gt.length>0?this.map.set(rt.param,Gt):this.map.delete(rt.param)}}}),this.cloneFrom=this.updates=null)}}class Ln{constructor(){this.map=new Map}set(rt,ct){return this.map.set(rt,ct),this}get(rt){return this.map.has(rt)||this.map.set(rt,rt.defaultValue()),this.map.get(rt)}delete(rt){return this.map.delete(rt),this}has(rt){return this.map.has(rt)}keys(){return this.map.keys()}}function xe(dn){return"undefined"!=typeof ArrayBuffer&&dn instanceof ArrayBuffer}function He(dn){return"undefined"!=typeof Blob&&dn instanceof Blob}function St(dn){return"undefined"!=typeof FormData&&dn instanceof FormData}class Ht{constructor(rt,ct,Gt,rn){let bn;if(this.url=ct,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=rt.toUpperCase(),function fn(dn){switch(dn){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||rn?(this.body=void 0!==Gt?Gt:null,bn=rn):bn=Gt,bn&&(this.reportProgress=!!bn.reportProgress,this.withCredentials=!!bn.withCredentials,bn.responseType&&(this.responseType=bn.responseType),bn.headers&&(this.headers=bn.headers),bn.context&&(this.context=bn.context),bn.params&&(this.params=bn.params)),this.headers||(this.headers=new Oe),this.context||(this.context=new Ln),this.params){const zn=this.params.toString();if(0===zn.length)this.urlWithParams=ct;else{const Jr=ct.indexOf("?");this.urlWithParams=ct+(-1===Jr?"?":Jr<ct.length-1?"&":"")+zn}}else this.params=new Ot,this.urlWithParams=ct}serializeBody(){return null===this.body?null:xe(this.body)||He(this.body)||St(this.body)||function an(dn){return"undefined"!=typeof URLSearchParams&&dn instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ot?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||St(this.body)?null:He(this.body)?this.body.type||null:xe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ot?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(rt={}){var ct;const Gt=rt.method||this.method,rn=rt.url||this.url,bn=rt.responseType||this.responseType,zn=void 0!==rt.body?rt.body:this.body,Jr=void 0!==rt.withCredentials?rt.withCredentials:this.withCredentials,Gr=void 0!==rt.reportProgress?rt.reportProgress:this.reportProgress;let Br=rt.headers||this.headers,as=rt.params||this.params;const Li=null!==(ct=rt.context)&&void 0!==ct?ct:this.context;return void 0!==rt.setHeaders&&(Br=Object.keys(rt.setHeaders).reduce((ui,On)=>ui.set(On,rt.setHeaders[On]),Br)),rt.setParams&&(as=Object.keys(rt.setParams).reduce((ui,On)=>ui.set(On,rt.setParams[On]),as)),new Ht(Gt,rn,zn,{params:as,headers:Br,context:Li,reportProgress:Gr,responseType:bn,withCredentials:Jr})}}var ke=(()=>((ke=ke||{})[ke.Sent=0]="Sent",ke[ke.UploadProgress=1]="UploadProgress",ke[ke.ResponseHeader=2]="ResponseHeader",ke[ke.DownloadProgress=3]="DownloadProgress",ke[ke.Response=4]="Response",ke[ke.User=5]="User",ke))();class Ut{constructor(rt,ct=200,Gt="OK"){this.headers=rt.headers||new Oe,this.status=void 0!==rt.status?rt.status:ct,this.statusText=rt.statusText||Gt,this.url=rt.url||null,this.ok=this.status>=200&&this.status<300}}class Me extends Ut{constructor(rt={}){super(rt),this.type=ke.ResponseHeader}clone(rt={}){return new Me({headers:rt.headers||this.headers,status:void 0!==rt.status?rt.status:this.status,statusText:rt.statusText||this.statusText,url:rt.url||this.url||void 0})}}class Tt extends Ut{constructor(rt={}){super(rt),this.type=ke.Response,this.body=void 0!==rt.body?rt.body:null}clone(rt={}){return new Tt({body:void 0!==rt.body?rt.body:this.body,headers:rt.headers||this.headers,status:void 0!==rt.status?rt.status:this.status,statusText:rt.statusText||this.statusText,url:rt.url||this.url||void 0})}}class et extends Ut{constructor(rt){super(rt,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${rt.url||"(unknown url)"}`:`Http failure response for ${rt.url||"(unknown url)"}: ${rt.status} ${rt.statusText}`,this.error=rt.error||null}}function wt(dn,rt){return{body:rt,headers:dn.headers,context:dn.context,observe:dn.observe,params:dn.params,reportProgress:dn.reportProgress,responseType:dn.responseType,withCredentials:dn.withCredentials}}let at=(()=>{class dn{constructor(ct){this.handler=ct}request(ct,Gt,rn={}){let bn;if(ct instanceof Ht)bn=ct;else{let Gr,Br;Gr=rn.headers instanceof Oe?rn.headers:new Oe(rn.headers),rn.params&&(Br=rn.params instanceof Ot?rn.params:new Ot({fromObject:rn.params})),bn=new Ht(ct,Gt,void 0!==rn.body?rn.body:null,{headers:Gr,context:rn.context,params:Br,reportProgress:rn.reportProgress,responseType:rn.responseType||"json",withCredentials:rn.withCredentials})}const zn=(0,pe.of)(bn).pipe((0,We.b)(Gr=>this.handler.handle(Gr)));if(ct instanceof Ht||"events"===rn.observe)return zn;const Jr=zn.pipe((0,Xe.h)(Gr=>Gr instanceof Tt));switch(rn.observe||"body"){case"body":switch(bn.responseType){case"arraybuffer":return Jr.pipe((0,pt.U)(Gr=>{if(null!==Gr.body&&!(Gr.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Gr.body}));case"blob":return Jr.pipe((0,pt.U)(Gr=>{if(null!==Gr.body&&!(Gr.body instanceof Blob))throw new Error("Response is not a Blob.");return Gr.body}));case"text":return Jr.pipe((0,pt.U)(Gr=>{if(null!==Gr.body&&"string"!=typeof Gr.body)throw new Error("Response is not a string.");return Gr.body}));default:return Jr.pipe((0,pt.U)(Gr=>Gr.body))}case"response":return Jr;default:throw new Error(`Unreachable: unhandled observe type ${rn.observe}}`)}}delete(ct,Gt={}){return this.request("DELETE",ct,Gt)}get(ct,Gt={}){return this.request("GET",ct,Gt)}head(ct,Gt={}){return this.request("HEAD",ct,Gt)}jsonp(ct,Gt){return this.request("JSONP",ct,{params:(new Ot).append(Gt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ct,Gt={}){return this.request("OPTIONS",ct,Gt)}patch(ct,Gt,rn={}){return this.request("PATCH",ct,wt(rn,Gt))}post(ct,Gt,rn={}){return this.request("POST",ct,wt(rn,Gt))}put(ct,Gt,rn={}){return this.request("PUT",ct,wt(rn,Gt))}}return dn.\u0275fac=function(ct){return new(ct||dn)(F.LFG(Ze))},dn.\u0275prov=F.Yz7({token:dn,factory:dn.\u0275fac}),dn})();class on{constructor(rt,ct){this.next=rt,this.interceptor=ct}handle(rt){return this.interceptor.intercept(rt,this.next)}}const Dn=new F.OlP("HTTP_INTERCEPTORS");let nr=(()=>{class dn{intercept(ct,Gt){return Gt.handle(ct)}}return dn.\u0275fac=function(ct){return new(ct||dn)},dn.\u0275prov=F.Yz7({token:dn,factory:dn.\u0275fac}),dn})();const ut=/^\)\]\}',?\n/;let Rt=(()=>{class dn{constructor(ct){this.xhrFactory=ct}handle(ct){if("JSONP"===ct.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ae.y(Gt=>{const rn=this.xhrFactory.build();if(rn.open(ct.method,ct.urlWithParams),ct.withCredentials&&(rn.withCredentials=!0),ct.headers.forEach((On,Si)=>rn.setRequestHeader(On,Si.join(","))),ct.headers.has("Accept")||rn.setRequestHeader("Accept","application/json, text/plain, */*"),!ct.headers.has("Content-Type")){const On=ct.detectContentTypeHeader();null!==On&&rn.setRequestHeader("Content-Type",On)}if(ct.responseType){const On=ct.responseType.toLowerCase();rn.responseType="json"!==On?On:"text"}const bn=ct.serializeBody();let zn=null;const Jr=()=>{if(null!==zn)return zn;const On=rn.statusText||"OK",Si=new Oe(rn.getAllResponseHeaders()),Vr=function Yt(dn){return"responseURL"in dn&&dn.responseURL?dn.responseURL:/^X-Request-URL:/m.test(dn.getAllResponseHeaders())?dn.getResponseHeader("X-Request-URL"):null}(rn)||ct.url;return zn=new Me({headers:Si,status:rn.status,statusText:On,url:Vr}),zn},Gr=()=>{let{headers:On,status:Si,statusText:Vr,url:Vi}=Jr(),kn=null;204!==Si&&(kn=void 0===rn.response?rn.responseText:rn.response),0===Si&&(Si=kn?200:0);let Ft=Si>=200&&Si<300;if("json"===ct.responseType&&"string"==typeof kn){const Yn=kn;kn=kn.replace(ut,"");try{kn=""!==kn?JSON.parse(kn):null}catch(Rr){kn=Yn,Ft&&(Ft=!1,kn={error:Rr,text:kn})}}Ft?(Gt.next(new Tt({body:kn,headers:On,status:Si,statusText:Vr,url:Vi||void 0})),Gt.complete()):Gt.error(new et({error:kn,headers:On,status:Si,statusText:Vr,url:Vi||void 0}))},Br=On=>{const{url:Si}=Jr(),Vr=new et({error:On,status:rn.status||0,statusText:rn.statusText||"Unknown Error",url:Si||void 0});Gt.error(Vr)};let as=!1;const Li=On=>{as||(Gt.next(Jr()),as=!0);let Si={type:ke.DownloadProgress,loaded:On.loaded};On.lengthComputable&&(Si.total=On.total),"text"===ct.responseType&&!!rn.responseText&&(Si.partialText=rn.responseText),Gt.next(Si)},ui=On=>{let Si={type:ke.UploadProgress,loaded:On.loaded};On.lengthComputable&&(Si.total=On.total),Gt.next(Si)};return rn.addEventListener("load",Gr),rn.addEventListener("error",Br),rn.addEventListener("timeout",Br),rn.addEventListener("abort",Br),ct.reportProgress&&(rn.addEventListener("progress",Li),null!==bn&&rn.upload&&rn.upload.addEventListener("progress",ui)),rn.send(bn),Gt.next({type:ke.Sent}),()=>{rn.removeEventListener("error",Br),rn.removeEventListener("abort",Br),rn.removeEventListener("load",Gr),rn.removeEventListener("timeout",Br),ct.reportProgress&&(rn.removeEventListener("progress",Li),null!==bn&&rn.upload&&rn.upload.removeEventListener("progress",ui)),rn.readyState!==rn.DONE&&rn.abort()}})}}return dn.\u0275fac=function(ct){return new(ct||dn)(F.LFG(g.JF))},dn.\u0275prov=F.Yz7({token:dn,factory:dn.\u0275fac}),dn})();const tn=new F.OlP("XSRF_COOKIE_NAME"),Gn=new F.OlP("XSRF_HEADER_NAME");class tr{}let lr=(()=>{class dn{constructor(ct,Gt,rn){this.doc=ct,this.platform=Gt,this.cookieName=rn,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ct=this.doc.cookie||"";return ct!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,g.Mx)(ct,this.cookieName),this.lastCookieString=ct),this.lastToken}}return dn.\u0275fac=function(ct){return new(ct||dn)(F.LFG(g.K0),F.LFG(F.Lbi),F.LFG(tn))},dn.\u0275prov=F.Yz7({token:dn,factory:dn.\u0275fac}),dn})(),Xr=(()=>{class dn{constructor(ct,Gt){this.tokenService=ct,this.headerName=Gt}intercept(ct,Gt){const rn=ct.url.toLowerCase();if("GET"===ct.method||"HEAD"===ct.method||rn.startsWith("http://")||rn.startsWith("https://"))return Gt.handle(ct);const bn=this.tokenService.getToken();return null!==bn&&!ct.headers.has(this.headerName)&&(ct=ct.clone({headers:ct.headers.set(this.headerName,bn)})),Gt.handle(ct)}}return dn.\u0275fac=function(ct){return new(ct||dn)(F.LFG(tr),F.LFG(Gn))},dn.\u0275prov=F.Yz7({token:dn,factory:dn.\u0275fac}),dn})(),oi=(()=>{class dn{constructor(ct,Gt){this.backend=ct,this.injector=Gt,this.chain=null}handle(ct){if(null===this.chain){const Gt=this.injector.get(Dn,[]);this.chain=Gt.reduceRight((rn,bn)=>new on(rn,bn),this.backend)}return this.chain.handle(ct)}}return dn.\u0275fac=function(ct){return new(ct||dn)(F.LFG(ht),F.LFG(F.zs3))},dn.\u0275prov=F.Yz7({token:dn,factory:dn.\u0275fac}),dn})(),xr=(()=>{class dn{static disable(){return{ngModule:dn,providers:[{provide:Xr,useClass:nr}]}}static withOptions(ct={}){return{ngModule:dn,providers:[ct.cookieName?{provide:tn,useValue:ct.cookieName}:[],ct.headerName?{provide:Gn,useValue:ct.headerName}:[]]}}}return dn.\u0275fac=function(ct){return new(ct||dn)},dn.\u0275mod=F.oAB({type:dn}),dn.\u0275inj=F.cJS({providers:[Xr,{provide:Dn,useExisting:Xr,multi:!0},{provide:tr,useClass:lr},{provide:tn,useValue:"XSRF-TOKEN"},{provide:Gn,useValue:"X-XSRF-TOKEN"}]}),dn})(),Mr=(()=>{class dn{}return dn.\u0275fac=function(ct){return new(ct||dn)},dn.\u0275mod=F.oAB({type:dn}),dn.\u0275inj=F.cJS({providers:[at,{provide:Ze,useClass:oi},Rt,{provide:ht,useExisting:Rt}],imports:[[xr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),dn})()},5e3:(Wn,At,j)=>{j.d(At,{$8M:()=>Un,$Z:()=>Mf,AFp:()=>LE,ALo:()=>sE,AaK:()=>Ze,Akn:()=>Zl,BQk:()=>Vu,CHM:()=>ee,CRH:()=>gE,CZH:()=>qv,CqO:()=>yg,EJc:()=>Ib,EiD:()=>Fa,EpF:()=>uy,F$t:()=>fy,F4k:()=>cy,FYo:()=>$0,FiY:()=>Ei,G48:()=>Kb,Gf:()=>fE,GfV:()=>j0,Gpc:()=>Pe,Hsn:()=>Do,JOm:()=>p,JVY:()=>pl,L6k:()=>Sc,LAX:()=>ru,LFG:()=>de,LSH:()=>xu,Lbi:()=>bb,MAs:()=>sg,NdJ:()=>_g,O4$:()=>Rn,OlP:()=>po,Oqu:()=>vc,PXZ:()=>Bb,Q6J:()=>Ch,QGY:()=>mg,Qsj:()=>TC,R0b:()=>Hu,RDi:()=>zs,Rgc:()=>Xg,SBq:()=>Kg,Sil:()=>Db,Suo:()=>pE,TTD:()=>Ms,TgZ:()=>Ud,Tol:()=>Ff,Udp:()=>Sh,VKq:()=>Y0,VLi:()=>Lb,W1O:()=>vE,WLB:()=>Q0,X6Q:()=>qb,XFs:()=>Qn,Xpm:()=>Ur,Y36:()=>Vd,YKP:()=>W0,YNc:()=>rg,Yjl:()=>Ae,Yz7:()=>kt,ZZ4:()=>l0,_Bn:()=>V0,_UZ:()=>Bd,_Vd:()=>s_,_c5:()=>cT,_uU:()=>wy,aQg:()=>u0,c2e:()=>Tb,cJS:()=>Dt,cg1:()=>Hy,d8E:()=>kg,dDg:()=>HE,deG:()=>ra,dqk:()=>Br,eBb:()=>nu,eFA:()=>WE,ekj:()=>wg,g9A:()=>UE,h0i:()=>Yf,hGG:()=>dT,hij:()=>Mg,iGM:()=>hE,ifc:()=>rn,ip1:()=>FE,kEZ:()=>X0,kL8:()=>Gy,kcU:()=>Er,l5B:()=>J0,lG2:()=>Re,lcZ:()=>oE,mCW:()=>Oa,n5z:()=>ua,oAB:()=>Xt,oJD:()=>nl,oxw:()=>Nf,pB0:()=>Qu,q3G:()=>go,q4F:()=>H0,qLn:()=>xa,qOj:()=>Yp,qZA:()=>Th,qzn:()=>Gl,sBO:()=>Zb,sIi:()=>Zc,s_b:()=>l_,soG:()=>Zv,tBr:()=>Wi,tb:()=>BE,tp0:()=>ii,uIk:()=>_h,vHH:()=>un,vpe:()=>Tc,wAp:()=>Pi,xp6:()=>um,yhl:()=>tu,ynx:()=>wh,z2F:()=>t0,z3N:()=>ya,zSh:()=>df,zs3:()=>Nl});var g=j(7579),F=j(727),pe=j(8306),ae=j(6451),We=j(3099);function Xe(n){for(let r in n)if(n[r]===Xe)return r;throw Error("Could not find renamed property on target object.")}function pt(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Ze(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ze).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function ht(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Oe=Xe({__forward_ref__:Xe});function Pe(n){return n.__forward_ref__=Pe,n.toString=function(){return Ze(this())},n}function Et(n){return Cn(n)?n():n}function Cn(n){return"function"==typeof n&&n.hasOwnProperty(Oe)&&n.__forward_ref__===Pe}class un extends Error{constructor(r,o){super(function In(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,o)),this.code=r}}function Ot(n){return"string"==typeof n?n:null==n?"":String(n)}function Zt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ot(n)}function He(n,r){const o=r?` in ${r}`:"";throw new un(-201,`No provider for ${Zt(n)} found${o}`)}function rr(n,r){null==n&&function yn(n,r,o,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function kt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ut(n){return Yt(n,tr)||Yt(n,Xr)}function Yt(n,r){return n.hasOwnProperty(r)?n[r]:null}function Gn(n){return n&&(n.hasOwnProperty(lr)||n.hasOwnProperty(oi))?n[lr]:null}const tr=Xe({\u0275prov:Xe}),lr=Xe({\u0275inj:Xe}),Xr=Xe({ngInjectableDef:Xe}),oi=Xe({ngInjectorDef:Xe});var Qn=(()=>((Qn=Qn||{})[Qn.Default=0]="Default",Qn[Qn.Host=1]="Host",Qn[Qn.Self=2]="Self",Qn[Qn.SkipSelf=4]="SkipSelf",Qn[Qn.Optional=8]="Optional",Qn))();let Wr;function Mr(n){const r=Wr;return Wr=n,r}function rs(n,r,o){const a=ut(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&Qn.Optional?null:void 0!==r?r:void He(Ze(n),"Injector")}function dn(n){return{toString:n}.toString()}var rt=(()=>((rt=rt||{})[rt.OnPush=0]="OnPush",rt[rt.Default=1]="Default",rt))(),rn=(()=>{return(n=rn||(rn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",rn;var n})();const bn="undefined"!=typeof globalThis&&globalThis,zn="undefined"!=typeof window&&window,Jr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Br=bn||"undefined"!=typeof global&&global||zn||Jr,ui={},On=[],Si=Xe({\u0275cmp:Xe}),Vr=Xe({\u0275dir:Xe}),Vi=Xe({\u0275pipe:Xe}),kn=Xe({\u0275mod:Xe}),Ft=Xe({\u0275fac:Xe}),Yn=Xe({__NG_ELEMENT_ID__:Xe});let Rr=0;function Ur(n){return dn(()=>{const o={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===rt.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||On,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||rn.Emulated,id:"c",styles:n.styles||On,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,_=n.features,w=n.pipes;return a.id+=Rr++,a.inputs=Ge(n.inputs,o),a.outputs=Ge(n.outputs),_&&_.forEach(N=>N(a)),a.directiveDefs=h?()=>("function"==typeof h?h():h).map(Je):null,a.pipeDefs=w?()=>("function"==typeof w?w():w).map(Ue):null,a})}function Je(n){return gt(n)||function cn(n){return n[Vr]||null}(n)}function Ue(n){return function _r(n){return n[Vi]||null}(n)}const ft={};function Xt(n){return dn(()=>{const r={type:n.type,bootstrap:n.bootstrap||On,declarations:n.declarations||On,imports:n.imports||On,exports:n.exports||On,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ft[n.id]=n.type),r})}function Ge(n,r){if(null==n)return ui;const o={};for(const a in n)if(n.hasOwnProperty(a)){let h=n[a],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),o[h]=a,r&&(r[h]=_)}return o}const Re=Ur;function Ae(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function gt(n){return n[Si]||null}function qn(n,r){const o=n[kn]||null;if(!o&&!0===r)throw new Error(`Type ${Ze(n)} does not have '\u0275mod' property.`);return o}function hs(n){return Array.isArray(n)&&"object"==typeof n[1]}function kr(n){return Array.isArray(n)&&!0===n[1]}function qr(n){return 0!=(8&n.flags)}function cs(n){return 2==(2&n.flags)}function gs(n){return 1==(1&n.flags)}function ks(n){return null!==n.template}function Hi(n){return 0!=(512&n[2])}function Ri(n,r){return n.hasOwnProperty(Ft)?n[Ft]:null}class fo{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ms(){return io}function io(n){return n.type.prototype.ngOnChanges&&(n.setInput=Vo),js}function js(){const n=Hs(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===ui)n.previous=r;else for(let a in r)o[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Vo(n,r,o,a){const h=Hs(n)||function Is(n,r){return n[Xs]=r}(n,{previous:ui,current:null}),_=h.current||(h.current={}),w=h.previous,N=this.declaredInputs[o],L=w[N];_[N]=new fo(L&&L.currentValue,r,w===ui),n[a]=r}Ms.ngInherit=!0;const Xs="__ngSimpleChanges__";function Hs(n){return n[Xs]||null}let Rs;function zs(n){Rs=n}function Ls(){return void 0!==Rs?Rs:"undefined"!=typeof document?document:void 0}function bi(n){return!!n.listen}const B={createRenderer:(n,r)=>Ls()};function W(n){for(;Array.isArray(n);)n=n[0];return n}function sn(n,r){return W(r[n])}function wn(n,r){return W(r[n.index])}function jr(n,r){return n.data[r]}function ei(n,r){return n[r]}function ni(n,r){const o=r[n];return hs(o)?o:o[0]}function fi(n){return 4==(4&n[2])}function es(n){return 128==(128&n[2])}function Fi(n,r){return null==r?null:n[r]}function oo(n){n[18]=0}function ns(n,r){n[5]+=r;let o=n,a=n[3];for(;null!==a&&(1===r&&1===o[5]||-1===r&&0===o[5]);)a[5]+=r,o=a,a=a[3]}const Kr={lFrame:nt(null),bindingsEnabled:!0};function G(){return Kr.bindingsEnabled}function Ye(){return Kr.lFrame.lView}function Pn(){return Kr.lFrame.tView}function ee(n){return Kr.lFrame.contextLView=n,n[8]}function K(){let n=Ce();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ce(){return Kr.lFrame.currentTNode}function it(n,r){const o=Kr.lFrame;o.currentTNode=n,o.isParent=r}function qt(){return Kr.lFrame.isParent}function _n(){Kr.lFrame.isParent=!1}function yi(){const n=Kr.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function l(){return Kr.lFrame.bindingIndex++}function A(n){const r=Kr.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function z(n,r){const o=Kr.lFrame;o.bindingIndex=o.bindingRootIndex=n,me(r)}function me(n){Kr.lFrame.currentDirectiveIndex=n}function be(n){const r=Kr.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function oe(){return Kr.lFrame.currentQueryIndex}function ge(n){Kr.lFrame.currentQueryIndex=n}function ce(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function le(n,r,o){if(o&Qn.SkipSelf){let h=r,_=n;for(;!(h=h.parent,null!==h||o&Qn.Host||(h=ce(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;r=h,n=_}const a=Kr.lFrame=ze();return a.currentTNode=r,a.lView=n,!0}function Te(n){const r=ze(),o=n[1];Kr.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function ze(){const n=Kr.lFrame,r=null===n?null:n.child;return null===r?nt(n):r}function nt(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function De(){const n=Kr.lFrame;return Kr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Fe=De;function _t(){const n=De();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function vn(){return Kr.lFrame.selectedIndex}function Sn(n){Kr.lFrame.selectedIndex=n}function gn(){const n=Kr.lFrame;return jr(n.tView,n.selectedIndex)}function Rn(){Kr.lFrame.currentNamespace="svg"}function Er(){!function Fn(){Kr.lFrame.currentNamespace=null}()}function hn(n,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const _=n.data[o].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:N,ngAfterViewInit:L,ngAfterViewChecked:ie,ngOnDestroy:fe}=_;w&&(n.contentHooks||(n.contentHooks=[])).push(-o,w),N&&((n.contentHooks||(n.contentHooks=[])).push(o,N),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,N)),L&&(n.viewHooks||(n.viewHooks=[])).push(-o,L),ie&&((n.viewHooks||(n.viewHooks=[])).push(o,ie),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,ie)),null!=fe&&(n.destroyHooks||(n.destroyHooks=[])).push(o,fe)}}function or(n,r,o){ur(n,r,3,o)}function ir(n,r,o,a){(3&n[2])===o&&ur(n,r,o,a)}function zt(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function ur(n,r,o,a){const _=null!=a?a:-1,w=r.length-1;let N=0;for(let L=void 0!==a?65535&n[18]:0;L<w;L++)if("number"==typeof r[L+1]){if(N=r[L],null!=a&&N>=a)break}else r[L]<0&&(n[18]+=65536),(N<_||-1==_)&&(Jn(n,o,r,L),n[18]=(4294901760&n[18])+L+2),L++}function Jn(n,r,o,a){const h=o[a]<0,_=o[a+1],N=n[h?-o[a]:o[a]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{_.call(N)}finally{}}}else try{_.call(N)}finally{}}class Ai{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function Be(n,r,o){const a=bi(n);let h=0;for(;h<o.length;){const _=o[h];if("number"==typeof _){if(0!==_)break;h++;const w=o[h++],N=o[h++],L=o[h++];a?n.setAttribute(r,N,L,w):r.setAttributeNS(w,N,L)}else{const w=_,N=o[++h];Qt(w)?a&&n.setProperty(r,w,N):a?n.setAttribute(r,w,N):r.setAttribute(w,N),h++}}return h}function It(n){return 3===n||4===n||6===n}function Qt(n){return 64===n.charCodeAt(0)}function ar(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const h=r[a];"number"==typeof h?o=h:0===o||Nr(n,o,h,null,-1===o||2===o?r[++a]:null)}}return n}function Nr(n,r,o,a,h){let _=0,w=n.length;if(-1===r)w=-1;else for(;_<n.length;){const N=n[_++];if("number"==typeof N){if(N===r){w=-1;break}if(N>r){w=_-1;break}}}for(;_<n.length;){const N=n[_];if("number"==typeof N)break;if(N===o){if(null===a)return void(null!==h&&(n[_+1]=h));if(a===n[_+1])return void(n[_+2]=h)}_++,null!==a&&_++,null!==h&&_++}-1!==w&&(n.splice(w,0,r),_=w+1),n.splice(_++,0,o),null!==a&&n.splice(_++,0,a),null!==h&&n.splice(_++,0,h)}function Jt(n){return-1!==n}function Sr(n){return 32767&n}function li(n,r){let o=function hr(n){return n>>16}(n),a=r;for(;o>0;)a=a[15],o--;return a}let jn=!0;function sr(n){const r=jn;return jn=n,r}let An=0;function Ps(n,r){const o=O(n,r);if(-1!==o)return o;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,jo(a.data,n),jo(r,null),jo(a.blueprint,null));const h=M(n,r),_=n.injectorIndex;if(Jt(h)){const w=Sr(h),N=li(h,r),L=N[1].data;for(let ie=0;ie<8;ie++)r[_+ie]=N[w+ie]|L[w+ie]}return r[_+8]=h,_}function jo(n,r){n.push(0,0,0,0,0,0,0,0,r)}function O(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function M(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,a=null,h=r;for(;null!==h;){const _=h[1],w=_.type;if(a=2===w?_.declTNode:1===w?h[6]:null,null===a)return-1;if(o++,h=h[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function S(n,r,o){!function ps(n,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(Yn)&&(a=o[Yn]),null==a&&(a=o[Yn]=An++);const h=255&a;r.data[n+(h>>5)]|=1<<h}(n,r,o)}function ne(n,r,o){if(o&Qn.Optional)return n;He(r,"NodeInjector")}function _e(n,r,o,a){if(o&Qn.Optional&&void 0===a&&(a=null),0==(o&(Qn.Self|Qn.Host))){const h=n[9],_=Mr(void 0);try{return h?h.get(r,a,o&Qn.Optional):rs(r,a,o&Qn.Optional)}finally{Mr(_)}}return ne(a,r,o)}function $e(n,r,o,a=Qn.Default,h){if(null!==n){const _=function Or(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Yn)?n[Yn]:void 0;return"number"==typeof r?r>=0?255&r:Mt:r}(o);if("function"==typeof _){if(!le(r,n,a))return a&Qn.Host?ne(h,o,a):_e(r,o,a,h);try{const w=_(a);if(null!=w||a&Qn.Optional)return w;He(o)}finally{Fe()}}else if("number"==typeof _){let w=null,N=O(n,r),L=-1,ie=a&Qn.Host?r[16][6]:null;for((-1===N||a&Qn.SkipSelf)&&(L=-1===N?M(n,r):r[N+8],-1!==L&&Ys(a,!1)?(w=r[1],N=Sr(L),r=li(L,r)):N=-1);-1!==N;){const fe=r[1];if(Bn(_,N,fe.data)){const Le=jt(N,r,o,w,a,ie);if(Le!==Ne)return Le}L=r[N+8],-1!==L&&Ys(a,r[1].data[N+8]===ie)&&Bn(_,N,r)?(w=fe,N=Sr(L),r=li(L,r)):N=-1}}}return _e(r,o,a,h)}const Ne={};function Mt(){return new vr(K(),Ye())}function jt(n,r,o,a,h,_){const w=r[1],N=w.data[n+8],fe=pr(N,w,o,null==a?cs(N)&&jn:a!=w&&0!=(3&N.type),h&Qn.Host&&_===N);return null!==fe?cr(r,w,fe,N):Ne}function pr(n,r,o,a,h){const _=n.providerIndexes,w=r.data,N=1048575&_,L=n.directiveStart,fe=_>>20,mt=h?N+fe:n.directiveEnd;for(let Bt=a?N:N+fe;Bt<mt;Bt++){const Mn=w[Bt];if(Bt<L&&o===Mn||Bt>=L&&Mn.type===o)return Bt}if(h){const Bt=w[L];if(Bt&&ks(Bt)&&Bt.type===o)return L}return null}function cr(n,r,o,a){let h=n[o];const _=r.data;if(function Ws(n){return n instanceof Ai}(h)){const w=h;w.resolving&&function Ln(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new un(-200,`Circular dependency in DI detected for ${n}${o}`)}(Zt(_[o]));const N=sr(w.canSeeViewProviders);w.resolving=!0;const L=w.injectImpl?Mr(w.injectImpl):null;le(n,a,Qn.Default);try{h=n[o]=w.factory(void 0,_,n,a),r.firstCreatePass&&o>=a.directiveStart&&function Nt(n,r,o){const{ngOnChanges:a,ngOnInit:h,ngDoCheck:_}=r.type.prototype;if(a){const w=io(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,w),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,w)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),_&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,_))}(o,_[o],r)}finally{null!==L&&Mr(L),sr(N),w.resolving=!1,Fe()}}return h}function Bn(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Ys(n,r){return!(n&Qn.Self||n&Qn.Host&&r)}class vr{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return $e(this._tNode,this._lView,r,a,o)}}function ua(n){return dn(()=>{const r=n.prototype.constructor,o=r[Ft]||Ss(r),a=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==a;){const _=h[Ft]||Ss(h);if(_&&_!==o)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function Ss(n){return Cn(n)?()=>{const r=Ss(Et(n));return r&&r()}:Ri(n)}function Un(n){return function q(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const a=o.length;let h=0;for(;h<a;){const _=o[h];if(It(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<a&&"string"==typeof o[h];)h++;else{if(_===r)return o[h+1];h+=2}}}return null}(K(),n)}const Ao="__parameters__";function Ya(n,r,o){return dn(()=>{const a=function Fl(n){return function(...o){if(n){const a=n(...o);for(const h in a)this[h]=a[h]}}}(r);function h(..._){if(this instanceof h)return a.apply(this,_),this;const w=new h(..._);return N.annotation=w,N;function N(L,ie,fe){const Le=L.hasOwnProperty(Ao)?L[Ao]:Object.defineProperty(L,Ao,{value:[]})[Ao];for(;Le.length<=fe;)Le.push(null);return(Le[fe]=Le[fe]||[]).push(w),L}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class po{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=kt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ra=new po("AnalyzeForEntryComponents");function xo(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let a=n[o];Array.isArray(a)?(r===n&&(r=n.slice(0,o)),xo(a,r)):r!==n&&r.push(a)}return r}function Xo(n,r){n.forEach(o=>Array.isArray(o)?Xo(o,r):r(o))}function Jl(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function yu(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function vo(n,r){const o=[];for(let a=0;a<n;a++)o.push(r);return o}function Eo(n,r,o){let a=Ba(n,r);return a>=0?n[1|a]=o:(a=~a,function Il(n,r,o,a){let h=n.length;if(h==r)n.push(o,a);else if(1===h)n.push(a,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=o,n[r+1]=a}}(n,a,r,o)),a}function Xa(n,r){const o=Ba(n,r);if(o>=0)return n[1|o]}function Ba(n,r){return function $a(n,r,o){let a=0,h=n.length>>o;for(;h!==a;){const _=a+(h-a>>1),w=n[_<<o];if(r===w)return _<<o;w>r?h=_:a=_+1}return~(h<<o)}(n,r,1)}const co={},Ha="__NG_DI_FLAG__",Io="ngTempTokenPath",hl=/\n/gm,Ia="__source",Ul=Xe({provide:String,useValue:Xe});let Ra;function U(n){const r=Ra;return Ra=n,r}function Y(n,r=Qn.Default){if(void 0===Ra)throw new un(203,"");return null===Ra?rs(n,void 0,r):Ra.get(n,r&Qn.Optional?null:void 0,r)}function de(n,r=Qn.Default){return(function xr(){return Wr}()||Y)(Et(n),r)}const Pt=de;function Kt(n){const r=[];for(let o=0;o<n.length;o++){const a=Et(n[o]);if(Array.isArray(a)){if(0===a.length)throw new un(900,"");let h,_=Qn.Default;for(let w=0;w<a.length;w++){const N=a[w],L=Hr(N);"number"==typeof L?-1===L?h=N.token:_|=L:h=N}r.push(de(h,_))}else r.push(de(a))}return r}function Vn(n,r){return n[Ha]=r,n.prototype[Ha]=r,n}function Hr(n){return n[Ha]}const Wi=Vn(Ya("Inject",n=>({token:n})),-1),Ei=Vn(Ya("Optional"),8),ii=Vn(Ya("SkipSelf"),4);let Ro,$l;function to(n){var r;return(null===(r=function qu(){if(void 0===Ro&&(Ro=null,Br.trustedTypes))try{Ro=Br.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ro}())||void 0===r?void 0:r.createHTML(n))||n}function Go(n){var r;return(null===(r=function fl(){if(void 0===$l&&($l=null,Br.trustedTypes))try{$l=Br.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return $l}())||void 0===r?void 0:r.createHTML(n))||n}class Ns{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Zu extends Ns{getTypeName(){return"HTML"}}class eu extends Ns{getTypeName(){return"Style"}}class jl extends Ns{getTypeName(){return"Script"}}class Hl extends Ns{getTypeName(){return"URL"}}class Yu extends Ns{getTypeName(){return"ResourceURL"}}function ya(n){return n instanceof Ns?n.changingThisBreaksApplicationSecurity:n}function Gl(n,r){const o=tu(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}function tu(n){return n instanceof Ns&&n.getTypeName()||null}function pl(n){return new Zu(n)}function Sc(n){return new eu(n)}function nu(n){return new jl(n)}function ru(n){return new Hl(n)}function Qu(n){return new Yu(n)}class gl{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const o=(new window.DOMParser).parseFromString(to(r),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(r):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class _a{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const a=this.inertDocument.createElement("body");o.appendChild(a)}}getInertBodyElement(r){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=to(r),o;const a=this.inertDocument.createElement("body");return a.innerHTML=to(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const o=r.attributes;for(let h=o.length-1;0<h;h--){const w=o.item(h).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&r.removeAttribute(w)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const Cu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Oa(n){return(n=String(n)).match(Cu)||n.match(bu)?n:"unsafe:"+n}function ka(n){const r={};for(const o of n.split(","))r[o]=!0;return r}function Da(...n){const r={};for(const o of n)for(const a in o)o.hasOwnProperty(a)&&(r[a]=!0);return r}const Ju=ka("area,br,col,hr,img,wbr"),Tu=ka("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zl=ka("rp,rt"),wu=Da(Ju,Da(Tu,ka("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Da(zl,ka("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Da(zl,Tu)),Iu=ka("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Su=ka("srcset"),ec=Da(Iu,Su,ka("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ka("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yl=ka("script,style,template");class dd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let o=r.firstChild,a=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?a=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,a&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let h=this.checkClobberedElement(o,o.nextSibling);if(h){o=h;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(r){const o=r.nodeName.toLowerCase();if(!wu.hasOwnProperty(o))return this.sanitizedSomething=!0,!yl.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const a=r.attributes;for(let h=0;h<a.length;h++){const _=a.item(h),w=_.name,N=w.toLowerCase();if(!ec.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let L=_.value;Iu[N]&&(L=Oa(L)),Su[N]&&(n=L,L=(n=String(n)).split(",").map(r=>Oa(r.trim())).join(", ")),this.buf.push(" ",w,'="',za(L),'"')}var n;return this.buf.push(">"),!0}endElement(r){const o=r.nodeName.toLowerCase();wu.hasOwnProperty(o)&&!Ju.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(r){this.buf.push(za(r))}checkClobberedElement(r,o){if(o&&(r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return o}}const zo=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Au=/([^\#-~ |!])/g;function za(n){return n.replace(/&/g,"&amp;").replace(zo,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Au,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Aa;function Fa(n,r){let o=null;try{Aa=Aa||function iu(n){const r=new _a(n);return function da(){try{return!!(new window.DOMParser).parseFromString(to(""),"text/html")}catch(n){return!1}}()?new gl(r):r}(n);let a=r?String(r):"";o=Aa.getInertBodyElement(a);let h=5,_=a;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,a=_,_=o.innerHTML,o=Aa.getInertBodyElement(a)}while(a!==_);return to((new dd).sanitizeChildren(_l(o)||o))}finally{if(o){const a=_l(o)||o;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function _l(n){return"content"in n&&function ro(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var go=(()=>((go=go||{})[go.NONE=0]="NONE",go[go.HTML=1]="HTML",go[go.STYLE=2]="STYLE",go[go.SCRIPT=3]="SCRIPT",go[go.URL=4]="URL",go[go.RESOURCE_URL=5]="RESOURCE_URL",go))();function nl(n){const r=Wo();return r?Go(r.sanitize(go.HTML,n)||""):Gl(n,"HTML")?Go(ya(n)):Fa(Ls(),Ot(n))}function xu(n){const r=Wo();return r?r.sanitize(go.URL,n)||"":Gl(n,"URL")?ya(n):Oa(Ot(n))}function Wo(){const n=Ye();return n&&n[12]}const _s="__ngContext__";function aa(n,r){n[_s]=r}function rl(n){const r=function Pu(n){return n[_s]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function lu(n){return n.ngOriginalError}function Ou(n,...r){n.error(...r)}class xa{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r),a=function Nu(n){return n&&n.ngErrorLogger||Ou}(r);a(this._console,"ERROR",r),o&&a(this._console,"ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&lu(r);for(;o&&lu(o);)o=lu(o);return o||null}}const sl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Br))();function Wa(n){return n instanceof Function?n():n}var p=(()=>((p=p||{})[p.Important=1]="Important",p[p.DashCase=2]="DashCase",p))();function D(n,r){return undefined(n,r)}function bt(n){const r=n[3];return kr(r)?r[3]:r}function Lr(n){return hi(n[13])}function Ci(n){return hi(n[4])}function hi(n){for(;null!==n&&!kr(n);)n=n[4];return n}function f(n,r,o,a,h){if(null!=a){let _,w=!1;kr(a)?_=a:hs(a)&&(w=!0,a=a[0]);const N=W(a);0===n&&null!==o?null==h?Lh(r,o,N):Wl(r,o,N,h||null,!0):1===n&&null!==o?Wl(r,o,N,h||null,!0):2===n?function np(n,r,o){const a=Vh(n,r);a&&function p_(n,r,o,a){bi(n)?n.removeChild(r,o,a):r.removeChild(o)}(n,a,r,o)}(r,N,w):3===n&&r.destroyNode(N),null!=_&&function ip(n,r,o,a,h){const _=o[7];_!==W(o)&&f(r,n,a,_,h);for(let N=10;N<o.length;N++){const L=o[N];Xd(L[1],L,n,r,a,_)}}(r,n,_,o,h)}}function x(n,r,o){if(bi(n))return n.createElement(r,o);{const a=null!==o?function yo(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(o):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Tn(n,r){const o=n[9],a=o.indexOf(r),h=r[3];1024&r[2]&&(r[2]&=-1025,ns(h,-1)),o.splice(a,1)}function xn(n,r){if(n.length<=10)return;const o=10+r,a=n[o];if(a){const h=a[17];null!==h&&h!==n&&Tn(h,a),r>0&&(n[o-1][4]=a[4]);const _=yu(n,10+r);!function H(n,r){Xd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const w=_[19];null!==w&&w.detachView(_[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Cr(n,r){if(!(256&r[2])){const o=r[11];bi(o)&&o.destroyNode&&Xd(n,r,o,3,null,null),function Qe(n){let r=n[13];if(!r)return pi(n[1],n);for(;r;){let o=null;if(hs(r))o=r[13];else{const a=r[10];a&&(o=a)}if(!o){for(;r&&!r[4]&&r!==n;)hs(r)&&pi(r[1],r),r=r[3];null===r&&(r=n),hs(r)&&pi(r[1],r),o=r&&r[4]}r=o}}(r)}}function pi(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function la(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let a=0;a<o.length;a+=2){const h=r[o[a]];if(!(h instanceof Ai)){const _=o[a+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const N=h[_[w]],L=_[w+1];try{L.call(N)}finally{}}else try{_.call(h)}finally{}}}}(n,r),function Ds(n,r){const o=n.cleanup,a=r[7];let h=-1;if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const w=o[_+1],N="function"==typeof w?w(r):W(r[w]),L=a[h=o[_+2]],ie=o[_+3];"boolean"==typeof ie?N.removeEventListener(o[_],L,ie):ie>=0?a[h=ie]():a[h=-ie].unsubscribe(),_+=2}else{const w=a[h=o[_+1]];o[_].call(w)}if(null!==a){for(let _=h+1;_<a.length;_++)a[_]();r[7]=null}}(n,r),1===r[1].type&&bi(r[11])&&r[11].destroy();const o=r[17];if(null!==o&&kr(r[3])){o!==r[3]&&Tn(o,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fu(n,r,o){return function Vc(n,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[0];if(2&a.flags){const h=n.data[a.directiveStart].encapsulation;if(h===rn.None||h===rn.Emulated)return null}return wn(a,o)}(n,r.parent,o)}function Wl(n,r,o,a,h){bi(n)?n.insertBefore(r,o,a,h):r.insertBefore(o,a,h)}function Lh(n,r,o){bi(n)?n.appendChild(r,o):r.appendChild(o)}function em(n,r,o,a,h){null!==a?Wl(n,r,o,a,h):Lh(n,r,o)}function Vh(n,r){return bi(n)?n.parentNode(r):r.parentNode}function tm(n,r,o){return rm(n,r,o)}let rm=function nm(n,r,o){return 40&n.type?wn(n,o):null};function Uh(n,r,o,a){const h=Fu(n,a,r),_=r[11],N=tm(a.parent||r[6],a,r);if(null!=h)if(Array.isArray(o))for(let L=0;L<o.length;L++)em(_,h,o[L],N,!1);else em(_,h,o,N,!1)}function Bh(n,r){if(null!==r){const o=r.type;if(3&o)return wn(r,n);if(4&o)return tp(-1,n[r.index]);if(8&o){const a=r.child;if(null!==a)return Bh(n,a);{const h=n[r.index];return kr(h)?tp(-1,h):W(h)}}if(32&o)return D(r,n)()||W(n[r.index]);{const a=ep(n,r);return null!==a?Array.isArray(a)?a[0]:Bh(bt(n[16]),a):Bh(n,r.next)}}return null}function ep(n,r){return null!==r?n[16][6].projection[r.projection]:null}function tp(n,r){const o=10+n+1;if(o<r.length){const a=r[o],h=a[1].firstChild;if(null!==h)return Bh(a,h)}return r[7]}function $h(n,r,o,a,h,_,w){for(;null!=o;){const N=a[o.index],L=o.type;if(w&&0===r&&(N&&aa(W(N),a),o.flags|=4),64!=(64&o.flags))if(8&L)$h(n,r,o.child,a,h,_,!1),f(r,n,h,N,_);else if(32&L){const ie=D(o,a);let fe;for(;fe=ie();)f(r,n,h,fe,_);f(r,n,h,N,_)}else 16&L?ga(n,r,a,o,h,_):f(r,n,h,N,_);o=w?o.projectionNext:o.next}}function Xd(n,r,o,a,h,_){$h(o,a,n.firstChild,r,h,_,!1)}function ga(n,r,o,a,h,_){const w=o[16],L=w[6].projection[a.projection];if(Array.isArray(L))for(let ie=0;ie<L.length;ie++)f(r,n,h,L[ie],_);else $h(n,r,L,w[3],h,_,!0)}function jh(n,r,o){bi(n)?n.setAttribute(r,"style",o):r.style.cssText=o}function uu(n,r,o){bi(n)?""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o):r.className=o}function op(n,r,o){let a=n.length;for(;;){const h=n.indexOf(r,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const _=r.length;if(h+_===a||n.charCodeAt(h+_)<=32)return h}o=h+1}}const ap="ng-template";function Hh(n,r,o){let a=0;for(;a<n.length;){let h=n[a++];if(o&&"class"===h){if(h=n[a],-1!==op(h.toLowerCase(),r,0))return!0}else if(1===h){for(;a<n.length&&"string"==typeof(h=n[a++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function sc(n){return 4===n.type&&n.value!==ap}function Uc(n,r,o){return r===(4!==n.type||o?n.value:ap)}function Bc(n,r,o){let a=4;const h=n.attrs||[],_=function om(n){for(let r=0;r<n.length;r++)if(It(n[r]))return r;return n.length}(h);let w=!1;for(let N=0;N<r.length;N++){const L=r[N];if("number"!=typeof L){if(!w)if(4&a){if(a=2|1&a,""!==L&&!Uc(n,L,o)||""===L&&1===r.length){if(qa(a))return!1;w=!0}}else{const ie=8&a?L:r[++N];if(8&a&&null!==n.attrs){if(!Hh(n.attrs,ie,o)){if(qa(a))return!1;w=!0}continue}const Le=sm(8&a?"class":L,h,sc(n),o);if(-1===Le){if(qa(a))return!1;w=!0;continue}if(""!==ie){let mt;mt=Le>_?"":h[Le+1].toLowerCase();const Bt=8&a?mt:null;if(Bt&&-1!==op(Bt,ie,0)||2&a&&ie!==mt){if(qa(a))return!1;w=!0}}}}else{if(!w&&!qa(a)&&!qa(L))return!1;if(w&&qa(L))continue;w=!1,a=L|1&a}}return qa(a)||w}function qa(n){return 0==(1&n)}function sm(n,r,o,a){if(null===r)return-1;let h=0;if(a||!o){let _=!1;for(;h<r.length;){const w=r[h];if(w===n)return h;if(3===w||6===w)_=!0;else{if(1===w||2===w){let N=r[++h];for(;"string"==typeof N;)N=r[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=_?1:2}return-1}return function am(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const a=n[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,n)}function Gh(n,r,o=!1){for(let a=0;a<r.length;a++)if(Bc(n,r[a],o))return!0;return!1}function m_(n,r){e:for(let o=0;o<r.length;o++){const a=r[o];if(n.length===a.length){for(let h=0;h<n.length;h++)if(n[h]!==a[h])continue e;return!0}}return!1}function up(n,r){return n?":not("+r.trim()+")":r}function lm(n){let r=n[0],o=1,a=2,h="",_=!1;for(;o<n.length;){let w=n[o];if("string"==typeof w)if(2&a){const N=n[++o];h+="["+w+(N.length>0?'="'+N+'"':"")+"]"}else 8&a?h+="."+w:4&a&&(h+=" "+w);else""!==h&&!qa(w)&&(r+=up(_,h),h=""),a=w,_=_||!qa(a);o++}return""!==h&&(r+=up(_,h)),r}const ji={};function um(n){cp(Pn(),Ye(),vn()+n,!1)}function cp(n,r,o,a){if(!a)if(3==(3&r[2])){const _=n.preOrderCheckHooks;null!==_&&or(r,_,o)}else{const _=n.preOrderHooks;null!==_&&ir(r,_,0,o)}Sn(o)}function Wh(n,r){return n<<17|r<<2}function ql(n){return n>>17&32767}function cu(n){return 2|n}function du(n){return(131068&n)>>2}function dp(n,r){return-131069&n|r<<2}function fp(n){return 1|n}function Ep(n,r){const o=n.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const h=o[a],_=o[a+1];if(-1!==_){const w=n.data[_];ge(h),w.contentQueries(2,r[_],_)}}}function ih(n,r,o,a,h,_,w,N,L,ie){const fe=r.blueprint.slice();return fe[0]=h,fe[2]=140|a,oo(fe),fe[3]=fe[15]=n,fe[8]=o,fe[10]=w||n&&n[10],fe[11]=N||n&&n[11],fe[12]=L||n&&n[12]||null,fe[9]=ie||n&&n[9]||null,fe[6]=_,fe[16]=2==r.type?n[16]:fe,fe}function Id(n,r,o,a,h){let _=n.data[r];if(null===_)_=function sh(n,r,o,a,h){const _=Ce(),w=qt(),L=n.data[r]=function wp(n,r,o,a,h,_){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,o,r,a,h);return null===n.firstChild&&(n.firstChild=L),null!==_&&(w?null==_.child&&null!==L.parent&&(_.child=L):null===_.next&&(_.next=L)),L}(n,r,o,a,h),function I(){return Kr.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=o,_.value=a,_.attrs=h;const w=function Ve(){const n=Kr.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===w?-1:w.injectorIndex}return it(_,!0),_}function Bo(n,r,o,a){if(0===o)return-1;const h=r.length;for(let _=0;_<o;_++)r.push(a),n.blueprint.push(a),n.data.push(null);return h}function oh(n,r,o){Te(r);try{const a=n.viewQuery;null!==a&&kp(1,a,o);const h=n.template;null!==h&&vm(n,r,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ep(n,r),n.staticViewQueries&&kp(2,n.viewQuery,o);const _=n.components;null!==_&&function _m(n,r){for(let o=0;o<r.length;o++)N_(n,r[o])}(r,_)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,_t()}}function Sd(n,r,o,a){const h=r[2];if(256!=(256&h)){Te(r);try{oo(r),function ts(n){return Kr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&vm(n,r,o,2,a);const w=3==(3&h);if(w){const ie=n.preOrderCheckHooks;null!==ie&&or(r,ie,null)}else{const ie=n.preOrderHooks;null!==ie&&ir(r,ie,0,null),zt(r,0)}if(function P_(n){for(let r=Lr(n);null!==r;r=Ci(r)){if(!r[2])continue;const o=r[9];for(let a=0;a<o.length;a++){const h=o[a],_=h[3];0==(1024&h[2])&&ns(_,1),h[2]|=1024}}}(r),function Im(n){for(let r=Lr(n);null!==r;r=Ci(r))for(let o=10;o<r.length;o++){const a=r[o],h=a[1];es(a)&&Sd(h,a,h.template,a[8])}}(r),null!==n.contentQueries&&Ep(n,r),w){const ie=n.contentCheckHooks;null!==ie&&or(r,ie)}else{const ie=n.contentHooks;null!==ie&&ir(r,ie,1),zt(r,1)}!function ym(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const h=o[a];if(h<0)Sn(~h);else{const _=h,w=o[++a],N=o[++a];z(w,_),N(2,r[_])}}}finally{Sn(-1)}}(n,r);const N=n.components;null!==N&&function I_(n,r){for(let o=0;o<r.length;o++)Sm(n,r[o])}(r,N);const L=n.viewQuery;if(null!==L&&kp(2,L,a),w){const ie=n.viewCheckHooks;null!==ie&&or(r,ie)}else{const ie=n.viewHooks;null!==ie&&ir(r,ie,2),zt(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,ns(r[3],-1))}finally{_t()}}}function S_(n,r,o,a){const h=r[10],w=fi(r);try{!w&&h.begin&&h.begin(),w&&oh(n,r,a),Sd(n,r,o,a)}finally{!w&&h.end&&h.end()}}function vm(n,r,o,a,h){const _=vn(),w=2&a;try{Sn(-1),w&&r.length>20&&cp(n,r,20,!1),o(a,h)}finally{Sn(_)}}function Cp(n,r,o){if(qr(r)){const h=r.directiveEnd;for(let _=r.directiveStart;_<h;_++){const w=n.data[_];w.contentQueries&&w.contentQueries(1,o[_],_)}}}function bp(n,r,o){!G()||(function bm(n,r,o,a){const h=o.directiveStart,_=o.directiveEnd;n.firstCreatePass||Ps(o,r),aa(a,r);const w=o.initialInputs;for(let N=h;N<_;N++){const L=n.data[N],ie=ks(L);ie&&Pp(r,o,L);const fe=cr(r,n,N,o);aa(fe,r),null!==w&&sf(0,N-h,fe,L,0,w),ie&&(ni(o.index,r)[8]=fe)}}(n,r,o,wn(o,r)),128==(128&o.flags)&&function Tm(n,r,o){const a=o.directiveStart,h=o.directiveEnd,w=o.index,N=function J(){return Kr.lFrame.currentDirectiveIndex}();try{Sn(w);for(let L=a;L<h;L++){const ie=n.data[L],fe=r[L];me(L),(null!==ie.hostBindings||0!==ie.hostVars||null!==ie.hostAttrs)&&Ap(ie,fe)}}finally{Sn(-1),me(N)}}(n,r,o))}function Dd(n,r,o=wn){const a=r.localNames;if(null!==a){let h=r.index+1;for(let _=0;_<a.length;_+=2){const w=a[_+1],N=-1===w?o(r,n):n[w];n[h++]=N}}}function Em(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=ah(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function ah(n,r,o,a,h,_,w,N,L,ie){const fe=20+a,Le=fe+h,mt=function Tp(n,r){const o=[];for(let a=0;a<r;a++)o.push(a<n?null:ji);return o}(fe,Le),Bt="function"==typeof ie?ie():ie;return mt[1]={type:n,blueprint:mt,template:o,queries:null,viewQuery:N,declTNode:r,data:mt.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:L,consts:Bt,incompleteFirstPass:!1}}function ef(n,r,o,a){const h=xm(r);null===o?h.push(a):(h.push(o),n.firstCreatePass&&Md(n).push(a,h.length-1))}function Ip(n,r,o){for(let a in n)if(n.hasOwnProperty(a)){const h=n[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(r,h):o[a]=[r,h]}return o}function al(n,r,o,a,h,_,w,N){const L=wn(r,o);let fe,ie=r.inputs;!N&&null!=ie&&(fe=ie[a])?(cf(n,o,fe,a,h),cs(r)&&function Sp(n,r){const o=ni(r,n);16&o[2]||(o[2]|=64)}(o,r.index)):3&r.type&&(a=function Cm(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),h=null!=w?w(h,r.value||"",a):h,bi(_)?_.setProperty(L,a,h):Qt(a)||(L.setProperty?L.setProperty(a,h):L[a]=h))}function lc(n,r,o,a){let h=!1;if(G()){const _=function M_(n,r,o){const a=n.directiveRegistry;let h=null;if(a)for(let _=0;_<a.length;_++){const w=a[_];Gh(o,w.selectors,!1)&&(h||(h=[]),S(Ps(o,r),n,w.type),ks(w)?(rf(n,o),h.unshift(w)):h.push(w))}return h}(n,r,o),w=null===a?null:{"":-1};if(null!==_){h=!0,Mp(o,n.data.length,_.length);for(let fe=0;fe<_.length;fe++){const Le=_[fe];Le.providersResolver&&Le.providersResolver(Le)}let N=!1,L=!1,ie=Bo(n,r,_.length,null);for(let fe=0;fe<_.length;fe++){const Le=_[fe];o.mergedAttrs=ar(o.mergedAttrs,Le.hostAttrs),Rp(n,o,r,ie,Le),xp(ie,Le,w),null!==Le.contentQueries&&(o.flags|=8),(null!==Le.hostBindings||null!==Le.hostAttrs||0!==Le.hostVars)&&(o.flags|=128);const mt=Le.type.prototype;!N&&(mt.ngOnChanges||mt.ngOnInit||mt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),N=!0),!L&&(mt.ngOnChanges||mt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),L=!0),ie++}!function D_(n,r){const a=r.directiveEnd,h=n.data,_=r.attrs,w=[];let N=null,L=null;for(let ie=r.directiveStart;ie<a;ie++){const fe=h[ie],Le=fe.inputs,mt=null===_||sc(r)?null:Np(Le,_);w.push(mt),N=Ip(Le,ie,N),L=Ip(fe.outputs,ie,L)}null!==N&&(N.hasOwnProperty("class")&&(r.flags|=16),N.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=N,r.outputs=L}(n,o)}w&&function R_(n,r,o){if(r){const a=n.localNames=[];for(let h=0;h<r.length;h+=2){const _=o[r[h+1]];if(null==_)throw new un(-301,!1);a.push(r[h],_)}}}(o,a,w)}return o.mergedAttrs=ar(o.mergedAttrs,o.attrs),h}function tf(n,r,o,a,h,_){const w=_.hostBindings;if(w){let N=n.hostBindingOpCodes;null===N&&(N=n.hostBindingOpCodes=[]);const L=~r.index;(function nf(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(N)!=L&&N.push(L),N.push(a,h,w)}}function Ap(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function rf(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=n;ks(r)&&(o[""]=n)}}function Mp(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Rp(n,r,o,a,h){n.data[a]=h;const _=h.factory||(h.factory=Ri(h.type)),w=new Ai(_,ks(h),null);n.blueprint[a]=w,o[a]=w,tf(n,r,0,a,Bo(n,o,h.hostVars,ji),h)}function Pp(n,r,o){const a=wn(r,n),h=Em(o),_=n[10],w=uh(n,ih(n,h,null,o.onPush?64:16,a,r,_,_.createRenderer(a,o),null,null));n[r.index]=w}function El(n,r,o,a,h,_){const w=wn(n,r);!function Wc(n,r,o,a,h,_,w){if(null==_)bi(n)?n.removeAttribute(r,h,o):r.removeAttribute(h);else{const N=null==w?Ot(_):w(_,a||"",h);bi(n)?n.setAttribute(r,h,N,o):o?r.setAttributeNS(o,h,N):r.setAttribute(h,N)}}(r[11],w,_,n.value,o,a,h)}function sf(n,r,o,a,h,_){const w=_[r];if(null!==w){const N=a.setInput;for(let L=0;L<w.length;){const ie=w[L++],fe=w[L++],Le=w[L++];null!==N?a.setInput(o,Le,ie,fe):o[fe]=Le}}}function Np(n,r){let o=null,a=0;for(;a<r.length;){const h=r[a];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],r[a+1])),a+=2}else a+=2;else a+=4}return o}function af(n,r,o,a){return new Array(n,!0,!1,r,null,0,a,o,null,null)}function Sm(n,r){const o=ni(r,n);if(es(o)){const a=o[1];80&o[2]?Sd(a,o,a.template,o[8]):o[5]>0&&Op(o)}}function Op(n){for(let a=Lr(n);null!==a;a=Ci(a))for(let h=10;h<a.length;h++){const _=a[h];if(1024&_[2]){const w=_[1];Sd(w,_,w.template,_[8])}else _[5]>0&&Op(_)}const o=n[1].components;if(null!==o)for(let a=0;a<o.length;a++){const h=ni(o[a],n);es(h)&&h[5]>0&&Op(h)}}function N_(n,r){const o=ni(r,n),a=o[1];(function O_(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(a,o),oh(a,o,o[8])}function uh(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function xd(n){for(;n;){n[2]|=64;const r=bt(n);if(Hi(n)&&!r)return n;n=r}return null}function Dm(n){!function dh(n){for(let r=0;r<n.components.length;r++){const o=n.components[r],a=rl(o),h=a[1];S_(h,a,h.template,o)}}(n[8])}function kp(n,r,o){ge(0),r(n,o)}const k_=(()=>Promise.resolve(null))();function xm(n){return n[7]||(n[7]=[])}function Md(n){return n.cleanup||(n.cleanup=[])}function qc(n,r){const o=n[9],a=o?o.get(xa,null):null;a&&a.handleError(r)}function cf(n,r,o,a,h){for(let _=0;_<o.length;){const w=o[_++],N=o[_++],L=r[w],ie=n.data[w];null!==ie.setInput?ie.setInput(L,h,a,N):L[N]=h}}function Pl(n,r,o){const a=sn(r,n);!function d(n,r,o){bi(n)?n.setValue(r,o):r.textContent=o}(n[11],a,o)}function uc(n,r,o){let a=o?n.styles:null,h=o?n.classes:null,_=0;if(null!==r)for(let w=0;w<r.length;w++){const N=r[w];"number"==typeof N?_=N:1==_?h=ht(h,N):2==_&&(a=ht(a,N+": "+r[++w]+";"))}o?n.styles=a:n.stylesWithoutHost=a,o?n.classes=h:n.classesWithoutHost=h}const hh=new po("INJECTOR",-1);class hu{get(r,o=co){if(o===co){const a=new Error(`NullInjectorError: No provider for ${Ze(r)}!`);throw a.name="NullInjectorError",a}return o}}const df=new po("Set Injector scope."),fh={},Lp={};let Vp;function hf(){return void 0===Vp&&(Vp=new hu),Vp}function Pm(n,r=null,o=null,a){const h=ff(n,r,o,a);return h._resolveInjectorDefTypes(),h}function ff(n,r=null,o=null,a){return new pf(n,o,r||hf(),a)}class pf{constructor(r,o,a,h=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];o&&Xo(o,N=>this.processProvider(N,r,o)),Xo([r],N=>this.processInjectorType(N,[],_)),this.records.set(hh,Pd(void 0,this));const w=this.records.get(df);this.scope=null!=w?w.value:null,this.source=h||("object"==typeof r?null:Ze(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,o=co,a=Qn.Default){this.assertNotDestroyed();const h=U(this),_=Mr(void 0);try{if(!(a&Qn.SkipSelf)){let N=this.records.get(r);if(void 0===N){const L=function L_(n){return"function"==typeof n||"object"==typeof n&&n instanceof po}(r)&&ut(r);N=L&&this.injectableDefInScope(L)?Pd(ph(r),fh):null,this.records.set(r,N)}if(null!=N)return this.hydrate(r,N)}return(a&Qn.Self?hf():this.parent).get(r,o=a&Qn.Optional&&o===co?null:o)}catch(w){if("NullInjectorError"===w.name){if((w[Io]=w[Io]||[]).unshift(Ze(r)),h)throw w;return function Zr(n,r,o,a){const h=n[Io];throw r[Ia]&&h.unshift(r[Ia]),n.message=function zr(n,r,o,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=Ze(r);if(Array.isArray(r))h=r.map(Ze).join(" -> ");else if("object"==typeof r){let _=[];for(let w in r)if(r.hasOwnProperty(w)){let N=r[w];_.push(w+":"+("string"==typeof N?JSON.stringify(N):Ze(N)))}h=`{${_.join(", ")}}`}return`${o}${a?"("+a+")":""}[${h}]: ${n.replace(hl,"\n  ")}`}("\n"+n.message,h,o,a),n.ngTokenPath=h,n[Io]=null,n}(w,r,"R3InjectorError",this.source)}throw w}finally{Mr(_),U(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,h)=>r.push(Ze(h))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new un(205,!1)}processInjectorType(r,o,a){if(!(r=Et(r)))return!1;let h=Gn(r);const _=null==h&&r.ngModule||void 0,w=void 0===_?r:_,N=-1!==a.indexOf(w);if(void 0!==_&&(h=Gn(_)),null==h)return!1;if(null!=h.imports&&!N){let fe;a.push(w);try{Xo(h.imports,Le=>{this.processInjectorType(Le,o,a)&&(void 0===fe&&(fe=[]),fe.push(Le))})}finally{}if(void 0!==fe)for(let Le=0;Le<fe.length;Le++){const{ngModule:mt,providers:Bt}=fe[Le];Xo(Bt,Mn=>this.processProvider(Mn,mt,Bt||On))}}this.injectorDefTypes.add(w);const L=Ri(w)||(()=>new w);this.records.set(w,Pd(L,fh));const ie=h.providers;if(null!=ie&&!N){const fe=r;Xo(ie,Le=>this.processProvider(Le,fe,ie))}return void 0!==_&&void 0!==r.providers}processProvider(r,o,a){let h=Nd(r=Et(r))?r:Et(r&&r.provide);const _=function Rd(n,r,o){return Om(n)?Pd(void 0,n.useValue):Pd(gf(n),fh)}(r);if(Nd(r)||!0!==r.multi)this.records.get(h);else{let w=this.records.get(h);w||(w=Pd(void 0,fh,!0),w.factory=()=>Kt(w.multi),this.records.set(h,w)),h=r,w.multi.push(r)}this.records.set(h,_)}hydrate(r,o){return o.value===fh&&(o.value=Lp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Bp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Et(r.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function ph(n){const r=ut(n),o=null!==r?r.factory:Ri(n);if(null!==o)return o;if(n instanceof po)throw new un(204,!1);if(n instanceof Function)return function Nm(n){const r=n.length;if(r>0)throw vo(r,"?"),new un(204,!1);const o=function Rt(n){const r=n&&(n[tr]||n[Xr]);if(r){const o=function tn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new un(204,!1)}function gf(n,r,o){let a;if(Nd(n)){const h=Et(n);return Ri(h)||ph(h)}if(Om(n))a=()=>Et(n.useValue);else if(function Fm(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Kt(n.deps||[]));else if(function km(n){return!(!n||!n.useExisting)}(n))a=()=>de(Et(n.useExisting));else{const h=Et(n&&(n.useClass||n.provide));if(!function F_(n){return!!n.deps}(n))return Ri(h)||ph(h);a=()=>new h(...Kt(n.deps))}return a}function Pd(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Om(n){return null!==n&&"object"==typeof n&&Ul in n}function Nd(n){return"function"==typeof n}let Nl=(()=>{class n{static create(o,a){var h;if(Array.isArray(o))return Pm({name:""},a,o,"");{const _=null!==(h=o.name)&&void 0!==h?h:"";return Pm({name:_},o.parent,o.providers,_)}}}return n.THROW_IF_NOT_FOUND=co,n.NULL=new hu,n.\u0275prov=kt({token:n,providedIn:"any",factory:()=>de(hh)}),n.__NG_ELEMENT_ID__=-1,n})();function $m(n,r){hn(rl(n)[1],K())}function Yp(n){let r=function Zp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const a=[n];for(;r;){let h;if(ks(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new un(903,"");h=r.\u0275dir}if(h){if(o){a.push(h);const w=n;w.inputs=Qp(n.inputs),w.declaredInputs=Qp(n.declaredInputs),w.outputs=Qp(n.outputs);const N=h.hostBindings;N&&Jp(n,N);const L=h.viewQuery,ie=h.contentQueries;if(L&&$_(n,L),ie&&Xp(n,ie),pt(n.inputs,h.inputs),pt(n.declaredInputs,h.declaredInputs),pt(n.outputs,h.outputs),ks(h)&&h.data.animation){const fe=n.data;fe.animation=(fe.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let w=0;w<_.length;w++){const N=_[w];N&&N.ngInherit&&N(n),N===Yp&&(o=!1)}}r=Object.getPrototypeOf(r)}!function B_(n){let r=0,o=null;for(let a=n.length-1;a>=0;a--){const h=n[a];h.hostVars=r+=h.hostVars,h.hostAttrs=ar(h.hostAttrs,o=ar(o,h.hostAttrs))}}(a)}function Qp(n){return n===ui?{}:n===On?[]:n}function $_(n,r){const o=n.viewQuery;n.viewQuery=o?(a,h)=>{r(a,h),o(a,h)}:r}function Xp(n,r){const o=n.contentQueries;n.contentQueries=o?(a,h,_)=>{r(a,h,_),o(a,h,_)}:r}function Jp(n,r){const o=n.hostBindings;n.hostBindings=o?(a,h)=>{r(a,h),o(a,h)}:r}let Ef=null;function dc(){if(!Ef){const n=Br.Symbol;if(n&&n.iterator)Ef=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const a=r[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Ef=a)}}}return Ef}function Zc(n){return!!yh(n)&&(Array.isArray(n)||!(n instanceof Map)&&dc()in n)}function yh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function fu(n,r,o){return n[r]=o}function La(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Lu(n,r,o,a){const h=La(n,r,o);return La(n,r+1,a)||h}function _h(n,r,o,a){const h=Ye();return La(h,l(),r)&&(Pn(),El(gn(),h,n,r,o,a)),_h}function rg(n,r,o,a,h,_,w,N){const L=Ye(),ie=Pn(),fe=n+20,Le=ie.firstCreatePass?function ng(n,r,o,a,h,_,w,N,L){const ie=r.consts,fe=Id(r,n,4,w||null,Fi(ie,N));lc(r,o,fe,Fi(ie,L)),hn(r,fe);const Le=fe.tViews=ah(2,fe,a,h,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,ie);return null!==r.queries&&(r.queries.template(r,fe),Le.queries=r.queries.embeddedTView(fe)),fe}(fe,ie,L,r,o,a,h,_,w):ie.data[fe];it(Le,!1);const mt=L[11].createComment("");Uh(ie,L,mt,Le),aa(mt,L),uh(L,L[fe]=af(mt,L,mt,Le)),gs(Le)&&bp(ie,L,Le),null!=w&&Dd(L,Le,N)}function sg(n){return ei(function Xn(){return Kr.lFrame.contextLView}(),20+n)}function Vd(n,r=Qn.Default){const o=Ye();return null===o?de(n,r):$e(K(),o,Et(n),r)}function Mf(){throw new Error("invalid")}function Ch(n,r,o){const a=Ye();return La(a,l(),r)&&al(Pn(),gn(),a,n,r,a[11],o,!1),Ch}function bh(n,r,o,a,h){const w=h?"class":"style";cf(n,o,r.inputs[w],w,a)}function Ud(n,r,o,a){const h=Ye(),_=Pn(),w=20+n,N=h[11],L=h[w]=x(N,r,function en(){return Kr.lFrame.currentNamespace}()),ie=_.firstCreatePass?function Rf(n,r,o,a,h,_,w){const N=r.consts,ie=Id(r,n,2,h,Fi(N,_));return lc(r,o,ie,Fi(N,w)),null!==ie.attrs&&uc(ie,ie.attrs,!1),null!==ie.mergedAttrs&&uc(ie,ie.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,ie),ie}(w,_,h,0,r,o,a):_.data[w];it(ie,!0);const fe=ie.mergedAttrs;null!==fe&&Be(N,L,fe);const Le=ie.classes;null!==Le&&uu(N,L,Le);const mt=ie.styles;return null!==mt&&jh(N,L,mt),64!=(64&ie.flags)&&Uh(_,h,L,ie),0===function ys(){return Kr.lFrame.elementDepthCount}()&&aa(L,h),function _o(){Kr.lFrame.elementDepthCount++}(),gs(ie)&&(bp(_,h,ie),Cp(_,ie,h)),null!==a&&Dd(h,ie),Ud}function Th(){let n=K();qt()?_n():(n=n.parent,it(n,!1));const r=n;!function Q(){Kr.lFrame.elementDepthCount--}();const o=Pn();return o.firstCreatePass&&(hn(o,n),qr(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function k(n){return 0!=(16&n.flags)}(r)&&bh(o,r,Ye(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function ue(n){return 0!=(32&n.flags)}(r)&&bh(o,r,Ye(),r.stylesWithoutHost,!1),Th}function Bd(n,r,o,a){return Ud(n,r,o,a),Th(),Bd}function wh(n,r,o){const a=Ye(),h=Pn(),_=n+20,w=h.firstCreatePass?function gg(n,r,o,a,h){const _=r.consts,w=Fi(_,a),N=Id(r,n,8,"ng-container",w);return null!==w&&uc(N,w,!0),lc(r,o,N,Fi(_,h)),null!==r.queries&&r.queries.elementStart(r,N),N}(_,h,a,r,o):h.data[_];it(w,!0);const N=a[_]=a[11].createComment("");return Uh(h,a,N,w),aa(N,a),gs(w)&&(bp(h,a,w),Cp(h,w,a)),null!=o&&Dd(a,w),wh}function Vu(){let n=K();const r=Pn();return qt()?_n():(n=n.parent,it(n,!1)),r.firstCreatePass&&(hn(r,n),qr(n)&&r.queries.elementEnd(n)),Vu}function uy(){return Ye()}function mg(n){return!!n&&"function"==typeof n.then}function cy(n){return!!n&&"function"==typeof n.subscribe}const yg=cy;function _g(n,r,o,a){const h=Ye(),_=Pn(),w=K();return function dy(n,r,o,a,h,_,w,N){const L=gs(a),fe=n.firstCreatePass&&Md(n),Le=r[8],mt=xm(r);let Bt=!0;if(3&a.type||N){const Dr=wn(a,r),si=N?N(Dr):Dr,Hn=mt.length,xi=N?Os=>N(W(Os[a.index])):a.index;if(bi(o)){let Os=null;if(!N&&L&&(Os=function Q_(n,r,o,a){const h=n.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const w=h[_];if(w===o&&h[_+1]===a){const N=r[7],L=h[_+2];return N.length>L?N[L]:null}"string"==typeof w&&(_+=2)}return null}(n,r,h,a.index)),null!==Os)(Os.__ngLastListenerFn__||Os).__ngNextListenerFn__=_,Os.__ngLastListenerFn__=_,Bt=!1;else{_=Eg(a,r,Le,_,!1);const To=o.listen(si,h,_);mt.push(_,To),fe&&fe.push(h,xi,Hn,Hn+1)}}else _=Eg(a,r,Le,_,!0),si.addEventListener(h,_,w),mt.push(_),fe&&fe.push(h,xi,Hn,w)}else _=Eg(a,r,Le,_,!1);const Mn=a.outputs;let gr;if(Bt&&null!==Mn&&(gr=Mn[h])){const Dr=gr.length;if(Dr)for(let si=0;si<Dr;si+=2){const Ql=r[gr[si]][gr[si+1]].subscribe(_),kh=mt.length;mt.push(_,Ql),fe&&fe.push(h,a.index,kh,-(kh+1))}}}(_,h,h[11],w,n,r,!!o,a),_g}function hy(n,r,o,a){try{return!1!==o(a)}catch(h){return qc(n,h),!1}}function Eg(n,r,o,a,h){return function _(w){if(w===Function)return a;const N=2&n.flags?ni(n.index,r):r;0==(32&r[2])&&xd(N);let L=hy(r,0,a,w),ie=_.__ngNextListenerFn__;for(;ie;)L=hy(r,0,ie,w)&&L,ie=ie.__ngNextListenerFn__;return h&&!1===L&&(w.preventDefault(),w.returnValue=!1),L}}function Nf(n=1){return function tt(n){return(Kr.lFrame.contextLView=function yt(n,r){for(;n>0;)r=r[15],n--;return r}(n,Kr.lFrame.contextLView))[8]}(n)}function X_(n,r){let o=null;const a=function lp(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(0==(1&o))return r[o+1]}return null}(n);for(let h=0;h<r.length;h++){const _=r[h];if("*"!==_){if(null===a?Gh(n,_,!0):m_(a,_))return h}else o=h}return o}function fy(n){const r=Ye()[16][6];if(!r.projection){const a=r.projection=vo(n?n.length:1,null),h=a.slice();let _=r.child;for(;null!==_;){const w=n?X_(_,n):0;null!==w&&(h[w]?h[w].projectionNext=_:a[w]=_,h[w]=_),_=_.next}}}function Do(n,r=0,o){const a=Ye(),h=Pn(),_=Id(h,20+n,16,null,o||null);null===_.projection&&(_.projection=r),_n(),64!=(64&_.flags)&&function rp(n,r,o){ga(r[11],0,r,o,Fu(n,o,r),tm(o.parent||r[6],o,r))}(h,a,_)}function Ey(n,r,o,a,h){const _=n[o+1],w=null===r;let N=a?ql(_):du(_),L=!1;for(;0!==N&&(!1===L||w);){const fe=n[N+1];Cy(n[N],r)&&(L=!0,n[N+1]=a?fp(fe):cu(fe)),N=a?ql(fe):du(fe)}L&&(n[o+1]=a?cu(_):fp(_))}function Cy(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Ba(n,r)>=0}const Co={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pu(n){return n.substring(Co.key,Co.keyEnd)}function P0(n){return n.substring(Co.value,Co.valueEnd)}function Ih(n,r){const o=Co.textEnd;return o===r?-1:(r=Co.keyEnd=function Of(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,Co.key=r,o),ed(n,r,o))}function by(n,r){const o=Co.textEnd;let a=Co.key=ed(n,r,o);return o===a?-1:(a=Co.keyEnd=function nv(n,r,o){let a;for(;r<o&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,o),a=mc(n,a,o),a=Co.value=ed(n,a,o),a=Co.valueEnd=function kf(n,r,o){let a=-1,h=-1,_=-1,w=r,N=w;for(;w<o;){const L=n.charCodeAt(w++);if(59===L)return N;34===L||39===L?N=w=$d(n,L,w,o):r===w-4&&85===_&&82===h&&76===a&&40===L?N=w=$d(n,41,w,o):L>32&&(N=w),_=h,h=a,a=-33&L}return N}(n,a,o),mc(n,a,o))}function Tg(n){Co.key=0,Co.keyEnd=0,Co.value=0,Co.valueEnd=0,Co.textEnd=n.length}function ed(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function mc(n,r,o,a){return(r=ed(n,r,o))<o&&r++,r}function $d(n,r,o,a){let h=-1,_=o;for(;_<a;){const w=n.charCodeAt(_++);if(w==r&&92!==h)return _;h=92==w&&92===h?0:w}throw new Error}function Sh(n,r,o){return kl(n,r,o,!1),Sh}function wg(n,r){return kl(n,r,null,!0),wg}function Zl(n){Ma(Ty,iv,n,!1)}function iv(n,r){for(let o=function tv(n){return Tg(n),by(n,ed(n,0,Co.textEnd))}(r);o>=0;o=by(r,o))Ty(n,pu(r),P0(r))}function Ff(n){Ma(Eo,Ol,n,!0)}function Ol(n,r){for(let o=function Jc(n){return Tg(n),Ih(n,ed(n,0,Co.textEnd))}(r);o>=0;o=Ih(r,o))Eo(n,pu(r),!0)}function kl(n,r,o,a){const h=Ye(),_=Pn(),w=A(2);_.firstUpdatePass&&Sg(_,n,w,a),r!==ji&&La(h,w,r)&&xg(_,_.data[vn()],h,h[11],n,h[w+1]=function _c(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ze(ya(n)))),n}(r,o),a,w)}function Ma(n,r,o,a){const h=Pn(),_=A(2);h.firstUpdatePass&&Sg(h,null,_,a);const w=Ye();if(o!==ji&&La(w,_,o)){const N=h.data[vn()];if(Gd(N,a)&&!Ig(h,_)){let L=a?N.classesWithoutHost:N.stylesWithoutHost;null!==L&&(o=ht(L,o||"")),bh(h,N,w,o,a)}else!function Vf(n,r,o,a,h,_,w,N){h===ji&&(h=On);let L=0,ie=0,fe=0<h.length?h[0]:null,Le=0<_.length?_[0]:null;for(;null!==fe||null!==Le;){const mt=L<h.length?h[L+1]:void 0,Bt=ie<_.length?_[ie+1]:void 0;let gr,Mn=null;fe===Le?(L+=2,ie+=2,mt!==Bt&&(Mn=Le,gr=Bt)):null===Le||null!==fe&&fe<Le?(L+=2,Mn=fe):(ie+=2,Mn=Le,gr=Bt),null!==Mn&&xg(n,r,o,a,Mn,gr,w,N),fe=L<h.length?h[L]:null,Le=ie<_.length?_[ie]:null}}(h,N,w,w[11],w[_+1],w[_+1]=function Dh(n,r,o){if(null==o||""===o)return On;const a=[],h=ya(o);if(Array.isArray(h))for(let _=0;_<h.length;_++)n(a,h[_],!0);else if("object"==typeof h)for(const _ in h)h.hasOwnProperty(_)&&n(a,_,h[_]);else"string"==typeof h&&r(a,h);return a}(n,r,o),a,_)}}function Ig(n,r){return r>=n.expandoStartIndex}function Sg(n,r,o,a){const h=n.data;if(null===h[o+1]){const _=h[vn()],w=Ig(n,o);Gd(_,a)&&null===r&&!w&&(r=!1),r=function Dg(n,r,o,a){const h=be(n);let _=a?r.residualClasses:r.residualStyles;if(null===h)0===(a?r.classBindings:r.styleBindings)&&(o=Hd(o=jd(null,n,r,o,a),r.attrs,a),_=null);else{const w=r.directiveStylingLast;if(-1===w||n[w]!==h)if(o=jd(h,n,r,o,a),null===_){let L=function Ag(n,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==du(a))return n[ql(a)]}(n,r,a);void 0!==L&&Array.isArray(L)&&(L=jd(null,n,r,L[1],a),L=Hd(L,r.attrs,a),function sv(n,r,o,a){n[ql(o?r.classBindings:r.styleBindings)]=a}(n,r,a,L))}else _=function Lf(n,r,o){let a;const h=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<h;_++)a=Hd(a,n[_].hostAttrs,o);return Hd(a,r.attrs,o)}(n,r,a)}return void 0!==_&&(a?r.residualClasses=_:r.residualStyles=_),o}(h,_,r,a),function R0(n,r,o,a,h,_){let w=_?r.classBindings:r.styleBindings,N=ql(w),L=du(w);n[a]=o;let fe,ie=!1;if(Array.isArray(o)){const Le=o;fe=Le[1],(null===fe||Ba(Le,fe)>0)&&(ie=!0)}else fe=o;if(h)if(0!==L){const mt=ql(n[N+1]);n[a+1]=Wh(mt,N),0!==mt&&(n[mt+1]=dp(n[mt+1],a)),n[N+1]=function $c(n,r){return 131071&n|r<<17}(n[N+1],a)}else n[a+1]=Wh(N,0),0!==N&&(n[N+1]=dp(n[N+1],a)),N=a;else n[a+1]=Wh(L,0),0===N?N=a:n[L+1]=dp(n[L+1],a),L=a;ie&&(n[a+1]=cu(n[a+1])),Ey(n,fe,a,!0),Ey(n,fe,a,!1),function ev(n,r,o,a,h){const _=h?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&Ba(_,r)>=0&&(o[a+1]=fp(o[a+1]))}(r,fe,n,a,_),w=Wh(N,L),_?r.classBindings=w:r.styleBindings=w}(h,_,r,o,w,a)}}function jd(n,r,o,a,h){let _=null;const w=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<w&&(_=r[N],a=Hd(a,_.hostAttrs,h),_!==n);)N++;return null!==n&&(o.directiveStylingLast=N),a}function Hd(n,r,o){const a=o?1:2;let h=-1;if(null!==r)for(let _=0;_<r.length;_++){const w=r[_];"number"==typeof w?h=w:h===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Eo(n,w,!!o||r[++_]))}return void 0===n?null:n}function Ty(n,r,o){Eo(n,r,ya(o))}function xg(n,r,o,a,h,_,w,N){if(!(3&r.type))return;const L=n.data,ie=L[N+1];yc(function hp(n){return 1==(1&n)}(ie)?Uf(L,r,o,h,du(ie),w):void 0)||(yc(_)||function _d(n){return 2==(2&n)}(ie)&&(_=Uf(L,null,o,h,N,w)),function sp(n,r,o,a,h){const _=bi(n);if(r)h?_?n.addClass(o,a):o.classList.add(a):_?n.removeClass(o,a):o.classList.remove(a);else{let w=-1===a.indexOf("-")?void 0:p.DashCase;if(null==h)_?n.removeStyle(o,a,w):o.style.removeProperty(a);else{const N="string"==typeof h&&h.endsWith("!important");N&&(h=h.slice(0,-10),w|=p.Important),_?n.setStyle(o,a,h,w):o.style.setProperty(a,h,N?"important":"")}}}(a,w,sn(vn(),o),h,_))}function Uf(n,r,o,a,h,_){const w=null===r;let N;for(;h>0;){const L=n[h],ie=Array.isArray(L),fe=ie?L[1]:L,Le=null===fe;let mt=o[h+1];mt===ji&&(mt=Le?On:void 0);let Bt=Le?Xa(mt,a):fe===a?mt:void 0;if(ie&&!yc(Bt)&&(Bt=Xa(L,a)),yc(Bt)&&(N=Bt,w))return N;const Mn=n[h+1];h=w?ql(Mn):du(Mn)}if(null!==r){let L=_?r.residualClasses:r.residualStyles;null!=L&&(N=Xa(L,a))}return N}function yc(n){return void 0!==n}function Gd(n,r){return 0!=(n.flags&(r?16:32))}function wy(n,r=""){const o=Ye(),a=Pn(),h=n+20,_=a.firstCreatePass?Id(a,h,1,r,null):a.data[h],w=o[h]=function c(n,r){return bi(n)?n.createText(r):n.createTextNode(r)}(o[11],r);Uh(a,o,w,_),it(_,!1)}function vc(n){return Mg("",n,""),vc}function Mg(n,r,o){const a=Ye(),h=function Kl(n,r,o,a){return La(n,l(),o)?r+Ot(o)+a:ji}(a,n,r,o);return h!==ji&&Pl(a,vn(),h),Mg}function kg(n,r,o){const a=Ye();if(La(a,l(),r)){const _=Pn(),w=gn();al(_,w,a,n,r,function uf(n,r,o){return(null===n||ks(n))&&(o=function ve(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(o[r.index])),o[11]}(be(_.data),w,a),o,!0)}return kg}const nd=void 0;var hv=["en",[["a","p"],["AM","PM"],nd],[["AM","PM"],nd,nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nd,"{1} 'at' {0}",nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $y(n){const o=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let Yl={};function Hy(n){const r=function fv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Fg(r);if(o)return o;const a=r.split("-")[0];if(o=Fg(a),o)return o;if("en"===a)return hv;throw new Error(`Missing locale data for the locale "${n}".`)}function Gy(n){return Hy(n)[Pi.PluralCase]}function Fg(n){return n in Yl||(Yl[n]=Br.ng&&Br.ng.common&&Br.ng.common.locales&&Br.ng.common.locales[n]),Yl[n]}var Pi=(()=>((Pi=Pi||{})[Pi.LocaleId=0]="LocaleId",Pi[Pi.DayPeriodsFormat=1]="DayPeriodsFormat",Pi[Pi.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pi[Pi.DaysFormat=3]="DaysFormat",Pi[Pi.DaysStandalone=4]="DaysStandalone",Pi[Pi.MonthsFormat=5]="MonthsFormat",Pi[Pi.MonthsStandalone=6]="MonthsStandalone",Pi[Pi.Eras=7]="Eras",Pi[Pi.FirstDayOfWeek=8]="FirstDayOfWeek",Pi[Pi.WeekendRange=9]="WeekendRange",Pi[Pi.DateFormat=10]="DateFormat",Pi[Pi.TimeFormat=11]="TimeFormat",Pi[Pi.DateTimeFormat=12]="DateTimeFormat",Pi[Pi.NumberSymbols=13]="NumberSymbols",Pi[Pi.NumberFormats=14]="NumberFormats",Pi[Pi.CurrencyCode=15]="CurrencyCode",Pi[Pi.CurrencySymbol=16]="CurrencySymbol",Pi[Pi.CurrencyName=17]="CurrencyName",Pi[Pi.Currencies=18]="Currencies",Pi[Pi.Directionality=19]="Directionality",Pi[Pi.PluralCase=20]="PluralCase",Pi[Pi.ExtraData=21]="ExtraData",Pi))();const Hf="en-US";let zy=Hf;function Dv(n,r,o,a,h){if(n=Et(n),Array.isArray(n))for(let _=0;_<n.length;_++)Dv(n[_],r,o,a,h);else{const _=Pn(),w=Ye();let N=Nd(n)?n:Et(n.provide),L=gf(n);const ie=K(),fe=1048575&ie.providerIndexes,Le=ie.directiveStart,mt=ie.providerIndexes>>20;if(Nd(n)||!n.multi){const Bt=new Ai(L,h,Vd),Mn=xv(N,r,h?fe:fe+mt,Le);-1===Mn?(S(Ps(ie,w),_,N),Av(_,n,r.length),r.push(N),ie.directiveStart++,ie.directiveEnd++,h&&(ie.providerIndexes+=1048576),o.push(Bt),w.push(Bt)):(o[Mn]=Bt,w[Mn]=Bt)}else{const Bt=xv(N,r,fe+mt,Le),Mn=xv(N,r,fe,fe+mt),gr=Bt>=0&&o[Bt],Dr=Mn>=0&&o[Mn];if(h&&!Dr||!h&&!gr){S(Ps(ie,w),_,N);const si=function yC(n,r,o,a,h){const _=new Ai(n,o,Vd);return _.multi=[],_.index=r,_.componentProviders=0,L0(_,h,a&&!o),_}(h?mC:gC,o.length,h,a,L);!h&&Dr&&(o[Mn].providerFactory=si),Av(_,n,r.length,0),r.push(N),ie.directiveStart++,ie.directiveEnd++,h&&(ie.providerIndexes+=1048576),o.push(si),w.push(si)}else Av(_,n,Bt>-1?Bt:Mn,L0(o[h?Mn:Bt],L,!h&&a));!h&&a&&Dr&&o[Mn].componentProviders++}}}function Av(n,r,o,a){const h=Nd(r),_=function Up(n){return!!n.useClass}(r);if(h||_){const L=(_?Et(r.useClass):r).prototype.ngOnDestroy;if(L){const ie=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const fe=ie.indexOf(o);-1===fe?ie.push(o,[a,L]):ie[fe+1].push(a,L)}else ie.push(o,L)}}}function L0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function xv(n,r,o,a){for(let h=o;h<a;h++)if(r[h]===n)return h;return-1}function gC(n,r,o,a){return Mv(this.multi,[])}function mC(n,r,o,a){const h=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,N=cr(o,o[1],this.providerFactory.index,a);_=N.slice(0,w),Mv(h,_);for(let L=w;L<N.length;L++)_.push(N[L])}else _=[],Mv(h,_);return _}function Mv(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function V0(n,r=[]){return o=>{o.providersResolver=(a,h)=>function pC(n,r,o){const a=Pn();if(a.firstCreatePass){const h=ks(n);Dv(o,a.data,a.blueprint,h,!0),Dv(r,a.data,a.blueprint,h,!1)}}(a,h?h(n):n,r)}}class U0{}class EC{resolveComponentFactory(r){throw function vC(n){const r=Error(`No component factory found for ${Ze(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let s_=(()=>{class n{}return n.NULL=new EC,n})();function CC(){return Zf(K(),Ye())}function Zf(n,r){return new Kg(wn(n,r))}let Kg=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=CC,n})();function bC(n){return n instanceof Kg?n.nativeElement:n}class $0{}let TC=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function IC(){const n=Ye(),o=ni(K().index,n);return function wC(n){return n[11]}(hs(o)?o:n)}(),n})(),SC=(()=>{class n{}return n.\u0275prov=kt({token:n,providedIn:"root",factory:()=>null}),n})();class j0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const H0=new j0("13.3.11"),Rv={};function o_(n,r,o,a,h=!1){for(;null!==o;){const _=r[o.index];if(null!==_&&a.push(W(_)),kr(_))for(let N=10;N<_.length;N++){const L=_[N],ie=L[1].firstChild;null!==ie&&o_(L[1],L,ie,a)}const w=o.type;if(8&w)o_(n,r,o.child,a);else if(32&w){const N=D(o,r);let L;for(;L=N();)a.push(L)}else if(16&w){const N=ep(r,o);if(Array.isArray(N))a.push(...N);else{const L=bt(r[16]);o_(L[1],L,N,a,!0)}}o=h?o.projectionNext:o.next}return a}class Zg{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return o_(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(kr(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(xn(r,a),yu(o,a))}this._attachedToViewContainer=!1}Cr(this._lView[1],this._lView)}onDestroy(r){ef(this._lView[1],this._lView,null,r)}markForCheck(){xd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function lf(n,r,o){const a=r[10];a.begin&&a.begin();try{Sd(n,r,n.template,o)}catch(h){throw qc(r,h),h}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new un(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function we(n,r){Xd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new un(902,"");this._appRef=r}}class DC extends Zg{constructor(r){super(r),this._view=r}detectChanges(){Dm(this._view)}checkNoChanges(){}get context(){return null}}class G0 extends s_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=gt(r);return new Pv(o,this.ngModule)}}function z0(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Pv extends U0{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function zh(n){return n.map(lm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return z0(this.componentDef.inputs)}get outputs(){return z0(this.componentDef.outputs)}create(r,o,a,h){const _=(h=h||this.ngModule)?function xC(n,r){return{get:(o,a,h)=>{const _=n.get(o,Rv,h);return _!==Rv||a===Rv?_:r.get(o,a,h)}}}(r,h.injector):r,w=_.get($0,B),N=_.get(SC,null),L=w.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",fe=a?function lh(n,r,o){if(bi(n))return n.selectRootElement(r,o===rn.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(L,a,this.componentDef.encapsulation):x(w.createRenderer(null,this.componentDef),ie,function AC(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ie)),Le=this.componentDef.onPush?576:528,mt=function Kp(n,r){return{components:[],scheduler:n||sl,clean:k_,playerHandler:r||null,flags:0}}(),Bt=ah(0,null,null,1,0,null,null,null,null,null),Mn=ih(null,Bt,mt,Le,null,null,w,L,N,_);let gr,Dr;Te(Mn);try{const si=function qp(n,r,o,a,h,_){const w=o[1];o[20]=n;const L=Id(w,20,2,"#host",null),ie=L.mergedAttrs=r.hostAttrs;null!==ie&&(uc(L,ie,!0),null!==n&&(Be(h,n,ie),null!==L.classes&&uu(h,n,L.classes),null!==L.styles&&jh(h,n,L.styles)));const fe=a.createRenderer(n,r),Le=ih(o,Em(r),null,r.onPush?64:16,o[20],L,a,fe,_||null,null);return w.firstCreatePass&&(S(Ps(L,o),w,r.type),rf(w,L),Mp(L,o.length,1)),uh(o,Le),o[20]=Le}(fe,this.componentDef,Mn,w,L);if(fe)if(a)Be(L,fe,["ng-version",H0.full]);else{const{attrs:Hn,classes:xi}=function Jd(n){const r=[],o=[];let a=1,h=2;for(;a<n.length;){let _=n[a];if("string"==typeof _)2===h?""!==_&&r.push(_,n[++a]):8===h&&o.push(_);else{if(!qa(h))break;h=_}a++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Hn&&Be(L,fe,Hn),xi&&xi.length>0&&uu(L,fe,xi.join(" "))}if(Dr=jr(Bt,20),void 0!==o){const Hn=Dr.projection=[];for(let xi=0;xi<this.ngContentSelectors.length;xi++){const Os=o[xi];Hn.push(null!=Os?Array.from(Os):null)}}gr=function Bm(n,r,o,a,h){const _=o[1],w=function Ad(n,r,o){const a=K();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Rp(n,a,r,Bo(n,r,1,null),o));const h=cr(r,n,a.directiveStart,a);aa(h,r);const _=wn(a,r);return _&&aa(_,r),h}(_,o,r);if(a.components.push(w),n[8]=w,h&&h.forEach(L=>L(w,r)),r.contentQueries){const L=K();r.contentQueries(1,w,L.directiveStart)}const N=K();return!_.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Sn(N.index),tf(o[1],N,0,N.directiveStart,N.directiveEnd,r),Ap(r,w)),w}(si,this.componentDef,Mn,mt,[$m]),oh(Bt,Mn,null)}finally{_t()}return new RC(this.componentType,gr,Zf(Dr,Mn),Mn,Dr)}}class RC extends class _C{}{constructor(r,o,a,h,_){super(),this.location=a,this._rootLView=h,this._tNode=_,this.instance=o,this.hostView=this.changeDetectorRef=new DC(h),this.componentType=r}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Yf{}class W0{}const Qf=new Map;class Z0 extends Yf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new G0(this);const a=qn(r);this._bootstrapComponents=Wa(a.bootstrap),this._r3Injector=ff(r,o,[{provide:Yf,useValue:this},{provide:s_,useValue:this.componentFactoryResolver}],Ze(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,o=Nl.THROW_IF_NOT_FOUND,a=Qn.Default){return r===Nl||r===Yf||r===hh?this:this._r3Injector.get(r,o,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Nv extends W0{constructor(r){super(),this.moduleType=r,null!==qn(r)&&function NC(n){const r=new Set;!function o(a){const h=qn(a,!0),_=h.id;null!==_&&(function q0(n,r,o){if(r&&r!==o)throw new Error(`Duplicate module registered for ${n} - ${Ze(r)} vs ${Ze(r.name)}`)}(_,Qf.get(_),a),Qf.set(_,a));const w=Wa(h.imports);for(const N of w)r.has(N)||(r.add(N),o(N))}(n)}(r)}create(r){return new Z0(this.moduleType,r)}}function Y0(n,r,o,a){return eE(Ye(),yi(),n,r,o,a)}function Q0(n,r,o,a,h){return function tE(n,r,o,a,h,_,w){const N=r+o;return Lu(n,N,h,_)?fu(n,N+2,w?a.call(w,h,_):a(h,_)):Yg(n,N+2)}(Ye(),yi(),n,r,o,a,h)}function X0(n,r,o,a,h,_){return function nE(n,r,o,a,h,_,w,N){const L=r+o;return function Cf(n,r,o,a,h){const _=Lu(n,r,o,a);return La(n,r+2,h)||_}(n,L,h,_,w)?fu(n,L+3,N?a.call(N,h,_,w):a(h,_,w)):Yg(n,L+3)}(Ye(),yi(),n,r,o,a,h,_)}function J0(n,r,o,a,h,_,w){return function rE(n,r,o,a,h,_,w,N,L){const ie=r+o;return function ll(n,r,o,a,h,_){const w=Lu(n,r,o,a);return Lu(n,r+2,h,_)||w}(n,ie,h,_,w,N)?fu(n,ie+4,L?a.call(L,h,_,w,N):a(h,_,w,N)):Yg(n,ie+4)}(Ye(),yi(),n,r,o,a,h,_,w)}function Yg(n,r){const o=n[r];return o===ji?void 0:o}function eE(n,r,o,a,h,_){const w=r+o;return La(n,w,h)?fu(n,w+1,_?a.call(_,h):a(h)):Yg(n,w+1)}function sE(n,r){const o=Pn();let a;const h=n+20;o.firstCreatePass?(a=function BC(n,r){if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];if(n===a.name)return a}}(r,o.pipeRegistry),o.data[h]=a,a.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,a.onDestroy)):a=o.data[h];const _=a.factory||(a.factory=Ri(a.type)),w=Mr(Vd);try{const N=sr(!1),L=_();return sr(N),function ig(n,r,o,a){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=a}(o,Ye(),h,L),L}finally{Mr(w)}}function oE(n,r,o){const a=n+20,h=Ye(),_=ei(h,a);return function Qg(n,r){return n[1].data[r].pure}(h,a)?eE(h,yi(),r,_.transform,o,_):_.transform(o)}function Ov(n){return r=>{setTimeout(n,void 0,r)}}const Tc=class zC extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){var h,_,w;let N=r,L=o||(()=>null),ie=a;if(r&&"object"==typeof r){const Le=r;N=null===(h=Le.next)||void 0===h?void 0:h.bind(Le),L=null===(_=Le.error)||void 0===_?void 0:_.bind(Le),ie=null===(w=Le.complete)||void 0===w?void 0:w.bind(Le)}this.__isAsync&&(L=Ov(L),N&&(N=Ov(N)),ie&&(ie=Ov(ie)));const fe=super.subscribe({next:N,error:L,complete:ie});return r instanceof F.w0&&r.add(fe),fe}};function WC(){return this._results[dc()]()}class kv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=dc(),a=kv.prototype;a[o]||(a[o]=WC)}get changes(){return this._changes||(this._changes=new Tc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const h=xo(r);(this._changesDetected=!function oa(n,r,o){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let h=n[a],_=r[a];if(o&&(h=o(h),_=o(_)),_!==h)return!1}return!0}(a._results,h,o))&&(a._results=h,a.length=h.length,a.last=h[this.length-1],a.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xg=(()=>{class n{}return n.__NG_ELEMENT_ID__=ZC,n})();const qC=Xg,KC=class extends qC{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(r){const o=this._declarationTContainer.tViews,a=ih(this._declarationLView,o,r,16,null,o.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(a[19]=_.createEmbeddedView(o)),oh(o,a,r),new Zg(a)}};function ZC(){return a_(K(),Ye())}function a_(n,r){return 4&n.type?new KC(r,n,Zf(n,r)):null}let l_=(()=>{class n{}return n.__NG_ELEMENT_ID__=YC,n})();function YC(){return uE(K(),Ye())}const QC=l_,aE=class extends QC{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return Zf(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){const r=M(this._hostTNode,this._hostLView);if(Jt(r)){const o=li(r,this._hostLView),a=Sr(r);return new vr(o[1].data[a+8],o)}return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=lE(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,a){const h=r.createEmbeddedView(o||{});return this.insert(h,a),h}createComponent(r,o,a,h,_){const w=r&&!function sa(n){return"function"==typeof n}(r);let N;if(w)N=o;else{const Le=o||{};N=Le.index,a=Le.injector,h=Le.projectableNodes,_=Le.ngModuleRef}const L=w?r:new Pv(gt(r)),ie=a||this.parentInjector;if(!_&&null==L.ngModule){const mt=(w?ie:this.parentInjector).get(Yf,null);mt&&(_=mt)}const fe=L.create(ie,h,void 0,_);return this.insert(fe.hostView,N),fe}insert(r,o){const a=r._lView,h=a[1];if(function Di(n){return kr(n[3])}(a)){const fe=this.indexOf(r);if(-1!==fe)this.detach(fe);else{const Le=a[3],mt=new aE(Le,Le[6],Le[3]);mt.detach(mt.indexOf(r))}}const _=this._adjustIndex(o),w=this._lContainer;!function lt(n,r,o,a){const h=10+a,_=o.length;a>0&&(o[h-1][4]=r),a<_-10?(r[4]=o[h],Jl(o,10+a,r)):(o.push(r),r[4]=null),r[3]=o;const w=r[17];null!==w&&o!==w&&function ln(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(w,r);const N=r[19];null!==N&&N.insertView(n),r[2]|=128}(h,a,w,_);const N=tp(_,w),L=a[11],ie=Vh(L,w[7]);return null!==ie&&function te(n,r,o,a,h,_){a[0]=h,a[6]=r,Xd(n,a,o,1,h,_)}(h,w[6],L,a,ie,N),r.attachToViewContainerRef(),Jl(Fv(w),_,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=lE(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=xn(this._lContainer,o);a&&(yu(Fv(this._lContainer),o),Cr(a[1],a))}detach(r){const o=this._adjustIndex(r,-1),a=xn(this._lContainer,o);return a&&null!=yu(Fv(this._lContainer),o)?new Zg(a):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function lE(n){return n[8]}function Fv(n){return n[8]||(n[8]=[])}function uE(n,r){let o;const a=r[n.index];if(kr(a))o=a;else{let h;if(8&n.type)h=W(a);else{const _=r[11];h=_.createComment("");const w=wn(n,r);Wl(_,Vh(_,w),h,function g_(n,r){return bi(n)?n.nextSibling(r):r.nextSibling}(_,w),!1)}r[n.index]=o=af(a,r,h,n),uh(r,o)}return new aE(o,n,r)}class Lv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Lv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,h=[];for(let _=0;_<a;_++){const w=o.getByIndex(_);h.push(this.queries[w.indexInDeclarationView].clone())}return new Vv(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==_E(r,o).matches&&this.queries[o].setDirty()}}class cE{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class Uv{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const h=null!==o?o.length:0,_=this.getByIndex(a).embeddedTView(r,h);_&&(_.indexInDeclarationView=a,null!==o?o.push(_):o=[_])}return null!==o?new Uv(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Bv{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new Bv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let h=0;h<a.length;h++){const _=a[h];this.matchTNodeWithReadOption(r,o,eb(o,_)),this.matchTNodeWithReadOption(r,o,pr(o,r,_,!1,!1))}else a===Xg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,pr(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const h=this.metadata.read;if(null!==h)if(h===Kg||h===l_||h===Xg&&4&o.type)this.addMatch(o.index,-2);else{const _=pr(o,r,h,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function eb(n,r){const o=n.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function nb(n,r,o,a){return-1===o?function tb(n,r){return 11&n.type?Zf(n,r):4&n.type?a_(n,r):null}(r,n):-2===o?function rb(n,r,o){return o===Kg?Zf(r,n):o===Xg?a_(r,n):o===l_?uE(r,n):void 0}(n,r,a):cr(n,n[1],o,r)}function dE(n,r,o,a){const h=r[19].queries[a];if(null===h.matches){const _=n.data,w=o.matches,N=[];for(let L=0;L<w.length;L+=2){const ie=w[L];N.push(ie<0?null:nb(r,_[ie],w[L+1],o.metadata.read))}h.matches=N}return h.matches}function $v(n,r,o,a){const h=n.queries.getByIndex(o),_=h.matches;if(null!==_){const w=dE(n,r,h,o);for(let N=0;N<_.length;N+=2){const L=_[N];if(L>0)a.push(w[N/2]);else{const ie=_[N+1],fe=r[-L];for(let Le=10;Le<fe.length;Le++){const mt=fe[Le];mt[17]===mt[3]&&$v(mt[1],mt,ie,a)}if(null!==fe[9]){const Le=fe[9];for(let mt=0;mt<Le.length;mt++){const Bt=Le[mt];$v(Bt[1],Bt,ie,a)}}}}}return a}function hE(n){const r=Ye(),o=Pn(),a=oe();ge(a+1);const h=_E(o,a);if(n.dirty&&fi(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const _=h.crossesNgTemplate?$v(o,r,a,[]):dE(o,r,h,a);n.reset(_,bC),n.notifyOnChanges()}return!0}return!1}function fE(n,r,o){const a=Pn();a.firstCreatePass&&(yE(a,new cE(n,r,o),-1),2==(2&r)&&(a.staticViewQueries=!0)),mE(a,Ye(),r)}function pE(n,r,o,a){const h=Pn();if(h.firstCreatePass){const _=K();yE(h,new cE(r,o,a),_.index),function sb(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}mE(h,Ye(),o)}function gE(){return function ib(n,r){return n[19].queries[r].queryList}(Ye(),oe())}function mE(n,r,o){const a=new kv(4==(4&o));ef(n,r,a,a.destroy),null===r[19]&&(r[19]=new Vv),r[19].queries.push(new Lv(a))}function yE(n,r,o){null===n.queries&&(n.queries=new Uv),n.queries.track(new Bv(r,o))}function _E(n,r){return n.queries.getByIndex(r)}function vE(n,r){return a_(n,r)}function d_(...n){}const FE=new po("Application Initializer");let qv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=d_,this.reject=d_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,h)=>{this.resolve=a,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(mg(_))o.push(_);else if(yg(_)){const w=new Promise((N,L)=>{_.subscribe({complete:N,error:L})});o.push(w)}}Promise.all(o).then(()=>{a()}).catch(h=>{this.reject(h)}),0===o.length&&a(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(de(FE,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LE=new po("AppId",{providedIn:"root",factory:function VE(){return`${Kv()}${Kv()}${Kv()}`}});function Kv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const UE=new po("Platform Initializer"),bb=new po("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),BE=new po("appBootstrapListener");let Tb=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Zv=new po("LocaleId",{providedIn:"root",factory:()=>Pt(Zv,Qn.Optional|Qn.SkipSelf)||function wb(){return"undefined"!=typeof $localize&&$localize.locale||Hf}()}),Ib=new po("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Sb{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let Db=(()=>{class n{compileModuleSync(o){return new Nv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),_=Wa(qn(o).declarations).reduce((w,N)=>{const L=gt(N);return L&&w.push(new Pv(L)),w},[]);return new Sb(a,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xb=(()=>Promise.resolve(0))();function Yv(n){"undefined"==typeof Zone?xb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Hu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tc(!1),this.onMicrotaskEmpty=new Tc(!1),this.onStable=new Tc(!1),this.onError=new Tc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&o,h.shouldCoalesceRunChangeDetection=a,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Mb(){let n=Br.requestAnimationFrame,r=Br.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Nb(n){const r=()=>{!function Pb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Br,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Xv(n),n.isCheckStableRunning=!0,Qv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,h,_,w,N)=>{try{return $E(n),o.invokeTask(h,_,w,N)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),jE(n)}},onInvoke:(o,a,h,_,w,N,L)=>{try{return $E(n),o.invoke(h,_,w,N,L)}finally{n.shouldCoalesceRunChangeDetection&&r(),jE(n)}},onHasTask:(o,a,h,_)=>{o.hasTask(h,_),a===h&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,Xv(n),Qv(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,a,h,_)=>(o.handleError(h,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,h){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+h,r,Rb,d_,d_);try{return _.runTask(w,o,a)}finally{_.cancelTask(w)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const Rb={};function Qv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function $E(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function jE(n){n._nesting--,Qv(n)}class Ob{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tc,this.onMicrotaskEmpty=new Tc,this.onStable=new Tc,this.onError=new Tc}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,h){return r.apply(o,a)}}let HE=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hu.assertNotInAngularZone(),Yv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,h){let _=-1;a&&a>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:h})}whenStable(o,a,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,a,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(de(Hu))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),kb=(()=>{class n{constructor(){this._applications=new Map,Jv.addToWindow(this)}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return Jv.findTestabilityInTree(this,o,a)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class Fb{addToWindow(r){}findTestabilityInTree(r,o,a){return null}}function Lb(n){Jv=n}let Jv=new Fb,Nh=null;const GE=new po("AllowMultipleToken"),zE=new po("PlatformOnDestroy");class Bb{constructor(r,o){this.name=r,this.token=o}}function WE(n,r,o=[]){const a=`Platform: ${r}`,h=new po(a);return(_=[])=>{let w=e0();if(!w||w.injector.get(GE,!1)){const N=[...o,..._,{provide:h,useValue:!0}];n?n(N):function $b(n){if(Nh&&!Nh.get(GE,!1))throw new un(400,"");Nh=n;const r=n.get(qE),o=n.get(UE,null);o&&o.forEach(a=>a())}(function Hb(n=[],r){return Nl.create({name:r,providers:[{provide:df,useValue:"platform"},{provide:zE,useValue:()=>Nh=null},...n]})}(N,a))}return function jb(n){const r=e0();if(!r)throw new un(401,"");return r}()}}function e0(){var n;return null!==(n=null==Nh?void 0:Nh.get(qE))&&void 0!==n?n:null}let qE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const N=function Gb(n,r){let o;return o="noop"===n?new Ob:("zone.js"===n?void 0:n)||new Hu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),o}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),L=[{provide:Hu,useValue:N}];return N.run(()=>{const ie=Nl.create({providers:L,parent:this.injector,name:o.moduleType.name}),fe=o.create(ie),Le=fe.injector.get(xa,null);if(!Le)throw new un(402,"");return N.runOutsideAngular(()=>{const mt=N.onError.subscribe({next:Bt=>{Le.handleError(Bt)}});fe.onDestroy(()=>{n0(this._modules,fe),mt.unsubscribe()})}),function zb(n,r,o){try{const a=o();return mg(a)?a.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(Le,N,()=>{const mt=fe.injector.get(qv);return mt.runInitializers(),mt.donePromise.then(()=>(function _v(n){rr(n,"Expected localeId to be defined"),"string"==typeof n&&(zy=n.toLowerCase().replace(/_/g,"-"))}(fe.injector.get(Zv,Hf)||Hf),this._moduleDoBootstrap(fe),fe))})})}bootstrapModule(o,a=[]){const h=KE({},a);return function Vb(n,r,o){const a=new Nv(o);return Promise.resolve(a)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(o){const a=o.injector.get(t0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>a.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new un(403,"");o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new un(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(zE,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(de(Nl))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function KE(n,r){return Array.isArray(r)?r.reduce(KE,n):Object.assign(Object.assign({},n),r)}let t0=(()=>{class n{constructor(o,a,h,_){this._zone=o,this._injector=a,this._exceptionHandler=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new pe.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),N=new pe.y(L=>{let ie;this._zone.runOutsideAngular(()=>{ie=this._zone.onStable.subscribe(()=>{Hu.assertNotInAngularZone(),Yv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const fe=this._zone.onUnstable.subscribe(()=>{Hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{ie.unsubscribe(),fe.unsubscribe()}});this.isStable=(0,ae.T)(w,N.pipe((0,We.B)()))}bootstrap(o,a){if(!this._initStatus.done)throw new un(405,"");let h;h=o instanceof U0?o:this._injector.get(s_).resolveComponentFactory(o),this.componentTypes.push(h.componentType);const _=function Ub(n){return n.isBoundToModule}(h)?void 0:this._injector.get(Yf),N=h.create(Nl.NULL,[],a||h.selector,_),L=N.location.nativeElement,ie=N.injector.get(HE,null),fe=ie&&N.injector.get(kb);return ie&&fe&&fe.registerApplication(L,ie),N.onDestroy(()=>{this.detachView(N.hostView),n0(this.components,N),fe&&fe.unregisterApplication(L)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new un(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;n0(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(BE,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(de(Hu),de(Nl),de(xa),de(qv))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function n0(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let YE=!0,QE=!1;function qb(){return QE=!0,YE}function Kb(){if(QE)throw new Error("Cannot enable prod mode after platform setup.");YE=!1}let Zb=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yb,n})();function Yb(n){return function Qb(n,r,o){if(cs(n)&&!o){const a=ni(n.index,r);return new Zg(a,a)}return 47&n.type?new Zg(r[16],r):null}(K(),Ye(),16==(16&n))}class tC{constructor(){}supports(r){return Zc(r)}create(r){return new rT(r)}}const nT=(n,r)=>r;class rT{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||nT}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,h=0,_=null;for(;o||a;){const w=!a||o&&o.currentIndex<rC(a,h,_)?o:a,N=rC(w,h,_),L=w.currentIndex;if(w===a)h--,a=a._nextRemoved;else if(o=o._next,null==w.previousIndex)h++;else{_||(_=[]);const ie=N-h,fe=L-h;if(ie!=fe){for(let mt=0;mt<ie;mt++){const Bt=mt<_.length?_[mt]:_[mt]=0,Mn=Bt+mt;fe<=Mn&&Mn<ie&&(_[mt]=Bt+1)}_[w.previousIndex]=fe-ie}}N!==L&&r(w,N,L)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Zc(r))throw new un(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,_,w,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let N=0;N<this.length;N++)_=r[N],w=this._trackByFn(N,_),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,_,w,N)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,w,N),a=!0),o=o._next}else h=0,function H_(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[dc()]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,N=>{w=this._trackByFn(h,N),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,N,w,h)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,w,h),a=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,h){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,_,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,h))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,_,h)):r=this._addAfter(new iT(o,a),_,h),r}_verifyReinsertion(r,o,a,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==_?r=this._reinsertAfter(_,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,_=r._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const h=null===o?this._itHead:o._next;return r._next=h,r._prev=o,null===h?this._itTail=r:h._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new nC),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class iT{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sT{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class nC{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new sT,this.map.set(o,a)),a.add(r)}get(r,o){const h=this.map.get(r);return h?h.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rC(n,r,o){const a=n.previousIndex;if(null===a)return a;let h=0;return o&&a<o.length&&(h=o[a]),a+r+h}class iC{constructor(){}supports(r){return r instanceof Map||yh(r)}create(){return new oT}}class oT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||yh(r)))throw new un(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const _=this._getOrCreateRecordForKey(h,a);o=this._insertBeforeOrAppend(o,_)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,o);const _=h._prev,w=h._next;return _&&(_._next=w),w&&(w._prev=_),h._next=null,h._prev=null,h}const a=new aT(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class aT{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sC(){return new l0([new tC])}let l0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(null!=a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||sC()),deps:[[n,new ii,new Ei]]}}find(o){const a=this.factories.find(h=>h.supports(o));if(null!=a)return a;throw new un(901,"")}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:sC}),n})();function oC(){return new u0([new iC])}let u0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||oC()),deps:[[n,new ii,new Ei]]}}find(o){const a=this.factories.find(_=>_.supports(o));if(a)return a;throw new un(901,"")}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:oC}),n})();const cT=WE(null,"core",[]);let dT=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(de(t0))},n.\u0275mod=Xt({type:n}),n.\u0275inj=Dt({}),n})()},2382:(Wn,At,j)=>{j.d(At,{Wl:()=>Ot,Fj:()=>xe,qu:()=>ys,NI:()=>Xi,oH:()=>Ts,u:()=>io,cw:()=>Qr,sg:()=>Es,u5:()=>Kr,JJ:()=>rt,JL:()=>ct,F:()=>hs,On:()=>Zi,_:()=>Yi,UX:()=>Zs,kI:()=>Ut,_Y:()=>Ct});var g=j(5e3),F=j(9808),pe=j(8306),ae=j(4742),We=j(8421),Xe=j(7669),pt=j(5403),Ze=j(3268),ht=j(1810),Pe=j(8996),Et=j(4004);let Cn=(()=>{class Q{constructor(V,ye){this._renderer=V,this._elementRef=ye,this.onChange=Ye=>{},this.onTouched=()=>{}}setProperty(V,ye){this._renderer.setProperty(this._elementRef.nativeElement,V,ye)}registerOnTouched(V){this.onTouched=V}registerOnChange(V){this.onChange=V}setDisabledState(V){this.setProperty("disabled",V)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(g.Qsj),g.Y36(g.SBq))},Q.\u0275dir=g.lG2({type:Q}),Q})(),vt=(()=>{class Q extends Cn{}return Q.\u0275fac=function(){let G;return function(ye){return(G||(G=g.n5z(Q)))(ye||Q)}}(),Q.\u0275dir=g.lG2({type:Q,features:[g.qOj]}),Q})();const un=new g.OlP("NgValueAccessor"),In={provide:un,useExisting:(0,g.Gpc)(()=>Ot),multi:!0};let Ot=(()=>{class Q extends vt{writeValue(V){this.setProperty("checked",V)}}return Q.\u0275fac=function(){let G;return function(ye){return(G||(G=g.n5z(Q)))(ye||Q)}}(),Q.\u0275dir=g.lG2({type:Q,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(V,ye){1&V&&g.NdJ("change",function(Pn){return ye.onChange(Pn.target.checked)})("blur",function(){return ye.onTouched()})},features:[g._Bn([In]),g.qOj]}),Q})();const Zt={provide:un,useExisting:(0,g.Gpc)(()=>xe),multi:!0},fn=new g.OlP("CompositionEventMode");let xe=(()=>{class Q extends Cn{constructor(V,ye,Ye){super(V,ye),this._compositionMode=Ye,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ln(){const Q=(0,F.q)()?(0,F.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(V){this.setProperty("value",null==V?"":V)}_handleInput(V){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(V)}_compositionStart(){this._composing=!0}_compositionEnd(V){this._composing=!1,this._compositionMode&&this.onChange(V)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(fn,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(V,ye){1&V&&g.NdJ("input",function(Pn){return ye._handleInput(Pn.target.value)})("blur",function(){return ye.onTouched()})("compositionstart",function(){return ye._compositionStart()})("compositionend",function(Pn){return ye._compositionEnd(Pn.target.value)})},features:[g._Bn([Zt]),g.qOj]}),Q})();function He(Q){return null==Q||0===Q.length}function St(Q){return null!=Q&&"number"==typeof Q.length}const an=new g.OlP("NgValidators"),Ht=new g.OlP("NgAsyncValidators"),ke=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ut{static min(G){return function Me(Q){return G=>{if(He(G.value)||He(Q))return null;const V=parseFloat(G.value);return!isNaN(V)&&V<Q?{min:{min:Q,actual:G.value}}:null}}(G)}static max(G){return function Tt(Q){return G=>{if(He(G.value)||He(Q))return null;const V=parseFloat(G.value);return!isNaN(V)&&V>Q?{max:{max:Q,actual:G.value}}:null}}(G)}static required(G){return function et(Q){return He(Q.value)?{required:!0}:null}(G)}static requiredTrue(G){return function wt(Q){return!0===Q.value?null:{required:!0}}(G)}static email(G){return function at(Q){return He(Q.value)||ke.test(Q.value)?null:{email:!0}}(G)}static minLength(G){return function on(Q){return G=>He(G.value)||!St(G.value)?null:G.value.length<Q?{minlength:{requiredLength:Q,actualLength:G.value.length}}:null}(G)}static maxLength(G){return function Dn(Q){return G=>St(G.value)&&G.value.length>Q?{maxlength:{requiredLength:Q,actualLength:G.value.length}}:null}(G)}static pattern(G){return function nr(Q){if(!Q)return rr;let G,V;return"string"==typeof Q?(V="","^"!==Q.charAt(0)&&(V+="^"),V+=Q,"$"!==Q.charAt(Q.length-1)&&(V+="$"),G=new RegExp(V)):(V=Q.toString(),G=Q),ye=>{if(He(ye.value))return null;const Ye=ye.value;return G.test(Ye)?null:{pattern:{requiredPattern:V,actualValue:Ye}}}}(G)}static nullValidator(G){return null}static compose(G){return Dt(G)}static composeAsync(G){return Yt(G)}}function rr(Q){return null}function yn(Q){return null!=Q}function Tr(Q){const G=(0,g.QGY)(Q)?(0,Pe.D)(Q):Q;return(0,g.CqO)(G),G}function mr(Q){let G={};return Q.forEach(V=>{G=null!=V?Object.assign(Object.assign({},G),V):G}),0===Object.keys(G).length?null:G}function Vt(Q,G){return G.map(V=>V(Q))}function st(Q){return Q.map(G=>function kt(Q){return!Q.validate}(G)?G:V=>G.validate(V))}function Dt(Q){if(!Q)return null;const G=Q.filter(yn);return 0==G.length?null:function(V){return mr(Vt(V,G))}}function ut(Q){return null!=Q?Dt(st(Q)):null}function Yt(Q){if(!Q)return null;const G=Q.filter(yn);return 0==G.length?null:function(V){return function Oe(...Q){const G=(0,Xe.jO)(Q),{args:V,keys:ye}=(0,ae.D)(Q),Ye=new pe.y(Pn=>{const{length:ee}=V;if(!ee)return void Pn.complete();const K=new Array(ee);let Ce=ee,Ve=ee;for(let it=0;it<ee;it++){let qt=!1;(0,We.Xf)(V[it]).subscribe((0,pt.x)(Pn,_n=>{qt||(qt=!0,Ve--),K[it]=_n},()=>Ce--,void 0,()=>{(!Ce||!qt)&&(Ve||Pn.next(ye?(0,ht.n)(ye,K):K),Pn.complete())}))}});return G?Ye.pipe((0,Ze.Z)(G)):Ye}(Vt(V,G).map(Tr)).pipe((0,Et.U)(mr))}}function Rt(Q){return null!=Q?Yt(st(Q)):null}function tn(Q,G){return null===Q?[G]:Array.isArray(Q)?[...Q,G]:[Q,G]}function Gn(Q){return Q._rawValidators}function tr(Q){return Q._rawAsyncValidators}function lr(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function Xr(Q,G){return Array.isArray(Q)?Q.includes(G):Q===G}function oi(Q,G){const V=lr(G);return lr(Q).forEach(Ye=>{Xr(V,Ye)||V.push(Ye)}),V}function Qn(Q,G){return lr(G).filter(V=>!Xr(Q,V))}class Wr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(G){this._rawValidators=G||[],this._composedValidatorFn=ut(this._rawValidators)}_setAsyncValidators(G){this._rawAsyncValidators=G||[],this._composedAsyncValidatorFn=Rt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(G){this._onDestroyCallbacks.push(G)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(G=>G()),this._onDestroyCallbacks=[]}reset(G){this.control&&this.control.reset(G)}hasError(G,V){return!!this.control&&this.control.hasError(G,V)}getError(G,V){return this.control?this.control.getError(G,V):null}}class xr extends Wr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Mr extends Wr{get formDirective(){return null}get path(){return null}}class rs{constructor(G){this._cd=G}is(G){var V,ye,Ye;return"submitted"===G?!!(null===(V=this._cd)||void 0===V?void 0:V.submitted):!!(null===(Ye=null===(ye=this._cd)||void 0===ye?void 0:ye.control)||void 0===Ye?void 0:Ye[G])}}let rt=(()=>{class Q extends rs{constructor(V){super(V)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(xr,2))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(V,ye){2&V&&g.ekj("ng-untouched",ye.is("untouched"))("ng-touched",ye.is("touched"))("ng-pristine",ye.is("pristine"))("ng-dirty",ye.is("dirty"))("ng-valid",ye.is("valid"))("ng-invalid",ye.is("invalid"))("ng-pending",ye.is("pending"))},features:[g.qOj]}),Q})(),ct=(()=>{class Q extends rs{constructor(V){super(V)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(Mr,10))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(V,ye){2&V&&g.ekj("ng-untouched",ye.is("untouched"))("ng-touched",ye.is("touched"))("ng-pristine",ye.is("pristine"))("ng-dirty",ye.is("dirty"))("ng-valid",ye.is("valid"))("ng-invalid",ye.is("invalid"))("ng-pending",ye.is("pending"))("ng-submitted",ye.is("submitted"))},features:[g.qOj]}),Q})();function Yn(Q,G){return[...G.path,Q]}function Rr(Q,G){Ue(Q,G),G.valueAccessor.writeValue(Q.value),function Xt(Q,G){G.valueAccessor.registerOnChange(V=>{Q._pendingValue=V,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&Ge(Q,G)})}(Q,G),function Re(Q,G){const V=(ye,Ye)=>{G.valueAccessor.writeValue(ye),Ye&&G.viewToModelUpdate(ye)};Q.registerOnChange(V),G._registerOnDestroy(()=>{Q._unregisterOnChange(V)})}(Q,G),function Lt(Q,G){G.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&Ge(Q,G),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,G),function Je(Q,G){if(G.valueAccessor.setDisabledState){const V=ye=>{G.valueAccessor.setDisabledState(ye)};Q.registerOnDisabledChange(V),G._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(V)})}}(Q,G)}function Ur(Q,G,V=!0){const ye=()=>{};G.valueAccessor&&(G.valueAccessor.registerOnChange(ye),G.valueAccessor.registerOnTouched(ye)),ft(Q,G),Q&&(G._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function $r(Q,G){Q.forEach(V=>{V.registerOnValidatorChange&&V.registerOnValidatorChange(G)})}function Ue(Q,G){const V=Gn(Q);null!==G.validator?Q.setValidators(tn(V,G.validator)):"function"==typeof V&&Q.setValidators([V]);const ye=tr(Q);null!==G.asyncValidator?Q.setAsyncValidators(tn(ye,G.asyncValidator)):"function"==typeof ye&&Q.setAsyncValidators([ye]);const Ye=()=>Q.updateValueAndValidity();$r(G._rawValidators,Ye),$r(G._rawAsyncValidators,Ye)}function ft(Q,G){let V=!1;if(null!==Q){if(null!==G.validator){const Ye=Gn(Q);if(Array.isArray(Ye)&&Ye.length>0){const Pn=Ye.filter(ee=>ee!==G.validator);Pn.length!==Ye.length&&(V=!0,Q.setValidators(Pn))}}if(null!==G.asyncValidator){const Ye=tr(Q);if(Array.isArray(Ye)&&Ye.length>0){const Pn=Ye.filter(ee=>ee!==G.asyncValidator);Pn.length!==Ye.length&&(V=!0,Q.setAsyncValidators(Pn))}}}const ye=()=>{};return $r(G._rawValidators,ye),$r(G._rawAsyncValidators,ye),V}function Ge(Q,G){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),G.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function Ae(Q,G){Ue(Q,G)}function Qi(Q,G){if(!Q.hasOwnProperty("model"))return!1;const V=Q.model;return!!V.isFirstChange()||!Object.is(G,V.currentValue)}function As(Q,G){Q._syncPendingControls(),G.forEach(V=>{const ye=V.control;"submit"===ye.updateOn&&ye._pendingChange&&(V.viewToModelUpdate(ye._pendingValue),ye._pendingChange=!1)})}function Ni(Q,G){if(!G)return null;let V,ye,Ye;return Array.isArray(G),G.forEach(Pn=>{Pn.constructor===xe?V=Pn:function ls(Q){return Object.getPrototypeOf(Q.constructor)===vt}(Pn)?ye=Pn:Ye=Pn}),Ye||ye||V||null}function di(Q,G){const V=Q.indexOf(G);V>-1&&Q.splice(V,1)}const En="VALID",yr="INVALID",mi="PENDING",Mi="DISABLED";function Ui(Q){return(Gi(Q)?Q.validators:Q)||null}function us(Q){return Array.isArray(Q)?ut(Q):Q||null}function Ti(Q,G){return(Gi(G)?G.asyncValidators:Q)||null}function Ki(Q){return Array.isArray(Q)?Rt(Q):Q||null}function Gi(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}const Ar=Q=>Q instanceof Xi,os=Q=>Q instanceof Qr,ds=Q=>Q instanceof wi;function $s(Q){return Ar(Q)?Q.value:Q.getRawValue()}function Yr(Q,G){const V=os(Q),ye=Q.controls;if(!(V?Object.keys(ye):ye).length)throw new g.vHH(1e3,"");if(!ye[G])throw new g.vHH(1001,"")}function wr(Q,G){os(Q),Q._forEachChild((ye,Ye)=>{if(void 0===G[Ye])throw new g.vHH(1002,"")})}class Ir{constructor(G,V){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=G,this._rawAsyncValidators=V,this._composedValidatorFn=us(this._rawValidators),this._composedAsyncValidatorFn=Ki(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(G){this._rawValidators=this._composedValidatorFn=G}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(G){this._rawAsyncValidators=this._composedAsyncValidatorFn=G}get parent(){return this._parent}get valid(){return this.status===En}get invalid(){return this.status===yr}get pending(){return this.status==mi}get disabled(){return this.status===Mi}get enabled(){return this.status!==Mi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(G){this._rawValidators=G,this._composedValidatorFn=us(G)}setAsyncValidators(G){this._rawAsyncValidators=G,this._composedAsyncValidatorFn=Ki(G)}addValidators(G){this.setValidators(oi(G,this._rawValidators))}addAsyncValidators(G){this.setAsyncValidators(oi(G,this._rawAsyncValidators))}removeValidators(G){this.setValidators(Qn(G,this._rawValidators))}removeAsyncValidators(G){this.setAsyncValidators(Qn(G,this._rawAsyncValidators))}hasValidator(G){return Xr(this._rawValidators,G)}hasAsyncValidator(G){return Xr(this._rawAsyncValidators,G)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(G={}){this.touched=!0,this._parent&&!G.onlySelf&&this._parent.markAsTouched(G)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(G=>G.markAllAsTouched())}markAsUntouched(G={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(V=>{V.markAsUntouched({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}markAsDirty(G={}){this.pristine=!1,this._parent&&!G.onlySelf&&this._parent.markAsDirty(G)}markAsPristine(G={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(V=>{V.markAsPristine({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}markAsPending(G={}){this.status=mi,!1!==G.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!G.onlySelf&&this._parent.markAsPending(G)}disable(G={}){const V=this._parentMarkedDirty(G.onlySelf);this.status=Mi,this.errors=null,this._forEachChild(ye=>{ye.disable(Object.assign(Object.assign({},G),{onlySelf:!0}))}),this._updateValue(),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},G),{skipPristineCheck:V})),this._onDisabledChange.forEach(ye=>ye(!0))}enable(G={}){const V=this._parentMarkedDirty(G.onlySelf);this.status=En,this._forEachChild(ye=>{ye.enable(Object.assign(Object.assign({},G),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},G),{skipPristineCheck:V})),this._onDisabledChange.forEach(ye=>ye(!1))}_updateAncestors(G){this._parent&&!G.onlySelf&&(this._parent.updateValueAndValidity(G),G.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(G){this._parent=G}updateValueAndValidity(G={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===En||this.status===mi)&&this._runAsyncValidator(G.emitEvent)),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!G.onlySelf&&this._parent.updateValueAndValidity(G)}_updateTreeValidity(G={emitEvent:!0}){this._forEachChild(V=>V._updateTreeValidity(G)),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mi:En}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(G){if(this.asyncValidator){this.status=mi,this._hasOwnPendingAsyncValidator=!0;const V=Tr(this.asyncValidator(this));this._asyncValidationSubscription=V.subscribe(ye=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ye,{emitEvent:G})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(G,V={}){this.errors=G,this._updateControlsErrors(!1!==V.emitEvent)}get(G){return function bs(Q,G,V){if(null==G||(Array.isArray(G)||(G=G.split(V)),Array.isArray(G)&&0===G.length))return null;let ye=Q;return G.forEach(Ye=>{ye=os(ye)?ye.controls.hasOwnProperty(Ye)?ye.controls[Ye]:null:ds(ye)&&ye.at(Ye)||null}),ye}(this,G,".")}getError(G,V){const ye=V?this.get(V):this;return ye&&ye.errors?ye.errors[G]:null}hasError(G,V){return!!this.getError(G,V)}get root(){let G=this;for(;G._parent;)G=G._parent;return G}_updateControlsErrors(G){this.status=this._calculateStatus(),G&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(G)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Mi:this.errors?yr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mi)?mi:this._anyControlsHaveStatus(yr)?yr:En}_anyControlsHaveStatus(G){return this._anyControls(V=>V.status===G)}_anyControlsDirty(){return this._anyControls(G=>G.dirty)}_anyControlsTouched(){return this._anyControls(G=>G.touched)}_updatePristine(G={}){this.pristine=!this._anyControlsDirty(),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}_updateTouched(G={}){this.touched=this._anyControlsTouched(),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}_isBoxedValue(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}_registerOnCollectionChange(G){this._onCollectionChange=G}_setUpdateStrategy(G){Gi(G)&&null!=G.updateOn&&(this._updateOn=G.updateOn)}_parentMarkedDirty(G){return!G&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Xi extends Ir{constructor(G=null,V,ye){super(Ui(V),Ti(ye,V)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(G),this._setUpdateStrategy(V),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gi(V)&&V.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(G)?G.value:G)}setValue(G,V={}){this.value=this._pendingValue=G,this._onChange.length&&!1!==V.emitModelToViewChange&&this._onChange.forEach(ye=>ye(this.value,!1!==V.emitViewToModelChange)),this.updateValueAndValidity(V)}patchValue(G,V={}){this.setValue(G,V)}reset(G=this.defaultValue,V={}){this._applyFormState(G),this.markAsPristine(V),this.markAsUntouched(V),this.setValue(this.value,V),this._pendingChange=!1}_updateValue(){}_anyControls(G){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(G){this._onChange.push(G)}_unregisterOnChange(G){di(this._onChange,G)}registerOnDisabledChange(G){this._onDisabledChange.push(G)}_unregisterOnDisabledChange(G){di(this._onDisabledChange,G)}_forEachChild(G){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(G){this._isBoxedValue(G)?(this.value=this._pendingValue=G.value,G.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=G}}class Qr extends Ir{constructor(G,V,ye){super(Ui(V),Ti(ye,V)),this.controls=G,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(G,V){return this.controls[G]?this.controls[G]:(this.controls[G]=V,V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange),V)}addControl(G,V,ye={}){this.registerControl(G,V),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}removeControl(G,V={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}setControl(G,V,ye={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],V&&this.registerControl(G,V),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}contains(G){return this.controls.hasOwnProperty(G)&&this.controls[G].enabled}setValue(G,V={}){wr(this,G),Object.keys(G).forEach(ye=>{Yr(this,ye),this.controls[ye].setValue(G[ye],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(G,V={}){null!=G&&(Object.keys(G).forEach(ye=>{this.controls[ye]&&this.controls[ye].patchValue(G[ye],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(G={},V={}){this._forEachChild((ye,Ye)=>{ye.reset(G[Ye],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this._reduceChildren({},(G,V,ye)=>(G[ye]=$s(V),G))}_syncPendingControls(){let G=this._reduceChildren(!1,(V,ye)=>!!ye._syncPendingControls()||V);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){Object.keys(this.controls).forEach(V=>{const ye=this.controls[V];ye&&G(ye,V)})}_setUpControls(){this._forEachChild(G=>{G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(G){for(const V of Object.keys(this.controls)){const ye=this.controls[V];if(this.contains(V)&&G(ye))return!0}return!1}_reduceValue(){return this._reduceChildren({},(G,V,ye)=>((V.enabled||this.disabled)&&(G[ye]=V.value),G))}_reduceChildren(G,V){let ye=G;return this._forEachChild((Ye,Pn)=>{ye=V(ye,Ye,Pn)}),ye}_allControlsDisabled(){for(const G of Object.keys(this.controls))if(this.controls[G].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class wi extends Ir{constructor(G,V,ye){super(Ui(V),Ti(ye,V)),this.controls=G,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(G){return this.controls[G]}push(G,V={}){this.controls.push(G),this._registerControl(G),this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}insert(G,V,ye={}){this.controls.splice(G,0,V),this._registerControl(V),this.updateValueAndValidity({emitEvent:ye.emitEvent})}removeAt(G,V={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),this.controls.splice(G,1),this.updateValueAndValidity({emitEvent:V.emitEvent})}setControl(G,V,ye={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),this.controls.splice(G,1),V&&(this.controls.splice(G,0,V),this._registerControl(V)),this.updateValueAndValidity({emitEvent:ye.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(G,V={}){wr(this,G),G.forEach((ye,Ye)=>{Yr(this,Ye),this.at(Ye).setValue(ye,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(G,V={}){null!=G&&(G.forEach((ye,Ye)=>{this.at(Ye)&&this.at(Ye).patchValue(ye,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(G=[],V={}){this._forEachChild((ye,Ye)=>{ye.reset(G[Ye],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this.controls.map(G=>$s(G))}clear(G={}){this.controls.length<1||(this._forEachChild(V=>V._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:G.emitEvent}))}_syncPendingControls(){let G=this.controls.reduce((V,ye)=>!!ye._syncPendingControls()||V,!1);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){this.controls.forEach((V,ye)=>{G(V,ye)})}_updateValue(){this.value=this.controls.filter(G=>G.enabled||this.disabled).map(G=>G.value)}_anyControls(G){return this.controls.some(V=>V.enabled&&G(V))}_setUpControls(){this._forEachChild(G=>this._registerControl(G))}_allControlsDisabled(){for(const G of this.controls)if(G.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(G){G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)}}const Ks={provide:Mr,useExisting:(0,g.Gpc)(()=>hs)},zi=(()=>Promise.resolve(null))();let hs=(()=>{class Q extends Mr{constructor(V,ye){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new Qr({},ut(V),Rt(ye))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(V){zi.then(()=>{const ye=this._findContainer(V.path);V.control=ye.registerControl(V.name,V.control),Rr(V.control,V),V.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(V)})}getControl(V){return this.form.get(V.path)}removeControl(V){zi.then(()=>{const ye=this._findContainer(V.path);ye&&ye.removeControl(V.name),this._directives.delete(V)})}addFormGroup(V){zi.then(()=>{const ye=this._findContainer(V.path),Ye=new Qr({});Ae(Ye,V),ye.registerControl(V.name,Ye),Ye.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(V){zi.then(()=>{const ye=this._findContainer(V.path);ye&&ye.removeControl(V.name)})}getFormGroup(V){return this.form.get(V.path)}updateModel(V,ye){zi.then(()=>{this.form.get(V.path).setValue(ye)})}setValue(V){this.control.setValue(V)}onSubmit(V){return this.submitted=!0,As(this.form,this._directives),this.ngSubmit.emit(V),!1}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(V){return V.pop(),V.length?this.form.get(V):this.form}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(an,10),g.Y36(Ht,10))},Q.\u0275dir=g.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(V,ye){1&V&&g.NdJ("submit",function(Pn){return ye.onSubmit(Pn)})("reset",function(){return ye.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Ks]),g.qOj]}),Q})();const mo={provide:xr,useExisting:(0,g.Gpc)(()=>Zi)},xs=(()=>Promise.resolve(null))();let Zi=(()=>{class Q extends xr{constructor(V,ye,Ye,Pn,ee){super(),this._changeDetectorRef=ee,this.control=new Xi,this._registered=!1,this.update=new g.vpe,this._parent=V,this._setValidators(ye),this._setAsyncValidators(Ye),this.valueAccessor=Ni(0,Pn)}ngOnChanges(V){if(this._checkForErrors(),!this._registered||"name"in V){if(this._registered&&(this._checkName(),this.formDirective)){const ye=V.name.previousValue;this.formDirective.removeControl({name:ye,path:this._getPath(ye)})}this._setUpControl()}"isDisabled"in V&&this._updateDisabled(V),Qi(V,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(V){xs.then(()=>{var ye;this.control.setValue(V,{emitViewToModelChange:!1}),null===(ye=this._changeDetectorRef)||void 0===ye||ye.markForCheck()})}_updateDisabled(V){const ye=V.isDisabled.currentValue,Ye=""===ye||ye&&"false"!==ye;xs.then(()=>{var Pn;Ye&&!this.control.disabled?this.control.disable():!Ye&&this.control.disabled&&this.control.enable(),null===(Pn=this._changeDetectorRef)||void 0===Pn||Pn.markForCheck()})}_getPath(V){return this._parent?Yn(V,this._parent):[V]}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(Mr,9),g.Y36(an,10),g.Y36(Ht,10),g.Y36(un,10),g.Y36(g.sBO,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([mo]),g.qOj,g.TTD]}),Q})(),Ct=(()=>{class Q{}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275dir=g.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Q})();const mn={provide:un,useExisting:(0,g.Gpc)(()=>Yi),multi:!0};let Pr=(()=>{class Q{}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({}),Q})(),ti=(()=>{class Q{constructor(){this._accessors=[]}add(V,ye){this._accessors.push([V,ye])}remove(V){for(let ye=this._accessors.length-1;ye>=0;--ye)if(this._accessors[ye][1]===V)return void this._accessors.splice(ye,1)}select(V){this._accessors.forEach(ye=>{this._isSameGroup(ye,V)&&ye[1]!==V&&ye[1].fireUncheck(V.value)})}_isSameGroup(V,ye){return!!V[0].control&&V[0]._parent===ye._control._parent&&V[1].name===ye.name}}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275prov=g.Yz7({token:Q,factory:Q.\u0275fac,providedIn:Pr}),Q})(),Yi=(()=>{class Q extends vt{constructor(V,ye,Ye,Pn){super(V,ye),this._registry=Ye,this._injector=Pn,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(xr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(V){this._state=V===this.value,this.setProperty("checked",this._state)}registerOnChange(V){this._fn=V,this.onChange=()=>{V(this.value),this._registry.select(this)}}fireUncheck(V){this.writeValue(V)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ti),g.Y36(g.zs3))},Q.\u0275dir=g.lG2({type:Q,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(V,ye){1&V&&g.NdJ("change",function(){return ye.onChange()})("blur",function(){return ye.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[g._Bn([mn]),g.qOj]}),Q})();const ai=new g.OlP("NgModelWithFormControlWarning"),ms={provide:xr,useExisting:(0,g.Gpc)(()=>Ts)};let Ts=(()=>{class Q extends xr{constructor(V,ye,Ye,Pn){super(),this._ngModelWarningConfig=Pn,this.update=new g.vpe,this._ngModelWarningSent=!1,this._setValidators(V),this._setAsyncValidators(ye),this.valueAccessor=Ni(0,Ye)}set isDisabled(V){}ngOnChanges(V){if(this._isControlChanged(V)){const ye=V.form.previousValue;ye&&Ur(ye,this,!1),Rr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Qi(V,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ur(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}_isControlChanged(V){return V.hasOwnProperty("form")}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(V){return new(V||Q)(g.Y36(an,10),g.Y36(Ht,10),g.Y36(un,10),g.Y36(ai,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[g._Bn([ms]),g.qOj,g.TTD]}),Q})();const Qo={provide:Mr,useExisting:(0,g.Gpc)(()=>Es)};let Es=(()=>{class Q extends Mr{constructor(V,ye){super(),this.validators=V,this.asyncValidators=ye,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(V),this._setAsyncValidators(ye)}ngOnChanges(V){this._checkFormPresent(),V.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ft(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(V){const ye=this.form.get(V.path);return Rr(ye,V),ye.updateValueAndValidity({emitEvent:!1}),this.directives.push(V),ye}getControl(V){return this.form.get(V.path)}removeControl(V){Ur(V.control||null,V,!1),di(this.directives,V)}addFormGroup(V){this._setUpFormContainer(V)}removeFormGroup(V){this._cleanUpFormContainer(V)}getFormGroup(V){return this.form.get(V.path)}addFormArray(V){this._setUpFormContainer(V)}removeFormArray(V){this._cleanUpFormContainer(V)}getFormArray(V){return this.form.get(V.path)}updateModel(V,ye){this.form.get(V.path).setValue(ye)}onSubmit(V){return this.submitted=!0,As(this.form,this.directives),this.ngSubmit.emit(V),!1}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_updateDomValue(){this.directives.forEach(V=>{const ye=V.control,Ye=this.form.get(V.path);ye!==Ye&&(Ur(ye||null,V),Ar(Ye)&&(Rr(Ye,V),V.control=Ye))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(V){const ye=this.form.get(V.path);Ae(ye,V),ye.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(V){if(this.form){const ye=this.form.get(V.path);ye&&function gt(Q,G){return ft(Q,G)}(ye,V)&&ye.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ue(this.form,this),this._oldForm&&ft(this._oldForm,this)}_checkFormPresent(){}}return Q.\u0275fac=function(V){return new(V||Q)(g.Y36(an,10),g.Y36(Ht,10))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(V,ye){1&V&&g.NdJ("submit",function(Pn){return ye.onSubmit(Pn)})("reset",function(){return ye.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Qo]),g.qOj,g.TTD]}),Q})();const Ms={provide:xr,useExisting:(0,g.Gpc)(()=>io)};let io=(()=>{class Q extends xr{constructor(V,ye,Ye,Pn,ee){super(),this._ngModelWarningConfig=ee,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=V,this._setValidators(ye),this._setAsyncValidators(Ye),this.valueAccessor=Ni(0,Pn)}set isDisabled(V){}ngOnChanges(V){this._added||this._setUpControl(),Qi(V,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}get path(){return Yn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(V){return new(V||Q)(g.Y36(Mr,13),g.Y36(an,10),g.Y36(Ht,10),g.Y36(un,10),g.Y36(ai,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Ms]),g.qOj,g.TTD]}),Q})(),ns=(()=>{class Q{}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({imports:[[Pr]]}),Q})(),Kr=(()=>{class Q{}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({imports:[ns]}),Q})(),Zs=(()=>{class Q{static withConfig(V){return{ngModule:Q,providers:[{provide:ai,useValue:V.warnOnNgModelWithFormControl}]}}}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({imports:[ns]}),Q})(),ys=(()=>{class Q{group(V,ye=null){const Ye=this._reduceControls(V);let K,Pn=null,ee=null;return null!=ye&&(function ko(Q){return void 0!==Q.asyncValidators||void 0!==Q.validators||void 0!==Q.updateOn}(ye)?(Pn=null!=ye.validators?ye.validators:null,ee=null!=ye.asyncValidators?ye.asyncValidators:null,K=null!=ye.updateOn?ye.updateOn:void 0):(Pn=null!=ye.validator?ye.validator:null,ee=null!=ye.asyncValidator?ye.asyncValidator:null)),new Qr(Ye,{asyncValidators:ee,updateOn:K,validators:Pn})}control(V,ye,Ye){return new Xi(V,ye,Ye)}array(V,ye,Ye){const Pn=V.map(ee=>this._createControl(ee));return new wi(Pn,ye,Ye)}_reduceControls(V){const ye={};return Object.keys(V).forEach(Ye=>{ye[Ye]=this._createControl(V[Ye])}),ye}_createControl(V){return Ar(V)||os(V)||ds(V)?V:Array.isArray(V)?this.control(V[0],V.length>1?V[1]:null,V.length>2?V[2]:null):this.control(V)}}return Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275prov=g.Yz7({token:Q,factory:Q.\u0275fac,providedIn:Zs}),Q})()},2313:(Wn,At,j)=>{j.d(At,{Dx:()=>Mr,H7:()=>Ue,b2:()=>Xr,q6:()=>tr,se:()=>wt});var g=j(9808),F=j(5e3);class pe extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ae extends pe{static makeCurrent(){(0,g.HT)(new ae)}onAndCancel(Re,Ae,gt){return Re.addEventListener(Ae,gt,!1),()=>{Re.removeEventListener(Ae,gt,!1)}}dispatchEvent(Re,Ae){Re.dispatchEvent(Ae)}remove(Re){Re.parentNode&&Re.parentNode.removeChild(Re)}createElement(Re,Ae){return(Ae=Ae||this.getDefaultDocument()).createElement(Re)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Re){return Re.nodeType===Node.ELEMENT_NODE}isShadowRoot(Re){return Re instanceof DocumentFragment}getGlobalEventTarget(Re,Ae){return"window"===Ae?window:"document"===Ae?Re:"body"===Ae?Re.body:null}getBaseHref(Re){const Ae=function Xe(){return We=We||document.querySelector("base"),We?We.getAttribute("href"):null}();return null==Ae?null:function Ze(Ge){pt=pt||document.createElement("a"),pt.setAttribute("href",Ge);const Re=pt.pathname;return"/"===Re.charAt(0)?Re:`/${Re}`}(Ae)}resetBaseElement(){We=null}getUserAgent(){return window.navigator.userAgent}getCookie(Re){return(0,g.Mx)(document.cookie,Re)}}let pt,We=null;const ht=new F.OlP("TRANSITION_ID"),Pe=[{provide:F.ip1,useFactory:function Oe(Ge,Re,Ae){return()=>{Ae.get(F.CZH).donePromise.then(()=>{const gt=(0,g.q)(),cn=Re.querySelectorAll(`style[ng-transition="${Ge}"]`);for(let _r=0;_r<cn.length;_r++)gt.remove(cn[_r])})}},deps:[ht,g.K0,F.zs3],multi:!0}];class Et{static init(){(0,F.VLi)(new Et)}addToWindow(Re){F.dqk.getAngularTestability=(gt,cn=!0)=>{const _r=Re.findTestabilityInTree(gt,cn);if(null==_r)throw new Error("Could not find testability for element.");return _r},F.dqk.getAllAngularTestabilities=()=>Re.getAllTestabilities(),F.dqk.getAllAngularRootElements=()=>Re.getAllRootElements(),F.dqk.frameworkStabilizers||(F.dqk.frameworkStabilizers=[]),F.dqk.frameworkStabilizers.push(gt=>{const cn=F.dqk.getAllAngularTestabilities();let _r=cn.length,qn=!1;const ci=function(Qi){qn=qn||Qi,_r--,0==_r&&gt(qn)};cn.forEach(function(Qi){Qi.whenStable(ci)})})}findTestabilityInTree(Re,Ae,gt){if(null==Ae)return null;const cn=Re.getTestability(Ae);return null!=cn?cn:gt?(0,g.q)().isShadowRoot(Ae)?this.findTestabilityInTree(Re,Ae.host,!0):this.findTestabilityInTree(Re,Ae.parentElement,!0):null}}let Cn=(()=>{class Ge{build(){return new XMLHttpRequest}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)},Ge.\u0275prov=F.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();const vt=new F.OlP("EventManagerPlugins");let un=(()=>{class Ge{constructor(Ae,gt){this._zone=gt,this._eventNameToPlugin=new Map,Ae.forEach(cn=>cn.manager=this),this._plugins=Ae.slice().reverse()}addEventListener(Ae,gt,cn){return this._findPluginFor(gt).addEventListener(Ae,gt,cn)}addGlobalEventListener(Ae,gt,cn){return this._findPluginFor(gt).addGlobalEventListener(Ae,gt,cn)}getZone(){return this._zone}_findPluginFor(Ae){const gt=this._eventNameToPlugin.get(Ae);if(gt)return gt;const cn=this._plugins;for(let _r=0;_r<cn.length;_r++){const qn=cn[_r];if(qn.supports(Ae))return this._eventNameToPlugin.set(Ae,qn),qn}throw new Error(`No event manager plugin found for event ${Ae}`)}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)(F.LFG(vt),F.LFG(F.R0b))},Ge.\u0275prov=F.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();class In{constructor(Re){this._doc=Re}addGlobalEventListener(Re,Ae,gt){const cn=(0,g.q)().getGlobalEventTarget(this._doc,Re);if(!cn)throw new Error(`Unsupported event target ${cn} for event ${Ae}`);return this.addEventListener(cn,Ae,gt)}}let Ot=(()=>{class Ge{constructor(){this._stylesSet=new Set}addStyles(Ae){const gt=new Set;Ae.forEach(cn=>{this._stylesSet.has(cn)||(this._stylesSet.add(cn),gt.add(cn))}),this.onStylesAdded(gt)}onStylesAdded(Ae){}getAllStyles(){return Array.from(this._stylesSet)}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)},Ge.\u0275prov=F.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})(),Zt=(()=>{class Ge extends Ot{constructor(Ae){super(),this._doc=Ae,this._hostNodes=new Map,this._hostNodes.set(Ae.head,[])}_addStylesToHost(Ae,gt,cn){Ae.forEach(_r=>{const qn=this._doc.createElement("style");qn.textContent=_r,cn.push(gt.appendChild(qn))})}addHost(Ae){const gt=[];this._addStylesToHost(this._stylesSet,Ae,gt),this._hostNodes.set(Ae,gt)}removeHost(Ae){const gt=this._hostNodes.get(Ae);gt&&gt.forEach(Ln),this._hostNodes.delete(Ae)}onStylesAdded(Ae){this._hostNodes.forEach((gt,cn)=>{this._addStylesToHost(Ae,cn,gt)})}ngOnDestroy(){this._hostNodes.forEach(Ae=>Ae.forEach(Ln))}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)(F.LFG(g.K0))},Ge.\u0275prov=F.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();function Ln(Ge){(0,g.q)().remove(Ge)}const fn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xe=/%COMP%/g;function Me(Ge,Re,Ae){for(let gt=0;gt<Re.length;gt++){let cn=Re[gt];Array.isArray(cn)?Me(Ge,cn,Ae):(cn=cn.replace(xe,Ge),Ae.push(cn))}return Ae}function Tt(Ge){return Re=>{if("__ngUnwrap__"===Re)return Ge;!1===Ge(Re)&&(Re.preventDefault(),Re.returnValue=!1)}}let wt=(()=>{class Ge{constructor(Ae,gt,cn){this.eventManager=Ae,this.sharedStylesHost=gt,this.appId=cn,this.rendererByCompId=new Map,this.defaultRenderer=new at(Ae)}createRenderer(Ae,gt){if(!Ae||!gt)return this.defaultRenderer;switch(gt.encapsulation){case F.ifc.Emulated:{let cn=this.rendererByCompId.get(gt.id);return cn||(cn=new nr(this.eventManager,this.sharedStylesHost,gt,this.appId),this.rendererByCompId.set(gt.id,cn)),cn.applyToHost(Ae),cn}case 1:case F.ifc.ShadowDom:return new rr(this.eventManager,this.sharedStylesHost,Ae,gt);default:if(!this.rendererByCompId.has(gt.id)){const cn=Me(gt.id,gt.styles,[]);this.sharedStylesHost.addStyles(cn),this.rendererByCompId.set(gt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)(F.LFG(un),F.LFG(Zt),F.LFG(F.AFp))},Ge.\u0275prov=F.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();class at{constructor(Re){this.eventManager=Re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Re,Ae){return Ae?document.createElementNS(fn[Ae]||Ae,Re):document.createElement(Re)}createComment(Re){return document.createComment(Re)}createText(Re){return document.createTextNode(Re)}appendChild(Re,Ae){Re.appendChild(Ae)}insertBefore(Re,Ae,gt){Re&&Re.insertBefore(Ae,gt)}removeChild(Re,Ae){Re&&Re.removeChild(Ae)}selectRootElement(Re,Ae){let gt="string"==typeof Re?document.querySelector(Re):Re;if(!gt)throw new Error(`The selector "${Re}" did not match any elements`);return Ae||(gt.textContent=""),gt}parentNode(Re){return Re.parentNode}nextSibling(Re){return Re.nextSibling}setAttribute(Re,Ae,gt,cn){if(cn){Ae=cn+":"+Ae;const _r=fn[cn];_r?Re.setAttributeNS(_r,Ae,gt):Re.setAttribute(Ae,gt)}else Re.setAttribute(Ae,gt)}removeAttribute(Re,Ae,gt){if(gt){const cn=fn[gt];cn?Re.removeAttributeNS(cn,Ae):Re.removeAttribute(`${gt}:${Ae}`)}else Re.removeAttribute(Ae)}addClass(Re,Ae){Re.classList.add(Ae)}removeClass(Re,Ae){Re.classList.remove(Ae)}setStyle(Re,Ae,gt,cn){cn&(F.JOm.DashCase|F.JOm.Important)?Re.style.setProperty(Ae,gt,cn&F.JOm.Important?"important":""):Re.style[Ae]=gt}removeStyle(Re,Ae,gt){gt&F.JOm.DashCase?Re.style.removeProperty(Ae):Re.style[Ae]=""}setProperty(Re,Ae,gt){Re[Ae]=gt}setValue(Re,Ae){Re.nodeValue=Ae}listen(Re,Ae,gt){return"string"==typeof Re?this.eventManager.addGlobalEventListener(Re,Ae,Tt(gt)):this.eventManager.addEventListener(Re,Ae,Tt(gt))}}class nr extends at{constructor(Re,Ae,gt,cn){super(Re),this.component=gt;const _r=Me(cn+"-"+gt.id,gt.styles,[]);Ae.addStyles(_r),this.contentAttr=function ke(Ge){return"_ngcontent-%COMP%".replace(xe,Ge)}(cn+"-"+gt.id),this.hostAttr=function Ut(Ge){return"_nghost-%COMP%".replace(xe,Ge)}(cn+"-"+gt.id)}applyToHost(Re){super.setAttribute(Re,this.hostAttr,"")}createElement(Re,Ae){const gt=super.createElement(Re,Ae);return super.setAttribute(gt,this.contentAttr,""),gt}}class rr extends at{constructor(Re,Ae,gt,cn){super(Re),this.sharedStylesHost=Ae,this.hostEl=gt,this.shadowRoot=gt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _r=Me(cn.id,cn.styles,[]);for(let qn=0;qn<_r.length;qn++){const ci=document.createElement("style");ci.textContent=_r[qn],this.shadowRoot.appendChild(ci)}}nodeOrShadowRoot(Re){return Re===this.hostEl?this.shadowRoot:Re}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Re,Ae){return super.appendChild(this.nodeOrShadowRoot(Re),Ae)}insertBefore(Re,Ae,gt){return super.insertBefore(this.nodeOrShadowRoot(Re),Ae,gt)}removeChild(Re,Ae){return super.removeChild(this.nodeOrShadowRoot(Re),Ae)}parentNode(Re){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Re)))}}let yn=(()=>{class Ge extends In{constructor(Ae){super(Ae)}supports(Ae){return!0}addEventListener(Ae,gt,cn){return Ae.addEventListener(gt,cn,!1),()=>this.removeEventListener(Ae,gt,cn)}removeEventListener(Ae,gt,cn){return Ae.removeEventListener(gt,cn)}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)(F.LFG(g.K0))},Ge.\u0275prov=F.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();const Tr=["alt","control","meta","shift"],Vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},st={alt:Ge=>Ge.altKey,control:Ge=>Ge.ctrlKey,meta:Ge=>Ge.metaKey,shift:Ge=>Ge.shiftKey};let Dt=(()=>{class Ge extends In{constructor(Ae){super(Ae)}supports(Ae){return null!=Ge.parseEventName(Ae)}addEventListener(Ae,gt,cn){const _r=Ge.parseEventName(gt),qn=Ge.eventCallback(_r.fullKey,cn,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(Ae,_r.domEventName,qn))}static parseEventName(Ae){const gt=Ae.toLowerCase().split("."),cn=gt.shift();if(0===gt.length||"keydown"!==cn&&"keyup"!==cn)return null;const _r=Ge._normalizeKey(gt.pop());let qn="";if(Tr.forEach(Qi=>{const ls=gt.indexOf(Qi);ls>-1&&(gt.splice(ls,1),qn+=Qi+".")}),qn+=_r,0!=gt.length||0===_r.length)return null;const ci={};return ci.domEventName=cn,ci.fullKey=qn,ci}static getEventFullKey(Ae){let gt="",cn=function ut(Ge){let Re=Ge.key;if(null==Re){if(Re=Ge.keyIdentifier,null==Re)return"Unidentified";Re.startsWith("U+")&&(Re=String.fromCharCode(parseInt(Re.substring(2),16)),3===Ge.location&&kt.hasOwnProperty(Re)&&(Re=kt[Re]))}return Vt[Re]||Re}(Ae);return cn=cn.toLowerCase()," "===cn?cn="space":"."===cn&&(cn="dot"),Tr.forEach(_r=>{_r!=cn&&st[_r](Ae)&&(gt+=_r+".")}),gt+=cn,gt}static eventCallback(Ae,gt,cn){return _r=>{Ge.getEventFullKey(_r)===Ae&&cn.runGuarded(()=>gt(_r))}}static _normalizeKey(Ae){return"esc"===Ae?"escape":Ae}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)(F.LFG(g.K0))},Ge.\u0275prov=F.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();const tr=(0,F.eFA)(F._c5,"browser",[{provide:F.Lbi,useValue:g.bD},{provide:F.g9A,useValue:function Yt(){ae.makeCurrent(),Et.init()},multi:!0},{provide:g.K0,useFactory:function tn(){return(0,F.RDi)(document),document},deps:[]}]),lr=[{provide:F.zSh,useValue:"root"},{provide:F.qLn,useFactory:function Rt(){return new F.qLn},deps:[]},{provide:vt,useClass:yn,multi:!0,deps:[g.K0,F.R0b,F.Lbi]},{provide:vt,useClass:Dt,multi:!0,deps:[g.K0]},{provide:wt,useClass:wt,deps:[un,Zt,F.AFp]},{provide:F.FYo,useExisting:wt},{provide:Ot,useExisting:Zt},{provide:Zt,useClass:Zt,deps:[g.K0]},{provide:F.dDg,useClass:F.dDg,deps:[F.R0b]},{provide:un,useClass:un,deps:[vt,F.R0b]},{provide:g.JF,useClass:Cn,deps:[]}];let Xr=(()=>{class Ge{constructor(Ae){if(Ae)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Ae){return{ngModule:Ge,providers:[{provide:F.AFp,useValue:Ae.appId},{provide:ht,useExisting:F.AFp},Pe]}}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)(F.LFG(Ge,12))},Ge.\u0275mod=F.oAB({type:Ge}),Ge.\u0275inj=F.cJS({providers:lr,imports:[g.ez,F.hGG]}),Ge})(),Mr=(()=>{class Ge{constructor(Ae){this._doc=Ae}getTitle(){return this._doc.title}setTitle(Ae){this._doc.title=Ae||""}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)(F.LFG(g.K0))},Ge.\u0275prov=F.Yz7({token:Ge,factory:function(Ae){let gt=null;return gt=Ae?new Ae:function xr(){return new Mr((0,F.LFG)(g.K0))}(),gt},providedIn:"root"}),Ge})();"undefined"!=typeof window&&window;let Ue=(()=>{class Ge{}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)},Ge.\u0275prov=F.Yz7({token:Ge,factory:function(Ae){let gt=null;return gt=Ae?new(Ae||Ge):F.LFG(Xt),gt},providedIn:"root"}),Ge})(),Xt=(()=>{class Ge extends Ue{constructor(Ae){super(),this._doc=Ae}sanitize(Ae,gt){if(null==gt)return null;switch(Ae){case F.q3G.NONE:return gt;case F.q3G.HTML:return(0,F.qzn)(gt,"HTML")?(0,F.z3N)(gt):(0,F.EiD)(this._doc,String(gt)).toString();case F.q3G.STYLE:return(0,F.qzn)(gt,"Style")?(0,F.z3N)(gt):gt;case F.q3G.SCRIPT:if((0,F.qzn)(gt,"Script"))return(0,F.z3N)(gt);throw new Error("unsafe value used in a script context");case F.q3G.URL:return(0,F.yhl)(gt),(0,F.qzn)(gt,"URL")?(0,F.z3N)(gt):(0,F.mCW)(String(gt));case F.q3G.RESOURCE_URL:if((0,F.qzn)(gt,"ResourceURL"))return(0,F.z3N)(gt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Ae} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Ae){return(0,F.JVY)(Ae)}bypassSecurityTrustStyle(Ae){return(0,F.L6k)(Ae)}bypassSecurityTrustScript(Ae){return(0,F.eBb)(Ae)}bypassSecurityTrustUrl(Ae){return(0,F.LAX)(Ae)}bypassSecurityTrustResourceUrl(Ae){return(0,F.pB0)(Ae)}}return Ge.\u0275fac=function(Ae){return new(Ae||Ge)(F.LFG(g.K0))},Ge.\u0275prov=F.Yz7({token:Ge,factory:function(Ae){let gt=null;return gt=Ae?new Ae:function ft(Ge){return new Xt(Ge.get(g.K0))}(F.LFG(F.zs3)),gt},providedIn:"root"}),Ge})()},6115:(Wn,At,j)=>{j.d(At,{gz:()=>Ks,F0:()=>ir,rH:()=>Jn,yS:()=>vi,Bz:()=>Nr,lC:()=>so});var g=j(5e3),F=j(8306),pe=j(4742),ae=j(8996),We=j(4671),Xe=j(3268),pt=j(7669),Ze=j(1810),ht=j(5403),Oe=j(9672);function Cn(O,M,S){O?(0,Oe.f)(S,O,M):M()}var vt=j(8421);function un(O){return new F.y(M=>{(0,vt.Xf)(O()).subscribe(M)})}var In=j(727),Ot=j(4482);function Zt(){return(0,Ot.e)((O,M)=>{let S=null;O._refCount++;const q=(0,ht.x)(M,void 0,void 0,void 0,()=>{if(!O||O._refCount<=0||0<--O._refCount)return void(S=null);const ne=O._connection,_e=S;S=null,ne&&(!_e||ne===_e)&&ne.unsubscribe(),M.unsubscribe()});O.subscribe(q),q.closed||(S=O.connect())})}class Ln extends F.y{constructor(M,S){super(),this.source=M,this.subjectFactory=S,this._subject=null,this._refCount=0,this._connection=null,(0,Ot.A)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,null==M||M.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new In.w0;const S=this.getSubject();M.add(this.source.subscribe((0,ht.x)(S,void 0,()=>{this._teardown(),S.complete()},q=>{this._teardown(),S.error(q)},()=>this._teardown()))),M.closed&&(this._connection=null,M=In.w0.EMPTY)}return M}refCount(){return Zt()(this)}}var fn=j(9646),xe=j(1135),He=j(2843),St=j(6805),an=j(7272),Ht=j(515),ke=j(7579),Ut=j(9300);function Me(O){return O<=0?()=>Ht.E:(0,Ot.e)((M,S)=>{let q=[];M.subscribe((0,ht.x)(S,ne=>{q.push(ne),O<q.length&&q.shift()},()=>{for(const ne of q)S.next(ne);S.complete()},void 0,()=>{q=null}))})}var Tt=j(8068),et=j(6590),on=j(4004),Dn=j(3900),nr=j(5698),rr=j(8675),yn=j(5026),Tr=j(262),mr=j(4351),Vt=j(590),kt=j(5577),st=j(8505),Dt=j(8189),ut=j(9808);class Yt{constructor(M,S){this.id=M,this.url=S}}class Rt extends Yt{constructor(M,S,q="imperative",ne=null){super(M,S),this.navigationTrigger=q,this.restoredState=ne}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class tn extends Yt{constructor(M,S,q){super(M,S),this.urlAfterRedirects=q}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gn extends Yt{constructor(M,S,q){super(M,S),this.reason=q}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tr extends Yt{constructor(M,S,q){super(M,S),this.error=q}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lr extends Yt{constructor(M,S,q,ne){super(M,S),this.urlAfterRedirects=q,this.state=ne}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xr extends Yt{constructor(M,S,q,ne){super(M,S),this.urlAfterRedirects=q,this.state=ne}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oi extends Yt{constructor(M,S,q,ne,_e){super(M,S),this.urlAfterRedirects=q,this.state=ne,this.shouldActivate=_e}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qn extends Yt{constructor(M,S,q,ne){super(M,S),this.urlAfterRedirects=q,this.state=ne}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wr extends Yt{constructor(M,S,q,ne){super(M,S),this.urlAfterRedirects=q,this.state=ne}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xr{constructor(M){this.route=M}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Mr{constructor(M){this.route=M}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rs{constructor(M){this.snapshot=M}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ji{constructor(M){this.snapshot=M}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dn{constructor(M){this.snapshot=M}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rt{constructor(M){this.snapshot=M}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(M,S,q){this.routerEvent=M,this.position=S,this.anchor=q}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class rn{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const S=this.params[M];return Array.isArray(S)?S[0]:S}return null}getAll(M){if(this.has(M)){const S=this.params[M];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function bn(O){return new rn(O)}const zn="ngNavigationCancelingError";function Jr(O){const M=Error("NavigationCancelingError: "+O);return M[zn]=!0,M}function Br(O,M,S){const q=S.path.split("/");if(q.length>O.length||"full"===S.pathMatch&&(M.hasChildren()||q.length<O.length))return null;const ne={};for(let _e=0;_e<q.length;_e++){const $e=q[_e],Ne=O[_e];if($e.startsWith(":"))ne[$e.substring(1)]=Ne;else if($e!==Ne.path)return null}return{consumed:O.slice(0,q.length),posParams:ne}}function Li(O,M){const S=O?Object.keys(O):void 0,q=M?Object.keys(M):void 0;if(!S||!q||S.length!=q.length)return!1;let ne;for(let _e=0;_e<S.length;_e++)if(ne=S[_e],!ui(O[ne],M[ne]))return!1;return!0}function ui(O,M){if(Array.isArray(O)&&Array.isArray(M)){if(O.length!==M.length)return!1;const S=[...O].sort(),q=[...M].sort();return S.every((ne,_e)=>q[_e]===ne)}return O===M}function On(O){return Array.prototype.concat.apply([],O)}function Si(O){return O.length>0?O[O.length-1]:null}function Vi(O,M){for(const S in O)O.hasOwnProperty(S)&&M(O[S],S)}function kn(O){return(0,g.CqO)(O)?O:(0,g.QGY)(O)?(0,ae.D)(Promise.resolve(O)):(0,fn.of)(O)}const Yn={exact:function Je(O,M,S){if(!cn(O.segments,M.segments)||!Lt(O.segments,M.segments,S)||O.numberOfChildren!==M.numberOfChildren)return!1;for(const q in M.children)if(!O.children[q]||!Je(O.children[q],M.children[q],S))return!1;return!0},subset:ft},Rr={exact:function $r(O,M){return Li(O,M)},subset:function Ue(O,M){return Object.keys(M).length<=Object.keys(O).length&&Object.keys(M).every(S=>ui(O[S],M[S]))},ignored:()=>!0};function Ur(O,M,S){return Yn[S.paths](O.root,M.root,S.matrixParams)&&Rr[S.queryParams](O.queryParams,M.queryParams)&&!("exact"===S.fragment&&O.fragment!==M.fragment)}function ft(O,M,S){return Xt(O,M,M.segments,S)}function Xt(O,M,S,q){if(O.segments.length>S.length){const ne=O.segments.slice(0,S.length);return!(!cn(ne,S)||M.hasChildren()||!Lt(ne,S,q))}if(O.segments.length===S.length){if(!cn(O.segments,S)||!Lt(O.segments,S,q))return!1;for(const ne in M.children)if(!O.children[ne]||!ft(O.children[ne],M.children[ne],q))return!1;return!0}{const ne=S.slice(0,O.segments.length),_e=S.slice(O.segments.length);return!!(cn(O.segments,ne)&&Lt(O.segments,ne,q)&&O.children[Gt])&&Xt(O.children[Gt],M,_e,q)}}function Lt(O,M,S){return M.every((q,ne)=>Rr[S](O[ne].parameters,q.parameters))}class Ge{constructor(M,S,q){this.root=M,this.queryParams=S,this.fragment=q}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return Qi.serialize(this)}}class Re{constructor(M,S){this.segments=M,this.children=S,this.parent=null,Vi(S,(q,ne)=>q.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ls(this)}}class Ae{constructor(M,S){this.path=M,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=bn(this.parameters)),this._parameterMap}toString(){return mi(this)}}function cn(O,M){return O.length===M.length&&O.every((S,q)=>S.path===M[q].path)}class qn{}class ci{parse(M){const S=new os(M);return new Ge(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(M){const S=`/${As(M.root,!0)}`,q=function bs(O){const M=Object.keys(O).map(S=>{const q=O[S];return Array.isArray(q)?q.map(ne=>`${di(S)}=${di(ne)}`).join("&"):`${di(S)}=${di(q)}`}).filter(S=>!!S);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${S}${q}${"string"==typeof M.fragment?`#${function ss(O){return encodeURI(O)}(M.fragment)}`:""}`}}const Qi=new ci;function ls(O){return O.segments.map(M=>mi(M)).join("/")}function As(O,M){if(!O.hasChildren())return ls(O);if(M){const S=O.children[Gt]?As(O.children[Gt],!1):"",q=[];return Vi(O.children,(ne,_e)=>{_e!==Gt&&q.push(`${_e}:${As(ne,!1)}`)}),q.length>0?`${S}(${q.join("//")})`:S}{const S=function _r(O,M){let S=[];return Vi(O.children,(q,ne)=>{ne===Gt&&(S=S.concat(M(q,ne)))}),Vi(O.children,(q,ne)=>{ne!==Gt&&(S=S.concat(M(q,ne)))}),S}(O,(q,ne)=>ne===Gt?[As(O.children[Gt],!1)]:[`${ne}:${As(q,!1)}`]);return 1===Object.keys(O.children).length&&null!=O.children[Gt]?`${ls(O)}/${S[0]}`:`${ls(O)}/(${S.join("//")})`}}function Ni(O){return encodeURIComponent(O).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function di(O){return Ni(O).replace(/%3B/gi,";")}function Oi(O){return Ni(O).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function En(O){return decodeURIComponent(O)}function yr(O){return En(O.replace(/\+/g,"%20"))}function mi(O){return`${Oi(O.path)}${function Mi(O){return Object.keys(O).map(M=>`;${Oi(M)}=${Oi(O[M])}`).join("")}(O.parameters)}`}const Ui=/^[^\/()?;=#]+/;function us(O){const M=O.match(Ui);return M?M[0]:""}const Ti=/^[^=?&#]+/,Gi=/^[^&#]+/;class os{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let q={};return this.peekStartsWith("(")&&(q=this.parseParens(!1)),(M.length>0||Object.keys(S).length>0)&&(q[Gt]=new Re(M,S)),q}parseSegment(){const M=us(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(M),new Ae(En(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const S=us(this.remaining);if(!S)return;this.capture(S);let q="";if(this.consumeOptional("=")){const ne=us(this.remaining);ne&&(q=ne,this.capture(q))}M[En(S)]=En(q)}parseQueryParam(M){const S=function Ki(O){const M=O.match(Ti);return M?M[0]:""}(this.remaining);if(!S)return;this.capture(S);let q="";if(this.consumeOptional("=")){const $e=function Ar(O){const M=O.match(Gi);return M?M[0]:""}(this.remaining);$e&&(q=$e,this.capture(q))}const ne=yr(S),_e=yr(q);if(M.hasOwnProperty(ne)){let $e=M[ne];Array.isArray($e)||($e=[$e],M[ne]=$e),$e.push(_e)}else M[ne]=_e}parseParens(M){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const q=us(this.remaining),ne=this.remaining[q.length];if("/"!==ne&&")"!==ne&&";"!==ne)throw new Error(`Cannot parse url '${this.url}'`);let _e;q.indexOf(":")>-1?(_e=q.substr(0,q.indexOf(":")),this.capture(_e),this.capture(":")):M&&(_e=Gt);const $e=this.parseChildren();S[_e]=1===Object.keys($e).length?$e[Gt]:new Re([],$e),this.consumeOptional("//")}return S}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new Error(`Expected "${M}".`)}}class ds{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const S=this.pathFromRoot(M);return S.length>1?S[S.length-2]:null}children(M){const S=$s(M,this._root);return S?S.children.map(q=>q.value):[]}firstChild(M){const S=$s(M,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(M){const S=Yr(M,this._root);return S.length<2?[]:S[S.length-2].children.map(ne=>ne.value).filter(ne=>ne!==M)}pathFromRoot(M){return Yr(M,this._root).map(S=>S.value)}}function $s(O,M){if(O===M.value)return M;for(const S of M.children){const q=$s(O,S);if(q)return q}return null}function Yr(O,M){if(O===M.value)return[M];for(const S of M.children){const q=Yr(O,S);if(q.length)return q.unshift(M),q}return[]}class wr{constructor(M,S){this.value=M,this.children=S}toString(){return`TreeNode(${this.value})`}}function Ir(O){const M={};return O&&O.children.forEach(S=>M[S.value.outlet]=S),M}class Xi extends ds{constructor(M,S){super(M),this.snapshot=S,cs(this,M)}toString(){return this.snapshot.toString()}}function Qr(O,M){const S=function wi(O,M){const $e=new kr([],{},{},"",{},Gt,M,null,O.root,-1,{});return new qr("",new wr($e,[]))}(O,M),q=new xe.X([new Ae("",{})]),ne=new xe.X({}),_e=new xe.X({}),$e=new xe.X({}),Ne=new xe.X(""),Mt=new Ks(q,ne,$e,Ne,_e,Gt,M,S.root);return Mt.snapshot=S.root,new Xi(new wr(Mt,[]),S)}class Ks{constructor(M,S,q,ne,_e,$e,Ne,Mt){this.url=M,this.params=S,this.queryParams=q,this.fragment=ne,this.data=_e,this.outlet=$e,this.component=Ne,this._futureSnapshot=Mt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,on.U)(M=>bn(M)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,on.U)(M=>bn(M)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zi(O,M="emptyOnly"){const S=O.pathFromRoot;let q=0;if("always"!==M)for(q=S.length-1;q>=1;){const ne=S[q],_e=S[q-1];if(ne.routeConfig&&""===ne.routeConfig.path)q--;else{if(_e.component)break;q--}}return function hs(O){return O.reduce((M,S)=>({params:Object.assign(Object.assign({},M.params),S.params),data:Object.assign(Object.assign({},M.data),S.data),resolve:Object.assign(Object.assign({},M.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice(q))}class kr{constructor(M,S,q,ne,_e,$e,Ne,Mt,jt,pr,cr){this.url=M,this.params=S,this.queryParams=q,this.fragment=ne,this.data=_e,this.outlet=$e,this.component=Ne,this.routeConfig=Mt,this._urlSegment=jt,this._lastPathIndex=pr,this._resolve=cr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(q=>q.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qr extends ds{constructor(M,S){super(S),this.url=M,cs(this,S)}toString(){return gs(this._root)}}function cs(O,M){M.value._routerState=O,M.children.forEach(S=>cs(O,S))}function gs(O){const M=O.children.length>0?` { ${O.children.map(gs).join(", ")} } `:"";return`${O.value}${M}`}function ks(O){if(O.snapshot){const M=O.snapshot,S=O._futureSnapshot;O.snapshot=S,Li(M.queryParams,S.queryParams)||O.queryParams.next(S.queryParams),M.fragment!==S.fragment&&O.fragment.next(S.fragment),Li(M.params,S.params)||O.params.next(S.params),function as(O,M){if(O.length!==M.length)return!1;for(let S=0;S<O.length;++S)if(!Li(O[S],M[S]))return!1;return!0}(M.url,S.url)||O.url.next(S.url),Li(M.data,S.data)||O.data.next(S.data)}else O.snapshot=O._futureSnapshot,O.data.next(O._futureSnapshot.data)}function Hi(O,M){const S=Li(O.params,M.params)&&function gt(O,M){return cn(O,M)&&O.every((S,q)=>Li(S.parameters,M[q].parameters))}(O.url,M.url);return S&&!(!O.parent!=!M.parent)&&(!O.parent||Hi(O.parent,M.parent))}function mo(O,M,S){if(S&&O.shouldReuseRoute(M.value,S.value.snapshot)){const q=S.value;q._futureSnapshot=M.value;const ne=function xs(O,M,S){return M.children.map(q=>{for(const ne of S.children)if(O.shouldReuseRoute(q.value,ne.value.snapshot))return mo(O,q,ne);return mo(O,q)})}(O,M,S);return new wr(q,ne)}{if(O.shouldAttach(M.value)){const _e=O.retrieve(M.value);if(null!==_e){const $e=_e.route;return $e.value._futureSnapshot=M.value,$e.children=M.children.map(Ne=>mo(O,Ne)),$e}}const q=function Zi(O){return new Ks(new xe.X(O.url),new xe.X(O.params),new xe.X(O.queryParams),new xe.X(O.fragment),new xe.X(O.data),O.outlet,O.component,O)}(M.value),ne=M.children.map(_e=>mo(O,_e));return new wr(q,ne)}}function dt(O){return"object"==typeof O&&null!=O&&!O.outlets&&!O.segmentPath}function xt(O){return"object"==typeof O&&null!=O&&O.outlets}function mn(O,M,S,q,ne){let _e={};if(q&&Vi(q,(Ne,Mt)=>{_e[Mt]=Array.isArray(Ne)?Ne.map(jt=>`${jt}`):`${Ne}`}),O===M)return new Ge(S,_e,ne);const $e=$n(O,M,S);return new Ge($e,_e,ne)}function $n(O,M,S){const q={};return Vi(O.children,(ne,_e)=>{q[_e]=ne===M?S:$n(ne,M,S)}),new Re(O.segments,q)}class Pr{constructor(M,S,q){if(this.isAbsolute=M,this.numberOfDoubleDots=S,this.commands=q,M&&q.length>0&&dt(q[0]))throw new Error("Root segment cannot have matrix parameters");const ne=q.find(xt);if(ne&&ne!==Si(q))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yi{constructor(M,S,q){this.segmentGroup=M,this.processChildren=S,this.index=q}}function ms(O,M,S){if(O||(O=new Re([],{})),0===O.segments.length&&O.hasChildren())return Ts(O,M,S);const q=function Qo(O,M,S){let q=0,ne=M;const _e={match:!1,pathIndex:0,commandIndex:0};for(;ne<O.segments.length;){if(q>=S.length)return _e;const $e=O.segments[ne],Ne=S[q];if(xt(Ne))break;const Mt=`${Ne}`,jt=q<S.length-1?S[q+1]:null;if(ne>0&&void 0===Mt)break;if(Mt&&jt&&"object"==typeof jt&&void 0===jt.outlets){if(!ho(Mt,jt,$e))return _e;q+=2}else{if(!ho(Mt,{},$e))return _e;q++}ne++}return{match:!0,pathIndex:ne,commandIndex:q}}(O,M,S),ne=S.slice(q.commandIndex);if(q.match&&q.pathIndex<O.segments.length){const _e=new Re(O.segments.slice(0,q.pathIndex),{});return _e.children[Gt]=new Re(O.segments.slice(q.pathIndex),O.children),Ts(_e,0,ne)}return q.match&&0===ne.length?new Re(O.segments,{}):q.match&&!O.hasChildren()?Es(O,M,S):q.match?Ts(O,0,ne):Es(O,M,S)}function Ts(O,M,S){if(0===S.length)return new Re(O.segments,{});{const q=function ai(O){return xt(O[0])?O[0].outlets:{[Gt]:O}}(S),ne={};return Vi(q,(_e,$e)=>{"string"==typeof _e&&(_e=[_e]),null!==_e&&(ne[$e]=ms(O.children[$e],M,_e))}),Vi(O.children,(_e,$e)=>{void 0===q[$e]&&(ne[$e]=_e)}),new Re(O.segments,ne)}}function Es(O,M,S){const q=O.segments.slice(0,M);let ne=0;for(;ne<S.length;){const _e=S[ne];if(xt(_e)){const Mt=Qs(_e.outlets);return new Re(q,Mt)}if(0===ne&&dt(S[0])){q.push(new Ae(O.segments[M].path,ws(S[0]))),ne++;continue}const $e=xt(_e)?_e.outlets[Gt]:`${_e}`,Ne=ne<S.length-1?S[ne+1]:null;$e&&Ne&&dt(Ne)?(q.push(new Ae($e,ws(Ne))),ne+=2):(q.push(new Ae($e,{})),ne++)}return new Re(q,{})}function Qs(O){const M={};return Vi(O,(S,q)=>{"string"==typeof S&&(S=[S]),null!==S&&(M[q]=Es(new Re([],{}),0,S))}),M}function ws(O){const M={};return Vi(O,(S,q)=>M[q]=`${S}`),M}function ho(O,M,S){return O==S.path&&Li(M,S.parameters)}class fo{constructor(M,S,q,ne){this.routeReuseStrategy=M,this.futureState=S,this.currState=q,this.forwardEvent=ne}activate(M){const S=this.futureState._root,q=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,q,M),ks(this.futureState.root),this.activateChildRoutes(S,q,M)}deactivateChildRoutes(M,S,q){const ne=Ir(S);M.children.forEach(_e=>{const $e=_e.value.outlet;this.deactivateRoutes(_e,ne[$e],q),delete ne[$e]}),Vi(ne,(_e,$e)=>{this.deactivateRouteAndItsChildren(_e,q)})}deactivateRoutes(M,S,q){const ne=M.value,_e=S?S.value:null;if(ne===_e)if(ne.component){const $e=q.getContext(ne.outlet);$e&&this.deactivateChildRoutes(M,S,$e.children)}else this.deactivateChildRoutes(M,S,q);else _e&&this.deactivateRouteAndItsChildren(S,q)}deactivateRouteAndItsChildren(M,S){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,S):this.deactivateRouteAndOutlet(M,S)}detachAndStoreRouteSubtree(M,S){const q=S.getContext(M.value.outlet),ne=q&&M.value.component?q.children:S,_e=Ir(M);for(const $e of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[$e],ne);if(q&&q.outlet){const $e=q.outlet.detach(),Ne=q.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:$e,route:M,contexts:Ne})}}deactivateRouteAndOutlet(M,S){const q=S.getContext(M.value.outlet),ne=q&&M.value.component?q.children:S,_e=Ir(M);for(const $e of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[$e],ne);q&&q.outlet&&(q.outlet.deactivate(),q.children.onOutletDeactivated(),q.attachRef=null,q.resolver=null,q.route=null)}activateChildRoutes(M,S,q){const ne=Ir(S);M.children.forEach(_e=>{this.activateRoutes(_e,ne[_e.value.outlet],q),this.forwardEvent(new rt(_e.value.snapshot))}),M.children.length&&this.forwardEvent(new Ji(M.value.snapshot))}activateRoutes(M,S,q){const ne=M.value,_e=S?S.value:null;if(ks(ne),ne===_e)if(ne.component){const $e=q.getOrCreateContext(ne.outlet);this.activateChildRoutes(M,S,$e.children)}else this.activateChildRoutes(M,S,q);else if(ne.component){const $e=q.getOrCreateContext(ne.outlet);if(this.routeReuseStrategy.shouldAttach(ne.snapshot)){const Ne=this.routeReuseStrategy.retrieve(ne.snapshot);this.routeReuseStrategy.store(ne.snapshot,null),$e.children.onOutletReAttached(Ne.contexts),$e.attachRef=Ne.componentRef,$e.route=Ne.route.value,$e.outlet&&$e.outlet.attach(Ne.componentRef,Ne.route.value),ks(Ne.route.value),this.activateChildRoutes(M,null,$e.children)}else{const Ne=function Ms(O){for(let M=O.parent;M;M=M.parent){const S=M.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(ne.snapshot),Mt=Ne?Ne.module.componentFactoryResolver:null;$e.attachRef=null,$e.route=ne,$e.resolver=Mt,$e.outlet&&$e.outlet.activateWith(ne,Mt),this.activateChildRoutes(M,null,$e.children)}}else this.activateChildRoutes(M,null,q)}}class io{constructor(M,S){this.routes=M,this.module=S}}function js(O){return"function"==typeof O}function Xs(O){return O instanceof Ge}const fs=Symbol("INITIAL_VALUE");function Js(){return(0,Dn.w)(O=>function Pe(...O){const M=(0,pt.yG)(O),S=(0,pt.jO)(O),{args:q,keys:ne}=(0,pe.D)(O);if(0===q.length)return(0,ae.D)([],M);const _e=new F.y(function Et(O,M,S=We.y){return q=>{Cn(M,()=>{const{length:ne}=O,_e=new Array(ne);let $e=ne,Ne=ne;for(let Mt=0;Mt<ne;Mt++)Cn(M,()=>{const jt=(0,ae.D)(O[Mt],M);let pr=!1;jt.subscribe((0,ht.x)(q,cr=>{_e[Mt]=cr,pr||(pr=!0,Ne--),Ne||q.next(S(_e.slice()))},()=>{--$e||q.complete()}))},q)},q)}}(q,M,ne?$e=>(0,Ze.n)(ne,$e):We.y));return S?_e.pipe((0,Xe.Z)(S)):_e}(O.map(M=>M.pipe((0,nr.q)(1),(0,rr.O)(fs)))).pipe((0,yn.R)((M,S)=>{let q=!1;return S.reduce((ne,_e,$e)=>ne!==fs?ne:(_e===fs&&(q=!0),q||!1!==_e&&$e!==S.length-1&&!Xs(_e)?ne:_e),M)},fs),(0,Ut.h)(M=>M!==fs),(0,on.U)(M=>Xs(M)?M:!0===M),(0,nr.q)(1)))}class Gs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ki,this.attachRef=null}}class ki{constructor(){this.contexts=new Map}onChildOutletCreated(M,S){const q=this.getOrCreateContext(M);q.outlet=S,this.contexts.set(M,q)}onChildOutletDestroyed(M){const S=this.getContext(M);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const M=this.contexts;return this.contexts=new Map,M}onOutletReAttached(M){this.contexts=M}getOrCreateContext(M){let S=this.getContext(M);return S||(S=new Gs,this.contexts.set(M,S)),S}getContext(M){return this.contexts.get(M)||null}}let so=(()=>{class O{constructor(S,q,ne,_e,$e){this.parentContexts=S,this.location=q,this.resolver=ne,this.changeDetector=$e,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=_e||Gt,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,q){this.activated=S,this._activatedRoute=q,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,q){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const $e=(q=q||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),Ne=this.parentContexts.getOrCreateContext(this.name).children,Mt=new yo(S,Ne,this.location.injector);this.activated=this.location.createComponent($e,this.location.length,Mt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return O.\u0275fac=function(S){return new(S||O)(g.Y36(ki),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},O.\u0275dir=g.lG2({type:O,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),O})();class yo{constructor(M,S,q){this.route=M,this.childContexts=S,this.parent=q}get(M,S){return M===Ks?this.route:M===ki?this.childContexts:this.parent.get(M,S)}}let Rs=(()=>{class O{}return O.\u0275fac=function(S){return new(S||O)},O.\u0275cmp=g.Xpm({type:O,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,q){1&S&&g._UZ(0,"router-outlet")},directives:[so],encapsulation:2}),O})();function zs(O,M=""){for(let S=0;S<O.length;S++){const q=O[S];Ls(q,Bi(M,q))}}function Ls(O,M){O.children&&zs(O.children,M)}function Bi(O,M){return M?O||M.path?O&&!M.path?`${O}/`:!O&&M.path?M.path:`${O}/${M.path}`:"":O}function bi(O){const M=O.children&&O.children.map(bi),S=M?Object.assign(Object.assign({},O),{children:M}):Object.assign({},O);return!S.component&&(M||S.loadChildren)&&S.outlet&&S.outlet!==Gt&&(S.component=Rs),S}function B(O){return O.outlet||Gt}function he(O,M){const S=O.filter(q=>B(q)===M);return S.push(...O.filter(q=>B(q)!==M)),S}const W={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ve(O,M,S){var q;if(""===M.path)return"full"===M.pathMatch&&(O.hasChildren()||S.length>0)?Object.assign({},W):{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const _e=(M.matcher||Br)(S,O,M);if(!_e)return Object.assign({},W);const $e={};Vi(_e.posParams,(Mt,jt)=>{$e[jt]=Mt.path});const Ne=_e.consumed.length>0?Object.assign(Object.assign({},$e),_e.consumed[_e.consumed.length-1].parameters):$e;return{matched:!0,consumedSegments:_e.consumed,remainingSegments:S.slice(_e.consumed.length),parameters:Ne,positionalParamSegments:null!==(q=_e.posParams)&&void 0!==q?q:{}}}function qe(O,M,S,q,ne="corrected"){if(S.length>0&&function fr(O,M,S){return S.some(q=>ei(O,M,q)&&B(q)!==Gt)}(O,S,q)){const $e=new Re(M,function wn(O,M,S,q){const ne={};ne[Gt]=q,q._sourceSegment=O,q._segmentIndexShift=M.length;for(const _e of S)if(""===_e.path&&B(_e)!==Gt){const $e=new Re([],{});$e._sourceSegment=O,$e._segmentIndexShift=M.length,ne[B(_e)]=$e}return ne}(O,M,q,new Re(S,O.children)));return $e._sourceSegment=O,$e._segmentIndexShift=M.length,{segmentGroup:$e,slicedSegments:[]}}if(0===S.length&&function jr(O,M,S){return S.some(q=>ei(O,M,q))}(O,S,q)){const $e=new Re(O.segments,function sn(O,M,S,q,ne,_e){const $e={};for(const Ne of q)if(ei(O,S,Ne)&&!ne[B(Ne)]){const Mt=new Re([],{});Mt._sourceSegment=O,Mt._segmentIndexShift="legacy"===_e?O.segments.length:M.length,$e[B(Ne)]=Mt}return Object.assign(Object.assign({},ne),$e)}(O,M,S,q,O.children,ne));return $e._sourceSegment=O,$e._segmentIndexShift=M.length,{segmentGroup:$e,slicedSegments:S}}const _e=new Re(O.segments,O.children);return _e._sourceSegment=O,_e._segmentIndexShift=M.length,{segmentGroup:_e,slicedSegments:S}}function ei(O,M,S){return(!(O.hasChildren()||M.length>0)||"full"!==S.pathMatch)&&""===S.path}function ni(O,M,S,q){return!!(B(O)===q||q!==Gt&&ei(M,S,O))&&("**"===O.path||ve(M,O,S).matched)}function fi(O,M,S){return 0===M.length&&!O.children[S]}class es{constructor(M){this.segmentGroup=M||null}}class Di{constructor(M){this.urlTree=M}}function Fi(O){return(0,He._)(new es(O))}function oo(O){return(0,He._)(new Di(O))}class ko{constructor(M,S,q,ne,_e){this.configLoader=S,this.urlSerializer=q,this.urlTree=ne,this.config=_e,this.allowRedirects=!0,this.ngModule=M.get(g.h0i)}apply(){const M=qe(this.urlTree.root,[],[],this.config).segmentGroup,S=new Re(M.segments,M.children);return this.expandSegmentGroup(this.ngModule,this.config,S,Gt).pipe((0,on.U)(_e=>this.createUrlTree(_o(_e),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Tr.K)(_e=>{if(_e instanceof Di)return this.allowRedirects=!1,this.match(_e.urlTree);throw _e instanceof es?this.noMatchError(_e):_e}))}match(M){return this.expandSegmentGroup(this.ngModule,this.config,M.root,Gt).pipe((0,on.U)(ne=>this.createUrlTree(_o(ne),M.queryParams,M.fragment))).pipe((0,Tr.K)(ne=>{throw ne instanceof es?this.noMatchError(ne):ne}))}noMatchError(M){return new Error(`Cannot match any routes. URL Segment: '${M.segmentGroup}'`)}createUrlTree(M,S,q){const ne=M.segments.length>0?new Re([],{[Gt]:M}):M;return new Ge(ne,S,q)}expandSegmentGroup(M,S,q,ne){return 0===q.segments.length&&q.hasChildren()?this.expandChildren(M,S,q).pipe((0,on.U)(_e=>new Re([],_e))):this.expandSegment(M,q,S,q.segments,ne,!0)}expandChildren(M,S,q){const ne=[];for(const _e of Object.keys(q.children))"primary"===_e?ne.unshift(_e):ne.push(_e);return(0,ae.D)(ne).pipe((0,mr.b)(_e=>{const $e=q.children[_e],Ne=he(S,_e);return this.expandSegmentGroup(M,Ne,$e,_e).pipe((0,on.U)(Mt=>({segment:Mt,outlet:_e})))}),(0,yn.R)((_e,$e)=>(_e[$e.outlet]=$e.segment,_e),{}),function wt(O,M){const S=arguments.length>=2;return q=>q.pipe(O?(0,Ut.h)((ne,_e)=>O(ne,_e,q)):We.y,Me(1),S?(0,et.d)(M):(0,Tt.T)(()=>new St.K))}())}expandSegment(M,S,q,ne,_e,$e){return(0,ae.D)(q).pipe((0,mr.b)(Ne=>this.expandSegmentAgainstRoute(M,S,q,Ne,ne,_e,$e).pipe((0,Tr.K)(jt=>{if(jt instanceof es)return(0,fn.of)(null);throw jt}))),(0,Vt.P)(Ne=>!!Ne),(0,Tr.K)((Ne,Mt)=>{if(Ne instanceof St.K||"EmptyError"===Ne.name)return fi(S,ne,_e)?(0,fn.of)(new Re([],{})):Fi(S);throw Ne}))}expandSegmentAgainstRoute(M,S,q,ne,_e,$e,Ne){return ni(ne,S,_e,$e)?void 0===ne.redirectTo?this.matchSegmentAgainstRoute(M,S,ne,_e,$e):Ne&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(M,S,q,ne,_e,$e):Fi(S):Fi(S)}expandSegmentAgainstRouteUsingRedirect(M,S,q,ne,_e,$e){return"**"===ne.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(M,q,ne,$e):this.expandRegularSegmentAgainstRouteUsingRedirect(M,S,q,ne,_e,$e)}expandWildCardWithParamsAgainstRouteUsingRedirect(M,S,q,ne){const _e=this.applyRedirectCommands([],q.redirectTo,{});return q.redirectTo.startsWith("/")?oo(_e):this.lineralizeSegments(q,_e).pipe((0,kt.z)($e=>{const Ne=new Re($e,{});return this.expandSegment(M,Ne,S,$e,ne,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(M,S,q,ne,_e,$e){const{matched:Ne,consumedSegments:Mt,remainingSegments:jt,positionalParamSegments:pr}=ve(S,ne,_e);if(!Ne)return Fi(S);const cr=this.applyRedirectCommands(Mt,ne.redirectTo,pr);return ne.redirectTo.startsWith("/")?oo(cr):this.lineralizeSegments(ne,cr).pipe((0,kt.z)(Or=>this.expandSegment(M,S,q,Or.concat(jt),$e,!1)))}matchSegmentAgainstRoute(M,S,q,ne,_e){if("**"===q.path)return q.loadChildren?(q._loadedConfig?(0,fn.of)(q._loadedConfig):this.configLoader.load(M.injector,q)).pipe((0,on.U)(cr=>(q._loadedConfig=cr,new Re(ne,{})))):(0,fn.of)(new Re(ne,{}));const{matched:$e,consumedSegments:Ne,remainingSegments:Mt}=ve(S,q,ne);return $e?this.getChildConfig(M,q,ne).pipe((0,kt.z)(pr=>{const cr=pr.module,Or=pr.routes,{segmentGroup:Bn,slicedSegments:Ys}=qe(S,Ne,Mt,Or),vr=new Re(Bn.segments,Bn.children);if(0===Ys.length&&vr.hasChildren())return this.expandChildren(cr,Or,vr).pipe((0,on.U)(lo=>new Re(Ne,lo)));if(0===Or.length&&0===Ys.length)return(0,fn.of)(new Re(Ne,{}));const ua=B(q)===_e;return this.expandSegment(cr,vr,Or,Ys,ua?Gt:_e,!0).pipe((0,on.U)(Un=>new Re(Ne.concat(Un.segments),Un.children)))})):Fi(S)}getChildConfig(M,S,q){return S.children?(0,fn.of)(new io(S.children,M)):S.loadChildren?void 0!==S._loadedConfig?(0,fn.of)(S._loadedConfig):this.runCanLoadGuards(M.injector,S,q).pipe((0,kt.z)(ne=>ne?this.configLoader.load(M.injector,S).pipe((0,on.U)(_e=>(S._loadedConfig=_e,_e))):function Kr(O){return(0,He._)(Jr(`Cannot load children because the guard of the route "path: '${O.path}'" returned false`))}(S))):(0,fn.of)(new io([],M))}runCanLoadGuards(M,S,q){const ne=S.canLoad;if(!ne||0===ne.length)return(0,fn.of)(!0);const _e=ne.map($e=>{const Ne=M.get($e);let Mt;if(function Hs(O){return O&&js(O.canLoad)}(Ne))Mt=Ne.canLoad(S,q);else{if(!js(Ne))throw new Error("Invalid CanLoad guard");Mt=Ne(S,q)}return kn(Mt)});return(0,fn.of)(_e).pipe(Js(),(0,st.b)($e=>{if(!Xs($e))return;const Ne=Jr(`Redirecting to "${this.urlSerializer.serialize($e)}"`);throw Ne.url=$e,Ne}),(0,on.U)($e=>!0===$e))}lineralizeSegments(M,S){let q=[],ne=S.root;for(;;){if(q=q.concat(ne.segments),0===ne.numberOfChildren)return(0,fn.of)(q);if(ne.numberOfChildren>1||!ne.children[Gt])return(0,He._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${M.redirectTo}'`));ne=ne.children[Gt]}}applyRedirectCommands(M,S,q){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),M,q)}applyRedirectCreatreUrlTree(M,S,q,ne){const _e=this.createSegmentGroup(M,S.root,q,ne);return new Ge(_e,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(M,S){const q={};return Vi(M,(ne,_e)=>{if("string"==typeof ne&&ne.startsWith(":")){const Ne=ne.substring(1);q[_e]=S[Ne]}else q[_e]=ne}),q}createSegmentGroup(M,S,q,ne){const _e=this.createSegments(M,S.segments,q,ne);let $e={};return Vi(S.children,(Ne,Mt)=>{$e[Mt]=this.createSegmentGroup(M,Ne,q,ne)}),new Re(_e,$e)}createSegments(M,S,q,ne){return S.map(_e=>_e.path.startsWith(":")?this.findPosParam(M,_e,ne):this.findOrReturn(_e,q))}findPosParam(M,S,q){const ne=q[S.path.substring(1)];if(!ne)throw new Error(`Cannot redirect to '${M}'. Cannot find '${S.path}'.`);return ne}findOrReturn(M,S){let q=0;for(const ne of S){if(ne.path===M.path)return S.splice(q),ne;q++}return M}}function _o(O){const M={};for(const q of Object.keys(O.children)){const _e=_o(O.children[q]);(_e.segments.length>0||_e.hasChildren())&&(M[q]=_e)}return function ys(O){if(1===O.numberOfChildren&&O.children[Gt]){const M=O.children[Gt];return new Re(O.segments.concat(M.segments),M.children)}return O}(new Re(O.segments,M))}class G{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class V{constructor(M,S){this.component=M,this.route=S}}function ye(O,M,S){const q=O._root;return K(q,M?M._root:null,S,[q.value])}function Pn(O,M,S){const q=function ee(O){if(!O)return null;for(let M=O.parent;M;M=M.parent){const S=M.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(M);return(q?q.module.injector:S).get(O)}function K(O,M,S,q,ne={canDeactivateChecks:[],canActivateChecks:[]}){const _e=Ir(M);return O.children.forEach($e=>{(function Ce(O,M,S,q,ne={canDeactivateChecks:[],canActivateChecks:[]}){const _e=O.value,$e=M?M.value:null,Ne=S?S.getContext(O.value.outlet):null;if($e&&_e.routeConfig===$e.routeConfig){const Mt=function Ve(O,M,S){if("function"==typeof S)return S(O,M);switch(S){case"pathParamsChange":return!cn(O.url,M.url);case"pathParamsOrQueryParamsChange":return!cn(O.url,M.url)||!Li(O.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hi(O,M)||!Li(O.queryParams,M.queryParams);default:return!Hi(O,M)}}($e,_e,_e.routeConfig.runGuardsAndResolvers);Mt?ne.canActivateChecks.push(new G(q)):(_e.data=$e.data,_e._resolvedData=$e._resolvedData),K(O,M,_e.component?Ne?Ne.children:null:S,q,ne),Mt&&Ne&&Ne.outlet&&Ne.outlet.isActivated&&ne.canDeactivateChecks.push(new V(Ne.outlet.component,$e))}else $e&&it(M,Ne,ne),ne.canActivateChecks.push(new G(q)),K(O,null,_e.component?Ne?Ne.children:null:S,q,ne)})($e,_e[$e.value.outlet],S,q.concat([$e.value]),ne),delete _e[$e.value.outlet]}),Vi(_e,($e,Ne)=>it($e,S.getContext(Ne),ne)),ne}function it(O,M,S){const q=Ir(O),ne=O.value;Vi(q,(_e,$e)=>{it(_e,ne.component?M?M.children.getContext($e):null:M,S)}),S.canDeactivateChecks.push(new V(ne.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,ne))}class ts{}function l(O){return new F.y(M=>M.error(O))}class I{constructor(M,S,q,ne,_e,$e){this.rootComponentType=M,this.config=S,this.urlTree=q,this.url=ne,this.paramsInheritanceStrategy=_e,this.relativeLinkResolution=$e}recognize(){const M=qe(this.urlTree.root,[],[],this.config.filter($e=>void 0===$e.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,M,Gt);if(null===S)return null;const q=new kr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),ne=new wr(q,S),_e=new qr(this.url,ne);return this.inheritParamsAndData(_e._root),_e}inheritParamsAndData(M){const S=M.value,q=zi(S,this.paramsInheritanceStrategy);S.params=Object.freeze(q.params),S.data=Object.freeze(q.data),M.children.forEach(ne=>this.inheritParamsAndData(ne))}processSegmentGroup(M,S,q){return 0===S.segments.length&&S.hasChildren()?this.processChildren(M,S):this.processSegment(M,S,S.segments,q)}processChildren(M,S){const q=[];for(const _e of Object.keys(S.children)){const $e=S.children[_e],Ne=he(M,_e),Mt=this.processSegmentGroup(Ne,$e,_e);if(null===Mt)return null;q.push(...Mt)}const ne=me(q);return function P(O){O.sort((M,S)=>M.value.outlet===Gt?-1:S.value.outlet===Gt?1:M.value.outlet.localeCompare(S.value.outlet))}(ne),ne}processSegment(M,S,q,ne){for(const _e of M){const $e=this.processSegmentAgainstRoute(_e,S,q,ne);if(null!==$e)return $e}return fi(S,q,ne)?[]:null}processSegmentAgainstRoute(M,S,q,ne){if(M.redirectTo||!ni(M,S,q,ne))return null;let _e,$e=[],Ne=[];if("**"===M.path){const Bn=q.length>0?Si(q).parameters:{};_e=new kr(q,Bn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ce(M),B(M),M.component,M,oe(S),ge(S)+q.length,le(M))}else{const Bn=ve(S,M,q);if(!Bn.matched)return null;$e=Bn.consumedSegments,Ne=Bn.remainingSegments,_e=new kr($e,Bn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ce(M),B(M),M.component,M,oe(S),ge(S)+$e.length,le(M))}const Mt=function z(O){return O.children?O.children:O.loadChildren?O._loadedConfig.routes:[]}(M),{segmentGroup:jt,slicedSegments:pr}=qe(S,$e,Ne,Mt.filter(Bn=>void 0===Bn.redirectTo),this.relativeLinkResolution);if(0===pr.length&&jt.hasChildren()){const Bn=this.processChildren(Mt,jt);return null===Bn?null:[new wr(_e,Bn)]}if(0===Mt.length&&0===pr.length)return[new wr(_e,[])];const cr=B(M)===ne,Or=this.processSegment(Mt,jt,pr,cr?Gt:ne);return null===Or?null:[new wr(_e,Or)]}}function J(O){const M=O.value.routeConfig;return M&&""===M.path&&void 0===M.redirectTo}function me(O){const M=[],S=new Set;for(const q of O){if(!J(q)){M.push(q);continue}const ne=M.find(_e=>q.value.routeConfig===_e.value.routeConfig);void 0!==ne?(ne.children.push(...q.children),S.add(ne)):M.push(q)}for(const q of S){const ne=me(q.children);M.push(new wr(q.value,ne))}return M.filter(q=>!S.has(q))}function oe(O){let M=O;for(;M._sourceSegment;)M=M._sourceSegment;return M}function ge(O){let M=O,S=M._segmentIndexShift?M._segmentIndexShift:0;for(;M._sourceSegment;)M=M._sourceSegment,S+=M._segmentIndexShift?M._segmentIndexShift:0;return S-1}function ce(O){return O.data||{}}function le(O){return O.resolve||{}}function Fe(O){return[...Object.keys(O),...Object.getOwnPropertySymbols(O)]}function tt(O){return(0,Dn.w)(M=>{const S=O(M);return S?(0,ae.D)(S).pipe((0,on.U)(()=>M)):(0,fn.of)(M)})}class Sn extends class vn{shouldDetach(M){return!1}store(M,S){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,S){return M.routeConfig===S.routeConfig}}{}const gn=new g.OlP("ROUTES");class Rn{constructor(M,S,q,ne){this.injector=M,this.compiler=S,this.onLoadStartListener=q,this.onLoadEndListener=ne}load(M,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const ne=this.loadModuleFactory(S.loadChildren).pipe((0,on.U)(_e=>{this.onLoadEndListener&&this.onLoadEndListener(S);const $e=_e.create(M);return new io(On($e.injector.get(gn,void 0,g.XFs.Self|g.XFs.Optional)).map(bi),$e)}),(0,Tr.K)(_e=>{throw S._loader$=void 0,_e}));return S._loader$=new Ln(ne,()=>new ke.x).pipe(Zt()),S._loader$}loadModuleFactory(M){return kn(M()).pipe((0,kt.z)(S=>S instanceof g.YKP?(0,fn.of)(S):(0,ae.D)(this.compiler.compileModuleAsync(S))))}}class Er{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,S){return M}}function Fn(O){throw O}function en(O,M,S){return M.parse("/")}function Nt(O,M){return(0,fn.of)(null)}const hn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},or={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ir=(()=>{class O{constructor(S,q,ne,_e,$e,Ne,Mt){this.rootComponentType=S,this.urlSerializer=q,this.rootContexts=ne,this.location=_e,this.config=Mt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ke.x,this.errorHandler=Fn,this.malformedUriErrorHandler=en,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Nt,afterPreactivation:Nt},this.urlHandlingStrategy=new Er,this.routeReuseStrategy=new Sn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=$e.get(g.h0i),this.console=$e.get(g.c2e);const cr=$e.get(g.R0b);this.isNgZoneEnabled=cr instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(Mt),this.currentUrlTree=function Ft(){return new Ge(new Re([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Rn($e,Ne,Or=>this.triggerEvent(new xr(Or)),Or=>this.triggerEvent(new Mr(Or))),this.routerState=Qr(this.currentUrlTree,this.rootComponentType),this.transitions=new xe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const q=this.events;return S.pipe((0,Ut.h)(ne=>0!==ne.id),(0,on.U)(ne=>Object.assign(Object.assign({},ne),{extractedUrl:this.urlHandlingStrategy.extract(ne.rawUrl)})),(0,Dn.w)(ne=>{let _e=!1,$e=!1;return(0,fn.of)(ne).pipe((0,st.b)(Ne=>{this.currentNavigation={id:Ne.id,initialUrl:Ne.currentRawUrl,extractedUrl:Ne.extractedUrl,trigger:Ne.source,extras:Ne.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Dn.w)(Ne=>{const Mt=this.browserUrlTree.toString(),jt=!this.navigated||Ne.extractedUrl.toString()!==Mt||Mt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||jt)&&this.urlHandlingStrategy.shouldProcessUrl(Ne.rawUrl))return ur(Ne.source)&&(this.browserUrlTree=Ne.extractedUrl),(0,fn.of)(Ne).pipe((0,Dn.w)(cr=>{const Or=this.transitions.getValue();return q.next(new Rt(cr.id,this.serializeUrl(cr.extractedUrl),cr.source,cr.restoredState)),Or!==this.transitions.getValue()?Ht.E:Promise.resolve(cr)}),function Q(O,M,S,q){return(0,Dn.w)(ne=>function Zs(O,M,S,q,ne){return new ko(O,M,S,q,ne).apply()}(O,M,S,ne.extractedUrl,q).pipe((0,on.U)(_e=>Object.assign(Object.assign({},ne),{urlAfterRedirects:_e}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,st.b)(cr=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:cr.urlAfterRedirects})}),function Te(O,M,S,q,ne){return(0,kt.z)(_e=>function A(O,M,S,q,ne="emptyOnly",_e="legacy"){try{const $e=new I(O,M,S,q,ne,_e).recognize();return null===$e?l(new ts):(0,fn.of)($e)}catch($e){return l($e)}}(O,M,_e.urlAfterRedirects,S(_e.urlAfterRedirects),q,ne).pipe((0,on.U)($e=>Object.assign(Object.assign({},_e),{targetSnapshot:$e}))))}(this.rootComponentType,this.config,cr=>this.serializeUrl(cr),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,st.b)(cr=>{if("eager"===this.urlUpdateStrategy){if(!cr.extras.skipLocationChange){const Bn=this.urlHandlingStrategy.merge(cr.urlAfterRedirects,cr.rawUrl);this.setBrowserUrl(Bn,cr)}this.browserUrlTree=cr.urlAfterRedirects}const Or=new lr(cr.id,this.serializeUrl(cr.extractedUrl),this.serializeUrl(cr.urlAfterRedirects),cr.targetSnapshot);q.next(Or)}));if(jt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Or,extractedUrl:Bn,source:Ys,restoredState:vr,extras:ua}=Ne,Ss=new Rt(Or,this.serializeUrl(Bn),Ys,vr);q.next(Ss);const Un=Qr(Bn,this.rootComponentType).snapshot;return(0,fn.of)(Object.assign(Object.assign({},Ne),{targetSnapshot:Un,urlAfterRedirects:Bn,extras:Object.assign(Object.assign({},ua),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ne.rawUrl,Ne.resolve(null),Ht.E}),tt(Ne=>{const{targetSnapshot:Mt,id:jt,extractedUrl:pr,rawUrl:cr,extras:{skipLocationChange:Or,replaceUrl:Bn}}=Ne;return this.hooks.beforePreactivation(Mt,{navigationId:jt,appliedUrlTree:pr,rawUrlTree:cr,skipLocationChange:!!Or,replaceUrl:!!Bn})}),(0,st.b)(Ne=>{const Mt=new Xr(Ne.id,this.serializeUrl(Ne.extractedUrl),this.serializeUrl(Ne.urlAfterRedirects),Ne.targetSnapshot);this.triggerEvent(Mt)}),(0,on.U)(Ne=>Object.assign(Object.assign({},Ne),{guards:ye(Ne.targetSnapshot,Ne.currentSnapshot,this.rootContexts)})),function qt(O,M){return(0,kt.z)(S=>{const{targetSnapshot:q,currentSnapshot:ne,guards:{canActivateChecks:_e,canDeactivateChecks:$e}}=S;return 0===$e.length&&0===_e.length?(0,fn.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function _n(O,M,S,q){return(0,ae.D)(O).pipe((0,kt.z)(ne=>function $i(O,M,S,q,ne){const _e=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!_e||0===_e.length)return(0,fn.of)(!0);const $e=_e.map(Ne=>{const Mt=Pn(Ne,M,ne);let jt;if(function Oo(O){return O&&js(O.canDeactivate)}(Mt))jt=kn(Mt.canDeactivate(O,M,S,q));else{if(!js(Mt))throw new Error("Invalid CanDeactivate guard");jt=kn(Mt(O,M,S,q))}return jt.pipe((0,Vt.P)())});return(0,fn.of)($e).pipe(Js())}(ne.component,ne.route,S,M,q)),(0,Vt.P)(ne=>!0!==ne,!0))}($e,q,ne,O).pipe((0,kt.z)(Ne=>Ne&&function Vo(O){return"boolean"==typeof O}(Ne)?function br(O,M,S,q){return(0,ae.D)(M).pipe((0,mr.b)(ne=>(0,an.z)(function ri(O,M){return null!==O&&M&&M(new rs(O)),(0,fn.of)(!0)}(ne.route.parent,q),function Xn(O,M){return null!==O&&M&&M(new dn(O)),(0,fn.of)(!0)}(ne.route,q),function yi(O,M,S){const q=M[M.length-1],_e=M.slice(0,M.length-1).reverse().map($e=>function Ye(O){const M=O.routeConfig?O.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:O,guards:M}:null}($e)).filter($e=>null!==$e).map($e=>un(()=>{const Ne=$e.guards.map(Mt=>{const jt=Pn(Mt,$e.node,S);let pr;if(function Fs(O){return O&&js(O.canActivateChild)}(jt))pr=kn(jt.canActivateChild(q,O));else{if(!js(jt))throw new Error("Invalid CanActivateChild guard");pr=kn(jt(q,O))}return pr.pipe((0,Vt.P)())});return(0,fn.of)(Ne).pipe(Js())}));return(0,fn.of)(_e).pipe(Js())}(O,ne.path,S),function _i(O,M,S){const q=M.routeConfig?M.routeConfig.canActivate:null;if(!q||0===q.length)return(0,fn.of)(!0);const ne=q.map(_e=>un(()=>{const $e=Pn(_e,M,S);let Ne;if(function Is(O){return O&&js(O.canActivate)}($e))Ne=kn($e.canActivate(M,O));else{if(!js($e))throw new Error("Invalid CanActivate guard");Ne=kn($e(M,O))}return Ne.pipe((0,Vt.P)())}));return(0,fn.of)(ne).pipe(Js())}(O,ne.route,S))),(0,Vt.P)(ne=>!0!==ne,!0))}(q,_e,O,M):(0,fn.of)(Ne)),(0,on.U)(Ne=>Object.assign(Object.assign({},S),{guardsResult:Ne})))})}(this.ngModule.injector,Ne=>this.triggerEvent(Ne)),(0,st.b)(Ne=>{if(Xs(Ne.guardsResult)){const jt=Jr(`Redirecting to "${this.serializeUrl(Ne.guardsResult)}"`);throw jt.url=Ne.guardsResult,jt}const Mt=new oi(Ne.id,this.serializeUrl(Ne.extractedUrl),this.serializeUrl(Ne.urlAfterRedirects),Ne.targetSnapshot,!!Ne.guardsResult);this.triggerEvent(Mt)}),(0,Ut.h)(Ne=>!!Ne.guardsResult||(this.restoreHistory(Ne),this.cancelNavigationTransition(Ne,""),!1)),tt(Ne=>{if(Ne.guards.canActivateChecks.length)return(0,fn.of)(Ne).pipe((0,st.b)(Mt=>{const jt=new Qn(Mt.id,this.serializeUrl(Mt.extractedUrl),this.serializeUrl(Mt.urlAfterRedirects),Mt.targetSnapshot);this.triggerEvent(jt)}),(0,Dn.w)(Mt=>{let jt=!1;return(0,fn.of)(Mt).pipe(function ze(O,M){return(0,kt.z)(S=>{const{targetSnapshot:q,guards:{canActivateChecks:ne}}=S;if(!ne.length)return(0,fn.of)(S);let _e=0;return(0,ae.D)(ne).pipe((0,mr.b)($e=>function nt(O,M,S,q){return function De(O,M,S,q){const ne=Fe(O);if(0===ne.length)return(0,fn.of)({});const _e={};return(0,ae.D)(ne).pipe((0,kt.z)($e=>function _t(O,M,S,q){const ne=Pn(O,M,q);return kn(ne.resolve?ne.resolve(M,S):ne(M,S))}(O[$e],M,S,q).pipe((0,st.b)(Ne=>{_e[$e]=Ne}))),Me(1),(0,kt.z)(()=>Fe(_e).length===ne.length?(0,fn.of)(_e):Ht.E))}(O._resolve,O,M,q).pipe((0,on.U)(_e=>(O._resolvedData=_e,O.data=Object.assign(Object.assign({},O.data),zi(O,S).resolve),null)))}($e.route,q,O,M)),(0,st.b)(()=>_e++),Me(1),(0,kt.z)($e=>_e===ne.length?(0,fn.of)(S):Ht.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,st.b)({next:()=>jt=!0,complete:()=>{jt||(this.restoreHistory(Mt),this.cancelNavigationTransition(Mt,"At least one route resolver didn't emit any value."))}}))}),(0,st.b)(Mt=>{const jt=new Wr(Mt.id,this.serializeUrl(Mt.extractedUrl),this.serializeUrl(Mt.urlAfterRedirects),Mt.targetSnapshot);this.triggerEvent(jt)}))}),tt(Ne=>{const{targetSnapshot:Mt,id:jt,extractedUrl:pr,rawUrl:cr,extras:{skipLocationChange:Or,replaceUrl:Bn}}=Ne;return this.hooks.afterPreactivation(Mt,{navigationId:jt,appliedUrlTree:pr,rawUrlTree:cr,skipLocationChange:!!Or,replaceUrl:!!Bn})}),(0,on.U)(Ne=>{const Mt=function $o(O,M,S){const q=mo(O,M._root,S?S._root:void 0);return new Xi(q,M)}(this.routeReuseStrategy,Ne.targetSnapshot,Ne.currentRouterState);return Object.assign(Object.assign({},Ne),{targetRouterState:Mt})}),(0,st.b)(Ne=>{this.currentUrlTree=Ne.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ne.urlAfterRedirects,Ne.rawUrl),this.routerState=Ne.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ne.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ne),this.browserUrlTree=Ne.urlAfterRedirects)}),((O,M,S)=>(0,on.U)(q=>(new fo(M,q.targetRouterState,q.currentRouterState,S).activate(O),q)))(this.rootContexts,this.routeReuseStrategy,Ne=>this.triggerEvent(Ne)),(0,st.b)({next(){_e=!0},complete(){_e=!0}}),function at(O){return(0,Ot.e)((M,S)=>{try{M.subscribe(S)}finally{S.add(O)}})}(()=>{var Ne;_e||$e||this.cancelNavigationTransition(ne,`Navigation ID ${ne.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ne=this.currentNavigation)||void 0===Ne?void 0:Ne.id)===ne.id&&(this.currentNavigation=null)}),(0,Tr.K)(Ne=>{if($e=!0,function Gr(O){return O&&O[zn]}(Ne)){const Mt=Xs(Ne.url);Mt||(this.navigated=!0,this.restoreHistory(ne,!0));const jt=new Gn(ne.id,this.serializeUrl(ne.extractedUrl),Ne.message);q.next(jt),Mt?setTimeout(()=>{const pr=this.urlHandlingStrategy.merge(Ne.url,this.rawUrlTree),cr={skipLocationChange:ne.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ur(ne.source)};this.scheduleNavigation(pr,"imperative",null,cr,{resolve:ne.resolve,reject:ne.reject,promise:ne.promise})},0):ne.resolve(!1)}else{this.restoreHistory(ne,!0);const Mt=new tr(ne.id,this.serializeUrl(ne.extractedUrl),Ne);q.next(Mt);try{ne.resolve(this.errorHandler(Ne))}catch(jt){ne.reject(jt)}}return Ht.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const q="popstate"===S.type?"popstate":"hashchange";"popstate"===q&&setTimeout(()=>{var ne;const _e={replaceUrl:!0},$e=(null===(ne=S.state)||void 0===ne?void 0:ne.navigationId)?S.state:null;if($e){const Mt=Object.assign({},$e);delete Mt.navigationId,delete Mt.\u0275routerPageId,0!==Object.keys(Mt).length&&(_e.state=Mt)}const Ne=this.parseUrl(S.url);this.scheduleNavigation(Ne,q,$e,_e)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){zs(S),this.config=S.map(bi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,q={}){const{relativeTo:ne,queryParams:_e,fragment:$e,queryParamsHandling:Ne,preserveFragment:Mt}=q,jt=ne||this.routerState.root,pr=Mt?this.currentUrlTree.fragment:$e;let cr=null;switch(Ne){case"merge":cr=Object.assign(Object.assign({},this.currentUrlTree.queryParams),_e);break;case"preserve":cr=this.currentUrlTree.queryParams;break;default:cr=_e||null}return null!==cr&&(cr=this.removeEmptyProps(cr)),function Ct(O,M,S,q,ne){if(0===S.length)return mn(M.root,M.root,M.root,q,ne);const _e=function ti(O){if("string"==typeof O[0]&&1===O.length&&"/"===O[0])return new Pr(!0,0,O);let M=0,S=!1;const q=O.reduce((ne,_e,$e)=>{if("object"==typeof _e&&null!=_e){if(_e.outlets){const Ne={};return Vi(_e.outlets,(Mt,jt)=>{Ne[jt]="string"==typeof Mt?Mt.split("/"):Mt}),[...ne,{outlets:Ne}]}if(_e.segmentPath)return[...ne,_e.segmentPath]}return"string"!=typeof _e?[...ne,_e]:0===$e?(_e.split("/").forEach((Ne,Mt)=>{0==Mt&&"."===Ne||(0==Mt&&""===Ne?S=!0:".."===Ne?M++:""!=Ne&&ne.push(Ne))}),ne):[...ne,_e]},[]);return new Pr(S,M,q)}(S);if(_e.toRoot())return mn(M.root,M.root,new Re([],{}),q,ne);const $e=function Ii(O,M,S){if(O.isAbsolute)return new Yi(M.root,!0,0);if(-1===S.snapshot._lastPathIndex){const _e=S.snapshot._urlSegment;return new Yi(_e,_e===M.root,0)}const q=dt(O.commands[0])?0:1;return function vs(O,M,S){let q=O,ne=M,_e=S;for(;_e>ne;){if(_e-=ne,q=q.parent,!q)throw new Error("Invalid number of '../'");ne=q.segments.length}return new Yi(q,!1,ne-_e)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+q,O.numberOfDoubleDots)}(_e,M,O),Ne=$e.processChildren?Ts($e.segmentGroup,$e.index,_e.commands):ms($e.segmentGroup,$e.index,_e.commands);return mn(M.root,$e.segmentGroup,Ne,q,ne)}(jt,this.currentUrlTree,S,cr,null!=pr?pr:null)}navigateByUrl(S,q={skipLocationChange:!1}){const ne=Xs(S)?S:this.parseUrl(S),_e=this.urlHandlingStrategy.merge(ne,this.rawUrlTree);return this.scheduleNavigation(_e,"imperative",null,q)}navigate(S,q={skipLocationChange:!1}){return function zt(O){for(let M=0;M<O.length;M++){const S=O[M];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${M}`)}}(S),this.navigateByUrl(this.createUrlTree(S,q),q)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let q;try{q=this.urlSerializer.parse(S)}catch(ne){q=this.malformedUriErrorHandler(ne,this.urlSerializer,S)}return q}isActive(S,q){let ne;if(ne=!0===q?Object.assign({},hn):!1===q?Object.assign({},or):q,Xs(S))return Ur(this.currentUrlTree,S,ne);const _e=this.parseUrl(S);return Ur(this.currentUrlTree,_e,ne)}removeEmptyProps(S){return Object.keys(S).reduce((q,ne)=>{const _e=S[ne];return null!=_e&&(q[ne]=_e),q},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new tn(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,q,ne,_e,$e){var Ne,Mt;if(this.disposed)return Promise.resolve(!1);let jt,pr,cr;$e?(jt=$e.resolve,pr=$e.reject,cr=$e.promise):cr=new Promise((Ys,vr)=>{jt=Ys,pr=vr});const Or=++this.navigationId;let Bn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ne=this.location.getState()),Bn=ne&&ne.\u0275routerPageId?ne.\u0275routerPageId:_e.replaceUrl||_e.skipLocationChange?null!==(Ne=this.browserPageId)&&void 0!==Ne?Ne:0:(null!==(Mt=this.browserPageId)&&void 0!==Mt?Mt:0)+1):Bn=0,this.setTransition({id:Or,targetPageId:Bn,source:q,restoredState:ne,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:_e,resolve:jt,reject:pr,promise:cr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),cr.catch(Ys=>Promise.reject(Ys))}setBrowserUrl(S,q){const ne=this.urlSerializer.serialize(S),_e=Object.assign(Object.assign({},q.extras.state),this.generateNgRouterState(q.id,q.targetPageId));this.location.isCurrentPathEqualTo(ne)||q.extras.replaceUrl?this.location.replaceState(ne,"",_e):this.location.go(ne,"",_e)}restoreHistory(S,q=!1){var ne,_e;if("computed"===this.canceledNavigationResolution){const $e=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.finalUrl)||0===$e?this.currentUrlTree===(null===(_e=this.currentNavigation)||void 0===_e?void 0:_e.finalUrl)&&0===$e&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($e)}else"replace"===this.canceledNavigationResolution&&(q&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,q){const ne=new Gn(S.id,this.serializeUrl(S.extractedUrl),q);this.triggerEvent(ne),S.resolve(!1)}generateNgRouterState(S,q){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:q}:{navigationId:S}}}return O.\u0275fac=function(S){g.$Z()},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})();function ur(O){return"imperative"!==O}let Jn=(()=>{class O{constructor(S,q,ne,_e,$e){this.router=S,this.route=q,this.tabIndexAttribute=ne,this.renderer=_e,this.el=$e,this.commands=null,this.onChanges=new ke.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(S){if(null!=this.tabIndexAttribute)return;const q=this.renderer,ne=this.el.nativeElement;null!==S?q.setAttribute(ne,"tabindex",S):q.removeAttribute(ne,"tabindex")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const S={skipLocationChange:Ai(this.skipLocationChange),replaceUrl:Ai(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,S),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ai(this.preserveFragment)})}}return O.\u0275fac=function(S){return new(S||O)(g.Y36(ir),g.Y36(Ks),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},O.\u0275dir=g.lG2({type:O,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,q){1&S&&g.NdJ("click",function(){return q.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),O})(),vi=(()=>{class O{constructor(S,q,ne){this.router=S,this.route=q,this.locationStrategy=ne,this.commands=null,this.href=null,this.onChanges=new ke.x,this.subscription=S.events.subscribe(_e=>{_e instanceof tn&&this.updateTargetUrlAndHref()})}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:null}ngOnChanges(S){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(S,q,ne,_e,$e){if(0!==S||q||ne||_e||$e||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Ne={skipLocationChange:Ai(this.skipLocationChange),replaceUrl:Ai(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ne),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ai(this.preserveFragment)})}}return O.\u0275fac=function(S){return new(S||O)(g.Y36(ir),g.Y36(Ks),g.Y36(ut.S$))},O.\u0275dir=g.lG2({type:O,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(S,q){1&S&&g.NdJ("click",function(_e){return q.onClick(_e.button,_e.ctrlKey,_e.shiftKey,_e.altKey,_e.metaKey)}),2&S&&g.uIk("target",q.target)("href",q.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),O})();function Ai(O){return""===O||!!O}class C{}class k{preload(M,S){return(0,fn.of)(null)}}let ue=(()=>{class O{constructor(S,q,ne,_e){this.router=S,this.injector=ne,this.preloadingStrategy=_e,this.loader=new Rn(ne,q,Mt=>S.triggerEvent(new xr(Mt)),Mt=>S.triggerEvent(new Mr(Mt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ut.h)(S=>S instanceof tn),(0,mr.b)(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(g.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,q){const ne=[];for(const _e of q)if(_e.loadChildren&&!_e.canLoad&&_e._loadedConfig){const $e=_e._loadedConfig;ne.push(this.processRoutes($e.module,$e.routes))}else _e.loadChildren&&!_e.canLoad?ne.push(this.preloadConfig(S,_e)):_e.children&&ne.push(this.processRoutes(S,_e.children));return(0,ae.D)(ne).pipe((0,Dt.J)(),(0,on.U)(_e=>{}))}preloadConfig(S,q){return this.preloadingStrategy.preload(q,()=>(q._loadedConfig?(0,fn.of)(q._loadedConfig):this.loader.load(S.injector,q)).pipe((0,kt.z)(_e=>(q._loadedConfig=_e,this.processRoutes(_e.module,_e.routes)))))}}return O.\u0275fac=function(S){return new(S||O)(g.LFG(ir),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(C))},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})(),Se=(()=>{class O{constructor(S,q,ne={}){this.router=S,this.viewportScroller=q,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof Rt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof tn&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof ct&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,q){this.router.triggerEvent(new ct(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,q))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return O.\u0275fac=function(S){g.$Z()},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})();const Be=new g.OlP("ROUTER_CONFIGURATION"),It=new g.OlP("ROUTER_FORROOT_GUARD"),Qt=[ut.Ye,{provide:qn,useClass:ci},{provide:ir,useFactory:function jn(O,M,S,q,ne,_e,$e={},Ne,Mt){const jt=new ir(null,O,M,S,q,ne,On(_e));return Ne&&(jt.urlHandlingStrategy=Ne),Mt&&(jt.routeReuseStrategy=Mt),function sr(O,M){O.errorHandler&&(M.errorHandler=O.errorHandler),O.malformedUriErrorHandler&&(M.malformedUriErrorHandler=O.malformedUriErrorHandler),O.onSameUrlNavigation&&(M.onSameUrlNavigation=O.onSameUrlNavigation),O.paramsInheritanceStrategy&&(M.paramsInheritanceStrategy=O.paramsInheritanceStrategy),O.relativeLinkResolution&&(M.relativeLinkResolution=O.relativeLinkResolution),O.urlUpdateStrategy&&(M.urlUpdateStrategy=O.urlUpdateStrategy),O.canceledNavigationResolution&&(M.canceledNavigationResolution=O.canceledNavigationResolution)}($e,jt),$e.enableTracing&&jt.events.subscribe(pr=>{var cr,Or;null===(cr=console.group)||void 0===cr||cr.call(console,`Router Event: ${pr.constructor.name}`),console.log(pr.toString()),console.log(pr),null===(Or=console.groupEnd)||void 0===Or||Or.call(console)}),jt},deps:[qn,ki,ut.Ye,g.zs3,g.Sil,gn,Be,[class er{},new g.FiY],[class yt{},new g.FiY]]},ki,{provide:Ks,useFactory:function ao(O){return O.routerState.root},deps:[ir]},ue,k,class T{preload(M,S){return S().pipe((0,Tr.K)(()=>(0,fn.of)(null)))}},{provide:Be,useValue:{enableTracing:!1}}];function ar(){return new g.PXZ("Router",ir)}let Nr=(()=>{class O{constructor(S,q){}static forRoot(S,q){return{ngModule:O,providers:[Qt,li(S),{provide:It,useFactory:hr,deps:[[ir,new g.FiY,new g.tp0]]},{provide:Be,useValue:q||{}},{provide:ut.S$,useFactory:Sr,deps:[ut.lw,[new g.tBr(ut.mr),new g.FiY],Be]},{provide:Se,useFactory:Jt,deps:[ir,ut.EM,Be]},{provide:C,useExisting:q&&q.preloadingStrategy?q.preloadingStrategy:k},{provide:g.PXZ,multi:!0,useFactory:ar},[Kn,{provide:g.ip1,multi:!0,useFactory:$t,deps:[Kn]},{provide:ps,useFactory:An,deps:[Kn]},{provide:g.tb,multi:!0,useExisting:ps}]]}}static forChild(S){return{ngModule:O,providers:[li(S)]}}}return O.\u0275fac=function(S){return new(S||O)(g.LFG(It,8),g.LFG(ir,8))},O.\u0275mod=g.oAB({type:O}),O.\u0275inj=g.cJS({}),O})();function Jt(O,M,S){return S.scrollOffset&&M.setOffset(S.scrollOffset),new Se(O,M,S)}function Sr(O,M,S={}){return S.useHash?new ut.Do(O,M):new ut.b0(O,M)}function hr(O){return"guarded"}function li(O){return[{provide:g.deG,multi:!0,useValue:O},{provide:gn,multi:!0,useValue:O}]}let Kn=(()=>{class O{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ke.x}appInitializer(){return this.injector.get(ut.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let q=null;const ne=new Promise(Ne=>q=Ne),_e=this.injector.get(ir),$e=this.injector.get(Be);return"disabled"===$e.initialNavigation?(_e.setUpLocationChangeListener(),q(!0)):"enabled"===$e.initialNavigation||"enabledBlocking"===$e.initialNavigation?(_e.hooks.afterPreactivation=()=>this.initNavigation?(0,fn.of)(null):(this.initNavigation=!0,q(!0),this.resultOfPreactivationDone),_e.initialNavigation()):q(!0),ne})}bootstrapListener(S){const q=this.injector.get(Be),ne=this.injector.get(ue),_e=this.injector.get(Se),$e=this.injector.get(ir),Ne=this.injector.get(g.z2F);S===Ne.components[0]&&(("enabledNonBlocking"===q.initialNavigation||void 0===q.initialNavigation)&&$e.initialNavigation(),ne.setUpPreloading(),_e.init(),$e.resetRootComponentType(Ne.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return O.\u0275fac=function(S){return new(S||O)(g.LFG(g.zs3))},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac}),O})();function $t(O){return O.appInitializer.bind(O)}function An(O){return O.bootstrapListener.bind(O)}const ps=new g.OlP("Router Initializer")},3942:(Wn,At,j)=>{j.d(At,{Z:()=>un});var g=j(2090),F=j(4859),pe=j(9681),ae=j(1877);class We{constructor(Ot,Zt){this._delegate=Ot,this.firebase=Zt,(0,pe._addComponent)(Ot,new F.wA("app-compat",()=>this,"PUBLIC")),this.container=Ot.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ot){this._delegate.automaticDataCollectionEnabled=Ot}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ot=>{this._delegate.checkDestroyed(),Ot()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,pe.deleteApp)(this._delegate)))}_getService(Ot,Zt=pe._DEFAULT_ENTRY_NAME){var Ln;this._delegate.checkDestroyed();const fn=this._delegate.container.getProvider(Ot);return!fn.isInitialized()&&"EXPLICIT"===(null===(Ln=fn.getComponent())||void 0===Ln?void 0:Ln.instantiationMode)&&fn.initialize(),fn.getImmediate({identifier:Zt})}_removeServiceInstance(Ot,Zt=pe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ot).clearInstance(Zt)}_addComponent(Ot){(0,pe._addComponent)(this._delegate,Ot)}_addOrOverwriteComponent(Ot){(0,pe._addOrOverwriteComponent)(this._delegate,Ot)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pt=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Oe=function ht(){const In=function Ze(In){const Ot={},Zt={__esModule:!0,initializeApp:function xe(Ht,ke={}){const Ut=pe.initializeApp(Ht,ke);if((0,g.r3)(Ot,Ut.name))return Ot[Ut.name];const Me=new In(Ut,Zt);return Ot[Ut.name]=Me,Me},app:fn,registerVersion:pe.registerVersion,setLogLevel:pe.setLogLevel,onLog:pe.onLog,apps:null,SDK_VERSION:pe.SDK_VERSION,INTERNAL:{registerComponent:function St(Ht){const ke=Ht.name,Ut=ke.replace("-compat","");if(pe._registerComponent(Ht)&&"PUBLIC"===Ht.type){const Me=(Tt=fn())=>{if("function"!=typeof Tt[Ut])throw pt.create("invalid-app-argument",{appName:ke});return Tt[Ut]()};void 0!==Ht.serviceProps&&(0,g.ZB)(Me,Ht.serviceProps),Zt[Ut]=Me,In.prototype[Ut]=function(...Tt){return this._getService.bind(this,ke).apply(this,Ht.multipleInstances?Tt:[])}}return"PUBLIC"===Ht.type?Zt[Ut]:null},removeApp:function Ln(Ht){delete Ot[Ht]},useAsService:function an(Ht,ke){return"serverAuth"===ke?null:ke},modularAPIs:pe}};function fn(Ht){if(!(0,g.r3)(Ot,Ht=Ht||pe._DEFAULT_ENTRY_NAME))throw pt.create("no-app",{appName:Ht});return Ot[Ht]}return Zt.default=Zt,Object.defineProperty(Zt,"apps",{get:function He(){return Object.keys(Ot).map(Ht=>Ot[Ht])}}),fn.App=In,Zt}(We);return In.INTERNAL=Object.assign(Object.assign({},In.INTERNAL),{createFirebaseNamespace:ht,extendNamespace:function Ot(Zt){(0,g.ZB)(In,Zt)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),In}(),Pe=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){Pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const In=self.firebase.SDK_VERSION;In&&In.indexOf("LITE")>=0&&Pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const un=Oe;!function vt(In){(0,pe.registerVersion)("@firebase/app-compat","0.2.0",In)}()},9681:(Wn,At,j)=>{j.r(At),j.d(At,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>tr,_DEFAULT_ENTRY_NAME:()=>rr,_addComponent:()=>Vt,_addOrOverwriteComponent:()=>kt,_apps:()=>Tr,_clearComponents:()=>Yt,_components:()=>mr,_getProvider:()=>Dt,_registerComponent:()=>st,_removeServiceInstance:()=>ut,deleteApp:()=>Qn,getApp:()=>Xr,getApps:()=>oi,initializeApp:()=>lr,onLog:()=>Mr,registerVersion:()=>xr,setLogLevel:()=>rs});var g=j(5861),F=j(4859),pe=j(1877),ae=j(2090),We=j(8766);class Xe{constructor(Ft){this.container=Ft}getPlatformInfoString(){return this.container.getProviders().map(Yn=>{if(function pt(kn){const Ft=kn.getComponent();return"VERSION"===(null==Ft?void 0:Ft.type)}(Yn)){const Rr=Yn.getImmediate();return`${Rr.library}/${Rr.version}`}return null}).filter(Yn=>Yn).join(" ")}}const Ze="@firebase/app",Oe=new pe.Yd("@firebase/app"),rr="[DEFAULT]",yn={[Ze]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tr=new Map,mr=new Map;function Vt(kn,Ft){try{kn.container.addComponent(Ft)}catch(Yn){Oe.debug(`Component ${Ft.name} failed to register with FirebaseApp ${kn.name}`,Yn)}}function kt(kn,Ft){kn.container.addOrOverwriteComponent(Ft)}function st(kn){const Ft=kn.name;if(mr.has(Ft))return Oe.debug(`There were multiple attempts to register component ${Ft}.`),!1;mr.set(Ft,kn);for(const Yn of Tr.values())Vt(Yn,kn);return!0}function Dt(kn,Ft){const Yn=kn.container.getProvider("heartbeat").getImmediate({optional:!0});return Yn&&Yn.triggerHeartbeat(),kn.container.getProvider(Ft)}function ut(kn,Ft,Yn=rr){Dt(kn,Ft).clearInstance(Yn)}function Yt(){mr.clear()}const tn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gn{constructor(Ft,Yn,Rr){this._isDeleted=!1,this._options=Object.assign({},Ft),this._config=Object.assign({},Yn),this._name=Yn.name,this._automaticDataCollectionEnabled=Yn.automaticDataCollectionEnabled,this._container=Rr,this.container.addComponent(new F.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ft){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ft}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ft){this._isDeleted=Ft}checkDestroyed(){if(this.isDeleted)throw tn.create("app-deleted",{appName:this._name})}}const tr="9.15.0";function lr(kn,Ft={}){let Yn=kn;"object"!=typeof Ft&&(Ft={name:Ft});const Rr=Object.assign({name:rr,automaticDataCollectionEnabled:!1},Ft),Ur=Rr.name;if("string"!=typeof Ur||!Ur)throw tn.create("bad-app-name",{appName:String(Ur)});if(Yn||(Yn=(0,ae.aH)()),!Yn)throw tn.create("no-options");const $r=Tr.get(Ur);if($r){if((0,ae.vZ)(Yn,$r.options)&&(0,ae.vZ)(Rr,$r.config))return $r;throw tn.create("duplicate-app",{appName:Ur})}const Je=new F.H0(Ur);for(const ft of mr.values())Je.addComponent(ft);const Ue=new Gn(Yn,Rr,Je);return Tr.set(Ur,Ue),Ue}function Xr(kn=rr){const Ft=Tr.get(kn);if(!Ft&&kn===rr)return lr();if(!Ft)throw tn.create("no-app",{appName:kn});return Ft}function oi(){return Array.from(Tr.values())}function Qn(kn){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(kn){const Ft=kn.name;Tr.has(Ft)&&(Tr.delete(Ft),yield Promise.all(kn.container.getProviders().map(Yn=>Yn.delete())),kn.isDeleted=!0)})).apply(this,arguments)}function xr(kn,Ft,Yn){var Rr;let Ur=null!==(Rr=yn[kn])&&void 0!==Rr?Rr:kn;Yn&&(Ur+=`-${Yn}`);const $r=Ur.match(/\s|\//),Je=Ft.match(/\s|\//);if($r||Je){const Ue=[`Unable to register library "${Ur}" with version "${Ft}":`];return $r&&Ue.push(`library name "${Ur}" contains illegal characters (whitespace or "/")`),$r&&Je&&Ue.push("and"),Je&&Ue.push(`version name "${Ft}" contains illegal characters (whitespace or "/")`),void Oe.warn(Ue.join(" "))}st(new F.wA(`${Ur}-version`,()=>({library:Ur,version:Ft}),"VERSION"))}function Mr(kn,Ft){if(null!==kn&&"function"!=typeof kn)throw tn.create("invalid-log-argument");(0,pe.Am)(kn,Ft)}function rs(kn){(0,pe.Ub)(kn)}const rt="firebase-heartbeat-store";let ct=null;function Gt(){return ct||(ct=(0,We.X3)("firebase-heartbeat-database",1,{upgrade:(kn,Ft)=>{0===Ft&&kn.createObjectStore(rt)}}).catch(kn=>{throw tn.create("idb-open",{originalErrorMessage:kn.message})})),ct}function bn(){return(bn=(0,g.Z)(function*(kn){try{return(yield Gt()).transaction(rt).objectStore(rt).get(Gr(kn))}catch(Ft){if(Ft instanceof ae.ZR)Oe.warn(Ft.message);else{const Yn=tn.create("idb-get",{originalErrorMessage:null==Ft?void 0:Ft.message});Oe.warn(Yn.message)}}})).apply(this,arguments)}function zn(kn,Ft){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(kn,Ft){try{const Rr=(yield Gt()).transaction(rt,"readwrite");return yield Rr.objectStore(rt).put(Ft,Gr(kn)),Rr.done}catch(Yn){if(Yn instanceof ae.ZR)Oe.warn(Yn.message);else{const Rr=tn.create("idb-set",{originalErrorMessage:null==Yn?void 0:Yn.message});Oe.warn(Rr.message)}}})).apply(this,arguments)}function Gr(kn){return`${kn.name}!${kn.options.appId}`}class Li{constructor(Ft){this.container=Ft,this._heartbeatsCache=null;const Yn=this.container.getProvider("app").getImmediate();this._storage=new Si(Yn),this._heartbeatsCachePromise=this._storage.read().then(Rr=>(this._heartbeatsCache=Rr,Rr))}triggerHeartbeat(){var Ft=this;return(0,g.Z)(function*(){const Rr=Ft.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ur=ui();if(null===Ft._heartbeatsCache&&(Ft._heartbeatsCache=yield Ft._heartbeatsCachePromise),Ft._heartbeatsCache.lastSentHeartbeatDate!==Ur&&!Ft._heartbeatsCache.heartbeats.some($r=>$r.date===Ur))return Ft._heartbeatsCache.heartbeats.push({date:Ur,agent:Rr}),Ft._heartbeatsCache.heartbeats=Ft._heartbeatsCache.heartbeats.filter($r=>{const Je=new Date($r.date).valueOf();return Date.now()-Je<=2592e6}),Ft._storage.overwrite(Ft._heartbeatsCache)})()}getHeartbeatsHeader(){var Ft=this;return(0,g.Z)(function*(){if(null===Ft._heartbeatsCache&&(yield Ft._heartbeatsCachePromise),null===Ft._heartbeatsCache||0===Ft._heartbeatsCache.heartbeats.length)return"";const Yn=ui(),{heartbeatsToSend:Rr,unsentEntries:Ur}=function On(kn,Ft=1024){const Yn=[];let Rr=kn.slice();for(const Ur of kn){const $r=Yn.find(Je=>Je.agent===Ur.agent);if($r){if($r.dates.push(Ur.date),Vr(Yn)>Ft){$r.dates.pop();break}}else if(Yn.push({agent:Ur.agent,dates:[Ur.date]}),Vr(Yn)>Ft){Yn.pop();break}Rr=Rr.slice(1)}return{heartbeatsToSend:Yn,unsentEntries:Rr}}(Ft._heartbeatsCache.heartbeats),$r=(0,ae.L)(JSON.stringify({version:2,heartbeats:Rr}));return Ft._heartbeatsCache.lastSentHeartbeatDate=Yn,Ur.length>0?(Ft._heartbeatsCache.heartbeats=Ur,yield Ft._storage.overwrite(Ft._heartbeatsCache)):(Ft._heartbeatsCache.heartbeats=[],Ft._storage.overwrite(Ft._heartbeatsCache)),$r})()}}function ui(){return(new Date).toISOString().substring(0,10)}class Si{constructor(Ft){this.app=Ft,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ft=this;return(0,g.Z)(function*(){return(yield Ft._canUseIndexedDBPromise)&&(yield function rn(kn){return bn.apply(this,arguments)}(Ft.app))||{heartbeats:[]}})()}overwrite(Ft){var Yn=this;return(0,g.Z)(function*(){var Rr;if(yield Yn._canUseIndexedDBPromise){const $r=yield Yn.read();return zn(Yn.app,{lastSentHeartbeatDate:null!==(Rr=Ft.lastSentHeartbeatDate)&&void 0!==Rr?Rr:$r.lastSentHeartbeatDate,heartbeats:Ft.heartbeats})}})()}add(Ft){var Yn=this;return(0,g.Z)(function*(){var Rr;if(yield Yn._canUseIndexedDBPromise){const $r=yield Yn.read();return zn(Yn.app,{lastSentHeartbeatDate:null!==(Rr=Ft.lastSentHeartbeatDate)&&void 0!==Rr?Rr:$r.lastSentHeartbeatDate,heartbeats:[...$r.heartbeats,...Ft.heartbeats]})}})()}}function Vr(kn){return(0,ae.L)(JSON.stringify({version:2,heartbeats:kn})).length}!function Vi(kn){st(new F.wA("platform-logger",Ft=>new Xe(Ft),"PRIVATE")),st(new F.wA("heartbeat",Ft=>new Li(Ft),"PRIVATE")),xr(Ze,"0.9.0",kn),xr(Ze,"0.9.0","esm2017"),xr("fire-js","")}("")},4859:(Wn,At,j)=>{j.d(At,{H0:()=>Ze,wA:()=>pe});var g=j(5861),F=j(2090);class pe{constructor(Oe,Pe,Et){this.name=Oe,this.instanceFactory=Pe,this.type=Et,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Oe){return this.instantiationMode=Oe,this}setMultipleInstances(Oe){return this.multipleInstances=Oe,this}setServiceProps(Oe){return this.serviceProps=Oe,this}setInstanceCreatedCallback(Oe){return this.onInstanceCreated=Oe,this}}const ae="[DEFAULT]";class We{constructor(Oe,Pe){this.name=Oe,this.container=Pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Oe){const Pe=this.normalizeInstanceIdentifier(Oe);if(!this.instancesDeferred.has(Pe)){const Et=new F.BH;if(this.instancesDeferred.set(Pe,Et),this.isInitialized(Pe)||this.shouldAutoInitialize())try{const Cn=this.getOrInitializeService({instanceIdentifier:Pe});Cn&&Et.resolve(Cn)}catch(Cn){}}return this.instancesDeferred.get(Pe).promise}getImmediate(Oe){var Pe;const Et=this.normalizeInstanceIdentifier(null==Oe?void 0:Oe.identifier),Cn=null!==(Pe=null==Oe?void 0:Oe.optional)&&void 0!==Pe&&Pe;if(!this.isInitialized(Et)&&!this.shouldAutoInitialize()){if(Cn)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Et})}catch(vt){if(Cn)return null;throw vt}}getComponent(){return this.component}setComponent(Oe){if(Oe.name!==this.name)throw Error(`Mismatching Component ${Oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Oe,this.shouldAutoInitialize()){if(function pt(ht){return"EAGER"===ht.instantiationMode}(Oe))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(Pe){}for(const[Pe,Et]of this.instancesDeferred.entries()){const Cn=this.normalizeInstanceIdentifier(Pe);try{const vt=this.getOrInitializeService({instanceIdentifier:Cn});Et.resolve(vt)}catch(vt){}}}}clearInstance(Oe=ae){this.instancesDeferred.delete(Oe),this.instancesOptions.delete(Oe),this.instances.delete(Oe)}delete(){var Oe=this;return(0,g.Z)(function*(){const Pe=Array.from(Oe.instances.values());yield Promise.all([...Pe.filter(Et=>"INTERNAL"in Et).map(Et=>Et.INTERNAL.delete()),...Pe.filter(Et=>"_delete"in Et).map(Et=>Et._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Oe=ae){return this.instances.has(Oe)}getOptions(Oe=ae){return this.instancesOptions.get(Oe)||{}}initialize(Oe={}){const{options:Pe={}}=Oe,Et=this.normalizeInstanceIdentifier(Oe.instanceIdentifier);if(this.isInitialized(Et))throw Error(`${this.name}(${Et}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Cn=this.getOrInitializeService({instanceIdentifier:Et,options:Pe});for(const[vt,un]of this.instancesDeferred.entries())Et===this.normalizeInstanceIdentifier(vt)&&un.resolve(Cn);return Cn}onInit(Oe,Pe){var Et;const Cn=this.normalizeInstanceIdentifier(Pe),vt=null!==(Et=this.onInitCallbacks.get(Cn))&&void 0!==Et?Et:new Set;vt.add(Oe),this.onInitCallbacks.set(Cn,vt);const un=this.instances.get(Cn);return un&&Oe(un,Cn),()=>{vt.delete(Oe)}}invokeOnInitCallbacks(Oe,Pe){const Et=this.onInitCallbacks.get(Pe);if(Et)for(const Cn of Et)try{Cn(Oe,Pe)}catch(vt){}}getOrInitializeService({instanceIdentifier:Oe,options:Pe={}}){let Et=this.instances.get(Oe);if(!Et&&this.component&&(Et=this.component.instanceFactory(this.container,{instanceIdentifier:(ht=Oe,ht===ae?void 0:ht),options:Pe}),this.instances.set(Oe,Et),this.instancesOptions.set(Oe,Pe),this.invokeOnInitCallbacks(Et,Oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Oe,Et)}catch(Cn){}var ht;return Et||null}normalizeInstanceIdentifier(Oe=ae){return this.component?this.component.multipleInstances?Oe:ae:Oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ze{constructor(Oe){this.name=Oe,this.providers=new Map}addComponent(Oe){const Pe=this.getProvider(Oe.name);if(Pe.isComponentSet())throw new Error(`Component ${Oe.name} has already been registered with ${this.name}`);Pe.setComponent(Oe)}addOrOverwriteComponent(Oe){this.getProvider(Oe.name).isComponentSet()&&this.providers.delete(Oe.name),this.addComponent(Oe)}getProvider(Oe){if(this.providers.has(Oe))return this.providers.get(Oe);const Pe=new We(Oe,this);return this.providers.set(Oe,Pe),Pe}getProviders(){return Array.from(this.providers.values())}}},1877:(Wn,At,j)=>{j.d(At,{Am:()=>ht,Ub:()=>Ze,Yd:()=>pt,in:()=>F});const g=[];var F=(()=>{return(Oe=F||(F={}))[Oe.DEBUG=0]="DEBUG",Oe[Oe.VERBOSE=1]="VERBOSE",Oe[Oe.INFO=2]="INFO",Oe[Oe.WARN=3]="WARN",Oe[Oe.ERROR=4]="ERROR",Oe[Oe.SILENT=5]="SILENT",F;var Oe})();const pe={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},ae=F.INFO,We={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},Xe=(Oe,Pe,...Et)=>{if(Pe<Oe.logLevel)return;const Cn=(new Date).toISOString(),vt=We[Pe];if(!vt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Pe})`);console[vt](`[${Cn}]  ${Oe.name}:`,...Et)};class pt{constructor(Pe){this.name=Pe,this._logLevel=ae,this._logHandler=Xe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(Pe){if(!(Pe in F))throw new TypeError(`Invalid value "${Pe}" assigned to \`logLevel\``);this._logLevel=Pe}setLogLevel(Pe){this._logLevel="string"==typeof Pe?pe[Pe]:Pe}get logHandler(){return this._logHandler}set logHandler(Pe){if("function"!=typeof Pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(Pe){this._userLogHandler=Pe}debug(...Pe){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...Pe),this._logHandler(this,F.DEBUG,...Pe)}log(...Pe){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...Pe),this._logHandler(this,F.VERBOSE,...Pe)}info(...Pe){this._userLogHandler&&this._userLogHandler(this,F.INFO,...Pe),this._logHandler(this,F.INFO,...Pe)}warn(...Pe){this._userLogHandler&&this._userLogHandler(this,F.WARN,...Pe),this._logHandler(this,F.WARN,...Pe)}error(...Pe){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...Pe),this._logHandler(this,F.ERROR,...Pe)}}function Ze(Oe){g.forEach(Pe=>{Pe.setLogLevel(Oe)})}function ht(Oe,Pe){for(const Et of g){let Cn=null;Pe&&Pe.level&&(Cn=pe[Pe.level]),Et.userLogHandler=null===Oe?null:(vt,un,...In)=>{const Ot=In.map(Zt=>{if(null==Zt)return null;if("string"==typeof Zt)return Zt;if("number"==typeof Zt||"boolean"==typeof Zt)return Zt.toString();if(Zt instanceof Error)return Zt.message;try{return JSON.stringify(Zt)}catch(Ln){return null}}).filter(Zt=>Zt).join(" ");un>=(null!=Cn?Cn:vt.logLevel)&&Oe({level:F[un].toLowerCase(),message:Ot,args:In,type:vt.name})}}}},259:(Wn,At,j)=>{j.d(At,{C6:()=>g.getApps,Mq:()=>g.getApp,ZF:()=>g.initializeApp});var g=j(9681);(0,g.registerVersion)("firebase","9.15.0","app")},9260:(Wn,At,j)=>{j.d(At,{Z:()=>g.Z});var g=j(3942);g.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(Wn,At,j)=>{j.r(At);var g=j(5861),F=j(3942),pe=j(2090),ae=j(9681),We=j(1877),Xe=j(655),pt=j(4859);const un=function Cn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},In=function vt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ot=new pe.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ln=new We.Yd("@firebase/auth");function fn(b,...p){Ln.logLevel<=We.in.ERROR&&Ln.error(`Auth (${ae.SDK_VERSION}): ${b}`,...p)}function xe(b,...p){throw Ht(b,...p)}function He(b,...p){return Ht(b,...p)}function St(b,p,y){const D=Object.assign(Object.assign({},In()),{[p]:y});return new pe.LL("auth","Firebase",D).create(p,{appName:b.name})}function an(b,p,y){if(!(p instanceof y))throw y.name!==p.constructor.name&&xe(b,"argument-error"),St(b,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ht(b,...p){if("string"!=typeof b){const y=p[0],D=[...p.slice(1)];return D[0]&&(D[0].appName=b.name),b._errorFactory.create(y,...D)}return Ot.create(b,...p)}function ke(b,p,...y){if(!b)throw Ht(p,...y)}function Ut(b){const p="INTERNAL ASSERTION FAILED: "+b;throw fn(p),new Error(p)}function Me(b,p){b||Ut(p)}const Tt=new Map;function et(b){Me(b instanceof Function,"Expected a class definition");let p=Tt.get(b);return p?(Me(p instanceof b,"Instance stored in cache mismatched with class"),p):(p=new b,Tt.set(b,p),p)}function on(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Dn(){return"http:"===nr()||"https:"===nr()}function nr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Tr{constructor(p,y){this.shortDelay=p,this.longDelay=y,Me(y>p,"Short delay should be less than long delay!"),this.isMobile=(0,pe.uI)()||(0,pe.b$)()}get(){return function rr(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Dn()||(0,pe.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mr(b,p){Me(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return p?`${y}${p.startsWith("/")?p.slice(1):p}`:y}class Vt{static initialize(p,y,D){this.fetchImpl=p,y&&(this.headersImpl=y),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},st=new Tr(3e4,6e4);function Dt(b,p){return b.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:b.tenantId}):p}function ut(b,p,y,D){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,g.Z)(function*(b,p,y,D,re={}){return Rt(b,re,(0,g.Z)(function*(){let Ee={},bt={};D&&("GET"===p?bt=D:Ee={body:JSON.stringify(D)});const pn=(0,pe.xO)(Object.assign({key:b.config.apiKey},bt)).slice(1),dr=yield b._getAdditionalHeaders();return dr["Content-Type"]="application/json",b.languageCode&&(dr["X-Firebase-Locale"]=b.languageCode),Vt.fetch()(lr(b,b.config.apiHost,y,pn),Object.assign({method:p,headers:dr,referrerPolicy:"no-referrer"},Ee))}))})).apply(this,arguments)}function Rt(b,p,y){return tn.apply(this,arguments)}function tn(){return(tn=(0,g.Z)(function*(b,p,y){b._canInitEmulator=!1;const D=Object.assign(Object.assign({},kt),p);try{const re=new Xr(b),Ee=yield Promise.race([y(),re.promise]);re.clearNetworkTimeout();const bt=yield Ee.json();if("needConfirmation"in bt)throw oi(b,"account-exists-with-different-credential",bt);if(Ee.ok&&!("errorMessage"in bt))return bt;{const pn=Ee.ok?bt.errorMessage:bt.error.message,[dr,Lr]=pn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===dr)throw oi(b,"credential-already-in-use",bt);if("EMAIL_EXISTS"===dr)throw oi(b,"email-already-in-use",bt);if("USER_DISABLED"===dr)throw oi(b,"user-disabled",bt);const Ci=D[dr]||dr.toLowerCase().replace(/[_\s]+/g,"-");if(Lr)throw St(b,Ci,Lr);xe(b,Ci)}}catch(re){if(re instanceof pe.ZR)throw re;xe(b,"network-request-failed")}})).apply(this,arguments)}function Gn(b,p,y,D){return tr.apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(b,p,y,D,re={}){const Ee=yield ut(b,p,y,D,re);return"mfaPendingCredential"in Ee&&xe(b,"multi-factor-auth-required",{_serverResponse:Ee}),Ee})).apply(this,arguments)}function lr(b,p,y,D){const re=`${p}${y}?${D}`;return b.config.emulator?mr(b.config,re):`${b.config.apiScheme}://${re}`}class Xr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((y,D)=>{this.timer=setTimeout(()=>D(He(this.auth,"network-request-failed")),st.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function oi(b,p,y){const D={appName:b.name};y.email&&(D.email=y.email),y.phoneNumber&&(D.phoneNumber=y.phoneNumber);const re=He(b,p,D);return re.customData._tokenResponse=y,re}function Wr(){return(Wr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function xr(b,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function rs(b,p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function dn(b){if(b)try{const p=new Date(Number(b));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Gt(){return(Gt=(0,g.Z)(function*(b,p=!1){const y=(0,pe.m9)(b),D=yield y.getIdToken(p),re=bn(D);ke(re&&re.exp&&re.auth_time&&re.iat,y.auth,"internal-error");const Ee="object"==typeof re.firebase?re.firebase:void 0,bt=null==Ee?void 0:Ee.sign_in_provider;return{claims:re,token:D,authTime:dn(rn(re.auth_time)),issuedAtTime:dn(rn(re.iat)),expirationTime:dn(rn(re.exp)),signInProvider:bt||null,signInSecondFactor:(null==Ee?void 0:Ee.sign_in_second_factor)||null}})).apply(this,arguments)}function rn(b){return 1e3*Number(b)}function bn(b){const[p,y,D]=b.split(".");if(void 0===p||void 0===y||void 0===D)return fn("JWT malformed, contained fewer than 3 sections"),null;try{const re=(0,pe.tV)(y);return re?JSON.parse(re):(fn("Failed to decode base64 JWT payload"),null)}catch(re){return fn("Caught error parsing JWT payload as JSON",null==re?void 0:re.toString()),null}}function Jr(b,p){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(b,p,y=!1){if(y)return p;try{return yield p}catch(D){throw D instanceof pe.ZR&&Br(D)&&b.auth.currentUser===b&&(yield b.auth.signOut()),D}})).apply(this,arguments)}function Br({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class as{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var y;if(p){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const re=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,re)}}schedule(p=!1){var y=this;if(!this.isRunning)return;const D=this.getInterval(p);this.timerId=setTimeout((0,g.Z)(function*(){yield y.iteration()}),D)}iteration(){var p=this;return(0,g.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===(null==y?void 0:y.code)&&p.schedule(!0))}p.schedule()})()}}class Li{constructor(p,y){this.createdAt=p,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=dn(this.lastLoginAt),this.creationTime=dn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ui(b){return On.apply(this,arguments)}function On(){return(On=(0,g.Z)(function*(b){var p;const y=b.auth,D=yield b.getIdToken(),re=yield Jr(b,rs(y,{idToken:D}));ke(null==re?void 0:re.users.length,y,"internal-error");const Ee=re.users[0];b._notifyReloadListener(Ee);const bt=(null===(p=Ee.providerUserInfo)||void 0===p?void 0:p.length)?kn(Ee.providerUserInfo):[],pn=Vi(b.providerData,bt),Ci=!!b.isAnonymous&&!(b.email&&Ee.passwordHash||(null==pn?void 0:pn.length)),hi={uid:Ee.localId,displayName:Ee.displayName||null,photoURL:Ee.photoUrl||null,email:Ee.email||null,emailVerified:Ee.emailVerified||!1,phoneNumber:Ee.phoneNumber||null,tenantId:Ee.tenantId||null,providerData:pn,metadata:new Li(Ee.createdAt,Ee.lastLoginAt),isAnonymous:Ci};Object.assign(b,hi)})).apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(b){const p=(0,pe.m9)(b);yield ui(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Vi(b,p){return[...b.filter(D=>!p.some(re=>re.providerId===D.providerId)),...p]}function kn(b){return b.map(p=>{var{providerId:y}=p,D=(0,Xe._T)(p,["providerId"]);return{providerId:y,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function Yn(){return(Yn=(0,g.Z)(function*(b,p){const y=yield Rt(b,{},(0,g.Z)(function*(){const D=(0,pe.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:re,apiKey:Ee}=b.config,bt=lr(b,re,"/v1/token",`key=${Ee}`),pn=yield b._getAdditionalHeaders();return pn["Content-Type"]="application/x-www-form-urlencoded",Vt.fetch()(bt,{method:"POST",headers:pn,body:D})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Rr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ke(p.idToken,"internal-error"),ke(void 0!==p.idToken,"internal-error"),ke(void 0!==p.refreshToken,"internal-error");const y="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function zn(b){const p=bn(b);return ke(p,"internal-error"),ke(void 0!==p.exp,"internal-error"),ke(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,y)}getToken(p,y=!1){var D=this;return(0,g.Z)(function*(){return ke(!D.accessToken||D.refreshToken,p,"user-token-expired"),y||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(p,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,y){var D=this;return(0,g.Z)(function*(){const{accessToken:re,refreshToken:Ee,expiresIn:bt}=yield function Ft(b,p){return Yn.apply(this,arguments)}(p,y);D.updateTokensAndExpiration(re,Ee,Number(bt))})()}updateTokensAndExpiration(p,y,D){this.refreshToken=y||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(p,y){const{refreshToken:D,accessToken:re,expirationTime:Ee}=y,bt=new Rr;return D&&(ke("string"==typeof D,"internal-error",{appName:p}),bt.refreshToken=D),re&&(ke("string"==typeof re,"internal-error",{appName:p}),bt.accessToken=re),Ee&&(ke("number"==typeof Ee,"internal-error",{appName:p}),bt.expirationTime=Ee),bt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Rr,this.toJSON())}_performRefresh(){return Ut("not implemented")}}function Ur(b,p){ke("string"==typeof b||void 0===b,"internal-error",{appName:p})}class $r{constructor(p){var{uid:y,auth:D,stsTokenManager:re}=p,Ee=(0,Xe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new as(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=D,this.stsTokenManager=re,this.accessToken=re.accessToken,this.displayName=Ee.displayName||null,this.email=Ee.email||null,this.emailVerified=Ee.emailVerified||!1,this.phoneNumber=Ee.phoneNumber||null,this.photoURL=Ee.photoURL||null,this.isAnonymous=Ee.isAnonymous||!1,this.tenantId=Ee.tenantId||null,this.providerData=Ee.providerData?[...Ee.providerData]:[],this.metadata=new Li(Ee.createdAt||void 0,Ee.lastLoginAt||void 0)}getIdToken(p){var y=this;return(0,g.Z)(function*(){const D=yield Jr(y,y.stsTokenManager.getToken(y.auth,p));return ke(D,y.auth,"internal-error"),y.accessToken!==D&&(y.accessToken=D,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),D})()}getIdTokenResult(p){return function ct(b){return Gt.apply(this,arguments)}(this,p)}reload(){return function Si(b){return Vr.apply(this,arguments)}(this)}_assign(p){this!==p&&(ke(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(y=>Object.assign({},y)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new $r(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,y=!1){var D=this;return(0,g.Z)(function*(){let re=!1;p.idToken&&p.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(p),re=!0),y&&(yield ui(D)),yield D.auth._persistUserIfCurrent(D),re&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var p=this;return(0,g.Z)(function*(){const y=yield p.getIdToken();return yield Jr(p,function Qn(b,p){return Wr.apply(this,arguments)}(p.auth,{idToken:y})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,y){var D,re,Ee,bt,pn,dr,Lr,Ci;const hi=null!==(D=y.displayName)&&void 0!==D?D:void 0,Ko=null!==(re=y.email)&&void 0!==re?re:void 0,f=null!==(Ee=y.phoneNumber)&&void 0!==Ee?Ee:void 0,c=null!==(bt=y.photoURL)&&void 0!==bt?bt:void 0,d=null!==(pn=y.tenantId)&&void 0!==pn?pn:void 0,v=null!==(dr=y._redirectEventId)&&void 0!==dr?dr:void 0,x=null!==(Lr=y.createdAt)&&void 0!==Lr?Lr:void 0,H=null!==(Ci=y.lastLoginAt)&&void 0!==Ci?Ci:void 0,{uid:te,emailVerified:we,isAnonymous:Qe,providerData:lt,stsTokenManager:ln}=y;ke(te&&ln,p,"internal-error");const Tn=Rr.fromJSON(this.name,ln);ke("string"==typeof te,p,"internal-error"),Ur(hi,p.name),Ur(Ko,p.name),ke("boolean"==typeof we,p,"internal-error"),ke("boolean"==typeof Qe,p,"internal-error"),Ur(f,p.name),Ur(c,p.name),Ur(d,p.name),Ur(v,p.name),Ur(x,p.name),Ur(H,p.name);const xn=new $r({uid:te,auth:p,email:Ko,emailVerified:we,displayName:hi,isAnonymous:Qe,photoURL:c,phoneNumber:f,tenantId:d,stsTokenManager:Tn,createdAt:x,lastLoginAt:H});return lt&&Array.isArray(lt)&&(xn.providerData=lt.map(Cr=>Object.assign({},Cr))),v&&(xn._redirectEventId=v),xn}static _fromIdTokenResponse(p,y,D=!1){return(0,g.Z)(function*(){const re=new Rr;re.updateFromServerResponse(y);const Ee=new $r({uid:y.localId,auth:p,stsTokenManager:re,isAnonymous:D});return yield ui(Ee),Ee})()}}const Ue=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(y,D){var re=this;return(0,g.Z)(function*(){re.storage[y]=D})()}_get(y){var D=this;return(0,g.Z)(function*(){const re=D.storage[y];return void 0===re?null:re})()}_remove(y){var D=this;return(0,g.Z)(function*(){delete D.storage[y]})()}_addListener(y,D){}_removeListener(y,D){}}return b.type="NONE",b})();function ft(b,p,y){return`firebase:${b}:${p}:${y}`}class Xt{constructor(p,y,D){this.persistence=p,this.auth=y,this.userKey=D;const{config:re,name:Ee}=this.auth;this.fullUserKey=ft(this.userKey,re.apiKey,Ee),this.fullPersistenceKey=ft("persistence",re.apiKey,Ee),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,g.Z)(function*(){const y=yield p.persistence._get(p.fullUserKey);return y?$r._fromJSON(p.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var y=this;return(0,g.Z)(function*(){if(y.persistence===p)return;const D=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=p,D?y.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,y,D="authUser"){return(0,g.Z)(function*(){if(!y.length)return new Xt(et(Ue),p,D);const re=(yield Promise.all(y.map(function(){var Lr=(0,g.Z)(function*(Ci){if(yield Ci._isAvailable())return Ci});return function(Ci){return Lr.apply(this,arguments)}}()))).filter(Lr=>Lr);let Ee=re[0]||et(Ue);const bt=ft(D,p.config.apiKey,p.name);let pn=null;for(const Lr of y)try{const Ci=yield Lr._get(bt);if(Ci){const hi=$r._fromJSON(p,Ci);Lr!==Ee&&(pn=hi),Ee=Lr;break}}catch(Ci){}const dr=re.filter(Lr=>Lr._shouldAllowMigration);return Ee._shouldAllowMigration&&dr.length?(Ee=dr[0],pn&&(yield Ee._set(bt,pn.toJSON())),yield Promise.all(y.map(function(){var Lr=(0,g.Z)(function*(Ci){if(Ci!==Ee)try{yield Ci._remove(bt)}catch(hi){}});return function(Ci){return Lr.apply(this,arguments)}}())),new Xt(Ee,p,D)):new Xt(Ee,p,D)})()}}function Lt(b){const p=b.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(gt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ge(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(_r(p))return"Blackberry";if(qn(p))return"Webos";if(Re(p))return"Safari";if((p.includes("chrome/")||Ae(p))&&!p.includes("edge/"))return"Chrome";if(cn(p))return"Android";{const D=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function Ge(b=(0,pe.z$)()){return/firefox\//i.test(b)}function Re(b=(0,pe.z$)()){const p=b.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ae(b=(0,pe.z$)()){return/crios\//i.test(b)}function gt(b=(0,pe.z$)()){return/iemobile/i.test(b)}function cn(b=(0,pe.z$)()){return/android/i.test(b)}function _r(b=(0,pe.z$)()){return/blackberry/i.test(b)}function qn(b=(0,pe.z$)()){return/webos/i.test(b)}function ci(b=(0,pe.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Ni(b=(0,pe.z$)()){return ci(b)||cn(b)||qn(b)||_r(b)||/windows phone/i.test(b)||gt(b)}function ss(b,p=[]){let y;switch(b){case"Browser":y=Lt((0,pe.z$)());break;case"Worker":y=`${Lt((0,pe.z$)())}-${b}`;break;default:y=b}const D=p.length?p.join(","):"FirebaseCore-web";return`${y}/JsCore/${ae.SDK_VERSION}/${D}`}class Oi{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,y){const D=Ee=>new Promise((bt,pn)=>{try{bt(p(Ee))}catch(dr){pn(dr)}});D.onAbort=y,this.queue.push(D);const re=this.queue.length-1;return()=>{this.queue[re]=()=>Promise.resolve()}}runMiddleware(p){var y=this;return(0,g.Z)(function*(){if(y.auth.currentUser===p)return;const D=[];try{for(const re of y.queue)yield re(p),re.onAbort&&D.push(re.onAbort)}catch(re){D.reverse();for(const Ee of D)try{Ee()}catch(bt){}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null==re?void 0:re.message})}})()}}class En{constructor(p,y,D){this.app=p,this.heartbeatServiceProvider=y,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mi(this),this.idTokenSubscription=new mi(this),this.beforeStateQueue=new Oi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(p,y){var D=this;return y&&(this._popupRedirectResolver=et(y)),this._initializationPromise=this.queue((0,g.Z)(function*(){var re,Ee;if(!D._deleted&&(D.persistenceManager=yield Xt.create(D,p),!D._deleted)){if(null===(re=D._popupRedirectResolver)||void 0===re?void 0:re._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch(bt){}yield D.initializeCurrentUser(y),D.lastNotifiedUid=(null===(Ee=D.currentUser)||void 0===Ee?void 0:Ee.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,g.Z)(function*(){if(p._deleted)return;const y=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||y){if(p.currentUser&&y&&p.currentUser.uid===y.uid)return p._currentUser._assign(y),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(y,!0)}})()}initializeCurrentUser(p){var y=this;return(0,g.Z)(function*(){var D;const re=yield y.assertedPersistence.getCurrentUser();let Ee=re,bt=!1;if(p&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const pn=null===(D=y.redirectUser)||void 0===D?void 0:D._redirectEventId,dr=null==Ee?void 0:Ee._redirectEventId,Lr=yield y.tryRedirectSignIn(p);(!pn||pn===dr)&&(null==Lr?void 0:Lr.user)&&(Ee=Lr.user,bt=!0)}if(!Ee)return y.directlySetCurrentUser(null);if(!Ee._redirectEventId){if(bt)try{yield y.beforeStateQueue.runMiddleware(Ee)}catch(pn){Ee=re,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(pn))}return Ee?y.reloadAndSetCurrentUserOrClear(Ee):y.directlySetCurrentUser(null)}return ke(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===Ee._redirectEventId?y.directlySetCurrentUser(Ee):y.reloadAndSetCurrentUserOrClear(Ee)})()}tryRedirectSignIn(p){var y=this;return(0,g.Z)(function*(){let D=null;try{D=yield y._popupRedirectResolver._completeRedirectFn(y,p,!0)}catch(re){yield y._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(p){var y=this;return(0,g.Z)(function*(){try{yield ui(p)}catch(D){if("auth/network-request-failed"!==(null==D?void 0:D.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function yn(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var p=this;return(0,g.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var y=this;return(0,g.Z)(function*(){const D=p?(0,pe.m9)(p):null;return D&&ke(D.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(D&&D._clone(y))})()}_updateCurrentUser(p,y=!1){var D=this;return(0,g.Z)(function*(){if(!D._deleted)return p&&ke(D.tenantId===p.tenantId,D,"tenant-id-mismatch"),y||(yield D.beforeStateQueue.runMiddleware(p)),D.queue((0,g.Z)(function*(){yield D.directlySetCurrentUser(p),D.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,g.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var y=this;return this.queue((0,g.Z)(function*(){yield y.assertedPersistence.setPersistence(et(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new pe.LL("auth","Firebase",p())}onAuthStateChanged(p,y,D){return this.registerStateListener(this.authStateSubscription,p,y,D)}beforeAuthStateChanged(p,y){return this.beforeStateQueue.pushCallback(p,y)}onIdTokenChanged(p,y,D){return this.registerStateListener(this.idTokenSubscription,p,y,D)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,y){var D=this;return(0,g.Z)(function*(){const re=yield D.getOrInitRedirectPersistenceManager(y);return null===p?re.removeCurrentUser():re.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var y=this;return(0,g.Z)(function*(){if(!y.redirectPersistenceManager){const D=p&&et(p)||y._popupRedirectResolver;ke(D,y,"argument-error"),y.redirectPersistenceManager=yield Xt.create(y,[et(D._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(p){var y=this;return(0,g.Z)(function*(){var D,re;return y._isInitialized&&(yield y.queue((0,g.Z)(function*(){}))),(null===(D=y._currentUser)||void 0===D?void 0:D._redirectEventId)===p?y._currentUser:(null===(re=y.redirectUser)||void 0===re?void 0:re._redirectEventId)===p?y.redirectUser:null})()}_persistUserIfCurrent(p){var y=this;return(0,g.Z)(function*(){if(p===y.currentUser)return y.queue((0,g.Z)(function*(){return y.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(y=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,y,D,re){if(this._deleted)return()=>{};const Ee="function"==typeof y?y:y.next.bind(y),bt=this._isInitialized?Promise.resolve():this._initializationPromise;return ke(bt,this,"internal-error"),bt.then(()=>Ee(this.currentUser)),"function"==typeof y?p.addObserver(y,D,re):p.addObserver(y)}directlySetCurrentUser(p){var y=this;return(0,g.Z)(function*(){y.currentUser&&y.currentUser!==p&&y._currentUser._stopProactiveRefresh(),p&&y.isProactiveRefreshEnabled&&p._startProactiveRefresh(),y.currentUser=p,p?yield y.assertedPersistence.setCurrentUser(p):yield y.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ss(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,g.Z)(function*(){var y;const D={"X-Client-Version":p.clientVersion};p.app.options.appId&&(D["X-Firebase-gmpid"]=p.app.options.appId);const re=yield null===(y=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return re&&(D["X-Firebase-Client"]=re),D})()}}function yr(b){return(0,pe.m9)(b)}class mi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,pe.ne)(y=>this.observer=y)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function bs(b){const p=b.indexOf(":");return p<0?"":b.substr(0,p+1)}function us(b){if(!b)return null;const p=Number(b);return isNaN(p)?null:p}class Ki{constructor(p,y){this.providerId=p,this.signInMethod=y}toJSON(){return Ut("not implemented")}_getIdTokenResponse(p){return Ut("not implemented")}_linkToIdToken(p,y){return Ut("not implemented")}_getReauthenticationResolver(p){return Ut("not implemented")}}function Gi(b,p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:resetPassword",Dt(b,p))})).apply(this,arguments)}function os(b,p){return ds.apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function $s(b,p){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",Dt(b,p))})).apply(this,arguments)}function Ir(){return(Ir=(0,g.Z)(function*(b,p){return Gn(b,"POST","/v1/accounts:signInWithPassword",Dt(b,p))})).apply(this,arguments)}function Xi(b,p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:sendOobCode",Dt(b,p))})).apply(this,arguments)}function wi(b,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(b,p){return Xi(b,p)})).apply(this,arguments)}function zi(b,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(b,p){return Xi(b,p)})).apply(this,arguments)}function kr(b,p){return qr.apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(b,p){return Xi(b,p)})).apply(this,arguments)}function cs(b,p){return gs.apply(this,arguments)}function gs(){return(gs=(0,g.Z)(function*(b,p){return Xi(b,p)})).apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(b,p){return Gn(b,"POST","/v1/accounts:signInWithEmailLink",Dt(b,p))})).apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(b,p){return Gn(b,"POST","/v1/accounts:signInWithEmailLink",Dt(b,p))})).apply(this,arguments)}class xs extends Ki{constructor(p,y,D,re=null){super("password",D),this._email=p,this._password=y,this._tenantId=re}static _fromEmailAndPassword(p,y){return new xs(p,y,"password")}static _fromEmailAndCode(p,y,D=null){return new xs(p,y,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(p){var y=this;return(0,g.Z)(function*(){switch(y.signInMethod){case"password":return function wr(b,p){return Ir.apply(this,arguments)}(p,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function ks(b,p){return Hi.apply(this,arguments)}(p,{email:y._email,oobCode:y._password});default:xe(p,"internal-error")}})()}_linkToIdToken(p,y){var D=this;return(0,g.Z)(function*(){switch(D.signInMethod){case"password":return os(p,{idToken:y,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function $o(b,p){return mo.apply(this,arguments)}(p,{idToken:y,email:D._email,oobCode:D._password});default:xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Zi(b,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(b,p){return Gn(b,"POST","/v1/accounts:signInWithIdp",Dt(b,p))})).apply(this,arguments)}class xt extends Ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const y=new xt(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(y.idToken=p.idToken),p.accessToken&&(y.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(y.nonce=p.nonce),p.pendingToken&&(y.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(y.accessToken=p.oauthToken,y.secret=p.oauthTokenSecret):xe("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:re}=y,Ee=(0,Xe._T)(y,["providerId","signInMethod"]);if(!D||!re)return null;const bt=new xt(D,re);return bt.idToken=Ee.idToken||void 0,bt.accessToken=Ee.accessToken||void 0,bt.secret=Ee.secret,bt.nonce=Ee.nonce,bt.pendingToken=Ee.pendingToken||null,bt}_getIdTokenResponse(p){return Zi(p,this.buildRequest())}_linkToIdToken(p,y){const D=this.buildRequest();return D.idToken=y,Zi(p,D)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,Zi(p,y)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),p.postBody=(0,pe.xO)(y)}return p}}function mn(b,p){return $n.apply(this,arguments)}function $n(){return($n=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:sendVerificationCode",Dt(b,p))})).apply(this,arguments)}function ti(){return(ti=(0,g.Z)(function*(b,p){return Gn(b,"POST","/v1/accounts:signInWithPhoneNumber",Dt(b,p))})).apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(b,p){const y=yield Gn(b,"POST","/v1/accounts:signInWithPhoneNumber",Dt(b,p));if(y.temporaryProof)throw oi(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const vs={USER_NOT_FOUND:"user-not-found"};function ms(){return(ms=(0,g.Z)(function*(b,p){return Gn(b,"POST","/v1/accounts:signInWithPhoneNumber",Dt(b,Object.assign(Object.assign({},p),{operation:"REAUTH"})),vs)})).apply(this,arguments)}class Ts extends Ki{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,y){return new Ts({verificationId:p,verificationCode:y})}static _fromTokenResponse(p,y){return new Ts({phoneNumber:p,temporaryProof:y})}_getIdTokenResponse(p){return function Pr(b,p){return ti.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,y){return function Yi(b,p){return Ii.apply(this,arguments)}(p,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ai(b,p){return ms.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:y,verificationId:D,verificationCode:re}=this.params;return p&&y?{temporaryProof:p,phoneNumber:y}:{sessionInfo:D,code:re}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:y,verificationCode:D,phoneNumber:re,temporaryProof:Ee}=p;return D||y||re||Ee?new Ts({verificationId:y,verificationCode:D,phoneNumber:re,temporaryProof:Ee}):null}}class Qs{constructor(p){var y,D,re,Ee,bt,pn;const dr=(0,pe.zd)((0,pe.pd)(p)),Lr=null!==(y=dr.apiKey)&&void 0!==y?y:null,Ci=null!==(D=dr.oobCode)&&void 0!==D?D:null,hi=function Qo(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(re=dr.mode)&&void 0!==re?re:null);ke(Lr&&Ci&&hi,"argument-error"),this.apiKey=Lr,this.operation=hi,this.code=Ci,this.continueUrl=null!==(Ee=dr.continueUrl)&&void 0!==Ee?Ee:null,this.languageCode=null!==(bt=dr.languageCode)&&void 0!==bt?bt:null,this.tenantId=null!==(pn=dr.tenantId)&&void 0!==pn?pn:null}static parseLink(p){const y=function Es(b){const p=(0,pe.zd)((0,pe.pd)(b)).link,y=p?(0,pe.zd)((0,pe.pd)(p)).deep_link_id:null,D=(0,pe.zd)((0,pe.pd)(b)).deep_link_id;return(D?(0,pe.zd)((0,pe.pd)(D)).link:null)||D||y||p||b}(p);try{return new Qs(y)}catch(D){return null}}}let ho=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,D){return xs._fromEmailAndPassword(y,D)}static credentialWithLink(y,D){const re=Qs.parseLink(D);return ke(re,"argument-error"),xs._fromEmailAndCode(y,re.code,re.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Ri{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class fo extends Ri{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ms extends fo{static credentialFromJSON(p){const y="string"==typeof p?JSON.parse(p):p;return ke("providerId"in y&&"signInMethod"in y,"argument-error"),xt._fromParams(y)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ke(p.idToken||p.accessToken,"argument-error"),xt._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ms.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ms.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:y,oauthAccessToken:D,oauthTokenSecret:re,pendingToken:Ee,nonce:bt,providerId:pn}=p;if(!D&&!re&&!y&&!Ee||!pn)return null;try{return new Ms(pn)._credential({idToken:y,accessToken:D,nonce:bt,pendingToken:Ee})}catch(dr){return null}}}let io=(()=>{class b extends fo{constructor(){super("facebook.com")}static credential(y){return xt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(D){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),js=(()=>{class b extends fo{constructor(){super("google.com"),this.addScope("profile")}static credential(y,D){return xt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:D})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:D,oauthAccessToken:re}=y;if(!D&&!re)return null;try{return b.credential(D,re)}catch(Ee){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Vo=(()=>{class b extends fo{constructor(){super("github.com")}static credential(y){return xt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(D){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Hs extends Ki{constructor(p,y){super(p,p),this.pendingToken=y}_getIdTokenResponse(p){return Zi(p,this.buildRequest())}_linkToIdToken(p,y){const D=this.buildRequest();return D.idToken=y,Zi(p,D)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,Zi(p,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:re,pendingToken:Ee}=y;return D&&re&&Ee&&D===re?new Hs(D,Ee):null}static _create(p,y){return new Hs(p,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fs extends Ri{constructor(p){ke(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Fs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Fs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const y=Hs.fromJSON(p);return ke(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:y,providerId:D}=p;if(!y||!D)return null;try{return Hs._create(D,y)}catch(re){return null}}}let Oo=(()=>{class b extends fo{constructor(){super("twitter.com")}static credential(y,D){return xt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:D})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:D,oauthTokenSecret:re}=y;if(!D||!re)return null;try{return b.credential(D,re)}catch(Ee){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function fs(b,p){return Js.apply(this,arguments)}function Js(){return(Js=(0,g.Z)(function*(b,p){return Gn(b,"POST","/v1/accounts:signUp",Dt(b,p))})).apply(this,arguments)}class Gs{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,y,D,re=!1){return(0,g.Z)(function*(){const Ee=yield $r._fromIdTokenResponse(p,D,re),bt=ki(D);return new Gs({user:Ee,providerId:bt,_tokenResponse:D,operationType:y})})()}static _forOperation(p,y,D){return(0,g.Z)(function*(){yield p._updateTokensIfNecessary(D,!0);const re=ki(D);return new Gs({user:p,providerId:re,_tokenResponse:D,operationType:y})})()}}function ki(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function yo(){return(yo=(0,g.Z)(function*(b){var p;const y=yr(b);if(yield y._initializationPromise,null===(p=y.currentUser)||void 0===p?void 0:p.isAnonymous)return new Gs({user:y.currentUser,providerId:null,operationType:"signIn"});const D=yield fs(y,{returnSecureToken:!0}),re=yield Gs._fromIdTokenResponse(y,"signIn",D,!0);return yield y._updateCurrentUser(re.user),re})).apply(this,arguments)}class Rs extends pe.ZR{constructor(p,y,D,re){var Ee;super(y.code,y.message),this.operationType=D,this.user=re,Object.setPrototypeOf(this,Rs.prototype),this.customData={appName:p.name,tenantId:null!==(Ee=p.tenantId)&&void 0!==Ee?Ee:void 0,_serverResponse:y.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(p,y,D,re){return new Rs(p,y,D,re)}}function zs(b,p,y,D){return("reauthenticate"===p?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(Ee=>{throw"auth/multi-factor-auth-required"===Ee.code?Rs._fromErrorAndOperation(b,Ee,p,D):Ee})}function Ls(b){return new Set(b.map(({providerId:p})=>p).filter(p=>!!p))}function bi(){return(bi=(0,g.Z)(function*(b,p){const y=(0,pe.m9)(b);yield W(!0,y,p);const{providerUserInfo:D}=yield xr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[p]}),re=Ls(D||[]);return y.providerData=y.providerData.filter(Ee=>re.has(Ee.providerId)),re.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function B(b,p){return he.apply(this,arguments)}function he(){return(he=(0,g.Z)(function*(b,p,y=!1){const D=yield Jr(b,p._linkToIdToken(b.auth,yield b.getIdToken()),y);return Gs._forOperation(b,"link",D)})).apply(this,arguments)}function W(b,p,y){return ve.apply(this,arguments)}function ve(){return(ve=(0,g.Z)(function*(b,p,y){yield ui(p);const re=!1===b?"provider-already-linked":"no-such-provider";ke(Ls(p.providerData).has(y)===b,p.auth,re)})).apply(this,arguments)}function qe(b,p){return sn.apply(this,arguments)}function sn(){return(sn=(0,g.Z)(function*(b,p,y=!1){const{auth:D}=b,re="reauthenticate";try{const Ee=yield Jr(b,zs(D,re,p,b),y);ke(Ee.idToken,D,"internal-error");const bt=bn(Ee.idToken);ke(bt,D,"internal-error");const{sub:pn}=bt;return ke(b.uid===pn,D,"user-mismatch"),Gs._forOperation(b,re,Ee)}catch(Ee){throw"auth/user-not-found"===(null==Ee?void 0:Ee.code)&&xe(D,"user-mismatch"),Ee}})).apply(this,arguments)}function wn(b,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(b,p,y=!1){const D="signIn",re=yield zs(b,D,p),Ee=yield Gs._fromIdTokenResponse(b,D,re);return y||(yield b._updateCurrentUser(Ee.user)),Ee})).apply(this,arguments)}function jr(b,p){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(function*(b,p){return wn(yr(b),p)})).apply(this,arguments)}function ni(b,p){return fi.apply(this,arguments)}function fi(){return(fi=(0,g.Z)(function*(b,p){const y=(0,pe.m9)(b);return yield W(!1,y,p.providerId),B(y,p)})).apply(this,arguments)}function es(b,p){return Di.apply(this,arguments)}function Di(){return(Di=(0,g.Z)(function*(b,p){return qe((0,pe.m9)(b),p)})).apply(this,arguments)}function Fi(b,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,g.Z)(function*(b,p){return Gn(b,"POST","/v1/accounts:signInWithCustomToken",Dt(b,p))})).apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(b,p){const y=yr(b),D=yield Fi(y,{token:p,returnSecureToken:!0}),re=yield Gs._fromIdTokenResponse(y,"signIn",D);return yield y._updateCurrentUser(re.user),re})).apply(this,arguments)}class Zs{constructor(p,y){this.factorId=p,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(p,y){return"phoneInfo"in y?ko._fromServerResponse(p,y):xe(p,"internal-error")}}class ko extends Zs{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,y){return new ko(y)}}function ys(b,p,y){var D;ke((null===(D=y.url)||void 0===D?void 0:D.length)>0,b,"invalid-continue-uri"),ke(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),p.continueUrl=y.url,p.dynamicLinkDomain=y.dynamicLinkDomain,p.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ke(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),p.iOSBundleId=y.iOS.bundleId),y.android&&(ke(y.android.packageName.length>0,b,"missing-android-pkg-name"),p.androidInstallApp=y.android.installApp,p.androidMinimumVersionCode=y.android.minimumVersion,p.androidPackageName=y.android.packageName)}function Q(){return(Q=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b),re={requestType:"PASSWORD_RESET",email:p};y&&ys(D,re,y),yield zi(D,re)})).apply(this,arguments)}function V(){return(V=(0,g.Z)(function*(b,p,y){yield Gi((0,pe.m9)(b),{oobCode:p,newPassword:y})})).apply(this,arguments)}function Ye(){return(Ye=(0,g.Z)(function*(b,p){yield $s((0,pe.m9)(b),{oobCode:p})})).apply(this,arguments)}function Pn(b,p){return ee.apply(this,arguments)}function ee(){return(ee=(0,g.Z)(function*(b,p){const y=(0,pe.m9)(b),D=yield Gi(y,{oobCode:p}),re=D.requestType;switch(ke(re,y,"internal-error"),re){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ke(D.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ke(D.mfaInfo,y,"internal-error");default:ke(D.email,y,"internal-error")}let Ee=null;return D.mfaInfo&&(Ee=Zs._fromServerResponse(yr(y),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:Ee},operation:re}})).apply(this,arguments)}function Ce(){return(Ce=(0,g.Z)(function*(b,p){const{data:y}=yield Pn((0,pe.m9)(b),p);return y.email})).apply(this,arguments)}function it(){return(it=(0,g.Z)(function*(b,p,y){const D=yr(b),re=yield fs(D,{returnSecureToken:!0,email:p,password:y}),Ee=yield Gs._fromIdTokenResponse(D,"signIn",re);return yield D._updateCurrentUser(Ee.user),Ee})).apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b),re={requestType:"EMAIL_SIGNIN",email:p};ke(y.handleCodeInApp,D,"argument-error"),y&&ys(D,re,y),yield kr(D,re)})).apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b),re=ho.credentialWithLink(p,y||on());return ke(re._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),jr(D,re)})).apply(this,arguments)}function yi(b,p){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:createAuthUri",Dt(b,p))})).apply(this,arguments)}function l(){return(l=(0,g.Z)(function*(b,p){const D={identifier:p,continueUri:Dn()?on():"http://localhost"},{signinMethods:re}=yield yi((0,pe.m9)(b),D);return re||[]})).apply(this,arguments)}function I(){return(I=(0,g.Z)(function*(b,p){const y=(0,pe.m9)(b),re={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};p&&ys(y.auth,re,p);const{email:Ee}=yield wi(y.auth,re);Ee!==b.email&&(yield b.reload())})).apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b),Ee={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:p};y&&ys(D.auth,Ee,y);const{email:bt}=yield cs(D.auth,Ee);bt!==b.email&&(yield b.reload())})).apply(this,arguments)}function J(b,p){return me.apply(this,arguments)}function me(){return(me=(0,g.Z)(function*(b,p){return ut(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function oe(){return(oe=(0,g.Z)(function*(b,{displayName:p,photoURL:y}){if(void 0===p&&void 0===y)return;const D=(0,pe.m9)(b),Ee={idToken:yield D.getIdToken(),displayName:p,photoUrl:y,returnSecureToken:!0},bt=yield Jr(D,J(D.auth,Ee));D.displayName=bt.displayName||null,D.photoURL=bt.photoUrl||null;const pn=D.providerData.find(({providerId:dr})=>"password"===dr);pn&&(pn.displayName=D.displayName,pn.photoURL=D.photoURL),yield D._updateTokensIfNecessary(bt)})).apply(this,arguments)}function le(b,p,y){return Te.apply(this,arguments)}function Te(){return(Te=(0,g.Z)(function*(b,p,y){const{auth:D}=b,Ee={idToken:yield b.getIdToken(),returnSecureToken:!0};p&&(Ee.email=p),y&&(Ee.password=y);const bt=yield Jr(b,os(D,Ee));yield b._updateTokensIfNecessary(bt,!0)})).apply(this,arguments)}class nt{constructor(p,y,D={}){this.isNewUser=p,this.providerId=y,this.profile=D}}class De extends nt{constructor(p,y,D,re){super(p,y,D),this.username=re}}class Fe extends nt{constructor(p,y){super(p,"facebook.com",y)}}class _t extends De{constructor(p,y){super(p,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class tt extends nt{constructor(p,y){super(p,"google.com",y)}}class yt extends De{constructor(p,y,D){super(p,"twitter.com",y,D)}}function vn(b){const{user:p,_tokenResponse:y}=b;return p.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function ze(b){var p,y;if(!b)return null;const{providerId:D}=b,re=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},Ee=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!D&&(null==b?void 0:b.idToken)){const bt=null===(y=null===(p=bn(b.idToken))||void 0===p?void 0:p.firebase)||void 0===y?void 0:y.sign_in_provider;if(bt)return new nt(Ee,"anonymous"!==bt&&"custom"!==bt?bt:null)}if(!D)return null;switch(D){case"facebook.com":return new Fe(Ee,re);case"github.com":return new _t(Ee,re);case"google.com":return new tt(Ee,re);case"twitter.com":return new yt(Ee,re,b.screenName||null);case"custom":case"anonymous":return new nt(Ee,null);default:return new nt(Ee,D,re)}}(y)}class or{constructor(p,y,D){this.type=p,this.credential=y,this.auth=D}static _fromIdtoken(p,y){return new or("enroll",p,y)}static _fromMfaPendingCredential(p){return new or("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var y,D;if(null==p?void 0:p.multiFactorSession){if(null===(y=p.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return or._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(D=p.multiFactorSession)||void 0===D?void 0:D.idToken)return or._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ir{constructor(p,y,D){this.session=p,this.hints=y,this.signInResolver=D}static _fromError(p,y){const D=yr(p),re=y.customData._serverResponse,Ee=(re.mfaInfo||[]).map(pn=>Zs._fromServerResponse(D,pn));ke(re.mfaPendingCredential,D,"internal-error");const bt=or._fromMfaPendingCredential(re.mfaPendingCredential);return new ir(bt,Ee,function(){var pn=(0,g.Z)(function*(dr){const Lr=yield dr._process(D,bt);delete re.mfaInfo,delete re.mfaPendingCredential;const Ci=Object.assign(Object.assign({},re),{idToken:Lr.idToken,refreshToken:Lr.refreshToken});switch(y.operationType){case"signIn":const hi=yield Gs._fromIdTokenResponse(D,y.operationType,Ci);return yield D._updateCurrentUser(hi.user),hi;case"reauthenticate":return ke(y.user,D,"internal-error"),Gs._forOperation(y.user,y.operationType,Ci);default:xe(D,"internal-error")}});return function(dr){return pn.apply(this,arguments)}}())}resolveSignIn(p){var y=this;return(0,g.Z)(function*(){return y.signInResolver(p)})()}}function ur(b,p){return ut(b,"POST","/v2/accounts/mfaEnrollment:start",Dt(b,p))}class Ai{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(D=>Zs._fromServerResponse(p.auth,D)))})}static _fromUser(p){return new Ai(p)}getSession(){var p=this;return(0,g.Z)(function*(){return or._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,y){var D=this;return(0,g.Z)(function*(){const re=p,Ee=yield D.getSession(),bt=yield Jr(D.user,re._process(D.user.auth,Ee,y));return yield D.user._updateTokensIfNecessary(bt),D.user.reload()})()}unenroll(p){var y=this;return(0,g.Z)(function*(){const D="string"==typeof p?p:p.uid,re=yield y.user.getIdToken(),Ee=yield Jr(y.user,function vi(b,p){return ut(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Dt(b,p))}(y.user.auth,{idToken:re,mfaEnrollmentId:D}));y.enrolledFactors=y.enrolledFactors.filter(({uid:bt})=>bt!==D),yield y.user._updateTokensIfNecessary(Ee);try{yield y.user.reload()}catch(bt){if("auth/user-token-expired"!==(null==bt?void 0:bt.code))throw bt}})()}}const Ws=new WeakMap,C="__sak";class T{constructor(p,y){this.storageRetriever=p,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(C,"1"),this.storage.removeItem(C),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,y){return this.storage.setItem(p,JSON.stringify(y)),Promise.resolve()}_get(p){const y=this.storage.getItem(p);return Promise.resolve(y?JSON.parse(y):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Be=(()=>{class b extends T{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,D)=>this.onStorageEvent(y,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function k(){const b=(0,pe.z$)();return Re(b)||ci(b)}()&&function di(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Ni(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const D of Object.keys(this.listeners)){const re=this.storage.getItem(D),Ee=this.localCache[D];re!==Ee&&y(D,Ee,re)}}onStorageEvent(y,D=!1){if(!y.key)return void this.forAllChangedKeys((pn,dr,Lr)=>{this.notifyListeners(pn,Lr)});const re=y.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pn=this.storage.getItem(re);if(y.newValue!==pn)null!==y.newValue?this.storage.setItem(re,y.newValue):this.storage.removeItem(re);else if(this.localCache[re]===y.newValue&&!D)return}const Ee=()=>{const pn=this.storage.getItem(re);!D&&this.localCache[re]===pn||this.notifyListeners(re,pn)},bt=this.storage.getItem(re);!function As(){return(0,pe.w1)()&&10===document.documentMode}()||bt===y.newValue||y.newValue===y.oldValue?Ee():setTimeout(Ee,10)}notifyListeners(y,D){this.localCache[y]=D;const re=this.listeners[y];if(re)for(const Ee of Array.from(re))Ee(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,D,re)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:D,newValue:re}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,D){var re=()=>super._set,Ee=this;return(0,g.Z)(function*(){yield re().call(Ee,y,D),Ee.localCache[y]=JSON.stringify(D)})()}_get(y){var D=()=>super._get,re=this;return(0,g.Z)(function*(){const Ee=yield D().call(re,y);return re.localCache[y]=JSON.stringify(Ee),Ee})()}_remove(y){var D=()=>super._remove,re=this;return(0,g.Z)(function*(){yield D().call(re,y),delete re.localCache[y]})()}}return b.type="LOCAL",b})(),Qt=(()=>{class b extends T{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,D){}_removeListener(y,D){}}return b.type="SESSION",b})();let Nr=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const D=this.receivers.find(Ee=>Ee.isListeningto(y));if(D)return D;const re=new b(y);return this.receivers.push(re),re}isListeningto(y){return this.eventTarget===y}handleEvent(y){var D=this;return(0,g.Z)(function*(){const re=y,{eventId:Ee,eventType:bt,data:pn}=re.data,dr=D.handlersMap[bt];if(!(null==dr?void 0:dr.size))return;re.ports[0].postMessage({status:"ack",eventId:Ee,eventType:bt});const Lr=Array.from(dr).map(function(){var hi=(0,g.Z)(function*(Ko){return Ko(re.origin,pn)});return function(Ko){return hi.apply(this,arguments)}}()),Ci=yield function ar(b){return Promise.all(b.map(function(){var p=(0,g.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(D){return{fulfilled:!1,reason:D}}});return function(y){return p.apply(this,arguments)}}()))}(Lr);re.ports[0].postMessage({status:"done",eventId:Ee,eventType:bt,response:Ci})})()}_subscribe(y,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(D)}_unsubscribe(y,D){this.handlersMap[y]&&D&&this.handlersMap[y].delete(D),(!D||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Jt(b="",p=10){let y="";for(let D=0;D<p;D++)y+=Math.floor(10*Math.random());return b+y}class Sr{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,y,D=50){var re=this;return(0,g.Z)(function*(){const Ee="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Ee)throw new Error("connection_unavailable");let bt,pn;return new Promise((dr,Lr)=>{const Ci=Jt("",20);Ee.port1.start();const hi=setTimeout(()=>{Lr(new Error("unsupported_event"))},D);pn={messageChannel:Ee,onMessage(Ko){const f=Ko;if(f.data.eventId===Ci)switch(f.data.status){case"ack":clearTimeout(hi),bt=setTimeout(()=>{Lr(new Error("timeout"))},3e3);break;case"done":clearTimeout(bt),dr(f.data.response);break;default:clearTimeout(hi),clearTimeout(bt),Lr(new Error("invalid_response"))}}},re.handlers.add(pn),Ee.port1.addEventListener("message",pn.onMessage),re.target.postMessage({eventType:p,eventId:Ci,data:y},[Ee.port2])}).finally(()=>{pn&&re.removeMessageHandler(pn)})})()}}function hr(){return window}function jn(){return void 0!==hr().WorkerGlobalScope&&"function"==typeof hr().importScripts}function ao(){return(ao=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const An="firebaseLocalStorageDb",Ps="firebaseLocalStorage",jo="fbase_key";class O{constructor(p){this.request=p}toPromise(){return new Promise((p,y)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function M(b,p){return b.transaction([Ps],p?"readwrite":"readonly").objectStore(Ps)}function q(){const b=indexedDB.open(An,1);return new Promise((p,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const D=b.result;try{D.createObjectStore(Ps,{keyPath:jo})}catch(re){y(re)}}),b.addEventListener("success",(0,g.Z)(function*(){const D=b.result;D.objectStoreNames.contains(Ps)?p(D):(D.close(),yield function S(){const b=indexedDB.deleteDatabase(An);return new O(b).toPromise()}(),p(yield q()))}))})}function ne(b,p,y){return _e.apply(this,arguments)}function _e(){return(_e=(0,g.Z)(function*(b,p,y){const D=M(b,!0).put({[jo]:p,value:y});return new O(D).toPromise()})).apply(this,arguments)}function Ne(){return(Ne=(0,g.Z)(function*(b,p){const y=M(b,!1).get(p),D=yield new O(y).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function Mt(b,p){const y=M(b,!0).delete(p);return new O(y).toPromise()}const Or=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,g.Z)(function*(){return y.db||(y.db=yield q()),y.db})()}_withRetries(y){var D=this;return(0,g.Z)(function*(){let re=0;for(;;)try{const Ee=yield D._openDb();return yield y(Ee)}catch(Ee){if(re++>3)throw Ee;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,g.Z)(function*(){return jn()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,g.Z)(function*(){y.receiver=Nr._getInstance(function $t(){return jn()?self:null}()),y.receiver._subscribe("keyChanged",function(){var D=(0,g.Z)(function*(re,Ee){return{keyProcessed:(yield y._poll()).includes(Ee.key)}});return function(re,Ee){return D.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var D=(0,g.Z)(function*(re,Ee){return["keyChanged"]});return function(re,Ee){return D.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,g.Z)(function*(){var D,re;if(y.activeServiceWorker=yield function sr(){return ao.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Sr(y.activeServiceWorker);const Ee=yield y.sender._send("ping",{},800);!Ee||(null===(D=Ee[0])||void 0===D?void 0:D.fulfilled)&&(null===(re=Ee[0])||void 0===re?void 0:re.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var D=this;return(0,g.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Kn(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:y},D.serviceWorkerReceiverAvailable?800:50)}catch(re){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const y=yield q();return yield ne(y,C,"1"),yield Mt(y,C),!0}catch(y){}return!1})()}_withPendingWrite(y){var D=this;return(0,g.Z)(function*(){D.pendingWrites++;try{yield y()}finally{D.pendingWrites--}})()}_set(y,D){var re=this;return(0,g.Z)(function*(){return re._withPendingWrite((0,g.Z)(function*(){return yield re._withRetries(Ee=>ne(Ee,y,D)),re.localCache[y]=D,re.notifyServiceWorker(y)}))})()}_get(y){var D=this;return(0,g.Z)(function*(){const re=yield D._withRetries(Ee=>function $e(b,p){return Ne.apply(this,arguments)}(Ee,y));return D.localCache[y]=re,re})()}_remove(y){var D=this;return(0,g.Z)(function*(){return D._withPendingWrite((0,g.Z)(function*(){return yield D._withRetries(re=>Mt(re,y)),delete D.localCache[y],D.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,g.Z)(function*(){const D=yield y._withRetries(bt=>{const pn=M(bt,!1).getAll();return new O(pn).toPromise()});if(!D)return[];if(0!==y.pendingWrites)return[];const re=[],Ee=new Set;for(const{fbase_key:bt,value:pn}of D)Ee.add(bt),JSON.stringify(y.localCache[bt])!==JSON.stringify(pn)&&(y.notifyListeners(bt,pn),re.push(bt));for(const bt of Object.keys(y.localCache))y.localCache[bt]&&!Ee.has(bt)&&(y.notifyListeners(bt,null),re.push(bt));return re})()}notifyListeners(y,D){this.localCache[y]=D;const re=this.listeners[y];if(re)for(const Ee of Array.from(re))Ee(D)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Bn(b,p){return ut(b,"POST","/v2/accounts/mfaSignIn:start",Dt(b,p))}function ua(){return(ua=(0,g.Z)(function*(b){return(yield ut(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Un(b){return new Promise((p,y)=>{const D=document.createElement("script");D.setAttribute("src",b),D.onload=p,D.onerror=re=>{const Ee=He("internal-error");Ee.customData=re,y(Ee)},D.type="text/javascript",D.charset="UTF-8",function Ss(){var b,p;return null!==(p=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==p?p:document}().appendChild(D)})}function lo(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ea=1e12;class Fl{constructor(p){this.auth=p,this.counter=Ea,this._widgets=new Map}render(p,y){const D=this.counter;return this._widgets.set(D,new Ya(p,this.auth.name,y||{})),this.counter++,D}reset(p){var y;const D=p||Ea;null===(y=this._widgets.get(D))||void 0===y||y.delete(),this._widgets.delete(D)}getResponse(p){var y;return(null===(y=this._widgets.get(p||Ea))||void 0===y?void 0:y.getResponse())||""}execute(p){var y=this;return(0,g.Z)(function*(){var D;return null===(D=y._widgets.get(p||Ea))||void 0===D||D.execute(),""})()}}class Ya{constructor(p,y,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const re="string"==typeof p?document.getElementById(p):p;ke(re,"argument-error",{appName:y}),this.container=re,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ll(b){const p=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<b;D++)p.push(y.charAt(Math.floor(Math.random()*y.length)));return p.join("")}(50);const{callback:p,"expired-callback":y}=this.params;if(p)try{p(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mu=lo("rcb"),po=new Tr(3e4,6e4);class Ca{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=hr().grecaptcha)||void 0===p?void 0:p.render)}load(p,y=""){return ke(function wc(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),p,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(hr().grecaptcha):new Promise((D,re)=>{const Ee=hr().setTimeout(()=>{re(He(p,"network-request-failed"))},po.get());hr()[mu]=()=>{hr().clearTimeout(Ee),delete hr()[mu];const pn=hr().grecaptcha;if(!pn)return void re(He(p,"internal-error"));const dr=pn.render;pn.render=(Lr,Ci)=>{const hi=dr(Lr,Ci);return this.counter++,hi},this.hostLanguage=y,D(pn)},Un(`https://www.google.com/recaptcha/api.js??${(0,pe.xO)({onload:mu,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(Ee),re(He(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var y;return!!(null===(y=hr().grecaptcha)||void 0===y?void 0:y.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ic{load(p){return(0,g.Z)(function*(){return new Fl(p)})()}clearedOneInstance(){}}const ia="recaptcha",Xl={theme:"light",type:"image"};class nn{constructor(p,y=Object.assign({},Xl),D){this.parameters=y,this.type=ia,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yr(D),this.isInvisible="invisible"===this.parameters.size,ke("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const re="string"==typeof p?document.getElementById(p):p;ke(re,this.auth,"argument-error"),this.container=re,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ic:new Ca,this.validateStartingState()}verify(){var p=this;return(0,g.Z)(function*(){p.assertNotDestroyed();const y=yield p.render(),D=p.getAssertedRecaptcha();return D.getResponse(y)||new Promise(Ee=>{const bt=pn=>{!pn||(p.tokenChangeListeners.delete(bt),Ee(pn))};p.tokenChangeListeners.add(bt),p.isInvisible&&D.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ke(!this.parameters.sitekey,this.auth,"argument-error"),ke(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ke("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return y=>{if(this.tokenChangeListeners.forEach(D=>D(y)),"function"==typeof p)p(y);else if("string"==typeof p){const D=hr()[p];"function"==typeof D&&D(y)}}}assertNotDestroyed(){ke(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,g.Z)(function*(){if(yield p.init(),!p.widgetId){let y=p.container;if(!p.isInvisible){const D=document.createElement("div");y.appendChild(D),y=D}p.widgetId=p.getAssertedRecaptcha().render(y,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,g.Z)(function*(){ke(Dn()&&!jn(),p.auth,"internal-error"),yield function Qa(){let b=null;return new Promise(p=>{"complete"!==document.readyState?(b=()=>p(),window.addEventListener("load",b)):p()}).catch(p=>{throw b&&window.removeEventListener("load",b),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const y=yield function vr(b){return ua.apply(this,arguments)}(p.auth);ke(y,p.auth,"internal-error"),p.parameters.sitekey=y})()}getAssertedRecaptcha(){return ke(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ba{constructor(p,y){this.verificationId=p,this.onConfirmation=y}confirm(p){const y=Ts._fromVerification(this.verificationId,p);return this.onConfirmation(y)}}function Ta(){return(Ta=(0,g.Z)(function*(b,p,y){const D=yr(b),re=yield Xo(D,p,(0,pe.m9)(y));return new ba(re,Ee=>jr(D,Ee))})).apply(this,arguments)}function Gu(){return(Gu=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b);yield W(!1,D,"phone");const re=yield Xo(D.auth,p,(0,pe.m9)(y));return new ba(re,Ee=>ni(D,Ee))})).apply(this,arguments)}function xo(){return(xo=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b),re=yield Xo(D.auth,p,(0,pe.m9)(y));return new ba(re,Ee=>es(D,Ee))})).apply(this,arguments)}function Xo(b,p,y){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,g.Z)(function*(b,p,y){var D;const re=yield y.verify();try{let Ee;if(ke("string"==typeof re,b,"argument-error"),ke(y.type===ia,b,"argument-error"),Ee="string"==typeof p?{phoneNumber:p}:p,"session"in Ee){const bt=Ee.session;if("phoneNumber"in Ee)return ke("enroll"===bt.type,b,"internal-error"),(yield ur(b,{idToken:bt.credential,phoneEnrollmentInfo:{phoneNumber:Ee.phoneNumber,recaptchaToken:re}})).phoneSessionInfo.sessionInfo;{ke("signin"===bt.type,b,"internal-error");const pn=(null===(D=Ee.multiFactorHint)||void 0===D?void 0:D.uid)||Ee.multiFactorUid;return ke(pn,b,"missing-multi-factor-info"),(yield Bn(b,{mfaPendingCredential:bt.credential,mfaEnrollmentId:pn,phoneSignInInfo:{recaptchaToken:re}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:bt}=yield mn(b,{phoneNumber:Ee.phoneNumber,recaptchaToken:re});return bt}}finally{y._reset()}})).apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(b,p){yield B((0,pe.m9)(b),p)})).apply(this,arguments)}let cl=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=yr(y)}verifyPhoneNumber(y,D){return Xo(this.auth,y,(0,pe.m9)(D))}static credential(y,D){return Ts._fromVerification(y,D)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:D,temporaryProof:re}=y;return D&&re?Ts._fromTokenResponse(D,re):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Jo(b,p){return p?et(p):(ke(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Il extends Ki{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Zi(p,this._buildIdpRequest())}_linkToIdToken(p,y){return Zi(p,this._buildIdpRequest(y))}_getReauthenticationResolver(p){return Zi(p,this._buildIdpRequest())}_buildIdpRequest(p){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(y.idToken=p),y}}function Ua(b){return wn(b.auth,new Il(b),b.bypassAuthState)}function _u(b){const{auth:p,user:y}=b;return ke(y,p,"internal-error"),qe(y,new Il(b),b.bypassAuthState)}function ca(b){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(b){const{auth:p,user:y}=b;return ke(y,p,"internal-error"),B(y,new Il(b),b.bypassAuthState)})).apply(this,arguments)}class Xa{constructor(p,y,D,re,Ee=!1){this.auth=p,this.resolver=D,this.user=re,this.bypassAuthState=Ee,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var p=this;return new Promise(function(){var y=(0,g.Z)(function*(D,re){p.pendingPromise={resolve:D,reject:re};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(Ee){p.reject(Ee)}});return function(D,re){return y.apply(this,arguments)}}())}onAuthEvent(p){var y=this;return(0,g.Z)(function*(){const{urlResponse:D,sessionId:re,postBody:Ee,tenantId:bt,error:pn,type:dr}=p;if(pn)return void y.reject(pn);const Lr={auth:y.auth,requestUri:D,sessionId:re,tenantId:bt||void 0,postBody:Ee||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(dr)(Lr))}catch(Ci){y.reject(Ci)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ua;case"linkViaPopup":case"linkViaRedirect":return ca;case"reauthViaPopup":case"reauthViaRedirect":return _u;default:xe(this.auth,"internal-error")}}resolve(p){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ba=new Tr(2e3,1e4);function $a(){return($a=(0,g.Z)(function*(b,p,y){const D=yr(b);an(b,p,Ri);const re=Jo(D,y);return new el(D,"signInViaPopup",p,re).executeNotNull()})).apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b);an(D.auth,p,Ri);const re=Jo(D.auth,y);return new el(D.auth,"reauthViaPopup",p,re,D).executeNotNull()})).apply(this,arguments)}function Vl(){return(Vl=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b);an(D.auth,p,Ri);const re=Jo(D.auth,y);return new el(D.auth,"linkViaPopup",p,re,D).executeNotNull()})).apply(this,arguments)}let el=(()=>{class b extends Xa{constructor(y,D,re,Ee,bt){super(y,D,Ee,bt),this.provider=re,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,g.Z)(function*(){const D=yield y.execute();return ke(D,y.auth,"internal-error"),D})()}onExecution(){var y=this;return(0,g.Z)(function*(){Me(1===y.filter.length,"Popup operations only handle one event");const D=Jt();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],D),y.authWindow.associatedEvent=D,y.resolver._originValidation(y.auth).catch(re=>{y.reject(re)}),y.resolver._isIframeWebStorageSupported(y.auth,re=>{re||y.reject(He(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(He(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var D,re;this.pollId=(null===(re=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===re?void 0:re.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(He(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Ba.get())};y()}}return b.currentPopupAction=null,b})();const ea=new Map;class dl extends Xa{constructor(p,y,D=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,D),this.eventId=null}execute(){var p=()=>super.execute,y=this;return(0,g.Z)(function*(){let D=ea.get(y.auth._key());if(!D){try{const Ee=(yield function tl(b,p){return co.apply(this,arguments)}(y.resolver,y.auth))?yield p().call(y):null;D=()=>Promise.resolve(Ee)}catch(re){D=()=>Promise.reject(re)}ea.set(y.auth._key(),D)}return y.bypassAuthState||ea.set(y.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(p){var y=()=>super.onAuthEvent,D=this;return(0,g.Z)(function*(){if("signInViaRedirect"===p.type)return y().call(D,p);if("unknown"!==p.type){if(p.eventId){const re=yield D.auth._redirectUserForId(p.eventId);if(re)return D.user=re,y().call(D,p);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function co(){return(co=(0,g.Z)(function*(b,p){const y=Ia(p),D=Sl(b);if(!(yield D._isAvailable()))return!1;const re="true"===(yield D._get(y));return yield D._remove(y),re})).apply(this,arguments)}function Ha(b,p){return Io.apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(b,p){return Sl(b)._set(Ia(p),"true")})).apply(this,arguments)}function hl(b,p){ea.set(b._key(),p)}function Sl(b){return et(b._redirectPersistence)}function Ia(b){return ft("pendingRedirect",b.config.apiKey,b.name)}function U(){return(U=(0,g.Z)(function*(b,p,y){const D=yr(b);an(b,p,Ri);const re=Jo(D,y);return yield Ha(re,D),re._openRedirect(D,p,"signInViaRedirect")})).apply(this,arguments)}function je(){return(je=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b);an(D.auth,p,Ri);const re=Jo(D.auth,y);yield Ha(re,D.auth);const Ee=yield Ei(D);return re._openRedirect(D.auth,p,"reauthViaRedirect",Ee)})).apply(this,arguments)}function Vn(){return(Vn=(0,g.Z)(function*(b,p,y){const D=(0,pe.m9)(b);an(D.auth,p,Ri);const re=Jo(D.auth,y);yield W(!1,D,p.providerId),yield Ha(re,D.auth);const Ee=yield Ei(D);return re._openRedirect(D.auth,p,"linkViaRedirect",Ee)})).apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(b,p){return yield yr(b)._initializationPromise,zr(b,p,!1)})).apply(this,arguments)}function zr(b,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(b,p,y=!1){const D=yr(b),re=Jo(D,p),bt=yield new dl(D,re,y).execute();return bt&&!y&&(delete bt.user._redirectEventId,yield D._persistUserIfCurrent(bt.user),yield D._setRedirectUser(null,p)),bt})).apply(this,arguments)}function Ei(b){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,g.Z)(function*(b){const p=Jt(`${b.uid}:::`);return b._redirectEventId=p,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),p})).apply(this,arguments)}class is{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let y=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(p,D)&&(y=!0,this.sendToConsumer(p,D),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Mo(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pa(b);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=p,y=!0)),y}sendToConsumer(p,y){var D;if(p.error&&!Pa(p)){const re=(null===(D=p.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";y.onError(He(this.auth,re))}else y.onAuthEvent(p)}isEventForConsumer(p,y){const D=null===y.eventId||!!p.eventId&&p.eventId===y.eventId;return y.filter.includes(p.type)&&D}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sa(p))}saveEventToCache(p){this.cachedEventUids.add(Sa(p)),this.lastProcessedEventTime=Date.now()}}function Sa(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(p=>p).join("-")}function Pa({type:b,error:p}){return"unknown"===b&&"auth/no-auth-event"===(null==p?void 0:p.code)}function So(b){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,g.Z)(function*(b,p={}){return ut(b,"GET","/v1/projects",p)})).apply(this,arguments)}const ad=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dl=/^https?/;function Bl(){return(Bl=(0,g.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:p}=yield So(b);for(const y of p)try{if(ld(y))return}catch(D){}xe(b,"unauthorized-domain")})).apply(this,arguments)}function ld(b){const p=on(),{protocol:y,hostname:D}=new URL(p);if(b.startsWith("chrome-extension://")){const bt=new URL(b);return""===bt.hostname&&""===D?"chrome-extension:"===y&&b.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===y&&bt.hostname===D}if(!Dl.test(y))return!1;if(ad.test(b))return D===b;const re=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+re+"|"+re+")$","i").test(D)}const ud=new Tr(3e4,6e4);function Na(){const b=hr().___jsl;if(null==b?void 0:b.H)for(const p of Object.keys(b.H))if(b.H[p].r=b.H[p].r||[],b.H[p].L=b.H[p].L||[],b.H[p].r=[...b.H[p].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let vu=null;function Wu(b){return vu=vu||function qd(b){return new Promise((p,y)=>{var D,re,Ee;function bt(){Na(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Na(),y(He(b,"network-request-failed"))},timeout:ud.get()})}if(null===(re=null===(D=hr().gapi)||void 0===D?void 0:D.iframes)||void 0===re?void 0:re.Iframe)p(gapi.iframes.getContext());else{if(!(null===(Ee=hr().gapi)||void 0===Ee?void 0:Ee.load)){const pn=lo("iframefcb");return hr()[pn]=()=>{gapi.load?bt():y(He(b,"network-request-failed"))},Un(`https://apis.google.com/js/api.js?onload=${pn}`).catch(dr=>y(dr))}bt()}}).catch(p=>{throw vu=null,p})}(b),vu}const cd=new Tr(5e3,15e3),to={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ta(b){const p=b.config;ke(p.authDomain,b,"auth-domain-config-required");const y=p.emulator?mr(p,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,D={apiKey:p.apiKey,appName:b.name,v:ae.SDK_VERSION},re=Eu.get(b.config.apiHost);re&&(D.eid=re);const Ee=b._getFrameworks();return Ee.length&&(D.fw=Ee.join(",")),`${y}?${(0,pe.xO)(D).slice(1)}`}function $l(){return $l=(0,g.Z)(function*(b){const p=yield Wu(b),y=hr().gapi;return ke(y,b,"internal-error"),p.open({where:document.body,url:ta(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:to,dontclear:!0},D=>new Promise(function(){var re=(0,g.Z)(function*(Ee,bt){yield D.restyle({setHideOnLeave:!1});const pn=He(b,"network-request-failed"),dr=hr().setTimeout(()=>{bt(pn)},cd.get());function Lr(){hr().clearTimeout(dr),Ee(D)}D.ping(Lr).then(Lr,()=>{bt(pn)})});return function(Ee,bt){return re.apply(this,arguments)}}()))}),$l.apply(this,arguments)}const fl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zu{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function ya(b,p,y,D,re,Ee){ke(b.config.authDomain,b,"auth-domain-config-required"),ke(b.config.apiKey,b,"invalid-api-key");const bt={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:D,v:ae.SDK_VERSION,eventId:re};if(p instanceof Ri){p.setDefaultLanguage(b.languageCode),bt.providerId=p.providerId||"",(0,pe.xb)(p.getCustomParameters())||(bt.customParameters=JSON.stringify(p.getCustomParameters()));for(const[dr,Lr]of Object.entries(Ee||{}))bt[dr]=Lr}if(p instanceof fo){const dr=p.getScopes().filter(Lr=>""!==Lr);dr.length>0&&(bt.scopes=dr.join(","))}b.tenantId&&(bt.tid=b.tenantId);const pn=bt;for(const dr of Object.keys(pn))void 0===pn[dr]&&delete pn[dr];return`${function Gl({config:b}){return b.emulator?mr(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,pe.xO)(pn).slice(1)}`}const tu="webStorageSupport";class ru extends class nu{constructor(p){this.factorId=p}_process(p,y,D){switch(y.type){case"enroll":return this._finalizeEnroll(p,y.credential,D);case"signin":return this._finalizeSignIn(p,y.credential);default:return Ut("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ru(p)}_finalizeEnroll(p,y,D){return function Jn(b,p){return ut(b,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(b,p))}(p,{idToken:y,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,y){return function Ys(b,p){return ut(b,"POST","/v2/accounts/mfaSignIn:finalize",Dt(b,p))}(p,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qu=(()=>{class b{constructor(){}static assertion(y){return ru._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var iu="@firebase/auth";class _a{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var y=this;return(0,g.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const y=this.auth.onIdTokenChanged(D=>{p((null==D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,y),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const y=this.internalListeners.get(p);!y||(this.internalListeners.delete(p),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Da(){return window}function zl(){return(zl=(0,g.Z)(function*(b,p,y){var D;const{BuildInfo:re}=Da();Me(p.sessionId,"AuthEvent did not contain a session ID");const Ee=yield Du(p.sessionId),bt={};return ci()?bt.ibi=re.packageName:cn()?bt.apn=re.packageName:xe(b,"operation-not-supported-in-this-environment"),re.displayName&&(bt.appDisplayName=re.displayName),bt.sessionId=Ee,ya(b,y,p.type,void 0,null!==(D=p.eventId)&&void 0!==D?D:void 0,bt)})).apply(this,arguments)}function Ac(){return(Ac=(0,g.Z)(function*(b){const{BuildInfo:p}=Da(),y={};ci()?y.iosBundleId=p.packageName:cn()?y.androidPackageName=p.packageName:xe(b,"operation-not-supported-in-this-environment"),yield So(b,y)})).apply(this,arguments)}function Iu(){return(Iu=(0,g.Z)(function*(b,p,y){const{cordova:D}=Da();let re=()=>{};try{yield new Promise((Ee,bt)=>{let pn=null;function dr(){var hi;Ee();const Ko=null===(hi=D.plugins.browsertab)||void 0===hi?void 0:hi.close;"function"==typeof Ko&&Ko(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function Lr(){pn||(pn=window.setTimeout(()=>{bt(He(b,"redirect-cancelled-by-user"))},2e3))}function Ci(){"visible"===(null==document?void 0:document.visibilityState)&&Lr()}p.addPassiveListener(dr),document.addEventListener("resume",Lr,!1),cn()&&document.addEventListener("visibilitychange",Ci,!1),re=()=>{p.removePassiveListener(dr),document.removeEventListener("resume",Lr,!1),document.removeEventListener("visibilitychange",Ci,!1),pn&&window.clearTimeout(pn)}})}finally{re()}})).apply(this,arguments)}function Du(b){return ml.apply(this,arguments)}function ml(){return(ml=(0,g.Z)(function*(b){const p=ec(b),y=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(y)).map(re=>re.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ec(b){if(Me(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const p=new ArrayBuffer(b.length),y=new Uint8Array(p);for(let D=0;D<b.length;D++)y[D]=b.charCodeAt(D);return y}(0,pe.Pz)("authIdTokenMaxAge"),function Cu(b){(0,ae._registerComponent)(new pt.wA("auth",(p,{options:y})=>{const D=p.getProvider("app").getImmediate(),re=p.getProvider("heartbeat"),{apiKey:Ee,authDomain:bt}=D.options;return((pn,dr)=>{ke(Ee&&!Ee.includes(":"),"invalid-api-key",{appName:pn.name}),ke(!(null==bt?void 0:bt.includes(":")),"argument-error",{appName:pn.name});const Lr={apiKey:Ee,authDomain:bt,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ss(b)},Ci=new En(pn,dr,Lr);return function at(b,p){const y=(null==p?void 0:p.persistence)||[],D=(Array.isArray(y)?y:[y]).map(et);(null==p?void 0:p.errorMap)&&b._updateErrorMap(p.errorMap),b._initializeWithPersistence(D,null==p?void 0:p.popupRedirectResolver)}(Ci,y),Ci})(D,re)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,y,D)=>{p.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new pt.wA("auth-internal",p=>{const y=yr(p.getProvider("auth").getImmediate());return new _a(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(iu,"0.21.0",function da(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,ae.registerVersion)(iu,"0.21.0","esm2017")}("Browser");class dd extends is{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(p)),super.onEvent(p)}initialized(){var p=this;return(0,g.Z)(function*(){yield p.initPromise})()}}function za(b){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,g.Z)(function*(b){const p=yield ro()._get(go(b));return p&&(yield ro()._remove(go(b))),p})).apply(this,arguments)}function _l(){const b=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const D=Math.floor(Math.random()*p.length);b.push(p.charAt(D))}return b.join("")}function ro(){return et(Be)}function go(b){return ft("authEvent",b.config.apiKey,b.name)}function xu(b){if(!(null==b?void 0:b.includes("?")))return{};const[p,...y]=b.split("?");return(0,pe.zd)(y.join("?"))}function ou(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:He("no-auth-event")}}function Wo(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function Rc(b=(0,pe.z$)()){return!("file:"!==Wo()&&"ionic:"!==Wo()&&"capacitor:"!==Wo()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function rl(){try{const b=self.localStorage,p=Jt();if(b)return b.setItem(p,"1"),b.removeItem(p),!function Pu(b=(0,pe.z$)()){return function _s(){return(0,pe.w1)()&&11===(null==document?void 0:document.documentMode)}()||function aa(b=(0,pe.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,pe.hl)()}catch(b){return nc()&&(0,pe.hl)()}return!1}function nc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ha(){return(function qo(){return"http:"===Wo()||"https:"===Wo()}()||(0,pe.ru)()||Rc())&&!function Fo(){return(0,pe.b$)()||(0,pe.UG)()}()&&rl()&&!nc()}function rc(){return Rc()&&"undefined"!=typeof document}function au(){return(au=(0,g.Z)(function*(){return!!rc()&&new Promise(b=>{const p=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),b(!0)})})})).apply(this,arguments)}const fa={LOCAL:"local",NONE:"none",SESSION:"session"},Ml=ke,hd="persistence";function qi(b){return pd.apply(this,arguments)}function pd(){return(pd=(0,g.Z)(function*(b){yield b._initializationPromise;const p=Nu(),y=ft(hd,b.config.apiKey,b.name);p&&p.setItem(y,b._getPersistence())})).apply(this,arguments)}function Nu(){var b;try{return(null===(b=function vl(){return"undefined"!=typeof window?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(p){return null}}const Ou=ke;class xa{constructor(){this.browserResolver=et(class pl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qt,this._completeRedirectFn=zr,this._overrideRedirectResult=hl}_openPopup(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){var bt;Me(null===(bt=Ee.eventManagers[p._key()])||void 0===bt?void 0:bt.manager,"_initialize() not called before _openPopup()");const pn=ya(p,y,D,on(),re);return function eu(b,p,y,D=500,re=600){const Ee=Math.max((window.screen.availHeight-re)/2,0).toString(),bt=Math.max((window.screen.availWidth-D)/2,0).toString();let pn="";const dr=Object.assign(Object.assign({},fl),{width:D.toString(),height:re.toString(),top:Ee,left:bt}),Lr=(0,pe.z$)().toLowerCase();y&&(pn=Ae(Lr)?"_blank":y),Ge(Lr)&&(p=p||"http://localhost",dr.scrollbars="yes");const Ci=Object.entries(dr).reduce((Ko,[f,c])=>`${Ko}${f}=${c},`,"");if(function ls(b=(0,pe.z$)()){var p;return ci(b)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Lr)&&"_self"!==pn)return function jl(b,p){const y=document.createElement("a");y.href=b,y.target=p;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(D)}(p||"",pn),new Zu(null);const hi=window.open(p||"",pn,Ci);ke(hi,b,"popup-blocked");try{hi.focus()}catch(Ko){}return new Zu(hi)}(p,pn,Jt())})()}_openRedirect(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){return yield Ee._originValidation(p),function li(b){hr().location.href=b}(ya(p,y,D,on(),re)),new Promise(()=>{})})()}_initialize(p){const y=p._key();if(this.eventManagers[y]){const{manager:re,promise:Ee}=this.eventManagers[y];return re?Promise.resolve(re):(Me(Ee,"If manager is not set, promise should be"),Ee)}const D=this.initAndGetManager(p);return this.eventManagers[y]={promise:D},D.catch(()=>{delete this.eventManagers[y]}),D}initAndGetManager(p){var y=this;return(0,g.Z)(function*(){const D=yield function no(b){return $l.apply(this,arguments)}(p),re=new is(p);return D.register("authEvent",Ee=>(ke(null==Ee?void 0:Ee.authEvent,p,"invalid-auth-event"),{status:re.onEvent(Ee.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[p._key()]={manager:re},y.iframes[p._key()]=D,re})()}_isIframeWebStorageSupported(p,y){this.iframes[p._key()].send(tu,{type:tu},re=>{var Ee;const bt=null===(Ee=null==re?void 0:re[0])||void 0===Ee?void 0:Ee[tu];void 0!==bt&&y(!!bt),xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Al(b){return Bl.apply(this,arguments)}(p)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ni()||Re()||ci()}}),this.cordovaResolver=et(class Mc{constructor(){this._redirectPersistence=Qt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zr,this._overrideRedirectResult=hl}_initialize(p){var y=this;return(0,g.Z)(function*(){const D=p._key();let re=y.eventManagers.get(D);return re||(re=new dd(p),y.eventManagers.set(D,re),y.attachCallbackListeners(p,re)),re})()}_openPopup(p){xe(p,"operation-not-supported-in-this-environment")}_openRedirect(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){!function Su(b){var p,y,D,re,Ee,bt,pn,dr,Lr,Ci;const hi=Da();ke("function"==typeof(null===(p=null==hi?void 0:hi.universalLinks)||void 0===p?void 0:p.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ke(void 0!==(null===(y=null==hi?void 0:hi.BuildInfo)||void 0===y?void 0:y.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ke("function"==typeof(null===(Ee=null===(re=null===(D=null==hi?void 0:hi.cordova)||void 0===D?void 0:D.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ee?void 0:Ee.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ke("function"==typeof(null===(dr=null===(pn=null===(bt=null==hi?void 0:hi.cordova)||void 0===bt?void 0:bt.plugins)||void 0===pn?void 0:pn.browsertab)||void 0===dr?void 0:dr.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ke("function"==typeof(null===(Ci=null===(Lr=null==hi?void 0:hi.cordova)||void 0===Lr?void 0:Lr.InAppBrowser)||void 0===Ci?void 0:Ci.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const bt=yield Ee._initialize(p);yield bt.initialized(),bt.resetRedirect(),function zu(){ea.clear()}(),yield Ee._originValidation(p);const pn=function zo(b,p,y=null){return{type:p,eventId:y,urlResponse:null,sessionId:_l(),postBody:null,tenantId:b.tenantId,error:He(b,"no-auth-event")}}(p,D,re);yield function Au(b,p){return ro()._set(go(b),p)}(p,pn);const dr=yield function Tu(b,p,y){return zl.apply(this,arguments)}(p,pn,y),Lr=yield function xc(b){const{cordova:p}=Da();return new Promise(y=>{p.plugins.browsertab.isAvailable(D=>{let re=null;D?p.plugins.browsertab.openUrl(b):re=p.InAppBrowser.open(b,function Qi(b=(0,pe.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),y(re)})})}(dr);return function wu(b,p,y){return Iu.apply(this,arguments)}(p,bt,Lr)})()}_isIframeWebStorageSupported(p,y){throw new Error("Method not implemented.")}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Dc(b){return Ac.apply(this,arguments)}(p)),this.originValidationPromises[y]}attachCallbackListeners(p,y){const{universalLinks:D,handleOpenURL:re,BuildInfo:Ee}=Da(),bt=setTimeout((0,g.Z)(function*(){yield za(p),y.onEvent(ou())}),500),pn=function(){var Ci=(0,g.Z)(function*(hi){clearTimeout(bt);const Ko=yield za(p);let f=null;Ko&&(null==hi?void 0:hi.url)&&(f=function Fa(b,p){var y,D;const re=function Kd(b){const p=xu(b),y=p.link?decodeURIComponent(p.link):void 0,D=xu(y).link,re=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return xu(re).link||re||D||y||b}(p);if(re.includes("/__/auth/callback")){const Ee=xu(re),bt=Ee.firebaseError?function nl(b){try{return JSON.parse(b)}catch(p){return null}}(decodeURIComponent(Ee.firebaseError)):null,pn=null===(D=null===(y=null==bt?void 0:bt.code)||void 0===y?void 0:y.split("auth/"))||void 0===D?void 0:D[1],dr=pn?He(pn):null;return dr?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:dr,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:re,postBody:null}}return null}(Ko,hi.url)),y.onEvent(f||ou())});return function(Ko){return Ci.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,pn);const dr=re,Lr=`${Ee.packageName.toLowerCase()}://`;Da().handleOpenURL=function(){var Ci=(0,g.Z)(function*(hi){if(hi.toLowerCase().startsWith(Lr)&&pn({url:hi}),"function"==typeof dr)try{dr(hi)}catch(Ko){console.error(Ko)}});return function(hi){return Ci.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Qt,this._completeRedirectFn=zr,this._overrideRedirectResult=hl}_initialize(p){var y=this;return(0,g.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openPopup(p,y,D,re)})()}_openRedirect(p,y,D,re){var Ee=this;return(0,g.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openRedirect(p,y,D,re)})()}_isIframeWebStorageSupported(p,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,y)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return rc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ou(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,g.Z)(function*(){if(p.underlyingResolver)return;const y=yield function ic(){return au.apply(this,arguments)}();p.underlyingResolver=y?p.cordovaResolver:p.browserResolver})()}}function Pc(b){return b.unwrap()}function gd(b){return Nc(b)}function Nc(b){const{_tokenResponse:p}=b instanceof pe.ZR?b.customData:b;if(!p)return null;if(!(b instanceof pe.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return cl.credentialFromResult(b);const y=p.providerId;if(!y||"password"===y)return null;let D;switch(y){case"google.com":D=js;break;case"facebook.com":D=io;break;case"github.com":D=Vo;break;case"twitter.com":D=Oo;break;default:const{oauthIdToken:re,oauthAccessToken:Ee,oauthTokenSecret:bt,pendingToken:pn,nonce:dr}=p;return Ee||bt||re||pn?pn?y.startsWith("saml.")?Hs._create(y,pn):xt._fromParams({providerId:y,signInMethod:y,pendingToken:pn,idToken:re,accessToken:Ee}):new Ms(y).credential({idToken:re,accessToken:Ee,rawNonce:dr}):null}return b instanceof pe.ZR?D.credentialFromError(b):D.credentialFromResult(b)}function pa(b,p){return p.catch(y=>{throw y instanceof pe.ZR&&function Fh(b,p){var y;const D=null===(y=p.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===(null==p?void 0:p.code))p.resolver=new kc(b,function zt(b,p){var y;const D=(0,pe.m9)(b),re=p;return ke(p.customData.operationType,D,"argument-error"),ke(null===(y=re.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,D,"argument-error"),ir._fromError(D,re)}(b,p));else if(D){const re=Nc(p),Ee=p;re&&(Ee.credential=re,Ee.tenantId=D.tenantId||void 0,Ee.email=D.email||void 0,Ee.phoneNumber=D.phoneNumber||void 0)}}(b,y),y}).then(y=>{const re=y.user;return{operationType:y.operationType,credential:gd(y),additionalUserInfo:vn(y),user:il.getOrCreate(re)}})}function md(b,p){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(b,p){const y=yield p;return{verificationId:y.verificationId,confirm:D=>pa(b,y.confirm(D))}})).apply(this,arguments)}class kc{constructor(p,y){this.resolver=y,this.auth=function Qd(b){return b.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return pa(Pc(this.auth),this.resolver.resolveSignIn(p))}}class il{constructor(p){this._delegate=p,this.multiFactor=function Z(b){const p=(0,pe.m9)(b);return Ws.has(p)||Ws.set(p,Ai._fromUser(p)),Ws.get(p)}(p)}static getOrCreate(p){return il.USER_MAP.has(p)||il.USER_MAP.set(p,new il(p)),il.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var y=this;return(0,g.Z)(function*(){return pa(y.auth,ni(y._delegate,p))})()}linkWithPhoneNumber(p,y){var D=this;return(0,g.Z)(function*(){return md(D.auth,function sa(b,p,y){return Gu.apply(this,arguments)}(D._delegate,p,y))})()}linkWithPopup(p){var y=this;return(0,g.Z)(function*(){return pa(y.auth,function Ja(b,p,y){return Vl.apply(this,arguments)}(y._delegate,p,xa))})()}linkWithRedirect(p){var y=this;return(0,g.Z)(function*(){return yield qi(yr(y.auth)),function Pt(b,p,y){return function Kt(b,p,y){return Vn.apply(this,arguments)}(b,p,y)}(y._delegate,p,xa)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var y=this;return(0,g.Z)(function*(){return pa(y.auth,es(y._delegate,p))})()}reauthenticateWithPhoneNumber(p,y){return md(this.auth,function oa(b,p,y){return xo.apply(this,arguments)}(this._delegate,p,y))}reauthenticateWithPopup(p){return pa(this.auth,function ja(b,p,y){return eo.apply(this,arguments)}(this._delegate,p,xa))}reauthenticateWithRedirect(p){var y=this;return(0,g.Z)(function*(){return yield qi(yr(y.auth)),function Y(b,p,y){return function de(b,p,y){return je.apply(this,arguments)}(b,p,y)}(y._delegate,p,xa)})()}sendEmailVerification(p){return function A(b,p){return I.apply(this,arguments)}(this._delegate,p)}unlink(p){var y=this;return(0,g.Z)(function*(){return yield function Bi(b,p){return bi.apply(this,arguments)}(y._delegate,p),y})()}updateEmail(p){return function ge(b,p){return le((0,pe.m9)(b),p,null)}(this._delegate,p)}updatePassword(p){return function ce(b,p){return le((0,pe.m9)(b),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function yu(b,p){return vo.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function be(b,p){return oe.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,y){return function P(b,p,y){return z.apply(this,arguments)}(this._delegate,p,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}il.USER_MAP=new WeakMap;const sl=ke;let Fc=(()=>{class b{constructor(y,D){if(this.app=y,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:re}=y.options;sl(re,"invalid-api-key",{appName:y.name}),sl(re,"invalid-api-key",{appName:y.name});const Ee="undefined"!=typeof window?xa:void 0;this._delegate=D.initialize({options:{persistence:Po(re,y.name),popupRedirectResolver:Ee}}),this._delegate._updateErrorMap(un),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?il.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,D){!function Mi(b,p,y){const D=yr(b);ke(D._canInitEmulator,D,"emulator-config-failed"),ke(/^https?:\/\//.test(p),D,"invalid-emulator-scheme");const re=!!(null==y?void 0:y.disableWarnings),Ee=bs(p),{host:bt,port:pn}=function Ui(b){const p=bs(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(p.length));if(!y)return{host:"",port:null};const D=y[2].split("@").pop()||"",re=/^(\[[^\]]+\])(:|$)/.exec(D);if(re){const Ee=re[1];return{host:Ee,port:us(D.substr(Ee.length+1))}}{const[Ee,bt]=D.split(":");return{host:Ee,port:us(bt)}}}(p);D.config.emulator={url:`${Ee}//${bt}${null===pn?"":`:${pn}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:bt,port:pn,protocol:Ee.replace(":",""),options:Object.freeze({disableWarnings:re})}),re||function Ti(){function b(){const p=document.createElement("p"),y=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,y,D)}applyActionCode(y){return function ye(b,p){return Ye.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return Pn(this._delegate,y)}confirmPasswordReset(y,D){return function G(b,p,y){return V.apply(this,arguments)}(this._delegate,y,D)}createUserWithEmailAndPassword(y,D){var re=this;return(0,g.Z)(function*(){return pa(re._delegate,function Ve(b,p,y){return it.apply(this,arguments)}(re._delegate,y,D))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function ts(b,p){return l.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Xn(b,p){const y=Qs.parseLink(p);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,g.Z)(function*(){sl(ha(),y._delegate,"operation-not-supported-in-this-environment");const D=yield function Hr(b,p){return Zr.apply(this,arguments)}(y._delegate,xa);return D?pa(y._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function xl(b,p){yr(b)._logFramework(p)}(this._delegate,y)}onAuthStateChanged(y,D,re){const{next:Ee,error:bt,complete:pn}=yd(y,D,re);return this._delegate.onAuthStateChanged(Ee,bt,pn)}onIdTokenChanged(y,D,re){const{next:Ee,error:bt,complete:pn}=yd(y,D,re);return this._delegate.onIdTokenChanged(Ee,bt,pn)}sendSignInLinkToEmail(y,D){return function _n(b,p,y){return br.apply(this,arguments)}(this._delegate,y,D)}sendPasswordResetEmail(y,D){return function _o(b,p,y){return Q.apply(this,arguments)}(this._delegate,y,D||void 0)}setPersistence(y){var D=this;return(0,g.Z)(function*(){let re;switch(function fd(b,p){Ml(Object.values(fa).includes(p),b,"invalid-persistence-type"),(0,pe.b$)()?Ml(p!==fa.SESSION,b,"unsupported-persistence-type"):(0,pe.UG)()?Ml(p===fa.NONE,b,"unsupported-persistence-type"):nc()?Ml(p===fa.NONE||p===fa.LOCAL&&(0,pe.hl)(),b,"unsupported-persistence-type"):Ml(p===fa.NONE||rl(),b,"unsupported-persistence-type")}(D._delegate,y),y){case fa.SESSION:re=Qt;break;case fa.LOCAL:re=(yield et(Or)._isAvailable())?Or:Be;break;case fa.NONE:re=Ue;break;default:return xe("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(re)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return pa(this._delegate,function so(b){return yo.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return pa(this._delegate,jr(this._delegate,y))}signInWithCustomToken(y){return pa(this._delegate,function ns(b,p){return Kr.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,D){return pa(this._delegate,function qt(b,p,y){return jr((0,pe.m9)(b),ho.credential(p,y))}(this._delegate,y,D))}signInWithEmailLink(y,D){return pa(this._delegate,function ri(b,p,y){return _i.apply(this,arguments)}(this._delegate,y,D))}signInWithPhoneNumber(y,D){return md(this._delegate,function wo(b,p,y){return Ta.apply(this,arguments)}(this._delegate,y,D))}signInWithPopup(y){var D=this;return(0,g.Z)(function*(){return sl(ha(),D._delegate,"operation-not-supported-in-this-environment"),pa(D._delegate,function uo(b,p,y){return $a.apply(this,arguments)}(D._delegate,y,xa))})()}signInWithRedirect(y){var D=this;return(0,g.Z)(function*(){return sl(ha(),D._delegate,"operation-not-supported-in-this-environment"),yield qi(D._delegate),function Ul(b,p,y){return function Ra(b,p,y){return U.apply(this,arguments)}(b,p,y)}(D._delegate,y,xa)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function K(b,p){return Ce.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=fa,b})();function yd(b,p,y){let D=b;"function"!=typeof b&&({next:D,error:p,complete:y}=b);const re=D;return{next:bt=>re(bt&&il.getOrCreate(bt)),error:p,complete:y}}function Po(b,p){const y=function lu(b,p){const y=Nu();if(!y)return[];const D=ft(hd,b,p);switch(y.getItem(D)){case fa.NONE:return[Ue];case fa.LOCAL:return[Or,Qt];case fa.SESSION:return[Qt];default:return[]}}(b,p);if("undefined"!=typeof self&&!y.includes(Or)&&y.push(Or),"undefined"!=typeof window)for(const D of[Be,Qt])y.includes(D)||y.push(D);return y.includes(Ue)||y.push(Ue),y}class ol{constructor(){this.providerId="phone",this._delegate=new cl(Pc(F.Z.auth()))}static credential(p,y){return cl.credential(p,y)}verifyPhoneNumber(p,y){return this._delegate.verifyPhoneNumber(p,y)}unwrap(){return this._delegate}}ol.PHONE_SIGN_IN_METHOD=cl.PHONE_SIGN_IN_METHOD,ol.PROVIDER_ID=cl.PROVIDER_ID;const Wa=ke;class ku{constructor(p,y,D=F.Z.app()){var re;Wa(null===(re=D.options)||void 0===re?void 0:re.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new nn(p,y,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Lc(b){b.INTERNAL.registerComponent(new pt.wA("auth-compat",p=>{const y=p.getProvider("app-compat").getImmediate(),D=p.getProvider("auth");return new Fc(y,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ho,FacebookAuthProvider:io,GithubAuthProvider:Vo,GoogleAuthProvider:js,OAuthProvider:Ms,SAMLAuthProvider:Fs,PhoneAuthProvider:ol,PhoneMultiFactorGenerator:Qu,RecaptchaVerifier:ku,TwitterAuthProvider:Oo,Auth:Fc,AuthCredential:Ki,Error:pe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.3.0")}(F.Z)},6197:(Wn,At,j)=>{j.d(At,{N8:()=>b,jM:()=>qo,iH:()=>ro,t8:()=>Mc});var g=j(5861),F=j(9681),pe=j(4859),ae=j(2090),We=j(1877);const Xe="@firebase/database";let Ze="";class Oe{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,d){null==d?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,ae.Wl)(d))}get(c){const d=this.domStorage_.getItem(this.prefixedName_(c));return null==d?null:(0,ae.cI)(d)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class Pe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,d){null==d?delete this.cache_[c]:this.cache_[c]=d}get(c){return(0,ae.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const Et=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){const c=window[f];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new Oe(c)}}catch(c){}return new Pe},Cn=Et("localStorage"),vt=Et("sessionStorage"),un=new We.Yd("@firebase/database"),In=function(){let f=1;return function(){return f++}}(),Ot=function(f){const c=(0,ae.dS)(f),d=new ae.gQ;d.update(c);const v=d.digest();return ae.US.encodeByteArray(v)},Zt=function(...f){let c="";for(let d=0;d<f.length;d++){const v=f[d];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?c+=Zt.apply(null,v):c+="object"==typeof v?(0,ae.Wl)(v):v,c+=" "}return c};let Ln=null,fn=!0;const He=function(...f){if(!0===fn&&(fn=!1,null===Ln&&!0===vt.get("logging_enabled")&&function(f,c){(0,ae.hu)(!c||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(un.logLevel=We.in.VERBOSE,Ln=un.log.bind(un),c&&vt.set("logging_enabled",!0)):"function"==typeof f?Ln=f:(Ln=null,vt.remove("logging_enabled"))}(!0)),Ln){const c=Zt.apply(null,f);Ln(c)}},St=function(f){return function(...c){He(f,...c)}},an=function(...f){const c="FIREBASE INTERNAL ERROR: "+Zt(...f);un.error(c)},Ht=function(...f){const c=`FIREBASE FATAL ERROR: ${Zt(...f)}`;throw un.error(c),new Error(c)},ke=function(...f){const c="FIREBASE WARNING: "+Zt(...f);un.warn(c)},Me=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},et="[MIN_NAME]",wt="[MAX_NAME]",at=function(f,c){if(f===c)return 0;if(f===et||c===wt)return-1;if(c===et||f===wt)return 1;{const d=Yt(f),v=Yt(c);return null!==d?null!==v?d-v==0?f.length-c.length:d-v:-1:null!==v?1:f<c?-1:1}},on=function(f,c){return f===c?0:f<c?-1:1},Dn=function(f,c){if(c&&f in c)return c[f];throw new Error("Missing required key ("+f+") in object: "+(0,ae.Wl)(c))},nr=function(f){if("object"!=typeof f||null===f)return(0,ae.Wl)(f);const c=[];for(const v in f)c.push(v);c.sort();let d="{";for(let v=0;v<c.length;v++)0!==v&&(d+=","),d+=(0,ae.Wl)(c[v]),d+=":",d+=nr(f[c[v]]);return d+="}",d},rr=function(f,c){const d=f.length;if(d<=c)return[f];const v=[];for(let x=0;x<d;x+=c)v.push(f.substring(x,x+c>d?d:x+c));return v};function yn(f,c){for(const d in f)f.hasOwnProperty(d)&&c(d,f[d])}const Tr=function(f){(0,ae.hu)(!Me(f),"Invalid JSON number");const v=1023;let x,H,te,we,Qe;0===f?(H=0,te=0,x=1/f==-1/0?1:0):(x=f<0,(f=Math.abs(f))>=Math.pow(2,1-v)?(we=Math.min(Math.floor(Math.log(f)/Math.LN2),v),H=we+v,te=Math.round(f*Math.pow(2,52-we)-Math.pow(2,52))):(H=0,te=Math.round(f/Math.pow(2,-1074))));const lt=[];for(Qe=52;Qe;Qe-=1)lt.push(te%2?1:0),te=Math.floor(te/2);for(Qe=11;Qe;Qe-=1)lt.push(H%2?1:0),H=Math.floor(H/2);lt.push(x?1:0),lt.reverse();const ln=lt.join("");let Tn="";for(Qe=0;Qe<64;Qe+=8){let xn=parseInt(ln.substr(Qe,8),2).toString(16);1===xn.length&&(xn="0"+xn),Tn+=xn}return Tn.toLowerCase()},st=new RegExp("^-?(0*)\\d{1,10}$"),Yt=function(f){if(st.test(f)){const c=Number(f);if(c>=-2147483648&&c<=2147483647)return c}return null},Rt=function(f){try{f()}catch(c){setTimeout(()=>{throw ke("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},Gn=function(f,c){const d=setTimeout(f,c);return"number"==typeof d&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(d):"object"==typeof d&&d.unref&&d.unref(),d};class tr{constructor(c,d){this.appName_=c,this.appCheckProvider=d,this.appCheck=null==d?void 0:d.getImmediate({optional:!0}),this.appCheck||null==d||d.get().then(v=>this.appCheck=v)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((d,v)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){var d;null===(d=this.appCheckProvider)||void 0===d||d.get().then(v=>v.addTokenListener(c))}notifyForInvalidToken(){ke(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class lr{constructor(c,d,v){this.appName_=c,this.firebaseOptions_=d,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(x=>this.auth_=x)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(d=>d&&"auth/token-not-initialized"===d.code?(He("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)):new Promise((d,v)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(d=>d.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(d=>d.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ke(c)}}let Xr=(()=>{class f{constructor(d){this.accessToken=d}getToken(d){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(d){d(this.accessToken)}removeTokenChangeListener(d){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const rs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ct="websocket",Gt="long_polling";class rn{constructor(c,d,v,x,H=!1,te="",we=!1){this.secure=d,this.namespace=v,this.webSocketOnly=x,this.nodeAdmin=H,this.persistenceKey=te,this.includeNamespaceInQueryParams=we,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cn.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&Cn.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zn(f,c,d){let v;if((0,ae.hu)("string"==typeof c,"typeof type must == string"),(0,ae.hu)("object"==typeof d,"typeof params must == object"),c===ct)v=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(c!==Gt)throw new Error("Unknown connection type: "+c);v=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function bn(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(d.ns=f.namespace);const x=[];return yn(d,(H,te)=>{x.push(H+"="+te)}),v+x.join("&")}class Jr{constructor(){this.counters_={}}incrementCounter(c,d=1){(0,ae.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=d}get(){return(0,ae.p$)(this.counters_)}}const Gr={},Br={};function as(f){const c=f.toString();return Gr[c]||(Gr[c]=new Jr),Gr[c]}class ui{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,d){this.closeAfterResponse=c,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,d){for(this.pendingResponses[c]=d;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let x=0;x<v.length;++x)v[x]&&Rt(()=>{this.onMessage_(v[x])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ae{constructor(c,d,v,x,H,te,we){this.connId=c,this.repoInfo=d,this.applicationId=v,this.appCheckToken=x,this.authToken=H,this.transportSessionId=te,this.lastSessionId=we,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=St(c),this.stats_=as(d),this.urlFn=Qe=>(this.appCheckToken&&(Qe.ac=this.appCheckToken),zn(d,Gt,Qe))}open(c,d){this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new ui(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,ae.Yr)()||"complete"===document.readyState)f();else{let c=!1;const d=function(){document.body?c||(c=!0,f()):setTimeout(d,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&d()}),window.attachEvent("onload",d))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gt((...H)=>{const[te,we,Qe,lt,ln]=H;if(this.incrementIncomingBytes_(H),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===te)this.id=we,this.password=Qe;else{if("close"!==te)throw new Error("Unrecognized command received: "+te);we?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(we,()=>{this.onClosed_()})):this.onClosed_()}},(...H)=>{const[te,we]=H;this.incrementIncomingBytes_(H),this.myPacketOrderer.handleResponse(te,we)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&rs.test(location.hostname)&&(v.r="f");const x=this.urlFn(v);this.log_("Connecting via long-poll to "+x),this.scriptTagHolder.addTag(x,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ae.forceAllow_=!0}static forceDisallow(){Ae.forceDisallow_=!0}static isAvailable(){return!((0,ae.Yr)()||!Ae.forceAllow_&&(Ae.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const d=(0,ae.Wl)(c);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const v=(0,ae.h$)(d),x=rr(v,1840);for(let H=0;H<x.length;H++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,x.length,x[H]),this.curSegmentNum++}addDisconnectPingFrame(c,d){if((0,ae.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=c,v.pw=d,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const d=(0,ae.Wl)(c).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)}}class gt{constructor(c,d,v,x){if(this.onDisconnect=v,this.urlFn=x,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ae.Yr)())this.commandCB=c,this.onMessageCB=d;else{this.uniqueCallbackIdentifier=In(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=d,this.myIFrame=gt.createIFrame_();let H="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(H='<script>document.domain="'+document.domain+'";<\/script>');const te="<html><body>"+H+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(te),this.myIFrame.doc.close()}catch(we){He("frame writing exception"),we.stack&&He(we.stack),He(we)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||He("No IE domain setting required")}catch(d){const v=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,d){for(this.myID=c,this.myPW=d,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let d=this.urlFn(c),v="",x=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const te=this.pendingSegs.shift();v=v+"&seg"+x+"="+te.seg+"&ts"+x+"="+te.ts+"&d"+x+"="+te.d,x++}return d+=v,this.addLongPollTag_(d,this.currentSerial),!0}return!1}enqueueSegment(c,d,v){this.pendingSegs.push({seg:c,ts:d,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(c,d){this.outstandingRequests.add(d);const v=()=>{this.outstandingRequests.delete(d),this.newRequest_()},x=setTimeout(v,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(x),v()})}addTag(c,d){(0,ae.Yr)()?this.doNodeLongPoll(c,d):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=c,v.onload=v.onreadystatechange=function(){const x=v.readyState;(!x||"loaded"===x||"complete"===x)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),d())},v.onerror=()=>{He("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let qn=null;"undefined"!=typeof MozWebSocket?qn=MozWebSocket:"undefined"!=typeof WebSocket&&(qn=WebSocket);let ci=(()=>{class f{constructor(d,v,x,H,te,we,Qe){this.connId=d,this.applicationId=x,this.appCheckToken=H,this.authToken=te,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=St(this.connId),this.stats_=as(v),this.connURL=f.connectionURL_(v,we,Qe,H,x),this.nodeAdmin=v.nodeAdmin}static connectionURL_(d,v,x,H,te){const we={v:"5"};return!(0,ae.Yr)()&&"undefined"!=typeof location&&location.hostname&&rs.test(location.hostname)&&(we.r="f"),v&&(we.s=v),x&&(we.ls=x),H&&(we.ac=H),te&&(we.p=te),zn(d,ct,we)}open(d,v){this.onDisconnect=v,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cn.set("previous_websocket_failure",!0);try{let x;if((0,ae.Yr)()){x={headers:{"User-Agent":`Firebase/5/${Ze}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(x.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(x.headers["X-Firebase-AppCheck"]=this.appCheckToken);const te=process.env,we=0===this.connURL.indexOf("wss://")?te.HTTPS_PROXY||te.https_proxy:te.HTTP_PROXY||te.http_proxy;we&&(x.proxy={origin:we})}this.mySock=new qn(this.connURL,[],x)}catch(x){this.log_("Error instantiating WebSocket.");const H=x.message||x.data;return H&&this.log_(H),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=x=>{this.handleIncomingFrame(x)},this.mySock.onerror=x=>{this.log_("WebSocket error.  Closing connection.");const H=x.message||x.data;H&&this.log_(H),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let d=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const x=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);x&&x.length>1&&parseFloat(x[1])<4.4&&(d=!0)}return!d&&null!==qn&&!f.forceDisallow_}static previouslyFailed(){return Cn.isInMemoryStorage||!0===Cn.get("previous_websocket_failure")}markConnectionHealthy(){Cn.remove("previous_websocket_failure")}appendFrame_(d){if(this.frames.push(d),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const x=(0,ae.cI)(v);this.onMessage(x)}}handleNewFrameCount_(d){this.totalFrames=d,this.frames=[]}extractFrameCount_(d){if((0,ae.hu)(null===this.frames,"We already have a frame buffer"),d.length<=6){const v=Number(d);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),d}handleIncomingFrame(d){if(null===this.mySock)return;const v=d.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const x=this.extractFrameCount_(v);null!==x&&this.appendFrame_(x)}}send(d){this.resetKeepAlive();const v=(0,ae.Wl)(d);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const x=rr(v,16384);x.length>1&&this.sendString_(String(x.length));for(let H=0;H<x.length;H++)this.sendString_(x[H])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(d){try{this.mySock.send(d)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),Qi=(()=>{class f{constructor(d){this.initTransports_(d)}static get ALL_TRANSPORTS(){return[Ae,ci]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(d){const v=ci&&ci.isAvailable();let x=v&&!ci.previouslyFailed();if(d.webSocketOnly&&(v||ke("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),x=!0),x)this.transports_=[ci];else{const H=this.transports_=[];for(const te of f.ALL_TRANSPORTS)te&&te.isAvailable()&&H.push(te);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class Ki{constructor(c,d,v,x,H,te,we,Qe,lt,ln){this.id=c,this.repoInfo_=d,this.applicationId_=v,this.appCheckToken_=x,this.authToken_=H,this.onMessage_=te,this.onReady_=we,this.onDisconnect_=Qe,this.onKill_=lt,this.lastSessionId=ln,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=St("c:"+this.id+":"),this.transportManager_=new Qi(d),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(d,v)},Math.floor(0));const x=c.healthyTimeout||0;x>0&&(this.healthyTimeout_=Gn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(x)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return d=>{c===this.conn_?this.onConnectionLost_(d):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return d=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(d):c===this.secondaryConn_?this.onSecondaryMessageReceived_(d):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const d=c.t;"a"===d?this.upgradeIfSecondaryHealthy_():"r"===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const d=Dn("t",c),v=Dn("d",c);if("c"===d)this.onSecondaryControl_(v);else{if("d"!==d)throw new Error("Unknown protocol layer: "+d);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const d=Dn("t",c),v=Dn("d",c);"c"===d?this.onControl_(v):"d"===d&&this.onDataMessage_(v)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const d=Dn("t",c);if("d"in c){const v=c.d;if("h"===d)this.onHandshake_(v);else if("n"===d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let x=0;x<this.pendingDataMessages.length;++x)this.onDataMessage_(this.pendingDataMessages[x]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===d?this.onConnectionShutdown_(v):"r"===d?this.onReset_(v):"e"===d?an("Server Error: "+v):"o"===d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):an("Unknown control packet command: "+d)}}onHandshake_(c){const d=c.ts,v=c.v,x=c.h;this.sessionId=c.s,this.repoInfo_.host=x,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),"5"!==v&&ke("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,v),Gn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,d){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Gi{put(c,d,v,x){}merge(c,d,v,x){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,d,v){}onDisconnectMerge(c,d,v){}onDisconnectCancel(c,d){}reportStats(c){}}class Ar{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,ae.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...d){if(Array.isArray(this.listeners_[c])){const v=[...this.listeners_[c]];for(let x=0;x<v.length;x++)v[x].callback.apply(v[x].context,d)}}on(c,d,v){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:d,context:v});const x=this.getInitialEvent(c);x&&d.apply(v,x)}off(c,d,v){this.validateEventType_(c);const x=this.listeners_[c]||[];for(let H=0;H<x.length;H++)if(x[H].callback===d&&(!v||v===x[H].context))return void x.splice(H,1)}validateEventType_(c){(0,ae.hu)(this.allowedEvents_.find(d=>d===c),"Unknown event: "+c)}}class os extends Ar{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ae.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new os}getInitialEvent(c){return(0,ae.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}class Yr{constructor(c,d){if(void 0===d){this.pieces_=c.split("/");let v=0;for(let x=0;x<this.pieces_.length;x++)this.pieces_[x].length>0&&(this.pieces_[v]=this.pieces_[x],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=d}toString(){let c="";for(let d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(c+="/"+this.pieces_[d]);return c||"/"}}function wr(){return new Yr("")}function Ir(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function Xi(f){return f.pieces_.length-f.pieceNum_}function Qr(f){let c=f.pieceNum_;return c<f.pieces_.length&&c++,new Yr(f.pieces_,c)}function wi(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function zi(f,c=0){return f.pieces_.slice(f.pieceNum_+c)}function hs(f){if(f.pieceNum_>=f.pieces_.length)return null;const c=[];for(let d=f.pieceNum_;d<f.pieces_.length-1;d++)c.push(f.pieces_[d]);return new Yr(c,0)}function kr(f,c){const d=[];for(let v=f.pieceNum_;v<f.pieces_.length;v++)d.push(f.pieces_[v]);if(c instanceof Yr)for(let v=c.pieceNum_;v<c.pieces_.length;v++)d.push(c.pieces_[v]);else{const v=c.split("/");for(let x=0;x<v.length;x++)v[x].length>0&&d.push(v[x])}return new Yr(d,0)}function qr(f){return f.pieceNum_>=f.pieces_.length}function cs(f,c){const d=Ir(f),v=Ir(c);if(null===d)return c;if(d===v)return cs(Qr(f),Qr(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+f+")")}function ks(f,c){if(Xi(f)!==Xi(c))return!1;for(let d=f.pieceNum_,v=c.pieceNum_;d<=f.pieces_.length;d++,v++)if(f.pieces_[d]!==c.pieces_[v])return!1;return!0}function Hi(f,c){let d=f.pieceNum_,v=c.pieceNum_;if(Xi(f)>Xi(c))return!1;for(;d<f.pieces_.length;){if(f.pieces_[d]!==c.pieces_[v])return!1;++d,++v}return!0}class $o{constructor(c,d){this.errorPrefix_=d,this.parts_=zi(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,ae.ug)(this.parts_[v]);Zi(this)}}function Zi(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ct(f))}function Ct(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class dt extends Ar{constructor(){let c,d;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(d="visibilitychange",c="hidden"):void 0!==document.mozHidden?(d="mozvisibilitychange",c="mozHidden"):void 0!==document.msHidden?(d="msvisibilitychange",c="msHidden"):void 0!==document.webkitHidden&&(d="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,d&&document.addEventListener(d,()=>{const v=!document[c];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new dt}getInitialEvent(c){return(0,ae.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const xt=1e3;let Ts,vs=(()=>{class f extends Gi{constructor(d,v,x,H,te,we,Qe,lt){if(super(),this.repoInfo_=d,this.applicationId_=v,this.onDataUpdate_=x,this.onConnectStatus_=H,this.onServerInfoUpdate_=te,this.authTokenProvider_=we,this.appCheckTokenProvider_=Qe,this.authOverride_=lt,this.id=f.nextPersistentConnectionId_++,this.log_=St("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,lt&&!(0,ae.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dt.getInstance().on("visible",this.onVisible_,this),-1===d.host.indexOf("fblocal")&&os.getInstance().on("online",this.onOnline_,this)}sendRequest(d,v,x){const H=++this.requestNumber_,te={r:H,a:d,b:v};this.log_((0,ae.Wl)(te)),(0,ae.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(te),x&&(this.requestCBHash_[H]=x)}get(d){this.initConnection_();const v=new ae.BH,x={p:d._path.toString(),q:d._queryObject};return this.outstandingGets_.push({action:"g",request:x,onComplete:we=>{const Qe=we.d;"ok"===we.s?v.resolve(Qe):v.reject(Qe)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(d,v,x,H){this.initConnection_();const te=d._queryIdentifier,we=d._path.toString();this.log_("Listen called for "+we+" "+te),this.listens.has(we)||this.listens.set(we,new Map),(0,ae.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ae.hu)(!this.listens.get(we).has(te),"listen() called twice for same path/queryId.");const Qe={onComplete:H,hashFn:v,query:d,tag:x};this.listens.get(we).set(te,Qe),this.connected_&&this.sendListen_(Qe)}sendGet_(d){const v=this.outstandingGets_[d];this.sendRequest("g",v.request,x=>{delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(x)})}sendListen_(d){const v=d.query,x=v._path.toString(),H=v._queryIdentifier;this.log_("Listen on "+x+" for "+H);const te={p:x};d.tag&&(te.q=v._queryObject,te.t=d.tag),te.h=d.hashFn(),this.sendRequest("q",te,Qe=>{const lt=Qe.d,ln=Qe.s;f.warnOnListenWarnings_(lt,v),(this.listens.get(x)&&this.listens.get(x).get(H))===d&&(this.log_("listen response",Qe),"ok"!==ln&&this.removeListen_(x,H),d.onComplete&&d.onComplete(ln,lt))})}static warnOnListenWarnings_(d,v){if(d&&"object"==typeof d&&(0,ae.r3)(d,"w")){const x=(0,ae.DV)(d,"w");if(Array.isArray(x)&&~x.indexOf("no_index")){const H='".indexOn": "'+v._queryParams.getIndex().toString()+'"',te=v._path.toString();ke(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${H} at ${te} to your security rules for better performance.`)}}}refreshAuthToken(d){this.authToken_=d,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(d)}reduceReconnectDelayIfAdminCredential_(d){(d&&40===d.length||(0,ae.GJ)(d))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(d){this.appCheckToken_=d,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const d=this.authToken_,v=(0,ae.w9)(d)?"auth":"gauth",x={cred:d};null===this.authOverride_?x.noauth=!0:"object"==typeof this.authOverride_&&(x.authvar=this.authOverride_),this.sendRequest(v,x,H=>{const te=H.s,we=H.d||"error";this.authToken_===d&&("ok"===te?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(te,we))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},d=>{const v=d.s,x=d.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,x)})}unlisten(d,v){const x=d._path.toString(),H=d._queryIdentifier;this.log_("Unlisten called for "+x+" "+H),(0,ae.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(x,H)&&this.connected_&&this.sendUnlisten_(x,H,d._queryObject,v)}sendUnlisten_(d,v,x,H){this.log_("Unlisten on "+d+" for "+v);const te={p:d};H&&(te.q=x,te.t=H),this.sendRequest("n",te)}onDisconnectPut(d,v,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",d,v,x):this.onDisconnectRequestQueue_.push({pathString:d,action:"o",data:v,onComplete:x})}onDisconnectMerge(d,v,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",d,v,x):this.onDisconnectRequestQueue_.push({pathString:d,action:"om",data:v,onComplete:x})}onDisconnectCancel(d,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",d,null,v):this.onDisconnectRequestQueue_.push({pathString:d,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(d,v,x,H){const te={p:v,d:x};this.log_("onDisconnect "+d,te),this.sendRequest(d,te,we=>{H&&setTimeout(()=>{H(we.s,we.d)},Math.floor(0))})}put(d,v,x,H){this.putInternal("p",d,v,x,H)}merge(d,v,x,H){this.putInternal("m",d,v,x,H)}putInternal(d,v,x,H,te){this.initConnection_();const we={p:v,d:x};void 0!==te&&(we.h=te),this.outstandingPuts_.push({action:d,request:we,onComplete:H}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(d){const v=this.outstandingPuts_[d].action,x=this.outstandingPuts_[d].request,H=this.outstandingPuts_[d].onComplete;this.outstandingPuts_[d].queued=this.connected_,this.sendRequest(v,x,te=>{this.log_(v+" response",te),delete this.outstandingPuts_[d],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),H&&H(te.s,te.d)})}reportStats(d){if(this.connected_){const v={c:d};this.log_("reportStats",v),this.sendRequest("s",v,x=>{"ok"!==x.s&&this.log_("reportStats","Error sending stats: "+x.d)})}}onDataMessage_(d){if("r"in d){this.log_("from server: "+(0,ae.Wl)(d));const v=d.r,x=this.requestCBHash_[v];x&&(delete this.requestCBHash_[v],x(d.b))}else{if("error"in d)throw"A server-side error has occurred: "+d.error;"a"in d&&this.onDataPush_(d.a,d.b)}}onDataPush_(d,v){this.log_("handleServerMessage",d,v),"d"===d?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===d?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===d?this.onListenRevoked_(v.p,v.q):"ac"===d?this.onAuthRevoked_(v.s,v.d):"apc"===d?this.onAppCheckRevoked_(v.s,v.d):"sd"===d?this.onSecurityDebugPacket_(v):an("Unrecognized action received from server: "+(0,ae.Wl)(d)+"\nAre you using the latest client?")}onReady_(d,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(d),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(d){(0,ae.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(d))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(d){d&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xt,this.realtime_||this.scheduleConnect_(0)),this.visible_=d}onOnline_(d){d?(this.log_("Browser went online."),this.reconnectDelay_=xt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=xt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const d=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-d);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var d=this;return(0,g.Z)(function*(){if(d.shouldReconnect_()){d.log_("Making a connection attempt"),d.lastConnectionAttemptTime_=(new Date).getTime(),d.lastConnectionEstablishedTime_=null;const v=d.onDataMessage_.bind(d),x=d.onReady_.bind(d),H=d.onRealtimeDisconnect_.bind(d),te=d.id+":"+f.nextConnectionId_++,we=d.lastSessionId;let Qe=!1,lt=null;const ln=function(){lt?lt.close():(Qe=!0,H())};d.realtime_={close:ln,sendRequest:function(Cr){(0,ae.hu)(lt,"sendRequest call when we're not connected not allowed."),lt.sendRequest(Cr)}};const xn=d.forceTokenRefresh_;d.forceTokenRefresh_=!1;try{const[Cr,pi]=yield Promise.all([d.authTokenProvider_.getToken(xn),d.appCheckTokenProvider_.getToken(xn)]);Qe?He("getToken() completed but was canceled"):(He("getToken() completed. Creating connection."),d.authToken_=Cr&&Cr.accessToken,d.appCheckToken_=pi&&pi.token,lt=new Ki(te,d.repoInfo_,d.applicationId_,d.appCheckToken_,d.authToken_,v,x,H,Ds=>{ke(Ds+" ("+d.repoInfo_.toString()+")"),d.interrupt("server_kill")},we))}catch(Cr){d.log_("Failed to get token: "+Cr),Qe||(d.repoInfo_.nodeAdmin&&ke(Cr),ln())}}})()}interrupt(d){He("Interrupting connection for reason: "+d),this.interruptReasons_[d]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(d){He("Resuming connection for reason: "+d),delete this.interruptReasons_[d],(0,ae.xb)(this.interruptReasons_)&&(this.reconnectDelay_=xt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(d){const v=d-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let d=0;d<this.outstandingPuts_.length;d++){const v=this.outstandingPuts_[d];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[d],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(d,v){let x;x=v?v.map(te=>nr(te)).join("$"):"default";const H=this.removeListen_(d,x);H&&H.onComplete&&H.onComplete("permission_denied")}removeListen_(d,v){const x=new Yr(d).toString();let H;if(this.listens.has(x)){const te=this.listens.get(x);H=te.get(v),te.delete(v),0===te.size&&this.listens.delete(x)}else H=void 0;return H}onAuthRevoked_(d,v){He("Auth token revoked: "+d+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===d||"permission_denied"===d)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(d,v){He("App check token revoked: "+d+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===d||"permission_denied"===d)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(d){this.securityDebugCallback_?this.securityDebugCallback_(d):"msg"in d&&console.log("FIREBASE: "+d.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const d of this.listens.values())for(const v of d.values())this.sendListen_(v);for(let d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){const d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(let d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)}sendConnectStats_(){const d={};let v="js";(0,ae.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),d["sdk."+v+"."+Ze.replace(/\./g,"-")]=1,(0,ae.uI)()?d["framework.cordova"]=1:(0,ae.b$)()&&(d["framework.reactnative"]=1),this.reportStats(d)}shouldReconnect_(){const d=os.getInstance().currentlyOnline();return(0,ae.xb)(this.interruptReasons_)&&d}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class ai{constructor(c,d){this.name=c,this.node=d}static Wrap(c,d){return new ai(c,d)}}class ms{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,d){const v=new ai(et,c),x=new ai(et,d);return 0!==this.compare(v,x)}minPost(){return ai.MIN}}class Qo extends ms{static get __EMPTY_NODE(){return Ts}static set __EMPTY_NODE(c){Ts=c}compare(c,d){return at(c.name,d.name)}isDefinedOn(c){throw(0,ae.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,d){return!1}minPost(){return ai.MIN}maxPost(){return new ai(wt,Ts)}makePost(c,d){return(0,ae.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new ai(c,Ts)}toString(){return".key"}}const Es=new Qo;class Qs{constructor(c,d,v,x,H=null){this.isReverse_=x,this.resultGenerator_=H,this.nodeStack_=[];let te=1;for(;!c.isEmpty();)if(te=d?v(c.key,d):1,x&&(te*=-1),te<0)c=this.isReverse_?c.left:c.right;else{if(0===te){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let d,c=this.nodeStack_.pop();if(d=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return d}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let io,ws=(()=>{class f{constructor(d,v,x,H,te){this.key=d,this.value=v,this.color=null!=x?x:f.RED,this.left=null!=H?H:Ri.EMPTY_NODE,this.right=null!=te?te:Ri.EMPTY_NODE}copy(d,v,x,H,te){return new f(null!=d?d:this.key,null!=v?v:this.value,null!=x?x:this.color,null!=H?H:this.left,null!=te?te:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)}reverseTraversal(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(d,v,x){let H=this;const te=x(d,H.key);return H=te<0?H.copy(null,null,null,H.left.insert(d,v,x),null):0===te?H.copy(null,v,null,null,null):H.copy(null,null,null,null,H.right.insert(d,v,x)),H.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ri.EMPTY_NODE;let d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.removeMin_(),null),d.fixUp_()}remove(d,v){let x,H;if(x=this,v(d,x.key)<0)!x.left.isEmpty()&&!x.left.isRed_()&&!x.left.left.isRed_()&&(x=x.moveRedLeft_()),x=x.copy(null,null,null,x.left.remove(d,v),null);else{if(x.left.isRed_()&&(x=x.rotateRight_()),!x.right.isEmpty()&&!x.right.isRed_()&&!x.right.left.isRed_()&&(x=x.moveRedRight_()),0===v(d,x.key)){if(x.right.isEmpty())return Ri.EMPTY_NODE;H=x.right.min_(),x=x.copy(H.key,H.value,null,null,x.right.removeMin_())}x=x.copy(null,null,null,null,x.right.remove(d,v))}return x.fixUp_()}isRed_(){return this.color}fixUp_(){let d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d}moveRedLeft_(){let d=this.colorFlip_();return d.right.left.isRed_()&&(d=d.copy(null,null,null,null,d.right.rotateRight_()),d=d.rotateLeft_(),d=d.colorFlip_()),d}moveRedRight_(){let d=this.colorFlip_();return d.left.left.isRed_()&&(d=d.rotateRight_(),d=d.colorFlip_()),d}rotateLeft_(){const d=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)}rotateRight_(){const d=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)}colorFlip_(){const d=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,v)}checkMaxDepth_(){const d=this.check_();return Math.pow(2,d)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class Ri{constructor(c,d=Ri.EMPTY_NODE){this.comparator_=c,this.root_=d}insert(c,d){return new Ri(this.comparator_,this.root_.insert(c,d,this.comparator_).copy(null,null,ws.BLACK,null,null))}remove(c){return new Ri(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,ws.BLACK,null,null))}get(c){let d,v=this.root_;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d)return v.value;d<0?v=v.left:d>0&&(v=v.right)}return null}getPredecessorKey(c){let d,v=this.root_,x=null;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d){if(v.left.isEmpty())return x?x.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}d<0?v=v.left:d>0&&(x=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new Qs(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,d){return new Qs(this.root_,c,this.comparator_,!1,d)}getReverseIteratorFrom(c,d){return new Qs(this.root_,c,this.comparator_,!0,d)}getReverseIterator(c){return new Qs(this.root_,null,this.comparator_,!0,c)}}function fo(f,c){return at(f.name,c.name)}function Ms(f,c){return at(f,c)}Ri.EMPTY_NODE=new class ho{copy(c,d,v,x,H){return this}insert(c,d,v){return new ws(c,d,null)}remove(c,d){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Vo=function(f){return"number"==typeof f?"number:"+Tr(f):"string:"+f},Xs=function(f){if(f.isLeafNode()){const c=f.val();(0,ae.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,ae.r3)(c,".sv"),"Priority must be a string or number.")}else(0,ae.hu)(f===io||f.isEmpty(),"priority of unexpected type.");(0,ae.hu)(f===io||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Hs,Fs,Oo,Is=(()=>{class f{constructor(d,v=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=d,this.priorityNode_=v,this.lazyHash_=null,(0,ae.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Xs(this.priorityNode_)}static set __childrenNodeConstructor(d){Hs=d}static get __childrenNodeConstructor(){return Hs}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(d){return new f(this.value_,d)}getImmediateChild(d){return".priority"===d?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(d){return qr(d)?this:".priority"===Ir(d)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(d,v){return null}updateImmediateChild(d,v){return".priority"===d?this.updatePriority(v):v.isEmpty()&&".priority"!==d?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,v).updatePriority(this.priorityNode_)}updateChild(d,v){const x=Ir(d);return null===x?v:v.isEmpty()&&".priority"!==x?this:((0,ae.hu)(".priority"!==x||1===Xi(d),".priority must be the last token in a path"),this.updateImmediateChild(x,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qr(d),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(d,v){return!1}val(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let d="";this.priorityNode_.isEmpty()||(d+="priority:"+Vo(this.priorityNode_.val())+":");const v=typeof this.value_;d+=v+":",d+="number"===v?Tr(this.value_):this.value_,this.lazyHash_=Ot(d)}return this.lazyHash_}getValue(){return this.value_}compareTo(d){return d===f.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof f.__childrenNodeConstructor?-1:((0,ae.hu)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))}compareToLeafNode_(d){const v=typeof d.value_,x=typeof this.value_,H=f.VALUE_TYPE_ORDER.indexOf(v),te=f.VALUE_TYPE_ORDER.indexOf(x);return(0,ae.hu)(H>=0,"Unknown leaf type: "+v),(0,ae.hu)(te>=0,"Unknown leaf type: "+x),H===te?"object"===x?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:te-H}withIndex(){return this}isIndexed(){return!0}equals(d){if(d===this)return!0;if(d.isLeafNode()){const v=d;return this.value_===v.value_&&this.priorityNode_.equals(v.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const ki=new class Gs extends ms{compare(c,d){const v=c.node.getPriority(),x=d.node.getPriority(),H=v.compareTo(x);return 0===H?at(c.name,d.name):H}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,d){return!c.getPriority().equals(d.getPriority())}minPost(){return ai.MIN}maxPost(){return new ai(wt,new Is("[PRIORITY-POST]",Oo))}makePost(c,d){const v=Fs(c);return new ai(d,new Is("[PRIORITY-POST]",v))}toString(){return".priority"}},so=Math.log(2);class yo{constructor(c){this.count=parseInt(Math.log(c+1)/so,10),this.current_=this.count-1;const x=(H=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&x}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const Rs=function(f,c,d,v){f.sort(c);const x=function(Qe,lt){const ln=lt-Qe;let Tn,xn;if(0===ln)return null;if(1===ln)return Tn=f[Qe],xn=d?d(Tn):Tn,new ws(xn,Tn.node,ws.BLACK,null,null);{const Cr=parseInt(ln/2,10)+Qe,pi=x(Qe,Cr),Ds=x(Cr+1,lt);return Tn=f[Cr],xn=d?d(Tn):Tn,new ws(xn,Tn.node,ws.BLACK,pi,Ds)}},we=function(Qe){let lt=null,ln=null,Tn=f.length;const xn=function(pi,Ds){const la=Tn-pi,Fu=Tn;Tn-=pi;const Vc=x(la+1,Fu),Wl=f[la],Lh=d?d(Wl):Wl;Cr(new ws(Lh,Wl.node,Ds,null,Vc))},Cr=function(pi){lt?(lt.left=pi,lt=pi):(ln=pi,lt=pi)};for(let pi=0;pi<Qe.count;++pi){const Ds=Qe.nextBitIsOne(),la=Math.pow(2,Qe.count-(pi+1));Ds?xn(la,ws.BLACK):(xn(la,ws.BLACK),xn(la,ws.RED))}return ln}(new yo(f.length));return new Ri(v||c,we)};let zs;const Ls={};class Bi{constructor(c,d){this.indexes_=c,this.indexSet_=d}static get Default(){return(0,ae.hu)(Ls&&ki,"ChildrenNode.ts has not been loaded"),zs=zs||new Bi({".priority":Ls},{".priority":ki}),zs}get(c){const d=(0,ae.DV)(this.indexes_,c);if(!d)throw new Error("No index defined for "+c);return d instanceof Ri?d:null}hasIndex(c){return(0,ae.r3)(this.indexSet_,c.toString())}addIndex(c,d){(0,ae.hu)(c!==Es,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let x=!1;const H=d.getIterator(ai.Wrap);let we,te=H.getNext();for(;te;)x=x||c.isDefinedOn(te.node),v.push(te),te=H.getNext();we=x?Rs(v,c.getCompare()):Ls;const Qe=c.toString(),lt=Object.assign({},this.indexSet_);lt[Qe]=c;const ln=Object.assign({},this.indexes_);return ln[Qe]=we,new Bi(ln,lt)}addToIndexes(c,d){const v=(0,ae.UI)(this.indexes_,(x,H)=>{const te=(0,ae.DV)(this.indexSet_,H);if((0,ae.hu)(te,"Missing index implementation for "+H),x===Ls){if(te.isDefinedOn(c.node)){const we=[],Qe=d.getIterator(ai.Wrap);let lt=Qe.getNext();for(;lt;)lt.name!==c.name&&we.push(lt),lt=Qe.getNext();return we.push(c),Rs(we,te.getCompare())}return Ls}{const we=d.get(c.name);let Qe=x;return we&&(Qe=Qe.remove(new ai(c.name,we))),Qe.insert(c,c.node)}});return new Bi(v,this.indexSet_)}removeFromIndexes(c,d){const v=(0,ae.UI)(this.indexes_,x=>{if(x===Ls)return x;{const H=d.get(c.name);return H?x.remove(new ai(c.name,H)):x}});return new Bi(v,this.indexSet_)}}let bi,B=(()=>{class f{constructor(d,v,x){this.children_=d,this.priorityNode_=v,this.indexMap_=x,this.lazyHash_=null,this.priorityNode_&&Xs(this.priorityNode_),this.children_.isEmpty()&&(0,ae.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return bi||(bi=new f(new Ri(Ms),null,Bi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||bi}updatePriority(d){return this.children_.isEmpty()?this:new f(this.children_,d,this.indexMap_)}getImmediateChild(d){if(".priority"===d)return this.getPriority();{const v=this.children_.get(d);return null===v?bi:v}}getChild(d){const v=Ir(d);return null===v?this:this.getImmediateChild(v).getChild(Qr(d))}hasChild(d){return null!==this.children_.get(d)}updateImmediateChild(d,v){if((0,ae.hu)(v,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(v);{const x=new ai(d,v);let H,te;v.isEmpty()?(H=this.children_.remove(d),te=this.indexMap_.removeFromIndexes(x,this.children_)):(H=this.children_.insert(d,v),te=this.indexMap_.addToIndexes(x,this.children_));const we=H.isEmpty()?bi:this.priorityNode_;return new f(H,we,te)}}updateChild(d,v){const x=Ir(d);if(null===x)return v;{(0,ae.hu)(".priority"!==Ir(d)||1===Xi(d),".priority must be the last token in a path");const H=this.getImmediateChild(x).updateChild(Qr(d),v);return this.updateImmediateChild(x,H)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(d){if(this.isEmpty())return null;const v={};let x=0,H=0,te=!0;if(this.forEachChild(ki,(we,Qe)=>{v[we]=Qe.val(d),x++,te&&f.INTEGER_REGEXP_.test(we)?H=Math.max(H,Number(we)):te=!1}),!d&&te&&H<2*x){const we=[];for(const Qe in v)we[Qe]=v[Qe];return we}return d&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let d="";this.getPriority().isEmpty()||(d+="priority:"+Vo(this.getPriority().val())+":"),this.forEachChild(ki,(v,x)=>{const H=x.hash();""!==H&&(d+=":"+v+":"+H)}),this.lazyHash_=""===d?"":Ot(d)}return this.lazyHash_}getPredecessorChildName(d,v,x){const H=this.resolveIndex_(x);if(H){const te=H.getPredecessorKey(new ai(d,v));return te?te.name:null}return this.children_.getPredecessorKey(d)}getFirstChildName(d){const v=this.resolveIndex_(d);if(v){const x=v.minKey();return x&&x.name}return this.children_.minKey()}getFirstChild(d){const v=this.getFirstChildName(d);return v?new ai(v,this.children_.get(v)):null}getLastChildName(d){const v=this.resolveIndex_(d);if(v){const x=v.maxKey();return x&&x.name}return this.children_.maxKey()}getLastChild(d){const v=this.getLastChildName(d);return v?new ai(v,this.children_.get(v)):null}forEachChild(d,v){const x=this.resolveIndex_(d);return x?x.inorderTraversal(H=>v(H.name,H.node)):this.children_.inorderTraversal(v)}getIterator(d){return this.getIteratorFrom(d.minPost(),d)}getIteratorFrom(d,v){const x=this.resolveIndex_(v);if(x)return x.getIteratorFrom(d,H=>H);{const H=this.children_.getIteratorFrom(d.name,ai.Wrap);let te=H.peek();for(;null!=te&&v.compare(te,d)<0;)H.getNext(),te=H.peek();return H}}getReverseIterator(d){return this.getReverseIteratorFrom(d.maxPost(),d)}getReverseIteratorFrom(d,v){const x=this.resolveIndex_(v);if(x)return x.getReverseIteratorFrom(d,H=>H);{const H=this.children_.getReverseIteratorFrom(d.name,ai.Wrap);let te=H.peek();for(;null!=te&&v.compare(te,d)>0;)H.getNext(),te=H.peek();return H}}compareTo(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===W?-1:0}withIndex(d){if(d===Es||this.indexMap_.hasIndex(d))return this;{const v=this.indexMap_.addIndex(d,this.children_);return new f(this.children_,this.priorityNode_,v)}}isIndexed(d){return d===Es||this.indexMap_.hasIndex(d)}equals(d){if(d===this)return!0;if(d.isLeafNode())return!1;{const v=d;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const x=this.getIterator(ki),H=v.getIterator(ki);let te=x.getNext(),we=H.getNext();for(;te&&we;){if(te.name!==we.name||!te.node.equals(we.node))return!1;te=x.getNext(),we=H.getNext()}return null===te&&null===we}return!1}return!1}}resolveIndex_(d){return d===Es?null:this.indexMap_.get(d.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const W=new class he extends B{constructor(){super(new Ri(Ms),B.EMPTY_NODE,Bi.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return B.EMPTY_NODE}isEmpty(){return!1}};function qe(f,c=null){if(null===f)return B.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(c=f[".priority"]),(0,ae.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new Is(f,qe(c));if(f instanceof Array){let d=B.EMPTY_NODE;return yn(f,(v,x)=>{if((0,ae.r3)(f,v)&&"."!==v.substring(0,1)){const H=qe(x);(H.isLeafNode()||!H.isEmpty())&&(d=d.updateImmediateChild(v,H))}}),d.updatePriority(qe(c))}{const d=[];let v=!1;if(yn(f,(te,we)=>{if("."!==te.substring(0,1)){const Qe=qe(we);Qe.isEmpty()||(v=v||!Qe.getPriority().isEmpty(),d.push(new ai(te,Qe)))}}),0===d.length)return B.EMPTY_NODE;const H=Rs(d,fo,te=>te.name,Ms);if(v){const te=Rs(d,ki.getCompare());return new B(H,qe(c),new Bi({".priority":te},{".priority":ki}))}return new B(H,qe(c),Bi.Default)}}Object.defineProperties(ai,{MIN:{value:new ai(et,B.EMPTY_NODE)},MAX:{value:new ai(wt,W)}}),Qo.__EMPTY_NODE=B.EMPTY_NODE,Is.__childrenNodeConstructor=B,function js(f){io=f}(W),function Js(f){Oo=f}(W),function fs(f){Fs=f}(qe);class sn extends ms{constructor(c){super(),this.indexPath_=c,(0,ae.hu)(!qr(c)&&".priority"!==Ir(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,d){const v=this.extractChild(c.node),x=this.extractChild(d.node),H=v.compareTo(x);return 0===H?at(c.name,d.name):H}makePost(c,d){const v=qe(c),x=B.EMPTY_NODE.updateChild(this.indexPath_,v);return new ai(d,x)}maxPost(){const c=B.EMPTY_NODE.updateChild(this.indexPath_,W);return new ai(wt,c)}toString(){return zi(this.indexPath_,0).join("/")}}const fr=new class wn extends ms{compare(c,d){const v=c.node.compareTo(d.node);return 0===v?at(c.name,d.name):v}isDefinedOn(c){return!0}indexedValueChanged(c,d){return!c.equals(d)}minPost(){return ai.MIN}maxPost(){return ai.MAX}makePost(c,d){const v=qe(c);return new ai(d,v)}toString(){return".value"}};function jr(f){return{type:"value",snapshotNode:f}}function ei(f,c){return{type:"child_added",snapshotNode:c,childName:f}}function ni(f,c){return{type:"child_removed",snapshotNode:c,childName:f}}function fi(f,c,d){return{type:"child_changed",snapshotNode:c,childName:f,oldSnap:d}}class Di{constructor(c){this.index_=c}updateChild(c,d,v,x,H,te){(0,ae.hu)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const we=c.getImmediateChild(d);return we.getChild(x).equals(v.getChild(x))&&we.isEmpty()===v.isEmpty()||(null!=te&&(v.isEmpty()?c.hasChild(d)?te.trackChildChange(ni(d,we)):(0,ae.hu)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):we.isEmpty()?te.trackChildChange(ei(d,v)):te.trackChildChange(fi(d,v,we))),c.isLeafNode()&&v.isEmpty())?c:c.updateImmediateChild(d,v).withIndex(this.index_)}updateFullNode(c,d,v){return null!=v&&(c.isLeafNode()||c.forEachChild(ki,(x,H)=>{d.hasChild(x)||v.trackChildChange(ni(x,H))}),d.isLeafNode()||d.forEachChild(ki,(x,H)=>{if(c.hasChild(x)){const te=c.getImmediateChild(x);te.equals(H)||v.trackChildChange(fi(x,H,te))}else v.trackChildChange(ei(x,H))})),d.withIndex(this.index_)}updatePriority(c,d){return c.isEmpty()?B.EMPTY_NODE:c.updatePriority(d)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Fi{constructor(c){this.indexedFilter_=new Di(c.getIndex()),this.index_=c.getIndex(),this.startPost_=Fi.getStartPost_(c),this.endPost_=Fi.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const d=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,v=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return d&&v}updateChild(c,d,v,x,H,te){return this.matches(new ai(d,v))||(v=B.EMPTY_NODE),this.indexedFilter_.updateChild(c,d,v,x,H,te)}updateFullNode(c,d,v){d.isLeafNode()&&(d=B.EMPTY_NODE);let x=d.withIndex(this.index_);x=x.updatePriority(B.EMPTY_NODE);const H=this;return d.forEachChild(ki,(te,we)=>{H.matches(new ai(te,we))||(x=x.updateImmediateChild(te,B.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,x,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const d=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),d)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const d=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),d)}return c.getIndex().maxPost()}}class oo{constructor(c){this.withinDirectionalStart=d=>this.reverse_?this.withinEndPost(d):this.withinStartPost(d),this.withinDirectionalEnd=d=>this.reverse_?this.withinStartPost(d):this.withinEndPost(d),this.withinStartPost=d=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),d);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=d=>{const v=this.index_.compare(d,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new Fi(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,d,v,x,H,te){return this.rangedFilter_.matches(new ai(d,v))||(v=B.EMPTY_NODE),c.getImmediateChild(d).equals(v)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,d,v,x,H,te):this.fullLimitUpdateChild_(c,d,v,H,te)}updateFullNode(c,d,v){let x;if(d.isLeafNode()||d.isEmpty())x=B.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<d.numChildren()&&d.isIndexed(this.index_)){let H;x=B.EMPTY_NODE.withIndex(this.index_),H=this.reverse_?d.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let te=0;for(;H.hasNext()&&te<this.limit_;){const we=H.getNext();if(this.withinDirectionalStart(we)){if(!this.withinDirectionalEnd(we))break;x=x.updateImmediateChild(we.name,we.node),te++}}}else{let H;x=d.withIndex(this.index_),x=x.updatePriority(B.EMPTY_NODE),H=this.reverse_?x.getReverseIterator(this.index_):x.getIterator(this.index_);let te=0;for(;H.hasNext();){const we=H.getNext();te<this.limit_&&this.withinDirectionalStart(we)&&this.withinDirectionalEnd(we)?te++:x=x.updateImmediateChild(we.name,B.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,x,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,d,v,x,H){let te;if(this.reverse_){const Tn=this.index_.getCompare();te=(xn,Cr)=>Tn(Cr,xn)}else te=this.index_.getCompare();const we=c;(0,ae.hu)(we.numChildren()===this.limit_,"");const Qe=new ai(d,v),lt=this.reverse_?we.getFirstChild(this.index_):we.getLastChild(this.index_),ln=this.rangedFilter_.matches(Qe);if(we.hasChild(d)){const Tn=we.getImmediateChild(d);let xn=x.getChildAfterChild(this.index_,lt,this.reverse_);for(;null!=xn&&(xn.name===d||we.hasChild(xn.name));)xn=x.getChildAfterChild(this.index_,xn,this.reverse_);const Cr=null==xn?1:te(xn,Qe);if(ln&&!v.isEmpty()&&Cr>=0)return null!=H&&H.trackChildChange(fi(d,v,Tn)),we.updateImmediateChild(d,v);{null!=H&&H.trackChildChange(ni(d,Tn));const Ds=we.updateImmediateChild(d,B.EMPTY_NODE);return null!=xn&&this.rangedFilter_.matches(xn)?(null!=H&&H.trackChildChange(ei(xn.name,xn.node)),Ds.updateImmediateChild(xn.name,xn.node)):Ds}}return v.isEmpty()?c:ln&&te(lt,Qe)>=0?(null!=H&&(H.trackChildChange(ni(lt.name,lt.node)),H.trackChildChange(ei(d,v))),we.updateImmediateChild(d,v).updateImmediateChild(lt.name,B.EMPTY_NODE)):c}}class ns{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ki}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ae.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ae.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:et}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ae.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ae.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ae.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ki}copy(){const c=new ns;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function ye(f){const c={};if(f.isDefault())return c;let d;if(f.index_===ki?d="$priority":f.index_===fr?d="$value":f.index_===Es?d="$key":((0,ae.hu)(f.index_ instanceof sn,"Unrecognized index type!"),d=f.index_.toString()),c.orderBy=(0,ae.Wl)(d),f.startSet_){const v=f.startAfterSet_?"startAfter":"startAt";c[v]=(0,ae.Wl)(f.indexStartValue_),f.startNameSet_&&(c[v]+=","+(0,ae.Wl)(f.indexStartName_))}if(f.endSet_){const v=f.endBeforeSet_?"endBefore":"endAt";c[v]=(0,ae.Wl)(f.indexEndValue_),f.endNameSet_&&(c[v]+=","+(0,ae.Wl)(f.indexEndName_))}return f.limitSet_&&(f.isViewFromLeft()?c.limitToFirst=f.limit_:c.limitToLast=f.limit_),c}function Ye(f){const c={};if(f.startSet_&&(c.sp=f.indexStartValue_,f.startNameSet_&&(c.sn=f.indexStartName_),c.sin=!f.startAfterSet_),f.endSet_&&(c.ep=f.indexEndValue_,f.endNameSet_&&(c.en=f.indexEndName_),c.ein=!f.endBeforeSet_),f.limitSet_){c.l=f.limit_;let d=f.viewFrom_;""===d&&(d=f.isViewFromLeft()?"l":"r"),c.vf=d}return f.index_!==ki&&(c.i=f.index_.toString()),c}class Pn extends Gi{constructor(c,d,v,x){super(),this.repoInfo_=c,this.onDataUpdate_=d,this.authTokenProvider_=v,this.appCheckTokenProvider_=x,this.log_=St("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,d){return void 0!==d?"tag$"+d:((0,ae.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,d,v,x){const H=c._path.toString();this.log_("Listen called for "+H+" "+c._queryIdentifier);const te=Pn.getListenId_(c,v),we={};this.listens_[te]=we;const Qe=ye(c._queryParams);this.restRequest_(H+".json",Qe,(lt,ln)=>{let Tn=ln;if(404===lt&&(Tn=null,lt=null),null===lt&&this.onDataUpdate_(H,Tn,!1,v),(0,ae.DV)(this.listens_,te)===we){let xn;xn=lt?401===lt?"permission_denied":"rest_error:"+lt:"ok",x(xn,null)}})}unlisten(c,d){const v=Pn.getListenId_(c,d);delete this.listens_[v]}get(c){const d=ye(c._queryParams),v=c._path.toString(),x=new ae.BH;return this.restRequest_(v+".json",d,(H,te)=>{let we=te;404===H&&(we=null,H=null),null===H?(this.onDataUpdate_(v,we,!1,null),x.resolve(we)):x.reject(new Error(we))}),x.promise}refreshAuthToken(c){}restRequest_(c,d={},v){return d.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([x,H])=>{x&&x.accessToken&&(d.auth=x.accessToken),H&&H.token&&(d.ac=H.token);const te=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,ae.xO)(d);this.log_("Sending REST request for "+te);const we=new XMLHttpRequest;we.onreadystatechange=()=>{if(v&&4===we.readyState){this.log_("REST Response for "+te+" received. status:",we.status,"response:",we.responseText);let Qe=null;if(we.status>=200&&we.status<300){try{Qe=(0,ae.cI)(we.responseText)}catch(lt){ke("Failed to parse JSON response for "+te+": "+we.responseText)}v(null,Qe)}else 401!==we.status&&404!==we.status&&ke("Got unsuccessful REST response for "+te+" Status: "+we.status),v(we.status);v=null}},we.open("GET",te,!0),we.send()})}}class ee{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,d){this.rootNode_=this.rootNode_.updateChild(c,d)}}function K(){return{value:null,children:new Map}}function Ce(f,c,d){if(qr(c))f.value=d,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(c,d);else{const v=Ir(c);f.children.has(v)||f.children.set(v,K()),Ce(f.children.get(v),c=Qr(c),d)}}function it(f,c,d){null!==f.value?d(c,f.value):function qt(f,c){f.children.forEach((d,v)=>{c(v,d)})}(f,(v,x)=>{it(x,new Yr(c.toString()+"/"+v),d)})}class _n{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),d=Object.assign({},c);return this.last_&&yn(this.last_,(v,x)=>{d[v]=d[v]-x}),this.last_=c,d}}class _i{constructor(c,d){this.server_=d,this.statsToReport_={},this.statsListener_=new _n(c);const v=1e4+2e4*Math.random();Gn(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const c=this.statsListener_.get(),d={};let v=!1;yn(c,(x,H)=>{H>0&&(0,ae.r3)(this.statsToReport_,x)&&(d[x]=H,v=!0)}),v&&this.server_.reportStats(d),Gn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var yi=(()=>{return(f=yi||(yi={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",yi;var f})();function l(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class A{constructor(c,d,v){this.path=c,this.affectedTree=d,this.revert=v,this.type=yi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(qr(this.path)){if(null!=this.affectedTree.value)return(0,ae.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const d=this.affectedTree.subtree(new Yr(c));return new A(wr(),d,this.revert)}}return(0,ae.hu)(Ir(this.path)===c,"operationForChild called for unrelated child."),new A(Qr(this.path),this.affectedTree,this.revert)}}class I{constructor(c,d){this.source=c,this.path=d,this.type=yi.LISTEN_COMPLETE}operationForChild(c){return qr(this.path)?new I(this.source,wr()):new I(this.source,Qr(this.path))}}class P{constructor(c,d,v){this.source=c,this.path=d,this.snap=v,this.type=yi.OVERWRITE}operationForChild(c){return qr(this.path)?new P(this.source,wr(),this.snap.getImmediateChild(c)):new P(this.source,Qr(this.path),this.snap)}}class z{constructor(c,d,v){this.source=c,this.path=d,this.children=v,this.type=yi.MERGE}operationForChild(c){if(qr(this.path)){const d=this.children.subtree(new Yr(c));return d.isEmpty()?null:d.value?new P(this.source,wr(),d.value):new z(this.source,wr(),d)}return(0,ae.hu)(Ir(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new z(this.source,Qr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class J{constructor(c,d,v){this.node_=c,this.fullyInitialized_=d,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(qr(c))return this.isFullyInitialized()&&!this.filtered_;const d=Ir(c);return this.isCompleteForChild(d)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class me{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function oe(f,c,d,v,x,H){const te=v.filter(we=>we.type===d);te.sort((we,Qe)=>function ce(f,c,d){if(null==c.childName||null==d.childName)throw(0,ae.g5)("Should only compare child_ events.");const v=new ai(c.childName,c.snapshotNode),x=new ai(d.childName,d.snapshotNode);return f.index_.compare(v,x)}(f,we,Qe)),te.forEach(we=>{const Qe=function ge(f,c,d){return"value"===c.type||"child_removed"===c.type||(c.prevName=d.getPredecessorChildName(c.childName,c.snapshotNode,f.index_)),c}(f,we,H);x.forEach(lt=>{lt.respondsTo(we.type)&&c.push(lt.createEvent(Qe,f.query_))})})}function le(f,c){return{eventCache:f,serverCache:c}}function Te(f,c,d,v){return le(new J(c,d,v),f.serverCache)}function ze(f,c,d,v){return le(f.eventCache,new J(c,d,v))}function nt(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function De(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let Fe;class tt{constructor(c,d=(()=>(Fe||(Fe=new Ri(on)),Fe))()){this.value=c,this.children=d}static fromObject(c){let d=new tt(null);return yn(c,(v,x)=>{d=d.set(new Yr(v),x)}),d}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,d){if(null!=this.value&&d(this.value))return{path:wr(),value:this.value};if(qr(c))return null;{const v=Ir(c),x=this.children.get(v);if(null!==x){const H=x.findRootMostMatchingPathAndValue(Qr(c),d);return null!=H?{path:kr(new Yr(v),H.path),value:H.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(qr(c))return this;{const d=Ir(c),v=this.children.get(d);return null!==v?v.subtree(Qr(c)):new tt(null)}}set(c,d){if(qr(c))return new tt(d,this.children);{const v=Ir(c),H=(this.children.get(v)||new tt(null)).set(Qr(c),d),te=this.children.insert(v,H);return new tt(this.value,te)}}remove(c){if(qr(c))return this.children.isEmpty()?new tt(null):new tt(null,this.children);{const d=Ir(c),v=this.children.get(d);if(v){const x=v.remove(Qr(c));let H;return H=x.isEmpty()?this.children.remove(d):this.children.insert(d,x),null===this.value&&H.isEmpty()?new tt(null):new tt(this.value,H)}return this}}get(c){if(qr(c))return this.value;{const d=Ir(c),v=this.children.get(d);return v?v.get(Qr(c)):null}}setTree(c,d){if(qr(c))return d;{const v=Ir(c),H=(this.children.get(v)||new tt(null)).setTree(Qr(c),d);let te;return te=H.isEmpty()?this.children.remove(v):this.children.insert(v,H),new tt(this.value,te)}}fold(c){return this.fold_(wr(),c)}fold_(c,d){const v={};return this.children.inorderTraversal((x,H)=>{v[x]=H.fold_(kr(c,x),d)}),d(c,this.value,v)}findOnPath(c,d){return this.findOnPath_(c,wr(),d)}findOnPath_(c,d,v){const x=!!this.value&&v(d,this.value);if(x)return x;if(qr(c))return null;{const H=Ir(c),te=this.children.get(H);return te?te.findOnPath_(Qr(c),kr(d,H),v):null}}foreachOnPath(c,d){return this.foreachOnPath_(c,wr(),d)}foreachOnPath_(c,d,v){if(qr(c))return this;{this.value&&v(d,this.value);const x=Ir(c),H=this.children.get(x);return H?H.foreachOnPath_(Qr(c),kr(d,x),v):new tt(null)}}foreach(c){this.foreach_(wr(),c)}foreach_(c,d){this.children.inorderTraversal((v,x)=>{x.foreach_(kr(c,v),d)}),this.value&&d(c,this.value)}foreachChild(c){this.children.inorderTraversal((d,v)=>{v.value&&c(d,v.value)})}}class yt{constructor(c){this.writeTree_=c}static empty(){return new yt(new tt(null))}}function vn(f,c,d){if(qr(c))return new yt(new tt(d));{const v=f.writeTree_.findRootMostValueAndPath(c);if(null!=v){const x=v.path;let H=v.value;const te=cs(x,c);return H=H.updateChild(te,d),new yt(f.writeTree_.set(x,H))}{const x=new tt(d),H=f.writeTree_.setTree(c,x);return new yt(H)}}}function Sn(f,c,d){let v=f;return yn(d,(x,H)=>{v=vn(v,kr(c,x),H)}),v}function gn(f,c){if(qr(c))return yt.empty();{const d=f.writeTree_.setTree(c,new tt(null));return new yt(d)}}function Rn(f,c){return null!=er(f,c)}function er(f,c){const d=f.writeTree_.findRootMostValueAndPath(c);return null!=d?f.writeTree_.get(d.path).getChild(cs(d.path,c)):null}function Er(f){const c=[],d=f.writeTree_.value;return null!=d?d.isLeafNode()||d.forEachChild(ki,(v,x)=>{c.push(new ai(v,x))}):f.writeTree_.children.inorderTraversal((v,x)=>{null!=x.value&&c.push(new ai(v,x.value))}),c}function Fn(f,c){if(qr(c))return f;{const d=er(f,c);return new yt(null!=d?new tt(d):f.writeTree_.subtree(c))}}function en(f){return f.writeTree_.isEmpty()}function Nt(f,c){return hn(wr(),f.writeTree_,c)}function hn(f,c,d){if(null!=c.value)return d.updateChild(f,c.value);{let v=null;return c.children.inorderTraversal((x,H)=>{".priority"===x?((0,ae.hu)(null!==H.value,"Priority writes must always be leaf nodes"),v=H.value):d=hn(kr(f,x),H,d)}),!d.getChild(f).isEmpty()&&null!==v&&(d=d.updateChild(kr(f,".priority"),v)),d}}function or(f,c){return li(c,f)}function vi(f,c){if(f.snap)return Hi(f.path,c);for(const d in f.children)if(f.children.hasOwnProperty(d)&&Hi(kr(f.path,d),c))return!0;return!1}function Ws(f){return f.visible}function Z(f,c,d){let v=yt.empty();for(let x=0;x<f.length;++x){const H=f[x];if(c(H)){const te=H.path;let we;if(H.snap)Hi(d,te)?(we=cs(d,te),v=vn(v,we,H.snap)):Hi(te,d)&&(we=cs(te,d),v=vn(v,wr(),H.snap.getChild(we)));else{if(!H.children)throw(0,ae.g5)("WriteRecord should have .snap or .children");if(Hi(d,te))we=cs(d,te),v=Sn(v,we,H.children);else if(Hi(te,d))if(we=cs(te,d),qr(we))v=Sn(v,wr(),H.children);else{const Qe=(0,ae.DV)(H.children,Ir(we));if(Qe){const lt=Qe.getChild(Qr(we));v=vn(v,wr(),lt)}}}}}return v}function C(f,c,d,v,x){if(v||x){const H=Fn(f.visibleWrites,c);return!x&&en(H)?d:x||null!=d||Rn(H,wr())?Nt(Z(f.allWrites,function(lt){return(lt.visible||x)&&(!v||!~v.indexOf(lt.writeId))&&(Hi(lt.path,c)||Hi(c,lt.path))},c),d||B.EMPTY_NODE):null}{const H=er(f.visibleWrites,c);if(null!=H)return H;{const te=Fn(f.visibleWrites,c);return en(te)?d:null!=d||Rn(te,wr())?Nt(te,d||B.EMPTY_NODE):null}}}function It(f,c,d,v){return C(f.writeTree,f.treePath,c,d,v)}function Qt(f,c){return function T(f,c,d){let v=B.EMPTY_NODE;const x=er(f.visibleWrites,c);if(x)return x.isLeafNode()||x.forEachChild(ki,(H,te)=>{v=v.updateImmediateChild(H,te)}),v;if(d){const H=Fn(f.visibleWrites,c);return d.forEachChild(ki,(te,we)=>{const Qe=Nt(Fn(H,new Yr(te)),we);v=v.updateImmediateChild(te,Qe)}),Er(H).forEach(te=>{v=v.updateImmediateChild(te.name,te.node)}),v}return Er(Fn(f.visibleWrites,c)).forEach(te=>{v=v.updateImmediateChild(te.name,te.node)}),v}(f.writeTree,f.treePath,c)}function ar(f,c,d,v){return function k(f,c,d,v,x){(0,ae.hu)(v||x,"Either existingEventSnap or existingServerSnap must exist");const H=kr(c,d);if(Rn(f.visibleWrites,H))return null;{const te=Fn(f.visibleWrites,H);return en(te)?x.getChild(d):Nt(te,x.getChild(d))}}(f.writeTree,f.treePath,c,d,v)}function Nr(f,c){return function Se(f,c){return er(f.visibleWrites,c)}(f.writeTree,kr(f.treePath,c))}function Sr(f,c,d){return function ue(f,c,d,v){const x=kr(c,d),H=er(f.visibleWrites,x);return null!=H?H:v.isCompleteForChild(d)?Nt(Fn(f.visibleWrites,x),v.getNode().getImmediateChild(d)):null}(f.writeTree,f.treePath,c,d)}function hr(f,c){return li(kr(f.treePath,c),f.writeTree)}function li(f,c){return{treePath:f,writeTree:c}}class jn{constructor(){this.changeMap=new Map}trackChildChange(c){const d=c.type,v=c.childName;(0,ae.hu)("child_added"===d||"child_changed"===d||"child_removed"===d,"Only child changes supported for tracking"),(0,ae.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const x=this.changeMap.get(v);if(x){const H=x.type;if("child_added"===d&&"child_removed"===H)this.changeMap.set(v,fi(v,c.snapshotNode,x.snapshotNode));else if("child_removed"===d&&"child_added"===H)this.changeMap.delete(v);else if("child_removed"===d&&"child_changed"===H)this.changeMap.set(v,ni(v,x.oldSnap));else if("child_changed"===d&&"child_added"===H)this.changeMap.set(v,ei(v,c.snapshotNode));else{if("child_changed"!==d||"child_changed"!==H)throw(0,ae.g5)("Illegal combination of changes: "+c+" occurred after "+x);this.changeMap.set(v,fi(v,c.snapshotNode,x.oldSnap))}}else this.changeMap.set(v,c)}getChanges(){return Array.from(this.changeMap.values())}}const ao=new class sr{getCompleteChild(c){return null}getChildAfterChild(c,d,v){return null}};class Kn{constructor(c,d,v=null){this.writes_=c,this.viewCache_=d,this.optCompleteServerCache_=v}getCompleteChild(c){const d=this.viewCache_.eventCache;if(d.isCompleteForChild(c))return d.getNode().getImmediateChild(c);{const v=null!=this.optCompleteServerCache_?new J(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Sr(this.writes_,c,v)}}getChildAfterChild(c,d,v){const x=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:De(this.viewCache_),H=function Jt(f,c,d,v,x,H){return function Ke(f,c,d,v,x,H,te){let we;const Qe=Fn(f.visibleWrites,c),lt=er(Qe,wr());if(null!=lt)we=lt;else{if(null==d)return[];we=Nt(Qe,d)}if(we=we.withIndex(te),we.isEmpty()||we.isLeafNode())return[];{const ln=[],Tn=te.getCompare(),xn=H?we.getReverseIteratorFrom(v,te):we.getIteratorFrom(v,te);let Cr=xn.getNext();for(;Cr&&ln.length<x;)0!==Tn(Cr,v)&&ln.push(Cr),Cr=xn.getNext();return ln}}(f.writeTree,f.treePath,c,d,v,x,H)}(this.writes_,x,d,1,v,c);return 0===H.length?null:H[0]}}function jo(f,c,d,v,x,H){const te=c.eventCache;if(null!=Nr(v,d))return c;{let we,Qe;if(qr(d))if((0,ae.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const lt=De(c),Tn=Qt(v,lt instanceof B?lt:B.EMPTY_NODE);we=f.filter.updateFullNode(c.eventCache.getNode(),Tn,H)}else{const lt=It(v,De(c));we=f.filter.updateFullNode(c.eventCache.getNode(),lt,H)}else{const lt=Ir(d);if(".priority"===lt){(0,ae.hu)(1===Xi(d),"Can't have a priority with additional path components");const ln=te.getNode();Qe=c.serverCache.getNode();const Tn=ar(v,d,ln,Qe);we=null!=Tn?f.filter.updatePriority(ln,Tn):te.getNode()}else{const ln=Qr(d);let Tn;if(te.isCompleteForChild(lt)){Qe=c.serverCache.getNode();const xn=ar(v,d,te.getNode(),Qe);Tn=null!=xn?te.getNode().getImmediateChild(lt).updateChild(ln,xn):te.getNode().getImmediateChild(lt)}else Tn=Sr(v,lt,c.serverCache);we=null!=Tn?f.filter.updateChild(te.getNode(),lt,Tn,ln,x,H):te.getNode()}}return Te(c,we,te.isFullyInitialized()||qr(d),f.filter.filtersNodes())}}function O(f,c,d,v,x,H,te,we){const Qe=c.serverCache;let lt;const ln=te?f.filter:f.filter.getIndexedFilter();if(qr(d))lt=ln.updateFullNode(Qe.getNode(),v,null);else if(ln.filtersNodes()&&!Qe.isFiltered()){const Cr=Qe.getNode().updateChild(d,v);lt=ln.updateFullNode(Qe.getNode(),Cr,null)}else{const Cr=Ir(d);if(!Qe.isCompleteForPath(d)&&Xi(d)>1)return c;const pi=Qr(d),la=Qe.getNode().getImmediateChild(Cr).updateChild(pi,v);lt=".priority"===Cr?ln.updatePriority(Qe.getNode(),la):ln.updateChild(Qe.getNode(),Cr,la,pi,ao,null)}const Tn=ze(c,lt,Qe.isFullyInitialized()||qr(d),ln.filtersNodes());return jo(f,Tn,d,x,new Kn(x,Tn,H),we)}function M(f,c,d,v,x,H,te){const we=c.eventCache;let Qe,lt;const ln=new Kn(x,c,H);if(qr(d))lt=f.filter.updateFullNode(c.eventCache.getNode(),v,te),Qe=Te(c,lt,!0,f.filter.filtersNodes());else{const Tn=Ir(d);if(".priority"===Tn)lt=f.filter.updatePriority(c.eventCache.getNode(),v),Qe=Te(c,lt,we.isFullyInitialized(),we.isFiltered());else{const xn=Qr(d),Cr=we.getNode().getImmediateChild(Tn);let pi;if(qr(xn))pi=v;else{const Ds=ln.getCompleteChild(Tn);pi=null!=Ds?".priority"===wi(xn)&&Ds.getChild(hs(xn)).isEmpty()?Ds:Ds.updateChild(xn,v):B.EMPTY_NODE}Qe=Cr.equals(pi)?c:Te(c,f.filter.updateChild(we.getNode(),Tn,pi,xn,ln,te),we.isFullyInitialized(),f.filter.filtersNodes())}}return Qe}function S(f,c){return f.eventCache.isCompleteForChild(c)}function ne(f,c,d){return d.foreach((v,x)=>{c=c.updateChild(v,x)}),c}function _e(f,c,d,v,x,H,te,we){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let lt,Qe=c;lt=qr(d)?v:new tt(null).setTree(d,v);const ln=c.serverCache.getNode();return lt.children.inorderTraversal((Tn,xn)=>{if(ln.hasChild(Tn)){const pi=ne(0,c.serverCache.getNode().getImmediateChild(Tn),xn);Qe=O(f,Qe,new Yr(Tn),pi,x,H,te,we)}}),lt.children.inorderTraversal((Tn,xn)=>{const Cr=!c.serverCache.isCompleteForChild(Tn)&&null===xn.value;if(!ln.hasChild(Tn)&&!Cr){const Ds=ne(0,c.serverCache.getNode().getImmediateChild(Tn),xn);Qe=O(f,Qe,new Yr(Tn),Ds,x,H,te,we)}}),Qe}class jt{constructor(c,d){this.query_=c,this.eventRegistrations_=[];const v=this.query_._queryParams,x=new Di(v.getIndex()),H=function Kr(f){return f.loadsAllData()?new Di(f.getIndex()):f.hasLimit()?new oo(f):new Fi(f)}(v);this.processor_=function $t(f){return{filter:f}}(H);const te=d.serverCache,we=d.eventCache,Qe=x.updateFullNode(B.EMPTY_NODE,te.getNode(),null),lt=H.updateFullNode(B.EMPTY_NODE,we.getNode(),null),ln=new J(Qe,te.isFullyInitialized(),x.filtersNodes()),Tn=new J(lt,we.isFullyInitialized(),H.filtersNodes());this.viewCache_=le(Tn,ln),this.eventGenerator_=new me(this.query_)}get query(){return this.query_}}function Or(f,c){const d=De(f.viewCache_);return d&&(f.query._queryParams.loadsAllData()||!qr(c)&&!d.getImmediateChild(Ir(c)).isEmpty())?d.getChild(c):null}function Bn(f){return 0===f.eventRegistrations_.length}function vr(f,c,d){const v=[];if(d){(0,ae.hu)(null==c,"A cancel should cancel all event registrations.");const x=f.query._path;f.eventRegistrations_.forEach(H=>{const te=H.createCancelEvent(d,x);te&&v.push(te)})}if(c){let x=[];for(let H=0;H<f.eventRegistrations_.length;++H){const te=f.eventRegistrations_[H];if(te.matches(c)){if(c.hasAnyCallback()){x=x.concat(f.eventRegistrations_.slice(H+1));break}}else x.push(te)}f.eventRegistrations_=x}else f.eventRegistrations_=[];return v}function ua(f,c,d,v){c.type===yi.MERGE&&null!==c.source.queryId&&((0,ae.hu)(De(f.viewCache_),"We should always have a full cache before handling merges"),(0,ae.hu)(nt(f.viewCache_),"Missing event cache, even though we have a server cache"));const x=f.viewCache_,H=function ps(f,c,d,v,x){const H=new jn;let te,we;if(d.type===yi.OVERWRITE){const lt=d;lt.source.fromUser?te=M(f,c,lt.path,lt.snap,v,x,H):((0,ae.hu)(lt.source.fromServer,"Unknown source."),we=lt.source.tagged||c.serverCache.isFiltered()&&!qr(lt.path),te=O(f,c,lt.path,lt.snap,v,x,we,H))}else if(d.type===yi.MERGE){const lt=d;lt.source.fromUser?te=function q(f,c,d,v,x,H,te){let we=c;return v.foreach((Qe,lt)=>{const ln=kr(d,Qe);S(c,Ir(ln))&&(we=M(f,we,ln,lt,x,H,te))}),v.foreach((Qe,lt)=>{const ln=kr(d,Qe);S(c,Ir(ln))||(we=M(f,we,ln,lt,x,H,te))}),we}(f,c,lt.path,lt.children,v,x,H):((0,ae.hu)(lt.source.fromServer,"Unknown source."),we=lt.source.tagged||c.serverCache.isFiltered(),te=_e(f,c,lt.path,lt.children,v,x,we,H))}else if(d.type===yi.ACK_USER_WRITE){const lt=d;te=lt.revert?function Mt(f,c,d,v,x,H){let te;if(null!=Nr(v,d))return c;{const we=new Kn(v,c,x),Qe=c.eventCache.getNode();let lt;if(qr(d)||".priority"===Ir(d)){let ln;if(c.serverCache.isFullyInitialized())ln=It(v,De(c));else{const Tn=c.serverCache.getNode();(0,ae.hu)(Tn instanceof B,"serverChildren would be complete if leaf node"),ln=Qt(v,Tn)}lt=f.filter.updateFullNode(Qe,ln,H)}else{const ln=Ir(d);let Tn=Sr(v,ln,c.serverCache);null==Tn&&c.serverCache.isCompleteForChild(ln)&&(Tn=Qe.getImmediateChild(ln)),lt=null!=Tn?f.filter.updateChild(Qe,ln,Tn,Qr(d),we,H):c.eventCache.getNode().hasChild(ln)?f.filter.updateChild(Qe,ln,B.EMPTY_NODE,Qr(d),we,H):Qe,lt.isEmpty()&&c.serverCache.isFullyInitialized()&&(te=It(v,De(c)),te.isLeafNode()&&(lt=f.filter.updateFullNode(lt,te,H)))}return te=c.serverCache.isFullyInitialized()||null!=Nr(v,wr()),Te(c,lt,te,f.filter.filtersNodes())}}(f,c,lt.path,v,x,H):function $e(f,c,d,v,x,H,te){if(null!=Nr(x,d))return c;const we=c.serverCache.isFiltered(),Qe=c.serverCache;if(null!=v.value){if(qr(d)&&Qe.isFullyInitialized()||Qe.isCompleteForPath(d))return O(f,c,d,Qe.getNode().getChild(d),x,H,we,te);if(qr(d)){let lt=new tt(null);return Qe.getNode().forEachChild(Es,(ln,Tn)=>{lt=lt.set(new Yr(ln),Tn)}),_e(f,c,d,lt,x,H,we,te)}return c}{let lt=new tt(null);return v.foreach((ln,Tn)=>{const xn=kr(d,ln);Qe.isCompleteForPath(xn)&&(lt=lt.set(ln,Qe.getNode().getChild(xn)))}),_e(f,c,d,lt,x,H,we,te)}}(f,c,lt.path,lt.affectedTree,v,x,H)}else{if(d.type!==yi.LISTEN_COMPLETE)throw(0,ae.g5)("Unknown operation type: "+d.type);te=function Ne(f,c,d,v,x){const H=c.serverCache;return jo(f,ze(c,H.getNode(),H.isFullyInitialized()||qr(d),H.isFiltered()),d,v,ao,x)}(f,c,d.path,v,H)}const Qe=H.getChanges();return function Ps(f,c,d){const v=c.eventCache;if(v.isFullyInitialized()){const x=v.getNode().isLeafNode()||v.getNode().isEmpty(),H=nt(f);(d.length>0||!f.eventCache.isFullyInitialized()||x&&!v.getNode().equals(H)||!v.getNode().getPriority().equals(H.getPriority()))&&d.push(jr(nt(c)))}}(c,te,Qe),{viewCache:te,changes:Qe}}(f.processor_,x,c,d,v);return function An(f,c){(0,ae.hu)(c.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,ae.hu)(c.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,H.viewCache),(0,ae.hu)(H.viewCache.serverCache.isFullyInitialized()||!x.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=H.viewCache,Un(f,H.changes,H.viewCache.eventCache.getNode(),null)}function Un(f,c,d,v){return function be(f,c,d,v){const x=[],H=[];return c.forEach(te=>{"child_changed"===te.type&&f.index_.indexedValueChanged(te.oldSnap,te.snapshotNode)&&H.push(function es(f,c){return{type:"child_moved",snapshotNode:c,childName:f}}(te.childName,te.snapshotNode))}),oe(f,x,"child_removed",c,v,d),oe(f,x,"child_added",c,v,d),oe(f,x,"child_moved",H,v,d),oe(f,x,"child_changed",c,v,d),oe(f,x,"value",c,v,d),x}(f.eventGenerator_,c,d,v?[v]:f.eventRegistrations_)}let lo,nn;class Ao{constructor(){this.views=new Map}}function Ya(f,c,d,v){const x=c.source.queryId;if(null!==x){const H=f.views.get(x);return(0,ae.hu)(null!=H,"SyncTree gave us an op for an invalid query."),ua(H,c,d,v)}{let H=[];for(const te of f.views.values())H=H.concat(ua(te,c,d,v));return H}}function mu(f,c,d,v,x,H){const te=function Ll(f,c,d,v,x){const te=f.views.get(c._queryIdentifier);if(!te){let we=It(d,x?v:null),Qe=!1;we?Qe=!0:v instanceof B?(we=Qt(d,v),Qe=!1):(we=B.EMPTY_NODE,Qe=!1);const lt=le(new J(we,Qe,!1),new J(v,x,!1));return new jt(c,lt)}return te}(f,c,v,x,H);return f.views.has(c._queryIdentifier)||f.views.set(c._queryIdentifier,te),function Ys(f,c){f.eventRegistrations_.push(c)}(te,d),function Ss(f,c){const d=f.viewCache_.eventCache,v=[];return d.getNode().isLeafNode()||d.getNode().forEachChild(ki,(H,te)=>{v.push(ei(H,te))}),d.isFullyInitialized()&&v.push(jr(d.getNode())),Un(f,v,d.getNode(),c)}(te,d)}function ra(f){const c=[];for(const d of f.views.values())d.query._queryParams.loadsAllData()||c.push(d);return c}function Ca(f,c){let d=null;for(const v of f.views.values())d=d||Or(v,c);return d}function wc(f,c){return c._queryParams.loadsAllData()?Xl(f):f.views.get(c._queryIdentifier)}function Ic(f,c){return null!=wc(f,c)}function ia(f){return null!=Xl(f)}function Xl(f){for(const c of f.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let wo=1;class Ta{constructor(c){this.listenProvider_=c,this.syncPointTree_=new tt(null),this.pendingWriteTree_=function Be(){return{visibleWrites:yt.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sa(f,c,d,v,x){return function ir(f,c,d,v,x){(0,ae.hu)(v>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===x&&(x=!0),f.allWrites.push({path:c,snap:d,writeId:v,visible:x}),x&&(f.visibleWrites=vn(f.visibleWrites,c,d)),f.lastWriteId=v}(f.pendingWriteTree_,c,d,v,x),x?ca(f,new P({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,d)):[]}function oa(f,c,d=!1){const v=function ur(f,c){for(let d=0;d<f.allWrites.length;d++){const v=f.allWrites[d];if(v.writeId===c)return v}return null}(f.pendingWriteTree_,c);if(function Jn(f,c){const d=f.allWrites.findIndex(we=>we.writeId===c);(0,ae.hu)(d>=0,"removeWrite called with nonexistent writeId.");const v=f.allWrites[d];f.allWrites.splice(d,1);let x=v.visible,H=!1,te=f.allWrites.length-1;for(;x&&te>=0;){const we=f.allWrites[te];we.visible&&(te>=d&&vi(we,v.path)?x=!1:Hi(v.path,we.path)&&(H=!0)),te--}return!!x&&(H?(function Ai(f){f.visibleWrites=Z(f.allWrites,Ws,wr()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(v.snap?f.visibleWrites=gn(f.visibleWrites,v.path):yn(v.children,Qe=>{f.visibleWrites=gn(f.visibleWrites,kr(v.path,Qe))}),!0))}(f.pendingWriteTree_,c)){let H=new tt(null);return null!=v.snap?H=H.set(wr(),!0):yn(v.children,te=>{H=H.set(new Yr(te),!0)}),ca(f,new A(v.path,H,d))}return[]}function xo(f,c,d){return ca(f,new P({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,d))}function vo(f,c,d,v,x=!1){const H=c._path,te=f.syncPointTree_.get(H);let we=[];if(te&&("default"===c._queryIdentifier||Ic(te,c))){const Qe=function po(f,c,d,v){const x=c._queryIdentifier,H=[];let te=[];const we=ia(f);if("default"===x)for(const[Qe,lt]of f.views.entries())te=te.concat(vr(lt,d,v)),Bn(lt)&&(f.views.delete(Qe),lt.query._queryParams.loadsAllData()||H.push(lt.query));else{const Qe=f.views.get(x);Qe&&(te=te.concat(vr(Qe,d,v)),Bn(Qe)&&(f.views.delete(x),Qe.query._queryParams.loadsAllData()||H.push(Qe.query)))}return we&&!ia(f)&&H.push(new(function Ea(){return(0,ae.hu)(lo,"Reference.ts has not been loaded"),lo}())(c._repo,c._path)),{removed:H,events:te}}(te,c,d,v);(function Fl(f){return 0===f.views.size})(te)&&(f.syncPointTree_=f.syncPointTree_.remove(H));const lt=Qe.removed;if(we=Qe.events,!x){const ln=-1!==lt.findIndex(xn=>xn._queryParams.loadsAllData()),Tn=f.syncPointTree_.findOnPath(H,(xn,Cr)=>ia(Cr));if(ln&&!Tn){const xn=f.syncPointTree_.subtree(H);if(!xn.isEmpty()){const Cr=function Vl(f){return f.fold((c,d,v)=>{if(d&&ia(d))return[Xl(d)];{let x=[];return d&&(x=ra(d)),yn(v,(H,te)=>{x=x.concat(te)}),x}})}(xn);for(let pi=0;pi<Cr.length;++pi){const Ds=Cr[pi],la=Ds.query,Fu=Ba(f,Ds);f.listenProvider_.startListening(el(la),uo(f,la),Fu.hashFn,Fu.onComplete)}}}!Tn&&lt.length>0&&!v&&(ln?f.listenProvider_.stopListening(el(c),null):lt.forEach(xn=>{const Cr=f.queryToTagMap.get($a(xn));f.listenProvider_.stopListening(el(xn),Cr)}))}!function wa(f,c){for(let d=0;d<c.length;++d){const v=c[d];if(!v._queryParams.loadsAllData()){const x=$a(v),H=f.queryToTagMap.get(x);f.queryToTagMap.delete(x),f.tagToQueryMap.delete(H)}}}(f,lt)}return we}function Il(f,c,d,v=!1){const x=c._path;let H=null,te=!1;f.syncPointTree_.foreachOnPath(x,(xn,Cr)=>{const pi=cs(xn,x);H=H||Ca(Cr,pi),te=te||ia(Cr)});let Qe,we=f.syncPointTree_.get(x);we?(te=te||ia(we),H=H||Ca(we,wr())):(we=new Ao,f.syncPointTree_=f.syncPointTree_.set(x,we)),null!=H?Qe=!0:(Qe=!1,H=B.EMPTY_NODE,f.syncPointTree_.subtree(x).foreachChild((Cr,pi)=>{const Ds=Ca(pi,wr());Ds&&(H=H.updateImmediateChild(Cr,Ds))}));const lt=Ic(we,c);if(!lt&&!c._queryParams.loadsAllData()){const xn=$a(c);(0,ae.hu)(!f.queryToTagMap.has(xn),"View does not exist, but we have a tag");const Cr=function ea(){return wo++}();f.queryToTagMap.set(xn,Cr),f.tagToQueryMap.set(Cr,xn)}let Tn=mu(we,c,d,or(f.pendingWriteTree_,x),H,Qe);if(!lt&&!te&&!v){const xn=wc(we,c);Tn=Tn.concat(function dl(f,c,d){const v=c._path,x=uo(f,c),H=Ba(f,d),te=f.listenProvider_.startListening(el(c),x,H.hashFn,H.onComplete),we=f.syncPointTree_.subtree(v);if(x)(0,ae.hu)(!ia(we.value),"If we're adding a query, it shouldn't be shadowed");else{const Qe=we.fold((lt,ln,Tn)=>{if(!qr(lt)&&ln&&ia(ln))return[Xl(ln).query];{let xn=[];return ln&&(xn=xn.concat(ra(ln).map(Cr=>Cr.query))),yn(Tn,(Cr,pi)=>{xn=xn.concat(pi)}),xn}});for(let lt=0;lt<Qe.length;++lt){const ln=Qe[lt];f.listenProvider_.stopListening(el(ln),uo(f,ln))}}return te}(f,c,xn))}return Tn}function Ua(f,c,d){const x=f.pendingWriteTree_,H=f.syncPointTree_.findOnPath(c,(te,we)=>{const lt=Ca(we,cs(te,c));if(lt)return lt});return C(x,c,H,d,!0)}function ca(f,c){return Eo(c,f.syncPointTree_,null,or(f.pendingWriteTree_,wr()))}function Eo(f,c,d,v){if(qr(f.path))return Xa(f,c,d,v);{const x=c.get(wr());null==d&&null!=x&&(d=Ca(x,wr()));let H=[];const te=Ir(f.path),we=f.operationForChild(te),Qe=c.children.get(te);if(Qe&&we){const lt=d?d.getImmediateChild(te):null,ln=hr(v,te);H=H.concat(Eo(we,Qe,lt,ln))}return x&&(H=H.concat(Ya(x,f,v,d))),H}}function Xa(f,c,d,v){const x=c.get(wr());null==d&&null!=x&&(d=Ca(x,wr()));let H=[];return c.children.inorderTraversal((te,we)=>{const Qe=d?d.getImmediateChild(te):null,lt=hr(v,te),ln=f.operationForChild(te);ln&&(H=H.concat(Xa(ln,we,Qe,lt)))}),x&&(H=H.concat(Ya(x,f,v,d))),H}function Ba(f,c){const d=c.query,v=uo(f,d);return{hashFn:()=>(function pr(f){return f.viewCache_.serverCache.getNode()}(c)||B.EMPTY_NODE).hash(),onComplete:x=>{if("ok"===x)return v?function yu(f,c,d){const v=ja(f,d);if(v){const x=eo(v),H=x.path,te=x.queryId,we=cs(H,c);return Ja(f,H,new I(l(te),we))}return[]}(f,d._path,v):function Jl(f,c){return ca(f,new I({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(f,d._path);{const H=function kt(f,c){let d="Unknown Error";"too_big"===f?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?d="Client doesn't have permission to access the desired data.":"unavailable"===f&&(d="The service is unavailable");const v=new Error(f+" at "+c._path.toString()+": "+d);return v.code=f.toUpperCase(),v}(x,d);return vo(f,d,null,H)}}}}function uo(f,c){const d=$a(c);return f.queryToTagMap.get(d)}function $a(f){return f._path.toString()+"$"+f._queryIdentifier}function ja(f,c){return f.tagToQueryMap.get(c)}function eo(f){const c=f.indexOf("$");return(0,ae.hu)(-1!==c&&c<f.length-1,"Bad queryKey."),{queryId:f.substr(c+1),path:new Yr(f.substr(0,c))}}function Ja(f,c,d){const v=f.syncPointTree_.get(c);return(0,ae.hu)(v,"Missing sync point for query tag that we're tracking"),Ya(v,d,or(f.pendingWriteTree_,c),null)}function el(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function ba(){return(0,ae.hu)(nn,"Reference.ts has not been loaded"),nn}())(f._repo,f._path):f}class tl{constructor(c){this.node_=c}getImmediateChild(c){const d=this.node_.getImmediateChild(c);return new tl(d)}node(){return this.node_}}class co{constructor(c,d){this.syncTree_=c,this.path_=d}getImmediateChild(c){const d=kr(this.path_,c);return new co(this.syncTree_,d)}node(){return Ua(this.syncTree_,this.path_)}}const Io=function(f,c,d){return f&&"object"==typeof f?((0,ae.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?zu(f[".sv"],c,d):"object"==typeof f[".sv"]?hl(f[".sv"],c):void(0,ae.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},zu=function(f,c,d){if("timestamp"===f)return d.timestamp;(0,ae.hu)(!1,"Unexpected server value: "+f)},hl=function(f,c,d){f.hasOwnProperty("increment")||(0,ae.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const v=f.increment;"number"!=typeof v&&(0,ae.hu)(!1,"Unexpected increment value: "+v);const x=c.node();if((0,ae.hu)(null!=x,"Expected ChildrenNode.EMPTY_NODE for nulls"),!x.isLeafNode())return v;const te=x.getValue();return"number"!=typeof te?v:te+v},Ia=function(f,c,d){return Ul(f,new tl(c),d)};function Ul(f,c,d){const v=f.getPriority().val(),x=Io(v,c.getImmediateChild(".priority"),d);let H;if(f.isLeafNode()){const te=f,we=Io(te.getValue(),c,d);return we!==te.getValue()||x!==te.getPriority().val()?new Is(we,qe(x)):f}{const te=f;return H=te,x!==te.getPriority().val()&&(H=H.updatePriority(new Is(x))),te.forEachChild(ki,(we,Qe)=>{const lt=Ul(Qe,c.getImmediateChild(we),d);lt!==Qe&&(H=H.updateImmediateChild(we,lt))}),H}}class Ra{constructor(c="",d=null,v={children:{},childCount:0}){this.name=c,this.parent=d,this.node=v}}function U(f,c){let d=c instanceof Yr?c:new Yr(c),v=f,x=Ir(d);for(;null!==x;){const H=(0,ae.DV)(v.node.children,x)||{children:{},childCount:0};v=new Ra(x,v,H),d=Qr(d),x=Ir(d)}return v}function Y(f){return f.node.value}function de(f,c){f.node.value=c,zr(f)}function je(f){return f.node.childCount>0}function Kt(f,c){yn(f.node.children,(d,v)=>{c(new Ra(d,f,v))})}function Vn(f,c,d,v){d&&!v&&c(f),Kt(f,x=>{Vn(x,c,!0,v)}),d&&v&&c(f)}function Zr(f){return new Yr(null===f.parent?f.name:Zr(f.parent)+"/"+f.name)}function zr(f){null!==f.parent&&function Wi(f,c,d){const v=function Pt(f){return void 0===Y(f)&&!je(f)}(d),x=(0,ae.r3)(f.node.children,c);v&&x?(delete f.node.children[c],f.node.childCount--,zr(f)):!v&&!x&&(f.node.children[c]=d.node,f.node.childCount++,zr(f))}(f.parent,f.name,f)}const Ei=/[\[\].#$\/\u0000-\u001F\u007F]/,Ho=/[\[\].#$\u0000-\u001F\u007F]/,ii=10485760,is=function(f){return"string"==typeof f&&0!==f.length&&!Ei.test(f)},Sa=function(f){return"string"==typeof f&&0!==f.length&&!Ho.test(f)},Ga=function(f,c,d){const v=d instanceof Yr?new $o(d,f):d;if(void 0===c)throw new Error(f+"contains undefined "+Ct(v));if("function"==typeof c)throw new Error(f+"contains a function "+Ct(v)+" with contents = "+c.toString());if(Me(c))throw new Error(f+"contains "+c.toString()+" "+Ct(v));if("string"==typeof c&&c.length>ii/3&&(0,ae.ug)(c)>ii)throw new Error(f+"contains a string greater than "+ii+" utf8 bytes "+Ct(v)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let x=!1,H=!1;if(yn(c,(te,we)=>{if(".value"===te)x=!0;else if(".priority"!==te&&".sv"!==te&&(H=!0,!is(te)))throw new Error(f+" contains an invalid key ("+te+") "+Ct(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function mo(f,c){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(c),f.byteLength_+=(0,ae.ug)(c),Zi(f)})(v,te),Ga(f,we,v),function xs(f){const c=f.parts_.pop();f.byteLength_-=(0,ae.ug)(c),f.parts_.length>0&&(f.byteLength_-=1)}(v)}),x&&H)throw new Error(f+' contains ".value" child '+Ct(v)+" in addition to actual children.")}},ld=function(f,c,d,v){if(!(v&&void 0===d||Sa(d)))throw new Error((0,ae.gK)(f,c)+'was an invalid path = "'+d+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class vu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wu(f,c){let d=null;for(let v=0;v<c.length;v++){const x=c[v],H=x.getPath();null!==d&&!ks(H,d.path)&&(f.eventLists_.push(d),d=null),null===d&&(d={events:[],path:H}),d.events.push(x)}d&&f.eventLists_.push(d)}function cd(f,c,d){Wu(f,d),qu(f,v=>ks(v,c))}function Ro(f,c,d){Wu(f,d),qu(f,v=>Hi(v,c)||Hi(c,v))}function qu(f,c){f.recursionDepth_++;let d=!0;for(let v=0;v<f.eventLists_.length;v++){const x=f.eventLists_[v];x&&(c(x.path)?(to(f.eventLists_[v]),f.eventLists_[v]=null):d=!1)}d&&(f.eventLists_=[]),f.recursionDepth_--}function to(f){for(let c=0;c<f.events.length;c++){const d=f.events[c];if(null!==d){f.events[c]=null;const v=d.getEventRunner();Ln&&He("event: "+d.toString()),Rt(v)}}}class no{constructor(c,d,v,x){this.repoInfo_=c,this.forceRestClient_=d,this.authTokenProvider_=v,this.appCheckProvider_=x,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=K(),this.transactionQueueTree_=new Ra,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fl(f){const d=f.infoData_.getNode(new Yr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+d}function Go(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:fl(f)})}function Uo(f,c,d,v,x){f.dataUpdateCount++;const H=new Yr(c);d=f.interceptServerDataCallback_?f.interceptServerDataCallback_(c,d):d;let te=[];if(x)if(v){const Qe=(0,ae.UI)(d,lt=>qe(lt));te=function Jo(f,c,d,v){const x=ja(f,v);if(x){const H=eo(x),te=H.path,we=H.queryId,Qe=cs(te,c),lt=tt.fromObject(d);return Ja(f,te,new z(l(we),Qe,lt))}return[]}(f.serverSyncTree_,H,Qe,x)}else{const Qe=qe(d);te=function cl(f,c,d,v){const x=ja(f,v);if(null!=x){const H=eo(x),te=H.path,we=H.queryId,Qe=cs(te,c);return Ja(f,te,new P(l(we),Qe,d))}return[]}(f.serverSyncTree_,H,Qe,x)}else if(v){const Qe=(0,ae.UI)(d,lt=>qe(lt));te=function Xo(f,c,d){const v=tt.fromObject(d);return ca(f,new z({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,v))}(f.serverSyncTree_,H,Qe)}else{const Qe=qe(d);te=xo(f.serverSyncTree_,H,Qe)}let we=H;te.length>0&&(we=Oa(f,H)),Ro(f.eventQueue_,we,te)}function Ku(f,c){Zu(f,"connected",c),!1===c&&function ya(f){gl(f,"onDisconnectEvents");const c=Go(f),d=K();it(f.onDisconnect_,wr(),(x,H)=>{const te=function(f,c,d,v){return Ul(c,new co(d,f),v)}(x,H,f.serverSyncTree_,c);Ce(d,x,te)});let v=[];it(d,wr(),(x,H)=>{v=v.concat(xo(f.serverSyncTree_,x,H));const te=zl(f,x);Oa(f,te)}),f.onDisconnect_=K(),Ro(f.eventQueue_,wr(),v)}(f)}function Zu(f,c,d){const v=new Yr("/.info/"+c),x=qe(d);f.infoData_.updateSnapshot(v,x);const H=xo(f.infoSyncTree_,v,x);Ro(f.eventQueue_,v,H)}function eu(f){return f.nextWriteId_++}function Hl(f,c,d,v,x){gl(f,"set",{path:c.toString(),value:d,priority:v});const H=Go(f),te=qe(d,v),we=Ua(f.serverSyncTree_,c),Qe=Ia(te,we,H),lt=eu(f),ln=sa(f.serverSyncTree_,c,Qe,lt,!0);Wu(f.eventQueue_,ln),f.server_.put(c.toString(),te.val(!0),(xn,Cr)=>{const pi="ok"===xn;pi||ke("set at "+c+" failed: "+xn);const Ds=oa(f.serverSyncTree_,lt,!pi);Ro(f.eventQueue_,c,Ds),function _a(f,c,d,v){c&&Rt(()=>{if("ok"===d)c(null);else{const x=(d||"error").toUpperCase();let H=x;v&&(H+=": "+v);const te=new Error(H);te.code=x,c(te)}})}(0,x,xn,Cr)});const Tn=zl(f,c);Oa(f,Tn),Ro(f.eventQueue_,Tn,[])}function ru(f,c,d){let v;v=".info"===Ir(c._path)?vo(f.infoSyncTree_,c,d):vo(f.serverSyncTree_,c,d),cd(f.eventQueue_,c._path,v)}function gl(f,...c){let d="";f.persistentConnection_&&(d=f.persistentConnection_.id+":"),He(d,...c)}function Cu(f,c,d){return Ua(f.serverSyncTree_,c,d)||B.EMPTY_NODE}function su(f,c=f.transactionQueueTree_){if(c||Tu(f,c),Y(c)){const d=Da(f,c);(0,ae.hu)(d.length>0,"Sending zero length transaction queue"),d.every(x=>0===x.status)&&function bu(f,c,d){const v=d.map(lt=>lt.currentWriteId),x=Cu(f,c,v);let H=x;const te=x.hash();for(let lt=0;lt<d.length;lt++){const ln=d[lt];(0,ae.hu)(0===ln.status,"tryToSendTransactionQueue_: items in queue should all be run."),ln.status=1,ln.retryCount++;const Tn=cs(c,ln.path);H=H.updateChild(Tn,ln.currentOutputSnapshotRaw)}const we=H.val(!0),Qe=c;f.server_.put(Qe.toString(),we,lt=>{gl(f,"transaction put response",{path:Qe.toString(),status:lt});let ln=[];if("ok"===lt){const Tn=[];for(let xn=0;xn<d.length;xn++)d[xn].status=2,ln=ln.concat(oa(f.serverSyncTree_,d[xn].currentWriteId)),d[xn].onComplete&&Tn.push(()=>d[xn].onComplete(null,!0,d[xn].currentOutputSnapshotResolved)),d[xn].unwatcher();Tu(f,U(f.transactionQueueTree_,c)),su(f,f.transactionQueueTree_),Ro(f.eventQueue_,c,ln);for(let xn=0;xn<Tn.length;xn++)Rt(Tn[xn])}else{if("datastale"===lt)for(let Tn=0;Tn<d.length;Tn++)d[Tn].status=3===d[Tn].status?4:0;else{ke("transaction at "+Qe.toString()+" failed: "+lt);for(let Tn=0;Tn<d.length;Tn++)d[Tn].status=4,d[Tn].abortReason=lt}Oa(f,c)}},te)}(f,Zr(c),d)}else je(c)&&Kt(c,d=>{su(f,d)})}function Oa(f,c){const d=ka(f,c),v=Zr(d);return function Xu(f,c,d){if(0===c.length)return;const v=[];let x=[];const te=c.filter(we=>0===we.status).map(we=>we.currentWriteId);for(let we=0;we<c.length;we++){const Qe=c[we],lt=cs(d,Qe.path);let Tn,ln=!1;if((0,ae.hu)(null!==lt,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Qe.status)ln=!0,Tn=Qe.abortReason,x=x.concat(oa(f.serverSyncTree_,Qe.currentWriteId,!0));else if(0===Qe.status)if(Qe.retryCount>=25)ln=!0,Tn="maxretry",x=x.concat(oa(f.serverSyncTree_,Qe.currentWriteId,!0));else{const xn=Cu(f,Qe.path,te);Qe.currentInputSnapshot=xn;const Cr=c[we].update(xn.val());if(void 0!==Cr){Ga("transaction failed: Data returned ",Cr,Qe.path);let pi=qe(Cr);"object"==typeof Cr&&null!=Cr&&(0,ae.r3)(Cr,".priority")||(pi=pi.updatePriority(xn.getPriority()));const la=Qe.currentWriteId,Fu=Go(f),Vc=Ia(pi,xn,Fu);Qe.currentOutputSnapshotRaw=pi,Qe.currentOutputSnapshotResolved=Vc,Qe.currentWriteId=eu(f),te.splice(te.indexOf(la),1),x=x.concat(sa(f.serverSyncTree_,Qe.path,Vc,Qe.currentWriteId,Qe.applyLocally)),x=x.concat(oa(f.serverSyncTree_,la,!0))}else ln=!0,Tn="nodata",x=x.concat(oa(f.serverSyncTree_,Qe.currentWriteId,!0))}Ro(f.eventQueue_,d,x),x=[],ln&&(c[we].status=2,setTimeout(c[we].unwatcher,Math.floor(0)),c[we].onComplete&&v.push("nodata"===Tn?()=>c[we].onComplete(null,!1,c[we].currentInputSnapshot):()=>c[we].onComplete(new Error(Tn),!1,null)))}Tu(f,f.transactionQueueTree_);for(let we=0;we<v.length;we++)Rt(v[we]);su(f,f.transactionQueueTree_)}(f,Da(f,d),v),v}function ka(f,c){let d,v=f.transactionQueueTree_;for(d=Ir(c);null!==d&&void 0===Y(v);)v=U(v,d),d=Ir(c=Qr(c));return v}function Da(f,c){const d=[];return Ju(f,c,d),d.sort((v,x)=>v.order-x.order),d}function Ju(f,c,d){const v=Y(c);if(v)for(let x=0;x<v.length;x++)d.push(v[x]);Kt(c,x=>{Ju(f,x,d)})}function Tu(f,c){const d=Y(c);if(d){let v=0;for(let x=0;x<d.length;x++)2!==d[x].status&&(d[v]=d[x],v++);d.length=v,de(c,d.length>0?d:void 0)}Kt(c,v=>{Tu(f,v)})}function zl(f,c){const d=Zr(ka(f,c)),v=U(f.transactionQueueTree_,c);return function Hr(f,c,d){let v=d?f:f.parent;for(;null!==v;){if(c(v))return!0;v=v.parent}}(v,x=>{Dc(f,x)}),Dc(f,v),Vn(v,x=>{Dc(f,x)}),d}function Dc(f,c){const d=Y(c);if(d){const v=[];let x=[],H=-1;for(let te=0;te<d.length;te++)3===d[te].status||(1===d[te].status?((0,ae.hu)(H===te-1,"All SENT items should be at beginning of queue."),H=te,d[te].status=3,d[te].abortReason="set"):((0,ae.hu)(0===d[te].status,"Unexpected transaction status in abort"),d[te].unwatcher(),x=x.concat(oa(f.serverSyncTree_,d[te].currentWriteId,!0)),d[te].onComplete&&v.push(d[te].onComplete.bind(null,new Error("set"),!1,null))));-1===H?de(c,void 0):d.length=H+1,Ro(f.eventQueue_,Zr(c),x);for(let te=0;te<v.length;te++)Rt(v[te])}}const wu=function(f,c){const d=Iu(f),v=d.namespace;return"firebase.com"===d.domain&&Ht(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==d.domain&&Ht("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ke("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rn(d.host,d.secure,v,"ws"===d.scheme||"wss"===d.scheme,c,"",v!==d.subdomain),path:new Yr(d.pathString)}},Iu=function(f){let c="",d="",v="",x="",H="",te=!0,we="https",Qe=443;if("string"==typeof f){let lt=f.indexOf("//");lt>=0&&(we=f.substring(0,lt-1),f=f.substring(lt+2));let ln=f.indexOf("/");-1===ln&&(ln=f.length);let Tn=f.indexOf("?");-1===Tn&&(Tn=f.length),c=f.substring(0,Math.min(ln,Tn)),ln<Tn&&(x=function Ac(f){let c="";const d=f.split("/");for(let v=0;v<d.length;v++)if(d[v].length>0){let x=d[v];try{x=decodeURIComponent(x.replace(/\+/g," "))}catch(H){}c+="/"+x}return c}(f.substring(ln,Tn)));const xn=function xc(f){const c={};"?"===f.charAt(0)&&(f=f.substring(1));for(const d of f.split("&")){if(0===d.length)continue;const v=d.split("=");2===v.length?c[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):ke(`Invalid query segment '${d}' in query '${f}'`)}return c}(f.substring(Math.min(f.length,Tn)));lt=c.indexOf(":"),lt>=0?(te="https"===we||"wss"===we,Qe=parseInt(c.substring(lt+1),10)):lt=c.length;const Cr=c.slice(0,lt);if("localhost"===Cr.toLowerCase())d="localhost";else if(Cr.split(".").length<=2)d=Cr;else{const pi=c.indexOf(".");v=c.substring(0,pi).toLowerCase(),d=c.substring(pi+1),H=v}"ns"in xn&&(H=xn.ns)}return{host:c,port:Qe,domain:d,subdomain:v,secure:te,scheme:we,pathString:x,namespace:H}};class ml{constructor(c,d,v,x){this.eventType=c,this.eventRegistration=d,this.snapshot=v,this.prevName=x}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ae.Wl)(this.snapshot.exportVal())}}class ec{constructor(c,d,v){this.eventRegistration=c,this.error=d,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class yl{constructor(c,d){this.snapshotCallback=c,this.cancelCallback=d}onValue(c,d){this.snapshotCallback.call(null,c,d)}onCancel(c){return(0,ae.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class zo{constructor(c,d,v,x){this._repo=c,this._path=d,this._queryParams=v,this._orderByCalled=x}get key(){return qr(this._path)?null:wi(this._path)}get ref(){return new Fa(this._repo,this._path)}get _queryIdentifier(){const c=Ye(this._queryParams),d=nr(c);return"{}"===d?"default":d}get _queryObject(){return Ye(this._queryParams)}isEqual(c){if(!((c=(0,ae.m9)(c))instanceof zo))return!1;const d=this._repo===c._repo,v=ks(this._path,c._path);return d&&v&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ks(f){let c="";for(let d=f.pieceNum_;d<f.pieces_.length;d++)""!==f.pieces_[d]&&(c+="/"+encodeURIComponent(String(f.pieces_[d])));return c||"/"}(this._path)}}class Fa extends zo{constructor(c,d){super(c,d,new ns,!1)}get parent(){const c=hs(this._path);return null===c?null:new Fa(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class _l{constructor(c,d,v){this._node=c,this.ref=d,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const d=new Yr(c),v=nl(this.ref,c);return new _l(this._node.getChild(d),v,ki)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,x)=>c(new _l(x,nl(this.ref,v),ki)))}hasChild(c){const d=new Yr(c);return!this._node.getChild(d).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ro(f,c){return(f=(0,ae.m9)(f))._checkNotDeleted("ref"),void 0!==c?nl(f._root,c):f._root}function nl(f,c){return null===Ir((f=(0,ae.m9)(f))._path)?(d=c,d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),ld("child","path",d,!1)):ld("child","path",c,!1),new Fa(f._repo,kr(f._path,c));var d}function Mc(f,c){(function(f,c){if(".info"===Ir(c))throw new Error(f+" failed = Can't modify data under /.info/")})("set",(f=(0,ae.m9)(f))._path),function(f,c,d,v){v&&void 0===c||Ga((0,ae.gK)(f,"value"),c,d)}("set",c,f._path,!1);const d=new ae.BH;return Hl(f._repo,f._path,c,null,d.wrapCallback(()=>{})),d.promise}class Ru{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,d){const v=d._queryParams.getIndex();return new ml("value",this,new _l(c.snapshotNode,new Fa(d._repo,d._path),v))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new ec(this,c,d):null}matches(c){return c instanceof Ru&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tc{constructor(c,d){this.eventType=c,this.callbackContext=d}respondsTo(c){let d="children_added"===c?"child_added":c;return d="children_removed"===d?"child_removed":d,this.eventType===d}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new ec(this,c,d):null}createEvent(c,d){(0,ae.hu)(null!=c.childName,"Child events should have a childName.");const v=nl(new Fa(d._repo,d._path),c.childName),x=d._queryParams.getIndex();return new ml(c.type,this,new _l(c.snapshotNode,v,x),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof tc&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function qo(f,c,d,v){return function Wo(f,c,d,v,x){let H;if("object"==typeof v&&(H=void 0,x=v),"function"==typeof v&&(H=v),x&&x.onlyOnce){const Qe=d,lt=(ln,Tn)=>{ru(f._repo,f,we),Qe(ln,Tn)};lt.userCallback=d.userCallback,lt.context=d.context,d=lt}const te=new yl(d,H||void 0),we="value"===c?new Ru(te):new tc(c,te);return function nu(f,c,d){let v;v=".info"===Ir(c._path)?Il(f.infoSyncTree_,c,d):Il(f.serverSyncTree_,c,d),cd(f.eventQueue_,c._path,v)}(f._repo,f,we),()=>ru(f._repo,f,we)}(f,"value",c,d,v)}(function Vs(f){(0,ae.hu)(!lo,"__referenceConstructor has already been defined"),lo=f})(Fa),function Qa(f){(0,ae.hu)(!nn,"__referenceConstructor has already been defined"),nn=f}(Fa);const kc={};function Fc(f,c,d,v,x){let H=v||f.options.databaseURL;void 0===H&&(f.options.projectId||Ht("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),He("Using default host for project ",f.options.projectId),H=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Qe,lt,te=wu(H,x),we=te.repoInfo;"undefined"!=typeof process&&process.env&&(lt=process.env.FIREBASE_DATABASE_EMULATOR_HOST),lt?(Qe=!0,H=`http://${lt}?ns=${we.namespace}`,te=wu(H,x),we=te.repoInfo):Qe=!te.repoInfo.secure;const ln=x&&Qe?new Xr(Xr.OWNER):new lr(f.name,f.options,c);(function(f,c){const d=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!is(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==d.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),Sa(f)}(d))throw new Error((0,ae.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",te),qr(te.path)||Ht("Database URL must point to the root of a Firebase Database (not including a child path).");const Tn=function Po(f,c,d,v){let x=kc[c.name];x||(x={},kc[c.name]=x);let H=x[f.toURLString()];return H&&Ht("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),H=new no(f,false,d,v),x[f.toURLString()]=H,H}(we,f,ln,new tr(f.name,d));return new Wa(Tn,f)}class Wa{constructor(c,d){this._repoInternal=c,this.app=d,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $l(f,c,d){if(f.stats_=as(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new Pn(f.repoInfo_,(v,x,H,te)=>{Uo(f,v,x,H,te)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>Ku(f,!0),0);else{if(null!=d){if("object"!=typeof d)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ae.Wl)(d)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}f.persistentConnection_=new vs(f.repoInfo_,c,(v,x,H,te)=>{Uo(f,v,x,H,te)},v=>{Ku(f,v)},v=>{!function Ns(f,c){yn(c,(d,v)=>{Zu(f,d,v)})}(f,v)},f.authTokenProvider_,f.appCheckProvider_,d),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(v=>{f.server_.refreshAuthToken(v)}),f.appCheckProvider_.addTokenChangeListener(v=>{f.server_.refreshAppCheckToken(v.token)}),f.statsReporter_=function Li(f,c){const d=f.toString();return Br[d]||(Br[d]=c()),Br[d]}(f.repoInfo_,()=>new _i(f.stats_,f.server_)),f.infoData_=new ee,f.infoSyncTree_=new Ta({startListening:(v,x,H,te)=>{let we=[];const Qe=f.infoData_.getNode(v._path);return Qe.isEmpty()||(we=xo(f.infoSyncTree_,v._path,Qe),setTimeout(()=>{te("ok")},0)),we},stopListening:()=>{}}),Zu(f,"connected",!1),f.serverSyncTree_=new Ta({startListening:(v,x,H,te)=>(f.server_.listen(v,H,x,(we,Qe)=>{const lt=te(we,Qe);Ro(f.eventQueue_,v._path,lt)}),[]),stopListening:(v,x)=>{f.server_.unlisten(v,x)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fa(this._repo,wr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function yd(f,c){const d=kc[c];(!d||d[f.key]!==f)&&Ht(`Database ${c}(${f.repoInfo_}) has already been deleted.`),function Qu(f){f.persistentConnection_&&f.persistentConnection_.interrupt("repo_interrupt")}(f),delete d[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&Ht("Cannot call "+c+" on a deleted database.")}}function b(f=(0,F.getApp)(),c){const d=(0,F._getProvider)(f,"database").getImmediate({identifier:c}),v=(0,ae.P0)("database");return v&&function p(f,c,d,v={}){(f=(0,ae.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&Ht("Cannot call useEmulator() after instance has already been initialized.");const x=f._repoInternal;let H;if(x.repoInfo_.nodeAdmin)v.mockUserToken&&Ht('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),H=new Xr(Xr.OWNER);else if(v.mockUserToken){const te="string"==typeof v.mockUserToken?v.mockUserToken:(0,ae.Sg)(v.mockUserToken,f.app.options.projectId);H=new Xr(te)}!function sl(f,c,d,v){f.repoInfo_=new rn(`${c}:${d}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams),v&&(f.authTokenProvider_=v)}(x,c,d,H)}(d,...v),d}vs.prototype.simpleListen=function(f,c){this.sendRequest("q",{p:f},c)},vs.prototype.echo=function(f,c){this.sendRequest("echo",{d:f},c)},function Ee(f){(function ht(f){Ze=f})(F.SDK_VERSION),(0,F._registerComponent)(new pe.wA("database",(c,{instanceIdentifier:d})=>Fc(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),d),"PUBLIC").setMultipleInstances(!0)),(0,F.registerVersion)(Xe,"0.14.0",f),(0,F.registerVersion)(Xe,"0.14.0","esm2017")}()},8766:(Wn,At,j)=>{j.d(At,{Lj:()=>xe,X3:()=>fn});var g=j(5861);let pe,ae;const pt=new WeakMap,Ze=new WeakMap,ht=new WeakMap,Oe=new WeakMap,Pe=new WeakMap;let vt={get(ke,Ut,Me){if(ke instanceof IDBTransaction){if("done"===Ut)return Ze.get(ke);if("objectStoreNames"===Ut)return ke.objectStoreNames||ht.get(ke);if("store"===Ut)return Me.objectStoreNames[1]?void 0:Me.objectStore(Me.objectStoreNames[0])}return Zt(ke[Ut])},set:(ke,Ut,Me)=>(ke[Ut]=Me,!0),has:(ke,Ut)=>ke instanceof IDBTransaction&&("done"===Ut||"store"===Ut)||Ut in ke};function Ot(ke){return"function"==typeof ke?function In(ke){return ke!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Xe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ke)?function(...Ut){return ke.apply(Ln(this),Ut),Zt(pt.get(this))}:function(...Ut){return Zt(ke.apply(Ln(this),Ut))}:function(Ut,...Me){const Tt=ke.call(Ln(this),Ut,...Me);return ht.set(Tt,Ut.sort?Ut.sort():[Ut]),Zt(Tt)}}(ke):(ke instanceof IDBTransaction&&function Cn(ke){if(Ze.has(ke))return;const Ut=new Promise((Me,Tt)=>{const et=()=>{ke.removeEventListener("complete",wt),ke.removeEventListener("error",at),ke.removeEventListener("abort",at)},wt=()=>{Me(),et()},at=()=>{Tt(ke.error||new DOMException("AbortError","AbortError")),et()};ke.addEventListener("complete",wt),ke.addEventListener("error",at),ke.addEventListener("abort",at)});Ze.set(ke,Ut)}(ke),((ke,Ut)=>Ut.some(Me=>ke instanceof Me))(ke,function We(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ke,vt):ke)}function Zt(ke){if(ke instanceof IDBRequest)return function Et(ke){const Ut=new Promise((Me,Tt)=>{const et=()=>{ke.removeEventListener("success",wt),ke.removeEventListener("error",at)},wt=()=>{Me(Zt(ke.result)),et()},at=()=>{Tt(ke.error),et()};ke.addEventListener("success",wt),ke.addEventListener("error",at)});return Ut.then(Me=>{Me instanceof IDBCursor&&pt.set(Me,ke)}).catch(()=>{}),Pe.set(Ut,ke),Ut}(ke);if(Oe.has(ke))return Oe.get(ke);const Ut=Ot(ke);return Ut!==ke&&(Oe.set(ke,Ut),Pe.set(Ut,ke)),Ut}const Ln=ke=>Pe.get(ke);function fn(ke,Ut,{blocked:Me,upgrade:Tt,blocking:et,terminated:wt}={}){const at=indexedDB.open(ke,Ut),on=Zt(at);return Tt&&at.addEventListener("upgradeneeded",Dn=>{Tt(Zt(at.result),Dn.oldVersion,Dn.newVersion,Zt(at.transaction))}),Me&&at.addEventListener("blocked",()=>Me()),on.then(Dn=>{wt&&Dn.addEventListener("close",()=>wt()),et&&Dn.addEventListener("versionchange",()=>et())}).catch(()=>{}),on}function xe(ke,{blocked:Ut}={}){const Me=indexedDB.deleteDatabase(ke);return Ut&&Me.addEventListener("blocked",()=>Ut()),Zt(Me).then(()=>{})}const He=["get","getKey","getAll","getAllKeys","count"],St=["put","add","delete","clear"],an=new Map;function Ht(ke,Ut){if(!(ke instanceof IDBDatabase)||Ut in ke||"string"!=typeof Ut)return;if(an.get(Ut))return an.get(Ut);const Me=Ut.replace(/FromIndex$/,""),Tt=Ut!==Me,et=St.includes(Me);if(!(Me in(Tt?IDBIndex:IDBObjectStore).prototype)||!et&&!He.includes(Me))return;const wt=function(){var at=(0,g.Z)(function*(on,...Dn){const nr=this.transaction(on,et?"readwrite":"readonly");let rr=nr.store;return Tt&&(rr=rr.index(Dn.shift())),(yield Promise.all([rr[Me](...Dn),et&&nr.done]))[0]});return function(Dn){return at.apply(this,arguments)}}();return an.set(Ut,wt),wt}!function un(ke){vt=ke(vt)}(ke=>cC(uC({},ke),{get:(Ut,Me,Tt)=>Ht(Ut,Me)||ke.get(Ut,Me,Tt),has:(Ut,Me)=>!!Ht(Ut,Me)||ke.has(Ut,Me)}))},2290:(Wn,At,j)=>{j.d(At,{Rh:()=>nr,_W:()=>at});var g=j(5e3),F=j(1777),pe=j(7579),ae=j(9808),We=j(2313);const Xe=["toast-component",""];function pt(Vt,kt){if(1&Vt){const st=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(st),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function Ze(Vt,kt){if(1&Vt&&(g.ynx(0),g._uU(1),g.BQk()),2&Vt){const st=g.oxw(2);g.xp6(1),g.hij("[",st.duplicatesCount+1,"]")}}function ht(Vt,kt){if(1&Vt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,Ze,2,1,"ng-container",4),g.qZA()),2&Vt){const st=g.oxw();g.Tol(st.options.titleClass),g.uIk("aria-label",st.title),g.xp6(1),g.hij(" ",st.title," "),g.xp6(1),g.Q6J("ngIf",st.duplicatesCount)}}function Oe(Vt,kt){if(1&Vt&&g._UZ(0,"div",7),2&Vt){const st=g.oxw();g.Tol(st.options.messageClass),g.Q6J("innerHTML",st.message,g.oJD)}}function Pe(Vt,kt){if(1&Vt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&Vt){const st=g.oxw();g.Tol(st.options.messageClass),g.uIk("aria-label",st.message),g.xp6(1),g.hij(" ",st.message," ")}}function Et(Vt,kt){if(1&Vt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&Vt){const st=g.oxw();g.xp6(1),g.Udp("width",st.width+"%")}}function Cn(Vt,kt){if(1&Vt){const st=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(st),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function vt(Vt,kt){if(1&Vt&&(g.ynx(0),g._uU(1),g.BQk()),2&Vt){const st=g.oxw(2);g.xp6(1),g.hij("[",st.duplicatesCount+1,"]")}}function un(Vt,kt){if(1&Vt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,vt,2,1,"ng-container",4),g.qZA()),2&Vt){const st=g.oxw();g.Tol(st.options.titleClass),g.uIk("aria-label",st.title),g.xp6(1),g.hij(" ",st.title," "),g.xp6(1),g.Q6J("ngIf",st.duplicatesCount)}}function In(Vt,kt){if(1&Vt&&g._UZ(0,"div",7),2&Vt){const st=g.oxw();g.Tol(st.options.messageClass),g.Q6J("innerHTML",st.message,g.oJD)}}function Ot(Vt,kt){if(1&Vt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&Vt){const st=g.oxw();g.Tol(st.options.messageClass),g.uIk("aria-label",st.message),g.xp6(1),g.hij(" ",st.message," ")}}function Zt(Vt,kt){if(1&Vt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&Vt){const st=g.oxw();g.xp6(1),g.Udp("width",st.width+"%")}}class xe{constructor(kt,st){this.component=kt,this.injector=st}attach(kt,st){return this._attachedHost=kt,kt.attach(this,st)}detach(){const kt=this._attachedHost;if(kt)return this._attachedHost=void 0,kt.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(kt){this._attachedHost=kt}}class St{constructor(kt,st,Dt,ut,Yt,Rt){this.toastId=kt,this.config=st,this.message=Dt,this.title=ut,this.toastType=Yt,this.toastRef=Rt,this._onTap=new pe.x,this._onAction=new pe.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(kt){this._onAction.next(kt)}onAction(){return this._onAction.asObservable()}}const an={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},Ht=new g.OlP("ToastConfig");class ke{constructor(kt){this._overlayRef=kt,this.duplicatesCount=0,this._afterClosed=new pe.x,this._activate=new pe.x,this._manualClose=new pe.x,this._resetTimeout=new pe.x,this._countDuplicate=new pe.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(kt,st){kt&&this._resetTimeout.next(),st&&this._countDuplicate.next(++this.duplicatesCount)}}class Ut{constructor(kt,st){this._toastPackage=kt,this._parentInjector=st}get(kt,st,Dt){return kt===St?this._toastPackage:this._parentInjector.get(kt,st,Dt)}}class Me extends class He{attach(kt,st){return this._attachedPortal=kt,this.attachComponentPortal(kt,st)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(kt){this._disposeFn=kt}}{constructor(kt,st,Dt){super(),this._hostDomElement=kt,this._componentFactoryResolver=st,this._appRef=Dt}attachComponentPortal(kt,st){const Dt=this._componentFactoryResolver.resolveComponentFactory(kt.component);let ut;return ut=Dt.create(kt.injector),this._appRef.attachView(ut.hostView),this.setDisposeFn(()=>{this._appRef.detachView(ut.hostView),ut.destroy()}),st?this._hostDomElement.insertBefore(this._getComponentRootNode(ut),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(ut)),ut}_getComponentRootNode(kt){return kt.hostView.rootNodes[0]}}class Tt{constructor(kt){this._portalHost=kt}attach(kt,st=!0){return this._portalHost.attach(kt,st)}detach(){return this._portalHost.detach()}}let et=(()=>{class Vt{constructor(st){this._document=st}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const st=this._document.createElement("div");st.classList.add("overlay-container"),st.setAttribute("aria-live","polite"),this._document.body.appendChild(st),this._containerElement=st}}return Vt.\u0275fac=function(st){return new(st||Vt)(g.LFG(ae.K0))},Vt.\u0275prov=g.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})(),wt=(()=>{class Vt{constructor(st,Dt,ut,Yt){this._overlayContainer=st,this._componentFactoryResolver=Dt,this._appRef=ut,this._document=Yt,this._paneElements=new Map}create(st,Dt){return this._createOverlayRef(this.getPaneElement(st,Dt))}getPaneElement(st="",Dt){return this._paneElements.get(Dt)||this._paneElements.set(Dt,{}),this._paneElements.get(Dt)[st]||(this._paneElements.get(Dt)[st]=this._createPaneElement(st,Dt)),this._paneElements.get(Dt)[st]}_createPaneElement(st,Dt){const ut=this._document.createElement("div");return ut.id="toast-container",ut.classList.add(st),ut.classList.add("toast-container"),Dt?Dt.getContainerElement().appendChild(ut):this._overlayContainer.getContainerElement().appendChild(ut),ut}_createPortalHost(st){return new Me(st,this._componentFactoryResolver,this._appRef)}_createOverlayRef(st){return new Tt(this._createPortalHost(st))}}return Vt.\u0275fac=function(st){return new(st||Vt)(g.LFG(et),g.LFG(g._Vd),g.LFG(g.z2F),g.LFG(ae.K0))},Vt.\u0275prov=g.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})(),at=(()=>{class Vt{constructor(st,Dt,ut,Yt,Rt){this.overlay=Dt,this._injector=ut,this.sanitizer=Yt,this.ngZone=Rt,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},st.default),st.config),st.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},st.default.iconClasses),st.config.iconClasses))}show(st,Dt,ut={},Yt=""){return this._preBuildNotification(Yt,st,Dt,this.applyConfig(ut))}success(st,Dt,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",st,Dt,this.applyConfig(ut))}error(st,Dt,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",st,Dt,this.applyConfig(ut))}info(st,Dt,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",st,Dt,this.applyConfig(ut))}warning(st,Dt,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",st,Dt,this.applyConfig(ut))}clear(st){for(const Dt of this.toasts)if(void 0!==st){if(Dt.toastId===st)return void Dt.toastRef.manualClose()}else Dt.toastRef.manualClose()}remove(st){const Dt=this._findToast(st);if(!Dt||(Dt.activeToast.toastRef.close(),this.toasts.splice(Dt.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const ut=this.toasts[this.currentlyActive].toastRef;ut.isInactive()||(this.currentlyActive=this.currentlyActive+1,ut.activate())}return!0}findDuplicate(st="",Dt="",ut,Yt){const{includeTitleDuplicates:Rt}=this.toastrConfig;for(const tn of this.toasts){const Gn=Rt&&tn.title===st;if((!Rt||Gn)&&tn.message===Dt)return tn.toastRef.onDuplicate(ut,Yt),tn}return null}applyConfig(st={}){return Object.assign(Object.assign({},this.toastrConfig),st)}_findToast(st){for(let Dt=0;Dt<this.toasts.length;Dt++)if(this.toasts[Dt].toastId===st)return{index:Dt,activeToast:this.toasts[Dt]};return null}_preBuildNotification(st,Dt,ut,Yt){return Yt.onActivateTick?this.ngZone.run(()=>this._buildNotification(st,Dt,ut,Yt)):this._buildNotification(st,Dt,ut,Yt)}_buildNotification(st,Dt,ut,Yt){if(!Yt.toastComponent)throw new Error("toastComponent required");const Rt=this.findDuplicate(ut,Dt,this.toastrConfig.resetTimeoutOnDuplicate&&Yt.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&ut||Dt)&&this.toastrConfig.preventDuplicates&&null!==Rt)return Rt;this.previousToastMessage=Dt;let tn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(tn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Gn=this.overlay.create(Yt.positionClass,this.overlayContainer);this.index=this.index+1;let tr=Dt;Dt&&Yt.enableHtml&&(tr=this.sanitizer.sanitize(g.q3G.HTML,Dt));const lr=new ke(Gn),Xr=new St(this.index,Yt,tr,ut,st,lr),oi=new Ut(Xr,this._injector),Qn=new xe(Yt.toastComponent,oi),Wr=Gn.attach(Qn,this.toastrConfig.newestOnTop);lr.componentInstance=Wr.instance;const xr={toastId:this.index,title:ut||"",message:Dt||"",toastRef:lr,onShown:lr.afterActivate(),onHidden:lr.afterClosed(),onTap:Xr.onTap(),onAction:Xr.onAction(),portal:Wr};return tn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{xr.toastRef.activate()})),this.toasts.push(xr),xr}}return Vt.\u0275fac=function(st){return new(st||Vt)(g.LFG(Ht),g.LFG(wt),g.LFG(g.zs3),g.LFG(We.H7),g.LFG(g.R0b))},Vt.\u0275prov=g.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt})(),on=(()=>{class Vt{constructor(st,Dt,ut){this.toastrService=st,this.toastPackage=Dt,this.ngZone=ut,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=Dt.message,this.title=Dt.title,this.options=Dt.config,this.originalTimeout=Dt.config.timeOut,this.toastClasses=`${Dt.toastType} ${Dt.config.toastClass}`,this.sub=Dt.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Dt.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Dt.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Dt.toastRef.countDuplicate().subscribe(Yt=>{this.duplicatesCount=Yt})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const st=(new Date).getTime();this.width=(this.hideTime-st)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(st,Dt){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(st),Dt)):this.timeout=setTimeout(()=>st(),Dt)}outsideInterval(st,Dt){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(st),Dt)):this.intervalId=setInterval(()=>st(),Dt)}runInsideAngular(st){this.ngZone?this.ngZone.run(()=>st()):st()}}return Vt.\u0275fac=function(st){return new(st||Vt)(g.Y36(at),g.Y36(St),g.Y36(g.R0b))},Vt.\u0275cmp=g.Xpm({type:Vt,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(st,Dt){1&st&&g.NdJ("click",function(){return Dt.tapToast()})("mouseenter",function(){return Dt.stickAround()})("mouseleave",function(){return Dt.delayedHideToast()}),2&st&&(g.d8E("@flyInOut",Dt.state),g.Tol(Dt.toastClasses),g.Udp("display",Dt.displayStyle))},attrs:Xe,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(st,Dt){1&st&&(g.YNc(0,pt,3,0,"button",0),g.YNc(1,ht,3,5,"div",1),g.YNc(2,Oe,1,3,"div",2),g.YNc(3,Pe,2,4,"div",3),g.YNc(4,Et,2,2,"div",4)),2&st&&(g.Q6J("ngIf",Dt.options.closeButton),g.xp6(1),g.Q6J("ngIf",Dt.title),g.xp6(1),g.Q6J("ngIf",Dt.message&&Dt.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Dt.message&&!Dt.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Dt.options.progressBar))},directives:[ae.O5],encapsulation:2,data:{animation:[(0,F.X$)("flyInOut",[(0,F.SB)("inactive",(0,F.oB)({opacity:0})),(0,F.SB)("active",(0,F.oB)({opacity:1})),(0,F.SB)("removed",(0,F.oB)({opacity:0})),(0,F.eR)("inactive => active",(0,F.jt)("{{ easeTime }}ms {{ easing }}")),(0,F.eR)("active => removed",(0,F.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),Vt})();const Dn=Object.assign(Object.assign({},an),{toastComponent:on});let nr=(()=>{class Vt{static forRoot(st={}){return{ngModule:Vt,providers:[{provide:Ht,useValue:{default:Dn,config:st}}]}}}return Vt.\u0275fac=function(st){return new(st||Vt)},Vt.\u0275mod=g.oAB({type:Vt}),Vt.\u0275inj=g.cJS({imports:[[ae.ez]]}),Vt})(),yn=(()=>{class Vt{constructor(st,Dt,ut){this.toastrService=st,this.toastPackage=Dt,this.appRef=ut,this.width=-1,this.toastClasses="",this.state="inactive",this.message=Dt.message,this.title=Dt.title,this.options=Dt.config,this.originalTimeout=Dt.config.timeOut,this.toastClasses=`${Dt.toastType} ${Dt.config.toastClass}`,this.sub=Dt.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Dt.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Dt.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Dt.toastRef.countDuplicate().subscribe(Yt=>{this.duplicatesCount=Yt})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const st=(new Date).getTime();this.width=(this.hideTime-st)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return Vt.\u0275fac=function(st){return new(st||Vt)(g.Y36(at),g.Y36(St),g.Y36(g.z2F))},Vt.\u0275cmp=g.Xpm({type:Vt,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(st,Dt){1&st&&g.NdJ("click",function(){return Dt.tapToast()})("mouseenter",function(){return Dt.stickAround()})("mouseleave",function(){return Dt.delayedHideToast()}),2&st&&(g.Tol(Dt.toastClasses),g.Udp("display",Dt.displayStyle))},attrs:Xe,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(st,Dt){1&st&&(g.YNc(0,Cn,3,0,"button",0),g.YNc(1,un,3,5,"div",1),g.YNc(2,In,1,3,"div",2),g.YNc(3,Ot,2,4,"div",3),g.YNc(4,Zt,2,2,"div",4)),2&st&&(g.Q6J("ngIf",Dt.options.closeButton),g.xp6(1),g.Q6J("ngIf",Dt.title),g.xp6(1),g.Q6J("ngIf",Dt.message&&Dt.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Dt.message&&!Dt.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Dt.options.progressBar))},directives:[ae.O5],encapsulation:2}),Vt})();Object.assign(Object.assign({},an),{toastComponent:yn})},9485:(Wn,At,j)=>{j.d(At,{YC:()=>kt,kz:()=>Dt,nF:()=>st});var g=j(5e3),F=j(9808),pe=j(8879),ae=j(7579),We=j(9646);const Xe=["prevElRef"],pt=["nextElRef"],Ze=["scrollbarElRef"],ht=["paginationElRef"];function Oe(ut,Yt){1&ut&&(g.ynx(0),g._UZ(1,"div",6,7)(3,"div",8,9),g.BQk())}function Pe(ut,Yt){1&ut&&g._UZ(0,"div",10,11)}function Et(ut,Yt){1&ut&&g._UZ(0,"div",12,13)}function Cn(ut,Yt){}function vt(ut,Yt){1&ut&&g.YNc(0,Cn,0,0,"ng-template")}function un(ut,Yt){}function In(ut,Yt){1&ut&&g.YNc(0,un,0,0,"ng-template")}function Ot(ut,Yt){}function Zt(ut,Yt){1&ut&&g.YNc(0,Ot,0,0,"ng-template")}function Ln(ut,Yt){}const fn=function(ut){return{$implicit:ut}};function xe(ut,Yt){if(1&ut&&(g.TgZ(0,"div",3),g.YNc(1,Ln,0,0,"ng-template",18),g.qZA()),2&ut){const Rt=g.oxw().$implicit,tn=g.oxw(2);g.Q6J("ngClass",tn.zoomContainerClass),g.xp6(1),g.Q6J("ngTemplateOutlet",Rt.template)("ngTemplateOutletContext",g.VKq(3,fn,Rt.slideData))}}function He(ut,Yt){}function St(ut,Yt){if(1&ut&&(g.ynx(0),g.YNc(1,He,0,0,"ng-template",18),g.BQk()),2&ut){const Rt=g.oxw().$implicit;g.xp6(1),g.Q6J("ngTemplateOutlet",Rt.template)("ngTemplateOutletContext",g.VKq(2,fn,Rt.slideData))}}function an(ut,Yt){if(1&ut&&(g.TgZ(0,"div",15),g.YNc(1,xe,2,5,"div",16),g.YNc(2,St,2,4,"ng-container",17),g.qZA()),2&ut){const Rt=Yt.$implicit,tn=g.oxw().key,Gn=g.oxw();g.Akn(Gn.style),g.Q6J("ngClass",(Rt.class?Rt.class+" ":"")+Gn.slideClass+(""!==tn?" "+Gn.slideDuplicateClass:""))("ngSwitch",Rt.zoom),g.uIk("data-swiper-slide-index",Rt.virtualIndex?Rt.virtualIndex:Rt.slideIndex)("data-swiper-autoplay",Rt.autoplayDelay),g.xp6(1),g.Q6J("ngSwitchCase",!0)}}function Ht(ut,Yt){1&ut&&(g.YNc(0,an,3,7,"div",14),g.ALo(1,"async")),2&ut&&g.Q6J("ngForOf",g.lcZ(1,1,Yt.loopSlides))}const ke=[[["","slot","container-start"]],[["","slot","wrapper-start"]],[["","slot","wrapper-end"]],[["","slot","container-end"]]],Ut=function(ut){return{loopSlides:ut,key:"prepend"}},Me=function(ut){return{loopSlides:ut,key:""}},Tt=function(ut){return{loopSlides:ut,key:"append"}},et=["[slot=container-start]","[slot=wrapper-start]","[slot=wrapper-end]","[slot=container-end]"],wt=["init","enabled","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","on"];function at(ut){return"object"==typeof ut&&null!==ut&&ut.constructor&&"Object"===Object.prototype.toString.call(ut).slice(8,-1)}function on(ut){return void 0!==ut&&"boolean"!=typeof ut&&!0===ut.enabled}function Dn(ut,Yt,Rt){return!0===rr(ut)&&Yt&&!Yt.el||!("boolean"!=typeof Yt&&Yt.el!==(null==Rt?void 0:Rt.nativeElement)&&("string"==typeof Yt.el||"object"==typeof Yt.el))}function nr(ut,Yt){const Rt=["__proto__","constructor","prototype"];Object.keys(Yt).filter(tn=>Rt.indexOf(tn)<0).forEach(tn=>{void 0!==ut[tn]?ut[tn]&&!Yt[tn]||(at(Yt[tn])&&at(ut[tn])&&Object.keys(Yt[tn]).length>0?Yt[tn].__swiper__?ut[tn]=Yt[tn]:nr(ut[tn],Yt[tn]):ut[tn]=Yt[tn]):ut[tn]=Yt[tn]})}function rr(ut){return null!=ut&&"false"!=`${ut}`}const yn=["pagination","navigation","scrollbar","virtual"];function Tr(ut,Yt={}){return at(ut)?ut:!0===rr(ut)&&Yt}function Vt(ut={}){const Yt={on:{}},Rt={};nr(Yt,pe.ZP.defaults),nr(Yt,pe.ZP.extendedDefaults),Yt._emitClasses=!0,Yt.init=!1;const tn={},Gn=wt.map(tr=>tr.replace(/_/,""));return Object.keys(ut).forEach(tr=>{const lr=tr.replace(/^_/,"");Gn.indexOf(lr)>=0?at(ut[tr])?(Yt[lr]={},Rt[lr]={},nr(Yt[lr],ut[tr]),nr(Rt[lr],ut[tr])):(Yt[lr]=ut[tr],Rt[lr]=ut[tr]):tn[lr]=ut[tr]}),["navigation","pagination","scrollbar"].forEach(tr=>{!0===Yt[tr]&&(Yt[tr]={}),!1===Yt[tr]&&delete Yt[tr]}),{params:Yt,passedParams:Rt,rest:tn}}wt.map(ut=>ut.replace(/_/,""));let kt=(()=>{class ut{constructor(Rt){this.template=Rt,this.class="",this.autoplayDelay=null,this.slideData={isActive:!1,isPrev:!1,isNext:!1,isVisible:!1,isDuplicate:!1}}set ngClass(Rt){this.class=[this.class||"",Rt].join(" ")}set zoom(Rt){this._zoom=rr(Rt)}get zoom(){return this._zoom}get classNames(){return this._classNames}set classNames(Rt){this._classNames!==Rt&&(this._classNames=Rt,this.slideData={isActive:this._hasClass(["swiper-slide-active","swiper-slide-duplicate-active"]),isVisible:this._hasClass(["swiper-slide-visible"]),isDuplicate:this._hasClass(["swiper-slide-duplicate"]),isPrev:this._hasClass(["swiper-slide-prev","swiper-slide-duplicate-prev"]),isNext:this._hasClass(["swiper-slide-next","swiper-slide-duplicate-next"])})}_hasClass(Rt){return Rt.some(tn=>this._classNames.indexOf(tn)>=0)}}return ut.\u0275fac=function(Rt){return new(Rt||ut)(g.Y36(g.Rgc))},ut.\u0275dir=g.lG2({type:ut,selectors:[["ng-template","swiperSlide",""]],inputs:{virtualIndex:"virtualIndex",class:"class",ngClass:"ngClass",autoplayDelay:["data-swiper-autoplay","autoplayDelay"],zoom:"zoom"}}),ut})(),st=(()=>{class ut{constructor(Rt,tn,Gn,tr){this._ngZone=Rt,this.elementRef=tn,this._changeDetectorRef=Gn,this._platformId=tr,this.slideClass="swiper-slide",this.wrapperClass="swiper-wrapper",this.showNavigation=!0,this.showPagination=!0,this.showScrollbar=!0,this.s__beforeBreakpoint=new g.vpe,this.s__containerClasses=new g.vpe,this.s__slideClass=new g.vpe,this.s__swiper=new g.vpe,this.s_activeIndexChange=new g.vpe,this.s_afterInit=new g.vpe,this.s_autoplay=new g.vpe,this.s_autoplayStart=new g.vpe,this.s_autoplayStop=new g.vpe,this.s_autoplayPause=new g.vpe,this.s_autoplayResume=new g.vpe,this.s_beforeDestroy=new g.vpe,this.s_beforeInit=new g.vpe,this.s_beforeLoopFix=new g.vpe,this.s_beforeResize=new g.vpe,this.s_beforeSlideChangeStart=new g.vpe,this.s_beforeTransitionStart=new g.vpe,this.s_breakpoint=new g.vpe,this.s_changeDirection=new g.vpe,this.s_click=new g.vpe,this.s_doubleTap=new g.vpe,this.s_doubleClick=new g.vpe,this.s_destroy=new g.vpe,this.s_fromEdge=new g.vpe,this.s_hashChange=new g.vpe,this.s_hashSet=new g.vpe,this.s_imagesReady=new g.vpe,this.s_init=new g.vpe,this.s_keyPress=new g.vpe,this.s_lazyImageLoad=new g.vpe,this.s_lazyImageReady=new g.vpe,this.s_loopFix=new g.vpe,this.s_momentumBounce=new g.vpe,this.s_navigationHide=new g.vpe,this.s_navigationShow=new g.vpe,this.s_navigationPrev=new g.vpe,this.s_navigationNext=new g.vpe,this.s_observerUpdate=new g.vpe,this.s_orientationchange=new g.vpe,this.s_paginationHide=new g.vpe,this.s_paginationRender=new g.vpe,this.s_paginationShow=new g.vpe,this.s_paginationUpdate=new g.vpe,this.s_progress=new g.vpe,this.s_reachBeginning=new g.vpe,this.s_reachEnd=new g.vpe,this.s_realIndexChange=new g.vpe,this.s_resize=new g.vpe,this.s_scroll=new g.vpe,this.s_scrollbarDragEnd=new g.vpe,this.s_scrollbarDragMove=new g.vpe,this.s_scrollbarDragStart=new g.vpe,this.s_setTransition=new g.vpe,this.s_setTranslate=new g.vpe,this.s_slideChange=new g.vpe,this.s_slideChangeTransitionEnd=new g.vpe,this.s_slideChangeTransitionStart=new g.vpe,this.s_slideNextTransitionEnd=new g.vpe,this.s_slideNextTransitionStart=new g.vpe,this.s_slidePrevTransitionEnd=new g.vpe,this.s_slidePrevTransitionStart=new g.vpe,this.s_slideResetTransitionStart=new g.vpe,this.s_slideResetTransitionEnd=new g.vpe,this.s_sliderMove=new g.vpe,this.s_sliderFirstMove=new g.vpe,this.s_slidesLengthChange=new g.vpe,this.s_slidesGridLengthChange=new g.vpe,this.s_snapGridLengthChange=new g.vpe,this.s_snapIndexChange=new g.vpe,this.s_tap=new g.vpe,this.s_toEdge=new g.vpe,this.s_touchEnd=new g.vpe,this.s_touchMove=new g.vpe,this.s_touchMoveOpposite=new g.vpe,this.s_touchStart=new g.vpe,this.s_transitionEnd=new g.vpe,this.s_transitionStart=new g.vpe,this.s_update=new g.vpe,this.s_zoomChange=new g.vpe,this.s_swiper=new g.vpe,this.s_lock=new g.vpe,this.s_unlock=new g.vpe,this._activeSlides=new ae.x,this.containerClasses="swiper",this.slidesChanges=lr=>{this.slides=lr.map((Xr,oi)=>(Xr.slideIndex=oi,Xr.classNames=this.slideClass||"",Xr)),this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.virtual?this.swiperRef&&this.swiperRef.virtual&&this._ngZone.runOutsideAngular(()=>{this.swiperRef.virtual.slides=this.slides,this.swiperRef.virtual.update(!0)}):this.loopedSlides&&(this.prependSlides=(0,We.of)(this.slides.slice(this.slides.length-this.loopedSlides)),this.appendSlides=(0,We.of)(this.slides.slice(0,this.loopedSlides))),this._changeDetectorRef.detectChanges()},this.style=null,this.updateVirtualSlides=lr=>{!this.swiperRef||this.currentVirtualData&&this.currentVirtualData.from===lr.from&&this.currentVirtualData.to===lr.to&&this.currentVirtualData.offset===lr.offset||(this.style=this.swiperRef.isHorizontal()?{[this.swiperRef.rtlTranslate?"right":"left"]:`${lr.offset}px`}:{top:`${lr.offset}px`},this.currentVirtualData=lr,this._activeSlides.next(lr.slides),this._ngZone.run(()=>{this._changeDetectorRef.detectChanges()}),this._ngZone.runOutsideAngular(()=>{this.swiperRef.updateSlides(),this.swiperRef.updateProgress(),this.swiperRef.updateSlidesClasses(),on(this.swiperRef.params.lazy)&&this.swiperRef.lazy.load(),this.swiperRef.virtual.update(!0)}))}}set navigation(Rt){var tn,Gn,tr;const lr="boolean"!=typeof this._navigation&&""!==this._navigation?null===(tn=this._navigation)||void 0===tn?void 0:tn.nextEl:null,Xr="boolean"!=typeof this._navigation&&""!==this._navigation?null===(Gn=this._navigation)||void 0===Gn?void 0:Gn.prevEl:null;this._navigation=Tr(Rt,{nextEl:lr||null,prevEl:Xr||null}),this.showNavigation=!(!0!==rr(Rt)||this._navigation&&"boolean"!=typeof this._navigation&&this._navigation.prevEl!==(null===(tr=this._prevElRef)||void 0===tr?void 0:tr.nativeElement)&&(null!==this._navigation.prevEl||null!==this._navigation.nextEl)&&("string"==typeof this._navigation.nextEl||"string"==typeof this._navigation.prevEl||"object"==typeof this._navigation.nextEl||"object"==typeof this._navigation.prevEl))}get navigation(){return this._navigation}set pagination(Rt){var tn;const Gn="boolean"!=typeof this._pagination&&""!==this._pagination?null===(tn=this._pagination)||void 0===tn?void 0:tn.el:null;this._pagination=Tr(Rt,{el:Gn||null}),this.showPagination=Dn(Rt,this._pagination,this._paginationElRef)}get pagination(){return this._pagination}set scrollbar(Rt){var tn;const Gn="boolean"!=typeof this._scrollbar&&""!==this._scrollbar?null===(tn=this._scrollbar)||void 0===tn?void 0:tn.el:null;this._scrollbar=Tr(Rt,{el:Gn||null}),this.showScrollbar=Dn(Rt,this._scrollbar,this._scrollbarElRef)}get scrollbar(){return this._scrollbar}set virtual(Rt){this._virtual=Tr(Rt)}get virtual(){return this._virtual}set config(Rt){this.updateSwiper(Rt);const{params:tn}=Vt(Rt);Object.assign(this,tn)}set prevElRef(Rt){this._prevElRef=Rt,this._setElement(Rt,this.navigation,"navigation","prevEl")}set nextElRef(Rt){this._nextElRef=Rt,this._setElement(Rt,this.navigation,"navigation","nextEl")}set scrollbarElRef(Rt){this._scrollbarElRef=Rt,this._setElement(Rt,this.scrollbar,"scrollbar")}set paginationElRef(Rt){this._paginationElRef=Rt,this._setElement(Rt,this.pagination,"pagination")}get activeSlides(){return this.virtual?this._activeSlides:(0,We.of)(this.slides)}get zoomContainerClass(){return this.zoom&&"boolean"!=typeof this.zoom?this.zoom.containerClass:"swiper-zoom-container"}_setElement(Rt,tn,Gn,tr="el"){if(!tn||!Rt)return;if(Rt.nativeElement){if(tn[tr]===Rt.nativeElement)return;tn[tr]=Rt.nativeElement}const lr={};lr[Gn]=!0,this.updateInitSwiper(lr)}ngOnInit(){const{params:Rt}=Vt(this);Object.assign(this,Rt)}ngAfterViewInit(){this.childrenSlidesInit(),this.initSwiper(),this._changeDetectorRef.detectChanges(),setTimeout(()=>{this.s_swiper.emit(this.swiperRef)})}childrenSlidesInit(){this.slidesChanges(this.slidesEl),this.slidesEl.changes.subscribe(this.slidesChanges)}get isSwiperActive(){return this.swiperRef&&!this.swiperRef.destroyed}initSwiper(){const{params:Rt}=Vt(this);Object.assign(this,Rt),this._ngZone.runOutsideAngular(()=>{Rt.init=!1,Rt.virtual||(Rt.observer=!0),Rt.onAny=(oi,...Qn)=>{const Wr=this["s_"+oi];Wr&&Wr.emit([...Qn])},Object.assign(Rt.on,{_containerClasses:(oi,Qn)=>{setTimeout(()=>{this.containerClasses=Qn})},_slideClasses:(oi,Qn)=>{Qn.forEach(({slideEl:Wr,classNames:xr},Mr)=>{const rs=Wr.getAttribute("data-swiper-slide-index"),Ji=rs?parseInt(rs):Mr;if(this.virtual){const dn=this.slides.find(rt=>rt.virtualIndex&&rt.virtualIndex===Ji);if(dn)return void(dn.classNames=xr)}this.slides[Ji]&&(this.slides[Ji].classNames=xr)}),this._changeDetectorRef.detectChanges()}});const lr=new pe.ZP(Rt);lr.loopCreate=()=>{},lr.loopDestroy=()=>{},Rt.loop&&(lr.loopedSlides=this.loopedSlides);const Xr=on(lr.params.virtual);if(lr.virtual&&Xr){lr.virtual.slides=this.slides;const oi={cache:!1,slides:this.slides,renderExternal:this.updateVirtualSlides,renderExternalUpdate:!1};nr(lr.params.virtual,oi),nr(lr.originalParams.virtual,oi)}if((0,F.NF)(this._platformId)){this.swiperRef=lr.init(this.elementRef.nativeElement);const oi=on(this.swiperRef.params.virtual);this.swiperRef.virtual&&oi&&this.swiperRef.virtual.update(!0),this._changeDetectorRef.detectChanges()}})}ngOnChanges(Rt){this.updateSwiper(Rt),this._changeDetectorRef.detectChanges()}updateInitSwiper(Rt){!Rt||!this.swiperRef||this.swiperRef.destroyed||this._ngZone.runOutsideAngular(()=>{const{pagination:Gn,navigation:tr,scrollbar:lr,thumbs:oi}=this.swiperRef;Rt.pagination&&(this.pagination&&"boolean"!=typeof this.pagination&&this.pagination.el&&Gn&&!Gn.el?(this.updateParameter("pagination",this.pagination),Gn.init(),Gn.render(),Gn.update()):(Gn.destroy(),Gn.el=null)),Rt.scrollbar&&(this.scrollbar&&"boolean"!=typeof this.scrollbar&&this.scrollbar.el&&lr&&!lr.el?(this.updateParameter("scrollbar",this.scrollbar),lr.init(),lr.updateSize(),lr.setTranslate()):(lr.destroy(),lr.el=null)),Rt.navigation&&(this.navigation&&"boolean"!=typeof this.navigation&&this.navigation.prevEl&&this.navigation.nextEl&&tr&&!tr.prevEl&&!tr.nextEl?(this.updateParameter("navigation",this.navigation),tr.init(),tr.update()):tr.prevEl&&tr.nextEl&&(tr.destroy(),tr.nextEl=null,tr.prevEl=null)),Rt.thumbs&&this.thumbs&&this.thumbs.swiper&&(this.updateParameter("thumbs",this.thumbs),oi.init()&&oi.update(!0)),Rt.controller&&this.controller&&this.controller.control&&(this.swiperRef.controller.control=this.controller.control),this.swiperRef.update()})}updateSwiper(Rt){this._ngZone.runOutsideAngular(()=>{var tn,Gn;if(!Rt.config&&Rt&&this.swiperRef&&!this.swiperRef.destroyed){for(const tr in Rt){if(yn.indexOf(tr)>=0)continue;const lr=null!==(Gn=null===(tn=Rt[tr])||void 0===tn?void 0:tn.currentValue)&&void 0!==Gn?Gn:Rt[tr];this.updateParameter(tr,lr)}Rt.allowSlideNext&&(this.swiperRef.allowSlideNext=this.allowSlideNext),Rt.allowSlidePrev&&(this.swiperRef.allowSlidePrev=this.allowSlidePrev),Rt.direction&&this.swiperRef.changeDirection(this.direction,!1),Rt.breakpoints&&(this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.swiperRef.currentBreakpoint=null,this.swiperRef.setBreakpoint()),(Rt.thumbs||Rt.controller)&&this.updateInitSwiper(Rt),this.swiperRef.update()}})}calcLoopedSlides(){if(!this.loop)return!1;let Rt=this.slidesPerView;if(this.breakpoints){const Gn=pe.ZP.prototype.getBreakpoint(this.breakpoints),tr=Gn in this.breakpoints?this.breakpoints[Gn]:void 0;tr&&tr.slidesPerView&&(Rt=tr.slidesPerView)}if("auto"===Rt)return this.loopedSlides=this.slides.length,this.slides.length;let tn=this.loopedSlides||Rt;return!!tn&&(this.loopAdditionalSlides&&(tn+=this.loopAdditionalSlides),tn>this.slides.length&&(tn=this.slides.length),this.loopedSlides=tn,!0)}updateParameter(Rt,tn){if(!this.swiperRef||this.swiperRef.destroyed)return;const Gn=Rt.replace(/^_/,""),tr=at(this.swiperRef.params[Gn]);"enabled"!==Gn?tr&&at(tn)?nr(this.swiperRef.params[Gn],tn):this.swiperRef.params[Gn]=tn:!0===tn?this.swiperRef.enable():!1===tn&&this.swiperRef.disable()}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{var Rt;null===(Rt=this.swiperRef)||void 0===Rt||Rt.destroy(!0,!1)})}}return ut.\u0275fac=function(Rt){return new(Rt||ut)(g.Y36(g.R0b),g.Y36(g.SBq),g.Y36(g.sBO),g.Y36(g.Lbi))},ut.\u0275cmp=g.Xpm({type:ut,selectors:[["swiper"],["","swiper",""]],contentQueries:function(Rt,tn,Gn){if(1&Rt&&g.Suo(Gn,kt,4),2&Rt){let tr;g.iGM(tr=g.CRH())&&(tn.slidesEl=tr)}},viewQuery:function(Rt,tn){if(1&Rt&&(g.Gf(Xe,5),g.Gf(pt,5),g.Gf(Ze,5),g.Gf(ht,5)),2&Rt){let Gn;g.iGM(Gn=g.CRH())&&(tn.prevElRef=Gn.first),g.iGM(Gn=g.CRH())&&(tn.nextElRef=Gn.first),g.iGM(Gn=g.CRH())&&(tn.scrollbarElRef=Gn.first),g.iGM(Gn=g.CRH())&&(tn.paginationElRef=Gn.first)}},hostVars:2,hostBindings:function(Rt,tn){2&Rt&&g.Tol(tn.containerClasses)},inputs:{enabled:"enabled",on:"on",direction:"direction",touchEventsTarget:"touchEventsTarget",initialSlide:"initialSlide",speed:"speed",cssMode:"cssMode",updateOnWindowResize:"updateOnWindowResize",resizeObserver:"resizeObserver",nested:"nested",focusableElements:"focusableElements",width:"width",height:"height",preventInteractionOnTransition:"preventInteractionOnTransition",userAgent:"userAgent",url:"url",edgeSwipeDetection:"edgeSwipeDetection",edgeSwipeThreshold:"edgeSwipeThreshold",freeMode:"freeMode",autoHeight:"autoHeight",setWrapperSize:"setWrapperSize",virtualTranslate:"virtualTranslate",effect:"effect",breakpoints:"breakpoints",spaceBetween:"spaceBetween",slidesPerView:"slidesPerView",maxBackfaceHiddenSlides:"maxBackfaceHiddenSlides",grid:"grid",slidesPerGroup:"slidesPerGroup",slidesPerGroupSkip:"slidesPerGroupSkip",centeredSlides:"centeredSlides",centeredSlidesBounds:"centeredSlidesBounds",slidesOffsetBefore:"slidesOffsetBefore",slidesOffsetAfter:"slidesOffsetAfter",normalizeSlideIndex:"normalizeSlideIndex",centerInsufficientSlides:"centerInsufficientSlides",watchOverflow:"watchOverflow",roundLengths:"roundLengths",touchRatio:"touchRatio",touchAngle:"touchAngle",simulateTouch:"simulateTouch",shortSwipes:"shortSwipes",longSwipes:"longSwipes",longSwipesRatio:"longSwipesRatio",longSwipesMs:"longSwipesMs",followFinger:"followFinger",allowTouchMove:"allowTouchMove",threshold:"threshold",touchMoveStopPropagation:"touchMoveStopPropagation",touchStartPreventDefault:"touchStartPreventDefault",touchStartForcePreventDefault:"touchStartForcePreventDefault",touchReleaseOnEdges:"touchReleaseOnEdges",uniqueNavElements:"uniqueNavElements",resistance:"resistance",resistanceRatio:"resistanceRatio",watchSlidesProgress:"watchSlidesProgress",grabCursor:"grabCursor",preventClicks:"preventClicks",preventClicksPropagation:"preventClicksPropagation",slideToClickedSlide:"slideToClickedSlide",preloadImages:"preloadImages",updateOnImagesReady:"updateOnImagesReady",loop:"loop",loopAdditionalSlides:"loopAdditionalSlides",loopedSlides:"loopedSlides",loopedSlidesLimit:"loopedSlidesLimit",loopFillGroupWithBlank:"loopFillGroupWithBlank",loopPreventsSlide:"loopPreventsSlide",rewind:"rewind",allowSlidePrev:"allowSlidePrev",allowSlideNext:"allowSlideNext",swipeHandler:"swipeHandler",noSwiping:"noSwiping",noSwipingClass:"noSwipingClass",noSwipingSelector:"noSwipingSelector",passiveListeners:"passiveListeners",containerModifierClass:"containerModifierClass",slideClass:"slideClass",slideBlankClass:"slideBlankClass",slideActiveClass:"slideActiveClass",slideDuplicateActiveClass:"slideDuplicateActiveClass",slideVisibleClass:"slideVisibleClass",slideDuplicateClass:"slideDuplicateClass",slideNextClass:"slideNextClass",slideDuplicateNextClass:"slideDuplicateNextClass",slidePrevClass:"slidePrevClass",slideDuplicatePrevClass:"slideDuplicatePrevClass",wrapperClass:"wrapperClass",runCallbacksOnInit:"runCallbacksOnInit",observeParents:"observeParents",observeSlideChildren:"observeSlideChildren",a11y:"a11y",autoplay:"autoplay",controller:"controller",coverflowEffect:"coverflowEffect",cubeEffect:"cubeEffect",fadeEffect:"fadeEffect",flipEffect:"flipEffect",creativeEffect:"creativeEffect",cardsEffect:"cardsEffect",hashNavigation:"hashNavigation",history:"history",keyboard:"keyboard",lazy:"lazy",mousewheel:"mousewheel",parallax:"parallax",thumbs:"thumbs",zoom:"zoom",class:"class",id:"id",navigation:"navigation",pagination:"pagination",scrollbar:"scrollbar",virtual:"virtual",config:"config"},outputs:{s__beforeBreakpoint:"_beforeBreakpoint",s__containerClasses:"_containerClasses",s__slideClass:"_slideClass",s__swiper:"_swiper",s_activeIndexChange:"activeIndexChange",s_afterInit:"afterInit",s_autoplay:"autoplay",s_autoplayStart:"autoplayStart",s_autoplayStop:"autoplayStop",s_autoplayPause:"autoplayPause",s_autoplayResume:"autoplayResume",s_beforeDestroy:"beforeDestroy",s_beforeInit:"beforeInit",s_beforeLoopFix:"beforeLoopFix",s_beforeResize:"beforeResize",s_beforeSlideChangeStart:"beforeSlideChangeStart",s_beforeTransitionStart:"beforeTransitionStart",s_breakpoint:"breakpoint",s_changeDirection:"changeDirection",s_click:"click",s_doubleTap:"doubleTap",s_doubleClick:"doubleClick",s_destroy:"destroy",s_fromEdge:"fromEdge",s_hashChange:"hashChange",s_hashSet:"hashSet",s_imagesReady:"imagesReady",s_init:"init",s_keyPress:"keyPress",s_lazyImageLoad:"lazyImageLoad",s_lazyImageReady:"lazyImageReady",s_loopFix:"loopFix",s_momentumBounce:"momentumBounce",s_navigationHide:"navigationHide",s_navigationShow:"navigationShow",s_navigationPrev:"navigationPrev",s_navigationNext:"navigationNext",s_observerUpdate:"observerUpdate",s_orientationchange:"orientationchange",s_paginationHide:"paginationHide",s_paginationRender:"paginationRender",s_paginationShow:"paginationShow",s_paginationUpdate:"paginationUpdate",s_progress:"progress",s_reachBeginning:"reachBeginning",s_reachEnd:"reachEnd",s_realIndexChange:"realIndexChange",s_resize:"resize",s_scroll:"scroll",s_scrollbarDragEnd:"scrollbarDragEnd",s_scrollbarDragMove:"scrollbarDragMove",s_scrollbarDragStart:"scrollbarDragStart",s_setTransition:"setTransition",s_setTranslate:"setTranslate",s_slideChange:"slideChange",s_slideChangeTransitionEnd:"slideChangeTransitionEnd",s_slideChangeTransitionStart:"slideChangeTransitionStart",s_slideNextTransitionEnd:"slideNextTransitionEnd",s_slideNextTransitionStart:"slideNextTransitionStart",s_slidePrevTransitionEnd:"slidePrevTransitionEnd",s_slidePrevTransitionStart:"slidePrevTransitionStart",s_slideResetTransitionStart:"slideResetTransitionStart",s_slideResetTransitionEnd:"slideResetTransitionEnd",s_sliderMove:"sliderMove",s_sliderFirstMove:"sliderFirstMove",s_slidesLengthChange:"slidesLengthChange",s_slidesGridLengthChange:"slidesGridLengthChange",s_snapGridLengthChange:"snapGridLengthChange",s_snapIndexChange:"snapIndexChange",s_tap:"tap",s_toEdge:"toEdge",s_touchEnd:"touchEnd",s_touchMove:"touchMove",s_touchMoveOpposite:"touchMoveOpposite",s_touchStart:"touchStart",s_transitionEnd:"transitionEnd",s_transitionStart:"transitionStart",s_update:"update",s_zoomChange:"zoomChange",s_swiper:"swiper",s_lock:"lock",s_unlock:"unlock"},features:[g.TTD],ngContentSelectors:et,decls:13,vars:17,consts:[[4,"ngIf"],["class","swiper-scrollbar",4,"ngIf"],["class","swiper-pagination",4,"ngIf"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["slidesTemplate",""],[1,"swiper-button-prev"],["prevElRef",""],[1,"swiper-button-next"],["nextElRef",""],[1,"swiper-scrollbar"],["scrollbarElRef",""],[1,"swiper-pagination"],["paginationElRef",""],[3,"ngClass","style","ngSwitch",4,"ngFor","ngForOf"],[3,"ngClass","ngSwitch"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(Rt,tn){if(1&Rt&&(g.F$t(ke),g.Hsn(0),g.YNc(1,Oe,5,0,"ng-container",0),g.YNc(2,Pe,2,0,"div",1),g.YNc(3,Et,2,0,"div",2),g.TgZ(4,"div",3),g.Hsn(5,1),g.YNc(6,vt,1,0,null,4),g.YNc(7,In,1,0,null,4),g.YNc(8,Zt,1,0,null,4),g.Hsn(9,2),g.qZA(),g.Hsn(10,3),g.YNc(11,Ht,2,3,"ng-template",null,5,g.W1O)),2&Rt){const Gn=g.MAs(12);g.xp6(1),g.Q6J("ngIf",tn.navigation&&tn.showNavigation),g.xp6(1),g.Q6J("ngIf",tn.scrollbar&&tn.showScrollbar),g.xp6(1),g.Q6J("ngIf",tn.pagination&&tn.showPagination),g.xp6(1),g.Q6J("ngClass",tn.wrapperClass),g.uIk("id",tn.id),g.xp6(2),g.Q6J("ngTemplateOutlet",Gn)("ngTemplateOutletContext",g.VKq(11,Ut,tn.prependSlides)),g.xp6(1),g.Q6J("ngTemplateOutlet",Gn)("ngTemplateOutletContext",g.VKq(13,Me,tn.activeSlides)),g.xp6(1),g.Q6J("ngTemplateOutlet",Gn)("ngTemplateOutletContext",g.VKq(15,Tt,tn.appendSlides))}},directives:[F.O5,F.mk,F.tP,F.sg,F.RF,F.n9,F.ED],pipes:[F.Ov],styles:["swiper{display:block}\n"],encapsulation:2,changeDetection:0}),ut})(),Dt=(()=>{class ut{}return ut.\u0275fac=function(Rt){return new(Rt||ut)},ut.\u0275mod=g.oAB({type:ut}),ut.\u0275inj=g.cJS({imports:[[F.ez]]}),ut})()},8879:(Wn,At,j)=>{function g(l){return null!==l&&"object"==typeof l&&"constructor"in l&&l.constructor===Object}function F(l={},A={}){Object.keys(A).forEach(I=>{void 0===l[I]?l[I]=A[I]:g(A[I])&&g(l[I])&&Object.keys(A[I]).length>0&&F(l[I],A[I])})}j.d(At,{W_:()=>Q,tl:()=>V,ZP:()=>Kr});const pe={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ae(){const l="undefined"!=typeof document?document:{};return F(l,pe),l}const We={document:pe,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:l=>"undefined"==typeof setTimeout?(l(),null):setTimeout(l,0),cancelAnimationFrame(l){"undefined"!=typeof setTimeout&&clearTimeout(l)}};function Xe(){const l="undefined"!=typeof window?window:{};return F(l,We),l}class Ze extends Array{constructor(A){"number"==typeof A?super(A):(super(...A||[]),function pt(l){const A=l.__proto__;Object.defineProperty(l,"__proto__",{get:()=>A,set(I){A.__proto__=I}})}(this))}}function ht(l=[]){const A=[];return l.forEach(I=>{Array.isArray(I)?A.push(...ht(I)):A.push(I)}),A}function Oe(l,A){return Array.prototype.filter.call(l,A)}function vt(l,A){const I=Xe(),P=ae();let z=[];if(!A&&l instanceof Ze)return l;if(!l)return new Ze(z);if("string"==typeof l){const J=l.trim();if(J.indexOf("<")>=0&&J.indexOf(">")>=0){let me="div";0===J.indexOf("<li")&&(me="ul"),0===J.indexOf("<tr")&&(me="tbody"),(0===J.indexOf("<td")||0===J.indexOf("<th"))&&(me="tr"),0===J.indexOf("<tbody")&&(me="table"),0===J.indexOf("<option")&&(me="select");const be=P.createElement(me);be.innerHTML=J;for(let oe=0;oe<be.childNodes.length;oe+=1)z.push(be.childNodes[oe])}else z=function Cn(l,A){if("string"!=typeof l)return[l];const I=[],P=A.querySelectorAll(l);for(let z=0;z<P.length;z+=1)I.push(P[z]);return I}(l.trim(),A||P)}else if(l.nodeType||l===I||l===P)z.push(l);else if(Array.isArray(l)){if(l instanceof Ze)return l;z=l}return new Ze(function Pe(l){const A=[];for(let I=0;I<l.length;I+=1)-1===A.indexOf(l[I])&&A.push(l[I]);return A}(z))}vt.fn=Ze.prototype;const kn="resize scroll".split(" ");function Ft(l){return function A(...I){if(void 0===I[0]){for(let P=0;P<this.length;P+=1)kn.indexOf(l)<0&&(l in this[P]?this[P][l]():vt(this[P]).trigger(l));return this}return this.on(l,...I)}}Ft("click"),Ft("blur"),Ft("focus"),Ft("focusin"),Ft("focusout"),Ft("keyup"),Ft("keydown"),Ft("keypress"),Ft("submit"),Ft("change"),Ft("mousedown"),Ft("mousemove"),Ft("mouseup"),Ft("mouseenter"),Ft("mouseleave"),Ft("mouseout"),Ft("mouseover"),Ft("touchstart"),Ft("touchend"),Ft("touchmove"),Ft("resize"),Ft("scroll");const Oi={addClass:function un(...l){const A=ht(l.map(I=>I.split(" ")));return this.forEach(I=>{I.classList.add(...A)}),this},removeClass:function In(...l){const A=ht(l.map(I=>I.split(" ")));return this.forEach(I=>{I.classList.remove(...A)}),this},hasClass:function Zt(...l){const A=ht(l.map(I=>I.split(" ")));return Oe(this,I=>A.filter(P=>I.classList.contains(P)).length>0).length>0},toggleClass:function Ot(...l){const A=ht(l.map(I=>I.split(" ")));this.forEach(I=>{A.forEach(P=>{I.classList.toggle(P)})})},attr:function Ln(l,A){if(1===arguments.length&&"string"==typeof l)return this[0]?this[0].getAttribute(l):void 0;for(let I=0;I<this.length;I+=1)if(2===arguments.length)this[I].setAttribute(l,A);else for(const P in l)this[I][P]=l[P],this[I].setAttribute(P,l[P]);return this},removeAttr:function fn(l){for(let A=0;A<this.length;A+=1)this[A].removeAttribute(l);return this},transform:function Ut(l){for(let A=0;A<this.length;A+=1)this[A].style.transform=l;return this},transition:function Me(l){for(let A=0;A<this.length;A+=1)this[A].style.transitionDuration="string"!=typeof l?`${l}ms`:l;return this},on:function Tt(...l){let[A,I,P,z]=l;function J(ge){const ce=ge.target;if(!ce)return;const le=ge.target.dom7EventData||[];if(le.indexOf(ge)<0&&le.unshift(ge),vt(ce).is(I))P.apply(ce,le);else{const Te=vt(ce).parents();for(let ze=0;ze<Te.length;ze+=1)vt(Te[ze]).is(I)&&P.apply(Te[ze],le)}}function me(ge){const ce=ge&&ge.target&&ge.target.dom7EventData||[];ce.indexOf(ge)<0&&ce.unshift(ge),P.apply(this,ce)}"function"==typeof l[1]&&([A,P,z]=l,I=void 0),z||(z=!1);const be=A.split(" ");let oe;for(let ge=0;ge<this.length;ge+=1){const ce=this[ge];if(I)for(oe=0;oe<be.length;oe+=1){const le=be[oe];ce.dom7LiveListeners||(ce.dom7LiveListeners={}),ce.dom7LiveListeners[le]||(ce.dom7LiveListeners[le]=[]),ce.dom7LiveListeners[le].push({listener:P,proxyListener:J}),ce.addEventListener(le,J,z)}else for(oe=0;oe<be.length;oe+=1){const le=be[oe];ce.dom7Listeners||(ce.dom7Listeners={}),ce.dom7Listeners[le]||(ce.dom7Listeners[le]=[]),ce.dom7Listeners[le].push({listener:P,proxyListener:me}),ce.addEventListener(le,me,z)}}return this},off:function et(...l){let[A,I,P,z]=l;"function"==typeof l[1]&&([A,P,z]=l,I=void 0),z||(z=!1);const J=A.split(" ");for(let me=0;me<J.length;me+=1){const be=J[me];for(let oe=0;oe<this.length;oe+=1){const ge=this[oe];let ce;if(!I&&ge.dom7Listeners?ce=ge.dom7Listeners[be]:I&&ge.dom7LiveListeners&&(ce=ge.dom7LiveListeners[be]),ce&&ce.length)for(let le=ce.length-1;le>=0;le-=1){const Te=ce[le];P&&Te.listener===P||P&&Te.listener&&Te.listener.dom7proxy&&Te.listener.dom7proxy===P?(ge.removeEventListener(be,Te.proxyListener,z),ce.splice(le,1)):P||(ge.removeEventListener(be,Te.proxyListener,z),ce.splice(le,1))}}}return this},trigger:function at(...l){const A=Xe(),I=l[0].split(" "),P=l[1];for(let z=0;z<I.length;z+=1){const J=I[z];for(let me=0;me<this.length;me+=1){const be=this[me];if(A.CustomEvent){const oe=new A.CustomEvent(J,{detail:P,bubbles:!0,cancelable:!0});be.dom7EventData=l.filter((ge,ce)=>ce>0),be.dispatchEvent(oe),be.dom7EventData=[],delete be.dom7EventData}}}return this},transitionEnd:function on(l){const A=this;return l&&A.on("transitionend",function I(P){P.target===this&&(l.call(this,P),A.off("transitionend",I))}),this},outerWidth:function rr(l){if(this.length>0){if(l){const A=this.styles();return this[0].offsetWidth+parseFloat(A.getPropertyValue("margin-right"))+parseFloat(A.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function Tr(l){if(this.length>0){if(l){const A=this.styles();return this[0].offsetHeight+parseFloat(A.getPropertyValue("margin-top"))+parseFloat(A.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function st(){const l=Xe();return this[0]?l.getComputedStyle(this[0],null):{}},offset:function mr(){if(this.length>0){const l=Xe(),A=ae(),I=this[0],P=I.getBoundingClientRect(),z=A.body;return{top:P.top+(I===l?l.scrollY:I.scrollTop)-(I.clientTop||z.clientTop||0),left:P.left+(I===l?l.scrollX:I.scrollLeft)-(I.clientLeft||z.clientLeft||0)}}return null},css:function Dt(l,A){const I=Xe();let P;if(1===arguments.length){if("string"!=typeof l){for(P=0;P<this.length;P+=1)for(const z in l)this[P].style[z]=l[z];return this}if(this[0])return I.getComputedStyle(this[0],null).getPropertyValue(l)}if(2===arguments.length&&"string"==typeof l){for(P=0;P<this.length;P+=1)this[P].style[l]=A;return this}return this},each:function ut(l){return l?(this.forEach((A,I)=>{l.apply(A,[A,I])}),this):this},html:function Rt(l){if(void 0===l)return this[0]?this[0].innerHTML:null;for(let A=0;A<this.length;A+=1)this[A].innerHTML=l;return this},text:function tn(l){if(void 0===l)return this[0]?this[0].textContent.trim():null;for(let A=0;A<this.length;A+=1)this[A].textContent=l;return this},is:function Gn(l){const A=Xe(),I=ae(),P=this[0];let z,J;if(!P||void 0===l)return!1;if("string"==typeof l){if(P.matches)return P.matches(l);if(P.webkitMatchesSelector)return P.webkitMatchesSelector(l);if(P.msMatchesSelector)return P.msMatchesSelector(l);for(z=vt(l),J=0;J<z.length;J+=1)if(z[J]===P)return!0;return!1}if(l===I)return P===I;if(l===A)return P===A;if(l.nodeType||l instanceof Ze){for(z=l.nodeType?[l]:l,J=0;J<z.length;J+=1)if(z[J]===P)return!0;return!1}return!1},index:function tr(){let A,l=this[0];if(l){for(A=0;null!==(l=l.previousSibling);)1===l.nodeType&&(A+=1);return A}},eq:function lr(l){if(void 0===l)return this;const A=this.length;if(l>A-1)return vt([]);if(l<0){const I=A+l;return vt(I<0?[]:[this[I]])}return vt([this[l]])},append:function Xr(...l){let A;const I=ae();for(let P=0;P<l.length;P+=1){A=l[P];for(let z=0;z<this.length;z+=1)if("string"==typeof A){const J=I.createElement("div");for(J.innerHTML=A;J.firstChild;)this[z].appendChild(J.firstChild)}else if(A instanceof Ze)for(let J=0;J<A.length;J+=1)this[z].appendChild(A[J]);else this[z].appendChild(A)}return this},prepend:function Qn(l){const A=ae();let I,P;for(I=0;I<this.length;I+=1)if("string"==typeof l){const z=A.createElement("div");for(z.innerHTML=l,P=z.childNodes.length-1;P>=0;P-=1)this[I].insertBefore(z.childNodes[P],this[I].childNodes[0])}else if(l instanceof Ze)for(P=0;P<l.length;P+=1)this[I].insertBefore(l[P],this[I].childNodes[0]);else this[I].insertBefore(l,this[I].childNodes[0]);return this},next:function rs(l){return this.length>0?l?this[0].nextElementSibling&&vt(this[0].nextElementSibling).is(l)?vt([this[0].nextElementSibling]):vt([]):vt(this[0].nextElementSibling?[this[0].nextElementSibling]:[]):vt([])},nextAll:function Ji(l){const A=[];let I=this[0];if(!I)return vt([]);for(;I.nextElementSibling;){const P=I.nextElementSibling;l?vt(P).is(l)&&A.push(P):A.push(P),I=P}return vt(A)},prev:function dn(l){if(this.length>0){const A=this[0];return l?A.previousElementSibling&&vt(A.previousElementSibling).is(l)?vt([A.previousElementSibling]):vt([]):vt(A.previousElementSibling?[A.previousElementSibling]:[])}return vt([])},prevAll:function rt(l){const A=[];let I=this[0];if(!I)return vt([]);for(;I.previousElementSibling;){const P=I.previousElementSibling;l?vt(P).is(l)&&A.push(P):A.push(P),I=P}return vt(A)},parent:function Gt(l){const A=[];for(let I=0;I<this.length;I+=1)null!==this[I].parentNode&&(l?vt(this[I].parentNode).is(l)&&A.push(this[I].parentNode):A.push(this[I].parentNode));return vt(A)},parents:function rn(l){const A=[];for(let I=0;I<this.length;I+=1){let P=this[I].parentNode;for(;P;)l?vt(P).is(l)&&A.push(P):A.push(P),P=P.parentNode}return vt(A)},closest:function bn(l){let A=this;return void 0===l?vt([]):(A.is(l)||(A=A.parents(l).eq(0)),A)},find:function zn(l){const A=[];for(let I=0;I<this.length;I+=1){const P=this[I].querySelectorAll(l);for(let z=0;z<P.length;z+=1)A.push(P[z])}return vt(A)},children:function Jr(l){const A=[];for(let I=0;I<this.length;I+=1){const P=this[I].children;for(let z=0;z<P.length;z+=1)(!l||vt(P[z]).is(l))&&A.push(P[z])}return vt(A)},filter:function Yt(l){return vt(Oe(this,l))},remove:function Gr(){for(let l=0;l<this.length;l+=1)this[l].parentNode&&this[l].parentNode.removeChild(this[l]);return this}};Object.keys(Oi).forEach(l=>{Object.defineProperty(vt.fn,l,{value:Oi[l],writable:!0})});const En=vt;function mi(l,A=0){return setTimeout(l,A)}function Mi(){return Date.now()}function us(l){return"object"==typeof l&&null!==l&&l.constructor&&"Object"===Object.prototype.toString.call(l).slice(8,-1)}function Ti(l){return"undefined"!=typeof window&&void 0!==window.HTMLElement?l instanceof HTMLElement:l&&(1===l.nodeType||11===l.nodeType)}function Ki(...l){const A=Object(l[0]),I=["__proto__","constructor","prototype"];for(let P=1;P<l.length;P+=1){const z=l[P];if(null!=z&&!Ti(z)){const J=Object.keys(Object(z)).filter(me=>I.indexOf(me)<0);for(let me=0,be=J.length;me<be;me+=1){const oe=J[me],ge=Object.getOwnPropertyDescriptor(z,oe);void 0!==ge&&ge.enumerable&&(us(A[oe])&&us(z[oe])?z[oe].__swiper__?A[oe]=z[oe]:Ki(A[oe],z[oe]):!us(A[oe])&&us(z[oe])?(A[oe]={},z[oe].__swiper__?A[oe]=z[oe]:Ki(A[oe],z[oe])):A[oe]=z[oe])}}}return A}function Gi(l,A,I){l.style.setProperty(A,I)}function Ar({swiper:l,targetPosition:A,side:I}){const P=Xe(),z=-l.translate;let me,J=null;const be=l.params.speed;l.wrapperEl.style.scrollSnapType="none",P.cancelAnimationFrame(l.cssModeFrameID);const oe=A>z?"next":"prev",ge=(le,Te)=>"next"===oe&&le>=Te||"prev"===oe&&le<=Te,ce=()=>{me=(new Date).getTime(),null===J&&(J=me);const le=Math.max(Math.min((me-J)/be,1),0),Te=.5-Math.cos(le*Math.PI)/2;let ze=z+Te*(A-z);if(ge(ze,A)&&(ze=A),l.wrapperEl.scrollTo({[I]:ze}),ge(ze,A))return l.wrapperEl.style.overflow="hidden",l.wrapperEl.style.scrollSnapType="",setTimeout(()=>{l.wrapperEl.style.overflow="",l.wrapperEl.scrollTo({[I]:ze})}),void P.cancelAnimationFrame(l.cssModeFrameID);l.cssModeFrameID=P.requestAnimationFrame(ce)};ce()}let os,Yr,Xi;function $s(){return os||(os=function ds(){const l=Xe(),A=ae();return{smoothScroll:A.documentElement&&"scrollBehavior"in A.documentElement.style,touch:!!("ontouchstart"in l||l.DocumentTouch&&A instanceof l.DocumentTouch),passiveListener:function(){let P=!1;try{const z=Object.defineProperty({},"passive",{get(){P=!0}});l.addEventListener("testPassiveListener",null,z)}catch(z){}return P}(),gestures:"ongesturestart"in l}}()),os}function Yi({swiper:l,runCallbacks:A,direction:I,step:P}){const{activeIndex:z,previousIndex:J}=l;let me=I;if(me||(me=z>J?"next":z<J?"prev":"reset"),l.emit(`transition${P}`),A&&z!==J){if("reset"===me)return void l.emit(`slideResetTransition${P}`);l.emit(`slideChangeTransition${P}`),l.emit("next"===me?`slideNextTransition${P}`:`slidePrevTransition${P}`)}}function Fs(l){const A=this,I=ae(),P=Xe(),z=A.touchEventsData,{params:J,touches:me,enabled:be}=A;if(!be||A.animating&&J.preventInteractionOnTransition)return;!A.animating&&J.cssMode&&J.loop&&A.loopFix();let oe=l;oe.originalEvent&&(oe=oe.originalEvent);let ge=En(oe.target);if("wrapper"===J.touchEventsTarget&&!ge.closest(A.wrapperEl).length||(z.isTouchEvent="touchstart"===oe.type,!z.isTouchEvent&&"which"in oe&&3===oe.which)||!z.isTouchEvent&&"button"in oe&&oe.button>0||z.isTouched&&z.isMoved)return;const ce=!!J.noSwipingClass&&""!==J.noSwipingClass,le=l.composedPath?l.composedPath():l.path;ce&&oe.target&&oe.target.shadowRoot&&le&&(ge=En(le[0]));const Te=J.noSwipingSelector?J.noSwipingSelector:`.${J.noSwipingClass}`;if(J.noSwiping&&(oe.target&&oe.target.shadowRoot?function Is(l,A=this){return function I(P){if(!P||P===ae()||P===Xe())return null;P.assignedSlot&&(P=P.assignedSlot);const z=P.closest(l);return z||P.getRootNode?z||I(P.getRootNode().host):null}(A)}(Te,ge[0]):ge.closest(Te)[0]))return void(A.allowClick=!0);if(J.swipeHandler&&!ge.closest(J.swipeHandler)[0])return;me.currentX="touchstart"===oe.type?oe.targetTouches[0].pageX:oe.pageX,me.currentY="touchstart"===oe.type?oe.targetTouches[0].pageY:oe.pageY;const nt=me.currentX,De=me.currentY,Fe=J.edgeSwipeDetection||J.iOSEdgeSwipeDetection,_t=J.edgeSwipeThreshold||J.iOSEdgeSwipeThreshold;if(Fe&&(nt<=_t||nt>=P.innerWidth-_t)){if("prevent"!==Fe)return;l.preventDefault()}if(Object.assign(z,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),me.startX=nt,me.startY=De,z.touchStartTime=Mi(),A.allowClick=!0,A.updateSize(),A.swipeDirection=void 0,J.threshold>0&&(z.allowThresholdMove=!1),"touchstart"!==oe.type){let tt=!0;ge.is(z.focusableElements)&&(tt=!1,"SELECT"===ge[0].nodeName&&(z.isTouched=!1)),I.activeElement&&En(I.activeElement).is(z.focusableElements)&&I.activeElement!==ge[0]&&I.activeElement.blur();const yt=tt&&A.allowTouchMove&&J.touchStartPreventDefault;(J.touchStartForcePreventDefault||yt)&&!ge[0].isContentEditable&&oe.preventDefault()}A.params.freeMode&&A.params.freeMode.enabled&&A.freeMode&&A.animating&&!J.cssMode&&A.freeMode.onTouchStart(),A.emit("touchStart",oe)}function Oo(l){const A=ae(),I=this,P=I.touchEventsData,{params:z,touches:J,rtlTranslate:me,enabled:be}=I;if(!be)return;let oe=l;if(oe.originalEvent&&(oe=oe.originalEvent),!P.isTouched)return void(P.startMoving&&P.isScrolling&&I.emit("touchMoveOpposite",oe));if(P.isTouchEvent&&"touchmove"!==oe.type)return;const ge="touchmove"===oe.type&&oe.targetTouches&&(oe.targetTouches[0]||oe.changedTouches[0]),ce="touchmove"===oe.type?ge.pageX:oe.pageX,le="touchmove"===oe.type?ge.pageY:oe.pageY;if(oe.preventedByNestedSwiper)return J.startX=ce,void(J.startY=le);if(!I.allowTouchMove)return En(oe.target).is(P.focusableElements)||(I.allowClick=!1),void(P.isTouched&&(Object.assign(J,{startX:ce,startY:le,currentX:ce,currentY:le}),P.touchStartTime=Mi()));if(P.isTouchEvent&&z.touchReleaseOnEdges&&!z.loop)if(I.isVertical()){if(le<J.startY&&I.translate<=I.maxTranslate()||le>J.startY&&I.translate>=I.minTranslate())return P.isTouched=!1,void(P.isMoved=!1)}else if(ce<J.startX&&I.translate<=I.maxTranslate()||ce>J.startX&&I.translate>=I.minTranslate())return;if(P.isTouchEvent&&A.activeElement&&oe.target===A.activeElement&&En(oe.target).is(P.focusableElements))return P.isMoved=!0,void(I.allowClick=!1);if(P.allowTouchCallbacks&&I.emit("touchMove",oe),oe.targetTouches&&oe.targetTouches.length>1)return;J.currentX=ce,J.currentY=le;const Te=J.currentX-J.startX,ze=J.currentY-J.startY;if(I.params.threshold&&Math.sqrt(Te**2+ze**2)<I.params.threshold)return;if(void 0===P.isScrolling){let _t;I.isHorizontal()&&J.currentY===J.startY||I.isVertical()&&J.currentX===J.startX?P.isScrolling=!1:Te*Te+ze*ze>=25&&(_t=180*Math.atan2(Math.abs(ze),Math.abs(Te))/Math.PI,P.isScrolling=I.isHorizontal()?_t>z.touchAngle:90-_t>z.touchAngle)}if(P.isScrolling&&I.emit("touchMoveOpposite",oe),void 0===P.startMoving&&(J.currentX!==J.startX||J.currentY!==J.startY)&&(P.startMoving=!0),P.isScrolling)return void(P.isTouched=!1);if(!P.startMoving)return;I.allowClick=!1,!z.cssMode&&oe.cancelable&&oe.preventDefault(),z.touchMoveStopPropagation&&!z.nested&&oe.stopPropagation(),P.isMoved||(z.loop&&!z.cssMode&&I.loopFix(),P.startTranslate=I.getTranslate(),I.setTransition(0),I.animating&&I.$wrapperEl.trigger("webkitTransitionEnd transitionend"),P.allowMomentumBounce=!1,z.grabCursor&&(!0===I.allowSlideNext||!0===I.allowSlidePrev)&&I.setGrabCursor(!0),I.emit("sliderFirstMove",oe)),I.emit("sliderMove",oe),P.isMoved=!0;let nt=I.isHorizontal()?Te:ze;J.diff=nt,nt*=z.touchRatio,me&&(nt=-nt),I.swipeDirection=nt>0?"prev":"next",P.currentTranslate=nt+P.startTranslate;let De=!0,Fe=z.resistanceRatio;if(z.touchReleaseOnEdges&&(Fe=0),nt>0&&P.currentTranslate>I.minTranslate()?(De=!1,z.resistance&&(P.currentTranslate=I.minTranslate()-1+(-I.minTranslate()+P.startTranslate+nt)**Fe)):nt<0&&P.currentTranslate<I.maxTranslate()&&(De=!1,z.resistance&&(P.currentTranslate=I.maxTranslate()+1-(I.maxTranslate()-P.startTranslate-nt)**Fe)),De&&(oe.preventedByNestedSwiper=!0),!I.allowSlideNext&&"next"===I.swipeDirection&&P.currentTranslate<P.startTranslate&&(P.currentTranslate=P.startTranslate),!I.allowSlidePrev&&"prev"===I.swipeDirection&&P.currentTranslate>P.startTranslate&&(P.currentTranslate=P.startTranslate),!I.allowSlidePrev&&!I.allowSlideNext&&(P.currentTranslate=P.startTranslate),z.threshold>0){if(!(Math.abs(nt)>z.threshold||P.allowThresholdMove))return void(P.currentTranslate=P.startTranslate);if(!P.allowThresholdMove)return P.allowThresholdMove=!0,J.startX=J.currentX,J.startY=J.currentY,P.currentTranslate=P.startTranslate,void(J.diff=I.isHorizontal()?J.currentX-J.startX:J.currentY-J.startY)}!z.followFinger||z.cssMode||((z.freeMode&&z.freeMode.enabled&&I.freeMode||z.watchSlidesProgress)&&(I.updateActiveIndex(),I.updateSlidesClasses()),I.params.freeMode&&z.freeMode.enabled&&I.freeMode&&I.freeMode.onTouchMove(),I.updateProgress(P.currentTranslate),I.setTranslate(P.currentTranslate))}function fs(l){const A=this,I=A.touchEventsData,{params:P,touches:z,rtlTranslate:J,slidesGrid:me,enabled:be}=A;if(!be)return;let oe=l;if(oe.originalEvent&&(oe=oe.originalEvent),I.allowTouchCallbacks&&A.emit("touchEnd",oe),I.allowTouchCallbacks=!1,!I.isTouched)return I.isMoved&&P.grabCursor&&A.setGrabCursor(!1),I.isMoved=!1,void(I.startMoving=!1);P.grabCursor&&I.isMoved&&I.isTouched&&(!0===A.allowSlideNext||!0===A.allowSlidePrev)&&A.setGrabCursor(!1);const ge=Mi(),ce=ge-I.touchStartTime;if(A.allowClick){const tt=oe.path||oe.composedPath&&oe.composedPath();A.updateClickedSlide(tt&&tt[0]||oe.target),A.emit("tap click",oe),ce<300&&ge-I.lastClickTime<300&&A.emit("doubleTap doubleClick",oe)}if(I.lastClickTime=Mi(),mi(()=>{A.destroyed||(A.allowClick=!0)}),!I.isTouched||!I.isMoved||!A.swipeDirection||0===z.diff||I.currentTranslate===I.startTranslate)return I.isTouched=!1,I.isMoved=!1,void(I.startMoving=!1);let le;if(I.isTouched=!1,I.isMoved=!1,I.startMoving=!1,le=P.followFinger?J?A.translate:-A.translate:-I.currentTranslate,P.cssMode)return;if(A.params.freeMode&&P.freeMode.enabled)return void A.freeMode.onTouchEnd({currentPos:le});let Te=0,ze=A.slidesSizesGrid[0];for(let tt=0;tt<me.length;tt+=tt<P.slidesPerGroupSkip?1:P.slidesPerGroup){const yt=tt<P.slidesPerGroupSkip-1?1:P.slidesPerGroup;void 0!==me[tt+yt]?le>=me[tt]&&le<me[tt+yt]&&(Te=tt,ze=me[tt+yt]-me[tt]):le>=me[tt]&&(Te=tt,ze=me[me.length-1]-me[me.length-2])}let nt=null,De=null;P.rewind&&(A.isBeginning?De=A.params.virtual&&A.params.virtual.enabled&&A.virtual?A.virtual.slides.length-1:A.slides.length-1:A.isEnd&&(nt=0));const Fe=(le-me[Te])/ze,_t=Te<P.slidesPerGroupSkip-1?1:P.slidesPerGroup;if(ce>P.longSwipesMs){if(!P.longSwipes)return void A.slideTo(A.activeIndex);"next"===A.swipeDirection&&A.slideTo(Fe>=P.longSwipesRatio?P.rewind&&A.isEnd?nt:Te+_t:Te),"prev"===A.swipeDirection&&(Fe>1-P.longSwipesRatio?A.slideTo(Te+_t):null!==De&&Fe<0&&Math.abs(Fe)>P.longSwipesRatio?A.slideTo(De):A.slideTo(Te))}else{if(!P.shortSwipes)return void A.slideTo(A.activeIndex);!A.navigation||oe.target!==A.navigation.nextEl&&oe.target!==A.navigation.prevEl?("next"===A.swipeDirection&&A.slideTo(null!==nt?nt:Te+_t),"prev"===A.swipeDirection&&A.slideTo(null!==De?De:Te)):A.slideTo(oe.target===A.navigation.nextEl?Te+_t:Te)}}function Js(){const l=this,{params:A,el:I}=l;if(I&&0===I.offsetWidth)return;A.breakpoints&&l.setBreakpoint();const{allowSlideNext:P,allowSlidePrev:z,snapGrid:J}=l;l.allowSlideNext=!0,l.allowSlidePrev=!0,l.updateSize(),l.updateSlides(),l.updateSlidesClasses(),l.slideTo(("auto"===A.slidesPerView||A.slidesPerView>1)&&l.isEnd&&!l.isBeginning&&!l.params.centeredSlides?l.slides.length-1:l.activeIndex,0,!1,!0),l.autoplay&&l.autoplay.running&&l.autoplay.paused&&l.autoplay.run(),l.allowSlidePrev=z,l.allowSlideNext=P,l.params.watchOverflow&&J!==l.snapGrid&&l.checkOverflow()}function Gs(l){const A=this;!A.enabled||A.allowClick||(A.params.preventClicks&&l.preventDefault(),A.params.preventClicksPropagation&&A.animating&&(l.stopPropagation(),l.stopImmediatePropagation()))}function ki(){const l=this,{wrapperEl:A,rtlTranslate:I,enabled:P}=l;if(!P)return;let z;l.previousTranslate=l.translate,l.translate=l.isHorizontal()?-A.scrollLeft:-A.scrollTop,0===l.translate&&(l.translate=0),l.updateActiveIndex(),l.updateSlidesClasses();const J=l.maxTranslate()-l.minTranslate();z=0===J?0:(l.translate-l.minTranslate())/J,z!==l.progress&&l.updateProgress(I?-l.translate:l.translate),l.emit("setTranslate",l.translate,!1)}let so=!1;function yo(){}const Rs=(l,A)=>{const I=ae(),{params:P,touchEvents:z,el:J,wrapperEl:me,device:be,support:oe}=l,ge=!!P.nested,ce="on"===A?"addEventListener":"removeEventListener",le=A;if(oe.touch){const Te=!("touchstart"!==z.start||!oe.passiveListener||!P.passiveListeners)&&{passive:!0,capture:!1};J[ce](z.start,l.onTouchStart,Te),J[ce](z.move,l.onTouchMove,oe.passiveListener?{passive:!1,capture:ge}:ge),J[ce](z.end,l.onTouchEnd,Te),z.cancel&&J[ce](z.cancel,l.onTouchEnd,Te)}else J[ce](z.start,l.onTouchStart,!1),I[ce](z.move,l.onTouchMove,ge),I[ce](z.end,l.onTouchEnd,!1);(P.preventClicks||P.preventClicksPropagation)&&J[ce]("click",l.onClick,!0),P.cssMode&&me[ce]("scroll",l.onScroll),l[le](P.updateOnWindowResize?be.ios||be.android?"resize orientationchange observerUpdate":"resize observerUpdate":"observerUpdate",Js,!0)},bi=(l,A)=>l.grid&&A.grid&&A.grid.rows>1,es={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Di(l,A){return function(P={}){const z=Object.keys(P)[0],J=P[z];"object"==typeof J&&null!==J?(["navigation","pagination","scrollbar"].indexOf(z)>=0&&!0===l[z]&&(l[z]={auto:!0}),z in l&&"enabled"in J?(!0===l[z]&&(l[z]={enabled:!0}),"object"==typeof l[z]&&!("enabled"in l[z])&&(l[z].enabled=!0),l[z]||(l[z]={enabled:!1}),Ki(A,P)):Ki(A,P)):Ki(A,P)}}const Fi={eventsEmitter:{on(l,A,I){const P=this;if(!P.eventsListeners||P.destroyed||"function"!=typeof A)return P;const z=I?"unshift":"push";return l.split(" ").forEach(J=>{P.eventsListeners[J]||(P.eventsListeners[J]=[]),P.eventsListeners[J][z](A)}),P},once(l,A,I){const P=this;if(!P.eventsListeners||P.destroyed||"function"!=typeof A)return P;function z(...J){P.off(l,z),z.__emitterProxy&&delete z.__emitterProxy,A.apply(P,J)}return z.__emitterProxy=A,P.on(l,z,I)},onAny(l,A){const I=this;if(!I.eventsListeners||I.destroyed||"function"!=typeof l)return I;const P=A?"unshift":"push";return I.eventsAnyListeners.indexOf(l)<0&&I.eventsAnyListeners[P](l),I},offAny(l){const A=this;if(!A.eventsListeners||A.destroyed||!A.eventsAnyListeners)return A;const I=A.eventsAnyListeners.indexOf(l);return I>=0&&A.eventsAnyListeners.splice(I,1),A},off(l,A){const I=this;return!I.eventsListeners||I.destroyed||!I.eventsListeners||l.split(" ").forEach(P=>{void 0===A?I.eventsListeners[P]=[]:I.eventsListeners[P]&&I.eventsListeners[P].forEach((z,J)=>{(z===A||z.__emitterProxy&&z.__emitterProxy===A)&&I.eventsListeners[P].splice(J,1)})}),I},emit(...l){const A=this;if(!A.eventsListeners||A.destroyed||!A.eventsListeners)return A;let I,P,z;return"string"==typeof l[0]||Array.isArray(l[0])?(I=l[0],P=l.slice(1,l.length),z=A):(I=l[0].events,P=l[0].data,z=l[0].context||A),P.unshift(z),(Array.isArray(I)?I:I.split(" ")).forEach(me=>{A.eventsAnyListeners&&A.eventsAnyListeners.length&&A.eventsAnyListeners.forEach(be=>{be.apply(z,[me,...P])}),A.eventsListeners&&A.eventsListeners[me]&&A.eventsListeners[me].forEach(be=>{be.apply(z,P)})}),A}},update:{updateSize:function kr(){const l=this;let A,I;const P=l.$el;A=null!=l.params.width?l.params.width:P[0].clientWidth,I=null!=l.params.height?l.params.height:P[0].clientHeight,!(0===A&&l.isHorizontal()||0===I&&l.isVertical())&&(A=A-parseInt(P.css("padding-left")||0,10)-parseInt(P.css("padding-right")||0,10),I=I-parseInt(P.css("padding-top")||0,10)-parseInt(P.css("padding-bottom")||0,10),Number.isNaN(A)&&(A=0),Number.isNaN(I)&&(I=0),Object.assign(l,{width:A,height:I,size:l.isHorizontal()?A:I}))},updateSlides:function qr(){const l=this;function A(Fn){return l.isHorizontal()?Fn:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Fn]}function I(Fn,en){return parseFloat(Fn.getPropertyValue(A(en))||0)}const P=l.params,{$wrapperEl:z,size:J,rtlTranslate:me,wrongRTL:be}=l,oe=l.virtual&&P.virtual.enabled,ge=oe?l.virtual.slides.length:l.slides.length,ce=z.children(`.${l.params.slideClass}`),le=oe?l.virtual.slides.length:ce.length;let Te=[];const ze=[],nt=[];let De=P.slidesOffsetBefore;"function"==typeof De&&(De=P.slidesOffsetBefore.call(l));let Fe=P.slidesOffsetAfter;"function"==typeof Fe&&(Fe=P.slidesOffsetAfter.call(l));const _t=l.snapGrid.length,tt=l.slidesGrid.length;let yt=P.spaceBetween,vn=-De,Sn=0,gn=0;if(void 0===J)return;"string"==typeof yt&&yt.indexOf("%")>=0&&(yt=parseFloat(yt.replace("%",""))/100*J),l.virtualSize=-yt,ce.css(me?{marginLeft:"",marginBottom:"",marginTop:""}:{marginRight:"",marginBottom:"",marginTop:""}),P.centeredSlides&&P.cssMode&&(Gi(l.wrapperEl,"--swiper-centered-offset-before",""),Gi(l.wrapperEl,"--swiper-centered-offset-after",""));const Rn=P.grid&&P.grid.rows>1&&l.grid;let er;Rn&&l.grid.initSlides(le);const Er="auto"===P.slidesPerView&&P.breakpoints&&Object.keys(P.breakpoints).filter(Fn=>void 0!==P.breakpoints[Fn].slidesPerView).length>0;for(let Fn=0;Fn<le;Fn+=1){er=0;const en=ce.eq(Fn);if(Rn&&l.grid.updateSlide(Fn,en,le,A),"none"!==en.css("display")){if("auto"===P.slidesPerView){Er&&(ce[Fn].style[A("width")]="");const Nt=getComputedStyle(en[0]),hn=en[0].style.transform,or=en[0].style.webkitTransform;if(hn&&(en[0].style.transform="none"),or&&(en[0].style.webkitTransform="none"),P.roundLengths)er=l.isHorizontal()?en.outerWidth(!0):en.outerHeight(!0);else{const ir=I(Nt,"width"),zt=I(Nt,"padding-left"),ur=I(Nt,"padding-right"),Jn=I(Nt,"margin-left"),vi=I(Nt,"margin-right"),Ai=Nt.getPropertyValue("box-sizing");if(Ai&&"border-box"===Ai)er=ir+Jn+vi;else{const{clientWidth:Ws,offsetWidth:Z}=en[0];er=ir+zt+ur+Jn+vi+(Z-Ws)}}hn&&(en[0].style.transform=hn),or&&(en[0].style.webkitTransform=or),P.roundLengths&&(er=Math.floor(er))}else er=(J-(P.slidesPerView-1)*yt)/P.slidesPerView,P.roundLengths&&(er=Math.floor(er)),ce[Fn]&&(ce[Fn].style[A("width")]=`${er}px`);ce[Fn]&&(ce[Fn].swiperSlideSize=er),nt.push(er),P.centeredSlides?(vn=vn+er/2+Sn/2+yt,0===Sn&&0!==Fn&&(vn=vn-J/2-yt),0===Fn&&(vn=vn-J/2-yt),Math.abs(vn)<.001&&(vn=0),P.roundLengths&&(vn=Math.floor(vn)),gn%P.slidesPerGroup==0&&Te.push(vn),ze.push(vn)):(P.roundLengths&&(vn=Math.floor(vn)),(gn-Math.min(l.params.slidesPerGroupSkip,gn))%l.params.slidesPerGroup==0&&Te.push(vn),ze.push(vn),vn=vn+er+yt),l.virtualSize+=er+yt,Sn=er,gn+=1}}if(l.virtualSize=Math.max(l.virtualSize,J)+Fe,me&&be&&("slide"===P.effect||"coverflow"===P.effect)&&z.css({width:`${l.virtualSize+P.spaceBetween}px`}),P.setWrapperSize&&z.css({[A("width")]:`${l.virtualSize+P.spaceBetween}px`}),Rn&&l.grid.updateWrapperSize(er,Te,A),!P.centeredSlides){const Fn=[];for(let en=0;en<Te.length;en+=1){let Nt=Te[en];P.roundLengths&&(Nt=Math.floor(Nt)),Te[en]<=l.virtualSize-J&&Fn.push(Nt)}Te=Fn,Math.floor(l.virtualSize-J)-Math.floor(Te[Te.length-1])>1&&Te.push(l.virtualSize-J)}if(0===Te.length&&(Te=[0]),0!==P.spaceBetween){const Fn=l.isHorizontal()&&me?"marginLeft":A("marginRight");ce.filter((en,Nt)=>!P.cssMode||Nt!==ce.length-1).css({[Fn]:`${yt}px`})}if(P.centeredSlides&&P.centeredSlidesBounds){let Fn=0;nt.forEach(Nt=>{Fn+=Nt+(P.spaceBetween?P.spaceBetween:0)}),Fn-=P.spaceBetween;const en=Fn-J;Te=Te.map(Nt=>Nt<0?-De:Nt>en?en+Fe:Nt)}if(P.centerInsufficientSlides){let Fn=0;if(nt.forEach(en=>{Fn+=en+(P.spaceBetween?P.spaceBetween:0)}),Fn-=P.spaceBetween,Fn<J){const en=(J-Fn)/2;Te.forEach((Nt,hn)=>{Te[hn]=Nt-en}),ze.forEach((Nt,hn)=>{ze[hn]=Nt+en})}}if(Object.assign(l,{slides:ce,snapGrid:Te,slidesGrid:ze,slidesSizesGrid:nt}),P.centeredSlides&&P.cssMode&&!P.centeredSlidesBounds){Gi(l.wrapperEl,"--swiper-centered-offset-before",-Te[0]+"px"),Gi(l.wrapperEl,"--swiper-centered-offset-after",l.size/2-nt[nt.length-1]/2+"px");const Fn=-l.snapGrid[0],en=-l.slidesGrid[0];l.snapGrid=l.snapGrid.map(Nt=>Nt+Fn),l.slidesGrid=l.slidesGrid.map(Nt=>Nt+en)}if(le!==ge&&l.emit("slidesLengthChange"),Te.length!==_t&&(l.params.watchOverflow&&l.checkOverflow(),l.emit("snapGridLengthChange")),ze.length!==tt&&l.emit("slidesGridLengthChange"),P.watchSlidesProgress&&l.updateSlidesOffset(),!(oe||P.cssMode||"slide"!==P.effect&&"fade"!==P.effect)){const Fn=`${P.containerModifierClass}backface-hidden`,en=l.$el.hasClass(Fn);le<=P.maxBackfaceHiddenSlides?en||l.$el.addClass(Fn):en&&l.$el.removeClass(Fn)}},updateAutoHeight:function cs(l){const A=this,I=[],P=A.virtual&&A.params.virtual.enabled;let J,z=0;"number"==typeof l?A.setTransition(l):!0===l&&A.setTransition(A.params.speed);const me=be=>P?A.slides.filter(oe=>parseInt(oe.getAttribute("data-swiper-slide-index"),10)===be)[0]:A.slides.eq(be)[0];if("auto"!==A.params.slidesPerView&&A.params.slidesPerView>1)if(A.params.centeredSlides)(A.visibleSlides||En([])).each(be=>{I.push(be)});else for(J=0;J<Math.ceil(A.params.slidesPerView);J+=1){const be=A.activeIndex+J;if(be>A.slides.length&&!P)break;I.push(me(be))}else I.push(me(A.activeIndex));for(J=0;J<I.length;J+=1)if(void 0!==I[J]){const be=I[J].offsetHeight;z=be>z?be:z}(z||0===z)&&A.$wrapperEl.css("height",`${z}px`)},updateSlidesOffset:function gs(){const l=this,A=l.slides;for(let I=0;I<A.length;I+=1)A[I].swiperSlideOffset=l.isHorizontal()?A[I].offsetLeft:A[I].offsetTop},updateSlidesProgress:function ks(l=this&&this.translate||0){const A=this,I=A.params,{slides:P,rtlTranslate:z,snapGrid:J}=A;if(0===P.length)return;void 0===P[0].swiperSlideOffset&&A.updateSlidesOffset();let me=-l;z&&(me=l),P.removeClass(I.slideVisibleClass),A.visibleSlidesIndexes=[],A.visibleSlides=[];for(let be=0;be<P.length;be+=1){const oe=P[be];let ge=oe.swiperSlideOffset;I.cssMode&&I.centeredSlides&&(ge-=P[0].swiperSlideOffset);const ce=(me+(I.centeredSlides?A.minTranslate():0)-ge)/(oe.swiperSlideSize+I.spaceBetween),le=(me-J[0]+(I.centeredSlides?A.minTranslate():0)-ge)/(oe.swiperSlideSize+I.spaceBetween),Te=-(me-ge),ze=Te+A.slidesSizesGrid[be];(Te>=0&&Te<A.size-1||ze>1&&ze<=A.size||Te<=0&&ze>=A.size)&&(A.visibleSlides.push(oe),A.visibleSlidesIndexes.push(be),P.eq(be).addClass(I.slideVisibleClass)),oe.progress=z?-ce:ce,oe.originalProgress=z?-le:le}A.visibleSlides=En(A.visibleSlides)},updateProgress:function Hi(l){const A=this;if(void 0===l){const ge=A.rtlTranslate?-1:1;l=A&&A.translate&&A.translate*ge||0}const I=A.params,P=A.maxTranslate()-A.minTranslate();let{progress:z,isBeginning:J,isEnd:me}=A;const be=J,oe=me;0===P?(z=0,J=!0,me=!0):(z=(l-A.minTranslate())/P,J=z<=0,me=z>=1),Object.assign(A,{progress:z,isBeginning:J,isEnd:me}),(I.watchSlidesProgress||I.centeredSlides&&I.autoHeight)&&A.updateSlidesProgress(l),J&&!be&&A.emit("reachBeginning toEdge"),me&&!oe&&A.emit("reachEnd toEdge"),(be&&!J||oe&&!me)&&A.emit("fromEdge"),A.emit("progress",z)},updateSlidesClasses:function $o(){const l=this,{slides:A,params:I,$wrapperEl:P,activeIndex:z,realIndex:J}=l,me=l.virtual&&I.virtual.enabled;let be;A.removeClass(`${I.slideActiveClass} ${I.slideNextClass} ${I.slidePrevClass} ${I.slideDuplicateActiveClass} ${I.slideDuplicateNextClass} ${I.slideDuplicatePrevClass}`),be=me?l.$wrapperEl.find(`.${I.slideClass}[data-swiper-slide-index="${z}"]`):A.eq(z),be.addClass(I.slideActiveClass),I.loop&&(be.hasClass(I.slideDuplicateClass)?P.children(`.${I.slideClass}:not(.${I.slideDuplicateClass})[data-swiper-slide-index="${J}"]`).addClass(I.slideDuplicateActiveClass):P.children(`.${I.slideClass}.${I.slideDuplicateClass}[data-swiper-slide-index="${J}"]`).addClass(I.slideDuplicateActiveClass));let oe=be.nextAll(`.${I.slideClass}`).eq(0).addClass(I.slideNextClass);I.loop&&0===oe.length&&(oe=A.eq(0),oe.addClass(I.slideNextClass));let ge=be.prevAll(`.${I.slideClass}`).eq(0).addClass(I.slidePrevClass);I.loop&&0===ge.length&&(ge=A.eq(-1),ge.addClass(I.slidePrevClass)),I.loop&&(oe.hasClass(I.slideDuplicateClass)?P.children(`.${I.slideClass}:not(.${I.slideDuplicateClass})[data-swiper-slide-index="${oe.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicateNextClass):P.children(`.${I.slideClass}.${I.slideDuplicateClass}[data-swiper-slide-index="${oe.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicateNextClass),ge.hasClass(I.slideDuplicateClass)?P.children(`.${I.slideClass}:not(.${I.slideDuplicateClass})[data-swiper-slide-index="${ge.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicatePrevClass):P.children(`.${I.slideClass}.${I.slideDuplicateClass}[data-swiper-slide-index="${ge.attr("data-swiper-slide-index")}"]`).addClass(I.slideDuplicatePrevClass)),l.emitSlidesClasses()},updateActiveIndex:function mo(l){const A=this,I=A.rtlTranslate?A.translate:-A.translate,{slidesGrid:P,snapGrid:z,params:J,activeIndex:me,realIndex:be,snapIndex:oe}=A;let ce,ge=l;if(void 0===ge){for(let Te=0;Te<P.length;Te+=1)void 0!==P[Te+1]?I>=P[Te]&&I<P[Te+1]-(P[Te+1]-P[Te])/2?ge=Te:I>=P[Te]&&I<P[Te+1]&&(ge=Te+1):I>=P[Te]&&(ge=Te);J.normalizeSlideIndex&&(ge<0||void 0===ge)&&(ge=0)}if(z.indexOf(I)>=0)ce=z.indexOf(I);else{const Te=Math.min(J.slidesPerGroupSkip,ge);ce=Te+Math.floor((ge-Te)/J.slidesPerGroup)}if(ce>=z.length&&(ce=z.length-1),ge===me)return void(ce!==oe&&(A.snapIndex=ce,A.emit("snapIndexChange")));const le=parseInt(A.slides.eq(ge).attr("data-swiper-slide-index")||ge,10);Object.assign(A,{snapIndex:ce,realIndex:le,previousIndex:me,activeIndex:ge}),A.emit("activeIndexChange"),A.emit("snapIndexChange"),be!==le&&A.emit("realIndexChange"),(A.initialized||A.params.runCallbacksOnInit)&&A.emit("slideChange")},updateClickedSlide:function xs(l){const A=this,I=A.params,P=En(l).closest(`.${I.slideClass}`)[0];let J,z=!1;if(P)for(let me=0;me<A.slides.length;me+=1)if(A.slides[me]===P){z=!0,J=me;break}if(!P||!z)return A.clickedSlide=void 0,void(A.clickedIndex=void 0);A.clickedSlide=P,A.clickedIndex=A.virtual&&A.params.virtual.enabled?parseInt(En(P).attr("data-swiper-slide-index"),10):J,I.slideToClickedSlide&&void 0!==A.clickedIndex&&A.clickedIndex!==A.activeIndex&&A.slideToClickedSlide()}},translate:{getTranslate:function Ct(l=(this.isHorizontal()?"x":"y")){const{params:I,rtlTranslate:P,translate:z,$wrapperEl:J}=this;if(I.virtualTranslate)return P?-z:z;if(I.cssMode)return z;let me=function Ui(l,A="x"){const I=Xe();let P,z,J;const me=function bs(l){const A=Xe();let I;return A.getComputedStyle&&(I=A.getComputedStyle(l,null)),!I&&l.currentStyle&&(I=l.currentStyle),I||(I=l.style),I}(l);return I.WebKitCSSMatrix?(z=me.transform||me.webkitTransform,z.split(",").length>6&&(z=z.split(", ").map(be=>be.replace(",",".")).join(", ")),J=new I.WebKitCSSMatrix("none"===z?"":z)):(J=me.MozTransform||me.OTransform||me.MsTransform||me.msTransform||me.transform||me.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),P=J.toString().split(",")),"x"===A&&(z=I.WebKitCSSMatrix?J.m41:16===P.length?parseFloat(P[12]):parseFloat(P[4])),"y"===A&&(z=I.WebKitCSSMatrix?J.m42:16===P.length?parseFloat(P[13]):parseFloat(P[5])),z||0}(J[0],l);return P&&(me=-me),me||0},setTranslate:function dt(l,A){const I=this,{rtlTranslate:P,params:z,$wrapperEl:J,wrapperEl:me,progress:be}=I;let le,oe=0,ge=0;I.isHorizontal()?oe=P?-l:l:ge=l,z.roundLengths&&(oe=Math.floor(oe),ge=Math.floor(ge)),z.cssMode?me[I.isHorizontal()?"scrollLeft":"scrollTop"]=I.isHorizontal()?-oe:-ge:z.virtualTranslate||J.transform(`translate3d(${oe}px, ${ge}px, 0px)`),I.previousTranslate=I.translate,I.translate=I.isHorizontal()?oe:ge;const Te=I.maxTranslate()-I.minTranslate();le=0===Te?0:(l-I.minTranslate())/Te,le!==be&&I.updateProgress(l),I.emit("setTranslate",I.translate,A)},minTranslate:function xt(){return-this.snapGrid[0]},maxTranslate:function mn(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function $n(l=0,A=this.params.speed,I=!0,P=!0,z){const J=this,{params:me,wrapperEl:be}=J;if(J.animating&&me.preventInteractionOnTransition)return!1;const oe=J.minTranslate(),ge=J.maxTranslate();let ce;if(ce=P&&l>oe?oe:P&&l<ge?ge:l,J.updateProgress(ce),me.cssMode){const le=J.isHorizontal();if(0===A)be[le?"scrollLeft":"scrollTop"]=-ce;else{if(!J.support.smoothScroll)return Ar({swiper:J,targetPosition:-ce,side:le?"left":"top"}),!0;be.scrollTo({[le?"left":"top"]:-ce,behavior:"smooth"})}return!0}return 0===A?(J.setTransition(0),J.setTranslate(ce),I&&(J.emit("beforeTransitionStart",A,z),J.emit("transitionEnd"))):(J.setTransition(A),J.setTranslate(ce),I&&(J.emit("beforeTransitionStart",A,z),J.emit("transitionStart")),J.animating||(J.animating=!0,J.onTranslateToWrapperTransitionEnd||(J.onTranslateToWrapperTransitionEnd=function(Te){!J||J.destroyed||Te.target===this&&(J.$wrapperEl[0].removeEventListener("transitionend",J.onTranslateToWrapperTransitionEnd),J.$wrapperEl[0].removeEventListener("webkitTransitionEnd",J.onTranslateToWrapperTransitionEnd),J.onTranslateToWrapperTransitionEnd=null,delete J.onTranslateToWrapperTransitionEnd,I&&J.emit("transitionEnd"))}),J.$wrapperEl[0].addEventListener("transitionend",J.onTranslateToWrapperTransitionEnd),J.$wrapperEl[0].addEventListener("webkitTransitionEnd",J.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function ti(l,A){const I=this;I.params.cssMode||I.$wrapperEl.transition(l),I.emit("setTransition",l,A)},transitionStart:function Ii(l=!0,A){const I=this,{params:P}=I;P.cssMode||(P.autoHeight&&I.updateAutoHeight(),Yi({swiper:I,runCallbacks:l,direction:A,step:"Start"}))},transitionEnd:function vs(l=!0,A){const I=this,{params:P}=I;I.animating=!1,!P.cssMode&&(I.setTransition(0),Yi({swiper:I,runCallbacks:l,direction:A,step:"End"}))}},slide:{slideTo:function ms(l=0,A=this.params.speed,I=!0,P,z){if("number"!=typeof l&&"string"!=typeof l)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof l}] given.`);if("string"==typeof l){const yt=parseInt(l,10);if(!isFinite(yt))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${l}] given.`);l=yt}const J=this;let me=l;me<0&&(me=0);const{params:be,snapGrid:oe,slidesGrid:ge,previousIndex:ce,activeIndex:le,rtlTranslate:Te,wrapperEl:ze,enabled:nt}=J;if(J.animating&&be.preventInteractionOnTransition||!nt&&!P&&!z)return!1;const De=Math.min(J.params.slidesPerGroupSkip,me);let Fe=De+Math.floor((me-De)/J.params.slidesPerGroup);Fe>=oe.length&&(Fe=oe.length-1);const _t=-oe[Fe];if(be.normalizeSlideIndex)for(let yt=0;yt<ge.length;yt+=1){const vn=-Math.floor(100*_t),Sn=Math.floor(100*ge[yt]),gn=Math.floor(100*ge[yt+1]);void 0!==ge[yt+1]?vn>=Sn&&vn<gn-(gn-Sn)/2?me=yt:vn>=Sn&&vn<gn&&(me=yt+1):vn>=Sn&&(me=yt)}if(J.initialized&&me!==le&&(!J.allowSlideNext&&_t<J.translate&&_t<J.minTranslate()||!J.allowSlidePrev&&_t>J.translate&&_t>J.maxTranslate()&&(le||0)!==me))return!1;let tt;if(me!==(ce||0)&&I&&J.emit("beforeSlideChangeStart"),J.updateProgress(_t),tt=me>le?"next":me<le?"prev":"reset",Te&&-_t===J.translate||!Te&&_t===J.translate)return J.updateActiveIndex(me),be.autoHeight&&J.updateAutoHeight(),J.updateSlidesClasses(),"slide"!==be.effect&&J.setTranslate(_t),"reset"!==tt&&(J.transitionStart(I,tt),J.transitionEnd(I,tt)),!1;if(be.cssMode){const yt=J.isHorizontal(),vn=Te?_t:-_t;if(0===A){const Sn=J.virtual&&J.params.virtual.enabled;Sn&&(J.wrapperEl.style.scrollSnapType="none",J._immediateVirtual=!0),ze[yt?"scrollLeft":"scrollTop"]=vn,Sn&&requestAnimationFrame(()=>{J.wrapperEl.style.scrollSnapType="",J._swiperImmediateVirtual=!1})}else{if(!J.support.smoothScroll)return Ar({swiper:J,targetPosition:vn,side:yt?"left":"top"}),!0;ze.scrollTo({[yt?"left":"top"]:vn,behavior:"smooth"})}return!0}return J.setTransition(A),J.setTranslate(_t),J.updateActiveIndex(me),J.updateSlidesClasses(),J.emit("beforeTransitionStart",A,P),J.transitionStart(I,tt),0===A?J.transitionEnd(I,tt):J.animating||(J.animating=!0,J.onSlideToWrapperTransitionEnd||(J.onSlideToWrapperTransitionEnd=function(vn){!J||J.destroyed||vn.target===this&&(J.$wrapperEl[0].removeEventListener("transitionend",J.onSlideToWrapperTransitionEnd),J.$wrapperEl[0].removeEventListener("webkitTransitionEnd",J.onSlideToWrapperTransitionEnd),J.onSlideToWrapperTransitionEnd=null,delete J.onSlideToWrapperTransitionEnd,J.transitionEnd(I,tt))}),J.$wrapperEl[0].addEventListener("transitionend",J.onSlideToWrapperTransitionEnd),J.$wrapperEl[0].addEventListener("webkitTransitionEnd",J.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function Ts(l=0,A=this.params.speed,I=!0,P){if("string"==typeof l){const me=parseInt(l,10);if(!isFinite(me))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${l}] given.`);l=me}const z=this;let J=l;return z.params.loop&&(J+=z.loopedSlides),z.slideTo(J,A,I,P)},slideNext:function Qo(l=this.params.speed,A=!0,I){const P=this,{animating:z,enabled:J,params:me}=P;if(!J)return P;let be=me.slidesPerGroup;"auto"===me.slidesPerView&&1===me.slidesPerGroup&&me.slidesPerGroupAuto&&(be=Math.max(P.slidesPerViewDynamic("current",!0),1));const oe=P.activeIndex<me.slidesPerGroupSkip?1:be;if(me.loop){if(z&&me.loopPreventsSlide)return!1;P.loopFix(),P._clientLeft=P.$wrapperEl[0].clientLeft}return P.slideTo(me.rewind&&P.isEnd?0:P.activeIndex+oe,l,A,I)},slidePrev:function Es(l=this.params.speed,A=!0,I){const P=this,{params:z,animating:J,snapGrid:me,slidesGrid:be,rtlTranslate:oe,enabled:ge}=P;if(!ge)return P;if(z.loop){if(J&&z.loopPreventsSlide)return!1;P.loopFix(),P._clientLeft=P.$wrapperEl[0].clientLeft}function le(Fe){return Fe<0?-Math.floor(Math.abs(Fe)):Math.floor(Fe)}const Te=le(oe?P.translate:-P.translate),ze=me.map(Fe=>le(Fe));let nt=me[ze.indexOf(Te)-1];if(void 0===nt&&z.cssMode){let Fe;me.forEach((_t,tt)=>{Te>=_t&&(Fe=tt)}),void 0!==Fe&&(nt=me[Fe>0?Fe-1:Fe])}let De=0;return void 0!==nt&&(De=be.indexOf(nt),De<0&&(De=P.activeIndex-1),"auto"===z.slidesPerView&&1===z.slidesPerGroup&&z.slidesPerGroupAuto&&(De=De-P.slidesPerViewDynamic("previous",!0)+1,De=Math.max(De,0))),P.slideTo(z.rewind&&P.isBeginning?P.params.virtual&&P.params.virtual.enabled&&P.virtual?P.virtual.slides.length-1:P.slides.length-1:De,l,A,I)},slideReset:function Qs(l=this.params.speed,A=!0,I){return this.slideTo(this.activeIndex,l,A,I)},slideToClosest:function ws(l=this.params.speed,A=!0,I,P=.5){const z=this;let J=z.activeIndex;const me=Math.min(z.params.slidesPerGroupSkip,J),be=me+Math.floor((J-me)/z.params.slidesPerGroup),oe=z.rtlTranslate?z.translate:-z.translate;if(oe>=z.snapGrid[be]){const ge=z.snapGrid[be];oe-ge>(z.snapGrid[be+1]-ge)*P&&(J+=z.params.slidesPerGroup)}else{const ge=z.snapGrid[be-1];oe-ge<=(z.snapGrid[be]-ge)*P&&(J-=z.params.slidesPerGroup)}return J=Math.max(J,0),J=Math.min(J,z.slidesGrid.length-1),z.slideTo(J,l,A,I)},slideToClickedSlide:function ho(){const l=this,{params:A,$wrapperEl:I}=l,P="auto"===A.slidesPerView?l.slidesPerViewDynamic():A.slidesPerView;let J,z=l.clickedIndex;if(A.loop){if(l.animating)return;J=parseInt(En(l.clickedSlide).attr("data-swiper-slide-index"),10),A.centeredSlides?z<l.loopedSlides-P/2||z>l.slides.length-l.loopedSlides+P/2?(l.loopFix(),z=I.children(`.${A.slideClass}[data-swiper-slide-index="${J}"]:not(.${A.slideDuplicateClass})`).eq(0).index(),mi(()=>{l.slideTo(z)})):l.slideTo(z):z>l.slides.length-P?(l.loopFix(),z=I.children(`.${A.slideClass}[data-swiper-slide-index="${J}"]:not(.${A.slideDuplicateClass})`).eq(0).index(),mi(()=>{l.slideTo(z)})):l.slideTo(z)}else l.slideTo(z)}},loop:{loopCreate:function fo(){const l=this,A=ae(),{params:I,$wrapperEl:P}=l,z=P.children().length>0?En(P.children()[0].parentNode):P;z.children(`.${I.slideClass}.${I.slideDuplicateClass}`).remove();let J=z.children(`.${I.slideClass}`);if(I.loopFillGroupWithBlank){const oe=I.slidesPerGroup-J.length%I.slidesPerGroup;if(oe!==I.slidesPerGroup){for(let ge=0;ge<oe;ge+=1){const ce=En(A.createElement("div")).addClass(`${I.slideClass} ${I.slideBlankClass}`);z.append(ce)}J=z.children(`.${I.slideClass}`)}}"auto"===I.slidesPerView&&!I.loopedSlides&&(I.loopedSlides=J.length),l.loopedSlides=Math.ceil(parseFloat(I.loopedSlides||I.slidesPerView,10)),l.loopedSlides+=I.loopAdditionalSlides,l.loopedSlides>J.length&&l.params.loopedSlidesLimit&&(l.loopedSlides=J.length);const me=[],be=[];J.each((oe,ge)=>{En(oe).attr("data-swiper-slide-index",ge)});for(let oe=0;oe<l.loopedSlides;oe+=1){const ge=oe-Math.floor(oe/J.length)*J.length;be.push(J.eq(ge)[0]),me.unshift(J.eq(J.length-ge-1)[0])}for(let oe=0;oe<be.length;oe+=1)z.append(En(be[oe].cloneNode(!0)).addClass(I.slideDuplicateClass));for(let oe=me.length-1;oe>=0;oe-=1)z.prepend(En(me[oe].cloneNode(!0)).addClass(I.slideDuplicateClass))},loopFix:function Ms(){const l=this;l.emit("beforeLoopFix");const{activeIndex:A,slides:I,loopedSlides:P,allowSlidePrev:z,allowSlideNext:J,snapGrid:me,rtlTranslate:be}=l;let oe;l.allowSlidePrev=!0,l.allowSlideNext=!0;const ce=-me[A]-l.getTranslate();A<P?(oe=I.length-3*P+A,oe+=P,l.slideTo(oe,0,!1,!0)&&0!==ce&&l.setTranslate((be?-l.translate:l.translate)-ce)):A>=I.length-P&&(oe=-I.length+A+P,oe+=P,l.slideTo(oe,0,!1,!0)&&0!==ce&&l.setTranslate((be?-l.translate:l.translate)-ce)),l.allowSlidePrev=z,l.allowSlideNext=J,l.emit("loopFix")},loopDestroy:function io(){const{$wrapperEl:A,params:I,slides:P}=this;A.children(`.${I.slideClass}.${I.slideDuplicateClass},.${I.slideClass}.${I.slideBlankClass}`).remove(),P.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function Vo(l){const A=this;if(A.support.touch||!A.params.simulateTouch||A.params.watchOverflow&&A.isLocked||A.params.cssMode)return;const I="container"===A.params.touchEventsTarget?A.el:A.wrapperEl;I.style.cursor="move",I.style.cursor=l?"grabbing":"grab"},unsetGrabCursor:function Xs(){const l=this;l.support.touch||l.params.watchOverflow&&l.isLocked||l.params.cssMode||(l["container"===l.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:{attachEvents:function zs(){const l=this,A=ae(),{params:I,support:P}=l;l.onTouchStart=Fs.bind(l),l.onTouchMove=Oo.bind(l),l.onTouchEnd=fs.bind(l),I.cssMode&&(l.onScroll=ki.bind(l)),l.onClick=Gs.bind(l),P.touch&&!so&&(A.addEventListener("touchstart",yo),so=!0),Rs(l,"on")},detachEvents:function Ls(){Rs(this,"off")}},breakpoints:{setBreakpoint:function B(){const l=this,{activeIndex:A,initialized:I,loopedSlides:P=0,params:z,$el:J}=l,me=z.breakpoints;if(!me||me&&0===Object.keys(me).length)return;const be=l.getBreakpoint(me,l.params.breakpointsBase,l.el);if(!be||l.currentBreakpoint===be)return;const ge=(be in me?me[be]:void 0)||l.originalParams,ce=bi(l,z),le=bi(l,ge),Te=z.enabled;ce&&!le?(J.removeClass(`${z.containerModifierClass}grid ${z.containerModifierClass}grid-column`),l.emitContainerClasses()):!ce&&le&&(J.addClass(`${z.containerModifierClass}grid`),(ge.grid.fill&&"column"===ge.grid.fill||!ge.grid.fill&&"column"===z.grid.fill)&&J.addClass(`${z.containerModifierClass}grid-column`),l.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(Fe=>{const _t=z[Fe]&&z[Fe].enabled,tt=ge[Fe]&&ge[Fe].enabled;_t&&!tt&&l[Fe].disable(),!_t&&tt&&l[Fe].enable()});const ze=ge.direction&&ge.direction!==z.direction,nt=z.loop&&(ge.slidesPerView!==z.slidesPerView||ze);ze&&I&&l.changeDirection(),Ki(l.params,ge);const De=l.params.enabled;Object.assign(l,{allowTouchMove:l.params.allowTouchMove,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev}),Te&&!De?l.disable():!Te&&De&&l.enable(),l.currentBreakpoint=be,l.emit("_beforeBreakpoint",ge),nt&&I&&(l.loopDestroy(),l.loopCreate(),l.updateSlides(),l.slideTo(A-P+l.loopedSlides,0,!1)),l.emit("breakpoint",ge)},getBreakpoint:function he(l,A="window",I){if(!l||"container"===A&&!I)return;let P=!1;const z=Xe(),J="window"===A?z.innerHeight:I.clientHeight,me=Object.keys(l).map(be=>{if("string"==typeof be&&0===be.indexOf("@")){const oe=parseFloat(be.substr(1));return{value:J*oe,point:be}}return{value:be,point:be}});me.sort((be,oe)=>parseInt(be.value,10)-parseInt(oe.value,10));for(let be=0;be<me.length;be+=1){const{point:oe,value:ge}=me[be];"window"===A?z.matchMedia(`(min-width: ${ge}px)`).matches&&(P=oe):ge<=I.clientWidth&&(P=oe)}return P||"max"}},checkOverflow:{checkOverflow:function ni(){const l=this,{isLocked:A,params:I}=l,{slidesOffsetBefore:P}=I;if(P){const z=l.slides.length-1;l.isLocked=l.size>l.slidesGrid[z]+l.slidesSizesGrid[z]+2*P}else l.isLocked=1===l.snapGrid.length;!0===I.allowSlideNext&&(l.allowSlideNext=!l.isLocked),!0===I.allowSlidePrev&&(l.allowSlidePrev=!l.isLocked),A&&A!==l.isLocked&&(l.isEnd=!1),A!==l.isLocked&&l.emit(l.isLocked?"lock":"unlock")}},classes:{addClasses:function qe(){const l=this,{classNames:A,params:I,rtl:P,$el:z,device:J,support:me}=l,be=function ve(l,A){const I=[];return l.forEach(P=>{"object"==typeof P?Object.keys(P).forEach(z=>{P[z]&&I.push(A+z)}):"string"==typeof P&&I.push(A+P)}),I}(["initialized",I.direction,{"pointer-events":!me.touch},{"free-mode":l.params.freeMode&&I.freeMode.enabled},{autoheight:I.autoHeight},{rtl:P},{grid:I.grid&&I.grid.rows>1},{"grid-column":I.grid&&I.grid.rows>1&&"column"===I.grid.fill},{android:J.android},{ios:J.ios},{"css-mode":I.cssMode},{centered:I.cssMode&&I.centeredSlides},{"watch-progress":I.watchSlidesProgress}],I.containerModifierClass);A.push(...be),z.addClass([...A].join(" ")),l.emitContainerClasses()},removeClasses:function sn(){const{$el:A,classNames:I}=this;A.removeClass(I.join(" ")),this.emitContainerClasses()}},images:{loadImage:function fr(l,A,I,P,z,J){const me=Xe();let be;function oe(){J&&J()}En(l).parent("picture")[0]||l.complete&&z||!A?oe():(be=new me.Image,be.onload=oe,be.onerror=oe,P&&(be.sizes=P),I&&(be.srcset=I),A&&(be.src=A))},preloadImages:function jr(){const l=this;function A(){null==l||!l||l.destroyed||(void 0!==l.imagesLoaded&&(l.imagesLoaded+=1),l.imagesLoaded===l.imagesToLoad.length&&(l.params.updateOnImagesReady&&l.update(),l.emit("imagesReady")))}l.imagesToLoad=l.$el.find("img");for(let I=0;I<l.imagesToLoad.length;I+=1){const P=l.imagesToLoad[I];l.loadImage(P,P.currentSrc||P.getAttribute("src"),P.srcset||P.getAttribute("srcset"),P.sizes||P.getAttribute("sizes"),!0,A)}}}},oo={};class ns{constructor(...A){let I,P;if(1===A.length&&A[0].constructor&&"Object"===Object.prototype.toString.call(A[0]).slice(8,-1)?P=A[0]:[I,P]=A,P||(P={}),P=Ki({},P),I&&!P.el&&(P.el=I),P.el&&En(P.el).length>1){const be=[];return En(P.el).each(oe=>{const ge=Ki({},P,{el:oe});be.push(new ns(ge))}),be}const z=this;z.__swiper__=!0,z.support=$s(),z.device=function Ir(l={}){return Yr||(Yr=function wr({userAgent:l}={}){const A=$s(),I=Xe(),P=I.navigator.platform,z=l||I.navigator.userAgent,J={ios:!1,android:!1},me=I.screen.width,be=I.screen.height,oe=z.match(/(Android);?[\s\/]+([\d.]+)?/);let ge=z.match(/(iPad).*OS\s([\d_]+)/);const ce=z.match(/(iPod)(.*OS\s([\d_]+))?/),le=!ge&&z.match(/(iPhone\sOS|iOS)\s([\d_]+)/),Te="Win32"===P;let ze="MacIntel"===P;return!ge&&ze&&A.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${me}x${be}`)>=0&&(ge=z.match(/(Version)\/([\d.]+)/),ge||(ge=[0,1,"13_0_0"]),ze=!1),oe&&!Te&&(J.os="android",J.android=!0),(ge||le||ce)&&(J.os="ios",J.ios=!0),J}(l)),Yr}({userAgent:P.userAgent}),z.browser=function wi(){return Xi||(Xi=function Qr(){const l=Xe();return{isSafari:function A(){const I=l.navigator.userAgent.toLowerCase();return I.indexOf("safari")>=0&&I.indexOf("chrome")<0&&I.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(l.navigator.userAgent)}}()),Xi}(),z.eventsListeners={},z.eventsAnyListeners=[],z.modules=[...z.__modules__],P.modules&&Array.isArray(P.modules)&&z.modules.push(...P.modules);const J={};z.modules.forEach(be=>{be({swiper:z,extendParams:Di(P,J),on:z.on.bind(z),once:z.once.bind(z),off:z.off.bind(z),emit:z.emit.bind(z)})});const me=Ki({},es,J);return z.params=Ki({},me,oo,P),z.originalParams=Ki({},z.params),z.passedParams=Ki({},P),z.params&&z.params.on&&Object.keys(z.params.on).forEach(be=>{z.on(be,z.params.on[be])}),z.params&&z.params.onAny&&z.onAny(z.params.onAny),z.$=En,Object.assign(z,{enabled:z.params.enabled,el:I,classNames:[],slides:En(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===z.params.direction,isVertical:()=>"vertical"===z.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:z.params.allowSlideNext,allowSlidePrev:z.params.allowSlidePrev,touchEvents:function(){const oe=["touchstart","touchmove","touchend","touchcancel"],ge=["pointerdown","pointermove","pointerup"];return z.touchEventsTouch={start:oe[0],move:oe[1],end:oe[2],cancel:oe[3]},z.touchEventsDesktop={start:ge[0],move:ge[1],end:ge[2]},z.support.touch||!z.params.simulateTouch?z.touchEventsTouch:z.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:z.params.focusableElements,lastClickTime:Mi(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:z.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),z.emit("_swiper"),z.params.init&&z.init(),z}enable(){const A=this;A.enabled||(A.enabled=!0,A.params.grabCursor&&A.setGrabCursor(),A.emit("enable"))}disable(){const A=this;!A.enabled||(A.enabled=!1,A.params.grabCursor&&A.unsetGrabCursor(),A.emit("disable"))}setProgress(A,I){const P=this;A=Math.min(Math.max(A,0),1);const z=P.minTranslate(),me=(P.maxTranslate()-z)*A+z;P.translateTo(me,void 0===I?0:I),P.updateActiveIndex(),P.updateSlidesClasses()}emitContainerClasses(){const A=this;if(!A.params._emitClasses||!A.el)return;const I=A.el.className.split(" ").filter(P=>0===P.indexOf("swiper")||0===P.indexOf(A.params.containerModifierClass));A.emit("_containerClasses",I.join(" "))}getSlideClasses(A){const I=this;return I.destroyed?"":A.className.split(" ").filter(P=>0===P.indexOf("swiper-slide")||0===P.indexOf(I.params.slideClass)).join(" ")}emitSlidesClasses(){const A=this;if(!A.params._emitClasses||!A.el)return;const I=[];A.slides.each(P=>{const z=A.getSlideClasses(P);I.push({slideEl:P,classNames:z}),A.emit("_slideClass",P,z)}),A.emit("_slideClasses",I)}slidesPerViewDynamic(A="current",I=!1){const{params:z,slides:J,slidesGrid:me,slidesSizesGrid:be,size:oe,activeIndex:ge}=this;let ce=1;if(z.centeredSlides){let Te,le=J[ge].swiperSlideSize;for(let ze=ge+1;ze<J.length;ze+=1)J[ze]&&!Te&&(le+=J[ze].swiperSlideSize,ce+=1,le>oe&&(Te=!0));for(let ze=ge-1;ze>=0;ze-=1)J[ze]&&!Te&&(le+=J[ze].swiperSlideSize,ce+=1,le>oe&&(Te=!0))}else if("current"===A)for(let le=ge+1;le<J.length;le+=1)(I?me[le]+be[le]-me[ge]<oe:me[le]-me[ge]<oe)&&(ce+=1);else for(let le=ge-1;le>=0;le-=1)me[ge]-me[le]<oe&&(ce+=1);return ce}update(){const A=this;if(!A||A.destroyed)return;const{snapGrid:I,params:P}=A;function z(){const be=Math.min(Math.max(A.rtlTranslate?-1*A.translate:A.translate,A.maxTranslate()),A.minTranslate());A.setTranslate(be),A.updateActiveIndex(),A.updateSlidesClasses()}let J;P.breakpoints&&A.setBreakpoint(),A.updateSize(),A.updateSlides(),A.updateProgress(),A.updateSlidesClasses(),A.params.freeMode&&A.params.freeMode.enabled?(z(),A.params.autoHeight&&A.updateAutoHeight()):(J=A.slideTo(("auto"===A.params.slidesPerView||A.params.slidesPerView>1)&&A.isEnd&&!A.params.centeredSlides?A.slides.length-1:A.activeIndex,0,!1,!0),J||z()),P.watchOverflow&&I!==A.snapGrid&&A.checkOverflow(),A.emit("update")}changeDirection(A,I=!0){const P=this,z=P.params.direction;return A||(A="horizontal"===z?"vertical":"horizontal"),A===z||"horizontal"!==A&&"vertical"!==A||(P.$el.removeClass(`${P.params.containerModifierClass}${z}`).addClass(`${P.params.containerModifierClass}${A}`),P.emitContainerClasses(),P.params.direction=A,P.slides.each(J=>{"vertical"===A?J.style.width="":J.style.height=""}),P.emit("changeDirection"),I&&P.update()),P}changeLanguageDirection(A){const I=this;I.rtl&&"rtl"===A||!I.rtl&&"ltr"===A||(I.rtl="rtl"===A,I.rtlTranslate="horizontal"===I.params.direction&&I.rtl,I.rtl?(I.$el.addClass(`${I.params.containerModifierClass}rtl`),I.el.dir="rtl"):(I.$el.removeClass(`${I.params.containerModifierClass}rtl`),I.el.dir="ltr"),I.update())}mount(A){const I=this;if(I.mounted)return!0;const P=En(A||I.params.el);if(!(A=P[0]))return!1;A.swiper=I;const z=()=>`.${(I.params.wrapperClass||"").trim().split(" ").join(".")}`;let me=(()=>{if(A&&A.shadowRoot&&A.shadowRoot.querySelector){const be=En(A.shadowRoot.querySelector(z()));return be.children=oe=>P.children(oe),be}return P.children?P.children(z()):En(P).children(z())})();if(0===me.length&&I.params.createElements){const oe=ae().createElement("div");me=En(oe),oe.className=I.params.wrapperClass,P.append(oe),P.children(`.${I.params.slideClass}`).each(ge=>{me.append(ge)})}return Object.assign(I,{$el:P,el:A,$wrapperEl:me,wrapperEl:me[0],mounted:!0,rtl:"rtl"===A.dir.toLowerCase()||"rtl"===P.css("direction"),rtlTranslate:"horizontal"===I.params.direction&&("rtl"===A.dir.toLowerCase()||"rtl"===P.css("direction")),wrongRTL:"-webkit-box"===me.css("display")}),!0}init(A){const I=this;return I.initialized||!1===I.mount(A)||(I.emit("beforeInit"),I.params.breakpoints&&I.setBreakpoint(),I.addClasses(),I.params.loop&&I.loopCreate(),I.updateSize(),I.updateSlides(),I.params.watchOverflow&&I.checkOverflow(),I.params.grabCursor&&I.enabled&&I.setGrabCursor(),I.params.preloadImages&&I.preloadImages(),I.slideTo(I.params.loop?I.params.initialSlide+I.loopedSlides:I.params.initialSlide,0,I.params.runCallbacksOnInit,!1,!0),I.attachEvents(),I.initialized=!0,I.emit("init"),I.emit("afterInit")),I}destroy(A=!0,I=!0){const P=this,{params:z,$el:J,$wrapperEl:me,slides:be}=P;return void 0===P.params||P.destroyed||(P.emit("beforeDestroy"),P.initialized=!1,P.detachEvents(),z.loop&&P.loopDestroy(),I&&(P.removeClasses(),J.removeAttr("style"),me.removeAttr("style"),be&&be.length&&be.removeClass([z.slideVisibleClass,z.slideActiveClass,z.slideNextClass,z.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),P.emit("destroy"),Object.keys(P.eventsListeners).forEach(oe=>{P.off(oe)}),!1!==A&&(P.$el[0].swiper=null,function yr(l){const A=l;Object.keys(A).forEach(I=>{try{A[I]=null}catch(P){}try{delete A[I]}catch(P){}})}(P)),P.destroyed=!0),null}static extendDefaults(A){Ki(oo,A)}static get extendedDefaults(){return oo}static get defaults(){return es}static installModule(A){ns.prototype.__modules__||(ns.prototype.__modules__=[]);const I=ns.prototype.__modules__;"function"==typeof A&&I.indexOf(A)<0&&I.push(A)}static use(A){return Array.isArray(A)?(A.forEach(I=>ns.installModule(I)),ns):(ns.installModule(A),ns)}}Object.keys(Fi).forEach(l=>{Object.keys(Fi[l]).forEach(A=>{ns.prototype[A]=Fi[l][A]})}),ns.use([function Ks({swiper:l,on:A,emit:I}){const P=Xe();let z=null,J=null;const me=()=>{!l||l.destroyed||!l.initialized||(I("beforeResize"),I("resize"))},ge=()=>{!l||l.destroyed||!l.initialized||I("orientationchange")};A("init",()=>{l.params.resizeObserver&&void 0!==P.ResizeObserver?!l||l.destroyed||!l.initialized||(z=new ResizeObserver(ce=>{J=P.requestAnimationFrame(()=>{const{width:le,height:Te}=l;let ze=le,nt=Te;ce.forEach(({contentBoxSize:De,contentRect:Fe,target:_t})=>{_t&&_t!==l.el||(ze=Fe?Fe.width:(De[0]||De).inlineSize,nt=Fe?Fe.height:(De[0]||De).blockSize)}),(ze!==le||nt!==Te)&&me()})}),z.observe(l.el)):(P.addEventListener("resize",me),P.addEventListener("orientationchange",ge))}),A("destroy",()=>{J&&P.cancelAnimationFrame(J),z&&z.unobserve&&l.el&&(z.unobserve(l.el),z=null),P.removeEventListener("resize",me),P.removeEventListener("orientationchange",ge)})},function zi({swiper:l,extendParams:A,on:I,emit:P}){const z=[],J=Xe(),me=(ge,ce={})=>{const Te=new(J.MutationObserver||J.WebkitMutationObserver)(ze=>{if(1===ze.length)return void P("observerUpdate",ze[0]);const nt=function(){P("observerUpdate",ze[0])};J.requestAnimationFrame?J.requestAnimationFrame(nt):J.setTimeout(nt,0)});Te.observe(ge,{attributes:void 0===ce.attributes||ce.attributes,childList:void 0===ce.childList||ce.childList,characterData:void 0===ce.characterData||ce.characterData}),z.push(Te)};A({observer:!1,observeParents:!1,observeSlideChildren:!1}),I("init",()=>{if(l.params.observer){if(l.params.observeParents){const ge=l.$el.parents();for(let ce=0;ce<ge.length;ce+=1)me(ge[ce])}me(l.$el[0],{childList:l.params.observeSlideChildren}),me(l.$wrapperEl[0],{attributes:!1})}}),I("destroy",()=>{z.forEach(ge=>{ge.disconnect()}),z.splice(0,z.length)})}]);const Kr=ns;function _o(l,A,I,P){const z=ae();return l.params.createElements&&Object.keys(P).forEach(J=>{if(!I[J]&&!0===I.auto){let me=l.$el.children(`.${P[J]}`)[0];me||(me=z.createElement("div"),me.className=P[J],l.$el.append(me)),I[J]=me,A[J]=me}}),I}function Q({swiper:l,extendParams:A,on:I,emit:P}){function z(ze){let nt;return ze&&(nt=En(ze),l.params.uniqueNavElements&&"string"==typeof ze&&nt.length>1&&1===l.$el.find(ze).length&&(nt=l.$el.find(ze))),nt}function J(ze,nt){const De=l.params.navigation;ze&&ze.length>0&&(ze[nt?"addClass":"removeClass"](De.disabledClass),ze[0]&&"BUTTON"===ze[0].tagName&&(ze[0].disabled=nt),l.params.watchOverflow&&l.enabled&&ze[l.isLocked?"addClass":"removeClass"](De.lockClass))}function me(){if(l.params.loop)return;const{$nextEl:ze,$prevEl:nt}=l.navigation;J(nt,l.isBeginning&&!l.params.rewind),J(ze,l.isEnd&&!l.params.rewind)}function be(ze){ze.preventDefault(),(!l.isBeginning||l.params.loop||l.params.rewind)&&(l.slidePrev(),P("navigationPrev"))}function oe(ze){ze.preventDefault(),(!l.isEnd||l.params.loop||l.params.rewind)&&(l.slideNext(),P("navigationNext"))}function ge(){const ze=l.params.navigation;if(l.params.navigation=_o(l,l.originalParams.navigation,l.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!ze.nextEl&&!ze.prevEl)return;const nt=z(ze.nextEl),De=z(ze.prevEl);nt&&nt.length>0&&nt.on("click",oe),De&&De.length>0&&De.on("click",be),Object.assign(l.navigation,{$nextEl:nt,nextEl:nt&&nt[0],$prevEl:De,prevEl:De&&De[0]}),l.enabled||(nt&&nt.addClass(ze.lockClass),De&&De.addClass(ze.lockClass))}function ce(){const{$nextEl:ze,$prevEl:nt}=l.navigation;ze&&ze.length&&(ze.off("click",oe),ze.removeClass(l.params.navigation.disabledClass)),nt&&nt.length&&(nt.off("click",be),nt.removeClass(l.params.navigation.disabledClass))}A({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),l.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},I("init",()=>{!1===l.params.navigation.enabled?Te():(ge(),me())}),I("toEdge fromEdge lock unlock",()=>{me()}),I("destroy",()=>{ce()}),I("enable disable",()=>{const{$nextEl:ze,$prevEl:nt}=l.navigation;ze&&ze[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass),nt&&nt[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass)}),I("click",(ze,nt)=>{const{$nextEl:De,$prevEl:Fe}=l.navigation,_t=nt.target;if(l.params.navigation.hideOnClick&&!En(_t).is(Fe)&&!En(_t).is(De)){if(l.pagination&&l.params.pagination&&l.params.pagination.clickable&&(l.pagination.el===_t||l.pagination.el.contains(_t)))return;let tt;De?tt=De.hasClass(l.params.navigation.hiddenClass):Fe&&(tt=Fe.hasClass(l.params.navigation.hiddenClass)),P(!0===tt?"navigationShow":"navigationHide"),De&&De.toggleClass(l.params.navigation.hiddenClass),Fe&&Fe.toggleClass(l.params.navigation.hiddenClass)}});const Te=()=>{l.$el.addClass(l.params.navigation.navigationDisabledClass),ce()};Object.assign(l.navigation,{enable:()=>{l.$el.removeClass(l.params.navigation.navigationDisabledClass),ge(),me()},disable:Te,update:me,init:ge,destroy:ce})}function G(l=""){return`.${l.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function V({swiper:l,extendParams:A,on:I,emit:P}){const z="swiper-pagination";A({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:De=>De,formatFractionTotal:De=>De,bulletClass:`${z}-bullet`,bulletActiveClass:`${z}-bullet-active`,modifierClass:`${z}-`,currentClass:`${z}-current`,totalClass:`${z}-total`,hiddenClass:`${z}-hidden`,progressbarFillClass:`${z}-progressbar-fill`,progressbarOppositeClass:`${z}-progressbar-opposite`,clickableClass:`${z}-clickable`,lockClass:`${z}-lock`,horizontalClass:`${z}-horizontal`,verticalClass:`${z}-vertical`,paginationDisabledClass:`${z}-disabled`}}),l.pagination={el:null,$el:null,bullets:[]};let J,me=0;function be(){return!l.params.pagination.el||!l.pagination.el||!l.pagination.$el||0===l.pagination.$el.length}function oe(De,Fe){const{bulletActiveClass:_t}=l.params.pagination;De[Fe]().addClass(`${_t}-${Fe}`)[Fe]().addClass(`${_t}-${Fe}-${Fe}`)}function ge(){const De=l.rtl,Fe=l.params.pagination;if(be())return;const _t=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,tt=l.pagination.$el;let yt;const vn=l.params.loop?Math.ceil((_t-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;if(l.params.loop?(yt=Math.ceil((l.activeIndex-l.loopedSlides)/l.params.slidesPerGroup),yt>_t-1-2*l.loopedSlides&&(yt-=_t-2*l.loopedSlides),yt>vn-1&&(yt-=vn),yt<0&&"bullets"!==l.params.paginationType&&(yt=vn+yt)):yt=void 0!==l.snapIndex?l.snapIndex:l.activeIndex||0,"bullets"===Fe.type&&l.pagination.bullets&&l.pagination.bullets.length>0){const Sn=l.pagination.bullets;let gn,Rn,er;if(Fe.dynamicBullets&&(J=Sn.eq(0)[l.isHorizontal()?"outerWidth":"outerHeight"](!0),tt.css(l.isHorizontal()?"width":"height",J*(Fe.dynamicMainBullets+4)+"px"),Fe.dynamicMainBullets>1&&void 0!==l.previousIndex&&(me+=yt-(l.previousIndex-l.loopedSlides||0),me>Fe.dynamicMainBullets-1?me=Fe.dynamicMainBullets-1:me<0&&(me=0)),gn=Math.max(yt-me,0),Rn=gn+(Math.min(Sn.length,Fe.dynamicMainBullets)-1),er=(Rn+gn)/2),Sn.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(Er=>`${Fe.bulletActiveClass}${Er}`).join(" ")),tt.length>1)Sn.each(Er=>{const Fn=En(Er),en=Fn.index();en===yt&&Fn.addClass(Fe.bulletActiveClass),Fe.dynamicBullets&&(en>=gn&&en<=Rn&&Fn.addClass(`${Fe.bulletActiveClass}-main`),en===gn&&oe(Fn,"prev"),en===Rn&&oe(Fn,"next"))});else{const Er=Sn.eq(yt),Fn=Er.index();if(Er.addClass(Fe.bulletActiveClass),Fe.dynamicBullets){const en=Sn.eq(gn),Nt=Sn.eq(Rn);for(let hn=gn;hn<=Rn;hn+=1)Sn.eq(hn).addClass(`${Fe.bulletActiveClass}-main`);if(l.params.loop)if(Fn>=Sn.length){for(let hn=Fe.dynamicMainBullets;hn>=0;hn-=1)Sn.eq(Sn.length-hn).addClass(`${Fe.bulletActiveClass}-main`);Sn.eq(Sn.length-Fe.dynamicMainBullets-1).addClass(`${Fe.bulletActiveClass}-prev`)}else oe(en,"prev"),oe(Nt,"next");else oe(en,"prev"),oe(Nt,"next")}}if(Fe.dynamicBullets){const Er=Math.min(Sn.length,Fe.dynamicMainBullets+4),Fn=(J*Er-J)/2-er*J,en=De?"right":"left";Sn.css(l.isHorizontal()?en:"top",`${Fn}px`)}}if("fraction"===Fe.type&&(tt.find(G(Fe.currentClass)).text(Fe.formatFractionCurrent(yt+1)),tt.find(G(Fe.totalClass)).text(Fe.formatFractionTotal(vn))),"progressbar"===Fe.type){let Sn;Sn=Fe.progressbarOpposite?l.isHorizontal()?"vertical":"horizontal":l.isHorizontal()?"horizontal":"vertical";const gn=(yt+1)/vn;let Rn=1,er=1;"horizontal"===Sn?Rn=gn:er=gn,tt.find(G(Fe.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${Rn}) scaleY(${er})`).transition(l.params.speed)}"custom"===Fe.type&&Fe.renderCustom?(tt.html(Fe.renderCustom(l,yt+1,vn)),P("paginationRender",tt[0])):P("paginationUpdate",tt[0]),l.params.watchOverflow&&l.enabled&&tt[l.isLocked?"addClass":"removeClass"](Fe.lockClass)}function ce(){const De=l.params.pagination;if(be())return;const Fe=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,_t=l.pagination.$el;let tt="";if("bullets"===De.type){let yt=l.params.loop?Math.ceil((Fe-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;l.params.freeMode&&l.params.freeMode.enabled&&!l.params.loop&&yt>Fe&&(yt=Fe);for(let vn=0;vn<yt;vn+=1)tt+=De.renderBullet?De.renderBullet.call(l,vn,De.bulletClass):`<${De.bulletElement} class="${De.bulletClass}"></${De.bulletElement}>`;_t.html(tt),l.pagination.bullets=_t.find(G(De.bulletClass))}"fraction"===De.type&&(tt=De.renderFraction?De.renderFraction.call(l,De.currentClass,De.totalClass):`<span class="${De.currentClass}"></span> / <span class="${De.totalClass}"></span>`,_t.html(tt)),"progressbar"===De.type&&(tt=De.renderProgressbar?De.renderProgressbar.call(l,De.progressbarFillClass):`<span class="${De.progressbarFillClass}"></span>`,_t.html(tt)),"custom"!==De.type&&P("paginationRender",l.pagination.$el[0])}function le(){l.params.pagination=_o(l,l.originalParams.pagination,l.params.pagination,{el:"swiper-pagination"});const De=l.params.pagination;if(!De.el)return;let Fe=En(De.el);0!==Fe.length&&(l.params.uniqueNavElements&&"string"==typeof De.el&&Fe.length>1&&(Fe=l.$el.find(De.el),Fe.length>1&&(Fe=Fe.filter(_t=>En(_t).parents(".swiper")[0]===l.el))),"bullets"===De.type&&De.clickable&&Fe.addClass(De.clickableClass),Fe.addClass(De.modifierClass+De.type),Fe.addClass(l.isHorizontal()?De.horizontalClass:De.verticalClass),"bullets"===De.type&&De.dynamicBullets&&(Fe.addClass(`${De.modifierClass}${De.type}-dynamic`),me=0,De.dynamicMainBullets<1&&(De.dynamicMainBullets=1)),"progressbar"===De.type&&De.progressbarOpposite&&Fe.addClass(De.progressbarOppositeClass),De.clickable&&Fe.on("click",G(De.bulletClass),function(tt){tt.preventDefault();let yt=En(this).index()*l.params.slidesPerGroup;l.params.loop&&(yt+=l.loopedSlides),l.slideTo(yt)}),Object.assign(l.pagination,{$el:Fe,el:Fe[0]}),l.enabled||Fe.addClass(De.lockClass))}function Te(){const De=l.params.pagination;if(be())return;const Fe=l.pagination.$el;Fe.removeClass(De.hiddenClass),Fe.removeClass(De.modifierClass+De.type),Fe.removeClass(l.isHorizontal()?De.horizontalClass:De.verticalClass),l.pagination.bullets&&l.pagination.bullets.removeClass&&l.pagination.bullets.removeClass(De.bulletActiveClass),De.clickable&&Fe.off("click",G(De.bulletClass))}I("init",()=>{!1===l.params.pagination.enabled?nt():(le(),ce(),ge())}),I("activeIndexChange",()=>{(l.params.loop||void 0===l.snapIndex)&&ge()}),I("snapIndexChange",()=>{l.params.loop||ge()}),I("slidesLengthChange",()=>{l.params.loop&&(ce(),ge())}),I("snapGridLengthChange",()=>{l.params.loop||(ce(),ge())}),I("destroy",()=>{Te()}),I("enable disable",()=>{const{$el:De}=l.pagination;De&&De[l.enabled?"removeClass":"addClass"](l.params.pagination.lockClass)}),I("lock unlock",()=>{ge()}),I("click",(De,Fe)=>{const _t=Fe.target,{$el:tt}=l.pagination;if(l.params.pagination.el&&l.params.pagination.hideOnClick&&tt&&tt.length>0&&!En(_t).hasClass(l.params.pagination.bulletClass)){if(l.navigation&&(l.navigation.nextEl&&_t===l.navigation.nextEl||l.navigation.prevEl&&_t===l.navigation.prevEl))return;const yt=tt.hasClass(l.params.pagination.hiddenClass);P(!0===yt?"paginationShow":"paginationHide"),tt.toggleClass(l.params.pagination.hiddenClass)}});const nt=()=>{l.$el.addClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.addClass(l.params.pagination.paginationDisabledClass),Te()};Object.assign(l.pagination,{enable:()=>{l.$el.removeClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.removeClass(l.params.pagination.paginationDisabledClass),le(),ce(),ge()},disable:nt,render:ce,update:ge,init:le,destroy:Te})}},5861:(Wn,At,j)=>{function g(pe,ae,We,Xe,pt,Ze,ht){try{var Oe=pe[Ze](ht),Pe=Oe.value}catch(Et){return void We(Et)}Oe.done?ae(Pe):Promise.resolve(Pe).then(Xe,pt)}function F(pe){return function(){var ae=this,We=arguments;return new Promise(function(Xe,pt){var Ze=pe.apply(ae,We);function ht(Pe){g(Ze,Xe,pt,ht,Oe,"next",Pe)}function Oe(Pe){g(Ze,Xe,pt,ht,Oe,"throw",Pe)}ht(void 0)})}}j.d(At,{Z:()=>F})}},Wn=>{Wn(Wn.s=1201)}]);