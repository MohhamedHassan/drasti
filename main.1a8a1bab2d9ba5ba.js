"use strict";var fT=Object.defineProperty,pT=Object.defineProperties,gT=Object.getOwnPropertyDescriptors,aC=Object.getOwnPropertySymbols,mT=Object.prototype.hasOwnProperty,yT=Object.prototype.propertyIsEnumerable,lC=(jn,Dt,H)=>Dt in jn?fT(jn,Dt,{enumerable:!0,configurable:!0,writable:!0,value:H}):jn[Dt]=H,uC=(jn,Dt)=>{for(var H in Dt||(Dt={}))mT.call(Dt,H)&&lC(jn,H,Dt[H]);if(aC)for(var H of aC(Dt))yT.call(Dt,H)&&lC(jn,H,Dt[H]);return jn},cC=(jn,Dt)=>pT(jn,gT(Dt));(self.webpackChunkdrasti=self.webpackChunkdrasti||[]).push([[179],{6217:(jn,Dt,H)=>{H.d(Dt,{nm:()=>Qi});var g=H(2122);H(5e3),H(259);var xe=H(5861),Ne=H(9681),ot=H(4859),Kt=H(2090),Ut=H(1877);const Fe=new Map,Lt={activated:!1,tokenObservers:[]},Oe={initialized:!1,enabled:!1};function Tt(Ct){return Fe.get(Ct)||Object.assign({},Lt)}function Nt(){return Oe}class gr{constructor(dt,St,gn,$n,Ir){if(this.operation=dt,this.retryPolicy=St,this.getWaitDuration=gn,this.lowerBound=$n,this.upperBound=Ir,this.pending=null,this.nextErrorWaitInterval=$n,$n>Ir)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(dt){var St=this;return(0,xe.Z)(function*(){St.stop();try{St.pending=new Kt.BH,yield function lr(Ct){return new Promise(dt=>{setTimeout(dt,Ct)})}(St.getNextRun(dt)),St.pending.resolve(),yield St.pending.promise,St.pending=new Kt.BH,yield St.operation(),St.pending.resolve(),yield St.pending.promise,St.process(!0).catch(()=>{})}catch(gn){St.retryPolicy(gn)?St.process(!1).catch(()=>{}):St.stop()}})()}getNextRun(dt){if(dt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const St=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),St}}}const Ot=new Kt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function It(Ct){if(!Tt(Ct).activated)throw Ot.create("use-before-activation",{appName:Ct.name})}function xt(Ct,dt){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,xe.Z)(function*({url:Ct,body:dt},St){const gn={"Content-Type":"application/json"},$n=St.getImmediate({optional:!0});if($n){const as=yield $n.getHeartbeatsHeader();as&&(gn["X-Firebase-Client"]=as)}const Ir={method:"POST",body:JSON.stringify(dt),headers:gn};let Qr,Zi;try{Qr=yield fetch(Ct,Ir)}catch(as){throw Ot.create("fetch-network-error",{originalErrorMessage:null==as?void 0:as.message})}if(200!==Qr.status)throw Ot.create("fetch-status-error",{httpStatus:Qr.status});try{Zi=yield Qr.json()}catch(as){throw Ot.create("fetch-parse-error",{originalErrorMessage:null==as?void 0:as.message})}const pi=Zi.ttl.match(/^([\d.]+)(s)$/);if(!pi||!pi[2]||isNaN(Number(pi[1])))throw Ot.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Zi.ttl}`});const ds=1e3*Number(pi[1]),ei=Date.now();return{token:Zi.token,expireTimeMillis:ei+ds,issuedAtTimeMillis:ei}})).apply(this,arguments)}function tr(Ct,dt){const{projectId:St,appId:gn,apiKey:$n}=Ct.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${St}/apps/${gn}:exchangeDebugToken?key=${$n}`,body:{debug_token:dt}}}const qn="firebase-app-check-store";let Tr=null;function wr(){return Tr||(Tr=new Promise((Ct,dt)=>{try{const St=indexedDB.open("firebase-app-check-database",1);St.onsuccess=gn=>{Ct(gn.target.result)},St.onerror=gn=>{var $n;dt(Ot.create("storage-open",{originalErrorMessage:null===($n=gn.target.error)||void 0===$n?void 0:$n.message}))},St.onupgradeneeded=gn=>{0===gn.oldVersion&&gn.target.result.createObjectStore(qn,{keyPath:"compositeKey"})}}catch(St){dt(Ot.create("storage-open",{originalErrorMessage:null==St?void 0:St.message}))}}),Tr)}function Bt(){return(Bt=(0,xe.Z)(function*(Ct,dt){const gn=(yield wr()).transaction(qn,"readwrite"),Ir=gn.objectStore(qn).put({compositeKey:Ct,value:dt});return new Promise((Qr,Zi)=>{Ir.onsuccess=pi=>{Qr()},gn.onerror=pi=>{var ds;Zi(Ot.create("storage-set",{originalErrorMessage:null===(ds=pi.target.error)||void 0===ds?void 0:ds.message}))}})})).apply(this,arguments)}const qr=new Ut.Yd("@firebase/app-check");function os(Ct,dt){return(0,Kt.hl)()?function Ji(Ct,dt){return function ct(Ct,dt){return Bt.apply(this,arguments)}(function Bn(Ct){return`${Ct.options.appId}-${Ct.name}`}(Ct),dt)}(Ct,dt).catch(St=>{qr.warn(`Failed to write token to IndexedDB. Error: ${St}`)}):Promise.resolve()}function Fn(){return Nt().enabled}function Ei(){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,xe.Z)(function*(){const Ct=Nt();if(Ct.enabled&&Ct.token)return Ct.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Pn={error:"UNKNOWN_ERROR"};function jt(Ct){return Kt.US.encodeString(JSON.stringify(Ct),!1)}function Wn(Ct){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,xe.Z)(function*(Ct,dt=!1){const St=Ct.app;It(St);const gn=Tt(St);let Ir,$n=gn.token;if($n&&!rn($n)&&(gn.token=void 0,$n=void 0),!$n){const pi=yield gn.cachedTokenPromise;pi&&(rn(pi)?$n=pi:yield os(St,void 0))}if(!dt&&$n&&rn($n))return{token:$n.token};let Zi,Qr=!1;if(Fn()){gn.exchangeTokenPromise||(gn.exchangeTokenPromise=xt(tr(St,yield Ei()),Ct.heartbeatServiceProvider).finally(()=>{gn.exchangeTokenPromise=void 0}),Qr=!0);const pi=yield gn.exchangeTokenPromise;return yield os(St,pi),gn.token=pi,{token:pi.token}}try{gn.exchangeTokenPromise||(gn.exchangeTokenPromise=gn.provider.getToken().finally(()=>{gn.exchangeTokenPromise=void 0}),Qr=!0),$n=yield Tt(St).exchangeTokenPromise}catch(pi){"appCheck/throttled"===pi.code?qr.warn(pi.message):qr.error(pi),Ir=pi}return $n?Ir?Zi=rn($n)?{token:$n.token,internalError:Ir}:kt(Ir):(Zi={token:$n.token},gn.token=$n,yield os(St,$n)):Zi=kt(Ir),Qr&&ht(St,Zi),Zi})).apply(this,arguments)}function Nr(Ct,dt){const St=Tt(Ct),gn=St.tokenObservers.filter($n=>$n.next!==dt);0===gn.length&&St.tokenRefresher&&St.tokenRefresher.isRunning()&&St.tokenRefresher.stop(),St.tokenObservers=gn}function tt(Ct){const{app:dt}=Ct,St=Tt(dt);let gn=St.tokenRefresher;gn||(gn=function $e(Ct){const{app:dt}=Ct;return new gr((0,xe.Z)(function*(){let gn;if(gn=Tt(dt).token?yield Wn(Ct,!0):yield Wn(Ct),gn.error)throw gn.error;if(gn.internalError)throw gn.internalError}),()=>!0,()=>{const St=Tt(dt);if(St.token){let gn=St.token.issuedAtTimeMillis+.5*(St.token.expireTimeMillis-St.token.issuedAtTimeMillis)+3e5;return gn=Math.min(gn,St.token.expireTimeMillis-3e5),Math.max(0,gn-Date.now())}return 0},3e4,96e4)}(Ct),St.tokenRefresher=gn),!gn.isRunning()&&St.isTokenAutoRefreshEnabled&&gn.start()}function ht(Ct,dt){const St=Tt(Ct).tokenObservers;for(const gn of St)try{"EXTERNAL"===gn.type&&null!=dt.error?gn.error(dt.error):gn.next(dt)}catch($n){}}function rn(Ct){return Ct.expireTimeMillis-Date.now()>0}function kt(Ct){return{token:jt(Pn),error:Ct}}class Ge{constructor(dt,St){this.app=dt,this.heartbeatServiceProvider=St}_delete(){const{tokenObservers:dt}=Tt(this.app);for(const St of dt)Nr(this.app,St.next);return Promise.resolve()}}const Vs="app-check-internal";!function Cr(){(0,Ne._registerComponent)(new ot.wA("app-check",Ct=>function Re(Ct,dt){return new Ge(Ct,dt)}(Ct.getProvider("app").getImmediate(),Ct.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ct,dt,St)=>{Ct.getProvider(Vs).initialize()})),(0,Ne._registerComponent)(new ot.wA(Vs,Ct=>function De(Ct){return{getToken:dt=>Wn(Ct,dt),addTokenListener:dt=>function Pr(Ct,dt,St,gn){const{app:$n}=Ct,Ir=Tt($n);if(Ir.tokenObservers=[...Ir.tokenObservers,{next:St,error:gn,type:dt}],Ir.token&&rn(Ir.token)){const Zi=Ir.token;Promise.resolve().then(()=>{St({token:Zi.token}),tt(Ct)}).catch(()=>{})}Ir.cachedTokenPromise.then(()=>tt(Ct))}(Ct,"INTERNAL",dt),removeTokenListener:dt=>Nr(Ct.app,dt)}}(Ct.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)("@firebase/app-check","0.6.0")}();class Qi{constructor(){return(0,g.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(jn,Dt,H)=>{H.d(Dt,{zQ:()=>At,ww:()=>on,rT:()=>Oe,f7:()=>et,L6:()=>Fe,_Q:()=>Lt,lh:()=>Tt,Qv:()=>Ut,nw:()=>Nt});var g=H(5e3),Z=H(7579),ge=H(9646),le=H(8306),Ye=H(8996),Xe=H(6451),gt=H(6063);class Qe extends Z.x{constructor(Xn=1/0,Jn=1/0,fn=gt.l){super(),this._bufferSize=Xn,this._windowTime=Jn,this._timestampProvider=fn,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Jn===1/0,this._bufferSize=Math.max(1,Xn),this._windowTime=Math.max(1,Jn)}next(Xn){const{isStopped:Jn,_buffer:fn,_infiniteTimeWindow:gr,_timestampProvider:lr,_windowTime:Ft}=this;Jn||(fn.push(Xn),!gr&&fn.push(lr.now()+Ft)),this._trimBuffer(),super.next(Xn)}_subscribe(Xn){this._throwIfClosed(),this._trimBuffer();const Jn=this._innerSubscribe(Xn),{_infiniteTimeWindow:fn,_buffer:gr}=this,lr=gr.slice();for(let Ft=0;Ft<lr.length&&!Xn.closed;Ft+=fn?1:2)Xn.next(lr[Ft]);return this._checkFinalizedStatuses(Xn),Jn}_trimBuffer(){const{_bufferSize:Xn,_timestampProvider:Jn,_buffer:fn,_infiniteTimeWindow:gr}=this,lr=(gr?1:2)*Xn;if(Xn<1/0&&lr<fn.length&&fn.splice(0,fn.length-lr),!gr){const Ft=Jn.now();let Ot=0;for(let st=1;st<fn.length&&fn[st]<=Ft;st+=2)Ot=st;Ot&&fn.splice(0,Ot+1)}}}var ft=H(3099);function Pe(wn,Xn,Jn){let fn,gr=!1;return wn&&"object"==typeof wn?({bufferSize:fn=1/0,windowTime:Xn=1/0,refCount:gr=!1,scheduler:Jn}=wn):fn=null!=wn?wn:1/0,(0,ft.B)({connector:()=>new Qe(fn,Xn,Jn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:gr})}var Me=H(3900),Et=H(576);function pn(wn,Xn){return(0,Et.m)(Xn)?(0,Me.w)(()=>wn,Xn):(0,Me.w)(()=>wn)}var vt=H(5363),nn=H(4004),bn=H(590),Pt=H(9468),Jt=H(9300),Ln=H(2122),un=H(2011),xe=H(9808),Ne=H(6217),ot=H(9260);const Ut=new g.OlP("angularfire2.auth.use-emulator"),Fe=new g.OlP("angularfire2.auth.settings"),Lt=new g.OlP("angularfire2.auth.tenant-id"),Oe=new g.OlP("angularfire2.auth.langugage-code"),Tt=new g.OlP("angularfire2.auth.use-device-language"),et=new g.OlP("angularfire.auth.persistence"),Nt=(wn,Xn,Jn,fn,gr,lr,Ft,Ot)=>(0,un.cc)(`${wn.name}.auth`,"AngularFireAuth",wn.name,()=>{const st=Xn.runOutsideAngular(()=>wn.auth());if(Jn&&st.useEmulator(...Jn),fn&&(st.tenantId=fn),st.languageCode=gr,lr&&st.useDeviceLanguage(),Ft)for(const[It,ut]of Object.entries(Ft))st.settings[It]=ut;return Ot&&st.setPersistence(Ot),st},[Jn,fn,gr,lr,Ft,Ot]);let At=(()=>{class wn{constructor(Jn,fn,gr,lr,Ft,Ot,st,It,ut,Wt,xt,Zt){const Un=new Z.x,Yn=(0,ge.of)(void 0).pipe((0,vt.Q)(Ft.outsideAngular),(0,Me.w)(()=>lr.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,9169)))),(0,nn.U)(()=>(0,un.on)(Jn,lr,fn)),(0,nn.U)(tr=>Nt(tr,lr,Ot,It,ut,Wt,st,xt)),Pe({bufferSize:1,refCount:!1}));if((0,xe.PM)(gr))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ge.of)(null);else{Yn.pipe((0,bn.P)()).subscribe();const Zr=Yn.pipe((0,Me.w)(Hr=>Hr.getRedirectResult().then(Tr=>Tr,()=>null)),Ln.iC,Pe({bufferSize:1,refCount:!1})),si=Yn.pipe((0,Me.w)(Hr=>new le.y(Tr=>({unsubscribe:lr.runOutsideAngular(()=>Hr.onAuthStateChanged(wr=>Tr.next(wr),wr=>Tr.error(wr),()=>Tr.complete()))})))),qn=Yn.pipe((0,Me.w)(Hr=>new le.y(Tr=>({unsubscribe:lr.runOutsideAngular(()=>Hr.onIdTokenChanged(wr=>Tr.next(wr),wr=>Tr.error(wr),()=>Tr.complete()))}))));this.authState=Zr.pipe(pn(si),(0,Pt.R)(Ft.outsideAngular),(0,vt.Q)(Ft.insideAngular)),this.user=Zr.pipe(pn(qn),(0,Pt.R)(Ft.outsideAngular),(0,vt.Q)(Ft.insideAngular)),this.idToken=this.user.pipe((0,Me.w)(Hr=>Hr?(0,Ye.D)(Hr.getIdToken()):(0,ge.of)(null))),this.idTokenResult=this.user.pipe((0,Me.w)(Hr=>Hr?(0,Ye.D)(Hr.getIdTokenResult()):(0,ge.of)(null))),this.credential=(0,Xe.T)(Zr,Un,this.authState.pipe((0,Jt.h)(Hr=>!Hr))).pipe((0,nn.U)(Hr=>(null==Hr?void 0:Hr.user)?Hr:null),(0,Pt.R)(Ft.outsideAngular),(0,vt.Q)(Ft.insideAngular))}return(0,un.pX)(this,Yn,lr,{spy:{apply:(tr,Zr,si)=>{(tr.startsWith("signIn")||tr.startsWith("createUser"))&&si.then(qn=>Un.next(qn))}}})}}return wn.\u0275fac=function(Jn){return new(Jn||wn)(g.LFG(un.Dh),g.LFG(un.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ln.HU),g.LFG(Ut,8),g.LFG(Fe,8),g.LFG(Lt,8),g.LFG(Oe,8),g.LFG(Tt,8),g.LFG(et,8),g.LFG(Ne.nm,8))},wn.\u0275prov=g.Yz7({token:wn,factory:wn.\u0275fac,providedIn:"any"}),wn})(),on=(()=>{class wn{constructor(){ot.Z.registerVersion("angularfire",Ln.q4.full,"auth-compat")}}return wn.\u0275fac=function(Jn){return new(Jn||wn)},wn.\u0275mod=g.oAB({type:wn}),wn.\u0275inj=g.cJS({providers:[At]}),wn})()},2095:(jn,Dt,H)=>{H.d(Dt,{ST:()=>r_,yb:()=>i_});var g=H(5e3),Z=H(4986),ge=H(8306),le=H(8996),Ye=H(9646),Xe=H(2122),gt=H(4482),Qe=H(5403);function ft(){return(0,gt.e)((i,e)=>{let t,s=!1;i.subscribe((0,Qe.x)(e,u=>{const m=t;t=u,s&&e.next([m,u]),s=!0}))})}var Pe=H(4671);function Et(i,e){return i===e}var Oe,pn=H(8675),vt=H(4004),nn=H(5026),bn=H(9300),Pt=H(2011),Jt=H(9808),un=(H(9169),H(3942)),xe=H(5861),Ne=H(9681),ot=H(4859),Kt=H(1877),Ut=H(2090),Fe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Lt={},Tt=Tt||{},et=Fe||self;function Nt(){}function At(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function on(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Xn="closure_uid_"+(1e9*Math.random()>>>0),Jn=0;function fn(i,e,t){return i.call.apply(i.bind,arguments)}function gr(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function lr(i,e,t){return(lr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fn:gr).apply(null,arguments)}function Ft(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function Ot(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,u,m){for(var C=Array(arguments.length-2),R=2;R<arguments.length;R++)C[R-2]=arguments[R];return e.prototype[u].apply(s,C)}}function st(){this.s=this.s,this.o=this.o}st.prototype.s=!1,st.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function wn(i){Object.prototype.hasOwnProperty.call(i,Xn)&&i[Xn]||(i[Xn]=++Jn)}(this)},st.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ut=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Wt(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function xt(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(At(s)){const u=i.length||0,m=s.length||0;i.length=u+m;for(let C=0;C<m;C++)i[u+C]=s[C]}else i.push(s)}}function Zt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var Un=function(){if(!et.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{et.addEventListener("test",Nt,e),et.removeEventListener("test",Nt,e)}catch(t){}return i}();function Yn(i){return/^[\s\xa0]*$/.test(i)}var tr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Zr(i,e){return i<e?-1:i>e?1:0}function si(){var i=et.navigator;return i&&(i=i.userAgent)?i:""}function qn(i){return-1!=si().indexOf(i)}function Hr(i){return Hr[" "](i),i}Hr[" "]=Nt;var Gt,i,wr=qn("Opera"),rs=qn("Trident")||qn("MSIE"),Ji=qn("Edge"),an=Ji||rs,it=qn("Gecko")&&!(-1!=si().toLowerCase().indexOf("webkit")&&!qn("Edge"))&&!(qn("Trident")||qn("MSIE"))&&!qn("Edge"),ct=-1!=si().toLowerCase().indexOf("webkit")&&!qn("Edge");function Bt(){var i=et.document;return i?i.documentMode:void 0}e:{var yn="",Bn=(i=si(),it?/rv:([^\);]+)(\)|;)/.exec(i):Ji?/Edge\/([\d\.]+)/.exec(i):rs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ct?/WebKit\/(\S+)/.exec(i):wr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Bn&&(yn=Bn?Bn[1]:""),rs){var qr=Bt();if(null!=qr&&qr>parseFloat(yn)){Gt=String(qr);break e}}Gt=yn}var Or={};var ui=et.document&&rs&&(Bt()||parseInt(Gt,10))||void 0;function Fn(i,e){if(Zt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(it){e:{try{Hr(e.nodeName);var u=!0;break e}catch(m){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Ei[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Fn.X.h.call(this)}}Ot(Fn,Zt);var Ei={2:"touch",3:"pen",4:"mouse"};Fn.prototype.h=function(){Fn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Vr="closure_listenable_"+(1e6*Math.random()|0),ji=0;function Pn(i,e,t,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=u,this.key=++ji,this.ba=this.ea=!1}function jt(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Wn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function Ar(i){const e={};for(const t in i)e[t]=i[t];return e}const Pr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nr(i,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)i[t]=s[t];for(let m=0;m<Pr.length;m++)t=Pr[m],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function tt(i){this.src=i,this.g={},this.h=0}function $e(i,e){var t=e.type;if(t in i.g){var m,s=i.g[t],u=ut(s,e);(m=0<=u)&&Array.prototype.splice.call(s,u,1),m&&(jt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function ht(i,e,t,s){for(var u=0;u<i.length;++u){var m=i[u];if(!m.ba&&m.listener==e&&m.capture==!!t&&m.ha==s)return u}return-1}tt.prototype.add=function(i,e,t,s,u){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var C=ht(i,e,s,u);return-1<C?(e=i[C],t||(e.ea=!1)):((e=new Pn(e,this.src,m,!!s,u)).ea=t,i.push(e)),e};var rn="closure_lm_"+(1e6*Math.random()|0),kt={};function Ge(i,e,t,s,u){if(s&&s.once)return pt(i,e,t,s,u);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Ge(i,e[m],t,s,u);return null}return t=Ls(t),i&&i[Vr]?i.N(e,t,on(s)?!!s.capture:!!s,u):Re(i,e,t,!1,s,u)}function Re(i,e,t,s,u,m){if(!e)throw Error("Invalid event type");var C=on(u)?!!u.capture:!!u,R=zi(i);if(R||(i[rn]=R=new tt(i)),(t=R.add(e,t,s,C,m)).proxy)return t;if(s=function De(){const e=Kr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Un||(u=C),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(Hn(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function pt(i,e,t,s,u){if(Array.isArray(e)){for(var m=0;m<e.length;m++)pt(i,e[m],t,s,u);return null}return t=Ls(t),i&&i[Vr]?i.O(e,t,on(s)?!!s.capture:!!s,u):Re(i,e,t,!0,s,u)}function Yt(i,e,t,s,u){if(Array.isArray(e))for(var m=0;m<e.length;m++)Yt(i,e[m],t,s,u);else s=on(s)?!!s.capture:!!s,t=Ls(t),i&&i[Vr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=ht(m=i.g[e],t,s,u))&&(jt(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=zi(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ht(e,t,s,u)),(t=-1<i?e[i]:null)&&ur(t))}function ur(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Vr])$e(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Hn(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=zi(e))?($e(t,i),0==t.h&&(t.src=null,e[rn]=null)):jt(i)}}}function Hn(i){return i in kt?kt[i]:kt[i]="on"+i}function Kr(i,e){if(i.ba)i=!0;else{e=new Fn(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&ur(i),i=t.call(s,e)}return i}function zi(i){return(i=i[rn])instanceof tt?i:null}var ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ls(i){return"function"==typeof i?i:(i[ns]||(i[ns]=function(e){return i.handleEvent(e)}),i[ns])}function Ci(){st.call(this),this.i=new tt(this),this.P=this,this.I=null}function hi(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new Zt(e,i);else if(e instanceof Zt)e.target=e.target||i;else{var u=e;Nr(e=new Zt(s,i),u)}if(u=!0,t)for(var m=t.length-1;0<=m;m--){var C=e.g=t[m];u=es(C,s,!0,e)&&u}if(u=es(C=e.g=i,s,!0,e)&&u,u=es(C,s,!1,e)&&u,t)for(m=0;m<t.length;m++)u=es(C=e.g=t[m],s,!1,e)&&u}function es(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,m=0;m<e.length;++m){var C=e[m];if(C&&!C.ba&&C.capture==t){var R=C.listener,X=C.ha||C.src;C.ea&&$e(i.i,C),u=!1!==R.call(X,s)&&u}}return u&&!s.defaultPrevented}Ot(Ci,st),Ci.prototype[Vr]=!0,Ci.prototype.removeEventListener=function(i,e,t,s){Yt(this,i,e,t,s)},Ci.prototype.M=function(){if(Ci.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)jt(t[s]);delete i.g[e],i.h--}}this.I=null},Ci.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Ci.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Ri=et.JSON.stringify;function _n(){var i=qi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ls,oi=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new bi,i=>i.reset());class bi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _s(i){et.setTimeout(()=>{throw i},0)}function Wi(i,e){ls||function Oi(){var i=et.Promise.resolve(void 0);ls=function(){i.then(Ur)}}(),Vi||(ls(),Vi=!0),qi.add(i,e)}var Vi=!1,qi=new class ir{constructor(){this.h=this.g=null}add(e,t){const s=oi.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Ur(){for(var i;i=_n();){try{i.h.call(i.g)}catch(t){_s(t)}var e=oi;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Vi=!1}function Is(i,e){Ci.call(this),this.h=i||1,this.g=e||et,this.j=lr(this.lb,this),this.l=Date.now()}function Ss(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Vs(i,e,t){if("function"==typeof i)t&&(i=lr(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=lr(i.handleEvent,i)}return 2147483647<Number(e)?-1:et.setTimeout(i,e||0)}function Cr(i){i.g=Vs(()=>{i.g=null,i.i&&(i.i=!1,Cr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ot(Is,Ci),(Oe=Is.prototype).ca=!1,Oe.R=null,Oe.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),hi(this,"tick"),this.ca&&(Ss(this),this.start()))}},Oe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oe.M=function(){Is.X.M.call(this),Ss(this),delete this.g};class mr extends st{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cr(this)}M(){super.M(),this.g&&(et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(i){st.call(this),this.h=i,this.g={}}Ot(yr,st);var Qi=[];function zr(i,e,t,s){Array.isArray(t)||(t&&(Qi[0]=t.toString()),t=Qi);for(var u=0;u<t.length;u++){var m=Ge(e,t[u],s||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function Si(i){Wn(i.g,function(e,t){this.g.hasOwnProperty(t)&&ur(e)},i),i.g={}}function zs(){this.g=!0}function Yr(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function fs(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var m=u[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var C=1;C<u.length;C++)u[C]=""}}}return Ri(t)}catch(R){return e}}(i,t)+(s?" "+s:"")})}yr.prototype.M=function(){yr.X.M.call(this),Si(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zs.prototype.Aa=function(){this.g=!1},zs.prototype.info=function(){};var Ds={},ps=null;function Di(){return ps=ps||new Ci}function ko(i){Zt.call(this,Ds.Pa,i)}function to(i){const e=Di();hi(e,new ko(e))}function vs(i,e){Zt.call(this,Ds.STAT_EVENT,i),this.stat=e}function Xi(i){const e=Di();hi(e,new vs(e,i))}function Ct(i,e){Zt.call(this,Ds.Qa,i),this.size=e}function dt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return et.setTimeout(function(){i()},e)}Ds.Pa="serverreachability",Ot(ko,Zt),Ds.STAT_EVENT="statevent",Ot(vs,Zt),Ds.Qa="timingevent",Ot(Ct,Zt);var St={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},gn={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function $n(){}function Qr(){}$n.prototype.h=null;var ei,Zi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function pi(){Zt.call(this,"d")}function ds(){Zt.call(this,"c")}function as(){}function Es(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new yr(this),this.O=gs,this.T=new Is(i=an?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ko}function Ko(){this.i=null,this.g="",this.h=!1}Ot(pi,Zt),Ot(ds,Zt),Ot(as,$n),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},ei=new as;var gs=45e3,co={},Cs={};function Io(i,e,t){i.K=1,i.v=_i(ao(e)),i.s=t,i.P=!0,Ni(i,null)}function Ni(i,e){i.F=Date.now(),Bs(i),i.A=ao(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),Yi(t.i,"t",s),i.C=0,t=i.l.H,i.h=new Ko,i.g=Rt(i.l,t?e:null,!i.s),0<i.N&&(i.L=new mr(lr(i.La,i,i.g),i.N)),zr(i.S,i.g,"readystatechange",i.ib),e=i.H?Ar(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),to(),function Ki(i,e,t,s,u,m){i.info(function(){if(i.g)if(m)for(var C="",R=m.split("&"),X=0;X<R.length;X++){var oe=R[X].split("=");if(1<oe.length){var Se=oe[0];oe=oe[1];var at=Se.split("_");C=2<=at.length&&"type"==at[1]?C+(Se+"=")+oe+"&":C+(Se+"=redacted&")}}else C=null;else C=m;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.U,i.s)}function no(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Ms(i,e,t){let u,s=!0;for(;!i.I&&i.C<t.length;){if(u=Us(i,t),u==Cs){4==e&&(i.o=4,Xi(14),s=!1),Yr(i.j,i.m,null,"[Incomplete Response]");break}if(u==co){i.o=4,Xi(15),Yr(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}Yr(i.j,i.m,u,null),$s(i,u)}no(i)&&u!=Cs&&u!=co&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Xi(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),mn(e),e.K=!0,Xi(11))):(Yr(i.j,i.m,t,"[Invalid Chunked Response]"),bs(i),Ws(i))}function Us(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Cs:(t=Number(e.substring(t,s)),isNaN(t)?co:(s+=1)+t>e.length?Cs:(e=e.substr(s,t),i.C=s+t,e))}function Bs(i){i.V=Date.now()+i.O,Ro(i,i.O)}function Ro(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=dt(lr(i.gb,i),e)}function qs(i){i.B&&(et.clearTimeout(i.B),i.B=null)}function Ws(i){0==i.l.G||i.I||xn(i.l,i)}function bs(i){qs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ss(i.T),Si(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function $s(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||io(t.h,i)))if(!i.J&&io(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch(oe){s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0])e:if(t.u)t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=dt(lr(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;hn(t),ue(t)}yt(t),Xi(18)}if(1>=Po(t.h)&&t.ja){try{t.ja()}catch(oe){}t.ja=void 0}}else cr(t,11)}else if((i.J||t.g==i)&&hn(t),!Yn(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let oe=u[e];if(t.T=oe[0],oe=oe[1],2==t.G)if("c"==oe[0]){t.I=oe[1],t.ka=oe[2];const Se=oe[3];null!=Se&&(t.ma=Se,t.j.info("VER="+t.ma));const at=oe[4];null!=at&&(t.Ca=at,t.j.info("SVER="+t.Ca));const $t=oe[5];null!=$t&&"number"==typeof $t&&0<$t&&(t.J=s=1.5*$t,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const On=i.g;if(On){const zn=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zn){var m=s.h;m.g||-1==zn.indexOf("spdy")&&-1==zn.indexOf("quic")&&-1==zn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(vo(m,m.h),m.h=null))}if(s.D){const Dr=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;Dr&&(s.za=Dr,ki(s.F,s.D,Dr))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var C=i;if((s=t).sa=Qt(s,s.H?s.ka:null,s.V),C.J){Q(s.h,C);var R=C,X=s.J;X&&R.setTimeout(X),R.B&&(qs(R),Bs(R)),s.g=C}else Je(s);0<t.i.length&&He(t)}else"stop"!=oe[0]&&"close"!=oe[0]||cr(t,7);else 3==t.G&&("stop"==oe[0]||"close"==oe[0]?"stop"==oe[0]?cr(t,7):ce(t):"noop"!=oe[0]&&t.l&&t.l.wa(oe),t.A=0)}to()}catch(oe){}}function ho(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(At(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ms(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(At(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Zo(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(At(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),u=s.length,m=0;m<u;m++)e.call(void 0,s[m],t&&t[m],i)}(Oe=Es.prototype).setTimeout=function(i){this.O=i},Oe.ib=function(i){i=i.target;const e=this.L;e&&3==z(i)?e.l():this.La(i)},Oe.La=function(i){try{if(i==this.g)e:{const Se=z(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Se)&&(3!=Se||an||this.g&&(this.h.h||this.g.fa()||J(this.g)))){this.I||4!=Se||7==e||to(),qs(this);var t=this.g.aa();this.Y=t;t:if(no(this)){var s=J(this.g);i="";var u=s.length,m=4==z(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){bs(this),Ws(this);var C="";break t}this.h.i=new et.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:m&&e==u-1});s.splice(0,u),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.fa();if(this.i=200==t,function cs(i,e,t,s,u,m,C){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+m+" "+C})}(this.j,this.u,this.A,this.m,this.U,Se,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var R,X=this.g;if((R=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yn(R)){var oe=R;break t}}oe=null}if(!(t=oe)){this.i=!1,this.o=3,Xi(12),bs(this),Ws(this);break e}Yr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$s(this,t)}this.P?(Ms(this,Se,C),an&&this.i&&3==Se&&(zr(this.S,this.T,"tick",this.hb),this.T.start())):(Yr(this.j,this.m,C,null),$s(this,C)),4==Se&&bs(this),this.i&&!this.I&&(4==Se?xn(this.l,this):(this.i=!1,Bs(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,Xi(12)):(this.o=0,Xi(13)),bs(this),Ws(this)}}}catch(Se){}},Oe.hb=function(){if(this.g){var i=z(this.g),e=this.g.fa();this.C<e.length&&(qs(this),Ms(this,i,e),this.i&&4!=i&&Bs(this))}},Oe.cancel=function(){this.I=!0,bs(this)},Oe.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Wr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(to(),Xi(17)),bs(this),this.o=2,Ws(this)):Ro(this,this.V-i)};var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ks(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Ks){this.h=void 0!==e?e:i.h,js(this,i.j),this.s=i.s,this.g=i.g,Ps(this,i.m),this.l=i.l,e=i.i;var t=new Br;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Os(this,t),this.o=i.o}else i&&(t=String(i).match(Rs))?(this.h=!!e,js(this,t[1]||"",!0),this.s=U(t[2]||""),this.g=U(t[3]||"",!0),Ps(this,t[4]),this.l=U(t[5]||"",!0),Os(this,t[6]||"",!0),this.o=U(t[7]||"")):(this.h=!!e,this.i=new Br(null,this.h))}function ao(i){return new Ks(i)}function js(i,e,t){i.j=t?U(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ps(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Os(i,e,t){e instanceof Br?(i.i=e,function Ti(i,e){e&&!i.j&&(Xr(i),i.i=null,i.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(ni(this,s),Yi(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=pe(e,Cn)),i.i=new Br(e,i.h))}function ki(i,e,t){i.i.set(e,t)}function _i(i){return ki(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function U(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function pe(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,q),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function q(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ks.prototype.toString=function(){var i=[],e=this.j;e&&i.push(pe(e,ve,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(pe(e,ve,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(pe(t,"/"==t.charAt(0)?en:ze,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",pe(t,or)),i.join("")};var ve=/[#\/\?@]/g,ze=/[#\?:]/g,en=/[#\?]/g,Cn=/[#\?@]/g,or=/#/g;function Br(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Xr(i){i.g||(i.g=new Map,i.h=0,i.i&&function Ai(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),u=null;if(0<=s){var m=i[t].substring(0,s);u=i[t].substring(s+1)}else m=i[t];e(m,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ni(i,e){Xr(i),e=vi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function $r(i,e){return Xr(i),e=vi(i,e),i.g.has(e)}function Yi(i,e,t){ni(i,e),0<t.length&&(i.i=null,i.g.set(vi(i,e),Wt(t)),i.h+=t.length)}function vi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ts(i){this.l=i||kr,i=et.PerformanceNavigationTiming?0<(i=et.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(et.g&&et.g.Ga&&et.g.Ga()&&et.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Oe=Br.prototype).add=function(i,e){Xr(this),this.i=null,i=vi(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Oe.forEach=function(i,e){Xr(this),this.g.forEach(function(t,s){t.forEach(function(u){i.call(e,u,s,this)},this)},this)},Oe.oa=function(){Xr(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const u=i[s];for(let m=0;m<u.length;m++)t.push(e[s])}return t},Oe.W=function(i){Xr(this);let e=[];if("string"==typeof i)$r(this,i)&&(e=e.concat(this.g.get(vi(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Oe.set=function(i,e){return Xr(this),this.i=null,$r(this,i=vi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Oe.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const m=encodeURIComponent(String(s)),C=this.W(s);for(s=0;s<C.length;s++){var u=m;""!==C[s]&&(u+="="+encodeURIComponent(String(C[s]))),i.push(u)}}return this.i=i.join("&")};var kr=10;function Zs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Po(i){return i.h?1:i.g?i.g.size:0}function io(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function vo(i,e){i.g?i.g.add(e):i.h=e}function Q(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function G(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Wt(i.i)}function L(){}function he(){this.g=new L}function We(i,e,t){const s=t||"";try{ho(i,function(u,m){let C=u;on(u)&&(C=Ri(u)),e.push(s+m+"="+encodeURIComponent(C))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function te(i,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch(m){}}function K(i){this.l=i.ac||null,this.j=i.jb||!1}function be(i,e){Ci.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Ue,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ts.prototype.cancel=function(){if(this.i=G(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},L.prototype.stringify=function(i){return et.JSON.stringify(i,void 0)},L.prototype.parse=function(i){return et.JSON.parse(i,void 0)},Ot(K,$n),K.prototype.g=function(){return new be(this.l,this.j)},K.prototype.i=function(i){return function(){return i}}({}),Ot(be,Ci);var Ue=0;function rt(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Ht(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Sn(i)}function Sn(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Oe=be.prototype).open=function(i,e){if(this.readyState!=Ue)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Sn(this)},Oe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||et).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ht(this)),this.readyState=Ue},Oe.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Sn(this)),this.g&&(this.readyState=3,Sn(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==et.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rt(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Oe.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ht(this):Sn(this),3==this.readyState&&rt(this)}},Oe.Va=function(i){this.g&&(this.response=this.responseText=i,Ht(this))},Oe.Ua=function(i){this.g&&(this.response=i,Ht(this))},Oe.ga=function(){this.g&&Ht(this)},Oe.setRequestHeader=function(i,e){this.v.append(i,e)},Oe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Oe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(be.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var vr=et.JSON.parse;function Kn(i){Ci.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ti,this.K=this.L=!1}Ot(Kn,Ci);var ti="",gi=/^https?$/i,fi=["POST","PUT"];function is(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,l(i),S(i)}function l(i){i.D||(i.D=!0,hi(i,"complete"),hi(i,"error"))}function x(i){if(i.h&&void 0!==Tt&&(!i.C[1]||4!=z(i)||2!=i.aa()))if(i.v&&4==z(i))Vs(i.Ha,0,i);else if(hi(i,"readystatechange"),4==z(i)){i.h=!1;try{const R=i.aa();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===R){var u=String(i.H).match(Rs)[1]||null;if(!u&&et.self&&et.self.location){var m=et.self.location.protocol;u=m.substr(0,m.length-1)}s=!gi.test(u?u.toLowerCase():"")}t=s}if(t)hi(i,"complete"),hi(i,"success");else{i.m=6;try{var C=2<z(i)?i.g.statusText:""}catch(X){C=""}i.j=C+" ["+i.aa()+"]",l(i)}}finally{S(i)}}}function S(i,e){if(i.g){P(i);const t=i.g,s=i.C[0]?Nt:null;i.g=null,i.C=null,e||hi(i,"ready");try{t.onreadystatechange=s}catch(u){}}}function P(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(et.clearTimeout(i.A),i.A=null)}function z(i){return i.g?i.g.readyState:0}function J(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ti:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ye(i){let e="";return Wn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Te(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ye(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):ki(i,e,t))}function ae(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function _e(i){this.Ca=0,this.i=[],this.j=new zs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ae("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ae("baseRetryDelayMs",5e3,i),this.bb=ae("retryDelaySeedMs",1e4,i),this.$a=ae("forwardChannelMaxRetries",2,i),this.ta=ae("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ts(i&&i.concurrentRequestLimit),this.Fa=new he,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ce(i){if(we(i),3==i.G){var e=i.U++,t=ao(i.F);ki(t,"SID",i.I),ki(t,"RID",e),ki(t,"TYPE","terminate"),Le(i,t),(e=new Es(i,i.j,e,void 0)).K=2,e.v=_i(ao(t)),t=!1,et.navigator&&et.navigator.sendBeacon&&(t=et.navigator.sendBeacon(e.v.toString(),"")),!t&&et.Image&&((new Image).src=e.v,t=!0),t||(e.g=Rt(e.l,null),e.g.da(e.v)),e.F=Date.now(),Bs(e)}Nn(i)}function ue(i){i.g&&(mn(i),i.g.cancel(),i.g=null)}function we(i){ue(i),i.u&&(et.clearTimeout(i.u),i.u=null),hn(i),i.h.cancel(),i.m&&("number"==typeof i.m&&et.clearTimeout(i.m),i.m=null)}function He(i){Zs(i.h)||i.m||(i.m=!0,Wi(i.Ja,i),i.C=0)}function Ae(i,e){var t;t=e?e.m:i.U++;const s=ao(i.F);ki(s,"SID",i.I),ki(s,"RID",t),ki(s,"AID",i.T),Le(i,s),i.o&&i.s&&Te(s,i.o,i.s),t=new Es(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=_t(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),vo(i.h,t),Io(t,s,e)}function Le(i,e){i.ia&&Wn(i.ia,function(t,s){ki(e,s,t)}),i.l&&ho({},function(t,s){ki(e,s,t)})}function _t(i,e,t){t=Math.min(i.i.length,t);var s=i.l?lr(i.l.Ra,i.l,i):null;e:{var u=i.i;let m=-1;for(;;){const C=["count="+t];-1==m?0<t?(m=u[0].h,C.push("ofs="+m)):m=0:C.push("ofs="+m);let R=!0;for(let X=0;X<t;X++){let oe=u[X].h;const Se=u[X].g;if(oe-=m,0>oe)m=Math.max(0,u[X].h-100),R=!1;else try{We(Se,C,"req"+oe+"_")}catch(at){s&&s(Se)}}if(R){s=C.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function Je(i){i.g||i.u||(i.Z=1,Wi(i.Ia,i),i.A=0)}function yt(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=dt(lr(i.Ia,i),Zn(i,i.A)),i.A++,0))}function mn(i){null!=i.B&&(et.clearTimeout(i.B),i.B=null)}function Tn(i){i.g=new Es(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=ao(i.sa);ki(e,"RID","rpc"),ki(e,"SID",i.I),ki(e,"CI",i.L?"0":"1"),ki(e,"AID",i.T),ki(e,"TYPE","xmlhttp"),Le(i,e),i.o&&i.s&&Te(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=_i(ao(e)),t.s=null,t.P=!0,Ni(t,i)}function hn(i){null!=i.v&&(et.clearTimeout(i.v),i.v=null)}function xn(i,e){var t=null;if(i.g==e){hn(i),mn(i),i.g=null;var s=2}else{if(!io(i.h,e))return;t=e.D,Q(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;hi(s=Di(),new Ct(s,t)),He(i)}else Je(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==s&&function nt(i,e){return!(Po(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=dt(lr(i.Ja,i,e),Zn(i,i.C)),i.C++,0)))}(i,e)||2==s&&yt(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:cr(i,5);break;case 4:cr(i,10);break;case 3:cr(i,6);break;default:cr(i,2)}}function Zn(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function cr(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=lr(i.kb,i);t||(t=new Ks("//www.google.com/images/cleardot.gif"),et.location&&"http"==et.location.protocol||js(t,"https"),_i(t)),function Mn(i,e){const t=new zs;if(et.Image){const s=new Image;s.onload=Ft(te,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Ft(te,t,s,"TestLoadImage: error",!1,e),s.onabort=Ft(te,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Ft(te,t,s,"TestLoadImage: timeout",!1,e),et.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Xi(2);i.G=0,i.l&&i.l.va(e),Nn(i),we(i)}function Nn(i){if(i.G=0,i.la=[],i.l){const e=G(i.h);(0!=e.length||0!=i.i.length)&&(xt(i.la,e),xt(i.la,i.i),i.h.i.length=0,Wt(i.i),i.i.length=0),i.l.ua()}}function Qt(i,e,t){var s=t instanceof Ks?ao(t):new Ks(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Ps(s,s.m);else{var u=et.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var m=new Ks(null,void 0);s&&js(m,s),e&&(m.g=e),u&&Ps(m,u),t&&(m.l=t),s=m}return e=i.za,(t=i.D)&&e&&ki(s,t,e),ki(s,"VER",i.ma),Le(i,s),s}function Rt(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&i.Da&&!i.ra?new K({jb:!0}):i.ra)).Ka(i.H),e}function ln(){}function B(){if(rs&&!(10<=Number(ui)))throw Error("Environmental error: no available transport.")}function b(i,e){Ci.call(this),this.g=new _e(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Yn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ee(this)}function E(i){pi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function k(){ds.call(this),this.status=1}function ee(i){this.g=i}(Oe=Kn.prototype).Ka=function(i){this.L=i},Oe.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ei.g(),this.C=function Ir(i){return i.h||(i.h=i.i())}(this.u?this.u:ei),this.g.onreadystatechange=lr(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void is(this,m)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)t.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const m of s.keys())t.set(m,s.get(m))}s=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),u=et.FormData&&i instanceof et.FormData,!(0<=ut(fi,e))||s||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,C]of t)this.g.setRequestHeader(m,C);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{P(this),0<this.B&&((this.K=function Ui(i){return rs&&function dr(){return function Tr(i){var e=Or;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=tr(String(Gt)).split("."),t=tr("9").split("."),s=Math.max(e.length,t.length);for(let C=0;0==i&&C<s;C++){var u=e[C]||"",m=t[C]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==u[0].length&&0==m[0].length)break;i=Zr(0==u[1].length?0:parseInt(u[1],10),0==m[1].length?0:parseInt(m[1],10))||Zr(0==u[2].length,0==m[2].length)||Zr(u[2],m[2]),u=u[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lr(this.qa,this)):this.A=Vs(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){is(this,m)}},Oe.qa=function(){void 0!==Tt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hi(this,"timeout"),this.abort(8))},Oe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,hi(this,"complete"),hi(this,"abort"),S(this))},Oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),S(this,!0)),Kn.X.M.call(this)},Oe.Ha=function(){this.s||(this.F||this.v||this.l?x(this):this.fb())},Oe.fb=function(){x(this)},Oe.aa=function(){try{return 2<z(this)?this.g.status:-1}catch(i){return-1}},Oe.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Oe.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),vr(e)}},Oe.Ea=function(){return this.m},Oe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oe=_e.prototype).ma=8,Oe.G=1,Oe.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new Es(this,this.j,i,void 0);let m=this.s;if(this.S&&(m?(m=Ar(m),Nr(m,this.S)):m=this.S),null!==this.o||this.N||(u.H=m,m=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_t(this,u,e),ki(t=ao(this.F),"RID",i),ki(t,"CVER",22),this.D&&ki(t,"X-HTTP-Session-Id",this.D),Le(this,t),m&&(this.N?e="headers="+encodeURIComponent(String(ye(m)))+"&"+e:this.o&&Te(t,this.o,m)),vo(this.h,u),this.Ya&&ki(t,"TYPE","init"),this.O?(ki(t,"$req",e),ki(t,"SID","null"),u.Z=!0,Io(u,t,null)):Io(u,t,e),this.G=2}}else 3==this.G&&(i?Ae(this,i):0==this.i.length||Zs(this.h)||Ae(this))},Oe.Ia=function(){if(this.u=null,Tn(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=dt(lr(this.eb,this),i)}},Oe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Xi(10),ue(this),Tn(this))},Oe.cb=function(){null!=this.v&&(this.v=null,ue(this),yt(this),Xi(19))},Oe.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Xi(2)):(this.j.info("Failed to ping google.com"),Xi(1))},(Oe=ln.prototype).xa=function(){},Oe.wa=function(){},Oe.va=function(){},Oe.ua=function(){},Oe.Ra=function(){},B.prototype.g=function(i,e){return new b(i,e)},Ot(b,Ci),b.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Xi(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Qt(i,null,i.V),He(i)},b.prototype.close=function(){ce(this.g)},b.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Ri(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&He(e)},b.prototype.M=function(){this.g.l=null,delete this.j,ce(this.g),delete this.g,b.X.M.call(this)},Ot(E,pi),Ot(k,ds),Ot(ee,ln),ee.prototype.xa=function(){hi(this.g,"a")},ee.prototype.wa=function(i){hi(this.g,new E(i))},ee.prototype.va=function(i){hi(this.g,new k)},ee.prototype.ua=function(){hi(this.g,"b")},B.prototype.createWebChannel=B.prototype.g,b.prototype.send=b.prototype.u,b.prototype.open=b.prototype.m,b.prototype.close=b.prototype.close,St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,gn.COMPLETE="complete",Qr.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",Ci.prototype.listen=Ci.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.Oa,Kn.prototype.getLastErrorCode=Kn.prototype.Ea,Kn.prototype.getStatus=Kn.prototype.aa,Kn.prototype.getResponseJson=Kn.prototype.Sa,Kn.prototype.getResponseText=Kn.prototype.fa,Kn.prototype.send=Kn.prototype.da,Kn.prototype.setWithCredentials=Kn.prototype.Ka;var Ee=Lt.createWebChannelTransport=function(){return new B},ke=Lt.getStatEventTarget=function(){return Di()},qe=Lt.ErrorCode=St,wt=Lt.EventType=gn,sn=Lt.Event=Ds,sr=Lt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Er=Lt.FetchXmlHttpFactory=K,Jr=Lt.WebChannel=Qr,Pi=Lt.XhrIo=Kn;const xr="@firebase/firestore";class pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");let Fi="9.15.0";const xi=new Kt.Yd("@firebase/firestore");function us(){return xi.logLevel}function En(i,...e){if(xi.logLevel<=Kt.in.DEBUG){const t=e.map(Ts);xi.debug(`Firestore (${Fi}): ${i}`,...t)}}function Bi(i,...e){if(xi.logLevel<=Kt.in.ERROR){const t=e.map(Ts);xi.error(`Firestore (${Fi}): ${i}`,...t)}}function $i(i,...e){if(xi.logLevel<=Kt.in.WARN){const t=e.map(Ts);xi.warn(`Firestore (${Fi}): ${i}`,...t)}}function Ts(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function rr(i="Unexpected state"){const e=`FIRESTORE (${Fi}) INTERNAL ASSERTION FAILED: `+i;throw Bi(e),new Error(e)}function hr(i,e){i||rr()}function er(i,e){return i}const qt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class In extends Ut.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ys{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Vo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pr.UNAUTHENTICATED))}shutdown(){}}class N{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class D{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const m=oe=>this.i!==u?(u=this.i,t(oe)):Promise.resolve();let C=new Ys;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new Ys,e.enqueueRetryable(()=>m(this.currentUser))};const R=()=>{const oe=C;e.enqueueRetryable((0,xe.Z)(function*(){yield oe.promise,yield m(s.currentUser)}))},X=oe=>{En("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=oe,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(oe=>X(oe)),setTimeout(()=>{if(!this.auth){const oe=this.t.getImmediate({optional:!0});oe?X(oe):(En("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new Ys)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(En("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(hr("string"==typeof s.accessToken),new Vo(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return hr(null===e||"string"==typeof e),new pr(e)}}class I{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(hr(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class W{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u}getToken(){return Promise.resolve(new I(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ne{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class me{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=m=>{null!=m.error&&En("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const C=m.token!==this.A;return this.A=m.token,En("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>s(m))};const u=m=>{En("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>u(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?u(m):En("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(hr("string"==typeof t.token),this.A=t.token,new ne(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ke(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class cn{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=Ke(40);for(let m=0;m<u.length;++m)s.length<20&&u[m]<t&&(s+=e.charAt(u[m]%e.length))}return s}}function Rn(i,e){return i<e?-1:i>e?1:0}function Fr(i,e,t){return i.length===e.length&&i.every((s,u)=>t(s,e[u]))}function _r(i){return i+"\0"}class Mr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new In(qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new In(qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new In(qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new In(qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mr.fromMillis(Date.now())}static fromDate(e){return Mr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Mr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gn(e)}static min(){return new Gn(new Mr(0,0))}static max(){return new Gn(new Mr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _o{constructor(e,t,s){void 0===t?t=0:t>e.length&&rr(),void 0===s?s=e.length-t:s>e.length-t&&rr(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===_o.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _o?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const m=e.get(u),C=t.get(u);if(m<C)return-1;if(m>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ai extends _o{construct(e,t,s){return new ai(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new In(qt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new ai(t)}static emptyPath(){return new ai([])}}const Aa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends _o{construct(e,t,s){return new Ns(e,t,s)}static isValidIdentifier(e){return Aa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ns(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const m=()=>{if(0===s.length)throw new In(qt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let C=!1;for(;u<e.length;){const R=e[u];if("\\"===R){if(u+1===e.length)throw new In(qt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[u+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new In(qt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=X,u+=2}else"`"===R?(C=!C,u++):"."!==R||C?(s+=R,u++):(m(),u++)}if(m(),C)throw new In(qt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ns(t)}static emptyPath(){return new Ns([])}}class Qn{constructor(e){this.path=e}static fromPath(e){return new Qn(ai.fromString(e))}static fromName(e){return new Qn(ai.fromString(e).popFirst(5))}static empty(){return new Qn(ai.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ai.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ai.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qn(new ai(e.slice()))}}class Uo{constructor(e,t,s,u){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=u}}function xa(i){return i.fields.find(e=>2===e.kind)}function Eo(i){return i.fields.filter(e=>2!==e.kind)}Uo.UNKNOWN_ID=-1;class Fl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ll{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ll(0,na.min())}}function mu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=Gn.fromTimestamp(1e9===s?new Mr(t+1,0):new Mr(t,s));return new na(u,Qn.empty(),e)}function lo(i){return new na(i.readTime,i.key,-1)}class na{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new na(Gn.min(),Qn.empty(),-1)}static max(){return new na(Gn.max(),Qn.empty(),-1)}}function _a(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qn.comparator(i.documentKey,e.documentKey),0!==t?t:Rn(i.largestBatchId,e.largestBatchId))}const wc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ic{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ra(i){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,xe.Z)(function*(i){if(i.code!==qt.FAILED_PRECONDITION||i.message!==wc)throw i;En("LocalStore","Unexpectedly lost primary lease")}),Xl.apply(this,arguments)}class Xt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xt((s,u)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(s,u)},this.catchCallback=m=>{this.wrapFailure(t,m).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Xt?t:Xt.resolve(t)}catch(t){return Xt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Xt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Xt.reject(t)}static resolve(e){return new Xt((t,s)=>{t(e)})}static reject(e){return new Xt((t,s)=>{s(e)})}static waitFor(e){return new Xt((t,s)=>{let u=0,m=0,C=!1;e.forEach(R=>{++u,R.next(()=>{++m,C&&m===u&&t()},X=>s(X))}),C=!0,m===u&&t()})}static or(e){let t=Xt.resolve(!1);for(const s of e)t=t.next(u=>u?Xt.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,m)=>{s.push(t.call(this,u,m))}),this.waitFor(s)}static mapArray(e,t){return new Xt((s,u)=>{const m=e.length,C=new Array(m);let R=0;for(let X=0;X<m;X++){const oe=X;t(e[oe]).next(Se=>{C[oe]=Se,++R,R===m&&s(C)},Se=>u(Se))}})}static doWhile(e,t){return new Xt((s,u)=>{const m=()=>{!0===e()?t().next(()=>{m()},u):s()};m()})}}class Ya{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ys,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ea(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const u=Qo(s.target.error);this.P.reject(new Ea(e,u))}}static open(e,t,s,u){try{return new Ya(t,e.transaction(u,s))}catch(m){throw new Ea(t,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(En("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Gu(t)}}class va{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===va.D((0,Ut.z$)())&&Bi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return En("SimpleDb","Removing database:",e),sa(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ut.hl)())return!1;if(va.N())return!0;const e=(0,Ut.z$)(),t=va.D(e),s=0<t&&t<10,u=va.k(e),m=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,xe.Z)(function*(){return t.db||(En("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=C=>{s(C.target.result)},m.onblocked=()=>{u(new Ea(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=C=>{const R=C.target.error;u("VersionError"===R.name?new In(qt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new In(qt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Ea(e,R))},m.onupgradeneeded=C=>{En("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.S.$(C.target.result,m.transaction,C.oldVersion,t.version).next(()=>{En("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var m=this;return(0,xe.Z)(function*(){const C="readonly"===t;let R=0;for(;;){++R;try{m.db=yield m.F(e);const X=Ya.open(m.db,e,C?"readonly":"readwrite",s),oe=u(X).next(Se=>(X.V(),Se)).catch(Se=>(X.abort(Se),Xt.reject(Se))).toPromise();return oe.catch(()=>{}),yield X.v,oe}catch(X){const oe=X,Se="FirebaseError"!==oe.name&&R<3;if(En("SimpleDb","Transaction failed with error:",oe.message,"Retrying:",Se),m.close(),!Se)return Promise.reject(oe)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Co{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return sa(this.q.delete())}}class Ea extends In{constructor(e,t){super(qt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ia(i){return"IndexedDbTransactionError"===i.name}class Gu{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(En("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(En("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),sa(s)}add(e){return En("SimpleDb","ADD",this.store.name,e,e),sa(this.store.add(e))}get(e){return sa(this.store.get(e)).next(t=>(void 0===t&&(t=null),En("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return En("SimpleDb","DELETE",this.store.name,e),sa(this.store.delete(e))}count(){return En("SimpleDb","COUNT",this.store.name),sa(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const u=this.cursor(s),m=[];return this.H(u,(C,R)=>{m.push(R)}).next(()=>m)}{const u=this.store.getAll(s.range);return new Xt((m,C)=>{u.onerror=R=>{C(R.target.error)},u.onsuccess=R=>{m(R.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Xt((u,m)=>{s.onerror=C=>{m(C.target.error)},s.onsuccess=C=>{u(C.target.result)}})}Y(e,t){En("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const u=this.cursor(s);return this.H(u,(m,C,R)=>R.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.H(u,t)}tt(e){const t=this.cursor({});return new Xt((s,u)=>{t.onerror=m=>{const C=Qo(m.target.error);u(C)},t.onsuccess=m=>{const C=m.target.result;C?e(C.primaryKey,C.value).next(R=>{R?C.continue():s()}):s()}})}H(e,t){const s=[];return new Xt((u,m)=>{e.onerror=C=>{m(C.target.error)},e.onsuccess=C=>{const R=C.target.result;if(!R)return void u();const X=new Co(R),oe=t(R.primaryKey,R.value,X);if(oe instanceof Xt){const Se=oe.catch(at=>(X.done(),Xt.reject(at)));s.push(Se)}X.isDone?u():null===X.G?R.continue():R.continue(X.G)}}).next(()=>Xt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sa(i){return new Xt((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=Qo(s.target.error);t(u)}})}let So=!1;function Qo(i){const e=va.D((0,Ut.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new In("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return So||(So=!0,setTimeout(()=>{throw s},0)),s}}return i}class Jl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;En("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,xe.Z)(function*(){t.task=null;try{En("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){ia(s)?En("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield ra(s)}yield t.nt(6e4)}))}}class yu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,xe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let u=t,m=!0;return Xt.doWhile(()=>!0===m&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!s.has(C))return En("IndexBackiller",`Processing collection: ${C}`),this.rt(e,C,u).next(R=>{u-=R,s.add(C)});m=!1})).next(()=>t-u)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,s).next(m=>{const C=m.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.ot(u,m)).next(R=>(En("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>C.size)}))}ot(e,t){let s=e;return t.changes.forEach((u,m)=>{const C=lo(m);_a(C,s)>0&&(s=C)}),new na(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let fo=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=u=>this.ut(u),this.ct=u=>s.writeSequenceNumber(u))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class cl{constructor(e,t,s,u,m,C,R,X){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=m,this.forceLongPolling=C,this.autoDetectLongPolling=R,this.useFetchStreams=X}}class Xo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}function Il(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Va(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function _u(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function la(i){return null==i}function po(i){return 0===i&&1/i==-1/0}function Qa(i){return"number"==typeof i&&Number.isInteger(i)&&!po(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class so{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new so(t)}static fromUint8Array(e){const t=function(s){let u="";for(let m=0;m<s.length;++m)u+=String.fromCharCode(s[m]);return u}(e);return new so(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}so.EMPTY_BYTE_STRING=new so("");const Ba=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $a(i){if(hr(!!i),"string"==typeof i){let e=0;const t=Ba.exec(i);if(hr(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Qs(i.seconds),nanos:Qs(i.nanos)}}function Qs(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Xa(i){return"string"==typeof i?so.fromBase64String(i):so.fromUint8Array(i)}function Vl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ja(i){const e=i.mapValue.fields.__previous_value__;return Vl(e)?Ja(e):e}function Ca(i){const e=$a(i.mapValue.fields.__local_write_time__.timestampValue);return new Mr(e.seconds,e.nanos)}const Jo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dl={nullValue:"NULL_VALUE"};function el(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Vl(i)?4:Mt(i)?9007199254740991:10:rr()}function oo(i,e){if(i===e)return!0;const t=el(i);if(t!==el(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ca(i).isEqual(Ca(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const m=$a(s.timestampValue),C=$a(u.timestampValue);return m.seconds===C.seconds&&m.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Xa(i.bytesValue).isEqual(Xa(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,u){return Qs(s.geoPointValue.latitude)===Qs(u.geoPointValue.latitude)&&Qs(s.geoPointValue.longitude)===Qs(u.geoPointValue.longitude)}(i,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return Qs(s.integerValue)===Qs(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const m=Qs(s.doubleValue),C=Qs(u.doubleValue);return m===C?po(m)===po(C):isNaN(m)&&isNaN(C)}return!1}(i,e);case 9:return Fr(i.arrayValue.values||[],e.arrayValue.values||[],oo);case 10:return function(s,u){const m=s.mapValue.fields||{},C=u.mapValue.fields||{};if(Il(m)!==Il(C))return!1;for(const R in m)if(m.hasOwnProperty(R)&&(void 0===C[R]||!oo(m[R],C[R])))return!1;return!0}(i,e);default:return rr()}var u}function ja(i,e){return void 0!==(i.values||[]).find(t=>oo(t,e))}function bo(i,e){if(i===e)return 0;const t=el(i),s=el(e);if(t!==s)return Rn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rn(i.booleanValue,e.booleanValue);case 2:return function(u,m){const C=Qs(u.integerValue||u.doubleValue),R=Qs(m.integerValue||m.doubleValue);return C<R?-1:C>R?1:C===R?0:isNaN(C)?isNaN(R)?0:-1:1}(i,e);case 3:return zu(i.timestampValue,e.timestampValue);case 4:return zu(Ca(i),Ca(e));case 5:return Rn(i.stringValue,e.stringValue);case 6:return function(u,m){const C=Xa(u),R=Xa(m);return C.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(u,m){const C=u.split("/"),R=m.split("/");for(let X=0;X<C.length&&X<R.length;X++){const oe=Rn(C[X],R[X]);if(0!==oe)return oe}return Rn(C.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,m){const C=Rn(Qs(u.latitude),Qs(m.latitude));return 0!==C?C:Rn(Qs(u.longitude),Qs(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,m){const C=u.values||[],R=m.values||[];for(let X=0;X<C.length&&X<R.length;++X){const oe=bo(C[X],R[X]);if(oe)return oe}return Rn(C.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,m){if(u===Jo.mapValue&&m===Jo.mapValue)return 0;if(u===Jo.mapValue)return 1;if(m===Jo.mapValue)return-1;const C=u.fields||{},R=Object.keys(C),X=m.fields||{},oe=Object.keys(X);R.sort(),oe.sort();for(let Se=0;Se<R.length&&Se<oe.length;++Se){const at=Rn(R[Se],oe[Se]);if(0!==at)return at;const $t=bo(C[R[Se]],X[oe[Se]]);if(0!==$t)return $t}return Rn(R.length,oe.length)}(i.mapValue,e.mapValue);default:throw rr()}}function zu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Rn(i,e);const t=$a(i),s=$a(e),u=Rn(t.seconds,s.seconds);return 0!==u?u:Rn(t.nanos,s.nanos)}function hl(i){return Sl(i)}function Sl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=$a(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Xa(i.bytesValue).toBase64():"referenceValue"in i?Qn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let u="[",m=!0;for(const C of s.values||[])m?m=!1:u+=",",u+=Sl(C);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let m="{",C=!0;for(const R of u)C?C=!1:m+=",",m+=`${R}:${Sl(s.fields[R])}`;return m+"}"}(i.mapValue):rr();var e}function ba(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ul(i){return!!i&&"integerValue"in i}function Ma(i){return!!i&&"arrayValue"in i}function V(i){return!!i&&"nullValue"in i}function Y(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function de(i){return!!i&&"mapValue"in i}function je(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Va(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=je(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=je(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Mt(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function zt(i){return"nullValue"in i?dl:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?ba(Xo.empty(),Qn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:rr()}function kn(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?ba(Xo.empty(),Qn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Jo:rr()}function Lr(i,e){const t=bo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Gr(i,e){const t=bo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class jr{constructor(e,t){this.position=e,this.inclusive=t}}function Hi(i,e,t){let s=0;for(let u=0;u<i.position.length;u++){const m=e[u],C=i.position[u];if(s=m.field.isKeyField()?Qn.comparator(Qn.fromName(C.referenceValue),t.key):bo(C,t.data.field(m.field)),"desc"===m.dir&&(s*=-1),0!==s)break}return s}function mi(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!oo(i.position[t],e.position[t]))return!1;return!0}class Bo{}class ri extends Bo{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Bl(e,t,s):"array-contains"===t?new qd(e,s):"in"===t?new vu(e,s):"not-in"===t?new Wu(e,s):"array-contains-any"===t?new cd(e,s):new ri(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ld(e,s):new ud(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bo(t,this.value)):null!==t&&el(this.value)===el(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ss extends Bo{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new ss(e,t)}matches(e){return Ta(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ta(i){return"and"===i.op}function Ra(i){return"or"===i.op}function Do(i){return To(i)&&Ta(i)}function To(i){for(const e of i.filters)if(e instanceof ss)return!1;return!0}function Ha(i){if(i instanceof ri)return i.field.canonicalString()+i.op.toString()+hl(i.value);{const e=i.filters.map(t=>Ha(t)).join(",");return`${i.op}(${e})`}}function ad(i,e){return i instanceof ri?(t=i,(s=e)instanceof ri&&t.op===s.op&&t.field.isEqual(s.field)&&oo(t.value,s.value)):i instanceof ss?function(t,s){return s instanceof ss&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((u,m,C)=>u&&ad(m,s.filters[C]),!0)}(i,e):void rr();var t,s}function Dl(i,e){const t=i.filters.concat(e);return ss.create(t,i.op)}function Al(i){return i instanceof ri?`${(e=i).field.canonicalString()} ${e.op} ${hl(e.value)}`:i instanceof ss?function(e){return e.op.toString()+" {"+e.getFilters().map(Al).join(" ,")+"}"}(i):"Filter";var e}class Bl extends ri{constructor(e,t,s){super(e,t,s),this.key=Qn.fromName(s.referenceValue)}matches(e){const t=Qn.comparator(e.key,this.key);return this.matchesComparison(t)}}class ld extends ri{constructor(e,t){super(e,"in",t),this.keys=Pa(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ud extends ri{constructor(e,t){super(e,"not-in",t),this.keys=Pa(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Pa(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Qn.fromName(s.referenceValue))}class qd extends ri{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ma(t)&&ja(t.arrayValue,this.value)}}class vu extends ri{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ja(this.value.arrayValue,t)}}class Wu extends ri{constructor(e,t){super(e,"not-in",t)}matches(e){if(ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ja(this.value.arrayValue,t)}}class cd extends ri{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ma(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>ja(this.value.arrayValue,s))}}class Ao{constructor(e,t="asc"){this.field=e,this.dir=t}}function qu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Xs{constructor(e,t){this.comparator=e,this.root=t||ea.EMPTY}insert(e,t){return new Xs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ea.BLACK,null,null))}remove(e){return new Xs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ea.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?s(e.key,t):1,t&&u&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ea{constructor(e,t,s,u,m){this.key=e,this.value=t,this.color=null!=s?s:ea.RED,this.left=null!=u?u:ea.EMPTY,this.right=null!=m?m:ea.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,m){return new ea(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=u?u:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const m=s(e,u.key);return u=m<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===m?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ea.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return ea.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ea.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ea.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rr();const e=this.left.check();if(e!==this.right.check())throw rr();return e+(this.isRed()?0:1)}}ea.EMPTY=null,ea.RED=!0,ea.BLACK=!1,ea.EMPTY=new class{constructor(){this.size=0}get key(){throw rr()}get value(){throw rr()}get color(){throw rr()}get left(){throw rr()}get right(){throw rr()}copy(i,e,t,s,u){return this}insert(i,e,t){return new ea(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Js{constructor(e){this.comparator=e,this.data=new Xs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $l(this.data.getIterator())}getIteratorFrom(e){return new $l(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Js)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(0!==this.comparator(u,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Js(this.comparator);return t.data=e,t}}class $l{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(i){return i.hasNext()?i.getNext():void 0}class $o{constructor(e){this.fields=e,e.sort(Ns.comparator)}static empty(){return new $o([])}unionWith(e){let t=new Js(Ns.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new $o(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fr(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Fo{constructor(e){this.value=e}static empty(){return new Fo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!de(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=je(t)}setAll(e){let t=Ns.emptyPath(),s={},u=[];e.forEach((C,R)=>{if(!t.isImmediateParentOf(R)){const X=this.getFieldsMap(t);this.applyChanges(X,s,u),s={},u=[],t=R.popLast()}C?s[R.lastSegment()]=je(C):u.push(R.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,s,u)}delete(e){const t=this.field(e.popLast());de(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];de(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){Va(t,(u,m)=>e[u]=m);for(const u of s)delete e[u]}clone(){return new Fo(je(this.value))}}function Ku(i){const e=[];return Va(i.fields,(t,s)=>{const u=new Ns([t]);if(de(s)){const m=Ku(s.mapValue).fields;if(0===m.length)e.push(u);else for(const C of m)e.push(u.child(C))}else e.push(u)}),new $o(e)}class As{constructor(e,t,s,u,m,C,R){this.key=e,this.documentType=t,this.version=s,this.readTime=u,this.createTime=m,this.data=C,this.documentState=R}static newInvalidDocument(e){return new As(e,0,Gn.min(),Gn.min(),Gn.min(),Fo.empty(),0)}static newFoundDocument(e,t,s,u){return new As(e,1,t,Gn.min(),s,u,0)}static newNoDocument(e,t){return new As(e,2,t,Gn.min(),Gn.min(),Fo.empty(),0)}static newUnknownDocument(e,t){return new As(e,3,t,Gn.min(),Gn.min(),Fo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof As&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new As(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zu{constructor(e,t=null,s=[],u=[],m=null,C=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=m,this.startAt=C,this.endAt=R,this.ft=null}}function eu(i,e=null,t=[],s=[],u=null,m=null,C=null){return new Zu(i,e,t,s,u,m,C)}function jl(i){const e=er(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Ha(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),la(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>hl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>hl(s)).join(",")),e.ft=t}return e.ft}function Hl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!qu(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!ad(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!mi(i.startAt,e.startAt)&&mi(i.endAt,e.endAt)}function Yu(i){return Qn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function ga(i,e){return i.filters.filter(t=>t instanceof ri&&t.field.isEqual(e))}function Gl(i,e,t){let s=dl,u=!0;for(const m of ga(i,e)){let C=dl,R=!0;switch(m.op){case"<":case"<=":C=zt(m.value);break;case"==":case"in":case">=":C=m.value;break;case">":C=m.value,R=!1;break;case"!=":case"not-in":C=dl}Lr({value:s,inclusive:u},{value:C,inclusive:R})<0&&(s=C,u=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const C=t.position[m];Lr({value:s,inclusive:u},{value:C,inclusive:t.inclusive})<0&&(s=C,u=t.inclusive);break}return{value:s,inclusive:u}}function tu(i,e,t){let s=Jo,u=!0;for(const m of ga(i,e)){let C=Jo,R=!0;switch(m.op){case">=":case">":C=kn(m.value),R=!1;break;case"==":case"in":case"<=":C=m.value;break;case"<":C=m.value,R=!1;break;case"!=":case"not-in":C=Jo}Gr({value:s,inclusive:u},{value:C,inclusive:R})>0&&(s=C,u=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const C=t.position[m];Gr({value:s,inclusive:u},{value:C,inclusive:t.inclusive})>0&&(s=C,u=t.inclusive);break}return{value:s,inclusive:u}}class pl{constructor(e,t=null,s=[],u=[],m=null,C="F",R=null,X=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=m,this.limitType=C,this.startAt=R,this.endAt=X,this.dt=null,this._t=null}}function Sc(i,e,t,s,u,m,C,R){return new pl(i,e,t,s,u,m,C,R)}function nu(i){return new pl(i)}function ru(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Qu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function iu(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function gl(i){return null!==i.collectionGroup}function ma(i){const e=er(i);if(null===e.dt){e.dt=[];const t=iu(e),s=Qu(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new Ao(t)),e.dt.push(new Ao(Ns.keyField(),"asc"));else{let u=!1;for(const m of e.explicitOrderBy)e.dt.push(m),m.field.isKeyField()&&(u=!0);if(!u){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Ao(Ns.keyField(),m))}}}return e.dt}function ua(i){const e=er(i);if(!e._t)if("F"===e.limitType)e._t=eu(e.path,e.collectionGroup,ma(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of ma(e))t.push(new Ao(m.field,"desc"===m.dir?"asc":"desc"));const s=e.endAt?new jr(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new jr(e.startAt.position,e.startAt.inclusive):null;e._t=eu(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e._t}function Cu(i,e){e.getFirstInequalityField(),iu(i);const t=i.filters.concat([e]);return new pl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function su(i,e,t){return new pl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function bu(i,e){return Hl(ua(i),ua(e))&&i.limitType===e.limitType}function Oa(i){return`${jl(ua(i))}|lt:${i.limitType}`}function Xu(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Al(s)).join(", ")}]`),la(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>hl(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>hl(s)).join(",")),`Target(${t})`}(ua(i))}; limitType=${i.limitType})`}function Na(i,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Qn.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,s){for(const u of ma(t))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(u,m,C){const R=Hi(u,m,C);return u.inclusive?R<=0:R<0}(t.startAt,ma(t),s)||t.endAt&&!function(u,m,C){const R=Hi(u,m,C);return u.inclusive?R>=0:R>0}(t.endAt,ma(t),s)));var t,s}function wa(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ju(i){return(e,t)=>{let s=!1;for(const u of ma(i)){const m=Tu(u,e,t);if(0!==m)return m;s=s||u.field.isKeyField()}return 0}}function Tu(i,e,t){const s=i.field.isKeyField()?Qn.comparator(e.key,t.key):function(u,m,C){const R=m.data.field(u),X=C.data.field(u);return null!==R&&null!==X?bo(R,X):rr()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return rr()}}function zl(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:po(e)?"-0":e}}function Dc(i){return{integerValue:""+i}}function Ac(i,e){return Qa(e)?Dc(e):zl(i,e)}class xc{constructor(){this._=void 0}}function wu(i,e,t){return i instanceof Du?function(s,u){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(m.fields.__previous_value__=u),{mapValue:m}}(t,e):i instanceof ml?ec(i,e):i instanceof yl?dd(i,e):function(s,u){const m=Su(s,u),C=Au(m)+Au(s.gt);return Ul(m)&&Ul(s.gt)?Dc(C):zl(s.yt,C)}(i,e)}function Iu(i,e,t){return i instanceof ml?ec(i,e):i instanceof yl?dd(i,e):t}function Su(i,e){return i instanceof jo?Ul(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Du extends xc{}class ml extends xc{constructor(e){super(),this.elements=e}}function ec(i,e){const t=Ga(e);for(const s of i.elements)t.some(u=>oo(u,s))||t.push(s);return{arrayValue:{values:t}}}class yl extends xc{constructor(e){super(),this.elements=e}}function dd(i,e){let t=Ga(e);for(const s of i.elements)t=t.filter(u=>!oo(u,s));return{arrayValue:{values:t}}}class jo extends xc{constructor(e,t){super(),this.yt=e,this.gt=t}}function Au(i){return Qs(i.integerValue||i.doubleValue)}function Ga(i){return Ma(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ia{constructor(e,t){this.field=e,this.transform=t}}class _l{constructor(e,t){this.version=e,this.transformResults=t}}class eo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new eo}static exists(e){return new eo(void 0,e)}static updateTime(e){return new eo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uo(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class tl{}function Kd(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ho(i.key,eo.none()):new ou(i.key,i.data,eo.none());{const t=i.data,s=Fo.empty();let u=new Js(Ns.comparator);for(let m of e.fields)if(!u.has(m)){let C=t.field(m);null===C&&m.length>1&&(m=m.popLast(),C=t.field(m)),null===C?s.delete(m):s.set(m,C),u=u.add(m)}return new xl(i.key,s,new $o(u.toArray()),eo.none())}}function xu(i,e,t){i instanceof ou?function(s,u,m){const C=s.value.clone(),R=Ru(s.fieldTransforms,u,m.transformResults);C.setAll(R),u.convertToFoundDocument(m.version,C).setHasCommittedMutations()}(i,e,t):i instanceof xl?function(s,u,m){if(!uo(s.precondition,u))return void u.convertToUnknownDocument(m.version);const C=Ru(s.fieldTransforms,u,m.transformResults),R=u.data;R.setAll(Yd(s)),R.setAll(C),u.convertToFoundDocument(m.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Mu(i,e,t,s){return i instanceof ou?function(u,m,C,R){if(!uo(u.precondition,m))return C;const X=u.value.clone(),oe=tc(u.fieldTransforms,R,m);return X.setAll(oe),m.convertToFoundDocument(m.version,X).setHasLocalMutations(),null}(i,e,t,s):i instanceof xl?function(u,m,C,R){if(!uo(u.precondition,m))return C;const X=tc(u.fieldTransforms,R,m),oe=m.data;return oe.setAll(Yd(u)),oe.setAll(X),m.convertToFoundDocument(m.version,oe).setHasLocalMutations(),null===C?null:C.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(Se=>Se.field))}(i,e,t,s):(C=t,uo(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):C);var m,C}function Mc(i,e){let t=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),m=Su(s.transform,u||null);null!=m&&(null===t&&(t=Fo.empty()),t.set(s.field,m))}return t||null}function Zd(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&Fr(t,s,(u,m)=>function ka(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof ml&&s instanceof ml||t instanceof yl&&s instanceof yl?Fr(t.elements,s.elements,oo):t instanceof jo&&s instanceof jo?oo(t.gt,s.gt):t instanceof Du&&s instanceof Du);var t,s}(u,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class ou extends tl{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class xl extends tl{constructor(e,t,s,u,m=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Yd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Ru(i,e,t){const s=new Map;hr(i.length===t.length);for(let u=0;u<t.length;u++){const m=i[u],C=m.transform,R=e.data.field(m.field);s.set(m.field,Iu(C,R,t[u]))}return s}function tc(i,e,t){const s=new Map;for(const u of i){const m=u.transform,C=t.data.field(u.field);s.set(u.field,wu(m,C,e))}return s}class Ho extends tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Go extends tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rc{constructor(e){this.count=e}}var Oo,hs;function oa(i){switch(i){default:return rr();case qt.CANCELLED:case qt.UNKNOWN:case qt.DEADLINE_EXCEEDED:case qt.RESOURCE_EXHAUSTED:case qt.INTERNAL:case qt.UNAVAILABLE:case qt.UNAUTHENTICATED:return!1;case qt.INVALID_ARGUMENT:case qt.NOT_FOUND:case qt.ALREADY_EXISTS:case qt.PERMISSION_DENIED:case qt.FAILED_PRECONDITION:case qt.ABORTED:case qt.OUT_OF_RANGE:case qt.UNIMPLEMENTED:case qt.DATA_LOSS:return!0}}function Pu(i){if(void 0===i)return Bi("GRPC error has no .code"),qt.UNKNOWN;switch(i){case Oo.OK:return qt.OK;case Oo.CANCELLED:return qt.CANCELLED;case Oo.UNKNOWN:return qt.UNKNOWN;case Oo.DEADLINE_EXCEEDED:return qt.DEADLINE_EXCEEDED;case Oo.RESOURCE_EXHAUSTED:return qt.RESOURCE_EXHAUSTED;case Oo.INTERNAL:return qt.INTERNAL;case Oo.UNAVAILABLE:return qt.UNAVAILABLE;case Oo.UNAUTHENTICATED:return qt.UNAUTHENTICATED;case Oo.INVALID_ARGUMENT:return qt.INVALID_ARGUMENT;case Oo.NOT_FOUND:return qt.NOT_FOUND;case Oo.ALREADY_EXISTS:return qt.ALREADY_EXISTS;case Oo.PERMISSION_DENIED:return qt.PERMISSION_DENIED;case Oo.FAILED_PRECONDITION:return qt.FAILED_PRECONDITION;case Oo.ABORTED:return qt.ABORTED;case Oo.OUT_OF_RANGE:return qt.OUT_OF_RANGE;case Oo.UNIMPLEMENTED:return qt.UNIMPLEMENTED;case Oo.DATA_LOSS:return qt.DATA_LOSS;default:return rr()}}(hs=Oo||(Oo={}))[hs.OK=0]="OK",hs[hs.CANCELLED=1]="CANCELLED",hs[hs.UNKNOWN=2]="UNKNOWN",hs[hs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hs[hs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hs[hs.NOT_FOUND=5]="NOT_FOUND",hs[hs.ALREADY_EXISTS=6]="ALREADY_EXISTS",hs[hs.PERMISSION_DENIED=7]="PERMISSION_DENIED",hs[hs.UNAUTHENTICATED=16]="UNAUTHENTICATED",hs[hs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hs[hs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hs[hs.ABORTED=10]="ABORTED",hs[hs.OUT_OF_RANGE=11]="OUT_OF_RANGE",hs[hs.UNIMPLEMENTED=12]="UNIMPLEMENTED",hs[hs.INTERNAL=13]="INTERNAL",hs[hs.UNAVAILABLE=14]="UNAVAILABLE",hs[hs.DATA_LOSS=15]="DATA_LOSS";class nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,m]of s)if(this.equalsFn(u,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,t]],void this.innerSize++;for(let m=0;m<u.length;m++)if(this.equalsFn(u[m][0],e))return void(u[m]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Va(this.inner,(t,s)=>{for(const[u,m]of s)e(u,m)})}isEmpty(){return _u(this.inner)}size(){return this.innerSize}}const nc=new Xs(Qn.comparator);function ca(){return nc}const rc=new Xs(Qn.comparator);function ic(...i){let e=rc;for(const t of i)e=e.insert(t.key,t);return e}function au(i){let e=rc;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function vl(){return Ml()}function da(){return Ml()}function Ml(){return new nl(i=>i.toString(),(i,e)=>i.isEqual(e))}const hd=new Xs(Qn.comparator),fd=new Js(Qn.comparator);function Gi(...i){let e=fd;for(const t of i)e=e.add(t);return e}const pd=new Js(Rn);function lu(){return pd}class Ou{constructor(e,t,s,u,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const u=new Map;return u.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ou(Gn.min(),u,lu(),ca(),Gi())}}class Nu{constructor(e,t,s,u,m){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Nu(s,t,Gi(),Gi(),Gi())}}class Sa{constructor(e,t,s,u){this.It=e,this.removedTargetIds=t,this.key=s,this.Tt=u}}class Pc{constructor(e,t){this.targetId=e,this.Et=t}}class Qd{constructor(e,t,s=so.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class gd{constructor(){this.At=0,this.Rt=ha(),this.bt=so.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Gi(),t=Gi(),s=Gi();return this.Rt.forEach((u,m)=>{switch(m){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:rr()}}),new Nu(this.bt,this.Pt,e,t,s)}xt(){this.vt=!1,this.Rt=ha()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Fh{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=ca(),this.qt=Oc(),this.Ut=new Js(Rn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const s=this.Wt(t);switch(e.state){case 0:this.zt(t)&&s.Dt(e.resumeToken);break;case 1:s.Mt(),s.Vt||s.xt(),s.Dt(e.resumeToken);break;case 2:s.Mt(),s.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(s.Ft(),s.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),s.Dt(e.resumeToken));break;default:rr()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((s,u)=>{this.zt(u)&&t(u)})}Jt(e){const t=e.targetId,s=e.Et.count,u=this.Yt(t);if(u){const m=u.target;if(Yu(m))if(0===s){const C=new Qn(m.path);this.Qt(t,C,As.newNoDocument(C,Gn.min()))}else hr(1===s);else this.Xt(t)!==s&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((m,C)=>{const R=this.Yt(C);if(R){if(m.current&&Yu(R.target)){const X=new Qn(R.target.path);null!==this.Lt.get(X)||this.te(C,X)||this.Qt(C,X,As.newNoDocument(X,e))}m.St&&(t.set(C,m.Ct()),m.xt())}});let s=Gi();this.qt.forEach((m,C)=>{let R=!0;C.forEachWhile(X=>{const oe=this.Yt(X);return!oe||2===oe.purpose||(R=!1,!1)}),R&&(s=s.add(m))}),this.Lt.forEach((m,C)=>C.setReadTime(e));const u=new Ou(e,t,this.Ut,this.Lt,s);return this.Lt=ca(),this.qt=Oc(),this.Ut=new Js(Rn),u}Gt(e,t){if(!this.zt(e))return;const s=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,s),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,s){if(!this.zt(e))return;const u=this.Wt(e);this.te(e,t)?u.Nt(t,1):u.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),s&&(this.Lt=this.Lt.insert(t,s))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new gd,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Js(Rn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||En("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new gd),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Oc(){return new Xs(Qn.comparator)}function ha(){return new Xs(Qn.comparator)}const md={asc:"ASCENDING",desc:"DESCENDING"},Nc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kc={and:"AND",or:"OR"};class rl{constructor(e,t){this.databaseId=e,this.wt=t}}function il(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fc(i,e){return i.wt?e.toBase64():e.toUint8Array()}function yd(i,e){return il(i,e.toTimestamp())}function xo(i){return hr(!!i),Gn.fromTimestamp(function(e){const t=$a(e);return new Mr(t.seconds,t.nanos)}(i))}function sl(i,e){return(t=i,new ai(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function za(i){const e=ai.fromString(i);return hr(lt(e)),e}function ku(i,e){return sl(i.databaseId,e.path)}function Rl(i,e){const t=za(e);if(t.get(1)!==i.databaseId.projectId)throw new In(qt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new In(qt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Qn(y(t))}function Lc(i,e){return sl(i.databaseId,e)}function T(i){const e=za(i);return 4===e.length?ai.emptyPath():y(e)}function p(i){return new ai(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function y(i){return hr(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function A(i,e,t){return{name:ku(i,e),fields:t.value.mapValue.fields}}function ie(i,e,t){const s=Rl(i,e.name),u=xo(e.updateTime),m=e.createTime?xo(e.createTime):Gn.min(),C=new Fo({mapValue:{fields:e.fields}}),R=As.newFoundDocument(s,u,m,C);return t&&R.setHasCommittedMutations(),t?R.setHasCommittedMutations():R}function dn(i,e){let t;if(e instanceof ou)t={update:A(i,e.key,e.value)};else if(e instanceof Ho)t={delete:ku(i,e.key)};else if(e instanceof xl)t={update:A(i,e.key,e.data),updateMask:Ze(e.fieldMask)};else{if(!(e instanceof Go))return rr();t={verify:ku(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,m){const C=m.transform;if(C instanceof Du)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof ml)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof yl)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof jo)return{fieldPath:m.field.canonicalString(),increment:C.gt};throw rr()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:yd(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:rr()),t;var u}function nr(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?eo.updateTime(xo(u.updateTime)):void 0!==u.exists?eo.exists(u.exists):eo.none():eo.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(m,C){let R=null;"setToServerValue"in C?(hr("REQUEST_TIME"===C.setToServerValue),R=new Du):"appendMissingElements"in C?R=new ml(C.appendMissingElements.values||[]):"removeAllFromArray"in C?R=new yl(C.removeAllFromArray.values||[]):"increment"in C?R=new jo(m,C.increment):rr();const X=Ns.fromServerFormat(C.fieldPath);return new Ia(X,R)}(i,u)):[];var u;if(e.update){const u=Rl(i,e.update.name),m=new Fo({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new $o((e.updateMask.fieldPaths||[]).map(oe=>Ns.fromServerFormat(oe)));return new xl(u,m,C,t,s)}return new ou(u,m,t,s)}if(e.delete){const u=Rl(i,e.delete);return new Ho(u,t)}if(e.verify){const u=Rl(i,e.verify);return new Go(u,t)}return rr()}function yi(i,e){return{documents:[Lc(i,e.path)]}}function li(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Lc(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Lc(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(X){if(0!==X.length)return Ie(ss.create(X,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const m=function(X){if(0!==X.length)return X.map(oe=>{return{field:j((Se=oe).field),direction:d(Se.dir)};var Se})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const C=(oe=e.limit,i.wt||la(oe)?oe:{value:oe});var oe,R,X;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),t}function zo(i){let e=T(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){hr(1===s);const Se=t.from[0];Se.allDescendants?u=Se.collectionId:e=e.child(Se.collectionId)}let m=[];t.where&&(m=function(Se){const at=c(Se);return at instanceof ss&&Do(at)?at.getFilters():[at]}(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(Se=>{return new Ao(re((at=Se).field),function($t){switch($t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(at.direction));var at}));let R=null;t.limit&&(R=function(Se){let at;return at="object"==typeof Se?Se.value:Se,la(at)?null:at}(t.limit));let X=null;var Se;t.startAt&&(X=new jr((Se=t.startAt).values||[],!!Se.before));let oe=null;return t.endAt&&(oe=function(Se){return new jr(Se.values||[],!Se.before)}(t.endAt)),Sc(e,u,C,m,R,"F",X,oe)}function c(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=re(e.unaryFilter.field);return ri.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=re(e.unaryFilter.field);return ri.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=re(e.unaryFilter.field);return ri.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=re(e.unaryFilter.field);return ri.create(m,"!=",{nullValue:"NULL_VALUE"});default:return rr()}}(i):void 0!==i.fieldFilter?ri.create(re((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rr()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return ss.create(e.compositeFilter.filters.map(t=>c(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rr()}}(e.compositeFilter.op))}(i):rr();var e}function d(i){return md[i]}function v(i){return Nc[i]}function M(i){return kc[i]}function j(i){return{fieldPath:i.canonicalString()}}function re(i){return Ns.fromServerFormat(i.fieldPath)}function Ie(i){return i instanceof ri?function(e){if("=="===e.op){if(Y(e.value))return{unaryFilter:{field:j(e.field),op:"IS_NAN"}};if(V(e.value))return{unaryFilter:{field:j(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Y(e.value))return{unaryFilter:{field:j(e.field),op:"IS_NOT_NAN"}};if(V(e.value))return{unaryFilter:{field:j(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:j(e.field),op:v(e.op),value:e.value}}}(i):i instanceof ss?function(e){const t=e.getFilters().map(s=>Ie(s));return 1===t.length?t[0]:{compositeFilter:{op:M(e.op),filters:t}}}(i):rr()}function Ze(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lt(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function tn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Dn(e)),e=vn(i.get(t),e);return Dn(e)}function vn(i,e){let t=e;const s=i.length;for(let u=0;u<s;u++){const m=i.charAt(u);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function Dn(i){return i+"\x01\x01"}function fr(i){const e=i.length;if(hr(e>=2),2===e)return hr("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ai.emptyPath();const t=e-2,s=[];let u="";for(let m=0;m<e;){const C=i.indexOf("\x01",m);switch((C<0||C>t)&&rr(),i.charAt(C+1)){case"\x01":const R=i.substring(m,C);let X;0===u.length?X=R:(u+=R,X=u,u=""),s.push(X);break;case"\x10":u+=i.substring(m,C),u+="\0";break;case"\x11":u+=i.substring(m,C+1);break;default:rr()}m=C+2}return new ai(s)}const ci=["userId","batchId"];function ws(i,e){return[i,tn(e)]}function aa(i,e,t){return[i,tn(e),t]}const Fu={},Vc=["prefixPath","collectionGroup","readTime","documentId"],Wl=["prefixPath","collectionGroup","documentId"],Lh=["collectionGroup","readTime","prefixPath","documentId"],em=["canonicalId","targetId"],p_=["targetId","path"],Vh=["path","targetId"],g_=["collectionId","parent"],tm=["indexId","uid"],nm=["uid","sequenceNumber"],rm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jf=["indexId","uid","orderedDocumentKey"],im=["userId","collectionPath","documentId"],Uh=["userId","collectionPath","largestBatchId"],Bh=["userId","collectionGroup","largestBatchId"],ep=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tp=[...ep,"documentOverlays"],np=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$h=np,Xd=[...$h,"indexConfiguration","indexState","indexEntries"];class rp extends Ic{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function fa(i,e){const t=er(i);return va.M(t.se,e)}class ip{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const m=this.mutations[u];m.key.isEqual(e.key)&&xu(m,e,s[u])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Mu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Mu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=da();return this.mutations.forEach(u=>{const m=e.get(u.key),C=m.overlayedDocument;let R=this.applyToLocalView(C,m.mutatedFields);R=t.has(u.key)?null:R;const X=Kd(C,R);null!==X&&s.set(u.key,X),C.isValidDocument()||C.convertToNoDocument(Gn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gi())}isEqual(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,(t,s)=>Zd(t,s))&&Fr(this.baseMutations,e.baseMutations,(t,s)=>Zd(t,s))}}class sp{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){hr(e.mutations.length===s.length);let u=hd;const m=e.mutations;for(let C=0;C<m.length;C++)u=u.insert(m[C].key,s[C].version);return new sp(e,t,s,u)}}class jh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uu{constructor(e,t,s,u,m=Gn.min(),C=Gn.min(),R=so.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=R}withSequenceNumber(e){return new uu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new uu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class op{constructor(e){this.ie=e}}function ap(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:ku(u=i.ie,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:il(u,m.version.toTimestamp()),createTime:il(u,m.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:sc(e.version)};else{if(!e.isUnknownDocument())return rr();s.unknownDocument={path:t.path.toArray(),version:sc(e.version)}}var u,m;return s}function Hh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function sc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uc(i){const e=new Mr(i.seconds,i.nanoseconds);return Gn.fromTimestamp(e)}function Bc(i,e){const t=(e.baseMutations||[]).map(m=>nr(i.ie,m));for(let m=0;m<e.mutations.length-1;++m){const C=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(C.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const s=e.mutations.map(m=>nr(i.ie,m)),u=Mr.fromMillis(e.localWriteTimeMs);return new ip(e.batchId,u,t,s)}function Wa(i){const e=Uc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Uc(i.lastLimboFreeSnapshotVersion):Gn.min();let s;var u;return void 0!==i.query.documents?(hr(1===(u=i.query).documents.length),s=ua(nu(T(u.documents[0])))):s=ua(zo(i.query)),new uu(s,i.targetId,0,i.lastListenSequenceNumber,e,t,so.fromBase64String(i.resumeToken))}function sm(i,e){const t=sc(e.snapshotVersion),s=sc(e.lastLimboFreeSnapshotVersion);let u;u=Yu(e.target)?yi(i.ie,e.target):li(i.ie,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Gh(i){const e=zo({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?su(e,e.limit,"L"):e}function lp(i,e){return new jh(e.largestBatchId,nr(i.ie,e.overlayMutation))}function om(i,e){const t=e.path.lastSegment();return[i,tn(e.path.popLast()),t]}function am(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:sc(s.readTime),documentKey:tn(s.documentKey.path),largestBatchId:s.largestBatchId}}class m_{getBundleMetadata(e,t){return up(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:Uc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return up(e).put({bundleId:(s=t).id,createTime:sc(xo(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return lm(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:Gh(u.bundledQuery),readTime:Uc(u.readTime)};var u})}saveNamedQuery(e,t){return lm(e).put({name:(s=t).name,readTime:sc(xo(s.readTime)),bundledQuery:s.bundledQuery});var s}}function up(i){return fa(i,"bundles")}function lm(i){return fa(i,"namedQueries")}class zh{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new zh(e,t.uid||"")}getOverlay(e,t){return Jd(e).get(om(this.userId,t)).next(s=>s?lp(this.yt,s):null)}getOverlays(e,t){const s=vl();return Xt.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){const u=[];return s.forEach((m,C)=>{const R=new jh(t,C);u.push(this.oe(e,R))}),Xt.waitFor(u)}removeOverlaysForBatchId(e,t,s){const u=new Set;t.forEach(C=>u.add(tn(C.getCollectionPath())));const m=[];return u.forEach(C=>{const R=IDBKeyRange.bound([this.userId,C,s],[this.userId,C,s+1],!1,!0);m.push(Jd(e).Y("collectionPathOverlayIndex",R))}),Xt.waitFor(m)}getOverlaysForCollection(e,t,s){const u=vl(),m=tn(t),C=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Jd(e).W("collectionPathOverlayIndex",C).next(R=>{for(const X of R){const oe=lp(this.yt,X);u.set(oe.getKey(),oe)}return u})}getOverlaysForCollectionGroup(e,t,s,u){const m=vl();let C;const R=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jd(e).Z({index:"collectionGroupOverlayIndex",range:R},(X,oe,Se)=>{const at=lp(this.yt,oe);m.size()<u||at.largestBatchId===C?(m.set(at.getKey(),at),C=at.largestBatchId):Se.done()}).next(()=>m)}oe(e,t){return Jd(e).put(function(s,u,m){const[C,R,X]=om(u,m.mutation.key);return{userId:u,collectionPath:R,documentId:X,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:dn(s.ie,m.mutation)}}(this.yt,this.userId,t))}}function Jd(i){return fa(i,"documentOverlays")}class Li{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Qs(e.integerValue));else if("doubleValue"in e){const s=Qs(e.doubleValue);isNaN(s)?this.he(t,13):(this.he(t,15),po(s)?t.le(0):t.le(s))}else if("timestampValue"in e){const s=e.timestampValue;this.he(t,20),"string"==typeof s?t.fe(s):(t.fe(`${s.seconds||""}`),t.le(s.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Xa(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.he(t,45),t.le(s.latitude||0),t.le(s.longitude||0)}else"mapValue"in e?Mt(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):rr()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const s=e.fields||{};this.he(t,55);for(const u of Object.keys(s))this.de(u,t),this.ce(s[u],t)}ye(e,t){const s=e.values||[];this.he(t,50);for(const u of s)this.ce(u,t)}me(e,t){this.he(t,37),Qn.fromName(e).path.forEach(s=>{this.he(t,60),this.pe(s,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function um(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function cp(i){const e=64-function(t){let s=0;for(let u=0;u<8;++u){const m=um(255&t[u]);if(s+=m,8!==m)break}return s}(i);return Math.ceil(e/8)}Li.Ie=new Li;class cm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ee(s.value),s=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.be(s.value),s=t.next();this.Pe()}ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ee(s);else if(s<2048)this.Ee(960|s>>>6),this.Ee(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s);else{const u=t.codePointAt(0);this.Ee(240|u>>>18),this.Ee(128|63&u>>>12),this.Ee(128|63&u>>>6),this.Ee(128|63&u)}}this.Ae()}Ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.be(s);else if(s<2048)this.be(960|s>>>6),this.be(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.be(480|s>>>12),this.be(128|63&s>>>6),this.be(128|63&s);else{const u=t.codePointAt(0);this.be(240|u>>>18),this.be(128|63&u>>>12),this.be(128|63&u>>>6),this.be(128|63&u)}}this.Pe()}Se(e){const t=this.De(e),s=cp(t);this.Ce(1+s),this.buffer[this.position++]=255&s;for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=255&t[u]}xe(e){const t=this.De(e),s=cp(t);this.Ce(1+s),this.buffer[this.position++]=~(255&s);for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(u){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,u,!1),new Uint8Array(m.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let u=1;u<t.length;++u)t[u]^=s?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Wh{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class ql{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class _d{constructor(){this.$e=new cm,this.Be=new Wh(this.$e),this.Le=new ql(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class $c{constructor(e,t,s,u){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=u}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new $c(this.indexId,this.documentKey,this.arrayValue,s)}}function cu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=du(i.arrayValue,e.arrayValue),0!==t?t:(t=du(i.directionalValue,e.directionalValue),0!==t?t:Qn.comparator(i.documentKey,e.documentKey)))}function du(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class dp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const s=t;s.isInequality()?this.Qe=s:this.Ge.push(s)}}je(e){hr(e.collectionGroup===this.collectionId);const t=xa(e);if(void 0!==t&&!this.We(t))return!1;const s=Eo(e);let u=0,m=0;for(;u<s.length&&this.We(s[u]);++u);if(u===s.length)return!0;if(void 0!==this.Qe){const C=s[u];if(!this.ze(this.Qe,C)||!this.He(this.Ke[m++],C))return!1;++u}for(;u<s.length;++u){const C=s[u];if(m>=this.Ke.length||!this.He(this.Ke[m++],C))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hp(i){var e,t;if(hr(i instanceof ri||i instanceof ss),i instanceof ri){if(i instanceof vu){const u=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(m=>ri.create(i.field,"==",m)))||[];return ss.create(u,"or")}return i}const s=i.filters.map(u=>hp(u));return ss.create(s,i.op)}function fp(i){if(0===i.getFilters().length)return[];const e=vd(hp(i));return hr(y_(e)),dm(e)||qh(e)?[e]:e.getFilters()}function dm(i){return i instanceof ri}function qh(i){return i instanceof ss&&Do(i)}function y_(i){return dm(i)||qh(i)||function(e){if(e instanceof ss&&Ra(e)){for(const t of e.getFilters())if(!dm(t)&&!qh(t))return!1;return!0}return!1}(i)}function vd(i){if(hr(i instanceof ri||i instanceof ss),i instanceof ri)return i;if(1===i.filters.length)return vd(i.filters[0]);const e=i.filters.map(s=>vd(s));let t=ss.create(e,i.op);return t=Cd(t),y_(t)?t:(hr(t instanceof ss),hr(Ta(t)),hr(t.filters.length>1),t.filters.reduce((s,u)=>Ed(s,u)))}function Ed(i,e){let t;return hr(i instanceof ri||i instanceof ss),hr(e instanceof ri||e instanceof ss),t=i instanceof ri?e instanceof ri?ss.create([i,e],"and"):Kh(i,e):e instanceof ri?Kh(e,i):function(s,u){if(hr(s.filters.length>0&&u.filters.length>0),Ta(s)&&Ta(u))return Dl(s,u.getFilters());const m=Ra(s)?s:u,C=Ra(s)?u:s,R=m.filters.map(X=>Ed(X,C));return ss.create(R,"or")}(i,e),Cd(t)}function Kh(i,e){if(Ta(e))return Dl(e,i.getFilters());{const t=e.filters.map(s=>Ed(i,s));return ss.create(t,"or")}}function Cd(i){if(hr(i instanceof ri||i instanceof ss),i instanceof ri)return i;const e=i.getFilters();if(1===e.length)return Cd(e[0]);if(To(i))return i;const t=e.map(u=>Cd(u)),s=[];return t.forEach(u=>{u instanceof ri?s.push(u):u instanceof ss&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:ss.create(s,i.op)}class pp{constructor(){this.Je=new hm}addToCollectionParentIndex(e,t){return this.Je.add(t),Xt.resolve()}getCollectionParents(e,t){return Xt.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Xt.resolve()}deleteFieldIndex(e,t){return Xt.resolve()}getDocumentsMatchingTarget(e,t){return Xt.resolve(null)}getIndexType(e,t){return Xt.resolve(0)}getFieldIndexes(e,t){return Xt.resolve([])}getNextCollectionGroupToUpdate(e){return Xt.resolve(null)}getMinOffset(e,t){return Xt.resolve(na.min())}getMinOffsetFromCollectionGroup(e,t){return Xt.resolve(na.min())}updateCollectionGroup(e,t,s){return Xt.resolve()}updateIndexEntries(e,t){return Xt.resolve()}}class hm{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new Js(ai.comparator),m=!u.has(s);return this.index[t]=u.add(s),m}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new Js(ai.comparator)).toArray()}}const Zh=new Uint8Array(0);class __{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new hm,this.Xe=new nl(s=>jl(s),(s,u)=>Hl(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const m={collectionId:s,parent:tn(u)};return fm(e).put(m)}return Xt.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[_r(t),""],!1,!0);return fm(e).W(u).next(m=>{for(const C of m){if(C.collectionId!==t)break;s.push(fr(C.parent))}return s})}addFieldIndex(e,t){const s=th(e),u={indexId:(C=t).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var C;delete u.indexId;const m=s.add(u);if(t.indexState){const C=Yh(e);return m.next(R=>{C.put(am(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const s=th(e),u=Yh(e),m=eh(e);return s.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=eh(e);let u=!0;const m=new Map;return Xt.forEach(this.Ze(t),C=>this.tn(e,C).next(R=>{u&&(u=!!R),m.set(C,R)})).next(()=>{if(u){let C=Gi();const R=[];return Xt.forEach(m,(X,oe)=>{var Se;En("IndexedDbIndexManager",`Using index ${Se=X,`id=${Se.indexId}|cg=${Se.collectionGroup}|f=${Se.fields.map(ks=>`${ks.fieldPath}:${ks.kind}`).join(",")}`} to execute ${jl(t)}`);const at=function(ks,qo){const Fs=xa(qo);if(void 0===Fs)return null;for(const Gs of ga(ks,Fs.fieldPath))switch(Gs.op){case"array-contains-any":return Gs.value.arrayValue.values||[];case"array-contains":return[Gs.value]}return null}(oe,X),$t=function(ks,qo){const Fs=new Map;for(const Gs of Eo(qo))for(const pa of ga(ks,Gs.fieldPath))switch(pa.op){case"==":case"in":Fs.set(Gs.fieldPath.canonicalString(),pa.value);break;case"not-in":case"!=":return Fs.set(Gs.fieldPath.canonicalString(),pa.value),Array.from(Fs.values())}return null}(oe,X),On=function(ks,qo){const Fs=[];let Gs=!0;for(const pa of Eo(qo)){const Ph=0===pa.kind?Gl(ks,pa.fieldPath,ks.startAt):tu(ks,pa.fieldPath,ks.startAt);Fs.push(Ph.value),Gs&&(Gs=Ph.inclusive)}return new jr(Fs,Gs)}(oe,X),zn=function(ks,qo){const Fs=[];let Gs=!0;for(const pa of Eo(qo)){const Ph=0===pa.kind?tu(ks,pa.fieldPath,ks.endAt):Gl(ks,pa.fieldPath,ks.endAt);Fs.push(Ph.value),Gs&&(Gs=Ph.inclusive)}return new jr(Fs,Gs)}(oe,X),Dr=this.en(X,oe,On),di=this.en(X,oe,zn),mo=this.nn(X,oe,$t),No=this.sn(X.indexId,at,Dr,On.inclusive,di,zn.inclusive,mo);return Xt.forEach(No,ks=>s.J(ks,t.limit).next(qo=>{qo.forEach(Fs=>{const Gs=Qn.fromSegments(Fs.documentKey);C.has(Gs)||(C=C.add(Gs),R.push(Gs))})}))}).next(()=>R)}return Xt.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:fp(ss.create(e.filters,"and")).map(s=>eu(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,s,u,m,C,R){const X=(null!=t?t.length:1)*Math.max(s.length,m.length),oe=X/(null!=t?t.length:1),Se=[];for(let at=0;at<X;++at){const $t=t?this.rn(t[at/oe]):Zh,On=this.on(e,$t,s[at%oe],u),zn=this.un(e,$t,m[at%oe],C),Dr=R.map(di=>this.on(e,$t,di,!0));Se.push(...this.createRange(On,zn,Dr))}return Se}on(e,t,s,u){const m=new $c(e,Qn.empty(),t,s);return u?m:m.Ue()}un(e,t,s,u){const m=new $c(e,Qn.empty(),t,s);return u?m.Ue():m}tn(e,t){const s=new dp(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(m=>{let C=null;for(const R of m)s.je(R)&&(!C||R.fields.length>C.fields.length)&&(C=R);return C})}getIndexType(e,t){let s=2;const u=this.Ze(t);return Xt.forEach(u,m=>this.tn(e,m).next(C=>{C?0!==s&&C.fields.length<function(R){let X=new Js(Ns.comparator),oe=!1;for(const Se of R.filters)for(const at of Se.getFlattenedFilters())at.field.isKeyField()||("array-contains"===at.op||"array-contains-any"===at.op?oe=!0:X=X.add(at.field));for(const Se of R.orderBy)Se.field.isKeyField()||(X=X.add(Se.field));return X.size+(oe?1:0)}(m)&&(s=1):s=0})).next(()=>null!==t.limit&&u.length>1&&2===s?1:s)}cn(e,t){const s=new _d;for(const u of Eo(e)){const m=t.data.field(u.fieldPath);if(null==m)return null;const C=s.qe(u.kind);Li.Ie.ue(m,C)}return s.Fe()}rn(e){const t=new _d;return Li.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const s=new _d;return Li.Ie.ue(ba(this.databaseId,t),s.qe(function(u){const m=Eo(u);return 0===m.length?0:m[m.length-1].kind}(e))),s.Fe()}nn(e,t,s){if(null===s)return[];let u=[];u.push(new _d);let m=0;for(const C of Eo(e)){const R=s[m++];for(const X of u)if(this.hn(t,C.fieldPath)&&Ma(R))u=this.ln(u,C,R);else{const oe=X.qe(C.kind);Li.Ie.ue(R,oe)}}return this.fn(u)}en(e,t,s){return this.nn(e,t,s.position)}fn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Fe();return t}ln(e,t,s){const u=[...e],m=[];for(const C of s.arrayValue.values||[])for(const R of u){const X=new _d;X.seed(R.Fe()),Li.Ie.ue(C,X.qe(t.kind)),m.push(X)}return m}hn(e,t){return!!e.filters.find(s=>s instanceof ri&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=th(e),u=Yh(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(m=>{const C=[];return Xt.forEach(m,R=>u.get([R.indexId,this.uid]).next(X=>{C.push(function(oe,Se){const at=Se?new Ll(Se.sequenceNumber,new na(Uc(Se.readTime),new Qn(fr(Se.documentKey)),Se.largestBatchId)):Ll.empty(),$t=oe.fields.map(([On,zn])=>new Fl(Ns.fromServerFormat(On),zn));return new Uo(oe.indexId,oe.collectionGroup,$t,at)}(R,X))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,u)=>{const m=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==m?m:Rn(s.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const u=th(e),m=Yh(e);return this.dn(e).next(C=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>Xt.forEach(R,X=>m.put(am(X.indexId,this.user,C,s)))))}updateIndexEntries(e,t){const s=new Map;return Xt.forEach(t,(u,m)=>{const C=s.get(u.collectionGroup);return(C?Xt.resolve(C):this.getFieldIndexes(e,u.collectionGroup)).next(R=>(s.set(u.collectionGroup,R),Xt.forEach(R,X=>this._n(e,u,X).next(oe=>{const Se=this.wn(m,X);return oe.isEqual(Se)?Xt.resolve():this.mn(e,m,X,oe,Se)}))))})}gn(e,t,s,u){return eh(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.an(s,t.key),documentKey:t.key.path.toArray()})}yn(e,t,s,u){return eh(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.an(s,t.key),t.key.path.toArray()])}_n(e,t,s){const u=eh(e);let m=new Js(cu);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.an(s,t)])},(C,R)=>{m=m.add(new $c(s.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>m)}wn(e,t){let s=new Js(cu);const u=this.cn(t,e);if(null==u)return s;const m=xa(t);if(null!=m){const C=e.data.field(m.fieldPath);if(Ma(C))for(const R of C.arrayValue.values||[])s=s.add(new $c(t.indexId,e.key,this.rn(R),u))}else s=s.add(new $c(t.indexId,e.key,Zh,u));return s}mn(e,t,s,u,m){En("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(R,X,oe,Se,at){const $t=R.getIterator(),On=X.getIterator();let zn=fl($t),Dr=fl(On);for(;zn||Dr;){let di=!1,mo=!1;if(zn&&Dr){const No=oe(zn,Dr);No<0?mo=!0:No>0&&(di=!0)}else null!=zn?mo=!0:di=!0;di?(Se(Dr),Dr=fl(On)):mo?(at(zn),zn=fl($t)):(zn=fl($t),Dr=fl(On))}}(u,m,cu,R=>{C.push(this.gn(e,t,s,R))},R=>{C.push(this.yn(e,t,s,R))}),Xt.waitFor(C)}dn(e){let t=1;return Yh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,m)=>{m.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((C,R)=>cu(C,R)).filter((C,R,X)=>!R||0!==cu(C,X[R-1]));const u=[];u.push(e);for(const C of s){const R=cu(C,e),X=cu(C,t);if(0===R)u[0]=e.Ue();else if(R>0&&X<0)u.push(C),u.push(C.Ue());else if(X>0)break}u.push(t);const m=[];for(let C=0;C<u.length;C+=2){if(this.pn(u[C],u[C+1]))return[];m.push(IDBKeyRange.bound([u[C].indexId,this.uid,u[C].arrayValue,u[C].directionalValue,Zh,[]],[u[C+1].indexId,this.uid,u[C+1].arrayValue,u[C+1].directionalValue,Zh,[]]))}return m}pn(e,t){return cu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pm)}getMinOffset(e,t){return Xt.mapArray(this.Ze(t),s=>this.tn(e,s).next(u=>u||rr())).next(pm)}}function fm(i){return fa(i,"collectionParents")}function eh(i){return fa(i,"indexEntries")}function th(i){return fa(i,"indexConfiguration")}function Yh(i){return fa(i,"indexState")}function pm(i){hr(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;_a(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new na(e.readTime,e.documentKey,t)}const v_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qa{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new qa(e,qa.DEFAULT_COLLECTION_PERCENTILE,qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gp(i,e,t){const s=i.store("mutations"),u=i.store("documentMutations"),m=[],C=IDBKeyRange.only(t.batchId);let R=0;const X=s.Z({range:C},(Se,at,$t)=>(R++,$t.delete()));m.push(X.next(()=>{hr(1===R)}));const oe=[];for(const Se of t.mutations){const at=aa(e,Se.key.path,t.batchId);m.push(u.delete(at)),oe.push(Se.key)}return Xt.waitFor(m).next(()=>oe)}function Qh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw rr();e=i.noDocument}return JSON.stringify(e).length}qa.DEFAULT_COLLECTION_PERCENTILE=10,qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qa.DEFAULT=new qa(41943040,qa.DEFAULT_COLLECTION_PERCENTILE,qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qa.DISABLED=new qa(-1,0,0);class bd{constructor(e,t,s,u){this.userId=e,this.yt=t,this.indexManager=s,this.referenceDelegate=u,this.In={}}static re(e,t,s,u){hr(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new bd(m,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jc(e).Z({index:"userMutationsIndex",range:s},(u,m,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const m=nh(e),C=jc(e);return C.add({}).next(R=>{hr("number"==typeof R);const X=new ip(R,t,s,u),oe=function($t,On,zn){const Dr=zn.baseMutations.map(mo=>dn($t.ie,mo)),di=zn.mutations.map(mo=>dn($t.ie,mo));return{userId:On,batchId:zn.batchId,localWriteTimeMs:zn.localWriteTime.toMillis(),baseMutations:Dr,mutations:di}}(this.yt,this.userId,X),Se=[];let at=new Js(($t,On)=>Rn($t.canonicalString(),On.canonicalString()));for(const $t of u){const On=aa(this.userId,$t.key.path,R);at=at.add($t.key.path.popLast()),Se.push(C.put(oe)),Se.push(m.put(On,Fu))}return at.forEach($t=>{Se.push(this.indexManager.addToCollectionParentIndex(e,$t))}),e.addOnCommittedListener(()=>{this.In[R]=X.keys()}),Xt.waitFor(Se).next(()=>X)})}lookupMutationBatch(e,t){return jc(e).get(t).next(s=>s?(hr(s.userId===this.userId),Bc(this.yt,s)):null)}Tn(e,t){return this.In[t]?Xt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let m=null;return jc(e).Z({index:"userMutationsIndex",range:u},(C,R,X)=>{R.userId===this.userId&&(hr(R.batchId>=s),m=Bc(this.yt,R)),X.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return jc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,m,C)=>{s=m.batchId,C.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jc(e).W("userMutationsIndex",t).next(s=>s.map(u=>Bc(this.yt,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ws(this.userId,t.path),u=IDBKeyRange.lowerBound(s),m=[];return nh(e).Z({range:u},(C,R,X)=>{const[oe,Se,at]=C,$t=fr(Se);if(oe===this.userId&&t.path.isEqual($t))return jc(e).get(at).next(On=>{if(!On)throw rr();hr(On.userId===this.userId),m.push(Bc(this.yt,On))});X.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Js(Rn);const u=[];return t.forEach(m=>{const C=ws(this.userId,m.path),R=IDBKeyRange.lowerBound(C),X=nh(e).Z({range:R},(oe,Se,at)=>{const[$t,On,zn]=oe,Dr=fr(On);$t===this.userId&&m.path.isEqual(Dr)?s=s.add(zn):at.done()});u.push(X)}),Xt.waitFor(u).next(()=>this.En(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,m=ws(this.userId,s),C=IDBKeyRange.lowerBound(m);let R=new Js(Rn);return nh(e).Z({range:C},(X,oe,Se)=>{const[at,$t,On]=X,zn=fr($t);at===this.userId&&s.isPrefixOf(zn)?zn.length===u&&(R=R.add(On)):Se.done()}).next(()=>this.En(e,R))}En(e,t){const s=[],u=[];return t.forEach(m=>{u.push(jc(e).get(m).next(C=>{if(null===C)throw rr();hr(C.userId===this.userId),s.push(Bc(this.yt,C))}))}),Xt.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return gp(e.se,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Xt.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Xt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return nh(e).Z({range:s},(m,C,R)=>{if(m[0]===this.userId){const X=fr(m[1]);u.push(X)}else R.done()}).next(()=>{hr(0===u.length)})})}containsKey(e,t){return E_(e,this.userId,t)}Rn(e){return C_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function E_(i,e,t){const s=ws(e,t.path),u=s[1],m=IDBKeyRange.lowerBound(s);let C=!1;return nh(i).Z({range:m,X:!0},(R,X,oe)=>{const[Se,at,$t]=R;Se===e&&at===u&&(C=!0),oe.done()}).next(()=>C)}function jc(i){return fa(i,"mutations")}function nh(i){return fa(i,"documentMutations")}function C_(i){return fa(i,"mutationQueues")}class Td{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Td(0)}static vn(){return new Td(-1)}}class E0{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const s=new Td(t.highestTargetId);return t.highestTargetId=s.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Gn.fromTimestamp(new Mr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(s=>(s.targetCount+=1,this.Cn(t,s),this.Sn(e,s))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(s=>(hr(s.targetCount>0),s.targetCount-=1,this.Sn(e,s)))}removeTargets(e,t,s){let u=0;const m=[];return rh(e).Z((C,R)=>{const X=Wa(R);X.sequenceNumber<=t&&null===s.get(X.targetId)&&(u++,m.push(this.removeTargetData(e,X)))}).next(()=>Xt.waitFor(m)).next(()=>u)}forEachTarget(e,t){return rh(e).Z((s,u)=>{const m=Wa(u);t(m)})}Vn(e){return b_(e).get("targetGlobalKey").next(t=>(hr(null!==t),t))}Sn(e,t){return b_(e).put("targetGlobalKey",t)}Dn(e,t){return rh(e).put(sm(this.yt,t))}Cn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=jl(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let m=null;return rh(e).Z({range:u,index:"queryTargetsIndex"},(C,R,X)=>{const oe=Wa(R);Hl(t,oe.target)&&(m=oe,X.done())}).next(()=>m)}addMatchingKeys(e,t,s){const u=[],m=Hc(e);return t.forEach(C=>{const R=tn(C.path);u.push(m.put({targetId:s,path:R})),u.push(this.referenceDelegate.addReference(e,s,C))}),Xt.waitFor(u)}removeMatchingKeys(e,t,s){const u=Hc(e);return Xt.forEach(t,m=>{const C=tn(m.path);return Xt.waitFor([u.delete([s,C]),this.referenceDelegate.removeReference(e,s,m)])})}removeMatchingKeysForTargetId(e,t){const s=Hc(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=Hc(e);let m=Gi();return u.Z({range:s,X:!0},(C,R,X)=>{const oe=fr(C[1]),Se=new Qn(oe);m=m.add(Se)}).next(()=>m)}containsKey(e,t){const s=tn(t.path),u=IDBKeyRange.bound([s],[_r(s)],!1,!0);let m=0;return Hc(e).Z({index:"documentTargetsIndex",X:!0,range:u},([C,R],X,oe)=>{0!==C&&(m++,oe.done())}).next(()=>m>0)}ne(e,t){return rh(e).get(t).next(s=>s?Wa(s):null)}}function rh(i){return fa(i,"targets")}function b_(i){return fa(i,"targetGlobal")}function Hc(i){return fa(i,"targetDocuments")}function T_([i,e],[t,s]){const u=Rn(i,t);return 0===u?Rn(e,s):u}class oc{constructor(e){this.xn=e,this.buffer=new Js(T_),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();T_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mp{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;En("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,xe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){ia(s)?En("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ra(s)}yield t.Fn(3e5)}))}}class w_{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Xt.resolve(fo.at);const s=new oc(t);return this.$n.forEachTarget(e,u=>s.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>s.On(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.$n.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(En("LruGarbageCollector","Garbage collection skipped; disabled"),Xt.resolve(v_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(En("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v_):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let s,u,m,C,R,X,oe;const Se=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(at=>(at>this.params.maximumSequenceNumbersToCollect?(En("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${at}`),u=this.params.maximumSequenceNumbersToCollect):u=at,C=Date.now(),this.nthSequenceNumber(e,u))).next(at=>(s=at,R=Date.now(),this.removeTargets(e,s,t))).next(at=>(m=at,X=Date.now(),this.removeOrphanedDocuments(e,s))).next(at=>(oe=Date.now(),us()<=Kt.in.DEBUG&&En("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-Se}ms\n\tDetermined least recently used ${u} in `+(R-C)+`ms\n\tRemoved ${m} targets in `+(X-R)+`ms\n\tRemoved ${at} documents in `+(oe-X)+`ms\nTotal Duration: ${oe-Se}ms`),Xt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:m,documentsRemoved:at})))}}class gm{constructor(e,t){this.db=e,this.garbageCollector=new w_(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Un(e){let t=0;return this.Ln(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(s,u)=>t(u))}addReference(e,t,s){return wd(e,s)}removeReference(e,t,s){return wd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return wd(e,t)}Gn(e,t){return function(s,u){let m=!1;return C_(s).tt(C=>E_(s,C,u).next(R=>(R&&(m=!0),Xt.resolve(!R)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let m=0;return this.Kn(e,(C,R)=>{if(R<=t){const X=this.Gn(e,C).next(oe=>{if(!oe)return m++,s.getEntry(e,C).next(()=>(s.removeEntry(C,Gn.min()),Hc(e).delete([0,tn(C.path)])))});u.push(X)}}).next(()=>Xt.waitFor(u)).next(()=>s.apply(e)).next(()=>m)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return wd(e,t)}Kn(e,t){const s=Hc(e);let u,m=fo.at;return s.Z({index:"documentTargetsIndex"},([C,R],{path:X,sequenceNumber:oe})=>{0===C?(m!==fo.at&&t(new Qn(fr(u)),m),m=oe,u=X):m=fo.at}).next(()=>{m!==fo.at&&t(new Qn(fr(u)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wd(i,e){return Hc(i).put((s=i.currentSequenceNumber,{targetId:0,path:tn(e.path),sequenceNumber:s}));var s}class yp{constructor(){this.changes=new nl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,As.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Xt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _p{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Gc(e).put(s)}removeEntry(e,t,s){return Gc(e).delete(function(u,m){const C=u.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],Hh(m),C[C.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Qn(e,s)))}getEntry(e,t){let s=As.newInvalidDocument(t);return Gc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},(u,m)=>{s=this.jn(t,m)}).next(()=>s)}Wn(e,t){let s={size:0,document:As.newInvalidDocument(t)};return Gc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zc(t))},(u,m)=>{s={document:this.jn(t,m),size:Qh(m)}}).next(()=>s)}getEntries(e,t){let s=ca();return this.zn(e,t,(u,m)=>{const C=this.jn(u,m);s=s.insert(u,C)}).next(()=>s)}Hn(e,t){let s=ca(),u=new Xs(Qn.comparator);return this.zn(e,t,(m,C)=>{const R=this.jn(m,C);s=s.insert(m,R),u=u.insert(m,Qh(C))}).next(()=>({documents:s,Jn:u}))}zn(e,t,s){if(t.isEmpty())return Xt.resolve();let u=new Js(Ep);t.forEach(X=>u=u.add(X));const m=IDBKeyRange.bound(zc(u.first()),zc(u.last())),C=u.getIterator();let R=C.getNext();return Gc(e).Z({index:"documentKeyIndex",range:m},(X,oe,Se)=>{const at=Qn.fromSegments([...oe.prefixPath,oe.collectionGroup,oe.documentId]);for(;R&&Ep(R,at)<0;)s(R,null),R=C.getNext();R&&R.isEqual(at)&&(s(R,oe),R=C.hasNext()?C.getNext():null),R?Se.j(zc(R)):Se.done()}).next(()=>{for(;R;)s(R,null),R=C.hasNext()?C.getNext():null})}getAllFromCollection(e,t,s){const u=[t.popLast().toArray(),t.lastSegment(),Hh(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gc(e).W(IDBKeyRange.bound(u,m,!0)).next(C=>{let R=ca();for(const X of C){const oe=this.jn(Qn.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);R=R.insert(oe.key,oe)}return R})}getAllFromCollectionGroup(e,t,s,u){let m=ca();const C=ym(t,s),R=ym(t,na.max());return Gc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,R,!0)},(X,oe,Se)=>{const at=this.jn(Qn.fromSegments(oe.prefixPath.concat(oe.collectionGroup,oe.documentId)),oe);m=m.insert(at.key,at),m.size===u&&Se.done()}).next(()=>m)}newChangeBuffer(e){return new ac(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vp(e).get("remoteDocumentGlobalKey").next(t=>(hr(!!t),t))}Qn(e,t){return vp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const s=function v0(i,e){let t;if(e.document)t=ie(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Qn.fromSegments(e.noDocument.path),u=Uc(e.noDocument.readTime);t=As.newNoDocument(s,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rr();{const s=Qn.fromSegments(e.unknownDocument.path),u=Uc(e.unknownDocument.version);t=As.newUnknownDocument(s,u)}}return e.readTime&&t.setReadTime(function(s){const u=new Mr(s[0],s[1]);return Gn.fromTimestamp(u)}(e.readTime)),t}(this.yt,t);if(!s.isNoDocument()||!s.version.isEqual(Gn.min()))return s}return As.newInvalidDocument(e)}}function mm(i){return new _p(i)}class ac extends yp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new nl(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new Js((m,C)=>Rn(m.canonicalString(),C.canonicalString()));return this.changes.forEach((m,C)=>{const R=this.Xn.get(m);if(t.push(this.Yn.removeEntry(e,m,R.readTime)),C.isValidDocument()){const X=ap(this.Yn.yt,C);u=u.add(m.path.popLast()),s+=Qh(X)-R.size,t.push(this.Yn.addEntry(e,m,X))}else if(s-=R.size,this.trackRemovals){const X=ap(this.Yn.yt,C.convertToNoDocument(Gn.min()));t.push(this.Yn.addEntry(e,m,X))}}),u.forEach(m=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Yn.updateMetadata(e,s)),Xt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(s=>(this.Xn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:s,Jn:u})=>(u.forEach((m,C)=>{this.Xn.set(m,{size:C,readTime:s.get(m).readTime})}),s))}}function vp(i){return fa(i,"remoteDocumentGlobal")}function Gc(i){return fa(i,"remoteDocumentsV14")}function zc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ym(i,e){const t=e.documentKey.path.toArray();return[i,Hh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ep(i,e){const t=i.path.toArray(),s=e.path.toArray();let u=0;for(let m=0;m<t.length-2&&m<s.length-2;++m)if(u=Rn(t[m],s[m]),u)return u;return u=Rn(t.length,s.length),u||(u=Rn(t[t.length-2],s[s.length-2]),u||Rn(t[t.length-1],s[s.length-1]))}class I_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _m{constructor(e,t,s,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(null!==s&&Mu(s.mutation,u,$o.empty(),Mr.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Gi()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Gi()){const u=vl();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,s).next(m=>{let C=ic();return m.forEach((R,X)=>{C=C.insert(R,X.overlayedDocument)}),C}))}getOverlayedDocuments(e,t){const s=vl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Gi()))}populateOverlays(e,t,s){const u=[];return s.forEach(m=>{t.has(m)||u.push(m)}),this.documentOverlayCache.getOverlays(e,u).next(m=>{m.forEach((C,R)=>{t.set(C,R)})})}computeViews(e,t,s,u){let m=ca();const C=Ml(),R=Ml();return t.forEach((X,oe)=>{const Se=s.get(oe.key);u.has(oe.key)&&(void 0===Se||Se.mutation instanceof xl)?m=m.insert(oe.key,oe):void 0!==Se&&(C.set(oe.key,Se.mutation.getFieldMask()),Mu(Se.mutation,oe,Se.mutation.getFieldMask(),Mr.now()))}),this.recalculateAndSaveOverlays(e,m).next(X=>(X.forEach((oe,Se)=>C.set(oe,Se)),t.forEach((oe,Se)=>{var at;return R.set(oe,new I_(Se,null!==(at=C.get(oe))&&void 0!==at?at:null))}),R))}recalculateAndSaveOverlays(e,t){const s=Ml();let u=new Xs((C,R)=>C-R),m=Gi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(C=>{for(const R of C)R.keys().forEach(X=>{const oe=t.get(X);if(null===oe)return;let Se=s.get(X)||$o.empty();Se=R.applyToLocalView(oe,Se),s.set(X,Se);const at=(u.get(R.batchId)||Gi()).add(X);u=u.insert(R.batchId,at)})}).next(()=>{const C=[],R=u.getReverseIterator();for(;R.hasNext();){const X=R.getNext(),oe=X.key,Se=X.value,at=da();Se.forEach($t=>{if(!m.has($t)){const On=Kd(t.get($t),s.get($t));null!==On&&at.set($t,On),m=m.add($t)}}),C.push(this.documentOverlayCache.saveOverlays(e,oe,at))}return Xt.waitFor(C)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Qn.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):gl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var u}getNextDocuments(e,t,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,u).next(m=>{const C=u-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,u-m.size):Xt.resolve(vl());let R=-1,X=m;return C.next(oe=>Xt.forEach(oe,(Se,at)=>(R<at.largestBatchId&&(R=at.largestBatchId),m.get(Se)?Xt.resolve():this.remoteDocumentCache.getEntry(e,Se).next($t=>{X=X.insert(Se,$t)}))).next(()=>this.populateOverlays(e,oe,m)).next(()=>this.computeViews(e,X,oe,Gi())).next(Se=>({batchId:R,changes:au(Se)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qn(t)).next(s=>{let u=ic();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const u=t.collectionGroup;let m=ic();return this.indexManager.getCollectionParents(e,u).next(C=>Xt.forEach(C,R=>{const X=(oe=t,Se=R.child(u),new pl(Se,null,oe.explicitOrderBy.slice(),oe.filters.slice(),oe.limit,oe.limitType,oe.startAt,oe.endAt));var oe,Se;return this.getDocumentsMatchingCollectionQuery(e,X,s).next(oe=>{oe.forEach((Se,at)=>{m=m.insert(Se,at)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,s){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(m=>(u=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(m=>{m.forEach((R,X)=>{const oe=X.getKey();null===u.get(oe)&&(u=u.insert(oe,As.newInvalidDocument(oe)))});let C=ic();return u.forEach((R,X)=>{const oe=m.get(R);void 0!==oe&&Mu(oe.mutation,X,$o.empty(),Mr.now()),Na(t,X)&&(C=C.insert(R,X))}),C})}}class ih{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Xt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:xo(s.createTime)}),Xt.resolve()}getNamedQuery(e,t){return Xt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(s=t).name,query:Gh(s.bundledQuery),readTime:xo(s.readTime)}),Xt.resolve();var s}}class Id{constructor(){this.overlays=new Xs(Qn.comparator),this.es=new Map}getOverlay(e,t){return Xt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=vl();return Xt.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((u,m)=>{this.oe(e,t,m)}),Xt.resolve()}removeOverlaysForBatchId(e,t,s){const u=this.es.get(s);return void 0!==u&&(u.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(s)),Xt.resolve()}getOverlaysForCollection(e,t,s){const u=vl(),m=t.length+1,C=new Qn(t.child("")),R=this.overlays.getIteratorFrom(C);for(;R.hasNext();){const X=R.getNext().value,oe=X.getKey();if(!t.isPrefixOf(oe.path))break;oe.path.length===m&&X.largestBatchId>s&&u.set(X.getKey(),X)}return Xt.resolve(u)}getOverlaysForCollectionGroup(e,t,s,u){let m=new Xs((oe,Se)=>oe-Se);const C=this.overlays.getIterator();for(;C.hasNext();){const oe=C.getNext().value;if(oe.getKey().getCollectionGroup()===t&&oe.largestBatchId>s){let Se=m.get(oe.largestBatchId);null===Se&&(Se=vl(),m=m.insert(oe.largestBatchId,Se)),Se.set(oe.getKey(),oe)}}const R=vl(),X=m.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((oe,Se)=>R.set(oe,Se)),!(R.size()>=u)););return Xt.resolve(R)}oe(e,t,s){const u=this.overlays.get(s.key);if(null!==u){const C=this.es.get(u.largestBatchId).delete(s.key);this.es.set(u.largestBatchId,C)}this.overlays=this.overlays.insert(s.key,new jh(t,s));let m=this.es.get(t);void 0===m&&(m=Gi(),this.es.set(t,m)),this.es.set(t,m.add(s.key))}}class sh{constructor(){this.ns=new Js(Lo.ss),this.rs=new Js(Lo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const s=new Lo(e,t);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.cs(new Lo(e,t))}hs(e,t){e.forEach(s=>this.removeReference(s,t))}ls(e){const t=new Qn(new ai([])),s=new Lo(t,e),u=new Lo(t,e+1),m=[];return this.rs.forEachInRange([s,u],C=>{this.cs(C),m.push(C.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Qn(new ai([])),s=new Lo(t,e),u=new Lo(t,e+1);let m=Gi();return this.rs.forEachInRange([s,u],C=>{m=m.add(C.key)}),m}containsKey(e){const t=new Lo(e,0),s=this.ns.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Lo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Qn.comparator(e.key,t.key)||Rn(e._s,t._s)}static os(e,t){return Rn(e._s,t._s)||Qn.comparator(e.key,t.key)}}class oh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Js(Lo.ss)}checkEmpty(e){return Xt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,u){const m=this.ws;this.ws++;const C=new ip(m,t,s,u);this.mutationQueue.push(C);for(const R of u)this.gs=this.gs.add(new Lo(R.key,m)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return Xt.resolve(C)}lookupMutationBatch(e,t){return Xt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),m=u<0?0:u;return Xt.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Xt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Lo(t,0),u=new Lo(t,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([s,u],C=>{const R=this.ys(C._s);m.push(R)}),Xt.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Js(Rn);return t.forEach(u=>{const m=new Lo(u,0),C=new Lo(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,C],R=>{s=s.add(R._s)})}),Xt.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let m=s;Qn.isDocumentKey(m)||(m=m.child(""));const C=new Lo(new Qn(m),0);let R=new Js(Rn);return this.gs.forEachWhile(X=>{const oe=X.key.path;return!!s.isPrefixOf(oe)&&(oe.length===u&&(R=R.add(X._s)),!0)},C),Xt.resolve(this.Is(R))}Is(e){const t=[];return e.forEach(s=>{const u=this.ys(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){hr(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let s=this.gs;return Xt.forEach(t.mutations,u=>{const m=new Lo(u.key,t.batchId);return s=s.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,t){const s=new Lo(t,0),u=this.gs.firstAfterOrEqual(s);return Xt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return Xt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sd{constructor(e){this.Es=e,this.docs=new Xs(Qn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,u=this.docs.get(s),m=u?u.size:0,C=this.Es(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:C}),this.size+=C-m,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Xt.resolve(s?s.document.mutableCopy():As.newInvalidDocument(t))}getEntries(e,t){let s=ca();return t.forEach(u=>{const m=this.docs.get(u);s=s.insert(u,m?m.document.mutableCopy():As.newInvalidDocument(u))}),Xt.resolve(s)}getAllFromCollection(e,t,s){let u=ca();const m=new Qn(t.child("")),C=this.docs.getIteratorFrom(m);for(;C.hasNext();){const{key:R,value:{document:X}}=C.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||_a(lo(X),s)<=0||(u=u.insert(X.key,X.mutableCopy()))}return Xt.resolve(u)}getAllFromCollectionGroup(e,t,s,u){rr()}As(e,t){return Xt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new S_(this)}getSize(e){return Xt.resolve(this.size)}}class S_ extends yp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(s)}),Xt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class vm{constructor(e){this.persistence=e,this.Rs=new nl(t=>jl(t),Hl),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new sh,this.targetCount=0,this.vs=Td.Pn()}forEachTarget(e,t){return this.Rs.forEach((s,u)=>t(u)),Xt.resolve()}getLastRemoteSnapshotVersion(e){return Xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Xt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),Xt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Td(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Xt.resolve()}updateTargetData(e,t){return this.Dn(t),Xt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Xt.resolve()}removeTargets(e,t,s){let u=0;const m=[];return this.Rs.forEach((C,R)=>{R.sequenceNumber<=t&&null===s.get(R.targetId)&&(this.Rs.delete(C),m.push(this.removeMatchingKeysForTargetId(e,R.targetId)),u++)}),Xt.waitFor(m).next(()=>u)}getTargetCount(e){return Xt.resolve(this.targetCount)}getTargetData(e,t){const s=this.Rs.get(t)||null;return Xt.resolve(s)}addMatchingKeys(e,t,s){return this.Ps.us(t,s),Xt.resolve()}removeMatchingKeys(e,t,s){this.Ps.hs(t,s);const u=this.persistence.referenceDelegate,m=[];return u&&t.forEach(C=>{m.push(u.markPotentiallyOrphaned(e,C))}),Xt.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Xt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ps.ds(t);return Xt.resolve(s)}containsKey(e,t){return Xt.resolve(this.Ps.containsKey(t))}}class Cp{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new fo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new vm(this),this.indexManager=new pp,this.remoteDocumentCache=new Sd(s=>this.referenceDelegate.xs(s)),this.yt=new op(t),this.Ns=new ih(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Id,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Vs[e.toKey()];return s||(s=new oh(t,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,s){En("MemoryPersistence","Starting transaction:",e);const u=new bp(this.Ss.next());return this.referenceDelegate.ks(),s(u).next(m=>this.referenceDelegate.Os(u).next(()=>m)).toPromise().then(m=>(u.raiseOnCommittedEvent(),m))}Ms(e,t){return Xt.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,t)))}}class bp extends Ic{constructor(e){super(),this.currentSequenceNumber=e}}class Dd{constructor(e){this.persistence=e,this.Fs=new sh,this.$s=null}static Bs(e){return new Dd(e)}get Ls(){if(this.$s)return this.$s;throw rr()}addReference(e,t,s){return this.Fs.addReference(s,t),this.Ls.delete(s.toString()),Xt.resolve()}removeReference(e,t,s){return this.Fs.removeReference(s,t),this.Ls.add(s.toString()),Xt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Xt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(m=>this.Ls.add(m.toString()))}).next(()=>s.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xt.forEach(this.Ls,s=>{const u=Qn.fromPath(s);return this.qs(e,u).next(m=>{m||t.removeEntry(u,Gn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(s=>{s?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Xt.or([()=>Xt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Em{constructor(e){this.yt=e}$(e,t,s,u){const m=new Ya("createOrUpgrade",t);var R;s<1&&u>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ci,{unique:!0}),R.createObjectStore("documentMutations"),ah(e),function(R){R.createObjectStore("remoteDocuments")}(e));let C=Xt.resolve();return s<3&&u>=3&&(0!==s&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),ah(e)),C=C.next(()=>function(R){const X=R.store("targetGlobal"),oe={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gn.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",oe)}(m))),s<4&&u>=4&&(0!==s&&(C=C.next(()=>function(R,X){return X.store("mutations").W().next(oe=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ci,{unique:!0});const Se=X.store("mutations"),at=oe.map($t=>Se.put($t));return Xt.waitFor(at)})}(e,m))),C=C.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(C=C.next(()=>this.Us(m))),s<6&&u>=6&&(C=C.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),s<7&&u>=7&&(C=C.next(()=>this.Gs(m))),s<8&&u>=8&&(C=C.next(()=>this.Qs(e,m))),s<9&&u>=9&&(C=C.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(C=C.next(()=>this.js(m))),s<11&&u>=11&&(C=C.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(C=C.next(()=>{!function(R){const X=R.createObjectStore("documentOverlays",{keyPath:im});X.createIndex("collectionPathOverlayIndex",Uh,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",Bh,{unique:!1})}(e)})),s<13&&u>=13&&(C=C.next(()=>function(R){const X=R.createObjectStore("remoteDocumentsV14",{keyPath:Vc});X.createIndex("documentKeyIndex",Wl),X.createIndex("collectionGroupIndex",Lh)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(C=C.next(()=>this.zs(e,m))),s<15&&u>=15&&(C=C.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:tm}).createIndex("sequenceNumberIndex",nm,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:rm}).createIndex("documentKeyIndex",Jf,{unique:!1})}(e))),C}Ks(e){let t=0;return e.store("remoteDocuments").Z((s,u)=>{t+=Qh(u)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Us(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(u=>Xt.forEach(u,m=>{const C=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",C).next(R=>Xt.forEach(R,X=>{hr(X.userId===m.userId);const oe=Bc(this.yt,X);return gp(e,m.userId,oe).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const m=[];return s.Z((C,R)=>{const X=new ai(C),oe=[0,tn(X)];m.push(t.get(oe).next(Se=>Se?Xt.resolve():t.put({targetId:0,path:tn(X),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Xt.waitFor(m))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:g_});const s=t.store("collectionParents"),u=new hm,m=C=>{if(u.add(C)){const R=C.lastSegment(),X=C.popLast();return s.put({collectionId:R,parent:tn(X)})}};return t.store("remoteDocuments").Z({X:!0},(C,R)=>{const X=new ai(C);return m(X.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([C,R,X],oe)=>{const Se=fr(R);return m(Se.popLast())}))}js(e){const t=e.store("targets");return t.Z((s,u)=>{const m=Wa(u),C=sm(this.yt,m);return t.put(C)})}Ws(e,t){const s=t.store("remoteDocuments"),u=[];return s.Z((m,C)=>{const R=t.store("remoteDocumentsV14"),X=(oe=C,oe.document?new Qn(ai.fromString(oe.document.name).popFirst(5)):oe.noDocument?Qn.fromSegments(oe.noDocument.path):oe.unknownDocument?Qn.fromSegments(oe.unknownDocument.path):rr()).path.toArray();var oe;const Se={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};u.push(R.put(Se))}).next(()=>Xt.waitFor(u))}zs(e,t){const s=t.store("mutations"),u=mm(this.yt),m=new Cp(Dd.Bs,this.yt.ie);return s.W().next(C=>{const R=new Map;return C.forEach(X=>{var oe;let Se=null!==(oe=R.get(X.userId))&&void 0!==oe?oe:Gi();Bc(this.yt,X).keys().forEach(at=>Se=Se.add(at)),R.set(X.userId,Se)}),Xt.forEach(R,(X,oe)=>{const Se=new pr(oe),at=zh.re(this.yt,Se),$t=m.getIndexManager(Se),On=bd.re(Se,this.yt,$t,m.referenceDelegate);return new _m(u,On,at,$t).recalculateAndSaveOverlaysForDocumentKeys(new rp(t,fo.at),X).next()})})}}function ah(i){i.createObjectStore("targetDocuments",{keyPath:p_}).createIndex("documentTargetsIndex",Vh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",em,{unique:!0}),i.createObjectStore("targetGlobal")}const Tp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Xh{constructor(e,t,s,u,m,C,R,X,oe,Se,at=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Hs=m,this.window=C,this.document=R,this.Js=oe,this.Ys=Se,this.Xs=at,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$t=>Promise.resolve(),!Xh.C())throw new In(qt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gm(this,u),this.ii=t+"main",this.yt=new op(X),this.ri=new va(this.ii,this.Xs,new Em(this.yt)),this.Cs=new E0(this.referenceDelegate,this.yt),this.remoteDocumentCache=mm(this.yt),this.Ns=new m_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Se&&Bi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new In(qt.FAILED_PRECONDITION,Tp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new fo(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var s=(0,xe.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,xe.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,xe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ia(e))return En("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return En("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Jh(e).get("owner").next(t=>Xt.resolve(this.mi(t)))}gi(e){return lh(e).delete(this.clientId)}yi(){var e=this;return(0,xe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=fa(s,"clientMetadata");return u.W().next(m=>{const C=e.Ii(m,18e5),R=m.filter(X=>-1===C.indexOf(X));return Xt.forEach(R,X=>u.delete(X.clientId)).next(()=>R)})}).catch(()=>[]);if(e.oi)for(const s of t)e.oi.removeItem(e.Ti(s.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Xt.resolve(!0):Jh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new In(qt.FAILED_PRECONDITION,Tp);return!1}}return!(!this.networkEnabled||!this.inForeground)||lh(e).W().next(s=>void 0===this.Ii(s,5e3).find(u=>{if(this.clientId!==u.clientId){const C=!this.inForeground&&u.inForeground,R=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||C&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&En("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,xe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new rp(t,fo.at);return e._i(s).next(()=>e.gi(s))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(s=>this.pi(s.updateTimeMs,t)&&!this.Ei(s.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>lh(e).W().next(t=>this.Ii(t,18e5).map(s=>s.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return bd.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new __(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return zh.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,s){En("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",m=15===(C=this.Xs)?Xd:14===C?$h:13===C?np:12===C?tp:11===C?ep:void rr();var C;let R;return this.ri.runTransaction(e,u,m,X=>(R=new rp(X,this.Ss?this.Ss.next():fo.at),"readwrite-primary"===t?this.fi(R).next(oe=>!!oe||this.di(R)).next(oe=>{if(!oe)throw Bi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new In(qt.FAILED_PRECONDITION,wc);return s(R)}).next(oe=>this.wi(R).next(()=>oe)):this.Vi(R).next(()=>s(R)))).then(X=>(R.raiseOnCommittedEvent(),X))}Vi(e){return Jh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new In(qt.FAILED_PRECONDITION,Tp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jh(e).put("owner",t)}static C(){return va.C()}_i(e){const t=Jh(e);return t.get("owner").next(s=>this.mi(s)?(En("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Xt.resolve())}pi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Bi(`Detected an update time that is in the future: ${e} > ${s}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ut.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const s=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return En("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Bi("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Bi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jh(i){return fa(i,"owner")}function lh(i){return fa(i,"clientMetadata")}function ef(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class wp{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Si=s,this.Di=u}static Ci(e,t){let s=Gi(),u=Gi();for(const m of t.docChanges)switch(m.type){case 0:s=s.add(m.doc.key);break;case 1:u=u.add(m.doc.key)}return new wp(e,t.fromCache,s,u)}}class Ip{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,s,u){return this.ki(e,t).next(m=>m||this.Oi(e,t,u,s)).next(m=>m||this.Mi(e,t))}ki(e,t){if(ru(t))return Xt.resolve(null);let s=ua(t);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=su(t,null,"F"),s=ua(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(m=>{const C=Gi(...m);return this.Ni.getDocuments(e,C).next(R=>this.indexManager.getMinOffset(e,s).next(X=>{const oe=this.Fi(t,R);return this.$i(t,oe,C,X.readTime)?this.ki(e,su(t,null,"F")):this.Bi(e,oe,t,X)}))})))}Oi(e,t,s,u){return ru(t)||u.isEqual(Gn.min())?this.Mi(e,t):this.Ni.getDocuments(e,s).next(m=>{const C=this.Fi(t,m);return this.$i(t,C,s,u)?this.Mi(e,t):(us()<=Kt.in.DEBUG&&En("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Xu(t)),this.Bi(e,C,t,mu(u,-1)))})}Fi(e,t){let s=new Js(Ju(e));return t.forEach((u,m)=>{Na(e,m)&&(s=s.add(m))}),s}$i(e,t,s,u){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(u)>0)}Mi(e,t){return us()<=Kt.in.DEBUG&&En("QueryEngine","Using full collection scan to execute query:",Xu(t)),this.Ni.getDocumentsMatchingQuery(e,t,na.min())}Bi(e,t,s,u){return this.Ni.getDocumentsMatchingQuery(e,s,u).next(m=>(t.forEach(C=>{m=m.insert(C.key,C)}),m))}}class D_{constructor(e,t,s,u){this.persistence=e,this.Li=t,this.yt=u,this.qi=new Xs(Rn),this.Ui=new nl(m=>jl(m),Hl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _m(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function Cm(i,e,t,s){return new D_(i,e,t,s)}function ol(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,xe.Z)(function*(i,e){const t=er(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let u;return t.mutationQueue.getAllMutationBatches(s).next(m=>(u=m,t.Qi(e),t.mutationQueue.getAllMutationBatches(s))).next(m=>{const C=[],R=[];let X=Gi();for(const oe of u){C.push(oe.batchId);for(const Se of oe.mutations)X=X.add(Se.key)}for(const oe of m){R.push(oe.batchId);for(const Se of oe.mutations)X=X.add(Se.key)}return t.localDocuments.getDocuments(s,X).next(oe=>({ji:oe,removedBatchIds:C,addedBatchIds:R}))})})}),Sp.apply(this,arguments)}function A_(i,e){const t=er(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),m=t.Gi.newChangeBuffer({trackRemovals:!0});return function(C,R,X,oe){const Se=X.batch,at=Se.keys();let $t=Xt.resolve();return at.forEach(On=>{$t=$t.next(()=>oe.getEntry(R,On)).next(zn=>{const Dr=X.docVersions.get(On);hr(null!==Dr),zn.version.compareTo(Dr)<0&&(Se.applyToRemoteDocument(zn,X),zn.isValidDocument()&&(zn.setReadTime(X.commitVersion),oe.addEntry(zn)))})}),$t.next(()=>C.mutationQueue.removeMutationBatch(R,Se))}(t,s,e,m).next(()=>m.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(C){let R=Gi();for(let X=0;X<C.mutationResults.length;++X)C.mutationResults[X].transformResults.length>0&&(R=R.add(C.batch.mutations[X].key));return R}(e))).next(()=>t.localDocuments.getDocuments(s,u))})}function x_(i){const e=er(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function C0(i,e){const t=er(i),s=e.snapshotVersion;let u=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const C=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.qi;const R=[];e.targetChanges.forEach((Se,at)=>{const $t=u.get(at);if(!$t)return;R.push(t.Cs.removeMatchingKeys(m,Se.removedDocuments,at).next(()=>t.Cs.addMatchingKeys(m,Se.addedDocuments,at)));let On=$t.withSequenceNumber(m.currentSequenceNumber);var zn,Dr,di;e.targetMismatches.has(at)?On=On.withResumeToken(so.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):Se.resumeToken.approximateByteSize()>0&&(On=On.withResumeToken(Se.resumeToken,s)),u=u.insert(at,On),Dr=On,di=Se,(0===(zn=$t).resumeToken.approximateByteSize()||Dr.snapshotVersion.toMicroseconds()-zn.snapshotVersion.toMicroseconds()>=3e8||di.addedDocuments.size+di.modifiedDocuments.size+di.removedDocuments.size>0)&&R.push(t.Cs.updateTargetData(m,On))});let X=ca(),oe=Gi();if(e.documentUpdates.forEach(Se=>{e.resolvedLimboDocuments.has(Se)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(m,Se))}),R.push(Dp(m,C,e.documentUpdates).next(Se=>{X=Se.Wi,oe=Se.zi})),!s.isEqual(Gn.min())){const Se=t.Cs.getLastRemoteSnapshotVersion(m).next(at=>t.Cs.setTargetsMetadata(m,m.currentSequenceNumber,s));R.push(Se)}return Xt.waitFor(R).next(()=>C.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,X,oe)).next(()=>X)}).then(m=>(t.qi=u,m))}function Dp(i,e,t){let s=Gi(),u=Gi();return t.forEach(m=>s=s.add(m)),e.getEntries(i,s).next(m=>{let C=ca();return t.forEach((R,X)=>{const oe=m.get(R);X.isFoundDocument()!==oe.isFoundDocument()&&(u=u.add(R)),X.isNoDocument()&&X.version.isEqual(Gn.min())?(e.removeEntry(R,X.readTime),C=C.insert(R,X)):!oe.isValidDocument()||X.version.compareTo(oe.version)>0||0===X.version.compareTo(oe.version)&&oe.hasPendingWrites?(e.addEntry(X),C=C.insert(R,X)):En("LocalStore","Ignoring outdated watch update for ",R,". Current version:",oe.version," Watch version:",X.version)}),{Wi:C,zi:u}})}function b0(i,e){const t=er(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ad(i,e){const t=er(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.Cs.getTargetData(s,e).next(m=>m?(u=m,Xt.resolve(u)):t.Cs.allocateTargetId(s).next(C=>(u=new uu(e,C,0,s.currentSequenceNumber),t.Cs.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.qi.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.qi=t.qi.insert(s.targetId,s),t.Ui.set(e,s.targetId)),s})}function lc(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,xe.Z)(function*(i,e,t){const s=er(i),u=s.qi.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",m,C=>s.persistence.referenceDelegate.removeTarget(C,u)))}catch(C){if(!ia(C))throw C;En("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}s.qi=s.qi.remove(e),s.Ui.delete(u.target)}),tf.apply(this,arguments)}function nf(i,e,t){const s=er(i);let u=Gn.min(),m=Gi();return s.persistence.runTransaction("Execute query","readonly",C=>function(R,X,oe){const Se=er(R),at=Se.Ui.get(oe);return void 0!==at?Xt.resolve(Se.qi.get(at)):Se.Cs.getTargetData(X,oe)}(s,C,ua(e)).next(R=>{if(R)return u=R.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(C,R.targetId).next(X=>{m=X})}).next(()=>s.Li.getDocumentsMatchingQuery(C,e,t?u:Gn.min(),t?m:Gi())).next(R=>(Ap(s,wa(e),R),{documents:R,Hi:m})))}function bm(i,e){const t=er(i),s=er(t.Cs),u=t.qi.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",m=>s.ne(m,e).next(C=>C?C.target:null))}function Tm(i,e){const t=er(i),s=t.Ki.get(e)||Gn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,mu(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Ap(t,e,u),u))}function Ap(i,e,t){let s=i.Ki.get(e)||Gn.min();t.forEach((u,m)=>{m.readTime.compareTo(s)>0&&(s=m.readTime)}),i.Ki.set(e,s)}function rf(){return rf=(0,xe.Z)(function*(i,e,t,s){const u=er(i);let m=Gi(),C=ca();for(const oe of t){const Se=e.Ji(oe.metadata.name);oe.document&&(m=m.add(Se));const at=e.Yi(oe);at.setReadTime(e.Xi(oe.metadata.readTime)),C=C.insert(Se,at)}const R=u.Gi.newChangeBuffer({trackRemovals:!0}),X=yield Ad(u,(oe=s,ua(nu(ai.fromString(`__bundle__/docs/${oe}`)))));var oe;return u.persistence.runTransaction("Apply bundle documents","readwrite",oe=>Dp(oe,R,C).next(Se=>(R.apply(oe),Se)).next(Se=>u.Cs.removeMatchingKeysForTargetId(oe,X.targetId).next(()=>u.Cs.addMatchingKeys(oe,m,X.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(oe,Se.Wi,Se.zi)).next(()=>Se.Wi)))}),rf.apply(this,arguments)}function R_(i,e){return xp.apply(this,arguments)}function xp(){return xp=(0,xe.Z)(function*(i,e,t=Gi()){const s=yield Ad(i,ua(Gh(e.bundledQuery))),u=er(i);return u.persistence.runTransaction("Save named query","readwrite",m=>{const C=xo(e.readTime);if(s.snapshotVersion.compareTo(C)>=0)return u.Ns.saveNamedQuery(m,e);const R=s.withResumeToken(so.EMPTY_BYTE_STRING,C);return u.qi=u.qi.insert(R.targetId,R),u.Cs.updateTargetData(m,R).next(()=>u.Cs.removeMatchingKeysForTargetId(m,s.targetId)).next(()=>u.Cs.addMatchingKeys(m,t,s.targetId)).next(()=>u.Ns.saveNamedQuery(m,e))})}),xp.apply(this,arguments)}function Mp(i,e){return`firestore_clients_${i}_${e}`}function Rp(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Pp(i,e){return`firestore_targets_${i}_${e}`}class El{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static Zi(e,t,s){const u=JSON.parse(s);let m,C="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return C&&u.error&&(C="string"==typeof u.error.message&&"string"==typeof u.error.code,C&&(m=new In(u.error.code,u.error.message))),C?new El(e,t,u.state,m):(Bi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wc{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let u,m="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return m&&s.error&&(m="string"==typeof s.error.message&&"string"==typeof s.error.code,m&&(u=new In(s.error.code,s.error.message))),m?new Wc(e,s.state,u):(Bi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,m=lu();for(let C=0;u&&C<s.activeTargetIds.length;++C)u=Qa(s.activeTargetIds[C]),m=m.add(s.activeTargetIds[C]);return u?new sf(e,m):(Bi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Op{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Op(t.clientId,t.onlineState):(Bi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wm{constructor(){this.activeTargetIds=lu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class af{constructor(e,t,s,u,m){this.window=e,this.Hs=t,this.persistenceKey=s,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Xs(Rn),this.started=!1,this.cr=[];const C=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=Mp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new wm),this.lr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,xe.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const m=e.getItem(Mp(e.persistenceKey,u));if(m){const C=sf.Zi(u,m);C&&(e.ur=e.ur.insert(C.clientId,C))}}e.gr();const s=e.storage.getItem(e.wr);if(s){const u=e.yr(s);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,s){this.Tr(e,t,s),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pp(this.persistenceKey,e));if(s){const u=Wc.Zi(e,s);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pp(this.persistenceKey,e))}updateQueryState(e,t,s){this.Rr(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.Er(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return En("SharedClientState","READ",e,t),t}setItem(e,t){En("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){En("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(En("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ar)return void Bi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,xe.Z)(function*(){if(t.started){if(null!==s.key)if(t.lr.test(s.key)){if(null==s.newValue){const u=t.vr(s.key);return t.Vr(u,null)}{const u=t.Sr(s.key,s.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const u=t.Dr(s.key,s.newValue);if(u)return t.Cr(u)}}else if(t._r.test(s.key)){if(null!==s.newValue){const u=t.Nr(s.key,s.newValue);if(u)return t.kr(u)}}else if(s.key===t.wr){if(null!==s.newValue){const u=t.yr(s.newValue);if(u)return t.pr(u)}}else if(s.key===t.hr){const u=function(m){let C=fo.at;if(null!=m)try{const R=JSON.parse(m);hr("number"==typeof R),C=R}catch(R){Bi("SharedClientState","Failed to read sequence number from WebStorage",R)}return C}(s.newValue);u!==fo.at&&t.sequenceNumberHandler(u)}else if(s.key===t.mr){const u=t.Or(s.newValue);yield Promise.all(u.map(m=>t.syncEngine.Mr(m)))}}else t.cr.push(s)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,s){const u=new El(this.currentUser,e,t,s),m=Rp(this.persistenceKey,this.currentUser,e);this.setItem(m,u.tr())}Er(e){const t=Rp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,s){const u=Pp(this.persistenceKey,e),m=new Wc(e,t,s);this.setItem(u,m.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const s=this.vr(e);return sf.Zi(s,t)}Dr(e,t){const s=this.dr.exec(e),u=Number(s[1]);return El.Zi(new pr(void 0!==s[2]?s[2]:null),u,t)}Nr(e,t){const s=this._r.exec(e),u=Number(s[1]);return Wc.Zi(u,t)}yr(e){return Op.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);En("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const s=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),m=this.Ir(s),C=[],R=[];return m.forEach(X=>{u.has(X)||C.push(X)}),u.forEach(X=>{m.has(X)||R.push(X)}),this.syncEngine.Br(C,R).then(()=>{this.ur=s})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=lu();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class Im{constructor(){this.Lr=new wm,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,s){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new wm,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class P_{Ur(e){}shutdown(){}}class Sm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){En("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){En("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Np={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O_{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class N_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,s,u,m){const C=this.ho(e,t);En("RestConnection","Sending: ",C,s);const R={};return this.lo(R,u,m),this.fo(e,C,R,s).then(X=>(En("RestConnection","Received: ",X),X),X=>{throw $i("RestConnection",`${e} failed with error: `,X,"url: ",C,"request:",s),X})}_o(e,t,s,u,m,C){return this.ao(e,t,s,u,m)}lo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,m)=>e[m]=u),s&&s.headers.forEach((u,m)=>e[m]=u)}ho(e,t){return`${this.oo}/v1/${t}:${Np[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,s,u){return new Promise((m,C)=>{const R=new Pi;R.setWithCredentials(!0),R.listenOnce(wt.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case qe.NO_ERROR:const oe=R.getResponseJson();En("Connection","XHR received:",JSON.stringify(oe)),m(oe);break;case qe.TIMEOUT:En("Connection",'RPC "'+e+'" timed out'),C(new In(qt.DEADLINE_EXCEEDED,"Request time out"));break;case qe.HTTP_ERROR:const Se=R.getStatus();if(En("Connection",'RPC "'+e+'" failed with status:',Se,"response text:",R.getResponseText()),Se>0){let at=R.getResponseJson();Array.isArray(at)&&(at=at[0]);const $t=null==at?void 0:at.error;if($t&&$t.status&&$t.message){const On=function(zn){const Dr=zn.toLowerCase().replace(/_/g,"-");return Object.values(qt).indexOf(Dr)>=0?Dr:qt.UNKNOWN}($t.status);C(new In(On,$t.message))}else C(new In(qt.UNKNOWN,"Server responded with status "+R.getStatus()))}else C(new In(qt.UNAVAILABLE,"Connection failed."));break;default:rr()}}finally{En("Connection",'RPC "'+e+'" completed.')}});const X=JSON.stringify(u);R.send(t,"POST",X,s,15)})}wo(e,t,s){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=Ee(),C=ke(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new Er({})),this.lo(R.initMessageHeaders,t,s),R.encodeInitMessageHeaders=!0;const X=u.join("");En("Connection","Creating WebChannel: "+X,R);const oe=m.createWebChannel(X,R);let Se=!1,at=!1;const $t=new O_({Hr:zn=>{at?En("Connection","Not sending because WebChannel is closed:",zn):(Se||(En("Connection","Opening WebChannel transport."),oe.open(),Se=!0),En("Connection","WebChannel sending:",zn),oe.send(zn))},Jr:()=>oe.close()}),On=(zn,Dr,di)=>{zn.listen(Dr,mo=>{try{di(mo)}catch(No){setTimeout(()=>{throw No},0)}})};return On(oe,Jr.EventType.OPEN,()=>{at||En("Connection","WebChannel transport opened.")}),On(oe,Jr.EventType.CLOSE,()=>{at||(at=!0,En("Connection","WebChannel transport closed"),$t.io())}),On(oe,Jr.EventType.ERROR,zn=>{at||(at=!0,$i("Connection","WebChannel transport errored:",zn),$t.io(new In(qt.UNAVAILABLE,"The operation could not be completed")))}),On(oe,Jr.EventType.MESSAGE,zn=>{var Dr;if(!at){const di=zn.data[0];hr(!!di);const mo=di,No=mo.error||(null===(Dr=mo[0])||void 0===Dr?void 0:Dr.error);if(No){En("Connection","WebChannel received error:",No);const ks=No.status;let qo=function(Gs){const pa=Oo[Gs];if(void 0!==pa)return Pu(pa)}(ks),Fs=No.message;void 0===qo&&(qo=qt.INTERNAL,Fs="Unknown error status: "+ks+" with message "+No.message),at=!0,$t.io(new In(qo,Fs)),oe.close()}else En("Connection","WebChannel received:",di),$t.ro(di)}}),On(C,sn.STAT_EVENT,zn=>{zn.stat===sr.PROXY?En("Connection","Detected buffering proxy"):zn.stat===sr.NOPROXY&&En("Connection","Detected no buffering proxy")}),setTimeout(()=>{$t.so()},0),$t}}function uh(){return"undefined"!=typeof window?window:null}function xd(){return"undefined"!=typeof document?document:null}function ch(i){return new rl(i,!0)}class dh{constructor(e,t,s=1e3,u=1.5,m=6e4){this.Hs=e,this.timerId=t,this.mo=s,this.yo=u,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-s);u>0&&En("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class lf{constructor(e,t,s,u,m,C,R,X){this.Hs=e,this.vo=s,this.Vo=u,this.connection=m,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=R,this.listener=X,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new dh(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,xe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,xe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var s=this;return(0,xe.Z)(function*(){s.Lo(),s.qo(),s.xo.cancel(),s.So++,4!==e?s.xo.reset():t&&t.code===qt.RESOURCE_EXHAUSTED?(Bi(t.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),s.xo.Ao()):t&&t.code===qt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Uo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.So===t&&this.Go(s,u)},s=>{e(()=>{const u=new In(qt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(u)})})}Go(e,t){const s=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{s(()=>this.Qo(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,xe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return En("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(En("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dm extends lf{constructor(e,t,s,u,m,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,u,C),this.yt=m}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function bt(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:rr(),u=e.targetChange.targetIds||[],m=function(X,oe){return X.wt?(hr(void 0===oe||"string"==typeof oe),so.fromBase64String(oe||"")):(hr(void 0===oe||oe instanceof Uint8Array),so.fromUint8Array(oe||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,R=C&&function(X){const oe=void 0===X.code?qt.UNKNOWN:Pu(X.code);return new In(oe,X.message||"")}(C);t=new Qd(s,u,m,R||null)}else if("documentChange"in e){const s=e.documentChange,u=Rl(i,s.document.name),m=xo(s.document.updateTime),C=s.document.createTime?xo(s.document.createTime):Gn.min(),R=new Fo({mapValue:{fields:s.document.fields}}),X=As.newFoundDocument(u,m,C,R);t=new Sa(s.targetIds||[],s.removedTargetIds||[],X.key,X)}else if("documentDelete"in e){const s=e.documentDelete,u=Rl(i,s.document),m=s.readTime?xo(s.readTime):Gn.min(),C=As.newNoDocument(u,m);t=new Sa([],s.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const s=e.documentRemove,u=Rl(i,s.document);t=new Sa([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return rr();{const s=e.filter,m=new Rc(s.count||0);t=new Pc(s.targetId,m)}}var X;return t}(this.yt,e),s=function(u){if(!("targetChange"in u))return Gn.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?Gn.min():m.readTime?xo(m.readTime):Gn.min()}(e);return this.listener.Wo(t,s)}zo(e){const t={};t.database=p(this.yt),t.addTarget=function(u,m){let C;const R=m.target;return C=Yu(R)?{documents:yi(u,R)}:{query:li(u,R)},C.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?C.resumeToken=Fc(u,m.resumeToken):m.snapshotVersion.compareTo(Gn.min())>0&&(C.readTime=il(u,m.snapshotVersion.toTimestamp())),C}(this.yt,e);const s=function f(i,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rr()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Bo(t)}Ho(e){const t={};t.database=p(this.yt),t.removeTarget=e,this.Bo(t)}}class T0 extends lf{constructor(e,t,s,u,m,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,u,C),this.yt=m,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(hr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Rr(i,e){return i&&i.length>0?(hr(void 0!==e),i.map(t=>function(s,u){let m=xo(s.updateTime?s.updateTime:u);return m.isEqual(Gn.min())&&(m=xo(u)),new _l(m,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=xo(e.commitTime);return this.listener.Zo(s,t)}return hr(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=p(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>dn(this.yt,s))};this.Bo(t)}}class w0 extends class{}{constructor(e,t,s,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.yt=u,this.nu=!1}su(){if(this.nu)throw new In(qt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.connection.ao(e,t,s,u,m)).catch(u=>{throw"FirebaseError"===u.name?(u.code===qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new In(qt.UNKNOWN,u.toString())})}_o(e,t,s,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,C])=>this.connection._o(e,t,s,m,C,u)).catch(m=>{throw"FirebaseError"===m.name?(m.code===qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new In(qt.UNKNOWN,m.toString())})}terminate(){this.nu=!0}}class k_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Bi(t),this.ou=!1):En("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class xm{constructor(e,t,s,u,m){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=m,this.mu.Ur(R=>{s.enqueueAndForget((0,xe.Z)(function*(){var X;hu(C)&&(En("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,xe.Z)(function*(oe){const Se=er(oe);Se._u.add(4),yield qc(Se),Se.gu.set("Unknown"),Se._u.delete(4),yield Md(Se)}),function(oe){return X.apply(this,arguments)})(C))}))}),this.gu=new k_(s,u)}}function Md(i){return uf.apply(this,arguments)}function uf(){return uf=(0,xe.Z)(function*(i){if(hu(i))for(const e of i.wu)yield e(!0)}),uf.apply(this,arguments)}function qc(i){return cf.apply(this,arguments)}function cf(){return cf=(0,xe.Z)(function*(i){for(const e of i.wu)yield e(!1)}),cf.apply(this,arguments)}function Pl(i,e){const t=er(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),hh(t)?Rm(t):Nd(t).ko()&&Fp(t,e))}function uc(i,e){const t=er(i),s=Nd(t);t.du.delete(e),s.ko()&&Mm(t,e),0===t.du.size&&(s.ko()?s.Fo():hu(t)&&t.gu.set("Unknown"))}function Fp(i,e){i.yu.Ot(e.targetId),Nd(i).zo(e)}function Mm(i,e){i.yu.Ot(e),Nd(i).Ho(e)}function Rm(i){i.yu=new Fh({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),Nd(i).start(),i.gu.uu()}function hh(i){return hu(i)&&!Nd(i).No()&&i.du.size>0}function hu(i){return 0===er(i)._u.size}function df(i){i.yu=void 0}function fh(i){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,xe.Z)(function*(i){i.du.forEach((e,t)=>{Fp(i,e)})}),Lp.apply(this,arguments)}function Vp(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,xe.Z)(function*(i,e){df(i),hh(i)?(i.gu.hu(e),Rm(i)):i.gu.set("Unknown")}),hf.apply(this,arguments)}function Pm(i,e,t){return ff.apply(this,arguments)}function ff(){return ff=(0,xe.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Qd&&2===e.state&&e.cause)try{yield(s=(0,xe.Z)(function*(u,m){const C=m.cause;for(const R of m.targetIds)u.du.has(R)&&(yield u.remoteSyncer.rejectListen(R,C),u.du.delete(R),u.yu.removeTarget(R))}),function(u,m){return s.apply(this,arguments)})(i,e)}catch(s){En("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield pf(i,s)}else if(e instanceof Sa?i.yu.Kt(e):e instanceof Pc?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(Gn.min()))try{const s=yield x_(i.localStore);t.compareTo(s)>=0&&(yield function(u,m){const C=u.yu.Zt(m);return C.targetChanges.forEach((R,X)=>{if(R.resumeToken.approximateByteSize()>0){const oe=u.du.get(X);oe&&u.du.set(X,oe.withResumeToken(R.resumeToken,m))}}),C.targetMismatches.forEach(R=>{const X=u.du.get(R);if(!X)return;u.du.set(R,X.withResumeToken(so.EMPTY_BYTE_STRING,X.snapshotVersion)),Mm(u,R);const oe=new uu(X.target,R,1,X.sequenceNumber);Fp(u,oe)}),u.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(s){En("RemoteStore","Failed to raise snapshot:",s),yield pf(i,s)}var s}),ff.apply(this,arguments)}function pf(i,e,t){return ph.apply(this,arguments)}function ph(){return ph=(0,xe.Z)(function*(i,e,t){if(!ia(e))throw e;i._u.add(1),yield qc(i),i.gu.set("Offline"),t||(t=()=>x_(i.localStore)),i.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){En("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Md(i)}))}),ph.apply(this,arguments)}function Om(i,e){return e().catch(t=>pf(i,t,e))}function Rd(i){return gf.apply(this,arguments)}function gf(){return gf=(0,xe.Z)(function*(i){const e=er(i),t=cc(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Pd(e);)try{const u=yield b0(e.localStore,s);if(null===u){0===e.fu.length&&t.Fo();break}s=u.batchId,Nm(e,u)}catch(u){yield pf(e,u)}km(e)&&Fm(e)}),gf.apply(this,arguments)}function Pd(i){return hu(i)&&i.fu.length<10}function Nm(i,e){i.fu.push(e);const t=cc(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function km(i){return hu(i)&&!cc(i).No()&&i.fu.length>0}function Fm(i){cc(i).start()}function Od(i){return Up.apply(this,arguments)}function Up(){return Up=(0,xe.Z)(function*(i){cc(i).eu()}),Up.apply(this,arguments)}function F_(i){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,xe.Z)(function*(i){const e=cc(i);for(const t of i.fu)e.Xo(t.mutations)}),Bp.apply(this,arguments)}function L_(i,e,t){return Ol.apply(this,arguments)}function Ol(){return Ol=(0,xe.Z)(function*(i,e,t){const s=i.fu.shift(),u=sp.from(s,e,t);yield Om(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Rd(i)}),Ol.apply(this,arguments)}function $p(i,e){return mf.apply(this,arguments)}function mf(){return mf=(0,xe.Z)(function*(i,e){var t;e&&cc(i).Yo&&(yield(t=(0,xe.Z)(function*(s,u){if(oa(m=u.code)&&m!==qt.ABORTED){const C=s.fu.shift();cc(s).Mo(),yield Om(s,()=>s.remoteSyncer.rejectFailedWrite(C.batchId,u)),yield Rd(s)}var m}),function(s,u){return t.apply(this,arguments)})(i,e)),km(i)&&Fm(i)}),mf.apply(this,arguments)}function jp(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,xe.Z)(function*(i,e){const t=er(i);t.asyncQueue.verifyOperationInProgress(),En("RemoteStore","RemoteStore received new credentials");const s=hu(t);t._u.add(3),yield qc(t),s&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Md(t)}),yf.apply(this,arguments)}function _f(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,xe.Z)(function*(i,e){const t=er(i);e?(t._u.delete(2),yield Md(t)):e||(t._u.add(2),yield qc(t),t.gu.set("Unknown"))}),Hp.apply(this,arguments)}function Nd(i){return i.pu||(i.pu=function(e,t,s){const u=er(e);return u.su(),new Dm(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:fh.bind(null,i),Zr:Vp.bind(null,i),Wo:Pm.bind(null,i)}),i.wu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.pu.Mo(),hh(i)?Rm(i):i.gu.set("Unknown")):(yield i.pu.stop(),df(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function cc(i){return i.Iu||(i.Iu=function(e,t,s){const u=er(e);return u.su(),new T0(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:Od.bind(null,i),Zr:$p.bind(null,i),tu:F_.bind(null,i),Zo:L_.bind(null,i)}),i.wu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.Iu.Mo(),yield Rd(i)):(yield i.Iu.stop(),i.fu.length>0&&(En("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Gp{constructor(e,t,s,u,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=m,this.deferred=new Ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,s,u,m){const C=Date.now()+s,R=new Gp(e,t,C,u,m);return R.start(s),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new In(qt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kc(i,e){if(Bi("AsyncQueue",`${e}: ${i}`),ia(i))return new In(qt.UNAVAILABLE,`${e}: ${i}`);throw i}class gh{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Qn.comparator(t.key,s.key):(t,s)=>Qn.comparator(t.key,s.key),this.keyedMap=ic(),this.sortedSet=new Xs(this.comparator)}static emptySet(e){return new gh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(!u.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new gh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class zp{constructor(){this.Tu=new Xs(Qn.comparator)}track(e){const t=e.doc.key,s=this.Tu.get(t);s?0!==e.type&&3===s.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==s.type?this.Tu=this.Tu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Tu=this.Tu.remove(t):1===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):rr():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,s)=>{e.push(s)}),e}}class kd{constructor(e,t,s,u,m,C,R,X,oe){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=m,this.fromCache=C,this.syncStateChanged=R,this.excludesMetadataChanges=X,this.hasCachedResults=oe}static fromInitialDocuments(e,t,s,u,m){const C=[];return t.forEach(R=>{C.push({type:0,doc:R})}),new kd(e,t,gh.emptySet(t),C,s,u,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class V_{constructor(){this.Au=void 0,this.listeners=[]}}class I0{constructor(){this.queries=new nl(e=>Oa(e),bu),this.onlineState="Unknown",this.Ru=new Set}}function Lm(i,e){return mh.apply(this,arguments)}function mh(){return mh=(0,xe.Z)(function*(i,e){const t=er(i),s=e.query;let u=!1,m=t.queries.get(s);if(m||(u=!0,m=new V_),u)try{m.Au=yield t.onListen(s)}catch(C){const R=Kc(C,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(R)}t.queries.set(s,m),m.listeners.push(e),e.bu(t.onlineState),m.Au&&e.Pu(m.Au)&&Cl(t)}),mh.apply(this,arguments)}function Wp(i,e){return vf.apply(this,arguments)}function vf(){return vf=(0,xe.Z)(function*(i,e){const t=er(i),s=e.query;let u=!1;const m=t.queries.get(s);if(m){const C=m.listeners.indexOf(e);C>=0&&(m.listeners.splice(C,1),u=0===m.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)}),vf.apply(this,arguments)}function Vm(i,e){const t=er(i);let s=!1;for(const u of e){const C=t.queries.get(u.query);if(C){for(const R of C.listeners)R.Pu(u)&&(s=!0);C.Au=u}}s&&Cl(t)}function S0(i,e,t){const s=er(i),u=s.queries.get(e);if(u)for(const m of u.listeners)m.onError(t);s.queries.delete(e)}function Cl(i){i.Ru.forEach(e=>{e.next()})}class Um{constructor(e,t,s){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new kd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class D0{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class qp{constructor(e){this.yt=e}Ji(e){return Rl(this.yt,e)}Yi(e){return e.metadata.exists?ie(this.yt,e.document,!1):As.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return xo(e)}}class Bm{constructor(e,t,s){this.Mu=e,this.localStore=t,this.yt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const s=ai.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,s=new qp(this.yt);for(const u of e)if(u.metadata.queries){const m=s.Ji(u.metadata.name);for(const C of u.metadata.queries){const R=(t.get(C)||Gi()).add(m);t.set(C,R)}}return t}complete(){var e=this;return(0,xe.Z)(function*(){const t=yield function M_(i,e,t,s){return rf.apply(this,arguments)}(e.localStore,new qp(e.yt),e.documents,e.Mu.id),s=e.$u(e.documents);for(const u of e.queries)yield R_(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Kp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class $m{constructor(e){this.key=e}}class U_{constructor(e){this.key=e}}class Zp{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Gi(),this.mutatedKeys=Gi(),this.Gu=Ju(e),this.Qu=new gh(this.Gu)}get ju(){return this.qu}Wu(e,t){const s=t?t.zu:new zp,u=t?t.Qu:this.Qu;let m=t?t.mutatedKeys:this.mutatedKeys,C=u,R=!1;const X="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,oe="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Se,at)=>{const $t=u.get(Se),On=Na(this.query,at)?at:null,zn=!!$t&&this.mutatedKeys.has($t.key),Dr=!!On&&(On.hasLocalMutations||this.mutatedKeys.has(On.key)&&On.hasCommittedMutations);let di=!1;$t&&On?$t.data.isEqual(On.data)?zn!==Dr&&(s.track({type:3,doc:On}),di=!0):this.Hu($t,On)||(s.track({type:2,doc:On}),di=!0,(X&&this.Gu(On,X)>0||oe&&this.Gu(On,oe)<0)&&(R=!0)):!$t&&On?(s.track({type:0,doc:On}),di=!0):$t&&!On&&(s.track({type:1,doc:$t}),di=!0,(X||oe)&&(R=!0)),di&&(On?(C=C.add(On),m=Dr?m.add(Se):m.delete(Se)):(C=C.delete(Se),m=m.delete(Se)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const Se="F"===this.query.limitType?C.last():C.first();C=C.delete(Se.key),m=m.delete(Se.key),s.track({type:1,doc:Se})}return{Qu:C,zu:s,$i:R,mutatedKeys:m}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Eu();m.sort((oe,Se)=>function(at,$t){const On=zn=>{switch(zn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rr()}};return On(at)-On($t)}(oe.type,Se.type)||this.Gu(oe.doc,Se.doc)),this.Ju(s);const C=t?this.Yu():[],R=0===this.Ku.size&&this.current?1:0,X=R!==this.Uu;return this.Uu=R,0!==m.length||X?{snapshot:new kd(this.query,e.Qu,u,m,e.mutatedKeys,0===R,X,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:C}:{Xu:C}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new zp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Gi(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const t=[];return e.forEach(s=>{this.Ku.has(s)||t.push(new U_(s))}),this.Ku.forEach(s=>{e.has(s)||t.push(new $m(s))}),t}tc(e){this.qu=e.Hi,this.Ku=Gi();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return kd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Yp{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class B_{constructor(e){this.key=e,this.nc=!1}}class Qp{constructor(e,t,s,u,m,C){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=m,this.maxConcurrentLimboResolutions=C,this.sc={},this.ic=new nl(R=>Oa(R),bu),this.rc=new Map,this.oc=new Set,this.uc=new Xs(Qn.comparator),this.cc=new Map,this.ac=new sh,this.hc={},this.lc=new Map,this.fc=Td.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function $_(i,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,xe.Z)(function*(i,e){const t=Sf(i);let s,u;const m=t.ic.get(e);if(m)s=m.targetId,t.sharedClientState.addLocalQueryTarget(s),u=m.view.ec();else{const C=yield Ad(t.localStore,ua(e));t.isPrimaryClient&&Pl(t.remoteStore,C);const R=t.sharedClientState.addLocalQueryTarget(C.targetId);s=C.targetId,u=yield Jp(t,e,s,"current"===R,C.resumeToken)}return u}),Xp.apply(this,arguments)}function Jp(i,e,t,s,u){return eg.apply(this,arguments)}function eg(){return eg=(0,xe.Z)(function*(i,e,t,s,u){i._c=(at,$t,On)=>{return(zn=(0,xe.Z)(function*(Dr,di,mo,No){let ks=di.view.Wu(mo);ks.$i&&(ks=yield nf(Dr.localStore,di.query,!1).then(({documents:Gs})=>di.view.Wu(Gs,ks)));const qo=No&&No.targetChanges.get(di.targetId),Fs=di.view.applyChanges(ks,Dr.isPrimaryClient,qo);return fc(Dr,di.targetId,Fs.Xu),Fs.snapshot}),function(Dr,di,mo,No){return zn.apply(this,arguments)})(i,at,$t,On);var zn};const m=yield nf(i.localStore,e,!0),C=new Zp(e,m.Hi),R=C.Wu(m.documents),X=Nu.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,u),oe=C.applyChanges(R,i.isPrimaryClient,X);fc(i,t,oe.Xu);const Se=new Yp(e,t,C);return i.ic.set(e,Se),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),oe.snapshot}),eg.apply(this,arguments)}function j_(i,e){return tg.apply(this,arguments)}function tg(){return tg=(0,xe.Z)(function*(i,e){const t=er(i),s=t.ic.get(e),u=t.rc.get(s.targetId);if(u.length>1)return t.rc.set(s.targetId,u.filter(m=>!bu(m,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield lc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),uc(t.remoteStore,s.targetId),Kl(t,s.targetId)}).catch(ra))):(Kl(t,s.targetId),yield lc(t.localStore,s.targetId,!0))}),tg.apply(this,arguments)}function dc(){return dc=(0,xe.Z)(function*(i,e,t){const s=lg(i);try{const u=yield function(m,C){const R=er(m),X=Mr.now(),oe=C.reduce(($t,On)=>$t.add(On.key),Gi());let Se,at;return R.persistence.runTransaction("Locally write mutations","readwrite",$t=>{let On=ca(),zn=Gi();return R.Gi.getEntries($t,oe).next(Dr=>{On=Dr,On.forEach((di,mo)=>{mo.isValidDocument()||(zn=zn.add(di))})}).next(()=>R.localDocuments.getOverlayedDocuments($t,On)).next(Dr=>{Se=Dr;const di=[];for(const mo of C){const No=Mc(mo,Se.get(mo.key).overlayedDocument);null!=No&&di.push(new xl(mo.key,No,Ku(No.value.mapValue),eo.exists(!0)))}return R.mutationQueue.addMutationBatch($t,X,di,C)}).next(Dr=>{at=Dr;const di=Dr.applyToLocalDocumentSet(Se,zn);return R.documentOverlayCache.saveOverlays($t,Dr.batchId,di)})}).then(()=>({batchId:at.batchId,changes:au(Se)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(m,C,R){let X=m.hc[m.currentUser.toKey()];X||(X=new Xs(Rn)),X=X.insert(C,R),m.hc[m.currentUser.toKey()]=X}(s,u.batchId,t),yield ll(s,u.changes),yield Rd(s.remoteStore)}catch(u){const m=Kc(u,"Failed to persist write");t.reject(m)}}),dc.apply(this,arguments)}function jm(i,e){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,xe.Z)(function*(i,e){const t=er(i);try{const s=yield C0(t.localStore,e);e.targetChanges.forEach((u,m)=>{const C=t.cc.get(m);C&&(hr(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?C.nc=!0:u.modifiedDocuments.size>0?hr(C.nc):u.removedDocuments.size>0&&(hr(C.nc),C.nc=!1))}),yield ll(t,s,e)}catch(s){yield ra(s)}}),Zc.apply(this,arguments)}function Hm(i,e,t){const s=er(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.ic.forEach((m,C)=>{const R=C.view.bu(e);R.snapshot&&u.push(R.snapshot)}),function(m,C){const R=er(m);R.onlineState=C;let X=!1;R.queries.forEach((oe,Se)=>{for(const at of Se.listeners)at.bu(C)&&(X=!0)}),X&&Cl(R)}(s.eventManager,e),u.length&&s.sc.Wo(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function H_(i,e,t){return yh.apply(this,arguments)}function yh(){return yh=(0,xe.Z)(function*(i,e,t){const s=er(i);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.cc.get(e),m=u&&u.key;if(m){let C=new Xs(Qn.comparator);C=C.insert(m,As.newNoDocument(m,Gn.min()));const R=Gi().add(m),X=new Ou(Gn.min(),new Map,new Js(Rn),C,R);yield jm(s,X),s.uc=s.uc.remove(m),s.cc.delete(e),pc(s)}else yield lc(s.localStore,e,!1).then(()=>Kl(s,e,t)).catch(ra)}),yh.apply(this,arguments)}function fu(i,e){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,xe.Z)(function*(i,e){const t=er(i),s=e.batch.batchId;try{const u=yield A_(t.localStore,e);hc(t,s,null),_h(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield ll(t,u)}catch(u){yield ra(u)}}),Yc.apply(this,arguments)}function Fa(i,e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,xe.Z)(function*(i,e,t){const s=er(i);try{const u=yield function(m,C){const R=er(m);return R.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let oe;return R.mutationQueue.lookupMutationBatch(X,C).next(Se=>(hr(null!==Se),oe=Se.keys(),R.mutationQueue.removeMutationBatch(X,Se))).next(()=>R.mutationQueue.performConsistencyCheck(X)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(X,oe,C)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,oe)).next(()=>R.localDocuments.getDocuments(X,oe))})}(s.localStore,e);hc(s,e,t),_h(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield ll(s,u)}catch(u){yield ra(u)}}),Lu.apply(this,arguments)}function al(){return al=(0,xe.Z)(function*(i,e){const t=er(i);hu(t.remoteStore)||En("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(m){const C=er(m);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>C.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===s)return void e.resolve();const u=t.lc.get(s)||[];u.push(e),t.lc.set(s,u)}catch(s){const u=Kc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),al.apply(this,arguments)}function _h(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function hc(i,e,t){const s=er(i);let u=s.hc[s.currentUser.toKey()];if(u){const m=u.get(e);m&&(t?m.reject(t):m.resolve(),u=u.remove(e)),s.hc[s.currentUser.toKey()]=u}}function Kl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.rc.get(e))i.ic.delete(s),t&&i.sc.wc(s,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(s=>{i.ac.containsKey(s)||Qc(i,s)})}function Qc(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(uc(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),pc(i))}function fc(i,e,t){for(const s of t)s instanceof $m?(i.ac.addReference(s.key,e),Fd(i,s)):s instanceof U_?(En("SyncEngine","Document no longer in limbo: "+s.key),i.ac.removeReference(s.key,e),i.ac.containsKey(s.key)||Qc(i,s.key)):rr()}function Fd(i,e){const t=e.key,s=t.path.canonicalString();i.uc.get(t)||i.oc.has(s)||(En("SyncEngine","New document in limbo: "+t),i.oc.add(s),pc(i))}function pc(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Qn(ai.fromString(e)),s=i.fc.next();i.cc.set(s,new B_(t)),i.uc=i.uc.insert(t,s),Pl(i.remoteStore,new uu(ua(nu(t.path)),s,2,fo.at))}}function ll(i,e,t){return gc.apply(this,arguments)}function gc(){return gc=(0,xe.Z)(function*(i,e,t){const s=er(i),u=[],m=[],C=[];var R;s.ic.isEmpty()||(s.ic.forEach((R,X)=>{C.push(s._c(X,e,t).then(oe=>{if((oe||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(X.targetId,(null==oe?void 0:oe.fromCache)?"not-current":"current"),oe){u.push(oe);const Se=wp.Ci(X.targetId,oe);m.push(Se)}}))}),yield Promise.all(C),s.sc.Wo(u),yield(R=(0,xe.Z)(function*(X,oe){const Se=er(X);try{yield Se.persistence.runTransaction("notifyLocalViewChanges","readwrite",at=>Xt.forEach(oe,$t=>Xt.forEach($t.Si,On=>Se.persistence.referenceDelegate.addReference(at,$t.targetId,On)).next(()=>Xt.forEach($t.Di,On=>Se.persistence.referenceDelegate.removeReference(at,$t.targetId,On)))))}catch(at){if(!ia(at))throw at;En("LocalStore","Failed to update sequence numbers: "+at)}for(const at of oe){const $t=at.targetId;if(!at.fromCache){const On=Se.qi.get($t),Dr=On.withLastLimboFreeSnapshotVersion(On.snapshotVersion);Se.qi=Se.qi.insert($t,Dr)}}}),function(X,oe){return R.apply(this,arguments)})(s.localStore,m))}),gc.apply(this,arguments)}function Ld(i,e){return bf.apply(this,arguments)}function bf(){return bf=(0,xe.Z)(function*(i,e){const t=er(i);if(!t.currentUser.isEqual(e)){En("SyncEngine","User change. New user:",e.toKey());const s=yield ol(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(C=>{C.forEach(R=>{R.reject(new In(qt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield ll(t,s.ji)}var u}),bf.apply(this,arguments)}function Gm(i,e){const t=er(i),s=t.cc.get(e);if(s&&s.nc)return Gi().add(s.key);{let u=Gi();const m=t.rc.get(e);if(!m)return u;for(const C of m){const R=t.ic.get(C);u=u.unionWith(R.view.ju)}return u}}function zm(i,e){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,xe.Z)(function*(i,e){const t=er(i),s=yield nf(t.localStore,e.query,!0),u=e.view.tc(s);return t.isPrimaryClient&&fc(t,e.targetId,u.Xu),u}),Tf.apply(this,arguments)}function Wm(i,e){return wf.apply(this,arguments)}function wf(){return wf=(0,xe.Z)(function*(i,e){const t=er(i);return Tm(t.localStore,e).then(s=>ll(t,s))}),wf.apply(this,arguments)}function qm(i,e,t,s){return If.apply(this,arguments)}function If(){return If=(0,xe.Z)(function*(i,e,t,s){const u=er(i),m=yield function(C,R){const X=er(C),oe=er(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",Se=>oe.Tn(Se,R).next(at=>at?X.localDocuments.getDocuments(Se,at):Xt.resolve(null)))}(u.localStore,e);var R;null!==m?("pending"===t?yield Rd(u.remoteStore):"acknowledged"===t||"rejected"===t?(hc(u,e,s||null),_h(u,e),R=e,er(er(u.localStore).mutationQueue).An(R)):rr(),yield ll(u,m)):En("SyncEngine","Cannot apply mutation batch with id: "+e)}),If.apply(this,arguments)}function ng(){return ng=(0,xe.Z)(function*(i,e){const t=er(i);if(Sf(t),lg(t),!0===e&&!0!==t.dc){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield rg(t,s.toArray());t.dc=!0,yield _f(t.remoteStore,!0);for(const m of u)Pl(t.remoteStore,m)}else if(!1===e&&!1!==t.dc){const s=[];let u=Promise.resolve();t.rc.forEach((m,C)=>{t.sharedClientState.isLocalQueryTarget(C)?s.push(C):u=u.then(()=>(Kl(t,C),lc(t.localStore,C,!0))),uc(t.remoteStore,C)}),yield u,yield rg(t,s),function(m){const C=er(m);C.cc.forEach((R,X)=>{uc(C.remoteStore,X)}),C.ac.fs(),C.cc=new Map,C.uc=new Xs(Qn.comparator)}(t),t.dc=!1,yield _f(t.remoteStore,!1)}}),ng.apply(this,arguments)}function rg(i,e,t){return ig.apply(this,arguments)}function ig(){return ig=(0,xe.Z)(function*(i,e,t){const s=er(i),u=[],m=[];for(const C of e){let R;const X=s.rc.get(C);if(X&&0!==X.length){R=yield Ad(s.localStore,ua(X[0]));for(const oe of X){const Se=s.ic.get(oe),at=yield zm(s,Se);at.snapshot&&m.push(at.snapshot)}}else{const oe=yield bm(s.localStore,C);R=yield Ad(s.localStore,oe),yield Jp(s,sg(oe),C,!1,R.resumeToken)}u.push(R)}return s.sc.Wo(m),u}),ig.apply(this,arguments)}function sg(i){return Sc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Zm(i){const e=er(i);return er(er(e.localStore).persistence).vi()}function G_(i,e,t,s){return og.apply(this,arguments)}function og(){return og=(0,xe.Z)(function*(i,e,t,s){const u=er(i);if(u.dc)return void En("SyncEngine","Ignoring unexpected query state notification.");const m=u.rc.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const C=yield Tm(u.localStore,wa(m[0])),R=Ou.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,so.EMPTY_BYTE_STRING);yield ll(u,C,R);break}case"rejected":yield lc(u.localStore,e,!0),Kl(u,e,s);break;default:rr()}}),og.apply(this,arguments)}function Ym(i,e,t){return ag.apply(this,arguments)}function ag(){return ag=(0,xe.Z)(function*(i,e,t){const s=Sf(i);if(s.dc){for(const u of e){if(s.rc.has(u)){En("SyncEngine","Adding an already active target "+u);continue}const m=yield bm(s.localStore,u),C=yield Ad(s.localStore,m);yield Jp(s,sg(m),C.targetId,!1,C.resumeToken),Pl(s.remoteStore,C)}for(const u of t)s.rc.has(u)&&(yield lc(s.localStore,u,!1).then(()=>{uc(s.remoteStore,u),Kl(s,u)}).catch(ra))}}),ag.apply(this,arguments)}function Sf(i){const e=er(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H_.bind(null,e),e.sc.Wo=Vm.bind(null,e.eventManager),e.sc.wc=S0.bind(null,e.eventManager),e}function lg(i){const e=er(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fa.bind(null,e),e}class W_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,xe.Z)(function*(){t.yt=ch(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Cm(this.persistence,new Ip,e.initialUser,this.yt)}yc(e){return new Cp(Dd.Bs,this.yt)}gc(e){return new Im}terminate(){var e=this;return(0,xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qm extends W_{constructor(e,t,s){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e),yield s.Ac.initialize(s,e),yield lg(s.Ac.syncEngine),yield Rd(s.Ac.remoteStore),yield s.persistence.li(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Cm(this.persistence,new Ip,e.initialUser,this.yt)}Tc(e,t){return new mp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const s=new yu(t,this.persistence);return new Jl(e.asyncQueue,s)}yc(e){const t=ef(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?qa.withCacheSize(this.cacheSizeBytes):qa.DEFAULT;return new Xh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,uh(),xd(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Im}}class ug extends Qm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e);const u=s.Ac.syncEngine;s.sharedClientState instanceof af&&(s.sharedClientState.syncEngine={Fr:qm.bind(null,u),$r:G_.bind(null,u),Br:Ym.bind(null,u),vi:Zm.bind(null,u),Mr:Wm.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.li(function(){var m=(0,xe.Z)(function*(C){yield function Km(i,e){return ng.apply(this,arguments)}(s.Ac.syncEngine,C),s.gcScheduler&&(C&&!s.gcScheduler.started?s.gcScheduler.start():C||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(C&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():C||s.indexBackfillerScheduler.stop())});return function(C){return m.apply(this,arguments)}}())})()}gc(e){const t=uh();if(!af.C(t))throw new In(qt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=ef(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new af(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class vh{initialize(e,t){var s=this;return(0,xe.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>Hm(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ld.bind(null,s.syncEngine),yield _f(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new I0}createDatastore(e){const t=ch(e.databaseInfo.databaseId),s=new N_(e.databaseInfo);return new w0(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,m=R=>Hm(this.syncEngine,R,0),C=Sm.C()?new Sm:new P_,new xm(t,s,u,m,C);var t,s,u,m,C}createSyncEngine(e,t){return function(s,u,m,C,R,X,oe){const Se=new Qp(s,u,m,C,R,X);return oe&&(Se.dc=!0),Se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,xe.Z)(function*(t){const s=er(t);En("RemoteStore","RemoteStore shutting down."),s._u.add(5),yield qc(s),s.mu.shutdown(),s.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cg(i,e,t){if(!t)throw new In(qt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function q_(i,e,t,s){if(!0===e&&!0===s)throw new In(qt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function K_(i){if(!Qn.isDocumentKey(i))throw new In(qt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Z_(i){if(Qn.isDocumentKey(i))throw new In(qt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Df(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":rr()}function ys(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new In(qt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Df(i);throw new In(qt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Y_(i,e){if(e<=0)throw new In(qt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Xm=new Map;class Xc{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new In(qt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new In(qt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,q_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,t,s,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new In(qt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new In(qt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xc(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Sr;switch(t.type){case"gapi":return new W(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new In(qt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xm.get(e);t&&(En("ComponentProvider","Removing Datastore"),Xm.delete(e),t.terminate())}(this),Promise.resolve()}}class Mo{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mo(this.firestore,e,this._key)}}class ya{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class bl extends ya{constructor(e,t,s){super(e,t,nu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mo(this.firestore,null,new Qn(e))}withConverter(e){return new bl(this.firestore,e,this._path)}}function Jm(i,e,...t){if(i=(0,Ut.m9)(i),cg("collection","path",e),i instanceof Eh){const s=ai.fromString(e,...t);return Z_(s),new bl(i,null,s)}{if(!(i instanceof Mo||i instanceof bl))throw new In(qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ai.fromString(e,...t));return Z_(s),new bl(i.firestore,null,s)}}function Af(i,e,...t){if(i=(0,Ut.m9)(i),1===arguments.length&&(e=cn.R()),cg("doc","path",e),i instanceof Eh){const s=ai.fromString(e,...t);return K_(s),new Mo(i,null,new Qn(s))}{if(!(i instanceof Mo||i instanceof bl))throw new In(qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ai.fromString(e,...t));return K_(s),new Mo(i.firestore,i instanceof bl?i.converter:null,new Qn(s))}}function ty(i,e){return i=(0,Ut.m9)(i),e=(0,Ut.m9)(e),(i instanceof Mo||i instanceof bl)&&(e instanceof Mo||e instanceof bl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function hg(i,e){return i=(0,Ut.m9)(i),e=(0,Ut.m9)(e),i instanceof ya&&e instanceof ya&&i.firestore===e.firestore&&bu(i._query,e._query)&&i.converter===e.converter}function ny(i,e=10240){let t=0;return{read:()=>(0,xe.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Bi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ry{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Ys,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.ku)}`))},s=>this.metadata.reject(s))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,xe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,xe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const s=e.vc.decode(t),u=Number(s);isNaN(u)&&e.Dc(`length string (${s}) is not valid number`);const m=yield e.Cc(u);return new D0(JSON.parse(m),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,xe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Cc(e){var t=this;return(0,xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const s=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new In(qt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,xe.Z)(function*(m,C){const R=er(m),X=p(R.yt)+"/documents",oe={documents:C.map(On=>ku(R.yt,On))},Se=yield R._o("BatchGetDocuments",X,oe,C.length),at=new Map;Se.forEach(On=>{const zn=function Ce(i,e){return"found"in e?function(t,s){hr(!!s.found);const u=Rl(t,s.found.name),m=xo(s.found.updateTime),C=s.found.createTime?xo(s.found.createTime):Gn.min(),R=new Fo({mapValue:{fields:s.found.fields}});return As.newFoundDocument(u,m,C,R)}(i,e):"missing"in e?function(t,s){hr(!!s.missing),hr(!!s.readTime);const u=Rl(t,s.missing),m=xo(s.readTime);return As.newNoDocument(u,m)}(i,e):rr()}(R.yt,On);at.set(zn.key.toString(),zn)});const $t=[];return C.forEach(On=>{const zn=at.get(On.toString());hr(!!zn),$t.push(zn)}),$t}),function(m,C){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ho(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const m=Qn.fromPath(u);e.mutations.push(new Go(m,e.precondition(m)))}),yield(s=(0,xe.Z)(function*(u,m){const C=er(u),R=p(C.yt)+"/documents",X={writes:m.map(oe=>dn(C.yt,oe))};yield C.ao("Commit",R,X)}),function(u,m){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rr();t=Gn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new In(qt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gn.min())?eo.exists(!1):eo.updateTime(t):eo.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gn.min()))throw new In(qt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return eo.updateTime(t)}return eo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class x0{constructor(e,t,s,u,m){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=u,this.deferred=m,this.kc=s.maxAttempts,this.xo=new dh(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,xe.Z)(function*(){const t=new fg(e.datastore),s=e.Mc(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(m=>{e.Fc(m)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!la(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!oa(t)}return!1}}class pg{constructor(e,t,s,u){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=u,this.user=pr.UNAUTHENTICATED,this.clientId=cn.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var C=(0,xe.Z)(function*(R){En("FirestoreClient","Received user=",R.uid),yield m.authCredentialListener(R),m.user=R});return function(R){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(s,C=>(En("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new In(qt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const u=Kc(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function oy(i,e){return ay.apply(this,arguments)}function ay(){return ay=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),En("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,xe.Z)(function*(m){s.isEqual(m)||(yield ol(e.localStore,m),s=m)});return function(m){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),ay.apply(this,arguments)}function Vd(i,e){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Ch(i);En("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(u=>jp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,m)=>jp(e.remoteStore,m)),i.onlineComponents=e}),Mf.apply(this,arguments)}function Ch(i){return bh.apply(this,arguments)}function bh(){return bh=(0,xe.Z)(function*(i){return i.offlineComponents||(En("FirestoreClient","Using default OfflineComponentProvider"),yield oy(i,new W_)),i.offlineComponents}),bh.apply(this,arguments)}function Rf(i){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,xe.Z)(function*(i){return i.onlineComponents||(En("FirestoreClient","Using default OnlineComponentProvider"),yield Vd(i,new vh)),i.onlineComponents}),Ud.apply(this,arguments)}function Th(i){return Ch(i).then(e=>e.persistence)}function Bd(i){return Ch(i).then(e=>e.localStore)}function ly(i){return Rf(i).then(e=>e.remoteStore)}function gg(i){return Rf(i).then(e=>e.syncEngine)}function Vu(i){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,xe.Z)(function*(i){const e=yield Rf(i),t=e.eventManager;return t.onListen=$_.bind(null,e.syncEngine),t.onUnlisten=j_.bind(null,e.syncEngine),t}),Pf.apply(this,arguments)}function yg(i,e,t={}){const s=new Ys;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(u,m,C,R,X){const oe=new xf({next:at=>{m.enqueueAndForget(()=>Wp(u,Se));const $t=at.docs.has(C);!$t&&at.fromCache?X.reject(new In(qt.UNAVAILABLE,"Failed to get document because the client is offline.")):$t&&at.fromCache&&R&&"server"===R.source?X.reject(new In(qt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(at)},error:at=>X.reject(at)}),Se=new Um(nu(C.path),oe,{includeMetadataChanges:!0,Nu:!0});return Lm(u,Se)}(yield Vu(i),i.asyncQueue,e,t,s)})),s.promise}function vg(i,e,t={}){const s=new Ys;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(u,m,C,R,X){const oe=new xf({next:at=>{m.enqueueAndForget(()=>Wp(u,Se)),at.fromCache&&"server"===R.source?X.reject(new In(qt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(at)},error:at=>X.reject(at)}),Se=new Um(C,oe,{includeMetadataChanges:!0,Nu:!0});return Lm(u,Se)}(yield Vu(i),i.asyncQueue,e,t,s)})),s.promise}class Eg{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new dh(this,"async_queue_retry"),this.Wc=()=>{const t=xd();t&&En("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=xd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=xd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Ys;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,xe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!ia(t))throw t;En("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{throw this.Kc=s,this.Gc=!1,Bi("INTERNAL UNHANDLED ERROR: ",function(m){let C=m.message||"";return m.stack&&(C=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),C}(s)),s}).then(s=>(this.Gc=!1,s))));return this.Bc=t,t}enqueueAfterDelay(e,t,s){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=Gp.createAndSchedule(this,e,t,s,m=>this.Yc(m));return this.Uc.push(u),u}zc(){this.Kc&&rr()}verifyOperationInProgress(){}Xc(){var e=this;return(0,xe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Of(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class X_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ys,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wo extends Eh{constructor(e,t,s,u){super(e,t,s,u),this.type="firestore",this._queue=new Eg,this._persistenceKey=(null==u?void 0:u.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cg(this),this._firestoreClient.terminate()}}function Wo(i){return i._firestoreClient||Cg(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Cg(i){var e;const t=i._freezeSettings(),s=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new cl(i._databaseId,m,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var m,R;i._firestoreClient=new pg(i._authCredentials,i._appCheckCredentials,i._queue,s)}function bg(i,e,t){const s=new Ys;return i.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield oy(i,t),yield Vd(i,e),s.resolve()}catch(u){const m=u;if(!("FirebaseError"===(C=m).name?C.code===qt.FAILED_PRECONDITION||C.code===qt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw m;$i("Error enabling offline persistence. Falling back to persistence disabled: "+m),s.reject(m)}var C})).then(()=>s.promise)}function Cy(i){if(i._initialized||i._terminated)throw new In(qt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new go(so.fromBase64String(e))}catch(t){throw new In(qt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new go(so.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new In(qt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jc{constructor(e){this._methodName=e}}class Ih{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new In(qt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new In(qt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}}const tv=/^__.*__$/;class by{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new xl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ou(e,this.data,t,this.fieldTransforms)}}class Tg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new xl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ed(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rr()}}class Nf{constructor(e,t,s,u,m,C){this.settings=e,this.databaseId=t,this.yt=s,this.ignoreUndefinedProperties=u,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=C||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Nf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.ua(e),u}ca(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return jd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ed(this.sa)&&tv.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class nv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=s||ch(e)}da(e,t,s,u=!1){return new Nf({sa:e,methodName:t,fa:s,path:Ns.emptyPath(),oa:!1,la:u},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function mc(i){const e=i._freezeSettings(),t=ch(i._databaseId);return new nv(i._databaseId,!!e.ignoreUndefinedProperties,t)}function kf(i,e,t,s,u,m={}){const C=i.da(m.merge||m.mergeFields?2:0,e,t,u);Dg("Data must be an object, but it was:",C,s);const R=Ig(s,C);let X,oe;if(m.merge)X=new $o(C.fieldMask),oe=C.fieldTransforms;else if(m.mergeFields){const Se=[];for(const at of m.mergeFields){const $t=Ag(e,at,t);if(!C.contains($t))throw new In(qt.INVALID_ARGUMENT,`Field '${$t}' is specified in your field mask but missing from your input data.`);Hd(Se,$t)||Se.push($t)}X=new $o(Se),oe=C.fieldTransforms.filter(at=>X.covers(at.field))}else X=null,oe=C.fieldTransforms;return new by(new Fo(R),X,oe)}class $d extends Jc{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function rv(i,e,t){return new Nf({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Sh extends Jc{_toFieldTransform(e){return new Ia(e.path,new Du)}isEqual(e){return e instanceof Sh}}class wg extends Jc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rv(this,e,!0),s=this._a.map(m=>Da(m,t)),u=new ml(s);return new Ia(e.path,u)}isEqual(e){return this===e}}class Zl extends Jc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rv(this,e,!0),s=this._a.map(m=>Da(m,t)),u=new yl(s);return new Ia(e.path,u)}isEqual(e){return this===e}}class iv extends Jc{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new jo(e.yt,Ac(e.yt,this.wa));return new Ia(e.path,t)}isEqual(e){return this===e}}function Ff(i,e,t,s){const u=i.da(1,e,t);Dg("Data must be an object, but it was:",u,s);const m=[],C=Fo.empty();Va(s,(X,oe)=>{const Se=Lf(e,X,t);oe=(0,Ut.m9)(oe);const at=u.ca(Se);if(oe instanceof $d)m.push(Se);else{const $t=Da(oe,at);null!=$t&&(m.push(Se),C.set(Se,$t))}});const R=new $o(m);return new Tg(C,R,u.fieldTransforms)}function Nl(i,e,t,s,u,m){const C=i.da(1,e,t),R=[Ag(e,s,t)],X=[u];if(m.length%2!=0)throw new In(qt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $t=0;$t<m.length;$t+=2)R.push(Ag(e,m[$t])),X.push(m[$t+1]);const oe=[],Se=Fo.empty();for(let $t=R.length-1;$t>=0;--$t)if(!Hd(oe,R[$t])){const On=R[$t];let zn=X[$t];zn=(0,Ut.m9)(zn);const Dr=C.ca(On);if(zn instanceof $d)oe.push(On);else{const di=Da(zn,Dr);null!=di&&(oe.push(On),Se.set(On,di))}}const at=new $o(oe);return new Tg(Se,at,C.fieldTransforms)}function kl(i,e,t,s=!1){return Da(t,i.da(s?4:3,e))}function Da(i,e){if(Sg(i=(0,Ut.m9)(i)))return Dg("Unsupported field value:",e,i),Ig(i,e);if(i instanceof Jc)return function(t,s){if(!ed(s.sa))throw s.ha(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,s){const u=[];let m=0;for(const C of t){let R=Da(C,s.aa(m));null==R&&(R={nullValue:"NULL_VALUE"}),u.push(R),m++}return{arrayValue:{values:u}}}(i,e)}return function(t,s){if(null===(t=(0,Ut.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ac(s.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Mr.fromDate(t);return{timestampValue:il(s.yt,u)}}if(t instanceof Mr){const u=new Mr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:il(s.yt,u)}}if(t instanceof Ih)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof go)return{bytesValue:Fc(s.yt,t._byteString)};if(t instanceof Mo){const u=s.databaseId,m=t.firestore._databaseId;if(!m.isEqual(u))throw s.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:sl(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ha(`Unsupported field value: ${Df(t)}`)}(i,e)}function Ig(i,e){const t={};return _u(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Va(i,(s,u)=>{const m=Da(u,e.ra(s));null!=m&&(t[s]=m)}),{mapValue:{fields:t}}}function Sg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Mr||i instanceof Ih||i instanceof go||i instanceof Mo||i instanceof Jc)}function Dg(i,e,t){if(!Sg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Df(t);throw e.ha("an object"===s?i+" a custom object":i+" "+s)}var s}function Ag(i,e,t){if((e=(0,Ut.m9)(e))instanceof pu)return e._internalPath;if("string"==typeof e)return Lf(i,e);throw jd("Field path arguments must be of type string or ",i,!1,void 0,t)}const sv=new RegExp("[~\\*/\\[\\]]");function Lf(i,e,t){if(e.search(sv)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new pu(...e.split("."))._internalPath}catch(s){throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function jd(i,e,t,s,u){const m=s&&!s.isEmpty(),C=void 0!==u;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let X="";return(m||C)&&(X+=" (found",m&&(X+=` in field ${s}`),C&&(X+=` in document ${u}`),X+=")"),new In(qt.INVALID_ARGUMENT,R+i+X)}function Hd(i,e){return i.some(t=>t.isEqual(e))}class Dh{constructor(e,t,s,u,m){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Mo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ty(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ty extends Dh{data(){return super.data()}}function Vf(i,e){return"string"==typeof e?Lf(i,e):e instanceof pu?e._internalPath:e._delegate._internalPath}function xg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new In(qt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class yc extends Uf{}function _c(i,e,...t){let s=[];e instanceof Uf&&s.push(e),s=s.concat(t),function(u){const m=u.filter(R=>R instanceof vc).length,C=u.filter(R=>R instanceof Gd).length;if(m>1||m>0&&C>0)throw new In(qt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class Gd extends yc{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Gd(e,t,s)}_apply(e){const t=this._parse(e);return Py(e._query,t),new ya(e.firestore,e.converter,Cu(e._query,t))}_parse(e){const t=mc(e.firestore);return function(u,m,C,R,X,oe,Se){let at;if(X.isKeyField()){if("array-contains"===oe||"array-contains-any"===oe)throw new In(qt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${oe}' queries on documentId().`);if("in"===oe||"not-in"===oe){Ry(Se,oe);const $t=[];for(const On of Se)$t.push(My(R,u,On));at={arrayValue:{values:$t}}}else at=My(R,u,Se)}else"in"!==oe&&"not-in"!==oe&&"array-contains-any"!==oe||Ry(Se,oe),at=kl(C,"where",Se,"in"===oe||"not-in"===oe);return ri.create(X,oe,at)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class vc extends Uf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:ss.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let m=s;const C=u.getFlattenedFilters();for(const R of C)Py(m,R),m=Cu(m,R)}(e._query,t),new ya(e.firestore,e.converter,Cu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bf extends yc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bf(e,t)}_apply(e){const t=function(s,u,m){if(null!==s.startAt)throw new In(qt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new In(qt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Ao(u,m);return function(R,X){if(null===Qu(R)){const oe=iu(R);null!==oe&&Oy(0,oe,X.field)}}(s,C),C}(e._query,this._field,this._direction);return new ya(e.firestore,e.converter,function(s,u){const m=s.explicitOrderBy.concat([u]);return new pl(s.path,s.collectionGroup,m,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Ah extends yc{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ah(e,t,s)}_apply(e){return new ya(e.firestore,e.converter,su(e._query,this._limit,this._limitType))}}class xh extends yc{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new xh(e,t,s)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new ya(e.firestore,e.converter,(u=t,new pl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class $f extends yc{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new $f(e,t,s)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new ya(e.firestore,e.converter,(u=t,new pl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function xy(i,e,t,s){if(t[0]=(0,Ut.m9)(t[0]),t[0]instanceof Dh)return function(u,m,C,R,X){if(!R)throw new In(qt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const oe=[];for(const Se of ma(u))if(Se.field.isKeyField())oe.push(ba(m,R.key));else{const at=R.data.field(Se.field);if(Vl(at))throw new In(qt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Se.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===at){const $t=Se.field.canonicalString();throw new In(qt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$t}' (used as the orderBy) does not exist.`)}oe.push(at)}return new jr(oe,X)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const u=mc(i.firestore);return function(m,C,R,X,oe,Se){const at=m.explicitOrderBy;if(oe.length>at.length)throw new In(qt.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $t=[];for(let On=0;On<oe.length;On++){const zn=oe[On];if(at[On].field.isKeyField()){if("string"!=typeof zn)throw new In(qt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof zn}`);if(!gl(m)&&-1!==zn.indexOf("/"))throw new In(qt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${zn}' contains a slash.`);const Dr=m.path.child(ai.fromString(zn));if(!Qn.isDocumentKey(Dr))throw new In(qt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${Dr}' is not because it contains an odd number of segments.`);const di=new Qn(Dr);$t.push(ba(C,di))}else{const Dr=kl(R,X,zn);$t.push(Dr)}}return new jr($t,Se)}(i._query,i.firestore._databaseId,u,e,t,s)}}function My(i,e,t){if("string"==typeof(t=(0,Ut.m9)(t))){if(""===t)throw new In(qt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gl(e)&&-1!==t.indexOf("/"))throw new In(qt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ai.fromString(t));if(!Qn.isDocumentKey(s))throw new In(qt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ba(i,new Qn(s))}if(t instanceof Mo)return ba(i,t._key);throw new In(qt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(t)}.`)}function Ry(i,e){if(!Array.isArray(i)||0===i.length)throw new In(qt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new In(qt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Py(i,e){if(e.isInequality()){const s=iu(i),u=e.field;if(null!==s&&!s.isEqual(u))throw new In(qt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${u.toString()}'`);const m=Qu(i);null!==m&&Oy(0,u,m)}const t=function(s,u){for(const m of s)for(const C of m.getFlattenedFilters())if(u.indexOf(C.op)>=0)return C.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new In(qt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Oy(i,e,t){if(!t.isEqual(e))throw new In(qt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Rg{convertValue(e,t="none"){switch(el(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rr()}}convertObject(e,t){const s={};return Va(e.fields,(u,m)=>{s[u]=this.convertValue(m,t)}),s}convertGeoPoint(e){return new Ih(Qs(e.latitude),Qs(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ja(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ca(e));default:return null}}convertTimestamp(e){const t=$a(e);return new Mr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ai.fromString(e);hr(lt(s));const u=new Xo(s.get(1),s.get(3)),m=new Qn(s.popFirst(5));return u.isEqual(t)||Bi(`Document ${m} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function jf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class cv extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mo(this.firestore,null,t)}}class td{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uu extends Dh{constructor(e,t,s,u,m,C){super(e,t,s,u,C),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Mh extends Uu{data(e={}){return super.data(e)}}class Ec{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new td(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Mh(this._firestore,this._userDataWriter,s.key,s,new td(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new In(qt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let m=0;return s._snapshot.docChanges.map(C=>({type:"added",doc:new Mh(s._firestore,s._userDataWriter,C.doc.key,C.doc,new td(s._snapshot.mutatedKeys.has(C.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:m++}))}{let m=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(C=>u||3!==C.type).map(C=>{const R=new Mh(s._firestore,s._userDataWriter,C.doc.key,C.doc,new td(s._snapshot.mutatedKeys.has(C.doc.key),s._snapshot.fromCache),s.query.converter);let X=-1,oe=-1;return 0!==C.type&&(X=m.indexOf(C.doc.key),m=m.delete(C.doc.key)),1!==C.type&&(m=m.add(C.doc),oe=m.indexOf(C.doc.key)),{type:dv(C.type),doc:R,oldIndex:X,newIndex:oe}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rr()}}function Pg(i,e){return i instanceof Uu&&e instanceof Uu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ec&&e instanceof Ec&&i._firestore===e._firestore&&hg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Bu extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mo(this.firestore,null,t)}}function Og(i,e,t){i=ys(i,Mo);const s=ys(i.firestore,wo),u=jf(i.converter,e,t);return Yl(s,[kf(mc(s),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,eo.none())])}function Ng(i,e,t,...s){i=ys(i,Mo);const u=ys(i.firestore,wo),m=mc(u);let C;return C="string"==typeof(e=(0,Ut.m9)(e))||e instanceof pu?Nl(m,"updateDoc",i._key,e,t,s):Ff(m,"updateDoc",i._key,e),Yl(u,[C.toMutation(i._key,eo.exists(!0))])}function $y(i,...e){var t,s,u;i=(0,Ut.m9)(i);let m={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||Of(e[C])||(m=e[C],C++);const R={includeMetadataChanges:m.includeMetadataChanges};if(Of(e[C])){const at=e[C];e[C]=null===(t=at.next)||void 0===t?void 0:t.bind(at),e[C+1]=null===(s=at.error)||void 0===s?void 0:s.bind(at),e[C+2]=null===(u=at.complete)||void 0===u?void 0:u.bind(at)}let X,oe,Se;if(i instanceof Mo)oe=ys(i.firestore,wo),Se=nu(i._key.path),X={next:at=>{e[C]&&e[C](jy(oe,i,at))},error:e[C+1],complete:e[C+2]};else{const at=ys(i,ya);oe=ys(at.firestore,wo),Se=at._query;const $t=new Bu(oe);X={next:On=>{e[C]&&e[C](new Ec(oe,$t,at,On))},error:e[C+1],complete:e[C+2]},xg(i._query)}return function(at,$t,On,zn){const Dr=new xf(zn),di=new Um($t,Dr,On);return at.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Lm(yield Vu(at),di)})),()=>{Dr.bc(),at.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Wp(yield Vu(at),di)}))}}(Wo(oe),Se,R,X)}function Yl(i,e){return function(t,s){const u=new Ys;return t.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Ef(i,e,t){return dc.apply(this,arguments)}(yield gg(t),s,u)})),u.promise}(Wo(i),e)}function jy(i,e,t){const s=t.docs.get(e._key),u=new Bu(i);return new Uu(i,u,e._key,s,new td(t.hasPendingWrites,t.fromCache),e.converter)}const Gy={maxAttempts:5};class Fg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mc(e)}set(e,t,s){this._verifyNotCommitted();const u=rd(e,this._firestore),m=jf(u.converter,t,s),C=kf(this._dataReader,"WriteBatch.set",u._key,m,null!==u.converter,s);return this._mutations.push(C.toMutation(u._key,eo.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const m=rd(e,this._firestore);let C;return C="string"==typeof(t=(0,Ut.m9)(t))||t instanceof pu?Nl(this._dataReader,"WriteBatch.update",m._key,t,s,u):Ff(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(C.toMutation(m._key,eo.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rd(e,this._firestore);return this._mutations=this._mutations.concat(new Ho(t._key,eo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new In(qt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rd(i,e){if((i=(0,Ut.m9)(i)).firestore!==e)throw new In(qt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Mi extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mc(e)}get(e){const t=rd(e,this._firestore),s=new cv(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return rr();const m=u[0];if(m.isFoundDocument())return new Dh(this._firestore,s,m.key,m,t.converter);if(m.isNoDocument())return new Dh(this._firestore,s,t._key,null,t.converter);throw rr()})}set(e,t,s){const u=rd(e,this._firestore),m=jf(u.converter,t,s),C=kf(this._dataReader,"Transaction.set",u._key,m,null!==u.converter,s);return this._transaction.set(u._key,C),this}update(e,t,s,...u){const m=rd(e,this._firestore);let C;return C="string"==typeof(t=(0,Ut.m9)(t))||t instanceof pu?Nl(this._dataReader,"Transaction.update",m._key,t,s,u):Ff(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,C),this}delete(e){const t=rd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rd(e,this._firestore),s=new Bu(this._firestore);return super.get(e).then(u=>new Uu(this._firestore,s,t._key,u._document,new td(!1,!1),t.converter))}}function Vg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new In("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ug(){if("undefined"==typeof Uint8Array)throw new In("unimplemented","Uint8Arrays are not available in this environment.")}function Bg(){if(!function Ua(){return"undefined"!=typeof atob}())throw new In("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Fi=Ne.SDK_VERSION,(0,Ne._registerComponent)(new ot.wA("firestore",(t,{instanceIdentifier:s,options:u})=>{const m=t.getProvider("app").getImmediate(),C=new wo(new D(t.getProvider("auth-internal")),new me(t.getProvider("app-check-internal")),function(R,X){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new In(qt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(R.options.projectId,X)}(m,s),m);return u=Object.assign({useFetchStreams:e},u),C._setSettings(u),C},"PUBLIC").setMultipleInstances(!0)),(0,Ne.registerVersion)(xr,"3.8.0",i),(0,Ne.registerVersion)(xr,"3.8.0","esm2017")}();class zd{constructor(e){this._delegate=e}static fromBase64String(e){return Bg(),new zd(go.fromBase64String(e))}static fromUint8Array(e){return Ug(),new zd(go.fromUint8Array(e))}toBase64(){return Bg(),this._delegate.toBase64()}toUint8Array(){return Ug(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zf(i){return function vv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class Ev{enableIndexedDbPersistence(e,t){return function gy(i,e){Cy(i=ys(i,wo));const t=Wo(i),s=i._freezeSettings(),u=new vh;return bg(t,u,new Qm(u,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function my(i){Cy(i=ys(i,wo));const e=Wo(i),t=i._freezeSettings(),s=new vh;return bg(e,s,new ug(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yy(i){if(i._initialized&&!i._terminated)throw new In(qt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ys;return i._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield(t=(0,xe.Z)(function*(s){if(!va.C())return Promise.resolve();const u=s+"main";yield va.delete(u)}),function(s){return t.apply(this,arguments)})(ef(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Wy{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$i("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function dg(i,e,t,s={}){var u;const m=(i=ys(i,Eh))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&$i("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let C,R;if("string"==typeof s.mockUserToken)C=s.mockUserToken,R=pr.MOCK_USER;else{C=(0,Ut.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const X=s.mockUserToken.sub||s.mockUserToken.user_id;if(!X)throw new In(qt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new pr(X)}i._authCredentials=new N(new Vo(C,R))}}(this._delegate,e,t,s)}enableNetwork(){return function vy(i){return function uy(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Th(i),t=yield ly(i);return e.setNetworkEnabled(!0),function(s){const u=er(s);return u._u.delete(0),Md(u)}(t)}))}(Wo(i=ys(i,wo)))}(this._delegate)}disableNetwork(){return function M0(i){return function mg(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Th(i),t=yield ly(i);return e.setNetworkEnabled(!1),(s=(0,xe.Z)(function*(u){const m=er(u);m._u.add(0),yield qc(m),m.gu.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(Wo(i=ys(i,wo)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,q_("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _y(i){return function(e){const t=new Ys;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Cf(i,e){return al.apply(this,arguments)}(yield gg(e),t)})),t.promise}(Wo(i=ys(i,wo)))}(this._delegate)}onSnapshotsInSync(e){return function hv(i,e){return function Q_(i,e){const t=new xf(e);return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield Vu(i),u=t,er(s).Ru.add(u),void u.next();var s,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield Vu(i),u=t,void er(s).Ru.delete(u);var s,u}))}}(Wo(i=ys(i,wo)),Of(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new In("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new id(this,Jm(this._delegate,e))}catch(t){throw La(t,"collection()","Firestore.collection()")}}doc(e){try{return new Tl(this,Af(this._delegate,e))}catch(t){throw La(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ka(this,function ey(i,e){if(i=ys(i,Eh),cg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new In(qt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ya(i,null,(t=e,new pl(ai.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw La(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fv(i,e,t){i=ys(i,wo);const s=Object.assign(Object.assign({},Gy),t);return function(u){if(u.maxAttempts<1)throw new In(qt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(u,m,C){const R=new Ys;return u.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const X=yield function wh(i){return Rf(i).then(e=>e.datastore)}(u);new x0(u.asyncQueue,X,C,m,R).run()})),R.promise}(Wo(i),u=>e(new Mi(i,u)),s)}(this._delegate,t=>e(new qy(this,t)))}batch(){return Wo(this._delegate),new Ky(new Fg(this._delegate,e=>Yl(this._delegate,e)))}loadBundle(e){return function ev(i,e){const t=Wo(i=ys(i,wo)),s=new X_;return function dy(i,e,t,s){const u=function(m,C){let R;return R="string"==typeof m?(new TextEncoder).encode(m):m,X=function(X,oe){if(X instanceof Uint8Array)return ny(X,void 0);if(X instanceof ArrayBuffer)return ny(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new ry(X,C);var X}(t,ch(e));i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function z_(i,e,t){const s=er(i);var u;(u=(0,xe.Z)(function*(m,C,R){try{const X=yield C.getMetadata();if(yield function($t,On){const zn=er($t),Dr=xo(On.createTime);return zn.persistence.runTransaction("hasNewerBundle","readonly",di=>zn.Ns.getBundleMetadata(di,On.id)).then(di=>!!di&&di.createTime.compareTo(Dr)>=0)}(m.localStore,X))return yield C.close(),R._completeWith({taskState:"Success",documentsLoaded:($t=X).totalDocuments,bytesLoaded:$t.totalBytes,totalDocuments:$t.totalDocuments,totalBytes:$t.totalBytes}),Promise.resolve(new Set);R._updateProgress(Kp(X));const oe=new Bm(X,m.localStore,C.yt);let Se=yield C.mc();for(;Se;){const $t=yield oe.Fu(Se);$t&&R._updateProgress($t),Se=yield C.mc()}const at=yield oe.complete();return yield ll(m,at.Lu,void 0),yield function($t,On){const zn=er($t);return zn.persistence.runTransaction("Save bundle","readwrite",Dr=>zn.Ns.saveBundleMetadata(Dr,On))}(m.localStore,X),R._completeWith(at.progress),Promise.resolve(at.Bu)}catch(X){return $i("SyncEngine",`Loading bundle failed with ${X}`),R._failWith(X),Promise.resolve(new Set)}var $t}),function(m,C,R){return u.apply(this,arguments)})(s,e,t).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield gg(i),u,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Ey(i,e){return function hy(i,e){return i.asyncQueue.enqueue((0,xe.Z)(function*(){return function(t,s){const u=er(t);return u.persistence.runTransaction("Get named query","readonly",m=>u.Ns.getNamedQuery(m,s))}(yield Bd(i),e)}))}(Wo(i=ys(i,wo)),e).then(t=>t?new ya(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ka(this,t):null)}}class Cc extends Rg{constructor(e){super(),this.firestore=e}convertBytes(e){return new zd(new go(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Tl.forKey(t,this.firestore,null)}}class qy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cc(e)}get(e){const t=bc(e);return this._delegate.get(t).then(s=>new $u(this._firestore,new Uu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=bc(e);return s?(Vg("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=bc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=bc(e);return this._delegate.delete(t),this}}class Ky{constructor(e){this._delegate=e}set(e,t,s){const u=bc(e);return s?(Vg("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=bc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=bc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gu{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Mh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ju(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=gu.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let m=u.get(t);return m||(m=new gu(e,new Cc(e),t),u.set(t,m)),m}}gu.INSTANCES=new WeakMap;class Tl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cc(e)}static forPath(e,t,s){if(e.length%2!=0)throw new In("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Tl(t,new Mo(t._delegate,s,new Qn(e)))}static forKey(e,t,s){return new Tl(t,new Mo(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new id(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new id(this.firestore,Jm(this._delegate,e))}catch(t){throw La(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ut.m9)(e))instanceof Mo&&ty(this._delegate,e)}set(e,t){t=Vg("DocumentReference.set",t);try{return t?Og(this._delegate,e,t):Og(this._delegate,e)}catch(s){throw La(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Ng(this._delegate,e):Ng(this._delegate,e,t,...s)}catch(u){throw La(u,"updateDoc()","DocumentReference.update()")}}delete(){return function kg(i){return Yl(ys(i.firestore,wo),[new Ho(i._key,eo.none())])}(this._delegate)}onSnapshot(...e){const t=$g(e),s=Zy(e,u=>new $u(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return $y(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Fy(i){i=ys(i,Mo);const e=ys(i.firestore,wo),t=Wo(e),s=new Bu(e);return function cy(i,e){const t=new Ys;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(u,m,C){try{const R=yield function(X,oe){const Se=er(X);return Se.persistence.runTransaction("read document","readonly",at=>Se.localDocuments.getDocument(at,oe))}(u,m);R.isFoundDocument()?C.resolve(R):R.isNoDocument()?C.resolve(null):C.reject(new In(qt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const X=Kc(R,`Failed to get document '${m} from cache`);C.reject(X)}}),function(u,m,C){return s.apply(this,arguments)})(yield Bd(i),e,t);var s})),t.promise}(t,i._key).then(u=>new Uu(e,s,i._key,u,new td(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ly(i){i=ys(i,Mo);const e=ys(i.firestore,wo);return yg(Wo(e),i._key,{source:"server"}).then(t=>jy(e,i,t))}(this._delegate):function ky(i){i=ys(i,Mo);const e=ys(i.firestore,wo);return yg(Wo(e),i._key).then(t=>jy(e,i,t))}(this._delegate),t.then(s=>new $u(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Tl(this.firestore,this._delegate.withConverter(e?gu.getInstance(this.firestore,e):null))}}function La(i,e,t){return i.message=i.message.replace(e,t),i}function $g(i){for(const e of i)if("object"==typeof e&&!zf(e))return e;return{}}function Zy(i,e){var t,s;let u;return u=zf(i[0])?i[0]:zf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{u.next&&u.next(e(m))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class $u{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Tl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Pg(this._delegate,e._delegate)}}class ju extends $u{data(e){const t=this._delegate.data(e);return function Yo(i,e){i||rr()}(void 0!==t),t}}class Ka{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cc(e)}where(e,t,s){try{return new Ka(this.firestore,_c(this._delegate,function wy(i,e,t){const s=e,u=Vf("where",i);return Gd._create(u,s,t)}(e,t,s)))}catch(u){throw La(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ka(this.firestore,_c(this._delegate,function Iy(i,e="asc"){const t=e,s=Vf("orderBy",i);return Bf._create(s,t)}(e,t)))}catch(s){throw La(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ka(this.firestore,_c(this._delegate,function Sy(i){return Y_("limit",i),Ah._create("limit",i,"F")}(e)))}catch(t){throw La(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ka(this.firestore,_c(this._delegate,function Dy(i){return Y_("limitToLast",i),Ah._create("limitToLast",i,"L")}(e)))}catch(t){throw La(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ka(this.firestore,_c(this._delegate,function Ay(...i){return xh._create("startAt",i,!0)}(...e)))}catch(t){throw La(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ka(this.firestore,_c(this._delegate,function av(...i){return xh._create("startAfter",i,!1)}(...e)))}catch(t){throw La(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ka(this.firestore,_c(this._delegate,function lv(...i){return $f._create("endBefore",i,!1)}(...e)))}catch(t){throw La(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ka(this.firestore,_c(this._delegate,function uv(...i){return $f._create("endAt",i,!0)}(...e)))}catch(t){throw La(t,"endAt()","Query.endAt()")}}isEqual(e){return hg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Uy(i){i=ys(i,ya);const e=ys(i.firestore,wo),t=Wo(e),s=new Bu(e);return function _g(i,e){const t=new Ys;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(u,m,C){try{const R=yield nf(u,m,!0),X=new Zp(m,R.Hi),oe=X.Wu(R.documents),Se=X.applyChanges(oe,!1);C.resolve(Se.snapshot)}catch(R){const X=Kc(R,`Failed to execute query '${m} against cache`);C.reject(X)}}),function(u,m,C){return s.apply(this,arguments)})(yield Bd(i),e,t);var s})),t.promise}(t,i._query).then(u=>new Ec(e,s,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function By(i){i=ys(i,ya);const e=ys(i.firestore,wo),t=Wo(e),s=new Bu(e);return vg(t,i._query,{source:"server"}).then(u=>new Ec(e,s,i,u))}(this._delegate):function Vy(i){i=ys(i,ya);const e=ys(i.firestore,wo),t=Wo(e),s=new Bu(e);return xg(i._query),vg(t,i._query).then(u=>new Ec(e,s,i,u))}(this._delegate),t.then(s=>new jg(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=$g(e),s=Zy(e,u=>new jg(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return $y(this._delegate,t,s)}withConverter(e){return new Ka(this.firestore,this._delegate.withConverter(e?gu.getInstance(this.firestore,e):null))}}class bv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ju(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ka(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ju(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bv(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new ju(this._firestore,s))})}isEqual(e){return Pg(this._delegate,e._delegate)}}class id extends Ka{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Tl(this.firestore,e):null}doc(e){try{return new Tl(this.firestore,void 0===e?Af(this._delegate):Af(this._delegate,e))}catch(t){throw La(t,"doc()","CollectionReference.doc()")}}add(e){return function nd(i,e){const t=ys(i.firestore,wo),s=Af(i),u=jf(i.converter,e);return Yl(t,[kf(mc(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,eo.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Tl(this.firestore,t))}isEqual(e){return ty(this._delegate,e._delegate)}withConverter(e){return new id(this.firestore,this._delegate.withConverter(e?gu.getInstance(this.firestore,e):null))}}function bc(i){return ys(i,Mo)}class Wf{constructor(...e){this._delegate=new pu(...e)}static documentId(){return new Wf(Ns.keyField().canonicalString())}isEqual(e){return(e=(0,Ut.m9)(e))instanceof pu&&this._delegate._internalPath.isEqual(e._internalPath)}}class sd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gv(){return new Sh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sd(e)}static delete(){const e=function pv(){return new $d("deleteField")}();return e._methodName="FieldValue.delete",new sd(e)}static arrayUnion(...e){const t=function Hf(...i){return new wg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new sd(t)}static arrayRemove(...e){const t=function mv(...i){return new Zl("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new sd(t)}static increment(e){const t=function Gf(i){return new iv("increment",i)}(e);return t._methodName="FieldValue.increment",new sd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Yy={Firestore:Wy,GeoPoint:Ih,Timestamp:Mr,Blob:zd,Transaction:qy,WriteBatch:Ky,DocumentReference:Tl,DocumentSnapshot:$u,Query:Ka,QueryDocumentSnapshot:ju,QuerySnapshot:jg,CollectionReference:id,FieldPath:Wf,FieldValue:sd,setLogLevel:function Cv(i){!function Hs(i){xi.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function wv(i){(function Tv(i,e){i.INTERNAL.registerComponent(new ot.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},Yy)))})(i,(e,t)=>new Wy(e,t,new Ev)),i.registerVersion("@firebase/firestore-compat","0.3.0")}(un.Z);var od=H(1205),O0=H(6217),N0=H(9260);function Hg(i,e){return function k0(i,e=Z.z){return new ge.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Gg(i,e){return Hg(i,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function Kf(i,e){return Gg(i,e).pipe((0,pn.O)(void 0),ft(),(0,vt.U)(([t,s])=>{const u=s.payload.docChanges(),m=u.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((C,R)=>{const X=u.find(Se=>Se.doc.ref.isEqual(C.ref)),oe=null==t?void 0:t.payload.docs.find(Se=>Se.ref.isEqual(C.ref));X&&JSON.stringify(X.doc.metadata)===JSON.stringify(C.metadata)||!X&&oe&&JSON.stringify(oe.metadata)===JSON.stringify(C.metadata)||m.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:C}})}),m}))}function zg(i,e,t){return Kf(i,t).pipe((0,nn.R)((s,u)=>function Rh(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function Iv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Wg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Wg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Wg(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(m=>m.payload),e),[]),function Me(i,e=Pe.y){return i=null!=i?i:Et,(0,gt.e)((t,s)=>{let u,m=!0;t.subscribe((0,Qe.x)(s,C=>{const R=e(C);(m||!i(u,R))&&(m=!1,u=R,s.next(C))}))})}(),(0,vt.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function Wg(i,e,t,...s){const u=i.slice();return u.splice(e,t,...s),u}function Qy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Xy{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Kf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,pn.O)(void 0),ft(),(0,bn.h)(([s,u])=>u.length>0||!s),(0,vt.U)(([s,u])=>u),Xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,nn.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qy(e);return zg(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Xe.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(Xe.iC)}add(e){return this.ref.add(e)}doc(e){return new Jy(this.ref.doc(e),this.afs)}}class Jy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:m}=qg(s,t);return new Xy(u,m,this.afs)}snapshotChanges(){return function qf(i,e){return Hg(i,e).pipe((0,pn.O)(void 0),ft(),(0,vt.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,le.D)(this.ref.get(e)).pipe(Xe.iC)}}class e_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Kf(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,bn.h)(t=>t.length>0),Xe.iC):Kf(this.query,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,nn.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qy(e);return zg(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Xe.iC)}get(e){return(0,le.D)(this.query.get(e)).pipe(Xe.iC)}}const t_=new g.OlP("angularfire2.enableFirestorePersistence"),n_=new g.OlP("angularfire2.firestore.persistenceSettings"),Wd=new g.OlP("angularfire2.firestore.settings"),Sv=new g.OlP("angularfire2.firestore.use-emulator");function qg(i,e=(t=>t)){return{query:e(i),ref:i}}let r_=(()=>{class i{constructor(t,s,u,m,C,R,X,oe,Se,at,$t,On,zn,Dr,di,mo,No){this.schedulers=X;const ks=(0,Pt.on)(t,R,s),qo=Se;at&&(0,od.nw)(ks,R,$t,zn,Dr,di,On,mo),[this.firestore,this.persistenceEnabled$]=(0,Pt.cc)(`${ks.name}.firestore`,"AngularFirestore",ks.name,()=>{const Fs=R.runOutsideAngular(()=>ks.firestore());if(m&&Fs.settings(m),qo&&Fs.useEmulator(...qo),u&&!(0,Jt.PM)(C)){const Gs=()=>{try{return(0,le.D)(Fs.enablePersistence(oe||void 0).then(()=>!0,()=>!1))}catch(pa){return"undefined"!=typeof console&&console.warn(pa),(0,Ye.of)(!1)}};return[Fs,R.runOutsideAngular(Gs)]}return[Fs,(0,Ye.of)(!1)]},[m,qo,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:C}=qg(u,s),R=this.schedulers.ngZone.run(()=>m);return new Xy(R,C,this)}collectionGroup(t,s){const u=s||(C=>C),m=this.firestore.collectionGroup(t);return new e_(u(m),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new Jy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(g.LFG(Pt.Dh),g.LFG(Pt.xv,8),g.LFG(t_,8),g.LFG(Wd,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Xe.HU),g.LFG(n_,8),g.LFG(Sv,8),g.LFG(od.zQ,8),g.LFG(od.Qv,8),g.LFG(od.L6,8),g.LFG(od._Q,8),g.LFG(od.rT,8),g.LFG(od.lh,8),g.LFG(od.f7,8),g.LFG(O0.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),i_=(()=>{class i{constructor(){N0.Z.registerVersion("angularfire",Xe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:t_,useValue:!0},{provide:n_,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[r_]}),i})()},377:(jn,Dt,H)=>{H.d(Dt,{Q1:()=>L,TE:()=>Mn});var g=H(8306),Z=H(9646),ge=H(8996),le=H(4986),Ye=H(4482),Xe=H(5403),Qe=H(4004),ft=H(3900),Pe=H(2122),Me=H(5e3),Et=H(2011),pn=H(3942),vt=H(5861),nn=H(9681),bn=H(2090),Pt=H(4859);const Jt="firebasestorage.googleapis.com",Ln="storageBucket";class ot extends bn.ZR{constructor(K,be,Ue=0){super(Kt(K),`Firebase Storage: ${be} (${Kt(K)})`),this.status_=Ue,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(K){this.status_=K}_codeEquals(K){return Kt(K)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(K){this.customData.serverResponse=K,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Kt(te){return"storage/"+te}function Ut(){return new ot("unknown","An unknown error occurred, please check the error payload for server response.")}function Nt(){return new ot("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function At(){return new ot("canceled","User canceled the upload/download.")}function Jn(){return new ot("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ft(te){return new ot("invalid-argument",te)}function Ot(){return new ot("app-deleted","The Firebase app was deleted.")}function st(te){return new ot("invalid-root-operation","The operation '"+te+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function It(te,K){return new ot("invalid-format","String does not match format '"+te+"': "+K)}function ut(te){throw new ot("internal-error","Internal error: "+te)}class Wt{constructor(K,be){this.bucket=K,this.path_=be}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const K=encodeURIComponent;return"/b/"+K(this.bucket)+"/o/"+K(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(K,be){let Ue;try{Ue=Wt.makeFromUrl(K,be)}catch(rt){return new Wt(K,"")}if(""===Ue.path)return Ue;throw function wn(te){return new ot("invalid-default-bucket","Invalid default bucket '"+te+"'.")}(K)}static makeFromUrl(K,be){let Ue=null;const rt="([A-Za-z0-9.\\-_]+)",vr=new RegExp("^gs://"+rt+"(/(.*))?$","i");function ti(ye){ye.path_=decodeURIComponent(ye.path)}const fi=be.replace(/[.]/g,"\\."),J=[{regex:vr,indices:{bucket:1,path:3},postModify:function Ht(ye){"/"===ye.path.charAt(ye.path.length-1)&&(ye.path_=ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${fi}/v[A-Za-z0-9_]+/b/${rt}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ti},{regex:new RegExp(`^https?://${be===Jt?"(?:storage.googleapis.com|storage.cloud.google.com)":be}/${rt}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ti}];for(let ye=0;ye<J.length;ye++){const Te=J[ye],ae=Te.regex.exec(K);if(ae){let ce=ae[Te.indices.path];ce||(ce=""),Ue=new Wt(ae[Te.indices.bucket],ce),Te.postModify(Ue);break}}if(null==Ue)throw function on(te){return new ot("invalid-url","Invalid URL '"+te+"'.")}(K);return Ue}}class xt{constructor(K){this.promise_=Promise.reject(K)}getPromise(){return this.promise_}cancel(K=!1){}}function si(te){return"string"==typeof te||te instanceof String}function qn(te){return Hr()&&te instanceof Blob}function Hr(){return"undefined"!=typeof Blob&&!(0,bn.UG)()}function Tr(te,K,be,Ue){if(Ue<K)throw Ft(`Invalid value for '${te}'. Expected ${K} or greater.`);if(Ue>be)throw Ft(`Invalid value for '${te}'. Expected ${be} or less.`)}function wr(te,K,be){let Ue=K;return null==be&&(Ue=`https://${K}`),`${be}://${Ue}/v0${te}`}function rs(te){const K=encodeURIComponent;let be="?";for(const Ue in te)te.hasOwnProperty(Ue)&&(be=be+(K(Ue)+"=")+K(te[Ue])+"&");return be=be.slice(0,-1),be}var Ji=(()=>{return(te=Ji||(Ji={}))[te.NO_ERROR=0]="NO_ERROR",te[te.NETWORK_ERROR=1]="NETWORK_ERROR",te[te.ABORT=2]="ABORT",Ji;var te})();function an(te,K){const be=te>=500&&te<600,rt=-1!==[408,429].indexOf(te),Ht=-1!==K.indexOf(te);return be||rt||Ht}class it{constructor(K,be,Ue,rt,Ht,Sn,vr,Kn,ti,gi,fi,Ui=!0){this.url_=K,this.method_=be,this.headers_=Ue,this.body_=rt,this.successCodes_=Ht,this.additionalRetryCodes_=Sn,this.callback_=vr,this.errorCallback_=Kn,this.timeout_=ti,this.progressCallback_=gi,this.connectionFactory_=fi,this.retry=Ui,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((is,l)=>{this.resolve_=is,this.reject_=l,this.start_()})}start_(){const be=(Ue,rt)=>{const Ht=this.resolve_,Sn=this.reject_,vr=rt.connection;if(rt.wasSuccessCode)try{const Kn=this.callback_(vr,vr.getResponse());!function Yn(te){return void 0!==te}(Kn)?Ht():Ht(Kn)}catch(Kn){Sn(Kn)}else if(null!==vr){const Kn=Ut();Kn.serverResponse=vr.getErrorText(),Sn(this.errorCallback_?this.errorCallback_(vr,Kn):Kn)}else Sn(rt.canceled?this.appDelete_?Ot():At():Nt())};this.canceled_?be(0,new ct(!1,null,!0)):this.backoffId_=function Zt(te,K,be){let Ue=1,rt=null,Ht=null,Sn=!1,vr=0;function Kn(){return 2===vr}let ti=!1;function gi(...S){ti||(ti=!0,K.apply(null,S))}function fi(S){rt=setTimeout(()=>{rt=null,te(is,Kn())},S)}function Ui(){Ht&&clearTimeout(Ht)}function is(S,...P){if(ti)return void Ui();if(S)return Ui(),void gi.call(null,S,...P);if(Kn()||Sn)return Ui(),void gi.call(null,S,...P);let J;Ue<64&&(Ue*=2),1===vr?(vr=2,J=0):J=1e3*(Ue+Math.random()),fi(J)}let l=!1;function x(S){l||(l=!0,Ui(),!ti&&(null!==rt?(S||(vr=2),clearTimeout(rt),fi(0)):S||(vr=1)))}return fi(0),Ht=setTimeout(()=>{Sn=!0,x(!0)},be),x}((Ue,rt)=>{if(rt)return void Ue(!1,new ct(!1,null,!0));const Ht=this.connectionFactory_();this.pendingConnection_=Ht;const Sn=vr=>{null!==this.progressCallback_&&this.progressCallback_(vr.loaded,vr.lengthComputable?vr.total:-1)};null!==this.progressCallback_&&Ht.addUploadProgressListener(Sn),Ht.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ht.removeUploadProgressListener(Sn),this.pendingConnection_=null;const vr=Ht.getErrorCode()===Ji.NO_ERROR,Kn=Ht.getStatus();if((!vr||an(Kn,this.additionalRetryCodes_))&&this.retry){const gi=Ht.getErrorCode()===Ji.ABORT;return void Ue(!1,new ct(!1,null,gi))}const ti=-1!==this.successCodes_.indexOf(Kn);Ue(!0,new ct(ti,Ht))})},be,this.timeout_)}getPromise(){return this.promise_}cancel(K){this.canceled_=!0,this.appDelete_=K||!1,null!==this.backoffId_&&function Un(te){te(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ct{constructor(K,be,Ue){this.wasSuccessCode=K,this.connection=be,this.canceled=!!Ue}}function dr(...te){const K=function Or(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==K){const be=new K;for(let Ue=0;Ue<te.length;Ue++)be.append(te[Ue]);return be.getBlob()}if(Hr())return new Blob(te);throw new ot("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ui={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Fn{constructor(K,be){this.data=K,this.contentType=be||null}}function Ei(te,K){switch(te){case ui.RAW:return new Fn(Vr(K));case ui.BASE64:case ui.BASE64URL:return new Fn(Pn(te,K));case ui.DATA_URL:return new Fn(function Wn(te){const K=new jt(te);return K.base64?Pn(ui.BASE64,K.rest):function ji(te){let K;try{K=decodeURIComponent(te)}catch(be){throw It(ui.DATA_URL,"Malformed data URL.")}return Vr(K)}(K.rest)}(K),function Ar(te){return new jt(te).contentType}(K))}throw Ut()}function Vr(te){const K=[];for(let be=0;be<te.length;be++){let Ue=te.charCodeAt(be);Ue<=127?K.push(Ue):Ue<=2047?K.push(192|Ue>>6,128|63&Ue):55296==(64512&Ue)?be<te.length-1&&56320==(64512&te.charCodeAt(be+1))?(Ue=65536|(1023&Ue)<<10|1023&te.charCodeAt(++be),K.push(240|Ue>>18,128|Ue>>12&63,128|Ue>>6&63,128|63&Ue)):K.push(239,191,189):56320==(64512&Ue)?K.push(239,191,189):K.push(224|Ue>>12,128|Ue>>6&63,128|63&Ue)}return new Uint8Array(K)}function Pn(te,K){switch(te){case ui.BASE64:{const rt=-1!==K.indexOf("-"),Ht=-1!==K.indexOf("_");if(rt||Ht)throw It(te,"Invalid character '"+(rt?"-":"_")+"' found: is it base64url encoded?");break}case ui.BASE64URL:{const rt=-1!==K.indexOf("+"),Ht=-1!==K.indexOf("/");if(rt||Ht)throw It(te,"Invalid character '"+(rt?"+":"/")+"' found: is it base64 encoded?");K=K.replace(/-/g,"+").replace(/_/g,"/");break}}let be;try{be=function Ii(te){if("undefined"==typeof atob)throw function lr(te){return new ot("unsupported-environment",`${te} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(te)}(K)}catch(rt){throw rt.message.includes("polyfill")?rt:It(te,"Invalid character found")}const Ue=new Uint8Array(be.length);for(let rt=0;rt<be.length;rt++)Ue[rt]=be.charCodeAt(rt);return Ue}class jt{constructor(K){this.base64=!1,this.contentType=null;const be=K.match(/^data:([^,]+)?,/);if(null===be)throw It(ui.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Ue=be[1]||null;null!=Ue&&(this.base64=function Pr(te,K){return te.length>=K.length&&te.substring(te.length-K.length)===K}(Ue,";base64"),this.contentType=this.base64?Ue.substring(0,Ue.length-7):Ue),this.rest=K.substring(K.indexOf(",")+1)}}class Nr{constructor(K,be){let Ue=0,rt="";qn(K)?(this.data_=K,Ue=K.size,rt=K.type):K instanceof ArrayBuffer?(be?this.data_=new Uint8Array(K):(this.data_=new Uint8Array(K.byteLength),this.data_.set(new Uint8Array(K))),Ue=this.data_.length):K instanceof Uint8Array&&(be?this.data_=K:(this.data_=new Uint8Array(K.length),this.data_.set(K)),Ue=K.length),this.size_=Ue,this.type_=rt}size(){return this.size_}type(){return this.type_}slice(K,be){if(qn(this.data_)){const rt=function os(te,K,be){return te.webkitSlice?te.webkitSlice(K,be):te.mozSlice?te.mozSlice(K,be):te.slice?te.slice(K,be):null}(this.data_,K,be);return null===rt?null:new Nr(rt)}{const Ue=new Uint8Array(this.data_.buffer,K,be-K);return new Nr(Ue,!0)}}static getBlob(...K){if(Hr()){const be=K.map(Ue=>Ue instanceof Nr?Ue.data_:Ue);return new Nr(dr.apply(null,be))}{const be=K.map(Sn=>si(Sn)?Ei(ui.RAW,Sn).data:Sn.data_);let Ue=0;be.forEach(Sn=>{Ue+=Sn.byteLength});const rt=new Uint8Array(Ue);let Ht=0;return be.forEach(Sn=>{for(let vr=0;vr<Sn.length;vr++)rt[Ht++]=Sn[vr]}),new Nr(rt,!0)}}uploadData(){return this.data_}}function tt(te){let K;try{K=JSON.parse(te)}catch(be){return null}return function Zr(te){return"object"==typeof te&&!Array.isArray(te)}(K)?K:null}function rn(te){const K=te.lastIndexOf("/",te.length-2);return-1===K?te:te.slice(K+1)}function kt(te,K){return K}class Ge{constructor(K,be,Ue,rt){this.server=K,this.local=be||K,this.writable=!!Ue,this.xform=rt||kt}}let Re=null;function pt(){if(Re)return Re;const te=[];te.push(new Ge("bucket")),te.push(new Ge("generation")),te.push(new Ge("metageneration")),te.push(new Ge("name","fullPath",!0));const be=new Ge("name");be.xform=function K(Ht,Sn){return function De(te){return!si(te)||te.length<2?te:rn(te)}(Sn)},te.push(be);const rt=new Ge("size");return rt.xform=function Ue(Ht,Sn){return void 0!==Sn?Number(Sn):Sn},te.push(rt),te.push(new Ge("timeCreated")),te.push(new Ge("updated")),te.push(new Ge("md5Hash",null,!0)),te.push(new Ge("cacheControl",null,!0)),te.push(new Ge("contentDisposition",null,!0)),te.push(new Ge("contentEncoding",null,!0)),te.push(new Ge("contentLanguage",null,!0)),te.push(new Ge("contentType",null,!0)),te.push(new Ge("metadata","customMetadata",!0)),Re=te,Re}function Hn(te,K,be){const Ue=tt(K);return null===Ue?null:function ur(te,K,be){const Ue={type:"file"},rt=be.length;for(let Ht=0;Ht<rt;Ht++){const Sn=be[Ht];Ue[Sn.local]=Sn.xform(Ue,K[Sn.server])}return function Yt(te,K){Object.defineProperty(te,"ref",{get:function be(){const Ht=new Wt(te.bucket,te.fullPath);return K._makeStorageReference(Ht)}})}(Ue,te),Ue}(te,Ue,be)}function zi(te,K){const be={},Ue=K.length;for(let rt=0;rt<Ue;rt++){const Ht=K[rt];Ht.writable&&(be[Ht.server]=te[Ht.local])}return JSON.stringify(be)}const ns="prefixes";class es{constructor(K,be,Ue,rt){this.url=K,this.method=be,this.handler=Ue,this.timeout=rt,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ri(te){if(!te)throw Ut()}function _n(te,K){return function be(Ue,rt){const Ht=Hn(te,rt,K);return Ri(null!==Ht),Ht}}function bi(te){return function K(be,Ue){let rt;return rt=401===be.getStatus()?be.getErrorText().includes("Firebase App Check token is invalid")?function Tt(){return new ot("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Oe(){return new ot("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===be.getStatus()?function Lt(te){return new ot("quota-exceeded","Quota for bucket '"+te+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(te.bucket):403===be.getStatus()?function et(te){return new ot("unauthorized","User does not have permission to access '"+te+"'.")}(te.path):Ue,rt.status=be.getStatus(),rt.serverResponse=Ue.serverResponse,rt}}function _s(te){const K=bi(te);return function be(Ue,rt){let Ht=K(Ue,rt);return 404===Ue.getStatus()&&(Ht=function Fe(te){return new ot("object-not-found","Object '"+te+"' does not exist.")}(te.path)),Ht.serverResponse=rt.serverResponse,Ht}}function Wi(te,K,be){const rt=wr(K.fullServerUrl(),te.host,te._protocol),Sn=te.maxOperationRetryTime,vr=new es(rt,"GET",_n(te,be),Sn);return vr.errorHandler=_s(K),vr}function ls(te,K,be,Ue,rt){const Ht={};Ht.prefix=K.isRoot?"":K.path+"/",be&&be.length>0&&(Ht.delimiter=be),Ue&&(Ht.pageToken=Ue),rt&&(Ht.maxResults=rt);const vr=wr(K.bucketOnlyServerUrl(),te.host,te._protocol),ti=te.maxOperationRetryTime,gi=new es(vr,"GET",function ir(te,K){return function be(Ue,rt){const Ht=function hi(te,K,be){const Ue=tt(be);return null===Ue?null:function Ci(te,K,be){const Ue={prefixes:[],items:[],nextPageToken:be.nextPageToken};if(be[ns])for(const rt of be[ns]){const Ht=rt.replace(/\/$/,""),Sn=te._makeStorageReference(new Wt(K,Ht));Ue.prefixes.push(Sn)}if(be.items)for(const rt of be.items){const Ht=te._makeStorageReference(new Wt(K,rt.name));Ue.items.push(Ht)}return Ue}(te,K,Ue)}(te,K,rt);return Ri(null!==Ht),Ht}}(te,K.bucket),ti);return gi.urlParams=Ht,gi.errorHandler=bi(K),gi}function Ss(te,K,be){const Ue=Object.assign({},be);return Ue.fullPath=te.path,Ue.size=K.size(),Ue.contentType||(Ue.contentType=function Is(te,K){return te&&te.contentType||K&&K.type()||"application/octet-stream"}(null,K)),Ue}class Cr{constructor(K,be,Ue,rt){this.current=K,this.total=be,this.finalized=!!Ue,this.metadata=rt||null}}function mr(te,K){let be=null;try{be=te.getResponseHeader("X-Goog-Upload-Status")}catch(rt){Ri(!1)}return Ri(!!be&&-1!==(K||["active"]).indexOf(be)),be}const zs={STATE_CHANGED:"state_changed"},Ki={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cs(te){switch(te){case"running":case"pausing":case"canceling":return Ki.RUNNING;case"paused":return Ki.PAUSED;case"success":return Ki.SUCCESS;case"canceled":return Ki.CANCELED;default:return Ki.ERROR}}class Yr{constructor(K,be,Ue){if(function tr(te){return"function"==typeof te}(K)||null!=be||null!=Ue)this.next=K,this.error=null!=be?be:void 0,this.complete=null!=Ue?Ue:void 0;else{const Ht=K;this.next=Ht.next,this.error=Ht.error,this.complete=Ht.complete}}}function Wr(te){return(...K)=>{Promise.resolve().then(()=>te(...K))}}class ps extends class Ds{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ji.NO_ERROR,this.sendPromise_=new Promise(K=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ji.ABORT,K()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ji.NETWORK_ERROR,K()}),this.xhr_.addEventListener("load",()=>{K()})})}send(K,be,Ue,rt){if(this.sent_)throw ut("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(be,K,!0),void 0!==rt)for(const Ht in rt)rt.hasOwnProperty(Ht)&&this.xhr_.setRequestHeader(Ht,rt[Ht].toString());return void 0!==Ue?this.xhr_.send(Ue):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ut("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ut("cannot .getStatus() before sending");try{return this.xhr_.status}catch(K){return-1}}getResponse(){if(!this.sent_)throw ut("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ut("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(K){return this.xhr_.getResponseHeader(K)}addUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",K)}removeUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",K)}}{initXhr(){this.xhr_.responseType="text"}}function Di(){return new ps}class Ct{constructor(K,be,Ue=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=K,this._blob=be,this._metadata=Ue,this._mappings=pt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=rt=>{if(this._request=void 0,this._chunkMultiplier=1,rt._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const Ht=this.isExponentialBackoffExpired();if(an(rt.status,[])){if(!Ht)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();rt=Nt()}this._error=rt,this._transition("error")}},this._metadataErrorHandler=rt=>{this._request=void 0,rt._codeEquals("canceled")?this.completeTransitions_():(this._error=rt,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((rt,Ht)=>{this._resolve=rt,this._reject=Ht,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const K=this._transferred;return be=>this._updateProgress(K+be)}_shouldDoResumable(K){return K.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(K){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([be,Ue])=>{switch(this._state){case"running":K(be,Ue);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((K,be)=>{const Ue=function yr(te,K,be,Ue,rt){const Ht=K.bucketOnlyServerUrl(),Sn=Ss(K,Ue,rt),vr={name:Sn.fullPath},Kn=wr(Ht,te.host,te._protocol),gi={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Ue.size()}`,"X-Goog-Upload-Header-Content-Type":Sn.contentType,"Content-Type":"application/json; charset=utf-8"},fi=zi(Sn,be),l=new es(Kn,"POST",function is(x){let S;mr(x);try{S=x.getResponseHeader("X-Goog-Upload-URL")}catch(P){Ri(!1)}return Ri(si(S)),S},te.maxUploadRetryTime);return l.urlParams=vr,l.headers=gi,l.body=fi,l.errorHandler=bi(K),l}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),rt=this._ref.storage._makeRequest(Ue,Di,K,be);this._request=rt,rt.getPromise().then(Ht=>{this._request=void 0,this._uploadUrl=Ht,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const K=this._uploadUrl;this._resolveToken((be,Ue)=>{const rt=function Qi(te,K,be,Ue){const Kn=new es(be,"POST",function Ht(ti){const gi=mr(ti,["active","final"]);let fi=null;try{fi=ti.getResponseHeader("X-Goog-Upload-Size-Received")}catch(is){Ri(!1)}fi||Ri(!1);const Ui=Number(fi);return Ri(!isNaN(Ui)),new Cr(Ui,Ue.size(),"final"===gi)},te.maxUploadRetryTime);return Kn.headers={"X-Goog-Upload-Command":"query"},Kn.errorHandler=bi(K),Kn}(this._ref.storage,this._ref._location,K,this._blob),Ht=this._ref.storage._makeRequest(rt,Di,be,Ue);this._request=Ht,Ht.getPromise().then(Sn=>{this._request=void 0,this._updateProgress(Sn.current),this._needToFetchStatus=!1,Sn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const K=262144*this._chunkMultiplier,be=new Cr(this._transferred,this._blob.size()),Ue=this._uploadUrl;this._resolveToken((rt,Ht)=>{let Sn;try{Sn=function Si(te,K,be,Ue,rt,Ht,Sn,vr){const Kn=new Cr(0,0);if(Sn?(Kn.current=Sn.current,Kn.total=Sn.total):(Kn.current=0,Kn.total=Ue.size()),Ue.size()!==Kn.total)throw function fn(){return new ot("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const ti=Kn.total-Kn.current;let gi=ti;rt>0&&(gi=Math.min(gi,rt));const fi=Kn.current;let is="";is=0===gi?"finalize":ti===gi?"upload, finalize":"upload";const l={"X-Goog-Upload-Command":is,"X-Goog-Upload-Offset":`${Kn.current}`},x=Ue.slice(fi,fi+gi);if(null===x)throw Jn();const J=new es(be,"POST",function S(ye,Te){const ae=mr(ye,["active","final"]),_e=Kn.current+gi,ce=Ue.size();let ue;return ue="final"===ae?_n(K,Ht)(ye,Te):null,new Cr(_e,ce,"final"===ae,ue)},K.maxUploadRetryTime);return J.headers=l,J.body=x.uploadData(),J.progressCallback=vr||null,J.errorHandler=bi(te),J}(this._ref._location,this._ref.storage,Ue,this._blob,K,this._mappings,be,this._makeProgressCallback())}catch(Kn){return this._error=Kn,void this._transition("error")}const vr=this._ref.storage._makeRequest(Sn,Di,rt,Ht,!1);this._request=vr,vr.getPromise().then(Kn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Kn.current),Kn.finalized?(this._metadata=Kn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((K,be)=>{const Ue=Wi(this._ref.storage,this._ref._location,this._mappings),rt=this._ref.storage._makeRequest(Ue,Di,K,be);this._request=rt,rt.getPromise().then(Ht=>{this._request=void 0,this._metadata=Ht,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((K,be)=>{const Ue=function Vs(te,K,be,Ue,rt){const Ht=K.bucketOnlyServerUrl(),Sn={"X-Goog-Upload-Protocol":"multipart"},Kn=function vr(){let J="";for(let ye=0;ye<2;ye++)J+=Math.random().toString().slice(2);return J}();Sn["Content-Type"]="multipart/related; boundary="+Kn;const ti=Ss(K,Ue,rt),gi=zi(ti,be),is=Nr.getBlob("--"+Kn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+gi+"\r\n--"+Kn+"\r\nContent-Type: "+ti.contentType+"\r\n\r\n",Ue,"\r\n--"+Kn+"--");if(null===is)throw Jn();const l={name:ti.fullPath},x=wr(Ht,te.host,te._protocol),P=te.maxUploadRetryTime,z=new es(x,"POST",_n(te,be),P);return z.urlParams=l,z.headers=Sn,z.body=is.uploadData(),z.errorHandler=bi(K),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),rt=this._ref.storage._makeRequest(Ue,Di,K,be);this._request=rt,rt.getPromise().then(Ht=>{this._request=void 0,this._metadata=Ht,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(K){const be=this._transferred;this._transferred=K,this._transferred!==be&&this._notifyObservers()}_transition(K){if(this._state!==K)switch(K){case"canceling":case"pausing":this._state=K,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const be="paused"===this._state;this._state=K,be&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=K,this._notifyObservers();break;case"canceled":this._error=At(),this._state=K,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const K=cs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:K,metadata:this._metadata,task:this,ref:this._ref}}on(K,be,Ue,rt){const Ht=new Yr(be||void 0,Ue||void 0,rt||void 0);return this._addObserver(Ht),()=>{this._removeObserver(Ht)}}then(K,be){return this._promise.then(K,be)}catch(K){return this.then(null,K)}_addObserver(K){this._observers.push(K),this._notifyObserver(K)}_removeObserver(K){const be=this._observers.indexOf(K);-1!==be&&this._observers.splice(be,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(be=>{this._notifyObserver(be)})}_finishPromise(){if(void 0!==this._resolve){let K=!0;switch(cs(this._state)){case Ki.SUCCESS:Wr(this._resolve.bind(null,this.snapshot))();break;case Ki.CANCELED:case Ki.ERROR:Wr(this._reject.bind(null,this._error))();break;default:K=!1}K&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(K){switch(cs(this._state)){case Ki.RUNNING:case Ki.PAUSED:K.next&&Wr(K.next.bind(K,this.snapshot))();break;case Ki.SUCCESS:K.complete&&Wr(K.complete.bind(K))();break;default:K.error&&Wr(K.error.bind(K,this._error))()}}resume(){const K="paused"===this._state||"pausing"===this._state;return K&&this._transition("running"),K}pause(){const K="running"===this._state;return K&&this._transition("pausing"),K}cancel(){const K="running"===this._state||"pausing"===this._state;return K&&this._transition("canceling"),K}}class dt{constructor(K,be){this._service=K,this._location=be instanceof Wt?be:Wt.makeFromUrl(be,K.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(K,be){return new dt(K,be)}get root(){const K=new Wt(this._location.bucket,"");return this._newRef(this._service,K)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rn(this._location.path)}get storage(){return this._service}get parent(){const K=function $e(te){if(0===te.length)return null;const K=te.lastIndexOf("/");return-1===K?"":te.slice(0,K)}(this._location.path);if(null===K)return null;const be=new Wt(this._location.bucket,K);return new dt(this._service,be)}_throwIfRoot(K){if(""===this._location.path)throw st(K)}}function pi(te,K,be){return ds.apply(this,arguments)}function ds(){return(ds=(0,vt.Z)(function*(te,K,be){const rt=yield ei(te,{pageToken:be});K.prefixes.push(...rt.prefixes),K.items.push(...rt.items),null!=rt.nextPageToken&&(yield pi(te,K,rt.nextPageToken))})).apply(this,arguments)}function ei(te,K){null!=K&&"number"==typeof K.maxResults&&Tr("options.maxResults",1,1e3,K.maxResults);const be=K||{},Ue=ls(te.storage,te._location,"/",be.pageToken,be.maxResults);return te.storage.makeRequestWithTokens(Ue,Di)}function Ko(te){te._throwIfRoot("getDownloadURL");const K=function Vi(te,K,be){const rt=wr(K.fullServerUrl(),te.host,te._protocol),Sn=te.maxOperationRetryTime,vr=new es(rt,"GET",function oi(te,K){return function be(Ue,rt){const Ht=Hn(te,rt,K);return Ri(null!==Ht),function Kr(te,K,be,Ue){const rt=tt(K);if(null===rt||!si(rt.downloadTokens))return null;const Ht=rt.downloadTokens;if(0===Ht.length)return null;const Sn=encodeURIComponent;return Ht.split(",").map(ti=>{const fi=te.fullPath;return wr("/b/"+Sn(te.bucket)+"/o/"+Sn(fi),be,Ue)+rs({alt:"media",token:ti})})[0]}(Ht,rt,te.host,te._protocol)}}(te,be),Sn);return vr.errorHandler=_s(K),vr}(te.storage,te._location,pt());return te.storage.makeRequestWithTokens(K,Di).then(be=>{if(null===be)throw function gr(){return new ot("no-download-url","The given file does not have any download URLs.")}();return be})}function co(te,K){const be=function ht(te,K){const be=K.split("/").filter(Ue=>Ue.length>0).join("/");return 0===te.length?be:te+"/"+be}(te._location.path,K),Ue=new Wt(te._location.bucket,be);return new dt(te.storage,Ue)}function Ni(te,K){if(te instanceof Bs){const be=te;if(null==be._bucket)throw function Xn(){return new ot("no-default-bucket","No default bucket found. Did you set the '"+Ln+"' property when initializing the app?")}();const Ue=new dt(be,be._bucket);return null!=K?Ni(Ue,K):Ue}return void 0!==K?co(te,K):te}function no(te,K){if(K&&function Cs(te){return/^[A-Za-z]+:\/\//.test(te)}(K)){if(te instanceof Bs)return function Io(te,K){return new dt(te,K)}(te,K);throw Ft("To use ref(service, url), the first argument must be a Storage instance.")}return Ni(te,K)}function Ms(te,K){const be=null==K?void 0:K[Ln];return null==be?null:Wt.makeFromBucketSpec(be,te)}class Bs{constructor(K,be,Ue,rt,Ht){this.app=K,this._authProvider=be,this._appCheckProvider=Ue,this._url=rt,this._firebaseVersion=Ht,this._bucket=null,this._host=Jt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=rt?Wt.makeFromBucketSpec(rt,this._host):Ms(this._host,this.app.options)}get host(){return this._host}set host(K){this._host=K,this._bucket=null!=this._url?Wt.makeFromBucketSpec(this._url,K):Ms(K,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(K){Tr("time",0,Number.POSITIVE_INFINITY,K),this._maxUploadRetryTime=K}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(K){Tr("time",0,Number.POSITIVE_INFINITY,K),this._maxOperationRetryTime=K}_getAuthToken(){var K=this;return(0,vt.Z)(function*(){if(K._overrideAuthToken)return K._overrideAuthToken;const be=K._authProvider.getImmediate({optional:!0});if(be){const Ue=yield be.getToken();if(null!==Ue)return Ue.accessToken}return null})()}_getAppCheckToken(){var K=this;return(0,vt.Z)(function*(){const be=K._appCheckProvider.getImmediate({optional:!0});return be?(yield be.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(K=>K.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(K){return new dt(this,K)}_makeRequest(K,be,Ue,rt,Ht=!0){if(this._deleted)return new xt(Ot());{const Sn=function qr(te,K,be,Ue,rt,Ht,Sn=!0){const vr=rs(te.urlParams),Kn=te.url+vr,ti=Object.assign({},te.headers);return function yn(te,K){K&&(te["X-Firebase-GMPID"]=K)}(ti,K),function Bt(te,K){null!==K&&K.length>0&&(te.Authorization="Firebase "+K)}(ti,be),function Gt(te,K){te["X-Firebase-Storage-Version"]="webjs/"+(null!=K?K:"AppManager")}(ti,Ht),function Bn(te,K){null!==K&&(te["X-Firebase-AppCheck"]=K)}(ti,Ue),new it(Kn,te.method,ti,te.body,te.successCodes,te.additionalRetryCodes,te.handler,te.errorHandler,te.timeout,te.progressCallback,rt,Sn)}(K,this._appId,Ue,rt,be,this._firebaseVersion,Ht);return this._requests.add(Sn),Sn.getPromise().then(()=>this._requests.delete(Sn),()=>this._requests.delete(Sn)),Sn}}makeRequestWithTokens(K,be){var Ue=this;return(0,vt.Z)(function*(){const[rt,Ht]=yield Promise.all([Ue._getAuthToken(),Ue._getAppCheckToken()]);return Ue._makeRequest(K,be,rt,Ht).getPromise()})()}}const Ro="@firebase/storage";function Ps(te,K){return no(te=(0,bn.m9)(te),K)}function q(te,{instanceIdentifier:K}){const be=te.getProvider("app").getImmediate(),Ue=te.getProvider("auth-internal"),rt=te.getProvider("app-check-internal");return new Bs(be,Ue,rt,K,nn.SDK_VERSION)}!function ve(){(0,nn._registerComponent)(new Pt.wA("storage",q,"PUBLIC").setMultipleInstances(!0)),(0,nn.registerVersion)(Ro,"0.10.0",""),(0,nn.registerVersion)(Ro,"0.10.0","esm2017")}();class ze{constructor(K,be,Ue){this._delegate=K,this.task=be,this.ref=Ue}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class en{constructor(K,be){this._delegate=K,this._ref=be,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ze(this._delegate.snapshot,this,this._ref)}then(K,be){return this._delegate.then(Ue=>{if(K)return K(new ze(Ue,this,this._ref))},be)}on(K,be,Ue,rt){let Ht;return be&&(Ht="function"==typeof be?Sn=>be(new ze(Sn,this,this._ref)):{next:be.next?Sn=>be.next(new ze(Sn,this,this._ref)):void 0,complete:be.complete||void 0,error:be.error||void 0}),this._delegate.on(K,Ht,Ue||void 0,rt||void 0)}}class Cn{constructor(K,be){this._delegate=K,this._service=be}get prefixes(){return this._delegate.prefixes.map(K=>new or(K,this._service))}get items(){return this._delegate.items.map(K=>new or(K,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class or{constructor(K,be){this._delegate=K,this.storage=be}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(K){const be=function Os(te,K){return co(te,K)}(this._delegate,K);return new or(be,this.storage)}get root(){return new or(this._delegate.root,this.storage)}get parent(){const K=this._delegate.parent;return null==K?null:new or(K,this.storage)}put(K,be){return this._throwIfRoot("put"),new en(function ms(te,K,be){return function Ir(te,K,be){return te._throwIfRoot("uploadBytesResumable"),new Ct(te,new Nr(K),be)}(te=(0,bn.m9)(te),K,be)}(this._delegate,K,be),this)}putString(K,be=ui.RAW,Ue){this._throwIfRoot("putString");const rt=Ei(be,K),Ht=Object.assign({},Ue);return null==Ht.contentType&&null!=rt.contentType&&(Ht.contentType=rt.contentType),new en(new Ct(this._delegate,new Nr(rt.data,!0),Ht),this)}listAll(){return function Ks(te){return function Zi(te){const K={prefixes:[],items:[]};return pi(te,K).then(()=>K)}(te=(0,bn.m9)(te))}(this._delegate).then(K=>new Cn(K,this.storage))}list(K){return function Ai(te,K){return ei(te=(0,bn.m9)(te),K)}(this._delegate,K||void 0).then(be=>new Cn(be,this.storage))}getMetadata(){return function ho(te){return function as(te){te._throwIfRoot("getMetadata");const K=Wi(te.storage,te._location,pt());return te.storage.makeRequestWithTokens(K,Di)}(te=(0,bn.m9)(te))}(this._delegate)}updateMetadata(K){return function Rs(te,K){return function Es(te,K){te._throwIfRoot("updateMetadata");const be=function qi(te,K,be,Ue){const Ht=wr(K.fullServerUrl(),te.host,te._protocol),vr=zi(be,Ue),ti=te.maxOperationRetryTime,gi=new es(Ht,"PATCH",_n(te,Ue),ti);return gi.headers={"Content-Type":"application/json; charset=utf-8"},gi.body=vr,gi.errorHandler=_s(K),gi}(te.storage,te._location,K,pt());return te.storage.makeRequestWithTokens(be,Di)}(te=(0,bn.m9)(te),K)}(this._delegate,K)}getDownloadURL(){return function ao(te){return Ko(te=(0,bn.m9)(te))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function js(te){return function gs(te){te._throwIfRoot("deleteObject");const K=function Ur(te,K){const Ue=wr(K.fullServerUrl(),te.host,te._protocol),vr=new es(Ue,"DELETE",function Sn(Kn,ti){},te.maxOperationRetryTime);return vr.successCodes=[200,204],vr.errorHandler=_s(K),vr}(te.storage,te._location);return te.storage.makeRequestWithTokens(K,Di)}(te=(0,bn.m9)(te))}(this._delegate)}_throwIfRoot(K){if(""===this._delegate._location.path)throw st(K)}}class Br{constructor(K,be){this.app=K,this._delegate=be}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(K){if(Xr(K))throw Ft("ref() expected a child path but got a URL, use refFromURL instead.");return new or(Ps(this._delegate,K),this)}refFromURL(K){if(!Xr(K))throw Ft("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Wt.makeFromUrl(K,this._delegate.host)}catch(be){throw Ft("refFromUrl() expected a valid full URL but got an invalid one.")}return new or(Ps(this._delegate,K),this)}setMaxUploadRetryTime(K){this._delegate.maxUploadRetryTime=K}setMaxOperationRetryTime(K){this._delegate.maxOperationRetryTime=K}useEmulator(K,be,Ue={}){!function _i(te,K,be,Ue={}){!function Us(te,K,be,Ue={}){te.host=`${K}:${be}`,te._protocol="http";const{mockUserToken:rt}=Ue;rt&&(te._overrideAuthToken="string"==typeof rt?rt:(0,bn.Sg)(rt,te.app.options.projectId))}(te,K,be,Ue)}(this._delegate,K,be,Ue)}}function Xr(te){return/^[A-Za-z]+:\/\//.test(te)}function vi(te,{instanceIdentifier:K}){const be=te.getProvider("app-compat").getImmediate(),Ue=te.getProvider("storage").getImmediate({identifier:K});return new Br(be,Ue)}!function Ti(te){const K={TaskState:Ki,TaskEvent:zs,StringFormat:ui,Storage:Br,Reference:or};te.INTERNAL.registerComponent(new Pt.wA("storage-compat",vi,"PUBLIC").setServiceProps(K).setMultipleInstances(!0)),te.registerVersion("@firebase/storage-compat","0.2.0")}(pn.Z);var ro=H(6217),ts=H(9260);function Zs(te){const K=function kr(te){return new g.y(K=>{const be=Sn=>K.next(Sn);be(te.snapshot);const Ht=te.on("state_changed",be);return te.then(Sn=>{be(Sn),K.complete()},Sn=>{be(te.snapshot),(Sn=>{K.error(Sn)})(Sn)}),function(){Ht()}}).pipe(function gt(te,K=le.z){return(0,Ye.e)((be,Ue)=>{let rt=null,Ht=null,Sn=null;const vr=()=>{if(rt){rt.unsubscribe(),rt=null;const ti=Ht;Ht=null,Ue.next(ti)}};function Kn(){const ti=Sn+te,gi=K.now();if(gi<ti)return rt=this.schedule(void 0,ti-gi),void Ue.add(rt);vr()}be.subscribe((0,Xe.x)(Ue,ti=>{Ht=ti,Sn=K.now(),rt||(rt=K.schedule(Kn,te),Ue.add(rt))},()=>{vr(),Ue.complete()},void 0,()=>{Ht=rt=null}))})}(0))}(te);return{task:te,then:te.then.bind(te),catch:te.catch.bind(te),pause:te.pause.bind(te),cancel:te.cancel.bind(te),resume:te.resume.bind(te),snapshotChanges:()=>K,percentageChanges:()=>K.pipe((0,Qe.U)(be=>be.bytesTransferred/be.totalBytes*100))}}function Po(te){return{getDownloadURL:()=>(0,Z.of)(void 0).pipe(Pe.fc,(0,ft.w)(()=>te.getDownloadURL()),Pe.iC),getMetadata:()=>(0,Z.of)(void 0).pipe(Pe.fc,(0,ft.w)(()=>te.getMetadata()),Pe.iC),delete:()=>(0,ge.D)(te.delete()),child:K=>Po(te.child(K)),updateMetadata:K=>(0,ge.D)(te.updateMetadata(K)),put:(K,be)=>Zs(te.put(K,be)),putString:(K,be,Ue)=>Zs(te.putString(K,be,Ue)),list:K=>(0,ge.D)(te.list(K)),listAll:()=>(0,ge.D)(te.listAll())}}const io=new Me.OlP("angularfire2.storageBucket"),vo=new Me.OlP("angularfire2.storage.maxUploadRetryTime"),Q=new Me.OlP("angularfire2.storage.maxOperationRetryTime"),G=new Me.OlP("angularfire2.storage.use-emulator");let L=(()=>{class te{constructor(be,Ue,rt,Ht,Sn,vr,Kn,ti,gi,fi){const Ui=(0,Et.on)(be,Sn,Ue);this.storage=(0,Et.cc)(`${Ui.name}.storage.${rt}`,"AngularFireStorage",Ui.name,()=>{const is=Sn.runOutsideAngular(()=>Ui.storage(rt||void 0)),l=gi;return l&&is.useEmulator(...l),Kn&&is.setMaxUploadRetryTime(Kn),ti&&is.setMaxOperationRetryTime(ti),is},[Kn,ti])}ref(be){return Po(this.storage.ref(be))}refFromURL(be){return Po(this.storage.refFromURL(be))}upload(be,Ue,rt){return Po(this.storage.ref(be)).put(Ue,rt)}}return te.\u0275fac=function(be){return new(be||te)(Me.LFG(Et.Dh),Me.LFG(Et.xv,8),Me.LFG(io,8),Me.LFG(Me.Lbi),Me.LFG(Me.R0b),Me.LFG(Pe.HU),Me.LFG(vo,8),Me.LFG(Q,8),Me.LFG(G,8),Me.LFG(ro.nm,8))},te.\u0275prov=Me.Yz7({token:te,factory:te.\u0275fac,providedIn:"any"}),te})(),We=(()=>{class te{}return te.\u0275fac=function(be){return new(be||te)},te.\u0275mod=Me.oAB({type:te}),te.\u0275inj=Me.cJS({}),te})(),Mn=(()=>{class te{constructor(){ts.Z.registerVersion("angularfire",Pe.q4.full,"gcs-compat")}}return te.\u0275fac=function(be){return new(be||te)},te.\u0275mod=Me.oAB({type:te}),te.\u0275inj=Me.cJS({providers:[L],imports:[We]}),te})()},2011:(jn,Dt,H)=>{H.d(Dt,{Dh:()=>Qe,GT:()=>Xe,cc:()=>vt,hO:()=>pn,on:()=>Pe,pX:()=>Ye,xv:()=>ft});var g=H(5e3),Z=H(9260),ge=H(2122);jn=H.hmd(jn);const le=["ngOnDestroy"],Ye=(Jt,Ln,un,xe={})=>new Proxy(Jt,{get:(Ne,ot)=>un.runOutsideAngular(()=>{var Kt;if(Jt[ot])return(null===(Kt=null==xe?void 0:xe.spy)||void 0===Kt?void 0:Kt.get)&&xe.spy.get(ot,Jt[ot]),Jt[ot];if(le.indexOf(ot)>-1)return()=>{};const Ut=Ln.toPromise().then(Fe=>{const Lt=Fe&&Fe[ot];return"function"==typeof Lt?Lt.bind(Fe):Lt&&Lt.then?Lt.then(Oe=>un.run(()=>Oe)):un.run(()=>Lt)});return new Proxy(()=>{},{get:(Fe,Lt)=>Ut[Lt],apply:(Fe,Lt,Oe)=>Ut.then(Tt=>{var et;const Nt=Tt&&Tt(...Oe);return(null===(et=null==xe?void 0:xe.spy)||void 0===et?void 0:et.apply)&&xe.spy.apply(ot,Oe,Nt),Nt})})})}),Xe=(Jt,Ln)=>{Ln.forEach(un=>{Object.getOwnPropertyNames(un.prototype||un).forEach(xe=>{Object.defineProperty(Jt.prototype,xe,Object.getOwnPropertyDescriptor(un.prototype||un,xe))})})};class gt{constructor(Ln){return Ln}}const Qe=new g.OlP("angularfire2.app.options"),ft=new g.OlP("angularfire2.app.name");function Pe(Jt,Ln,un){const Ne="object"==typeof un&&un||{};Ne.name=Ne.name||"string"==typeof un&&un||"[DEFAULT]";const Kt=Z.Z.apps.filter(Ut=>Ut&&Ut.name===Ne.name)[0]||Ln.runOutsideAngular(()=>Z.Z.initializeApp(Jt,Ne));try{JSON.stringify(Jt)!==JSON.stringify(Kt.options)&&Me("error",`${Kt.name} Firebase App already initialized with different options${jn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ut){}return new gt(Kt)}const Me=(Jt,...Ln)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Jt](...Ln)},Et={provide:gt,useFactory:Pe,deps:[Qe,g.R0b,[new g.FiY,ft]]};let pn=(()=>{class Jt{constructor(un){Z.Z.registerVersion("angularfire",ge.q4.full,"core"),Z.Z.registerVersion("angularfire",ge.q4.full,"app-compat"),Z.Z.registerVersion("angular",g.q4F.full,un.toString())}static initializeApp(un,xe){return{ngModule:Jt,providers:[{provide:Qe,useValue:un},{provide:ft,useValue:xe}]}}}return Jt.\u0275fac=function(un){return new(un||Jt)(g.LFG(g.Lbi))},Jt.\u0275mod=g.oAB({type:Jt}),Jt.\u0275inj=g.cJS({providers:[Et]}),Jt})();function vt(Jt,Ln,un,xe,Ne){const[,ot,Kt]=globalThis.\u0275AngularfireInstanceCache.find(Ut=>Ut[0]===Jt)||[];if(ot)return function nn(Jt,Ln){try{return Jt.toString()===Ln.toString()}catch(un){return Jt===Ln}}(Ne,Kt)||(Pt("error",`${Ln} was already initialized on the ${un} Firebase App with different settings.${bn?" You may need to reload as Firebase is not HMR aware.":""}`),Pt("warn",{is:Ne,was:Kt})),ot;{const Ut=xe();return globalThis.\u0275AngularfireInstanceCache.push([Jt,Ut,Ne]),Ut}}const bn=!!jn.hot,Pt=(Jt,...Ln)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Jt](...Ln)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(jn,Dt,H)=>{H.d(Dt,{q4:()=>Va,iC:()=>Sl,fc:()=>zu,HU:()=>el,vb:()=>Ja,JM:()=>Vl});var g=H(5e3),Z=H(259),ge=H(5861),le=H(9681),Ye=H(2090),Xe=H(4859),gt=H(1877),Qe=H(8766);const ft="@firebase/installations",Et="w:0.6.0",pn="FIS_v2",Ln=new Ye.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function un(V){return V instanceof Ye.ZR&&V.code.includes("request-failed")}function xe({projectId:V}){return`https://firebaseinstallations.googleapis.com/v1/projects/${V}/installations`}function Ne(V){return{token:V.token,requestStatus:2,expiresIn:Tt(V.expiresIn),creationTime:Date.now()}}function ot(V,Y){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,ge.Z)(function*(V,Y){const je=(yield Y.json()).error;return Ln.create("request-failed",{requestName:V,serverCode:je.code,serverMessage:je.message,serverStatus:je.status})})).apply(this,arguments)}function Ut({apiKey:V}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V})}function Fe(V,{refreshToken:Y}){const de=Ut(V);return de.append("Authorization",function et(V){return`${pn} ${V}`}(Y)),de}function Lt(V){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,ge.Z)(function*(V){const Y=yield V();return Y.status>=500&&Y.status<600?V():Y})).apply(this,arguments)}function Tt(V){return Number(V.replace("s","000"))}function Nt(V,Y){return At.apply(this,arguments)}function At(){return(At=(0,ge.Z)(function*({appConfig:V,heartbeatServiceProvider:Y},{fid:de}){const je=xe(V),Mt=Ut(V),zt=Y.getImmediate({optional:!0});if(zt){const jr=yield zt.getHeartbeatsHeader();jr&&Mt.append("x-firebase-client",jr)}const Lr={method:"POST",headers:Mt,body:JSON.stringify({fid:de,authVersion:pn,appId:V.appId,sdkVersion:Et})},Gr=yield Lt(()=>fetch(je,Lr));if(Gr.ok){const jr=yield Gr.json();return{fid:jr.fid||de,registrationStatus:2,refreshToken:jr.refreshToken,authToken:Ne(jr.authToken)}}throw yield ot("Create Installation",Gr)})).apply(this,arguments)}function on(V){return new Promise(Y=>{setTimeout(Y,V)})}const Xn=/^[cdef][\w-]{21}$/;function fn(){try{const V=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(V),V[0]=112+V[0]%16;const de=function gr(V){return function wn(V){return btoa(String.fromCharCode(...V)).replace(/\+/g,"-").replace(/\//g,"_")}(V).substr(0,22)}(V);return Xn.test(de)?de:""}catch(V){return""}}function lr(V){return`${V.appName}!${V.appId}`}const Ft=new Map;function Ot(V,Y){const de=lr(V);ut(de,Y),function Wt(V,Y){const de=function Zt(){return!xt&&"BroadcastChannel"in self&&(xt=new BroadcastChannel("[Firebase] FID Change"),xt.onmessage=V=>{ut(V.data.key,V.data.fid)}),xt}();de&&de.postMessage({key:V,fid:Y}),function Un(){0===Ft.size&&xt&&(xt.close(),xt=null)}()}(de,Y)}function ut(V,Y){const de=Ft.get(V);if(de)for(const je of de)je(Y)}let xt=null;const Zr="firebase-installations-store";let si=null;function qn(){return si||(si=(0,Qe.X3)("firebase-installations-database",1,{upgrade:(V,Y)=>{0===Y&&V.createObjectStore(Zr)}})),si}function Hr(V,Y){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,ge.Z)(function*(V,Y){const de=lr(V),Mt=(yield qn()).transaction(Zr,"readwrite"),zt=Mt.objectStore(Zr),kn=yield zt.get(de);return yield zt.put(Y,de),yield Mt.done,(!kn||kn.fid!==Y.fid)&&Ot(V,Y.fid),Y})).apply(this,arguments)}function wr(V){return rs.apply(this,arguments)}function rs(){return(rs=(0,ge.Z)(function*(V){const Y=lr(V),je=(yield qn()).transaction(Zr,"readwrite");yield je.objectStore(Zr).delete(Y),yield je.done})).apply(this,arguments)}function Ji(V,Y){return an.apply(this,arguments)}function an(){return(an=(0,ge.Z)(function*(V,Y){const de=lr(V),Mt=(yield qn()).transaction(Zr,"readwrite"),zt=Mt.objectStore(Zr),kn=yield zt.get(de),Lr=Y(kn);return void 0===Lr?yield zt.delete(de):yield zt.put(Lr,de),yield Mt.done,Lr&&(!kn||kn.fid!==Lr.fid)&&Ot(V,Lr.fid),Lr})).apply(this,arguments)}function it(V){return ct.apply(this,arguments)}function ct(){return(ct=(0,ge.Z)(function*(V){let Y;const de=yield Ji(V.appConfig,je=>{const Mt=Bt(je),zt=Gt(V,Mt);return Y=zt.registrationPromise,zt.installationEntry});return""===de.fid?{installationEntry:yield Y}:{installationEntry:de,registrationPromise:Y}})).apply(this,arguments)}function Bt(V){return os(V||{fid:fn(),registrationStatus:0})}function Gt(V,Y){if(0===Y.registrationStatus){if(!navigator.onLine)return{installationEntry:Y,registrationPromise:Promise.reject(Ln.create("app-offline"))};const de={fid:Y.fid,registrationStatus:1,registrationTime:Date.now()},je=function yn(V,Y){return Bn.apply(this,arguments)}(V,de);return{installationEntry:de,registrationPromise:je}}return 1===Y.registrationStatus?{installationEntry:Y,registrationPromise:qr(V)}:{installationEntry:Y}}function Bn(){return(Bn=(0,ge.Z)(function*(V,Y){try{const de=yield Nt(V,Y);return Hr(V.appConfig,de)}catch(de){throw un(de)&&409===de.customData.serverCode?yield wr(V.appConfig):yield Hr(V.appConfig,{fid:Y.fid,registrationStatus:0}),de}})).apply(this,arguments)}function qr(V){return Or.apply(this,arguments)}function Or(){return(Or=(0,ge.Z)(function*(V){let Y=yield dr(V.appConfig);for(;1===Y.registrationStatus;)yield on(100),Y=yield dr(V.appConfig);if(0===Y.registrationStatus){const{installationEntry:de,registrationPromise:je}=yield it(V);return je||de}return Y})).apply(this,arguments)}function dr(V){return Ji(V,Y=>{if(!Y)throw Ln.create("installation-not-found");return os(Y)})}function os(V){return function Ii(V){return 1===V.registrationStatus&&V.registrationTime+1e4<Date.now()}(V)?{fid:V.fid,registrationStatus:0}:V}function ui(V,Y){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,ge.Z)(function*({appConfig:V,heartbeatServiceProvider:Y},de){const je=Ei(V,de),Mt=Fe(V,de),zt=Y.getImmediate({optional:!0});if(zt){const jr=yield zt.getHeartbeatsHeader();jr&&Mt.append("x-firebase-client",jr)}const Lr={method:"POST",headers:Mt,body:JSON.stringify({installation:{sdkVersion:Et,appId:V.appId}})},Gr=yield Lt(()=>fetch(je,Lr));if(Gr.ok)return Ne(yield Gr.json());throw yield ot("Generate Auth Token",Gr)})).apply(this,arguments)}function Ei(V,{fid:Y}){return`${xe(V)}/${Y}/authTokens:generate`}function Vr(V){return ji.apply(this,arguments)}function ji(){return(ji=(0,ge.Z)(function*(V,Y=!1){let de;const je=yield Ji(V.appConfig,zt=>{if(!Nr(zt))throw Ln.create("not-registered");const kn=zt.authToken;if(!Y&&tt(kn))return zt;if(1===kn.requestStatus)return de=Pn(V,Y),zt;{if(!navigator.onLine)throw Ln.create("app-offline");const Lr=ht(zt);return de=Ar(V,Lr),Lr}});return de?yield de:je.authToken})).apply(this,arguments)}function Pn(V,Y){return jt.apply(this,arguments)}function jt(){return(jt=(0,ge.Z)(function*(V,Y){let de=yield Wn(V.appConfig);for(;1===de.authToken.requestStatus;)yield on(100),de=yield Wn(V.appConfig);const je=de.authToken;return 0===je.requestStatus?Vr(V,Y):je})).apply(this,arguments)}function Wn(V){return Ji(V,Y=>{if(!Nr(Y))throw Ln.create("not-registered");return function rn(V){return 1===V.requestStatus&&V.requestTime+1e4<Date.now()}(Y.authToken)?Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}}):Y})}function Ar(V,Y){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,ge.Z)(function*(V,Y){try{const de=yield ui(V,Y),je=Object.assign(Object.assign({},Y),{authToken:de});return yield Hr(V.appConfig,je),de}catch(de){if(!un(de)||401!==de.customData.serverCode&&404!==de.customData.serverCode){const je=Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}});yield Hr(V.appConfig,je)}else yield wr(V.appConfig);throw de}})).apply(this,arguments)}function Nr(V){return void 0!==V&&2===V.registrationStatus}function tt(V){return 2===V.requestStatus&&!function $e(V){const Y=Date.now();return Y<V.creationTime||V.creationTime+V.expiresIn<Y+36e5}(V)}function ht(V){const Y={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},V),{authToken:Y})}function Ge(){return(Ge=(0,ge.Z)(function*(V){const Y=V,{installationEntry:de,registrationPromise:je}=yield it(Y);return je?je.catch(console.error):Vr(Y).catch(console.error),de.fid})).apply(this,arguments)}function De(){return(De=(0,ge.Z)(function*(V,Y=!1){const de=V;return yield pt(de),(yield Vr(de,Y)).token})).apply(this,arguments)}function pt(V){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,ge.Z)(function*(V){const{registrationPromise:Y}=yield it(V);Y&&(yield Y)})).apply(this,arguments)}function es(V){return Ln.create("missing-app-config-values",{valueName:V})}const Ri="installations",ir=V=>{const Y=V.getProvider("app").getImmediate(),de=function hi(V){if(!V||!V.options)throw es("App Configuration");if(!V.name)throw es("App Name");const Y=["projectId","apiKey","appId"];for(const de of Y)if(!V.options[de])throw es(de);return{appName:V.name,projectId:V.options.projectId,apiKey:V.options.apiKey,appId:V.options.appId}}(Y);return{app:Y,appConfig:de,heartbeatServiceProvider:(0,le._getProvider)(Y,"heartbeat"),_delete:()=>Promise.resolve()}},oi=V=>{const Y=V.getProvider("app").getImmediate(),de=(0,le._getProvider)(Y,Ri).getImmediate();return{getId:()=>function kt(V){return Ge.apply(this,arguments)}(de),getToken:Mt=>function Re(V){return De.apply(this,arguments)}(de,Mt)}};(function bi(){(0,le._registerComponent)(new Xe.wA(Ri,ir,"PUBLIC")),(0,le._registerComponent)(new Xe.wA("installations-internal",oi,"PRIVATE"))})(),(0,le.registerVersion)(ft,"0.6.0"),(0,le.registerVersion)(ft,"0.6.0","esm2017");const _s="@firebase/remote-config",qi=new Ye.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ko{constructor(Y,de,je,Mt){this.client=Y,this.storage=de,this.storageCache=je,this.logger=Mt}isCachedDataFresh(Y,de){if(!de)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const je=Date.now()-de,Mt=je<=Y;return this.logger.debug(`Config fetch cache check. Cache age millis: ${je}. Cache max age millis (minimumFetchIntervalMillis setting): ${Y}. Is cache hit: ${Mt}.`),Mt}fetch(Y){var de=this;return(0,ge.Z)(function*(){const[je,Mt]=yield Promise.all([de.storage.getLastSuccessfulFetchTimestampMillis(),de.storage.getLastSuccessfulFetchResponse()]);if(Mt&&de.isCachedDataFresh(Y.cacheMaxAgeMillis,je))return Mt;Y.eTag=Mt&&Mt.eTag;const zt=yield de.client.fetch(Y),kn=[de.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===zt.status&&kn.push(de.storage.setLastSuccessfulFetchResponse(zt)),yield Promise.all(kn),zt})()}}function to(V=navigator){return V.languages&&V.languages[0]||V.language}class vs{constructor(Y,de,je,Mt,zt,kn){this.firebaseInstallations=Y,this.sdkVersion=de,this.namespace=je,this.projectId=Mt,this.apiKey=zt,this.appId=kn}fetch(Y){var de=this;return(0,ge.Z)(function*(){const[je,Mt]=yield Promise.all([de.firebaseInstallations.getId(),de.firebaseInstallations.getToken()]),kn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${de.projectId}/namespaces/${de.namespace}:fetch?key=${de.apiKey}`,Lr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Y.eTag||"*"},Gr={sdk_version:de.sdkVersion,app_instance_id:je,app_instance_id_token:Mt,app_id:de.appId,language_code:to()},jr={method:"POST",headers:Lr,body:JSON.stringify(Gr)},Hi=fetch(kn,jr),mi=new Promise((Do,To)=>{Y.signal.addEventListener(()=>{const Ha=new Error("The operation was aborted.");Ha.name="AbortError",To(Ha)})});let Bo;try{yield Promise.race([Hi,mi]),Bo=yield Hi}catch(Do){let To="fetch-client-network";throw"AbortError"===(null==Do?void 0:Do.name)&&(To="fetch-timeout"),qi.create(To,{originalErrorMessage:null==Do?void 0:Do.message})}let ri=Bo.status;const ss=Bo.headers.get("ETag")||void 0;let Ta,Ra;if(200===Bo.status){let Do;try{Do=yield Bo.json()}catch(To){throw qi.create("fetch-client-parse",{originalErrorMessage:null==To?void 0:To.message})}Ta=Do.entries,Ra=Do.state}if("INSTANCE_STATE_UNSPECIFIED"===Ra?ri=500:"NO_CHANGE"===Ra?ri=304:("NO_TEMPLATE"===Ra||"EMPTY_CONFIG"===Ra)&&(Ta={}),304!==ri&&200!==ri)throw qi.create("fetch-status",{httpStatus:ri});return{status:ri,eTag:ss,config:Ta}})()}}class dt{constructor(Y,de){this.client=Y,this.storage=de}fetch(Y){var de=this;return(0,ge.Z)(function*(){const je=(yield de.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return de.attemptFetch(Y,je)})()}attemptFetch(Y,{throttleEndTimeMillis:de,backoffCount:je}){var Mt=this;return(0,ge.Z)(function*(){yield function Xi(V,Y){return new Promise((de,je)=>{const Mt=Math.max(Y-Date.now(),0),zt=setTimeout(de,Mt);V.addEventListener(()=>{clearTimeout(zt),je(qi.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}(Y.signal,de);try{const zt=yield Mt.client.fetch(Y);return yield Mt.storage.deleteThrottleMetadata(),zt}catch(zt){if(!function Ct(V){if(!(V instanceof Ye.ZR&&V.customData))return!1;const Y=Number(V.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}(zt))throw zt;const kn={throttleEndTimeMillis:Date.now()+(0,Ye.$s)(je),backoffCount:je+1};return yield Mt.storage.setThrottleMetadata(kn),Mt.attemptFetch(Y,kn)}})()}}class $n{constructor(Y,de,je,Mt,zt){this.app=Y,this._client=de,this._storageCache=je,this._storage=Mt,this._logger=zt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ir(V,Y){const de=V.target.error||void 0;return qi.create(Y,{originalErrorMessage:de&&(null==de?void 0:de.message)})}const Qr="app_namespace_store";class ei{constructor(Y,de,je,Mt=function ds(){return new Promise((V,Y)=>{try{const de=indexedDB.open("firebase_remote_config",1);de.onerror=je=>{Y(Ir(je,"storage-open"))},de.onsuccess=je=>{V(je.target.result)},de.onupgradeneeded=je=>{0===je.oldVersion&&je.target.result.createObjectStore(Qr,{keyPath:"compositeKey"})}}catch(de){Y(qi.create("storage-open",{originalErrorMessage:null==de?void 0:de.message}))}})}()){this.appId=Y,this.appName=de,this.namespace=je,this.openDbPromise=Mt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Y){return this.set("last_fetch_status",Y)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Y){return this.set("last_successful_fetch_timestamp_millis",Y)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Y){return this.set("last_successful_fetch_response",Y)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Y){return this.set("active_config",Y)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Y){return this.set("active_config_etag",Y)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Y){return this.set("throttle_metadata",Y)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Y){var de=this;return(0,ge.Z)(function*(){const je=yield de.openDbPromise;return new Promise((Mt,zt)=>{const Lr=je.transaction([Qr],"readonly").objectStore(Qr),Gr=de.createCompositeKey(Y);try{const jr=Lr.get(Gr);jr.onerror=Hi=>{zt(Ir(Hi,"storage-get"))},jr.onsuccess=Hi=>{const mi=Hi.target.result;Mt(mi?mi.value:void 0)}}catch(jr){zt(qi.create("storage-get",{originalErrorMessage:null==jr?void 0:jr.message}))}})})()}set(Y,de){var je=this;return(0,ge.Z)(function*(){const Mt=yield je.openDbPromise;return new Promise((zt,kn)=>{const Gr=Mt.transaction([Qr],"readwrite").objectStore(Qr),jr=je.createCompositeKey(Y);try{const Hi=Gr.put({compositeKey:jr,value:de});Hi.onerror=mi=>{kn(Ir(mi,"storage-set"))},Hi.onsuccess=()=>{zt()}}catch(Hi){kn(qi.create("storage-set",{originalErrorMessage:null==Hi?void 0:Hi.message}))}})})()}delete(Y){var de=this;return(0,ge.Z)(function*(){const je=yield de.openDbPromise;return new Promise((Mt,zt)=>{const Lr=je.transaction([Qr],"readwrite").objectStore(Qr),Gr=de.createCompositeKey(Y);try{const jr=Lr.delete(Gr);jr.onerror=Hi=>{zt(Ir(Hi,"storage-delete"))},jr.onsuccess=()=>{Mt()}}catch(jr){zt(qi.create("storage-delete",{originalErrorMessage:null==jr?void 0:jr.message}))}})})()}createCompositeKey(Y){return[this.appId,this.appName,this.namespace,Y].join()}}class as{constructor(Y){this.storage=Y}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Y=this;return(0,ge.Z)(function*(){const de=Y.storage.getLastFetchStatus(),je=Y.storage.getLastSuccessfulFetchTimestampMillis(),Mt=Y.storage.getActiveConfig(),zt=yield de;zt&&(Y.lastFetchStatus=zt);const kn=yield je;kn&&(Y.lastSuccessfulFetchTimestampMillis=kn);const Lr=yield Mt;Lr&&(Y.activeConfig=Lr)})()}setLastFetchStatus(Y){return this.lastFetchStatus=Y,this.storage.setLastFetchStatus(Y)}setLastSuccessfulFetchTimestampMillis(Y){return this.lastSuccessfulFetchTimestampMillis=Y,this.storage.setLastSuccessfulFetchTimestampMillis(Y)}setActiveConfig(Y){return this.activeConfig=Y,this.storage.setActiveConfig(Y)}}function co(){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,ge.Z)(function*(){if(!(0,Ye.hl)())return!1;try{return yield(0,Ye.eu)()}catch(V){return!1}})).apply(this,arguments)}!function Es(){(0,le._registerComponent)(new Xe.wA("remote-config",function V(Y,{instanceIdentifier:de}){const je=Y.getProvider("app").getImmediate(),Mt=Y.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw qi.create("registration-window");if(!(0,Ye.hl)())throw qi.create("indexed-db-unavailable");const{projectId:zt,apiKey:kn,appId:Lr}=je.options;if(!zt)throw qi.create("registration-project-id");if(!kn)throw qi.create("registration-api-key");if(!Lr)throw qi.create("registration-app-id");const Gr=new ei(Lr,je.name,de=de||"firebase"),jr=new as(Gr),Hi=new gt.Yd(_s);Hi.logLevel=gt.in.ERROR;const mi=new vs(Mt,le.SDK_VERSION,de,zt,kn,Lr),Bo=new dt(mi,Gr),ri=new ko(Bo,Gr,jr,Hi),ss=new $n(je,ri,jr,Gr,Hi);return function Si(V){const Y=(0,Ye.m9)(V);Y._initializePromise||(Y._initializePromise=Y._storageCache.loadFromStorage().then(()=>{Y._isInitializationComplete=!0}))}(ss),ss},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(_s,"0.4.0"),(0,le.registerVersion)(_s,"0.4.0","esm2017")}();const Io="/firebase-messaging-sw.js",Ni="/firebase-cloud-messaging-push-scope",no="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Us="google.c.a.c_id",Bs="google.c.a.c_l",Ro="google.c.a.ts",qs="google.c.a.e";var bs=(()=>{return(V=bs||(bs={})).PUSH_RECEIVED="push-received",V.NOTIFICATION_CLICKED="notification-clicked",bs;var V})();function $s(V){const Y=new Uint8Array(V);return btoa(String.fromCharCode(...Y)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zo(V){const de=(V+"=".repeat((4-V.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),je=atob(de),Mt=new Uint8Array(je.length);for(let zt=0;zt<je.length;++zt)Mt[zt]=je.charCodeAt(zt);return Mt}const ms="fcm_token_details_db",Rs="fcm_token_object_Store";function Ai(V){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,ge.Z)(function*(V){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(zt=>zt.name).includes(ms))return null;let Y=null;return(yield(0,Qe.X3)(ms,5,{upgrade:(je=(0,ge.Z)(function*(Mt,zt,kn,Lr){var Gr;if(zt<2||!Mt.objectStoreNames.contains(Rs))return;const jr=Lr.objectStore(Rs),Hi=yield jr.index("fcmSenderId").get(V);if(yield jr.clear(),Hi)if(2===zt){const mi=Hi;if(!mi.auth||!mi.p256dh||!mi.endpoint)return;Y={token:mi.fcmToken,createTime:null!==(Gr=mi.createTime)&&void 0!==Gr?Gr:Date.now(),subscriptionOptions:{auth:mi.auth,p256dh:mi.p256dh,endpoint:mi.endpoint,swScope:mi.swScope,vapidKey:"string"==typeof mi.vapidKey?mi.vapidKey:$s(mi.vapidKey)}}}else if(3===zt){const mi=Hi;Y={token:mi.fcmToken,createTime:mi.createTime,subscriptionOptions:{auth:$s(mi.auth),p256dh:$s(mi.p256dh),endpoint:mi.endpoint,swScope:mi.swScope,vapidKey:$s(mi.vapidKey)}}}else if(4===zt){const mi=Hi;Y={token:mi.fcmToken,createTime:mi.createTime,subscriptionOptions:{auth:$s(mi.auth),p256dh:$s(mi.p256dh),endpoint:mi.endpoint,swScope:mi.swScope,vapidKey:$s(mi.vapidKey)}}}}),function(zt,kn,Lr,Gr){return je.apply(this,arguments)})})).close(),yield(0,Qe.Lj)(ms),yield(0,Qe.Lj)("fcm_vapid_details_db"),yield(0,Qe.Lj)("undefined"),ao(Y)?Y:null;var je}),Ks.apply(this,arguments)}function ao(V){if(!V||!V.subscriptionOptions)return!1;const{subscriptionOptions:Y}=V;return"number"==typeof V.createTime&&V.createTime>0&&"string"==typeof V.token&&V.token.length>0&&"string"==typeof Y.auth&&Y.auth.length>0&&"string"==typeof Y.p256dh&&Y.p256dh.length>0&&"string"==typeof Y.endpoint&&Y.endpoint.length>0&&"string"==typeof Y.swScope&&Y.swScope.length>0&&"string"==typeof Y.vapidKey&&Y.vapidKey.length>0}const Os="firebase-messaging-store";let ki=null;function _i(){return ki||(ki=(0,Qe.X3)("firebase-messaging-database",1,{upgrade:(V,Y)=>{0===Y&&V.createObjectStore(Os)}})),ki}function U(V){return pe.apply(this,arguments)}function pe(){return(pe=(0,ge.Z)(function*(V){const Y=Cn(V),je=yield(yield _i()).transaction(Os).objectStore(Os).get(Y);if(je)return je;{const Mt=yield Ai(V.appConfig.senderId);if(Mt)return yield q(V,Mt),Mt}})).apply(this,arguments)}function q(V,Y){return ve.apply(this,arguments)}function ve(){return(ve=(0,ge.Z)(function*(V,Y){const de=Cn(V),Mt=(yield _i()).transaction(Os,"readwrite");return yield Mt.objectStore(Os).put(Y,de),yield Mt.done,Y})).apply(this,arguments)}function ze(V){return en.apply(this,arguments)}function en(){return(en=(0,ge.Z)(function*(V){const Y=Cn(V),je=(yield _i()).transaction(Os,"readwrite");yield je.objectStore(Os).delete(Y),yield je.done})).apply(this,arguments)}function Cn({appConfig:V}){return V.appId}const Br=new Ye.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xr(V,Y){return ni.apply(this,arguments)}function ni(){return(ni=(0,ge.Z)(function*(V,Y){const de=yield ts(V),je=Zs(Y),Mt={method:"POST",headers:de,body:JSON.stringify(je)};let zt;try{zt=yield(yield fetch(ro(V.appConfig),Mt)).json()}catch(kn){throw Br.create("token-subscribe-failed",{errorInfo:null==kn?void 0:kn.toString()})}if(zt.error)throw Br.create("token-subscribe-failed",{errorInfo:zt.error.message});if(!zt.token)throw Br.create("token-subscribe-no-token");return zt.token})).apply(this,arguments)}function $r(V,Y){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,ge.Z)(function*(V,Y){const de=yield ts(V),je=Zs(Y.subscriptionOptions),Mt={method:"PATCH",headers:de,body:JSON.stringify(je)};let zt;try{zt=yield(yield fetch(`${ro(V.appConfig)}/${Y.token}`,Mt)).json()}catch(kn){throw Br.create("token-update-failed",{errorInfo:null==kn?void 0:kn.toString()})}if(zt.error)throw Br.create("token-update-failed",{errorInfo:zt.error.message});if(!zt.token)throw Br.create("token-update-no-token");return zt.token})).apply(this,arguments)}function vi(V,Y){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,ge.Z)(function*(V,Y){const je={method:"DELETE",headers:yield ts(V)};try{const zt=yield(yield fetch(`${ro(V.appConfig)}/${Y}`,je)).json();if(zt.error)throw Br.create("token-unsubscribe-failed",{errorInfo:zt.error.message})}catch(Mt){throw Br.create("token-unsubscribe-failed",{errorInfo:null==Mt?void 0:Mt.toString()})}})).apply(this,arguments)}function ro({projectId:V}){return`https://fcmregistrations.googleapis.com/v1/projects/${V}/registrations`}function ts(V){return kr.apply(this,arguments)}function kr(){return(kr=(0,ge.Z)(function*({appConfig:V,installations:Y}){const de=yield Y.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V.apiKey,"x-goog-firebase-installations-auth":`FIS ${de}`})})).apply(this,arguments)}function Zs({p256dh:V,auth:Y,endpoint:de,vapidKey:je}){const Mt={web:{endpoint:de,auth:Y,p256dh:V}};return je!==no&&(Mt.web.applicationPubKey=je),Mt}const Po=6048e5;function io(V){return vo.apply(this,arguments)}function vo(){return(vo=(0,ge.Z)(function*(V){const Y=yield te(V.swRegistration,V.vapidKey),de={vapidKey:V.vapidKey,swScope:V.swRegistration.scope,endpoint:Y.endpoint,auth:$s(Y.getKey("auth")),p256dh:$s(Y.getKey("p256dh"))},je=yield U(V.firebaseDependencies);if(je){if(be(je.subscriptionOptions,de))return Date.now()>=je.createTime+Po?L(V,{token:je.token,createTime:Date.now(),subscriptionOptions:de}):je.token;try{yield vi(V.firebaseDependencies,je.token)}catch(Mt){console.warn(Mt)}return We(V.firebaseDependencies,de)}return We(V.firebaseDependencies,de)})).apply(this,arguments)}function Q(V){return G.apply(this,arguments)}function G(){return(G=(0,ge.Z)(function*(V){const Y=yield U(V.firebaseDependencies);Y&&(yield vi(V.firebaseDependencies,Y.token),yield ze(V.firebaseDependencies));const de=yield V.swRegistration.pushManager.getSubscription();return!de||de.unsubscribe()})).apply(this,arguments)}function L(V,Y){return he.apply(this,arguments)}function he(){return(he=(0,ge.Z)(function*(V,Y){try{const de=yield $r(V.firebaseDependencies,Y),je=Object.assign(Object.assign({},Y),{token:de,createTime:Date.now()});return yield q(V.firebaseDependencies,je),de}catch(de){throw yield Q(V),de}})).apply(this,arguments)}function We(V,Y){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,ge.Z)(function*(V,Y){const je={token:yield Xr(V,Y),createTime:Date.now(),subscriptionOptions:Y};return yield q(V,je),je.token})).apply(this,arguments)}function te(V,Y){return K.apply(this,arguments)}function K(){return(K=(0,ge.Z)(function*(V,Y){return(yield V.pushManager.getSubscription())||V.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zo(Y)})})).apply(this,arguments)}function be(V,Y){return Y.vapidKey===V.vapidKey&&Y.endpoint===V.endpoint&&Y.auth===V.auth&&Y.p256dh===V.p256dh}function Ue(V){const Y={from:V.from,collapseKey:V.collapse_key,messageId:V.fcmMessageId};return function rt(V,Y){if(!Y.notification)return;V.notification={};const de=Y.notification.title;de&&(V.notification.title=de);const je=Y.notification.body;je&&(V.notification.body=je);const Mt=Y.notification.image;Mt&&(V.notification.image=Mt);const zt=Y.notification.icon;zt&&(V.notification.icon=zt)}(Y,V),function Ht(V,Y){!Y.data||(V.data=Y.data)}(Y,V),function Sn(V,Y){var de,je,Mt,zt,kn;if(!Y.fcmOptions&&!(null===(de=Y.notification)||void 0===de?void 0:de.click_action))return;V.fcmOptions={};const Lr=null!==(Mt=null===(je=Y.fcmOptions)||void 0===je?void 0:je.link)&&void 0!==Mt?Mt:null===(zt=Y.notification)||void 0===zt?void 0:zt.click_action;Lr&&(V.fcmOptions.link=Lr);const Gr=null===(kn=Y.fcmOptions)||void 0===kn?void 0:kn.analytics_label;Gr&&(V.fcmOptions.analyticsLabel=Gr)}(Y,V),Y}function vr(V){return"object"==typeof V&&!!V&&Us in V}function Kn(V,Y){const de=[];for(let je=0;je<V.length;je++)de.push(V.charAt(je)),je<Y.length&&de.push(Y.charAt(je));return de.join("")}function gi(V){return Br.create("missing-app-config-values",{valueName:V})}Kn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Kn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fi{constructor(Y,de,je){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Mt=function ti(V){if(!V||!V.options)throw gi("App Configuration Object");if(!V.name)throw gi("App Name");const Y=["projectId","apiKey","appId","messagingSenderId"],{options:de}=V;for(const je of Y)if(!de[je])throw gi(je);return{appName:V.name,projectId:de.projectId,apiKey:de.apiKey,appId:de.appId,senderId:de.messagingSenderId}}(Y);this.firebaseDependencies={app:Y,appConfig:Mt,installations:de,analyticsProvider:je}}_delete(){return Promise.resolve()}}function Ui(V){return is.apply(this,arguments)}function is(){return(is=(0,ge.Z)(function*(V){try{V.swRegistration=yield navigator.serviceWorker.register(Io,{scope:Ni}),V.swRegistration.update().catch(()=>{})}catch(Y){throw Br.create("failed-service-worker-registration",{browserErrorMessage:null==Y?void 0:Y.message})}})).apply(this,arguments)}function l(V,Y){return x.apply(this,arguments)}function x(){return(x=(0,ge.Z)(function*(V,Y){if(!Y&&!V.swRegistration&&(yield Ui(V)),Y||!V.swRegistration){if(!(Y instanceof ServiceWorkerRegistration))throw Br.create("invalid-sw-registration");V.swRegistration=Y}})).apply(this,arguments)}function S(V,Y){return P.apply(this,arguments)}function P(){return(P=(0,ge.Z)(function*(V,Y){Y?V.vapidKey=Y:V.vapidKey||(V.vapidKey=no)})).apply(this,arguments)}function J(){return(J=(0,ge.Z)(function*(V,Y){if(!navigator)throw Br.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Br.create("permission-blocked");return yield S(V,null==Y?void 0:Y.vapidKey),yield l(V,null==Y?void 0:Y.serviceWorkerRegistration),io(V)})).apply(this,arguments)}function ye(V,Y,de){return Te.apply(this,arguments)}function Te(){return(Te=(0,ge.Z)(function*(V,Y,de){const je=ae(Y);(yield V.firebaseDependencies.analyticsProvider.get()).logEvent(je,{message_id:de[Us],message_name:de[Bs],message_time:de[Ro],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ae(V){switch(V){case bs.NOTIFICATION_CLICKED:return"notification_open";case bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ce(){return(ce=(0,ge.Z)(function*(V,Y){const de=Y.data;if(!de.isFirebaseMessaging)return;V.onMessageHandler&&de.messageType===bs.PUSH_RECEIVED&&("function"==typeof V.onMessageHandler?V.onMessageHandler(Ue(de)):V.onMessageHandler.next(Ue(de)));const je=de.data;vr(je)&&"1"===je[qs]&&(yield ye(V,de.messageType,je))})).apply(this,arguments)}const ue="@firebase/messaging",He=V=>{const Y=new fi(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),V.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",de=>function _e(V,Y){return ce.apply(this,arguments)}(Y,de)),Y},nt=V=>{const Y=V.getProvider("messaging").getImmediate();return{getToken:je=>function z(V,Y){return J.apply(this,arguments)}(Y,je)}};function Le(){return _t.apply(this,arguments)}function _t(){return(_t=(0,ge.Z)(function*(){try{yield(0,Ye.eu)()}catch(V){return!1}return"undefined"!=typeof window&&(0,Ye.hl)()&&(0,Ye.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ae(){(0,le._registerComponent)(new Xe.wA("messaging",He,"PUBLIC")),(0,le._registerComponent)(new Xe.wA("messaging-internal",nt,"PRIVATE")),(0,le.registerVersion)(ue,"0.12.0"),(0,le.registerVersion)(ue,"0.12.0","esm2017")}();const Nn="analytics",Qt="firebase_id",B="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",b="https://www.googletagmanager.com/gtag/js",E=new gt.Yd("@firebase/analytics");function k(V){return Promise.all(V.map(Y=>Y.catch(de=>de)))}function ee(V,Y){const de=document.createElement("script");de.src=`${b}?l=${V}&id=${Y}`,de.async=!0,document.head.appendChild(de)}function ke(V,Y,de,je,Mt,zt){return qe.apply(this,arguments)}function qe(){return(qe=(0,ge.Z)(function*(V,Y,de,je,Mt,zt){const kn=je[Mt];try{if(kn)yield Y[kn];else{const Gr=(yield k(de)).find(jr=>jr.measurementId===Mt);Gr&&(yield Y[Gr.appId])}}catch(Lr){E.error(Lr)}V("config",Mt,zt)})).apply(this,arguments)}function wt(V,Y,de,je,Mt){return sn.apply(this,arguments)}function sn(){return(sn=(0,ge.Z)(function*(V,Y,de,je,Mt){try{let zt=[];if(Mt&&Mt.send_to){let kn=Mt.send_to;Array.isArray(kn)||(kn=[kn]);const Lr=yield k(de);for(const Gr of kn){const jr=Lr.find(mi=>mi.measurementId===Gr),Hi=jr&&Y[jr.appId];if(!Hi){zt=[];break}zt.push(Hi)}}0===zt.length&&(zt=Object.values(Y)),yield Promise.all(zt),V("event",je,Mt||{})}catch(zt){E.error(zt)}})).apply(this,arguments)}function Jr(V){const Y=window.document.getElementsByTagName("script");for(const de of Object.values(Y))if(de.src&&de.src.includes(b)&&de.src.includes(V))return de;return null}const xr=new Ye.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),us=new class xi{constructor(Y={},de=1e3){this.throttleMetadata=Y,this.intervalMillis=de}getThrottleMetadata(Y){return this.throttleMetadata[Y]}setThrottleMetadata(Y,de){this.throttleMetadata[Y]=de}deleteThrottleMetadata(Y){delete this.throttleMetadata[Y]}};function Hs(V){return new Headers({Accept:"application/json","x-goog-api-key":V})}function En(V){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,ge.Z)(function*(V){var Y;const{appId:de,apiKey:je}=V,Mt={method:"GET",headers:Hs(je)},zt=B.replace("{app-id}",de),kn=yield fetch(zt,Mt);if(200!==kn.status&&304!==kn.status){let Lr="";try{const Gr=yield kn.json();(null===(Y=Gr.error)||void 0===Y?void 0:Y.message)&&(Lr=Gr.error.message)}catch(Gr){}throw xr.create("config-fetch-failed",{httpStatus:kn.status,responseMessage:Lr})}return kn.json()})).apply(this,arguments)}function $i(V){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,ge.Z)(function*(V,Y=us,de){const{appId:je,apiKey:Mt,measurementId:zt}=V.options;if(!je)throw xr.create("no-app-id");if(!Mt){if(zt)return{measurementId:zt,appId:je};throw xr.create("no-api-key")}const kn=Y.getThrottleMetadata(je)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Lr=new qt;return setTimeout((0,ge.Z)(function*(){Lr.abort()}),void 0!==de?de:6e4),rr({appId:je,apiKey:Mt,measurementId:zt},kn,Lr,Y)})).apply(this,arguments)}function rr(V,Y,de){return hr.apply(this,arguments)}function hr(){return(hr=(0,ge.Z)(function*(V,{throttleEndTimeMillis:Y,backoffCount:de},je,Mt=us){var zt;const{appId:kn,measurementId:Lr}=V;try{yield Yo(je,Y)}catch(Gr){if(Lr)return E.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Lr} provided in the "measurementId" field in the local Firebase config. [${null==Gr?void 0:Gr.message}]`),{appId:kn,measurementId:Lr};throw Gr}try{const Gr=yield En(V);return Mt.deleteThrottleMetadata(kn),Gr}catch(Gr){const jr=Gr;if(!er(jr)){if(Mt.deleteThrottleMetadata(kn),Lr)return E.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Lr} provided in the "measurementId" field in the local Firebase config. [${null==jr?void 0:jr.message}]`),{appId:kn,measurementId:Lr};throw Gr}const Hi=503===Number(null===(zt=null==jr?void 0:jr.customData)||void 0===zt?void 0:zt.httpStatus)?(0,Ye.$s)(de,Mt.intervalMillis,30):(0,Ye.$s)(de,Mt.intervalMillis),mi={throttleEndTimeMillis:Date.now()+Hi,backoffCount:de+1};return Mt.setThrottleMetadata(kn,mi),E.debug(`Calling attemptFetch again in ${Hi} millis`),rr(V,mi,je,Mt)}})).apply(this,arguments)}function Yo(V,Y){return new Promise((de,je)=>{const Mt=Math.max(Y-Date.now(),0),zt=setTimeout(de,Mt);V.addEventListener(()=>{clearTimeout(zt),je(xr.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}function er(V){if(!(V instanceof Ye.ZR&&V.customData))return!1;const Y=Number(V.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}class qt{constructor(){this.listeners=[]}addEventListener(Y){this.listeners.push(Y)}abort(){this.listeners.forEach(Y=>Y())}}let In,Ke;function Vo(){return(Vo=(0,ge.Z)(function*(V,Y,de,je,Mt){if(Mt&&Mt.global)V("event",de,je);else{const zt=yield Y;V("event",de,Object.assign(Object.assign({},je),{send_to:zt}))}})).apply(this,arguments)}function cn(V){Ke=V}function Rn(V){In=V}function Fr(){return _r.apply(this,arguments)}function _r(){return(_r=(0,ge.Z)(function*(){if(!(0,Ye.hl)())return E.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ye.eu)()}catch(V){return E.warn(xr.create("indexeddb-unavailable",{errorInfo:null==V?void 0:V.toString()}).message),!1}return!0})).apply(this,arguments)}function Gn(){return(Gn=(0,ge.Z)(function*(V,Y,de,je,Mt,zt,kn){var Lr;const Gr=$i(V);Gr.then(ri=>{de[ri.measurementId]=ri.appId,V.options.measurementId&&ri.measurementId!==V.options.measurementId&&E.warn(`The measurement ID in the local Firebase config (${V.options.measurementId}) does not match the measurement ID fetched from the server (${ri.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ri=>E.error(ri)),Y.push(Gr);const jr=Fr().then(ri=>{if(ri)return je.getId()}),[Hi,mi]=yield Promise.all([Gr,jr]);Jr(zt)||ee(zt,Hi.measurementId),Ke&&(Mt("consent","default",Ke),cn(void 0)),Mt("js",new Date);const Bo=null!==(Lr=null==kn?void 0:kn.config)&&void 0!==Lr?Lr:{};return Bo.origin="firebase",Bo.update=!0,null!=mi&&(Bo[Qt]=mi),Mt("config",Hi.measurementId,Bo),In&&(Mt("set",In),Rn(void 0)),Hi.measurementId})).apply(this,arguments)}class _o{constructor(Y){this.app=Y}_delete(){return delete ai[this.app.options.appId],Promise.resolve()}}let ai={},Aa=[];const Ns={};let xa,Eo,Qn="dataLayer",ul=!1;function Ll(V,Y,de){!function Za(){const V=[];if((0,Ye.ru)()&&V.push("This is a browser extension environment."),(0,Ye.zI)()||V.push("Cookies are not available."),V.length>0){const Y=V.map((je,Mt)=>`(${Mt+1}) ${je}`).join(" "),de=xr.create("invalid-analytics-context",{errorInfo:Y});E.warn(de.message)}}();const je=V.options.appId;if(!je)throw xr.create("no-app-id");if(!V.options.apiKey){if(!V.options.measurementId)throw xr.create("no-api-key");E.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${V.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ai[je])throw xr.create("already-exists",{id:je});if(!ul){!function Ee(V){let Y=[];Array.isArray(window[V])?Y=window[V]:window[V]=Y}(Qn);const{wrappedGtag:zt,gtagCore:kn}=function Er(V,Y,de,je,Mt){let zt=function(...kn){window[je].push(arguments)};return window[Mt]&&"function"==typeof window[Mt]&&(zt=window[Mt]),window[Mt]=function sr(V,Y,de,je){function zt(){return(zt=(0,ge.Z)(function*(kn,Lr,Gr){try{"event"===kn?yield wt(V,Y,de,Lr,Gr):"config"===kn?yield ke(V,Y,de,je,Lr,Gr):"consent"===kn?V("consent","update",Gr):V("set",Lr)}catch(jr){E.error(jr)}})).apply(this,arguments)}return function Mt(kn,Lr,Gr){return zt.apply(this,arguments)}}(zt,V,Y,de),{gtagCore:zt,wrappedGtag:window[Mt]}}(ai,Aa,Ns,Qn,"gtag");Eo=zt,xa=kn,ul=!0}return ai[je]=function Mr(V,Y,de,je,Mt,zt,kn){return Gn.apply(this,arguments)}(V,Aa,Ns,Y,xa,Qn,de),new _o(V)}function na(){return _a.apply(this,arguments)}function _a(){return(_a=(0,ge.Z)(function*(){if((0,Ye.ru)()||!(0,Ye.zI)()||!(0,Ye.hl)())return!1;try{return yield(0,Ye.eu)()}catch(V){return!1}})).apply(this,arguments)}const Co="@firebase/analytics";!function ia(){(0,le._registerComponent)(new Xe.wA(Nn,(Y,{options:de})=>Ll(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),de),"PUBLIC")),(0,le._registerComponent)(new Xe.wA("analytics-internal",function V(Y){try{const de=Y.getProvider(Nn).getImmediate();return{logEvent:(je,Mt,zt)=>function Ya(V,Y,de,je){V=(0,Ye.m9)(V),function Ys(V,Y,de,je,Mt){return Vo.apply(this,arguments)}(Eo,ai[V.app.options.appId],Y,de,je).catch(Mt=>E.error(Mt))}(de,je,Mt,zt)}}catch(de){throw xr.create("interop-component-reg-failed",{reason:de})}},"PRIVATE")),(0,le.registerVersion)(Co,"0.9.0"),(0,le.registerVersion)(Co,"0.9.0","esm2017")}();var Gu=H(4408),So=H(7565);const Jl=new class Qo extends So.v{}(class sa extends Gu.o{constructor(Y,de){super(Y,de),this.scheduler=Y,this.work=de}schedule(Y,de=0){return de>0?super.schedule(Y,de):(this.delay=de,this.state=Y,this.scheduler.flush(this),this)}execute(Y,de){return de>0||this.closed?super.execute(Y,de):this._execute(Y,de)}requestAsyncId(Y,de,je=0){return null!=je&&je>0||null==je&&this.delay>0?super.requestAsyncId(Y,de,je):(Y.flush(this),0)}});var fo=H(4986),cl=H(8505),Xo=H(5363),Il=H(9468);const Va=new g.GfV("7.5.0"),_u="__angularfire_symbol__analyticsIsSupportedValue",la="__angularfire_symbol__analyticsIsSupported",po="__angularfire_symbol__remoteConfigIsSupportedValue",Qa="__angularfire_symbol__remoteConfigIsSupported",Ua="__angularfire_symbol__messagingIsSupportedValue",so="__angularfire_symbol__messagingIsSupported";function Vl(V,Y,de){if(Y){if(1===Y.length)return Y[0];const zt=Y.filter(kn=>kn.app===de);if(1===zt.length)return zt[0]}return de.container.getProvider(V).getImmediate({optional:!0})}globalThis[la]||(globalThis[la]=na().then(V=>globalThis[_u]=V).catch(()=>globalThis[_u]=!1)),globalThis[so]||(globalThis[so]=Le().then(V=>globalThis[Ua]=V).catch(()=>globalThis[Ua]=!1)),globalThis[Qa]||(globalThis[Qa]=co().then(V=>globalThis[po]=V).catch(()=>globalThis[po]=!1));const Ja=(V,Y)=>{const de=Y?[Y]:(0,Z.C6)(),je=[];return de.forEach(Mt=>{Mt.container.getProvider(V).instances.forEach(kn=>{je.includes(kn)||je.push(kn)})}),je};function Ca(){}class Jo{constructor(Y,de=Jl){this.zone=Y,this.delegate=de}now(){return this.delegate.now()}schedule(Y,de,je){const Mt=this.zone;return this.delegate.schedule(function(kn){Mt.runGuarded(()=>{Y.apply(this,[kn])})},de,je)}}class dl{constructor(Y){this.zone=Y,this.task=null}call(Y,de){const je=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ca,{},Ca,Ca)),de.pipe((0,cl.b)({next:je,complete:je,error:je})).subscribe(Y).add(je)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let el=(()=>{class V{constructor(de){this.ngZone=de,this.outsideAngular=de.runOutsideAngular(()=>new Jo(Zone.current)),this.insideAngular=de.run(()=>new Jo(Zone.current,fo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return V.\u0275fac=function(de){return new(de||V)(g.LFG(g.R0b))},V.\u0275prov=g.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function oo(){const V=globalThis.\u0275AngularFireScheduler;if(!V)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return V}function zu(V){return V.pipe((0,Xo.Q)(oo().outsideAngular))}function Sl(V){return oo(),function ba(V){return function(de){return(de=de.lift(new dl(V.ngZone))).pipe((0,Il.R)(V.outsideAngular),(0,Xo.Q)(V.insideAngular))}}(oo())(V)}},2090:(jn,Dt,H)=>{H.d(Dt,{$s:()=>Wn,BH:()=>Jn,DV:()=>Zr,G6:()=>ot,GJ:()=>Yn,L:()=>Qe,LL:()=>Ft,P0:()=>on,Pz:()=>Xn,Sg:()=>fn,UG:()=>nn,UI:()=>qn,US:()=>Xe,Wl:()=>ut,Yr:()=>Ne,ZB:()=>Me,ZR:()=>lr,aH:()=>wn,b$:()=>Jt,cI:()=>It,dS:()=>ui,eu:()=>Ut,g5:()=>ge,gK:()=>Or,gQ:()=>it,h$:()=>gt,hl:()=>Kt,hu:()=>Z,jU:()=>bn,m9:()=>Nr,ne:()=>ct,p$:()=>Pe,pd:()=>an,r3:()=>tr,ru:()=>Pt,tV:()=>ft,uI:()=>vt,ug:()=>Fn,vZ:()=>Hr,w1:()=>un,w9:()=>Un,xO:()=>rs,xb:()=>si,z$:()=>pn,zI:()=>Fe,zd:()=>Ji});const Z=function(tt,$e){if(!tt)throw ge($e)},ge=function(tt){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+tt)},le=function(tt){const $e=[];let ht=0;for(let rn=0;rn<tt.length;rn++){let kt=tt.charCodeAt(rn);kt<128?$e[ht++]=kt:kt<2048?($e[ht++]=kt>>6|192,$e[ht++]=63&kt|128):55296==(64512&kt)&&rn+1<tt.length&&56320==(64512&tt.charCodeAt(rn+1))?(kt=65536+((1023&kt)<<10)+(1023&tt.charCodeAt(++rn)),$e[ht++]=kt>>18|240,$e[ht++]=kt>>12&63|128,$e[ht++]=kt>>6&63|128,$e[ht++]=63&kt|128):($e[ht++]=kt>>12|224,$e[ht++]=kt>>6&63|128,$e[ht++]=63&kt|128)}return $e},Xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(tt,$e){if(!Array.isArray(tt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ht=$e?this.byteToCharMapWebSafe_:this.byteToCharMap_,rn=[];for(let kt=0;kt<tt.length;kt+=3){const Ge=tt[kt],Re=kt+1<tt.length,De=Re?tt[kt+1]:0,pt=kt+2<tt.length,Yt=pt?tt[kt+2]:0;let Kr=(15&De)<<2|Yt>>6,zi=63&Yt;pt||(zi=64,Re||(Kr=64)),rn.push(ht[Ge>>2],ht[(3&Ge)<<4|De>>4],ht[Kr],ht[zi])}return rn.join("")},encodeString(tt,$e){return this.HAS_NATIVE_SUPPORT&&!$e?btoa(tt):this.encodeByteArray(le(tt),$e)},decodeString(tt,$e){return this.HAS_NATIVE_SUPPORT&&!$e?atob(tt):function(tt){const $e=[];let ht=0,rn=0;for(;ht<tt.length;){const kt=tt[ht++];if(kt<128)$e[rn++]=String.fromCharCode(kt);else if(kt>191&&kt<224){const Ge=tt[ht++];$e[rn++]=String.fromCharCode((31&kt)<<6|63&Ge)}else if(kt>239&&kt<365){const pt=((7&kt)<<18|(63&tt[ht++])<<12|(63&tt[ht++])<<6|63&tt[ht++])-65536;$e[rn++]=String.fromCharCode(55296+(pt>>10)),$e[rn++]=String.fromCharCode(56320+(1023&pt))}else{const Ge=tt[ht++],Re=tt[ht++];$e[rn++]=String.fromCharCode((15&kt)<<12|(63&Ge)<<6|63&Re)}}return $e.join("")}(this.decodeStringToByteArray(tt,$e))},decodeStringToByteArray(tt,$e){this.init_();const ht=$e?this.charToByteMapWebSafe_:this.charToByteMap_,rn=[];for(let kt=0;kt<tt.length;){const Ge=ht[tt.charAt(kt++)],De=kt<tt.length?ht[tt.charAt(kt)]:0;++kt;const Yt=kt<tt.length?ht[tt.charAt(kt)]:64;++kt;const Hn=kt<tt.length?ht[tt.charAt(kt)]:64;if(++kt,null==Ge||null==De||null==Yt||null==Hn)throw Error();rn.push(Ge<<2|De>>4),64!==Yt&&(rn.push(De<<4&240|Yt>>2),64!==Hn&&rn.push(Yt<<6&192|Hn))}return rn},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let tt=0;tt<this.ENCODED_VALS.length;tt++)this.byteToCharMap_[tt]=this.ENCODED_VALS.charAt(tt),this.charToByteMap_[this.byteToCharMap_[tt]]=tt,this.byteToCharMapWebSafe_[tt]=this.ENCODED_VALS_WEBSAFE.charAt(tt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[tt]]=tt,tt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(tt)]=tt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(tt)]=tt)}}},gt=function(tt){const $e=le(tt);return Xe.encodeByteArray($e,!0)},Qe=function(tt){return gt(tt).replace(/\./g,"")},ft=function(tt){try{return Xe.decodeString(tt,!0)}catch($e){console.error("base64Decode failed: ",$e)}return null};function Pe(tt){return Me(void 0,tt)}function Me(tt,$e){if(!($e instanceof Object))return $e;switch($e.constructor){case Date:return new Date($e.getTime());case Object:void 0===tt&&(tt={});break;case Array:tt=[];break;default:return $e}for(const ht in $e)!$e.hasOwnProperty(ht)||!Et(ht)||(tt[ht]=Me(tt[ht],$e[ht]));return tt}function Et(tt){return"__proto__"!==tt}function pn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function nn(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(tt){return!1}}function bn(){return"object"==typeof self&&self.self===self}function Pt(){const tt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof tt&&void 0!==tt.id}function Jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function un(){const tt=pn();return tt.indexOf("MSIE ")>=0||tt.indexOf("Trident/")>=0}function Ne(){return!1}function ot(){return!nn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kt(){try{return"object"==typeof indexedDB}catch(tt){return!1}}function Ut(){return new Promise((tt,$e)=>{try{let ht=!0;const rn="validate-browser-context-for-indexeddb-analytics-module",kt=self.indexedDB.open(rn);kt.onsuccess=()=>{kt.result.close(),ht||self.indexedDB.deleteDatabase(rn),tt(!0)},kt.onupgradeneeded=()=>{ht=!1},kt.onerror=()=>{var Ge;$e((null===(Ge=kt.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(ht){$e(ht)}})}function Fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Nt=()=>{try{return function Lt(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const tt=process.env.__FIREBASE_DEFAULTS__;return tt?JSON.parse(tt):void 0})()||(()=>{if("undefined"==typeof document)return;let tt;try{tt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ht){return}const $e=tt&&ft(tt[1]);return $e&&JSON.parse($e)})()}catch(tt){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${tt}`)}},on=tt=>{const $e=(tt=>{var $e,ht;return null===(ht=null===($e=Nt())||void 0===$e?void 0:$e.emulatorHosts)||void 0===ht?void 0:ht[tt]})(tt);if(!$e)return;const ht=$e.lastIndexOf(":");if(ht<=0||ht+1===$e.length)throw new Error(`Invalid host ${$e} with no separate hostname and port!`);const rn=parseInt($e.substring(ht+1),10);return"["===$e[0]?[$e.substring(1,ht-1),rn]:[$e.substring(0,ht),rn]},wn=()=>{var tt;return null===(tt=Nt())||void 0===tt?void 0:tt.config},Xn=tt=>{var $e;return null===($e=Nt())||void 0===$e?void 0:$e[`_${tt}`]};class Jn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($e,ht)=>{this.resolve=$e,this.reject=ht})}wrapCallback($e){return(ht,rn)=>{ht?this.reject(ht):this.resolve(rn),"function"==typeof $e&&(this.promise.catch(()=>{}),1===$e.length?$e(ht):$e(ht,rn))}}}function fn(tt,$e){if(tt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const rn=$e||"demo-project",kt=tt.iat||0,Ge=tt.sub||tt.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${rn}`,aud:rn,iat:kt,exp:kt+3600,auth_time:kt,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},tt);return[Qe(JSON.stringify({alg:"none",type:"JWT"})),Qe(JSON.stringify(Re)),""].join(".")}class lr extends Error{constructor($e,ht,rn){super(ht),this.code=$e,this.customData=rn,this.name="FirebaseError",Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ft.prototype.create)}}class Ft{constructor($e,ht,rn){this.service=$e,this.serviceName=ht,this.errors=rn}create($e,...ht){const rn=ht[0]||{},kt=`${this.service}/${$e}`,Ge=this.errors[$e],Re=Ge?function Ot(tt,$e){return tt.replace(st,(ht,rn)=>{const kt=$e[rn];return null!=kt?String(kt):`<${rn}?>`})}(Ge,rn):"Error";return new lr(kt,`${this.serviceName}: ${Re} (${kt}).`,rn)}}const st=/\{\$([^}]+)}/g;function It(tt){return JSON.parse(tt)}function ut(tt){return JSON.stringify(tt)}const Wt=function(tt){let $e={},ht={},rn={},kt="";try{const Ge=tt.split(".");$e=It(ft(Ge[0])||""),ht=It(ft(Ge[1])||""),kt=Ge[2],rn=ht.d||{},delete ht.d}catch(Ge){}return{header:$e,claims:ht,data:rn,signature:kt}},Un=function(tt){const ht=Wt(tt).claims;return!!ht&&"object"==typeof ht&&ht.hasOwnProperty("iat")},Yn=function(tt){const $e=Wt(tt).claims;return"object"==typeof $e&&!0===$e.admin};function tr(tt,$e){return Object.prototype.hasOwnProperty.call(tt,$e)}function Zr(tt,$e){if(Object.prototype.hasOwnProperty.call(tt,$e))return tt[$e]}function si(tt){for(const $e in tt)if(Object.prototype.hasOwnProperty.call(tt,$e))return!1;return!0}function qn(tt,$e,ht){const rn={};for(const kt in tt)Object.prototype.hasOwnProperty.call(tt,kt)&&(rn[kt]=$e.call(ht,tt[kt],kt,tt));return rn}function Hr(tt,$e){if(tt===$e)return!0;const ht=Object.keys(tt),rn=Object.keys($e);for(const kt of ht){if(!rn.includes(kt))return!1;const Ge=tt[kt],Re=$e[kt];if(Tr(Ge)&&Tr(Re)){if(!Hr(Ge,Re))return!1}else if(Ge!==Re)return!1}for(const kt of rn)if(!ht.includes(kt))return!1;return!0}function Tr(tt){return null!==tt&&"object"==typeof tt}function rs(tt){const $e=[];for(const[ht,rn]of Object.entries(tt))Array.isArray(rn)?rn.forEach(kt=>{$e.push(encodeURIComponent(ht)+"="+encodeURIComponent(kt))}):$e.push(encodeURIComponent(ht)+"="+encodeURIComponent(rn));return $e.length?"&"+$e.join("&"):""}function Ji(tt){const $e={};return tt.replace(/^\?/,"").split("&").forEach(rn=>{if(rn){const[kt,Ge]=rn.split("=");$e[decodeURIComponent(kt)]=decodeURIComponent(Ge)}}),$e}function an(tt){const $e=tt.indexOf("?");if(!$e)return"";const ht=tt.indexOf("#",$e);return tt.substring($e,ht>0?ht:void 0)}class it{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $e=1;$e<this.blockSize;++$e)this.pad_[$e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($e,ht){ht||(ht=0);const rn=this.W_;if("string"==typeof $e)for(let Hn=0;Hn<16;Hn++)rn[Hn]=$e.charCodeAt(ht)<<24|$e.charCodeAt(ht+1)<<16|$e.charCodeAt(ht+2)<<8|$e.charCodeAt(ht+3),ht+=4;else for(let Hn=0;Hn<16;Hn++)rn[Hn]=$e[ht]<<24|$e[ht+1]<<16|$e[ht+2]<<8|$e[ht+3],ht+=4;for(let Hn=16;Hn<80;Hn++){const Kr=rn[Hn-3]^rn[Hn-8]^rn[Hn-14]^rn[Hn-16];rn[Hn]=4294967295&(Kr<<1|Kr>>>31)}let Yt,ur,kt=this.chain_[0],Ge=this.chain_[1],Re=this.chain_[2],De=this.chain_[3],pt=this.chain_[4];for(let Hn=0;Hn<80;Hn++){Hn<40?Hn<20?(Yt=De^Ge&(Re^De),ur=1518500249):(Yt=Ge^Re^De,ur=1859775393):Hn<60?(Yt=Ge&Re|De&(Ge|Re),ur=2400959708):(Yt=Ge^Re^De,ur=3395469782);const Kr=(kt<<5|kt>>>27)+Yt+pt+ur+rn[Hn]&4294967295;pt=De,De=Re,Re=4294967295&(Ge<<30|Ge>>>2),Ge=kt,kt=Kr}this.chain_[0]=this.chain_[0]+kt&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+Re&4294967295,this.chain_[3]=this.chain_[3]+De&4294967295,this.chain_[4]=this.chain_[4]+pt&4294967295}update($e,ht){if(null==$e)return;void 0===ht&&(ht=$e.length);const rn=ht-this.blockSize;let kt=0;const Ge=this.buf_;let Re=this.inbuf_;for(;kt<ht;){if(0===Re)for(;kt<=rn;)this.compress_($e,kt),kt+=this.blockSize;if("string"==typeof $e){for(;kt<ht;)if(Ge[Re]=$e.charCodeAt(kt),++Re,++kt,Re===this.blockSize){this.compress_(Ge),Re=0;break}}else for(;kt<ht;)if(Ge[Re]=$e[kt],++Re,++kt,Re===this.blockSize){this.compress_(Ge),Re=0;break}}this.inbuf_=Re,this.total_+=ht}digest(){const $e=[];let ht=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let kt=this.blockSize-1;kt>=56;kt--)this.buf_[kt]=255&ht,ht/=256;this.compress_(this.buf_);let rn=0;for(let kt=0;kt<5;kt++)for(let Ge=24;Ge>=0;Ge-=8)$e[rn]=this.chain_[kt]>>Ge&255,++rn;return $e}}function ct(tt,$e){const ht=new Bt(tt,$e);return ht.subscribe.bind(ht)}class Bt{constructor($e,ht){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ht,this.task.then(()=>{$e(this)}).catch(rn=>{this.error(rn)})}next($e){this.forEachObserver(ht=>{ht.next($e)})}error($e){this.forEachObserver(ht=>{ht.error($e)}),this.close($e)}complete(){this.forEachObserver($e=>{$e.complete()}),this.close()}subscribe($e,ht,rn){let kt;if(void 0===$e&&void 0===ht&&void 0===rn)throw new Error("Missing Observer.");kt=function yn(tt,$e){if("object"!=typeof tt||null===tt)return!1;for(const ht of $e)if(ht in tt&&"function"==typeof tt[ht])return!0;return!1}($e,["next","error","complete"])?$e:{next:$e,error:ht,complete:rn},void 0===kt.next&&(kt.next=Bn),void 0===kt.error&&(kt.error=Bn),void 0===kt.complete&&(kt.complete=Bn);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?kt.error(this.finalError):kt.complete()}catch(Re){}}),this.observers.push(kt),Ge}unsubscribeOne($e){void 0===this.observers||void 0===this.observers[$e]||(delete this.observers[$e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($e){if(!this.finalized)for(let ht=0;ht<this.observers.length;ht++)this.sendOne(ht,$e)}sendOne($e,ht){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$e])try{ht(this.observers[$e])}catch(rn){"undefined"!=typeof console&&console.error&&console.error(rn)}})}close($e){this.finalized||(this.finalized=!0,void 0!==$e&&(this.finalError=$e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bn(){}function Or(tt,$e){return`${tt} failed: ${$e} argument `}const ui=function(tt){const $e=[];let ht=0;for(let rn=0;rn<tt.length;rn++){let kt=tt.charCodeAt(rn);if(kt>=55296&&kt<=56319){const Ge=kt-55296;rn++,Z(rn<tt.length,"Surrogate pair missing trail surrogate."),kt=65536+(Ge<<10)+(tt.charCodeAt(rn)-56320)}kt<128?$e[ht++]=kt:kt<2048?($e[ht++]=kt>>6|192,$e[ht++]=63&kt|128):kt<65536?($e[ht++]=kt>>12|224,$e[ht++]=kt>>6&63|128,$e[ht++]=63&kt|128):($e[ht++]=kt>>18|240,$e[ht++]=kt>>12&63|128,$e[ht++]=kt>>6&63|128,$e[ht++]=63&kt|128)}return $e},Fn=function(tt){let $e=0;for(let ht=0;ht<tt.length;ht++){const rn=tt.charCodeAt(ht);rn<128?$e++:rn<2048?$e+=2:rn>=55296&&rn<=56319?($e+=4,ht++):$e+=3}return $e};function Wn(tt,$e=1e3,ht=2){const rn=$e*Math.pow(ht,tt),kt=Math.round(.5*rn*(Math.random()-.5)*2);return Math.min(144e5,rn+kt)}function Nr(tt){return tt&&tt._delegate?tt._delegate:tt}},5089:(jn,Dt,H)=>{H.d(Dt,{e:()=>Xe});var g=H(2340),Z=H(5e3),ge=H(520),le=H(6115),Ye=H(8177);let Xe=(()=>{class gt{constructor(ft,Pe,Me){this.http=ft,this.router=Pe,this.cartService=Me,this.logoutloading=!1}login(ft){return this.http.post(`${g.N.apiUrl}login`,ft)}register(ft){return this.http.post(`${g.N.apiUrl}register`,ft)}sent_otp(ft){return this.http.post(`${g.N.apiUrl}sent_otp`,ft)}verify_otp(ft){return this.http.post(`${g.N.apiUrl}verify_otp`,ft)}resetPassword(ft){return this.http.post(`${g.N.apiUrl}reset_password`,ft)}logout(){this.logoutloading=!0,this.http.post(`${g.N.apiUrl}logout`,{}).subscribe(ft=>{this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]),this.logoutloading=!1})}set_online_offline(ft){this.http.post(`${g.N.apiUrl}set_online_offline`,{is_online:ft}).subscribe(Pe=>console.log())}}return gt.\u0275fac=function(ft){return new(ft||gt)(Z.LFG(ge.eN),Z.LFG(le.F0),Z.LFG(Ye.N))},gt.\u0275prov=Z.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"}),gt})()},8177:(jn,Dt,H)=>{H.d(Dt,{N:()=>Ye});var g=H(1135),Z=H(2340),ge=H(5e3),le=H(520);let Ye=(()=>{class Xe{constructor(Qe){this.http=Qe,this.cartItems=new g.X(null),this.discount=new g.X(0),this.showCopon=!1,this.coponid=new g.X(null)}addToCart(Qe){return this.http.post(`${Z.N.apiUrl}add_to_cart`,Qe)}deleteItemFromCart(Qe){return this.http.post(`${Z.N.apiUrl}delete_from_cart`,Qe)}getCart(){return this.http.get(`${Z.N.apiUrl}my_cart`).subscribe(Qe=>{var ft,Pe;(null===(ft=null==Qe?void 0:Qe.data)||void 0===ft?void 0:ft.cartdetails)?this.cartItems.next(null===(Pe=null==Qe?void 0:Qe.data)||void 0===Pe?void 0:Pe.cartdetails):this.cartItems.next([])})}getRecomnded(){return this.http.get(`${Z.N.apiUrl}recommed_materials_offers`)}verifyCopon(Qe){return this.http.get(`${Z.N.apiUrl}coupon/${Qe}`)}addOrder(Qe){return this.http.post(`${Z.N.apiUrl}add_order`,Qe)}}return Xe.\u0275fac=function(Qe){return new(Qe||Xe)(ge.LFG(le.eN))},Xe.\u0275prov=ge.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})()},452:(jn,Dt,H)=>{H.d(Dt,{g:()=>le});var g=H(2340),Z=H(5e3),ge=H(520);let le=(()=>{class Ye{constructor(gt){this.http=gt}getSettings(){return this.http.get(`${g.N.apiUrl}settings`)}}return Ye.\u0275fac=function(gt){return new(gt||Ye)(Z.LFG(ge.eN))},Ye.\u0275prov=Z.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"root"}),Ye})()},4466:(jn,Dt,H)=>{H.d(Dt,{m:()=>ft});var g=H(9808),Z=H(6115),ge=H(2382),le=H(520),Ye=H(2290),Xe=H(9485),gt=H(377),Qe=H(5e3);let ft=(()=>{class Pe{}return Pe.\u0275fac=function(Et){return new(Et||Pe)},Pe.\u0275mod=Qe.oAB({type:Pe}),Pe.\u0275inj=Qe.cJS({providers:[g.uU],imports:[[gt.TE,g.ez,Z.Bz,ge.UX,ge.u5,le.JF,Ye.Rh.forRoot(),Xe.kz],gt.TE,Xe.kz,ge.UX,ge.u5,le.JF,Ye.Rh]}),Pe})()},2340:(jn,Dt,H)=>{H.d(Dt,{N:()=>g});const g={production:!0,apiUrl:"https://code-pirates.com/Drasti-Backend/public/api/"}},6456:(jn,Dt,H)=>{var g=H(2313),Z=H(5e3),ge=H(6115);let le=(()=>{class B{constructor(E){this.title=E}ngOnInit(){this.title.setTitle("\u0627\u0644\u0635\u0641\u062d\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629 - \u062f\u0631\u0627\u0633\u062a\u064a")}}return B.\u0275fac=function(E){return new(E||B)(Z.Y36(g.Dx))},B.\u0275cmp=Z.Xpm({type:B,selectors:[["app-not-found"]],decls:5,vars:0,consts:[[1,"conditions","py-5",2,"min-height","100vh"],[1,"container"],[1,"bg-white","rounded","p-5"],[2,"font-size","30px"]],template:function(E,k){1&E&&(Z.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),Z._uU(4," \u0639\u0641\u0648\u0627! \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a\u0647\u0627. "),Z.qZA()()()())},styles:[""]}),B})(),Ye=(()=>{class B{constructor(E){this.router=E}canActivate(E,k){return!!localStorage.getItem("drastitoken")||(this.router.navigate(["/auth/login"]),!1)}}return B.\u0275fac=function(E){return new(E||B)(Z.LFG(ge.F0))},B.\u0275prov=Z.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})();const gt=[{path:"",loadChildren:()=>H.e(954).then(H.bind(H,3954)).then(B=>B.HomeModule)},{path:"auth",loadChildren:()=>H.e(133).then(H.bind(H,1133)).then(B=>B.AuthModule),canActivate:[(()=>{class B{constructor(E){this.router=E}canActivate(E,k){return!localStorage.getItem("drastitoken")||(this.router.navigate(["/"]),!1)}}return B.\u0275fac=function(E){return new(E||B)(Z.LFG(ge.F0))},B.\u0275prov=Z.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()]},{path:"stage/:id",loadChildren:()=>Promise.all([H.e(592),H.e(362)]).then(H.bind(H,362)).then(B=>B.StageDetailsModule)},{path:"classes/:id/:spe",loadChildren:()=>Promise.all([H.e(592),H.e(854)]).then(H.bind(H,2532)).then(B=>B.ClassesModule)},{path:"specialist/:id/:specialist",loadChildren:()=>Promise.all([H.e(592),H.e(667)]).then(H.bind(H,5667)).then(B=>B.HasSpecialistModule)},{path:"class-details/:id/:type/:class/:spe",loadChildren:()=>Promise.all([H.e(955),H.e(592),H.e(804)]).then(H.bind(H,5804)).then(B=>B.ClassDetailsModule)},{path:"conditions",loadChildren:()=>H.e(36).then(H.bind(H,5036)).then(B=>B.ConditionsModule)},{path:"subject-videos/:id/:lessonid/:unitid",canActivate:[Ye],loadChildren:()=>Promise.all([H.e(955),H.e(324)]).then(H.bind(H,2324)).then(B=>B.SubjectVideosModule)},{path:"cart",loadChildren:()=>Promise.all([H.e(592),H.e(764)]).then(H.bind(H,3764)).then(B=>B.CartModule)},{path:"checkout",loadChildren:()=>Promise.all([H.e(133),H.e(592),H.e(228)]).then(H.bind(H,3228)).then(B=>B.CheckoutModule)},{path:"my-courses",canActivate:[Ye],loadChildren:()=>Promise.all([H.e(592),H.e(769)]).then(H.bind(H,9769)).then(B=>B.MyCoursesModule)},{path:"**",component:le}];let Qe=(()=>{class B{}return B.\u0275fac=function(E){return new(E||B)},B.\u0275mod=Z.oAB({type:B}),B.\u0275inj=Z.cJS({imports:[[ge.Bz.forRoot(gt,{initialNavigation:"enabled",scrollPositionRestoration:"enabled",useHash:!0})],ge.Bz]}),B})();var ft=H(259),Pe=H(6197),Me=H(8177),Et=H(5089),pn=H(9808);function vt(B,b){1&B&&(Z.TgZ(0,"a",14),Z._uU(1," \u0645\u0648\u0627\u062f\u064a "),Z.qZA())}function nn(B,b){1&B&&(Z.TgZ(0,"a",15),Z._UZ(1,"i",16),Z.TgZ(2,"span",17),Z._uU(3," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 "),Z.qZA()())}function bn(B,b){if(1&B){const E=Z.EpF();Z.TgZ(0,"button",18),Z.NdJ("click",function(){return Z.CHM(E),Z.oxw().authService.logout()}),Z._UZ(1,"i",16),Z.TgZ(2,"span",17),Z._uU(3," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c "),Z.qZA()()}if(2&B){const E=Z.oxw();Z.Q6J("disabled",E.authService.logoutloading)}}let Pt=(()=>{class B{constructor(E,k){this.cartService=E,this.authService=k,this.cartLength=0}ngOnInit(){localStorage.getItem("drastitoken")?this.cartService.getCart():this.cartService.cartItems.next([]),this.cartService.cartItems.subscribe(E=>{E&&(this.cartLength=null==E?void 0:E.length)})}islogin(){return!!localStorage.getItem("drastitoken")}}return B.\u0275fac=function(E){return new(E||B)(Z.Y36(Me.N),Z.Y36(Et.e))},B.\u0275cmp=Z.Xpm({type:B,selectors:[["app-navbar"]],decls:17,vars:4,consts:[[1,"container"],[1,"logoParent"],["routerLink","/","aria-label","\u062f\u0631\u0627\u0633\u062a\u064a"],["src","assets/logo.png","alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"mainlogo"],[1,"loginParent"],["aria-label","\u0645\u0648\u0627\u062f\u064a","class","text-primary","routerLink","/my-courses",4,"ngIf"],[1,"mx-2"],["aria-label","\u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642","routerLink","/cart"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag-check","text-primary"],["fill-rule","evenodd","d","M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z"],["d","M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"],[1,"mx-1","cartCount"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644","routerLink","/auth/login","class","bluButton login",4,"ngIf"],["style","cursor: pointer;","aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c","class","bluButton logout",3,"disabled","click",4,"ngIf"],["aria-label","\u0645\u0648\u0627\u062f\u064a","routerLink","/my-courses",1,"text-primary"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644","routerLink","/auth/login",1,"bluButton","login"],[1,"fa-solid","fa-right-to-bracket","d-md-none"],[1,"d-none","d-md-inline"],["aria-label","\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",1,"bluButton","logout",2,"cursor","pointer",3,"disabled","click"]],template:function(E,k){1&E&&(Z.TgZ(0,"nav")(1,"div",0)(2,"div",1)(3,"a",2),Z._UZ(4,"img",3),Z.qZA()(),Z.TgZ(5,"div",4),Z.YNc(6,vt,2,0,"a",5),Z._UZ(7,"span",6),Z.TgZ(8,"a",7),Z.O4$(),Z.TgZ(9,"svg",8),Z._UZ(10,"path",9)(11,"path",10),Z.qZA(),Z.kcU(),Z.TgZ(12,"small",11),Z._uU(13),Z.qZA()(),Z._UZ(14,"span",6),Z.YNc(15,nn,4,0,"a",12),Z.YNc(16,bn,4,1,"button",13),Z.qZA()()()),2&E&&(Z.xp6(6),Z.Q6J("ngIf",k.islogin()),Z.xp6(7),Z.Oqu(k.cartLength),Z.xp6(2),Z.Q6J("ngIf",!k.islogin()),Z.xp6(1),Z.Q6J("ngIf",k.islogin()))},directives:[ge.yS,pn.O5],styles:[""]}),B})();var Jt=H(452);function Ln(B,b){1&B&&(Z.TgZ(0,"tr",15)(1,"td"),Z._uU(2,"94181196 965+"),Z.qZA(),Z.TgZ(3,"td"),Z._UZ(4,"i",11),Z.qZA()())}let un=(()=>{class B{constructor(E,k){this.settingsService=E,this.cartService=k}ngOnInit(){this.settingsService.getSettings().subscribe(E=>{var k;this.settings=null==E?void 0:E.data,1==(null===(k=null==E?void 0:E.data)||void 0===k?void 0:k.show_coupon)&&(this.cartService.showCopon=!0)})}}return B.\u0275fac=function(E){return new(E||B)(Z.Y36(Jt.g),Z.Y36(Me.N))},B.\u0275cmp=Z.Xpm({type:B,selectors:[["app-footer"]],decls:30,vars:1,consts:[[1,"py-4"],[1,"container"],[1,"row"],[1,"col-md-4","mb-3"],[1,"mb-4","text-center"],["src","assets/footerlogo.png","alt","\u062f\u0631\u0627\u0633\u062a\u064a",1,"img-fluid"],[1,"icons","text-center"],["aria-label","\u0627\u0646\u0633\u062a\u062c\u0631\u0627\u0645","target","_blank","href","https://www.instagram.com/drastiq8/"],[1,"fa-brands","fa-instagram"],[1,"mx-3"],["aria-label","\u0648\u0627\u062a\u0633\u0627\u0628","target","_blank","href","https://api.whatsapp.com/send/?phone=96594181196&text&app_absent=0"],[1,"fa-brands","fa-whatsapp"],[1,"pt-4"],[1,"mb-3"],["class","pb-5",4,"ngIf"],[1,"pb-5"],[1,"fa-solid","fa-location-dot"],["routerLink","/conditions",1,"text-white"],[1,"fa-solid","fa-file-lines"]],template:function(E,k){1&E&&(Z.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4),Z._UZ(6,"img",5),Z.qZA(),Z.TgZ(7,"div",6)(8,"a",7),Z._UZ(9,"i",8),Z.qZA(),Z._UZ(10,"span",9),Z.TgZ(11,"a",10),Z._UZ(12,"i",11),Z.qZA()()()(),Z.TgZ(13,"div",3)(14,"div",12)(15,"h2",13),Z._uU(16,"\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627"),Z.qZA(),Z.TgZ(17,"table"),Z.YNc(18,Ln,5,0,"tr",14),Z.TgZ(19,"tr",15)(20,"td"),Z._uU(21,"\u0627\u0644\u0643\u0648\u064a\u062a"),Z.qZA(),Z.TgZ(22,"td"),Z._UZ(23,"i",16),Z.qZA()(),Z.TgZ(24,"tr",15)(25,"td")(26,"a",17),Z._uU(27," \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0627\u062d\u0643\u0627\u0645 "),Z.qZA()(),Z.TgZ(28,"td"),Z._UZ(29,"i",18),Z.qZA()()()()()()()()),2&E&&(Z.xp6(18),Z.Q6J("ngIf",null==k.settings?null:k.settings.whatsapp))},directives:[pn.O5,ge.yS],styles:[""]}),B})(),xe=(()=>{class B{constructor(E,k){this.cartService=E,this.router=k,localStorage.getItem("drastitoken")}ngOnInit(){this.app=(0,ft.ZF)({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"}),this.db=(0,Pe.N8)(this.app),localStorage.getItem("drastitoken")&&(0,Pe.t8)((0,Pe.iH)(this.db,`Auth/${localStorage.getItem("userid")}`),{user_token:localStorage.getItem("drastitoken")});const E=(0,Pe.iH)(this.db,"Auth");(0,Pe.jM)(E,k=>{var ee;if(localStorage.getItem("drastitoken")){const Ee=k.val();for(let ke in Ee)ke==localStorage.getItem("userid")&&(this.savedToken=Ee[ke]);(null===(ee=this.savedToken)||void 0===ee?void 0:ee.user_token)!=localStorage.getItem("drastitoken")&&(this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username"),this.router.navigate(["/"]))}})}}return B.\u0275fac=function(E){return new(E||B)(Z.Y36(Me.N),Z.Y36(ge.F0))},B.\u0275cmp=Z.Xpm({type:B,selectors:[["app-root"]],decls:3,vars:0,template:function(E,k){1&E&&Z._UZ(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},directives:[Pt,ge.lC,un],styles:[""]}),B})();var Ne=H(1777);const ot=!1;function Ut(B){return new Z.vHH(3e3,ot)}function ct(){return"undefined"!=typeof window&&void 0!==window.document}function Bt(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Gt(B){switch(B.length){case 0:return new Ne.ZN;case 1:return B[0];default:return new Ne.ZE(B)}}function yn(B,b,E,k,ee={},Ee={}){const ke=[],qe=[];let wt=-1,sn=null;if(k.forEach(sr=>{const Er=sr.offset,Jr=Er==wt,Pi=Jr&&sn||{};Object.keys(sr).forEach(xr=>{let pr=xr,Fi=sr[xr];if("offset"!==xr)switch(pr=b.normalizePropertyName(pr,ke),Fi){case Ne.k1:Fi=ee[xr];break;case Ne.l3:Fi=Ee[xr];break;default:Fi=b.normalizeStyleValue(xr,pr,Fi,ke)}Pi[pr]=Fi}),Jr||qe.push(Pi),sn=Pi,wt=Er}),ke.length)throw function Yn(B){return new Z.vHH(3502,ot)}();return qe}function Bn(B,b,E,k){switch(b){case"start":B.onStart(()=>k(E&&qr(E,"start",B)));break;case"done":B.onDone(()=>k(E&&qr(E,"done",B)));break;case"destroy":B.onDestroy(()=>k(E&&qr(E,"destroy",B)))}}function qr(B,b,E){const k=E.totalTime,Ee=Or(B.element,B.triggerName,B.fromState,B.toState,b||B.phaseName,null==k?B.totalTime:k,!!E.disabled),ke=B._data;return null!=ke&&(Ee._data=ke),Ee}function Or(B,b,E,k,ee="",Ee=0,ke){return{element:B,triggerName:b,fromState:E,toState:k,phaseName:ee,totalTime:Ee,disabled:!!ke}}function dr(B,b,E){let k;return B instanceof Map?(k=B.get(b),k||B.set(b,k=E)):(k=B[b],k||(k=B[b]=E)),k}function os(B){const b=B.indexOf(":");return[B.substring(1,b),B.substr(b+1)]}let Ii=(B,b)=>!1,ui=(B,b,E)=>[],Fn=null;function Ei(B){const b=B.parentNode||B.host;return b===Fn?null:b}(Bt()||"undefined"!=typeof Element)&&(ct()?(Fn=(()=>document.documentElement)(),Ii=(B,b)=>{for(;b;){if(b===B)return!0;b=Ei(b)}return!1}):Ii=(B,b)=>B.contains(b),ui=(B,b,E)=>{if(E)return Array.from(B.querySelectorAll(b));const k=B.querySelector(b);return k?[k]:[]});let Pn=null,jt=!1;function Wn(B){Pn||(Pn=function Ar(){return"undefined"!=typeof document?document.body:null}()||{},jt=!!Pn.style&&"WebkitAppearance"in Pn.style);let b=!0;return Pn.style&&!function ji(B){return"ebkit"==B.substring(1,6)}(B)&&(b=B in Pn.style,!b&&jt&&(b="Webkit"+B.charAt(0).toUpperCase()+B.substr(1)in Pn.style)),b}const Pr=Ii,Nr=ui;let $e=(()=>{class B{validateStyleProperty(E){return Wn(E)}matchesElement(E,k){return!1}containsElement(E,k){return Pr(E,k)}getParentElement(E){return Ei(E)}query(E,k,ee){return Nr(E,k,ee)}computeStyle(E,k,ee){return ee||""}animate(E,k,ee,Ee,ke,qe=[],wt){return new Ne.ZN(ee,Ee)}}return B.\u0275fac=function(E){return new(E||B)},B.\u0275prov=Z.Yz7({token:B,factory:B.\u0275fac}),B})(),ht=(()=>{class B{}return B.NOOP=new $e,B})();const Re="ng-enter",De="ng-leave",pt="ng-trigger",Yt=".ng-trigger",ur="ng-animating",Hn=".ng-animating";function Kr(B){if("number"==typeof B)return B;const b=B.match(/^(-?[\.\d]+)(m?s)/);return!b||b.length<2?0:zi(parseFloat(b[1]),b[2])}function zi(B,b){return"s"===b?1e3*B:B}function ns(B,b,E){return B.hasOwnProperty("duration")?B:function Ls(B,b,E){let ee,Ee=0,ke="";if("string"==typeof B){const qe=B.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===qe)return b.push(Ut()),{duration:0,delay:0,easing:""};ee=zi(parseFloat(qe[1]),qe[2]);const wt=qe[3];null!=wt&&(Ee=zi(parseFloat(wt),qe[4]));const sn=qe[5];sn&&(ke=sn)}else ee=B;if(!E){let qe=!1,wt=b.length;ee<0&&(b.push(function Fe(){return new Z.vHH(3100,ot)}()),qe=!0),Ee<0&&(b.push(function Lt(){return new Z.vHH(3101,ot)}()),qe=!0),qe&&b.splice(wt,0,Ut())}return{duration:ee,delay:Ee,easing:ke}}(B,b,E)}function Ci(B,b={}){return Object.keys(B).forEach(E=>{b[E]=B[E]}),b}function es(B,b,E={}){if(b)for(let k in B)E[k]=B[k];else Ci(B,E);return E}function Ri(B,b,E){return E?b+":"+E+";":""}function _n(B){let b="";for(let E=0;E<B.style.length;E++){const k=B.style.item(E);b+=Ri(0,k,B.style.getPropertyValue(k))}for(const E in B.style)B.style.hasOwnProperty(E)&&!E.startsWith("_")&&(b+=Ri(0,Is(E),B.style[E]));B.setAttribute("style",b)}function ir(B,b,E){B.style&&(Object.keys(b).forEach(k=>{const ee=Ur(k);E&&!E.hasOwnProperty(k)&&(E[k]=B.style[ee]),B.style[ee]=b[k]}),Bt()&&_n(B))}function oi(B,b){B.style&&(Object.keys(b).forEach(E=>{const k=Ur(E);B.style[k]=""}),Bt()&&_n(B))}function bi(B){return Array.isArray(B)?1==B.length?B[0]:(0,Ne.vP)(B):B}const Wi=new RegExp("{{\\s*(.+?)\\s*}}","g");function ls(B){let b=[];if("string"==typeof B){let E;for(;E=Wi.exec(B);)b.push(E[1]);Wi.lastIndex=0}return b}function Oi(B,b,E){const k=B.toString(),ee=k.replace(Wi,(Ee,ke)=>{let qe=b[ke];return b.hasOwnProperty(ke)||(E.push(function Tt(B){return new Z.vHH(3003,ot)}()),qe=""),qe.toString()});return ee==k?B:ee}function Vi(B){const b=[];let E=B.next();for(;!E.done;)b.push(E.value),E=B.next();return b}const qi=/-+([a-z0-9])/g;function Ur(B){return B.replace(qi,(...b)=>b[1].toUpperCase())}function Is(B){return B.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Cr(B,b,E){switch(b.type){case 7:return B.visitTrigger(b,E);case 0:return B.visitState(b,E);case 1:return B.visitTransition(b,E);case 2:return B.visitSequence(b,E);case 3:return B.visitGroup(b,E);case 4:return B.visitAnimate(b,E);case 5:return B.visitKeyframes(b,E);case 6:return B.visitStyle(b,E);case 8:return B.visitReference(b,E);case 9:return B.visitAnimateChild(b,E);case 10:return B.visitAnimateRef(b,E);case 11:return B.visitQuery(b,E);case 12:return B.visitStagger(b,E);default:throw function et(B){return new Z.vHH(3004,ot)}()}}function mr(B,b){return window.getComputedStyle(B)[b]}function Wr(B,b){const E=[];return"string"==typeof B?B.split(/\s*,\s*/).forEach(k=>function fs(B,b,E){if(":"==B[0]){const wt=function Ds(B,b){switch(B){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(E,k)=>parseFloat(k)>parseFloat(E);case":decrement":return(E,k)=>parseFloat(k)<parseFloat(E);default:return b.push(function Wt(B){return new Z.vHH(3016,ot)}()),"* => *"}}(B,E);if("function"==typeof wt)return void b.push(wt);B=wt}const k=B.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==k||k.length<4)return E.push(function ut(B){return new Z.vHH(3015,ot)}()),b;const ee=k[1],Ee=k[2],ke=k[3];b.push(ko(ee,ke));"<"==Ee[0]&&!("*"==ee&&"*"==ke)&&b.push(ko(ke,ee))}(k,E,b)):E.push(B),E}const ps=new Set(["true","1"]),Di=new Set(["false","0"]);function ko(B,b){const E=ps.has(B)||Di.has(B),k=ps.has(b)||Di.has(b);return(ee,Ee)=>{let ke="*"==B||B==ee,qe="*"==b||b==Ee;return!ke&&E&&"boolean"==typeof ee&&(ke=ee?ps.has(B):Di.has(B)),!qe&&k&&"boolean"==typeof Ee&&(qe=Ee?ps.has(b):Di.has(b)),ke&&qe}}const vs=new RegExp("s*:selfs*,?","g");function Xi(B,b,E,k){return new dt(B).build(b,E,k)}class dt{constructor(b){this._driver=b}build(b,E,k){const ee=new $n(E);this._resetContextStyleTimingState(ee);const Ee=Cr(this,bi(b),ee);return ee.unsupportedCSSPropertiesFound.size&&ee.unsupportedCSSPropertiesFound.keys(),Ee}_resetContextStyleTimingState(b){b.currentQuerySelector="",b.collectedStyles={},b.collectedStyles[""]={},b.currentTime=0}visitTrigger(b,E){let k=E.queryCount=0,ee=E.depCount=0;const Ee=[],ke=[];return"@"==b.name.charAt(0)&&E.errors.push(function At(){return new Z.vHH(3006,ot)}()),b.definitions.forEach(qe=>{if(this._resetContextStyleTimingState(E),0==qe.type){const wt=qe,sn=wt.name;sn.toString().split(/\s*,\s*/).forEach(sr=>{wt.name=sr,Ee.push(this.visitState(wt,E))}),wt.name=sn}else if(1==qe.type){const wt=this.visitTransition(qe,E);k+=wt.queryCount,ee+=wt.depCount,ke.push(wt)}else E.errors.push(function on(){return new Z.vHH(3007,ot)}())}),{type:7,name:b.name,states:Ee,transitions:ke,queryCount:k,depCount:ee,options:null}}visitState(b,E){const k=this.visitStyle(b.styles,E),ee=b.options&&b.options.params||null;if(k.containsDynamicStyles){const Ee=new Set,ke=ee||{};k.styles.forEach(qe=>{if(Qr(qe)){const wt=qe;Object.keys(wt).forEach(sn=>{ls(wt[sn]).forEach(sr=>{ke.hasOwnProperty(sr)||Ee.add(sr)})})}}),Ee.size&&(Vi(Ee.values()),E.errors.push(function wn(B,b){return new Z.vHH(3008,ot)}()))}return{type:0,name:b.name,style:k,options:ee?{params:ee}:null}}visitTransition(b,E){E.queryCount=0,E.depCount=0;const k=Cr(this,bi(b.animation),E);return{type:1,matchers:Wr(b.expr,E.errors),animation:k,queryCount:E.queryCount,depCount:E.depCount,options:pi(b.options)}}visitSequence(b,E){return{type:2,steps:b.steps.map(k=>Cr(this,k,E)),options:pi(b.options)}}visitGroup(b,E){const k=E.currentTime;let ee=0;const Ee=b.steps.map(ke=>{E.currentTime=k;const qe=Cr(this,ke,E);return ee=Math.max(ee,E.currentTime),qe});return E.currentTime=ee,{type:3,steps:Ee,options:pi(b.options)}}visitAnimate(b,E){const k=function Zi(B,b){if(B.hasOwnProperty("duration"))return B;if("number"==typeof B)return ds(ns(B,b).duration,0,"");const E=B;if(E.split(/\s+/).some(Ee=>"{"==Ee.charAt(0)&&"{"==Ee.charAt(1))){const Ee=ds(0,0,"");return Ee.dynamic=!0,Ee.strValue=E,Ee}const ee=ns(E,b);return ds(ee.duration,ee.delay,ee.easing)}(b.timings,E.errors);E.currentAnimateTimings=k;let ee,Ee=b.styles?b.styles:(0,Ne.oB)({});if(5==Ee.type)ee=this.visitKeyframes(Ee,E);else{let ke=b.styles,qe=!1;if(!ke){qe=!0;const sn={};k.easing&&(sn.easing=k.easing),ke=(0,Ne.oB)(sn)}E.currentTime+=k.duration+k.delay;const wt=this.visitStyle(ke,E);wt.isEmptyStep=qe,ee=wt}return E.currentAnimateTimings=null,{type:4,timings:k,style:ee,options:null}}visitStyle(b,E){const k=this._makeStyleAst(b,E);return this._validateStyleAst(k,E),k}_makeStyleAst(b,E){const k=[];Array.isArray(b.styles)?b.styles.forEach(ke=>{"string"==typeof ke?ke==Ne.l3?k.push(ke):E.errors.push(function Xn(B){return new Z.vHH(3002,ot)}()):k.push(ke)}):k.push(b.styles);let ee=!1,Ee=null;return k.forEach(ke=>{if(Qr(ke)){const qe=ke,wt=qe.easing;if(wt&&(Ee=wt,delete qe.easing),!ee)for(let sn in qe)if(qe[sn].toString().indexOf("{{")>=0){ee=!0;break}}}),{type:6,styles:k,easing:Ee,offset:b.offset,containsDynamicStyles:ee,options:null}}_validateStyleAst(b,E){const k=E.currentAnimateTimings;let ee=E.currentTime,Ee=E.currentTime;k&&Ee>0&&(Ee-=k.duration+k.delay),b.styles.forEach(ke=>{"string"!=typeof ke&&Object.keys(ke).forEach(qe=>{if(!this._driver.validateStyleProperty(qe))return delete ke[qe],void E.unsupportedCSSPropertiesFound.add(qe);const wt=E.collectedStyles[E.currentQuerySelector],sn=wt[qe];let sr=!0;sn&&(Ee!=ee&&Ee>=sn.startTime&&ee<=sn.endTime&&(E.errors.push(function fn(B,b,E,k,ee){return new Z.vHH(3010,ot)}()),sr=!1),Ee=sn.startTime),sr&&(wt[qe]={startTime:Ee,endTime:ee}),E.options&&function _s(B,b,E){const k=b.params||{},ee=ls(B);ee.length&&ee.forEach(Ee=>{k.hasOwnProperty(Ee)||E.push(function Oe(B){return new Z.vHH(3001,ot)}())})}(ke[qe],E.options,E.errors)})})}visitKeyframes(b,E){const k={type:5,styles:[],options:null};if(!E.currentAnimateTimings)return E.errors.push(function gr(){return new Z.vHH(3011,ot)}()),k;let Ee=0;const ke=[];let qe=!1,wt=!1,sn=0;const sr=b.steps.map(xi=>{const us=this._makeStyleAst(xi,E);let Hs=null!=us.offset?us.offset:function Ir(B){if("string"==typeof B)return null;let b=null;if(Array.isArray(B))B.forEach(E=>{if(Qr(E)&&E.hasOwnProperty("offset")){const k=E;b=parseFloat(k.offset),delete k.offset}});else if(Qr(B)&&B.hasOwnProperty("offset")){const E=B;b=parseFloat(E.offset),delete E.offset}return b}(us.styles),En=0;return null!=Hs&&(Ee++,En=us.offset=Hs),wt=wt||En<0||En>1,qe=qe||En<sn,sn=En,ke.push(En),us});wt&&E.errors.push(function lr(){return new Z.vHH(3012,ot)}()),qe&&E.errors.push(function Ft(){return new Z.vHH(3200,ot)}());const Er=b.steps.length;let Jr=0;Ee>0&&Ee<Er?E.errors.push(function Ot(){return new Z.vHH(3202,ot)}()):0==Ee&&(Jr=1/(Er-1));const Pi=Er-1,xr=E.currentTime,pr=E.currentAnimateTimings,Fi=pr.duration;return sr.forEach((xi,us)=>{const Hs=Jr>0?us==Pi?1:Jr*us:ke[us],En=Hs*Fi;E.currentTime=xr+pr.delay+En,pr.duration=En,this._validateStyleAst(xi,E),xi.offset=Hs,k.styles.push(xi)}),k}visitReference(b,E){return{type:8,animation:Cr(this,bi(b.animation),E),options:pi(b.options)}}visitAnimateChild(b,E){return E.depCount++,{type:9,options:pi(b.options)}}visitAnimateRef(b,E){return{type:10,animation:this.visitReference(b.animation,E),options:pi(b.options)}}visitQuery(b,E){const k=E.currentQuerySelector,ee=b.options||{};E.queryCount++,E.currentQuery=b;const[Ee,ke]=function St(B){const b=!!B.split(/\s*,\s*/).find(E=>":self"==E);return b&&(B=B.replace(vs,"")),B=B.replace(/@\*/g,Yt).replace(/@\w+/g,E=>Yt+"-"+E.substr(1)).replace(/:animating/g,Hn),[B,b]}(b.selector);E.currentQuerySelector=k.length?k+" "+Ee:Ee,dr(E.collectedStyles,E.currentQuerySelector,{});const qe=Cr(this,bi(b.animation),E);return E.currentQuery=null,E.currentQuerySelector=k,{type:11,selector:Ee,limit:ee.limit||0,optional:!!ee.optional,includeSelf:ke,animation:qe,originalSelector:b.selector,options:pi(b.options)}}visitStagger(b,E){E.currentQuery||E.errors.push(function st(){return new Z.vHH(3013,ot)}());const k="full"===b.timings?{duration:0,delay:0,easing:"full"}:ns(b.timings,E.errors,!0);return{type:12,animation:Cr(this,bi(b.animation),E),timings:k,options:null}}}class $n{constructor(b){this.errors=b,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Qr(B){return!Array.isArray(B)&&"object"==typeof B}function pi(B){return B?(B=Ci(B)).params&&(B.params=function gn(B){return B?Ci(B):null}(B.params)):B={},B}function ds(B,b,E){return{duration:B,delay:b,easing:E}}function ei(B,b,E,k,ee,Ee,ke=null,qe=!1){return{type:1,element:B,keyframes:b,preStyleProps:E,postStyleProps:k,duration:ee,delay:Ee,totalTime:ee+Ee,easing:ke,subTimeline:qe}}class as{constructor(){this._map=new Map}get(b){return this._map.get(b)||[]}append(b,E){let k=this._map.get(b);k||this._map.set(b,k=[]),k.push(...E)}has(b){return this._map.has(b)}clear(){this._map.clear()}}const gs=new RegExp(":enter","g"),Cs=new RegExp(":leave","g");function Io(B,b,E,k,ee,Ee={},ke={},qe,wt,sn=[]){return(new Ni).buildKeyframes(B,b,E,k,ee,Ee,ke,qe,wt,sn)}class Ni{buildKeyframes(b,E,k,ee,Ee,ke,qe,wt,sn,sr=[]){sn=sn||new as;const Er=new Ms(b,E,sn,ee,Ee,sr,[]);Er.options=wt,Er.currentTimeline.setStyles([ke],null,Er.errors,wt),Cr(this,k,Er);const Jr=Er.timelines.filter(Pi=>Pi.containsAnimation());if(Object.keys(qe).length){let Pi;for(let xr=Jr.length-1;xr>=0;xr--){const pr=Jr[xr];if(pr.element===E){Pi=pr;break}}Pi&&!Pi.allowOnlyTimelineStyles()&&Pi.setStyles([qe],null,Er.errors,wt)}return Jr.length?Jr.map(Pi=>Pi.buildKeyframes()):[ei(E,[],[],[],0,0,"",!1)]}visitTrigger(b,E){}visitState(b,E){}visitTransition(b,E){}visitAnimateChild(b,E){const k=E.subInstructions.get(E.element);if(k){const ee=E.createSubContext(b.options),Ee=E.currentTimeline.currentTime,ke=this._visitSubInstructions(k,ee,ee.options);Ee!=ke&&E.transformIntoNewTimeline(ke)}E.previousNode=b}visitAnimateRef(b,E){const k=E.createSubContext(b.options);k.transformIntoNewTimeline(),this.visitReference(b.animation,k),E.transformIntoNewTimeline(k.currentTimeline.currentTime),E.previousNode=b}_visitSubInstructions(b,E,k){let Ee=E.currentTimeline.currentTime;const ke=null!=k.duration?Kr(k.duration):null,qe=null!=k.delay?Kr(k.delay):null;return 0!==ke&&b.forEach(wt=>{const sn=E.appendInstructionToTimeline(wt,ke,qe);Ee=Math.max(Ee,sn.duration+sn.delay)}),Ee}visitReference(b,E){E.updateOptions(b.options,!0),Cr(this,b.animation,E),E.previousNode=b}visitSequence(b,E){const k=E.subContextCount;let ee=E;const Ee=b.options;if(Ee&&(Ee.params||Ee.delay)&&(ee=E.createSubContext(Ee),ee.transformIntoNewTimeline(),null!=Ee.delay)){6==ee.previousNode.type&&(ee.currentTimeline.snapshotCurrentStyles(),ee.previousNode=no);const ke=Kr(Ee.delay);ee.delayNextStep(ke)}b.steps.length&&(b.steps.forEach(ke=>Cr(this,ke,ee)),ee.currentTimeline.applyStylesToKeyframe(),ee.subContextCount>k&&ee.transformIntoNewTimeline()),E.previousNode=b}visitGroup(b,E){const k=[];let ee=E.currentTimeline.currentTime;const Ee=b.options&&b.options.delay?Kr(b.options.delay):0;b.steps.forEach(ke=>{const qe=E.createSubContext(b.options);Ee&&qe.delayNextStep(Ee),Cr(this,ke,qe),ee=Math.max(ee,qe.currentTimeline.currentTime),k.push(qe.currentTimeline)}),k.forEach(ke=>E.currentTimeline.mergeTimelineCollectedStyles(ke)),E.transformIntoNewTimeline(ee),E.previousNode=b}_visitTiming(b,E){if(b.dynamic){const k=b.strValue;return ns(E.params?Oi(k,E.params,E.errors):k,E.errors)}return{duration:b.duration,delay:b.delay,easing:b.easing}}visitAnimate(b,E){const k=E.currentAnimateTimings=this._visitTiming(b.timings,E),ee=E.currentTimeline;k.delay&&(E.incrementTime(k.delay),ee.snapshotCurrentStyles());const Ee=b.style;5==Ee.type?this.visitKeyframes(Ee,E):(E.incrementTime(k.duration),this.visitStyle(Ee,E),ee.applyStylesToKeyframe()),E.currentAnimateTimings=null,E.previousNode=b}visitStyle(b,E){const k=E.currentTimeline,ee=E.currentAnimateTimings;!ee&&k.getCurrentStyleProperties().length&&k.forwardFrame();const Ee=ee&&ee.easing||b.easing;b.isEmptyStep?k.applyEmptyStep(Ee):k.setStyles(b.styles,Ee,E.errors,E.options),E.previousNode=b}visitKeyframes(b,E){const k=E.currentAnimateTimings,ee=E.currentTimeline.duration,Ee=k.duration,qe=E.createSubContext().currentTimeline;qe.easing=k.easing,b.styles.forEach(wt=>{qe.forwardTime((wt.offset||0)*Ee),qe.setStyles(wt.styles,wt.easing,E.errors,E.options),qe.applyStylesToKeyframe()}),E.currentTimeline.mergeTimelineCollectedStyles(qe),E.transformIntoNewTimeline(ee+Ee),E.previousNode=b}visitQuery(b,E){const k=E.currentTimeline.currentTime,ee=b.options||{},Ee=ee.delay?Kr(ee.delay):0;Ee&&(6===E.previousNode.type||0==k&&E.currentTimeline.getCurrentStyleProperties().length)&&(E.currentTimeline.snapshotCurrentStyles(),E.previousNode=no);let ke=k;const qe=E.invokeQuery(b.selector,b.originalSelector,b.limit,b.includeSelf,!!ee.optional,E.errors);E.currentQueryTotal=qe.length;let wt=null;qe.forEach((sn,sr)=>{E.currentQueryIndex=sr;const Er=E.createSubContext(b.options,sn);Ee&&Er.delayNextStep(Ee),sn===E.element&&(wt=Er.currentTimeline),Cr(this,b.animation,Er),Er.currentTimeline.applyStylesToKeyframe(),ke=Math.max(ke,Er.currentTimeline.currentTime)}),E.currentQueryIndex=0,E.currentQueryTotal=0,E.transformIntoNewTimeline(ke),wt&&(E.currentTimeline.mergeTimelineCollectedStyles(wt),E.currentTimeline.snapshotCurrentStyles()),E.previousNode=b}visitStagger(b,E){const k=E.parentContext,ee=E.currentTimeline,Ee=b.timings,ke=Math.abs(Ee.duration),qe=ke*(E.currentQueryTotal-1);let wt=ke*E.currentQueryIndex;switch(Ee.duration<0?"reverse":Ee.easing){case"reverse":wt=qe-wt;break;case"full":wt=k.currentStaggerTime}const sr=E.currentTimeline;wt&&sr.delayNextStep(wt);const Er=sr.currentTime;Cr(this,b.animation,E),E.previousNode=b,k.currentStaggerTime=ee.currentTime-Er+(ee.startTime-k.currentTimeline.startTime)}}const no={};class Ms{constructor(b,E,k,ee,Ee,ke,qe,wt){this._driver=b,this.element=E,this.subInstructions=k,this._enterClassName=ee,this._leaveClassName=Ee,this.errors=ke,this.timelines=qe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=no,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=wt||new Us(this._driver,E,0),qe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(b,E){if(!b)return;const k=b;let ee=this.options;null!=k.duration&&(ee.duration=Kr(k.duration)),null!=k.delay&&(ee.delay=Kr(k.delay));const Ee=k.params;if(Ee){let ke=ee.params;ke||(ke=this.options.params={}),Object.keys(Ee).forEach(qe=>{(!E||!ke.hasOwnProperty(qe))&&(ke[qe]=Oi(Ee[qe],ke,this.errors))})}}_copyOptions(){const b={};if(this.options){const E=this.options.params;if(E){const k=b.params={};Object.keys(E).forEach(ee=>{k[ee]=E[ee]})}}return b}createSubContext(b=null,E,k){const ee=E||this.element,Ee=new Ms(this._driver,ee,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ee,k||0));return Ee.previousNode=this.previousNode,Ee.currentAnimateTimings=this.currentAnimateTimings,Ee.options=this._copyOptions(),Ee.updateOptions(b),Ee.currentQueryIndex=this.currentQueryIndex,Ee.currentQueryTotal=this.currentQueryTotal,Ee.parentContext=this,this.subContextCount++,Ee}transformIntoNewTimeline(b){return this.previousNode=no,this.currentTimeline=this.currentTimeline.fork(this.element,b),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(b,E,k){const ee={duration:null!=E?E:b.duration,delay:this.currentTimeline.currentTime+(null!=k?k:0)+b.delay,easing:""},Ee=new Bs(this._driver,b.element,b.keyframes,b.preStyleProps,b.postStyleProps,ee,b.stretchStartingKeyframe);return this.timelines.push(Ee),ee}incrementTime(b){this.currentTimeline.forwardTime(this.currentTimeline.duration+b)}delayNextStep(b){b>0&&this.currentTimeline.delayNextStep(b)}invokeQuery(b,E,k,ee,Ee,ke){let qe=[];if(ee&&qe.push(this.element),b.length>0){b=(b=b.replace(gs,"."+this._enterClassName)).replace(Cs,"."+this._leaveClassName);let sn=this._driver.query(this.element,b,1!=k);0!==k&&(sn=k<0?sn.slice(sn.length+k,sn.length):sn.slice(0,k)),qe.push(...sn)}return!Ee&&0==qe.length&&ke.push(function It(B){return new Z.vHH(3014,ot)}()),qe}}class Us{constructor(b,E,k,ee){this._driver=b,this.element=E,this.startTime=k,this._elementTimelineStylesLookup=ee,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(E),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(E,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(b){const E=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||E?(this.forwardTime(this.currentTime+b),E&&this.snapshotCurrentStyles()):this.startTime+=b}fork(b,E){return this.applyStylesToKeyframe(),new Us(this._driver,b,E||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(b){this.applyStylesToKeyframe(),this.duration=b,this._loadKeyframe()}_updateStyle(b,E){this._localTimelineStyles[b]=E,this._globalTimelineStyles[b]=E,this._styleSummary[b]={time:this.currentTime,value:E}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(b){b&&(this._previousKeyframe.easing=b),Object.keys(this._globalTimelineStyles).forEach(E=>{this._backFill[E]=this._globalTimelineStyles[E]||Ne.l3,this._currentKeyframe[E]=Ne.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(b,E,k,ee){E&&(this._previousKeyframe.easing=E);const Ee=ee&&ee.params||{},ke=function qs(B,b){const E={};let k;return B.forEach(ee=>{"*"===ee?(k=k||Object.keys(b),k.forEach(Ee=>{E[Ee]=Ne.l3})):es(ee,!1,E)}),E}(b,this._globalTimelineStyles);Object.keys(ke).forEach(qe=>{const wt=Oi(ke[qe],Ee,k);this._pendingStyles[qe]=wt,this._localTimelineStyles.hasOwnProperty(qe)||(this._backFill[qe]=this._globalTimelineStyles.hasOwnProperty(qe)?this._globalTimelineStyles[qe]:Ne.l3),this._updateStyle(qe,wt)})}applyStylesToKeyframe(){const b=this._pendingStyles,E=Object.keys(b);0!=E.length&&(this._pendingStyles={},E.forEach(k=>{this._currentKeyframe[k]=b[k]}),Object.keys(this._localTimelineStyles).forEach(k=>{this._currentKeyframe.hasOwnProperty(k)||(this._currentKeyframe[k]=this._localTimelineStyles[k])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(b=>{const E=this._localTimelineStyles[b];this._pendingStyles[b]=E,this._updateStyle(b,E)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const b=[];for(let E in this._currentKeyframe)b.push(E);return b}mergeTimelineCollectedStyles(b){Object.keys(b._styleSummary).forEach(E=>{const k=this._styleSummary[E],ee=b._styleSummary[E];(!k||ee.time>k.time)&&this._updateStyle(E,ee.value)})}buildKeyframes(){this.applyStylesToKeyframe();const b=new Set,E=new Set,k=1===this._keyframes.size&&0===this.duration;let ee=[];this._keyframes.forEach((qe,wt)=>{const sn=es(qe,!0);Object.keys(sn).forEach(sr=>{const Er=sn[sr];Er==Ne.k1?b.add(sr):Er==Ne.l3&&E.add(sr)}),k||(sn.offset=wt/this.duration),ee.push(sn)});const Ee=b.size?Vi(b.values()):[],ke=E.size?Vi(E.values()):[];if(k){const qe=ee[0],wt=Ci(qe);qe.offset=0,wt.offset=1,ee=[qe,wt]}return ei(this.element,ee,Ee,ke,this.duration,this.startTime,this.easing,!1)}}class Bs extends Us{constructor(b,E,k,ee,Ee,ke,qe=!1){super(b,E,ke.delay),this.keyframes=k,this.preStyleProps=ee,this.postStyleProps=Ee,this._stretchStartingKeyframe=qe,this.timings={duration:ke.duration,delay:ke.delay,easing:ke.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let b=this.keyframes,{delay:E,duration:k,easing:ee}=this.timings;if(this._stretchStartingKeyframe&&E){const Ee=[],ke=k+E,qe=E/ke,wt=es(b[0],!1);wt.offset=0,Ee.push(wt);const sn=es(b[0],!1);sn.offset=Ro(qe),Ee.push(sn);const sr=b.length-1;for(let Er=1;Er<=sr;Er++){let Jr=es(b[Er],!1);Jr.offset=Ro((E+Jr.offset*k)/ke),Ee.push(Jr)}k=ke,E=0,ee="",b=Ee}return ei(this.element,b,this.preStyleProps,this.postStyleProps,k,E,ee,!0)}}function Ro(B,b=3){const E=Math.pow(10,b-1);return Math.round(B*E)/E}class bs{}class Zo extends bs{normalizePropertyName(b,E){return Ur(b)}normalizeStyleValue(b,E,k,ee){let Ee="";const ke=k.toString().trim();if(ms[E]&&0!==k&&"0"!==k)if("number"==typeof k)Ee="px";else{const qe=k.match(/^[+-]?[\d\.]+([a-z]*)$/);qe&&0==qe[1].length&&ee.push(function Nt(B,b){return new Z.vHH(3005,ot)}())}return ke+Ee}}const ms=(()=>function ho(B){const b={};return B.forEach(E=>b[E]=!0),b}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Rs(B,b,E,k,ee,Ee,ke,qe,wt,sn,sr,Er,Jr){return{type:0,element:B,triggerName:b,isRemovalTransition:ee,fromState:E,fromStyles:Ee,toState:k,toStyles:ke,timelines:qe,queriedElements:wt,preStyleProps:sn,postStyleProps:sr,totalTime:Er,errors:Jr}}const Ai={};class Ks{constructor(b,E,k){this._triggerName=b,this.ast=E,this._stateStyles=k}match(b,E,k,ee){return function ao(B,b,E,k,ee){return B.some(Ee=>Ee(b,E,k,ee))}(this.ast.matchers,b,E,k,ee)}buildStyles(b,E,k){const ee=this._stateStyles["*"],Ee=this._stateStyles[b],ke=ee?ee.buildStyles(E,k):{};return Ee?Ee.buildStyles(E,k):ke}build(b,E,k,ee,Ee,ke,qe,wt,sn,sr){const Er=[],Jr=this.ast.options&&this.ast.options.params||Ai,xr=this.buildStyles(k,qe&&qe.params||Ai,Er),pr=wt&&wt.params||Ai,Fi=this.buildStyles(ee,pr,Er),xi=new Set,us=new Map,Hs=new Map,En="void"===ee,Bi={params:Object.assign(Object.assign({},Jr),pr)},$i=sr?[]:Io(b,E,this.ast.animation,Ee,ke,xr,Fi,Bi,sn,Er);let Ts=0;if($i.forEach(hr=>{Ts=Math.max(hr.duration+hr.delay,Ts)}),Er.length)return Rs(E,this._triggerName,k,ee,En,xr,Fi,[],[],us,Hs,Ts,Er);$i.forEach(hr=>{const Yo=hr.element,er=dr(us,Yo,{});hr.preStyleProps.forEach(In=>er[In]=!0);const qt=dr(Hs,Yo,{});hr.postStyleProps.forEach(In=>qt[In]=!0),Yo!==E&&xi.add(Yo)});const rr=Vi(xi.values());return Rs(E,this._triggerName,k,ee,En,xr,Fi,$i,rr,us,Hs,Ts)}}class js{constructor(b,E,k){this.styles=b,this.defaultParams=E,this.normalizer=k}buildStyles(b,E){const k={},ee=Ci(this.defaultParams);return Object.keys(b).forEach(Ee=>{const ke=b[Ee];null!=ke&&(ee[Ee]=ke)}),this.styles.styles.forEach(Ee=>{if("string"!=typeof Ee){const ke=Ee;Object.keys(ke).forEach(qe=>{let wt=ke[qe];wt.length>1&&(wt=Oi(wt,ee,E));const sn=this.normalizer.normalizePropertyName(qe,E);wt=this.normalizer.normalizeStyleValue(qe,sn,wt,E),k[sn]=wt})}}),k}}class Os{constructor(b,E,k){this.name=b,this.ast=E,this._normalizer=k,this.transitionFactories=[],this.states={},E.states.forEach(ee=>{this.states[ee.name]=new js(ee.style,ee.options&&ee.options.params||{},k)}),_i(this.states,"true","1"),_i(this.states,"false","0"),E.transitions.forEach(ee=>{this.transitionFactories.push(new Ks(b,ee,this.states))}),this.fallbackTransition=function ki(B,b,E){return new Ks(B,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ke,qe)=>!0],options:null,queryCount:0,depCount:0},b)}(b,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(b,E,k,ee){return this.transitionFactories.find(ke=>ke.match(b,E,k,ee))||null}matchStyles(b,E,k){return this.fallbackTransition.buildStyles(b,E,k)}}function _i(B,b,E){B.hasOwnProperty(b)?B.hasOwnProperty(E)||(B[E]=B[b]):B.hasOwnProperty(E)&&(B[b]=B[E])}const U=new as;class pe{constructor(b,E,k){this.bodyNode=b,this._driver=E,this._normalizer=k,this._animations={},this._playersById={},this.players=[]}register(b,E){const k=[],Ee=Xi(this._driver,E,k,[]);if(k.length)throw function tr(B){return new Z.vHH(3503,ot)}();this._animations[b]=Ee}_buildPlayer(b,E,k){const ee=b.element,Ee=yn(0,this._normalizer,0,b.keyframes,E,k);return this._driver.animate(ee,Ee,b.duration,b.delay,b.easing,[],!0)}create(b,E,k={}){const ee=[],Ee=this._animations[b];let ke;const qe=new Map;if(Ee?(ke=Io(this._driver,E,Ee,Re,De,{},{},k,U,ee),ke.forEach(sr=>{const Er=dr(qe,sr.element,{});sr.postStyleProps.forEach(Jr=>Er[Jr]=null)})):(ee.push(function Zr(){return new Z.vHH(3300,ot)}()),ke=[]),ee.length)throw function si(B){return new Z.vHH(3504,ot)}();qe.forEach((sr,Er)=>{Object.keys(sr).forEach(Jr=>{sr[Jr]=this._driver.computeStyle(Er,Jr,Ne.l3)})});const sn=Gt(ke.map(sr=>{const Er=qe.get(sr.element);return this._buildPlayer(sr,{},Er)}));return this._playersById[b]=sn,sn.onDestroy(()=>this.destroy(b)),this.players.push(sn),sn}destroy(b){const E=this._getPlayer(b);E.destroy(),delete this._playersById[b];const k=this.players.indexOf(E);k>=0&&this.players.splice(k,1)}_getPlayer(b){const E=this._playersById[b];if(!E)throw function qn(B){return new Z.vHH(3301,ot)}();return E}listen(b,E,k,ee){const Ee=Or(E,"","","");return Bn(this._getPlayer(b),k,Ee,ee),()=>{}}command(b,E,k,ee){if("register"==k)return void this.register(b,ee[0]);if("create"==k)return void this.create(b,E,ee[0]||{});const Ee=this._getPlayer(b);switch(k){case"play":Ee.play();break;case"pause":Ee.pause();break;case"reset":Ee.reset();break;case"restart":Ee.restart();break;case"finish":Ee.finish();break;case"init":Ee.init();break;case"setPosition":Ee.setPosition(parseFloat(ee[0]));break;case"destroy":this.destroy(b)}}}const q="ng-animate-queued",ze="ng-animate-disabled",Br=[],Xr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ni={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$r="__ng_removed";class Yi{constructor(b,E=""){this.namespaceId=E;const k=b&&b.hasOwnProperty("value");if(this.value=function Po(B){return null!=B?B:null}(k?b.value:b),k){const Ee=Ci(b);delete Ee.value,this.options=Ee}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(b){const E=b.params;if(E){const k=this.options.params;Object.keys(E).forEach(ee=>{null==k[ee]&&(k[ee]=E[ee])})}}}const vi="void",Ti=new Yi(vi);class ro{constructor(b,E,k){this.id=b,this.hostElement=E,this._engine=k,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+b,he(E,this._hostClassName)}listen(b,E,k,ee){if(!this._triggers.hasOwnProperty(E))throw function Hr(B,b){return new Z.vHH(3302,ot)}();if(null==k||0==k.length)throw function Tr(B){return new Z.vHH(3303,ot)}();if(!function vo(B){return"start"==B||"done"==B}(k))throw function wr(B,b){return new Z.vHH(3400,ot)}();const Ee=dr(this._elementListeners,b,[]),ke={name:E,phase:k,callback:ee};Ee.push(ke);const qe=dr(this._engine.statesByElement,b,{});return qe.hasOwnProperty(E)||(he(b,pt),he(b,pt+"-"+E),qe[E]=Ti),()=>{this._engine.afterFlush(()=>{const wt=Ee.indexOf(ke);wt>=0&&Ee.splice(wt,1),this._triggers[E]||delete qe[E]})}}register(b,E){return!this._triggers[b]&&(this._triggers[b]=E,!0)}_getTrigger(b){const E=this._triggers[b];if(!E)throw function rs(B){return new Z.vHH(3401,ot)}();return E}trigger(b,E,k,ee=!0){const Ee=this._getTrigger(E),ke=new kr(this.id,E,b);let qe=this._engine.statesByElement.get(b);qe||(he(b,pt),he(b,pt+"-"+E),this._engine.statesByElement.set(b,qe={}));let wt=qe[E];const sn=new Yi(k,this.id);if(!(k&&k.hasOwnProperty("value"))&&wt&&sn.absorbOptions(wt.options),qe[E]=sn,wt||(wt=Ti),sn.value!==vi&&wt.value===sn.value){if(!function be(B,b){const E=Object.keys(B),k=Object.keys(b);if(E.length!=k.length)return!1;for(let ee=0;ee<E.length;ee++){const Ee=E[ee];if(!b.hasOwnProperty(Ee)||B[Ee]!==b[Ee])return!1}return!0}(wt.params,sn.params)){const pr=[],Fi=Ee.matchStyles(wt.value,wt.params,pr),xi=Ee.matchStyles(sn.value,sn.params,pr);pr.length?this._engine.reportError(pr):this._engine.afterFlush(()=>{oi(b,Fi),ir(b,xi)})}return}const Jr=dr(this._engine.playersByElement,b,[]);Jr.forEach(pr=>{pr.namespaceId==this.id&&pr.triggerName==E&&pr.queued&&pr.destroy()});let Pi=Ee.matchTransition(wt.value,sn.value,b,sn.params),xr=!1;if(!Pi){if(!ee)return;Pi=Ee.fallbackTransition,xr=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:b,triggerName:E,transition:Pi,fromState:wt,toState:sn,player:ke,isFallbackTransition:xr}),xr||(he(b,q),ke.onStart(()=>{We(b,q)})),ke.onDone(()=>{let pr=this.players.indexOf(ke);pr>=0&&this.players.splice(pr,1);const Fi=this._engine.playersByElement.get(b);if(Fi){let xi=Fi.indexOf(ke);xi>=0&&Fi.splice(xi,1)}}),this.players.push(ke),Jr.push(ke),ke}deregister(b){delete this._triggers[b],this._engine.statesByElement.forEach((E,k)=>{delete E[b]}),this._elementListeners.forEach((E,k)=>{this._elementListeners.set(k,E.filter(ee=>ee.name!=b))})}clearElementCache(b){this._engine.statesByElement.delete(b),this._elementListeners.delete(b);const E=this._engine.playersByElement.get(b);E&&(E.forEach(k=>k.destroy()),this._engine.playersByElement.delete(b))}_signalRemovalForInnerTriggers(b,E){const k=this._engine.driver.query(b,Yt,!0);k.forEach(ee=>{if(ee[$r])return;const Ee=this._engine.fetchNamespacesByElement(ee);Ee.size?Ee.forEach(ke=>ke.triggerLeaveAnimation(ee,E,!1,!0)):this.clearElementCache(ee)}),this._engine.afterFlushAnimationsDone(()=>k.forEach(ee=>this.clearElementCache(ee)))}triggerLeaveAnimation(b,E,k,ee){const Ee=this._engine.statesByElement.get(b),ke=new Map;if(Ee){const qe=[];if(Object.keys(Ee).forEach(wt=>{if(ke.set(wt,Ee[wt].value),this._triggers[wt]){const sn=this.trigger(b,wt,vi,ee);sn&&qe.push(sn)}}),qe.length)return this._engine.markElementAsRemoved(this.id,b,!0,E,ke),k&&Gt(qe).onDone(()=>this._engine.processLeaveNode(b)),!0}return!1}prepareLeaveAnimationListeners(b){const E=this._elementListeners.get(b),k=this._engine.statesByElement.get(b);if(E&&k){const ee=new Set;E.forEach(Ee=>{const ke=Ee.name;if(ee.has(ke))return;ee.add(ke);const wt=this._triggers[ke].fallbackTransition,sn=k[ke]||Ti,sr=new Yi(vi),Er=new kr(this.id,ke,b);this._engine.totalQueuedPlayers++,this._queue.push({element:b,triggerName:ke,transition:wt,fromState:sn,toState:sr,player:Er,isFallbackTransition:!0})})}}removeNode(b,E){const k=this._engine;if(b.childElementCount&&this._signalRemovalForInnerTriggers(b,E),this.triggerLeaveAnimation(b,E,!0))return;let ee=!1;if(k.totalAnimations){const Ee=k.players.length?k.playersByQueriedElement.get(b):[];if(Ee&&Ee.length)ee=!0;else{let ke=b;for(;ke=ke.parentNode;)if(k.statesByElement.get(ke)){ee=!0;break}}}if(this.prepareLeaveAnimationListeners(b),ee)k.markElementAsRemoved(this.id,b,!1,E);else{const Ee=b[$r];(!Ee||Ee===Xr)&&(k.afterFlush(()=>this.clearElementCache(b)),k.destroyInnerAnimations(b),k._onRemovalComplete(b,E))}}insertNode(b,E){he(b,this._hostClassName)}drainQueuedTransitions(b){const E=[];return this._queue.forEach(k=>{const ee=k.player;if(ee.destroyed)return;const Ee=k.element,ke=this._elementListeners.get(Ee);ke&&ke.forEach(qe=>{if(qe.name==k.triggerName){const wt=Or(Ee,k.triggerName,k.fromState.value,k.toState.value);wt._data=b,Bn(k.player,qe.phase,wt,qe.callback)}}),ee.markedForDestroy?this._engine.afterFlush(()=>{ee.destroy()}):E.push(k)}),this._queue=[],E.sort((k,ee)=>{const Ee=k.transition.ast.depCount,ke=ee.transition.ast.depCount;return 0==Ee||0==ke?Ee-ke:this._engine.driver.containsElement(k.element,ee.element)?1:-1})}destroy(b){this.players.forEach(E=>E.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,b)}elementContainsData(b){let E=!1;return this._elementListeners.has(b)&&(E=!0),E=!!this._queue.find(k=>k.element===b)||E,E}}class ts{constructor(b,E,k){this.bodyNode=b,this.driver=E,this._normalizer=k,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ee,Ee)=>{}}_onRemovalComplete(b,E){this.onRemovalComplete(b,E)}get queuedPlayers(){const b=[];return this._namespaceList.forEach(E=>{E.players.forEach(k=>{k.queued&&b.push(k)})}),b}createNamespace(b,E){const k=new ro(b,E,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,E)?this._balanceNamespaceList(k,E):(this.newHostElements.set(E,k),this.collectEnterElement(E)),this._namespaceLookup[b]=k}_balanceNamespaceList(b,E){const k=this._namespaceList,ee=this.namespacesByHostElement,Ee=k.length-1;if(Ee>=0){let ke=!1;if(void 0!==this.driver.getParentElement){let qe=this.driver.getParentElement(E);for(;qe;){const wt=ee.get(qe);if(wt){const sn=k.indexOf(wt);k.splice(sn+1,0,b),ke=!0;break}qe=this.driver.getParentElement(qe)}}else for(let qe=Ee;qe>=0;qe--)if(this.driver.containsElement(k[qe].hostElement,E)){k.splice(qe+1,0,b),ke=!0;break}ke||k.unshift(b)}else k.push(b);return ee.set(E,b),b}register(b,E){let k=this._namespaceLookup[b];return k||(k=this.createNamespace(b,E)),k}registerTrigger(b,E,k){let ee=this._namespaceLookup[b];ee&&ee.register(E,k)&&this.totalAnimations++}destroy(b,E){if(!b)return;const k=this._fetchNamespace(b);this.afterFlush(()=>{this.namespacesByHostElement.delete(k.hostElement),delete this._namespaceLookup[b];const ee=this._namespaceList.indexOf(k);ee>=0&&this._namespaceList.splice(ee,1)}),this.afterFlushAnimationsDone(()=>k.destroy(E))}_fetchNamespace(b){return this._namespaceLookup[b]}fetchNamespacesByElement(b){const E=new Set,k=this.statesByElement.get(b);if(k){const ee=Object.keys(k);for(let Ee=0;Ee<ee.length;Ee++){const ke=k[ee[Ee]].namespaceId;if(ke){const qe=this._fetchNamespace(ke);qe&&E.add(qe)}}}return E}trigger(b,E,k,ee){if(io(E)){const Ee=this._fetchNamespace(b);if(Ee)return Ee.trigger(E,k,ee),!0}return!1}insertNode(b,E,k,ee){if(!io(E))return;const Ee=E[$r];if(Ee&&Ee.setForRemoval){Ee.setForRemoval=!1,Ee.setForMove=!0;const ke=this.collectedLeaveElements.indexOf(E);ke>=0&&this.collectedLeaveElements.splice(ke,1)}if(b){const ke=this._fetchNamespace(b);ke&&ke.insertNode(E,k)}ee&&this.collectEnterElement(E)}collectEnterElement(b){this.collectedEnterElements.push(b)}markElementAsDisabled(b,E){E?this.disabledNodes.has(b)||(this.disabledNodes.add(b),he(b,ze)):this.disabledNodes.has(b)&&(this.disabledNodes.delete(b),We(b,ze))}removeNode(b,E,k,ee){if(io(E)){const Ee=b?this._fetchNamespace(b):null;if(Ee?Ee.removeNode(E,ee):this.markElementAsRemoved(b,E,!1,ee),k){const ke=this.namespacesByHostElement.get(E);ke&&ke.id!==b&&ke.removeNode(E,ee)}}else this._onRemovalComplete(E,ee)}markElementAsRemoved(b,E,k,ee,Ee){this.collectedLeaveElements.push(E),E[$r]={namespaceId:b,setForRemoval:ee,hasAnimation:k,removedBeforeQueried:!1,previousTriggersValues:Ee}}listen(b,E,k,ee,Ee){return io(E)?this._fetchNamespace(b).listen(E,k,ee,Ee):()=>{}}_buildInstruction(b,E,k,ee,Ee){return b.transition.build(this.driver,b.element,b.fromState.value,b.toState.value,k,ee,b.fromState.options,b.toState.options,E,Ee)}destroyInnerAnimations(b){let E=this.driver.query(b,Yt,!0);E.forEach(k=>this.destroyActiveAnimationsForElement(k)),0!=this.playersByQueriedElement.size&&(E=this.driver.query(b,Hn,!0),E.forEach(k=>this.finishActiveQueriedAnimationOnElement(k)))}destroyActiveAnimationsForElement(b){const E=this.playersByElement.get(b);E&&E.forEach(k=>{k.queued?k.markedForDestroy=!0:k.destroy()})}finishActiveQueriedAnimationOnElement(b){const E=this.playersByQueriedElement.get(b);E&&E.forEach(k=>k.finish())}whenRenderingDone(){return new Promise(b=>{if(this.players.length)return Gt(this.players).onDone(()=>b());b()})}processLeaveNode(b){var E;const k=b[$r];if(k&&k.setForRemoval){if(b[$r]=Xr,k.namespaceId){this.destroyInnerAnimations(b);const ee=this._fetchNamespace(k.namespaceId);ee&&ee.clearElementCache(b)}this._onRemovalComplete(b,k.setForRemoval)}(null===(E=b.classList)||void 0===E?void 0:E.contains(ze))&&this.markElementAsDisabled(b,!1),this.driver.query(b,".ng-animate-disabled",!0).forEach(ee=>{this.markElementAsDisabled(ee,!1)})}flush(b=-1){let E=[];if(this.newHostElements.size&&(this.newHostElements.forEach((k,ee)=>this._balanceNamespaceList(k,ee)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let k=0;k<this.collectedEnterElements.length;k++)he(this.collectedEnterElements[k],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const k=[];try{E=this._flushAnimations(k,b)}finally{for(let ee=0;ee<k.length;ee++)k[ee]()}}else for(let k=0;k<this.collectedLeaveElements.length;k++)this.processLeaveNode(this.collectedLeaveElements[k]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(k=>k()),this._flushFns=[],this._whenQuietFns.length){const k=this._whenQuietFns;this._whenQuietFns=[],E.length?Gt(E).onDone(()=>{k.forEach(ee=>ee())}):k.forEach(ee=>ee())}}reportError(b){throw function Ji(B){return new Z.vHH(3402,ot)}()}_flushAnimations(b,E){const k=new as,ee=[],Ee=new Map,ke=[],qe=new Map,wt=new Map,sn=new Map,sr=new Set;this.disabledNodes.forEach(Sr=>{sr.add(Sr);const N=this.driver.query(Sr,".ng-animate-queued",!0);for(let D=0;D<N.length;D++)sr.add(N[D])});const Er=this.bodyNode,Jr=Array.from(this.statesByElement.keys()),Pi=L(Jr,this.collectedEnterElements),xr=new Map;let pr=0;Pi.forEach((Sr,N)=>{const D=Re+pr++;xr.set(N,D),Sr.forEach(I=>he(I,D))});const Fi=[],xi=new Set,us=new Set;for(let Sr=0;Sr<this.collectedLeaveElements.length;Sr++){const N=this.collectedLeaveElements[Sr],D=N[$r];D&&D.setForRemoval&&(Fi.push(N),xi.add(N),D.hasAnimation?this.driver.query(N,".ng-star-inserted",!0).forEach(I=>xi.add(I)):us.add(N))}const Hs=new Map,En=L(Jr,Array.from(xi));En.forEach((Sr,N)=>{const D=De+pr++;Hs.set(N,D),Sr.forEach(I=>he(I,D))}),b.push(()=>{Pi.forEach((Sr,N)=>{const D=xr.get(N);Sr.forEach(I=>We(I,D))}),En.forEach((Sr,N)=>{const D=Hs.get(N);Sr.forEach(I=>We(I,D))}),Fi.forEach(Sr=>{this.processLeaveNode(Sr)})});const Bi=[],$i=[];for(let Sr=this._namespaceList.length-1;Sr>=0;Sr--)this._namespaceList[Sr].drainQueuedTransitions(E).forEach(D=>{const I=D.player,W=D.element;if(Bi.push(I),this.collectedEnterElements.length){const Fr=W[$r];if(Fr&&Fr.setForMove){if(Fr.previousTriggersValues&&Fr.previousTriggersValues.has(D.triggerName)){const _r=Fr.previousTriggersValues.get(D.triggerName),Mr=this.statesByElement.get(D.element);Mr&&Mr[D.triggerName]&&(Mr[D.triggerName].value=_r)}return void I.destroy()}}const ne=!Er||!this.driver.containsElement(Er,W),me=Hs.get(W),Be=xr.get(W),Ke=this._buildInstruction(D,k,Be,me,ne);if(Ke.errors&&Ke.errors.length)return void $i.push(Ke);if(ne)return I.onStart(()=>oi(W,Ke.fromStyles)),I.onDestroy(()=>ir(W,Ke.toStyles)),void ee.push(I);if(D.isFallbackTransition)return I.onStart(()=>oi(W,Ke.fromStyles)),I.onDestroy(()=>ir(W,Ke.toStyles)),void ee.push(I);const cn=[];Ke.timelines.forEach(Fr=>{Fr.stretchStartingKeyframe=!0,this.disabledNodes.has(Fr.element)||cn.push(Fr)}),Ke.timelines=cn,k.append(W,Ke.timelines),ke.push({instruction:Ke,player:I,element:W}),Ke.queriedElements.forEach(Fr=>dr(qe,Fr,[]).push(I)),Ke.preStyleProps.forEach((Fr,_r)=>{const Mr=Object.keys(Fr);if(Mr.length){let Gn=wt.get(_r);Gn||wt.set(_r,Gn=new Set),Mr.forEach(_o=>Gn.add(_o))}}),Ke.postStyleProps.forEach((Fr,_r)=>{const Mr=Object.keys(Fr);let Gn=sn.get(_r);Gn||sn.set(_r,Gn=new Set),Mr.forEach(_o=>Gn.add(_o))})});if($i.length){const Sr=[];$i.forEach(N=>{Sr.push(function it(B,b){return new Z.vHH(3505,ot)}())}),Bi.forEach(N=>N.destroy()),this.reportError(Sr)}const Ts=new Map,rr=new Map;ke.forEach(Sr=>{const N=Sr.element;k.has(N)&&(rr.set(N,N),this._beforeAnimationBuild(Sr.player.namespaceId,Sr.instruction,Ts))}),ee.forEach(Sr=>{const N=Sr.element;this._getPreviousPlayers(N,!1,Sr.namespaceId,Sr.triggerName,null).forEach(I=>{dr(Ts,N,[]).push(I),I.destroy()})});const hr=Fi.filter(Sr=>Ue(Sr,wt,sn)),Yo=new Map;G(Yo,this.driver,us,sn,Ne.l3).forEach(Sr=>{Ue(Sr,wt,sn)&&hr.push(Sr)});const qt=new Map;Pi.forEach((Sr,N)=>{G(qt,this.driver,new Set(Sr),wt,Ne.k1)}),hr.forEach(Sr=>{const N=Yo.get(Sr),D=qt.get(Sr);Yo.set(Sr,Object.assign(Object.assign({},N),D))});const In=[],Ys=[],Vo={};ke.forEach(Sr=>{const{element:N,player:D,instruction:I}=Sr;if(k.has(N)){if(sr.has(N))return D.onDestroy(()=>ir(N,I.toStyles)),D.disabled=!0,D.overrideTotalTime(I.totalTime),void ee.push(D);let W=Vo;if(rr.size>1){let me=N;const Be=[];for(;me=me.parentNode;){const Ke=rr.get(me);if(Ke){W=Ke;break}Be.push(me)}Be.forEach(Ke=>rr.set(Ke,W))}const ne=this._buildAnimation(D.namespaceId,I,Ts,Ee,qt,Yo);if(D.setRealPlayer(ne),W===Vo)In.push(D);else{const me=this.playersByElement.get(W);me&&me.length&&(D.parentPlayer=Gt(me)),ee.push(D)}}else oi(N,I.fromStyles),D.onDestroy(()=>ir(N,I.toStyles)),Ys.push(D),sr.has(N)&&ee.push(D)}),Ys.forEach(Sr=>{const N=Ee.get(Sr.element);if(N&&N.length){const D=Gt(N);Sr.setRealPlayer(D)}}),ee.forEach(Sr=>{Sr.parentPlayer?Sr.syncPlayerEvents(Sr.parentPlayer):Sr.destroy()});for(let Sr=0;Sr<Fi.length;Sr++){const N=Fi[Sr],D=N[$r];if(We(N,De),D&&D.hasAnimation)continue;let I=[];if(qe.size){let ne=qe.get(N);ne&&ne.length&&I.push(...ne);let me=this.driver.query(N,Hn,!0);for(let Be=0;Be<me.length;Be++){let Ke=qe.get(me[Be]);Ke&&Ke.length&&I.push(...Ke)}}const W=I.filter(ne=>!ne.destroyed);W.length?Mn(this,N,W):this.processLeaveNode(N)}return Fi.length=0,In.forEach(Sr=>{this.players.push(Sr),Sr.onDone(()=>{Sr.destroy();const N=this.players.indexOf(Sr);this.players.splice(N,1)}),Sr.play()}),In}elementContainsData(b,E){let k=!1;const ee=E[$r];return ee&&ee.setForRemoval&&(k=!0),this.playersByElement.has(E)&&(k=!0),this.playersByQueriedElement.has(E)&&(k=!0),this.statesByElement.has(E)&&(k=!0),this._fetchNamespace(b).elementContainsData(E)||k}afterFlush(b){this._flushFns.push(b)}afterFlushAnimationsDone(b){this._whenQuietFns.push(b)}_getPreviousPlayers(b,E,k,ee,Ee){let ke=[];if(E){const qe=this.playersByQueriedElement.get(b);qe&&(ke=qe)}else{const qe=this.playersByElement.get(b);if(qe){const wt=!Ee||Ee==vi;qe.forEach(sn=>{sn.queued||!wt&&sn.triggerName!=ee||ke.push(sn)})}}return(k||ee)&&(ke=ke.filter(qe=>!(k&&k!=qe.namespaceId||ee&&ee!=qe.triggerName))),ke}_beforeAnimationBuild(b,E,k){const Ee=E.element,ke=E.isRemovalTransition?void 0:b,qe=E.isRemovalTransition?void 0:E.triggerName;for(const wt of E.timelines){const sn=wt.element,sr=sn!==Ee,Er=dr(k,sn,[]);this._getPreviousPlayers(sn,sr,ke,qe,E.toState).forEach(Pi=>{const xr=Pi.getRealPlayer();xr.beforeDestroy&&xr.beforeDestroy(),Pi.destroy(),Er.push(Pi)})}oi(Ee,E.fromStyles)}_buildAnimation(b,E,k,ee,Ee,ke){const qe=E.triggerName,wt=E.element,sn=[],sr=new Set,Er=new Set,Jr=E.timelines.map(xr=>{const pr=xr.element;sr.add(pr);const Fi=pr[$r];if(Fi&&Fi.removedBeforeQueried)return new Ne.ZN(xr.duration,xr.delay);const xi=pr!==wt,us=function te(B){const b=[];return K(B,b),b}((k.get(pr)||Br).map(Ts=>Ts.getRealPlayer())).filter(Ts=>!!Ts.element&&Ts.element===pr),Hs=Ee.get(pr),En=ke.get(pr),Bi=yn(0,this._normalizer,0,xr.keyframes,Hs,En),$i=this._buildPlayer(xr,Bi,us);if(xr.subTimeline&&ee&&Er.add(pr),xi){const Ts=new kr(b,qe,pr);Ts.setRealPlayer($i),sn.push(Ts)}return $i});sn.forEach(xr=>{dr(this.playersByQueriedElement,xr.element,[]).push(xr),xr.onDone(()=>function Zs(B,b,E){let k;if(B instanceof Map){if(k=B.get(b),k){if(k.length){const ee=k.indexOf(E);k.splice(ee,1)}0==k.length&&B.delete(b)}}else if(k=B[b],k){if(k.length){const ee=k.indexOf(E);k.splice(ee,1)}0==k.length&&delete B[b]}return k}(this.playersByQueriedElement,xr.element,xr))}),sr.forEach(xr=>he(xr,ur));const Pi=Gt(Jr);return Pi.onDestroy(()=>{sr.forEach(xr=>We(xr,ur)),ir(wt,E.toStyles)}),Er.forEach(xr=>{dr(ee,xr,[]).push(Pi)}),Pi}_buildPlayer(b,E,k){return E.length>0?this.driver.animate(b.element,E,b.duration,b.delay,b.easing,k):new Ne.ZN(b.duration,b.delay)}}class kr{constructor(b,E,k){this.namespaceId=b,this.triggerName=E,this.element=k,this._player=new Ne.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(b){this._containsRealPlayer||(this._player=b,Object.keys(this._queuedCallbacks).forEach(E=>{this._queuedCallbacks[E].forEach(k=>Bn(b,E,void 0,k))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(b.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(b){this.totalTime=b}syncPlayerEvents(b){const E=this._player;E.triggerCallback&&b.onStart(()=>E.triggerCallback("start")),b.onDone(()=>this.finish()),b.onDestroy(()=>this.destroy())}_queueEvent(b,E){dr(this._queuedCallbacks,b,[]).push(E)}onDone(b){this.queued&&this._queueEvent("done",b),this._player.onDone(b)}onStart(b){this.queued&&this._queueEvent("start",b),this._player.onStart(b)}onDestroy(b){this.queued&&this._queueEvent("destroy",b),this._player.onDestroy(b)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(b){this.queued||this._player.setPosition(b)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(b){const E=this._player;E.triggerCallback&&E.triggerCallback(b)}}function io(B){return B&&1===B.nodeType}function Q(B,b){const E=B.style.display;return B.style.display=null!=b?b:"none",E}function G(B,b,E,k,ee){const Ee=[];E.forEach(wt=>Ee.push(Q(wt)));const ke=[];k.forEach((wt,sn)=>{const sr={};wt.forEach(Er=>{const Jr=sr[Er]=b.computeStyle(sn,Er,ee);(!Jr||0==Jr.length)&&(sn[$r]=ni,ke.push(sn))}),B.set(sn,sr)});let qe=0;return E.forEach(wt=>Q(wt,Ee[qe++])),ke}function L(B,b){const E=new Map;if(B.forEach(qe=>E.set(qe,[])),0==b.length)return E;const ee=new Set(b),Ee=new Map;function ke(qe){if(!qe)return 1;let wt=Ee.get(qe);if(wt)return wt;const sn=qe.parentNode;return wt=E.has(sn)?sn:ee.has(sn)?1:ke(sn),Ee.set(qe,wt),wt}return b.forEach(qe=>{const wt=ke(qe);1!==wt&&E.get(wt).push(qe)}),E}function he(B,b){var E;null===(E=B.classList)||void 0===E||E.add(b)}function We(B,b){var E;null===(E=B.classList)||void 0===E||E.remove(b)}function Mn(B,b,E){Gt(E).onDone(()=>B.processLeaveNode(b))}function K(B,b){for(let E=0;E<B.length;E++){const k=B[E];k instanceof Ne.ZE?K(k.players,b):b.push(k)}}function Ue(B,b,E){const k=E.get(B);if(!k)return!1;let ee=b.get(B);return ee?k.forEach(Ee=>ee.add(Ee)):b.set(B,k),E.delete(B),!0}class rt{constructor(b,E,k){this.bodyNode=b,this._driver=E,this._normalizer=k,this._triggerCache={},this.onRemovalComplete=(ee,Ee)=>{},this._transitionEngine=new ts(b,E,k),this._timelineEngine=new pe(b,E,k),this._transitionEngine.onRemovalComplete=(ee,Ee)=>this.onRemovalComplete(ee,Ee)}registerTrigger(b,E,k,ee,Ee){const ke=b+"-"+ee;let qe=this._triggerCache[ke];if(!qe){const wt=[],sr=Xi(this._driver,Ee,wt,[]);if(wt.length)throw function Un(B,b){return new Z.vHH(3404,ot)}();qe=function Ps(B,b,E){return new Os(B,b,E)}(ee,sr,this._normalizer),this._triggerCache[ke]=qe}this._transitionEngine.registerTrigger(E,ee,qe)}register(b,E){this._transitionEngine.register(b,E)}destroy(b,E){this._transitionEngine.destroy(b,E)}onInsert(b,E,k,ee){this._transitionEngine.insertNode(b,E,k,ee)}onRemove(b,E,k,ee){this._transitionEngine.removeNode(b,E,ee||!1,k)}disableAnimations(b,E){this._transitionEngine.markElementAsDisabled(b,E)}process(b,E,k,ee){if("@"==k.charAt(0)){const[Ee,ke]=os(k);this._timelineEngine.command(Ee,E,ke,ee)}else this._transitionEngine.trigger(b,E,k,ee)}listen(b,E,k,ee,Ee){if("@"==k.charAt(0)){const[ke,qe]=os(k);return this._timelineEngine.listen(ke,E,qe,Ee)}return this._transitionEngine.listen(b,E,k,ee,Ee)}flush(b=-1){this._transitionEngine.flush(b)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Sn=(()=>{class B{constructor(E,k,ee){this._element=E,this._startStyles=k,this._endStyles=ee,this._state=0;let Ee=B.initialStylesByElement.get(E);Ee||B.initialStylesByElement.set(E,Ee={}),this._initialStyles=Ee}start(){this._state<1&&(this._startStyles&&ir(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ir(this._element,this._initialStyles),this._endStyles&&(ir(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(B.initialStylesByElement.delete(this._element),this._startStyles&&(oi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(oi(this._element,this._endStyles),this._endStyles=null),ir(this._element,this._initialStyles),this._state=3)}}return B.initialStylesByElement=new WeakMap,B})();function vr(B){let b=null;const E=Object.keys(B);for(let k=0;k<E.length;k++){const ee=E[k];Kn(ee)&&(b=b||{},b[ee]=B[ee])}return b}function Kn(B){return"display"===B||"position"===B}class ti{constructor(b,E,k,ee){this.element=b,this.keyframes=E,this.options=k,this._specialStyles=ee,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=k.duration,this._delay=k.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(b=>b()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const b=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,b,this.options),this._finalKeyframe=b.length?b[b.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(b,E,k){return b.animate(E,k)}onStart(b){this._onStartFns.push(b)}onDone(b){this._onDoneFns.push(b)}onDestroy(b){this._onDestroyFns.push(b)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(b=>b()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(b=>b()),this._onDestroyFns=[])}setPosition(b){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=b*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const b={};if(this.hasStarted()){const E=this._finalKeyframe;Object.keys(E).forEach(k=>{"offset"!=k&&(b[k]=this._finished?E[k]:mr(this.element,k))})}this.currentSnapshot=b}triggerCallback(b){const E="start"==b?this._onStartFns:this._onDoneFns;E.forEach(k=>k()),E.length=0}}class gi{validateStyleProperty(b){return Wn(b)}matchesElement(b,E){return!1}containsElement(b,E){return Pr(b,E)}getParentElement(b){return Ei(b)}query(b,E,k){return Nr(b,E,k)}computeStyle(b,E,k){return window.getComputedStyle(b)[E]}animate(b,E,k,ee,Ee,ke=[]){const wt={duration:k,delay:ee,fill:0==ee?"both":"forwards"};Ee&&(wt.easing=Ee);const sn={},sr=ke.filter(Jr=>Jr instanceof ti);(function Ss(B,b){return 0===B||0===b})(k,ee)&&sr.forEach(Jr=>{let Pi=Jr.currentSnapshot;Object.keys(Pi).forEach(xr=>sn[xr]=Pi[xr])}),E=function Vs(B,b,E){const k=Object.keys(E);if(k.length&&b.length){let Ee=b[0],ke=[];if(k.forEach(qe=>{Ee.hasOwnProperty(qe)||ke.push(qe),Ee[qe]=E[qe]}),ke.length)for(var ee=1;ee<b.length;ee++){let qe=b[ee];ke.forEach(function(wt){qe[wt]=mr(B,wt)})}}return b}(b,E=E.map(Jr=>es(Jr,!1)),sn);const Er=function Ht(B,b){let E=null,k=null;return Array.isArray(b)&&b.length?(E=vr(b[0]),b.length>1&&(k=vr(b[b.length-1]))):b&&(E=vr(b)),E||k?new Sn(B,E,k):null}(b,E);return new ti(b,E,wt,Er)}}let fi=(()=>{class B extends Ne._j{constructor(E,k){super(),this._nextAnimationId=0,this._renderer=E.createRenderer(k.body,{id:"0",encapsulation:Z.ifc.None,styles:[],data:{animation:[]}})}build(E){const k=this._nextAnimationId.toString();this._nextAnimationId++;const ee=Array.isArray(E)?(0,Ne.vP)(E):E;return l(this._renderer,null,k,"register",[ee]),new Ui(k,this._renderer)}}return B.\u0275fac=function(E){return new(E||B)(Z.LFG(Z.FYo),Z.LFG(pn.K0))},B.\u0275prov=Z.Yz7({token:B,factory:B.\u0275fac}),B})();class Ui extends Ne.LC{constructor(b,E){super(),this._id=b,this._renderer=E}create(b,E){return new is(this._id,b,E||{},this._renderer)}}class is{constructor(b,E,k,ee){this.id=b,this.element=E,this._renderer=ee,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",k)}_listen(b,E){return this._renderer.listen(this.element,`@@${this.id}:${b}`,E)}_command(b,...E){return l(this._renderer,this.element,this.id,b,E)}onDone(b){this._listen("done",b)}onStart(b){this._listen("start",b)}onDestroy(b){this._listen("destroy",b)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(b){this._command("setPosition",b)}getPosition(){var b,E;return null!==(E=null===(b=this._renderer.engine.players[+this.id])||void 0===b?void 0:b.getPosition())&&void 0!==E?E:0}}function l(B,b,E,k,ee){return B.setProperty(b,`@@${E}:${k}`,ee)}const x="@",S="@.disabled";let P=(()=>{class B{constructor(E,k,ee){this.delegate=E,this.engine=k,this._zone=ee,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),k.onRemovalComplete=(Ee,ke)=>{const qe=null==ke?void 0:ke.parentNode(Ee);qe&&ke.removeChild(qe,Ee)}}createRenderer(E,k){const Ee=this.delegate.createRenderer(E,k);if(!(E&&k&&k.data&&k.data.animation)){let sr=this._rendererCache.get(Ee);return sr||(sr=new z("",Ee,this.engine),this._rendererCache.set(Ee,sr)),sr}const ke=k.id,qe=k.id+"-"+this._currentId;this._currentId++,this.engine.register(qe,E);const wt=sr=>{Array.isArray(sr)?sr.forEach(wt):this.engine.registerTrigger(ke,qe,E,sr.name,sr)};return k.data.animation.forEach(wt),new J(this,qe,Ee,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(E,k,ee){E>=0&&E<this._microtaskId?this._zone.run(()=>k(ee)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Ee=>{const[ke,qe]=Ee;ke(qe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([k,ee]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return B.\u0275fac=function(E){return new(E||B)(Z.LFG(Z.FYo),Z.LFG(rt),Z.LFG(Z.R0b))},B.\u0275prov=Z.Yz7({token:B,factory:B.\u0275fac}),B})();class z{constructor(b,E,k){this.namespaceId=b,this.delegate=E,this.engine=k,this.destroyNode=this.delegate.destroyNode?ee=>E.destroyNode(ee):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(b,E){return this.delegate.createElement(b,E)}createComment(b){return this.delegate.createComment(b)}createText(b){return this.delegate.createText(b)}appendChild(b,E){this.delegate.appendChild(b,E),this.engine.onInsert(this.namespaceId,E,b,!1)}insertBefore(b,E,k,ee=!0){this.delegate.insertBefore(b,E,k),this.engine.onInsert(this.namespaceId,E,b,ee)}removeChild(b,E,k){this.engine.onRemove(this.namespaceId,E,this.delegate,k)}selectRootElement(b,E){return this.delegate.selectRootElement(b,E)}parentNode(b){return this.delegate.parentNode(b)}nextSibling(b){return this.delegate.nextSibling(b)}setAttribute(b,E,k,ee){this.delegate.setAttribute(b,E,k,ee)}removeAttribute(b,E,k){this.delegate.removeAttribute(b,E,k)}addClass(b,E){this.delegate.addClass(b,E)}removeClass(b,E){this.delegate.removeClass(b,E)}setStyle(b,E,k,ee){this.delegate.setStyle(b,E,k,ee)}removeStyle(b,E,k){this.delegate.removeStyle(b,E,k)}setProperty(b,E,k){E.charAt(0)==x&&E==S?this.disableAnimations(b,!!k):this.delegate.setProperty(b,E,k)}setValue(b,E){this.delegate.setValue(b,E)}listen(b,E,k){return this.delegate.listen(b,E,k)}disableAnimations(b,E){this.engine.disableAnimations(b,E)}}class J extends z{constructor(b,E,k,ee){super(E,k,ee),this.factory=b,this.namespaceId=E}setProperty(b,E,k){E.charAt(0)==x?"."==E.charAt(1)&&E==S?this.disableAnimations(b,k=void 0===k||!!k):this.engine.process(this.namespaceId,b,E.substr(1),k):this.delegate.setProperty(b,E,k)}listen(b,E,k){if(E.charAt(0)==x){const ee=function ye(B){switch(B){case"body":return document.body;case"document":return document;case"window":return window;default:return B}}(b);let Ee=E.substr(1),ke="";return Ee.charAt(0)!=x&&([Ee,ke]=function Te(B){const b=B.indexOf(".");return[B.substring(0,b),B.substr(b+1)]}(Ee)),this.engine.listen(this.namespaceId,ee,Ee,ke,qe=>{this.factory.scheduleListenerCallback(qe._data||-1,k,qe)})}return this.delegate.listen(b,E,k)}}let ae=(()=>{class B extends rt{constructor(E,k,ee){super(E.body,k,ee)}ngOnDestroy(){this.flush()}}return B.\u0275fac=function(E){return new(E||B)(Z.LFG(pn.K0),Z.LFG(ht),Z.LFG(bs))},B.\u0275prov=Z.Yz7({token:B,factory:B.\u0275fac}),B})();const ue=new Z.OlP("AnimationModuleType"),we=[{provide:Ne._j,useClass:fi},{provide:bs,useFactory:function _e(){return new Zo}},{provide:rt,useClass:ae},{provide:Z.FYo,useFactory:function ce(B,b,E){return new P(B,b,E)},deps:[g.se,rt,Z.R0b]}],He=[{provide:ht,useFactory:()=>new gi},{provide:ue,useValue:"BrowserAnimations"},...we],nt=[{provide:ht,useClass:$e},{provide:ue,useValue:"NoopAnimations"},...we];let Ae=(()=>{class B{static withConfig(E){return{ngModule:B,providers:E.disableAnimations?nt:He}}}return B.\u0275fac=function(E){return new(E||B)},B.\u0275mod=Z.oAB({type:B}),B.\u0275inj=Z.cJS({providers:He,imports:[g.b2]}),B})();var _t=H(4466),Je=H(520);let yt=(()=>{class B{constructor(){}intercept(E,k){let ee=E.clone({setHeaders:{Authorization:`Bearer ${localStorage.getItem("drastitoken")}`}});return k.handle(ee)}}return B.\u0275fac=function(E){return new(E||B)},B.\u0275prov=Z.Yz7({token:B,factory:B.\u0275fac}),B})();var mn=H(262),Tn=H(2843),hn=H(2290);let xn=(()=>{class B{constructor(E,k,ee){this.router=E,this.cartService=k,this.toastr=ee}intercept(E,k){return k.handle(E).pipe((0,mn.K)(ee=>{var Ee,ke,qe;let wt=null===(Ee=null==ee?void 0:ee.error)||void 0===Ee?void 0:Ee.errors;if(Array.isArray(wt)&&(null==wt?void 0:wt.length))for(let sn=0;sn<(null==wt?void 0:wt.length);sn++)(null===(ke=wt[sn])||void 0===ke?void 0:ke.message)&&this.toastr.error(null===(qe=wt[sn])||void 0===qe?void 0:qe.message);else(null==wt?void 0:wt.message)&&this.toastr.error(null==wt?void 0:wt.message);return-1!==[401,403].indexOf(ee.status)&&(this.cartService.cartItems.next([]),localStorage.removeItem("drastitoken"),localStorage.removeItem("userid"),localStorage.removeItem("username")),(0,Tn._)(ee)}))}}return B.\u0275fac=function(E){return new(E||B)(Z.LFG(ge.F0),Z.LFG(Me.N),Z.LFG(hn._W))},B.\u0275prov=Z.Yz7({token:B,factory:B.\u0275fac}),B})();var Zn=H(2011),cr=H(1205),Nn=H(2095);let Qt=(()=>{class B{}return B.\u0275fac=function(E){return new(E||B)},B.\u0275mod=Z.oAB({type:B,bootstrap:[xe]}),B.\u0275inj=Z.cJS({providers:[{provide:Je.TP,useClass:yt,multi:!0},{provide:Je.TP,useClass:xn,multi:!0}],imports:[[g.b2.withServerTransition({appId:"serverApp"}),Qe,Ae,_t.m,Nn.yb,cr.ww,Zn.hO.initializeApp({apiKey:"AIzaSyCrZO0tF5O5Ms8au460-tmGbNS3mJ6QrEc",authDomain:"drasti-37a06.firebaseapp.com",databaseURL:"https://drasti-37a06-default-rtdb.firebaseio.com",projectId:"drasti-37a06",storageBucket:"drasti-37a06.appspot.com",messagingSenderId:"850147128578",appId:"1:850147128578:web:2153add74417b85d4fbe1b",measurementId:"G-41JEDDFQT2"})]]}),B})();function ln(){g.q6().bootstrapModule(Qt).catch(B=>console.error(B))}H(2340).N.production&&(0,Z.G48)(),"complete"===document.readyState?ln():document.addEventListener("DOMContentLoaded",ln)},1135:(jn,Dt,H)=>{H.d(Dt,{X:()=>Z});var g=H(7579);class Z extends g.x{constructor(le){super(),this._value=le}get value(){return this.getValue()}_subscribe(le){const Ye=super._subscribe(le);return!Ye.closed&&le.next(this._value),Ye}getValue(){const{hasError:le,thrownError:Ye,_value:Xe}=this;if(le)throw Ye;return this._throwIfClosed(),Xe}next(le){super.next(this._value=le)}}},8306:(jn,Dt,H)=>{H.d(Dt,{y:()=>Pe});var g=H(2961),Z=H(727),ge=H(8822),le=H(4671);var gt=H(2416),Qe=H(576),ft=H(2806);let Pe=(()=>{class vt{constructor(bn){bn&&(this._subscribe=bn)}lift(bn){const Pt=new vt;return Pt.source=this,Pt.operator=bn,Pt}subscribe(bn,Pt,Jt){const Ln=function pn(vt){return vt&&vt instanceof g.Lv||function Et(vt){return vt&&(0,Qe.m)(vt.next)&&(0,Qe.m)(vt.error)&&(0,Qe.m)(vt.complete)}(vt)&&(0,Z.Nn)(vt)}(bn)?bn:new g.Hp(bn,Pt,Jt);return(0,ft.x)(()=>{const{operator:un,source:xe}=this;Ln.add(un?un.call(Ln,xe):xe?this._subscribe(Ln):this._trySubscribe(Ln))}),Ln}_trySubscribe(bn){try{return this._subscribe(bn)}catch(Pt){bn.error(Pt)}}forEach(bn,Pt){return new(Pt=Me(Pt))((Jt,Ln)=>{const un=new g.Hp({next:xe=>{try{bn(xe)}catch(Ne){Ln(Ne),un.unsubscribe()}},error:Ln,complete:Jt});this.subscribe(un)})}_subscribe(bn){var Pt;return null===(Pt=this.source)||void 0===Pt?void 0:Pt.subscribe(bn)}[ge.L](){return this}pipe(...bn){return function Xe(vt){return 0===vt.length?le.y:1===vt.length?vt[0]:function(bn){return vt.reduce((Pt,Jt)=>Jt(Pt),bn)}}(bn)(this)}toPromise(bn){return new(bn=Me(bn))((Pt,Jt)=>{let Ln;this.subscribe(un=>Ln=un,un=>Jt(un),()=>Pt(Ln))})}}return vt.create=nn=>new vt(nn),vt})();function Me(vt){var nn;return null!==(nn=null!=vt?vt:gt.v.Promise)&&void 0!==nn?nn:Promise}},7579:(jn,Dt,H)=>{H.d(Dt,{x:()=>gt});var g=H(8306),Z=H(727);const le=(0,H(3888).d)(ft=>function(){ft(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=H(8737),Xe=H(2806);let gt=(()=>{class ft extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Me){const Et=new Qe(this,this);return Et.operator=Me,Et}_throwIfClosed(){if(this.closed)throw new le}next(Me){(0,Xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Et of this.currentObservers)Et.next(Me)}})}error(Me){(0,Xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Me;const{observers:Et}=this;for(;Et.length;)Et.shift().error(Me)}})}complete(){(0,Xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Me}=this;for(;Me.length;)Me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Me;return(null===(Me=this.observers)||void 0===Me?void 0:Me.length)>0}_trySubscribe(Me){return this._throwIfClosed(),super._trySubscribe(Me)}_subscribe(Me){return this._throwIfClosed(),this._checkFinalizedStatuses(Me),this._innerSubscribe(Me)}_innerSubscribe(Me){const{hasError:Et,isStopped:pn,observers:vt}=this;return Et||pn?Z.Lc:(this.currentObservers=null,vt.push(Me),new Z.w0(()=>{this.currentObservers=null,(0,Ye.P)(vt,Me)}))}_checkFinalizedStatuses(Me){const{hasError:Et,thrownError:pn,isStopped:vt}=this;Et?Me.error(pn):vt&&Me.complete()}asObservable(){const Me=new g.y;return Me.source=this,Me}}return ft.create=(Pe,Me)=>new Qe(Pe,Me),ft})();class Qe extends gt{constructor(Pe,Me){super(),this.destination=Pe,this.source=Me}next(Pe){var Me,Et;null===(Et=null===(Me=this.destination)||void 0===Me?void 0:Me.next)||void 0===Et||Et.call(Me,Pe)}error(Pe){var Me,Et;null===(Et=null===(Me=this.destination)||void 0===Me?void 0:Me.error)||void 0===Et||Et.call(Me,Pe)}complete(){var Pe,Me;null===(Me=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.complete)||void 0===Me||Me.call(Pe)}_subscribe(Pe){var Me,Et;return null!==(Et=null===(Me=this.source)||void 0===Me?void 0:Me.subscribe(Pe))&&void 0!==Et?Et:Z.Lc}}},2961:(jn,Dt,H)=>{H.d(Dt,{Hp:()=>bn,Lv:()=>Et});var g=H(576),Z=H(727),ge=H(2416),le=H(7849);function Ye(){}const Xe=ft("C",void 0,void 0);function ft(xe,Ne,ot){return{kind:xe,value:Ne,error:ot}}var Pe=H(3410),Me=H(2806);class Et extends Z.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,Z.Nn)(Ne)&&Ne.add(this)):this.destination=un}static create(Ne,ot,Kt){return new bn(Ne,ot,Kt)}next(Ne){this.isStopped?Ln(function Qe(xe){return ft("N",xe,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?Ln(function gt(xe){return ft("E",void 0,xe)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?Ln(Xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const pn=Function.prototype.bind;function vt(xe,Ne){return pn.call(xe,Ne)}class nn{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:ot}=this;if(ot.next)try{ot.next(Ne)}catch(Kt){Pt(Kt)}}error(Ne){const{partialObserver:ot}=this;if(ot.error)try{ot.error(Ne)}catch(Kt){Pt(Kt)}else Pt(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(ot){Pt(ot)}}}class bn extends Et{constructor(Ne,ot,Kt){let Ut;if(super(),(0,g.m)(Ne)||!Ne)Ut={next:null!=Ne?Ne:void 0,error:null!=ot?ot:void 0,complete:null!=Kt?Kt:void 0};else{let Fe;this&&ge.v.useDeprecatedNextContext?(Fe=Object.create(Ne),Fe.unsubscribe=()=>this.unsubscribe(),Ut={next:Ne.next&&vt(Ne.next,Fe),error:Ne.error&&vt(Ne.error,Fe),complete:Ne.complete&&vt(Ne.complete,Fe)}):Ut=Ne}this.destination=new nn(Ut)}}function Pt(xe){ge.v.useDeprecatedSynchronousErrorHandling?(0,Me.O)(xe):(0,le.h)(xe)}function Ln(xe,Ne){const{onStoppedNotification:ot}=ge.v;ot&&Pe.z.setTimeout(()=>ot(xe,Ne))}const un={closed:!0,next:Ye,error:function Jt(xe){throw xe},complete:Ye}},727:(jn,Dt,H)=>{H.d(Dt,{Lc:()=>Xe,w0:()=>Ye,Nn:()=>gt});var g=H(576);const ge=(0,H(3888).d)(ft=>function(Me){ft(this),this.message=Me?`${Me.length} errors occurred during unsubscription:\n${Me.map((Et,pn)=>`${pn+1}) ${Et.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Me});var le=H(8737);class Ye{constructor(Pe){this.initialTeardown=Pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Pe;if(!this.closed){this.closed=!0;const{_parentage:Me}=this;if(Me)if(this._parentage=null,Array.isArray(Me))for(const vt of Me)vt.remove(this);else Me.remove(this);const{initialTeardown:Et}=this;if((0,g.m)(Et))try{Et()}catch(vt){Pe=vt instanceof ge?vt.errors:[vt]}const{_finalizers:pn}=this;if(pn){this._finalizers=null;for(const vt of pn)try{Qe(vt)}catch(nn){Pe=null!=Pe?Pe:[],nn instanceof ge?Pe=[...Pe,...nn.errors]:Pe.push(nn)}}if(Pe)throw new ge(Pe)}}add(Pe){var Me;if(Pe&&Pe!==this)if(this.closed)Qe(Pe);else{if(Pe instanceof Ye){if(Pe.closed||Pe._hasParent(this))return;Pe._addParent(this)}(this._finalizers=null!==(Me=this._finalizers)&&void 0!==Me?Me:[]).push(Pe)}}_hasParent(Pe){const{_parentage:Me}=this;return Me===Pe||Array.isArray(Me)&&Me.includes(Pe)}_addParent(Pe){const{_parentage:Me}=this;this._parentage=Array.isArray(Me)?(Me.push(Pe),Me):Me?[Me,Pe]:Pe}_removeParent(Pe){const{_parentage:Me}=this;Me===Pe?this._parentage=null:Array.isArray(Me)&&(0,le.P)(Me,Pe)}remove(Pe){const{_finalizers:Me}=this;Me&&(0,le.P)(Me,Pe),Pe instanceof Ye&&Pe._removeParent(this)}}Ye.EMPTY=(()=>{const ft=new Ye;return ft.closed=!0,ft})();const Xe=Ye.EMPTY;function gt(ft){return ft instanceof Ye||ft&&"closed"in ft&&(0,g.m)(ft.remove)&&(0,g.m)(ft.add)&&(0,g.m)(ft.unsubscribe)}function Qe(ft){(0,g.m)(ft)?ft():ft.unsubscribe()}},2416:(jn,Dt,H)=>{H.d(Dt,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(jn,Dt,H)=>{H.d(Dt,{z:()=>Ye});var g=H(8189),ge=H(7669),le=H(8996);function Ye(...Xe){return function Z(){return(0,g.J)(1)}()((0,le.D)(Xe,(0,ge.yG)(Xe)))}},515:(jn,Dt,H)=>{H.d(Dt,{E:()=>Z});const Z=new(H(8306).y)(Ye=>Ye.complete())},8996:(jn,Dt,H)=>{H.d(Dt,{D:()=>Ne});var g=H(8421),Z=H(5363),ge=H(9468),Xe=H(8306),Qe=H(2202),ft=H(576),Pe=H(9672);function Et(ot,Kt){if(!ot)throw new Error("Iterable cannot be null");return new Xe.y(Ut=>{(0,Pe.f)(Ut,Kt,()=>{const Fe=ot[Symbol.asyncIterator]();(0,Pe.f)(Ut,Kt,()=>{Fe.next().then(Lt=>{Lt.done?Ut.complete():Ut.next(Lt.value)})},0,!0)})})}var pn=H(3670),vt=H(8239),nn=H(1144),bn=H(6495),Pt=H(2206),Jt=H(4532),Ln=H(3260);function Ne(ot,Kt){return Kt?function xe(ot,Kt){if(null!=ot){if((0,pn.c)(ot))return function le(ot,Kt){return(0,g.Xf)(ot).pipe((0,ge.R)(Kt),(0,Z.Q)(Kt))}(ot,Kt);if((0,nn.z)(ot))return function gt(ot,Kt){return new Xe.y(Ut=>{let Fe=0;return Kt.schedule(function(){Fe===ot.length?Ut.complete():(Ut.next(ot[Fe++]),Ut.closed||this.schedule())})})}(ot,Kt);if((0,vt.t)(ot))return function Ye(ot,Kt){return(0,g.Xf)(ot).pipe((0,ge.R)(Kt),(0,Z.Q)(Kt))}(ot,Kt);if((0,Pt.D)(ot))return Et(ot,Kt);if((0,bn.T)(ot))return function Me(ot,Kt){return new Xe.y(Ut=>{let Fe;return(0,Pe.f)(Ut,Kt,()=>{Fe=ot[Qe.h](),(0,Pe.f)(Ut,Kt,()=>{let Lt,Oe;try{({value:Lt,done:Oe}=Fe.next())}catch(Tt){return void Ut.error(Tt)}Oe?Ut.complete():Ut.next(Lt)},0,!0)}),()=>(0,ft.m)(null==Fe?void 0:Fe.return)&&Fe.return()})}(ot,Kt);if((0,Ln.L)(ot))return function un(ot,Kt){return Et((0,Ln.Q)(ot),Kt)}(ot,Kt)}throw(0,Jt.z)(ot)}(ot,Kt):(0,g.Xf)(ot)}},8421:(jn,Dt,H)=>{H.d(Dt,{Xf:()=>pn});var g=H(655),Z=H(1144),ge=H(8239),le=H(8306),Ye=H(3670),Xe=H(2206),gt=H(4532),Qe=H(6495),ft=H(3260),Pe=H(576),Me=H(7849),Et=H(8822);function pn(xe){if(xe instanceof le.y)return xe;if(null!=xe){if((0,Ye.c)(xe))return function vt(xe){return new le.y(Ne=>{const ot=xe[Et.L]();if((0,Pe.m)(ot.subscribe))return ot.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,Z.z)(xe))return function nn(xe){return new le.y(Ne=>{for(let ot=0;ot<xe.length&&!Ne.closed;ot++)Ne.next(xe[ot]);Ne.complete()})}(xe);if((0,ge.t)(xe))return function bn(xe){return new le.y(Ne=>{xe.then(ot=>{Ne.closed||(Ne.next(ot),Ne.complete())},ot=>Ne.error(ot)).then(null,Me.h)})}(xe);if((0,Xe.D)(xe))return Jt(xe);if((0,Qe.T)(xe))return function Pt(xe){return new le.y(Ne=>{for(const ot of xe)if(Ne.next(ot),Ne.closed)return;Ne.complete()})}(xe);if((0,ft.L)(xe))return function Ln(xe){return Jt((0,ft.Q)(xe))}(xe)}throw(0,gt.z)(xe)}function Jt(xe){return new le.y(Ne=>{(function un(xe,Ne){var ot,Kt,Ut,Fe;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ot=(0,g.KL)(xe);!(Kt=yield ot.next()).done;)if(Ne.next(Kt.value),Ne.closed)return}catch(Lt){Ut={error:Lt}}finally{try{Kt&&!Kt.done&&(Fe=ot.return)&&(yield Fe.call(ot))}finally{if(Ut)throw Ut.error}}Ne.complete()})})(xe,Ne).catch(ot=>Ne.error(ot))})}},6451:(jn,Dt,H)=>{H.d(Dt,{T:()=>Xe});var g=H(8189),Z=H(8421),ge=H(515),le=H(7669),Ye=H(8996);function Xe(...gt){const Qe=(0,le.yG)(gt),ft=(0,le._6)(gt,1/0),Pe=gt;return Pe.length?1===Pe.length?(0,Z.Xf)(Pe[0]):(0,g.J)(ft)((0,Ye.D)(Pe,Qe)):ge.E}},9646:(jn,Dt,H)=>{H.d(Dt,{of:()=>ge});var g=H(7669),Z=H(8996);function ge(...le){const Ye=(0,g.yG)(le);return(0,Z.D)(le,Ye)}},2843:(jn,Dt,H)=>{H.d(Dt,{_:()=>ge});var g=H(8306),Z=H(576);function ge(le,Ye){const Xe=(0,Z.m)(le)?le:()=>le,gt=Qe=>Qe.error(Xe());return new g.y(Ye?Qe=>Ye.schedule(gt,0,Qe):gt)}},5403:(jn,Dt,H)=>{H.d(Dt,{x:()=>Z});var g=H(2961);function Z(le,Ye,Xe,gt,Qe){return new ge(le,Ye,Xe,gt,Qe)}class ge extends g.Lv{constructor(Ye,Xe,gt,Qe,ft,Pe){super(Ye),this.onFinalize=ft,this.shouldUnsubscribe=Pe,this._next=Xe?function(Me){try{Xe(Me)}catch(Et){Ye.error(Et)}}:super._next,this._error=Qe?function(Me){try{Qe(Me)}catch(Et){Ye.error(Et)}finally{this.unsubscribe()}}:super._error,this._complete=gt?function(){try{gt()}catch(Me){Ye.error(Me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ye;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Xe}=this;super.unsubscribe(),!Xe&&(null===(Ye=this.onFinalize)||void 0===Ye||Ye.call(this))}}}},262:(jn,Dt,H)=>{H.d(Dt,{K:()=>le});var g=H(8421),Z=H(5403),ge=H(4482);function le(Ye){return(0,ge.e)((Xe,gt)=>{let Pe,Qe=null,ft=!1;Qe=Xe.subscribe((0,Z.x)(gt,void 0,void 0,Me=>{Pe=(0,g.Xf)(Ye(Me,le(Ye)(Xe))),Qe?(Qe.unsubscribe(),Qe=null,Pe.subscribe(gt)):ft=!0})),ft&&(Qe.unsubscribe(),Qe=null,Pe.subscribe(gt))})}},4351:(jn,Dt,H)=>{H.d(Dt,{b:()=>ge});var g=H(5577),Z=H(576);function ge(le,Ye){return(0,Z.m)(Ye)?(0,g.z)(le,Ye,1):(0,g.z)(le,1)}},6590:(jn,Dt,H)=>{H.d(Dt,{d:()=>ge});var g=H(4482),Z=H(5403);function ge(le){return(0,g.e)((Ye,Xe)=>{let gt=!1;Ye.subscribe((0,Z.x)(Xe,Qe=>{gt=!0,Xe.next(Qe)},()=>{gt||Xe.next(le),Xe.complete()}))})}},9300:(jn,Dt,H)=>{H.d(Dt,{h:()=>ge});var g=H(4482),Z=H(5403);function ge(le,Ye){return(0,g.e)((Xe,gt)=>{let Qe=0;Xe.subscribe((0,Z.x)(gt,ft=>le.call(Ye,ft,Qe++)&&gt.next(ft)))})}},590:(jn,Dt,H)=>{H.d(Dt,{P:()=>gt});var g=H(6805),Z=H(9300),ge=H(5698),le=H(6590),Ye=H(8068),Xe=H(4671);function gt(Qe,ft){const Pe=arguments.length>=2;return Me=>Me.pipe(Qe?(0,Z.h)((Et,pn)=>Qe(Et,pn,Me)):Xe.y,(0,ge.q)(1),Pe?(0,le.d)(ft):(0,Ye.T)(()=>new g.K))}},4004:(jn,Dt,H)=>{H.d(Dt,{U:()=>ge});var g=H(4482),Z=H(5403);function ge(le,Ye){return(0,g.e)((Xe,gt)=>{let Qe=0;Xe.subscribe((0,Z.x)(gt,ft=>{gt.next(le.call(Ye,ft,Qe++))}))})}},8189:(jn,Dt,H)=>{H.d(Dt,{J:()=>ge});var g=H(5577),Z=H(4671);function ge(le=1/0){return(0,g.z)(Z.y,le)}},5577:(jn,Dt,H)=>{H.d(Dt,{z:()=>Qe});var g=H(4004),Z=H(8421),ge=H(4482),le=H(9672),Ye=H(5403),gt=H(576);function Qe(ft,Pe,Me=1/0){return(0,gt.m)(Pe)?Qe((Et,pn)=>(0,g.U)((vt,nn)=>Pe(Et,vt,pn,nn))((0,Z.Xf)(ft(Et,pn))),Me):("number"==typeof Pe&&(Me=Pe),(0,ge.e)((Et,pn)=>function Xe(ft,Pe,Me,Et,pn,vt,nn,bn){const Pt=[];let Jt=0,Ln=0,un=!1;const xe=()=>{un&&!Pt.length&&!Jt&&Pe.complete()},Ne=Kt=>Jt<Et?ot(Kt):Pt.push(Kt),ot=Kt=>{vt&&Pe.next(Kt),Jt++;let Ut=!1;(0,Z.Xf)(Me(Kt,Ln++)).subscribe((0,Ye.x)(Pe,Fe=>{null==pn||pn(Fe),vt?Ne(Fe):Pe.next(Fe)},()=>{Ut=!0},void 0,()=>{if(Ut)try{for(Jt--;Pt.length&&Jt<Et;){const Fe=Pt.shift();nn?(0,le.f)(Pe,nn,()=>ot(Fe)):ot(Fe)}xe()}catch(Fe){Pe.error(Fe)}}))};return ft.subscribe((0,Ye.x)(Pe,Ne,()=>{un=!0,xe()})),()=>{null==bn||bn()}}(Et,pn,ft,Me)))}},5363:(jn,Dt,H)=>{H.d(Dt,{Q:()=>le});var g=H(9672),Z=H(4482),ge=H(5403);function le(Ye,Xe=0){return(0,Z.e)((gt,Qe)=>{gt.subscribe((0,ge.x)(Qe,ft=>(0,g.f)(Qe,Ye,()=>Qe.next(ft),Xe),()=>(0,g.f)(Qe,Ye,()=>Qe.complete(),Xe),ft=>(0,g.f)(Qe,Ye,()=>Qe.error(ft),Xe)))})}},5026:(jn,Dt,H)=>{H.d(Dt,{R:()=>le});var g=H(4482),Z=H(5403);function ge(Ye,Xe,gt,Qe,ft){return(Pe,Me)=>{let Et=gt,pn=Xe,vt=0;Pe.subscribe((0,Z.x)(Me,nn=>{const bn=vt++;pn=Et?Ye(pn,nn,bn):(Et=!0,nn),Qe&&Me.next(pn)},ft&&(()=>{Et&&Me.next(pn),Me.complete()})))}}function le(Ye,Xe){return(0,g.e)(ge(Ye,Xe,arguments.length>=2,!0))}},3099:(jn,Dt,H)=>{H.d(Dt,{B:()=>Ye});var g=H(8421),Z=H(7579),ge=H(2961),le=H(4482);function Ye(gt={}){const{connector:Qe=(()=>new Z.x),resetOnError:ft=!0,resetOnComplete:Pe=!0,resetOnRefCountZero:Me=!0}=gt;return Et=>{let pn,vt,nn,bn=0,Pt=!1,Jt=!1;const Ln=()=>{null==vt||vt.unsubscribe(),vt=void 0},un=()=>{Ln(),pn=nn=void 0,Pt=Jt=!1},xe=()=>{const Ne=pn;un(),null==Ne||Ne.unsubscribe()};return(0,le.e)((Ne,ot)=>{bn++,!Jt&&!Pt&&Ln();const Kt=nn=null!=nn?nn:Qe();ot.add(()=>{bn--,0===bn&&!Jt&&!Pt&&(vt=Xe(xe,Me))}),Kt.subscribe(ot),!pn&&bn>0&&(pn=new ge.Hp({next:Ut=>Kt.next(Ut),error:Ut=>{Jt=!0,Ln(),vt=Xe(un,ft,Ut),Kt.error(Ut)},complete:()=>{Pt=!0,Ln(),vt=Xe(un,Pe),Kt.complete()}}),(0,g.Xf)(Ne).subscribe(pn))})(Et)}}function Xe(gt,Qe,...ft){if(!0===Qe)return void gt();if(!1===Qe)return;const Pe=new ge.Hp({next:()=>{Pe.unsubscribe(),gt()}});return Qe(...ft).subscribe(Pe)}},8675:(jn,Dt,H)=>{H.d(Dt,{O:()=>le});var g=H(7272),Z=H(7669),ge=H(4482);function le(...Ye){const Xe=(0,Z.yG)(Ye);return(0,ge.e)((gt,Qe)=>{(Xe?(0,g.z)(Ye,gt,Xe):(0,g.z)(Ye,gt)).subscribe(Qe)})}},9468:(jn,Dt,H)=>{H.d(Dt,{R:()=>Z});var g=H(4482);function Z(ge,le=0){return(0,g.e)((Ye,Xe)=>{Xe.add(ge.schedule(()=>Ye.subscribe(Xe),le))})}},3900:(jn,Dt,H)=>{H.d(Dt,{w:()=>le});var g=H(8421),Z=H(4482),ge=H(5403);function le(Ye,Xe){return(0,Z.e)((gt,Qe)=>{let ft=null,Pe=0,Me=!1;const Et=()=>Me&&!ft&&Qe.complete();gt.subscribe((0,ge.x)(Qe,pn=>{null==ft||ft.unsubscribe();let vt=0;const nn=Pe++;(0,g.Xf)(Ye(pn,nn)).subscribe(ft=(0,ge.x)(Qe,bn=>Qe.next(Xe?Xe(pn,bn,nn,vt++):bn),()=>{ft=null,Et()}))},()=>{Me=!0,Et()}))})}},5698:(jn,Dt,H)=>{H.d(Dt,{q:()=>le});var g=H(515),Z=H(4482),ge=H(5403);function le(Ye){return Ye<=0?()=>g.E:(0,Z.e)((Xe,gt)=>{let Qe=0;Xe.subscribe((0,ge.x)(gt,ft=>{++Qe<=Ye&&(gt.next(ft),Ye<=Qe&&gt.complete())}))})}},8505:(jn,Dt,H)=>{H.d(Dt,{b:()=>Ye});var g=H(576),Z=H(4482),ge=H(5403),le=H(4671);function Ye(Xe,gt,Qe){const ft=(0,g.m)(Xe)||gt||Qe?{next:Xe,error:gt,complete:Qe}:Xe;return ft?(0,Z.e)((Pe,Me)=>{var Et;null===(Et=ft.subscribe)||void 0===Et||Et.call(ft);let pn=!0;Pe.subscribe((0,ge.x)(Me,vt=>{var nn;null===(nn=ft.next)||void 0===nn||nn.call(ft,vt),Me.next(vt)},()=>{var vt;pn=!1,null===(vt=ft.complete)||void 0===vt||vt.call(ft),Me.complete()},vt=>{var nn;pn=!1,null===(nn=ft.error)||void 0===nn||nn.call(ft,vt),Me.error(vt)},()=>{var vt,nn;pn&&(null===(vt=ft.unsubscribe)||void 0===vt||vt.call(ft)),null===(nn=ft.finalize)||void 0===nn||nn.call(ft)}))}):le.y}},8068:(jn,Dt,H)=>{H.d(Dt,{T:()=>le});var g=H(6805),Z=H(4482),ge=H(5403);function le(Xe=Ye){return(0,Z.e)((gt,Qe)=>{let ft=!1;gt.subscribe((0,ge.x)(Qe,Pe=>{ft=!0,Qe.next(Pe)},()=>ft?Qe.complete():Qe.error(Xe())))})}function Ye(){return new g.K}},4408:(jn,Dt,H)=>{H.d(Dt,{o:()=>Ye});var g=H(727);class Z extends g.w0{constructor(gt,Qe){super()}schedule(gt,Qe=0){return this}}const ge={setInterval(Xe,gt,...Qe){const{delegate:ft}=ge;return(null==ft?void 0:ft.setInterval)?ft.setInterval(Xe,gt,...Qe):setInterval(Xe,gt,...Qe)},clearInterval(Xe){const{delegate:gt}=ge;return((null==gt?void 0:gt.clearInterval)||clearInterval)(Xe)},delegate:void 0};var le=H(8737);class Ye extends Z{constructor(gt,Qe){super(gt,Qe),this.scheduler=gt,this.work=Qe,this.pending=!1}schedule(gt,Qe=0){var ft;if(this.closed)return this;this.state=gt;const Pe=this.id,Me=this.scheduler;return null!=Pe&&(this.id=this.recycleAsyncId(Me,Pe,Qe)),this.pending=!0,this.delay=Qe,this.id=null!==(ft=this.id)&&void 0!==ft?ft:this.requestAsyncId(Me,this.id,Qe),this}requestAsyncId(gt,Qe,ft=0){return ge.setInterval(gt.flush.bind(gt,this),ft)}recycleAsyncId(gt,Qe,ft=0){if(null!=ft&&this.delay===ft&&!1===this.pending)return Qe;null!=Qe&&ge.clearInterval(Qe)}execute(gt,Qe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ft=this._execute(gt,Qe);if(ft)return ft;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(gt,Qe){let Pe,ft=!1;try{this.work(gt)}catch(Me){ft=!0,Pe=Me||new Error("Scheduled action threw falsy error")}if(ft)return this.unsubscribe(),Pe}unsubscribe(){if(!this.closed){const{id:gt,scheduler:Qe}=this,{actions:ft}=Qe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(ft,this),null!=gt&&(this.id=this.recycleAsyncId(Qe,gt,null)),this.delay=null,super.unsubscribe()}}}},7565:(jn,Dt,H)=>{H.d(Dt,{v:()=>ge});var g=H(6063);class Z{constructor(Ye,Xe=Z.now){this.schedulerActionCtor=Ye,this.now=Xe}schedule(Ye,Xe=0,gt){return new this.schedulerActionCtor(this,Ye).schedule(gt,Xe)}}Z.now=g.l.now;class ge extends Z{constructor(Ye,Xe=Z.now){super(Ye,Xe),this.actions=[],this._active=!1}flush(Ye){const{actions:Xe}=this;if(this._active)return void Xe.push(Ye);let gt;this._active=!0;do{if(gt=Ye.execute(Ye.state,Ye.delay))break}while(Ye=Xe.shift());if(this._active=!1,gt){for(;Ye=Xe.shift();)Ye.unsubscribe();throw gt}}}},4986:(jn,Dt,H)=>{H.d(Dt,{z:()=>ge});var g=H(4408);const ge=new(H(7565).v)(g.o)},6063:(jn,Dt,H)=>{H.d(Dt,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(jn,Dt,H)=>{H.d(Dt,{z:()=>g});const g={setTimeout(Z,ge,...le){const{delegate:Ye}=g;return(null==Ye?void 0:Ye.setTimeout)?Ye.setTimeout(Z,ge,...le):setTimeout(Z,ge,...le)},clearTimeout(Z){const{delegate:ge}=g;return((null==ge?void 0:ge.clearTimeout)||clearTimeout)(Z)},delegate:void 0}},2202:(jn,Dt,H)=>{H.d(Dt,{h:()=>Z});const Z=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(jn,Dt,H)=>{H.d(Dt,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(jn,Dt,H)=>{H.d(Dt,{K:()=>Z});const Z=(0,H(3888).d)(ge=>function(){ge(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(jn,Dt,H)=>{H.d(Dt,{_6:()=>Xe,jO:()=>le,yG:()=>Ye});var g=H(576);function ge(gt){return gt[gt.length-1]}function le(gt){return(0,g.m)(ge(gt))?gt.pop():void 0}function Ye(gt){return function Z(gt){return gt&&(0,g.m)(gt.schedule)}(ge(gt))?gt.pop():void 0}function Xe(gt,Qe){return"number"==typeof ge(gt)?gt.pop():Qe}},4742:(jn,Dt,H)=>{H.d(Dt,{D:()=>Ye});const{isArray:g}=Array,{getPrototypeOf:Z,prototype:ge,keys:le}=Object;function Ye(gt){if(1===gt.length){const Qe=gt[0];if(g(Qe))return{args:Qe,keys:null};if(function Xe(gt){return gt&&"object"==typeof gt&&Z(gt)===ge}(Qe)){const ft=le(Qe);return{args:ft.map(Pe=>Qe[Pe]),keys:ft}}}return{args:gt,keys:null}}},8737:(jn,Dt,H)=>{function g(Z,ge){if(Z){const le=Z.indexOf(ge);0<=le&&Z.splice(le,1)}}H.d(Dt,{P:()=>g})},3888:(jn,Dt,H)=>{function g(Z){const le=Z(Ye=>{Error.call(Ye),Ye.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}H.d(Dt,{d:()=>g})},1810:(jn,Dt,H)=>{function g(Z,ge){return Z.reduce((le,Ye,Xe)=>(le[Ye]=ge[Xe],le),{})}H.d(Dt,{n:()=>g})},2806:(jn,Dt,H)=>{H.d(Dt,{O:()=>le,x:()=>ge});var g=H(2416);let Z=null;function ge(Ye){if(g.v.useDeprecatedSynchronousErrorHandling){const Xe=!Z;if(Xe&&(Z={errorThrown:!1,error:null}),Ye(),Xe){const{errorThrown:gt,error:Qe}=Z;if(Z=null,gt)throw Qe}}else Ye()}function le(Ye){g.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=Ye)}},9672:(jn,Dt,H)=>{function g(Z,ge,le,Ye=0,Xe=!1){const gt=ge.schedule(function(){le(),Xe?Z.add(this.schedule(null,Ye)):this.unsubscribe()},Ye);if(Z.add(gt),!Xe)return gt}H.d(Dt,{f:()=>g})},4671:(jn,Dt,H)=>{function g(Z){return Z}H.d(Dt,{y:()=>g})},1144:(jn,Dt,H)=>{H.d(Dt,{z:()=>g});const g=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(jn,Dt,H)=>{H.d(Dt,{D:()=>Z});var g=H(576);function Z(ge){return Symbol.asyncIterator&&(0,g.m)(null==ge?void 0:ge[Symbol.asyncIterator])}},576:(jn,Dt,H)=>{function g(Z){return"function"==typeof Z}H.d(Dt,{m:()=>g})},3670:(jn,Dt,H)=>{H.d(Dt,{c:()=>ge});var g=H(8822),Z=H(576);function ge(le){return(0,Z.m)(le[g.L])}},6495:(jn,Dt,H)=>{H.d(Dt,{T:()=>ge});var g=H(2202),Z=H(576);function ge(le){return(0,Z.m)(null==le?void 0:le[g.h])}},8239:(jn,Dt,H)=>{H.d(Dt,{t:()=>Z});var g=H(576);function Z(ge){return(0,g.m)(null==ge?void 0:ge.then)}},3260:(jn,Dt,H)=>{H.d(Dt,{L:()=>le,Q:()=>ge});var g=H(655),Z=H(576);function ge(Ye){return(0,g.FC)(this,arguments,function*(){const gt=Ye.getReader();try{for(;;){const{value:Qe,done:ft}=yield(0,g.qq)(gt.read());if(ft)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Qe)}}finally{gt.releaseLock()}})}function le(Ye){return(0,Z.m)(null==Ye?void 0:Ye.getReader)}},4482:(jn,Dt,H)=>{H.d(Dt,{A:()=>Z,e:()=>ge});var g=H(576);function Z(le){return(0,g.m)(null==le?void 0:le.lift)}function ge(le){return Ye=>{if(Z(Ye))return Ye.lift(function(Xe){try{return le(Xe,this)}catch(gt){this.error(gt)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(jn,Dt,H)=>{H.d(Dt,{Z:()=>le});var g=H(4004);const{isArray:Z}=Array;function le(Ye){return(0,g.U)(Xe=>function ge(Ye,Xe){return Z(Xe)?Ye(...Xe):Ye(Xe)}(Ye,Xe))}},7849:(jn,Dt,H)=>{H.d(Dt,{h:()=>ge});var g=H(2416),Z=H(3410);function ge(le){Z.z.setTimeout(()=>{const{onUnhandledError:Ye}=g.v;if(!Ye)throw le;Ye(le)})}},4532:(jn,Dt,H)=>{function g(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(Dt,{z:()=>g})},655:(jn,Dt,H)=>{function le(Oe,Tt){var et={};for(var Nt in Oe)Object.prototype.hasOwnProperty.call(Oe,Nt)&&Tt.indexOf(Nt)<0&&(et[Nt]=Oe[Nt]);if(null!=Oe&&"function"==typeof Object.getOwnPropertySymbols){var At=0;for(Nt=Object.getOwnPropertySymbols(Oe);At<Nt.length;At++)Tt.indexOf(Nt[At])<0&&Object.prototype.propertyIsEnumerable.call(Oe,Nt[At])&&(et[Nt[At]]=Oe[Nt[At]])}return et}function Qe(Oe,Tt,et,Nt){return new(et||(et=Promise))(function(on,wn){function Xn(gr){try{fn(Nt.next(gr))}catch(lr){wn(lr)}}function Jn(gr){try{fn(Nt.throw(gr))}catch(lr){wn(lr)}}function fn(gr){gr.done?on(gr.value):function At(on){return on instanceof et?on:new et(function(wn){wn(on)})}(gr.value).then(Xn,Jn)}fn((Nt=Nt.apply(Oe,Tt||[])).next())})}function Pt(Oe){return this instanceof Pt?(this.v=Oe,this):new Pt(Oe)}function Jt(Oe,Tt,et){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var At,Nt=et.apply(Oe,Tt||[]),on=[];return At={},wn("next"),wn("throw"),wn("return"),At[Symbol.asyncIterator]=function(){return this},At;function wn(Ft){Nt[Ft]&&(At[Ft]=function(Ot){return new Promise(function(st,It){on.push([Ft,Ot,st,It])>1||Xn(Ft,Ot)})})}function Xn(Ft,Ot){try{!function Jn(Ft){Ft.value instanceof Pt?Promise.resolve(Ft.value.v).then(fn,gr):lr(on[0][2],Ft)}(Nt[Ft](Ot))}catch(st){lr(on[0][3],st)}}function fn(Ft){Xn("next",Ft)}function gr(Ft){Xn("throw",Ft)}function lr(Ft,Ot){Ft(Ot),on.shift(),on.length&&Xn(on[0][0],on[0][1])}}function un(Oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,Tt=Oe[Symbol.asyncIterator];return Tt?Tt.call(Oe):(Oe=function Et(Oe){var Tt="function"==typeof Symbol&&Symbol.iterator,et=Tt&&Oe[Tt],Nt=0;if(et)return et.call(Oe);if(Oe&&"number"==typeof Oe.length)return{next:function(){return Oe&&Nt>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[Nt++],done:!Oe}}};throw new TypeError(Tt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Oe),et={},Nt("next"),Nt("throw"),Nt("return"),et[Symbol.asyncIterator]=function(){return this},et);function Nt(on){et[on]=Oe[on]&&function(wn){return new Promise(function(Xn,Jn){!function At(on,wn,Xn,Jn){Promise.resolve(Jn).then(function(fn){on({value:fn,done:Xn})},wn)}(Xn,Jn,(wn=Oe[on](wn)).done,wn.value)})}}}H.d(Dt,{FC:()=>Jt,KL:()=>un,_T:()=>le,mG:()=>Qe,qq:()=>Pt})},1777:(jn,Dt,H)=>{H.d(Dt,{LC:()=>Z,SB:()=>ft,X$:()=>le,ZE:()=>Ln,ZN:()=>Jt,_j:()=>g,eR:()=>Me,jt:()=>Ye,k1:()=>un,l3:()=>ge,oB:()=>Qe,vP:()=>gt});class g{}class Z{}const ge="*";function le(xe,Ne){return{type:7,name:xe,definitions:Ne,options:{}}}function Ye(xe,Ne=null){return{type:4,styles:Ne,timings:xe}}function gt(xe,Ne=null){return{type:2,steps:xe,options:Ne}}function Qe(xe){return{type:6,styles:xe,offset:null}}function ft(xe,Ne,ot){return{type:0,name:xe,styles:Ne,options:ot}}function Me(xe,Ne,ot=null){return{type:1,expr:xe,animation:Ne,options:ot}}function Pt(xe){Promise.resolve(null).then(xe)}class Jt{constructor(Ne=0,ot=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ne+ot}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ne=>Ne()),this._onDoneFns=[])}onStart(Ne){this._onStartFns.push(Ne)}onDone(Ne){this._onDoneFns.push(Ne)}onDestroy(Ne){this._onDestroyFns.push(Ne)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Pt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ne=>Ne()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ne=>Ne()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Ne){this._position=this.totalTime?Ne*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ne){const ot="start"==Ne?this._onStartFns:this._onDoneFns;ot.forEach(Kt=>Kt()),ot.length=0}}class Ln{constructor(Ne){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ne;let ot=0,Kt=0,Ut=0;const Fe=this.players.length;0==Fe?Pt(()=>this._onFinish()):this.players.forEach(Lt=>{Lt.onDone(()=>{++ot==Fe&&this._onFinish()}),Lt.onDestroy(()=>{++Kt==Fe&&this._onDestroy()}),Lt.onStart(()=>{++Ut==Fe&&this._onStart()})}),this.totalTime=this.players.reduce((Lt,Oe)=>Math.max(Lt,Oe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ne=>Ne()),this._onDoneFns=[])}init(){this.players.forEach(Ne=>Ne.init())}onStart(Ne){this._onStartFns.push(Ne)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ne=>Ne()),this._onStartFns=[])}onDone(Ne){this._onDoneFns.push(Ne)}onDestroy(Ne){this._onDestroyFns.push(Ne)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ne=>Ne.play())}pause(){this.players.forEach(Ne=>Ne.pause())}restart(){this.players.forEach(Ne=>Ne.restart())}finish(){this._onFinish(),this.players.forEach(Ne=>Ne.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ne=>Ne.destroy()),this._onDestroyFns.forEach(Ne=>Ne()),this._onDestroyFns=[])}reset(){this.players.forEach(Ne=>Ne.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ne){const ot=Ne*this.totalTime;this.players.forEach(Kt=>{const Ut=Kt.totalTime?Math.min(1,ot/Kt.totalTime):1;Kt.setPosition(Ut)})}getPosition(){const Ne=this.players.reduce((ot,Kt)=>null===ot||Kt.totalTime>ot.totalTime?Kt:ot,null);return null!=Ne?Ne.getPosition():0}beforeDestroy(){this.players.forEach(Ne=>{Ne.beforeDestroy&&Ne.beforeDestroy()})}triggerCallback(Ne){const ot="start"==Ne?this._onStartFns:this._onDoneFns;ot.forEach(Kt=>Kt()),ot.length=0}}const un="!"},9808:(jn,Dt,H)=>{H.d(Dt,{Do:()=>xe,ED:()=>Wr,EM:()=>ao,HT:()=>Ye,JF:()=>_i,K0:()=>gt,Mx:()=>Is,NF:()=>ms,O5:()=>zr,Ov:()=>gn,PC:()=>Di,PM:()=>ho,RF:()=>cs,S$:()=>Pt,V_:()=>Pe,Ye:()=>Ne,b0:()=>un,bD:()=>Ws,ez:()=>qs,lw:()=>Qe,mk:()=>Ss,mr:()=>Ln,n9:()=>Yr,q:()=>ge,sg:()=>mr,tP:()=>ko,uU:()=>ds,w_:()=>Xe});var g=H(5e3);let Z=null;function ge(){return Z}function Ye(U){Z||(Z=U)}class Xe{}const gt=new g.OlP("DocumentToken");let Qe=(()=>{class U{historyGo(q){throw new Error("Not implemented")}}return U.\u0275fac=function(q){return new(q||U)},U.\u0275prov=g.Yz7({token:U,factory:function(){return function ft(){return(0,g.LFG)(Me)}()},providedIn:"platform"}),U})();const Pe=new g.OlP("Location Initialized");let Me=(()=>{class U extends Qe{constructor(q){super(),this._doc=q,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ge().getBaseHref(this._doc)}onPopState(q){const ve=ge().getGlobalEventTarget(this._doc,"window");return ve.addEventListener("popstate",q,!1),()=>ve.removeEventListener("popstate",q)}onHashChange(q){const ve=ge().getGlobalEventTarget(this._doc,"window");return ve.addEventListener("hashchange",q,!1),()=>ve.removeEventListener("hashchange",q)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(q){this.location.pathname=q}pushState(q,ve,ze){Et()?this._history.pushState(q,ve,ze):this.location.hash=ze}replaceState(q,ve,ze){Et()?this._history.replaceState(q,ve,ze):this.location.hash=ze}forward(){this._history.forward()}back(){this._history.back()}historyGo(q=0){this._history.go(q)}getState(){return this._history.state}}return U.\u0275fac=function(q){return new(q||U)(g.LFG(gt))},U.\u0275prov=g.Yz7({token:U,factory:function(){return function pn(){return new Me((0,g.LFG)(gt))}()},providedIn:"platform"}),U})();function Et(){return!!window.history.pushState}function vt(U,pe){if(0==U.length)return pe;if(0==pe.length)return U;let q=0;return U.endsWith("/")&&q++,pe.startsWith("/")&&q++,2==q?U+pe.substring(1):1==q?U+pe:U+"/"+pe}function nn(U){const pe=U.match(/#|\?|$/),q=pe&&pe.index||U.length;return U.slice(0,q-("/"===U[q-1]?1:0))+U.slice(q)}function bn(U){return U&&"?"!==U[0]?"?"+U:U}let Pt=(()=>{class U{historyGo(q){throw new Error("Not implemented")}}return U.\u0275fac=function(q){return new(q||U)},U.\u0275prov=g.Yz7({token:U,factory:function(){return function Jt(U){const pe=(0,g.LFG)(gt).location;return new un((0,g.LFG)(Qe),pe&&pe.origin||"")}()},providedIn:"root"}),U})();const Ln=new g.OlP("appBaseHref");let un=(()=>{class U extends Pt{constructor(q,ve){if(super(),this._platformLocation=q,this._removeListenerFns=[],null==ve&&(ve=this._platformLocation.getBaseHrefFromDOM()),null==ve)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ve}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}prepareExternalUrl(q){return vt(this._baseHref,q)}path(q=!1){const ve=this._platformLocation.pathname+bn(this._platformLocation.search),ze=this._platformLocation.hash;return ze&&q?`${ve}${ze}`:ve}pushState(q,ve,ze,en){const Cn=this.prepareExternalUrl(ze+bn(en));this._platformLocation.pushState(q,ve,Cn)}replaceState(q,ve,ze,en){const Cn=this.prepareExternalUrl(ze+bn(en));this._platformLocation.replaceState(q,ve,Cn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(q=0){var ve,ze;null===(ze=(ve=this._platformLocation).historyGo)||void 0===ze||ze.call(ve,q)}}return U.\u0275fac=function(q){return new(q||U)(g.LFG(Qe),g.LFG(Ln,8))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})(),xe=(()=>{class U extends Pt{constructor(q,ve){super(),this._platformLocation=q,this._baseHref="",this._removeListenerFns=[],null!=ve&&(this._baseHref=ve)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}path(q=!1){let ve=this._platformLocation.hash;return null==ve&&(ve="#"),ve.length>0?ve.substring(1):ve}prepareExternalUrl(q){const ve=vt(this._baseHref,q);return ve.length>0?"#"+ve:ve}pushState(q,ve,ze,en){let Cn=this.prepareExternalUrl(ze+bn(en));0==Cn.length&&(Cn=this._platformLocation.pathname),this._platformLocation.pushState(q,ve,Cn)}replaceState(q,ve,ze,en){let Cn=this.prepareExternalUrl(ze+bn(en));0==Cn.length&&(Cn=this._platformLocation.pathname),this._platformLocation.replaceState(q,ve,Cn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(q=0){var ve,ze;null===(ze=(ve=this._platformLocation).historyGo)||void 0===ze||ze.call(ve,q)}}return U.\u0275fac=function(q){return new(q||U)(g.LFG(Qe),g.LFG(Ln,8))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})(),Ne=(()=>{class U{constructor(q,ve){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=q;const ze=this._platformStrategy.getBaseHref();this._platformLocation=ve,this._baseHref=nn(Ut(ze)),this._platformStrategy.onPopState(en=>{this._subject.emit({url:this.path(!0),pop:!0,state:en.state,type:en.type})})}path(q=!1){return this.normalize(this._platformStrategy.path(q))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(q,ve=""){return this.path()==this.normalize(q+bn(ve))}normalize(q){return U.stripTrailingSlash(function Kt(U,pe){return U&&pe.startsWith(U)?pe.substring(U.length):pe}(this._baseHref,Ut(q)))}prepareExternalUrl(q){return q&&"/"!==q[0]&&(q="/"+q),this._platformStrategy.prepareExternalUrl(q)}go(q,ve="",ze=null){this._platformStrategy.pushState(ze,"",q,ve),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+bn(ve)),ze)}replaceState(q,ve="",ze=null){this._platformStrategy.replaceState(ze,"",q,ve),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+bn(ve)),ze)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(q=0){var ve,ze;null===(ze=(ve=this._platformStrategy).historyGo)||void 0===ze||ze.call(ve,q)}onUrlChange(q){this._urlChangeListeners.push(q),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ve=>{this._notifyUrlChangeListeners(ve.url,ve.state)}))}_notifyUrlChangeListeners(q="",ve){this._urlChangeListeners.forEach(ze=>ze(q,ve))}subscribe(q,ve,ze){return this._subject.subscribe({next:q,error:ve,complete:ze})}}return U.normalizeQueryParams=bn,U.joinWithSlash=vt,U.stripTrailingSlash=nn,U.\u0275fac=function(q){return new(q||U)(g.LFG(Pt),g.LFG(Qe))},U.\u0275prov=g.Yz7({token:U,factory:function(){return function ot(){return new Ne((0,g.LFG)(Pt),(0,g.LFG)(Qe))}()},providedIn:"root"}),U})();function Ut(U){return U.replace(/\/index.html$/,"")}var Tt=(()=>((Tt=Tt||{})[Tt.Format=0]="Format",Tt[Tt.Standalone=1]="Standalone",Tt))(),et=(()=>((et=et||{})[et.Narrow=0]="Narrow",et[et.Abbreviated=1]="Abbreviated",et[et.Wide=2]="Wide",et[et.Short=3]="Short",et))(),Nt=(()=>((Nt=Nt||{})[Nt.Short=0]="Short",Nt[Nt.Medium=1]="Medium",Nt[Nt.Long=2]="Long",Nt[Nt.Full=3]="Full",Nt))(),At=(()=>((At=At||{})[At.Decimal=0]="Decimal",At[At.Group=1]="Group",At[At.List=2]="List",At[At.PercentSign=3]="PercentSign",At[At.PlusSign=4]="PlusSign",At[At.MinusSign=5]="MinusSign",At[At.Exponential=6]="Exponential",At[At.SuperscriptingExponent=7]="SuperscriptingExponent",At[At.PerMille=8]="PerMille",At[At.Infinity=9]="Infinity",At[At.NaN=10]="NaN",At[At.TimeSeparator=11]="TimeSeparator",At[At.CurrencyDecimal=12]="CurrencyDecimal",At[At.CurrencyGroup=13]="CurrencyGroup",At))();function Ot(U,pe){return Tr((0,g.cg1)(U)[g.wAp.DateFormat],pe)}function st(U,pe){return Tr((0,g.cg1)(U)[g.wAp.TimeFormat],pe)}function It(U,pe){return Tr((0,g.cg1)(U)[g.wAp.DateTimeFormat],pe)}function ut(U,pe){const q=(0,g.cg1)(U),ve=q[g.wAp.NumberSymbols][pe];if(void 0===ve){if(pe===At.CurrencyDecimal)return q[g.wAp.NumberSymbols][At.Decimal];if(pe===At.CurrencyGroup)return q[g.wAp.NumberSymbols][At.Group]}return ve}function Zr(U){if(!U[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${U[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Tr(U,pe){for(let q=pe;q>-1;q--)if(void 0!==U[q])return U[q];throw new Error("Locale data API: locale data undefined")}function wr(U){const[pe,q]=U.split(":");return{hours:+pe,minutes:+q}}const it=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ct={},Bt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Gt=(()=>((Gt=Gt||{})[Gt.Short=0]="Short",Gt[Gt.ShortGMT=1]="ShortGMT",Gt[Gt.Long=2]="Long",Gt[Gt.Extended=3]="Extended",Gt))(),yn=(()=>((yn=yn||{})[yn.FullYear=0]="FullYear",yn[yn.Month=1]="Month",yn[yn.Date=2]="Date",yn[yn.Hours=3]="Hours",yn[yn.Minutes=4]="Minutes",yn[yn.Seconds=5]="Seconds",yn[yn.FractionalSeconds=6]="FractionalSeconds",yn[yn.Day=7]="Day",yn))(),Bn=(()=>((Bn=Bn||{})[Bn.DayPeriods=0]="DayPeriods",Bn[Bn.Days=1]="Days",Bn[Bn.Months=2]="Months",Bn[Bn.Eras=3]="Eras",Bn))();function qr(U,pe,q,ve){let ze=function Re(U){if(pt(U))return U;if("number"==typeof U&&!isNaN(U))return new Date(U);if("string"==typeof U){if(U=U.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(U)){const[ze,en=1,Cn=1]=U.split("-").map(or=>+or);return Or(ze,en-1,Cn)}const q=parseFloat(U);if(!isNaN(U-q))return new Date(q);let ve;if(ve=U.match(it))return function De(U){const pe=new Date(0);let q=0,ve=0;const ze=U[8]?pe.setUTCFullYear:pe.setFullYear,en=U[8]?pe.setUTCHours:pe.setHours;U[9]&&(q=Number(U[9]+U[10]),ve=Number(U[9]+U[11])),ze.call(pe,Number(U[1]),Number(U[2])-1,Number(U[3]));const Cn=Number(U[4]||0)-q,or=Number(U[5]||0)-ve,Br=Number(U[6]||0),Xr=Math.floor(1e3*parseFloat("0."+(U[7]||0)));return en.call(pe,Cn,or,Br,Xr),pe}(ve)}const pe=new Date(U);if(!pt(pe))throw new Error(`Unable to convert "${U}" into a date`);return pe}(U);pe=dr(q,pe)||pe;let or,Cn=[];for(;pe;){if(or=Bt.exec(pe),!or){Cn.push(pe);break}{Cn=Cn.concat(or.slice(1));const ni=Cn.pop();if(!ni)break;pe=ni}}let Br=ze.getTimezoneOffset();ve&&(Br=rn(ve,Br),ze=function Ge(U,pe,q){const ve=q?-1:1,ze=U.getTimezoneOffset();return function kt(U,pe){return(U=new Date(U.getTime())).setMinutes(U.getMinutes()+pe),U}(U,ve*(rn(pe,ze)-ze))}(ze,ve,!0));let Xr="";return Cn.forEach(ni=>{const $r=function ht(U){if($e[U])return $e[U];let pe;switch(U){case"G":case"GG":case"GGG":pe=Vr(Bn.Eras,et.Abbreviated);break;case"GGGG":pe=Vr(Bn.Eras,et.Wide);break;case"GGGGG":pe=Vr(Bn.Eras,et.Narrow);break;case"y":pe=Fn(yn.FullYear,1,0,!1,!0);break;case"yy":pe=Fn(yn.FullYear,2,0,!0,!0);break;case"yyy":pe=Fn(yn.FullYear,3,0,!1,!0);break;case"yyyy":pe=Fn(yn.FullYear,4,0,!1,!0);break;case"Y":pe=tt(1);break;case"YY":pe=tt(2,!0);break;case"YYY":pe=tt(3);break;case"YYYY":pe=tt(4);break;case"M":case"L":pe=Fn(yn.Month,1,1);break;case"MM":case"LL":pe=Fn(yn.Month,2,1);break;case"MMM":pe=Vr(Bn.Months,et.Abbreviated);break;case"MMMM":pe=Vr(Bn.Months,et.Wide);break;case"MMMMM":pe=Vr(Bn.Months,et.Narrow);break;case"LLL":pe=Vr(Bn.Months,et.Abbreviated,Tt.Standalone);break;case"LLLL":pe=Vr(Bn.Months,et.Wide,Tt.Standalone);break;case"LLLLL":pe=Vr(Bn.Months,et.Narrow,Tt.Standalone);break;case"w":pe=Nr(1);break;case"ww":pe=Nr(2);break;case"W":pe=Nr(1,!0);break;case"d":pe=Fn(yn.Date,1);break;case"dd":pe=Fn(yn.Date,2);break;case"c":case"cc":pe=Fn(yn.Day,1);break;case"ccc":pe=Vr(Bn.Days,et.Abbreviated,Tt.Standalone);break;case"cccc":pe=Vr(Bn.Days,et.Wide,Tt.Standalone);break;case"ccccc":pe=Vr(Bn.Days,et.Narrow,Tt.Standalone);break;case"cccccc":pe=Vr(Bn.Days,et.Short,Tt.Standalone);break;case"E":case"EE":case"EEE":pe=Vr(Bn.Days,et.Abbreviated);break;case"EEEE":pe=Vr(Bn.Days,et.Wide);break;case"EEEEE":pe=Vr(Bn.Days,et.Narrow);break;case"EEEEEE":pe=Vr(Bn.Days,et.Short);break;case"a":case"aa":case"aaa":pe=Vr(Bn.DayPeriods,et.Abbreviated);break;case"aaaa":pe=Vr(Bn.DayPeriods,et.Wide);break;case"aaaaa":pe=Vr(Bn.DayPeriods,et.Narrow);break;case"b":case"bb":case"bbb":pe=Vr(Bn.DayPeriods,et.Abbreviated,Tt.Standalone,!0);break;case"bbbb":pe=Vr(Bn.DayPeriods,et.Wide,Tt.Standalone,!0);break;case"bbbbb":pe=Vr(Bn.DayPeriods,et.Narrow,Tt.Standalone,!0);break;case"B":case"BB":case"BBB":pe=Vr(Bn.DayPeriods,et.Abbreviated,Tt.Format,!0);break;case"BBBB":pe=Vr(Bn.DayPeriods,et.Wide,Tt.Format,!0);break;case"BBBBB":pe=Vr(Bn.DayPeriods,et.Narrow,Tt.Format,!0);break;case"h":pe=Fn(yn.Hours,1,-12);break;case"hh":pe=Fn(yn.Hours,2,-12);break;case"H":pe=Fn(yn.Hours,1);break;case"HH":pe=Fn(yn.Hours,2);break;case"m":pe=Fn(yn.Minutes,1);break;case"mm":pe=Fn(yn.Minutes,2);break;case"s":pe=Fn(yn.Seconds,1);break;case"ss":pe=Fn(yn.Seconds,2);break;case"S":pe=Fn(yn.FractionalSeconds,1);break;case"SS":pe=Fn(yn.FractionalSeconds,2);break;case"SSS":pe=Fn(yn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":pe=Pn(Gt.Short);break;case"ZZZZZ":pe=Pn(Gt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":pe=Pn(Gt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":pe=Pn(Gt.Long);break;default:return null}return $e[U]=pe,pe}(ni);Xr+=$r?$r(ze,q,Br):"''"===ni?"'":ni.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Xr}function Or(U,pe,q){const ve=new Date(0);return ve.setFullYear(U,pe,q),ve.setHours(0,0,0),ve}function dr(U,pe){const q=function wn(U){return(0,g.cg1)(U)[g.wAp.LocaleId]}(U);if(ct[q]=ct[q]||{},ct[q][pe])return ct[q][pe];let ve="";switch(pe){case"shortDate":ve=Ot(U,Nt.Short);break;case"mediumDate":ve=Ot(U,Nt.Medium);break;case"longDate":ve=Ot(U,Nt.Long);break;case"fullDate":ve=Ot(U,Nt.Full);break;case"shortTime":ve=st(U,Nt.Short);break;case"mediumTime":ve=st(U,Nt.Medium);break;case"longTime":ve=st(U,Nt.Long);break;case"fullTime":ve=st(U,Nt.Full);break;case"short":const ze=dr(U,"shortTime"),en=dr(U,"shortDate");ve=os(It(U,Nt.Short),[ze,en]);break;case"medium":const Cn=dr(U,"mediumTime"),or=dr(U,"mediumDate");ve=os(It(U,Nt.Medium),[Cn,or]);break;case"long":const Br=dr(U,"longTime"),Xr=dr(U,"longDate");ve=os(It(U,Nt.Long),[Br,Xr]);break;case"full":const ni=dr(U,"fullTime"),$r=dr(U,"fullDate");ve=os(It(U,Nt.Full),[ni,$r])}return ve&&(ct[q][pe]=ve),ve}function os(U,pe){return pe&&(U=U.replace(/\{([^}]+)}/g,function(q,ve){return null!=pe&&ve in pe?pe[ve]:q})),U}function Ii(U,pe,q="-",ve,ze){let en="";(U<0||ze&&U<=0)&&(ze?U=1-U:(U=-U,en=q));let Cn=String(U);for(;Cn.length<pe;)Cn="0"+Cn;return ve&&(Cn=Cn.substr(Cn.length-pe)),en+Cn}function Fn(U,pe,q=0,ve=!1,ze=!1){return function(en,Cn){let or=function Ei(U,pe){switch(U){case yn.FullYear:return pe.getFullYear();case yn.Month:return pe.getMonth();case yn.Date:return pe.getDate();case yn.Hours:return pe.getHours();case yn.Minutes:return pe.getMinutes();case yn.Seconds:return pe.getSeconds();case yn.FractionalSeconds:return pe.getMilliseconds();case yn.Day:return pe.getDay();default:throw new Error(`Unknown DateType value "${U}".`)}}(U,en);if((q>0||or>-q)&&(or+=q),U===yn.Hours)0===or&&-12===q&&(or=12);else if(U===yn.FractionalSeconds)return function ui(U,pe){return Ii(U,3).substr(0,pe)}(or,pe);const Br=ut(Cn,At.MinusSign);return Ii(or,pe,Br,ve,ze)}}function Vr(U,pe,q=Tt.Format,ve=!1){return function(ze,en){return function ji(U,pe,q,ve,ze,en){switch(q){case Bn.Months:return function fn(U,pe,q){const ve=(0,g.cg1)(U),en=Tr([ve[g.wAp.MonthsFormat],ve[g.wAp.MonthsStandalone]],pe);return Tr(en,q)}(pe,ze,ve)[U.getMonth()];case Bn.Days:return function Jn(U,pe,q){const ve=(0,g.cg1)(U),en=Tr([ve[g.wAp.DaysFormat],ve[g.wAp.DaysStandalone]],pe);return Tr(en,q)}(pe,ze,ve)[U.getDay()];case Bn.DayPeriods:const Cn=U.getHours(),or=U.getMinutes();if(en){const Xr=function si(U){const pe=(0,g.cg1)(U);return Zr(pe),(pe[g.wAp.ExtraData][2]||[]).map(ve=>"string"==typeof ve?wr(ve):[wr(ve[0]),wr(ve[1])])}(pe),ni=function qn(U,pe,q){const ve=(0,g.cg1)(U);Zr(ve);const en=Tr([ve[g.wAp.ExtraData][0],ve[g.wAp.ExtraData][1]],pe)||[];return Tr(en,q)||[]}(pe,ze,ve),$r=Xr.findIndex(Yi=>{if(Array.isArray(Yi)){const[vi,Ti]=Yi,ro=Cn>=vi.hours&&or>=vi.minutes,ts=Cn<Ti.hours||Cn===Ti.hours&&or<Ti.minutes;if(vi.hours<Ti.hours){if(ro&&ts)return!0}else if(ro||ts)return!0}else if(Yi.hours===Cn&&Yi.minutes===or)return!0;return!1});if(-1!==$r)return ni[$r]}return function Xn(U,pe,q){const ve=(0,g.cg1)(U),en=Tr([ve[g.wAp.DayPeriodsFormat],ve[g.wAp.DayPeriodsStandalone]],pe);return Tr(en,q)}(pe,ze,ve)[Cn<12?0:1];case Bn.Eras:return function gr(U,pe){return Tr((0,g.cg1)(U)[g.wAp.Eras],pe)}(pe,ve)[U.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${q}`)}}(ze,en,U,pe,q,ve)}}function Pn(U){return function(pe,q,ve){const ze=-1*ve,en=ut(q,At.MinusSign),Cn=ze>0?Math.floor(ze/60):Math.ceil(ze/60);switch(U){case Gt.Short:return(ze>=0?"+":"")+Ii(Cn,2,en)+Ii(Math.abs(ze%60),2,en);case Gt.ShortGMT:return"GMT"+(ze>=0?"+":"")+Ii(Cn,1,en);case Gt.Long:return"GMT"+(ze>=0?"+":"")+Ii(Cn,2,en)+":"+Ii(Math.abs(ze%60),2,en);case Gt.Extended:return 0===ve?"Z":(ze>=0?"+":"")+Ii(Cn,2,en)+":"+Ii(Math.abs(ze%60),2,en);default:throw new Error(`Unknown zone width "${U}"`)}}}function Pr(U){return Or(U.getFullYear(),U.getMonth(),U.getDate()+(4-U.getDay()))}function Nr(U,pe=!1){return function(q,ve){let ze;if(pe){const en=new Date(q.getFullYear(),q.getMonth(),1).getDay()-1,Cn=q.getDate();ze=1+Math.floor((Cn+en)/7)}else{const en=Pr(q),Cn=function Ar(U){const pe=Or(U,0,1).getDay();return Or(U,0,1+(pe<=4?4:11)-pe)}(en.getFullYear()),or=en.getTime()-Cn.getTime();ze=1+Math.round(or/6048e5)}return Ii(ze,U,ut(ve,At.MinusSign))}}function tt(U,pe=!1){return function(q,ve){return Ii(Pr(q).getFullYear(),U,ut(ve,At.MinusSign),pe)}}const $e={};function rn(U,pe){U=U.replace(/:/g,"");const q=Date.parse("Jan 01, 1970 00:00:00 "+U)/6e4;return isNaN(q)?pe:q}function pt(U){return U instanceof Date&&!isNaN(U.valueOf())}function Is(U,pe){pe=encodeURIComponent(pe);for(const q of U.split(";")){const ve=q.indexOf("="),[ze,en]=-1==ve?[q,""]:[q.slice(0,ve),q.slice(ve+1)];if(ze.trim()===pe)return decodeURIComponent(en)}return null}let Ss=(()=>{class U{constructor(q,ve,ze,en){this._iterableDiffers=q,this._keyValueDiffers=ve,this._ngEl=ze,this._renderer=en,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(q){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof q?q.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(q){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof q?q.split(/\s+/):q,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const q=this._iterableDiffer.diff(this._rawClass);q&&this._applyIterableChanges(q)}else if(this._keyValueDiffer){const q=this._keyValueDiffer.diff(this._rawClass);q&&this._applyKeyValueChanges(q)}}_applyKeyValueChanges(q){q.forEachAddedItem(ve=>this._toggleClass(ve.key,ve.currentValue)),q.forEachChangedItem(ve=>this._toggleClass(ve.key,ve.currentValue)),q.forEachRemovedItem(ve=>{ve.previousValue&&this._toggleClass(ve.key,!1)})}_applyIterableChanges(q){q.forEachAddedItem(ve=>{if("string"!=typeof ve.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(ve.item)}`);this._toggleClass(ve.item,!0)}),q.forEachRemovedItem(ve=>this._toggleClass(ve.item,!1))}_applyClasses(q){q&&(Array.isArray(q)||q instanceof Set?q.forEach(ve=>this._toggleClass(ve,!0)):Object.keys(q).forEach(ve=>this._toggleClass(ve,!!q[ve])))}_removeClasses(q){q&&(Array.isArray(q)||q instanceof Set?q.forEach(ve=>this._toggleClass(ve,!1)):Object.keys(q).forEach(ve=>this._toggleClass(ve,!1)))}_toggleClass(q,ve){(q=q.trim())&&q.split(/\s+/g).forEach(ze=>{ve?this._renderer.addClass(this._ngEl.nativeElement,ze):this._renderer.removeClass(this._ngEl.nativeElement,ze)})}}return U.\u0275fac=function(q){return new(q||U)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},U.\u0275dir=g.lG2({type:U,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),U})();class Cr{constructor(pe,q,ve,ze){this.$implicit=pe,this.ngForOf=q,this.index=ve,this.count=ze}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let mr=(()=>{class U{constructor(q,ve,ze){this._viewContainer=q,this._template=ve,this._differs=ze,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(q){this._ngForOf=q,this._ngForOfDirty=!0}set ngForTrackBy(q){this._trackByFn=q}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(q){q&&(this._template=q)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const q=this._ngForOf;!this._differ&&q&&(this._differ=this._differs.find(q).create(this.ngForTrackBy))}if(this._differ){const q=this._differ.diff(this._ngForOf);q&&this._applyChanges(q)}}_applyChanges(q){const ve=this._viewContainer;q.forEachOperation((ze,en,Cn)=>{if(null==ze.previousIndex)ve.createEmbeddedView(this._template,new Cr(ze.item,this._ngForOf,-1,-1),null===Cn?void 0:Cn);else if(null==Cn)ve.remove(null===en?void 0:en);else if(null!==en){const or=ve.get(en);ve.move(or,Cn),yr(or,ze)}});for(let ze=0,en=ve.length;ze<en;ze++){const or=ve.get(ze).context;or.index=ze,or.count=en,or.ngForOf=this._ngForOf}q.forEachIdentityChange(ze=>{yr(ve.get(ze.currentIndex),ze)})}static ngTemplateContextGuard(q,ve){return!0}}return U.\u0275fac=function(q){return new(q||U)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},U.\u0275dir=g.lG2({type:U,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),U})();function yr(U,pe){U.context.$implicit=pe.item}let zr=(()=>{class U{constructor(q,ve){this._viewContainer=q,this._context=new Si,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ve}set ngIf(q){this._context.$implicit=this._context.ngIf=q,this._updateView()}set ngIfThen(q){zs("ngIfThen",q),this._thenTemplateRef=q,this._thenViewRef=null,this._updateView()}set ngIfElse(q){zs("ngIfElse",q),this._elseTemplateRef=q,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(q,ve){return!0}}return U.\u0275fac=function(q){return new(q||U)(g.Y36(g.s_b),g.Y36(g.Rgc))},U.\u0275dir=g.lG2({type:U,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),U})();class Si{constructor(){this.$implicit=null,this.ngIf=null}}function zs(U,pe){if(pe&&!pe.createEmbeddedView)throw new Error(`${U} must be a TemplateRef, but received '${(0,g.AaK)(pe)}'.`)}class Ki{constructor(pe,q){this._viewContainerRef=pe,this._templateRef=q,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(pe){pe&&!this._created?this.create():!pe&&this._created&&this.destroy()}}let cs=(()=>{class U{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(q){this._ngSwitch=q,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(q){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(q)}_matchCase(q){const ve=q==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ve,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ve}_updateDefaultCases(q){if(this._defaultViews&&q!==this._defaultUsed){this._defaultUsed=q;for(let ve=0;ve<this._defaultViews.length;ve++)this._defaultViews[ve].enforceState(q)}}}return U.\u0275fac=function(q){return new(q||U)},U.\u0275dir=g.lG2({type:U,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),U})(),Yr=(()=>{class U{constructor(q,ve,ze){this.ngSwitch=ze,ze._addCase(),this._view=new Ki(q,ve)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return U.\u0275fac=function(q){return new(q||U)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(cs,9))},U.\u0275dir=g.lG2({type:U,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),U})(),Wr=(()=>{class U{constructor(q,ve,ze){ze._addDefault(new Ki(q,ve))}}return U.\u0275fac=function(q){return new(q||U)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(cs,9))},U.\u0275dir=g.lG2({type:U,selectors:[["","ngSwitchDefault",""]]}),U})(),Di=(()=>{class U{constructor(q,ve,ze){this._ngEl=q,this._differs=ve,this._renderer=ze,this._ngStyle=null,this._differ=null}set ngStyle(q){this._ngStyle=q,!this._differ&&q&&(this._differ=this._differs.find(q).create())}ngDoCheck(){if(this._differ){const q=this._differ.diff(this._ngStyle);q&&this._applyChanges(q)}}_setStyle(q,ve){const[ze,en]=q.split(".");null!=(ve=null!=ve&&en?`${ve}${en}`:ve)?this._renderer.setStyle(this._ngEl.nativeElement,ze,ve):this._renderer.removeStyle(this._ngEl.nativeElement,ze)}_applyChanges(q){q.forEachRemovedItem(ve=>this._setStyle(ve.key,null)),q.forEachAddedItem(ve=>this._setStyle(ve.key,ve.currentValue)),q.forEachChangedItem(ve=>this._setStyle(ve.key,ve.currentValue))}}return U.\u0275fac=function(q){return new(q||U)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},U.\u0275dir=g.lG2({type:U,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),U})(),ko=(()=>{class U{constructor(q){this._viewContainerRef=q,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(q){if(q.ngTemplateOutlet){const ve=this._viewContainerRef;this._viewRef&&ve.remove(ve.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?ve.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&q.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return U.\u0275fac=function(q){return new(q||U)(g.Y36(g.s_b))},U.\u0275dir=g.lG2({type:U,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[g.TTD]}),U})();function vs(U,pe){return new g.vHH(2100,"")}class Xi{createSubscription(pe,q){return pe.subscribe({next:q,error:ve=>{throw ve}})}dispose(pe){pe.unsubscribe()}onDestroy(pe){pe.unsubscribe()}}class Ct{createSubscription(pe,q){return pe.then(q,ve=>{throw ve})}dispose(pe){}onDestroy(pe){}}const dt=new Ct,St=new Xi;let gn=(()=>{class U{constructor(q){this._ref=q,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(q){return this._obj?q!==this._obj?(this._dispose(),this.transform(q)):this._latestValue:(q&&this._subscribe(q),this._latestValue)}_subscribe(q){this._obj=q,this._strategy=this._selectStrategy(q),this._subscription=this._strategy.createSubscription(q,ve=>this._updateLatestValue(q,ve))}_selectStrategy(q){if((0,g.QGY)(q))return dt;if((0,g.F4k)(q))return St;throw vs()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(q,ve){q===this._obj&&(this._latestValue=ve,this._ref.markForCheck())}}return U.\u0275fac=function(q){return new(q||U)(g.Y36(g.sBO,16))},U.\u0275pipe=g.Yjl({name:"async",type:U,pure:!1}),U})();const pi=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ds=(()=>{class U{constructor(q,ve){this.locale=q,this.defaultTimezone=ve}transform(q,ve="mediumDate",ze,en){var Cn;if(null==q||""===q||q!=q)return null;try{return qr(q,ve,en||this.locale,null!==(Cn=null!=ze?ze:this.defaultTimezone)&&void 0!==Cn?Cn:void 0)}catch(or){throw vs()}}}return U.\u0275fac=function(q){return new(q||U)(g.Y36(g.soG,16),g.Y36(pi,24))},U.\u0275pipe=g.Yjl({name:"date",type:U,pure:!0}),U})(),qs=(()=>{class U{}return U.\u0275fac=function(q){return new(q||U)},U.\u0275mod=g.oAB({type:U}),U.\u0275inj=g.cJS({}),U})();const Ws="browser";function ms(U){return U===Ws}function ho(U){return"server"===U}let ao=(()=>{class U{}return U.\u0275prov=(0,g.Yz7)({token:U,providedIn:"root",factory:()=>new js((0,g.LFG)(gt),window)}),U})();class js{constructor(pe,q){this.document=pe,this.window=q,this.offset=()=>[0,0]}setOffset(pe){this.offset=Array.isArray(pe)?()=>pe:pe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(pe){this.supportsScrolling()&&this.window.scrollTo(pe[0],pe[1])}scrollToAnchor(pe){if(!this.supportsScrolling())return;const q=function Os(U,pe){const q=U.getElementById(pe)||U.getElementsByName(pe)[0];if(q)return q;if("function"==typeof U.createTreeWalker&&U.body&&(U.body.createShadowRoot||U.body.attachShadow)){const ve=U.createTreeWalker(U.body,NodeFilter.SHOW_ELEMENT);let ze=ve.currentNode;for(;ze;){const en=ze.shadowRoot;if(en){const Cn=en.getElementById(pe)||en.querySelector(`[name="${pe}"]`);if(Cn)return Cn}ze=ve.nextNode()}}return null}(this.document,pe);q&&(this.scrollToElement(q),q.focus())}setHistoryScrollRestoration(pe){if(this.supportScrollRestoration()){const q=this.window.history;q&&q.scrollRestoration&&(q.scrollRestoration=pe)}}scrollToElement(pe){const q=pe.getBoundingClientRect(),ve=q.left+this.window.pageXOffset,ze=q.top+this.window.pageYOffset,en=this.offset();this.window.scrollTo(ve-en[0],ze-en[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const pe=Ps(this.window.history)||Ps(Object.getPrototypeOf(this.window.history));return!(!pe||!pe.writable&&!pe.set)}catch(pe){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(pe){return!1}}}function Ps(U){return Object.getOwnPropertyDescriptor(U,"scrollRestoration")}class _i{}},520:(jn,Dt,H)=>{H.d(Dt,{JF:()=>wr,TP:()=>wn,eN:()=>At});var g=H(9808),Z=H(5e3),ge=H(9646),le=H(8306),Ye=H(4351),Xe=H(9300),gt=H(4004);class Qe{}class ft{}class Pe{constructor(it){this.normalizedNames=new Map,this.lazyUpdate=null,it?this.lazyInit="string"==typeof it?()=>{this.headers=new Map,it.split("\n").forEach(ct=>{const Bt=ct.indexOf(":");if(Bt>0){const Gt=ct.slice(0,Bt),yn=Gt.toLowerCase(),Bn=ct.slice(Bt+1).trim();this.maybeSetNormalizedName(Gt,yn),this.headers.has(yn)?this.headers.get(yn).push(Bn):this.headers.set(yn,[Bn])}})}:()=>{this.headers=new Map,Object.keys(it).forEach(ct=>{let Bt=it[ct];const Gt=ct.toLowerCase();"string"==typeof Bt&&(Bt=[Bt]),Bt.length>0&&(this.headers.set(Gt,Bt),this.maybeSetNormalizedName(ct,Gt))})}:this.headers=new Map}has(it){return this.init(),this.headers.has(it.toLowerCase())}get(it){this.init();const ct=this.headers.get(it.toLowerCase());return ct&&ct.length>0?ct[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(it){return this.init(),this.headers.get(it.toLowerCase())||null}append(it,ct){return this.clone({name:it,value:ct,op:"a"})}set(it,ct){return this.clone({name:it,value:ct,op:"s"})}delete(it,ct){return this.clone({name:it,value:ct,op:"d"})}maybeSetNormalizedName(it,ct){this.normalizedNames.has(ct)||this.normalizedNames.set(ct,it)}init(){this.lazyInit&&(this.lazyInit instanceof Pe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(it=>this.applyUpdate(it)),this.lazyUpdate=null))}copyFrom(it){it.init(),Array.from(it.headers.keys()).forEach(ct=>{this.headers.set(ct,it.headers.get(ct)),this.normalizedNames.set(ct,it.normalizedNames.get(ct))})}clone(it){const ct=new Pe;return ct.lazyInit=this.lazyInit&&this.lazyInit instanceof Pe?this.lazyInit:this,ct.lazyUpdate=(this.lazyUpdate||[]).concat([it]),ct}applyUpdate(it){const ct=it.name.toLowerCase();switch(it.op){case"a":case"s":let Bt=it.value;if("string"==typeof Bt&&(Bt=[Bt]),0===Bt.length)return;this.maybeSetNormalizedName(it.name,ct);const Gt=("a"===it.op?this.headers.get(ct):void 0)||[];Gt.push(...Bt),this.headers.set(ct,Gt);break;case"d":const yn=it.value;if(yn){let Bn=this.headers.get(ct);if(!Bn)return;Bn=Bn.filter(qr=>-1===yn.indexOf(qr)),0===Bn.length?(this.headers.delete(ct),this.normalizedNames.delete(ct)):this.headers.set(ct,Bn)}else this.headers.delete(ct),this.normalizedNames.delete(ct)}}forEach(it){this.init(),Array.from(this.normalizedNames.keys()).forEach(ct=>it(this.normalizedNames.get(ct),this.headers.get(ct)))}}class Me{encodeKey(it){return nn(it)}encodeValue(it){return nn(it)}decodeKey(it){return decodeURIComponent(it)}decodeValue(it){return decodeURIComponent(it)}}const pn=/%(\d[a-f0-9])/gi,vt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function nn(an){return encodeURIComponent(an).replace(pn,(it,ct)=>{var Bt;return null!==(Bt=vt[ct])&&void 0!==Bt?Bt:it})}function bn(an){return`${an}`}class Pt{constructor(it={}){if(this.updates=null,this.cloneFrom=null,this.encoder=it.encoder||new Me,it.fromString){if(it.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Et(an,it){const ct=new Map;return an.length>0&&an.replace(/^\?/,"").split("&").forEach(Gt=>{const yn=Gt.indexOf("="),[Bn,qr]=-1==yn?[it.decodeKey(Gt),""]:[it.decodeKey(Gt.slice(0,yn)),it.decodeValue(Gt.slice(yn+1))],Or=ct.get(Bn)||[];Or.push(qr),ct.set(Bn,Or)}),ct}(it.fromString,this.encoder)}else it.fromObject?(this.map=new Map,Object.keys(it.fromObject).forEach(ct=>{const Bt=it.fromObject[ct];this.map.set(ct,Array.isArray(Bt)?Bt:[Bt])})):this.map=null}has(it){return this.init(),this.map.has(it)}get(it){this.init();const ct=this.map.get(it);return ct?ct[0]:null}getAll(it){return this.init(),this.map.get(it)||null}keys(){return this.init(),Array.from(this.map.keys())}append(it,ct){return this.clone({param:it,value:ct,op:"a"})}appendAll(it){const ct=[];return Object.keys(it).forEach(Bt=>{const Gt=it[Bt];Array.isArray(Gt)?Gt.forEach(yn=>{ct.push({param:Bt,value:yn,op:"a"})}):ct.push({param:Bt,value:Gt,op:"a"})}),this.clone(ct)}set(it,ct){return this.clone({param:it,value:ct,op:"s"})}delete(it,ct){return this.clone({param:it,value:ct,op:"d"})}toString(){return this.init(),this.keys().map(it=>{const ct=this.encoder.encodeKey(it);return this.map.get(it).map(Bt=>ct+"="+this.encoder.encodeValue(Bt)).join("&")}).filter(it=>""!==it).join("&")}clone(it){const ct=new Pt({encoder:this.encoder});return ct.cloneFrom=this.cloneFrom||this,ct.updates=(this.updates||[]).concat(it),ct}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(it=>this.map.set(it,this.cloneFrom.map.get(it))),this.updates.forEach(it=>{switch(it.op){case"a":case"s":const ct=("a"===it.op?this.map.get(it.param):void 0)||[];ct.push(bn(it.value)),this.map.set(it.param,ct);break;case"d":if(void 0===it.value){this.map.delete(it.param);break}{let Bt=this.map.get(it.param)||[];const Gt=Bt.indexOf(bn(it.value));-1!==Gt&&Bt.splice(Gt,1),Bt.length>0?this.map.set(it.param,Bt):this.map.delete(it.param)}}}),this.cloneFrom=this.updates=null)}}class Ln{constructor(){this.map=new Map}set(it,ct){return this.map.set(it,ct),this}get(it){return this.map.has(it)||this.map.set(it,it.defaultValue()),this.map.get(it)}delete(it){return this.map.delete(it),this}has(it){return this.map.has(it)}keys(){return this.map.keys()}}function xe(an){return"undefined"!=typeof ArrayBuffer&&an instanceof ArrayBuffer}function Ne(an){return"undefined"!=typeof Blob&&an instanceof Blob}function ot(an){return"undefined"!=typeof FormData&&an instanceof FormData}class Ut{constructor(it,ct,Bt,Gt){let yn;if(this.url=ct,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=it.toUpperCase(),function un(an){switch(an){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Gt?(this.body=void 0!==Bt?Bt:null,yn=Gt):yn=Bt,yn&&(this.reportProgress=!!yn.reportProgress,this.withCredentials=!!yn.withCredentials,yn.responseType&&(this.responseType=yn.responseType),yn.headers&&(this.headers=yn.headers),yn.context&&(this.context=yn.context),yn.params&&(this.params=yn.params)),this.headers||(this.headers=new Pe),this.context||(this.context=new Ln),this.params){const Bn=this.params.toString();if(0===Bn.length)this.urlWithParams=ct;else{const qr=ct.indexOf("?");this.urlWithParams=ct+(-1===qr?"?":qr<ct.length-1?"&":"")+Bn}}else this.params=new Pt,this.urlWithParams=ct}serializeBody(){return null===this.body?null:xe(this.body)||Ne(this.body)||ot(this.body)||function Kt(an){return"undefined"!=typeof URLSearchParams&&an instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Pt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ot(this.body)?null:Ne(this.body)?this.body.type||null:xe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Pt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(it={}){var ct;const Bt=it.method||this.method,Gt=it.url||this.url,yn=it.responseType||this.responseType,Bn=void 0!==it.body?it.body:this.body,qr=void 0!==it.withCredentials?it.withCredentials:this.withCredentials,Or=void 0!==it.reportProgress?it.reportProgress:this.reportProgress;let dr=it.headers||this.headers,os=it.params||this.params;const Ii=null!==(ct=it.context)&&void 0!==ct?ct:this.context;return void 0!==it.setHeaders&&(dr=Object.keys(it.setHeaders).reduce((ui,Fn)=>ui.set(Fn,it.setHeaders[Fn]),dr)),it.setParams&&(os=Object.keys(it.setParams).reduce((ui,Fn)=>ui.set(Fn,it.setParams[Fn]),os)),new Ut(Bt,Gt,Bn,{params:os,headers:dr,context:Ii,reportProgress:Or,responseType:yn,withCredentials:qr})}}var Fe=(()=>((Fe=Fe||{})[Fe.Sent=0]="Sent",Fe[Fe.UploadProgress=1]="UploadProgress",Fe[Fe.ResponseHeader=2]="ResponseHeader",Fe[Fe.DownloadProgress=3]="DownloadProgress",Fe[Fe.Response=4]="Response",Fe[Fe.User=5]="User",Fe))();class Lt{constructor(it,ct=200,Bt="OK"){this.headers=it.headers||new Pe,this.status=void 0!==it.status?it.status:ct,this.statusText=it.statusText||Bt,this.url=it.url||null,this.ok=this.status>=200&&this.status<300}}class Oe extends Lt{constructor(it={}){super(it),this.type=Fe.ResponseHeader}clone(it={}){return new Oe({headers:it.headers||this.headers,status:void 0!==it.status?it.status:this.status,statusText:it.statusText||this.statusText,url:it.url||this.url||void 0})}}class Tt extends Lt{constructor(it={}){super(it),this.type=Fe.Response,this.body=void 0!==it.body?it.body:null}clone(it={}){return new Tt({body:void 0!==it.body?it.body:this.body,headers:it.headers||this.headers,status:void 0!==it.status?it.status:this.status,statusText:it.statusText||this.statusText,url:it.url||this.url||void 0})}}class et extends Lt{constructor(it){super(it,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${it.url||"(unknown url)"}`:`Http failure response for ${it.url||"(unknown url)"}: ${it.status} ${it.statusText}`,this.error=it.error||null}}function Nt(an,it){return{body:it,headers:an.headers,context:an.context,observe:an.observe,params:an.params,reportProgress:an.reportProgress,responseType:an.responseType,withCredentials:an.withCredentials}}let At=(()=>{class an{constructor(ct){this.handler=ct}request(ct,Bt,Gt={}){let yn;if(ct instanceof Ut)yn=ct;else{let Or,dr;Or=Gt.headers instanceof Pe?Gt.headers:new Pe(Gt.headers),Gt.params&&(dr=Gt.params instanceof Pt?Gt.params:new Pt({fromObject:Gt.params})),yn=new Ut(ct,Bt,void 0!==Gt.body?Gt.body:null,{headers:Or,context:Gt.context,params:dr,reportProgress:Gt.reportProgress,responseType:Gt.responseType||"json",withCredentials:Gt.withCredentials})}const Bn=(0,ge.of)(yn).pipe((0,Ye.b)(Or=>this.handler.handle(Or)));if(ct instanceof Ut||"events"===Gt.observe)return Bn;const qr=Bn.pipe((0,Xe.h)(Or=>Or instanceof Tt));switch(Gt.observe||"body"){case"body":switch(yn.responseType){case"arraybuffer":return qr.pipe((0,gt.U)(Or=>{if(null!==Or.body&&!(Or.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Or.body}));case"blob":return qr.pipe((0,gt.U)(Or=>{if(null!==Or.body&&!(Or.body instanceof Blob))throw new Error("Response is not a Blob.");return Or.body}));case"text":return qr.pipe((0,gt.U)(Or=>{if(null!==Or.body&&"string"!=typeof Or.body)throw new Error("Response is not a string.");return Or.body}));default:return qr.pipe((0,gt.U)(Or=>Or.body))}case"response":return qr;default:throw new Error(`Unreachable: unhandled observe type ${Gt.observe}}`)}}delete(ct,Bt={}){return this.request("DELETE",ct,Bt)}get(ct,Bt={}){return this.request("GET",ct,Bt)}head(ct,Bt={}){return this.request("HEAD",ct,Bt)}jsonp(ct,Bt){return this.request("JSONP",ct,{params:(new Pt).append(Bt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ct,Bt={}){return this.request("OPTIONS",ct,Bt)}patch(ct,Bt,Gt={}){return this.request("PATCH",ct,Nt(Gt,Bt))}post(ct,Bt,Gt={}){return this.request("POST",ct,Nt(Gt,Bt))}put(ct,Bt,Gt={}){return this.request("PUT",ct,Nt(Gt,Bt))}}return an.\u0275fac=function(ct){return new(ct||an)(Z.LFG(Qe))},an.\u0275prov=Z.Yz7({token:an,factory:an.\u0275fac}),an})();class on{constructor(it,ct){this.next=it,this.interceptor=ct}handle(it){return this.interceptor.intercept(it,this.next)}}const wn=new Z.OlP("HTTP_INTERCEPTORS");let Xn=(()=>{class an{intercept(ct,Bt){return Bt.handle(ct)}}return an.\u0275fac=function(ct){return new(ct||an)},an.\u0275prov=Z.Yz7({token:an,factory:an.\u0275fac}),an})();const ut=/^\)\]\}',?\n/;let xt=(()=>{class an{constructor(ct){this.xhrFactory=ct}handle(ct){if("JSONP"===ct.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new le.y(Bt=>{const Gt=this.xhrFactory.build();if(Gt.open(ct.method,ct.urlWithParams),ct.withCredentials&&(Gt.withCredentials=!0),ct.headers.forEach((Fn,Ei)=>Gt.setRequestHeader(Fn,Ei.join(","))),ct.headers.has("Accept")||Gt.setRequestHeader("Accept","application/json, text/plain, */*"),!ct.headers.has("Content-Type")){const Fn=ct.detectContentTypeHeader();null!==Fn&&Gt.setRequestHeader("Content-Type",Fn)}if(ct.responseType){const Fn=ct.responseType.toLowerCase();Gt.responseType="json"!==Fn?Fn:"text"}const yn=ct.serializeBody();let Bn=null;const qr=()=>{if(null!==Bn)return Bn;const Fn=Gt.statusText||"OK",Ei=new Pe(Gt.getAllResponseHeaders()),Vr=function Wt(an){return"responseURL"in an&&an.responseURL?an.responseURL:/^X-Request-URL:/m.test(an.getAllResponseHeaders())?an.getResponseHeader("X-Request-URL"):null}(Gt)||ct.url;return Bn=new Oe({headers:Ei,status:Gt.status,statusText:Fn,url:Vr}),Bn},Or=()=>{let{headers:Fn,status:Ei,statusText:Vr,url:ji}=qr(),Pn=null;204!==Ei&&(Pn=void 0===Gt.response?Gt.responseText:Gt.response),0===Ei&&(Ei=Pn?200:0);let jt=Ei>=200&&Ei<300;if("json"===ct.responseType&&"string"==typeof Pn){const Wn=Pn;Pn=Pn.replace(ut,"");try{Pn=""!==Pn?JSON.parse(Pn):null}catch(Ar){Pn=Wn,jt&&(jt=!1,Pn={error:Ar,text:Pn})}}jt?(Bt.next(new Tt({body:Pn,headers:Fn,status:Ei,statusText:Vr,url:ji||void 0})),Bt.complete()):Bt.error(new et({error:Pn,headers:Fn,status:Ei,statusText:Vr,url:ji||void 0}))},dr=Fn=>{const{url:Ei}=qr(),Vr=new et({error:Fn,status:Gt.status||0,statusText:Gt.statusText||"Unknown Error",url:Ei||void 0});Bt.error(Vr)};let os=!1;const Ii=Fn=>{os||(Bt.next(qr()),os=!0);let Ei={type:Fe.DownloadProgress,loaded:Fn.loaded};Fn.lengthComputable&&(Ei.total=Fn.total),"text"===ct.responseType&&!!Gt.responseText&&(Ei.partialText=Gt.responseText),Bt.next(Ei)},ui=Fn=>{let Ei={type:Fe.UploadProgress,loaded:Fn.loaded};Fn.lengthComputable&&(Ei.total=Fn.total),Bt.next(Ei)};return Gt.addEventListener("load",Or),Gt.addEventListener("error",dr),Gt.addEventListener("timeout",dr),Gt.addEventListener("abort",dr),ct.reportProgress&&(Gt.addEventListener("progress",Ii),null!==yn&&Gt.upload&&Gt.upload.addEventListener("progress",ui)),Gt.send(yn),Bt.next({type:Fe.Sent}),()=>{Gt.removeEventListener("error",dr),Gt.removeEventListener("abort",dr),Gt.removeEventListener("load",Or),Gt.removeEventListener("timeout",dr),ct.reportProgress&&(Gt.removeEventListener("progress",Ii),null!==yn&&Gt.upload&&Gt.upload.removeEventListener("progress",ui)),Gt.readyState!==Gt.DONE&&Gt.abort()}})}}return an.\u0275fac=function(ct){return new(ct||an)(Z.LFG(g.JF))},an.\u0275prov=Z.Yz7({token:an,factory:an.\u0275fac}),an})();const Zt=new Z.OlP("XSRF_COOKIE_NAME"),Un=new Z.OlP("XSRF_HEADER_NAME");class Yn{}let tr=(()=>{class an{constructor(ct,Bt,Gt){this.doc=ct,this.platform=Bt,this.cookieName=Gt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ct=this.doc.cookie||"";return ct!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,g.Mx)(ct,this.cookieName),this.lastCookieString=ct),this.lastToken}}return an.\u0275fac=function(ct){return new(ct||an)(Z.LFG(g.K0),Z.LFG(Z.Lbi),Z.LFG(Zt))},an.\u0275prov=Z.Yz7({token:an,factory:an.\u0275fac}),an})(),Zr=(()=>{class an{constructor(ct,Bt){this.tokenService=ct,this.headerName=Bt}intercept(ct,Bt){const Gt=ct.url.toLowerCase();if("GET"===ct.method||"HEAD"===ct.method||Gt.startsWith("http://")||Gt.startsWith("https://"))return Bt.handle(ct);const yn=this.tokenService.getToken();return null!==yn&&!ct.headers.has(this.headerName)&&(ct=ct.clone({headers:ct.headers.set(this.headerName,yn)})),Bt.handle(ct)}}return an.\u0275fac=function(ct){return new(ct||an)(Z.LFG(Yn),Z.LFG(Un))},an.\u0275prov=Z.Yz7({token:an,factory:an.\u0275fac}),an})(),si=(()=>{class an{constructor(ct,Bt){this.backend=ct,this.injector=Bt,this.chain=null}handle(ct){if(null===this.chain){const Bt=this.injector.get(wn,[]);this.chain=Bt.reduceRight((Gt,yn)=>new on(Gt,yn),this.backend)}return this.chain.handle(ct)}}return an.\u0275fac=function(ct){return new(ct||an)(Z.LFG(ft),Z.LFG(Z.zs3))},an.\u0275prov=Z.Yz7({token:an,factory:an.\u0275fac}),an})(),Tr=(()=>{class an{static disable(){return{ngModule:an,providers:[{provide:Zr,useClass:Xn}]}}static withOptions(ct={}){return{ngModule:an,providers:[ct.cookieName?{provide:Zt,useValue:ct.cookieName}:[],ct.headerName?{provide:Un,useValue:ct.headerName}:[]]}}}return an.\u0275fac=function(ct){return new(ct||an)},an.\u0275mod=Z.oAB({type:an}),an.\u0275inj=Z.cJS({providers:[Zr,{provide:wn,useExisting:Zr,multi:!0},{provide:Yn,useClass:tr},{provide:Zt,useValue:"XSRF-TOKEN"},{provide:Un,useValue:"X-XSRF-TOKEN"}]}),an})(),wr=(()=>{class an{}return an.\u0275fac=function(ct){return new(ct||an)},an.\u0275mod=Z.oAB({type:an}),an.\u0275inj=Z.cJS({providers:[At,{provide:Qe,useClass:si},xt,{provide:ft,useExisting:xt}],imports:[[Tr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),an})()},5e3:(jn,Dt,H)=>{H.d(Dt,{$8M:()=>Qn,$Z:()=>Mf,AFp:()=>LE,ALo:()=>sE,AaK:()=>Qe,Akn:()=>Zl,BQk:()=>Vu,CHM:()=>te,CRH:()=>gE,CZH:()=>qv,CqO:()=>yg,EJc:()=>Ib,EiD:()=>ka,EpF:()=>uy,F$t:()=>fy,F4k:()=>cy,FYo:()=>$0,FiY:()=>mi,G48:()=>Kb,Gf:()=>fE,GfV:()=>j0,Gpc:()=>Me,Hsn:()=>wo,JOm:()=>p,JVY:()=>pl,L6k:()=>Sc,LAX:()=>ru,LFG:()=>de,LSH:()=>xu,Lbi:()=>bb,MAs:()=>sg,NdJ:()=>_g,O4$:()=>xn,OlP:()=>lo,Oqu:()=>vc,PXZ:()=>Bb,Q6J:()=>Ch,QGY:()=>mg,Qsj:()=>TC,R0b:()=>Hu,RDi:()=>Ps,Rgc:()=>Xg,SBq:()=>Kg,Sil:()=>Db,Suo:()=>pE,TTD:()=>Ms,TgZ:()=>Ud,Tol:()=>Ff,Udp:()=>Sh,VKq:()=>Y0,VLi:()=>Lb,W1O:()=>vE,WLB:()=>Q0,X6Q:()=>qb,XFs:()=>qn,Xpm:()=>Pr,Y36:()=>Vd,YKP:()=>W0,YNc:()=>rg,Yjl:()=>De,Yz7:()=>Ot,ZZ4:()=>l0,_Bn:()=>V0,_UZ:()=>Bd,_Vd:()=>s_,_c5:()=>cT,_uU:()=>wy,aQg:()=>u0,c2e:()=>Tb,cJS:()=>It,cg1:()=>Hy,d8E:()=>kg,dDg:()=>HE,deG:()=>na,dqk:()=>dr,eBb:()=>nu,eFA:()=>WE,ekj:()=>wg,g9A:()=>UE,h0i:()=>Yf,hGG:()=>dT,hij:()=>Mg,iGM:()=>hE,ifc:()=>Gt,ip1:()=>FE,kEZ:()=>X0,kL8:()=>Gy,kcU:()=>cr,l5B:()=>J0,lG2:()=>Re,lcZ:()=>oE,mCW:()=>Oa,n5z:()=>Aa,oAB:()=>rn,oJD:()=>tl,oxw:()=>Of,pB0:()=>Qu,q3G:()=>uo,q4F:()=>H0,qLn:()=>Sa,qOj:()=>Yp,qZA:()=>Th,qzn:()=>Gl,sBO:()=>Zb,sIi:()=>Zc,s_b:()=>l_,soG:()=>Zv,tBr:()=>Hi,tb:()=>BE,tp0:()=>ri,uIk:()=>_h,vHH:()=>nn,vpe:()=>Tc,wAp:()=>Mi,xp6:()=>um,yhl:()=>tu,ynx:()=>wh,z2F:()=>t0,z3N:()=>ga,zSh:()=>df,zs3:()=>Ol});var g=H(7579),Z=H(727),ge=H(8306),le=H(6451),Ye=H(3099);function Xe(n){for(let r in n)if(n[r]===Xe)return r;throw Error("Could not find renamed property on target object.")}function gt(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Qe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Qe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function ft(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Pe=Xe({__forward_ref__:Xe});function Me(n){return n.__forward_ref__=Me,n.toString=function(){return Qe(this())},n}function Et(n){return pn(n)?n():n}function pn(n){return"function"==typeof n&&n.hasOwnProperty(Pe)&&n.__forward_ref__===Me}class nn extends Error{constructor(r,o){super(function bn(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,o)),this.code=r}}function Pt(n){return"string"==typeof n?n:null==n?"":String(n)}function Jt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Pt(n)}function Ne(n,r){const o=r?` in ${r}`:"";throw new nn(-201,`No provider for ${Jt(n)} found${o}`)}function Jn(n,r){null==n&&function fn(n,r,o,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Ot(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function It(n){return{providers:n.providers||[],imports:n.imports||[]}}function ut(n){return Wt(n,Yn)||Wt(n,Zr)}function Wt(n,r){return n.hasOwnProperty(r)?n[r]:null}function Un(n){return n&&(n.hasOwnProperty(tr)||n.hasOwnProperty(si))?n[tr]:null}const Yn=Xe({\u0275prov:Xe}),tr=Xe({\u0275inj:Xe}),Zr=Xe({ngInjectableDef:Xe}),si=Xe({ngInjectorDef:Xe});var qn=(()=>((qn=qn||{})[qn.Default=0]="Default",qn[qn.Host=1]="Host",qn[qn.Self=2]="Self",qn[qn.SkipSelf=4]="SkipSelf",qn[qn.Optional=8]="Optional",qn))();let Hr;function wr(n){const r=Hr;return Hr=n,r}function rs(n,r,o){const a=ut(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&qn.Optional?null:void 0!==r?r:void Ne(Qe(n),"Injector")}function an(n){return{toString:n}.toString()}var it=(()=>((it=it||{})[it.OnPush=0]="OnPush",it[it.Default=1]="Default",it))(),Gt=(()=>{return(n=Gt||(Gt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Gt;var n})();const yn="undefined"!=typeof globalThis&&globalThis,Bn="undefined"!=typeof window&&window,qr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,dr=yn||"undefined"!=typeof global&&global||Bn||qr,ui={},Fn=[],Ei=Xe({\u0275cmp:Xe}),Vr=Xe({\u0275dir:Xe}),ji=Xe({\u0275pipe:Xe}),Pn=Xe({\u0275mod:Xe}),jt=Xe({\u0275fac:Xe}),Wn=Xe({__NG_ELEMENT_ID__:Xe});let Ar=0;function Pr(n){return an(()=>{const o={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===it.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Fn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Gt.Emulated,id:"c",styles:n.styles||Fn,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,_=n.features,w=n.pipes;return a.id+=Ar++,a.inputs=Ge(n.inputs,o),a.outputs=Ge(n.outputs),_&&_.forEach(O=>O(a)),a.directiveDefs=h?()=>("function"==typeof h?h():h).map(tt):null,a.pipeDefs=w?()=>("function"==typeof w?w():w).map($e):null,a})}function tt(n){return pt(n)||function Yt(n){return n[Vr]||null}(n)}function $e(n){return function ur(n){return n[ji]||null}(n)}const ht={};function rn(n){return an(()=>{const r={type:n.type,bootstrap:n.bootstrap||Fn,declarations:n.declarations||Fn,imports:n.imports||Fn,exports:n.exports||Fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ht[n.id]=n.type),r})}function Ge(n,r){if(null==n)return ui;const o={};for(const a in n)if(n.hasOwnProperty(a)){let h=n[a],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),o[h]=a,r&&(r[h]=_)}return o}const Re=Pr;function De(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function pt(n){return n[Ei]||null}function Hn(n,r){const o=n[Pn]||null;if(!o&&!0===r)throw new Error(`Type ${Qe(n)} does not have '\u0275mod' property.`);return o}function cs(n){return Array.isArray(n)&&"object"==typeof n[1]}function Yr(n){return Array.isArray(n)&&!0===n[1]}function Wr(n){return 0!=(8&n.flags)}function fs(n){return 2==(2&n.flags)}function Ds(n){return 1==(1&n.flags)}function ps(n){return null!==n.template}function Di(n){return 0!=(512&n[2])}function Ni(n,r){return n.hasOwnProperty(jt)?n[jt]:null}class no{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ms(){return Us}function Us(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ro),Bs}function Bs(){const n=Ws(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===ui)n.previous=r;else for(let a in r)o[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Ro(n,r,o,a){const h=Ws(n)||function bs(n,r){return n[qs]=r}(n,{previous:ui,current:null}),_=h.current||(h.current={}),w=h.previous,O=this.declaredInputs[o],F=w[O];_[O]=new no(F&&F.currentValue,r,w===ui),n[a]=r}Ms.ngInherit=!0;const qs="__ngSimpleChanges__";function Ws(n){return n[qs]||null}let js;function Ps(n){js=n}function Os(){return void 0!==js?js:"undefined"!=typeof document?document:void 0}function _i(n){return!!n.listen}const U={createRenderer:(n,r)=>Os()};function q(n){for(;Array.isArray(n);)n=n[0];return n}function en(n,r){return q(r[n])}function Cn(n,r){return q(r[n.index])}function Br(n,r){return n.data[r]}function Xr(n,r){return n[r]}function ni(n,r){const o=r[n];return cs(o)?o:o[0]}function $r(n){return 4==(4&n[2])}function Yi(n){return 128==(128&n[2])}function Ti(n,r){return null==r?null:n[r]}function ro(n){n[18]=0}function ts(n,r){n[5]+=r;let o=n,a=n[3];for(;null!==a&&(1===r&&1===o[5]||-1===r&&0===o[5]);)a[5]+=r,o=a,a=a[3]}const kr={lFrame:nt(null),bindingsEnabled:!0};function G(){return kr.bindingsEnabled}function We(){return kr.lFrame.lView}function Mn(){return kr.lFrame.tView}function te(n){return kr.lFrame.contextLView=n,n[8]}function K(){let n=be();for(;null!==n&&64===n.type;)n=n.parent;return n}function be(){return kr.lFrame.currentTNode}function rt(n,r){const o=kr.lFrame;o.currentTNode=n,o.isParent=r}function Ht(){return kr.lFrame.isParent}function Sn(){kr.lFrame.isParent=!1}function fi(){const n=kr.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function l(){return kr.lFrame.bindingIndex++}function x(n){const r=kr.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function z(n,r){const o=kr.lFrame;o.bindingIndex=o.bindingRootIndex=n,ye(r)}function ye(n){kr.lFrame.currentDirectiveIndex=n}function Te(n){const r=kr.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function ae(){return kr.lFrame.currentQueryIndex}function _e(n){kr.lFrame.currentQueryIndex=n}function ce(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function ue(n,r,o){if(o&qn.SkipSelf){let h=r,_=n;for(;!(h=h.parent,null!==h||o&qn.Host||(h=ce(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;r=h,n=_}const a=kr.lFrame=He();return a.currentTNode=r,a.lView=n,!0}function we(n){const r=He(),o=n[1];kr.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function He(){const n=kr.lFrame,r=null===n?null:n.child;return null===r?nt(n):r}function nt(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ae(){const n=kr.lFrame;return kr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Le=Ae;function _t(){const n=Ae();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mn(){return kr.lFrame.selectedIndex}function Tn(n){kr.lFrame.selectedIndex=n}function hn(){const n=kr.lFrame;return Br(n.tView,n.selectedIndex)}function xn(){kr.lFrame.currentNamespace="svg"}function cr(){!function Nn(){kr.lFrame.currentNamespace=null}()}function ln(n,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const _=n.data[o].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:O,ngAfterViewInit:F,ngAfterViewChecked:se,ngOnDestroy:fe}=_;w&&(n.contentHooks||(n.contentHooks=[])).push(-o,w),O&&((n.contentHooks||(n.contentHooks=[])).push(o,O),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,O)),F&&(n.viewHooks||(n.viewHooks=[])).push(-o,F),se&&((n.viewHooks||(n.viewHooks=[])).push(o,se),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,se)),null!=fe&&(n.destroyHooks||(n.destroyHooks=[])).push(o,fe)}}function B(n,r,o){k(n,r,3,o)}function b(n,r,o,a){(3&n[2])===o&&k(n,r,o,a)}function E(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function k(n,r,o,a){const _=null!=a?a:-1,w=r.length-1;let O=0;for(let F=void 0!==a?65535&n[18]:0;F<w;F++)if("number"==typeof r[F+1]){if(O=r[F],null!=a&&O>=a)break}else r[F]<0&&(n[18]+=65536),(O<_||-1==_)&&(ee(n,o,r,F),n[18]=(4294901760&n[18])+F+2),F++}function ee(n,r,o,a){const h=o[a]<0,_=o[a+1],O=n[h?-o[a]:o[a]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{_.call(O)}finally{}}}else try{_.call(O)}finally{}}class ke{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function pr(n,r,o){const a=_i(n);let h=0;for(;h<o.length;){const _=o[h];if("number"==typeof _){if(0!==_)break;h++;const w=o[h++],O=o[h++],F=o[h++];a?n.setAttribute(r,O,F,w):r.setAttributeNS(w,O,F)}else{const w=_,O=o[++h];xi(w)?a&&n.setProperty(r,w,O):a?n.setAttribute(r,w,O):r.setAttribute(w,O),h++}}return h}function Fi(n){return 3===n||4===n||6===n}function xi(n){return 64===n.charCodeAt(0)}function us(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const h=r[a];"number"==typeof h?o=h:0===o||Hs(n,o,h,null,-1===o||2===o?r[++a]:null)}}return n}function Hs(n,r,o,a,h){let _=0,w=n.length;if(-1===r)w=-1;else for(;_<n.length;){const O=n[_++];if("number"==typeof O){if(O===r){w=-1;break}if(O>r){w=_-1;break}}}for(;_<n.length;){const O=n[_];if("number"==typeof O)break;if(O===o){if(null===a)return void(null!==h&&(n[_+1]=h));if(a===n[_+1])return void(n[_+2]=h)}_++,null!==a&&_++,null!==h&&_++}-1!==w&&(n.splice(w,0,r),_=w+1),n.splice(_++,0,o),null!==a&&n.splice(_++,0,a),null!==h&&n.splice(_++,0,h)}function En(n){return-1!==n}function Bi(n){return 32767&n}function Ts(n,r){let o=function $i(n){return n>>16}(n),a=r;for(;o>0;)a=a[15],o--;return a}let rr=!0;function hr(n){const r=rr;return rr=n,r}let In=0;function Vo(n,r){const o=N(n,r);if(-1!==o)return o;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Sr(a.data,n),Sr(r,null),Sr(a.blueprint,null));const h=D(n,r),_=n.injectorIndex;if(En(h)){const w=Bi(h),O=Ts(h,r),F=O[1].data;for(let se=0;se<8;se++)r[_+se]=O[w+se]|F[w+se]}return r[_+8]=h,_}function Sr(n,r){n.push(0,0,0,0,0,0,0,0,r)}function N(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function D(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,a=null,h=r;for(;null!==h;){const _=h[1],w=_.type;if(a=2===w?_.declTNode:1===w?h[6]:null,null===a)return-1;if(o++,h=h[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function I(n,r,o){!function Ys(n,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(Wn)&&(a=o[Wn]),null==a&&(a=o[Wn]=In++);const h=255&a;r.data[n+(h>>5)]|=1<<h}(n,r,o)}function ne(n,r,o){if(o&qn.Optional)return n;Ne(r,"NodeInjector")}function me(n,r,o,a){if(o&qn.Optional&&void 0===a&&(a=null),0==(o&(qn.Self|qn.Host))){const h=n[9],_=wr(void 0);try{return h?h.get(r,a,o&qn.Optional):rs(r,a,o&qn.Optional)}finally{wr(_)}}return ne(a,r,o)}function Be(n,r,o,a=qn.Default,h){if(null!==n){const _=function Mr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Wn)?n[Wn]:void 0;return"number"==typeof r?r>=0?255&r:cn:r}(o);if("function"==typeof _){if(!ue(r,n,a))return a&qn.Host?ne(h,o,a):me(r,o,a,h);try{const w=_(a);if(null!=w||a&qn.Optional)return w;Ne(o)}finally{Le()}}else if("number"==typeof _){let w=null,O=N(n,r),F=-1,se=a&qn.Host?r[16][6]:null;for((-1===O||a&qn.SkipSelf)&&(F=-1===O?D(n,r):r[O+8],-1!==F&&_o(a,!1)?(w=r[1],O=Bi(F),r=Ts(F,r)):O=-1);-1!==O;){const fe=r[1];if(Gn(_,O,fe.data)){const Ve=Rn(O,r,o,w,a,se);if(Ve!==Ke)return Ve}F=r[O+8],-1!==F&&_o(a,r[1].data[O+8]===se)&&Gn(_,O,r)?(w=fe,O=Bi(F),r=Ts(F,r)):O=-1}}}return me(r,o,a,h)}const Ke={};function cn(){return new ai(K(),We())}function Rn(n,r,o,a,h,_){const w=r[1],O=w.data[n+8],fe=Fr(O,w,o,null==a?fs(O)&&rr:a!=w&&0!=(3&O.type),h&qn.Host&&_===O);return null!==fe?_r(r,w,fe,O):Ke}function Fr(n,r,o,a,h){const _=n.providerIndexes,w=r.data,O=1048575&_,F=n.directiveStart,fe=_>>20,mt=h?O+fe:n.directiveEnd;for(let Vt=a?O:O+fe;Vt<mt;Vt++){const An=w[Vt];if(Vt<F&&o===An||Vt>=F&&An.type===o)return Vt}if(h){const Vt=w[F];if(Vt&&ps(Vt)&&Vt.type===o)return F}return null}function _r(n,r,o,a){let h=n[o];const _=r.data;if(function qe(n){return n instanceof ke}(h)){const w=h;w.resolving&&function Ln(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new nn(-200,`Circular dependency in DI detected for ${n}${o}`)}(Jt(_[o]));const O=hr(w.canSeeViewProviders);w.resolving=!0;const F=w.injectImpl?wr(w.injectImpl):null;ue(n,a,qn.Default);try{h=n[o]=w.factory(void 0,_,n,a),r.firstCreatePass&&o>=a.directiveStart&&function Rt(n,r,o){const{ngOnChanges:a,ngOnInit:h,ngDoCheck:_}=r.type.prototype;if(a){const w=Us(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,w),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,w)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),_&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,_))}(o,_[o],r)}finally{null!==F&&wr(F),hr(O),w.resolving=!1,Le()}}return h}function Gn(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function _o(n,r){return!(n&qn.Self||n&qn.Host&&r)}class ai{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return Be(this._tNode,this._lView,r,a,o)}}function Aa(n){return an(()=>{const r=n.prototype.constructor,o=r[jt]||Ns(r),a=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==a;){const _=h[jt]||Ns(h);if(_&&_!==o)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function Ns(n){return pn(n)?()=>{const r=Ns(Et(n));return r&&r()}:Ni(n)}function Qn(n){return function W(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const a=o.length;let h=0;for(;h<a;){const _=o[h];if(Fi(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<a&&"string"==typeof o[h];)h++;else{if(_===r)return o[h+1];h+=2}}}return null}(K(),n)}const xa="__parameters__";function Za(n,r,o){return an(()=>{const a=function Fl(n){return function(...o){if(n){const a=n(...o);for(const h in a)this[h]=a[h]}}}(r);function h(..._){if(this instanceof h)return a.apply(this,_),this;const w=new h(..._);return O.annotation=w,O;function O(F,se,fe){const Ve=F.hasOwnProperty(xa)?F[xa]:Object.defineProperty(F,xa,{value:[]})[xa];for(;Ve.length<=fe;)Ve.push(null);return(Ve[fe]=Ve[fe]||[]).push(w),F}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class lo{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Ot({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const na=new lo("AnalyzeForEntryComponents");function So(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let a=n[o];Array.isArray(a)?(r===n&&(r=n.slice(0,o)),So(a,r)):r!==n&&r.push(a)}return r}function Qo(n,r){n.forEach(o=>Array.isArray(o)?Qo(o,r):r(o))}function Jl(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function yu(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function fo(n,r){const o=[];for(let a=0;a<n;a++)o.push(r);return o}function po(n,r,o){let a=Ua(n,r);return a>=0?n[1|a]=o:(a=~a,function Il(n,r,o,a){let h=n.length;if(h==r)n.push(o,a);else if(1===h)n.push(a,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=o,n[r+1]=a}}(n,a,r,o)),a}function Qa(n,r){const o=Ua(n,r);if(o>=0)return n[1|o]}function Ua(n,r){return function Ba(n,r,o){let a=0,h=n.length>>o;for(;h!==a;){const _=a+(h-a>>1),w=n[_<<o];if(r===w)return _<<o;w>r?h=_:a=_+1}return~(h<<o)}(n,r,1)}const oo={},ja="__NG_DI_FLAG__",bo="ngTempTokenPath",hl=/\n/gm,ba="__source",Ul=Xe({provide:String,useValue:Xe});let Ma;function V(n){const r=Ma;return Ma=n,r}function Y(n,r=qn.Default){if(void 0===Ma)throw new nn(203,"");return null===Ma?rs(n,void 0,r):Ma.get(n,r&qn.Optional?null:void 0,r)}function de(n,r=qn.Default){return(function Tr(){return Hr}()||Y)(Et(n),r)}const Mt=de;function zt(n){const r=[];for(let o=0;o<n.length;o++){const a=Et(n[o]);if(Array.isArray(a)){if(0===a.length)throw new nn(900,"");let h,_=qn.Default;for(let w=0;w<a.length;w++){const O=a[w],F=Lr(O);"number"==typeof F?-1===F?h=O.token:_|=F:h=O}r.push(de(h,_))}else r.push(de(a))}return r}function kn(n,r){return n[ja]=r,n.prototype[ja]=r,n}function Lr(n){return n[ja]}const Hi=kn(Za("Inject",n=>({token:n})),-1),mi=kn(Za("Optional"),8),ri=kn(Za("SkipSelf"),4);let Ao,$l;function Xs(n){var r;return(null===(r=function qu(){if(void 0===Ao&&(Ao=null,dr.trustedTypes))try{Ao=dr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ao}())||void 0===r?void 0:r.createHTML(n))||n}function $o(n){var r;return(null===(r=function fl(){if(void 0===$l&&($l=null,dr.trustedTypes))try{$l=dr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return $l}())||void 0===r?void 0:r.createHTML(n))||n}class As{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Zu extends As{getTypeName(){return"HTML"}}class eu extends As{getTypeName(){return"Style"}}class jl extends As{getTypeName(){return"Script"}}class Hl extends As{getTypeName(){return"URL"}}class Yu extends As{getTypeName(){return"ResourceURL"}}function ga(n){return n instanceof As?n.changingThisBreaksApplicationSecurity:n}function Gl(n,r){const o=tu(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}function tu(n){return n instanceof As&&n.getTypeName()||null}function pl(n){return new Zu(n)}function Sc(n){return new eu(n)}function nu(n){return new jl(n)}function ru(n){return new Hl(n)}function Qu(n){return new Yu(n)}class gl{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const o=(new window.DOMParser).parseFromString(Xs(r),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(r):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class ma{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const a=this.inertDocument.createElement("body");o.appendChild(a)}}getInertBodyElement(r){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Xs(r),o;const a=this.inertDocument.createElement("body");return a.innerHTML=Xs(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const o=r.attributes;for(let h=o.length-1;0<h;h--){const w=o.item(h).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&r.removeAttribute(w)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const Cu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Oa(n){return(n=String(n)).match(Cu)||n.match(bu)?n:"unsafe:"+n}function Na(n){const r={};for(const o of n.split(","))r[o]=!0;return r}function wa(...n){const r={};for(const o of n)for(const a in o)o.hasOwnProperty(a)&&(r[a]=!0);return r}const Ju=Na("area,br,col,hr,img,wbr"),Tu=Na("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zl=Na("rp,rt"),wu=wa(Ju,wa(Tu,Na("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wa(zl,Na("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wa(zl,Tu)),Iu=Na("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Su=Na("srcset"),ec=wa(Iu,Su,Na("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Na("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yl=Na("script,style,template");class dd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let o=r.firstChild,a=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?a=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,a&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let h=this.checkClobberedElement(o,o.nextSibling);if(h){o=h;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(r){const o=r.nodeName.toLowerCase();if(!wu.hasOwnProperty(o))return this.sanitizedSomething=!0,!yl.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const a=r.attributes;for(let h=0;h<a.length;h++){const _=a.item(h),w=_.name,O=w.toLowerCase();if(!ec.hasOwnProperty(O)){this.sanitizedSomething=!0;continue}let F=_.value;Iu[O]&&(F=Oa(F)),Su[O]&&(n=F,F=(n=String(n)).split(",").map(r=>Oa(r.trim())).join(", ")),this.buf.push(" ",w,'="',Ga(F),'"')}var n;return this.buf.push(">"),!0}endElement(r){const o=r.nodeName.toLowerCase();wu.hasOwnProperty(o)&&!Ju.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(r){this.buf.push(Ga(r))}checkClobberedElement(r,o){if(o&&(r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return o}}const jo=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Au=/([^\#-~ |!])/g;function Ga(n){return n.replace(/&/g,"&amp;").replace(jo,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Au,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ia;function ka(n,r){let o=null;try{Ia=Ia||function iu(n){const r=new ma(n);return function ua(){try{return!!(new window.DOMParser).parseFromString(Xs(""),"text/html")}catch(n){return!1}}()?new gl(r):r}(n);let a=r?String(r):"";o=Ia.getInertBodyElement(a);let h=5,_=a;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,a=_,_=o.innerHTML,o=Ia.getInertBodyElement(a)}while(a!==_);return Xs((new dd).sanitizeChildren(_l(o)||o))}finally{if(o){const a=_l(o)||o;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function _l(n){return"content"in n&&function eo(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var uo=(()=>((uo=uo||{})[uo.NONE=0]="NONE",uo[uo.HTML=1]="HTML",uo[uo.STYLE=2]="STYLE",uo[uo.SCRIPT=3]="SCRIPT",uo[uo.URL=4]="URL",uo[uo.RESOURCE_URL=5]="RESOURCE_URL",uo))();function tl(n){const r=Ho();return r?$o(r.sanitize(uo.HTML,n)||""):Gl(n,"HTML")?$o(ga(n)):ka(Os(),Pt(n))}function xu(n){const r=Ho();return r?r.sanitize(uo.URL,n)||"":Gl(n,"URL")?ga(n):Oa(Pt(n))}function Ho(){const n=We();return n&&n[12]}const hs="__ngContext__";function oa(n,r){n[hs]=r}function nl(n){const r=function Pu(n){return n[hs]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function lu(n){return n.ngOriginalError}function Nu(n,...r){n.error(...r)}class Sa{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r),a=function Ou(n){return n&&n.ngErrorLogger||Nu}(r);a(this._console,"ERROR",r),o&&a(this._console,"ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&lu(r);for(;o&&lu(o);)o=lu(o);return o||null}}const il=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(dr))();function za(n){return n instanceof Function?n():n}var p=(()=>((p=p||{})[p.Important=1]="Important",p[p.DashCase=2]="DashCase",p))();function A(n,r){return undefined(n,r)}function bt(n){const r=n[3];return Yr(r)?r[3]:r}function Rr(n){return li(n[13])}function yi(n){return li(n[4])}function li(n){for(;null!==n&&!Yr(n);)n=n[4];return n}function f(n,r,o,a,h){if(null!=a){let _,w=!1;Yr(a)?_=a:cs(a)&&(w=!0,a=a[0]);const O=q(a);0===n&&null!==o?null==h?Lh(r,o,O):Wl(r,o,O,h||null,!0):1===n&&null!==o?Wl(r,o,O,h||null,!0):2===n?function np(n,r,o){const a=Vh(n,r);a&&function p_(n,r,o,a){_i(n)?n.removeChild(r,o,a):r.removeChild(o)}(n,a,r,o)}(r,O,w):3===n&&r.destroyNode(O),null!=_&&function ip(n,r,o,a,h){const _=o[7];_!==q(o)&&f(r,n,a,_,h);for(let O=10;O<o.length;O++){const F=o[O];Xd(F[1],F,n,r,a,_)}}(r,n,_,o,h)}}function M(n,r,o){if(_i(n))return n.createElement(r,o);{const a=null!==o?function ao(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(o):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function vn(n,r){const o=n[9],a=o.indexOf(r),h=r[3];1024&r[2]&&(r[2]&=-1025,ts(h,-1)),o.splice(a,1)}function Dn(n,r){if(n.length<=10)return;const o=10+r,a=n[o];if(a){const h=a[17];null!==h&&h!==n&&vn(h,a),r>0&&(n[o-1][4]=a[4]);const _=yu(n,10+r);!function j(n,r){Xd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const w=_[19];null!==w&&w.detachView(_[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function fr(n,r){if(!(256&r[2])){const o=r[11];_i(o)&&o.destroyNode&&Xd(n,r,o,3,null,null),function Ze(n){let r=n[13];if(!r)return ci(n[1],n);for(;r;){let o=null;if(cs(r))o=r[13];else{const a=r[10];a&&(o=a)}if(!o){for(;r&&!r[4]&&r!==n;)cs(r)&&ci(r[1],r),r=r[3];null===r&&(r=n),cs(r)&&ci(r[1],r),o=r&&r[4]}r=o}}(r)}}function ci(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function aa(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let a=0;a<o.length;a+=2){const h=r[o[a]];if(!(h instanceof ke)){const _=o[a+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const O=h[_[w]],F=_[w+1];try{F.call(O)}finally{}}else try{_.call(h)}finally{}}}}(n,r),function ws(n,r){const o=n.cleanup,a=r[7];let h=-1;if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const w=o[_+1],O="function"==typeof w?w(r):q(r[w]),F=a[h=o[_+2]],se=o[_+3];"boolean"==typeof se?O.removeEventListener(o[_],F,se):se>=0?a[h=se]():a[h=-se].unsubscribe(),_+=2}else{const w=a[h=o[_+1]];o[_].call(w)}if(null!==a){for(let _=h+1;_<a.length;_++)a[_]();r[7]=null}}(n,r),1===r[1].type&&_i(r[11])&&r[11].destroy();const o=r[17];if(null!==o&&Yr(r[3])){o!==r[3]&&vn(o,r);const a=r[19];null!==a&&a.detachView(n)}}}function Fu(n,r,o){return function Vc(n,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[0];if(2&a.flags){const h=n.data[a.directiveStart].encapsulation;if(h===Gt.None||h===Gt.Emulated)return null}return Cn(a,o)}(n,r.parent,o)}function Wl(n,r,o,a,h){_i(n)?n.insertBefore(r,o,a,h):r.insertBefore(o,a,h)}function Lh(n,r,o){_i(n)?n.appendChild(r,o):r.appendChild(o)}function em(n,r,o,a,h){null!==a?Wl(n,r,o,a,h):Lh(n,r,o)}function Vh(n,r){return _i(n)?n.parentNode(r):r.parentNode}function tm(n,r,o){return rm(n,r,o)}let rm=function nm(n,r,o){return 40&n.type?Cn(n,o):null};function Uh(n,r,o,a){const h=Fu(n,a,r),_=r[11],O=tm(a.parent||r[6],a,r);if(null!=h)if(Array.isArray(o))for(let F=0;F<o.length;F++)em(_,h,o[F],O,!1);else em(_,h,o,O,!1)}function Bh(n,r){if(null!==r){const o=r.type;if(3&o)return Cn(r,n);if(4&o)return tp(-1,n[r.index]);if(8&o){const a=r.child;if(null!==a)return Bh(n,a);{const h=n[r.index];return Yr(h)?tp(-1,h):q(h)}}if(32&o)return A(r,n)()||q(n[r.index]);{const a=ep(n,r);return null!==a?Array.isArray(a)?a[0]:Bh(bt(n[16]),a):Bh(n,r.next)}}return null}function ep(n,r){return null!==r?n[16][6].projection[r.projection]:null}function tp(n,r){const o=10+n+1;if(o<r.length){const a=r[o],h=a[1].firstChild;if(null!==h)return Bh(a,h)}return r[7]}function $h(n,r,o,a,h,_,w){for(;null!=o;){const O=a[o.index],F=o.type;if(w&&0===r&&(O&&oa(q(O),a),o.flags|=4),64!=(64&o.flags))if(8&F)$h(n,r,o.child,a,h,_,!1),f(r,n,h,O,_);else if(32&F){const se=A(o,a);let fe;for(;fe=se();)f(r,n,h,fe,_);f(r,n,h,O,_)}else 16&F?fa(n,r,a,o,h,_):f(r,n,h,O,_);o=w?o.projectionNext:o.next}}function Xd(n,r,o,a,h,_){$h(o,a,n.firstChild,r,h,_,!1)}function fa(n,r,o,a,h,_){const w=o[16],F=w[6].projection[a.projection];if(Array.isArray(F))for(let se=0;se<F.length;se++)f(r,n,h,F[se],_);else $h(n,r,F,w[3],h,_,!0)}function jh(n,r,o){_i(n)?n.setAttribute(r,"style",o):r.style.cssText=o}function uu(n,r,o){_i(n)?""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o):r.className=o}function op(n,r,o){let a=n.length;for(;;){const h=n.indexOf(r,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const _=r.length;if(h+_===a||n.charCodeAt(h+_)<=32)return h}o=h+1}}const ap="ng-template";function Hh(n,r,o){let a=0;for(;a<n.length;){let h=n[a++];if(o&&"class"===h){if(h=n[a],-1!==op(h.toLowerCase(),r,0))return!0}else if(1===h){for(;a<n.length&&"string"==typeof(h=n[a++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function sc(n){return 4===n.type&&n.value!==ap}function Uc(n,r,o){return r===(4!==n.type||o?n.value:ap)}function Bc(n,r,o){let a=4;const h=n.attrs||[],_=function om(n){for(let r=0;r<n.length;r++)if(Fi(n[r]))return r;return n.length}(h);let w=!1;for(let O=0;O<r.length;O++){const F=r[O];if("number"!=typeof F){if(!w)if(4&a){if(a=2|1&a,""!==F&&!Uc(n,F,o)||""===F&&1===r.length){if(Wa(a))return!1;w=!0}}else{const se=8&a?F:r[++O];if(8&a&&null!==n.attrs){if(!Hh(n.attrs,se,o)){if(Wa(a))return!1;w=!0}continue}const Ve=sm(8&a?"class":F,h,sc(n),o);if(-1===Ve){if(Wa(a))return!1;w=!0;continue}if(""!==se){let mt;mt=Ve>_?"":h[Ve+1].toLowerCase();const Vt=8&a?mt:null;if(Vt&&-1!==op(Vt,se,0)||2&a&&se!==mt){if(Wa(a))return!1;w=!0}}}}else{if(!w&&!Wa(a)&&!Wa(F))return!1;if(w&&Wa(F))continue;w=!1,a=F|1&a}}return Wa(a)||w}function Wa(n){return 0==(1&n)}function sm(n,r,o,a){if(null===r)return-1;let h=0;if(a||!o){let _=!1;for(;h<r.length;){const w=r[h];if(w===n)return h;if(3===w||6===w)_=!0;else{if(1===w||2===w){let O=r[++h];for(;"string"==typeof O;)O=r[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=_?1:2}return-1}return function am(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const a=n[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,n)}function Gh(n,r,o=!1){for(let a=0;a<r.length;a++)if(Bc(n,r[a],o))return!0;return!1}function m_(n,r){e:for(let o=0;o<r.length;o++){const a=r[o];if(n.length===a.length){for(let h=0;h<n.length;h++)if(n[h]!==a[h])continue e;return!0}}return!1}function up(n,r){return n?":not("+r.trim()+")":r}function lm(n){let r=n[0],o=1,a=2,h="",_=!1;for(;o<n.length;){let w=n[o];if("string"==typeof w)if(2&a){const O=n[++o];h+="["+w+(O.length>0?'="'+O+'"':"")+"]"}else 8&a?h+="."+w:4&a&&(h+=" "+w);else""!==h&&!Wa(w)&&(r+=up(_,h),h=""),a=w,_=_||!Wa(a);o++}return""!==h&&(r+=up(_,h)),r}const Li={};function um(n){cp(Mn(),We(),mn()+n,!1)}function cp(n,r,o,a){if(!a)if(3==(3&r[2])){const _=n.preOrderCheckHooks;null!==_&&B(r,_,o)}else{const _=n.preOrderHooks;null!==_&&b(r,_,0,o)}Tn(o)}function Wh(n,r){return n<<17|r<<2}function ql(n){return n>>17&32767}function cu(n){return 2|n}function du(n){return(131068&n)>>2}function dp(n,r){return-131069&n|r<<2}function fp(n){return 1|n}function Ep(n,r){const o=n.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const h=o[a],_=o[a+1];if(-1!==_){const w=n.data[_];_e(h),w.contentQueries(2,r[_],_)}}}function ih(n,r,o,a,h,_,w,O,F,se){const fe=r.blueprint.slice();return fe[0]=h,fe[2]=140|a,ro(fe),fe[3]=fe[15]=n,fe[8]=o,fe[10]=w||n&&n[10],fe[11]=O||n&&n[11],fe[12]=F||n&&n[12]||null,fe[9]=se||n&&n[9]||null,fe[6]=_,fe[16]=2==r.type?n[16]:fe,fe}function Id(n,r,o,a,h){let _=n.data[r];if(null===_)_=function sh(n,r,o,a,h){const _=be(),w=Ht(),F=n.data[r]=function wp(n,r,o,a,h,_){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,o,r,a,h);return null===n.firstChild&&(n.firstChild=F),null!==_&&(w?null==_.child&&null!==F.parent&&(_.child=F):null===_.next&&(_.next=F)),F}(n,r,o,a,h),function S(){return kr.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=o,_.value=a,_.attrs=h;const w=function Ue(){const n=kr.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===w?-1:w.injectorIndex}return rt(_,!0),_}function Lo(n,r,o,a){if(0===o)return-1;const h=r.length;for(let _=0;_<o;_++)r.push(a),n.blueprint.push(a),n.data.push(null);return h}function oh(n,r,o){we(r);try{const a=n.viewQuery;null!==a&&kp(1,a,o);const h=n.template;null!==h&&vm(n,r,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ep(n,r),n.staticViewQueries&&kp(2,n.viewQuery,o);const _=n.components;null!==_&&function _m(n,r){for(let o=0;o<r.length;o++)O_(n,r[o])}(r,_)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,_t()}}function Sd(n,r,o,a){const h=r[2];if(256!=(256&h)){we(r);try{ro(r),function is(n){return kr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&vm(n,r,o,2,a);const w=3==(3&h);if(w){const se=n.preOrderCheckHooks;null!==se&&B(r,se,null)}else{const se=n.preOrderHooks;null!==se&&b(r,se,0,null),E(r,0)}if(function P_(n){for(let r=Rr(n);null!==r;r=yi(r)){if(!r[2])continue;const o=r[9];for(let a=0;a<o.length;a++){const h=o[a],_=h[3];0==(1024&h[2])&&ts(_,1),h[2]|=1024}}}(r),function Im(n){for(let r=Rr(n);null!==r;r=yi(r))for(let o=10;o<r.length;o++){const a=r[o],h=a[1];Yi(a)&&Sd(h,a,h.template,a[8])}}(r),null!==n.contentQueries&&Ep(n,r),w){const se=n.contentCheckHooks;null!==se&&B(r,se)}else{const se=n.contentHooks;null!==se&&b(r,se,1),E(r,1)}!function ym(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const h=o[a];if(h<0)Tn(~h);else{const _=h,w=o[++a],O=o[++a];z(w,_),O(2,r[_])}}}finally{Tn(-1)}}(n,r);const O=n.components;null!==O&&function I_(n,r){for(let o=0;o<r.length;o++)Sm(n,r[o])}(r,O);const F=n.viewQuery;if(null!==F&&kp(2,F,a),w){const se=n.viewCheckHooks;null!==se&&B(r,se)}else{const se=n.viewHooks;null!==se&&b(r,se,2),E(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,ts(r[3],-1))}finally{_t()}}}function S_(n,r,o,a){const h=r[10],w=$r(r);try{!w&&h.begin&&h.begin(),w&&oh(n,r,a),Sd(n,r,o,a)}finally{!w&&h.end&&h.end()}}function vm(n,r,o,a,h){const _=mn(),w=2&a;try{Tn(-1),w&&r.length>20&&cp(n,r,20,!1),o(a,h)}finally{Tn(_)}}function Cp(n,r,o){if(Wr(r)){const h=r.directiveEnd;for(let _=r.directiveStart;_<h;_++){const w=n.data[_];w.contentQueries&&w.contentQueries(1,o[_],_)}}}function bp(n,r,o){!G()||(function bm(n,r,o,a){const h=o.directiveStart,_=o.directiveEnd;n.firstCreatePass||Vo(o,r),oa(a,r);const w=o.initialInputs;for(let O=h;O<_;O++){const F=n.data[O],se=ps(F);se&&Pp(r,o,F);const fe=_r(r,n,O,o);oa(fe,r),null!==w&&sf(0,O-h,fe,F,0,w),se&&(ni(o.index,r)[8]=fe)}}(n,r,o,Cn(o,r)),128==(128&o.flags)&&function Tm(n,r,o){const a=o.directiveStart,h=o.directiveEnd,w=o.index,O=function J(){return kr.lFrame.currentDirectiveIndex}();try{Tn(w);for(let F=a;F<h;F++){const se=n.data[F],fe=r[F];ye(F),(null!==se.hostBindings||0!==se.hostVars||null!==se.hostAttrs)&&Ap(se,fe)}}finally{Tn(-1),ye(O)}}(n,r,o))}function Dd(n,r,o=Cn){const a=r.localNames;if(null!==a){let h=r.index+1;for(let _=0;_<a.length;_+=2){const w=a[_+1],O=-1===w?o(r,n):n[w];n[h++]=O}}}function Em(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=ah(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function ah(n,r,o,a,h,_,w,O,F,se){const fe=20+a,Ve=fe+h,mt=function Tp(n,r){const o=[];for(let a=0;a<r;a++)o.push(a<n?null:Li);return o}(fe,Ve),Vt="function"==typeof se?se():se;return mt[1]={type:n,blueprint:mt,template:o,queries:null,viewQuery:O,declTNode:r,data:mt.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Ve,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:F,consts:Vt,incompleteFirstPass:!1}}function ef(n,r,o,a){const h=xm(r);null===o?h.push(a):(h.push(o),n.firstCreatePass&&Md(n).push(a,h.length-1))}function Ip(n,r,o){for(let a in n)if(n.hasOwnProperty(a)){const h=n[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(r,h):o[a]=[r,h]}return o}function ol(n,r,o,a,h,_,w,O){const F=Cn(r,o);let fe,se=r.inputs;!O&&null!=se&&(fe=se[a])?(cf(n,o,fe,a,h),fs(r)&&function Sp(n,r){const o=ni(r,n);16&o[2]||(o[2]|=64)}(o,r.index)):3&r.type&&(a=function Cm(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),h=null!=w?w(h,r.value||"",a):h,_i(_)?_.setProperty(F,a,h):xi(a)||(F.setProperty?F.setProperty(a,h):F[a]=h))}function lc(n,r,o,a){let h=!1;if(G()){const _=function M_(n,r,o){const a=n.directiveRegistry;let h=null;if(a)for(let _=0;_<a.length;_++){const w=a[_];Gh(o,w.selectors,!1)&&(h||(h=[]),I(Vo(o,r),n,w.type),ps(w)?(rf(n,o),h.unshift(w)):h.push(w))}return h}(n,r,o),w=null===a?null:{"":-1};if(null!==_){h=!0,Mp(o,n.data.length,_.length);for(let fe=0;fe<_.length;fe++){const Ve=_[fe];Ve.providersResolver&&Ve.providersResolver(Ve)}let O=!1,F=!1,se=Lo(n,r,_.length,null);for(let fe=0;fe<_.length;fe++){const Ve=_[fe];o.mergedAttrs=us(o.mergedAttrs,Ve.hostAttrs),Rp(n,o,r,se,Ve),xp(se,Ve,w),null!==Ve.contentQueries&&(o.flags|=8),(null!==Ve.hostBindings||null!==Ve.hostAttrs||0!==Ve.hostVars)&&(o.flags|=128);const mt=Ve.type.prototype;!O&&(mt.ngOnChanges||mt.ngOnInit||mt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),O=!0),!F&&(mt.ngOnChanges||mt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),F=!0),se++}!function D_(n,r){const a=r.directiveEnd,h=n.data,_=r.attrs,w=[];let O=null,F=null;for(let se=r.directiveStart;se<a;se++){const fe=h[se],Ve=fe.inputs,mt=null===_||sc(r)?null:Op(Ve,_);w.push(mt),O=Ip(Ve,se,O),F=Ip(fe.outputs,se,F)}null!==O&&(O.hasOwnProperty("class")&&(r.flags|=16),O.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=O,r.outputs=F}(n,o)}w&&function R_(n,r,o){if(r){const a=n.localNames=[];for(let h=0;h<r.length;h+=2){const _=o[r[h+1]];if(null==_)throw new nn(-301,!1);a.push(r[h],_)}}}(o,a,w)}return o.mergedAttrs=us(o.mergedAttrs,o.attrs),h}function tf(n,r,o,a,h,_){const w=_.hostBindings;if(w){let O=n.hostBindingOpCodes;null===O&&(O=n.hostBindingOpCodes=[]);const F=~r.index;(function nf(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(O)!=F&&O.push(F),O.push(a,h,w)}}function Ap(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function rf(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=n;ps(r)&&(o[""]=n)}}function Mp(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Rp(n,r,o,a,h){n.data[a]=h;const _=h.factory||(h.factory=Ni(h.type)),w=new ke(_,ps(h),null);n.blueprint[a]=w,o[a]=w,tf(n,r,0,a,Lo(n,o,h.hostVars,Li),h)}function Pp(n,r,o){const a=Cn(r,n),h=Em(o),_=n[10],w=uh(n,ih(n,h,null,o.onPush?64:16,a,r,_,_.createRenderer(a,o),null,null));n[r.index]=w}function El(n,r,o,a,h,_){const w=Cn(n,r);!function Wc(n,r,o,a,h,_,w){if(null==_)_i(n)?n.removeAttribute(r,h,o):r.removeAttribute(h);else{const O=null==w?Pt(_):w(_,a||"",h);_i(n)?n.setAttribute(r,h,O,o):o?r.setAttributeNS(o,h,O):r.setAttribute(h,O)}}(r[11],w,_,n.value,o,a,h)}function sf(n,r,o,a,h,_){const w=_[r];if(null!==w){const O=a.setInput;for(let F=0;F<w.length;){const se=w[F++],fe=w[F++],Ve=w[F++];null!==O?a.setInput(o,Ve,se,fe):o[fe]=Ve}}}function Op(n,r){let o=null,a=0;for(;a<r.length;){const h=r[a];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],r[a+1])),a+=2}else a+=2;else a+=4}return o}function af(n,r,o,a){return new Array(n,!0,!1,r,null,0,a,o,null,null)}function Sm(n,r){const o=ni(r,n);if(Yi(o)){const a=o[1];80&o[2]?Sd(a,o,a.template,o[8]):o[5]>0&&Np(o)}}function Np(n){for(let a=Rr(n);null!==a;a=yi(a))for(let h=10;h<a.length;h++){const _=a[h];if(1024&_[2]){const w=_[1];Sd(w,_,w.template,_[8])}else _[5]>0&&Np(_)}const o=n[1].components;if(null!==o)for(let a=0;a<o.length;a++){const h=ni(o[a],n);Yi(h)&&h[5]>0&&Np(h)}}function O_(n,r){const o=ni(r,n),a=o[1];(function N_(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(a,o),oh(a,o,o[8])}function uh(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function xd(n){for(;n;){n[2]|=64;const r=bt(n);if(Di(n)&&!r)return n;n=r}return null}function Dm(n){!function dh(n){for(let r=0;r<n.components.length;r++){const o=n.components[r],a=nl(o),h=a[1];S_(h,a,h.template,o)}}(n[8])}function kp(n,r,o){_e(0),r(n,o)}const k_=(()=>Promise.resolve(null))();function xm(n){return n[7]||(n[7]=[])}function Md(n){return n.cleanup||(n.cleanup=[])}function qc(n,r){const o=n[9],a=o?o.get(Sa,null):null;a&&a.handleError(r)}function cf(n,r,o,a,h){for(let _=0;_<o.length;){const w=o[_++],O=o[_++],F=r[w],se=n.data[w];null!==se.setInput?se.setInput(F,h,a,O):F[O]=h}}function Pl(n,r,o){const a=en(r,n);!function d(n,r,o){_i(n)?n.setValue(r,o):r.textContent=o}(n[11],a,o)}function uc(n,r,o){let a=o?n.styles:null,h=o?n.classes:null,_=0;if(null!==r)for(let w=0;w<r.length;w++){const O=r[w];"number"==typeof O?_=O:1==_?h=ft(h,O):2==_&&(a=ft(a,O+": "+r[++w]+";"))}o?n.styles=a:n.stylesWithoutHost=a,o?n.classes=h:n.classesWithoutHost=h}const hh=new lo("INJECTOR",-1);class hu{get(r,o=oo){if(o===oo){const a=new Error(`NullInjectorError: No provider for ${Qe(r)}!`);throw a.name="NullInjectorError",a}return o}}const df=new lo("Set Injector scope."),fh={},Lp={};let Vp;function hf(){return void 0===Vp&&(Vp=new hu),Vp}function Pm(n,r=null,o=null,a){const h=ff(n,r,o,a);return h._resolveInjectorDefTypes(),h}function ff(n,r=null,o=null,a){return new pf(n,o,r||hf(),a)}class pf{constructor(r,o,a,h=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];o&&Qo(o,O=>this.processProvider(O,r,o)),Qo([r],O=>this.processInjectorType(O,[],_)),this.records.set(hh,Pd(void 0,this));const w=this.records.get(df);this.scope=null!=w?w.value:null,this.source=h||("object"==typeof r?null:Qe(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,o=oo,a=qn.Default){this.assertNotDestroyed();const h=V(this),_=wr(void 0);try{if(!(a&qn.SkipSelf)){let O=this.records.get(r);if(void 0===O){const F=function L_(n){return"function"==typeof n||"object"==typeof n&&n instanceof lo}(r)&&ut(r);O=F&&this.injectableDefInScope(F)?Pd(ph(r),fh):null,this.records.set(r,O)}if(null!=O)return this.hydrate(r,O)}return(a&qn.Self?hf():this.parent).get(r,o=a&qn.Optional&&o===oo?null:o)}catch(w){if("NullInjectorError"===w.name){if((w[bo]=w[bo]||[]).unshift(Qe(r)),h)throw w;return function Gr(n,r,o,a){const h=n[bo];throw r[ba]&&h.unshift(r[ba]),n.message=function jr(n,r,o,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=Qe(r);if(Array.isArray(r))h=r.map(Qe).join(" -> ");else if("object"==typeof r){let _=[];for(let w in r)if(r.hasOwnProperty(w)){let O=r[w];_.push(w+":"+("string"==typeof O?JSON.stringify(O):Qe(O)))}h=`{${_.join(", ")}}`}return`${o}${a?"("+a+")":""}[${h}]: ${n.replace(hl,"\n  ")}`}("\n"+n.message,h,o,a),n.ngTokenPath=h,n[bo]=null,n}(w,r,"R3InjectorError",this.source)}throw w}finally{wr(_),V(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,h)=>r.push(Qe(h))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new nn(205,!1)}processInjectorType(r,o,a){if(!(r=Et(r)))return!1;let h=Un(r);const _=null==h&&r.ngModule||void 0,w=void 0===_?r:_,O=-1!==a.indexOf(w);if(void 0!==_&&(h=Un(_)),null==h)return!1;if(null!=h.imports&&!O){let fe;a.push(w);try{Qo(h.imports,Ve=>{this.processInjectorType(Ve,o,a)&&(void 0===fe&&(fe=[]),fe.push(Ve))})}finally{}if(void 0!==fe)for(let Ve=0;Ve<fe.length;Ve++){const{ngModule:mt,providers:Vt}=fe[Ve];Qo(Vt,An=>this.processProvider(An,mt,Vt||Fn))}}this.injectorDefTypes.add(w);const F=Ni(w)||(()=>new w);this.records.set(w,Pd(F,fh));const se=h.providers;if(null!=se&&!O){const fe=r;Qo(se,Ve=>this.processProvider(Ve,fe,se))}return void 0!==_&&void 0!==r.providers}processProvider(r,o,a){let h=Od(r=Et(r))?r:Et(r&&r.provide);const _=function Rd(n,r,o){return Nm(n)?Pd(void 0,n.useValue):Pd(gf(n),fh)}(r);if(Od(r)||!0!==r.multi)this.records.get(h);else{let w=this.records.get(h);w||(w=Pd(void 0,fh,!0),w.factory=()=>zt(w.multi),this.records.set(h,w)),h=r,w.multi.push(r)}this.records.set(h,_)}hydrate(r,o){return o.value===fh&&(o.value=Lp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Bp(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Et(r.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function ph(n){const r=ut(n),o=null!==r?r.factory:Ni(n);if(null!==o)return o;if(n instanceof lo)throw new nn(204,!1);if(n instanceof Function)return function Om(n){const r=n.length;if(r>0)throw fo(r,"?"),new nn(204,!1);const o=function xt(n){const r=n&&(n[Yn]||n[Zr]);if(r){const o=function Zt(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new nn(204,!1)}function gf(n,r,o){let a;if(Od(n)){const h=Et(n);return Ni(h)||ph(h)}if(Nm(n))a=()=>Et(n.useValue);else if(function Fm(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...zt(n.deps||[]));else if(function km(n){return!(!n||!n.useExisting)}(n))a=()=>de(Et(n.useExisting));else{const h=Et(n&&(n.useClass||n.provide));if(!function F_(n){return!!n.deps}(n))return Ni(h)||ph(h);a=()=>new h(...zt(n.deps))}return a}function Pd(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Nm(n){return null!==n&&"object"==typeof n&&Ul in n}function Od(n){return"function"==typeof n}let Ol=(()=>{class n{static create(o,a){var h;if(Array.isArray(o))return Pm({name:""},a,o,"");{const _=null!==(h=o.name)&&void 0!==h?h:"";return Pm({name:_},o.parent,o.providers,_)}}}return n.THROW_IF_NOT_FOUND=oo,n.NULL=new hu,n.\u0275prov=Ot({token:n,providedIn:"any",factory:()=>de(hh)}),n.__NG_ELEMENT_ID__=-1,n})();function $m(n,r){ln(nl(n)[1],K())}function Yp(n){let r=function Zp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const a=[n];for(;r;){let h;if(ps(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new nn(903,"");h=r.\u0275dir}if(h){if(o){a.push(h);const w=n;w.inputs=Qp(n.inputs),w.declaredInputs=Qp(n.declaredInputs),w.outputs=Qp(n.outputs);const O=h.hostBindings;O&&Jp(n,O);const F=h.viewQuery,se=h.contentQueries;if(F&&$_(n,F),se&&Xp(n,se),gt(n.inputs,h.inputs),gt(n.declaredInputs,h.declaredInputs),gt(n.outputs,h.outputs),ps(h)&&h.data.animation){const fe=n.data;fe.animation=(fe.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let w=0;w<_.length;w++){const O=_[w];O&&O.ngInherit&&O(n),O===Yp&&(o=!1)}}r=Object.getPrototypeOf(r)}!function B_(n){let r=0,o=null;for(let a=n.length-1;a>=0;a--){const h=n[a];h.hostVars=r+=h.hostVars,h.hostAttrs=us(h.hostAttrs,o=us(o,h.hostAttrs))}}(a)}function Qp(n){return n===ui?{}:n===Fn?[]:n}function $_(n,r){const o=n.viewQuery;n.viewQuery=o?(a,h)=>{r(a,h),o(a,h)}:r}function Xp(n,r){const o=n.contentQueries;n.contentQueries=o?(a,h,_)=>{r(a,h,_),o(a,h,_)}:r}function Jp(n,r){const o=n.hostBindings;n.hostBindings=o?(a,h)=>{r(a,h),o(a,h)}:r}let Ef=null;function dc(){if(!Ef){const n=dr.Symbol;if(n&&n.iterator)Ef=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const a=r[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Ef=a)}}}return Ef}function Zc(n){return!!yh(n)&&(Array.isArray(n)||!(n instanceof Map)&&dc()in n)}function yh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function fu(n,r,o){return n[r]=o}function Fa(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Lu(n,r,o,a){const h=Fa(n,r,o);return Fa(n,r+1,a)||h}function _h(n,r,o,a){const h=We();return Fa(h,l(),r)&&(Mn(),El(hn(),h,n,r,o,a)),_h}function rg(n,r,o,a,h,_,w,O){const F=We(),se=Mn(),fe=n+20,Ve=se.firstCreatePass?function ng(n,r,o,a,h,_,w,O,F){const se=r.consts,fe=Id(r,n,4,w||null,Ti(se,O));lc(r,o,fe,Ti(se,F)),ln(r,fe);const Ve=fe.tViews=ah(2,fe,a,h,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,se);return null!==r.queries&&(r.queries.template(r,fe),Ve.queries=r.queries.embeddedTView(fe)),fe}(fe,se,F,r,o,a,h,_,w):se.data[fe];rt(Ve,!1);const mt=F[11].createComment("");Uh(se,F,mt,Ve),oa(mt,F),uh(F,F[fe]=af(mt,F,mt,Ve)),Ds(Ve)&&bp(se,F,Ve),null!=w&&Dd(F,Ve,O)}function sg(n){return Xr(function Kn(){return kr.lFrame.contextLView}(),20+n)}function Vd(n,r=qn.Default){const o=We();return null===o?de(n,r):Be(K(),o,Et(n),r)}function Mf(){throw new Error("invalid")}function Ch(n,r,o){const a=We();return Fa(a,l(),r)&&ol(Mn(),hn(),a,n,r,a[11],o,!1),Ch}function bh(n,r,o,a,h){const w=h?"class":"style";cf(n,o,r.inputs[w],w,a)}function Ud(n,r,o,a){const h=We(),_=Mn(),w=20+n,O=h[11],F=h[w]=M(O,r,function Qt(){return kr.lFrame.currentNamespace}()),se=_.firstCreatePass?function Rf(n,r,o,a,h,_,w){const O=r.consts,se=Id(r,n,2,h,Ti(O,_));return lc(r,o,se,Ti(O,w)),null!==se.attrs&&uc(se,se.attrs,!1),null!==se.mergedAttrs&&uc(se,se.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,se),se}(w,_,h,0,r,o,a):_.data[w];rt(se,!0);const fe=se.mergedAttrs;null!==fe&&pr(O,F,fe);const Ve=se.classes;null!==Ve&&uu(O,F,Ve);const mt=se.styles;return null!==mt&&jh(O,F,mt),64!=(64&se.flags)&&Uh(_,h,F,se),0===function io(){return kr.lFrame.elementDepthCount}()&&oa(F,h),function vo(){kr.lFrame.elementDepthCount++}(),Ds(se)&&(bp(_,h,se),Cp(_,se,h)),null!==a&&Dd(h,se),Ud}function Th(){let n=K();Ht()?Sn():(n=n.parent,rt(n,!1));const r=n;!function Q(){kr.lFrame.elementDepthCount--}();const o=Mn();return o.firstCreatePass&&(ln(o,n),Wr(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Er(n){return 0!=(16&n.flags)}(r)&&bh(o,r,We(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Jr(n){return 0!=(32&n.flags)}(r)&&bh(o,r,We(),r.stylesWithoutHost,!1),Th}function Bd(n,r,o,a){return Ud(n,r,o,a),Th(),Bd}function wh(n,r,o){const a=We(),h=Mn(),_=n+20,w=h.firstCreatePass?function gg(n,r,o,a,h){const _=r.consts,w=Ti(_,a),O=Id(r,n,8,"ng-container",w);return null!==w&&uc(O,w,!0),lc(r,o,O,Ti(_,h)),null!==r.queries&&r.queries.elementStart(r,O),O}(_,h,a,r,o):h.data[_];rt(w,!0);const O=a[_]=a[11].createComment("");return Uh(h,a,O,w),oa(O,a),Ds(w)&&(bp(h,a,w),Cp(h,w,a)),null!=o&&Dd(a,w),wh}function Vu(){let n=K();const r=Mn();return Ht()?Sn():(n=n.parent,rt(n,!1)),r.firstCreatePass&&(ln(r,n),Wr(n)&&r.queries.elementEnd(n)),Vu}function uy(){return We()}function mg(n){return!!n&&"function"==typeof n.then}function cy(n){return!!n&&"function"==typeof n.subscribe}const yg=cy;function _g(n,r,o,a){const h=We(),_=Mn(),w=K();return function dy(n,r,o,a,h,_,w,O){const F=Ds(a),fe=n.firstCreatePass&&Md(n),Ve=r[8],mt=xm(r);let Vt=!0;if(3&a.type||O){const br=Cn(a,r),ii=O?O(br):br,Vn=mt.length,wi=O?xs=>O(q(xs[a.index])):a.index;if(_i(o)){let xs=null;if(!O&&F&&(xs=function Q_(n,r,o,a){const h=n.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const w=h[_];if(w===o&&h[_+1]===a){const O=r[7],F=h[_+2];return O.length>F?O[F]:null}"string"==typeof w&&(_+=2)}return null}(n,r,h,a.index)),null!==xs)(xs.__ngLastListenerFn__||xs).__ngNextListenerFn__=_,xs.__ngLastListenerFn__=_,Vt=!1;else{_=Eg(a,r,Ve,_,!1);const yo=o.listen(ii,h,_);mt.push(_,yo),fe&&fe.push(h,wi,Vn,Vn+1)}}else _=Eg(a,r,Ve,_,!0),ii.addEventListener(h,_,w),mt.push(_),fe&&fe.push(h,wi,Vn,w)}else _=Eg(a,r,Ve,_,!1);const An=a.outputs;let ar;if(Vt&&null!==An&&(ar=An[h])){const br=ar.length;if(br)for(let ii=0;ii<br;ii+=2){const Ql=r[ar[ii]][ar[ii+1]].subscribe(_),kh=mt.length;mt.push(_,Ql),fe&&fe.push(h,a.index,kh,-(kh+1))}}}(_,h,h[11],w,n,r,!!o,a),_g}function hy(n,r,o,a){try{return!1!==o(a)}catch(h){return qc(n,h),!1}}function Eg(n,r,o,a,h){return function _(w){if(w===Function)return a;const O=2&n.flags?ni(n.index,r):r;0==(32&r[2])&&xd(O);let F=hy(r,0,a,w),se=_.__ngNextListenerFn__;for(;se;)F=hy(r,0,se,w)&&F,se=se.__ngNextListenerFn__;return h&&!1===F&&(w.preventDefault(),w.returnValue=!1),F}}function Of(n=1){return function Je(n){return(kr.lFrame.contextLView=function yt(n,r){for(;n>0;)r=r[15],n--;return r}(n,kr.lFrame.contextLView))[8]}(n)}function X_(n,r){let o=null;const a=function lp(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(0==(1&o))return r[o+1]}return null}(n);for(let h=0;h<r.length;h++){const _=r[h];if("*"!==_){if(null===a?Gh(n,_,!0):m_(a,_))return h}else o=h}return o}function fy(n){const r=We()[16][6];if(!r.projection){const a=r.projection=fo(n?n.length:1,null),h=a.slice();let _=r.child;for(;null!==_;){const w=n?X_(_,n):0;null!==w&&(h[w]?h[w].projectionNext=_:a[w]=_,h[w]=_),_=_.next}}}function wo(n,r=0,o){const a=We(),h=Mn(),_=Id(h,20+n,16,null,o||null);null===_.projection&&(_.projection=r),Sn(),64!=(64&_.flags)&&function rp(n,r,o){fa(r[11],0,r,o,Fu(n,o,r),tm(o.parent||r[6],o,r))}(h,a,_)}function Ey(n,r,o,a,h){const _=n[o+1],w=null===r;let O=a?ql(_):du(_),F=!1;for(;0!==O&&(!1===F||w);){const fe=n[O+1];Cy(n[O],r)&&(F=!0,n[O+1]=a?fp(fe):cu(fe)),O=a?ql(fe):du(fe)}F&&(n[o+1]=a?cu(_):fp(_))}function Cy(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Ua(n,r)>=0}const go={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pu(n){return n.substring(go.key,go.keyEnd)}function P0(n){return n.substring(go.value,go.valueEnd)}function Ih(n,r){const o=go.textEnd;return o===r?-1:(r=go.keyEnd=function Nf(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,go.key=r,o),ed(n,r,o))}function by(n,r){const o=go.textEnd;let a=go.key=ed(n,r,o);return o===a?-1:(a=go.keyEnd=function nv(n,r,o){let a;for(;r<o&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,o),a=mc(n,a,o),a=go.value=ed(n,a,o),a=go.valueEnd=function kf(n,r,o){let a=-1,h=-1,_=-1,w=r,O=w;for(;w<o;){const F=n.charCodeAt(w++);if(59===F)return O;34===F||39===F?O=w=$d(n,F,w,o):r===w-4&&85===_&&82===h&&76===a&&40===F?O=w=$d(n,41,w,o):F>32&&(O=w),_=h,h=a,a=-33&F}return O}(n,a,o),mc(n,a,o))}function Tg(n){go.key=0,go.keyEnd=0,go.value=0,go.valueEnd=0,go.textEnd=n.length}function ed(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function mc(n,r,o,a){return(r=ed(n,r,o))<o&&r++,r}function $d(n,r,o,a){let h=-1,_=o;for(;_<a;){const w=n.charCodeAt(_++);if(w==r&&92!==h)return _;h=92==w&&92===h?0:w}throw new Error}function Sh(n,r,o){return kl(n,r,o,!1),Sh}function wg(n,r){return kl(n,r,null,!0),wg}function Zl(n){Da(Ty,iv,n,!1)}function iv(n,r){for(let o=function tv(n){return Tg(n),by(n,ed(n,0,go.textEnd))}(r);o>=0;o=by(r,o))Ty(n,pu(r),P0(r))}function Ff(n){Da(po,Nl,n,!0)}function Nl(n,r){for(let o=function Jc(n){return Tg(n),Ih(n,ed(n,0,go.textEnd))}(r);o>=0;o=Ih(r,o))po(n,pu(r),!0)}function kl(n,r,o,a){const h=We(),_=Mn(),w=x(2);_.firstUpdatePass&&Sg(_,n,w,a),r!==Li&&Fa(h,w,r)&&xg(_,_.data[mn()],h,h[11],n,h[w+1]=function _c(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Qe(ga(n)))),n}(r,o),a,w)}function Da(n,r,o,a){const h=Mn(),_=x(2);h.firstUpdatePass&&Sg(h,null,_,a);const w=We();if(o!==Li&&Fa(w,_,o)){const O=h.data[mn()];if(Gd(O,a)&&!Ig(h,_)){let F=a?O.classesWithoutHost:O.stylesWithoutHost;null!==F&&(o=ft(F,o||"")),bh(h,O,w,o,a)}else!function Vf(n,r,o,a,h,_,w,O){h===Li&&(h=Fn);let F=0,se=0,fe=0<h.length?h[0]:null,Ve=0<_.length?_[0]:null;for(;null!==fe||null!==Ve;){const mt=F<h.length?h[F+1]:void 0,Vt=se<_.length?_[se+1]:void 0;let ar,An=null;fe===Ve?(F+=2,se+=2,mt!==Vt&&(An=Ve,ar=Vt)):null===Ve||null!==fe&&fe<Ve?(F+=2,An=fe):(se+=2,An=Ve,ar=Vt),null!==An&&xg(n,r,o,a,An,ar,w,O),fe=F<h.length?h[F]:null,Ve=se<_.length?_[se]:null}}(h,O,w,w[11],w[_+1],w[_+1]=function Dh(n,r,o){if(null==o||""===o)return Fn;const a=[],h=ga(o);if(Array.isArray(h))for(let _=0;_<h.length;_++)n(a,h[_],!0);else if("object"==typeof h)for(const _ in h)h.hasOwnProperty(_)&&n(a,_,h[_]);else"string"==typeof h&&r(a,h);return a}(n,r,o),a,_)}}function Ig(n,r){return r>=n.expandoStartIndex}function Sg(n,r,o,a){const h=n.data;if(null===h[o+1]){const _=h[mn()],w=Ig(n,o);Gd(_,a)&&null===r&&!w&&(r=!1),r=function Dg(n,r,o,a){const h=Te(n);let _=a?r.residualClasses:r.residualStyles;if(null===h)0===(a?r.classBindings:r.styleBindings)&&(o=Hd(o=jd(null,n,r,o,a),r.attrs,a),_=null);else{const w=r.directiveStylingLast;if(-1===w||n[w]!==h)if(o=jd(h,n,r,o,a),null===_){let F=function Ag(n,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==du(a))return n[ql(a)]}(n,r,a);void 0!==F&&Array.isArray(F)&&(F=jd(null,n,r,F[1],a),F=Hd(F,r.attrs,a),function sv(n,r,o,a){n[ql(o?r.classBindings:r.styleBindings)]=a}(n,r,a,F))}else _=function Lf(n,r,o){let a;const h=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<h;_++)a=Hd(a,n[_].hostAttrs,o);return Hd(a,r.attrs,o)}(n,r,a)}return void 0!==_&&(a?r.residualClasses=_:r.residualStyles=_),o}(h,_,r,a),function R0(n,r,o,a,h,_){let w=_?r.classBindings:r.styleBindings,O=ql(w),F=du(w);n[a]=o;let fe,se=!1;if(Array.isArray(o)){const Ve=o;fe=Ve[1],(null===fe||Ua(Ve,fe)>0)&&(se=!0)}else fe=o;if(h)if(0!==F){const mt=ql(n[O+1]);n[a+1]=Wh(mt,O),0!==mt&&(n[mt+1]=dp(n[mt+1],a)),n[O+1]=function $c(n,r){return 131071&n|r<<17}(n[O+1],a)}else n[a+1]=Wh(O,0),0!==O&&(n[O+1]=dp(n[O+1],a)),O=a;else n[a+1]=Wh(F,0),0===O?O=a:n[F+1]=dp(n[F+1],a),F=a;se&&(n[a+1]=cu(n[a+1])),Ey(n,fe,a,!0),Ey(n,fe,a,!1),function ev(n,r,o,a,h){const _=h?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&Ua(_,r)>=0&&(o[a+1]=fp(o[a+1]))}(r,fe,n,a,_),w=Wh(O,F),_?r.classBindings=w:r.styleBindings=w}(h,_,r,o,w,a)}}function jd(n,r,o,a,h){let _=null;const w=o.directiveEnd;let O=o.directiveStylingLast;for(-1===O?O=o.directiveStart:O++;O<w&&(_=r[O],a=Hd(a,_.hostAttrs,h),_!==n);)O++;return null!==n&&(o.directiveStylingLast=O),a}function Hd(n,r,o){const a=o?1:2;let h=-1;if(null!==r)for(let _=0;_<r.length;_++){const w=r[_];"number"==typeof w?h=w:h===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),po(n,w,!!o||r[++_]))}return void 0===n?null:n}function Ty(n,r,o){po(n,r,ga(o))}function xg(n,r,o,a,h,_,w,O){if(!(3&r.type))return;const F=n.data,se=F[O+1];yc(function hp(n){return 1==(1&n)}(se)?Uf(F,r,o,h,du(se),w):void 0)||(yc(_)||function _d(n){return 2==(2&n)}(se)&&(_=Uf(F,null,o,h,O,w)),function sp(n,r,o,a,h){const _=_i(n);if(r)h?_?n.addClass(o,a):o.classList.add(a):_?n.removeClass(o,a):o.classList.remove(a);else{let w=-1===a.indexOf("-")?void 0:p.DashCase;if(null==h)_?n.removeStyle(o,a,w):o.style.removeProperty(a);else{const O="string"==typeof h&&h.endsWith("!important");O&&(h=h.slice(0,-10),w|=p.Important),_?n.setStyle(o,a,h,w):o.style.setProperty(a,h,O?"important":"")}}}(a,w,en(mn(),o),h,_))}function Uf(n,r,o,a,h,_){const w=null===r;let O;for(;h>0;){const F=n[h],se=Array.isArray(F),fe=se?F[1]:F,Ve=null===fe;let mt=o[h+1];mt===Li&&(mt=Ve?Fn:void 0);let Vt=Ve?Qa(mt,a):fe===a?mt:void 0;if(se&&!yc(Vt)&&(Vt=Qa(F,a)),yc(Vt)&&(O=Vt,w))return O;const An=n[h+1];h=w?ql(An):du(An)}if(null!==r){let F=_?r.residualClasses:r.residualStyles;null!=F&&(O=Qa(F,a))}return O}function yc(n){return void 0!==n}function Gd(n,r){return 0!=(n.flags&(r?16:32))}function wy(n,r=""){const o=We(),a=Mn(),h=n+20,_=a.firstCreatePass?Id(a,h,1,r,null):a.data[h],w=o[h]=function c(n,r){return _i(n)?n.createText(r):n.createTextNode(r)}(o[11],r);Uh(a,o,w,_),rt(_,!1)}function vc(n){return Mg("",n,""),vc}function Mg(n,r,o){const a=We(),h=function Kl(n,r,o,a){return Fa(n,l(),o)?r+Pt(o)+a:Li}(a,n,r,o);return h!==Li&&Pl(a,mn(),h),Mg}function kg(n,r,o){const a=We();if(Fa(a,l(),r)){const _=Mn(),w=hn();ol(_,w,a,n,r,function uf(n,r,o){return(null===n||ps(n))&&(o=function ve(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(o[r.index])),o[11]}(Te(_.data),w,a),o,!0)}return kg}const nd=void 0;var hv=["en",[["a","p"],["AM","PM"],nd],[["AM","PM"],nd,nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nd,"{1} 'at' {0}",nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $y(n){const o=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let Yl={};function Hy(n){const r=function fv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Fg(r);if(o)return o;const a=r.split("-")[0];if(o=Fg(a),o)return o;if("en"===a)return hv;throw new Error(`Missing locale data for the locale "${n}".`)}function Gy(n){return Hy(n)[Mi.PluralCase]}function Fg(n){return n in Yl||(Yl[n]=dr.ng&&dr.ng.common&&dr.ng.common.locales&&dr.ng.common.locales[n]),Yl[n]}var Mi=(()=>((Mi=Mi||{})[Mi.LocaleId=0]="LocaleId",Mi[Mi.DayPeriodsFormat=1]="DayPeriodsFormat",Mi[Mi.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mi[Mi.DaysFormat=3]="DaysFormat",Mi[Mi.DaysStandalone=4]="DaysStandalone",Mi[Mi.MonthsFormat=5]="MonthsFormat",Mi[Mi.MonthsStandalone=6]="MonthsStandalone",Mi[Mi.Eras=7]="Eras",Mi[Mi.FirstDayOfWeek=8]="FirstDayOfWeek",Mi[Mi.WeekendRange=9]="WeekendRange",Mi[Mi.DateFormat=10]="DateFormat",Mi[Mi.TimeFormat=11]="TimeFormat",Mi[Mi.DateTimeFormat=12]="DateTimeFormat",Mi[Mi.NumberSymbols=13]="NumberSymbols",Mi[Mi.NumberFormats=14]="NumberFormats",Mi[Mi.CurrencyCode=15]="CurrencyCode",Mi[Mi.CurrencySymbol=16]="CurrencySymbol",Mi[Mi.CurrencyName=17]="CurrencyName",Mi[Mi.Currencies=18]="Currencies",Mi[Mi.Directionality=19]="Directionality",Mi[Mi.PluralCase=20]="PluralCase",Mi[Mi.ExtraData=21]="ExtraData",Mi))();const Hf="en-US";let zy=Hf;function Dv(n,r,o,a,h){if(n=Et(n),Array.isArray(n))for(let _=0;_<n.length;_++)Dv(n[_],r,o,a,h);else{const _=Mn(),w=We();let O=Od(n)?n:Et(n.provide),F=gf(n);const se=K(),fe=1048575&se.providerIndexes,Ve=se.directiveStart,mt=se.providerIndexes>>20;if(Od(n)||!n.multi){const Vt=new ke(F,h,Vd),An=xv(O,r,h?fe:fe+mt,Ve);-1===An?(I(Vo(se,w),_,O),Av(_,n,r.length),r.push(O),se.directiveStart++,se.directiveEnd++,h&&(se.providerIndexes+=1048576),o.push(Vt),w.push(Vt)):(o[An]=Vt,w[An]=Vt)}else{const Vt=xv(O,r,fe+mt,Ve),An=xv(O,r,fe,fe+mt),ar=Vt>=0&&o[Vt],br=An>=0&&o[An];if(h&&!br||!h&&!ar){I(Vo(se,w),_,O);const ii=function yC(n,r,o,a,h){const _=new ke(n,o,Vd);return _.multi=[],_.index=r,_.componentProviders=0,L0(_,h,a&&!o),_}(h?mC:gC,o.length,h,a,F);!h&&br&&(o[An].providerFactory=ii),Av(_,n,r.length,0),r.push(O),se.directiveStart++,se.directiveEnd++,h&&(se.providerIndexes+=1048576),o.push(ii),w.push(ii)}else Av(_,n,Vt>-1?Vt:An,L0(o[h?An:Vt],F,!h&&a));!h&&a&&br&&o[An].componentProviders++}}}function Av(n,r,o,a){const h=Od(r),_=function Up(n){return!!n.useClass}(r);if(h||_){const F=(_?Et(r.useClass):r).prototype.ngOnDestroy;if(F){const se=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const fe=se.indexOf(o);-1===fe?se.push(o,[a,F]):se[fe+1].push(a,F)}else se.push(o,F)}}}function L0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function xv(n,r,o,a){for(let h=o;h<a;h++)if(r[h]===n)return h;return-1}function gC(n,r,o,a){return Mv(this.multi,[])}function mC(n,r,o,a){const h=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,O=_r(o,o[1],this.providerFactory.index,a);_=O.slice(0,w),Mv(h,_);for(let F=w;F<O.length;F++)_.push(O[F])}else _=[],Mv(h,_);return _}function Mv(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function V0(n,r=[]){return o=>{o.providersResolver=(a,h)=>function pC(n,r,o){const a=Mn();if(a.firstCreatePass){const h=ps(n);Dv(o,a.data,a.blueprint,h,!0),Dv(r,a.data,a.blueprint,h,!1)}}(a,h?h(n):n,r)}}class U0{}class EC{resolveComponentFactory(r){throw function vC(n){const r=Error(`No component factory found for ${Qe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let s_=(()=>{class n{}return n.NULL=new EC,n})();function CC(){return Zf(K(),We())}function Zf(n,r){return new Kg(Cn(n,r))}let Kg=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=CC,n})();function bC(n){return n instanceof Kg?n.nativeElement:n}class $0{}let TC=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function IC(){const n=We(),o=ni(K().index,n);return function wC(n){return n[11]}(cs(o)?o:n)}(),n})(),SC=(()=>{class n{}return n.\u0275prov=Ot({token:n,providedIn:"root",factory:()=>null}),n})();class j0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const H0=new j0("13.3.11"),Rv={};function o_(n,r,o,a,h=!1){for(;null!==o;){const _=r[o.index];if(null!==_&&a.push(q(_)),Yr(_))for(let O=10;O<_.length;O++){const F=_[O],se=F[1].firstChild;null!==se&&o_(F[1],F,se,a)}const w=o.type;if(8&w)o_(n,r,o.child,a);else if(32&w){const O=A(o,r);let F;for(;F=O();)a.push(F)}else if(16&w){const O=ep(r,o);if(Array.isArray(O))a.push(...O);else{const F=bt(r[16]);o_(F[1],F,O,a,!0)}}o=h?o.projectionNext:o.next}return a}class Zg{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return o_(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Yr(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(Dn(r,a),yu(o,a))}this._attachedToViewContainer=!1}fr(this._lView[1],this._lView)}onDestroy(r){ef(this._lView[1],this._lView,null,r)}markForCheck(){xd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function lf(n,r,o){const a=r[10];a.begin&&a.begin();try{Sd(n,r,n.template,o)}catch(h){throw qc(r,h),h}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new nn(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ie(n,r){Xd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new nn(902,"");this._appRef=r}}class DC extends Zg{constructor(r){super(r),this._view=r}detectChanges(){Dm(this._view)}checkNoChanges(){}get context(){return null}}class G0 extends s_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=pt(r);return new Pv(o,this.ngModule)}}function z0(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Pv extends U0{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function zh(n){return n.map(lm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return z0(this.componentDef.inputs)}get outputs(){return z0(this.componentDef.outputs)}create(r,o,a,h){const _=(h=h||this.ngModule)?function xC(n,r){return{get:(o,a,h)=>{const _=n.get(o,Rv,h);return _!==Rv||a===Rv?_:r.get(o,a,h)}}}(r,h.injector):r,w=_.get($0,U),O=_.get(SC,null),F=w.createRenderer(null,this.componentDef),se=this.componentDef.selectors[0][0]||"div",fe=a?function lh(n,r,o){if(_i(n))return n.selectRootElement(r,o===Gt.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(F,a,this.componentDef.encapsulation):M(w.createRenderer(null,this.componentDef),se,function AC(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(se)),Ve=this.componentDef.onPush?576:528,mt=function Kp(n,r){return{components:[],scheduler:n||il,clean:k_,playerHandler:r||null,flags:0}}(),Vt=ah(0,null,null,1,0,null,null,null,null,null),An=ih(null,Vt,mt,Ve,null,null,w,F,O,_);let ar,br;we(An);try{const ii=function qp(n,r,o,a,h,_){const w=o[1];o[20]=n;const F=Id(w,20,2,"#host",null),se=F.mergedAttrs=r.hostAttrs;null!==se&&(uc(F,se,!0),null!==n&&(pr(h,n,se),null!==F.classes&&uu(h,n,F.classes),null!==F.styles&&jh(h,n,F.styles)));const fe=a.createRenderer(n,r),Ve=ih(o,Em(r),null,r.onPush?64:16,o[20],F,a,fe,_||null,null);return w.firstCreatePass&&(I(Vo(F,o),w,r.type),rf(w,F),Mp(F,o.length,1)),uh(o,Ve),o[20]=Ve}(fe,this.componentDef,An,w,F);if(fe)if(a)pr(F,fe,["ng-version",H0.full]);else{const{attrs:Vn,classes:wi}=function Jd(n){const r=[],o=[];let a=1,h=2;for(;a<n.length;){let _=n[a];if("string"==typeof _)2===h?""!==_&&r.push(_,n[++a]):8===h&&o.push(_);else{if(!Wa(h))break;h=_}a++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Vn&&pr(F,fe,Vn),wi&&wi.length>0&&uu(F,fe,wi.join(" "))}if(br=Br(Vt,20),void 0!==o){const Vn=br.projection=[];for(let wi=0;wi<this.ngContentSelectors.length;wi++){const xs=o[wi];Vn.push(null!=xs?Array.from(xs):null)}}ar=function Bm(n,r,o,a,h){const _=o[1],w=function Ad(n,r,o){const a=K();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Rp(n,a,r,Lo(n,r,1,null),o));const h=_r(r,n,a.directiveStart,a);oa(h,r);const _=Cn(a,r);return _&&oa(_,r),h}(_,o,r);if(a.components.push(w),n[8]=w,h&&h.forEach(F=>F(w,r)),r.contentQueries){const F=K();r.contentQueries(1,w,F.directiveStart)}const O=K();return!_.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Tn(O.index),tf(o[1],O,0,O.directiveStart,O.directiveEnd,r),Ap(r,w)),w}(ii,this.componentDef,An,mt,[$m]),oh(Vt,An,null)}finally{_t()}return new RC(this.componentType,ar,Zf(br,An),An,br)}}class RC extends class _C{}{constructor(r,o,a,h,_){super(),this.location=a,this._rootLView=h,this._tNode=_,this.instance=o,this.hostView=this.changeDetectorRef=new DC(h),this.componentType=r}get injector(){return new ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Yf{}class W0{}const Qf=new Map;class Z0 extends Yf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new G0(this);const a=Hn(r);this._bootstrapComponents=za(a.bootstrap),this._r3Injector=ff(r,o,[{provide:Yf,useValue:this},{provide:s_,useValue:this.componentFactoryResolver}],Qe(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,o=Ol.THROW_IF_NOT_FOUND,a=qn.Default){return r===Ol||r===Yf||r===hh?this:this._r3Injector.get(r,o,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Ov extends W0{constructor(r){super(),this.moduleType=r,null!==Hn(r)&&function OC(n){const r=new Set;!function o(a){const h=Hn(a,!0),_=h.id;null!==_&&(function q0(n,r,o){if(r&&r!==o)throw new Error(`Duplicate module registered for ${n} - ${Qe(r)} vs ${Qe(r.name)}`)}(_,Qf.get(_),a),Qf.set(_,a));const w=za(h.imports);for(const O of w)r.has(O)||(r.add(O),o(O))}(n)}(r)}create(r){return new Z0(this.moduleType,r)}}function Y0(n,r,o,a){return eE(We(),fi(),n,r,o,a)}function Q0(n,r,o,a,h){return function tE(n,r,o,a,h,_,w){const O=r+o;return Lu(n,O,h,_)?fu(n,O+2,w?a.call(w,h,_):a(h,_)):Yg(n,O+2)}(We(),fi(),n,r,o,a,h)}function X0(n,r,o,a,h,_){return function nE(n,r,o,a,h,_,w,O){const F=r+o;return function Cf(n,r,o,a,h){const _=Lu(n,r,o,a);return Fa(n,r+2,h)||_}(n,F,h,_,w)?fu(n,F+3,O?a.call(O,h,_,w):a(h,_,w)):Yg(n,F+3)}(We(),fi(),n,r,o,a,h,_)}function J0(n,r,o,a,h,_,w){return function rE(n,r,o,a,h,_,w,O,F){const se=r+o;return function al(n,r,o,a,h,_){const w=Lu(n,r,o,a);return Lu(n,r+2,h,_)||w}(n,se,h,_,w,O)?fu(n,se+4,F?a.call(F,h,_,w,O):a(h,_,w,O)):Yg(n,se+4)}(We(),fi(),n,r,o,a,h,_,w)}function Yg(n,r){const o=n[r];return o===Li?void 0:o}function eE(n,r,o,a,h,_){const w=r+o;return Fa(n,w,h)?fu(n,w+1,_?a.call(_,h):a(h)):Yg(n,w+1)}function sE(n,r){const o=Mn();let a;const h=n+20;o.firstCreatePass?(a=function BC(n,r){if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];if(n===a.name)return a}}(r,o.pipeRegistry),o.data[h]=a,a.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,a.onDestroy)):a=o.data[h];const _=a.factory||(a.factory=Ni(a.type)),w=wr(Vd);try{const O=hr(!1),F=_();return hr(O),function ig(n,r,o,a){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=a}(o,We(),h,F),F}finally{wr(w)}}function oE(n,r,o){const a=n+20,h=We(),_=Xr(h,a);return function Qg(n,r){return n[1].data[r].pure}(h,a)?eE(h,fi(),r,_.transform,o,_):_.transform(o)}function Nv(n){return r=>{setTimeout(n,void 0,r)}}const Tc=class zC extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){var h,_,w;let O=r,F=o||(()=>null),se=a;if(r&&"object"==typeof r){const Ve=r;O=null===(h=Ve.next)||void 0===h?void 0:h.bind(Ve),F=null===(_=Ve.error)||void 0===_?void 0:_.bind(Ve),se=null===(w=Ve.complete)||void 0===w?void 0:w.bind(Ve)}this.__isAsync&&(F=Nv(F),O&&(O=Nv(O)),se&&(se=Nv(se)));const fe=super.subscribe({next:O,error:F,complete:se});return r instanceof Z.w0&&r.add(fe),fe}};function WC(){return this._results[dc()]()}class kv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=dc(),a=kv.prototype;a[o]||(a[o]=WC)}get changes(){return this._changes||(this._changes=new Tc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const h=So(r);(this._changesDetected=!function sa(n,r,o){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let h=n[a],_=r[a];if(o&&(h=o(h),_=o(_)),_!==h)return!1}return!0}(a._results,h,o))&&(a._results=h,a.length=h.length,a.last=h[this.length-1],a.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Xg=(()=>{class n{}return n.__NG_ELEMENT_ID__=ZC,n})();const qC=Xg,KC=class extends qC{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(r){const o=this._declarationTContainer.tViews,a=ih(this._declarationLView,o,r,16,null,o.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(a[19]=_.createEmbeddedView(o)),oh(o,a,r),new Zg(a)}};function ZC(){return a_(K(),We())}function a_(n,r){return 4&n.type?new KC(r,n,Zf(n,r)):null}let l_=(()=>{class n{}return n.__NG_ELEMENT_ID__=YC,n})();function YC(){return uE(K(),We())}const QC=l_,aE=class extends QC{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return Zf(this._hostTNode,this._hostLView)}get injector(){return new ai(this._hostTNode,this._hostLView)}get parentInjector(){const r=D(this._hostTNode,this._hostLView);if(En(r)){const o=Ts(r,this._hostLView),a=Bi(r);return new ai(o[1].data[a+8],o)}return new ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=lE(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,a){const h=r.createEmbeddedView(o||{});return this.insert(h,a),h}createComponent(r,o,a,h,_){const w=r&&!function ia(n){return"function"==typeof n}(r);let O;if(w)O=o;else{const Ve=o||{};O=Ve.index,a=Ve.injector,h=Ve.projectableNodes,_=Ve.ngModuleRef}const F=w?r:new Pv(pt(r)),se=a||this.parentInjector;if(!_&&null==F.ngModule){const mt=(w?se:this.parentInjector).get(Yf,null);mt&&(_=mt)}const fe=F.create(se,h,void 0,_);return this.insert(fe.hostView,O),fe}insert(r,o){const a=r._lView,h=a[1];if(function vi(n){return Yr(n[3])}(a)){const fe=this.indexOf(r);if(-1!==fe)this.detach(fe);else{const Ve=a[3],mt=new aE(Ve,Ve[6],Ve[3]);mt.detach(mt.indexOf(r))}}const _=this._adjustIndex(o),w=this._lContainer;!function lt(n,r,o,a){const h=10+a,_=o.length;a>0&&(o[h-1][4]=r),a<_-10?(r[4]=o[h],Jl(o,10+a,r)):(o.push(r),r[4]=null),r[3]=o;const w=r[17];null!==w&&o!==w&&function tn(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(w,r);const O=r[19];null!==O&&O.insertView(n),r[2]|=128}(h,a,w,_);const O=tp(_,w),F=a[11],se=Vh(F,w[7]);return null!==se&&function re(n,r,o,a,h,_){a[0]=h,a[6]=r,Xd(n,a,o,1,h,_)}(h,w[6],F,a,se,O),r.attachToViewContainerRef(),Jl(Fv(w),_,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=lE(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=Dn(this._lContainer,o);a&&(yu(Fv(this._lContainer),o),fr(a[1],a))}detach(r){const o=this._adjustIndex(r,-1),a=Dn(this._lContainer,o);return a&&null!=yu(Fv(this._lContainer),o)?new Zg(a):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function lE(n){return n[8]}function Fv(n){return n[8]||(n[8]=[])}function uE(n,r){let o;const a=r[n.index];if(Yr(a))o=a;else{let h;if(8&n.type)h=q(a);else{const _=r[11];h=_.createComment("");const w=Cn(n,r);Wl(_,Vh(_,w),h,function g_(n,r){return _i(n)?n.nextSibling(r):r.nextSibling}(_,w),!1)}r[n.index]=o=af(a,r,h,n),uh(r,o)}return new aE(o,n,r)}class Lv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Lv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,h=[];for(let _=0;_<a;_++){const w=o.getByIndex(_);h.push(this.queries[w.indexInDeclarationView].clone())}return new Vv(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==_E(r,o).matches&&this.queries[o].setDirty()}}class cE{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class Uv{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const h=null!==o?o.length:0,_=this.getByIndex(a).embeddedTView(r,h);_&&(_.indexInDeclarationView=a,null!==o?o.push(_):o=[_])}return null!==o?new Uv(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Bv{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new Bv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let h=0;h<a.length;h++){const _=a[h];this.matchTNodeWithReadOption(r,o,eb(o,_)),this.matchTNodeWithReadOption(r,o,Fr(o,r,_,!1,!1))}else a===Xg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Fr(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const h=this.metadata.read;if(null!==h)if(h===Kg||h===l_||h===Xg&&4&o.type)this.addMatch(o.index,-2);else{const _=Fr(o,r,h,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function eb(n,r){const o=n.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function nb(n,r,o,a){return-1===o?function tb(n,r){return 11&n.type?Zf(n,r):4&n.type?a_(n,r):null}(r,n):-2===o?function rb(n,r,o){return o===Kg?Zf(r,n):o===Xg?a_(r,n):o===l_?uE(r,n):void 0}(n,r,a):_r(n,n[1],o,r)}function dE(n,r,o,a){const h=r[19].queries[a];if(null===h.matches){const _=n.data,w=o.matches,O=[];for(let F=0;F<w.length;F+=2){const se=w[F];O.push(se<0?null:nb(r,_[se],w[F+1],o.metadata.read))}h.matches=O}return h.matches}function $v(n,r,o,a){const h=n.queries.getByIndex(o),_=h.matches;if(null!==_){const w=dE(n,r,h,o);for(let O=0;O<_.length;O+=2){const F=_[O];if(F>0)a.push(w[O/2]);else{const se=_[O+1],fe=r[-F];for(let Ve=10;Ve<fe.length;Ve++){const mt=fe[Ve];mt[17]===mt[3]&&$v(mt[1],mt,se,a)}if(null!==fe[9]){const Ve=fe[9];for(let mt=0;mt<Ve.length;mt++){const Vt=Ve[mt];$v(Vt[1],Vt,se,a)}}}}}return a}function hE(n){const r=We(),o=Mn(),a=ae();_e(a+1);const h=_E(o,a);if(n.dirty&&$r(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const _=h.crossesNgTemplate?$v(o,r,a,[]):dE(o,r,h,a);n.reset(_,bC),n.notifyOnChanges()}return!0}return!1}function fE(n,r,o){const a=Mn();a.firstCreatePass&&(yE(a,new cE(n,r,o),-1),2==(2&r)&&(a.staticViewQueries=!0)),mE(a,We(),r)}function pE(n,r,o,a){const h=Mn();if(h.firstCreatePass){const _=K();yE(h,new cE(r,o,a),_.index),function sb(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}mE(h,We(),o)}function gE(){return function ib(n,r){return n[19].queries[r].queryList}(We(),ae())}function mE(n,r,o){const a=new kv(4==(4&o));ef(n,r,a,a.destroy),null===r[19]&&(r[19]=new Vv),r[19].queries.push(new Lv(a))}function yE(n,r,o){null===n.queries&&(n.queries=new Uv),n.queries.track(new Bv(r,o))}function _E(n,r){return n.queries.getByIndex(r)}function vE(n,r){return a_(n,r)}function d_(...n){}const FE=new lo("Application Initializer");let qv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=d_,this.reject=d_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,h)=>{this.resolve=a,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(mg(_))o.push(_);else if(yg(_)){const w=new Promise((O,F)=>{_.subscribe({complete:O,error:F})});o.push(w)}}Promise.all(o).then(()=>{a()}).catch(h=>{this.reject(h)}),0===o.length&&a(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(de(FE,8))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LE=new lo("AppId",{providedIn:"root",factory:function VE(){return`${Kv()}${Kv()}${Kv()}`}});function Kv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const UE=new lo("Platform Initializer"),bb=new lo("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),BE=new lo("appBootstrapListener");let Tb=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Zv=new lo("LocaleId",{providedIn:"root",factory:()=>Mt(Zv,qn.Optional|qn.SkipSelf)||function wb(){return"undefined"!=typeof $localize&&$localize.locale||Hf}()}),Ib=new lo("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Sb{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let Db=(()=>{class n{compileModuleSync(o){return new Ov(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),_=za(Hn(o).declarations).reduce((w,O)=>{const F=pt(O);return F&&w.push(new Pv(F)),w},[]);return new Sb(a,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xb=(()=>Promise.resolve(0))();function Yv(n){"undefined"==typeof Zone?xb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Hu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tc(!1),this.onMicrotaskEmpty=new Tc(!1),this.onStable=new Tc(!1),this.onError=new Tc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&o,h.shouldCoalesceRunChangeDetection=a,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Mb(){let n=dr.requestAnimationFrame,r=dr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Ob(n){const r=()=>{!function Pb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(dr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Xv(n),n.isCheckStableRunning=!0,Qv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,h,_,w,O)=>{try{return $E(n),o.invokeTask(h,_,w,O)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),jE(n)}},onInvoke:(o,a,h,_,w,O,F)=>{try{return $E(n),o.invoke(h,_,w,O,F)}finally{n.shouldCoalesceRunChangeDetection&&r(),jE(n)}},onHasTask:(o,a,h,_)=>{o.hasTask(h,_),a===h&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,Xv(n),Qv(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,a,h,_)=>(o.handleError(h,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,h){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+h,r,Rb,d_,d_);try{return _.runTask(w,o,a)}finally{_.cancelTask(w)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const Rb={};function Qv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function $E(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function jE(n){n._nesting--,Qv(n)}class Nb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tc,this.onMicrotaskEmpty=new Tc,this.onStable=new Tc,this.onError=new Tc}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,h){return r.apply(o,a)}}let HE=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hu.assertNotInAngularZone(),Yv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,h){let _=-1;a&&a>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:h})}whenStable(o,a,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,a,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(de(Hu))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac}),n})(),kb=(()=>{class n{constructor(){this._applications=new Map,Jv.addToWindow(this)}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return Jv.findTestabilityInTree(this,o,a)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class Fb{addToWindow(r){}findTestabilityInTree(r,o,a){return null}}function Lb(n){Jv=n}let Jv=new Fb,Oh=null;const GE=new lo("AllowMultipleToken"),zE=new lo("PlatformOnDestroy");class Bb{constructor(r,o){this.name=r,this.token=o}}function WE(n,r,o=[]){const a=`Platform: ${r}`,h=new lo(a);return(_=[])=>{let w=e0();if(!w||w.injector.get(GE,!1)){const O=[...o,..._,{provide:h,useValue:!0}];n?n(O):function $b(n){if(Oh&&!Oh.get(GE,!1))throw new nn(400,"");Oh=n;const r=n.get(qE),o=n.get(UE,null);o&&o.forEach(a=>a())}(function Hb(n=[],r){return Ol.create({name:r,providers:[{provide:df,useValue:"platform"},{provide:zE,useValue:()=>Oh=null},...n]})}(O,a))}return function jb(n){const r=e0();if(!r)throw new nn(401,"");return r}()}}function e0(){var n;return null!==(n=null==Oh?void 0:Oh.get(qE))&&void 0!==n?n:null}let qE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const O=function Gb(n,r){let o;return o="noop"===n?new Nb:("zone.js"===n?void 0:n)||new Hu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),o}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),F=[{provide:Hu,useValue:O}];return O.run(()=>{const se=Ol.create({providers:F,parent:this.injector,name:o.moduleType.name}),fe=o.create(se),Ve=fe.injector.get(Sa,null);if(!Ve)throw new nn(402,"");return O.runOutsideAngular(()=>{const mt=O.onError.subscribe({next:Vt=>{Ve.handleError(Vt)}});fe.onDestroy(()=>{n0(this._modules,fe),mt.unsubscribe()})}),function zb(n,r,o){try{const a=o();return mg(a)?a.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(Ve,O,()=>{const mt=fe.injector.get(qv);return mt.runInitializers(),mt.donePromise.then(()=>(function _v(n){Jn(n,"Expected localeId to be defined"),"string"==typeof n&&(zy=n.toLowerCase().replace(/_/g,"-"))}(fe.injector.get(Zv,Hf)||Hf),this._moduleDoBootstrap(fe),fe))})})}bootstrapModule(o,a=[]){const h=KE({},a);return function Vb(n,r,o){const a=new Ov(o);return Promise.resolve(a)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(o){const a=o.injector.get(t0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>a.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new nn(403,"");o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new nn(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(zE,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(de(Ol))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function KE(n,r){return Array.isArray(r)?r.reduce(KE,n):Object.assign(Object.assign({},n),r)}let t0=(()=>{class n{constructor(o,a,h,_){this._zone=o,this._injector=a,this._exceptionHandler=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new ge.y(F=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{F.next(this._stable),F.complete()})}),O=new ge.y(F=>{let se;this._zone.runOutsideAngular(()=>{se=this._zone.onStable.subscribe(()=>{Hu.assertNotInAngularZone(),Yv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,F.next(!0))})})});const fe=this._zone.onUnstable.subscribe(()=>{Hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{F.next(!1)}))});return()=>{se.unsubscribe(),fe.unsubscribe()}});this.isStable=(0,le.T)(w,O.pipe((0,Ye.B)()))}bootstrap(o,a){if(!this._initStatus.done)throw new nn(405,"");let h;h=o instanceof U0?o:this._injector.get(s_).resolveComponentFactory(o),this.componentTypes.push(h.componentType);const _=function Ub(n){return n.isBoundToModule}(h)?void 0:this._injector.get(Yf),O=h.create(Ol.NULL,[],a||h.selector,_),F=O.location.nativeElement,se=O.injector.get(HE,null),fe=se&&O.injector.get(kb);return se&&fe&&fe.registerApplication(F,se),O.onDestroy(()=>{this.detachView(O.hostView),n0(this.components,O),fe&&fe.unregisterApplication(F)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new nn(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;n0(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(BE,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(de(Hu),de(Ol),de(Sa),de(qv))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function n0(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let YE=!0,QE=!1;function qb(){return QE=!0,YE}function Kb(){if(QE)throw new Error("Cannot enable prod mode after platform setup.");YE=!1}let Zb=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yb,n})();function Yb(n){return function Qb(n,r,o){if(fs(n)&&!o){const a=ni(n.index,r);return new Zg(a,a)}return 47&n.type?new Zg(r[16],r):null}(K(),We(),16==(16&n))}class tC{constructor(){}supports(r){return Zc(r)}create(r){return new rT(r)}}const nT=(n,r)=>r;class rT{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||nT}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,h=0,_=null;for(;o||a;){const w=!a||o&&o.currentIndex<rC(a,h,_)?o:a,O=rC(w,h,_),F=w.currentIndex;if(w===a)h--,a=a._nextRemoved;else if(o=o._next,null==w.previousIndex)h++;else{_||(_=[]);const se=O-h,fe=F-h;if(se!=fe){for(let mt=0;mt<se;mt++){const Vt=mt<_.length?_[mt]:_[mt]=0,An=Vt+mt;fe<=An&&An<se&&(_[mt]=Vt+1)}_[w.previousIndex]=fe-se}}O!==F&&r(w,O,F)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Zc(r))throw new nn(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,_,w,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let O=0;O<this.length;O++)_=r[O],w=this._trackByFn(O,_),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,_,w,O)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,w,O),a=!0),o=o._next}else h=0,function H_(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[dc()]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,O=>{w=this._trackByFn(h,O),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,O,w,h)),Object.is(o.item,O)||this._addIdentityChange(o,O)):(o=this._mismatch(o,O,w,h),a=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,h){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,_,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,h))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,_,h)):r=this._addAfter(new iT(o,a),_,h),r}_verifyReinsertion(r,o,a,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==_?r=this._reinsertAfter(_,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,_=r._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const h=null===o?this._itHead:o._next;return r._next=h,r._prev=o,null===h?this._itTail=r:h._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new nC),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class iT{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sT{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class nC{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new sT,this.map.set(o,a)),a.add(r)}get(r,o){const h=this.map.get(r);return h?h.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rC(n,r,o){const a=n.previousIndex;if(null===a)return a;let h=0;return o&&a<o.length&&(h=o[a]),a+r+h}class iC{constructor(){}supports(r){return r instanceof Map||yh(r)}create(){return new oT}}class oT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||yh(r)))throw new nn(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const _=this._getOrCreateRecordForKey(h,a);o=this._insertBeforeOrAppend(o,_)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,o);const _=h._prev,w=h._next;return _&&(_._next=w),w&&(w._prev=_),h._next=null,h._prev=null,h}const a=new aT(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class aT{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sC(){return new l0([new tC])}let l0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(null!=a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||sC()),deps:[[n,new ri,new mi]]}}find(o){const a=this.factories.find(h=>h.supports(o));if(null!=a)return a;throw new nn(901,"")}}return n.\u0275prov=Ot({token:n,providedIn:"root",factory:sC}),n})();function oC(){return new u0([new iC])}let u0=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||oC()),deps:[[n,new ri,new mi]]}}find(o){const a=this.factories.find(_=>_.supports(o));if(a)return a;throw new nn(901,"")}}return n.\u0275prov=Ot({token:n,providedIn:"root",factory:oC}),n})();const cT=WE(null,"core",[]);let dT=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(de(t0))},n.\u0275mod=rn({type:n}),n.\u0275inj=It({}),n})()},2382:(jn,Dt,H)=>{H.d(Dt,{Wl:()=>Pt,Fj:()=>xe,qu:()=>io,NI:()=>Qi,oH:()=>Es,u:()=>Us,cw:()=>zr,sg:()=>gs,u5:()=>kr,qQ:()=>U,JJ:()=>it,JL:()=>ct,F:()=>cs,On:()=>Xi,wV:()=>St,_:()=>Zi,UX:()=>Zs,kI:()=>Lt,_Y:()=>Ct});var g=H(5e3),Z=H(9808),ge=H(8306),le=H(4742),Ye=H(8421),Xe=H(7669),gt=H(5403),Qe=H(3268),ft=H(1810),Me=H(8996),Et=H(4004);let pn=(()=>{class Q{constructor(L,he){this._renderer=L,this._elementRef=he,this.onChange=We=>{},this.onTouched=()=>{}}setProperty(L,he){this._renderer.setProperty(this._elementRef.nativeElement,L,he)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return Q.\u0275fac=function(L){return new(L||Q)(g.Y36(g.Qsj),g.Y36(g.SBq))},Q.\u0275dir=g.lG2({type:Q}),Q})(),vt=(()=>{class Q extends pn{}return Q.\u0275fac=function(){let G;return function(he){return(G||(G=g.n5z(Q)))(he||Q)}}(),Q.\u0275dir=g.lG2({type:Q,features:[g.qOj]}),Q})();const nn=new g.OlP("NgValueAccessor"),bn={provide:nn,useExisting:(0,g.Gpc)(()=>Pt),multi:!0};let Pt=(()=>{class Q extends vt{writeValue(L){this.setProperty("checked",L)}}return Q.\u0275fac=function(){let G;return function(he){return(G||(G=g.n5z(Q)))(he||Q)}}(),Q.\u0275dir=g.lG2({type:Q,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(L,he){1&L&&g.NdJ("change",function(Mn){return he.onChange(Mn.target.checked)})("blur",function(){return he.onTouched()})},features:[g._Bn([bn]),g.qOj]}),Q})();const Jt={provide:nn,useExisting:(0,g.Gpc)(()=>xe),multi:!0},un=new g.OlP("CompositionEventMode");let xe=(()=>{class Q extends pn{constructor(L,he,We){super(L,he),this._compositionMode=We,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ln(){const Q=(0,Z.q)()?(0,Z.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(L){this.setProperty("value",null==L?"":L)}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return Q.\u0275fac=function(L){return new(L||Q)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(un,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,he){1&L&&g.NdJ("input",function(Mn){return he._handleInput(Mn.target.value)})("blur",function(){return he.onTouched()})("compositionstart",function(){return he._compositionStart()})("compositionend",function(Mn){return he._compositionEnd(Mn.target.value)})},features:[g._Bn([Jt]),g.qOj]}),Q})();function Ne(Q){return null==Q||0===Q.length}function ot(Q){return null!=Q&&"number"==typeof Q.length}const Kt=new g.OlP("NgValidators"),Ut=new g.OlP("NgAsyncValidators"),Fe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Lt{static min(G){return Oe(G)}static max(G){return function Tt(Q){return G=>{if(Ne(G.value)||Ne(Q))return null;const L=parseFloat(G.value);return!isNaN(L)&&L>Q?{max:{max:Q,actual:G.value}}:null}}(G)}static required(G){return function et(Q){return Ne(Q.value)?{required:!0}:null}(G)}static requiredTrue(G){return function Nt(Q){return!0===Q.value?null:{required:!0}}(G)}static email(G){return function At(Q){return Ne(Q.value)||Fe.test(Q.value)?null:{email:!0}}(G)}static minLength(G){return function on(Q){return G=>Ne(G.value)||!ot(G.value)?null:G.value.length<Q?{minlength:{requiredLength:Q,actualLength:G.value.length}}:null}(G)}static maxLength(G){return function wn(Q){return G=>ot(G.value)&&G.value.length>Q?{maxlength:{requiredLength:Q,actualLength:G.value.length}}:null}(G)}static pattern(G){return function Xn(Q){if(!Q)return Jn;let G,L;return"string"==typeof Q?(L="","^"!==Q.charAt(0)&&(L+="^"),L+=Q,"$"!==Q.charAt(Q.length-1)&&(L+="$"),G=new RegExp(L)):(L=Q.toString(),G=Q),he=>{if(Ne(he.value))return null;const We=he.value;return G.test(We)?null:{pattern:{requiredPattern:L,actualValue:We}}}}(G)}static nullValidator(G){return null}static compose(G){return It(G)}static composeAsync(G){return Wt(G)}}function Oe(Q){return G=>{if(Ne(G.value)||Ne(Q))return null;const L=parseFloat(G.value);return!isNaN(L)&&L<Q?{min:{min:Q,actual:G.value}}:null}}function Jn(Q){return null}function fn(Q){return null!=Q}function gr(Q){const G=(0,g.QGY)(Q)?(0,Me.D)(Q):Q;return(0,g.CqO)(G),G}function lr(Q){let G={};return Q.forEach(L=>{G=null!=L?Object.assign(Object.assign({},G),L):G}),0===Object.keys(G).length?null:G}function Ft(Q,G){return G.map(L=>L(Q))}function st(Q){return Q.map(G=>function Ot(Q){return!Q.validate}(G)?G:L=>G.validate(L))}function It(Q){if(!Q)return null;const G=Q.filter(fn);return 0==G.length?null:function(L){return lr(Ft(L,G))}}function ut(Q){return null!=Q?It(st(Q)):null}function Wt(Q){if(!Q)return null;const G=Q.filter(fn);return 0==G.length?null:function(L){return function Pe(...Q){const G=(0,Xe.jO)(Q),{args:L,keys:he}=(0,le.D)(Q),We=new ge.y(Mn=>{const{length:te}=L;if(!te)return void Mn.complete();const K=new Array(te);let be=te,Ue=te;for(let rt=0;rt<te;rt++){let Ht=!1;(0,Ye.Xf)(L[rt]).subscribe((0,gt.x)(Mn,Sn=>{Ht||(Ht=!0,Ue--),K[rt]=Sn},()=>be--,void 0,()=>{(!be||!Ht)&&(Ue||Mn.next(he?(0,ft.n)(he,K):K),Mn.complete())}))}});return G?We.pipe((0,Qe.Z)(G)):We}(Ft(L,G).map(gr)).pipe((0,Et.U)(lr))}}function xt(Q){return null!=Q?Wt(st(Q)):null}function Zt(Q,G){return null===Q?[G]:Array.isArray(Q)?[...Q,G]:[Q,G]}function Un(Q){return Q._rawValidators}function Yn(Q){return Q._rawAsyncValidators}function tr(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function Zr(Q,G){return Array.isArray(Q)?Q.includes(G):Q===G}function si(Q,G){const L=tr(G);return tr(Q).forEach(We=>{Zr(L,We)||L.push(We)}),L}function qn(Q,G){return tr(G).filter(L=>!Zr(Q,L))}class Hr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(G){this._rawValidators=G||[],this._composedValidatorFn=ut(this._rawValidators)}_setAsyncValidators(G){this._rawAsyncValidators=G||[],this._composedAsyncValidatorFn=xt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(G){this._onDestroyCallbacks.push(G)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(G=>G()),this._onDestroyCallbacks=[]}reset(G){this.control&&this.control.reset(G)}hasError(G,L){return!!this.control&&this.control.hasError(G,L)}getError(G,L){return this.control?this.control.getError(G,L):null}}class Tr extends Hr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wr extends Hr{get formDirective(){return null}get path(){return null}}class rs{constructor(G){this._cd=G}is(G){var L,he,We;return"submitted"===G?!!(null===(L=this._cd)||void 0===L?void 0:L.submitted):!!(null===(We=null===(he=this._cd)||void 0===he?void 0:he.control)||void 0===We?void 0:We[G])}}let it=(()=>{class Q extends rs{constructor(L){super(L)}}return Q.\u0275fac=function(L){return new(L||Q)(g.Y36(Tr,2))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,he){2&L&&g.ekj("ng-untouched",he.is("untouched"))("ng-touched",he.is("touched"))("ng-pristine",he.is("pristine"))("ng-dirty",he.is("dirty"))("ng-valid",he.is("valid"))("ng-invalid",he.is("invalid"))("ng-pending",he.is("pending"))},features:[g.qOj]}),Q})(),ct=(()=>{class Q extends rs{constructor(L){super(L)}}return Q.\u0275fac=function(L){return new(L||Q)(g.Y36(wr,10))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,he){2&L&&g.ekj("ng-untouched",he.is("untouched"))("ng-touched",he.is("touched"))("ng-pristine",he.is("pristine"))("ng-dirty",he.is("dirty"))("ng-valid",he.is("valid"))("ng-invalid",he.is("invalid"))("ng-pending",he.is("pending"))("ng-submitted",he.is("submitted"))},features:[g.qOj]}),Q})();function Wn(Q,G){return[...G.path,Q]}function Ar(Q,G){$e(Q,G),G.valueAccessor.writeValue(Q.value),function rn(Q,G){G.valueAccessor.registerOnChange(L=>{Q._pendingValue=L,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&Ge(Q,G)})}(Q,G),function Re(Q,G){const L=(he,We)=>{G.valueAccessor.writeValue(he),We&&G.viewToModelUpdate(he)};Q.registerOnChange(L),G._registerOnDestroy(()=>{Q._unregisterOnChange(L)})}(Q,G),function kt(Q,G){G.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&Ge(Q,G),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,G),function tt(Q,G){if(G.valueAccessor.setDisabledState){const L=he=>{G.valueAccessor.setDisabledState(he)};Q.registerOnDisabledChange(L),G._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(L)})}}(Q,G)}function Pr(Q,G,L=!0){const he=()=>{};G.valueAccessor&&(G.valueAccessor.registerOnChange(he),G.valueAccessor.registerOnTouched(he)),ht(Q,G),Q&&(G._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function Nr(Q,G){Q.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(G)})}function $e(Q,G){const L=Un(Q);null!==G.validator?Q.setValidators(Zt(L,G.validator)):"function"==typeof L&&Q.setValidators([L]);const he=Yn(Q);null!==G.asyncValidator?Q.setAsyncValidators(Zt(he,G.asyncValidator)):"function"==typeof he&&Q.setAsyncValidators([he]);const We=()=>Q.updateValueAndValidity();Nr(G._rawValidators,We),Nr(G._rawAsyncValidators,We)}function ht(Q,G){let L=!1;if(null!==Q){if(null!==G.validator){const We=Un(Q);if(Array.isArray(We)&&We.length>0){const Mn=We.filter(te=>te!==G.validator);Mn.length!==We.length&&(L=!0,Q.setValidators(Mn))}}if(null!==G.asyncValidator){const We=Yn(Q);if(Array.isArray(We)&&We.length>0){const Mn=We.filter(te=>te!==G.asyncValidator);Mn.length!==We.length&&(L=!0,Q.setAsyncValidators(Mn))}}}const he=()=>{};return Nr(G._rawValidators,he),Nr(G._rawAsyncValidators,he),L}function Ge(Q,G){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),G.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function De(Q,G){$e(Q,G)}function zi(Q,G){if(!Q.hasOwnProperty("model"))return!1;const L=Q.model;return!!L.isFirstChange()||!Object.is(G,L.currentValue)}function Ls(Q,G){Q._syncPendingControls(),G.forEach(L=>{const he=L.control;"submit"===he.updateOn&&he._pendingChange&&(L.viewToModelUpdate(he._pendingValue),he._pendingChange=!1)})}function Ci(Q,G){if(!G)return null;let L,he,We;return Array.isArray(G),G.forEach(Mn=>{Mn.constructor===xe?L=Mn:function ns(Q){return Object.getPrototypeOf(Q.constructor)===vt}(Mn)?he=Mn:We=Mn}),We||he||L||null}function hi(Q,G){const L=Q.indexOf(G);L>-1&&Q.splice(L,1)}const _n="VALID",ir="INVALID",oi="PENDING",bi="DISABLED";function Wi(Q){return(qi(Q)?Q.validators:Q)||null}function ls(Q){return Array.isArray(Q)?ut(Q):Q||null}function Oi(Q,G){return(qi(G)?G.asyncValidators:Q)||null}function Vi(Q){return Array.isArray(Q)?xt(Q):Q||null}function qi(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}const Ur=Q=>Q instanceof Qi,Is=Q=>Q instanceof zr,Ss=Q=>Q instanceof Si;function Vs(Q){return Ur(Q)?Q.value:Q.getRawValue()}function Cr(Q,G){const L=Is(Q),he=Q.controls;if(!(L?Object.keys(he):he).length)throw new g.vHH(1e3,"");if(!he[G])throw new g.vHH(1001,"")}function mr(Q,G){Is(Q),Q._forEachChild((he,We)=>{if(void 0===G[We])throw new g.vHH(1002,"")})}class yr{constructor(G,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=G,this._rawAsyncValidators=L,this._composedValidatorFn=ls(this._rawValidators),this._composedAsyncValidatorFn=Vi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(G){this._rawValidators=this._composedValidatorFn=G}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(G){this._rawAsyncValidators=this._composedAsyncValidatorFn=G}get parent(){return this._parent}get valid(){return this.status===_n}get invalid(){return this.status===ir}get pending(){return this.status==oi}get disabled(){return this.status===bi}get enabled(){return this.status!==bi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(G){this._rawValidators=G,this._composedValidatorFn=ls(G)}setAsyncValidators(G){this._rawAsyncValidators=G,this._composedAsyncValidatorFn=Vi(G)}addValidators(G){this.setValidators(si(G,this._rawValidators))}addAsyncValidators(G){this.setAsyncValidators(si(G,this._rawAsyncValidators))}removeValidators(G){this.setValidators(qn(G,this._rawValidators))}removeAsyncValidators(G){this.setAsyncValidators(qn(G,this._rawAsyncValidators))}hasValidator(G){return Zr(this._rawValidators,G)}hasAsyncValidator(G){return Zr(this._rawAsyncValidators,G)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(G={}){this.touched=!0,this._parent&&!G.onlySelf&&this._parent.markAsTouched(G)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(G=>G.markAllAsTouched())}markAsUntouched(G={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}markAsDirty(G={}){this.pristine=!1,this._parent&&!G.onlySelf&&this._parent.markAsDirty(G)}markAsPristine(G={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}markAsPending(G={}){this.status=oi,!1!==G.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!G.onlySelf&&this._parent.markAsPending(G)}disable(G={}){const L=this._parentMarkedDirty(G.onlySelf);this.status=bi,this.errors=null,this._forEachChild(he=>{he.disable(Object.assign(Object.assign({},G),{onlySelf:!0}))}),this._updateValue(),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},G),{skipPristineCheck:L})),this._onDisabledChange.forEach(he=>he(!0))}enable(G={}){const L=this._parentMarkedDirty(G.onlySelf);this.status=_n,this._forEachChild(he=>{he.enable(Object.assign(Object.assign({},G),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},G),{skipPristineCheck:L})),this._onDisabledChange.forEach(he=>he(!1))}_updateAncestors(G){this._parent&&!G.onlySelf&&(this._parent.updateValueAndValidity(G),G.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(G){this._parent=G}updateValueAndValidity(G={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_n||this.status===oi)&&this._runAsyncValidator(G.emitEvent)),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!G.onlySelf&&this._parent.updateValueAndValidity(G)}_updateTreeValidity(G={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(G)),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bi:_n}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(G){if(this.asyncValidator){this.status=oi,this._hasOwnPendingAsyncValidator=!0;const L=gr(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(he=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(he,{emitEvent:G})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(G,L={}){this.errors=G,this._updateControlsErrors(!1!==L.emitEvent)}get(G){return function _s(Q,G,L){if(null==G||(Array.isArray(G)||(G=G.split(L)),Array.isArray(G)&&0===G.length))return null;let he=Q;return G.forEach(We=>{he=Is(he)?he.controls.hasOwnProperty(We)?he.controls[We]:null:Ss(he)&&he.at(We)||null}),he}(this,G,".")}getError(G,L){const he=L?this.get(L):this;return he&&he.errors?he.errors[G]:null}hasError(G,L){return!!this.getError(G,L)}get root(){let G=this;for(;G._parent;)G=G._parent;return G}_updateControlsErrors(G){this.status=this._calculateStatus(),G&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(G)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?bi:this.errors?ir:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oi)?oi:this._anyControlsHaveStatus(ir)?ir:_n}_anyControlsHaveStatus(G){return this._anyControls(L=>L.status===G)}_anyControlsDirty(){return this._anyControls(G=>G.dirty)}_anyControlsTouched(){return this._anyControls(G=>G.touched)}_updatePristine(G={}){this.pristine=!this._anyControlsDirty(),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}_updateTouched(G={}){this.touched=this._anyControlsTouched(),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}_isBoxedValue(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}_registerOnCollectionChange(G){this._onCollectionChange=G}_setUpdateStrategy(G){qi(G)&&null!=G.updateOn&&(this._updateOn=G.updateOn)}_parentMarkedDirty(G){return!G&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Qi extends yr{constructor(G=null,L,he){super(Wi(L),Oi(he,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(G),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qi(L)&&L.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(G)?G.value:G)}setValue(G,L={}){this.value=this._pendingValue=G,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(he=>he(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(G,L={}){this.setValue(G,L)}reset(G=this.defaultValue,L={}){this._applyFormState(G),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(G){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(G){this._onChange.push(G)}_unregisterOnChange(G){hi(this._onChange,G)}registerOnDisabledChange(G){this._onDisabledChange.push(G)}_unregisterOnDisabledChange(G){hi(this._onDisabledChange,G)}_forEachChild(G){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(G){this._isBoxedValue(G)?(this.value=this._pendingValue=G.value,G.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=G}}class zr extends yr{constructor(G,L,he){super(Wi(L),Oi(he,L)),this.controls=G,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(G,L){return this.controls[G]?this.controls[G]:(this.controls[G]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(G,L,he={}){this.registerControl(G,L),this.updateValueAndValidity({emitEvent:he.emitEvent}),this._onCollectionChange()}removeControl(G,L={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(G,L,he={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],L&&this.registerControl(G,L),this.updateValueAndValidity({emitEvent:he.emitEvent}),this._onCollectionChange()}contains(G){return this.controls.hasOwnProperty(G)&&this.controls[G].enabled}setValue(G,L={}){mr(this,G),Object.keys(G).forEach(he=>{Cr(this,he),this.controls[he].setValue(G[he],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(G,L={}){null!=G&&(Object.keys(G).forEach(he=>{this.controls[he]&&this.controls[he].patchValue(G[he],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(G={},L={}){this._forEachChild((he,We)=>{he.reset(G[We],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(G,L,he)=>(G[he]=Vs(L),G))}_syncPendingControls(){let G=this._reduceChildren(!1,(L,he)=>!!he._syncPendingControls()||L);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){Object.keys(this.controls).forEach(L=>{const he=this.controls[L];he&&G(he,L)})}_setUpControls(){this._forEachChild(G=>{G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(G){for(const L of Object.keys(this.controls)){const he=this.controls[L];if(this.contains(L)&&G(he))return!0}return!1}_reduceValue(){return this._reduceChildren({},(G,L,he)=>((L.enabled||this.disabled)&&(G[he]=L.value),G))}_reduceChildren(G,L){let he=G;return this._forEachChild((We,Mn)=>{he=L(he,We,Mn)}),he}_allControlsDisabled(){for(const G of Object.keys(this.controls))if(this.controls[G].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Si extends yr{constructor(G,L,he){super(Wi(L),Oi(he,L)),this.controls=G,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(G){return this.controls[G]}push(G,L={}){this.controls.push(G),this._registerControl(G),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(G,L,he={}){this.controls.splice(G,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:he.emitEvent})}removeAt(G,L={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),this.controls.splice(G,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(G,L,he={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),this.controls.splice(G,1),L&&(this.controls.splice(G,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:he.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(G,L={}){mr(this,G),G.forEach((he,We)=>{Cr(this,We),this.at(We).setValue(he,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(G,L={}){null!=G&&(G.forEach((he,We)=>{this.at(We)&&this.at(We).patchValue(he,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(G=[],L={}){this._forEachChild((he,We)=>{he.reset(G[We],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(G=>Vs(G))}clear(G={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:G.emitEvent}))}_syncPendingControls(){let G=this.controls.reduce((L,he)=>!!he._syncPendingControls()||L,!1);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){this.controls.forEach((L,he)=>{G(L,he)})}_updateValue(){this.value=this.controls.filter(G=>G.enabled||this.disabled).map(G=>G.value)}_anyControls(G){return this.controls.some(L=>L.enabled&&G(L))}_setUpControls(){this._forEachChild(G=>this._registerControl(G))}_allControlsDisabled(){for(const G of this.controls)if(G.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(G){G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)}}const zs={provide:wr,useExisting:(0,g.Gpc)(()=>cs)},Ki=(()=>Promise.resolve(null))();let cs=(()=>{class Q extends wr{constructor(L,he){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new zr({},ut(L),xt(he))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){Ki.then(()=>{const he=this._findContainer(L.path);L.control=he.registerControl(L.name,L.control),Ar(L.control,L),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){Ki.then(()=>{const he=this._findContainer(L.path);he&&he.removeControl(L.name),this._directives.delete(L)})}addFormGroup(L){Ki.then(()=>{const he=this._findContainer(L.path),We=new zr({});De(We,L),he.registerControl(L.name,We),We.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){Ki.then(()=>{const he=this._findContainer(L.path);he&&he.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,he){Ki.then(()=>{this.form.get(L.path).setValue(he)})}setValue(L){this.control.setValue(L)}onSubmit(L){return this.submitted=!0,Ls(this.form,this._directives),this.ngSubmit.emit(L),!1}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}}return Q.\u0275fac=function(L){return new(L||Q)(g.Y36(Kt,10),g.Y36(Ut,10))},Q.\u0275dir=g.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(L,he){1&L&&g.NdJ("submit",function(Mn){return he.onSubmit(Mn)})("reset",function(){return he.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([zs]),g.qOj]}),Q})();const to={provide:Tr,useExisting:(0,g.Gpc)(()=>Xi)},vs=(()=>Promise.resolve(null))();let Xi=(()=>{class Q extends Tr{constructor(L,he,We,Mn,te){super(),this._changeDetectorRef=te,this.control=new Qi,this._registered=!1,this.update=new g.vpe,this._parent=L,this._setValidators(he),this._setAsyncValidators(We),this.valueAccessor=Ci(0,Mn)}ngOnChanges(L){if(this._checkForErrors(),!this._registered||"name"in L){if(this._registered&&(this._checkName(),this.formDirective)){const he=L.name.previousValue;this.formDirective.removeControl({name:he,path:this._getPath(he)})}this._setUpControl()}"isDisabled"in L&&this._updateDisabled(L),zi(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ar(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){vs.then(()=>{var he;this.control.setValue(L,{emitViewToModelChange:!1}),null===(he=this._changeDetectorRef)||void 0===he||he.markForCheck()})}_updateDisabled(L){const he=L.isDisabled.currentValue,We=""===he||he&&"false"!==he;vs.then(()=>{var Mn;We&&!this.control.disabled?this.control.disable():!We&&this.control.disabled&&this.control.enable(),null===(Mn=this._changeDetectorRef)||void 0===Mn||Mn.markForCheck()})}_getPath(L){return this._parent?Wn(L,this._parent):[L]}}return Q.\u0275fac=function(L){return new(L||Q)(g.Y36(wr,9),g.Y36(Kt,10),g.Y36(Ut,10),g.Y36(nn,10),g.Y36(g.sBO,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([to]),g.qOj,g.TTD]}),Q})(),Ct=(()=>{class Q{}return Q.\u0275fac=function(L){return new(L||Q)},Q.\u0275dir=g.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Q})();const dt={provide:nn,useExisting:(0,g.Gpc)(()=>St),multi:!0};let St=(()=>{class Q extends vt{writeValue(L){this.setProperty("value",null==L?"":L)}registerOnChange(L){this.onChange=he=>{L(""==he?null:parseFloat(he))}}}return Q.\u0275fac=function(){let G;return function(he){return(G||(G=g.n5z(Q)))(he||Q)}}(),Q.\u0275dir=g.lG2({type:Q,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(L,he){1&L&&g.NdJ("input",function(Mn){return he.onChange(Mn.target.value)})("blur",function(){return he.onTouched()})},features:[g._Bn([dt]),g.qOj]}),Q})();const gn={provide:nn,useExisting:(0,g.Gpc)(()=>Zi),multi:!0};let Ir=(()=>{class Q{}return Q.\u0275fac=function(L){return new(L||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({}),Q})(),Qr=(()=>{class Q{constructor(){this._accessors=[]}add(L,he){this._accessors.push([L,he])}remove(L){for(let he=this._accessors.length-1;he>=0;--he)if(this._accessors[he][1]===L)return void this._accessors.splice(he,1)}select(L){this._accessors.forEach(he=>{this._isSameGroup(he,L)&&he[1]!==L&&he[1].fireUncheck(L.value)})}_isSameGroup(L,he){return!!L[0].control&&L[0]._parent===he._control._parent&&L[1].name===he.name}}return Q.\u0275fac=function(L){return new(L||Q)},Q.\u0275prov=g.Yz7({token:Q,factory:Q.\u0275fac,providedIn:Ir}),Q})(),Zi=(()=>{class Q extends vt{constructor(L,he,We,Mn){super(L,he),this._registry=We,this._injector=Mn,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Tr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(L){this._state=L===this.value,this.setProperty("checked",this._state)}registerOnChange(L){this._fn=L,this.onChange=()=>{L(this.value),this._registry.select(this)}}fireUncheck(L){this.writeValue(L)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return Q.\u0275fac=function(L){return new(L||Q)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Qr),g.Y36(g.zs3))},Q.\u0275dir=g.lG2({type:Q,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(L,he){1&L&&g.NdJ("change",function(){return he.onChange()})("blur",function(){return he.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[g._Bn([gn]),g.qOj]}),Q})();const ei=new g.OlP("NgModelWithFormControlWarning"),as={provide:Tr,useExisting:(0,g.Gpc)(()=>Es)};let Es=(()=>{class Q extends Tr{constructor(L,he,We,Mn){super(),this._ngModelWarningConfig=Mn,this.update=new g.vpe,this._ngModelWarningSent=!1,this._setValidators(L),this._setAsyncValidators(he),this.valueAccessor=Ci(0,We)}set isDisabled(L){}ngOnChanges(L){if(this._isControlChanged(L)){const he=L.form.previousValue;he&&Pr(he,this,!1),Ar(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}zi(L,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Pr(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_isControlChanged(L){return L.hasOwnProperty("form")}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(L){return new(L||Q)(g.Y36(Kt,10),g.Y36(Ut,10),g.Y36(nn,10),g.Y36(ei,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[g._Bn([as]),g.qOj,g.TTD]}),Q})();const Ko={provide:wr,useExisting:(0,g.Gpc)(()=>gs)};let gs=(()=>{class Q extends wr{constructor(L,he){super(),this.validators=L,this.asyncValidators=he,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(L),this._setAsyncValidators(he)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ht(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const he=this.form.get(L.path);return Ar(he,L),he.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),he}getControl(L){return this.form.get(L.path)}removeControl(L){Pr(L.control||null,L,!1),hi(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,he){this.form.get(L.path).setValue(he)}onSubmit(L){return this.submitted=!0,Ls(this.form,this.directives),this.ngSubmit.emit(L),!1}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const he=L.control,We=this.form.get(L.path);he!==We&&(Pr(he||null,L),Ur(We)&&(Ar(We,L),L.control=We))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const he=this.form.get(L.path);De(he,L),he.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const he=this.form.get(L.path);he&&function pt(Q,G){return ht(Q,G)}(he,L)&&he.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$e(this.form,this),this._oldForm&&ht(this._oldForm,this)}_checkFormPresent(){}}return Q.\u0275fac=function(L){return new(L||Q)(g.Y36(Kt,10),g.Y36(Ut,10))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(L,he){1&L&&g.NdJ("submit",function(Mn){return he.onSubmit(Mn)})("reset",function(){return he.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Ko]),g.qOj,g.TTD]}),Q})();const Ms={provide:Tr,useExisting:(0,g.Gpc)(()=>Us)};let Us=(()=>{class Q extends Tr{constructor(L,he,We,Mn,te){super(),this._ngModelWarningConfig=te,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(he),this._setAsyncValidators(We),this.valueAccessor=Ci(0,Mn)}set isDisabled(L){}ngOnChanges(L){this._added||this._setUpControl(),zi(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return Wn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(L){return new(L||Q)(g.Y36(wr,13),g.Y36(Kt,10),g.Y36(Ut,10),g.Y36(nn,10),g.Y36(ei,8))},Q.\u0275dir=g.lG2({type:Q,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Ms]),g.qOj,g.TTD]}),Q})();let Ps=(()=>{class Q{constructor(){this._validator=Jn}ngOnChanges(L){if(this.inputName in L){const he=this.normalizeInput(L[this.inputName].currentValue);this._enabled=this.enabled(he),this._validator=this._enabled?this.createValidator(he):Jn,this._onChange&&this._onChange()}}validate(L){return this._validator(L)}registerOnValidatorChange(L){this._onChange=L}enabled(L){return null!=L}}return Q.\u0275fac=function(L){return new(L||Q)},Q.\u0275dir=g.lG2({type:Q,features:[g.TTD]}),Q})();const _i={provide:Kt,useExisting:(0,g.Gpc)(()=>U),multi:!0};let U=(()=>{class Q extends Ps{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=L=>function js(Q){return"number"==typeof Q?Q:parseFloat(Q)}(L),this.createValidator=L=>Oe(L)}}return Q.\u0275fac=function(){let G;return function(he){return(G||(G=g.n5z(Q)))(he||Q)}}(),Q.\u0275dir=g.lG2({type:Q,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(L,he){2&L&&g.uIk("min",he._enabled?he.min:null)},inputs:{min:"min"},features:[g._Bn([_i]),g.qOj]}),Q})(),ts=(()=>{class Q{}return Q.\u0275fac=function(L){return new(L||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({imports:[[Ir]]}),Q})(),kr=(()=>{class Q{}return Q.\u0275fac=function(L){return new(L||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({imports:[ts]}),Q})(),Zs=(()=>{class Q{static withConfig(L){return{ngModule:Q,providers:[{provide:ei,useValue:L.warnOnNgModelWithFormControl}]}}}return Q.\u0275fac=function(L){return new(L||Q)},Q.\u0275mod=g.oAB({type:Q}),Q.\u0275inj=g.cJS({imports:[ts]}),Q})(),io=(()=>{class Q{group(L,he=null){const We=this._reduceControls(L);let K,Mn=null,te=null;return null!=he&&(function Po(Q){return void 0!==Q.asyncValidators||void 0!==Q.validators||void 0!==Q.updateOn}(he)?(Mn=null!=he.validators?he.validators:null,te=null!=he.asyncValidators?he.asyncValidators:null,K=null!=he.updateOn?he.updateOn:void 0):(Mn=null!=he.validator?he.validator:null,te=null!=he.asyncValidator?he.asyncValidator:null)),new zr(We,{asyncValidators:te,updateOn:K,validators:Mn})}control(L,he,We){return new Qi(L,he,We)}array(L,he,We){const Mn=L.map(te=>this._createControl(te));return new Si(Mn,he,We)}_reduceControls(L){const he={};return Object.keys(L).forEach(We=>{he[We]=this._createControl(L[We])}),he}_createControl(L){return Ur(L)||Is(L)||Ss(L)?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}}return Q.\u0275fac=function(L){return new(L||Q)},Q.\u0275prov=g.Yz7({token:Q,factory:Q.\u0275fac,providedIn:Zs}),Q})()},2313:(jn,Dt,H)=>{H.d(Dt,{Dx:()=>wr,H7:()=>$e,b2:()=>Zr,q6:()=>Yn,se:()=>Nt});var g=H(9808),Z=H(5e3);class ge extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class le extends ge{static makeCurrent(){(0,g.HT)(new le)}onAndCancel(Re,De,pt){return Re.addEventListener(De,pt,!1),()=>{Re.removeEventListener(De,pt,!1)}}dispatchEvent(Re,De){Re.dispatchEvent(De)}remove(Re){Re.parentNode&&Re.parentNode.removeChild(Re)}createElement(Re,De){return(De=De||this.getDefaultDocument()).createElement(Re)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Re){return Re.nodeType===Node.ELEMENT_NODE}isShadowRoot(Re){return Re instanceof DocumentFragment}getGlobalEventTarget(Re,De){return"window"===De?window:"document"===De?Re:"body"===De?Re.body:null}getBaseHref(Re){const De=function Xe(){return Ye=Ye||document.querySelector("base"),Ye?Ye.getAttribute("href"):null}();return null==De?null:function Qe(Ge){gt=gt||document.createElement("a"),gt.setAttribute("href",Ge);const Re=gt.pathname;return"/"===Re.charAt(0)?Re:`/${Re}`}(De)}resetBaseElement(){Ye=null}getUserAgent(){return window.navigator.userAgent}getCookie(Re){return(0,g.Mx)(document.cookie,Re)}}let gt,Ye=null;const ft=new Z.OlP("TRANSITION_ID"),Me=[{provide:Z.ip1,useFactory:function Pe(Ge,Re,De){return()=>{De.get(Z.CZH).donePromise.then(()=>{const pt=(0,g.q)(),Yt=Re.querySelectorAll(`style[ng-transition="${Ge}"]`);for(let ur=0;ur<Yt.length;ur++)pt.remove(Yt[ur])})}},deps:[ft,g.K0,Z.zs3],multi:!0}];class Et{static init(){(0,Z.VLi)(new Et)}addToWindow(Re){Z.dqk.getAngularTestability=(pt,Yt=!0)=>{const ur=Re.findTestabilityInTree(pt,Yt);if(null==ur)throw new Error("Could not find testability for element.");return ur},Z.dqk.getAllAngularTestabilities=()=>Re.getAllTestabilities(),Z.dqk.getAllAngularRootElements=()=>Re.getAllRootElements(),Z.dqk.frameworkStabilizers||(Z.dqk.frameworkStabilizers=[]),Z.dqk.frameworkStabilizers.push(pt=>{const Yt=Z.dqk.getAllAngularTestabilities();let ur=Yt.length,Hn=!1;const Kr=function(zi){Hn=Hn||zi,ur--,0==ur&&pt(Hn)};Yt.forEach(function(zi){zi.whenStable(Kr)})})}findTestabilityInTree(Re,De,pt){if(null==De)return null;const Yt=Re.getTestability(De);return null!=Yt?Yt:pt?(0,g.q)().isShadowRoot(De)?this.findTestabilityInTree(Re,De.host,!0):this.findTestabilityInTree(Re,De.parentElement,!0):null}}let pn=(()=>{class Ge{build(){return new XMLHttpRequest}}return Ge.\u0275fac=function(De){return new(De||Ge)},Ge.\u0275prov=Z.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();const vt=new Z.OlP("EventManagerPlugins");let nn=(()=>{class Ge{constructor(De,pt){this._zone=pt,this._eventNameToPlugin=new Map,De.forEach(Yt=>Yt.manager=this),this._plugins=De.slice().reverse()}addEventListener(De,pt,Yt){return this._findPluginFor(pt).addEventListener(De,pt,Yt)}addGlobalEventListener(De,pt,Yt){return this._findPluginFor(pt).addGlobalEventListener(De,pt,Yt)}getZone(){return this._zone}_findPluginFor(De){const pt=this._eventNameToPlugin.get(De);if(pt)return pt;const Yt=this._plugins;for(let ur=0;ur<Yt.length;ur++){const Hn=Yt[ur];if(Hn.supports(De))return this._eventNameToPlugin.set(De,Hn),Hn}throw new Error(`No event manager plugin found for event ${De}`)}}return Ge.\u0275fac=function(De){return new(De||Ge)(Z.LFG(vt),Z.LFG(Z.R0b))},Ge.\u0275prov=Z.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();class bn{constructor(Re){this._doc=Re}addGlobalEventListener(Re,De,pt){const Yt=(0,g.q)().getGlobalEventTarget(this._doc,Re);if(!Yt)throw new Error(`Unsupported event target ${Yt} for event ${De}`);return this.addEventListener(Yt,De,pt)}}let Pt=(()=>{class Ge{constructor(){this._stylesSet=new Set}addStyles(De){const pt=new Set;De.forEach(Yt=>{this._stylesSet.has(Yt)||(this._stylesSet.add(Yt),pt.add(Yt))}),this.onStylesAdded(pt)}onStylesAdded(De){}getAllStyles(){return Array.from(this._stylesSet)}}return Ge.\u0275fac=function(De){return new(De||Ge)},Ge.\u0275prov=Z.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})(),Jt=(()=>{class Ge extends Pt{constructor(De){super(),this._doc=De,this._hostNodes=new Map,this._hostNodes.set(De.head,[])}_addStylesToHost(De,pt,Yt){De.forEach(ur=>{const Hn=this._doc.createElement("style");Hn.textContent=ur,Yt.push(pt.appendChild(Hn))})}addHost(De){const pt=[];this._addStylesToHost(this._stylesSet,De,pt),this._hostNodes.set(De,pt)}removeHost(De){const pt=this._hostNodes.get(De);pt&&pt.forEach(Ln),this._hostNodes.delete(De)}onStylesAdded(De){this._hostNodes.forEach((pt,Yt)=>{this._addStylesToHost(De,Yt,pt)})}ngOnDestroy(){this._hostNodes.forEach(De=>De.forEach(Ln))}}return Ge.\u0275fac=function(De){return new(De||Ge)(Z.LFG(g.K0))},Ge.\u0275prov=Z.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();function Ln(Ge){(0,g.q)().remove(Ge)}const un={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xe=/%COMP%/g;function Oe(Ge,Re,De){for(let pt=0;pt<Re.length;pt++){let Yt=Re[pt];Array.isArray(Yt)?Oe(Ge,Yt,De):(Yt=Yt.replace(xe,Ge),De.push(Yt))}return De}function Tt(Ge){return Re=>{if("__ngUnwrap__"===Re)return Ge;!1===Ge(Re)&&(Re.preventDefault(),Re.returnValue=!1)}}let Nt=(()=>{class Ge{constructor(De,pt,Yt){this.eventManager=De,this.sharedStylesHost=pt,this.appId=Yt,this.rendererByCompId=new Map,this.defaultRenderer=new At(De)}createRenderer(De,pt){if(!De||!pt)return this.defaultRenderer;switch(pt.encapsulation){case Z.ifc.Emulated:{let Yt=this.rendererByCompId.get(pt.id);return Yt||(Yt=new Xn(this.eventManager,this.sharedStylesHost,pt,this.appId),this.rendererByCompId.set(pt.id,Yt)),Yt.applyToHost(De),Yt}case 1:case Z.ifc.ShadowDom:return new Jn(this.eventManager,this.sharedStylesHost,De,pt);default:if(!this.rendererByCompId.has(pt.id)){const Yt=Oe(pt.id,pt.styles,[]);this.sharedStylesHost.addStyles(Yt),this.rendererByCompId.set(pt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ge.\u0275fac=function(De){return new(De||Ge)(Z.LFG(nn),Z.LFG(Jt),Z.LFG(Z.AFp))},Ge.\u0275prov=Z.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();class At{constructor(Re){this.eventManager=Re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Re,De){return De?document.createElementNS(un[De]||De,Re):document.createElement(Re)}createComment(Re){return document.createComment(Re)}createText(Re){return document.createTextNode(Re)}appendChild(Re,De){Re.appendChild(De)}insertBefore(Re,De,pt){Re&&Re.insertBefore(De,pt)}removeChild(Re,De){Re&&Re.removeChild(De)}selectRootElement(Re,De){let pt="string"==typeof Re?document.querySelector(Re):Re;if(!pt)throw new Error(`The selector "${Re}" did not match any elements`);return De||(pt.textContent=""),pt}parentNode(Re){return Re.parentNode}nextSibling(Re){return Re.nextSibling}setAttribute(Re,De,pt,Yt){if(Yt){De=Yt+":"+De;const ur=un[Yt];ur?Re.setAttributeNS(ur,De,pt):Re.setAttribute(De,pt)}else Re.setAttribute(De,pt)}removeAttribute(Re,De,pt){if(pt){const Yt=un[pt];Yt?Re.removeAttributeNS(Yt,De):Re.removeAttribute(`${pt}:${De}`)}else Re.removeAttribute(De)}addClass(Re,De){Re.classList.add(De)}removeClass(Re,De){Re.classList.remove(De)}setStyle(Re,De,pt,Yt){Yt&(Z.JOm.DashCase|Z.JOm.Important)?Re.style.setProperty(De,pt,Yt&Z.JOm.Important?"important":""):Re.style[De]=pt}removeStyle(Re,De,pt){pt&Z.JOm.DashCase?Re.style.removeProperty(De):Re.style[De]=""}setProperty(Re,De,pt){Re[De]=pt}setValue(Re,De){Re.nodeValue=De}listen(Re,De,pt){return"string"==typeof Re?this.eventManager.addGlobalEventListener(Re,De,Tt(pt)):this.eventManager.addEventListener(Re,De,Tt(pt))}}class Xn extends At{constructor(Re,De,pt,Yt){super(Re),this.component=pt;const ur=Oe(Yt+"-"+pt.id,pt.styles,[]);De.addStyles(ur),this.contentAttr=function Fe(Ge){return"_ngcontent-%COMP%".replace(xe,Ge)}(Yt+"-"+pt.id),this.hostAttr=function Lt(Ge){return"_nghost-%COMP%".replace(xe,Ge)}(Yt+"-"+pt.id)}applyToHost(Re){super.setAttribute(Re,this.hostAttr,"")}createElement(Re,De){const pt=super.createElement(Re,De);return super.setAttribute(pt,this.contentAttr,""),pt}}class Jn extends At{constructor(Re,De,pt,Yt){super(Re),this.sharedStylesHost=De,this.hostEl=pt,this.shadowRoot=pt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ur=Oe(Yt.id,Yt.styles,[]);for(let Hn=0;Hn<ur.length;Hn++){const Kr=document.createElement("style");Kr.textContent=ur[Hn],this.shadowRoot.appendChild(Kr)}}nodeOrShadowRoot(Re){return Re===this.hostEl?this.shadowRoot:Re}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Re,De){return super.appendChild(this.nodeOrShadowRoot(Re),De)}insertBefore(Re,De,pt){return super.insertBefore(this.nodeOrShadowRoot(Re),De,pt)}removeChild(Re,De){return super.removeChild(this.nodeOrShadowRoot(Re),De)}parentNode(Re){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Re)))}}let fn=(()=>{class Ge extends bn{constructor(De){super(De)}supports(De){return!0}addEventListener(De,pt,Yt){return De.addEventListener(pt,Yt,!1),()=>this.removeEventListener(De,pt,Yt)}removeEventListener(De,pt,Yt){return De.removeEventListener(pt,Yt)}}return Ge.\u0275fac=function(De){return new(De||Ge)(Z.LFG(g.K0))},Ge.\u0275prov=Z.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();const gr=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ot={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},st={alt:Ge=>Ge.altKey,control:Ge=>Ge.ctrlKey,meta:Ge=>Ge.metaKey,shift:Ge=>Ge.shiftKey};let It=(()=>{class Ge extends bn{constructor(De){super(De)}supports(De){return null!=Ge.parseEventName(De)}addEventListener(De,pt,Yt){const ur=Ge.parseEventName(pt),Hn=Ge.eventCallback(ur.fullKey,Yt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(De,ur.domEventName,Hn))}static parseEventName(De){const pt=De.toLowerCase().split("."),Yt=pt.shift();if(0===pt.length||"keydown"!==Yt&&"keyup"!==Yt)return null;const ur=Ge._normalizeKey(pt.pop());let Hn="";if(gr.forEach(zi=>{const ns=pt.indexOf(zi);ns>-1&&(pt.splice(ns,1),Hn+=zi+".")}),Hn+=ur,0!=pt.length||0===ur.length)return null;const Kr={};return Kr.domEventName=Yt,Kr.fullKey=Hn,Kr}static getEventFullKey(De){let pt="",Yt=function ut(Ge){let Re=Ge.key;if(null==Re){if(Re=Ge.keyIdentifier,null==Re)return"Unidentified";Re.startsWith("U+")&&(Re=String.fromCharCode(parseInt(Re.substring(2),16)),3===Ge.location&&Ot.hasOwnProperty(Re)&&(Re=Ot[Re]))}return Ft[Re]||Re}(De);return Yt=Yt.toLowerCase()," "===Yt?Yt="space":"."===Yt&&(Yt="dot"),gr.forEach(ur=>{ur!=Yt&&st[ur](De)&&(pt+=ur+".")}),pt+=Yt,pt}static eventCallback(De,pt,Yt){return ur=>{Ge.getEventFullKey(ur)===De&&Yt.runGuarded(()=>pt(ur))}}static _normalizeKey(De){return"esc"===De?"escape":De}}return Ge.\u0275fac=function(De){return new(De||Ge)(Z.LFG(g.K0))},Ge.\u0275prov=Z.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();const Yn=(0,Z.eFA)(Z._c5,"browser",[{provide:Z.Lbi,useValue:g.bD},{provide:Z.g9A,useValue:function Wt(){le.makeCurrent(),Et.init()},multi:!0},{provide:g.K0,useFactory:function Zt(){return(0,Z.RDi)(document),document},deps:[]}]),tr=[{provide:Z.zSh,useValue:"root"},{provide:Z.qLn,useFactory:function xt(){return new Z.qLn},deps:[]},{provide:vt,useClass:fn,multi:!0,deps:[g.K0,Z.R0b,Z.Lbi]},{provide:vt,useClass:It,multi:!0,deps:[g.K0]},{provide:Nt,useClass:Nt,deps:[nn,Jt,Z.AFp]},{provide:Z.FYo,useExisting:Nt},{provide:Pt,useExisting:Jt},{provide:Jt,useClass:Jt,deps:[g.K0]},{provide:Z.dDg,useClass:Z.dDg,deps:[Z.R0b]},{provide:nn,useClass:nn,deps:[vt,Z.R0b]},{provide:g.JF,useClass:pn,deps:[]}];let Zr=(()=>{class Ge{constructor(De){if(De)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(De){return{ngModule:Ge,providers:[{provide:Z.AFp,useValue:De.appId},{provide:ft,useExisting:Z.AFp},Me]}}}return Ge.\u0275fac=function(De){return new(De||Ge)(Z.LFG(Ge,12))},Ge.\u0275mod=Z.oAB({type:Ge}),Ge.\u0275inj=Z.cJS({providers:tr,imports:[g.ez,Z.hGG]}),Ge})(),wr=(()=>{class Ge{constructor(De){this._doc=De}getTitle(){return this._doc.title}setTitle(De){this._doc.title=De||""}}return Ge.\u0275fac=function(De){return new(De||Ge)(Z.LFG(g.K0))},Ge.\u0275prov=Z.Yz7({token:Ge,factory:function(De){let pt=null;return pt=De?new De:function Tr(){return new wr((0,Z.LFG)(g.K0))}(),pt},providedIn:"root"}),Ge})();"undefined"!=typeof window&&window;let $e=(()=>{class Ge{}return Ge.\u0275fac=function(De){return new(De||Ge)},Ge.\u0275prov=Z.Yz7({token:Ge,factory:function(De){let pt=null;return pt=De?new(De||Ge):Z.LFG(rn),pt},providedIn:"root"}),Ge})(),rn=(()=>{class Ge extends $e{constructor(De){super(),this._doc=De}sanitize(De,pt){if(null==pt)return null;switch(De){case Z.q3G.NONE:return pt;case Z.q3G.HTML:return(0,Z.qzn)(pt,"HTML")?(0,Z.z3N)(pt):(0,Z.EiD)(this._doc,String(pt)).toString();case Z.q3G.STYLE:return(0,Z.qzn)(pt,"Style")?(0,Z.z3N)(pt):pt;case Z.q3G.SCRIPT:if((0,Z.qzn)(pt,"Script"))return(0,Z.z3N)(pt);throw new Error("unsafe value used in a script context");case Z.q3G.URL:return(0,Z.yhl)(pt),(0,Z.qzn)(pt,"URL")?(0,Z.z3N)(pt):(0,Z.mCW)(String(pt));case Z.q3G.RESOURCE_URL:if((0,Z.qzn)(pt,"ResourceURL"))return(0,Z.z3N)(pt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${De} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(De){return(0,Z.JVY)(De)}bypassSecurityTrustStyle(De){return(0,Z.L6k)(De)}bypassSecurityTrustScript(De){return(0,Z.eBb)(De)}bypassSecurityTrustUrl(De){return(0,Z.LAX)(De)}bypassSecurityTrustResourceUrl(De){return(0,Z.pB0)(De)}}return Ge.\u0275fac=function(De){return new(De||Ge)(Z.LFG(g.K0))},Ge.\u0275prov=Z.Yz7({token:Ge,factory:function(De){let pt=null;return pt=De?new De:function ht(Ge){return new rn(Ge.get(g.K0))}(Z.LFG(Z.zs3)),pt},providedIn:"root"}),Ge})()},6115:(jn,Dt,H)=>{H.d(Dt,{gz:()=>zs,F0:()=>b,rH:()=>ee,yS:()=>Ee,Bz:()=>Hs,lC:()=>Ks});var g=H(5e3),Z=H(8306),ge=H(4742),le=H(8996),Ye=H(4671),Xe=H(3268),gt=H(7669),Qe=H(1810),ft=H(5403),Pe=H(9672);function pn(N,D,I){N?(0,Pe.f)(I,N,D):D()}var vt=H(8421);function nn(N){return new Z.y(D=>{(0,vt.Xf)(N()).subscribe(D)})}var bn=H(727),Pt=H(4482);function Jt(){return(0,Pt.e)((N,D)=>{let I=null;N._refCount++;const W=(0,ft.x)(D,void 0,void 0,void 0,()=>{if(!N||N._refCount<=0||0<--N._refCount)return void(I=null);const ne=N._connection,me=I;I=null,ne&&(!me||ne===me)&&ne.unsubscribe(),D.unsubscribe()});N.subscribe(W),W.closed||(I=N.connect())})}class Ln extends Z.y{constructor(D,I){super(),this.source=D,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Pt.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,null==D||D.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new bn.w0;const I=this.getSubject();D.add(this.source.subscribe((0,ft.x)(I,void 0,()=>{this._teardown(),I.complete()},W=>{this._teardown(),I.error(W)},()=>this._teardown()))),D.closed&&(this._connection=null,D=bn.w0.EMPTY)}return D}refCount(){return Jt()(this)}}var un=H(9646),xe=H(1135),Ne=H(2843),ot=H(6805),Kt=H(7272),Ut=H(515),Fe=H(7579),Lt=H(9300);function Oe(N){return N<=0?()=>Ut.E:(0,Pt.e)((D,I)=>{let W=[];D.subscribe((0,ft.x)(I,ne=>{W.push(ne),N<W.length&&W.shift()},()=>{for(const ne of W)I.next(ne);I.complete()},void 0,()=>{W=null}))})}var Tt=H(8068),et=H(6590),on=H(4004),wn=H(3900),Xn=H(5698),Jn=H(8675),fn=H(5026),gr=H(262),lr=H(4351),Ft=H(590),Ot=H(5577),st=H(8505),It=H(8189),ut=H(9808);class Wt{constructor(D,I){this.id=D,this.url=I}}class xt extends Wt{constructor(D,I,W="imperative",ne=null){super(D,I),this.navigationTrigger=W,this.restoredState=ne}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zt extends Wt{constructor(D,I,W){super(D,I),this.urlAfterRedirects=W}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Un extends Wt{constructor(D,I,W){super(D,I),this.reason=W}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Yn extends Wt{constructor(D,I,W){super(D,I),this.error=W}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tr extends Wt{constructor(D,I,W,ne){super(D,I),this.urlAfterRedirects=W,this.state=ne}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zr extends Wt{constructor(D,I,W,ne){super(D,I),this.urlAfterRedirects=W,this.state=ne}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class si extends Wt{constructor(D,I,W,ne,me){super(D,I),this.urlAfterRedirects=W,this.state=ne,this.shouldActivate=me}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qn extends Wt{constructor(D,I,W,ne){super(D,I),this.urlAfterRedirects=W,this.state=ne}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hr extends Wt{constructor(D,I,W,ne){super(D,I),this.urlAfterRedirects=W,this.state=ne}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr{constructor(D){this.route=D}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wr{constructor(D){this.route=D}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rs{constructor(D){this.snapshot=D}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ji{constructor(D){this.snapshot=D}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class an{constructor(D){this.snapshot=D}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class it{constructor(D){this.snapshot=D}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(D,I,W){this.routerEvent=D,this.position=I,this.anchor=W}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Bt="primary";class Gt{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const I=this.params[D];return Array.isArray(I)?I[0]:I}return null}getAll(D){if(this.has(D)){const I=this.params[D];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function yn(N){return new Gt(N)}const Bn="ngNavigationCancelingError";function qr(N){const D=Error("NavigationCancelingError: "+N);return D[Bn]=!0,D}function dr(N,D,I){const W=I.path.split("/");if(W.length>N.length||"full"===I.pathMatch&&(D.hasChildren()||W.length<N.length))return null;const ne={};for(let me=0;me<W.length;me++){const Be=W[me],Ke=N[me];if(Be.startsWith(":"))ne[Be.substring(1)]=Ke;else if(Be!==Ke.path)return null}return{consumed:N.slice(0,W.length),posParams:ne}}function Ii(N,D){const I=N?Object.keys(N):void 0,W=D?Object.keys(D):void 0;if(!I||!W||I.length!=W.length)return!1;let ne;for(let me=0;me<I.length;me++)if(ne=I[me],!ui(N[ne],D[ne]))return!1;return!0}function ui(N,D){if(Array.isArray(N)&&Array.isArray(D)){if(N.length!==D.length)return!1;const I=[...N].sort(),W=[...D].sort();return I.every((ne,me)=>W[me]===ne)}return N===D}function Fn(N){return Array.prototype.concat.apply([],N)}function Ei(N){return N.length>0?N[N.length-1]:null}function ji(N,D){for(const I in N)N.hasOwnProperty(I)&&D(N[I],I)}function Pn(N){return(0,g.CqO)(N)?N:(0,g.QGY)(N)?(0,le.D)(Promise.resolve(N)):(0,un.of)(N)}const Wn={exact:function tt(N,D,I){if(!Yt(N.segments,D.segments)||!kt(N.segments,D.segments,I)||N.numberOfChildren!==D.numberOfChildren)return!1;for(const W in D.children)if(!N.children[W]||!tt(N.children[W],D.children[W],I))return!1;return!0},subset:ht},Ar={exact:function Nr(N,D){return Ii(N,D)},subset:function $e(N,D){return Object.keys(D).length<=Object.keys(N).length&&Object.keys(D).every(I=>ui(N[I],D[I]))},ignored:()=>!0};function Pr(N,D,I){return Wn[I.paths](N.root,D.root,I.matrixParams)&&Ar[I.queryParams](N.queryParams,D.queryParams)&&!("exact"===I.fragment&&N.fragment!==D.fragment)}function ht(N,D,I){return rn(N,D,D.segments,I)}function rn(N,D,I,W){if(N.segments.length>I.length){const ne=N.segments.slice(0,I.length);return!(!Yt(ne,I)||D.hasChildren()||!kt(ne,I,W))}if(N.segments.length===I.length){if(!Yt(N.segments,I)||!kt(N.segments,I,W))return!1;for(const ne in D.children)if(!N.children[ne]||!ht(N.children[ne],D.children[ne],W))return!1;return!0}{const ne=I.slice(0,N.segments.length),me=I.slice(N.segments.length);return!!(Yt(N.segments,ne)&&kt(N.segments,ne,W)&&N.children[Bt])&&rn(N.children[Bt],D,me,W)}}function kt(N,D,I){return D.every((W,ne)=>Ar[I](N[ne].parameters,W.parameters))}class Ge{constructor(D,I,W){this.root=D,this.queryParams=I,this.fragment=W}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yn(this.queryParams)),this._queryParamMap}toString(){return zi.serialize(this)}}class Re{constructor(D,I){this.segments=D,this.children=I,this.parent=null,ji(I,(W,ne)=>W.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ns(this)}}class De{constructor(D,I){this.path=D,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=yn(this.parameters)),this._parameterMap}toString(){return oi(this)}}function Yt(N,D){return N.length===D.length&&N.every((I,W)=>I.path===D[W].path)}class Hn{}class Kr{parse(D){const I=new Is(D);return new Ge(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(D){const I=`/${Ls(D.root,!0)}`,W=function _s(N){const D=Object.keys(N).map(I=>{const W=N[I];return Array.isArray(W)?W.map(ne=>`${hi(I)}=${hi(ne)}`).join("&"):`${hi(I)}=${hi(W)}`}).filter(I=>!!I);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${I}${W}${"string"==typeof D.fragment?`#${function es(N){return encodeURI(N)}(D.fragment)}`:""}`}}const zi=new Kr;function ns(N){return N.segments.map(D=>oi(D)).join("/")}function Ls(N,D){if(!N.hasChildren())return ns(N);if(D){const I=N.children[Bt]?Ls(N.children[Bt],!1):"",W=[];return ji(N.children,(ne,me)=>{me!==Bt&&W.push(`${me}:${Ls(ne,!1)}`)}),W.length>0?`${I}(${W.join("//")})`:I}{const I=function ur(N,D){let I=[];return ji(N.children,(W,ne)=>{ne===Bt&&(I=I.concat(D(W,ne)))}),ji(N.children,(W,ne)=>{ne!==Bt&&(I=I.concat(D(W,ne)))}),I}(N,(W,ne)=>ne===Bt?[Ls(N.children[Bt],!1)]:[`${ne}:${Ls(W,!1)}`]);return 1===Object.keys(N.children).length&&null!=N.children[Bt]?`${ns(N)}/${I[0]}`:`${ns(N)}/(${I.join("//")})`}}function Ci(N){return encodeURIComponent(N).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hi(N){return Ci(N).replace(/%3B/gi,";")}function Ri(N){return Ci(N).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _n(N){return decodeURIComponent(N)}function ir(N){return _n(N.replace(/\+/g,"%20"))}function oi(N){return`${Ri(N.path)}${function bi(N){return Object.keys(N).map(D=>`;${Ri(D)}=${Ri(N[D])}`).join("")}(N.parameters)}`}const Wi=/^[^\/()?;=#]+/;function ls(N){const D=N.match(Wi);return D?D[0]:""}const Oi=/^[^=?&#]+/,qi=/^[^&#]+/;class Is{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let W={};return this.peekStartsWith("(")&&(W=this.parseParens(!1)),(D.length>0||Object.keys(I).length>0)&&(W[Bt]=new Re(D,I)),W}parseSegment(){const D=ls(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(D),new De(_n(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const I=ls(this.remaining);if(!I)return;this.capture(I);let W="";if(this.consumeOptional("=")){const ne=ls(this.remaining);ne&&(W=ne,this.capture(W))}D[_n(I)]=_n(W)}parseQueryParam(D){const I=function Vi(N){const D=N.match(Oi);return D?D[0]:""}(this.remaining);if(!I)return;this.capture(I);let W="";if(this.consumeOptional("=")){const Be=function Ur(N){const D=N.match(qi);return D?D[0]:""}(this.remaining);Be&&(W=Be,this.capture(W))}const ne=ir(I),me=ir(W);if(D.hasOwnProperty(ne)){let Be=D[ne];Array.isArray(Be)||(Be=[Be],D[ne]=Be),Be.push(me)}else D[ne]=me}parseParens(D){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const W=ls(this.remaining),ne=this.remaining[W.length];if("/"!==ne&&")"!==ne&&";"!==ne)throw new Error(`Cannot parse url '${this.url}'`);let me;W.indexOf(":")>-1?(me=W.substr(0,W.indexOf(":")),this.capture(me),this.capture(":")):D&&(me=Bt);const Be=this.parseChildren();I[me]=1===Object.keys(Be).length?Be[Bt]:new Re([],Be),this.consumeOptional("//")}return I}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new Error(`Expected "${D}".`)}}class Ss{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const I=this.pathFromRoot(D);return I.length>1?I[I.length-2]:null}children(D){const I=Vs(D,this._root);return I?I.children.map(W=>W.value):[]}firstChild(D){const I=Vs(D,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(D){const I=Cr(D,this._root);return I.length<2?[]:I[I.length-2].children.map(ne=>ne.value).filter(ne=>ne!==D)}pathFromRoot(D){return Cr(D,this._root).map(I=>I.value)}}function Vs(N,D){if(N===D.value)return D;for(const I of D.children){const W=Vs(N,I);if(W)return W}return null}function Cr(N,D){if(N===D.value)return[D];for(const I of D.children){const W=Cr(N,I);if(W.length)return W.unshift(D),W}return[]}class mr{constructor(D,I){this.value=D,this.children=I}toString(){return`TreeNode(${this.value})`}}function yr(N){const D={};return N&&N.children.forEach(I=>D[I.value.outlet]=I),D}class Qi extends Ss{constructor(D,I){super(D),this.snapshot=I,fs(this,D)}toString(){return this.snapshot.toString()}}function zr(N,D){const I=function Si(N,D){const Be=new Yr([],{},{},"",{},Bt,D,null,N.root,-1,{});return new Wr("",new mr(Be,[]))}(N,D),W=new xe.X([new De("",{})]),ne=new xe.X({}),me=new xe.X({}),Be=new xe.X({}),Ke=new xe.X(""),cn=new zs(W,ne,Be,Ke,me,Bt,D,I.root);return cn.snapshot=I.root,new Qi(new mr(cn,[]),I)}class zs{constructor(D,I,W,ne,me,Be,Ke,cn){this.url=D,this.params=I,this.queryParams=W,this.fragment=ne,this.data=me,this.outlet=Be,this.component=Ke,this._futureSnapshot=cn}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,on.U)(D=>yn(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,on.U)(D=>yn(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ki(N,D="emptyOnly"){const I=N.pathFromRoot;let W=0;if("always"!==D)for(W=I.length-1;W>=1;){const ne=I[W],me=I[W-1];if(ne.routeConfig&&""===ne.routeConfig.path)W--;else{if(me.component)break;W--}}return function cs(N){return N.reduce((D,I)=>({params:Object.assign(Object.assign({},D.params),I.params),data:Object.assign(Object.assign({},D.data),I.data),resolve:Object.assign(Object.assign({},D.resolve),I._resolvedData)}),{params:{},data:{},resolve:{}})}(I.slice(W))}class Yr{constructor(D,I,W,ne,me,Be,Ke,cn,Rn,Fr,_r){this.url=D,this.params=I,this.queryParams=W,this.fragment=ne,this.data=me,this.outlet=Be,this.component=Ke,this.routeConfig=cn,this._urlSegment=Rn,this._lastPathIndex=Fr,this._resolve=_r}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(W=>W.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wr extends Ss{constructor(D,I){super(I),this.url=D,fs(this,I)}toString(){return Ds(this._root)}}function fs(N,D){D.value._routerState=N,D.children.forEach(I=>fs(N,I))}function Ds(N){const D=N.children.length>0?` { ${N.children.map(Ds).join(", ")} } `:"";return`${N.value}${D}`}function ps(N){if(N.snapshot){const D=N.snapshot,I=N._futureSnapshot;N.snapshot=I,Ii(D.queryParams,I.queryParams)||N.queryParams.next(I.queryParams),D.fragment!==I.fragment&&N.fragment.next(I.fragment),Ii(D.params,I.params)||N.params.next(I.params),function os(N,D){if(N.length!==D.length)return!1;for(let I=0;I<N.length;++I)if(!Ii(N[I],D[I]))return!1;return!0}(D.url,I.url)||N.url.next(I.url),Ii(D.data,I.data)||N.data.next(I.data)}else N.snapshot=N._futureSnapshot,N.data.next(N._futureSnapshot.data)}function Di(N,D){const I=Ii(N.params,D.params)&&function pt(N,D){return Yt(N,D)&&N.every((I,W)=>Ii(I.parameters,D[W].parameters))}(N.url,D.url);return I&&!(!N.parent!=!D.parent)&&(!N.parent||Di(N.parent,D.parent))}function to(N,D,I){if(I&&N.shouldReuseRoute(D.value,I.value.snapshot)){const W=I.value;W._futureSnapshot=D.value;const ne=function vs(N,D,I){return D.children.map(W=>{for(const ne of I.children)if(N.shouldReuseRoute(W.value,ne.value.snapshot))return to(N,W,ne);return to(N,W)})}(N,D,I);return new mr(W,ne)}{if(N.shouldAttach(D.value)){const me=N.retrieve(D.value);if(null!==me){const Be=me.route;return Be.value._futureSnapshot=D.value,Be.children=D.children.map(Ke=>to(N,Ke)),Be}}const W=function Xi(N){return new zs(new xe.X(N.url),new xe.X(N.params),new xe.X(N.queryParams),new xe.X(N.fragment),new xe.X(N.data),N.outlet,N.component,N)}(D.value),ne=D.children.map(me=>to(N,me));return new mr(W,ne)}}function dt(N){return"object"==typeof N&&null!=N&&!N.outlets&&!N.segmentPath}function St(N){return"object"==typeof N&&null!=N&&N.outlets}function gn(N,D,I,W,ne){let me={};if(W&&ji(W,(Ke,cn)=>{me[cn]=Array.isArray(Ke)?Ke.map(Rn=>`${Rn}`):`${Ke}`}),N===D)return new Ge(I,me,ne);const Be=$n(N,D,I);return new Ge(Be,me,ne)}function $n(N,D,I){const W={};return ji(N.children,(ne,me)=>{W[me]=ne===D?I:$n(ne,D,I)}),new Re(N.segments,W)}class Ir{constructor(D,I,W){if(this.isAbsolute=D,this.numberOfDoubleDots=I,this.commands=W,D&&W.length>0&&dt(W[0]))throw new Error("Root segment cannot have matrix parameters");const ne=W.find(St);if(ne&&ne!==Ei(W))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zi{constructor(D,I,W){this.segmentGroup=D,this.processChildren=I,this.index=W}}function as(N,D,I){if(N||(N=new Re([],{})),0===N.segments.length&&N.hasChildren())return Es(N,D,I);const W=function Ko(N,D,I){let W=0,ne=D;const me={match:!1,pathIndex:0,commandIndex:0};for(;ne<N.segments.length;){if(W>=I.length)return me;const Be=N.segments[ne],Ke=I[W];if(St(Ke))break;const cn=`${Ke}`,Rn=W<I.length-1?I[W+1]:null;if(ne>0&&void 0===cn)break;if(cn&&Rn&&"object"==typeof Rn&&void 0===Rn.outlets){if(!Io(cn,Rn,Be))return me;W+=2}else{if(!Io(cn,{},Be))return me;W++}ne++}return{match:!0,pathIndex:ne,commandIndex:W}}(N,D,I),ne=I.slice(W.commandIndex);if(W.match&&W.pathIndex<N.segments.length){const me=new Re(N.segments.slice(0,W.pathIndex),{});return me.children[Bt]=new Re(N.segments.slice(W.pathIndex),N.children),Es(me,0,ne)}return W.match&&0===ne.length?new Re(N.segments,{}):W.match&&!N.hasChildren()?gs(N,D,I):W.match?Es(N,0,ne):gs(N,D,I)}function Es(N,D,I){if(0===I.length)return new Re(N.segments,{});{const W=function ei(N){return St(N[0])?N[0].outlets:{[Bt]:N}}(I),ne={};return ji(W,(me,Be)=>{"string"==typeof me&&(me=[me]),null!==me&&(ne[Be]=as(N.children[Be],D,me))}),ji(N.children,(me,Be)=>{void 0===W[Be]&&(ne[Be]=me)}),new Re(N.segments,ne)}}function gs(N,D,I){const W=N.segments.slice(0,D);let ne=0;for(;ne<I.length;){const me=I[ne];if(St(me)){const cn=co(me.outlets);return new Re(W,cn)}if(0===ne&&dt(I[0])){W.push(new De(N.segments[D].path,Cs(I[0]))),ne++;continue}const Be=St(me)?me.outlets[Bt]:`${me}`,Ke=ne<I.length-1?I[ne+1]:null;Be&&Ke&&dt(Ke)?(W.push(new De(Be,Cs(Ke))),ne+=2):(W.push(new De(Be,{})),ne++)}return new Re(W,{})}function co(N){const D={};return ji(N,(I,W)=>{"string"==typeof I&&(I=[I]),null!==I&&(D[W]=gs(new Re([],{}),0,I))}),D}function Cs(N){const D={};return ji(N,(I,W)=>D[W]=`${I}`),D}function Io(N,D,I){return N==I.path&&Ii(D,I.parameters)}class no{constructor(D,I,W,ne){this.routeReuseStrategy=D,this.futureState=I,this.currState=W,this.forwardEvent=ne}activate(D){const I=this.futureState._root,W=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,W,D),ps(this.futureState.root),this.activateChildRoutes(I,W,D)}deactivateChildRoutes(D,I,W){const ne=yr(I);D.children.forEach(me=>{const Be=me.value.outlet;this.deactivateRoutes(me,ne[Be],W),delete ne[Be]}),ji(ne,(me,Be)=>{this.deactivateRouteAndItsChildren(me,W)})}deactivateRoutes(D,I,W){const ne=D.value,me=I?I.value:null;if(ne===me)if(ne.component){const Be=W.getContext(ne.outlet);Be&&this.deactivateChildRoutes(D,I,Be.children)}else this.deactivateChildRoutes(D,I,W);else me&&this.deactivateRouteAndItsChildren(I,W)}deactivateRouteAndItsChildren(D,I){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,I):this.deactivateRouteAndOutlet(D,I)}detachAndStoreRouteSubtree(D,I){const W=I.getContext(D.value.outlet),ne=W&&D.value.component?W.children:I,me=yr(D);for(const Be of Object.keys(me))this.deactivateRouteAndItsChildren(me[Be],ne);if(W&&W.outlet){const Be=W.outlet.detach(),Ke=W.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:Be,route:D,contexts:Ke})}}deactivateRouteAndOutlet(D,I){const W=I.getContext(D.value.outlet),ne=W&&D.value.component?W.children:I,me=yr(D);for(const Be of Object.keys(me))this.deactivateRouteAndItsChildren(me[Be],ne);W&&W.outlet&&(W.outlet.deactivate(),W.children.onOutletDeactivated(),W.attachRef=null,W.resolver=null,W.route=null)}activateChildRoutes(D,I,W){const ne=yr(I);D.children.forEach(me=>{this.activateRoutes(me,ne[me.value.outlet],W),this.forwardEvent(new it(me.value.snapshot))}),D.children.length&&this.forwardEvent(new Ji(D.value.snapshot))}activateRoutes(D,I,W){const ne=D.value,me=I?I.value:null;if(ps(ne),ne===me)if(ne.component){const Be=W.getOrCreateContext(ne.outlet);this.activateChildRoutes(D,I,Be.children)}else this.activateChildRoutes(D,I,W);else if(ne.component){const Be=W.getOrCreateContext(ne.outlet);if(this.routeReuseStrategy.shouldAttach(ne.snapshot)){const Ke=this.routeReuseStrategy.retrieve(ne.snapshot);this.routeReuseStrategy.store(ne.snapshot,null),Be.children.onOutletReAttached(Ke.contexts),Be.attachRef=Ke.componentRef,Be.route=Ke.route.value,Be.outlet&&Be.outlet.attach(Ke.componentRef,Ke.route.value),ps(Ke.route.value),this.activateChildRoutes(D,null,Be.children)}else{const Ke=function Ms(N){for(let D=N.parent;D;D=D.parent){const I=D.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig;if(I&&I.component)return null}return null}(ne.snapshot),cn=Ke?Ke.module.componentFactoryResolver:null;Be.attachRef=null,Be.route=ne,Be.resolver=cn,Be.outlet&&Be.outlet.activateWith(ne,cn),this.activateChildRoutes(D,null,Be.children)}}else this.activateChildRoutes(D,null,W)}}class Us{constructor(D,I){this.routes=D,this.module=I}}function Bs(N){return"function"==typeof N}function qs(N){return N instanceof Ge}const ms=Symbol("INITIAL_VALUE");function ho(){return(0,wn.w)(N=>function Me(...N){const D=(0,gt.yG)(N),I=(0,gt.jO)(N),{args:W,keys:ne}=(0,ge.D)(N);if(0===W.length)return(0,le.D)([],D);const me=new Z.y(function Et(N,D,I=Ye.y){return W=>{pn(D,()=>{const{length:ne}=N,me=new Array(ne);let Be=ne,Ke=ne;for(let cn=0;cn<ne;cn++)pn(D,()=>{const Rn=(0,le.D)(N[cn],D);let Fr=!1;Rn.subscribe((0,ft.x)(W,_r=>{me[cn]=_r,Fr||(Fr=!0,Ke--),Ke||W.next(I(me.slice()))},()=>{--Be||W.complete()}))},W)},W)}}(W,D,ne?Be=>(0,Qe.n)(ne,Be):Ye.y));return I?me.pipe((0,Xe.Z)(I)):me}(N.map(D=>D.pipe((0,Xn.q)(1),(0,Jn.O)(ms)))).pipe((0,fn.R)((D,I)=>{let W=!1;return I.reduce((ne,me,Be)=>ne!==ms?ne:(me===ms&&(W=!0),W||!1!==me&&Be!==I.length-1&&!qs(me)?ne:me),D)},ms),(0,Lt.h)(D=>D!==ms),(0,on.U)(D=>qs(D)?D:!0===D),(0,Xn.q)(1)))}class Rs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ai,this.attachRef=null}}class Ai{constructor(){this.contexts=new Map}onChildOutletCreated(D,I){const W=this.getOrCreateContext(D);W.outlet=I,this.contexts.set(D,W)}onChildOutletDestroyed(D){const I=this.getContext(D);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let I=this.getContext(D);return I||(I=new Rs,this.contexts.set(D,I)),I}getContext(D){return this.contexts.get(D)||null}}let Ks=(()=>{class N{constructor(I,W,ne,me,Be){this.parentContexts=I,this.location=W,this.resolver=ne,this.changeDetector=Be,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=me||Bt,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,W){this.activated=I,this._activatedRoute=W,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,W){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=I;const Be=(W=W||this.resolver).resolveComponentFactory(I._futureSnapshot.routeConfig.component),Ke=this.parentContexts.getOrCreateContext(this.name).children,cn=new ao(I,Ke,this.location.injector);this.activated=this.location.createComponent(Be,this.location.length,cn),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return N.\u0275fac=function(I){return new(I||N)(g.Y36(Ai),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},N.\u0275dir=g.lG2({type:N,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),N})();class ao{constructor(D,I,W){this.route=D,this.childContexts=I,this.parent=W}get(D,I){return D===zs?this.route:D===Ai?this.childContexts:this.parent.get(D,I)}}let js=(()=>{class N{}return N.\u0275fac=function(I){return new(I||N)},N.\u0275cmp=g.Xpm({type:N,selectors:[["ng-component"]],decls:1,vars:0,template:function(I,W){1&I&&g._UZ(0,"router-outlet")},directives:[Ks],encapsulation:2}),N})();function Ps(N,D=""){for(let I=0;I<N.length;I++){const W=N[I];Os(W,ki(D,W))}}function Os(N,D){N.children&&Ps(N.children,D)}function ki(N,D){return D?N||D.path?N&&!D.path?`${N}/`:!N&&D.path?D.path:`${N}/${D.path}`:"":N}function _i(N){const D=N.children&&N.children.map(_i),I=D?Object.assign(Object.assign({},N),{children:D}):Object.assign({},N);return!I.component&&(D||I.loadChildren)&&I.outlet&&I.outlet!==Bt&&(I.component=js),I}function U(N){return N.outlet||Bt}function pe(N,D){const I=N.filter(W=>U(W)===D);return I.push(...N.filter(W=>U(W)!==D)),I}const q={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ve(N,D,I){var W;if(""===D.path)return"full"===D.pathMatch&&(N.hasChildren()||I.length>0)?Object.assign({},q):{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const me=(D.matcher||dr)(I,N,D);if(!me)return Object.assign({},q);const Be={};ji(me.posParams,(cn,Rn)=>{Be[Rn]=cn.path});const Ke=me.consumed.length>0?Object.assign(Object.assign({},Be),me.consumed[me.consumed.length-1].parameters):Be;return{matched:!0,consumedSegments:me.consumed,remainingSegments:I.slice(me.consumed.length),parameters:Ke,positionalParamSegments:null!==(W=me.posParams)&&void 0!==W?W:{}}}function ze(N,D,I,W,ne="corrected"){if(I.length>0&&function or(N,D,I){return I.some(W=>Xr(N,D,W)&&U(W)!==Bt)}(N,I,W)){const Be=new Re(D,function Cn(N,D,I,W){const ne={};ne[Bt]=W,W._sourceSegment=N,W._segmentIndexShift=D.length;for(const me of I)if(""===me.path&&U(me)!==Bt){const Be=new Re([],{});Be._sourceSegment=N,Be._segmentIndexShift=D.length,ne[U(me)]=Be}return ne}(N,D,W,new Re(I,N.children)));return Be._sourceSegment=N,Be._segmentIndexShift=D.length,{segmentGroup:Be,slicedSegments:[]}}if(0===I.length&&function Br(N,D,I){return I.some(W=>Xr(N,D,W))}(N,I,W)){const Be=new Re(N.segments,function en(N,D,I,W,ne,me){const Be={};for(const Ke of W)if(Xr(N,I,Ke)&&!ne[U(Ke)]){const cn=new Re([],{});cn._sourceSegment=N,cn._segmentIndexShift="legacy"===me?N.segments.length:D.length,Be[U(Ke)]=cn}return Object.assign(Object.assign({},ne),Be)}(N,D,I,W,N.children,ne));return Be._sourceSegment=N,Be._segmentIndexShift=D.length,{segmentGroup:Be,slicedSegments:I}}const me=new Re(N.segments,N.children);return me._sourceSegment=N,me._segmentIndexShift=D.length,{segmentGroup:me,slicedSegments:I}}function Xr(N,D,I){return(!(N.hasChildren()||D.length>0)||"full"!==I.pathMatch)&&""===I.path}function ni(N,D,I,W){return!!(U(N)===W||W!==Bt&&Xr(D,I,N))&&("**"===N.path||ve(D,N,I).matched)}function $r(N,D,I){return 0===D.length&&!N.children[I]}class Yi{constructor(D){this.segmentGroup=D||null}}class vi{constructor(D){this.urlTree=D}}function Ti(N){return(0,Ne._)(new Yi(N))}function ro(N){return(0,Ne._)(new vi(N))}class Po{constructor(D,I,W,ne,me){this.configLoader=I,this.urlSerializer=W,this.urlTree=ne,this.config=me,this.allowRedirects=!0,this.ngModule=D.get(g.h0i)}apply(){const D=ze(this.urlTree.root,[],[],this.config).segmentGroup,I=new Re(D.segments,D.children);return this.expandSegmentGroup(this.ngModule,this.config,I,Bt).pipe((0,on.U)(me=>this.createUrlTree(vo(me),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,gr.K)(me=>{if(me instanceof vi)return this.allowRedirects=!1,this.match(me.urlTree);throw me instanceof Yi?this.noMatchError(me):me}))}match(D){return this.expandSegmentGroup(this.ngModule,this.config,D.root,Bt).pipe((0,on.U)(ne=>this.createUrlTree(vo(ne),D.queryParams,D.fragment))).pipe((0,gr.K)(ne=>{throw ne instanceof Yi?this.noMatchError(ne):ne}))}noMatchError(D){return new Error(`Cannot match any routes. URL Segment: '${D.segmentGroup}'`)}createUrlTree(D,I,W){const ne=D.segments.length>0?new Re([],{[Bt]:D}):D;return new Ge(ne,I,W)}expandSegmentGroup(D,I,W,ne){return 0===W.segments.length&&W.hasChildren()?this.expandChildren(D,I,W).pipe((0,on.U)(me=>new Re([],me))):this.expandSegment(D,W,I,W.segments,ne,!0)}expandChildren(D,I,W){const ne=[];for(const me of Object.keys(W.children))"primary"===me?ne.unshift(me):ne.push(me);return(0,le.D)(ne).pipe((0,lr.b)(me=>{const Be=W.children[me],Ke=pe(I,me);return this.expandSegmentGroup(D,Ke,Be,me).pipe((0,on.U)(cn=>({segment:cn,outlet:me})))}),(0,fn.R)((me,Be)=>(me[Be.outlet]=Be.segment,me),{}),function Nt(N,D){const I=arguments.length>=2;return W=>W.pipe(N?(0,Lt.h)((ne,me)=>N(ne,me,W)):Ye.y,Oe(1),I?(0,et.d)(D):(0,Tt.T)(()=>new ot.K))}())}expandSegment(D,I,W,ne,me,Be){return(0,le.D)(W).pipe((0,lr.b)(Ke=>this.expandSegmentAgainstRoute(D,I,W,Ke,ne,me,Be).pipe((0,gr.K)(Rn=>{if(Rn instanceof Yi)return(0,un.of)(null);throw Rn}))),(0,Ft.P)(Ke=>!!Ke),(0,gr.K)((Ke,cn)=>{if(Ke instanceof ot.K||"EmptyError"===Ke.name)return $r(I,ne,me)?(0,un.of)(new Re([],{})):Ti(I);throw Ke}))}expandSegmentAgainstRoute(D,I,W,ne,me,Be,Ke){return ni(ne,I,me,Be)?void 0===ne.redirectTo?this.matchSegmentAgainstRoute(D,I,ne,me,Be):Ke&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,I,W,ne,me,Be):Ti(I):Ti(I)}expandSegmentAgainstRouteUsingRedirect(D,I,W,ne,me,Be){return"**"===ne.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,W,ne,Be):this.expandRegularSegmentAgainstRouteUsingRedirect(D,I,W,ne,me,Be)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,I,W,ne){const me=this.applyRedirectCommands([],W.redirectTo,{});return W.redirectTo.startsWith("/")?ro(me):this.lineralizeSegments(W,me).pipe((0,Ot.z)(Be=>{const Ke=new Re(Be,{});return this.expandSegment(D,Ke,I,Be,ne,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,I,W,ne,me,Be){const{matched:Ke,consumedSegments:cn,remainingSegments:Rn,positionalParamSegments:Fr}=ve(I,ne,me);if(!Ke)return Ti(I);const _r=this.applyRedirectCommands(cn,ne.redirectTo,Fr);return ne.redirectTo.startsWith("/")?ro(_r):this.lineralizeSegments(ne,_r).pipe((0,Ot.z)(Mr=>this.expandSegment(D,I,W,Mr.concat(Rn),Be,!1)))}matchSegmentAgainstRoute(D,I,W,ne,me){if("**"===W.path)return W.loadChildren?(W._loadedConfig?(0,un.of)(W._loadedConfig):this.configLoader.load(D.injector,W)).pipe((0,on.U)(_r=>(W._loadedConfig=_r,new Re(ne,{})))):(0,un.of)(new Re(ne,{}));const{matched:Be,consumedSegments:Ke,remainingSegments:cn}=ve(I,W,ne);return Be?this.getChildConfig(D,W,ne).pipe((0,Ot.z)(Fr=>{const _r=Fr.module,Mr=Fr.routes,{segmentGroup:Gn,slicedSegments:_o}=ze(I,Ke,cn,Mr),ai=new Re(Gn.segments,Gn.children);if(0===_o.length&&ai.hasChildren())return this.expandChildren(_r,Mr,ai).pipe((0,on.U)(Uo=>new Re(Ke,Uo)));if(0===Mr.length&&0===_o.length)return(0,un.of)(new Re(Ke,{}));const Aa=U(W)===me;return this.expandSegment(_r,ai,Mr,_o,Aa?Bt:me,!0).pipe((0,on.U)(Qn=>new Re(Ke.concat(Qn.segments),Qn.children)))})):Ti(I)}getChildConfig(D,I,W){return I.children?(0,un.of)(new Us(I.children,D)):I.loadChildren?void 0!==I._loadedConfig?(0,un.of)(I._loadedConfig):this.runCanLoadGuards(D.injector,I,W).pipe((0,Ot.z)(ne=>ne?this.configLoader.load(D.injector,I).pipe((0,on.U)(me=>(I._loadedConfig=me,me))):function kr(N){return(0,Ne._)(qr(`Cannot load children because the guard of the route "path: '${N.path}'" returned false`))}(I))):(0,un.of)(new Us([],D))}runCanLoadGuards(D,I,W){const ne=I.canLoad;if(!ne||0===ne.length)return(0,un.of)(!0);const me=ne.map(Be=>{const Ke=D.get(Be);let cn;if(function Ws(N){return N&&Bs(N.canLoad)}(Ke))cn=Ke.canLoad(I,W);else{if(!Bs(Ke))throw new Error("Invalid CanLoad guard");cn=Ke(I,W)}return Pn(cn)});return(0,un.of)(me).pipe(ho(),(0,st.b)(Be=>{if(!qs(Be))return;const Ke=qr(`Redirecting to "${this.urlSerializer.serialize(Be)}"`);throw Ke.url=Be,Ke}),(0,on.U)(Be=>!0===Be))}lineralizeSegments(D,I){let W=[],ne=I.root;for(;;){if(W=W.concat(ne.segments),0===ne.numberOfChildren)return(0,un.of)(W);if(ne.numberOfChildren>1||!ne.children[Bt])return(0,Ne._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${D.redirectTo}'`));ne=ne.children[Bt]}}applyRedirectCommands(D,I,W){return this.applyRedirectCreatreUrlTree(I,this.urlSerializer.parse(I),D,W)}applyRedirectCreatreUrlTree(D,I,W,ne){const me=this.createSegmentGroup(D,I.root,W,ne);return new Ge(me,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(D,I){const W={};return ji(D,(ne,me)=>{if("string"==typeof ne&&ne.startsWith(":")){const Ke=ne.substring(1);W[me]=I[Ke]}else W[me]=ne}),W}createSegmentGroup(D,I,W,ne){const me=this.createSegments(D,I.segments,W,ne);let Be={};return ji(I.children,(Ke,cn)=>{Be[cn]=this.createSegmentGroup(D,Ke,W,ne)}),new Re(me,Be)}createSegments(D,I,W,ne){return I.map(me=>me.path.startsWith(":")?this.findPosParam(D,me,ne):this.findOrReturn(me,W))}findPosParam(D,I,W){const ne=W[I.path.substring(1)];if(!ne)throw new Error(`Cannot redirect to '${D}'. Cannot find '${I.path}'.`);return ne}findOrReturn(D,I){let W=0;for(const ne of I){if(ne.path===D.path)return I.splice(W),ne;W++}return D}}function vo(N){const D={};for(const W of Object.keys(N.children)){const me=vo(N.children[W]);(me.segments.length>0||me.hasChildren())&&(D[W]=me)}return function io(N){if(1===N.numberOfChildren&&N.children[Bt]){const D=N.children[Bt];return new Re(N.segments.concat(D.segments),D.children)}return N}(new Re(N.segments,D))}class G{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class L{constructor(D,I){this.component=D,this.route=I}}function he(N,D,I){const W=N._root;return K(W,D?D._root:null,I,[W.value])}function Mn(N,D,I){const W=function te(N){if(!N)return null;for(let D=N.parent;D;D=D.parent){const I=D.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig}return null}(D);return(W?W.module.injector:I).get(N)}function K(N,D,I,W,ne={canDeactivateChecks:[],canActivateChecks:[]}){const me=yr(D);return N.children.forEach(Be=>{(function be(N,D,I,W,ne={canDeactivateChecks:[],canActivateChecks:[]}){const me=N.value,Be=D?D.value:null,Ke=I?I.getContext(N.value.outlet):null;if(Be&&me.routeConfig===Be.routeConfig){const cn=function Ue(N,D,I){if("function"==typeof I)return I(N,D);switch(I){case"pathParamsChange":return!Yt(N.url,D.url);case"pathParamsOrQueryParamsChange":return!Yt(N.url,D.url)||!Ii(N.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Di(N,D)||!Ii(N.queryParams,D.queryParams);default:return!Di(N,D)}}(Be,me,me.routeConfig.runGuardsAndResolvers);cn?ne.canActivateChecks.push(new G(W)):(me.data=Be.data,me._resolvedData=Be._resolvedData),K(N,D,me.component?Ke?Ke.children:null:I,W,ne),cn&&Ke&&Ke.outlet&&Ke.outlet.isActivated&&ne.canDeactivateChecks.push(new L(Ke.outlet.component,Be))}else Be&&rt(D,Ke,ne),ne.canActivateChecks.push(new G(W)),K(N,null,me.component?Ke?Ke.children:null:I,W,ne)})(Be,me[Be.value.outlet],I,W.concat([Be.value]),ne),delete me[Be.value.outlet]}),ji(me,(Be,Ke)=>rt(Be,I.getContext(Ke),ne)),ne}function rt(N,D,I){const W=yr(N),ne=N.value;ji(W,(me,Be)=>{rt(me,ne.component?D?D.children.getContext(Be):null:D,I)}),I.canDeactivateChecks.push(new L(ne.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,ne))}class is{}function l(N){return new Z.y(D=>D.error(N))}class S{constructor(D,I,W,ne,me,Be){this.rootComponentType=D,this.config=I,this.urlTree=W,this.url=ne,this.paramsInheritanceStrategy=me,this.relativeLinkResolution=Be}recognize(){const D=ze(this.urlTree.root,[],[],this.config.filter(Be=>void 0===Be.redirectTo),this.relativeLinkResolution).segmentGroup,I=this.processSegmentGroup(this.config,D,Bt);if(null===I)return null;const W=new Yr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Bt,this.rootComponentType,null,this.urlTree.root,-1,{}),ne=new mr(W,I),me=new Wr(this.url,ne);return this.inheritParamsAndData(me._root),me}inheritParamsAndData(D){const I=D.value,W=Ki(I,this.paramsInheritanceStrategy);I.params=Object.freeze(W.params),I.data=Object.freeze(W.data),D.children.forEach(ne=>this.inheritParamsAndData(ne))}processSegmentGroup(D,I,W){return 0===I.segments.length&&I.hasChildren()?this.processChildren(D,I):this.processSegment(D,I,I.segments,W)}processChildren(D,I){const W=[];for(const me of Object.keys(I.children)){const Be=I.children[me],Ke=pe(D,me),cn=this.processSegmentGroup(Ke,Be,me);if(null===cn)return null;W.push(...cn)}const ne=ye(W);return function P(N){N.sort((D,I)=>D.value.outlet===Bt?-1:I.value.outlet===Bt?1:D.value.outlet.localeCompare(I.value.outlet))}(ne),ne}processSegment(D,I,W,ne){for(const me of D){const Be=this.processSegmentAgainstRoute(me,I,W,ne);if(null!==Be)return Be}return $r(I,W,ne)?[]:null}processSegmentAgainstRoute(D,I,W,ne){if(D.redirectTo||!ni(D,I,W,ne))return null;let me,Be=[],Ke=[];if("**"===D.path){const Gn=W.length>0?Ei(W).parameters:{};me=new Yr(W,Gn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ce(D),U(D),D.component,D,ae(I),_e(I)+W.length,ue(D))}else{const Gn=ve(I,D,W);if(!Gn.matched)return null;Be=Gn.consumedSegments,Ke=Gn.remainingSegments,me=new Yr(Be,Gn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ce(D),U(D),D.component,D,ae(I),_e(I)+Be.length,ue(D))}const cn=function z(N){return N.children?N.children:N.loadChildren?N._loadedConfig.routes:[]}(D),{segmentGroup:Rn,slicedSegments:Fr}=ze(I,Be,Ke,cn.filter(Gn=>void 0===Gn.redirectTo),this.relativeLinkResolution);if(0===Fr.length&&Rn.hasChildren()){const Gn=this.processChildren(cn,Rn);return null===Gn?null:[new mr(me,Gn)]}if(0===cn.length&&0===Fr.length)return[new mr(me,[])];const _r=U(D)===ne,Mr=this.processSegment(cn,Rn,Fr,_r?Bt:ne);return null===Mr?null:[new mr(me,Mr)]}}function J(N){const D=N.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function ye(N){const D=[],I=new Set;for(const W of N){if(!J(W)){D.push(W);continue}const ne=D.find(me=>W.value.routeConfig===me.value.routeConfig);void 0!==ne?(ne.children.push(...W.children),I.add(ne)):D.push(W)}for(const W of I){const ne=ye(W.children);D.push(new mr(W.value,ne))}return D.filter(W=>!I.has(W))}function ae(N){let D=N;for(;D._sourceSegment;)D=D._sourceSegment;return D}function _e(N){let D=N,I=D._segmentIndexShift?D._segmentIndexShift:0;for(;D._sourceSegment;)D=D._sourceSegment,I+=D._segmentIndexShift?D._segmentIndexShift:0;return I-1}function ce(N){return N.data||{}}function ue(N){return N.resolve||{}}function Le(N){return[...Object.keys(N),...Object.getOwnPropertySymbols(N)]}function Je(N){return(0,wn.w)(D=>{const I=N(D);return I?(0,le.D)(I).pipe((0,on.U)(()=>D)):(0,un.of)(D)})}class Tn extends class mn{shouldDetach(D){return!1}store(D,I){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,I){return D.routeConfig===I.routeConfig}}{}const hn=new g.OlP("ROUTES");class xn{constructor(D,I,W,ne){this.injector=D,this.compiler=I,this.onLoadStartListener=W,this.onLoadEndListener=ne}load(D,I){if(I._loader$)return I._loader$;this.onLoadStartListener&&this.onLoadStartListener(I);const ne=this.loadModuleFactory(I.loadChildren).pipe((0,on.U)(me=>{this.onLoadEndListener&&this.onLoadEndListener(I);const Be=me.create(D);return new Us(Fn(Be.injector.get(hn,void 0,g.XFs.Self|g.XFs.Optional)).map(_i),Be)}),(0,gr.K)(me=>{throw I._loader$=void 0,me}));return I._loader$=new Ln(ne,()=>new Fe.x).pipe(Jt()),I._loader$}loadModuleFactory(D){return Pn(D()).pipe((0,Ot.z)(I=>I instanceof g.YKP?(0,un.of)(I):(0,le.D)(this.compiler.compileModuleAsync(I))))}}class cr{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,I){return D}}function Nn(N){throw N}function Qt(N,D,I){return D.parse("/")}function Rt(N,D){return(0,un.of)(null)}const ln={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},B={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let b=(()=>{class N{constructor(I,W,ne,me,Be,Ke,cn){this.rootComponentType=I,this.urlSerializer=W,this.rootContexts=ne,this.location=me,this.config=cn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fe.x,this.errorHandler=Nn,this.malformedUriErrorHandler=Qt,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Rt,afterPreactivation:Rt},this.urlHandlingStrategy=new cr,this.routeReuseStrategy=new Tn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Be.get(g.h0i),this.console=Be.get(g.c2e);const _r=Be.get(g.R0b);this.isNgZoneEnabled=_r instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(cn),this.currentUrlTree=function jt(){return new Ge(new Re([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new xn(Be,Ke,Mr=>this.triggerEvent(new Tr(Mr)),Mr=>this.triggerEvent(new wr(Mr))),this.routerState=zr(this.currentUrlTree,this.rootComponentType),this.transitions=new xe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}setupNavigations(I){const W=this.events;return I.pipe((0,Lt.h)(ne=>0!==ne.id),(0,on.U)(ne=>Object.assign(Object.assign({},ne),{extractedUrl:this.urlHandlingStrategy.extract(ne.rawUrl)})),(0,wn.w)(ne=>{let me=!1,Be=!1;return(0,un.of)(ne).pipe((0,st.b)(Ke=>{this.currentNavigation={id:Ke.id,initialUrl:Ke.currentRawUrl,extractedUrl:Ke.extractedUrl,trigger:Ke.source,extras:Ke.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,wn.w)(Ke=>{const cn=this.browserUrlTree.toString(),Rn=!this.navigated||Ke.extractedUrl.toString()!==cn||cn!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Rn)&&this.urlHandlingStrategy.shouldProcessUrl(Ke.rawUrl))return k(Ke.source)&&(this.browserUrlTree=Ke.extractedUrl),(0,un.of)(Ke).pipe((0,wn.w)(_r=>{const Mr=this.transitions.getValue();return W.next(new xt(_r.id,this.serializeUrl(_r.extractedUrl),_r.source,_r.restoredState)),Mr!==this.transitions.getValue()?Ut.E:Promise.resolve(_r)}),function Q(N,D,I,W){return(0,wn.w)(ne=>function Zs(N,D,I,W,ne){return new Po(N,D,I,W,ne).apply()}(N,D,I,ne.extractedUrl,W).pipe((0,on.U)(me=>Object.assign(Object.assign({},ne),{urlAfterRedirects:me}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,st.b)(_r=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:_r.urlAfterRedirects})}),function we(N,D,I,W,ne){return(0,Ot.z)(me=>function x(N,D,I,W,ne="emptyOnly",me="legacy"){try{const Be=new S(N,D,I,W,ne,me).recognize();return null===Be?l(new is):(0,un.of)(Be)}catch(Be){return l(Be)}}(N,D,me.urlAfterRedirects,I(me.urlAfterRedirects),W,ne).pipe((0,on.U)(Be=>Object.assign(Object.assign({},me),{targetSnapshot:Be}))))}(this.rootComponentType,this.config,_r=>this.serializeUrl(_r),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,st.b)(_r=>{if("eager"===this.urlUpdateStrategy){if(!_r.extras.skipLocationChange){const Gn=this.urlHandlingStrategy.merge(_r.urlAfterRedirects,_r.rawUrl);this.setBrowserUrl(Gn,_r)}this.browserUrlTree=_r.urlAfterRedirects}const Mr=new tr(_r.id,this.serializeUrl(_r.extractedUrl),this.serializeUrl(_r.urlAfterRedirects),_r.targetSnapshot);W.next(Mr)}));if(Rn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Mr,extractedUrl:Gn,source:_o,restoredState:ai,extras:Aa}=Ke,Ns=new xt(Mr,this.serializeUrl(Gn),_o,ai);W.next(Ns);const Qn=zr(Gn,this.rootComponentType).snapshot;return(0,un.of)(Object.assign(Object.assign({},Ke),{targetSnapshot:Qn,urlAfterRedirects:Gn,extras:Object.assign(Object.assign({},Aa),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ke.rawUrl,Ke.resolve(null),Ut.E}),Je(Ke=>{const{targetSnapshot:cn,id:Rn,extractedUrl:Fr,rawUrl:_r,extras:{skipLocationChange:Mr,replaceUrl:Gn}}=Ke;return this.hooks.beforePreactivation(cn,{navigationId:Rn,appliedUrlTree:Fr,rawUrlTree:_r,skipLocationChange:!!Mr,replaceUrl:!!Gn})}),(0,st.b)(Ke=>{const cn=new Zr(Ke.id,this.serializeUrl(Ke.extractedUrl),this.serializeUrl(Ke.urlAfterRedirects),Ke.targetSnapshot);this.triggerEvent(cn)}),(0,on.U)(Ke=>Object.assign(Object.assign({},Ke),{guards:he(Ke.targetSnapshot,Ke.currentSnapshot,this.rootContexts)})),function Ht(N,D){return(0,Ot.z)(I=>{const{targetSnapshot:W,currentSnapshot:ne,guards:{canActivateChecks:me,canDeactivateChecks:Be}}=I;return 0===Be.length&&0===me.length?(0,un.of)(Object.assign(Object.assign({},I),{guardsResult:!0})):function Sn(N,D,I,W){return(0,le.D)(N).pipe((0,Ot.z)(ne=>function Ui(N,D,I,W,ne){const me=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!me||0===me.length)return(0,un.of)(!0);const Be=me.map(Ke=>{const cn=Mn(Ke,D,ne);let Rn;if(function Zo(N){return N&&Bs(N.canDeactivate)}(cn))Rn=Pn(cn.canDeactivate(N,D,I,W));else{if(!Bs(cn))throw new Error("Invalid CanDeactivate guard");Rn=Pn(cn(N,D,I,W))}return Rn.pipe((0,Ft.P)())});return(0,un.of)(Be).pipe(ho())}(ne.component,ne.route,I,D,W)),(0,Ft.P)(ne=>!0!==ne,!0))}(Be,W,ne,N).pipe((0,Ot.z)(Ke=>Ke&&function Ro(N){return"boolean"==typeof N}(Ke)?function vr(N,D,I,W){return(0,le.D)(D).pipe((0,lr.b)(ne=>(0,Kt.z)(function ti(N,D){return null!==N&&D&&D(new rs(N)),(0,un.of)(!0)}(ne.route.parent,W),function Kn(N,D){return null!==N&&D&&D(new an(N)),(0,un.of)(!0)}(ne.route,W),function fi(N,D,I){const W=D[D.length-1],me=D.slice(0,D.length-1).reverse().map(Be=>function We(N){const D=N.routeConfig?N.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:N,guards:D}:null}(Be)).filter(Be=>null!==Be).map(Be=>nn(()=>{const Ke=Be.guards.map(cn=>{const Rn=Mn(cn,Be.node,I);let Fr;if(function $s(N){return N&&Bs(N.canActivateChild)}(Rn))Fr=Pn(Rn.canActivateChild(W,N));else{if(!Bs(Rn))throw new Error("Invalid CanActivateChild guard");Fr=Pn(Rn(W,N))}return Fr.pipe((0,Ft.P)())});return(0,un.of)(Ke).pipe(ho())}));return(0,un.of)(me).pipe(ho())}(N,ne.path,I),function gi(N,D,I){const W=D.routeConfig?D.routeConfig.canActivate:null;if(!W||0===W.length)return(0,un.of)(!0);const ne=W.map(me=>nn(()=>{const Be=Mn(me,D,I);let Ke;if(function bs(N){return N&&Bs(N.canActivate)}(Be))Ke=Pn(Be.canActivate(D,N));else{if(!Bs(Be))throw new Error("Invalid CanActivate guard");Ke=Pn(Be(D,N))}return Ke.pipe((0,Ft.P)())}));return(0,un.of)(ne).pipe(ho())}(N,ne.route,I))),(0,Ft.P)(ne=>!0!==ne,!0))}(W,me,N,D):(0,un.of)(Ke)),(0,on.U)(Ke=>Object.assign(Object.assign({},I),{guardsResult:Ke})))})}(this.ngModule.injector,Ke=>this.triggerEvent(Ke)),(0,st.b)(Ke=>{if(qs(Ke.guardsResult)){const Rn=qr(`Redirecting to "${this.serializeUrl(Ke.guardsResult)}"`);throw Rn.url=Ke.guardsResult,Rn}const cn=new si(Ke.id,this.serializeUrl(Ke.extractedUrl),this.serializeUrl(Ke.urlAfterRedirects),Ke.targetSnapshot,!!Ke.guardsResult);this.triggerEvent(cn)}),(0,Lt.h)(Ke=>!!Ke.guardsResult||(this.restoreHistory(Ke),this.cancelNavigationTransition(Ke,""),!1)),Je(Ke=>{if(Ke.guards.canActivateChecks.length)return(0,un.of)(Ke).pipe((0,st.b)(cn=>{const Rn=new qn(cn.id,this.serializeUrl(cn.extractedUrl),this.serializeUrl(cn.urlAfterRedirects),cn.targetSnapshot);this.triggerEvent(Rn)}),(0,wn.w)(cn=>{let Rn=!1;return(0,un.of)(cn).pipe(function He(N,D){return(0,Ot.z)(I=>{const{targetSnapshot:W,guards:{canActivateChecks:ne}}=I;if(!ne.length)return(0,un.of)(I);let me=0;return(0,le.D)(ne).pipe((0,lr.b)(Be=>function nt(N,D,I,W){return function Ae(N,D,I,W){const ne=Le(N);if(0===ne.length)return(0,un.of)({});const me={};return(0,le.D)(ne).pipe((0,Ot.z)(Be=>function _t(N,D,I,W){const ne=Mn(N,D,W);return Pn(ne.resolve?ne.resolve(D,I):ne(D,I))}(N[Be],D,I,W).pipe((0,st.b)(Ke=>{me[Be]=Ke}))),Oe(1),(0,Ot.z)(()=>Le(me).length===ne.length?(0,un.of)(me):Ut.E))}(N._resolve,N,D,W).pipe((0,on.U)(me=>(N._resolvedData=me,N.data=Object.assign(Object.assign({},N.data),Ki(N,I).resolve),null)))}(Be.route,W,N,D)),(0,st.b)(()=>me++),Oe(1),(0,Ot.z)(Be=>me===ne.length?(0,un.of)(I):Ut.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,st.b)({next:()=>Rn=!0,complete:()=>{Rn||(this.restoreHistory(cn),this.cancelNavigationTransition(cn,"At least one route resolver didn't emit any value."))}}))}),(0,st.b)(cn=>{const Rn=new Hr(cn.id,this.serializeUrl(cn.extractedUrl),this.serializeUrl(cn.urlAfterRedirects),cn.targetSnapshot);this.triggerEvent(Rn)}))}),Je(Ke=>{const{targetSnapshot:cn,id:Rn,extractedUrl:Fr,rawUrl:_r,extras:{skipLocationChange:Mr,replaceUrl:Gn}}=Ke;return this.hooks.afterPreactivation(cn,{navigationId:Rn,appliedUrlTree:Fr,rawUrlTree:_r,skipLocationChange:!!Mr,replaceUrl:!!Gn})}),(0,on.U)(Ke=>{const cn=function ko(N,D,I){const W=to(N,D._root,I?I._root:void 0);return new Qi(W,D)}(this.routeReuseStrategy,Ke.targetSnapshot,Ke.currentRouterState);return Object.assign(Object.assign({},Ke),{targetRouterState:cn})}),(0,st.b)(Ke=>{this.currentUrlTree=Ke.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ke.urlAfterRedirects,Ke.rawUrl),this.routerState=Ke.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ke.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ke),this.browserUrlTree=Ke.urlAfterRedirects)}),((N,D,I)=>(0,on.U)(W=>(new no(D,W.targetRouterState,W.currentRouterState,I).activate(N),W)))(this.rootContexts,this.routeReuseStrategy,Ke=>this.triggerEvent(Ke)),(0,st.b)({next(){me=!0},complete(){me=!0}}),function At(N){return(0,Pt.e)((D,I)=>{try{D.subscribe(I)}finally{I.add(N)}})}(()=>{var Ke;me||Be||this.cancelNavigationTransition(ne,`Navigation ID ${ne.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ke=this.currentNavigation)||void 0===Ke?void 0:Ke.id)===ne.id&&(this.currentNavigation=null)}),(0,gr.K)(Ke=>{if(Be=!0,function Or(N){return N&&N[Bn]}(Ke)){const cn=qs(Ke.url);cn||(this.navigated=!0,this.restoreHistory(ne,!0));const Rn=new Un(ne.id,this.serializeUrl(ne.extractedUrl),Ke.message);W.next(Rn),cn?setTimeout(()=>{const Fr=this.urlHandlingStrategy.merge(Ke.url,this.rawUrlTree),_r={skipLocationChange:ne.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||k(ne.source)};this.scheduleNavigation(Fr,"imperative",null,_r,{resolve:ne.resolve,reject:ne.reject,promise:ne.promise})},0):ne.resolve(!1)}else{this.restoreHistory(ne,!0);const cn=new Yn(ne.id,this.serializeUrl(ne.extractedUrl),Ke);W.next(cn);try{ne.resolve(this.errorHandler(Ke))}catch(Rn){ne.reject(Rn)}}return Ut.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}setTransition(I){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),I))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const W="popstate"===I.type?"popstate":"hashchange";"popstate"===W&&setTimeout(()=>{var ne;const me={replaceUrl:!0},Be=(null===(ne=I.state)||void 0===ne?void 0:ne.navigationId)?I.state:null;if(Be){const cn=Object.assign({},Be);delete cn.navigationId,delete cn.\u0275routerPageId,0!==Object.keys(cn).length&&(me.state=cn)}const Ke=this.parseUrl(I.url);this.scheduleNavigation(Ke,W,Be,me)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){Ps(I),this.config=I.map(_i),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,W={}){const{relativeTo:ne,queryParams:me,fragment:Be,queryParamsHandling:Ke,preserveFragment:cn}=W,Rn=ne||this.routerState.root,Fr=cn?this.currentUrlTree.fragment:Be;let _r=null;switch(Ke){case"merge":_r=Object.assign(Object.assign({},this.currentUrlTree.queryParams),me);break;case"preserve":_r=this.currentUrlTree.queryParams;break;default:_r=me||null}return null!==_r&&(_r=this.removeEmptyProps(_r)),function Ct(N,D,I,W,ne){if(0===I.length)return gn(D.root,D.root,D.root,W,ne);const me=function Qr(N){if("string"==typeof N[0]&&1===N.length&&"/"===N[0])return new Ir(!0,0,N);let D=0,I=!1;const W=N.reduce((ne,me,Be)=>{if("object"==typeof me&&null!=me){if(me.outlets){const Ke={};return ji(me.outlets,(cn,Rn)=>{Ke[Rn]="string"==typeof cn?cn.split("/"):cn}),[...ne,{outlets:Ke}]}if(me.segmentPath)return[...ne,me.segmentPath]}return"string"!=typeof me?[...ne,me]:0===Be?(me.split("/").forEach((Ke,cn)=>{0==cn&&"."===Ke||(0==cn&&""===Ke?I=!0:".."===Ke?D++:""!=Ke&&ne.push(Ke))}),ne):[...ne,me]},[]);return new Ir(I,D,W)}(I);if(me.toRoot())return gn(D.root,D.root,new Re([],{}),W,ne);const Be=function pi(N,D,I){if(N.isAbsolute)return new Zi(D.root,!0,0);if(-1===I.snapshot._lastPathIndex){const me=I.snapshot._urlSegment;return new Zi(me,me===D.root,0)}const W=dt(N.commands[0])?0:1;return function ds(N,D,I){let W=N,ne=D,me=I;for(;me>ne;){if(me-=ne,W=W.parent,!W)throw new Error("Invalid number of '../'");ne=W.segments.length}return new Zi(W,!1,ne-me)}(I.snapshot._urlSegment,I.snapshot._lastPathIndex+W,N.numberOfDoubleDots)}(me,D,N),Ke=Be.processChildren?Es(Be.segmentGroup,Be.index,me.commands):as(Be.segmentGroup,Be.index,me.commands);return gn(D.root,Be.segmentGroup,Ke,W,ne)}(Rn,this.currentUrlTree,I,_r,null!=Fr?Fr:null)}navigateByUrl(I,W={skipLocationChange:!1}){const ne=qs(I)?I:this.parseUrl(I),me=this.urlHandlingStrategy.merge(ne,this.rawUrlTree);return this.scheduleNavigation(me,"imperative",null,W)}navigate(I,W={skipLocationChange:!1}){return function E(N){for(let D=0;D<N.length;D++){const I=N[D];if(null==I)throw new Error(`The requested path contains ${I} segment at index ${D}`)}}(I),this.navigateByUrl(this.createUrlTree(I,W),W)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let W;try{W=this.urlSerializer.parse(I)}catch(ne){W=this.malformedUriErrorHandler(ne,this.urlSerializer,I)}return W}isActive(I,W){let ne;if(ne=!0===W?Object.assign({},ln):!1===W?Object.assign({},B):W,qs(I))return Pr(this.currentUrlTree,I,ne);const me=this.parseUrl(I);return Pr(this.currentUrlTree,me,ne)}removeEmptyProps(I){return Object.keys(I).reduce((W,ne)=>{const me=I[ne];return null!=me&&(W[ne]=me),W},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new Zt(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,W,ne,me,Be){var Ke,cn;if(this.disposed)return Promise.resolve(!1);let Rn,Fr,_r;Be?(Rn=Be.resolve,Fr=Be.reject,_r=Be.promise):_r=new Promise((_o,ai)=>{Rn=_o,Fr=ai});const Mr=++this.navigationId;let Gn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ne=this.location.getState()),Gn=ne&&ne.\u0275routerPageId?ne.\u0275routerPageId:me.replaceUrl||me.skipLocationChange?null!==(Ke=this.browserPageId)&&void 0!==Ke?Ke:0:(null!==(cn=this.browserPageId)&&void 0!==cn?cn:0)+1):Gn=0,this.setTransition({id:Mr,targetPageId:Gn,source:W,restoredState:ne,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:me,resolve:Rn,reject:Fr,promise:_r,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_r.catch(_o=>Promise.reject(_o))}setBrowserUrl(I,W){const ne=this.urlSerializer.serialize(I),me=Object.assign(Object.assign({},W.extras.state),this.generateNgRouterState(W.id,W.targetPageId));this.location.isCurrentPathEqualTo(ne)||W.extras.replaceUrl?this.location.replaceState(ne,"",me):this.location.go(ne,"",me)}restoreHistory(I,W=!1){var ne,me;if("computed"===this.canceledNavigationResolution){const Be=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.finalUrl)||0===Be?this.currentUrlTree===(null===(me=this.currentNavigation)||void 0===me?void 0:me.finalUrl)&&0===Be&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Be)}else"replace"===this.canceledNavigationResolution&&(W&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,W){const ne=new Un(I.id,this.serializeUrl(I.extractedUrl),W);this.triggerEvent(ne),I.resolve(!1)}generateNgRouterState(I,W){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:W}:{navigationId:I}}}return N.\u0275fac=function(I){g.$Z()},N.\u0275prov=g.Yz7({token:N,factory:N.\u0275fac}),N})();function k(N){return"imperative"!==N}let ee=(()=>{class N{constructor(I,W,ne,me,Be){this.router=I,this.route=W,this.tabIndexAttribute=ne,this.renderer=me,this.el=Be,this.commands=null,this.onChanges=new Fe.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){if(null!=this.tabIndexAttribute)return;const W=this.renderer,ne=this.el.nativeElement;null!==I?W.setAttribute(ne,"tabindex",I):W.removeAttribute(ne,"tabindex")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const I={skipLocationChange:ke(this.skipLocationChange),replaceUrl:ke(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,I),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ke(this.preserveFragment)})}}return N.\u0275fac=function(I){return new(I||N)(g.Y36(b),g.Y36(zs),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},N.\u0275dir=g.lG2({type:N,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,W){1&I&&g.NdJ("click",function(){return W.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),N})(),Ee=(()=>{class N{constructor(I,W,ne){this.router=I,this.route=W,this.locationStrategy=ne,this.commands=null,this.href=null,this.onChanges=new Fe.x,this.subscription=I.events.subscribe(me=>{me instanceof Zt&&this.updateTargetUrlAndHref()})}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:null}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,W,ne,me,Be){if(0!==I||W||ne||me||Be||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Ke={skipLocationChange:ke(this.skipLocationChange),replaceUrl:ke(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ke),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ke(this.preserveFragment)})}}return N.\u0275fac=function(I){return new(I||N)(g.Y36(b),g.Y36(zs),g.Y36(ut.S$))},N.\u0275dir=g.lG2({type:N,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,W){1&I&&g.NdJ("click",function(me){return W.onClick(me.button,me.ctrlKey,me.shiftKey,me.altKey,me.metaKey)}),2&I&&g.uIk("target",W.target)("href",W.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),N})();function ke(N){return""===N||!!N}class sn{}class Er{preload(D,I){return(0,un.of)(null)}}let Jr=(()=>{class N{constructor(I,W,ne,me){this.router=I,this.injector=ne,this.preloadingStrategy=me,this.loader=new xn(ne,W,cn=>I.triggerEvent(new Tr(cn)),cn=>I.triggerEvent(new wr(cn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Lt.h)(I=>I instanceof Zt),(0,lr.b)(()=>this.preload())).subscribe(()=>{})}preload(){const I=this.injector.get(g.h0i);return this.processRoutes(I,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,W){const ne=[];for(const me of W)if(me.loadChildren&&!me.canLoad&&me._loadedConfig){const Be=me._loadedConfig;ne.push(this.processRoutes(Be.module,Be.routes))}else me.loadChildren&&!me.canLoad?ne.push(this.preloadConfig(I,me)):me.children&&ne.push(this.processRoutes(I,me.children));return(0,le.D)(ne).pipe((0,It.J)(),(0,on.U)(me=>{}))}preloadConfig(I,W){return this.preloadingStrategy.preload(W,()=>(W._loadedConfig?(0,un.of)(W._loadedConfig):this.loader.load(I.injector,W)).pipe((0,Ot.z)(me=>(W._loadedConfig=me,this.processRoutes(me.module,me.routes)))))}}return N.\u0275fac=function(I){return new(I||N)(g.LFG(b),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(sn))},N.\u0275prov=g.Yz7({token:N,factory:N.\u0275fac}),N})(),Pi=(()=>{class N{constructor(I,W,ne={}){this.router=I,this.viewportScroller=W,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof xt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Zt&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof ct&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,W){this.router.triggerEvent(new ct(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,W))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return N.\u0275fac=function(I){g.$Z()},N.\u0275prov=g.Yz7({token:N,factory:N.\u0275fac}),N})();const pr=new g.OlP("ROUTER_CONFIGURATION"),Fi=new g.OlP("ROUTER_FORROOT_GUARD"),xi=[ut.Ye,{provide:Hn,useClass:Kr},{provide:b,useFactory:function rr(N,D,I,W,ne,me,Be={},Ke,cn){const Rn=new b(null,N,D,I,W,ne,Fn(me));return Ke&&(Rn.urlHandlingStrategy=Ke),cn&&(Rn.routeReuseStrategy=cn),function hr(N,D){N.errorHandler&&(D.errorHandler=N.errorHandler),N.malformedUriErrorHandler&&(D.malformedUriErrorHandler=N.malformedUriErrorHandler),N.onSameUrlNavigation&&(D.onSameUrlNavigation=N.onSameUrlNavigation),N.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=N.paramsInheritanceStrategy),N.relativeLinkResolution&&(D.relativeLinkResolution=N.relativeLinkResolution),N.urlUpdateStrategy&&(D.urlUpdateStrategy=N.urlUpdateStrategy),N.canceledNavigationResolution&&(D.canceledNavigationResolution=N.canceledNavigationResolution)}(Be,Rn),Be.enableTracing&&Rn.events.subscribe(Fr=>{var _r,Mr;null===(_r=console.group)||void 0===_r||_r.call(console,`Router Event: ${Fr.constructor.name}`),console.log(Fr.toString()),console.log(Fr),null===(Mr=console.groupEnd)||void 0===Mr||Mr.call(console)}),Rn},deps:[Hn,Ai,ut.Ye,g.zs3,g.Sil,hn,pr,[class Zn{},new g.FiY],[class yt{},new g.FiY]]},Ai,{provide:zs,useFactory:function Yo(N){return N.routerState.root},deps:[b]},Jr,Er,class sr{preload(D,I){return I().pipe((0,gr.K)(()=>(0,un.of)(null)))}},{provide:pr,useValue:{enableTracing:!1}}];function us(){return new g.PXZ("Router",b)}let Hs=(()=>{class N{constructor(I,W){}static forRoot(I,W){return{ngModule:N,providers:[xi,Ts(I),{provide:Fi,useFactory:$i,deps:[[b,new g.FiY,new g.tp0]]},{provide:pr,useValue:W||{}},{provide:ut.S$,useFactory:Bi,deps:[ut.lw,[new g.tBr(ut.mr),new g.FiY],pr]},{provide:Pi,useFactory:En,deps:[b,ut.EM,pr]},{provide:sn,useExisting:W&&W.preloadingStrategy?W.preloadingStrategy:Er},{provide:g.PXZ,multi:!0,useFactory:us},[er,{provide:g.ip1,multi:!0,useFactory:qt,deps:[er]},{provide:Ys,useFactory:In,deps:[er]},{provide:g.tb,multi:!0,useExisting:Ys}]]}}static forChild(I){return{ngModule:N,providers:[Ts(I)]}}}return N.\u0275fac=function(I){return new(I||N)(g.LFG(Fi,8),g.LFG(b,8))},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({}),N})();function En(N,D,I){return I.scrollOffset&&D.setOffset(I.scrollOffset),new Pi(N,D,I)}function Bi(N,D,I={}){return I.useHash?new ut.Do(N,D):new ut.b0(N,D)}function $i(N){return"guarded"}function Ts(N){return[{provide:g.deG,multi:!0,useValue:N},{provide:hn,multi:!0,useValue:N}]}let er=(()=>{class N{constructor(I){this.injector=I,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Fe.x}appInitializer(){return this.injector.get(ut.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let W=null;const ne=new Promise(Ke=>W=Ke),me=this.injector.get(b),Be=this.injector.get(pr);return"disabled"===Be.initialNavigation?(me.setUpLocationChangeListener(),W(!0)):"enabled"===Be.initialNavigation||"enabledBlocking"===Be.initialNavigation?(me.hooks.afterPreactivation=()=>this.initNavigation?(0,un.of)(null):(this.initNavigation=!0,W(!0),this.resultOfPreactivationDone),me.initialNavigation()):W(!0),ne})}bootstrapListener(I){const W=this.injector.get(pr),ne=this.injector.get(Jr),me=this.injector.get(Pi),Be=this.injector.get(b),Ke=this.injector.get(g.z2F);I===Ke.components[0]&&(("enabledNonBlocking"===W.initialNavigation||void 0===W.initialNavigation)&&Be.initialNavigation(),ne.setUpPreloading(),me.init(),Be.resetRootComponentType(Ke.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return N.\u0275fac=function(I){return new(I||N)(g.LFG(g.zs3))},N.\u0275prov=g.Yz7({token:N,factory:N.\u0275fac}),N})();function qt(N){return N.appInitializer.bind(N)}function In(N){return N.bootstrapListener.bind(N)}const Ys=new g.OlP("Router Initializer")},3942:(jn,Dt,H)=>{H.d(Dt,{Z:()=>nn});var g=H(2090),Z=H(4859),ge=H(9681),le=H(1877);class Ye{constructor(Pt,Jt){this._delegate=Pt,this.firebase=Jt,(0,ge._addComponent)(Pt,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=Pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Pt){this._delegate.automaticDataCollectionEnabled=Pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Pt=>{this._delegate.checkDestroyed(),Pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ge.deleteApp)(this._delegate)))}_getService(Pt,Jt=ge._DEFAULT_ENTRY_NAME){var Ln;this._delegate.checkDestroyed();const un=this._delegate.container.getProvider(Pt);return!un.isInitialized()&&"EXPLICIT"===(null===(Ln=un.getComponent())||void 0===Ln?void 0:Ln.instantiationMode)&&un.initialize(),un.getImmediate({identifier:Jt})}_removeServiceInstance(Pt,Jt=ge._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Pt).clearInstance(Jt)}_addComponent(Pt){(0,ge._addComponent)(this._delegate,Pt)}_addOrOverwriteComponent(Pt){(0,ge._addOrOverwriteComponent)(this._delegate,Pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const gt=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Pe=function ft(){const bn=function Qe(bn){const Pt={},Jt={__esModule:!0,initializeApp:function xe(Ut,Fe={}){const Lt=ge.initializeApp(Ut,Fe);if((0,g.r3)(Pt,Lt.name))return Pt[Lt.name];const Oe=new bn(Lt,Jt);return Pt[Lt.name]=Oe,Oe},app:un,registerVersion:ge.registerVersion,setLogLevel:ge.setLogLevel,onLog:ge.onLog,apps:null,SDK_VERSION:ge.SDK_VERSION,INTERNAL:{registerComponent:function ot(Ut){const Fe=Ut.name,Lt=Fe.replace("-compat","");if(ge._registerComponent(Ut)&&"PUBLIC"===Ut.type){const Oe=(Tt=un())=>{if("function"!=typeof Tt[Lt])throw gt.create("invalid-app-argument",{appName:Fe});return Tt[Lt]()};void 0!==Ut.serviceProps&&(0,g.ZB)(Oe,Ut.serviceProps),Jt[Lt]=Oe,bn.prototype[Lt]=function(...Tt){return this._getService.bind(this,Fe).apply(this,Ut.multipleInstances?Tt:[])}}return"PUBLIC"===Ut.type?Jt[Lt]:null},removeApp:function Ln(Ut){delete Pt[Ut]},useAsService:function Kt(Ut,Fe){return"serverAuth"===Fe?null:Fe},modularAPIs:ge}};function un(Ut){if(!(0,g.r3)(Pt,Ut=Ut||ge._DEFAULT_ENTRY_NAME))throw gt.create("no-app",{appName:Ut});return Pt[Ut]}return Jt.default=Jt,Object.defineProperty(Jt,"apps",{get:function Ne(){return Object.keys(Pt).map(Ut=>Pt[Ut])}}),un.App=bn,Jt}(Ye);return bn.INTERNAL=Object.assign(Object.assign({},bn.INTERNAL),{createFirebaseNamespace:ft,extendNamespace:function Pt(Jt){(0,g.ZB)(bn,Jt)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),bn}(),Me=new le.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){Me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bn=self.firebase.SDK_VERSION;bn&&bn.indexOf("LITE")>=0&&Me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nn=Pe;!function vt(bn){(0,ge.registerVersion)("@firebase/app-compat","0.2.0",bn)}()},9681:(jn,Dt,H)=>{H.r(Dt),H.d(Dt,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Yn,_DEFAULT_ENTRY_NAME:()=>Jn,_addComponent:()=>Ft,_addOrOverwriteComponent:()=>Ot,_apps:()=>gr,_clearComponents:()=>Wt,_components:()=>lr,_getProvider:()=>It,_registerComponent:()=>st,_removeServiceInstance:()=>ut,deleteApp:()=>qn,getApp:()=>Zr,getApps:()=>si,initializeApp:()=>tr,onLog:()=>wr,registerVersion:()=>Tr,setLogLevel:()=>rs});var g=H(5861),Z=H(4859),ge=H(1877),le=H(2090),Ye=H(8766);class Xe{constructor(jt){this.container=jt}getPlatformInfoString(){return this.container.getProviders().map(Wn=>{if(function gt(Pn){const jt=Pn.getComponent();return"VERSION"===(null==jt?void 0:jt.type)}(Wn)){const Ar=Wn.getImmediate();return`${Ar.library}/${Ar.version}`}return null}).filter(Wn=>Wn).join(" ")}}const Qe="@firebase/app",Pe=new ge.Yd("@firebase/app"),Jn="[DEFAULT]",fn={[Qe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gr=new Map,lr=new Map;function Ft(Pn,jt){try{Pn.container.addComponent(jt)}catch(Wn){Pe.debug(`Component ${jt.name} failed to register with FirebaseApp ${Pn.name}`,Wn)}}function Ot(Pn,jt){Pn.container.addOrOverwriteComponent(jt)}function st(Pn){const jt=Pn.name;if(lr.has(jt))return Pe.debug(`There were multiple attempts to register component ${jt}.`),!1;lr.set(jt,Pn);for(const Wn of gr.values())Ft(Wn,Pn);return!0}function It(Pn,jt){const Wn=Pn.container.getProvider("heartbeat").getImmediate({optional:!0});return Wn&&Wn.triggerHeartbeat(),Pn.container.getProvider(jt)}function ut(Pn,jt,Wn=Jn){It(Pn,jt).clearInstance(Wn)}function Wt(){lr.clear()}const Zt=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Un{constructor(jt,Wn,Ar){this._isDeleted=!1,this._options=Object.assign({},jt),this._config=Object.assign({},Wn),this._name=Wn.name,this._automaticDataCollectionEnabled=Wn.automaticDataCollectionEnabled,this._container=Ar,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(jt){this.checkDestroyed(),this._automaticDataCollectionEnabled=jt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(jt){this._isDeleted=jt}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}const Yn="9.15.0";function tr(Pn,jt={}){let Wn=Pn;"object"!=typeof jt&&(jt={name:jt});const Ar=Object.assign({name:Jn,automaticDataCollectionEnabled:!1},jt),Pr=Ar.name;if("string"!=typeof Pr||!Pr)throw Zt.create("bad-app-name",{appName:String(Pr)});if(Wn||(Wn=(0,le.aH)()),!Wn)throw Zt.create("no-options");const Nr=gr.get(Pr);if(Nr){if((0,le.vZ)(Wn,Nr.options)&&(0,le.vZ)(Ar,Nr.config))return Nr;throw Zt.create("duplicate-app",{appName:Pr})}const tt=new Z.H0(Pr);for(const ht of lr.values())tt.addComponent(ht);const $e=new Un(Wn,Ar,tt);return gr.set(Pr,$e),$e}function Zr(Pn=Jn){const jt=gr.get(Pn);if(!jt&&Pn===Jn)return tr();if(!jt)throw Zt.create("no-app",{appName:Pn});return jt}function si(){return Array.from(gr.values())}function qn(Pn){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(Pn){const jt=Pn.name;gr.has(jt)&&(gr.delete(jt),yield Promise.all(Pn.container.getProviders().map(Wn=>Wn.delete())),Pn.isDeleted=!0)})).apply(this,arguments)}function Tr(Pn,jt,Wn){var Ar;let Pr=null!==(Ar=fn[Pn])&&void 0!==Ar?Ar:Pn;Wn&&(Pr+=`-${Wn}`);const Nr=Pr.match(/\s|\//),tt=jt.match(/\s|\//);if(Nr||tt){const $e=[`Unable to register library "${Pr}" with version "${jt}":`];return Nr&&$e.push(`library name "${Pr}" contains illegal characters (whitespace or "/")`),Nr&&tt&&$e.push("and"),tt&&$e.push(`version name "${jt}" contains illegal characters (whitespace or "/")`),void Pe.warn($e.join(" "))}st(new Z.wA(`${Pr}-version`,()=>({library:Pr,version:jt}),"VERSION"))}function wr(Pn,jt){if(null!==Pn&&"function"!=typeof Pn)throw Zt.create("invalid-log-argument");(0,ge.Am)(Pn,jt)}function rs(Pn){(0,ge.Ub)(Pn)}const it="firebase-heartbeat-store";let ct=null;function Bt(){return ct||(ct=(0,Ye.X3)("firebase-heartbeat-database",1,{upgrade:(Pn,jt)=>{0===jt&&Pn.createObjectStore(it)}}).catch(Pn=>{throw Zt.create("idb-open",{originalErrorMessage:Pn.message})})),ct}function yn(){return(yn=(0,g.Z)(function*(Pn){try{return(yield Bt()).transaction(it).objectStore(it).get(Or(Pn))}catch(jt){if(jt instanceof le.ZR)Pe.warn(jt.message);else{const Wn=Zt.create("idb-get",{originalErrorMessage:null==jt?void 0:jt.message});Pe.warn(Wn.message)}}})).apply(this,arguments)}function Bn(Pn,jt){return qr.apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(Pn,jt){try{const Ar=(yield Bt()).transaction(it,"readwrite");return yield Ar.objectStore(it).put(jt,Or(Pn)),Ar.done}catch(Wn){if(Wn instanceof le.ZR)Pe.warn(Wn.message);else{const Ar=Zt.create("idb-set",{originalErrorMessage:null==Wn?void 0:Wn.message});Pe.warn(Ar.message)}}})).apply(this,arguments)}function Or(Pn){return`${Pn.name}!${Pn.options.appId}`}class Ii{constructor(jt){this.container=jt,this._heartbeatsCache=null;const Wn=this.container.getProvider("app").getImmediate();this._storage=new Ei(Wn),this._heartbeatsCachePromise=this._storage.read().then(Ar=>(this._heartbeatsCache=Ar,Ar))}triggerHeartbeat(){var jt=this;return(0,g.Z)(function*(){const Ar=jt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pr=ui();if(null===jt._heartbeatsCache&&(jt._heartbeatsCache=yield jt._heartbeatsCachePromise),jt._heartbeatsCache.lastSentHeartbeatDate!==Pr&&!jt._heartbeatsCache.heartbeats.some(Nr=>Nr.date===Pr))return jt._heartbeatsCache.heartbeats.push({date:Pr,agent:Ar}),jt._heartbeatsCache.heartbeats=jt._heartbeatsCache.heartbeats.filter(Nr=>{const tt=new Date(Nr.date).valueOf();return Date.now()-tt<=2592e6}),jt._storage.overwrite(jt._heartbeatsCache)})()}getHeartbeatsHeader(){var jt=this;return(0,g.Z)(function*(){if(null===jt._heartbeatsCache&&(yield jt._heartbeatsCachePromise),null===jt._heartbeatsCache||0===jt._heartbeatsCache.heartbeats.length)return"";const Wn=ui(),{heartbeatsToSend:Ar,unsentEntries:Pr}=function Fn(Pn,jt=1024){const Wn=[];let Ar=Pn.slice();for(const Pr of Pn){const Nr=Wn.find(tt=>tt.agent===Pr.agent);if(Nr){if(Nr.dates.push(Pr.date),Vr(Wn)>jt){Nr.dates.pop();break}}else if(Wn.push({agent:Pr.agent,dates:[Pr.date]}),Vr(Wn)>jt){Wn.pop();break}Ar=Ar.slice(1)}return{heartbeatsToSend:Wn,unsentEntries:Ar}}(jt._heartbeatsCache.heartbeats),Nr=(0,le.L)(JSON.stringify({version:2,heartbeats:Ar}));return jt._heartbeatsCache.lastSentHeartbeatDate=Wn,Pr.length>0?(jt._heartbeatsCache.heartbeats=Pr,yield jt._storage.overwrite(jt._heartbeatsCache)):(jt._heartbeatsCache.heartbeats=[],jt._storage.overwrite(jt._heartbeatsCache)),Nr})()}}function ui(){return(new Date).toISOString().substring(0,10)}class Ei{constructor(jt){this.app=jt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var jt=this;return(0,g.Z)(function*(){return(yield jt._canUseIndexedDBPromise)&&(yield function Gt(Pn){return yn.apply(this,arguments)}(jt.app))||{heartbeats:[]}})()}overwrite(jt){var Wn=this;return(0,g.Z)(function*(){var Ar;if(yield Wn._canUseIndexedDBPromise){const Nr=yield Wn.read();return Bn(Wn.app,{lastSentHeartbeatDate:null!==(Ar=jt.lastSentHeartbeatDate)&&void 0!==Ar?Ar:Nr.lastSentHeartbeatDate,heartbeats:jt.heartbeats})}})()}add(jt){var Wn=this;return(0,g.Z)(function*(){var Ar;if(yield Wn._canUseIndexedDBPromise){const Nr=yield Wn.read();return Bn(Wn.app,{lastSentHeartbeatDate:null!==(Ar=jt.lastSentHeartbeatDate)&&void 0!==Ar?Ar:Nr.lastSentHeartbeatDate,heartbeats:[...Nr.heartbeats,...jt.heartbeats]})}})()}}function Vr(Pn){return(0,le.L)(JSON.stringify({version:2,heartbeats:Pn})).length}!function ji(Pn){st(new Z.wA("platform-logger",jt=>new Xe(jt),"PRIVATE")),st(new Z.wA("heartbeat",jt=>new Ii(jt),"PRIVATE")),Tr(Qe,"0.9.0",Pn),Tr(Qe,"0.9.0","esm2017"),Tr("fire-js","")}("")},4859:(jn,Dt,H)=>{H.d(Dt,{H0:()=>Qe,wA:()=>ge});var g=H(5861),Z=H(2090);class ge{constructor(Pe,Me,Et){this.name=Pe,this.instanceFactory=Me,this.type=Et,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Pe){return this.instantiationMode=Pe,this}setMultipleInstances(Pe){return this.multipleInstances=Pe,this}setServiceProps(Pe){return this.serviceProps=Pe,this}setInstanceCreatedCallback(Pe){return this.onInstanceCreated=Pe,this}}const le="[DEFAULT]";class Ye{constructor(Pe,Me){this.name=Pe,this.container=Me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Pe){const Me=this.normalizeInstanceIdentifier(Pe);if(!this.instancesDeferred.has(Me)){const Et=new Z.BH;if(this.instancesDeferred.set(Me,Et),this.isInitialized(Me)||this.shouldAutoInitialize())try{const pn=this.getOrInitializeService({instanceIdentifier:Me});pn&&Et.resolve(pn)}catch(pn){}}return this.instancesDeferred.get(Me).promise}getImmediate(Pe){var Me;const Et=this.normalizeInstanceIdentifier(null==Pe?void 0:Pe.identifier),pn=null!==(Me=null==Pe?void 0:Pe.optional)&&void 0!==Me&&Me;if(!this.isInitialized(Et)&&!this.shouldAutoInitialize()){if(pn)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Et})}catch(vt){if(pn)return null;throw vt}}getComponent(){return this.component}setComponent(Pe){if(Pe.name!==this.name)throw Error(`Mismatching Component ${Pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Pe,this.shouldAutoInitialize()){if(function gt(ft){return"EAGER"===ft.instantiationMode}(Pe))try{this.getOrInitializeService({instanceIdentifier:le})}catch(Me){}for(const[Me,Et]of this.instancesDeferred.entries()){const pn=this.normalizeInstanceIdentifier(Me);try{const vt=this.getOrInitializeService({instanceIdentifier:pn});Et.resolve(vt)}catch(vt){}}}}clearInstance(Pe=le){this.instancesDeferred.delete(Pe),this.instancesOptions.delete(Pe),this.instances.delete(Pe)}delete(){var Pe=this;return(0,g.Z)(function*(){const Me=Array.from(Pe.instances.values());yield Promise.all([...Me.filter(Et=>"INTERNAL"in Et).map(Et=>Et.INTERNAL.delete()),...Me.filter(Et=>"_delete"in Et).map(Et=>Et._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Pe=le){return this.instances.has(Pe)}getOptions(Pe=le){return this.instancesOptions.get(Pe)||{}}initialize(Pe={}){const{options:Me={}}=Pe,Et=this.normalizeInstanceIdentifier(Pe.instanceIdentifier);if(this.isInitialized(Et))throw Error(`${this.name}(${Et}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const pn=this.getOrInitializeService({instanceIdentifier:Et,options:Me});for(const[vt,nn]of this.instancesDeferred.entries())Et===this.normalizeInstanceIdentifier(vt)&&nn.resolve(pn);return pn}onInit(Pe,Me){var Et;const pn=this.normalizeInstanceIdentifier(Me),vt=null!==(Et=this.onInitCallbacks.get(pn))&&void 0!==Et?Et:new Set;vt.add(Pe),this.onInitCallbacks.set(pn,vt);const nn=this.instances.get(pn);return nn&&Pe(nn,pn),()=>{vt.delete(Pe)}}invokeOnInitCallbacks(Pe,Me){const Et=this.onInitCallbacks.get(Me);if(Et)for(const pn of Et)try{pn(Pe,Me)}catch(vt){}}getOrInitializeService({instanceIdentifier:Pe,options:Me={}}){let Et=this.instances.get(Pe);if(!Et&&this.component&&(Et=this.component.instanceFactory(this.container,{instanceIdentifier:(ft=Pe,ft===le?void 0:ft),options:Me}),this.instances.set(Pe,Et),this.instancesOptions.set(Pe,Me),this.invokeOnInitCallbacks(Et,Pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Pe,Et)}catch(pn){}var ft;return Et||null}normalizeInstanceIdentifier(Pe=le){return this.component?this.component.multipleInstances?Pe:le:Pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qe{constructor(Pe){this.name=Pe,this.providers=new Map}addComponent(Pe){const Me=this.getProvider(Pe.name);if(Me.isComponentSet())throw new Error(`Component ${Pe.name} has already been registered with ${this.name}`);Me.setComponent(Pe)}addOrOverwriteComponent(Pe){this.getProvider(Pe.name).isComponentSet()&&this.providers.delete(Pe.name),this.addComponent(Pe)}getProvider(Pe){if(this.providers.has(Pe))return this.providers.get(Pe);const Me=new Ye(Pe,this);return this.providers.set(Pe,Me),Me}getProviders(){return Array.from(this.providers.values())}}},1877:(jn,Dt,H)=>{H.d(Dt,{Am:()=>ft,Ub:()=>Qe,Yd:()=>gt,in:()=>Z});const g=[];var Z=(()=>{return(Pe=Z||(Z={}))[Pe.DEBUG=0]="DEBUG",Pe[Pe.VERBOSE=1]="VERBOSE",Pe[Pe.INFO=2]="INFO",Pe[Pe.WARN=3]="WARN",Pe[Pe.ERROR=4]="ERROR",Pe[Pe.SILENT=5]="SILENT",Z;var Pe})();const ge={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},le=Z.INFO,Ye={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Xe=(Pe,Me,...Et)=>{if(Me<Pe.logLevel)return;const pn=(new Date).toISOString(),vt=Ye[Me];if(!vt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Me})`);console[vt](`[${pn}]  ${Pe.name}:`,...Et)};class gt{constructor(Me){this.name=Me,this._logLevel=le,this._logHandler=Xe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(Me){if(!(Me in Z))throw new TypeError(`Invalid value "${Me}" assigned to \`logLevel\``);this._logLevel=Me}setLogLevel(Me){this._logLevel="string"==typeof Me?ge[Me]:Me}get logHandler(){return this._logHandler}set logHandler(Me){if("function"!=typeof Me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Me}get userLogHandler(){return this._userLogHandler}set userLogHandler(Me){this._userLogHandler=Me}debug(...Me){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...Me),this._logHandler(this,Z.DEBUG,...Me)}log(...Me){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...Me),this._logHandler(this,Z.VERBOSE,...Me)}info(...Me){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...Me),this._logHandler(this,Z.INFO,...Me)}warn(...Me){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...Me),this._logHandler(this,Z.WARN,...Me)}error(...Me){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...Me),this._logHandler(this,Z.ERROR,...Me)}}function Qe(Pe){g.forEach(Me=>{Me.setLogLevel(Pe)})}function ft(Pe,Me){for(const Et of g){let pn=null;Me&&Me.level&&(pn=ge[Me.level]),Et.userLogHandler=null===Pe?null:(vt,nn,...bn)=>{const Pt=bn.map(Jt=>{if(null==Jt)return null;if("string"==typeof Jt)return Jt;if("number"==typeof Jt||"boolean"==typeof Jt)return Jt.toString();if(Jt instanceof Error)return Jt.message;try{return JSON.stringify(Jt)}catch(Ln){return null}}).filter(Jt=>Jt).join(" ");nn>=(null!=pn?pn:vt.logLevel)&&Pe({level:Z[nn].toLowerCase(),message:Pt,args:bn,type:vt.name})}}}},259:(jn,Dt,H)=>{H.d(Dt,{C6:()=>g.getApps,Mq:()=>g.getApp,ZF:()=>g.initializeApp});var g=H(9681);(0,g.registerVersion)("firebase","9.15.0","app")},9260:(jn,Dt,H)=>{H.d(Dt,{Z:()=>g.Z});var g=H(3942);g.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(jn,Dt,H)=>{H.r(Dt);var g=H(5861),Z=H(3942),ge=H(2090),le=H(9681),Ye=H(1877),Xe=H(655),gt=H(4859);const nn=function pn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},bn=function vt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Pt=new ge.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ln=new Ye.Yd("@firebase/auth");function un(T,...p){Ln.logLevel<=Ye.in.ERROR&&Ln.error(`Auth (${le.SDK_VERSION}): ${T}`,...p)}function xe(T,...p){throw Ut(T,...p)}function Ne(T,...p){return Ut(T,...p)}function ot(T,p,y){const A=Object.assign(Object.assign({},bn()),{[p]:y});return new ge.LL("auth","Firebase",A).create(p,{appName:T.name})}function Kt(T,p,y){if(!(p instanceof y))throw y.name!==p.constructor.name&&xe(T,"argument-error"),ot(T,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ut(T,...p){if("string"!=typeof T){const y=p[0],A=[...p.slice(1)];return A[0]&&(A[0].appName=T.name),T._errorFactory.create(y,...A)}return Pt.create(T,...p)}function Fe(T,p,...y){if(!T)throw Ut(p,...y)}function Lt(T){const p="INTERNAL ASSERTION FAILED: "+T;throw un(p),new Error(p)}function Oe(T,p){T||Lt(p)}const Tt=new Map;function et(T){Oe(T instanceof Function,"Expected a class definition");let p=Tt.get(T);return p?(Oe(p instanceof T,"Instance stored in cache mismatched with class"),p):(p=new T,Tt.set(T,p),p)}function on(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function wn(){return"http:"===Xn()||"https:"===Xn()}function Xn(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class gr{constructor(p,y){this.shortDelay=p,this.longDelay=y,Oe(y>p,"Short delay should be less than long delay!"),this.isMobile=(0,ge.uI)()||(0,ge.b$)()}get(){return function Jn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wn()||(0,ge.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lr(T,p){Oe(T.emulator,"Emulator should always be set here");const{url:y}=T.emulator;return p?`${y}${p.startsWith("/")?p.slice(1):p}`:y}class Ft{static initialize(p,y,A){this.fetchImpl=p,y&&(this.headersImpl=y),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},st=new gr(3e4,6e4);function It(T,p){return T.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:T.tenantId}):p}function ut(T,p,y,A){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,g.Z)(function*(T,p,y,A,ie={}){return xt(T,ie,(0,g.Z)(function*(){let Ce={},bt={};A&&("GET"===p?bt=A:Ce={body:JSON.stringify(A)});const dn=(0,ge.xO)(Object.assign({key:T.config.apiKey},bt)).slice(1),nr=yield T._getAdditionalHeaders();return nr["Content-Type"]="application/json",T.languageCode&&(nr["X-Firebase-Locale"]=T.languageCode),Ft.fetch()(tr(T,T.config.apiHost,y,dn),Object.assign({method:p,headers:nr,referrerPolicy:"no-referrer"},Ce))}))})).apply(this,arguments)}function xt(T,p,y){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,g.Z)(function*(T,p,y){T._canInitEmulator=!1;const A=Object.assign(Object.assign({},Ot),p);try{const ie=new Zr(T),Ce=yield Promise.race([y(),ie.promise]);ie.clearNetworkTimeout();const bt=yield Ce.json();if("needConfirmation"in bt)throw si(T,"account-exists-with-different-credential",bt);if(Ce.ok&&!("errorMessage"in bt))return bt;{const dn=Ce.ok?bt.errorMessage:bt.error.message,[nr,Rr]=dn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nr)throw si(T,"credential-already-in-use",bt);if("EMAIL_EXISTS"===nr)throw si(T,"email-already-in-use",bt);if("USER_DISABLED"===nr)throw si(T,"user-disabled",bt);const yi=A[nr]||nr.toLowerCase().replace(/[_\s]+/g,"-");if(Rr)throw ot(T,yi,Rr);xe(T,yi)}}catch(ie){if(ie instanceof ge.ZR)throw ie;xe(T,"network-request-failed")}})).apply(this,arguments)}function Un(T,p,y,A){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,g.Z)(function*(T,p,y,A,ie={}){const Ce=yield ut(T,p,y,A,ie);return"mfaPendingCredential"in Ce&&xe(T,"multi-factor-auth-required",{_serverResponse:Ce}),Ce})).apply(this,arguments)}function tr(T,p,y,A){const ie=`${p}${y}?${A}`;return T.config.emulator?lr(T.config,ie):`${T.config.apiScheme}://${ie}`}class Zr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((y,A)=>{this.timer=setTimeout(()=>A(Ne(this.auth,"network-request-failed")),st.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function si(T,p,y){const A={appName:T.name};y.email&&(A.email=y.email),y.phoneNumber&&(A.phoneNumber=y.phoneNumber);const ie=Ne(T,p,A);return ie.customData._tokenResponse=y,ie}function Hr(){return(Hr=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Tr(T,p){return wr.apply(this,arguments)}function wr(){return(wr=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function rs(T,p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function an(T){if(T)try{const p=new Date(Number(T));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Bt(){return(Bt=(0,g.Z)(function*(T,p=!1){const y=(0,ge.m9)(T),A=yield y.getIdToken(p),ie=yn(A);Fe(ie&&ie.exp&&ie.auth_time&&ie.iat,y.auth,"internal-error");const Ce="object"==typeof ie.firebase?ie.firebase:void 0,bt=null==Ce?void 0:Ce.sign_in_provider;return{claims:ie,token:A,authTime:an(Gt(ie.auth_time)),issuedAtTime:an(Gt(ie.iat)),expirationTime:an(Gt(ie.exp)),signInProvider:bt||null,signInSecondFactor:(null==Ce?void 0:Ce.sign_in_second_factor)||null}})).apply(this,arguments)}function Gt(T){return 1e3*Number(T)}function yn(T){const[p,y,A]=T.split(".");if(void 0===p||void 0===y||void 0===A)return un("JWT malformed, contained fewer than 3 sections"),null;try{const ie=(0,ge.tV)(y);return ie?JSON.parse(ie):(un("Failed to decode base64 JWT payload"),null)}catch(ie){return un("Caught error parsing JWT payload as JSON",null==ie?void 0:ie.toString()),null}}function qr(T,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,g.Z)(function*(T,p,y=!1){if(y)return p;try{return yield p}catch(A){throw A instanceof ge.ZR&&dr(A)&&T.auth.currentUser===T&&(yield T.auth.signOut()),A}})).apply(this,arguments)}function dr({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class os{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var y;if(p){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const ie=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,ie)}}schedule(p=!1){var y=this;if(!this.isRunning)return;const A=this.getInterval(p);this.timerId=setTimeout((0,g.Z)(function*(){yield y.iteration()}),A)}iteration(){var p=this;return(0,g.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===(null==y?void 0:y.code)&&p.schedule(!0))}p.schedule()})()}}class Ii{constructor(p,y){this.createdAt=p,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=an(this.lastLoginAt),this.creationTime=an(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ui(T){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,g.Z)(function*(T){var p;const y=T.auth,A=yield T.getIdToken(),ie=yield qr(T,rs(y,{idToken:A}));Fe(null==ie?void 0:ie.users.length,y,"internal-error");const Ce=ie.users[0];T._notifyReloadListener(Ce);const bt=(null===(p=Ce.providerUserInfo)||void 0===p?void 0:p.length)?Pn(Ce.providerUserInfo):[],dn=ji(T.providerData,bt),yi=!!T.isAnonymous&&!(T.email&&Ce.passwordHash||(null==dn?void 0:dn.length)),li={uid:Ce.localId,displayName:Ce.displayName||null,photoURL:Ce.photoUrl||null,email:Ce.email||null,emailVerified:Ce.emailVerified||!1,phoneNumber:Ce.phoneNumber||null,tenantId:Ce.tenantId||null,providerData:dn,metadata:new Ii(Ce.createdAt,Ce.lastLoginAt),isAnonymous:yi};Object.assign(T,li)})).apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(T){const p=(0,ge.m9)(T);yield ui(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function ji(T,p){return[...T.filter(A=>!p.some(ie=>ie.providerId===A.providerId)),...p]}function Pn(T){return T.map(p=>{var{providerId:y}=p,A=(0,Xe._T)(p,["providerId"]);return{providerId:y,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function Wn(){return(Wn=(0,g.Z)(function*(T,p){const y=yield xt(T,{},(0,g.Z)(function*(){const A=(0,ge.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:ie,apiKey:Ce}=T.config,bt=tr(T,ie,"/v1/token",`key=${Ce}`),dn=yield T._getAdditionalHeaders();return dn["Content-Type"]="application/x-www-form-urlencoded",Ft.fetch()(bt,{method:"POST",headers:dn,body:A})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Fe(p.idToken,"internal-error"),Fe(void 0!==p.idToken,"internal-error"),Fe(void 0!==p.refreshToken,"internal-error");const y="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Bn(T){const p=yn(T);return Fe(p,"internal-error"),Fe(void 0!==p.exp,"internal-error"),Fe(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,y)}getToken(p,y=!1){var A=this;return(0,g.Z)(function*(){return Fe(!A.accessToken||A.refreshToken,p,"user-token-expired"),y||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(p,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,y){var A=this;return(0,g.Z)(function*(){const{accessToken:ie,refreshToken:Ce,expiresIn:bt}=yield function jt(T,p){return Wn.apply(this,arguments)}(p,y);A.updateTokensAndExpiration(ie,Ce,Number(bt))})()}updateTokensAndExpiration(p,y,A){this.refreshToken=y||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(p,y){const{refreshToken:A,accessToken:ie,expirationTime:Ce}=y,bt=new Ar;return A&&(Fe("string"==typeof A,"internal-error",{appName:p}),bt.refreshToken=A),ie&&(Fe("string"==typeof ie,"internal-error",{appName:p}),bt.accessToken=ie),Ce&&(Fe("number"==typeof Ce,"internal-error",{appName:p}),bt.expirationTime=Ce),bt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ar,this.toJSON())}_performRefresh(){return Lt("not implemented")}}function Pr(T,p){Fe("string"==typeof T||void 0===T,"internal-error",{appName:p})}class Nr{constructor(p){var{uid:y,auth:A,stsTokenManager:ie}=p,Ce=(0,Xe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new os(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=A,this.stsTokenManager=ie,this.accessToken=ie.accessToken,this.displayName=Ce.displayName||null,this.email=Ce.email||null,this.emailVerified=Ce.emailVerified||!1,this.phoneNumber=Ce.phoneNumber||null,this.photoURL=Ce.photoURL||null,this.isAnonymous=Ce.isAnonymous||!1,this.tenantId=Ce.tenantId||null,this.providerData=Ce.providerData?[...Ce.providerData]:[],this.metadata=new Ii(Ce.createdAt||void 0,Ce.lastLoginAt||void 0)}getIdToken(p){var y=this;return(0,g.Z)(function*(){const A=yield qr(y,y.stsTokenManager.getToken(y.auth,p));return Fe(A,y.auth,"internal-error"),y.accessToken!==A&&(y.accessToken=A,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),A})()}getIdTokenResult(p){return function ct(T){return Bt.apply(this,arguments)}(this,p)}reload(){return function Ei(T){return Vr.apply(this,arguments)}(this)}_assign(p){this!==p&&(Fe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(y=>Object.assign({},y)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Nr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,y=!1){var A=this;return(0,g.Z)(function*(){let ie=!1;p.idToken&&p.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(p),ie=!0),y&&(yield ui(A)),yield A.auth._persistUserIfCurrent(A),ie&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var p=this;return(0,g.Z)(function*(){const y=yield p.getIdToken();return yield qr(p,function qn(T,p){return Hr.apply(this,arguments)}(p.auth,{idToken:y})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,y){var A,ie,Ce,bt,dn,nr,Rr,yi;const li=null!==(A=y.displayName)&&void 0!==A?A:void 0,zo=null!==(ie=y.email)&&void 0!==ie?ie:void 0,f=null!==(Ce=y.phoneNumber)&&void 0!==Ce?Ce:void 0,c=null!==(bt=y.photoURL)&&void 0!==bt?bt:void 0,d=null!==(dn=y.tenantId)&&void 0!==dn?dn:void 0,v=null!==(nr=y._redirectEventId)&&void 0!==nr?nr:void 0,M=null!==(Rr=y.createdAt)&&void 0!==Rr?Rr:void 0,j=null!==(yi=y.lastLoginAt)&&void 0!==yi?yi:void 0,{uid:re,emailVerified:Ie,isAnonymous:Ze,providerData:lt,stsTokenManager:tn}=y;Fe(re&&tn,p,"internal-error");const vn=Ar.fromJSON(this.name,tn);Fe("string"==typeof re,p,"internal-error"),Pr(li,p.name),Pr(zo,p.name),Fe("boolean"==typeof Ie,p,"internal-error"),Fe("boolean"==typeof Ze,p,"internal-error"),Pr(f,p.name),Pr(c,p.name),Pr(d,p.name),Pr(v,p.name),Pr(M,p.name),Pr(j,p.name);const Dn=new Nr({uid:re,auth:p,email:zo,emailVerified:Ie,displayName:li,isAnonymous:Ze,photoURL:c,phoneNumber:f,tenantId:d,stsTokenManager:vn,createdAt:M,lastLoginAt:j});return lt&&Array.isArray(lt)&&(Dn.providerData=lt.map(fr=>Object.assign({},fr))),v&&(Dn._redirectEventId=v),Dn}static _fromIdTokenResponse(p,y,A=!1){return(0,g.Z)(function*(){const ie=new Ar;ie.updateFromServerResponse(y);const Ce=new Nr({uid:y.localId,auth:p,stsTokenManager:ie,isAnonymous:A});return yield ui(Ce),Ce})()}}const $e=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(y,A){var ie=this;return(0,g.Z)(function*(){ie.storage[y]=A})()}_get(y){var A=this;return(0,g.Z)(function*(){const ie=A.storage[y];return void 0===ie?null:ie})()}_remove(y){var A=this;return(0,g.Z)(function*(){delete A.storage[y]})()}_addListener(y,A){}_removeListener(y,A){}}return T.type="NONE",T})();function ht(T,p,y){return`firebase:${T}:${p}:${y}`}class rn{constructor(p,y,A){this.persistence=p,this.auth=y,this.userKey=A;const{config:ie,name:Ce}=this.auth;this.fullUserKey=ht(this.userKey,ie.apiKey,Ce),this.fullPersistenceKey=ht("persistence",ie.apiKey,Ce),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,g.Z)(function*(){const y=yield p.persistence._get(p.fullUserKey);return y?Nr._fromJSON(p.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var y=this;return(0,g.Z)(function*(){if(y.persistence===p)return;const A=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=p,A?y.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,y,A="authUser"){return(0,g.Z)(function*(){if(!y.length)return new rn(et($e),p,A);const ie=(yield Promise.all(y.map(function(){var Rr=(0,g.Z)(function*(yi){if(yield yi._isAvailable())return yi});return function(yi){return Rr.apply(this,arguments)}}()))).filter(Rr=>Rr);let Ce=ie[0]||et($e);const bt=ht(A,p.config.apiKey,p.name);let dn=null;for(const Rr of y)try{const yi=yield Rr._get(bt);if(yi){const li=Nr._fromJSON(p,yi);Rr!==Ce&&(dn=li),Ce=Rr;break}}catch(yi){}const nr=ie.filter(Rr=>Rr._shouldAllowMigration);return Ce._shouldAllowMigration&&nr.length?(Ce=nr[0],dn&&(yield Ce._set(bt,dn.toJSON())),yield Promise.all(y.map(function(){var Rr=(0,g.Z)(function*(yi){if(yi!==Ce)try{yield yi._remove(bt)}catch(li){}});return function(yi){return Rr.apply(this,arguments)}}())),new rn(Ce,p,A)):new rn(Ce,p,A)})()}}function kt(T){const p=T.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(pt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ge(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(ur(p))return"Blackberry";if(Hn(p))return"Webos";if(Re(p))return"Safari";if((p.includes("chrome/")||De(p))&&!p.includes("edge/"))return"Chrome";if(Yt(p))return"Android";{const A=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function Ge(T=(0,ge.z$)()){return/firefox\//i.test(T)}function Re(T=(0,ge.z$)()){const p=T.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function De(T=(0,ge.z$)()){return/crios\//i.test(T)}function pt(T=(0,ge.z$)()){return/iemobile/i.test(T)}function Yt(T=(0,ge.z$)()){return/android/i.test(T)}function ur(T=(0,ge.z$)()){return/blackberry/i.test(T)}function Hn(T=(0,ge.z$)()){return/webos/i.test(T)}function Kr(T=(0,ge.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function Ci(T=(0,ge.z$)()){return Kr(T)||Yt(T)||Hn(T)||ur(T)||/windows phone/i.test(T)||pt(T)}function es(T,p=[]){let y;switch(T){case"Browser":y=kt((0,ge.z$)());break;case"Worker":y=`${kt((0,ge.z$)())}-${T}`;break;default:y=T}const A=p.length?p.join(","):"FirebaseCore-web";return`${y}/JsCore/${le.SDK_VERSION}/${A}`}class Ri{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,y){const A=Ce=>new Promise((bt,dn)=>{try{bt(p(Ce))}catch(nr){dn(nr)}});A.onAbort=y,this.queue.push(A);const ie=this.queue.length-1;return()=>{this.queue[ie]=()=>Promise.resolve()}}runMiddleware(p){var y=this;return(0,g.Z)(function*(){if(y.auth.currentUser===p)return;const A=[];try{for(const ie of y.queue)yield ie(p),ie.onAbort&&A.push(ie.onAbort)}catch(ie){A.reverse();for(const Ce of A)try{Ce()}catch(bt){}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null==ie?void 0:ie.message})}})()}}class _n{constructor(p,y,A){this.app=p,this.heartbeatServiceProvider=y,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oi(this),this.idTokenSubscription=new oi(this),this.beforeStateQueue=new Ri(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,y){var A=this;return y&&(this._popupRedirectResolver=et(y)),this._initializationPromise=this.queue((0,g.Z)(function*(){var ie,Ce;if(!A._deleted&&(A.persistenceManager=yield rn.create(A,p),!A._deleted)){if(null===(ie=A._popupRedirectResolver)||void 0===ie?void 0:ie._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(bt){}yield A.initializeCurrentUser(y),A.lastNotifiedUid=(null===(Ce=A.currentUser)||void 0===Ce?void 0:Ce.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,g.Z)(function*(){if(p._deleted)return;const y=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||y){if(p.currentUser&&y&&p.currentUser.uid===y.uid)return p._currentUser._assign(y),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(y,!0)}})()}initializeCurrentUser(p){var y=this;return(0,g.Z)(function*(){var A;const ie=yield y.assertedPersistence.getCurrentUser();let Ce=ie,bt=!1;if(p&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const dn=null===(A=y.redirectUser)||void 0===A?void 0:A._redirectEventId,nr=null==Ce?void 0:Ce._redirectEventId,Rr=yield y.tryRedirectSignIn(p);(!dn||dn===nr)&&(null==Rr?void 0:Rr.user)&&(Ce=Rr.user,bt=!0)}if(!Ce)return y.directlySetCurrentUser(null);if(!Ce._redirectEventId){if(bt)try{yield y.beforeStateQueue.runMiddleware(Ce)}catch(dn){Ce=ie,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(dn))}return Ce?y.reloadAndSetCurrentUserOrClear(Ce):y.directlySetCurrentUser(null)}return Fe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===Ce._redirectEventId?y.directlySetCurrentUser(Ce):y.reloadAndSetCurrentUserOrClear(Ce)})()}tryRedirectSignIn(p){var y=this;return(0,g.Z)(function*(){let A=null;try{A=yield y._popupRedirectResolver._completeRedirectFn(y,p,!0)}catch(ie){yield y._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(p){var y=this;return(0,g.Z)(function*(){try{yield ui(p)}catch(A){if("auth/network-request-failed"!==(null==A?void 0:A.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function fn(){if("undefined"==typeof navigator)return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var p=this;return(0,g.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var y=this;return(0,g.Z)(function*(){const A=p?(0,ge.m9)(p):null;return A&&Fe(A.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(A&&A._clone(y))})()}_updateCurrentUser(p,y=!1){var A=this;return(0,g.Z)(function*(){if(!A._deleted)return p&&Fe(A.tenantId===p.tenantId,A,"tenant-id-mismatch"),y||(yield A.beforeStateQueue.runMiddleware(p)),A.queue((0,g.Z)(function*(){yield A.directlySetCurrentUser(p),A.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,g.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var y=this;return this.queue((0,g.Z)(function*(){yield y.assertedPersistence.setPersistence(et(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new ge.LL("auth","Firebase",p())}onAuthStateChanged(p,y,A){return this.registerStateListener(this.authStateSubscription,p,y,A)}beforeAuthStateChanged(p,y){return this.beforeStateQueue.pushCallback(p,y)}onIdTokenChanged(p,y,A){return this.registerStateListener(this.idTokenSubscription,p,y,A)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,y){var A=this;return(0,g.Z)(function*(){const ie=yield A.getOrInitRedirectPersistenceManager(y);return null===p?ie.removeCurrentUser():ie.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var y=this;return(0,g.Z)(function*(){if(!y.redirectPersistenceManager){const A=p&&et(p)||y._popupRedirectResolver;Fe(A,y,"argument-error"),y.redirectPersistenceManager=yield rn.create(y,[et(A._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(p){var y=this;return(0,g.Z)(function*(){var A,ie;return y._isInitialized&&(yield y.queue((0,g.Z)(function*(){}))),(null===(A=y._currentUser)||void 0===A?void 0:A._redirectEventId)===p?y._currentUser:(null===(ie=y.redirectUser)||void 0===ie?void 0:ie._redirectEventId)===p?y.redirectUser:null})()}_persistUserIfCurrent(p){var y=this;return(0,g.Z)(function*(){if(p===y.currentUser)return y.queue((0,g.Z)(function*(){return y.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(y=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,y,A,ie){if(this._deleted)return()=>{};const Ce="function"==typeof y?y:y.next.bind(y),bt=this._isInitialized?Promise.resolve():this._initializationPromise;return Fe(bt,this,"internal-error"),bt.then(()=>Ce(this.currentUser)),"function"==typeof y?p.addObserver(y,A,ie):p.addObserver(y)}directlySetCurrentUser(p){var y=this;return(0,g.Z)(function*(){y.currentUser&&y.currentUser!==p&&y._currentUser._stopProactiveRefresh(),p&&y.isProactiveRefreshEnabled&&p._startProactiveRefresh(),y.currentUser=p,p?yield y.assertedPersistence.setCurrentUser(p):yield y.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=es(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,g.Z)(function*(){var y;const A={"X-Client-Version":p.clientVersion};p.app.options.appId&&(A["X-Firebase-gmpid"]=p.app.options.appId);const ie=yield null===(y=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return ie&&(A["X-Firebase-Client"]=ie),A})()}}function ir(T){return(0,ge.m9)(T)}class oi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,ge.ne)(y=>this.observer=y)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _s(T){const p=T.indexOf(":");return p<0?"":T.substr(0,p+1)}function ls(T){if(!T)return null;const p=Number(T);return isNaN(p)?null:p}class Vi{constructor(p,y){this.providerId=p,this.signInMethod=y}toJSON(){return Lt("not implemented")}_getIdTokenResponse(p){return Lt("not implemented")}_linkToIdToken(p,y){return Lt("not implemented")}_getReauthenticationResolver(p){return Lt("not implemented")}}function qi(T,p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:resetPassword",It(T,p))})).apply(this,arguments)}function Is(T,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Vs(T,p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:update",It(T,p))})).apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(T,p){return Un(T,"POST","/v1/accounts:signInWithPassword",It(T,p))})).apply(this,arguments)}function Qi(T,p){return zr.apply(this,arguments)}function zr(){return(zr=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:sendOobCode",It(T,p))})).apply(this,arguments)}function Si(T,p){return zs.apply(this,arguments)}function zs(){return(zs=(0,g.Z)(function*(T,p){return Qi(T,p)})).apply(this,arguments)}function Ki(T,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(T,p){return Qi(T,p)})).apply(this,arguments)}function Yr(T,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(T,p){return Qi(T,p)})).apply(this,arguments)}function fs(T,p){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,g.Z)(function*(T,p){return Qi(T,p)})).apply(this,arguments)}function Di(){return(Di=(0,g.Z)(function*(T,p){return Un(T,"POST","/v1/accounts:signInWithEmailLink",It(T,p))})).apply(this,arguments)}function to(){return(to=(0,g.Z)(function*(T,p){return Un(T,"POST","/v1/accounts:signInWithEmailLink",It(T,p))})).apply(this,arguments)}class vs extends Vi{constructor(p,y,A,ie=null){super("password",A),this._email=p,this._password=y,this._tenantId=ie}static _fromEmailAndPassword(p,y){return new vs(p,y,"password")}static _fromEmailAndCode(p,y,A=null){return new vs(p,y,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(p){var y=this;return(0,g.Z)(function*(){switch(y.signInMethod){case"password":return function mr(T,p){return yr.apply(this,arguments)}(p,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function ps(T,p){return Di.apply(this,arguments)}(p,{email:y._email,oobCode:y._password});default:xe(p,"internal-error")}})()}_linkToIdToken(p,y){var A=this;return(0,g.Z)(function*(){switch(A.signInMethod){case"password":return Is(p,{idToken:y,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function ko(T,p){return to.apply(this,arguments)}(p,{idToken:y,email:A._email,oobCode:A._password});default:xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Xi(T,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(T,p){return Un(T,"POST","/v1/accounts:signInWithIdp",It(T,p))})).apply(this,arguments)}class St extends Vi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const y=new St(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(y.idToken=p.idToken),p.accessToken&&(y.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(y.nonce=p.nonce),p.pendingToken&&(y.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(y.accessToken=p.oauthToken,y.secret=p.oauthTokenSecret):xe("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:ie}=y,Ce=(0,Xe._T)(y,["providerId","signInMethod"]);if(!A||!ie)return null;const bt=new St(A,ie);return bt.idToken=Ce.idToken||void 0,bt.accessToken=Ce.accessToken||void 0,bt.secret=Ce.secret,bt.nonce=Ce.nonce,bt.pendingToken=Ce.pendingToken||null,bt}_getIdTokenResponse(p){return Xi(p,this.buildRequest())}_linkToIdToken(p,y){const A=this.buildRequest();return A.idToken=y,Xi(p,A)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,Xi(p,y)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),p.postBody=(0,ge.xO)(y)}return p}}function gn(T,p){return $n.apply(this,arguments)}function $n(){return($n=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:sendVerificationCode",It(T,p))})).apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(T,p){return Un(T,"POST","/v1/accounts:signInWithPhoneNumber",It(T,p))})).apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(T,p){const y=yield Un(T,"POST","/v1/accounts:signInWithPhoneNumber",It(T,p));if(y.temporaryProof)throw si(T,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const ds={USER_NOT_FOUND:"user-not-found"};function as(){return(as=(0,g.Z)(function*(T,p){return Un(T,"POST","/v1/accounts:signInWithPhoneNumber",It(T,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ds)})).apply(this,arguments)}class Es extends Vi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,y){return new Es({verificationId:p,verificationCode:y})}static _fromTokenResponse(p,y){return new Es({phoneNumber:p,temporaryProof:y})}_getIdTokenResponse(p){return function Ir(T,p){return Qr.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,y){return function Zi(T,p){return pi.apply(this,arguments)}(p,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ei(T,p){return as.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:y,verificationId:A,verificationCode:ie}=this.params;return p&&y?{temporaryProof:p,phoneNumber:y}:{sessionInfo:A,code:ie}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:y,verificationCode:A,phoneNumber:ie,temporaryProof:Ce}=p;return A||y||ie||Ce?new Es({verificationId:y,verificationCode:A,phoneNumber:ie,temporaryProof:Ce}):null}}class co{constructor(p){var y,A,ie,Ce,bt,dn;const nr=(0,ge.zd)((0,ge.pd)(p)),Rr=null!==(y=nr.apiKey)&&void 0!==y?y:null,yi=null!==(A=nr.oobCode)&&void 0!==A?A:null,li=function Ko(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ie=nr.mode)&&void 0!==ie?ie:null);Fe(Rr&&yi&&li,"argument-error"),this.apiKey=Rr,this.operation=li,this.code=yi,this.continueUrl=null!==(Ce=nr.continueUrl)&&void 0!==Ce?Ce:null,this.languageCode=null!==(bt=nr.languageCode)&&void 0!==bt?bt:null,this.tenantId=null!==(dn=nr.tenantId)&&void 0!==dn?dn:null}static parseLink(p){const y=function gs(T){const p=(0,ge.zd)((0,ge.pd)(T)).link,y=p?(0,ge.zd)((0,ge.pd)(p)).deep_link_id:null,A=(0,ge.zd)((0,ge.pd)(T)).deep_link_id;return(A?(0,ge.zd)((0,ge.pd)(A)).link:null)||A||y||p||T}(p);try{return new co(y)}catch(A){return null}}}let Io=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(y,A){return vs._fromEmailAndPassword(y,A)}static credentialWithLink(y,A){const ie=co.parseLink(A);return Fe(ie,"argument-error"),vs._fromEmailAndCode(y,ie.code,ie.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class Ni{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class no extends Ni{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ms extends no{static credentialFromJSON(p){const y="string"==typeof p?JSON.parse(p):p;return Fe("providerId"in y&&"signInMethod"in y,"argument-error"),St._fromParams(y)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Fe(p.idToken||p.accessToken,"argument-error"),St._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ms.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ms.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:y,oauthAccessToken:A,oauthTokenSecret:ie,pendingToken:Ce,nonce:bt,providerId:dn}=p;if(!A&&!ie&&!y&&!Ce||!dn)return null;try{return new Ms(dn)._credential({idToken:y,accessToken:A,nonce:bt,pendingToken:Ce})}catch(nr){return null}}}let Us=(()=>{class T extends no{constructor(){super("facebook.com")}static credential(y){return St._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return T.credentialFromTaggedObject(y)}static credentialFromError(y){return T.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return T.credential(y.oauthAccessToken)}catch(A){return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),Bs=(()=>{class T extends no{constructor(){super("google.com"),this.addScope("profile")}static credential(y,A){return St._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:A})}static credentialFromResult(y){return T.credentialFromTaggedObject(y)}static credentialFromError(y){return T.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:A,oauthAccessToken:ie}=y;if(!A&&!ie)return null;try{return T.credential(A,ie)}catch(Ce){return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),Ro=(()=>{class T extends no{constructor(){super("github.com")}static credential(y){return St._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return T.credentialFromTaggedObject(y)}static credentialFromError(y){return T.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return T.credential(y.oauthAccessToken)}catch(A){return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class Ws extends Vi{constructor(p,y){super(p,p),this.pendingToken=y}_getIdTokenResponse(p){return Xi(p,this.buildRequest())}_linkToIdToken(p,y){const A=this.buildRequest();return A.idToken=y,Xi(p,A)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,Xi(p,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:ie,pendingToken:Ce}=y;return A&&ie&&Ce&&A===ie?new Ws(A,Ce):null}static _create(p,y){return new Ws(p,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $s extends Ni{constructor(p){Fe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return $s.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return $s.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const y=Ws.fromJSON(p);return Fe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:y,providerId:A}=p;if(!y||!A)return null;try{return Ws._create(A,y)}catch(ie){return null}}}let Zo=(()=>{class T extends no{constructor(){super("twitter.com")}static credential(y,A){return St._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:A})}static credentialFromResult(y){return T.credentialFromTaggedObject(y)}static credentialFromError(y){return T.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:A,oauthTokenSecret:ie}=y;if(!A||!ie)return null;try{return T.credential(A,ie)}catch(Ce){return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function ms(T,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,g.Z)(function*(T,p){return Un(T,"POST","/v1/accounts:signUp",It(T,p))})).apply(this,arguments)}class Rs{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,y,A,ie=!1){return(0,g.Z)(function*(){const Ce=yield Nr._fromIdTokenResponse(p,A,ie),bt=Ai(A);return new Rs({user:Ce,providerId:bt,_tokenResponse:A,operationType:y})})()}static _forOperation(p,y,A){return(0,g.Z)(function*(){yield p._updateTokensIfNecessary(A,!0);const ie=Ai(A);return new Rs({user:p,providerId:ie,_tokenResponse:A,operationType:y})})()}}function Ai(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function ao(){return(ao=(0,g.Z)(function*(T){var p;const y=ir(T);if(yield y._initializationPromise,null===(p=y.currentUser)||void 0===p?void 0:p.isAnonymous)return new Rs({user:y.currentUser,providerId:null,operationType:"signIn"});const A=yield ms(y,{returnSecureToken:!0}),ie=yield Rs._fromIdTokenResponse(y,"signIn",A,!0);return yield y._updateCurrentUser(ie.user),ie})).apply(this,arguments)}class js extends ge.ZR{constructor(p,y,A,ie){var Ce;super(y.code,y.message),this.operationType=A,this.user=ie,Object.setPrototypeOf(this,js.prototype),this.customData={appName:p.name,tenantId:null!==(Ce=p.tenantId)&&void 0!==Ce?Ce:void 0,_serverResponse:y.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(p,y,A,ie){return new js(p,y,A,ie)}}function Ps(T,p,y,A){return("reauthenticate"===p?y._getReauthenticationResolver(T):y._getIdTokenResponse(T)).catch(Ce=>{throw"auth/multi-factor-auth-required"===Ce.code?js._fromErrorAndOperation(T,Ce,p,A):Ce})}function Os(T){return new Set(T.map(({providerId:p})=>p).filter(p=>!!p))}function _i(){return(_i=(0,g.Z)(function*(T,p){const y=(0,ge.m9)(T);yield q(!0,y,p);const{providerUserInfo:A}=yield Tr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[p]}),ie=Os(A||[]);return y.providerData=y.providerData.filter(Ce=>ie.has(Ce.providerId)),ie.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function U(T,p){return pe.apply(this,arguments)}function pe(){return(pe=(0,g.Z)(function*(T,p,y=!1){const A=yield qr(T,p._linkToIdToken(T.auth,yield T.getIdToken()),y);return Rs._forOperation(T,"link",A)})).apply(this,arguments)}function q(T,p,y){return ve.apply(this,arguments)}function ve(){return(ve=(0,g.Z)(function*(T,p,y){yield ui(p);const ie=!1===T?"provider-already-linked":"no-such-provider";Fe(Os(p.providerData).has(y)===T,p.auth,ie)})).apply(this,arguments)}function ze(T,p){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(function*(T,p,y=!1){const{auth:A}=T,ie="reauthenticate";try{const Ce=yield qr(T,Ps(A,ie,p,T),y);Fe(Ce.idToken,A,"internal-error");const bt=yn(Ce.idToken);Fe(bt,A,"internal-error");const{sub:dn}=bt;return Fe(T.uid===dn,A,"user-mismatch"),Rs._forOperation(T,ie,Ce)}catch(Ce){throw"auth/user-not-found"===(null==Ce?void 0:Ce.code)&&xe(A,"user-mismatch"),Ce}})).apply(this,arguments)}function Cn(T,p){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(T,p,y=!1){const A="signIn",ie=yield Ps(T,A,p),Ce=yield Rs._fromIdTokenResponse(T,A,ie);return y||(yield T._updateCurrentUser(Ce.user)),Ce})).apply(this,arguments)}function Br(T,p){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(T,p){return Cn(ir(T),p)})).apply(this,arguments)}function ni(T,p){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(T,p){const y=(0,ge.m9)(T);return yield q(!1,y,p.providerId),U(y,p)})).apply(this,arguments)}function Yi(T,p){return vi.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(T,p){return ze((0,ge.m9)(T),p)})).apply(this,arguments)}function Ti(T,p){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(T,p){return Un(T,"POST","/v1/accounts:signInWithCustomToken",It(T,p))})).apply(this,arguments)}function kr(){return(kr=(0,g.Z)(function*(T,p){const y=ir(T),A=yield Ti(y,{token:p,returnSecureToken:!0}),ie=yield Rs._fromIdTokenResponse(y,"signIn",A);return yield y._updateCurrentUser(ie.user),ie})).apply(this,arguments)}class Zs{constructor(p,y){this.factorId=p,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(p,y){return"phoneInfo"in y?Po._fromServerResponse(p,y):xe(p,"internal-error")}}class Po extends Zs{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,y){return new Po(y)}}function io(T,p,y){var A;Fe((null===(A=y.url)||void 0===A?void 0:A.length)>0,T,"invalid-continue-uri"),Fe(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),p.continueUrl=y.url,p.dynamicLinkDomain=y.dynamicLinkDomain,p.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Fe(y.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),p.iOSBundleId=y.iOS.bundleId),y.android&&(Fe(y.android.packageName.length>0,T,"missing-android-pkg-name"),p.androidInstallApp=y.android.installApp,p.androidMinimumVersionCode=y.android.minimumVersion,p.androidPackageName=y.android.packageName)}function Q(){return(Q=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T),ie={requestType:"PASSWORD_RESET",email:p};y&&io(A,ie,y),yield Ki(A,ie)})).apply(this,arguments)}function L(){return(L=(0,g.Z)(function*(T,p,y){yield qi((0,ge.m9)(T),{oobCode:p,newPassword:y})})).apply(this,arguments)}function We(){return(We=(0,g.Z)(function*(T,p){yield Vs((0,ge.m9)(T),{oobCode:p})})).apply(this,arguments)}function Mn(T,p){return te.apply(this,arguments)}function te(){return(te=(0,g.Z)(function*(T,p){const y=(0,ge.m9)(T),A=yield qi(y,{oobCode:p}),ie=A.requestType;switch(Fe(ie,y,"internal-error"),ie){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Fe(A.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Fe(A.mfaInfo,y,"internal-error");default:Fe(A.email,y,"internal-error")}let Ce=null;return A.mfaInfo&&(Ce=Zs._fromServerResponse(ir(y),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:Ce},operation:ie}})).apply(this,arguments)}function be(){return(be=(0,g.Z)(function*(T,p){const{data:y}=yield Mn((0,ge.m9)(T),p);return y.email})).apply(this,arguments)}function rt(){return(rt=(0,g.Z)(function*(T,p,y){const A=ir(T),ie=yield ms(A,{returnSecureToken:!0,email:p,password:y}),Ce=yield Rs._fromIdTokenResponse(A,"signIn",ie);return yield A._updateCurrentUser(Ce.user),Ce})).apply(this,arguments)}function vr(){return(vr=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T),ie={requestType:"EMAIL_SIGNIN",email:p};Fe(y.handleCodeInApp,A,"argument-error"),y&&io(A,ie,y),yield Yr(A,ie)})).apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T),ie=Io.credentialWithLink(p,y||on());return Fe(ie._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),Br(A,ie)})).apply(this,arguments)}function fi(T,p){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:createAuthUri",It(T,p))})).apply(this,arguments)}function l(){return(l=(0,g.Z)(function*(T,p){const A={identifier:p,continueUri:wn()?on():"http://localhost"},{signinMethods:ie}=yield fi((0,ge.m9)(T),A);return ie||[]})).apply(this,arguments)}function S(){return(S=(0,g.Z)(function*(T,p){const y=(0,ge.m9)(T),ie={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};p&&io(y.auth,ie,p);const{email:Ce}=yield Si(y.auth,ie);Ce!==T.email&&(yield T.reload())})).apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T),Ce={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:p};y&&io(A.auth,Ce,y);const{email:bt}=yield fs(A.auth,Ce);bt!==T.email&&(yield T.reload())})).apply(this,arguments)}function J(T,p){return ye.apply(this,arguments)}function ye(){return(ye=(0,g.Z)(function*(T,p){return ut(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ae(){return(ae=(0,g.Z)(function*(T,{displayName:p,photoURL:y}){if(void 0===p&&void 0===y)return;const A=(0,ge.m9)(T),Ce={idToken:yield A.getIdToken(),displayName:p,photoUrl:y,returnSecureToken:!0},bt=yield qr(A,J(A.auth,Ce));A.displayName=bt.displayName||null,A.photoURL=bt.photoUrl||null;const dn=A.providerData.find(({providerId:nr})=>"password"===nr);dn&&(dn.displayName=A.displayName,dn.photoURL=A.photoURL),yield A._updateTokensIfNecessary(bt)})).apply(this,arguments)}function ue(T,p,y){return we.apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(T,p,y){const{auth:A}=T,Ce={idToken:yield T.getIdToken(),returnSecureToken:!0};p&&(Ce.email=p),y&&(Ce.password=y);const bt=yield qr(T,Is(A,Ce));yield T._updateTokensIfNecessary(bt,!0)})).apply(this,arguments)}class nt{constructor(p,y,A={}){this.isNewUser=p,this.providerId=y,this.profile=A}}class Ae extends nt{constructor(p,y,A,ie){super(p,y,A),this.username=ie}}class Le extends nt{constructor(p,y){super(p,"facebook.com",y)}}class _t extends Ae{constructor(p,y){super(p,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Je extends nt{constructor(p,y){super(p,"google.com",y)}}class yt extends Ae{constructor(p,y,A){super(p,"twitter.com",y,A)}}function mn(T){const{user:p,_tokenResponse:y}=T;return p.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function He(T){var p,y;if(!T)return null;const{providerId:A}=T,ie=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},Ce=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!A&&(null==T?void 0:T.idToken)){const bt=null===(y=null===(p=yn(T.idToken))||void 0===p?void 0:p.firebase)||void 0===y?void 0:y.sign_in_provider;if(bt)return new nt(Ce,"anonymous"!==bt&&"custom"!==bt?bt:null)}if(!A)return null;switch(A){case"facebook.com":return new Le(Ce,ie);case"github.com":return new _t(Ce,ie);case"google.com":return new Je(Ce,ie);case"twitter.com":return new yt(Ce,ie,T.screenName||null);case"custom":case"anonymous":return new nt(Ce,null);default:return new nt(Ce,A,ie)}}(y)}class B{constructor(p,y,A){this.type=p,this.credential=y,this.auth=A}static _fromIdtoken(p,y){return new B("enroll",p,y)}static _fromMfaPendingCredential(p){return new B("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var y,A;if(null==p?void 0:p.multiFactorSession){if(null===(y=p.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return B._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(A=p.multiFactorSession)||void 0===A?void 0:A.idToken)return B._fromIdtoken(p.multiFactorSession.idToken)}return null}}class b{constructor(p,y,A){this.session=p,this.hints=y,this.signInResolver=A}static _fromError(p,y){const A=ir(p),ie=y.customData._serverResponse,Ce=(ie.mfaInfo||[]).map(dn=>Zs._fromServerResponse(A,dn));Fe(ie.mfaPendingCredential,A,"internal-error");const bt=B._fromMfaPendingCredential(ie.mfaPendingCredential);return new b(bt,Ce,function(){var dn=(0,g.Z)(function*(nr){const Rr=yield nr._process(A,bt);delete ie.mfaInfo,delete ie.mfaPendingCredential;const yi=Object.assign(Object.assign({},ie),{idToken:Rr.idToken,refreshToken:Rr.refreshToken});switch(y.operationType){case"signIn":const li=yield Rs._fromIdTokenResponse(A,y.operationType,yi);return yield A._updateCurrentUser(li.user),li;case"reauthenticate":return Fe(y.user,A,"internal-error"),Rs._forOperation(y.user,y.operationType,yi);default:xe(A,"internal-error")}});return function(nr){return dn.apply(this,arguments)}}())}resolveSignIn(p){var y=this;return(0,g.Z)(function*(){return y.signInResolver(p)})()}}function k(T,p){return ut(T,"POST","/v2/accounts/mfaEnrollment:start",It(T,p))}class ke{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(A=>Zs._fromServerResponse(p.auth,A)))})}static _fromUser(p){return new ke(p)}getSession(){var p=this;return(0,g.Z)(function*(){return B._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,y){var A=this;return(0,g.Z)(function*(){const ie=p,Ce=yield A.getSession(),bt=yield qr(A.user,ie._process(A.user.auth,Ce,y));return yield A.user._updateTokensIfNecessary(bt),A.user.reload()})()}unenroll(p){var y=this;return(0,g.Z)(function*(){const A="string"==typeof p?p:p.uid,ie=yield y.user.getIdToken(),Ce=yield qr(y.user,function Ee(T,p){return ut(T,"POST","/v2/accounts/mfaEnrollment:withdraw",It(T,p))}(y.user.auth,{idToken:ie,mfaEnrollmentId:A}));y.enrolledFactors=y.enrolledFactors.filter(({uid:bt})=>bt!==A),yield y.user._updateTokensIfNecessary(Ce);try{yield y.user.reload()}catch(bt){if("auth/user-token-expired"!==(null==bt?void 0:bt.code))throw bt}})()}}const qe=new WeakMap,sn="__sak";class sr{constructor(p,y){this.storageRetriever=p,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(sn,"1"),this.storage.removeItem(sn),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,y){return this.storage.setItem(p,JSON.stringify(y)),Promise.resolve()}_get(p){const y=this.storage.getItem(p);return Promise.resolve(y?JSON.parse(y):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const pr=(()=>{class T extends sr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,A)=>this.onStorageEvent(y,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Er(){const T=(0,ge.z$)();return Re(T)||Kr(T)}()&&function hi(){try{return!(!window||window===window.top)}catch(T){return!1}}(),this.fallbackToPolling=Ci(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const A of Object.keys(this.listeners)){const ie=this.storage.getItem(A),Ce=this.localCache[A];ie!==Ce&&y(A,Ce,ie)}}onStorageEvent(y,A=!1){if(!y.key)return void this.forAllChangedKeys((dn,nr,Rr)=>{this.notifyListeners(dn,Rr)});const ie=y.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const dn=this.storage.getItem(ie);if(y.newValue!==dn)null!==y.newValue?this.storage.setItem(ie,y.newValue):this.storage.removeItem(ie);else if(this.localCache[ie]===y.newValue&&!A)return}const Ce=()=>{const dn=this.storage.getItem(ie);!A&&this.localCache[ie]===dn||this.notifyListeners(ie,dn)},bt=this.storage.getItem(ie);!function Ls(){return(0,ge.w1)()&&10===document.documentMode}()||bt===y.newValue||y.newValue===y.oldValue?Ce():setTimeout(Ce,10)}notifyListeners(y,A){this.localCache[y]=A;const ie=this.listeners[y];if(ie)for(const Ce of Array.from(ie))Ce(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,A,ie)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:A,newValue:ie}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,A){var ie=()=>super._set,Ce=this;return(0,g.Z)(function*(){yield ie().call(Ce,y,A),Ce.localCache[y]=JSON.stringify(A)})()}_get(y){var A=()=>super._get,ie=this;return(0,g.Z)(function*(){const Ce=yield A().call(ie,y);return ie.localCache[y]=JSON.stringify(Ce),Ce})()}_remove(y){var A=()=>super._remove,ie=this;return(0,g.Z)(function*(){yield A().call(ie,y),delete ie.localCache[y]})()}}return T.type="LOCAL",T})(),xi=(()=>{class T extends sr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,A){}_removeListener(y,A){}}return T.type="SESSION",T})();let Hs=(()=>{class T{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const A=this.receivers.find(Ce=>Ce.isListeningto(y));if(A)return A;const ie=new T(y);return this.receivers.push(ie),ie}isListeningto(y){return this.eventTarget===y}handleEvent(y){var A=this;return(0,g.Z)(function*(){const ie=y,{eventId:Ce,eventType:bt,data:dn}=ie.data,nr=A.handlersMap[bt];if(!(null==nr?void 0:nr.size))return;ie.ports[0].postMessage({status:"ack",eventId:Ce,eventType:bt});const Rr=Array.from(nr).map(function(){var li=(0,g.Z)(function*(zo){return zo(ie.origin,dn)});return function(zo){return li.apply(this,arguments)}}()),yi=yield function us(T){return Promise.all(T.map(function(){var p=(0,g.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(A){return{fulfilled:!1,reason:A}}});return function(y){return p.apply(this,arguments)}}()))}(Rr);ie.ports[0].postMessage({status:"done",eventId:Ce,eventType:bt,response:yi})})()}_subscribe(y,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(A)}_unsubscribe(y,A){this.handlersMap[y]&&A&&this.handlersMap[y].delete(A),(!A||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function En(T="",p=10){let y="";for(let A=0;A<p;A++)y+=Math.floor(10*Math.random());return T+y}class Bi{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,y,A=50){var ie=this;return(0,g.Z)(function*(){const Ce="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Ce)throw new Error("connection_unavailable");let bt,dn;return new Promise((nr,Rr)=>{const yi=En("",20);Ce.port1.start();const li=setTimeout(()=>{Rr(new Error("unsupported_event"))},A);dn={messageChannel:Ce,onMessage(zo){const f=zo;if(f.data.eventId===yi)switch(f.data.status){case"ack":clearTimeout(li),bt=setTimeout(()=>{Rr(new Error("timeout"))},3e3);break;case"done":clearTimeout(bt),nr(f.data.response);break;default:clearTimeout(li),clearTimeout(bt),Rr(new Error("invalid_response"))}}},ie.handlers.add(dn),Ce.port1.addEventListener("message",dn.onMessage),ie.target.postMessage({eventType:p,eventId:yi,data:y},[Ce.port2])}).finally(()=>{dn&&ie.removeMessageHandler(dn)})})()}}function $i(){return window}function rr(){return void 0!==$i().WorkerGlobalScope&&"function"==typeof $i().importScripts}function Yo(){return(Yo=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(T){return null}})).apply(this,arguments)}const In="firebaseLocalStorageDb",Vo="firebaseLocalStorage",Sr="fbase_key";class N{constructor(p){this.request=p}toPromise(){return new Promise((p,y)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function D(T,p){return T.transaction([Vo],p?"readwrite":"readonly").objectStore(Vo)}function W(){const T=indexedDB.open(In,1);return new Promise((p,y)=>{T.addEventListener("error",()=>{y(T.error)}),T.addEventListener("upgradeneeded",()=>{const A=T.result;try{A.createObjectStore(Vo,{keyPath:Sr})}catch(ie){y(ie)}}),T.addEventListener("success",(0,g.Z)(function*(){const A=T.result;A.objectStoreNames.contains(Vo)?p(A):(A.close(),yield function I(){const T=indexedDB.deleteDatabase(In);return new N(T).toPromise()}(),p(yield W()))}))})}function ne(T,p,y){return me.apply(this,arguments)}function me(){return(me=(0,g.Z)(function*(T,p,y){const A=D(T,!0).put({[Sr]:p,value:y});return new N(A).toPromise()})).apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(T,p){const y=D(T,!1).get(p),A=yield new N(y).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function cn(T,p){const y=D(T,!0).delete(p);return new N(y).toPromise()}const Mr=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,g.Z)(function*(){return y.db||(y.db=yield W()),y.db})()}_withRetries(y){var A=this;return(0,g.Z)(function*(){let ie=0;for(;;)try{const Ce=yield A._openDb();return yield y(Ce)}catch(Ce){if(ie++>3)throw Ce;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,g.Z)(function*(){return rr()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,g.Z)(function*(){y.receiver=Hs._getInstance(function qt(){return rr()?self:null}()),y.receiver._subscribe("keyChanged",function(){var A=(0,g.Z)(function*(ie,Ce){return{keyProcessed:(yield y._poll()).includes(Ce.key)}});return function(ie,Ce){return A.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var A=(0,g.Z)(function*(ie,Ce){return["keyChanged"]});return function(ie,Ce){return A.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,g.Z)(function*(){var A,ie;if(y.activeServiceWorker=yield function hr(){return Yo.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Bi(y.activeServiceWorker);const Ce=yield y.sender._send("ping",{},800);!Ce||(null===(A=Ce[0])||void 0===A?void 0:A.fulfilled)&&(null===(ie=Ce[0])||void 0===ie?void 0:ie.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var A=this;return(0,g.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function er(){var T;return(null===(T=null==navigator?void 0:navigator.serviceWorker)||void 0===T?void 0:T.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:y},A.serviceWorkerReceiverAvailable?800:50)}catch(ie){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const y=yield W();return yield ne(y,sn,"1"),yield cn(y,sn),!0}catch(y){}return!1})()}_withPendingWrite(y){var A=this;return(0,g.Z)(function*(){A.pendingWrites++;try{yield y()}finally{A.pendingWrites--}})()}_set(y,A){var ie=this;return(0,g.Z)(function*(){return ie._withPendingWrite((0,g.Z)(function*(){return yield ie._withRetries(Ce=>ne(Ce,y,A)),ie.localCache[y]=A,ie.notifyServiceWorker(y)}))})()}_get(y){var A=this;return(0,g.Z)(function*(){const ie=yield A._withRetries(Ce=>function Be(T,p){return Ke.apply(this,arguments)}(Ce,y));return A.localCache[y]=ie,ie})()}_remove(y){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(ie=>cn(ie,y)),delete A.localCache[y],A.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,g.Z)(function*(){const A=yield y._withRetries(bt=>{const dn=D(bt,!1).getAll();return new N(dn).toPromise()});if(!A)return[];if(0!==y.pendingWrites)return[];const ie=[],Ce=new Set;for(const{fbase_key:bt,value:dn}of A)Ce.add(bt),JSON.stringify(y.localCache[bt])!==JSON.stringify(dn)&&(y.notifyListeners(bt,dn),ie.push(bt));for(const bt of Object.keys(y.localCache))y.localCache[bt]&&!Ce.has(bt)&&(y.notifyListeners(bt,null),ie.push(bt));return ie})()}notifyListeners(y,A){this.localCache[y]=A;const ie=this.listeners[y];if(ie)for(const Ce of Array.from(ie))Ce(A)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function Gn(T,p){return ut(T,"POST","/v2/accounts/mfaSignIn:start",It(T,p))}function Aa(){return(Aa=(0,g.Z)(function*(T){return(yield ut(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Qn(T){return new Promise((p,y)=>{const A=document.createElement("script");A.setAttribute("src",T),A.onload=p,A.onerror=ie=>{const Ce=Ne("internal-error");Ce.customData=ie,y(Ce)},A.type="text/javascript",A.charset="UTF-8",function Ns(){var T,p;return null!==(p=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==p?p:document}().appendChild(A)})}function Uo(T){return`__${T}${Math.floor(1e6*Math.random())}`}const ul=1e12;class Fl{constructor(p){this.auth=p,this.counter=ul,this._widgets=new Map}render(p,y){const A=this.counter;return this._widgets.set(A,new Za(p,this.auth.name,y||{})),this.counter++,A}reset(p){var y;const A=p||ul;null===(y=this._widgets.get(A))||void 0===y||y.delete(),this._widgets.delete(A)}getResponse(p){var y;return(null===(y=this._widgets.get(p||ul))||void 0===y?void 0:y.getResponse())||""}execute(p){var y=this;return(0,g.Z)(function*(){var A;return null===(A=y._widgets.get(p||ul))||void 0===A||A.execute(),""})()}}class Za{constructor(p,y,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ie="string"==typeof p?document.getElementById(p):p;Fe(ie,"argument-error",{appName:y}),this.container=ie,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ll(T){const p=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<T;A++)p.push(y.charAt(Math.floor(Math.random()*y.length)));return p.join("")}(50);const{callback:p,"expired-callback":y}=this.params;if(p)try{p(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mu=Uo("rcb"),lo=new gr(3e4,6e4);class _a{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=$i().grecaptcha)||void 0===p?void 0:p.render)}load(p,y=""){return Fe(function wc(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(y),p,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve($i().grecaptcha):new Promise((A,ie)=>{const Ce=$i().setTimeout(()=>{ie(Ne(p,"network-request-failed"))},lo.get());$i()[mu]=()=>{$i().clearTimeout(Ce),delete $i()[mu];const dn=$i().grecaptcha;if(!dn)return void ie(Ne(p,"internal-error"));const nr=dn.render;dn.render=(Rr,yi)=>{const li=nr(Rr,yi);return this.counter++,li},this.hostLanguage=y,A(dn)},Qn(`https://www.google.com/recaptcha/api.js??${(0,ge.xO)({onload:mu,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(Ce),ie(Ne(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var y;return!!(null===(y=$i().grecaptcha)||void 0===y?void 0:y.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ic{load(p){return(0,g.Z)(function*(){return new Fl(p)})()}clearedOneInstance(){}}const ra="recaptcha",Xl={theme:"light",type:"image"};class Xt{constructor(p,y=Object.assign({},Xl),A){this.parameters=y,this.type=ra,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ir(A),this.isInvisible="invisible"===this.parameters.size,Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const ie="string"==typeof p?document.getElementById(p):p;Fe(ie,this.auth,"argument-error"),this.container=ie,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ic:new _a,this.validateStartingState()}verify(){var p=this;return(0,g.Z)(function*(){p.assertNotDestroyed();const y=yield p.render(),A=p.getAssertedRecaptcha();return A.getResponse(y)||new Promise(Ce=>{const bt=dn=>{!dn||(p.tokenChangeListeners.delete(bt),Ce(dn))};p.tokenChangeListeners.add(bt),p.isInvisible&&A.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Fe(!this.parameters.sitekey,this.auth,"argument-error"),Fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return y=>{if(this.tokenChangeListeners.forEach(A=>A(y)),"function"==typeof p)p(y);else if("string"==typeof p){const A=$i()[p];"function"==typeof A&&A(y)}}}assertNotDestroyed(){Fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,g.Z)(function*(){if(yield p.init(),!p.widgetId){let y=p.container;if(!p.isInvisible){const A=document.createElement("div");y.appendChild(A),y=A}p.widgetId=p.getAssertedRecaptcha().render(y,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,g.Z)(function*(){Fe(wn()&&!rr(),p.auth,"internal-error"),yield function Ya(){let T=null;return new Promise(p=>{"complete"!==document.readyState?(T=()=>p(),window.addEventListener("load",T)):p()}).catch(p=>{throw T&&window.removeEventListener("load",T),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const y=yield function ai(T){return Aa.apply(this,arguments)}(p.auth);Fe(y,p.auth,"internal-error"),p.parameters.sitekey=y})()}getAssertedRecaptcha(){return Fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class va{constructor(p,y){this.verificationId=p,this.onConfirmation=y}confirm(p){const y=Es._fromVerification(this.verificationId,p);return this.onConfirmation(y)}}function Ea(){return(Ea=(0,g.Z)(function*(T,p,y){const A=ir(T),ie=yield Qo(A,p,(0,ge.m9)(y));return new va(ie,Ce=>Br(A,Ce))})).apply(this,arguments)}function Gu(){return(Gu=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T);yield q(!1,A,"phone");const ie=yield Qo(A.auth,p,(0,ge.m9)(y));return new va(ie,Ce=>ni(A,Ce))})).apply(this,arguments)}function So(){return(So=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T),ie=yield Qo(A.auth,p,(0,ge.m9)(y));return new va(ie,Ce=>Yi(A,Ce))})).apply(this,arguments)}function Qo(T,p,y){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,g.Z)(function*(T,p,y){var A;const ie=yield y.verify();try{let Ce;if(Fe("string"==typeof ie,T,"argument-error"),Fe(y.type===ra,T,"argument-error"),Ce="string"==typeof p?{phoneNumber:p}:p,"session"in Ce){const bt=Ce.session;if("phoneNumber"in Ce)return Fe("enroll"===bt.type,T,"internal-error"),(yield k(T,{idToken:bt.credential,phoneEnrollmentInfo:{phoneNumber:Ce.phoneNumber,recaptchaToken:ie}})).phoneSessionInfo.sessionInfo;{Fe("signin"===bt.type,T,"internal-error");const dn=(null===(A=Ce.multiFactorHint)||void 0===A?void 0:A.uid)||Ce.multiFactorUid;return Fe(dn,T,"missing-multi-factor-info"),(yield Gn(T,{mfaPendingCredential:bt.credential,mfaEnrollmentId:dn,phoneSignInInfo:{recaptchaToken:ie}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:bt}=yield gn(T,{phoneNumber:Ce.phoneNumber,recaptchaToken:ie});return bt}}finally{y._reset()}})).apply(this,arguments)}function fo(){return(fo=(0,g.Z)(function*(T,p){yield U((0,ge.m9)(T),p)})).apply(this,arguments)}let cl=(()=>{class T{constructor(y){this.providerId=T.PROVIDER_ID,this.auth=ir(y)}verifyPhoneNumber(y,A){return Qo(this.auth,y,(0,ge.m9)(A))}static credential(y,A){return Es._fromVerification(y,A)}static credentialFromResult(y){return T.credentialFromTaggedObject(y)}static credentialFromError(y){return T.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:A,temporaryProof:ie}=y;return A&&ie?Es._fromTokenResponse(A,ie):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function Xo(T,p){return p?et(p):(Fe(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class Il extends Vi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Xi(p,this._buildIdpRequest())}_linkToIdToken(p,y){return Xi(p,this._buildIdpRequest(y))}_getReauthenticationResolver(p){return Xi(p,this._buildIdpRequest())}_buildIdpRequest(p){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(y.idToken=p),y}}function Va(T){return Cn(T.auth,new Il(T),T.bypassAuthState)}function _u(T){const{auth:p,user:y}=T;return Fe(y,p,"internal-error"),ze(y,new Il(T),T.bypassAuthState)}function la(T){return po.apply(this,arguments)}function po(){return(po=(0,g.Z)(function*(T){const{auth:p,user:y}=T;return Fe(y,p,"internal-error"),U(y,new Il(T),T.bypassAuthState)})).apply(this,arguments)}class Qa{constructor(p,y,A,ie,Ce=!1){this.auth=p,this.resolver=A,this.user=ie,this.bypassAuthState=Ce,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var p=this;return new Promise(function(){var y=(0,g.Z)(function*(A,ie){p.pendingPromise={resolve:A,reject:ie};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(Ce){p.reject(Ce)}});return function(A,ie){return y.apply(this,arguments)}}())}onAuthEvent(p){var y=this;return(0,g.Z)(function*(){const{urlResponse:A,sessionId:ie,postBody:Ce,tenantId:bt,error:dn,type:nr}=p;if(dn)return void y.reject(dn);const Rr={auth:y.auth,requestUri:A,sessionId:ie,tenantId:bt||void 0,postBody:Ce||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(nr)(Rr))}catch(yi){y.reject(yi)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Va;case"linkViaPopup":case"linkViaRedirect":return la;case"reauthViaPopup":case"reauthViaRedirect":return _u;default:xe(this.auth,"internal-error")}}resolve(p){Oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ua=new gr(2e3,1e4);function Ba(){return(Ba=(0,g.Z)(function*(T,p,y){const A=ir(T);Kt(T,p,Ni);const ie=Xo(A,y);return new Ja(A,"signInViaPopup",p,ie).executeNotNull()})).apply(this,arguments)}function Qs(){return(Qs=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T);Kt(A.auth,p,Ni);const ie=Xo(A.auth,y);return new Ja(A.auth,"reauthViaPopup",p,ie,A).executeNotNull()})).apply(this,arguments)}function Vl(){return(Vl=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T);Kt(A.auth,p,Ni);const ie=Xo(A.auth,y);return new Ja(A.auth,"linkViaPopup",p,ie,A).executeNotNull()})).apply(this,arguments)}let Ja=(()=>{class T extends Qa{constructor(y,A,ie,Ce,bt){super(y,A,Ce,bt),this.provider=ie,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var y=this;return(0,g.Z)(function*(){const A=yield y.execute();return Fe(A,y.auth,"internal-error"),A})()}onExecution(){var y=this;return(0,g.Z)(function*(){Oe(1===y.filter.length,"Popup operations only handle one event");const A=En();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],A),y.authWindow.associatedEvent=A,y.resolver._originValidation(y.auth).catch(ie=>{y.reject(ie)}),y.resolver._isIframeWebStorageSupported(y.auth,ie=>{ie||y.reject(Ne(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const y=()=>{var A,ie;this.pollId=(null===(ie=null===(A=this.authWindow)||void 0===A?void 0:A.window)||void 0===ie?void 0:ie.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Ua.get())};y()}}return T.currentPopupAction=null,T})();const Jo=new Map;class dl extends Qa{constructor(p,y,A=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,A),this.eventId=null}execute(){var p=()=>super.execute,y=this;return(0,g.Z)(function*(){let A=Jo.get(y.auth._key());if(!A){try{const Ce=(yield function el(T,p){return oo.apply(this,arguments)}(y.resolver,y.auth))?yield p().call(y):null;A=()=>Promise.resolve(Ce)}catch(ie){A=()=>Promise.reject(ie)}Jo.set(y.auth._key(),A)}return y.bypassAuthState||Jo.set(y.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(p){var y=()=>super.onAuthEvent,A=this;return(0,g.Z)(function*(){if("signInViaRedirect"===p.type)return y().call(A,p);if("unknown"!==p.type){if(p.eventId){const ie=yield A.auth._redirectUserForId(p.eventId);if(ie)return A.user=ie,y().call(A,p);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function oo(){return(oo=(0,g.Z)(function*(T,p){const y=ba(p),A=Sl(T);if(!(yield A._isAvailable()))return!1;const ie="true"===(yield A._get(y));return yield A._remove(y),ie})).apply(this,arguments)}function ja(T,p){return bo.apply(this,arguments)}function bo(){return(bo=(0,g.Z)(function*(T,p){return Sl(T)._set(ba(p),"true")})).apply(this,arguments)}function hl(T,p){Jo.set(T._key(),p)}function Sl(T){return et(T._redirectPersistence)}function ba(T){return ht("pendingRedirect",T.config.apiKey,T.name)}function V(){return(V=(0,g.Z)(function*(T,p,y){const A=ir(T);Kt(T,p,Ni);const ie=Xo(A,y);return yield ja(ie,A),ie._openRedirect(A,p,"signInViaRedirect")})).apply(this,arguments)}function je(){return(je=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T);Kt(A.auth,p,Ni);const ie=Xo(A.auth,y);yield ja(ie,A.auth);const Ce=yield mi(A);return ie._openRedirect(A.auth,p,"reauthViaRedirect",Ce)})).apply(this,arguments)}function kn(){return(kn=(0,g.Z)(function*(T,p,y){const A=(0,ge.m9)(T);Kt(A.auth,p,Ni);const ie=Xo(A.auth,y);yield q(!1,A,p.providerId),yield ja(ie,A.auth);const Ce=yield mi(A);return ie._openRedirect(A.auth,p,"linkViaRedirect",Ce)})).apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(T,p){return yield ir(T)._initializationPromise,jr(T,p,!1)})).apply(this,arguments)}function jr(T,p){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(T,p,y=!1){const A=ir(T),ie=Xo(A,p),bt=yield new dl(A,ie,y).execute();return bt&&!y&&(delete bt.user._redirectEventId,yield A._persistUserIfCurrent(bt.user),yield A._setRedirectUser(null,p)),bt})).apply(this,arguments)}function mi(T){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,g.Z)(function*(T){const p=En(`${T.uid}:::`);return T._redirectEventId=p,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),p})).apply(this,arguments)}class ss{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let y=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(p,A)&&(y=!0,this.sendToConsumer(p,A),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Do(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ra(T);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=p,y=!0)),y}sendToConsumer(p,y){var A;if(p.error&&!Ra(p)){const ie=(null===(A=p.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";y.onError(Ne(this.auth,ie))}else y.onAuthEvent(p)}isEventForConsumer(p,y){const A=null===y.eventId||!!p.eventId&&p.eventId===y.eventId;return y.filter.includes(p.type)&&A}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ta(p))}saveEventToCache(p){this.cachedEventUids.add(Ta(p)),this.lastProcessedEventTime=Date.now()}}function Ta(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(p=>p).join("-")}function Ra({type:T,error:p}){return"unknown"===T&&"auth/no-auth-event"===(null==p?void 0:p.code)}function To(T){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,g.Z)(function*(T,p={}){return ut(T,"GET","/v1/projects",p)})).apply(this,arguments)}const ad=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dl=/^https?/;function Bl(){return(Bl=(0,g.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:p}=yield To(T);for(const y of p)try{if(ld(y))return}catch(A){}xe(T,"unauthorized-domain")})).apply(this,arguments)}function ld(T){const p=on(),{protocol:y,hostname:A}=new URL(p);if(T.startsWith("chrome-extension://")){const bt=new URL(T);return""===bt.hostname&&""===A?"chrome-extension:"===y&&T.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===y&&bt.hostname===A}if(!Dl.test(y))return!1;if(ad.test(T))return A===T;const ie=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ie+"|"+ie+")$","i").test(A)}const ud=new gr(3e4,6e4);function Pa(){const T=$i().___jsl;if(null==T?void 0:T.H)for(const p of Object.keys(T.H))if(T.H[p].r=T.H[p].r||[],T.H[p].L=T.H[p].L||[],T.H[p].r=[...T.H[p].L],T.CP)for(let y=0;y<T.CP.length;y++)T.CP[y]=null}let vu=null;function Wu(T){return vu=vu||function qd(T){return new Promise((p,y)=>{var A,ie,Ce;function bt(){Pa(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Pa(),y(Ne(T,"network-request-failed"))},timeout:ud.get()})}if(null===(ie=null===(A=$i().gapi)||void 0===A?void 0:A.iframes)||void 0===ie?void 0:ie.Iframe)p(gapi.iframes.getContext());else{if(!(null===(Ce=$i().gapi)||void 0===Ce?void 0:Ce.load)){const dn=Uo("iframefcb");return $i()[dn]=()=>{gapi.load?bt():y(Ne(T,"network-request-failed"))},Qn(`https://apis.google.com/js/api.js?onload=${dn}`).catch(nr=>y(nr))}bt()}}).catch(p=>{throw vu=null,p})}(T),vu}const cd=new gr(5e3,15e3),Xs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ea(T){const p=T.config;Fe(p.authDomain,T,"auth-domain-config-required");const y=p.emulator?lr(p,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,A={apiKey:p.apiKey,appName:T.name,v:le.SDK_VERSION},ie=Eu.get(T.config.apiHost);ie&&(A.eid=ie);const Ce=T._getFrameworks();return Ce.length&&(A.fw=Ce.join(",")),`${y}?${(0,ge.xO)(A).slice(1)}`}function $l(){return $l=(0,g.Z)(function*(T){const p=yield Wu(T),y=$i().gapi;return Fe(y,T,"internal-error"),p.open({where:document.body,url:ea(T),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xs,dontclear:!0},A=>new Promise(function(){var ie=(0,g.Z)(function*(Ce,bt){yield A.restyle({setHideOnLeave:!1});const dn=Ne(T,"network-request-failed"),nr=$i().setTimeout(()=>{bt(dn)},cd.get());function Rr(){$i().clearTimeout(nr),Ce(A)}A.ping(Rr).then(Rr,()=>{bt(dn)})});return function(Ce,bt){return ie.apply(this,arguments)}}()))}),$l.apply(this,arguments)}const fl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zu{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function ga(T,p,y,A,ie,Ce){Fe(T.config.authDomain,T,"auth-domain-config-required"),Fe(T.config.apiKey,T,"invalid-api-key");const bt={apiKey:T.config.apiKey,appName:T.name,authType:y,redirectUrl:A,v:le.SDK_VERSION,eventId:ie};if(p instanceof Ni){p.setDefaultLanguage(T.languageCode),bt.providerId=p.providerId||"",(0,ge.xb)(p.getCustomParameters())||(bt.customParameters=JSON.stringify(p.getCustomParameters()));for(const[nr,Rr]of Object.entries(Ce||{}))bt[nr]=Rr}if(p instanceof no){const nr=p.getScopes().filter(Rr=>""!==Rr);nr.length>0&&(bt.scopes=nr.join(","))}T.tenantId&&(bt.tid=T.tenantId);const dn=bt;for(const nr of Object.keys(dn))void 0===dn[nr]&&delete dn[nr];return`${function Gl({config:T}){return T.emulator?lr(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}(T)}?${(0,ge.xO)(dn).slice(1)}`}const tu="webStorageSupport";class ru extends class nu{constructor(p){this.factorId=p}_process(p,y,A){switch(y.type){case"enroll":return this._finalizeEnroll(p,y.credential,A);case"signin":return this._finalizeSignIn(p,y.credential);default:return Lt("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ru(p)}_finalizeEnroll(p,y,A){return function ee(T,p){return ut(T,"POST","/v2/accounts/mfaEnrollment:finalize",It(T,p))}(p,{idToken:y,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,y){return function _o(T,p){return ut(T,"POST","/v2/accounts/mfaSignIn:finalize",It(T,p))}(p,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qu=(()=>{class T{constructor(){}static assertion(y){return ru._fromCredential(y)}}return T.FACTOR_ID="phone",T})();var iu="@firebase/auth";class ma{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var y=this;return(0,g.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const y=this.auth.onIdTokenChanged(A=>{p((null==A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,y),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const y=this.internalListeners.get(p);!y||(this.internalListeners.delete(p),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wa(){return window}function zl(){return(zl=(0,g.Z)(function*(T,p,y){var A;const{BuildInfo:ie}=wa();Oe(p.sessionId,"AuthEvent did not contain a session ID");const Ce=yield Du(p.sessionId),bt={};return Kr()?bt.ibi=ie.packageName:Yt()?bt.apn=ie.packageName:xe(T,"operation-not-supported-in-this-environment"),ie.displayName&&(bt.appDisplayName=ie.displayName),bt.sessionId=Ce,ga(T,y,p.type,void 0,null!==(A=p.eventId)&&void 0!==A?A:void 0,bt)})).apply(this,arguments)}function Ac(){return(Ac=(0,g.Z)(function*(T){const{BuildInfo:p}=wa(),y={};Kr()?y.iosBundleId=p.packageName:Yt()?y.androidPackageName=p.packageName:xe(T,"operation-not-supported-in-this-environment"),yield To(T,y)})).apply(this,arguments)}function Iu(){return(Iu=(0,g.Z)(function*(T,p,y){const{cordova:A}=wa();let ie=()=>{};try{yield new Promise((Ce,bt)=>{let dn=null;function nr(){var li;Ce();const zo=null===(li=A.plugins.browsertab)||void 0===li?void 0:li.close;"function"==typeof zo&&zo(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function Rr(){dn||(dn=window.setTimeout(()=>{bt(Ne(T,"redirect-cancelled-by-user"))},2e3))}function yi(){"visible"===(null==document?void 0:document.visibilityState)&&Rr()}p.addPassiveListener(nr),document.addEventListener("resume",Rr,!1),Yt()&&document.addEventListener("visibilitychange",yi,!1),ie=()=>{p.removePassiveListener(nr),document.removeEventListener("resume",Rr,!1),document.removeEventListener("visibilitychange",yi,!1),dn&&window.clearTimeout(dn)}})}finally{ie()}})).apply(this,arguments)}function Du(T){return ml.apply(this,arguments)}function ml(){return(ml=(0,g.Z)(function*(T){const p=ec(T),y=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(y)).map(ie=>ie.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ec(T){if(Oe(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(T);const p=new ArrayBuffer(T.length),y=new Uint8Array(p);for(let A=0;A<T.length;A++)y[A]=T.charCodeAt(A);return y}(0,ge.Pz)("authIdTokenMaxAge"),function Cu(T){(0,le._registerComponent)(new gt.wA("auth",(p,{options:y})=>{const A=p.getProvider("app").getImmediate(),ie=p.getProvider("heartbeat"),{apiKey:Ce,authDomain:bt}=A.options;return((dn,nr)=>{Fe(Ce&&!Ce.includes(":"),"invalid-api-key",{appName:dn.name}),Fe(!(null==bt?void 0:bt.includes(":")),"argument-error",{appName:dn.name});const Rr={apiKey:Ce,authDomain:bt,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:es(T)},yi=new _n(dn,nr,Rr);return function At(T,p){const y=(null==p?void 0:p.persistence)||[],A=(Array.isArray(y)?y:[y]).map(et);(null==p?void 0:p.errorMap)&&T._updateErrorMap(p.errorMap),T._initializeWithPersistence(A,null==p?void 0:p.popupRedirectResolver)}(yi,y),yi})(A,ie)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,y,A)=>{p.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new gt.wA("auth-internal",p=>{const y=ir(p.getProvider("auth").getImmediate());return new ma(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(iu,"0.21.0",function ua(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,le.registerVersion)(iu,"0.21.0","esm2017")}("Browser");class dd extends ss{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(p)),super.onEvent(p)}initialized(){var p=this;return(0,g.Z)(function*(){yield p.initPromise})()}}function Ga(T){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,g.Z)(function*(T){const p=yield eo()._get(uo(T));return p&&(yield eo()._remove(uo(T))),p})).apply(this,arguments)}function _l(){const T=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const A=Math.floor(Math.random()*p.length);T.push(p.charAt(A))}return T.join("")}function eo(){return et(pr)}function uo(T){return ht("authEvent",T.config.apiKey,T.name)}function xu(T){if(!(null==T?void 0:T.includes("?")))return{};const[p,...y]=T.split("?");return(0,ge.zd)(y.join("?"))}function ou(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ne("no-auth-event")}}function Ho(){var T;return(null===(T=null==self?void 0:self.location)||void 0===T?void 0:T.protocol)||null}function Rc(T=(0,ge.z$)()){return!("file:"!==Ho()&&"ionic:"!==Ho()&&"capacitor:"!==Ho()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function nl(){try{const T=self.localStorage,p=En();if(T)return T.setItem(p,"1"),T.removeItem(p),!function Pu(T=(0,ge.z$)()){return function hs(){return(0,ge.w1)()&&11===(null==document?void 0:document.documentMode)}()||function oa(T=(0,ge.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,ge.hl)()}catch(T){return nc()&&(0,ge.hl)()}return!1}function nc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ca(){return(function Go(){return"http:"===Ho()||"https:"===Ho()}()||(0,ge.ru)()||Rc())&&!function Oo(){return(0,ge.b$)()||(0,ge.UG)()}()&&nl()&&!nc()}function rc(){return Rc()&&"undefined"!=typeof document}function au(){return(au=(0,g.Z)(function*(){return!!rc()&&new Promise(T=>{const p=setTimeout(()=>{T(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),T(!0)})})})).apply(this,arguments)}const da={LOCAL:"local",NONE:"none",SESSION:"session"},Ml=Fe,hd="persistence";function Gi(T){return pd.apply(this,arguments)}function pd(){return(pd=(0,g.Z)(function*(T){yield T._initializationPromise;const p=Ou(),y=ht(hd,T.config.apiKey,T.name);p&&p.setItem(y,T._getPersistence())})).apply(this,arguments)}function Ou(){var T;try{return(null===(T=function vl(){return"undefined"!=typeof window?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch(p){return null}}const Nu=Fe;class Sa{constructor(){this.browserResolver=et(class pl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xi,this._completeRedirectFn=jr,this._overrideRedirectResult=hl}_openPopup(p,y,A,ie){var Ce=this;return(0,g.Z)(function*(){var bt;Oe(null===(bt=Ce.eventManagers[p._key()])||void 0===bt?void 0:bt.manager,"_initialize() not called before _openPopup()");const dn=ga(p,y,A,on(),ie);return function eu(T,p,y,A=500,ie=600){const Ce=Math.max((window.screen.availHeight-ie)/2,0).toString(),bt=Math.max((window.screen.availWidth-A)/2,0).toString();let dn="";const nr=Object.assign(Object.assign({},fl),{width:A.toString(),height:ie.toString(),top:Ce,left:bt}),Rr=(0,ge.z$)().toLowerCase();y&&(dn=De(Rr)?"_blank":y),Ge(Rr)&&(p=p||"http://localhost",nr.scrollbars="yes");const yi=Object.entries(nr).reduce((zo,[f,c])=>`${zo}${f}=${c},`,"");if(function ns(T=(0,ge.z$)()){var p;return Kr(T)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Rr)&&"_self"!==dn)return function jl(T,p){const y=document.createElement("a");y.href=T,y.target=p;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(A)}(p||"",dn),new Zu(null);const li=window.open(p||"",dn,yi);Fe(li,T,"popup-blocked");try{li.focus()}catch(zo){}return new Zu(li)}(p,dn,En())})()}_openRedirect(p,y,A,ie){var Ce=this;return(0,g.Z)(function*(){return yield Ce._originValidation(p),function Ts(T){$i().location.href=T}(ga(p,y,A,on(),ie)),new Promise(()=>{})})()}_initialize(p){const y=p._key();if(this.eventManagers[y]){const{manager:ie,promise:Ce}=this.eventManagers[y];return ie?Promise.resolve(ie):(Oe(Ce,"If manager is not set, promise should be"),Ce)}const A=this.initAndGetManager(p);return this.eventManagers[y]={promise:A},A.catch(()=>{delete this.eventManagers[y]}),A}initAndGetManager(p){var y=this;return(0,g.Z)(function*(){const A=yield function Js(T){return $l.apply(this,arguments)}(p),ie=new ss(p);return A.register("authEvent",Ce=>(Fe(null==Ce?void 0:Ce.authEvent,p,"invalid-auth-event"),{status:ie.onEvent(Ce.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[p._key()]={manager:ie},y.iframes[p._key()]=A,ie})()}_isIframeWebStorageSupported(p,y){this.iframes[p._key()].send(tu,{type:tu},ie=>{var Ce;const bt=null===(Ce=null==ie?void 0:ie[0])||void 0===Ce?void 0:Ce[tu];void 0!==bt&&y(!!bt),xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Al(T){return Bl.apply(this,arguments)}(p)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ci()||Re()||Kr()}}),this.cordovaResolver=et(class Mc{constructor(){this._redirectPersistence=xi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=jr,this._overrideRedirectResult=hl}_initialize(p){var y=this;return(0,g.Z)(function*(){const A=p._key();let ie=y.eventManagers.get(A);return ie||(ie=new dd(p),y.eventManagers.set(A,ie),y.attachCallbackListeners(p,ie)),ie})()}_openPopup(p){xe(p,"operation-not-supported-in-this-environment")}_openRedirect(p,y,A,ie){var Ce=this;return(0,g.Z)(function*(){!function Su(T){var p,y,A,ie,Ce,bt,dn,nr,Rr,yi;const li=wa();Fe("function"==typeof(null===(p=null==li?void 0:li.universalLinks)||void 0===p?void 0:p.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Fe(void 0!==(null===(y=null==li?void 0:li.BuildInfo)||void 0===y?void 0:y.packageName),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Fe("function"==typeof(null===(Ce=null===(ie=null===(A=null==li?void 0:li.cordova)||void 0===A?void 0:A.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Ce?void 0:Ce.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Fe("function"==typeof(null===(nr=null===(dn=null===(bt=null==li?void 0:li.cordova)||void 0===bt?void 0:bt.plugins)||void 0===dn?void 0:dn.browsertab)||void 0===nr?void 0:nr.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Fe("function"==typeof(null===(yi=null===(Rr=null==li?void 0:li.cordova)||void 0===Rr?void 0:Rr.InAppBrowser)||void 0===yi?void 0:yi.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const bt=yield Ce._initialize(p);yield bt.initialized(),bt.resetRedirect(),function zu(){Jo.clear()}(),yield Ce._originValidation(p);const dn=function jo(T,p,y=null){return{type:p,eventId:y,urlResponse:null,sessionId:_l(),postBody:null,tenantId:T.tenantId,error:Ne(T,"no-auth-event")}}(p,A,ie);yield function Au(T,p){return eo()._set(uo(T),p)}(p,dn);const nr=yield function Tu(T,p,y){return zl.apply(this,arguments)}(p,dn,y),Rr=yield function xc(T){const{cordova:p}=wa();return new Promise(y=>{p.plugins.browsertab.isAvailable(A=>{let ie=null;A?p.plugins.browsertab.openUrl(T):ie=p.InAppBrowser.open(T,function zi(T=(0,ge.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}()?"_blank":"_system","location=yes"),y(ie)})})}(nr);return function wu(T,p,y){return Iu.apply(this,arguments)}(p,bt,Rr)})()}_isIframeWebStorageSupported(p,y){throw new Error("Method not implemented.")}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Dc(T){return Ac.apply(this,arguments)}(p)),this.originValidationPromises[y]}attachCallbackListeners(p,y){const{universalLinks:A,handleOpenURL:ie,BuildInfo:Ce}=wa(),bt=setTimeout((0,g.Z)(function*(){yield Ga(p),y.onEvent(ou())}),500),dn=function(){var yi=(0,g.Z)(function*(li){clearTimeout(bt);const zo=yield Ga(p);let f=null;zo&&(null==li?void 0:li.url)&&(f=function ka(T,p){var y,A;const ie=function Kd(T){const p=xu(T),y=p.link?decodeURIComponent(p.link):void 0,A=xu(y).link,ie=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return xu(ie).link||ie||A||y||T}(p);if(ie.includes("/__/auth/callback")){const Ce=xu(ie),bt=Ce.firebaseError?function tl(T){try{return JSON.parse(T)}catch(p){return null}}(decodeURIComponent(Ce.firebaseError)):null,dn=null===(A=null===(y=null==bt?void 0:bt.code)||void 0===y?void 0:y.split("auth/"))||void 0===A?void 0:A[1],nr=dn?Ne(dn):null;return nr?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:nr,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:ie,postBody:null}}return null}(zo,li.url)),y.onEvent(f||ou())});return function(zo){return yi.apply(this,arguments)}}();void 0!==A&&"function"==typeof A.subscribe&&A.subscribe(null,dn);const nr=ie,Rr=`${Ce.packageName.toLowerCase()}://`;wa().handleOpenURL=function(){var yi=(0,g.Z)(function*(li){if(li.toLowerCase().startsWith(Rr)&&dn({url:li}),"function"==typeof nr)try{nr(li)}catch(zo){console.error(zo)}});return function(li){return yi.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=xi,this._completeRedirectFn=jr,this._overrideRedirectResult=hl}_initialize(p){var y=this;return(0,g.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,y,A,ie){var Ce=this;return(0,g.Z)(function*(){return yield Ce.selectUnderlyingResolver(),Ce.assertedUnderlyingResolver._openPopup(p,y,A,ie)})()}_openRedirect(p,y,A,ie){var Ce=this;return(0,g.Z)(function*(){return yield Ce.selectUnderlyingResolver(),Ce.assertedUnderlyingResolver._openRedirect(p,y,A,ie)})()}_isIframeWebStorageSupported(p,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,y)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return rc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Nu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,g.Z)(function*(){if(p.underlyingResolver)return;const y=yield function ic(){return au.apply(this,arguments)}();p.underlyingResolver=y?p.cordovaResolver:p.browserResolver})()}}function Pc(T){return T.unwrap()}function gd(T){return Oc(T)}function Oc(T){const{_tokenResponse:p}=T instanceof ge.ZR?T.customData:T;if(!p)return null;if(!(T instanceof ge.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return cl.credentialFromResult(T);const y=p.providerId;if(!y||"password"===y)return null;let A;switch(y){case"google.com":A=Bs;break;case"facebook.com":A=Us;break;case"github.com":A=Ro;break;case"twitter.com":A=Zo;break;default:const{oauthIdToken:ie,oauthAccessToken:Ce,oauthTokenSecret:bt,pendingToken:dn,nonce:nr}=p;return Ce||bt||ie||dn?dn?y.startsWith("saml.")?Ws._create(y,dn):St._fromParams({providerId:y,signInMethod:y,pendingToken:dn,idToken:ie,accessToken:Ce}):new Ms(y).credential({idToken:ie,accessToken:Ce,rawNonce:nr}):null}return T instanceof ge.ZR?A.credentialFromError(T):A.credentialFromResult(T)}function ha(T,p){return p.catch(y=>{throw y instanceof ge.ZR&&function Fh(T,p){var y;const A=null===(y=p.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===(null==p?void 0:p.code))p.resolver=new kc(T,function E(T,p){var y;const A=(0,ge.m9)(T),ie=p;return Fe(p.customData.operationType,A,"argument-error"),Fe(null===(y=ie.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,A,"argument-error"),b._fromError(A,ie)}(T,p));else if(A){const ie=Oc(p),Ce=p;ie&&(Ce.credential=ie,Ce.tenantId=A.tenantId||void 0,Ce.email=A.email||void 0,Ce.phoneNumber=A.phoneNumber||void 0)}}(T,y),y}).then(y=>{const ie=y.user;return{operationType:y.operationType,credential:gd(y),additionalUserInfo:mn(y),user:rl.getOrCreate(ie)}})}function md(T,p){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(T,p){const y=yield p;return{verificationId:y.verificationId,confirm:A=>ha(T,y.confirm(A))}})).apply(this,arguments)}class kc{constructor(p,y){this.resolver=y,this.auth=function Qd(T){return T.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ha(Pc(this.auth),this.resolver.resolveSignIn(p))}}class rl{constructor(p){this._delegate=p,this.multiFactor=function wt(T){const p=(0,ge.m9)(T);return qe.has(p)||qe.set(p,ke._fromUser(p)),qe.get(p)}(p)}static getOrCreate(p){return rl.USER_MAP.has(p)||rl.USER_MAP.set(p,new rl(p)),rl.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var y=this;return(0,g.Z)(function*(){return ha(y.auth,ni(y._delegate,p))})()}linkWithPhoneNumber(p,y){var A=this;return(0,g.Z)(function*(){return md(A.auth,function ia(T,p,y){return Gu.apply(this,arguments)}(A._delegate,p,y))})()}linkWithPopup(p){var y=this;return(0,g.Z)(function*(){return ha(y.auth,function Xa(T,p,y){return Vl.apply(this,arguments)}(y._delegate,p,Sa))})()}linkWithRedirect(p){var y=this;return(0,g.Z)(function*(){return yield Gi(ir(y.auth)),function Mt(T,p,y){return function zt(T,p,y){return kn.apply(this,arguments)}(T,p,y)}(y._delegate,p,Sa)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var y=this;return(0,g.Z)(function*(){return ha(y.auth,Yi(y._delegate,p))})()}reauthenticateWithPhoneNumber(p,y){return md(this.auth,function sa(T,p,y){return So.apply(this,arguments)}(this._delegate,p,y))}reauthenticateWithPopup(p){return ha(this.auth,function $a(T,p,y){return Qs.apply(this,arguments)}(this._delegate,p,Sa))}reauthenticateWithRedirect(p){var y=this;return(0,g.Z)(function*(){return yield Gi(ir(y.auth)),function Y(T,p,y){return function de(T,p,y){return je.apply(this,arguments)}(T,p,y)}(y._delegate,p,Sa)})()}sendEmailVerification(p){return function x(T,p){return S.apply(this,arguments)}(this._delegate,p)}unlink(p){var y=this;return(0,g.Z)(function*(){return yield function ki(T,p){return _i.apply(this,arguments)}(y._delegate,p),y})()}updateEmail(p){return function _e(T,p){return ue((0,ge.m9)(T),p,null)}(this._delegate,p)}updatePassword(p){return function ce(T,p){return ue((0,ge.m9)(T),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function yu(T,p){return fo.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Te(T,p){return ae.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,y){return function P(T,p,y){return z.apply(this,arguments)}(this._delegate,p,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rl.USER_MAP=new WeakMap;const il=Fe;let Fc=(()=>{class T{constructor(y,A){if(this.app=y,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ie}=y.options;il(ie,"invalid-api-key",{appName:y.name}),il(ie,"invalid-api-key",{appName:y.name});const Ce="undefined"!=typeof window?Sa:void 0;this._delegate=A.initialize({options:{persistence:xo(ie,y.name),popupRedirectResolver:Ce}}),this._delegate._updateErrorMap(nn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,A){!function bi(T,p,y){const A=ir(T);Fe(A._canInitEmulator,A,"emulator-config-failed"),Fe(/^https?:\/\//.test(p),A,"invalid-emulator-scheme");const ie=!!(null==y?void 0:y.disableWarnings),Ce=_s(p),{host:bt,port:dn}=function Wi(T){const p=_s(T),y=/(\/\/)?([^?#/]+)/.exec(T.substr(p.length));if(!y)return{host:"",port:null};const A=y[2].split("@").pop()||"",ie=/^(\[[^\]]+\])(:|$)/.exec(A);if(ie){const Ce=ie[1];return{host:Ce,port:ls(A.substr(Ce.length+1))}}{const[Ce,bt]=A.split(":");return{host:Ce,port:ls(bt)}}}(p);A.config.emulator={url:`${Ce}//${bt}${null===dn?"":`:${dn}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:bt,port:dn,protocol:Ce.replace(":",""),options:Object.freeze({disableWarnings:ie})}),ie||function Oi(){function T(){const p=document.createElement("p"),y=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}(this._delegate,y,A)}applyActionCode(y){return function he(T,p){return We.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return Mn(this._delegate,y)}confirmPasswordReset(y,A){return function G(T,p,y){return L.apply(this,arguments)}(this._delegate,y,A)}createUserWithEmailAndPassword(y,A){var ie=this;return(0,g.Z)(function*(){return ha(ie._delegate,function Ue(T,p,y){return rt.apply(this,arguments)}(ie._delegate,y,A))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function is(T,p){return l.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Kn(T,p){const y=co.parseLink(p);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,g.Z)(function*(){il(ca(),y._delegate,"operation-not-supported-in-this-environment");const A=yield function Lr(T,p){return Gr.apply(this,arguments)}(y._delegate,Sa);return A?ha(y._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function xl(T,p){ir(T)._logFramework(p)}(this._delegate,y)}onAuthStateChanged(y,A,ie){const{next:Ce,error:bt,complete:dn}=yd(y,A,ie);return this._delegate.onAuthStateChanged(Ce,bt,dn)}onIdTokenChanged(y,A,ie){const{next:Ce,error:bt,complete:dn}=yd(y,A,ie);return this._delegate.onIdTokenChanged(Ce,bt,dn)}sendSignInLinkToEmail(y,A){return function Sn(T,p,y){return vr.apply(this,arguments)}(this._delegate,y,A)}sendPasswordResetEmail(y,A){return function vo(T,p,y){return Q.apply(this,arguments)}(this._delegate,y,A||void 0)}setPersistence(y){var A=this;return(0,g.Z)(function*(){let ie;switch(function fd(T,p){Ml(Object.values(da).includes(p),T,"invalid-persistence-type"),(0,ge.b$)()?Ml(p!==da.SESSION,T,"unsupported-persistence-type"):(0,ge.UG)()?Ml(p===da.NONE,T,"unsupported-persistence-type"):nc()?Ml(p===da.NONE||p===da.LOCAL&&(0,ge.hl)(),T,"unsupported-persistence-type"):Ml(p===da.NONE||nl(),T,"unsupported-persistence-type")}(A._delegate,y),y){case da.SESSION:ie=xi;break;case da.LOCAL:ie=(yield et(Mr)._isAvailable())?Mr:pr;break;case da.NONE:ie=$e;break;default:return xe("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(ie)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return ha(this._delegate,function Ks(T){return ao.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return ha(this._delegate,Br(this._delegate,y))}signInWithCustomToken(y){return ha(this._delegate,function ts(T,p){return kr.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,A){return ha(this._delegate,function Ht(T,p,y){return Br((0,ge.m9)(T),Io.credential(p,y))}(this._delegate,y,A))}signInWithEmailLink(y,A){return ha(this._delegate,function ti(T,p,y){return gi.apply(this,arguments)}(this._delegate,y,A))}signInWithPhoneNumber(y,A){return md(this._delegate,function Co(T,p,y){return Ea.apply(this,arguments)}(this._delegate,y,A))}signInWithPopup(y){var A=this;return(0,g.Z)(function*(){return il(ca(),A._delegate,"operation-not-supported-in-this-environment"),ha(A._delegate,function so(T,p,y){return Ba.apply(this,arguments)}(A._delegate,y,Sa))})()}signInWithRedirect(y){var A=this;return(0,g.Z)(function*(){return il(ca(),A._delegate,"operation-not-supported-in-this-environment"),yield Gi(A._delegate),function Ul(T,p,y){return function Ma(T,p,y){return V.apply(this,arguments)}(T,p,y)}(A._delegate,y,Sa)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function K(T,p){return be.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=da,T})();function yd(T,p,y){let A=T;"function"!=typeof T&&({next:A,error:p,complete:y}=T);const ie=A;return{next:bt=>ie(bt&&rl.getOrCreate(bt)),error:p,complete:y}}function xo(T,p){const y=function lu(T,p){const y=Ou();if(!y)return[];const A=ht(hd,T,p);switch(y.getItem(A)){case da.NONE:return[$e];case da.LOCAL:return[Mr,xi];case da.SESSION:return[xi];default:return[]}}(T,p);if("undefined"!=typeof self&&!y.includes(Mr)&&y.push(Mr),"undefined"!=typeof window)for(const A of[pr,xi])y.includes(A)||y.push(A);return y.includes($e)||y.push($e),y}class sl{constructor(){this.providerId="phone",this._delegate=new cl(Pc(Z.Z.auth()))}static credential(p,y){return cl.credential(p,y)}verifyPhoneNumber(p,y){return this._delegate.verifyPhoneNumber(p,y)}unwrap(){return this._delegate}}sl.PHONE_SIGN_IN_METHOD=cl.PHONE_SIGN_IN_METHOD,sl.PROVIDER_ID=cl.PROVIDER_ID;const za=Fe;class ku{constructor(p,y,A=Z.Z.app()){var ie;za(null===(ie=A.options)||void 0===ie?void 0:ie.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Xt(p,y,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Lc(T){T.INTERNAL.registerComponent(new gt.wA("auth-compat",p=>{const y=p.getProvider("app-compat").getImmediate(),A=p.getProvider("auth");return new Fc(y,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Io,FacebookAuthProvider:Us,GithubAuthProvider:Ro,GoogleAuthProvider:Bs,OAuthProvider:Ms,SAMLAuthProvider:$s,PhoneAuthProvider:sl,PhoneMultiFactorGenerator:Qu,RecaptchaVerifier:ku,TwitterAuthProvider:Zo,Auth:Fc,AuthCredential:Vi,Error:ge.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.3.0")}(Z.Z)},6197:(jn,Dt,H)=>{H.d(Dt,{N8:()=>T,jM:()=>Go,iH:()=>eo,t8:()=>Mc});var g=H(5861),Z=H(9681),ge=H(4859),le=H(2090),Ye=H(1877);const Xe="@firebase/database";let Qe="";class Pe{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,d){null==d?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,le.Wl)(d))}get(c){const d=this.domStorage_.getItem(this.prefixedName_(c));return null==d?null:(0,le.cI)(d)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class Me{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,d){null==d?delete this.cache_[c]:this.cache_[c]=d}get(c){return(0,le.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const Et=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){const c=window[f];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new Pe(c)}}catch(c){}return new Me},pn=Et("localStorage"),vt=Et("sessionStorage"),nn=new Ye.Yd("@firebase/database"),bn=function(){let f=1;return function(){return f++}}(),Pt=function(f){const c=(0,le.dS)(f),d=new le.gQ;d.update(c);const v=d.digest();return le.US.encodeByteArray(v)},Jt=function(...f){let c="";for(let d=0;d<f.length;d++){const v=f[d];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?c+=Jt.apply(null,v):c+="object"==typeof v?(0,le.Wl)(v):v,c+=" "}return c};let Ln=null,un=!0;const Ne=function(...f){if(!0===un&&(un=!1,null===Ln&&!0===vt.get("logging_enabled")&&function(f,c){(0,le.hu)(!c||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(nn.logLevel=Ye.in.VERBOSE,Ln=nn.log.bind(nn),c&&vt.set("logging_enabled",!0)):"function"==typeof f?Ln=f:(Ln=null,vt.remove("logging_enabled"))}(!0)),Ln){const c=Jt.apply(null,f);Ln(c)}},ot=function(f){return function(...c){Ne(f,...c)}},Kt=function(...f){const c="FIREBASE INTERNAL ERROR: "+Jt(...f);nn.error(c)},Ut=function(...f){const c=`FIREBASE FATAL ERROR: ${Jt(...f)}`;throw nn.error(c),new Error(c)},Fe=function(...f){const c="FIREBASE WARNING: "+Jt(...f);nn.warn(c)},Oe=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},et="[MIN_NAME]",Nt="[MAX_NAME]",At=function(f,c){if(f===c)return 0;if(f===et||c===Nt)return-1;if(c===et||f===Nt)return 1;{const d=Wt(f),v=Wt(c);return null!==d?null!==v?d-v==0?f.length-c.length:d-v:-1:null!==v?1:f<c?-1:1}},on=function(f,c){return f===c?0:f<c?-1:1},wn=function(f,c){if(c&&f in c)return c[f];throw new Error("Missing required key ("+f+") in object: "+(0,le.Wl)(c))},Xn=function(f){if("object"!=typeof f||null===f)return(0,le.Wl)(f);const c=[];for(const v in f)c.push(v);c.sort();let d="{";for(let v=0;v<c.length;v++)0!==v&&(d+=","),d+=(0,le.Wl)(c[v]),d+=":",d+=Xn(f[c[v]]);return d+="}",d},Jn=function(f,c){const d=f.length;if(d<=c)return[f];const v=[];for(let M=0;M<d;M+=c)v.push(f.substring(M,M+c>d?d:M+c));return v};function fn(f,c){for(const d in f)f.hasOwnProperty(d)&&c(d,f[d])}const gr=function(f){(0,le.hu)(!Oe(f),"Invalid JSON number");const v=1023;let M,j,re,Ie,Ze;0===f?(j=0,re=0,M=1/f==-1/0?1:0):(M=f<0,(f=Math.abs(f))>=Math.pow(2,1-v)?(Ie=Math.min(Math.floor(Math.log(f)/Math.LN2),v),j=Ie+v,re=Math.round(f*Math.pow(2,52-Ie)-Math.pow(2,52))):(j=0,re=Math.round(f/Math.pow(2,-1074))));const lt=[];for(Ze=52;Ze;Ze-=1)lt.push(re%2?1:0),re=Math.floor(re/2);for(Ze=11;Ze;Ze-=1)lt.push(j%2?1:0),j=Math.floor(j/2);lt.push(M?1:0),lt.reverse();const tn=lt.join("");let vn="";for(Ze=0;Ze<64;Ze+=8){let Dn=parseInt(tn.substr(Ze,8),2).toString(16);1===Dn.length&&(Dn="0"+Dn),vn+=Dn}return vn.toLowerCase()},st=new RegExp("^-?(0*)\\d{1,10}$"),Wt=function(f){if(st.test(f)){const c=Number(f);if(c>=-2147483648&&c<=2147483647)return c}return null},xt=function(f){try{f()}catch(c){setTimeout(()=>{throw Fe("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},Un=function(f,c){const d=setTimeout(f,c);return"number"==typeof d&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(d):"object"==typeof d&&d.unref&&d.unref(),d};class Yn{constructor(c,d){this.appName_=c,this.appCheckProvider=d,this.appCheck=null==d?void 0:d.getImmediate({optional:!0}),this.appCheck||null==d||d.get().then(v=>this.appCheck=v)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((d,v)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){var d;null===(d=this.appCheckProvider)||void 0===d||d.get().then(v=>v.addTokenListener(c))}notifyForInvalidToken(){Fe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class tr{constructor(c,d,v){this.appName_=c,this.firebaseOptions_=d,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(M=>this.auth_=M)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(d=>d&&"auth/token-not-initialized"===d.code?(Ne("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)):new Promise((d,v)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(d=>d.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(d=>d.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fe(c)}}let Zr=(()=>{class f{constructor(d){this.accessToken=d}getToken(d){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(d){d(this.accessToken)}removeTokenChangeListener(d){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const rs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ct="websocket",Bt="long_polling";class Gt{constructor(c,d,v,M,j=!1,re="",Ie=!1){this.secure=d,this.namespace=v,this.webSocketOnly=M,this.nodeAdmin=j,this.persistenceKey=re,this.includeNamespaceInQueryParams=Ie,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pn.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&pn.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Bn(f,c,d){let v;if((0,le.hu)("string"==typeof c,"typeof type must == string"),(0,le.hu)("object"==typeof d,"typeof params must == object"),c===ct)v=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(c!==Bt)throw new Error("Unknown connection type: "+c);v=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function yn(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(d.ns=f.namespace);const M=[];return fn(d,(j,re)=>{M.push(j+"="+re)}),v+M.join("&")}class qr{constructor(){this.counters_={}}incrementCounter(c,d=1){(0,le.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=d}get(){return(0,le.p$)(this.counters_)}}const Or={},dr={};function os(f){const c=f.toString();return Or[c]||(Or[c]=new qr),Or[c]}class ui{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,d){this.closeAfterResponse=c,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,d){for(this.pendingResponses[c]=d;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let M=0;M<v.length;++M)v[M]&&xt(()=>{this.onMessage_(v[M])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class De{constructor(c,d,v,M,j,re,Ie){this.connId=c,this.repoInfo=d,this.applicationId=v,this.appCheckToken=M,this.authToken=j,this.transportSessionId=re,this.lastSessionId=Ie,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ot(c),this.stats_=os(d),this.urlFn=Ze=>(this.appCheckToken&&(Ze.ac=this.appCheckToken),Bn(d,Bt,Ze))}open(c,d){this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new ui(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,le.Yr)()||"complete"===document.readyState)f();else{let c=!1;const d=function(){document.body?c||(c=!0,f()):setTimeout(d,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&d()}),window.attachEvent("onload",d))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pt((...j)=>{const[re,Ie,Ze,lt,tn]=j;if(this.incrementIncomingBytes_(j),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===re)this.id=Ie,this.password=Ze;else{if("close"!==re)throw new Error("Unrecognized command received: "+re);Ie?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(Ie,()=>{this.onClosed_()})):this.onClosed_()}},(...j)=>{const[re,Ie]=j;this.incrementIncomingBytes_(j),this.myPacketOrderer.handleResponse(re,Ie)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&rs.test(location.hostname)&&(v.r="f");const M=this.urlFn(v);this.log_("Connecting via long-poll to "+M),this.scriptTagHolder.addTag(M,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){De.forceAllow_=!0}static forceDisallow(){De.forceDisallow_=!0}static isAvailable(){return!((0,le.Yr)()||!De.forceAllow_&&(De.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const d=(0,le.Wl)(c);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const v=(0,le.h$)(d),M=Jn(v,1840);for(let j=0;j<M.length;j++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,M.length,M[j]),this.curSegmentNum++}addDisconnectPingFrame(c,d){if((0,le.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=c,v.pw=d,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const d=(0,le.Wl)(c).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)}}class pt{constructor(c,d,v,M){if(this.onDisconnect=v,this.urlFn=M,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,le.Yr)())this.commandCB=c,this.onMessageCB=d;else{this.uniqueCallbackIdentifier=bn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=d,this.myIFrame=pt.createIFrame_();let j="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(j='<script>document.domain="'+document.domain+'";<\/script>');const re="<html><body>"+j+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(re),this.myIFrame.doc.close()}catch(Ie){Ne("frame writing exception"),Ie.stack&&Ne(Ie.stack),Ne(Ie)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||Ne("No IE domain setting required")}catch(d){const v=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,d){for(this.myID=c,this.myPW=d,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let d=this.urlFn(c),v="",M=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const re=this.pendingSegs.shift();v=v+"&seg"+M+"="+re.seg+"&ts"+M+"="+re.ts+"&d"+M+"="+re.d,M++}return d+=v,this.addLongPollTag_(d,this.currentSerial),!0}return!1}enqueueSegment(c,d,v){this.pendingSegs.push({seg:c,ts:d,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(c,d){this.outstandingRequests.add(d);const v=()=>{this.outstandingRequests.delete(d),this.newRequest_()},M=setTimeout(v,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(M),v()})}addTag(c,d){(0,le.Yr)()?this.doNodeLongPoll(c,d):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=c,v.onload=v.onreadystatechange=function(){const M=v.readyState;(!M||"loaded"===M||"complete"===M)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),d())},v.onerror=()=>{Ne("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let Hn=null;"undefined"!=typeof MozWebSocket?Hn=MozWebSocket:"undefined"!=typeof WebSocket&&(Hn=WebSocket);let Kr=(()=>{class f{constructor(d,v,M,j,re,Ie,Ze){this.connId=d,this.applicationId=M,this.appCheckToken=j,this.authToken=re,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ot(this.connId),this.stats_=os(v),this.connURL=f.connectionURL_(v,Ie,Ze,j,M),this.nodeAdmin=v.nodeAdmin}static connectionURL_(d,v,M,j,re){const Ie={v:"5"};return!(0,le.Yr)()&&"undefined"!=typeof location&&location.hostname&&rs.test(location.hostname)&&(Ie.r="f"),v&&(Ie.s=v),M&&(Ie.ls=M),j&&(Ie.ac=j),re&&(Ie.p=re),Bn(d,ct,Ie)}open(d,v){this.onDisconnect=v,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pn.set("previous_websocket_failure",!0);try{let M;if((0,le.Yr)()){M={headers:{"User-Agent":`Firebase/5/${Qe}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(M.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(M.headers["X-Firebase-AppCheck"]=this.appCheckToken);const re=process.env,Ie=0===this.connURL.indexOf("wss://")?re.HTTPS_PROXY||re.https_proxy:re.HTTP_PROXY||re.http_proxy;Ie&&(M.proxy={origin:Ie})}this.mySock=new Hn(this.connURL,[],M)}catch(M){this.log_("Error instantiating WebSocket.");const j=M.message||M.data;return j&&this.log_(j),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=M=>{this.handleIncomingFrame(M)},this.mySock.onerror=M=>{this.log_("WebSocket error.  Closing connection.");const j=M.message||M.data;j&&this.log_(j),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let d=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const M=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);M&&M.length>1&&parseFloat(M[1])<4.4&&(d=!0)}return!d&&null!==Hn&&!f.forceDisallow_}static previouslyFailed(){return pn.isInMemoryStorage||!0===pn.get("previous_websocket_failure")}markConnectionHealthy(){pn.remove("previous_websocket_failure")}appendFrame_(d){if(this.frames.push(d),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const M=(0,le.cI)(v);this.onMessage(M)}}handleNewFrameCount_(d){this.totalFrames=d,this.frames=[]}extractFrameCount_(d){if((0,le.hu)(null===this.frames,"We already have a frame buffer"),d.length<=6){const v=Number(d);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),d}handleIncomingFrame(d){if(null===this.mySock)return;const v=d.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const M=this.extractFrameCount_(v);null!==M&&this.appendFrame_(M)}}send(d){this.resetKeepAlive();const v=(0,le.Wl)(d);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const M=Jn(v,16384);M.length>1&&this.sendString_(String(M.length));for(let j=0;j<M.length;j++)this.sendString_(M[j])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(d){try{this.mySock.send(d)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),zi=(()=>{class f{constructor(d){this.initTransports_(d)}static get ALL_TRANSPORTS(){return[De,Kr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(d){const v=Kr&&Kr.isAvailable();let M=v&&!Kr.previouslyFailed();if(d.webSocketOnly&&(v||Fe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),M=!0),M)this.transports_=[Kr];else{const j=this.transports_=[];for(const re of f.ALL_TRANSPORTS)re&&re.isAvailable()&&j.push(re);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class Vi{constructor(c,d,v,M,j,re,Ie,Ze,lt,tn){this.id=c,this.repoInfo_=d,this.applicationId_=v,this.appCheckToken_=M,this.authToken_=j,this.onMessage_=re,this.onReady_=Ie,this.onDisconnect_=Ze,this.onKill_=lt,this.lastSessionId=tn,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ot("c:"+this.id+":"),this.transportManager_=new zi(d),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(d,v)},Math.floor(0));const M=c.healthyTimeout||0;M>0&&(this.healthyTimeout_=Un(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(M)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return d=>{c===this.conn_?this.onConnectionLost_(d):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return d=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(d):c===this.secondaryConn_?this.onSecondaryMessageReceived_(d):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const d=c.t;"a"===d?this.upgradeIfSecondaryHealthy_():"r"===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const d=wn("t",c),v=wn("d",c);if("c"===d)this.onSecondaryControl_(v);else{if("d"!==d)throw new Error("Unknown protocol layer: "+d);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const d=wn("t",c),v=wn("d",c);"c"===d?this.onControl_(v):"d"===d&&this.onDataMessage_(v)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const d=wn("t",c);if("d"in c){const v=c.d;if("h"===d)this.onHandshake_(v);else if("n"===d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let M=0;M<this.pendingDataMessages.length;++M)this.onDataMessage_(this.pendingDataMessages[M]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===d?this.onConnectionShutdown_(v):"r"===d?this.onReset_(v):"e"===d?Kt("Server Error: "+v):"o"===d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Kt("Unknown control packet command: "+d)}}onHandshake_(c){const d=c.ts,v=c.v,M=c.h;this.sessionId=c.s,this.repoInfo_.host=M,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),"5"!==v&&Fe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,v),Un(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,d){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Un(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qi{put(c,d,v,M){}merge(c,d,v,M){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,d,v){}onDisconnectMerge(c,d,v){}onDisconnectCancel(c,d){}reportStats(c){}}class Ur{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,le.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...d){if(Array.isArray(this.listeners_[c])){const v=[...this.listeners_[c]];for(let M=0;M<v.length;M++)v[M].callback.apply(v[M].context,d)}}on(c,d,v){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:d,context:v});const M=this.getInitialEvent(c);M&&d.apply(v,M)}off(c,d,v){this.validateEventType_(c);const M=this.listeners_[c]||[];for(let j=0;j<M.length;j++)if(M[j].callback===d&&(!v||v===M[j].context))return void M.splice(j,1)}validateEventType_(c){(0,le.hu)(this.allowedEvents_.find(d=>d===c),"Unknown event: "+c)}}class Is extends Ur{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,le.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Is}getInitialEvent(c){return(0,le.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}class Cr{constructor(c,d){if(void 0===d){this.pieces_=c.split("/");let v=0;for(let M=0;M<this.pieces_.length;M++)this.pieces_[M].length>0&&(this.pieces_[v]=this.pieces_[M],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=d}toString(){let c="";for(let d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(c+="/"+this.pieces_[d]);return c||"/"}}function mr(){return new Cr("")}function yr(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function Qi(f){return f.pieces_.length-f.pieceNum_}function zr(f){let c=f.pieceNum_;return c<f.pieces_.length&&c++,new Cr(f.pieces_,c)}function Si(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Ki(f,c=0){return f.pieces_.slice(f.pieceNum_+c)}function cs(f){if(f.pieceNum_>=f.pieces_.length)return null;const c=[];for(let d=f.pieceNum_;d<f.pieces_.length-1;d++)c.push(f.pieces_[d]);return new Cr(c,0)}function Yr(f,c){const d=[];for(let v=f.pieceNum_;v<f.pieces_.length;v++)d.push(f.pieces_[v]);if(c instanceof Cr)for(let v=c.pieceNum_;v<c.pieces_.length;v++)d.push(c.pieces_[v]);else{const v=c.split("/");for(let M=0;M<v.length;M++)v[M].length>0&&d.push(v[M])}return new Cr(d,0)}function Wr(f){return f.pieceNum_>=f.pieces_.length}function fs(f,c){const d=yr(f),v=yr(c);if(null===d)return c;if(d===v)return fs(zr(f),zr(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+f+")")}function ps(f,c){if(Qi(f)!==Qi(c))return!1;for(let d=f.pieceNum_,v=c.pieceNum_;d<=f.pieces_.length;d++,v++)if(f.pieces_[d]!==c.pieces_[v])return!1;return!0}function Di(f,c){let d=f.pieceNum_,v=c.pieceNum_;if(Qi(f)>Qi(c))return!1;for(;d<f.pieces_.length;){if(f.pieces_[d]!==c.pieces_[v])return!1;++d,++v}return!0}class ko{constructor(c,d){this.errorPrefix_=d,this.parts_=Ki(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,le.ug)(this.parts_[v]);Xi(this)}}function Xi(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ct(f))}function Ct(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class dt extends Ur{constructor(){let c,d;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(d="visibilitychange",c="hidden"):void 0!==document.mozHidden?(d="mozvisibilitychange",c="mozHidden"):void 0!==document.msHidden?(d="msvisibilitychange",c="msHidden"):void 0!==document.webkitHidden&&(d="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,d&&document.addEventListener(d,()=>{const v=!document[c];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new dt}getInitialEvent(c){return(0,le.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const St=1e3;let Es,ds=(()=>{class f extends qi{constructor(d,v,M,j,re,Ie,Ze,lt){if(super(),this.repoInfo_=d,this.applicationId_=v,this.onDataUpdate_=M,this.onConnectStatus_=j,this.onServerInfoUpdate_=re,this.authTokenProvider_=Ie,this.appCheckTokenProvider_=Ze,this.authOverride_=lt,this.id=f.nextPersistentConnectionId_++,this.log_=ot("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=St,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,lt&&!(0,le.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dt.getInstance().on("visible",this.onVisible_,this),-1===d.host.indexOf("fblocal")&&Is.getInstance().on("online",this.onOnline_,this)}sendRequest(d,v,M){const j=++this.requestNumber_,re={r:j,a:d,b:v};this.log_((0,le.Wl)(re)),(0,le.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(re),M&&(this.requestCBHash_[j]=M)}get(d){this.initConnection_();const v=new le.BH,M={p:d._path.toString(),q:d._queryObject};return this.outstandingGets_.push({action:"g",request:M,onComplete:Ie=>{const Ze=Ie.d;"ok"===Ie.s?v.resolve(Ze):v.reject(Ze)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(d,v,M,j){this.initConnection_();const re=d._queryIdentifier,Ie=d._path.toString();this.log_("Listen called for "+Ie+" "+re),this.listens.has(Ie)||this.listens.set(Ie,new Map),(0,le.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,le.hu)(!this.listens.get(Ie).has(re),"listen() called twice for same path/queryId.");const Ze={onComplete:j,hashFn:v,query:d,tag:M};this.listens.get(Ie).set(re,Ze),this.connected_&&this.sendListen_(Ze)}sendGet_(d){const v=this.outstandingGets_[d];this.sendRequest("g",v.request,M=>{delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(M)})}sendListen_(d){const v=d.query,M=v._path.toString(),j=v._queryIdentifier;this.log_("Listen on "+M+" for "+j);const re={p:M};d.tag&&(re.q=v._queryObject,re.t=d.tag),re.h=d.hashFn(),this.sendRequest("q",re,Ze=>{const lt=Ze.d,tn=Ze.s;f.warnOnListenWarnings_(lt,v),(this.listens.get(M)&&this.listens.get(M).get(j))===d&&(this.log_("listen response",Ze),"ok"!==tn&&this.removeListen_(M,j),d.onComplete&&d.onComplete(tn,lt))})}static warnOnListenWarnings_(d,v){if(d&&"object"==typeof d&&(0,le.r3)(d,"w")){const M=(0,le.DV)(d,"w");if(Array.isArray(M)&&~M.indexOf("no_index")){const j='".indexOn": "'+v._queryParams.getIndex().toString()+'"',re=v._path.toString();Fe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${j} at ${re} to your security rules for better performance.`)}}}refreshAuthToken(d){this.authToken_=d,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(d)}reduceReconnectDelayIfAdminCredential_(d){(d&&40===d.length||(0,le.GJ)(d))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(d){this.appCheckToken_=d,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const d=this.authToken_,v=(0,le.w9)(d)?"auth":"gauth",M={cred:d};null===this.authOverride_?M.noauth=!0:"object"==typeof this.authOverride_&&(M.authvar=this.authOverride_),this.sendRequest(v,M,j=>{const re=j.s,Ie=j.d||"error";this.authToken_===d&&("ok"===re?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(re,Ie))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},d=>{const v=d.s,M=d.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,M)})}unlisten(d,v){const M=d._path.toString(),j=d._queryIdentifier;this.log_("Unlisten called for "+M+" "+j),(0,le.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(M,j)&&this.connected_&&this.sendUnlisten_(M,j,d._queryObject,v)}sendUnlisten_(d,v,M,j){this.log_("Unlisten on "+d+" for "+v);const re={p:d};j&&(re.q=M,re.t=j),this.sendRequest("n",re)}onDisconnectPut(d,v,M){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",d,v,M):this.onDisconnectRequestQueue_.push({pathString:d,action:"o",data:v,onComplete:M})}onDisconnectMerge(d,v,M){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",d,v,M):this.onDisconnectRequestQueue_.push({pathString:d,action:"om",data:v,onComplete:M})}onDisconnectCancel(d,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",d,null,v):this.onDisconnectRequestQueue_.push({pathString:d,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(d,v,M,j){const re={p:v,d:M};this.log_("onDisconnect "+d,re),this.sendRequest(d,re,Ie=>{j&&setTimeout(()=>{j(Ie.s,Ie.d)},Math.floor(0))})}put(d,v,M,j){this.putInternal("p",d,v,M,j)}merge(d,v,M,j){this.putInternal("m",d,v,M,j)}putInternal(d,v,M,j,re){this.initConnection_();const Ie={p:v,d:M};void 0!==re&&(Ie.h=re),this.outstandingPuts_.push({action:d,request:Ie,onComplete:j}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(d){const v=this.outstandingPuts_[d].action,M=this.outstandingPuts_[d].request,j=this.outstandingPuts_[d].onComplete;this.outstandingPuts_[d].queued=this.connected_,this.sendRequest(v,M,re=>{this.log_(v+" response",re),delete this.outstandingPuts_[d],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),j&&j(re.s,re.d)})}reportStats(d){if(this.connected_){const v={c:d};this.log_("reportStats",v),this.sendRequest("s",v,M=>{"ok"!==M.s&&this.log_("reportStats","Error sending stats: "+M.d)})}}onDataMessage_(d){if("r"in d){this.log_("from server: "+(0,le.Wl)(d));const v=d.r,M=this.requestCBHash_[v];M&&(delete this.requestCBHash_[v],M(d.b))}else{if("error"in d)throw"A server-side error has occurred: "+d.error;"a"in d&&this.onDataPush_(d.a,d.b)}}onDataPush_(d,v){this.log_("handleServerMessage",d,v),"d"===d?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===d?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===d?this.onListenRevoked_(v.p,v.q):"ac"===d?this.onAuthRevoked_(v.s,v.d):"apc"===d?this.onAppCheckRevoked_(v.s,v.d):"sd"===d?this.onSecurityDebugPacket_(v):Kt("Unrecognized action received from server: "+(0,le.Wl)(d)+"\nAre you using the latest client?")}onReady_(d,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(d),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(d){(0,le.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(d))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(d){d&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=St,this.realtime_||this.scheduleConnect_(0)),this.visible_=d}onOnline_(d){d?(this.log_("Browser went online."),this.reconnectDelay_=St,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=St),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const d=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-d);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var d=this;return(0,g.Z)(function*(){if(d.shouldReconnect_()){d.log_("Making a connection attempt"),d.lastConnectionAttemptTime_=(new Date).getTime(),d.lastConnectionEstablishedTime_=null;const v=d.onDataMessage_.bind(d),M=d.onReady_.bind(d),j=d.onRealtimeDisconnect_.bind(d),re=d.id+":"+f.nextConnectionId_++,Ie=d.lastSessionId;let Ze=!1,lt=null;const tn=function(){lt?lt.close():(Ze=!0,j())};d.realtime_={close:tn,sendRequest:function(fr){(0,le.hu)(lt,"sendRequest call when we're not connected not allowed."),lt.sendRequest(fr)}};const Dn=d.forceTokenRefresh_;d.forceTokenRefresh_=!1;try{const[fr,ci]=yield Promise.all([d.authTokenProvider_.getToken(Dn),d.appCheckTokenProvider_.getToken(Dn)]);Ze?Ne("getToken() completed but was canceled"):(Ne("getToken() completed. Creating connection."),d.authToken_=fr&&fr.accessToken,d.appCheckToken_=ci&&ci.token,lt=new Vi(re,d.repoInfo_,d.applicationId_,d.appCheckToken_,d.authToken_,v,M,j,ws=>{Fe(ws+" ("+d.repoInfo_.toString()+")"),d.interrupt("server_kill")},Ie))}catch(fr){d.log_("Failed to get token: "+fr),Ze||(d.repoInfo_.nodeAdmin&&Fe(fr),tn())}}})()}interrupt(d){Ne("Interrupting connection for reason: "+d),this.interruptReasons_[d]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(d){Ne("Resuming connection for reason: "+d),delete this.interruptReasons_[d],(0,le.xb)(this.interruptReasons_)&&(this.reconnectDelay_=St,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(d){const v=d-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let d=0;d<this.outstandingPuts_.length;d++){const v=this.outstandingPuts_[d];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[d],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(d,v){let M;M=v?v.map(re=>Xn(re)).join("$"):"default";const j=this.removeListen_(d,M);j&&j.onComplete&&j.onComplete("permission_denied")}removeListen_(d,v){const M=new Cr(d).toString();let j;if(this.listens.has(M)){const re=this.listens.get(M);j=re.get(v),re.delete(v),0===re.size&&this.listens.delete(M)}else j=void 0;return j}onAuthRevoked_(d,v){Ne("Auth token revoked: "+d+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===d||"permission_denied"===d)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(d,v){Ne("App check token revoked: "+d+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===d||"permission_denied"===d)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(d){this.securityDebugCallback_?this.securityDebugCallback_(d):"msg"in d&&console.log("FIREBASE: "+d.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const d of this.listens.values())for(const v of d.values())this.sendListen_(v);for(let d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){const d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(let d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)}sendConnectStats_(){const d={};let v="js";(0,le.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),d["sdk."+v+"."+Qe.replace(/\./g,"-")]=1,(0,le.uI)()?d["framework.cordova"]=1:(0,le.b$)()&&(d["framework.reactnative"]=1),this.reportStats(d)}shouldReconnect_(){const d=Is.getInstance().currentlyOnline();return(0,le.xb)(this.interruptReasons_)&&d}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class ei{constructor(c,d){this.name=c,this.node=d}static Wrap(c,d){return new ei(c,d)}}class as{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,d){const v=new ei(et,c),M=new ei(et,d);return 0!==this.compare(v,M)}minPost(){return ei.MIN}}class Ko extends as{static get __EMPTY_NODE(){return Es}static set __EMPTY_NODE(c){Es=c}compare(c,d){return At(c.name,d.name)}isDefinedOn(c){throw(0,le.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,d){return!1}minPost(){return ei.MIN}maxPost(){return new ei(Nt,Es)}makePost(c,d){return(0,le.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new ei(c,Es)}toString(){return".key"}}const gs=new Ko;class co{constructor(c,d,v,M,j=null){this.isReverse_=M,this.resultGenerator_=j,this.nodeStack_=[];let re=1;for(;!c.isEmpty();)if(re=d?v(c.key,d):1,M&&(re*=-1),re<0)c=this.isReverse_?c.left:c.right;else{if(0===re){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let d,c=this.nodeStack_.pop();if(d=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return d}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let Us,Cs=(()=>{class f{constructor(d,v,M,j,re){this.key=d,this.value=v,this.color=null!=M?M:f.RED,this.left=null!=j?j:Ni.EMPTY_NODE,this.right=null!=re?re:Ni.EMPTY_NODE}copy(d,v,M,j,re){return new f(null!=d?d:this.key,null!=v?v:this.value,null!=M?M:this.color,null!=j?j:this.left,null!=re?re:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)}reverseTraversal(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(d,v,M){let j=this;const re=M(d,j.key);return j=re<0?j.copy(null,null,null,j.left.insert(d,v,M),null):0===re?j.copy(null,v,null,null,null):j.copy(null,null,null,null,j.right.insert(d,v,M)),j.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ni.EMPTY_NODE;let d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.removeMin_(),null),d.fixUp_()}remove(d,v){let M,j;if(M=this,v(d,M.key)<0)!M.left.isEmpty()&&!M.left.isRed_()&&!M.left.left.isRed_()&&(M=M.moveRedLeft_()),M=M.copy(null,null,null,M.left.remove(d,v),null);else{if(M.left.isRed_()&&(M=M.rotateRight_()),!M.right.isEmpty()&&!M.right.isRed_()&&!M.right.left.isRed_()&&(M=M.moveRedRight_()),0===v(d,M.key)){if(M.right.isEmpty())return Ni.EMPTY_NODE;j=M.right.min_(),M=M.copy(j.key,j.value,null,null,M.right.removeMin_())}M=M.copy(null,null,null,null,M.right.remove(d,v))}return M.fixUp_()}isRed_(){return this.color}fixUp_(){let d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d}moveRedLeft_(){let d=this.colorFlip_();return d.right.left.isRed_()&&(d=d.copy(null,null,null,null,d.right.rotateRight_()),d=d.rotateLeft_(),d=d.colorFlip_()),d}moveRedRight_(){let d=this.colorFlip_();return d.left.left.isRed_()&&(d=d.rotateRight_(),d=d.colorFlip_()),d}rotateLeft_(){const d=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)}rotateRight_(){const d=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)}colorFlip_(){const d=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,v)}checkMaxDepth_(){const d=this.check_();return Math.pow(2,d)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class Ni{constructor(c,d=Ni.EMPTY_NODE){this.comparator_=c,this.root_=d}insert(c,d){return new Ni(this.comparator_,this.root_.insert(c,d,this.comparator_).copy(null,null,Cs.BLACK,null,null))}remove(c){return new Ni(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,Cs.BLACK,null,null))}get(c){let d,v=this.root_;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d)return v.value;d<0?v=v.left:d>0&&(v=v.right)}return null}getPredecessorKey(c){let d,v=this.root_,M=null;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d){if(v.left.isEmpty())return M?M.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}d<0?v=v.left:d>0&&(M=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new co(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,d){return new co(this.root_,c,this.comparator_,!1,d)}getReverseIteratorFrom(c,d){return new co(this.root_,c,this.comparator_,!0,d)}getReverseIterator(c){return new co(this.root_,null,this.comparator_,!0,c)}}function no(f,c){return At(f.name,c.name)}function Ms(f,c){return At(f,c)}Ni.EMPTY_NODE=new class Io{copy(c,d,v,M,j){return this}insert(c,d,v){return new Cs(c,d,null)}remove(c,d){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ro=function(f){return"number"==typeof f?"number:"+gr(f):"string:"+f},qs=function(f){if(f.isLeafNode()){const c=f.val();(0,le.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,le.r3)(c,".sv"),"Priority must be a string or number.")}else(0,le.hu)(f===Us||f.isEmpty(),"priority of unexpected type.");(0,le.hu)(f===Us||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ws,$s,Zo,bs=(()=>{class f{constructor(d,v=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=d,this.priorityNode_=v,this.lazyHash_=null,(0,le.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qs(this.priorityNode_)}static set __childrenNodeConstructor(d){Ws=d}static get __childrenNodeConstructor(){return Ws}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(d){return new f(this.value_,d)}getImmediateChild(d){return".priority"===d?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(d){return Wr(d)?this:".priority"===yr(d)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(d,v){return null}updateImmediateChild(d,v){return".priority"===d?this.updatePriority(v):v.isEmpty()&&".priority"!==d?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,v).updatePriority(this.priorityNode_)}updateChild(d,v){const M=yr(d);return null===M?v:v.isEmpty()&&".priority"!==M?this:((0,le.hu)(".priority"!==M||1===Qi(d),".priority must be the last token in a path"),this.updateImmediateChild(M,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(zr(d),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(d,v){return!1}val(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let d="";this.priorityNode_.isEmpty()||(d+="priority:"+Ro(this.priorityNode_.val())+":");const v=typeof this.value_;d+=v+":",d+="number"===v?gr(this.value_):this.value_,this.lazyHash_=Pt(d)}return this.lazyHash_}getValue(){return this.value_}compareTo(d){return d===f.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof f.__childrenNodeConstructor?-1:((0,le.hu)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))}compareToLeafNode_(d){const v=typeof d.value_,M=typeof this.value_,j=f.VALUE_TYPE_ORDER.indexOf(v),re=f.VALUE_TYPE_ORDER.indexOf(M);return(0,le.hu)(j>=0,"Unknown leaf type: "+v),(0,le.hu)(re>=0,"Unknown leaf type: "+M),j===re?"object"===M?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:re-j}withIndex(){return this}isIndexed(){return!0}equals(d){if(d===this)return!0;if(d.isLeafNode()){const v=d;return this.value_===v.value_&&this.priorityNode_.equals(v.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const Ai=new class Rs extends as{compare(c,d){const v=c.node.getPriority(),M=d.node.getPriority(),j=v.compareTo(M);return 0===j?At(c.name,d.name):j}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,d){return!c.getPriority().equals(d.getPriority())}minPost(){return ei.MIN}maxPost(){return new ei(Nt,new bs("[PRIORITY-POST]",Zo))}makePost(c,d){const v=$s(c);return new ei(d,new bs("[PRIORITY-POST]",v))}toString(){return".priority"}},Ks=Math.log(2);class ao{constructor(c){this.count=parseInt(Math.log(c+1)/Ks,10),this.current_=this.count-1;const M=(j=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&M}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const js=function(f,c,d,v){f.sort(c);const M=function(Ze,lt){const tn=lt-Ze;let vn,Dn;if(0===tn)return null;if(1===tn)return vn=f[Ze],Dn=d?d(vn):vn,new Cs(Dn,vn.node,Cs.BLACK,null,null);{const fr=parseInt(tn/2,10)+Ze,ci=M(Ze,fr),ws=M(fr+1,lt);return vn=f[fr],Dn=d?d(vn):vn,new Cs(Dn,vn.node,Cs.BLACK,ci,ws)}},Ie=function(Ze){let lt=null,tn=null,vn=f.length;const Dn=function(ci,ws){const aa=vn-ci,Fu=vn;vn-=ci;const Vc=M(aa+1,Fu),Wl=f[aa],Lh=d?d(Wl):Wl;fr(new Cs(Lh,Wl.node,ws,null,Vc))},fr=function(ci){lt?(lt.left=ci,lt=ci):(tn=ci,lt=ci)};for(let ci=0;ci<Ze.count;++ci){const ws=Ze.nextBitIsOne(),aa=Math.pow(2,Ze.count-(ci+1));ws?Dn(aa,Cs.BLACK):(Dn(aa,Cs.BLACK),Dn(aa,Cs.RED))}return tn}(new ao(f.length));return new Ni(v||c,Ie)};let Ps;const Os={};class ki{constructor(c,d){this.indexes_=c,this.indexSet_=d}static get Default(){return(0,le.hu)(Os&&Ai,"ChildrenNode.ts has not been loaded"),Ps=Ps||new ki({".priority":Os},{".priority":Ai}),Ps}get(c){const d=(0,le.DV)(this.indexes_,c);if(!d)throw new Error("No index defined for "+c);return d instanceof Ni?d:null}hasIndex(c){return(0,le.r3)(this.indexSet_,c.toString())}addIndex(c,d){(0,le.hu)(c!==gs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let M=!1;const j=d.getIterator(ei.Wrap);let Ie,re=j.getNext();for(;re;)M=M||c.isDefinedOn(re.node),v.push(re),re=j.getNext();Ie=M?js(v,c.getCompare()):Os;const Ze=c.toString(),lt=Object.assign({},this.indexSet_);lt[Ze]=c;const tn=Object.assign({},this.indexes_);return tn[Ze]=Ie,new ki(tn,lt)}addToIndexes(c,d){const v=(0,le.UI)(this.indexes_,(M,j)=>{const re=(0,le.DV)(this.indexSet_,j);if((0,le.hu)(re,"Missing index implementation for "+j),M===Os){if(re.isDefinedOn(c.node)){const Ie=[],Ze=d.getIterator(ei.Wrap);let lt=Ze.getNext();for(;lt;)lt.name!==c.name&&Ie.push(lt),lt=Ze.getNext();return Ie.push(c),js(Ie,re.getCompare())}return Os}{const Ie=d.get(c.name);let Ze=M;return Ie&&(Ze=Ze.remove(new ei(c.name,Ie))),Ze.insert(c,c.node)}});return new ki(v,this.indexSet_)}removeFromIndexes(c,d){const v=(0,le.UI)(this.indexes_,M=>{if(M===Os)return M;{const j=d.get(c.name);return j?M.remove(new ei(c.name,j)):M}});return new ki(v,this.indexSet_)}}let _i,U=(()=>{class f{constructor(d,v,M){this.children_=d,this.priorityNode_=v,this.indexMap_=M,this.lazyHash_=null,this.priorityNode_&&qs(this.priorityNode_),this.children_.isEmpty()&&(0,le.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _i||(_i=new f(new Ni(Ms),null,ki.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_i}updatePriority(d){return this.children_.isEmpty()?this:new f(this.children_,d,this.indexMap_)}getImmediateChild(d){if(".priority"===d)return this.getPriority();{const v=this.children_.get(d);return null===v?_i:v}}getChild(d){const v=yr(d);return null===v?this:this.getImmediateChild(v).getChild(zr(d))}hasChild(d){return null!==this.children_.get(d)}updateImmediateChild(d,v){if((0,le.hu)(v,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(v);{const M=new ei(d,v);let j,re;v.isEmpty()?(j=this.children_.remove(d),re=this.indexMap_.removeFromIndexes(M,this.children_)):(j=this.children_.insert(d,v),re=this.indexMap_.addToIndexes(M,this.children_));const Ie=j.isEmpty()?_i:this.priorityNode_;return new f(j,Ie,re)}}updateChild(d,v){const M=yr(d);if(null===M)return v;{(0,le.hu)(".priority"!==yr(d)||1===Qi(d),".priority must be the last token in a path");const j=this.getImmediateChild(M).updateChild(zr(d),v);return this.updateImmediateChild(M,j)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(d){if(this.isEmpty())return null;const v={};let M=0,j=0,re=!0;if(this.forEachChild(Ai,(Ie,Ze)=>{v[Ie]=Ze.val(d),M++,re&&f.INTEGER_REGEXP_.test(Ie)?j=Math.max(j,Number(Ie)):re=!1}),!d&&re&&j<2*M){const Ie=[];for(const Ze in v)Ie[Ze]=v[Ze];return Ie}return d&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let d="";this.getPriority().isEmpty()||(d+="priority:"+Ro(this.getPriority().val())+":"),this.forEachChild(Ai,(v,M)=>{const j=M.hash();""!==j&&(d+=":"+v+":"+j)}),this.lazyHash_=""===d?"":Pt(d)}return this.lazyHash_}getPredecessorChildName(d,v,M){const j=this.resolveIndex_(M);if(j){const re=j.getPredecessorKey(new ei(d,v));return re?re.name:null}return this.children_.getPredecessorKey(d)}getFirstChildName(d){const v=this.resolveIndex_(d);if(v){const M=v.minKey();return M&&M.name}return this.children_.minKey()}getFirstChild(d){const v=this.getFirstChildName(d);return v?new ei(v,this.children_.get(v)):null}getLastChildName(d){const v=this.resolveIndex_(d);if(v){const M=v.maxKey();return M&&M.name}return this.children_.maxKey()}getLastChild(d){const v=this.getLastChildName(d);return v?new ei(v,this.children_.get(v)):null}forEachChild(d,v){const M=this.resolveIndex_(d);return M?M.inorderTraversal(j=>v(j.name,j.node)):this.children_.inorderTraversal(v)}getIterator(d){return this.getIteratorFrom(d.minPost(),d)}getIteratorFrom(d,v){const M=this.resolveIndex_(v);if(M)return M.getIteratorFrom(d,j=>j);{const j=this.children_.getIteratorFrom(d.name,ei.Wrap);let re=j.peek();for(;null!=re&&v.compare(re,d)<0;)j.getNext(),re=j.peek();return j}}getReverseIterator(d){return this.getReverseIteratorFrom(d.maxPost(),d)}getReverseIteratorFrom(d,v){const M=this.resolveIndex_(v);if(M)return M.getReverseIteratorFrom(d,j=>j);{const j=this.children_.getReverseIteratorFrom(d.name,ei.Wrap);let re=j.peek();for(;null!=re&&v.compare(re,d)>0;)j.getNext(),re=j.peek();return j}}compareTo(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===q?-1:0}withIndex(d){if(d===gs||this.indexMap_.hasIndex(d))return this;{const v=this.indexMap_.addIndex(d,this.children_);return new f(this.children_,this.priorityNode_,v)}}isIndexed(d){return d===gs||this.indexMap_.hasIndex(d)}equals(d){if(d===this)return!0;if(d.isLeafNode())return!1;{const v=d;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const M=this.getIterator(Ai),j=v.getIterator(Ai);let re=M.getNext(),Ie=j.getNext();for(;re&&Ie;){if(re.name!==Ie.name||!re.node.equals(Ie.node))return!1;re=M.getNext(),Ie=j.getNext()}return null===re&&null===Ie}return!1}return!1}}resolveIndex_(d){return d===gs?null:this.indexMap_.get(d.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const q=new class pe extends U{constructor(){super(new Ni(Ms),U.EMPTY_NODE,ki.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return U.EMPTY_NODE}isEmpty(){return!1}};function ze(f,c=null){if(null===f)return U.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(c=f[".priority"]),(0,le.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new bs(f,ze(c));if(f instanceof Array){let d=U.EMPTY_NODE;return fn(f,(v,M)=>{if((0,le.r3)(f,v)&&"."!==v.substring(0,1)){const j=ze(M);(j.isLeafNode()||!j.isEmpty())&&(d=d.updateImmediateChild(v,j))}}),d.updatePriority(ze(c))}{const d=[];let v=!1;if(fn(f,(re,Ie)=>{if("."!==re.substring(0,1)){const Ze=ze(Ie);Ze.isEmpty()||(v=v||!Ze.getPriority().isEmpty(),d.push(new ei(re,Ze)))}}),0===d.length)return U.EMPTY_NODE;const j=js(d,no,re=>re.name,Ms);if(v){const re=js(d,Ai.getCompare());return new U(j,ze(c),new ki({".priority":re},{".priority":Ai}))}return new U(j,ze(c),ki.Default)}}Object.defineProperties(ei,{MIN:{value:new ei(et,U.EMPTY_NODE)},MAX:{value:new ei(Nt,q)}}),Ko.__EMPTY_NODE=U.EMPTY_NODE,bs.__childrenNodeConstructor=U,function Bs(f){Us=f}(q),function ho(f){Zo=f}(q),function ms(f){$s=f}(ze);class en extends as{constructor(c){super(),this.indexPath_=c,(0,le.hu)(!Wr(c)&&".priority"!==yr(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,d){const v=this.extractChild(c.node),M=this.extractChild(d.node),j=v.compareTo(M);return 0===j?At(c.name,d.name):j}makePost(c,d){const v=ze(c),M=U.EMPTY_NODE.updateChild(this.indexPath_,v);return new ei(d,M)}maxPost(){const c=U.EMPTY_NODE.updateChild(this.indexPath_,q);return new ei(Nt,c)}toString(){return Ki(this.indexPath_,0).join("/")}}const or=new class Cn extends as{compare(c,d){const v=c.node.compareTo(d.node);return 0===v?At(c.name,d.name):v}isDefinedOn(c){return!0}indexedValueChanged(c,d){return!c.equals(d)}minPost(){return ei.MIN}maxPost(){return ei.MAX}makePost(c,d){const v=ze(c);return new ei(d,v)}toString(){return".value"}};function Br(f){return{type:"value",snapshotNode:f}}function Xr(f,c){return{type:"child_added",snapshotNode:c,childName:f}}function ni(f,c){return{type:"child_removed",snapshotNode:c,childName:f}}function $r(f,c,d){return{type:"child_changed",snapshotNode:c,childName:f,oldSnap:d}}class vi{constructor(c){this.index_=c}updateChild(c,d,v,M,j,re){(0,le.hu)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const Ie=c.getImmediateChild(d);return Ie.getChild(M).equals(v.getChild(M))&&Ie.isEmpty()===v.isEmpty()||(null!=re&&(v.isEmpty()?c.hasChild(d)?re.trackChildChange(ni(d,Ie)):(0,le.hu)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Ie.isEmpty()?re.trackChildChange(Xr(d,v)):re.trackChildChange($r(d,v,Ie))),c.isLeafNode()&&v.isEmpty())?c:c.updateImmediateChild(d,v).withIndex(this.index_)}updateFullNode(c,d,v){return null!=v&&(c.isLeafNode()||c.forEachChild(Ai,(M,j)=>{d.hasChild(M)||v.trackChildChange(ni(M,j))}),d.isLeafNode()||d.forEachChild(Ai,(M,j)=>{if(c.hasChild(M)){const re=c.getImmediateChild(M);re.equals(j)||v.trackChildChange($r(M,j,re))}else v.trackChildChange(Xr(M,j))})),d.withIndex(this.index_)}updatePriority(c,d){return c.isEmpty()?U.EMPTY_NODE:c.updatePriority(d)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ti{constructor(c){this.indexedFilter_=new vi(c.getIndex()),this.index_=c.getIndex(),this.startPost_=Ti.getStartPost_(c),this.endPost_=Ti.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const d=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,v=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return d&&v}updateChild(c,d,v,M,j,re){return this.matches(new ei(d,v))||(v=U.EMPTY_NODE),this.indexedFilter_.updateChild(c,d,v,M,j,re)}updateFullNode(c,d,v){d.isLeafNode()&&(d=U.EMPTY_NODE);let M=d.withIndex(this.index_);M=M.updatePriority(U.EMPTY_NODE);const j=this;return d.forEachChild(Ai,(re,Ie)=>{j.matches(new ei(re,Ie))||(M=M.updateImmediateChild(re,U.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,M,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const d=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),d)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const d=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),d)}return c.getIndex().maxPost()}}class ro{constructor(c){this.withinDirectionalStart=d=>this.reverse_?this.withinEndPost(d):this.withinStartPost(d),this.withinDirectionalEnd=d=>this.reverse_?this.withinStartPost(d):this.withinEndPost(d),this.withinStartPost=d=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),d);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=d=>{const v=this.index_.compare(d,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new Ti(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,d,v,M,j,re){return this.rangedFilter_.matches(new ei(d,v))||(v=U.EMPTY_NODE),c.getImmediateChild(d).equals(v)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,d,v,M,j,re):this.fullLimitUpdateChild_(c,d,v,j,re)}updateFullNode(c,d,v){let M;if(d.isLeafNode()||d.isEmpty())M=U.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<d.numChildren()&&d.isIndexed(this.index_)){let j;M=U.EMPTY_NODE.withIndex(this.index_),j=this.reverse_?d.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let re=0;for(;j.hasNext()&&re<this.limit_;){const Ie=j.getNext();if(this.withinDirectionalStart(Ie)){if(!this.withinDirectionalEnd(Ie))break;M=M.updateImmediateChild(Ie.name,Ie.node),re++}}}else{let j;M=d.withIndex(this.index_),M=M.updatePriority(U.EMPTY_NODE),j=this.reverse_?M.getReverseIterator(this.index_):M.getIterator(this.index_);let re=0;for(;j.hasNext();){const Ie=j.getNext();re<this.limit_&&this.withinDirectionalStart(Ie)&&this.withinDirectionalEnd(Ie)?re++:M=M.updateImmediateChild(Ie.name,U.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,M,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,d,v,M,j){let re;if(this.reverse_){const vn=this.index_.getCompare();re=(Dn,fr)=>vn(fr,Dn)}else re=this.index_.getCompare();const Ie=c;(0,le.hu)(Ie.numChildren()===this.limit_,"");const Ze=new ei(d,v),lt=this.reverse_?Ie.getFirstChild(this.index_):Ie.getLastChild(this.index_),tn=this.rangedFilter_.matches(Ze);if(Ie.hasChild(d)){const vn=Ie.getImmediateChild(d);let Dn=M.getChildAfterChild(this.index_,lt,this.reverse_);for(;null!=Dn&&(Dn.name===d||Ie.hasChild(Dn.name));)Dn=M.getChildAfterChild(this.index_,Dn,this.reverse_);const fr=null==Dn?1:re(Dn,Ze);if(tn&&!v.isEmpty()&&fr>=0)return null!=j&&j.trackChildChange($r(d,v,vn)),Ie.updateImmediateChild(d,v);{null!=j&&j.trackChildChange(ni(d,vn));const ws=Ie.updateImmediateChild(d,U.EMPTY_NODE);return null!=Dn&&this.rangedFilter_.matches(Dn)?(null!=j&&j.trackChildChange(Xr(Dn.name,Dn.node)),ws.updateImmediateChild(Dn.name,Dn.node)):ws}}return v.isEmpty()?c:tn&&re(lt,Ze)>=0?(null!=j&&(j.trackChildChange(ni(lt.name,lt.node)),j.trackChildChange(Xr(d,v))),Ie.updateImmediateChild(d,v).updateImmediateChild(lt.name,U.EMPTY_NODE)):c}}class ts{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ai}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,le.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,le.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:et}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,le.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,le.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,le.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ai}copy(){const c=new ts;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function he(f){const c={};if(f.isDefault())return c;let d;if(f.index_===Ai?d="$priority":f.index_===or?d="$value":f.index_===gs?d="$key":((0,le.hu)(f.index_ instanceof en,"Unrecognized index type!"),d=f.index_.toString()),c.orderBy=(0,le.Wl)(d),f.startSet_){const v=f.startAfterSet_?"startAfter":"startAt";c[v]=(0,le.Wl)(f.indexStartValue_),f.startNameSet_&&(c[v]+=","+(0,le.Wl)(f.indexStartName_))}if(f.endSet_){const v=f.endBeforeSet_?"endBefore":"endAt";c[v]=(0,le.Wl)(f.indexEndValue_),f.endNameSet_&&(c[v]+=","+(0,le.Wl)(f.indexEndName_))}return f.limitSet_&&(f.isViewFromLeft()?c.limitToFirst=f.limit_:c.limitToLast=f.limit_),c}function We(f){const c={};if(f.startSet_&&(c.sp=f.indexStartValue_,f.startNameSet_&&(c.sn=f.indexStartName_),c.sin=!f.startAfterSet_),f.endSet_&&(c.ep=f.indexEndValue_,f.endNameSet_&&(c.en=f.indexEndName_),c.ein=!f.endBeforeSet_),f.limitSet_){c.l=f.limit_;let d=f.viewFrom_;""===d&&(d=f.isViewFromLeft()?"l":"r"),c.vf=d}return f.index_!==Ai&&(c.i=f.index_.toString()),c}class Mn extends qi{constructor(c,d,v,M){super(),this.repoInfo_=c,this.onDataUpdate_=d,this.authTokenProvider_=v,this.appCheckTokenProvider_=M,this.log_=ot("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,d){return void 0!==d?"tag$"+d:((0,le.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,d,v,M){const j=c._path.toString();this.log_("Listen called for "+j+" "+c._queryIdentifier);const re=Mn.getListenId_(c,v),Ie={};this.listens_[re]=Ie;const Ze=he(c._queryParams);this.restRequest_(j+".json",Ze,(lt,tn)=>{let vn=tn;if(404===lt&&(vn=null,lt=null),null===lt&&this.onDataUpdate_(j,vn,!1,v),(0,le.DV)(this.listens_,re)===Ie){let Dn;Dn=lt?401===lt?"permission_denied":"rest_error:"+lt:"ok",M(Dn,null)}})}unlisten(c,d){const v=Mn.getListenId_(c,d);delete this.listens_[v]}get(c){const d=he(c._queryParams),v=c._path.toString(),M=new le.BH;return this.restRequest_(v+".json",d,(j,re)=>{let Ie=re;404===j&&(Ie=null,j=null),null===j?(this.onDataUpdate_(v,Ie,!1,null),M.resolve(Ie)):M.reject(new Error(Ie))}),M.promise}refreshAuthToken(c){}restRequest_(c,d={},v){return d.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([M,j])=>{M&&M.accessToken&&(d.auth=M.accessToken),j&&j.token&&(d.ac=j.token);const re=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,le.xO)(d);this.log_("Sending REST request for "+re);const Ie=new XMLHttpRequest;Ie.onreadystatechange=()=>{if(v&&4===Ie.readyState){this.log_("REST Response for "+re+" received. status:",Ie.status,"response:",Ie.responseText);let Ze=null;if(Ie.status>=200&&Ie.status<300){try{Ze=(0,le.cI)(Ie.responseText)}catch(lt){Fe("Failed to parse JSON response for "+re+": "+Ie.responseText)}v(null,Ze)}else 401!==Ie.status&&404!==Ie.status&&Fe("Got unsuccessful REST response for "+re+" Status: "+Ie.status),v(Ie.status);v=null}},Ie.open("GET",re,!0),Ie.send()})}}class te{constructor(){this.rootNode_=U.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,d){this.rootNode_=this.rootNode_.updateChild(c,d)}}function K(){return{value:null,children:new Map}}function be(f,c,d){if(Wr(c))f.value=d,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(c,d);else{const v=yr(c);f.children.has(v)||f.children.set(v,K()),be(f.children.get(v),c=zr(c),d)}}function rt(f,c,d){null!==f.value?d(c,f.value):function Ht(f,c){f.children.forEach((d,v)=>{c(v,d)})}(f,(v,M)=>{rt(M,new Cr(c.toString()+"/"+v),d)})}class Sn{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),d=Object.assign({},c);return this.last_&&fn(this.last_,(v,M)=>{d[v]=d[v]-M}),this.last_=c,d}}class gi{constructor(c,d){this.server_=d,this.statsToReport_={},this.statsListener_=new Sn(c);const v=1e4+2e4*Math.random();Un(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const c=this.statsListener_.get(),d={};let v=!1;fn(c,(M,j)=>{j>0&&(0,le.r3)(this.statsToReport_,M)&&(d[M]=j,v=!0)}),v&&this.server_.reportStats(d),Un(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var fi=(()=>{return(f=fi||(fi={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",fi;var f})();function l(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class x{constructor(c,d,v){this.path=c,this.affectedTree=d,this.revert=v,this.type=fi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(Wr(this.path)){if(null!=this.affectedTree.value)return(0,le.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const d=this.affectedTree.subtree(new Cr(c));return new x(mr(),d,this.revert)}}return(0,le.hu)(yr(this.path)===c,"operationForChild called for unrelated child."),new x(zr(this.path),this.affectedTree,this.revert)}}class S{constructor(c,d){this.source=c,this.path=d,this.type=fi.LISTEN_COMPLETE}operationForChild(c){return Wr(this.path)?new S(this.source,mr()):new S(this.source,zr(this.path))}}class P{constructor(c,d,v){this.source=c,this.path=d,this.snap=v,this.type=fi.OVERWRITE}operationForChild(c){return Wr(this.path)?new P(this.source,mr(),this.snap.getImmediateChild(c)):new P(this.source,zr(this.path),this.snap)}}class z{constructor(c,d,v){this.source=c,this.path=d,this.children=v,this.type=fi.MERGE}operationForChild(c){if(Wr(this.path)){const d=this.children.subtree(new Cr(c));return d.isEmpty()?null:d.value?new P(this.source,mr(),d.value):new z(this.source,mr(),d)}return(0,le.hu)(yr(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new z(this.source,zr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class J{constructor(c,d,v){this.node_=c,this.fullyInitialized_=d,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(Wr(c))return this.isFullyInitialized()&&!this.filtered_;const d=yr(c);return this.isCompleteForChild(d)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class ye{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function ae(f,c,d,v,M,j){const re=v.filter(Ie=>Ie.type===d);re.sort((Ie,Ze)=>function ce(f,c,d){if(null==c.childName||null==d.childName)throw(0,le.g5)("Should only compare child_ events.");const v=new ei(c.childName,c.snapshotNode),M=new ei(d.childName,d.snapshotNode);return f.index_.compare(v,M)}(f,Ie,Ze)),re.forEach(Ie=>{const Ze=function _e(f,c,d){return"value"===c.type||"child_removed"===c.type||(c.prevName=d.getPredecessorChildName(c.childName,c.snapshotNode,f.index_)),c}(f,Ie,j);M.forEach(lt=>{lt.respondsTo(Ie.type)&&c.push(lt.createEvent(Ze,f.query_))})})}function ue(f,c){return{eventCache:f,serverCache:c}}function we(f,c,d,v){return ue(new J(c,d,v),f.serverCache)}function He(f,c,d,v){return ue(f.eventCache,new J(c,d,v))}function nt(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function Ae(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let Le;class Je{constructor(c,d=(()=>(Le||(Le=new Ni(on)),Le))()){this.value=c,this.children=d}static fromObject(c){let d=new Je(null);return fn(c,(v,M)=>{d=d.set(new Cr(v),M)}),d}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,d){if(null!=this.value&&d(this.value))return{path:mr(),value:this.value};if(Wr(c))return null;{const v=yr(c),M=this.children.get(v);if(null!==M){const j=M.findRootMostMatchingPathAndValue(zr(c),d);return null!=j?{path:Yr(new Cr(v),j.path),value:j.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(Wr(c))return this;{const d=yr(c),v=this.children.get(d);return null!==v?v.subtree(zr(c)):new Je(null)}}set(c,d){if(Wr(c))return new Je(d,this.children);{const v=yr(c),j=(this.children.get(v)||new Je(null)).set(zr(c),d),re=this.children.insert(v,j);return new Je(this.value,re)}}remove(c){if(Wr(c))return this.children.isEmpty()?new Je(null):new Je(null,this.children);{const d=yr(c),v=this.children.get(d);if(v){const M=v.remove(zr(c));let j;return j=M.isEmpty()?this.children.remove(d):this.children.insert(d,M),null===this.value&&j.isEmpty()?new Je(null):new Je(this.value,j)}return this}}get(c){if(Wr(c))return this.value;{const d=yr(c),v=this.children.get(d);return v?v.get(zr(c)):null}}setTree(c,d){if(Wr(c))return d;{const v=yr(c),j=(this.children.get(v)||new Je(null)).setTree(zr(c),d);let re;return re=j.isEmpty()?this.children.remove(v):this.children.insert(v,j),new Je(this.value,re)}}fold(c){return this.fold_(mr(),c)}fold_(c,d){const v={};return this.children.inorderTraversal((M,j)=>{v[M]=j.fold_(Yr(c,M),d)}),d(c,this.value,v)}findOnPath(c,d){return this.findOnPath_(c,mr(),d)}findOnPath_(c,d,v){const M=!!this.value&&v(d,this.value);if(M)return M;if(Wr(c))return null;{const j=yr(c),re=this.children.get(j);return re?re.findOnPath_(zr(c),Yr(d,j),v):null}}foreachOnPath(c,d){return this.foreachOnPath_(c,mr(),d)}foreachOnPath_(c,d,v){if(Wr(c))return this;{this.value&&v(d,this.value);const M=yr(c),j=this.children.get(M);return j?j.foreachOnPath_(zr(c),Yr(d,M),v):new Je(null)}}foreach(c){this.foreach_(mr(),c)}foreach_(c,d){this.children.inorderTraversal((v,M)=>{M.foreach_(Yr(c,v),d)}),this.value&&d(c,this.value)}foreachChild(c){this.children.inorderTraversal((d,v)=>{v.value&&c(d,v.value)})}}class yt{constructor(c){this.writeTree_=c}static empty(){return new yt(new Je(null))}}function mn(f,c,d){if(Wr(c))return new yt(new Je(d));{const v=f.writeTree_.findRootMostValueAndPath(c);if(null!=v){const M=v.path;let j=v.value;const re=fs(M,c);return j=j.updateChild(re,d),new yt(f.writeTree_.set(M,j))}{const M=new Je(d),j=f.writeTree_.setTree(c,M);return new yt(j)}}}function Tn(f,c,d){let v=f;return fn(d,(M,j)=>{v=mn(v,Yr(c,M),j)}),v}function hn(f,c){if(Wr(c))return yt.empty();{const d=f.writeTree_.setTree(c,new Je(null));return new yt(d)}}function xn(f,c){return null!=Zn(f,c)}function Zn(f,c){const d=f.writeTree_.findRootMostValueAndPath(c);return null!=d?f.writeTree_.get(d.path).getChild(fs(d.path,c)):null}function cr(f){const c=[],d=f.writeTree_.value;return null!=d?d.isLeafNode()||d.forEachChild(Ai,(v,M)=>{c.push(new ei(v,M))}):f.writeTree_.children.inorderTraversal((v,M)=>{null!=M.value&&c.push(new ei(v,M.value))}),c}function Nn(f,c){if(Wr(c))return f;{const d=Zn(f,c);return new yt(null!=d?new Je(d):f.writeTree_.subtree(c))}}function Qt(f){return f.writeTree_.isEmpty()}function Rt(f,c){return ln(mr(),f.writeTree_,c)}function ln(f,c,d){if(null!=c.value)return d.updateChild(f,c.value);{let v=null;return c.children.inorderTraversal((M,j)=>{".priority"===M?((0,le.hu)(null!==j.value,"Priority writes must always be leaf nodes"),v=j.value):d=ln(Yr(f,M),j,d)}),!d.getChild(f).isEmpty()&&null!==v&&(d=d.updateChild(Yr(f,".priority"),v)),d}}function B(f,c){return Ts(c,f)}function Ee(f,c){if(f.snap)return Di(f.path,c);for(const d in f.children)if(f.children.hasOwnProperty(d)&&Di(Yr(f.path,d),c))return!0;return!1}function qe(f){return f.visible}function wt(f,c,d){let v=yt.empty();for(let M=0;M<f.length;++M){const j=f[M];if(c(j)){const re=j.path;let Ie;if(j.snap)Di(d,re)?(Ie=fs(d,re),v=mn(v,Ie,j.snap)):Di(re,d)&&(Ie=fs(re,d),v=mn(v,mr(),j.snap.getChild(Ie)));else{if(!j.children)throw(0,le.g5)("WriteRecord should have .snap or .children");if(Di(d,re))Ie=fs(d,re),v=Tn(v,Ie,j.children);else if(Di(re,d))if(Ie=fs(re,d),Wr(Ie))v=Tn(v,mr(),j.children);else{const Ze=(0,le.DV)(j.children,yr(Ie));if(Ze){const lt=Ze.getChild(zr(Ie));v=mn(v,mr(),lt)}}}}}return v}function sn(f,c,d,v,M){if(v||M){const j=Nn(f.visibleWrites,c);return!M&&Qt(j)?d:M||null!=d||xn(j,mr())?Rt(wt(f.allWrites,function(lt){return(lt.visible||M)&&(!v||!~v.indexOf(lt.writeId))&&(Di(lt.path,c)||Di(c,lt.path))},c),d||U.EMPTY_NODE):null}{const j=Zn(f.visibleWrites,c);if(null!=j)return j;{const re=Nn(f.visibleWrites,c);return Qt(re)?d:null!=d||xn(re,mr())?Rt(re,d||U.EMPTY_NODE):null}}}function Fi(f,c,d,v){return sn(f.writeTree,f.treePath,c,d,v)}function xi(f,c){return function sr(f,c,d){let v=U.EMPTY_NODE;const M=Zn(f.visibleWrites,c);if(M)return M.isLeafNode()||M.forEachChild(Ai,(j,re)=>{v=v.updateImmediateChild(j,re)}),v;if(d){const j=Nn(f.visibleWrites,c);return d.forEachChild(Ai,(re,Ie)=>{const Ze=Rt(Nn(j,new Cr(re)),Ie);v=v.updateImmediateChild(re,Ze)}),cr(j).forEach(re=>{v=v.updateImmediateChild(re.name,re.node)}),v}return cr(Nn(f.visibleWrites,c)).forEach(re=>{v=v.updateImmediateChild(re.name,re.node)}),v}(f.writeTree,f.treePath,c)}function us(f,c,d,v){return function Er(f,c,d,v,M){(0,le.hu)(v||M,"Either existingEventSnap or existingServerSnap must exist");const j=Yr(c,d);if(xn(f.visibleWrites,j))return null;{const re=Nn(f.visibleWrites,j);return Qt(re)?M.getChild(d):Rt(re,M.getChild(d))}}(f.writeTree,f.treePath,c,d,v)}function Hs(f,c){return function Pi(f,c){return Zn(f.visibleWrites,c)}(f.writeTree,Yr(f.treePath,c))}function Bi(f,c,d){return function Jr(f,c,d,v){const M=Yr(c,d),j=Zn(f.visibleWrites,M);return null!=j?j:v.isCompleteForChild(d)?Rt(Nn(f.visibleWrites,M),v.getNode().getImmediateChild(d)):null}(f.writeTree,f.treePath,c,d)}function $i(f,c){return Ts(Yr(f.treePath,c),f.writeTree)}function Ts(f,c){return{treePath:f,writeTree:c}}class rr{constructor(){this.changeMap=new Map}trackChildChange(c){const d=c.type,v=c.childName;(0,le.hu)("child_added"===d||"child_changed"===d||"child_removed"===d,"Only child changes supported for tracking"),(0,le.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const M=this.changeMap.get(v);if(M){const j=M.type;if("child_added"===d&&"child_removed"===j)this.changeMap.set(v,$r(v,c.snapshotNode,M.snapshotNode));else if("child_removed"===d&&"child_added"===j)this.changeMap.delete(v);else if("child_removed"===d&&"child_changed"===j)this.changeMap.set(v,ni(v,M.oldSnap));else if("child_changed"===d&&"child_added"===j)this.changeMap.set(v,Xr(v,c.snapshotNode));else{if("child_changed"!==d||"child_changed"!==j)throw(0,le.g5)("Illegal combination of changes: "+c+" occurred after "+M);this.changeMap.set(v,$r(v,c.snapshotNode,M.oldSnap))}}else this.changeMap.set(v,c)}getChanges(){return Array.from(this.changeMap.values())}}const Yo=new class hr{getCompleteChild(c){return null}getChildAfterChild(c,d,v){return null}};class er{constructor(c,d,v=null){this.writes_=c,this.viewCache_=d,this.optCompleteServerCache_=v}getCompleteChild(c){const d=this.viewCache_.eventCache;if(d.isCompleteForChild(c))return d.getNode().getImmediateChild(c);{const v=null!=this.optCompleteServerCache_?new J(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Bi(this.writes_,c,v)}}getChildAfterChild(c,d,v){const M=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ae(this.viewCache_),j=function En(f,c,d,v,M,j){return function xr(f,c,d,v,M,j,re){let Ie;const Ze=Nn(f.visibleWrites,c),lt=Zn(Ze,mr());if(null!=lt)Ie=lt;else{if(null==d)return[];Ie=Rt(Ze,d)}if(Ie=Ie.withIndex(re),Ie.isEmpty()||Ie.isLeafNode())return[];{const tn=[],vn=re.getCompare(),Dn=j?Ie.getReverseIteratorFrom(v,re):Ie.getIteratorFrom(v,re);let fr=Dn.getNext();for(;fr&&tn.length<M;)0!==vn(fr,v)&&tn.push(fr),fr=Dn.getNext();return tn}}(f.writeTree,f.treePath,c,d,v,M,j)}(this.writes_,M,d,1,v,c);return 0===j.length?null:j[0]}}function Sr(f,c,d,v,M,j){const re=c.eventCache;if(null!=Hs(v,d))return c;{let Ie,Ze;if(Wr(d))if((0,le.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const lt=Ae(c),vn=xi(v,lt instanceof U?lt:U.EMPTY_NODE);Ie=f.filter.updateFullNode(c.eventCache.getNode(),vn,j)}else{const lt=Fi(v,Ae(c));Ie=f.filter.updateFullNode(c.eventCache.getNode(),lt,j)}else{const lt=yr(d);if(".priority"===lt){(0,le.hu)(1===Qi(d),"Can't have a priority with additional path components");const tn=re.getNode();Ze=c.serverCache.getNode();const vn=us(v,d,tn,Ze);Ie=null!=vn?f.filter.updatePriority(tn,vn):re.getNode()}else{const tn=zr(d);let vn;if(re.isCompleteForChild(lt)){Ze=c.serverCache.getNode();const Dn=us(v,d,re.getNode(),Ze);vn=null!=Dn?re.getNode().getImmediateChild(lt).updateChild(tn,Dn):re.getNode().getImmediateChild(lt)}else vn=Bi(v,lt,c.serverCache);Ie=null!=vn?f.filter.updateChild(re.getNode(),lt,vn,tn,M,j):re.getNode()}}return we(c,Ie,re.isFullyInitialized()||Wr(d),f.filter.filtersNodes())}}function N(f,c,d,v,M,j,re,Ie){const Ze=c.serverCache;let lt;const tn=re?f.filter:f.filter.getIndexedFilter();if(Wr(d))lt=tn.updateFullNode(Ze.getNode(),v,null);else if(tn.filtersNodes()&&!Ze.isFiltered()){const fr=Ze.getNode().updateChild(d,v);lt=tn.updateFullNode(Ze.getNode(),fr,null)}else{const fr=yr(d);if(!Ze.isCompleteForPath(d)&&Qi(d)>1)return c;const ci=zr(d),aa=Ze.getNode().getImmediateChild(fr).updateChild(ci,v);lt=".priority"===fr?tn.updatePriority(Ze.getNode(),aa):tn.updateChild(Ze.getNode(),fr,aa,ci,Yo,null)}const vn=He(c,lt,Ze.isFullyInitialized()||Wr(d),tn.filtersNodes());return Sr(f,vn,d,M,new er(M,vn,j),Ie)}function D(f,c,d,v,M,j,re){const Ie=c.eventCache;let Ze,lt;const tn=new er(M,c,j);if(Wr(d))lt=f.filter.updateFullNode(c.eventCache.getNode(),v,re),Ze=we(c,lt,!0,f.filter.filtersNodes());else{const vn=yr(d);if(".priority"===vn)lt=f.filter.updatePriority(c.eventCache.getNode(),v),Ze=we(c,lt,Ie.isFullyInitialized(),Ie.isFiltered());else{const Dn=zr(d),fr=Ie.getNode().getImmediateChild(vn);let ci;if(Wr(Dn))ci=v;else{const ws=tn.getCompleteChild(vn);ci=null!=ws?".priority"===Si(Dn)&&ws.getChild(cs(Dn)).isEmpty()?ws:ws.updateChild(Dn,v):U.EMPTY_NODE}Ze=fr.equals(ci)?c:we(c,f.filter.updateChild(Ie.getNode(),vn,ci,Dn,tn,re),Ie.isFullyInitialized(),f.filter.filtersNodes())}}return Ze}function I(f,c){return f.eventCache.isCompleteForChild(c)}function ne(f,c,d){return d.foreach((v,M)=>{c=c.updateChild(v,M)}),c}function me(f,c,d,v,M,j,re,Ie){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let lt,Ze=c;lt=Wr(d)?v:new Je(null).setTree(d,v);const tn=c.serverCache.getNode();return lt.children.inorderTraversal((vn,Dn)=>{if(tn.hasChild(vn)){const ci=ne(0,c.serverCache.getNode().getImmediateChild(vn),Dn);Ze=N(f,Ze,new Cr(vn),ci,M,j,re,Ie)}}),lt.children.inorderTraversal((vn,Dn)=>{const fr=!c.serverCache.isCompleteForChild(vn)&&null===Dn.value;if(!tn.hasChild(vn)&&!fr){const ws=ne(0,c.serverCache.getNode().getImmediateChild(vn),Dn);Ze=N(f,Ze,new Cr(vn),ws,M,j,re,Ie)}}),Ze}class Rn{constructor(c,d){this.query_=c,this.eventRegistrations_=[];const v=this.query_._queryParams,M=new vi(v.getIndex()),j=function kr(f){return f.loadsAllData()?new vi(f.getIndex()):f.hasLimit()?new ro(f):new Ti(f)}(v);this.processor_=function qt(f){return{filter:f}}(j);const re=d.serverCache,Ie=d.eventCache,Ze=M.updateFullNode(U.EMPTY_NODE,re.getNode(),null),lt=j.updateFullNode(U.EMPTY_NODE,Ie.getNode(),null),tn=new J(Ze,re.isFullyInitialized(),M.filtersNodes()),vn=new J(lt,Ie.isFullyInitialized(),j.filtersNodes());this.viewCache_=ue(vn,tn),this.eventGenerator_=new ye(this.query_)}get query(){return this.query_}}function Mr(f,c){const d=Ae(f.viewCache_);return d&&(f.query._queryParams.loadsAllData()||!Wr(c)&&!d.getImmediateChild(yr(c)).isEmpty())?d.getChild(c):null}function Gn(f){return 0===f.eventRegistrations_.length}function ai(f,c,d){const v=[];if(d){(0,le.hu)(null==c,"A cancel should cancel all event registrations.");const M=f.query._path;f.eventRegistrations_.forEach(j=>{const re=j.createCancelEvent(d,M);re&&v.push(re)})}if(c){let M=[];for(let j=0;j<f.eventRegistrations_.length;++j){const re=f.eventRegistrations_[j];if(re.matches(c)){if(c.hasAnyCallback()){M=M.concat(f.eventRegistrations_.slice(j+1));break}}else M.push(re)}f.eventRegistrations_=M}else f.eventRegistrations_=[];return v}function Aa(f,c,d,v){c.type===fi.MERGE&&null!==c.source.queryId&&((0,le.hu)(Ae(f.viewCache_),"We should always have a full cache before handling merges"),(0,le.hu)(nt(f.viewCache_),"Missing event cache, even though we have a server cache"));const M=f.viewCache_,j=function Ys(f,c,d,v,M){const j=new rr;let re,Ie;if(d.type===fi.OVERWRITE){const lt=d;lt.source.fromUser?re=D(f,c,lt.path,lt.snap,v,M,j):((0,le.hu)(lt.source.fromServer,"Unknown source."),Ie=lt.source.tagged||c.serverCache.isFiltered()&&!Wr(lt.path),re=N(f,c,lt.path,lt.snap,v,M,Ie,j))}else if(d.type===fi.MERGE){const lt=d;lt.source.fromUser?re=function W(f,c,d,v,M,j,re){let Ie=c;return v.foreach((Ze,lt)=>{const tn=Yr(d,Ze);I(c,yr(tn))&&(Ie=D(f,Ie,tn,lt,M,j,re))}),v.foreach((Ze,lt)=>{const tn=Yr(d,Ze);I(c,yr(tn))||(Ie=D(f,Ie,tn,lt,M,j,re))}),Ie}(f,c,lt.path,lt.children,v,M,j):((0,le.hu)(lt.source.fromServer,"Unknown source."),Ie=lt.source.tagged||c.serverCache.isFiltered(),re=me(f,c,lt.path,lt.children,v,M,Ie,j))}else if(d.type===fi.ACK_USER_WRITE){const lt=d;re=lt.revert?function cn(f,c,d,v,M,j){let re;if(null!=Hs(v,d))return c;{const Ie=new er(v,c,M),Ze=c.eventCache.getNode();let lt;if(Wr(d)||".priority"===yr(d)){let tn;if(c.serverCache.isFullyInitialized())tn=Fi(v,Ae(c));else{const vn=c.serverCache.getNode();(0,le.hu)(vn instanceof U,"serverChildren would be complete if leaf node"),tn=xi(v,vn)}lt=f.filter.updateFullNode(Ze,tn,j)}else{const tn=yr(d);let vn=Bi(v,tn,c.serverCache);null==vn&&c.serverCache.isCompleteForChild(tn)&&(vn=Ze.getImmediateChild(tn)),lt=null!=vn?f.filter.updateChild(Ze,tn,vn,zr(d),Ie,j):c.eventCache.getNode().hasChild(tn)?f.filter.updateChild(Ze,tn,U.EMPTY_NODE,zr(d),Ie,j):Ze,lt.isEmpty()&&c.serverCache.isFullyInitialized()&&(re=Fi(v,Ae(c)),re.isLeafNode()&&(lt=f.filter.updateFullNode(lt,re,j)))}return re=c.serverCache.isFullyInitialized()||null!=Hs(v,mr()),we(c,lt,re,f.filter.filtersNodes())}}(f,c,lt.path,v,M,j):function Be(f,c,d,v,M,j,re){if(null!=Hs(M,d))return c;const Ie=c.serverCache.isFiltered(),Ze=c.serverCache;if(null!=v.value){if(Wr(d)&&Ze.isFullyInitialized()||Ze.isCompleteForPath(d))return N(f,c,d,Ze.getNode().getChild(d),M,j,Ie,re);if(Wr(d)){let lt=new Je(null);return Ze.getNode().forEachChild(gs,(tn,vn)=>{lt=lt.set(new Cr(tn),vn)}),me(f,c,d,lt,M,j,Ie,re)}return c}{let lt=new Je(null);return v.foreach((tn,vn)=>{const Dn=Yr(d,tn);Ze.isCompleteForPath(Dn)&&(lt=lt.set(tn,Ze.getNode().getChild(Dn)))}),me(f,c,d,lt,M,j,Ie,re)}}(f,c,lt.path,lt.affectedTree,v,M,j)}else{if(d.type!==fi.LISTEN_COMPLETE)throw(0,le.g5)("Unknown operation type: "+d.type);re=function Ke(f,c,d,v,M){const j=c.serverCache;return Sr(f,He(c,j.getNode(),j.isFullyInitialized()||Wr(d),j.isFiltered()),d,v,Yo,M)}(f,c,d.path,v,j)}const Ze=j.getChanges();return function Vo(f,c,d){const v=c.eventCache;if(v.isFullyInitialized()){const M=v.getNode().isLeafNode()||v.getNode().isEmpty(),j=nt(f);(d.length>0||!f.eventCache.isFullyInitialized()||M&&!v.getNode().equals(j)||!v.getNode().getPriority().equals(j.getPriority()))&&d.push(Br(nt(c)))}}(c,re,Ze),{viewCache:re,changes:Ze}}(f.processor_,M,c,d,v);return function In(f,c){(0,le.hu)(c.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,le.hu)(c.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,j.viewCache),(0,le.hu)(j.viewCache.serverCache.isFullyInitialized()||!M.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=j.viewCache,Qn(f,j.changes,j.viewCache.eventCache.getNode(),null)}function Qn(f,c,d,v){return function Te(f,c,d,v){const M=[],j=[];return c.forEach(re=>{"child_changed"===re.type&&f.index_.indexedValueChanged(re.oldSnap,re.snapshotNode)&&j.push(function Yi(f,c){return{type:"child_moved",snapshotNode:c,childName:f}}(re.childName,re.snapshotNode))}),ae(f,M,"child_removed",c,v,d),ae(f,M,"child_added",c,v,d),ae(f,M,"child_moved",j,v,d),ae(f,M,"child_changed",c,v,d),ae(f,M,"value",c,v,d),M}(f.eventGenerator_,c,d,v?[v]:f.eventRegistrations_)}let Uo,Xt;class xa{constructor(){this.views=new Map}}function Za(f,c,d,v){const M=c.source.queryId;if(null!==M){const j=f.views.get(M);return(0,le.hu)(null!=j,"SyncTree gave us an op for an invalid query."),Aa(j,c,d,v)}{let j=[];for(const re of f.views.values())j=j.concat(Aa(re,c,d,v));return j}}function mu(f,c,d,v,M,j){const re=function Ll(f,c,d,v,M){const re=f.views.get(c._queryIdentifier);if(!re){let Ie=Fi(d,M?v:null),Ze=!1;Ie?Ze=!0:v instanceof U?(Ie=xi(d,v),Ze=!1):(Ie=U.EMPTY_NODE,Ze=!1);const lt=ue(new J(Ie,Ze,!1),new J(v,M,!1));return new Rn(c,lt)}return re}(f,c,v,M,j);return f.views.has(c._queryIdentifier)||f.views.set(c._queryIdentifier,re),function _o(f,c){f.eventRegistrations_.push(c)}(re,d),function Ns(f,c){const d=f.viewCache_.eventCache,v=[];return d.getNode().isLeafNode()||d.getNode().forEachChild(Ai,(j,re)=>{v.push(Xr(j,re))}),d.isFullyInitialized()&&v.push(Br(d.getNode())),Qn(f,v,d.getNode(),c)}(re,d)}function na(f){const c=[];for(const d of f.views.values())d.query._queryParams.loadsAllData()||c.push(d);return c}function _a(f,c){let d=null;for(const v of f.views.values())d=d||Mr(v,c);return d}function wc(f,c){return c._queryParams.loadsAllData()?Xl(f):f.views.get(c._queryIdentifier)}function Ic(f,c){return null!=wc(f,c)}function ra(f){return null!=Xl(f)}function Xl(f){for(const c of f.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let Co=1;class Ea{constructor(c){this.listenProvider_=c,this.syncPointTree_=new Je(null),this.pendingWriteTree_=function pr(){return{visibleWrites:yt.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ia(f,c,d,v,M){return function b(f,c,d,v,M){(0,le.hu)(v>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===M&&(M=!0),f.allWrites.push({path:c,snap:d,writeId:v,visible:M}),M&&(f.visibleWrites=mn(f.visibleWrites,c,d)),f.lastWriteId=v}(f.pendingWriteTree_,c,d,v,M),M?la(f,new P({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,d)):[]}function sa(f,c,d=!1){const v=function k(f,c){for(let d=0;d<f.allWrites.length;d++){const v=f.allWrites[d];if(v.writeId===c)return v}return null}(f.pendingWriteTree_,c);if(function ee(f,c){const d=f.allWrites.findIndex(Ie=>Ie.writeId===c);(0,le.hu)(d>=0,"removeWrite called with nonexistent writeId.");const v=f.allWrites[d];f.allWrites.splice(d,1);let M=v.visible,j=!1,re=f.allWrites.length-1;for(;M&&re>=0;){const Ie=f.allWrites[re];Ie.visible&&(re>=d&&Ee(Ie,v.path)?M=!1:Di(v.path,Ie.path)&&(j=!0)),re--}return!!M&&(j?(function ke(f){f.visibleWrites=wt(f.allWrites,qe,mr()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(v.snap?f.visibleWrites=hn(f.visibleWrites,v.path):fn(v.children,Ze=>{f.visibleWrites=hn(f.visibleWrites,Yr(v.path,Ze))}),!0))}(f.pendingWriteTree_,c)){let j=new Je(null);return null!=v.snap?j=j.set(mr(),!0):fn(v.children,re=>{j=j.set(new Cr(re),!0)}),la(f,new x(v.path,j,d))}return[]}function So(f,c,d){return la(f,new P({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,d))}function fo(f,c,d,v,M=!1){const j=c._path,re=f.syncPointTree_.get(j);let Ie=[];if(re&&("default"===c._queryIdentifier||Ic(re,c))){const Ze=function lo(f,c,d,v){const M=c._queryIdentifier,j=[];let re=[];const Ie=ra(f);if("default"===M)for(const[Ze,lt]of f.views.entries())re=re.concat(ai(lt,d,v)),Gn(lt)&&(f.views.delete(Ze),lt.query._queryParams.loadsAllData()||j.push(lt.query));else{const Ze=f.views.get(M);Ze&&(re=re.concat(ai(Ze,d,v)),Gn(Ze)&&(f.views.delete(M),Ze.query._queryParams.loadsAllData()||j.push(Ze.query)))}return Ie&&!ra(f)&&j.push(new(function ul(){return(0,le.hu)(Uo,"Reference.ts has not been loaded"),Uo}())(c._repo,c._path)),{removed:j,events:re}}(re,c,d,v);(function Fl(f){return 0===f.views.size})(re)&&(f.syncPointTree_=f.syncPointTree_.remove(j));const lt=Ze.removed;if(Ie=Ze.events,!M){const tn=-1!==lt.findIndex(Dn=>Dn._queryParams.loadsAllData()),vn=f.syncPointTree_.findOnPath(j,(Dn,fr)=>ra(fr));if(tn&&!vn){const Dn=f.syncPointTree_.subtree(j);if(!Dn.isEmpty()){const fr=function Vl(f){return f.fold((c,d,v)=>{if(d&&ra(d))return[Xl(d)];{let M=[];return d&&(M=na(d)),fn(v,(j,re)=>{M=M.concat(re)}),M}})}(Dn);for(let ci=0;ci<fr.length;++ci){const ws=fr[ci],aa=ws.query,Fu=Ua(f,ws);f.listenProvider_.startListening(Ja(aa),so(f,aa),Fu.hashFn,Fu.onComplete)}}}!vn&&lt.length>0&&!v&&(tn?f.listenProvider_.stopListening(Ja(c),null):lt.forEach(Dn=>{const fr=f.queryToTagMap.get(Ba(Dn));f.listenProvider_.stopListening(Ja(Dn),fr)}))}!function Ca(f,c){for(let d=0;d<c.length;++d){const v=c[d];if(!v._queryParams.loadsAllData()){const M=Ba(v),j=f.queryToTagMap.get(M);f.queryToTagMap.delete(M),f.tagToQueryMap.delete(j)}}}(f,lt)}return Ie}function Il(f,c,d,v=!1){const M=c._path;let j=null,re=!1;f.syncPointTree_.foreachOnPath(M,(Dn,fr)=>{const ci=fs(Dn,M);j=j||_a(fr,ci),re=re||ra(fr)});let Ze,Ie=f.syncPointTree_.get(M);Ie?(re=re||ra(Ie),j=j||_a(Ie,mr())):(Ie=new xa,f.syncPointTree_=f.syncPointTree_.set(M,Ie)),null!=j?Ze=!0:(Ze=!1,j=U.EMPTY_NODE,f.syncPointTree_.subtree(M).foreachChild((fr,ci)=>{const ws=_a(ci,mr());ws&&(j=j.updateImmediateChild(fr,ws))}));const lt=Ic(Ie,c);if(!lt&&!c._queryParams.loadsAllData()){const Dn=Ba(c);(0,le.hu)(!f.queryToTagMap.has(Dn),"View does not exist, but we have a tag");const fr=function Jo(){return Co++}();f.queryToTagMap.set(Dn,fr),f.tagToQueryMap.set(fr,Dn)}let vn=mu(Ie,c,d,B(f.pendingWriteTree_,M),j,Ze);if(!lt&&!re&&!v){const Dn=wc(Ie,c);vn=vn.concat(function dl(f,c,d){const v=c._path,M=so(f,c),j=Ua(f,d),re=f.listenProvider_.startListening(Ja(c),M,j.hashFn,j.onComplete),Ie=f.syncPointTree_.subtree(v);if(M)(0,le.hu)(!ra(Ie.value),"If we're adding a query, it shouldn't be shadowed");else{const Ze=Ie.fold((lt,tn,vn)=>{if(!Wr(lt)&&tn&&ra(tn))return[Xl(tn).query];{let Dn=[];return tn&&(Dn=Dn.concat(na(tn).map(fr=>fr.query))),fn(vn,(fr,ci)=>{Dn=Dn.concat(ci)}),Dn}});for(let lt=0;lt<Ze.length;++lt){const tn=Ze[lt];f.listenProvider_.stopListening(Ja(tn),so(f,tn))}}return re}(f,c,Dn))}return vn}function Va(f,c,d){const M=f.pendingWriteTree_,j=f.syncPointTree_.findOnPath(c,(re,Ie)=>{const lt=_a(Ie,fs(re,c));if(lt)return lt});return sn(M,c,j,d,!0)}function la(f,c){return po(c,f.syncPointTree_,null,B(f.pendingWriteTree_,mr()))}function po(f,c,d,v){if(Wr(f.path))return Qa(f,c,d,v);{const M=c.get(mr());null==d&&null!=M&&(d=_a(M,mr()));let j=[];const re=yr(f.path),Ie=f.operationForChild(re),Ze=c.children.get(re);if(Ze&&Ie){const lt=d?d.getImmediateChild(re):null,tn=$i(v,re);j=j.concat(po(Ie,Ze,lt,tn))}return M&&(j=j.concat(Za(M,f,v,d))),j}}function Qa(f,c,d,v){const M=c.get(mr());null==d&&null!=M&&(d=_a(M,mr()));let j=[];return c.children.inorderTraversal((re,Ie)=>{const Ze=d?d.getImmediateChild(re):null,lt=$i(v,re),tn=f.operationForChild(re);tn&&(j=j.concat(Qa(tn,Ie,Ze,lt)))}),M&&(j=j.concat(Za(M,f,v,d))),j}function Ua(f,c){const d=c.query,v=so(f,d);return{hashFn:()=>(function Fr(f){return f.viewCache_.serverCache.getNode()}(c)||U.EMPTY_NODE).hash(),onComplete:M=>{if("ok"===M)return v?function yu(f,c,d){const v=$a(f,d);if(v){const M=Qs(v),j=M.path,re=M.queryId,Ie=fs(j,c);return Xa(f,j,new S(l(re),Ie))}return[]}(f,d._path,v):function Jl(f,c){return la(f,new S({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(f,d._path);{const j=function Ot(f,c){let d="Unknown Error";"too_big"===f?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?d="Client doesn't have permission to access the desired data.":"unavailable"===f&&(d="The service is unavailable");const v=new Error(f+" at "+c._path.toString()+": "+d);return v.code=f.toUpperCase(),v}(M,d);return fo(f,d,null,j)}}}}function so(f,c){const d=Ba(c);return f.queryToTagMap.get(d)}function Ba(f){return f._path.toString()+"$"+f._queryIdentifier}function $a(f,c){return f.tagToQueryMap.get(c)}function Qs(f){const c=f.indexOf("$");return(0,le.hu)(-1!==c&&c<f.length-1,"Bad queryKey."),{queryId:f.substr(c+1),path:new Cr(f.substr(0,c))}}function Xa(f,c,d){const v=f.syncPointTree_.get(c);return(0,le.hu)(v,"Missing sync point for query tag that we're tracking"),Za(v,d,B(f.pendingWriteTree_,c),null)}function Ja(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function va(){return(0,le.hu)(Xt,"Reference.ts has not been loaded"),Xt}())(f._repo,f._path):f}class el{constructor(c){this.node_=c}getImmediateChild(c){const d=this.node_.getImmediateChild(c);return new el(d)}node(){return this.node_}}class oo{constructor(c,d){this.syncTree_=c,this.path_=d}getImmediateChild(c){const d=Yr(this.path_,c);return new oo(this.syncTree_,d)}node(){return Va(this.syncTree_,this.path_)}}const bo=function(f,c,d){return f&&"object"==typeof f?((0,le.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?zu(f[".sv"],c,d):"object"==typeof f[".sv"]?hl(f[".sv"],c):void(0,le.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},zu=function(f,c,d){if("timestamp"===f)return d.timestamp;(0,le.hu)(!1,"Unexpected server value: "+f)},hl=function(f,c,d){f.hasOwnProperty("increment")||(0,le.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const v=f.increment;"number"!=typeof v&&(0,le.hu)(!1,"Unexpected increment value: "+v);const M=c.node();if((0,le.hu)(null!=M,"Expected ChildrenNode.EMPTY_NODE for nulls"),!M.isLeafNode())return v;const re=M.getValue();return"number"!=typeof re?v:re+v},ba=function(f,c,d){return Ul(f,new el(c),d)};function Ul(f,c,d){const v=f.getPriority().val(),M=bo(v,c.getImmediateChild(".priority"),d);let j;if(f.isLeafNode()){const re=f,Ie=bo(re.getValue(),c,d);return Ie!==re.getValue()||M!==re.getPriority().val()?new bs(Ie,ze(M)):f}{const re=f;return j=re,M!==re.getPriority().val()&&(j=j.updatePriority(new bs(M))),re.forEachChild(Ai,(Ie,Ze)=>{const lt=Ul(Ze,c.getImmediateChild(Ie),d);lt!==Ze&&(j=j.updateImmediateChild(Ie,lt))}),j}}class Ma{constructor(c="",d=null,v={children:{},childCount:0}){this.name=c,this.parent=d,this.node=v}}function V(f,c){let d=c instanceof Cr?c:new Cr(c),v=f,M=yr(d);for(;null!==M;){const j=(0,le.DV)(v.node.children,M)||{children:{},childCount:0};v=new Ma(M,v,j),d=zr(d),M=yr(d)}return v}function Y(f){return f.node.value}function de(f,c){f.node.value=c,jr(f)}function je(f){return f.node.childCount>0}function zt(f,c){fn(f.node.children,(d,v)=>{c(new Ma(d,f,v))})}function kn(f,c,d,v){d&&!v&&c(f),zt(f,M=>{kn(M,c,!0,v)}),d&&v&&c(f)}function Gr(f){return new Cr(null===f.parent?f.name:Gr(f.parent)+"/"+f.name)}function jr(f){null!==f.parent&&function Hi(f,c,d){const v=function Mt(f){return void 0===Y(f)&&!je(f)}(d),M=(0,le.r3)(f.node.children,c);v&&M?(delete f.node.children[c],f.node.childCount--,jr(f)):!v&&!M&&(f.node.children[c]=d.node,f.node.childCount++,jr(f))}(f.parent,f.name,f)}const mi=/[\[\].#$\/\u0000-\u001F\u007F]/,Bo=/[\[\].#$\u0000-\u001F\u007F]/,ri=10485760,ss=function(f){return"string"==typeof f&&0!==f.length&&!mi.test(f)},Ta=function(f){return"string"==typeof f&&0!==f.length&&!Bo.test(f)},Ha=function(f,c,d){const v=d instanceof Cr?new ko(d,f):d;if(void 0===c)throw new Error(f+"contains undefined "+Ct(v));if("function"==typeof c)throw new Error(f+"contains a function "+Ct(v)+" with contents = "+c.toString());if(Oe(c))throw new Error(f+"contains "+c.toString()+" "+Ct(v));if("string"==typeof c&&c.length>ri/3&&(0,le.ug)(c)>ri)throw new Error(f+"contains a string greater than "+ri+" utf8 bytes "+Ct(v)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let M=!1,j=!1;if(fn(c,(re,Ie)=>{if(".value"===re)M=!0;else if(".priority"!==re&&".sv"!==re&&(j=!0,!ss(re)))throw new Error(f+" contains an invalid key ("+re+") "+Ct(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function to(f,c){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(c),f.byteLength_+=(0,le.ug)(c),Xi(f)})(v,re),Ha(f,Ie,v),function vs(f){const c=f.parts_.pop();f.byteLength_-=(0,le.ug)(c),f.parts_.length>0&&(f.byteLength_-=1)}(v)}),M&&j)throw new Error(f+' contains ".value" child '+Ct(v)+" in addition to actual children.")}},ld=function(f,c,d,v){if(!(v&&void 0===d||Ta(d)))throw new Error((0,le.gK)(f,c)+'was an invalid path = "'+d+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class vu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wu(f,c){let d=null;for(let v=0;v<c.length;v++){const M=c[v],j=M.getPath();null!==d&&!ps(j,d.path)&&(f.eventLists_.push(d),d=null),null===d&&(d={events:[],path:j}),d.events.push(M)}d&&f.eventLists_.push(d)}function cd(f,c,d){Wu(f,d),qu(f,v=>ps(v,c))}function Ao(f,c,d){Wu(f,d),qu(f,v=>Di(v,c)||Di(c,v))}function qu(f,c){f.recursionDepth_++;let d=!0;for(let v=0;v<f.eventLists_.length;v++){const M=f.eventLists_[v];M&&(c(M.path)?(Xs(f.eventLists_[v]),f.eventLists_[v]=null):d=!1)}d&&(f.eventLists_=[]),f.recursionDepth_--}function Xs(f){for(let c=0;c<f.events.length;c++){const d=f.events[c];if(null!==d){f.events[c]=null;const v=d.getEventRunner();Ln&&Ne("event: "+d.toString()),xt(v)}}}class Js{constructor(c,d,v,M){this.repoInfo_=c,this.forceRestClient_=d,this.authTokenProvider_=v,this.appCheckProvider_=M,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=K(),this.transactionQueueTree_=new Ma,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fl(f){const d=f.infoData_.getNode(new Cr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+d}function $o(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:fl(f)})}function Fo(f,c,d,v,M){f.dataUpdateCount++;const j=new Cr(c);d=f.interceptServerDataCallback_?f.interceptServerDataCallback_(c,d):d;let re=[];if(M)if(v){const Ze=(0,le.UI)(d,lt=>ze(lt));re=function Xo(f,c,d,v){const M=$a(f,v);if(M){const j=Qs(M),re=j.path,Ie=j.queryId,Ze=fs(re,c),lt=Je.fromObject(d);return Xa(f,re,new z(l(Ie),Ze,lt))}return[]}(f.serverSyncTree_,j,Ze,M)}else{const Ze=ze(d);re=function cl(f,c,d,v){const M=$a(f,v);if(null!=M){const j=Qs(M),re=j.path,Ie=j.queryId,Ze=fs(re,c);return Xa(f,re,new P(l(Ie),Ze,d))}return[]}(f.serverSyncTree_,j,Ze,M)}else if(v){const Ze=(0,le.UI)(d,lt=>ze(lt));re=function Qo(f,c,d){const v=Je.fromObject(d);return la(f,new z({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,v))}(f.serverSyncTree_,j,Ze)}else{const Ze=ze(d);re=So(f.serverSyncTree_,j,Ze)}let Ie=j;re.length>0&&(Ie=Oa(f,j)),Ao(f.eventQueue_,Ie,re)}function Ku(f,c){Zu(f,"connected",c),!1===c&&function ga(f){gl(f,"onDisconnectEvents");const c=$o(f),d=K();rt(f.onDisconnect_,mr(),(M,j)=>{const re=function(f,c,d,v){return Ul(c,new oo(d,f),v)}(M,j,f.serverSyncTree_,c);be(d,M,re)});let v=[];rt(d,mr(),(M,j)=>{v=v.concat(So(f.serverSyncTree_,M,j));const re=zl(f,M);Oa(f,re)}),f.onDisconnect_=K(),Ao(f.eventQueue_,mr(),v)}(f)}function Zu(f,c,d){const v=new Cr("/.info/"+c),M=ze(d);f.infoData_.updateSnapshot(v,M);const j=So(f.infoSyncTree_,v,M);Ao(f.eventQueue_,v,j)}function eu(f){return f.nextWriteId_++}function Hl(f,c,d,v,M){gl(f,"set",{path:c.toString(),value:d,priority:v});const j=$o(f),re=ze(d,v),Ie=Va(f.serverSyncTree_,c),Ze=ba(re,Ie,j),lt=eu(f),tn=ia(f.serverSyncTree_,c,Ze,lt,!0);Wu(f.eventQueue_,tn),f.server_.put(c.toString(),re.val(!0),(Dn,fr)=>{const ci="ok"===Dn;ci||Fe("set at "+c+" failed: "+Dn);const ws=sa(f.serverSyncTree_,lt,!ci);Ao(f.eventQueue_,c,ws),function ma(f,c,d,v){c&&xt(()=>{if("ok"===d)c(null);else{const M=(d||"error").toUpperCase();let j=M;v&&(j+=": "+v);const re=new Error(j);re.code=M,c(re)}})}(0,M,Dn,fr)});const vn=zl(f,c);Oa(f,vn),Ao(f.eventQueue_,vn,[])}function ru(f,c,d){let v;v=".info"===yr(c._path)?fo(f.infoSyncTree_,c,d):fo(f.serverSyncTree_,c,d),cd(f.eventQueue_,c._path,v)}function gl(f,...c){let d="";f.persistentConnection_&&(d=f.persistentConnection_.id+":"),Ne(d,...c)}function Cu(f,c,d){return Va(f.serverSyncTree_,c,d)||U.EMPTY_NODE}function su(f,c=f.transactionQueueTree_){if(c||Tu(f,c),Y(c)){const d=wa(f,c);(0,le.hu)(d.length>0,"Sending zero length transaction queue"),d.every(M=>0===M.status)&&function bu(f,c,d){const v=d.map(lt=>lt.currentWriteId),M=Cu(f,c,v);let j=M;const re=M.hash();for(let lt=0;lt<d.length;lt++){const tn=d[lt];(0,le.hu)(0===tn.status,"tryToSendTransactionQueue_: items in queue should all be run."),tn.status=1,tn.retryCount++;const vn=fs(c,tn.path);j=j.updateChild(vn,tn.currentOutputSnapshotRaw)}const Ie=j.val(!0),Ze=c;f.server_.put(Ze.toString(),Ie,lt=>{gl(f,"transaction put response",{path:Ze.toString(),status:lt});let tn=[];if("ok"===lt){const vn=[];for(let Dn=0;Dn<d.length;Dn++)d[Dn].status=2,tn=tn.concat(sa(f.serverSyncTree_,d[Dn].currentWriteId)),d[Dn].onComplete&&vn.push(()=>d[Dn].onComplete(null,!0,d[Dn].currentOutputSnapshotResolved)),d[Dn].unwatcher();Tu(f,V(f.transactionQueueTree_,c)),su(f,f.transactionQueueTree_),Ao(f.eventQueue_,c,tn);for(let Dn=0;Dn<vn.length;Dn++)xt(vn[Dn])}else{if("datastale"===lt)for(let vn=0;vn<d.length;vn++)d[vn].status=3===d[vn].status?4:0;else{Fe("transaction at "+Ze.toString()+" failed: "+lt);for(let vn=0;vn<d.length;vn++)d[vn].status=4,d[vn].abortReason=lt}Oa(f,c)}},re)}(f,Gr(c),d)}else je(c)&&zt(c,d=>{su(f,d)})}function Oa(f,c){const d=Na(f,c),v=Gr(d);return function Xu(f,c,d){if(0===c.length)return;const v=[];let M=[];const re=c.filter(Ie=>0===Ie.status).map(Ie=>Ie.currentWriteId);for(let Ie=0;Ie<c.length;Ie++){const Ze=c[Ie],lt=fs(d,Ze.path);let vn,tn=!1;if((0,le.hu)(null!==lt,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ze.status)tn=!0,vn=Ze.abortReason,M=M.concat(sa(f.serverSyncTree_,Ze.currentWriteId,!0));else if(0===Ze.status)if(Ze.retryCount>=25)tn=!0,vn="maxretry",M=M.concat(sa(f.serverSyncTree_,Ze.currentWriteId,!0));else{const Dn=Cu(f,Ze.path,re);Ze.currentInputSnapshot=Dn;const fr=c[Ie].update(Dn.val());if(void 0!==fr){Ha("transaction failed: Data returned ",fr,Ze.path);let ci=ze(fr);"object"==typeof fr&&null!=fr&&(0,le.r3)(fr,".priority")||(ci=ci.updatePriority(Dn.getPriority()));const aa=Ze.currentWriteId,Fu=$o(f),Vc=ba(ci,Dn,Fu);Ze.currentOutputSnapshotRaw=ci,Ze.currentOutputSnapshotResolved=Vc,Ze.currentWriteId=eu(f),re.splice(re.indexOf(aa),1),M=M.concat(ia(f.serverSyncTree_,Ze.path,Vc,Ze.currentWriteId,Ze.applyLocally)),M=M.concat(sa(f.serverSyncTree_,aa,!0))}else tn=!0,vn="nodata",M=M.concat(sa(f.serverSyncTree_,Ze.currentWriteId,!0))}Ao(f.eventQueue_,d,M),M=[],tn&&(c[Ie].status=2,setTimeout(c[Ie].unwatcher,Math.floor(0)),c[Ie].onComplete&&v.push("nodata"===vn?()=>c[Ie].onComplete(null,!1,c[Ie].currentInputSnapshot):()=>c[Ie].onComplete(new Error(vn),!1,null)))}Tu(f,f.transactionQueueTree_);for(let Ie=0;Ie<v.length;Ie++)xt(v[Ie]);su(f,f.transactionQueueTree_)}(f,wa(f,d),v),v}function Na(f,c){let d,v=f.transactionQueueTree_;for(d=yr(c);null!==d&&void 0===Y(v);)v=V(v,d),d=yr(c=zr(c));return v}function wa(f,c){const d=[];return Ju(f,c,d),d.sort((v,M)=>v.order-M.order),d}function Ju(f,c,d){const v=Y(c);if(v)for(let M=0;M<v.length;M++)d.push(v[M]);zt(c,M=>{Ju(f,M,d)})}function Tu(f,c){const d=Y(c);if(d){let v=0;for(let M=0;M<d.length;M++)2!==d[M].status&&(d[v]=d[M],v++);d.length=v,de(c,d.length>0?d:void 0)}zt(c,v=>{Tu(f,v)})}function zl(f,c){const d=Gr(Na(f,c)),v=V(f.transactionQueueTree_,c);return function Lr(f,c,d){let v=d?f:f.parent;for(;null!==v;){if(c(v))return!0;v=v.parent}}(v,M=>{Dc(f,M)}),Dc(f,v),kn(v,M=>{Dc(f,M)}),d}function Dc(f,c){const d=Y(c);if(d){const v=[];let M=[],j=-1;for(let re=0;re<d.length;re++)3===d[re].status||(1===d[re].status?((0,le.hu)(j===re-1,"All SENT items should be at beginning of queue."),j=re,d[re].status=3,d[re].abortReason="set"):((0,le.hu)(0===d[re].status,"Unexpected transaction status in abort"),d[re].unwatcher(),M=M.concat(sa(f.serverSyncTree_,d[re].currentWriteId,!0)),d[re].onComplete&&v.push(d[re].onComplete.bind(null,new Error("set"),!1,null))));-1===j?de(c,void 0):d.length=j+1,Ao(f.eventQueue_,Gr(c),M);for(let re=0;re<v.length;re++)xt(v[re])}}const wu=function(f,c){const d=Iu(f),v=d.namespace;return"firebase.com"===d.domain&&Ut(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==d.domain&&Ut("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Gt(d.host,d.secure,v,"ws"===d.scheme||"wss"===d.scheme,c,"",v!==d.subdomain),path:new Cr(d.pathString)}},Iu=function(f){let c="",d="",v="",M="",j="",re=!0,Ie="https",Ze=443;if("string"==typeof f){let lt=f.indexOf("//");lt>=0&&(Ie=f.substring(0,lt-1),f=f.substring(lt+2));let tn=f.indexOf("/");-1===tn&&(tn=f.length);let vn=f.indexOf("?");-1===vn&&(vn=f.length),c=f.substring(0,Math.min(tn,vn)),tn<vn&&(M=function Ac(f){let c="";const d=f.split("/");for(let v=0;v<d.length;v++)if(d[v].length>0){let M=d[v];try{M=decodeURIComponent(M.replace(/\+/g," "))}catch(j){}c+="/"+M}return c}(f.substring(tn,vn)));const Dn=function xc(f){const c={};"?"===f.charAt(0)&&(f=f.substring(1));for(const d of f.split("&")){if(0===d.length)continue;const v=d.split("=");2===v.length?c[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):Fe(`Invalid query segment '${d}' in query '${f}'`)}return c}(f.substring(Math.min(f.length,vn)));lt=c.indexOf(":"),lt>=0?(re="https"===Ie||"wss"===Ie,Ze=parseInt(c.substring(lt+1),10)):lt=c.length;const fr=c.slice(0,lt);if("localhost"===fr.toLowerCase())d="localhost";else if(fr.split(".").length<=2)d=fr;else{const ci=c.indexOf(".");v=c.substring(0,ci).toLowerCase(),d=c.substring(ci+1),j=v}"ns"in Dn&&(j=Dn.ns)}return{host:c,port:Ze,domain:d,subdomain:v,secure:re,scheme:Ie,pathString:M,namespace:j}};class ml{constructor(c,d,v,M){this.eventType=c,this.eventRegistration=d,this.snapshot=v,this.prevName=M}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,le.Wl)(this.snapshot.exportVal())}}class ec{constructor(c,d,v){this.eventRegistration=c,this.error=d,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class yl{constructor(c,d){this.snapshotCallback=c,this.cancelCallback=d}onValue(c,d){this.snapshotCallback.call(null,c,d)}onCancel(c){return(0,le.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class jo{constructor(c,d,v,M){this._repo=c,this._path=d,this._queryParams=v,this._orderByCalled=M}get key(){return Wr(this._path)?null:Si(this._path)}get ref(){return new ka(this._repo,this._path)}get _queryIdentifier(){const c=We(this._queryParams),d=Xn(c);return"{}"===d?"default":d}get _queryObject(){return We(this._queryParams)}isEqual(c){if(!((c=(0,le.m9)(c))instanceof jo))return!1;const d=this._repo===c._repo,v=ps(this._path,c._path);return d&&v&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function zs(f){let c="";for(let d=f.pieceNum_;d<f.pieces_.length;d++)""!==f.pieces_[d]&&(c+="/"+encodeURIComponent(String(f.pieces_[d])));return c||"/"}(this._path)}}class ka extends jo{constructor(c,d){super(c,d,new ts,!1)}get parent(){const c=cs(this._path);return null===c?null:new ka(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class _l{constructor(c,d,v){this._node=c,this.ref=d,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const d=new Cr(c),v=tl(this.ref,c);return new _l(this._node.getChild(d),v,Ai)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,M)=>c(new _l(M,tl(this.ref,v),Ai)))}hasChild(c){const d=new Cr(c);return!this._node.getChild(d).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function eo(f,c){return(f=(0,le.m9)(f))._checkNotDeleted("ref"),void 0!==c?tl(f._root,c):f._root}function tl(f,c){return null===yr((f=(0,le.m9)(f))._path)?(d=c,d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),ld("child","path",d,!1)):ld("child","path",c,!1),new ka(f._repo,Yr(f._path,c));var d}function Mc(f,c){(function(f,c){if(".info"===yr(c))throw new Error(f+" failed = Can't modify data under /.info/")})("set",(f=(0,le.m9)(f))._path),function(f,c,d,v){v&&void 0===c||Ha((0,le.gK)(f,"value"),c,d)}("set",c,f._path,!1);const d=new le.BH;return Hl(f._repo,f._path,c,null,d.wrapCallback(()=>{})),d.promise}class Ru{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,d){const v=d._queryParams.getIndex();return new ml("value",this,new _l(c.snapshotNode,new ka(d._repo,d._path),v))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new ec(this,c,d):null}matches(c){return c instanceof Ru&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tc{constructor(c,d){this.eventType=c,this.callbackContext=d}respondsTo(c){let d="children_added"===c?"child_added":c;return d="children_removed"===d?"child_removed":d,this.eventType===d}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new ec(this,c,d):null}createEvent(c,d){(0,le.hu)(null!=c.childName,"Child events should have a childName.");const v=tl(new ka(d._repo,d._path),c.childName),M=d._queryParams.getIndex();return new ml(c.type,this,new _l(c.snapshotNode,v,M),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof tc&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Go(f,c,d,v){return function Ho(f,c,d,v,M){let j;if("object"==typeof v&&(j=void 0,M=v),"function"==typeof v&&(j=v),M&&M.onlyOnce){const Ze=d,lt=(tn,vn)=>{ru(f._repo,f,Ie),Ze(tn,vn)};lt.userCallback=d.userCallback,lt.context=d.context,d=lt}const re=new yl(d,j||void 0),Ie="value"===c?new Ru(re):new tc(c,re);return function nu(f,c,d){let v;v=".info"===yr(c._path)?Il(f.infoSyncTree_,c,d):Il(f.serverSyncTree_,c,d),cd(f.eventQueue_,c._path,v)}(f._repo,f,Ie),()=>ru(f._repo,f,Ie)}(f,"value",c,d,v)}(function Eo(f){(0,le.hu)(!Uo,"__referenceConstructor has already been defined"),Uo=f})(ka),function Ya(f){(0,le.hu)(!Xt,"__referenceConstructor has already been defined"),Xt=f}(ka);const kc={};function Fc(f,c,d,v,M){let j=v||f.options.databaseURL;void 0===j&&(f.options.projectId||Ut("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ne("Using default host for project ",f.options.projectId),j=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Ze,lt,re=wu(j,M),Ie=re.repoInfo;"undefined"!=typeof process&&process.env&&(lt=process.env.FIREBASE_DATABASE_EMULATOR_HOST),lt?(Ze=!0,j=`http://${lt}?ns=${Ie.namespace}`,re=wu(j,M),Ie=re.repoInfo):Ze=!re.repoInfo.secure;const tn=M&&Ze?new Zr(Zr.OWNER):new tr(f.name,f.options,c);(function(f,c){const d=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!ss(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==d.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),Ta(f)}(d))throw new Error((0,le.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",re),Wr(re.path)||Ut("Database URL must point to the root of a Firebase Database (not including a child path).");const vn=function xo(f,c,d,v){let M=kc[c.name];M||(M={},kc[c.name]=M);let j=M[f.toURLString()];return j&&Ut("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),j=new Js(f,false,d,v),M[f.toURLString()]=j,j}(Ie,f,tn,new Yn(f.name,d));return new za(vn,f)}class za{constructor(c,d){this._repoInternal=c,this.app=d,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $l(f,c,d){if(f.stats_=os(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new Mn(f.repoInfo_,(v,M,j,re)=>{Fo(f,v,M,j,re)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>Ku(f,!0),0);else{if(null!=d){if("object"!=typeof d)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,le.Wl)(d)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}f.persistentConnection_=new ds(f.repoInfo_,c,(v,M,j,re)=>{Fo(f,v,M,j,re)},v=>{Ku(f,v)},v=>{!function As(f,c){fn(c,(d,v)=>{Zu(f,d,v)})}(f,v)},f.authTokenProvider_,f.appCheckProvider_,d),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(v=>{f.server_.refreshAuthToken(v)}),f.appCheckProvider_.addTokenChangeListener(v=>{f.server_.refreshAppCheckToken(v.token)}),f.statsReporter_=function Ii(f,c){const d=f.toString();return dr[d]||(dr[d]=c()),dr[d]}(f.repoInfo_,()=>new gi(f.stats_,f.server_)),f.infoData_=new te,f.infoSyncTree_=new Ea({startListening:(v,M,j,re)=>{let Ie=[];const Ze=f.infoData_.getNode(v._path);return Ze.isEmpty()||(Ie=So(f.infoSyncTree_,v._path,Ze),setTimeout(()=>{re("ok")},0)),Ie},stopListening:()=>{}}),Zu(f,"connected",!1),f.serverSyncTree_=new Ea({startListening:(v,M,j,re)=>(f.server_.listen(v,j,M,(Ie,Ze)=>{const lt=re(Ie,Ze);Ao(f.eventQueue_,v._path,lt)}),[]),stopListening:(v,M)=>{f.server_.unlisten(v,M)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ka(this._repo,mr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function yd(f,c){const d=kc[c];(!d||d[f.key]!==f)&&Ut(`Database ${c}(${f.repoInfo_}) has already been deleted.`),function Qu(f){f.persistentConnection_&&f.persistentConnection_.interrupt("repo_interrupt")}(f),delete d[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&Ut("Cannot call "+c+" on a deleted database.")}}function T(f=(0,Z.getApp)(),c){const d=(0,Z._getProvider)(f,"database").getImmediate({identifier:c}),v=(0,le.P0)("database");return v&&function p(f,c,d,v={}){(f=(0,le.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&Ut("Cannot call useEmulator() after instance has already been initialized.");const M=f._repoInternal;let j;if(M.repoInfo_.nodeAdmin)v.mockUserToken&&Ut('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),j=new Zr(Zr.OWNER);else if(v.mockUserToken){const re="string"==typeof v.mockUserToken?v.mockUserToken:(0,le.Sg)(v.mockUserToken,f.app.options.projectId);j=new Zr(re)}!function il(f,c,d,v){f.repoInfo_=new Gt(`${c}:${d}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams),v&&(f.authTokenProvider_=v)}(M,c,d,j)}(d,...v),d}ds.prototype.simpleListen=function(f,c){this.sendRequest("q",{p:f},c)},ds.prototype.echo=function(f,c){this.sendRequest("echo",{d:f},c)},function Ce(f){(function ft(f){Qe=f})(Z.SDK_VERSION),(0,Z._registerComponent)(new ge.wA("database",(c,{instanceIdentifier:d})=>Fc(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),d),"PUBLIC").setMultipleInstances(!0)),(0,Z.registerVersion)(Xe,"0.14.0",f),(0,Z.registerVersion)(Xe,"0.14.0","esm2017")}()},8766:(jn,Dt,H)=>{H.d(Dt,{Lj:()=>xe,X3:()=>un});var g=H(5861);let ge,le;const gt=new WeakMap,Qe=new WeakMap,ft=new WeakMap,Pe=new WeakMap,Me=new WeakMap;let vt={get(Fe,Lt,Oe){if(Fe instanceof IDBTransaction){if("done"===Lt)return Qe.get(Fe);if("objectStoreNames"===Lt)return Fe.objectStoreNames||ft.get(Fe);if("store"===Lt)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return Jt(Fe[Lt])},set:(Fe,Lt,Oe)=>(Fe[Lt]=Oe,!0),has:(Fe,Lt)=>Fe instanceof IDBTransaction&&("done"===Lt||"store"===Lt)||Lt in Fe};function Pt(Fe){return"function"==typeof Fe?function bn(Fe){return Fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Xe(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Fe)?function(...Lt){return Fe.apply(Ln(this),Lt),Jt(gt.get(this))}:function(...Lt){return Jt(Fe.apply(Ln(this),Lt))}:function(Lt,...Oe){const Tt=Fe.call(Ln(this),Lt,...Oe);return ft.set(Tt,Lt.sort?Lt.sort():[Lt]),Jt(Tt)}}(Fe):(Fe instanceof IDBTransaction&&function pn(Fe){if(Qe.has(Fe))return;const Lt=new Promise((Oe,Tt)=>{const et=()=>{Fe.removeEventListener("complete",Nt),Fe.removeEventListener("error",At),Fe.removeEventListener("abort",At)},Nt=()=>{Oe(),et()},At=()=>{Tt(Fe.error||new DOMException("AbortError","AbortError")),et()};Fe.addEventListener("complete",Nt),Fe.addEventListener("error",At),Fe.addEventListener("abort",At)});Qe.set(Fe,Lt)}(Fe),((Fe,Lt)=>Lt.some(Oe=>Fe instanceof Oe))(Fe,function Ye(){return ge||(ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Fe,vt):Fe)}function Jt(Fe){if(Fe instanceof IDBRequest)return function Et(Fe){const Lt=new Promise((Oe,Tt)=>{const et=()=>{Fe.removeEventListener("success",Nt),Fe.removeEventListener("error",At)},Nt=()=>{Oe(Jt(Fe.result)),et()},At=()=>{Tt(Fe.error),et()};Fe.addEventListener("success",Nt),Fe.addEventListener("error",At)});return Lt.then(Oe=>{Oe instanceof IDBCursor&&gt.set(Oe,Fe)}).catch(()=>{}),Me.set(Lt,Fe),Lt}(Fe);if(Pe.has(Fe))return Pe.get(Fe);const Lt=Pt(Fe);return Lt!==Fe&&(Pe.set(Fe,Lt),Me.set(Lt,Fe)),Lt}const Ln=Fe=>Me.get(Fe);function un(Fe,Lt,{blocked:Oe,upgrade:Tt,blocking:et,terminated:Nt}={}){const At=indexedDB.open(Fe,Lt),on=Jt(At);return Tt&&At.addEventListener("upgradeneeded",wn=>{Tt(Jt(At.result),wn.oldVersion,wn.newVersion,Jt(At.transaction))}),Oe&&At.addEventListener("blocked",()=>Oe()),on.then(wn=>{Nt&&wn.addEventListener("close",()=>Nt()),et&&wn.addEventListener("versionchange",()=>et())}).catch(()=>{}),on}function xe(Fe,{blocked:Lt}={}){const Oe=indexedDB.deleteDatabase(Fe);return Lt&&Oe.addEventListener("blocked",()=>Lt()),Jt(Oe).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],Kt=new Map;function Ut(Fe,Lt){if(!(Fe instanceof IDBDatabase)||Lt in Fe||"string"!=typeof Lt)return;if(Kt.get(Lt))return Kt.get(Lt);const Oe=Lt.replace(/FromIndex$/,""),Tt=Lt!==Oe,et=ot.includes(Oe);if(!(Oe in(Tt?IDBIndex:IDBObjectStore).prototype)||!et&&!Ne.includes(Oe))return;const Nt=function(){var At=(0,g.Z)(function*(on,...wn){const Xn=this.transaction(on,et?"readwrite":"readonly");let Jn=Xn.store;return Tt&&(Jn=Jn.index(wn.shift())),(yield Promise.all([Jn[Oe](...wn),et&&Xn.done]))[0]});return function(wn){return At.apply(this,arguments)}}();return Kt.set(Lt,Nt),Nt}!function nn(Fe){vt=Fe(vt)}(Fe=>cC(uC({},Fe),{get:(Lt,Oe,Tt)=>Ut(Lt,Oe)||Fe.get(Lt,Oe,Tt),has:(Lt,Oe)=>!!Ut(Lt,Oe)||Fe.has(Lt,Oe)}))},2290:(jn,Dt,H)=>{H.d(Dt,{Rh:()=>Xn,_W:()=>At});var g=H(5e3),Z=H(1777),ge=H(7579),le=H(9808),Ye=H(2313);const Xe=["toast-component",""];function gt(Ft,Ot){if(1&Ft){const st=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(st),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function Qe(Ft,Ot){if(1&Ft&&(g.ynx(0),g._uU(1),g.BQk()),2&Ft){const st=g.oxw(2);g.xp6(1),g.hij("[",st.duplicatesCount+1,"]")}}function ft(Ft,Ot){if(1&Ft&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,Qe,2,1,"ng-container",4),g.qZA()),2&Ft){const st=g.oxw();g.Tol(st.options.titleClass),g.uIk("aria-label",st.title),g.xp6(1),g.hij(" ",st.title," "),g.xp6(1),g.Q6J("ngIf",st.duplicatesCount)}}function Pe(Ft,Ot){if(1&Ft&&g._UZ(0,"div",7),2&Ft){const st=g.oxw();g.Tol(st.options.messageClass),g.Q6J("innerHTML",st.message,g.oJD)}}function Me(Ft,Ot){if(1&Ft&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&Ft){const st=g.oxw();g.Tol(st.options.messageClass),g.uIk("aria-label",st.message),g.xp6(1),g.hij(" ",st.message," ")}}function Et(Ft,Ot){if(1&Ft&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&Ft){const st=g.oxw();g.xp6(1),g.Udp("width",st.width+"%")}}function pn(Ft,Ot){if(1&Ft){const st=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(st),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function vt(Ft,Ot){if(1&Ft&&(g.ynx(0),g._uU(1),g.BQk()),2&Ft){const st=g.oxw(2);g.xp6(1),g.hij("[",st.duplicatesCount+1,"]")}}function nn(Ft,Ot){if(1&Ft&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,vt,2,1,"ng-container",4),g.qZA()),2&Ft){const st=g.oxw();g.Tol(st.options.titleClass),g.uIk("aria-label",st.title),g.xp6(1),g.hij(" ",st.title," "),g.xp6(1),g.Q6J("ngIf",st.duplicatesCount)}}function bn(Ft,Ot){if(1&Ft&&g._UZ(0,"div",7),2&Ft){const st=g.oxw();g.Tol(st.options.messageClass),g.Q6J("innerHTML",st.message,g.oJD)}}function Pt(Ft,Ot){if(1&Ft&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&Ft){const st=g.oxw();g.Tol(st.options.messageClass),g.uIk("aria-label",st.message),g.xp6(1),g.hij(" ",st.message," ")}}function Jt(Ft,Ot){if(1&Ft&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&Ft){const st=g.oxw();g.xp6(1),g.Udp("width",st.width+"%")}}class xe{constructor(Ot,st){this.component=Ot,this.injector=st}attach(Ot,st){return this._attachedHost=Ot,Ot.attach(this,st)}detach(){const Ot=this._attachedHost;if(Ot)return this._attachedHost=void 0,Ot.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Ot){this._attachedHost=Ot}}class ot{constructor(Ot,st,It,ut,Wt,xt){this.toastId=Ot,this.config=st,this.message=It,this.title=ut,this.toastType=Wt,this.toastRef=xt,this._onTap=new ge.x,this._onAction=new ge.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Ot){this._onAction.next(Ot)}onAction(){return this._onAction.asObservable()}}const Kt={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},Ut=new g.OlP("ToastConfig");class Fe{constructor(Ot){this._overlayRef=Ot,this.duplicatesCount=0,this._afterClosed=new ge.x,this._activate=new ge.x,this._manualClose=new ge.x,this._resetTimeout=new ge.x,this._countDuplicate=new ge.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Ot,st){Ot&&this._resetTimeout.next(),st&&this._countDuplicate.next(++this.duplicatesCount)}}class Lt{constructor(Ot,st){this._toastPackage=Ot,this._parentInjector=st}get(Ot,st,It){return Ot===ot?this._toastPackage:this._parentInjector.get(Ot,st,It)}}class Oe extends class Ne{attach(Ot,st){return this._attachedPortal=Ot,this.attachComponentPortal(Ot,st)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Ot){this._disposeFn=Ot}}{constructor(Ot,st,It){super(),this._hostDomElement=Ot,this._componentFactoryResolver=st,this._appRef=It}attachComponentPortal(Ot,st){const It=this._componentFactoryResolver.resolveComponentFactory(Ot.component);let ut;return ut=It.create(Ot.injector),this._appRef.attachView(ut.hostView),this.setDisposeFn(()=>{this._appRef.detachView(ut.hostView),ut.destroy()}),st?this._hostDomElement.insertBefore(this._getComponentRootNode(ut),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(ut)),ut}_getComponentRootNode(Ot){return Ot.hostView.rootNodes[0]}}class Tt{constructor(Ot){this._portalHost=Ot}attach(Ot,st=!0){return this._portalHost.attach(Ot,st)}detach(){return this._portalHost.detach()}}let et=(()=>{class Ft{constructor(st){this._document=st}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const st=this._document.createElement("div");st.classList.add("overlay-container"),st.setAttribute("aria-live","polite"),this._document.body.appendChild(st),this._containerElement=st}}return Ft.\u0275fac=function(st){return new(st||Ft)(g.LFG(le.K0))},Ft.\u0275prov=g.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"root"}),Ft})(),Nt=(()=>{class Ft{constructor(st,It,ut,Wt){this._overlayContainer=st,this._componentFactoryResolver=It,this._appRef=ut,this._document=Wt,this._paneElements=new Map}create(st,It){return this._createOverlayRef(this.getPaneElement(st,It))}getPaneElement(st="",It){return this._paneElements.get(It)||this._paneElements.set(It,{}),this._paneElements.get(It)[st]||(this._paneElements.get(It)[st]=this._createPaneElement(st,It)),this._paneElements.get(It)[st]}_createPaneElement(st,It){const ut=this._document.createElement("div");return ut.id="toast-container",ut.classList.add(st),ut.classList.add("toast-container"),It?It.getContainerElement().appendChild(ut):this._overlayContainer.getContainerElement().appendChild(ut),ut}_createPortalHost(st){return new Oe(st,this._componentFactoryResolver,this._appRef)}_createOverlayRef(st){return new Tt(this._createPortalHost(st))}}return Ft.\u0275fac=function(st){return new(st||Ft)(g.LFG(et),g.LFG(g._Vd),g.LFG(g.z2F),g.LFG(le.K0))},Ft.\u0275prov=g.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"root"}),Ft})(),At=(()=>{class Ft{constructor(st,It,ut,Wt,xt){this.overlay=It,this._injector=ut,this.sanitizer=Wt,this.ngZone=xt,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},st.default),st.config),st.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},st.default.iconClasses),st.config.iconClasses))}show(st,It,ut={},Wt=""){return this._preBuildNotification(Wt,st,It,this.applyConfig(ut))}success(st,It,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",st,It,this.applyConfig(ut))}error(st,It,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",st,It,this.applyConfig(ut))}info(st,It,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",st,It,this.applyConfig(ut))}warning(st,It,ut={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",st,It,this.applyConfig(ut))}clear(st){for(const It of this.toasts)if(void 0!==st){if(It.toastId===st)return void It.toastRef.manualClose()}else It.toastRef.manualClose()}remove(st){const It=this._findToast(st);if(!It||(It.activeToast.toastRef.close(),this.toasts.splice(It.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const ut=this.toasts[this.currentlyActive].toastRef;ut.isInactive()||(this.currentlyActive=this.currentlyActive+1,ut.activate())}return!0}findDuplicate(st="",It="",ut,Wt){const{includeTitleDuplicates:xt}=this.toastrConfig;for(const Zt of this.toasts){const Un=xt&&Zt.title===st;if((!xt||Un)&&Zt.message===It)return Zt.toastRef.onDuplicate(ut,Wt),Zt}return null}applyConfig(st={}){return Object.assign(Object.assign({},this.toastrConfig),st)}_findToast(st){for(let It=0;It<this.toasts.length;It++)if(this.toasts[It].toastId===st)return{index:It,activeToast:this.toasts[It]};return null}_preBuildNotification(st,It,ut,Wt){return Wt.onActivateTick?this.ngZone.run(()=>this._buildNotification(st,It,ut,Wt)):this._buildNotification(st,It,ut,Wt)}_buildNotification(st,It,ut,Wt){if(!Wt.toastComponent)throw new Error("toastComponent required");const xt=this.findDuplicate(ut,It,this.toastrConfig.resetTimeoutOnDuplicate&&Wt.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&ut||It)&&this.toastrConfig.preventDuplicates&&null!==xt)return xt;this.previousToastMessage=It;let Zt=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Zt=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Un=this.overlay.create(Wt.positionClass,this.overlayContainer);this.index=this.index+1;let Yn=It;It&&Wt.enableHtml&&(Yn=this.sanitizer.sanitize(g.q3G.HTML,It));const tr=new Fe(Un),Zr=new ot(this.index,Wt,Yn,ut,st,tr),si=new Lt(Zr,this._injector),qn=new xe(Wt.toastComponent,si),Hr=Un.attach(qn,this.toastrConfig.newestOnTop);tr.componentInstance=Hr.instance;const Tr={toastId:this.index,title:ut||"",message:It||"",toastRef:tr,onShown:tr.afterActivate(),onHidden:tr.afterClosed(),onTap:Zr.onTap(),onAction:Zr.onAction(),portal:Hr};return Zt||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Tr.toastRef.activate()})),this.toasts.push(Tr),Tr}}return Ft.\u0275fac=function(st){return new(st||Ft)(g.LFG(Ut),g.LFG(Nt),g.LFG(g.zs3),g.LFG(Ye.H7),g.LFG(g.R0b))},Ft.\u0275prov=g.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"root"}),Ft})(),on=(()=>{class Ft{constructor(st,It,ut){this.toastrService=st,this.toastPackage=It,this.ngZone=ut,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=It.message,this.title=It.title,this.options=It.config,this.originalTimeout=It.config.timeOut,this.toastClasses=`${It.toastType} ${It.config.toastClass}`,this.sub=It.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=It.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=It.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=It.toastRef.countDuplicate().subscribe(Wt=>{this.duplicatesCount=Wt})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const st=(new Date).getTime();this.width=(this.hideTime-st)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(st,It){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(st),It)):this.timeout=setTimeout(()=>st(),It)}outsideInterval(st,It){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(st),It)):this.intervalId=setInterval(()=>st(),It)}runInsideAngular(st){this.ngZone?this.ngZone.run(()=>st()):st()}}return Ft.\u0275fac=function(st){return new(st||Ft)(g.Y36(At),g.Y36(ot),g.Y36(g.R0b))},Ft.\u0275cmp=g.Xpm({type:Ft,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(st,It){1&st&&g.NdJ("click",function(){return It.tapToast()})("mouseenter",function(){return It.stickAround()})("mouseleave",function(){return It.delayedHideToast()}),2&st&&(g.d8E("@flyInOut",It.state),g.Tol(It.toastClasses),g.Udp("display",It.displayStyle))},attrs:Xe,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(st,It){1&st&&(g.YNc(0,gt,3,0,"button",0),g.YNc(1,ft,3,5,"div",1),g.YNc(2,Pe,1,3,"div",2),g.YNc(3,Me,2,4,"div",3),g.YNc(4,Et,2,2,"div",4)),2&st&&(g.Q6J("ngIf",It.options.closeButton),g.xp6(1),g.Q6J("ngIf",It.title),g.xp6(1),g.Q6J("ngIf",It.message&&It.options.enableHtml),g.xp6(1),g.Q6J("ngIf",It.message&&!It.options.enableHtml),g.xp6(1),g.Q6J("ngIf",It.options.progressBar))},directives:[le.O5],encapsulation:2,data:{animation:[(0,Z.X$)("flyInOut",[(0,Z.SB)("inactive",(0,Z.oB)({opacity:0})),(0,Z.SB)("active",(0,Z.oB)({opacity:1})),(0,Z.SB)("removed",(0,Z.oB)({opacity:0})),(0,Z.eR)("inactive => active",(0,Z.jt)("{{ easeTime }}ms {{ easing }}")),(0,Z.eR)("active => removed",(0,Z.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),Ft})();const wn=Object.assign(Object.assign({},Kt),{toastComponent:on});let Xn=(()=>{class Ft{static forRoot(st={}){return{ngModule:Ft,providers:[{provide:Ut,useValue:{default:wn,config:st}}]}}}return Ft.\u0275fac=function(st){return new(st||Ft)},Ft.\u0275mod=g.oAB({type:Ft}),Ft.\u0275inj=g.cJS({imports:[[le.ez]]}),Ft})(),fn=(()=>{class Ft{constructor(st,It,ut){this.toastrService=st,this.toastPackage=It,this.appRef=ut,this.width=-1,this.toastClasses="",this.state="inactive",this.message=It.message,this.title=It.title,this.options=It.config,this.originalTimeout=It.config.timeOut,this.toastClasses=`${It.toastType} ${It.config.toastClass}`,this.sub=It.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=It.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=It.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=It.toastRef.countDuplicate().subscribe(Wt=>{this.duplicatesCount=Wt})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const st=(new Date).getTime();this.width=(this.hideTime-st)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return Ft.\u0275fac=function(st){return new(st||Ft)(g.Y36(At),g.Y36(ot),g.Y36(g.z2F))},Ft.\u0275cmp=g.Xpm({type:Ft,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(st,It){1&st&&g.NdJ("click",function(){return It.tapToast()})("mouseenter",function(){return It.stickAround()})("mouseleave",function(){return It.delayedHideToast()}),2&st&&(g.Tol(It.toastClasses),g.Udp("display",It.displayStyle))},attrs:Xe,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(st,It){1&st&&(g.YNc(0,pn,3,0,"button",0),g.YNc(1,nn,3,5,"div",1),g.YNc(2,bn,1,3,"div",2),g.YNc(3,Pt,2,4,"div",3),g.YNc(4,Jt,2,2,"div",4)),2&st&&(g.Q6J("ngIf",It.options.closeButton),g.xp6(1),g.Q6J("ngIf",It.title),g.xp6(1),g.Q6J("ngIf",It.message&&It.options.enableHtml),g.xp6(1),g.Q6J("ngIf",It.message&&!It.options.enableHtml),g.xp6(1),g.Q6J("ngIf",It.options.progressBar))},directives:[le.O5],encapsulation:2}),Ft})();Object.assign(Object.assign({},Kt),{toastComponent:fn})},9485:(jn,Dt,H)=>{H.d(Dt,{YC:()=>Ot,kz:()=>It,nF:()=>st});var g=H(5e3),Z=H(9808),ge=H(8879),le=H(7579),Ye=H(9646);const Xe=["prevElRef"],gt=["nextElRef"],Qe=["scrollbarElRef"],ft=["paginationElRef"];function Pe(ut,Wt){1&ut&&(g.ynx(0),g._UZ(1,"div",6,7)(3,"div",8,9),g.BQk())}function Me(ut,Wt){1&ut&&g._UZ(0,"div",10,11)}function Et(ut,Wt){1&ut&&g._UZ(0,"div",12,13)}function pn(ut,Wt){}function vt(ut,Wt){1&ut&&g.YNc(0,pn,0,0,"ng-template")}function nn(ut,Wt){}function bn(ut,Wt){1&ut&&g.YNc(0,nn,0,0,"ng-template")}function Pt(ut,Wt){}function Jt(ut,Wt){1&ut&&g.YNc(0,Pt,0,0,"ng-template")}function Ln(ut,Wt){}const un=function(ut){return{$implicit:ut}};function xe(ut,Wt){if(1&ut&&(g.TgZ(0,"div",3),g.YNc(1,Ln,0,0,"ng-template",18),g.qZA()),2&ut){const xt=g.oxw().$implicit,Zt=g.oxw(2);g.Q6J("ngClass",Zt.zoomContainerClass),g.xp6(1),g.Q6J("ngTemplateOutlet",xt.template)("ngTemplateOutletContext",g.VKq(3,un,xt.slideData))}}function Ne(ut,Wt){}function ot(ut,Wt){if(1&ut&&(g.ynx(0),g.YNc(1,Ne,0,0,"ng-template",18),g.BQk()),2&ut){const xt=g.oxw().$implicit;g.xp6(1),g.Q6J("ngTemplateOutlet",xt.template)("ngTemplateOutletContext",g.VKq(2,un,xt.slideData))}}function Kt(ut,Wt){if(1&ut&&(g.TgZ(0,"div",15),g.YNc(1,xe,2,5,"div",16),g.YNc(2,ot,2,4,"ng-container",17),g.qZA()),2&ut){const xt=Wt.$implicit,Zt=g.oxw().key,Un=g.oxw();g.Akn(Un.style),g.Q6J("ngClass",(xt.class?xt.class+" ":"")+Un.slideClass+(""!==Zt?" "+Un.slideDuplicateClass:""))("ngSwitch",xt.zoom),g.uIk("data-swiper-slide-index",xt.virtualIndex?xt.virtualIndex:xt.slideIndex)("data-swiper-autoplay",xt.autoplayDelay),g.xp6(1),g.Q6J("ngSwitchCase",!0)}}function Ut(ut,Wt){1&ut&&(g.YNc(0,Kt,3,7,"div",14),g.ALo(1,"async")),2&ut&&g.Q6J("ngForOf",g.lcZ(1,1,Wt.loopSlides))}const Fe=[[["","slot","container-start"]],[["","slot","wrapper-start"]],[["","slot","wrapper-end"]],[["","slot","container-end"]]],Lt=function(ut){return{loopSlides:ut,key:"prepend"}},Oe=function(ut){return{loopSlides:ut,key:""}},Tt=function(ut){return{loopSlides:ut,key:"append"}},et=["[slot=container-start]","[slot=wrapper-start]","[slot=wrapper-end]","[slot=container-end]"],Nt=["init","enabled","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","on"];function At(ut){return"object"==typeof ut&&null!==ut&&ut.constructor&&"Object"===Object.prototype.toString.call(ut).slice(8,-1)}function on(ut){return void 0!==ut&&"boolean"!=typeof ut&&!0===ut.enabled}function wn(ut,Wt,xt){return!0===Jn(ut)&&Wt&&!Wt.el||!("boolean"!=typeof Wt&&Wt.el!==(null==xt?void 0:xt.nativeElement)&&("string"==typeof Wt.el||"object"==typeof Wt.el))}function Xn(ut,Wt){const xt=["__proto__","constructor","prototype"];Object.keys(Wt).filter(Zt=>xt.indexOf(Zt)<0).forEach(Zt=>{void 0!==ut[Zt]?ut[Zt]&&!Wt[Zt]||(At(Wt[Zt])&&At(ut[Zt])&&Object.keys(Wt[Zt]).length>0?Wt[Zt].__swiper__?ut[Zt]=Wt[Zt]:Xn(ut[Zt],Wt[Zt]):ut[Zt]=Wt[Zt]):ut[Zt]=Wt[Zt]})}function Jn(ut){return null!=ut&&"false"!=`${ut}`}const fn=["pagination","navigation","scrollbar","virtual"];function gr(ut,Wt={}){return At(ut)?ut:!0===Jn(ut)&&Wt}function Ft(ut={}){const Wt={on:{}},xt={};Xn(Wt,ge.ZP.defaults),Xn(Wt,ge.ZP.extendedDefaults),Wt._emitClasses=!0,Wt.init=!1;const Zt={},Un=Nt.map(Yn=>Yn.replace(/_/,""));return Object.keys(ut).forEach(Yn=>{const tr=Yn.replace(/^_/,"");Un.indexOf(tr)>=0?At(ut[Yn])?(Wt[tr]={},xt[tr]={},Xn(Wt[tr],ut[Yn]),Xn(xt[tr],ut[Yn])):(Wt[tr]=ut[Yn],xt[tr]=ut[Yn]):Zt[tr]=ut[Yn]}),["navigation","pagination","scrollbar"].forEach(Yn=>{!0===Wt[Yn]&&(Wt[Yn]={}),!1===Wt[Yn]&&delete Wt[Yn]}),{params:Wt,passedParams:xt,rest:Zt}}Nt.map(ut=>ut.replace(/_/,""));let Ot=(()=>{class ut{constructor(xt){this.template=xt,this.class="",this.autoplayDelay=null,this.slideData={isActive:!1,isPrev:!1,isNext:!1,isVisible:!1,isDuplicate:!1}}set ngClass(xt){this.class=[this.class||"",xt].join(" ")}set zoom(xt){this._zoom=Jn(xt)}get zoom(){return this._zoom}get classNames(){return this._classNames}set classNames(xt){this._classNames!==xt&&(this._classNames=xt,this.slideData={isActive:this._hasClass(["swiper-slide-active","swiper-slide-duplicate-active"]),isVisible:this._hasClass(["swiper-slide-visible"]),isDuplicate:this._hasClass(["swiper-slide-duplicate"]),isPrev:this._hasClass(["swiper-slide-prev","swiper-slide-duplicate-prev"]),isNext:this._hasClass(["swiper-slide-next","swiper-slide-duplicate-next"])})}_hasClass(xt){return xt.some(Zt=>this._classNames.indexOf(Zt)>=0)}}return ut.\u0275fac=function(xt){return new(xt||ut)(g.Y36(g.Rgc))},ut.\u0275dir=g.lG2({type:ut,selectors:[["ng-template","swiperSlide",""]],inputs:{virtualIndex:"virtualIndex",class:"class",ngClass:"ngClass",autoplayDelay:["data-swiper-autoplay","autoplayDelay"],zoom:"zoom"}}),ut})(),st=(()=>{class ut{constructor(xt,Zt,Un,Yn){this._ngZone=xt,this.elementRef=Zt,this._changeDetectorRef=Un,this._platformId=Yn,this.slideClass="swiper-slide",this.wrapperClass="swiper-wrapper",this.showNavigation=!0,this.showPagination=!0,this.showScrollbar=!0,this.s__beforeBreakpoint=new g.vpe,this.s__containerClasses=new g.vpe,this.s__slideClass=new g.vpe,this.s__swiper=new g.vpe,this.s_activeIndexChange=new g.vpe,this.s_afterInit=new g.vpe,this.s_autoplay=new g.vpe,this.s_autoplayStart=new g.vpe,this.s_autoplayStop=new g.vpe,this.s_autoplayPause=new g.vpe,this.s_autoplayResume=new g.vpe,this.s_beforeDestroy=new g.vpe,this.s_beforeInit=new g.vpe,this.s_beforeLoopFix=new g.vpe,this.s_beforeResize=new g.vpe,this.s_beforeSlideChangeStart=new g.vpe,this.s_beforeTransitionStart=new g.vpe,this.s_breakpoint=new g.vpe,this.s_changeDirection=new g.vpe,this.s_click=new g.vpe,this.s_doubleTap=new g.vpe,this.s_doubleClick=new g.vpe,this.s_destroy=new g.vpe,this.s_fromEdge=new g.vpe,this.s_hashChange=new g.vpe,this.s_hashSet=new g.vpe,this.s_imagesReady=new g.vpe,this.s_init=new g.vpe,this.s_keyPress=new g.vpe,this.s_lazyImageLoad=new g.vpe,this.s_lazyImageReady=new g.vpe,this.s_loopFix=new g.vpe,this.s_momentumBounce=new g.vpe,this.s_navigationHide=new g.vpe,this.s_navigationShow=new g.vpe,this.s_navigationPrev=new g.vpe,this.s_navigationNext=new g.vpe,this.s_observerUpdate=new g.vpe,this.s_orientationchange=new g.vpe,this.s_paginationHide=new g.vpe,this.s_paginationRender=new g.vpe,this.s_paginationShow=new g.vpe,this.s_paginationUpdate=new g.vpe,this.s_progress=new g.vpe,this.s_reachBeginning=new g.vpe,this.s_reachEnd=new g.vpe,this.s_realIndexChange=new g.vpe,this.s_resize=new g.vpe,this.s_scroll=new g.vpe,this.s_scrollbarDragEnd=new g.vpe,this.s_scrollbarDragMove=new g.vpe,this.s_scrollbarDragStart=new g.vpe,this.s_setTransition=new g.vpe,this.s_setTranslate=new g.vpe,this.s_slideChange=new g.vpe,this.s_slideChangeTransitionEnd=new g.vpe,this.s_slideChangeTransitionStart=new g.vpe,this.s_slideNextTransitionEnd=new g.vpe,this.s_slideNextTransitionStart=new g.vpe,this.s_slidePrevTransitionEnd=new g.vpe,this.s_slidePrevTransitionStart=new g.vpe,this.s_slideResetTransitionStart=new g.vpe,this.s_slideResetTransitionEnd=new g.vpe,this.s_sliderMove=new g.vpe,this.s_sliderFirstMove=new g.vpe,this.s_slidesLengthChange=new g.vpe,this.s_slidesGridLengthChange=new g.vpe,this.s_snapGridLengthChange=new g.vpe,this.s_snapIndexChange=new g.vpe,this.s_tap=new g.vpe,this.s_toEdge=new g.vpe,this.s_touchEnd=new g.vpe,this.s_touchMove=new g.vpe,this.s_touchMoveOpposite=new g.vpe,this.s_touchStart=new g.vpe,this.s_transitionEnd=new g.vpe,this.s_transitionStart=new g.vpe,this.s_update=new g.vpe,this.s_zoomChange=new g.vpe,this.s_swiper=new g.vpe,this.s_lock=new g.vpe,this.s_unlock=new g.vpe,this._activeSlides=new le.x,this.containerClasses="swiper",this.slidesChanges=tr=>{this.slides=tr.map((Zr,si)=>(Zr.slideIndex=si,Zr.classNames=this.slideClass||"",Zr)),this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.virtual?this.swiperRef&&this.swiperRef.virtual&&this._ngZone.runOutsideAngular(()=>{this.swiperRef.virtual.slides=this.slides,this.swiperRef.virtual.update(!0)}):this.loopedSlides&&(this.prependSlides=(0,Ye.of)(this.slides.slice(this.slides.length-this.loopedSlides)),this.appendSlides=(0,Ye.of)(this.slides.slice(0,this.loopedSlides))),this._changeDetectorRef.detectChanges()},this.style=null,this.updateVirtualSlides=tr=>{!this.swiperRef||this.currentVirtualData&&this.currentVirtualData.from===tr.from&&this.currentVirtualData.to===tr.to&&this.currentVirtualData.offset===tr.offset||(this.style=this.swiperRef.isHorizontal()?{[this.swiperRef.rtlTranslate?"right":"left"]:`${tr.offset}px`}:{top:`${tr.offset}px`},this.currentVirtualData=tr,this._activeSlides.next(tr.slides),this._ngZone.run(()=>{this._changeDetectorRef.detectChanges()}),this._ngZone.runOutsideAngular(()=>{this.swiperRef.updateSlides(),this.swiperRef.updateProgress(),this.swiperRef.updateSlidesClasses(),on(this.swiperRef.params.lazy)&&this.swiperRef.lazy.load(),this.swiperRef.virtual.update(!0)}))}}set navigation(xt){var Zt,Un,Yn;const tr="boolean"!=typeof this._navigation&&""!==this._navigation?null===(Zt=this._navigation)||void 0===Zt?void 0:Zt.nextEl:null,Zr="boolean"!=typeof this._navigation&&""!==this._navigation?null===(Un=this._navigation)||void 0===Un?void 0:Un.prevEl:null;this._navigation=gr(xt,{nextEl:tr||null,prevEl:Zr||null}),this.showNavigation=!(!0!==Jn(xt)||this._navigation&&"boolean"!=typeof this._navigation&&this._navigation.prevEl!==(null===(Yn=this._prevElRef)||void 0===Yn?void 0:Yn.nativeElement)&&(null!==this._navigation.prevEl||null!==this._navigation.nextEl)&&("string"==typeof this._navigation.nextEl||"string"==typeof this._navigation.prevEl||"object"==typeof this._navigation.nextEl||"object"==typeof this._navigation.prevEl))}get navigation(){return this._navigation}set pagination(xt){var Zt;const Un="boolean"!=typeof this._pagination&&""!==this._pagination?null===(Zt=this._pagination)||void 0===Zt?void 0:Zt.el:null;this._pagination=gr(xt,{el:Un||null}),this.showPagination=wn(xt,this._pagination,this._paginationElRef)}get pagination(){return this._pagination}set scrollbar(xt){var Zt;const Un="boolean"!=typeof this._scrollbar&&""!==this._scrollbar?null===(Zt=this._scrollbar)||void 0===Zt?void 0:Zt.el:null;this._scrollbar=gr(xt,{el:Un||null}),this.showScrollbar=wn(xt,this._scrollbar,this._scrollbarElRef)}get scrollbar(){return this._scrollbar}set virtual(xt){this._virtual=gr(xt)}get virtual(){return this._virtual}set config(xt){this.updateSwiper(xt);const{params:Zt}=Ft(xt);Object.assign(this,Zt)}set prevElRef(xt){this._prevElRef=xt,this._setElement(xt,this.navigation,"navigation","prevEl")}set nextElRef(xt){this._nextElRef=xt,this._setElement(xt,this.navigation,"navigation","nextEl")}set scrollbarElRef(xt){this._scrollbarElRef=xt,this._setElement(xt,this.scrollbar,"scrollbar")}set paginationElRef(xt){this._paginationElRef=xt,this._setElement(xt,this.pagination,"pagination")}get activeSlides(){return this.virtual?this._activeSlides:(0,Ye.of)(this.slides)}get zoomContainerClass(){return this.zoom&&"boolean"!=typeof this.zoom?this.zoom.containerClass:"swiper-zoom-container"}_setElement(xt,Zt,Un,Yn="el"){if(!Zt||!xt)return;if(xt.nativeElement){if(Zt[Yn]===xt.nativeElement)return;Zt[Yn]=xt.nativeElement}const tr={};tr[Un]=!0,this.updateInitSwiper(tr)}ngOnInit(){const{params:xt}=Ft(this);Object.assign(this,xt)}ngAfterViewInit(){this.childrenSlidesInit(),this.initSwiper(),this._changeDetectorRef.detectChanges(),setTimeout(()=>{this.s_swiper.emit(this.swiperRef)})}childrenSlidesInit(){this.slidesChanges(this.slidesEl),this.slidesEl.changes.subscribe(this.slidesChanges)}get isSwiperActive(){return this.swiperRef&&!this.swiperRef.destroyed}initSwiper(){const{params:xt}=Ft(this);Object.assign(this,xt),this._ngZone.runOutsideAngular(()=>{xt.init=!1,xt.virtual||(xt.observer=!0),xt.onAny=(si,...qn)=>{const Hr=this["s_"+si];Hr&&Hr.emit([...qn])},Object.assign(xt.on,{_containerClasses:(si,qn)=>{setTimeout(()=>{this.containerClasses=qn})},_slideClasses:(si,qn)=>{qn.forEach(({slideEl:Hr,classNames:Tr},wr)=>{const rs=Hr.getAttribute("data-swiper-slide-index"),Ji=rs?parseInt(rs):wr;if(this.virtual){const an=this.slides.find(it=>it.virtualIndex&&it.virtualIndex===Ji);if(an)return void(an.classNames=Tr)}this.slides[Ji]&&(this.slides[Ji].classNames=Tr)}),this._changeDetectorRef.detectChanges()}});const tr=new ge.ZP(xt);tr.loopCreate=()=>{},tr.loopDestroy=()=>{},xt.loop&&(tr.loopedSlides=this.loopedSlides);const Zr=on(tr.params.virtual);if(tr.virtual&&Zr){tr.virtual.slides=this.slides;const si={cache:!1,slides:this.slides,renderExternal:this.updateVirtualSlides,renderExternalUpdate:!1};Xn(tr.params.virtual,si),Xn(tr.originalParams.virtual,si)}if((0,Z.NF)(this._platformId)){this.swiperRef=tr.init(this.elementRef.nativeElement);const si=on(this.swiperRef.params.virtual);this.swiperRef.virtual&&si&&this.swiperRef.virtual.update(!0),this._changeDetectorRef.detectChanges()}})}ngOnChanges(xt){this.updateSwiper(xt),this._changeDetectorRef.detectChanges()}updateInitSwiper(xt){!xt||!this.swiperRef||this.swiperRef.destroyed||this._ngZone.runOutsideAngular(()=>{const{pagination:Un,navigation:Yn,scrollbar:tr,thumbs:si}=this.swiperRef;xt.pagination&&(this.pagination&&"boolean"!=typeof this.pagination&&this.pagination.el&&Un&&!Un.el?(this.updateParameter("pagination",this.pagination),Un.init(),Un.render(),Un.update()):(Un.destroy(),Un.el=null)),xt.scrollbar&&(this.scrollbar&&"boolean"!=typeof this.scrollbar&&this.scrollbar.el&&tr&&!tr.el?(this.updateParameter("scrollbar",this.scrollbar),tr.init(),tr.updateSize(),tr.setTranslate()):(tr.destroy(),tr.el=null)),xt.navigation&&(this.navigation&&"boolean"!=typeof this.navigation&&this.navigation.prevEl&&this.navigation.nextEl&&Yn&&!Yn.prevEl&&!Yn.nextEl?(this.updateParameter("navigation",this.navigation),Yn.init(),Yn.update()):Yn.prevEl&&Yn.nextEl&&(Yn.destroy(),Yn.nextEl=null,Yn.prevEl=null)),xt.thumbs&&this.thumbs&&this.thumbs.swiper&&(this.updateParameter("thumbs",this.thumbs),si.init()&&si.update(!0)),xt.controller&&this.controller&&this.controller.control&&(this.swiperRef.controller.control=this.controller.control),this.swiperRef.update()})}updateSwiper(xt){this._ngZone.runOutsideAngular(()=>{var Zt,Un;if(!xt.config&&xt&&this.swiperRef&&!this.swiperRef.destroyed){for(const Yn in xt){if(fn.indexOf(Yn)>=0)continue;const tr=null!==(Un=null===(Zt=xt[Yn])||void 0===Zt?void 0:Zt.currentValue)&&void 0!==Un?Un:xt[Yn];this.updateParameter(Yn,tr)}xt.allowSlideNext&&(this.swiperRef.allowSlideNext=this.allowSlideNext),xt.allowSlidePrev&&(this.swiperRef.allowSlidePrev=this.allowSlidePrev),xt.direction&&this.swiperRef.changeDirection(this.direction,!1),xt.breakpoints&&(this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.swiperRef.currentBreakpoint=null,this.swiperRef.setBreakpoint()),(xt.thumbs||xt.controller)&&this.updateInitSwiper(xt),this.swiperRef.update()}})}calcLoopedSlides(){if(!this.loop)return!1;let xt=this.slidesPerView;if(this.breakpoints){const Un=ge.ZP.prototype.getBreakpoint(this.breakpoints),Yn=Un in this.breakpoints?this.breakpoints[Un]:void 0;Yn&&Yn.slidesPerView&&(xt=Yn.slidesPerView)}if("auto"===xt)return this.loopedSlides=this.slides.length,this.slides.length;let Zt=this.loopedSlides||xt;return!!Zt&&(this.loopAdditionalSlides&&(Zt+=this.loopAdditionalSlides),Zt>this.slides.length&&(Zt=this.slides.length),this.loopedSlides=Zt,!0)}updateParameter(xt,Zt){if(!this.swiperRef||this.swiperRef.destroyed)return;const Un=xt.replace(/^_/,""),Yn=At(this.swiperRef.params[Un]);"enabled"!==Un?Yn&&At(Zt)?Xn(this.swiperRef.params[Un],Zt):this.swiperRef.params[Un]=Zt:!0===Zt?this.swiperRef.enable():!1===Zt&&this.swiperRef.disable()}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{var xt;null===(xt=this.swiperRef)||void 0===xt||xt.destroy(!0,!1)})}}return ut.\u0275fac=function(xt){return new(xt||ut)(g.Y36(g.R0b),g.Y36(g.SBq),g.Y36(g.sBO),g.Y36(g.Lbi))},ut.\u0275cmp=g.Xpm({type:ut,selectors:[["swiper"],["","swiper",""]],contentQueries:function(xt,Zt,Un){if(1&xt&&g.Suo(Un,Ot,4),2&xt){let Yn;g.iGM(Yn=g.CRH())&&(Zt.slidesEl=Yn)}},viewQuery:function(xt,Zt){if(1&xt&&(g.Gf(Xe,5),g.Gf(gt,5),g.Gf(Qe,5),g.Gf(ft,5)),2&xt){let Un;g.iGM(Un=g.CRH())&&(Zt.prevElRef=Un.first),g.iGM(Un=g.CRH())&&(Zt.nextElRef=Un.first),g.iGM(Un=g.CRH())&&(Zt.scrollbarElRef=Un.first),g.iGM(Un=g.CRH())&&(Zt.paginationElRef=Un.first)}},hostVars:2,hostBindings:function(xt,Zt){2&xt&&g.Tol(Zt.containerClasses)},inputs:{enabled:"enabled",on:"on",direction:"direction",touchEventsTarget:"touchEventsTarget",initialSlide:"initialSlide",speed:"speed",cssMode:"cssMode",updateOnWindowResize:"updateOnWindowResize",resizeObserver:"resizeObserver",nested:"nested",focusableElements:"focusableElements",width:"width",height:"height",preventInteractionOnTransition:"preventInteractionOnTransition",userAgent:"userAgent",url:"url",edgeSwipeDetection:"edgeSwipeDetection",edgeSwipeThreshold:"edgeSwipeThreshold",freeMode:"freeMode",autoHeight:"autoHeight",setWrapperSize:"setWrapperSize",virtualTranslate:"virtualTranslate",effect:"effect",breakpoints:"breakpoints",spaceBetween:"spaceBetween",slidesPerView:"slidesPerView",maxBackfaceHiddenSlides:"maxBackfaceHiddenSlides",grid:"grid",slidesPerGroup:"slidesPerGroup",slidesPerGroupSkip:"slidesPerGroupSkip",centeredSlides:"centeredSlides",centeredSlidesBounds:"centeredSlidesBounds",slidesOffsetBefore:"slidesOffsetBefore",slidesOffsetAfter:"slidesOffsetAfter",normalizeSlideIndex:"normalizeSlideIndex",centerInsufficientSlides:"centerInsufficientSlides",watchOverflow:"watchOverflow",roundLengths:"roundLengths",touchRatio:"touchRatio",touchAngle:"touchAngle",simulateTouch:"simulateTouch",shortSwipes:"shortSwipes",longSwipes:"longSwipes",longSwipesRatio:"longSwipesRatio",longSwipesMs:"longSwipesMs",followFinger:"followFinger",allowTouchMove:"allowTouchMove",threshold:"threshold",touchMoveStopPropagation:"touchMoveStopPropagation",touchStartPreventDefault:"touchStartPreventDefault",touchStartForcePreventDefault:"touchStartForcePreventDefault",touchReleaseOnEdges:"touchReleaseOnEdges",uniqueNavElements:"uniqueNavElements",resistance:"resistance",resistanceRatio:"resistanceRatio",watchSlidesProgress:"watchSlidesProgress",grabCursor:"grabCursor",preventClicks:"preventClicks",preventClicksPropagation:"preventClicksPropagation",slideToClickedSlide:"slideToClickedSlide",preloadImages:"preloadImages",updateOnImagesReady:"updateOnImagesReady",loop:"loop",loopAdditionalSlides:"loopAdditionalSlides",loopedSlides:"loopedSlides",loopedSlidesLimit:"loopedSlidesLimit",loopFillGroupWithBlank:"loopFillGroupWithBlank",loopPreventsSlide:"loopPreventsSlide",rewind:"rewind",allowSlidePrev:"allowSlidePrev",allowSlideNext:"allowSlideNext",swipeHandler:"swipeHandler",noSwiping:"noSwiping",noSwipingClass:"noSwipingClass",noSwipingSelector:"noSwipingSelector",passiveListeners:"passiveListeners",containerModifierClass:"containerModifierClass",slideClass:"slideClass",slideBlankClass:"slideBlankClass",slideActiveClass:"slideActiveClass",slideDuplicateActiveClass:"slideDuplicateActiveClass",slideVisibleClass:"slideVisibleClass",slideDuplicateClass:"slideDuplicateClass",slideNextClass:"slideNextClass",slideDuplicateNextClass:"slideDuplicateNextClass",slidePrevClass:"slidePrevClass",slideDuplicatePrevClass:"slideDuplicatePrevClass",wrapperClass:"wrapperClass",runCallbacksOnInit:"runCallbacksOnInit",observeParents:"observeParents",observeSlideChildren:"observeSlideChildren",a11y:"a11y",autoplay:"autoplay",controller:"controller",coverflowEffect:"coverflowEffect",cubeEffect:"cubeEffect",fadeEffect:"fadeEffect",flipEffect:"flipEffect",creativeEffect:"creativeEffect",cardsEffect:"cardsEffect",hashNavigation:"hashNavigation",history:"history",keyboard:"keyboard",lazy:"lazy",mousewheel:"mousewheel",parallax:"parallax",thumbs:"thumbs",zoom:"zoom",class:"class",id:"id",navigation:"navigation",pagination:"pagination",scrollbar:"scrollbar",virtual:"virtual",config:"config"},outputs:{s__beforeBreakpoint:"_beforeBreakpoint",s__containerClasses:"_containerClasses",s__slideClass:"_slideClass",s__swiper:"_swiper",s_activeIndexChange:"activeIndexChange",s_afterInit:"afterInit",s_autoplay:"autoplay",s_autoplayStart:"autoplayStart",s_autoplayStop:"autoplayStop",s_autoplayPause:"autoplayPause",s_autoplayResume:"autoplayResume",s_beforeDestroy:"beforeDestroy",s_beforeInit:"beforeInit",s_beforeLoopFix:"beforeLoopFix",s_beforeResize:"beforeResize",s_beforeSlideChangeStart:"beforeSlideChangeStart",s_beforeTransitionStart:"beforeTransitionStart",s_breakpoint:"breakpoint",s_changeDirection:"changeDirection",s_click:"click",s_doubleTap:"doubleTap",s_doubleClick:"doubleClick",s_destroy:"destroy",s_fromEdge:"fromEdge",s_hashChange:"hashChange",s_hashSet:"hashSet",s_imagesReady:"imagesReady",s_init:"init",s_keyPress:"keyPress",s_lazyImageLoad:"lazyImageLoad",s_lazyImageReady:"lazyImageReady",s_loopFix:"loopFix",s_momentumBounce:"momentumBounce",s_navigationHide:"navigationHide",s_navigationShow:"navigationShow",s_navigationPrev:"navigationPrev",s_navigationNext:"navigationNext",s_observerUpdate:"observerUpdate",s_orientationchange:"orientationchange",s_paginationHide:"paginationHide",s_paginationRender:"paginationRender",s_paginationShow:"paginationShow",s_paginationUpdate:"paginationUpdate",s_progress:"progress",s_reachBeginning:"reachBeginning",s_reachEnd:"reachEnd",s_realIndexChange:"realIndexChange",s_resize:"resize",s_scroll:"scroll",s_scrollbarDragEnd:"scrollbarDragEnd",s_scrollbarDragMove:"scrollbarDragMove",s_scrollbarDragStart:"scrollbarDragStart",s_setTransition:"setTransition",s_setTranslate:"setTranslate",s_slideChange:"slideChange",s_slideChangeTransitionEnd:"slideChangeTransitionEnd",s_slideChangeTransitionStart:"slideChangeTransitionStart",s_slideNextTransitionEnd:"slideNextTransitionEnd",s_slideNextTransitionStart:"slideNextTransitionStart",s_slidePrevTransitionEnd:"slidePrevTransitionEnd",s_slidePrevTransitionStart:"slidePrevTransitionStart",s_slideResetTransitionStart:"slideResetTransitionStart",s_slideResetTransitionEnd:"slideResetTransitionEnd",s_sliderMove:"sliderMove",s_sliderFirstMove:"sliderFirstMove",s_slidesLengthChange:"slidesLengthChange",s_slidesGridLengthChange:"slidesGridLengthChange",s_snapGridLengthChange:"snapGridLengthChange",s_snapIndexChange:"snapIndexChange",s_tap:"tap",s_toEdge:"toEdge",s_touchEnd:"touchEnd",s_touchMove:"touchMove",s_touchMoveOpposite:"touchMoveOpposite",s_touchStart:"touchStart",s_transitionEnd:"transitionEnd",s_transitionStart:"transitionStart",s_update:"update",s_zoomChange:"zoomChange",s_swiper:"swiper",s_lock:"lock",s_unlock:"unlock"},features:[g.TTD],ngContentSelectors:et,decls:13,vars:17,consts:[[4,"ngIf"],["class","swiper-scrollbar",4,"ngIf"],["class","swiper-pagination",4,"ngIf"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["slidesTemplate",""],[1,"swiper-button-prev"],["prevElRef",""],[1,"swiper-button-next"],["nextElRef",""],[1,"swiper-scrollbar"],["scrollbarElRef",""],[1,"swiper-pagination"],["paginationElRef",""],[3,"ngClass","style","ngSwitch",4,"ngFor","ngForOf"],[3,"ngClass","ngSwitch"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(xt,Zt){if(1&xt&&(g.F$t(Fe),g.Hsn(0),g.YNc(1,Pe,5,0,"ng-container",0),g.YNc(2,Me,2,0,"div",1),g.YNc(3,Et,2,0,"div",2),g.TgZ(4,"div",3),g.Hsn(5,1),g.YNc(6,vt,1,0,null,4),g.YNc(7,bn,1,0,null,4),g.YNc(8,Jt,1,0,null,4),g.Hsn(9,2),g.qZA(),g.Hsn(10,3),g.YNc(11,Ut,2,3,"ng-template",null,5,g.W1O)),2&xt){const Un=g.MAs(12);g.xp6(1),g.Q6J("ngIf",Zt.navigation&&Zt.showNavigation),g.xp6(1),g.Q6J("ngIf",Zt.scrollbar&&Zt.showScrollbar),g.xp6(1),g.Q6J("ngIf",Zt.pagination&&Zt.showPagination),g.xp6(1),g.Q6J("ngClass",Zt.wrapperClass),g.uIk("id",Zt.id),g.xp6(2),g.Q6J("ngTemplateOutlet",Un)("ngTemplateOutletContext",g.VKq(11,Lt,Zt.prependSlides)),g.xp6(1),g.Q6J("ngTemplateOutlet",Un)("ngTemplateOutletContext",g.VKq(13,Oe,Zt.activeSlides)),g.xp6(1),g.Q6J("ngTemplateOutlet",Un)("ngTemplateOutletContext",g.VKq(15,Tt,Zt.appendSlides))}},directives:[Z.O5,Z.mk,Z.tP,Z.sg,Z.RF,Z.n9,Z.ED],pipes:[Z.Ov],styles:["swiper{display:block}\n"],encapsulation:2,changeDetection:0}),ut})(),It=(()=>{class ut{}return ut.\u0275fac=function(xt){return new(xt||ut)},ut.\u0275mod=g.oAB({type:ut}),ut.\u0275inj=g.cJS({imports:[[Z.ez]]}),ut})()},8879:(jn,Dt,H)=>{function g(l){return null!==l&&"object"==typeof l&&"constructor"in l&&l.constructor===Object}function Z(l={},x={}){Object.keys(x).forEach(S=>{void 0===l[S]?l[S]=x[S]:g(x[S])&&g(l[S])&&Object.keys(x[S]).length>0&&Z(l[S],x[S])})}H.d(Dt,{W_:()=>Q,tl:()=>L,ZP:()=>kr});const ge={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function le(){const l="undefined"!=typeof document?document:{};return Z(l,ge),l}const Ye={document:ge,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:l=>"undefined"==typeof setTimeout?(l(),null):setTimeout(l,0),cancelAnimationFrame(l){"undefined"!=typeof setTimeout&&clearTimeout(l)}};function Xe(){const l="undefined"!=typeof window?window:{};return Z(l,Ye),l}class Qe extends Array{constructor(x){"number"==typeof x?super(x):(super(...x||[]),function gt(l){const x=l.__proto__;Object.defineProperty(l,"__proto__",{get:()=>x,set(S){x.__proto__=S}})}(this))}}function ft(l=[]){const x=[];return l.forEach(S=>{Array.isArray(S)?x.push(...ft(S)):x.push(S)}),x}function Pe(l,x){return Array.prototype.filter.call(l,x)}function vt(l,x){const S=Xe(),P=le();let z=[];if(!x&&l instanceof Qe)return l;if(!l)return new Qe(z);if("string"==typeof l){const J=l.trim();if(J.indexOf("<")>=0&&J.indexOf(">")>=0){let ye="div";0===J.indexOf("<li")&&(ye="ul"),0===J.indexOf("<tr")&&(ye="tbody"),(0===J.indexOf("<td")||0===J.indexOf("<th"))&&(ye="tr"),0===J.indexOf("<tbody")&&(ye="table"),0===J.indexOf("<option")&&(ye="select");const Te=P.createElement(ye);Te.innerHTML=J;for(let ae=0;ae<Te.childNodes.length;ae+=1)z.push(Te.childNodes[ae])}else z=function pn(l,x){if("string"!=typeof l)return[l];const S=[],P=x.querySelectorAll(l);for(let z=0;z<P.length;z+=1)S.push(P[z]);return S}(l.trim(),x||P)}else if(l.nodeType||l===S||l===P)z.push(l);else if(Array.isArray(l)){if(l instanceof Qe)return l;z=l}return new Qe(function Me(l){const x=[];for(let S=0;S<l.length;S+=1)-1===x.indexOf(l[S])&&x.push(l[S]);return x}(z))}vt.fn=Qe.prototype;const Pn="resize scroll".split(" ");function jt(l){return function x(...S){if(void 0===S[0]){for(let P=0;P<this.length;P+=1)Pn.indexOf(l)<0&&(l in this[P]?this[P][l]():vt(this[P]).trigger(l));return this}return this.on(l,...S)}}jt("click"),jt("blur"),jt("focus"),jt("focusin"),jt("focusout"),jt("keyup"),jt("keydown"),jt("keypress"),jt("submit"),jt("change"),jt("mousedown"),jt("mousemove"),jt("mouseup"),jt("mouseenter"),jt("mouseleave"),jt("mouseout"),jt("mouseover"),jt("touchstart"),jt("touchend"),jt("touchmove"),jt("resize"),jt("scroll");const Ri={addClass:function nn(...l){const x=ft(l.map(S=>S.split(" ")));return this.forEach(S=>{S.classList.add(...x)}),this},removeClass:function bn(...l){const x=ft(l.map(S=>S.split(" ")));return this.forEach(S=>{S.classList.remove(...x)}),this},hasClass:function Jt(...l){const x=ft(l.map(S=>S.split(" ")));return Pe(this,S=>x.filter(P=>S.classList.contains(P)).length>0).length>0},toggleClass:function Pt(...l){const x=ft(l.map(S=>S.split(" ")));this.forEach(S=>{x.forEach(P=>{S.classList.toggle(P)})})},attr:function Ln(l,x){if(1===arguments.length&&"string"==typeof l)return this[0]?this[0].getAttribute(l):void 0;for(let S=0;S<this.length;S+=1)if(2===arguments.length)this[S].setAttribute(l,x);else for(const P in l)this[S][P]=l[P],this[S].setAttribute(P,l[P]);return this},removeAttr:function un(l){for(let x=0;x<this.length;x+=1)this[x].removeAttribute(l);return this},transform:function Lt(l){for(let x=0;x<this.length;x+=1)this[x].style.transform=l;return this},transition:function Oe(l){for(let x=0;x<this.length;x+=1)this[x].style.transitionDuration="string"!=typeof l?`${l}ms`:l;return this},on:function Tt(...l){let[x,S,P,z]=l;function J(_e){const ce=_e.target;if(!ce)return;const ue=_e.target.dom7EventData||[];if(ue.indexOf(_e)<0&&ue.unshift(_e),vt(ce).is(S))P.apply(ce,ue);else{const we=vt(ce).parents();for(let He=0;He<we.length;He+=1)vt(we[He]).is(S)&&P.apply(we[He],ue)}}function ye(_e){const ce=_e&&_e.target&&_e.target.dom7EventData||[];ce.indexOf(_e)<0&&ce.unshift(_e),P.apply(this,ce)}"function"==typeof l[1]&&([x,P,z]=l,S=void 0),z||(z=!1);const Te=x.split(" ");let ae;for(let _e=0;_e<this.length;_e+=1){const ce=this[_e];if(S)for(ae=0;ae<Te.length;ae+=1){const ue=Te[ae];ce.dom7LiveListeners||(ce.dom7LiveListeners={}),ce.dom7LiveListeners[ue]||(ce.dom7LiveListeners[ue]=[]),ce.dom7LiveListeners[ue].push({listener:P,proxyListener:J}),ce.addEventListener(ue,J,z)}else for(ae=0;ae<Te.length;ae+=1){const ue=Te[ae];ce.dom7Listeners||(ce.dom7Listeners={}),ce.dom7Listeners[ue]||(ce.dom7Listeners[ue]=[]),ce.dom7Listeners[ue].push({listener:P,proxyListener:ye}),ce.addEventListener(ue,ye,z)}}return this},off:function et(...l){let[x,S,P,z]=l;"function"==typeof l[1]&&([x,P,z]=l,S=void 0),z||(z=!1);const J=x.split(" ");for(let ye=0;ye<J.length;ye+=1){const Te=J[ye];for(let ae=0;ae<this.length;ae+=1){const _e=this[ae];let ce;if(!S&&_e.dom7Listeners?ce=_e.dom7Listeners[Te]:S&&_e.dom7LiveListeners&&(ce=_e.dom7LiveListeners[Te]),ce&&ce.length)for(let ue=ce.length-1;ue>=0;ue-=1){const we=ce[ue];P&&we.listener===P||P&&we.listener&&we.listener.dom7proxy&&we.listener.dom7proxy===P?(_e.removeEventListener(Te,we.proxyListener,z),ce.splice(ue,1)):P||(_e.removeEventListener(Te,we.proxyListener,z),ce.splice(ue,1))}}}return this},trigger:function At(...l){const x=Xe(),S=l[0].split(" "),P=l[1];for(let z=0;z<S.length;z+=1){const J=S[z];for(let ye=0;ye<this.length;ye+=1){const Te=this[ye];if(x.CustomEvent){const ae=new x.CustomEvent(J,{detail:P,bubbles:!0,cancelable:!0});Te.dom7EventData=l.filter((_e,ce)=>ce>0),Te.dispatchEvent(ae),Te.dom7EventData=[],delete Te.dom7EventData}}}return this},transitionEnd:function on(l){const x=this;return l&&x.on("transitionend",function S(P){P.target===this&&(l.call(this,P),x.off("transitionend",S))}),this},outerWidth:function Jn(l){if(this.length>0){if(l){const x=this.styles();return this[0].offsetWidth+parseFloat(x.getPropertyValue("margin-right"))+parseFloat(x.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function gr(l){if(this.length>0){if(l){const x=this.styles();return this[0].offsetHeight+parseFloat(x.getPropertyValue("margin-top"))+parseFloat(x.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function st(){const l=Xe();return this[0]?l.getComputedStyle(this[0],null):{}},offset:function lr(){if(this.length>0){const l=Xe(),x=le(),S=this[0],P=S.getBoundingClientRect(),z=x.body;return{top:P.top+(S===l?l.scrollY:S.scrollTop)-(S.clientTop||z.clientTop||0),left:P.left+(S===l?l.scrollX:S.scrollLeft)-(S.clientLeft||z.clientLeft||0)}}return null},css:function It(l,x){const S=Xe();let P;if(1===arguments.length){if("string"!=typeof l){for(P=0;P<this.length;P+=1)for(const z in l)this[P].style[z]=l[z];return this}if(this[0])return S.getComputedStyle(this[0],null).getPropertyValue(l)}if(2===arguments.length&&"string"==typeof l){for(P=0;P<this.length;P+=1)this[P].style[l]=x;return this}return this},each:function ut(l){return l?(this.forEach((x,S)=>{l.apply(x,[x,S])}),this):this},html:function xt(l){if(void 0===l)return this[0]?this[0].innerHTML:null;for(let x=0;x<this.length;x+=1)this[x].innerHTML=l;return this},text:function Zt(l){if(void 0===l)return this[0]?this[0].textContent.trim():null;for(let x=0;x<this.length;x+=1)this[x].textContent=l;return this},is:function Un(l){const x=Xe(),S=le(),P=this[0];let z,J;if(!P||void 0===l)return!1;if("string"==typeof l){if(P.matches)return P.matches(l);if(P.webkitMatchesSelector)return P.webkitMatchesSelector(l);if(P.msMatchesSelector)return P.msMatchesSelector(l);for(z=vt(l),J=0;J<z.length;J+=1)if(z[J]===P)return!0;return!1}if(l===S)return P===S;if(l===x)return P===x;if(l.nodeType||l instanceof Qe){for(z=l.nodeType?[l]:l,J=0;J<z.length;J+=1)if(z[J]===P)return!0;return!1}return!1},index:function Yn(){let x,l=this[0];if(l){for(x=0;null!==(l=l.previousSibling);)1===l.nodeType&&(x+=1);return x}},eq:function tr(l){if(void 0===l)return this;const x=this.length;if(l>x-1)return vt([]);if(l<0){const S=x+l;return vt(S<0?[]:[this[S]])}return vt([this[l]])},append:function Zr(...l){let x;const S=le();for(let P=0;P<l.length;P+=1){x=l[P];for(let z=0;z<this.length;z+=1)if("string"==typeof x){const J=S.createElement("div");for(J.innerHTML=x;J.firstChild;)this[z].appendChild(J.firstChild)}else if(x instanceof Qe)for(let J=0;J<x.length;J+=1)this[z].appendChild(x[J]);else this[z].appendChild(x)}return this},prepend:function qn(l){const x=le();let S,P;for(S=0;S<this.length;S+=1)if("string"==typeof l){const z=x.createElement("div");for(z.innerHTML=l,P=z.childNodes.length-1;P>=0;P-=1)this[S].insertBefore(z.childNodes[P],this[S].childNodes[0])}else if(l instanceof Qe)for(P=0;P<l.length;P+=1)this[S].insertBefore(l[P],this[S].childNodes[0]);else this[S].insertBefore(l,this[S].childNodes[0]);return this},next:function rs(l){return this.length>0?l?this[0].nextElementSibling&&vt(this[0].nextElementSibling).is(l)?vt([this[0].nextElementSibling]):vt([]):vt(this[0].nextElementSibling?[this[0].nextElementSibling]:[]):vt([])},nextAll:function Ji(l){const x=[];let S=this[0];if(!S)return vt([]);for(;S.nextElementSibling;){const P=S.nextElementSibling;l?vt(P).is(l)&&x.push(P):x.push(P),S=P}return vt(x)},prev:function an(l){if(this.length>0){const x=this[0];return l?x.previousElementSibling&&vt(x.previousElementSibling).is(l)?vt([x.previousElementSibling]):vt([]):vt(x.previousElementSibling?[x.previousElementSibling]:[])}return vt([])},prevAll:function it(l){const x=[];let S=this[0];if(!S)return vt([]);for(;S.previousElementSibling;){const P=S.previousElementSibling;l?vt(P).is(l)&&x.push(P):x.push(P),S=P}return vt(x)},parent:function Bt(l){const x=[];for(let S=0;S<this.length;S+=1)null!==this[S].parentNode&&(l?vt(this[S].parentNode).is(l)&&x.push(this[S].parentNode):x.push(this[S].parentNode));return vt(x)},parents:function Gt(l){const x=[];for(let S=0;S<this.length;S+=1){let P=this[S].parentNode;for(;P;)l?vt(P).is(l)&&x.push(P):x.push(P),P=P.parentNode}return vt(x)},closest:function yn(l){let x=this;return void 0===l?vt([]):(x.is(l)||(x=x.parents(l).eq(0)),x)},find:function Bn(l){const x=[];for(let S=0;S<this.length;S+=1){const P=this[S].querySelectorAll(l);for(let z=0;z<P.length;z+=1)x.push(P[z])}return vt(x)},children:function qr(l){const x=[];for(let S=0;S<this.length;S+=1){const P=this[S].children;for(let z=0;z<P.length;z+=1)(!l||vt(P[z]).is(l))&&x.push(P[z])}return vt(x)},filter:function Wt(l){return vt(Pe(this,l))},remove:function Or(){for(let l=0;l<this.length;l+=1)this[l].parentNode&&this[l].parentNode.removeChild(this[l]);return this}};Object.keys(Ri).forEach(l=>{Object.defineProperty(vt.fn,l,{value:Ri[l],writable:!0})});const _n=vt;function oi(l,x=0){return setTimeout(l,x)}function bi(){return Date.now()}function ls(l){return"object"==typeof l&&null!==l&&l.constructor&&"Object"===Object.prototype.toString.call(l).slice(8,-1)}function Oi(l){return"undefined"!=typeof window&&void 0!==window.HTMLElement?l instanceof HTMLElement:l&&(1===l.nodeType||11===l.nodeType)}function Vi(...l){const x=Object(l[0]),S=["__proto__","constructor","prototype"];for(let P=1;P<l.length;P+=1){const z=l[P];if(null!=z&&!Oi(z)){const J=Object.keys(Object(z)).filter(ye=>S.indexOf(ye)<0);for(let ye=0,Te=J.length;ye<Te;ye+=1){const ae=J[ye],_e=Object.getOwnPropertyDescriptor(z,ae);void 0!==_e&&_e.enumerable&&(ls(x[ae])&&ls(z[ae])?z[ae].__swiper__?x[ae]=z[ae]:Vi(x[ae],z[ae]):!ls(x[ae])&&ls(z[ae])?(x[ae]={},z[ae].__swiper__?x[ae]=z[ae]:Vi(x[ae],z[ae])):x[ae]=z[ae])}}}return x}function qi(l,x,S){l.style.setProperty(x,S)}function Ur({swiper:l,targetPosition:x,side:S}){const P=Xe(),z=-l.translate;let ye,J=null;const Te=l.params.speed;l.wrapperEl.style.scrollSnapType="none",P.cancelAnimationFrame(l.cssModeFrameID);const ae=x>z?"next":"prev",_e=(ue,we)=>"next"===ae&&ue>=we||"prev"===ae&&ue<=we,ce=()=>{ye=(new Date).getTime(),null===J&&(J=ye);const ue=Math.max(Math.min((ye-J)/Te,1),0),we=.5-Math.cos(ue*Math.PI)/2;let He=z+we*(x-z);if(_e(He,x)&&(He=x),l.wrapperEl.scrollTo({[S]:He}),_e(He,x))return l.wrapperEl.style.overflow="hidden",l.wrapperEl.style.scrollSnapType="",setTimeout(()=>{l.wrapperEl.style.overflow="",l.wrapperEl.scrollTo({[S]:He})}),void P.cancelAnimationFrame(l.cssModeFrameID);l.cssModeFrameID=P.requestAnimationFrame(ce)};ce()}let Is,Cr,Qi;function Vs(){return Is||(Is=function Ss(){const l=Xe(),x=le();return{smoothScroll:x.documentElement&&"scrollBehavior"in x.documentElement.style,touch:!!("ontouchstart"in l||l.DocumentTouch&&x instanceof l.DocumentTouch),passiveListener:function(){let P=!1;try{const z=Object.defineProperty({},"passive",{get(){P=!0}});l.addEventListener("testPassiveListener",null,z)}catch(z){}return P}(),gestures:"ongesturestart"in l}}()),Is}function Zi({swiper:l,runCallbacks:x,direction:S,step:P}){const{activeIndex:z,previousIndex:J}=l;let ye=S;if(ye||(ye=z>J?"next":z<J?"prev":"reset"),l.emit(`transition${P}`),x&&z!==J){if("reset"===ye)return void l.emit(`slideResetTransition${P}`);l.emit(`slideChangeTransition${P}`),l.emit("next"===ye?`slideNextTransition${P}`:`slidePrevTransition${P}`)}}function $s(l){const x=this,S=le(),P=Xe(),z=x.touchEventsData,{params:J,touches:ye,enabled:Te}=x;if(!Te||x.animating&&J.preventInteractionOnTransition)return;!x.animating&&J.cssMode&&J.loop&&x.loopFix();let ae=l;ae.originalEvent&&(ae=ae.originalEvent);let _e=_n(ae.target);if("wrapper"===J.touchEventsTarget&&!_e.closest(x.wrapperEl).length||(z.isTouchEvent="touchstart"===ae.type,!z.isTouchEvent&&"which"in ae&&3===ae.which)||!z.isTouchEvent&&"button"in ae&&ae.button>0||z.isTouched&&z.isMoved)return;const ce=!!J.noSwipingClass&&""!==J.noSwipingClass,ue=l.composedPath?l.composedPath():l.path;ce&&ae.target&&ae.target.shadowRoot&&ue&&(_e=_n(ue[0]));const we=J.noSwipingSelector?J.noSwipingSelector:`.${J.noSwipingClass}`;if(J.noSwiping&&(ae.target&&ae.target.shadowRoot?function bs(l,x=this){return function S(P){if(!P||P===le()||P===Xe())return null;P.assignedSlot&&(P=P.assignedSlot);const z=P.closest(l);return z||P.getRootNode?z||S(P.getRootNode().host):null}(x)}(we,_e[0]):_e.closest(we)[0]))return void(x.allowClick=!0);if(J.swipeHandler&&!_e.closest(J.swipeHandler)[0])return;ye.currentX="touchstart"===ae.type?ae.targetTouches[0].pageX:ae.pageX,ye.currentY="touchstart"===ae.type?ae.targetTouches[0].pageY:ae.pageY;const nt=ye.currentX,Ae=ye.currentY,Le=J.edgeSwipeDetection||J.iOSEdgeSwipeDetection,_t=J.edgeSwipeThreshold||J.iOSEdgeSwipeThreshold;if(Le&&(nt<=_t||nt>=P.innerWidth-_t)){if("prevent"!==Le)return;l.preventDefault()}if(Object.assign(z,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),ye.startX=nt,ye.startY=Ae,z.touchStartTime=bi(),x.allowClick=!0,x.updateSize(),x.swipeDirection=void 0,J.threshold>0&&(z.allowThresholdMove=!1),"touchstart"!==ae.type){let Je=!0;_e.is(z.focusableElements)&&(Je=!1,"SELECT"===_e[0].nodeName&&(z.isTouched=!1)),S.activeElement&&_n(S.activeElement).is(z.focusableElements)&&S.activeElement!==_e[0]&&S.activeElement.blur();const yt=Je&&x.allowTouchMove&&J.touchStartPreventDefault;(J.touchStartForcePreventDefault||yt)&&!_e[0].isContentEditable&&ae.preventDefault()}x.params.freeMode&&x.params.freeMode.enabled&&x.freeMode&&x.animating&&!J.cssMode&&x.freeMode.onTouchStart(),x.emit("touchStart",ae)}function Zo(l){const x=le(),S=this,P=S.touchEventsData,{params:z,touches:J,rtlTranslate:ye,enabled:Te}=S;if(!Te)return;let ae=l;if(ae.originalEvent&&(ae=ae.originalEvent),!P.isTouched)return void(P.startMoving&&P.isScrolling&&S.emit("touchMoveOpposite",ae));if(P.isTouchEvent&&"touchmove"!==ae.type)return;const _e="touchmove"===ae.type&&ae.targetTouches&&(ae.targetTouches[0]||ae.changedTouches[0]),ce="touchmove"===ae.type?_e.pageX:ae.pageX,ue="touchmove"===ae.type?_e.pageY:ae.pageY;if(ae.preventedByNestedSwiper)return J.startX=ce,void(J.startY=ue);if(!S.allowTouchMove)return _n(ae.target).is(P.focusableElements)||(S.allowClick=!1),void(P.isTouched&&(Object.assign(J,{startX:ce,startY:ue,currentX:ce,currentY:ue}),P.touchStartTime=bi()));if(P.isTouchEvent&&z.touchReleaseOnEdges&&!z.loop)if(S.isVertical()){if(ue<J.startY&&S.translate<=S.maxTranslate()||ue>J.startY&&S.translate>=S.minTranslate())return P.isTouched=!1,void(P.isMoved=!1)}else if(ce<J.startX&&S.translate<=S.maxTranslate()||ce>J.startX&&S.translate>=S.minTranslate())return;if(P.isTouchEvent&&x.activeElement&&ae.target===x.activeElement&&_n(ae.target).is(P.focusableElements))return P.isMoved=!0,void(S.allowClick=!1);if(P.allowTouchCallbacks&&S.emit("touchMove",ae),ae.targetTouches&&ae.targetTouches.length>1)return;J.currentX=ce,J.currentY=ue;const we=J.currentX-J.startX,He=J.currentY-J.startY;if(S.params.threshold&&Math.sqrt(we**2+He**2)<S.params.threshold)return;if(void 0===P.isScrolling){let _t;S.isHorizontal()&&J.currentY===J.startY||S.isVertical()&&J.currentX===J.startX?P.isScrolling=!1:we*we+He*He>=25&&(_t=180*Math.atan2(Math.abs(He),Math.abs(we))/Math.PI,P.isScrolling=S.isHorizontal()?_t>z.touchAngle:90-_t>z.touchAngle)}if(P.isScrolling&&S.emit("touchMoveOpposite",ae),void 0===P.startMoving&&(J.currentX!==J.startX||J.currentY!==J.startY)&&(P.startMoving=!0),P.isScrolling)return void(P.isTouched=!1);if(!P.startMoving)return;S.allowClick=!1,!z.cssMode&&ae.cancelable&&ae.preventDefault(),z.touchMoveStopPropagation&&!z.nested&&ae.stopPropagation(),P.isMoved||(z.loop&&!z.cssMode&&S.loopFix(),P.startTranslate=S.getTranslate(),S.setTransition(0),S.animating&&S.$wrapperEl.trigger("webkitTransitionEnd transitionend"),P.allowMomentumBounce=!1,z.grabCursor&&(!0===S.allowSlideNext||!0===S.allowSlidePrev)&&S.setGrabCursor(!0),S.emit("sliderFirstMove",ae)),S.emit("sliderMove",ae),P.isMoved=!0;let nt=S.isHorizontal()?we:He;J.diff=nt,nt*=z.touchRatio,ye&&(nt=-nt),S.swipeDirection=nt>0?"prev":"next",P.currentTranslate=nt+P.startTranslate;let Ae=!0,Le=z.resistanceRatio;if(z.touchReleaseOnEdges&&(Le=0),nt>0&&P.currentTranslate>S.minTranslate()?(Ae=!1,z.resistance&&(P.currentTranslate=S.minTranslate()-1+(-S.minTranslate()+P.startTranslate+nt)**Le)):nt<0&&P.currentTranslate<S.maxTranslate()&&(Ae=!1,z.resistance&&(P.currentTranslate=S.maxTranslate()+1-(S.maxTranslate()-P.startTranslate-nt)**Le)),Ae&&(ae.preventedByNestedSwiper=!0),!S.allowSlideNext&&"next"===S.swipeDirection&&P.currentTranslate<P.startTranslate&&(P.currentTranslate=P.startTranslate),!S.allowSlidePrev&&"prev"===S.swipeDirection&&P.currentTranslate>P.startTranslate&&(P.currentTranslate=P.startTranslate),!S.allowSlidePrev&&!S.allowSlideNext&&(P.currentTranslate=P.startTranslate),z.threshold>0){if(!(Math.abs(nt)>z.threshold||P.allowThresholdMove))return void(P.currentTranslate=P.startTranslate);if(!P.allowThresholdMove)return P.allowThresholdMove=!0,J.startX=J.currentX,J.startY=J.currentY,P.currentTranslate=P.startTranslate,void(J.diff=S.isHorizontal()?J.currentX-J.startX:J.currentY-J.startY)}!z.followFinger||z.cssMode||((z.freeMode&&z.freeMode.enabled&&S.freeMode||z.watchSlidesProgress)&&(S.updateActiveIndex(),S.updateSlidesClasses()),S.params.freeMode&&z.freeMode.enabled&&S.freeMode&&S.freeMode.onTouchMove(),S.updateProgress(P.currentTranslate),S.setTranslate(P.currentTranslate))}function ms(l){const x=this,S=x.touchEventsData,{params:P,touches:z,rtlTranslate:J,slidesGrid:ye,enabled:Te}=x;if(!Te)return;let ae=l;if(ae.originalEvent&&(ae=ae.originalEvent),S.allowTouchCallbacks&&x.emit("touchEnd",ae),S.allowTouchCallbacks=!1,!S.isTouched)return S.isMoved&&P.grabCursor&&x.setGrabCursor(!1),S.isMoved=!1,void(S.startMoving=!1);P.grabCursor&&S.isMoved&&S.isTouched&&(!0===x.allowSlideNext||!0===x.allowSlidePrev)&&x.setGrabCursor(!1);const _e=bi(),ce=_e-S.touchStartTime;if(x.allowClick){const Je=ae.path||ae.composedPath&&ae.composedPath();x.updateClickedSlide(Je&&Je[0]||ae.target),x.emit("tap click",ae),ce<300&&_e-S.lastClickTime<300&&x.emit("doubleTap doubleClick",ae)}if(S.lastClickTime=bi(),oi(()=>{x.destroyed||(x.allowClick=!0)}),!S.isTouched||!S.isMoved||!x.swipeDirection||0===z.diff||S.currentTranslate===S.startTranslate)return S.isTouched=!1,S.isMoved=!1,void(S.startMoving=!1);let ue;if(S.isTouched=!1,S.isMoved=!1,S.startMoving=!1,ue=P.followFinger?J?x.translate:-x.translate:-S.currentTranslate,P.cssMode)return;if(x.params.freeMode&&P.freeMode.enabled)return void x.freeMode.onTouchEnd({currentPos:ue});let we=0,He=x.slidesSizesGrid[0];for(let Je=0;Je<ye.length;Je+=Je<P.slidesPerGroupSkip?1:P.slidesPerGroup){const yt=Je<P.slidesPerGroupSkip-1?1:P.slidesPerGroup;void 0!==ye[Je+yt]?ue>=ye[Je]&&ue<ye[Je+yt]&&(we=Je,He=ye[Je+yt]-ye[Je]):ue>=ye[Je]&&(we=Je,He=ye[ye.length-1]-ye[ye.length-2])}let nt=null,Ae=null;P.rewind&&(x.isBeginning?Ae=x.params.virtual&&x.params.virtual.enabled&&x.virtual?x.virtual.slides.length-1:x.slides.length-1:x.isEnd&&(nt=0));const Le=(ue-ye[we])/He,_t=we<P.slidesPerGroupSkip-1?1:P.slidesPerGroup;if(ce>P.longSwipesMs){if(!P.longSwipes)return void x.slideTo(x.activeIndex);"next"===x.swipeDirection&&x.slideTo(Le>=P.longSwipesRatio?P.rewind&&x.isEnd?nt:we+_t:we),"prev"===x.swipeDirection&&(Le>1-P.longSwipesRatio?x.slideTo(we+_t):null!==Ae&&Le<0&&Math.abs(Le)>P.longSwipesRatio?x.slideTo(Ae):x.slideTo(we))}else{if(!P.shortSwipes)return void x.slideTo(x.activeIndex);!x.navigation||ae.target!==x.navigation.nextEl&&ae.target!==x.navigation.prevEl?("next"===x.swipeDirection&&x.slideTo(null!==nt?nt:we+_t),"prev"===x.swipeDirection&&x.slideTo(null!==Ae?Ae:we)):x.slideTo(ae.target===x.navigation.nextEl?we+_t:we)}}function ho(){const l=this,{params:x,el:S}=l;if(S&&0===S.offsetWidth)return;x.breakpoints&&l.setBreakpoint();const{allowSlideNext:P,allowSlidePrev:z,snapGrid:J}=l;l.allowSlideNext=!0,l.allowSlidePrev=!0,l.updateSize(),l.updateSlides(),l.updateSlidesClasses(),l.slideTo(("auto"===x.slidesPerView||x.slidesPerView>1)&&l.isEnd&&!l.isBeginning&&!l.params.centeredSlides?l.slides.length-1:l.activeIndex,0,!1,!0),l.autoplay&&l.autoplay.running&&l.autoplay.paused&&l.autoplay.run(),l.allowSlidePrev=z,l.allowSlideNext=P,l.params.watchOverflow&&J!==l.snapGrid&&l.checkOverflow()}function Rs(l){const x=this;!x.enabled||x.allowClick||(x.params.preventClicks&&l.preventDefault(),x.params.preventClicksPropagation&&x.animating&&(l.stopPropagation(),l.stopImmediatePropagation()))}function Ai(){const l=this,{wrapperEl:x,rtlTranslate:S,enabled:P}=l;if(!P)return;let z;l.previousTranslate=l.translate,l.translate=l.isHorizontal()?-x.scrollLeft:-x.scrollTop,0===l.translate&&(l.translate=0),l.updateActiveIndex(),l.updateSlidesClasses();const J=l.maxTranslate()-l.minTranslate();z=0===J?0:(l.translate-l.minTranslate())/J,z!==l.progress&&l.updateProgress(S?-l.translate:l.translate),l.emit("setTranslate",l.translate,!1)}let Ks=!1;function ao(){}const js=(l,x)=>{const S=le(),{params:P,touchEvents:z,el:J,wrapperEl:ye,device:Te,support:ae}=l,_e=!!P.nested,ce="on"===x?"addEventListener":"removeEventListener",ue=x;if(ae.touch){const we=!("touchstart"!==z.start||!ae.passiveListener||!P.passiveListeners)&&{passive:!0,capture:!1};J[ce](z.start,l.onTouchStart,we),J[ce](z.move,l.onTouchMove,ae.passiveListener?{passive:!1,capture:_e}:_e),J[ce](z.end,l.onTouchEnd,we),z.cancel&&J[ce](z.cancel,l.onTouchEnd,we)}else J[ce](z.start,l.onTouchStart,!1),S[ce](z.move,l.onTouchMove,_e),S[ce](z.end,l.onTouchEnd,!1);(P.preventClicks||P.preventClicksPropagation)&&J[ce]("click",l.onClick,!0),P.cssMode&&ye[ce]("scroll",l.onScroll),l[ue](P.updateOnWindowResize?Te.ios||Te.android?"resize orientationchange observerUpdate":"resize observerUpdate":"observerUpdate",ho,!0)},_i=(l,x)=>l.grid&&x.grid&&x.grid.rows>1,Yi={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function vi(l,x){return function(P={}){const z=Object.keys(P)[0],J=P[z];"object"==typeof J&&null!==J?(["navigation","pagination","scrollbar"].indexOf(z)>=0&&!0===l[z]&&(l[z]={auto:!0}),z in l&&"enabled"in J?(!0===l[z]&&(l[z]={enabled:!0}),"object"==typeof l[z]&&!("enabled"in l[z])&&(l[z].enabled=!0),l[z]||(l[z]={enabled:!1}),Vi(x,P)):Vi(x,P)):Vi(x,P)}}const Ti={eventsEmitter:{on(l,x,S){const P=this;if(!P.eventsListeners||P.destroyed||"function"!=typeof x)return P;const z=S?"unshift":"push";return l.split(" ").forEach(J=>{P.eventsListeners[J]||(P.eventsListeners[J]=[]),P.eventsListeners[J][z](x)}),P},once(l,x,S){const P=this;if(!P.eventsListeners||P.destroyed||"function"!=typeof x)return P;function z(...J){P.off(l,z),z.__emitterProxy&&delete z.__emitterProxy,x.apply(P,J)}return z.__emitterProxy=x,P.on(l,z,S)},onAny(l,x){const S=this;if(!S.eventsListeners||S.destroyed||"function"!=typeof l)return S;const P=x?"unshift":"push";return S.eventsAnyListeners.indexOf(l)<0&&S.eventsAnyListeners[P](l),S},offAny(l){const x=this;if(!x.eventsListeners||x.destroyed||!x.eventsAnyListeners)return x;const S=x.eventsAnyListeners.indexOf(l);return S>=0&&x.eventsAnyListeners.splice(S,1),x},off(l,x){const S=this;return!S.eventsListeners||S.destroyed||!S.eventsListeners||l.split(" ").forEach(P=>{void 0===x?S.eventsListeners[P]=[]:S.eventsListeners[P]&&S.eventsListeners[P].forEach((z,J)=>{(z===x||z.__emitterProxy&&z.__emitterProxy===x)&&S.eventsListeners[P].splice(J,1)})}),S},emit(...l){const x=this;if(!x.eventsListeners||x.destroyed||!x.eventsListeners)return x;let S,P,z;return"string"==typeof l[0]||Array.isArray(l[0])?(S=l[0],P=l.slice(1,l.length),z=x):(S=l[0].events,P=l[0].data,z=l[0].context||x),P.unshift(z),(Array.isArray(S)?S:S.split(" ")).forEach(ye=>{x.eventsAnyListeners&&x.eventsAnyListeners.length&&x.eventsAnyListeners.forEach(Te=>{Te.apply(z,[ye,...P])}),x.eventsListeners&&x.eventsListeners[ye]&&x.eventsListeners[ye].forEach(Te=>{Te.apply(z,P)})}),x}},update:{updateSize:function Yr(){const l=this;let x,S;const P=l.$el;x=null!=l.params.width?l.params.width:P[0].clientWidth,S=null!=l.params.height?l.params.height:P[0].clientHeight,!(0===x&&l.isHorizontal()||0===S&&l.isVertical())&&(x=x-parseInt(P.css("padding-left")||0,10)-parseInt(P.css("padding-right")||0,10),S=S-parseInt(P.css("padding-top")||0,10)-parseInt(P.css("padding-bottom")||0,10),Number.isNaN(x)&&(x=0),Number.isNaN(S)&&(S=0),Object.assign(l,{width:x,height:S,size:l.isHorizontal()?x:S}))},updateSlides:function Wr(){const l=this;function x(Nn){return l.isHorizontal()?Nn:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Nn]}function S(Nn,Qt){return parseFloat(Nn.getPropertyValue(x(Qt))||0)}const P=l.params,{$wrapperEl:z,size:J,rtlTranslate:ye,wrongRTL:Te}=l,ae=l.virtual&&P.virtual.enabled,_e=ae?l.virtual.slides.length:l.slides.length,ce=z.children(`.${l.params.slideClass}`),ue=ae?l.virtual.slides.length:ce.length;let we=[];const He=[],nt=[];let Ae=P.slidesOffsetBefore;"function"==typeof Ae&&(Ae=P.slidesOffsetBefore.call(l));let Le=P.slidesOffsetAfter;"function"==typeof Le&&(Le=P.slidesOffsetAfter.call(l));const _t=l.snapGrid.length,Je=l.slidesGrid.length;let yt=P.spaceBetween,mn=-Ae,Tn=0,hn=0;if(void 0===J)return;"string"==typeof yt&&yt.indexOf("%")>=0&&(yt=parseFloat(yt.replace("%",""))/100*J),l.virtualSize=-yt,ce.css(ye?{marginLeft:"",marginBottom:"",marginTop:""}:{marginRight:"",marginBottom:"",marginTop:""}),P.centeredSlides&&P.cssMode&&(qi(l.wrapperEl,"--swiper-centered-offset-before",""),qi(l.wrapperEl,"--swiper-centered-offset-after",""));const xn=P.grid&&P.grid.rows>1&&l.grid;let Zn;xn&&l.grid.initSlides(ue);const cr="auto"===P.slidesPerView&&P.breakpoints&&Object.keys(P.breakpoints).filter(Nn=>void 0!==P.breakpoints[Nn].slidesPerView).length>0;for(let Nn=0;Nn<ue;Nn+=1){Zn=0;const Qt=ce.eq(Nn);if(xn&&l.grid.updateSlide(Nn,Qt,ue,x),"none"!==Qt.css("display")){if("auto"===P.slidesPerView){cr&&(ce[Nn].style[x("width")]="");const Rt=getComputedStyle(Qt[0]),ln=Qt[0].style.transform,B=Qt[0].style.webkitTransform;if(ln&&(Qt[0].style.transform="none"),B&&(Qt[0].style.webkitTransform="none"),P.roundLengths)Zn=l.isHorizontal()?Qt.outerWidth(!0):Qt.outerHeight(!0);else{const b=S(Rt,"width"),E=S(Rt,"padding-left"),k=S(Rt,"padding-right"),ee=S(Rt,"margin-left"),Ee=S(Rt,"margin-right"),ke=Rt.getPropertyValue("box-sizing");if(ke&&"border-box"===ke)Zn=b+ee+Ee;else{const{clientWidth:qe,offsetWidth:wt}=Qt[0];Zn=b+E+k+ee+Ee+(wt-qe)}}ln&&(Qt[0].style.transform=ln),B&&(Qt[0].style.webkitTransform=B),P.roundLengths&&(Zn=Math.floor(Zn))}else Zn=(J-(P.slidesPerView-1)*yt)/P.slidesPerView,P.roundLengths&&(Zn=Math.floor(Zn)),ce[Nn]&&(ce[Nn].style[x("width")]=`${Zn}px`);ce[Nn]&&(ce[Nn].swiperSlideSize=Zn),nt.push(Zn),P.centeredSlides?(mn=mn+Zn/2+Tn/2+yt,0===Tn&&0!==Nn&&(mn=mn-J/2-yt),0===Nn&&(mn=mn-J/2-yt),Math.abs(mn)<.001&&(mn=0),P.roundLengths&&(mn=Math.floor(mn)),hn%P.slidesPerGroup==0&&we.push(mn),He.push(mn)):(P.roundLengths&&(mn=Math.floor(mn)),(hn-Math.min(l.params.slidesPerGroupSkip,hn))%l.params.slidesPerGroup==0&&we.push(mn),He.push(mn),mn=mn+Zn+yt),l.virtualSize+=Zn+yt,Tn=Zn,hn+=1}}if(l.virtualSize=Math.max(l.virtualSize,J)+Le,ye&&Te&&("slide"===P.effect||"coverflow"===P.effect)&&z.css({width:`${l.virtualSize+P.spaceBetween}px`}),P.setWrapperSize&&z.css({[x("width")]:`${l.virtualSize+P.spaceBetween}px`}),xn&&l.grid.updateWrapperSize(Zn,we,x),!P.centeredSlides){const Nn=[];for(let Qt=0;Qt<we.length;Qt+=1){let Rt=we[Qt];P.roundLengths&&(Rt=Math.floor(Rt)),we[Qt]<=l.virtualSize-J&&Nn.push(Rt)}we=Nn,Math.floor(l.virtualSize-J)-Math.floor(we[we.length-1])>1&&we.push(l.virtualSize-J)}if(0===we.length&&(we=[0]),0!==P.spaceBetween){const Nn=l.isHorizontal()&&ye?"marginLeft":x("marginRight");ce.filter((Qt,Rt)=>!P.cssMode||Rt!==ce.length-1).css({[Nn]:`${yt}px`})}if(P.centeredSlides&&P.centeredSlidesBounds){let Nn=0;nt.forEach(Rt=>{Nn+=Rt+(P.spaceBetween?P.spaceBetween:0)}),Nn-=P.spaceBetween;const Qt=Nn-J;we=we.map(Rt=>Rt<0?-Ae:Rt>Qt?Qt+Le:Rt)}if(P.centerInsufficientSlides){let Nn=0;if(nt.forEach(Qt=>{Nn+=Qt+(P.spaceBetween?P.spaceBetween:0)}),Nn-=P.spaceBetween,Nn<J){const Qt=(J-Nn)/2;we.forEach((Rt,ln)=>{we[ln]=Rt-Qt}),He.forEach((Rt,ln)=>{He[ln]=Rt+Qt})}}if(Object.assign(l,{slides:ce,snapGrid:we,slidesGrid:He,slidesSizesGrid:nt}),P.centeredSlides&&P.cssMode&&!P.centeredSlidesBounds){qi(l.wrapperEl,"--swiper-centered-offset-before",-we[0]+"px"),qi(l.wrapperEl,"--swiper-centered-offset-after",l.size/2-nt[nt.length-1]/2+"px");const Nn=-l.snapGrid[0],Qt=-l.slidesGrid[0];l.snapGrid=l.snapGrid.map(Rt=>Rt+Nn),l.slidesGrid=l.slidesGrid.map(Rt=>Rt+Qt)}if(ue!==_e&&l.emit("slidesLengthChange"),we.length!==_t&&(l.params.watchOverflow&&l.checkOverflow(),l.emit("snapGridLengthChange")),He.length!==Je&&l.emit("slidesGridLengthChange"),P.watchSlidesProgress&&l.updateSlidesOffset(),!(ae||P.cssMode||"slide"!==P.effect&&"fade"!==P.effect)){const Nn=`${P.containerModifierClass}backface-hidden`,Qt=l.$el.hasClass(Nn);ue<=P.maxBackfaceHiddenSlides?Qt||l.$el.addClass(Nn):Qt&&l.$el.removeClass(Nn)}},updateAutoHeight:function fs(l){const x=this,S=[],P=x.virtual&&x.params.virtual.enabled;let J,z=0;"number"==typeof l?x.setTransition(l):!0===l&&x.setTransition(x.params.speed);const ye=Te=>P?x.slides.filter(ae=>parseInt(ae.getAttribute("data-swiper-slide-index"),10)===Te)[0]:x.slides.eq(Te)[0];if("auto"!==x.params.slidesPerView&&x.params.slidesPerView>1)if(x.params.centeredSlides)(x.visibleSlides||_n([])).each(Te=>{S.push(Te)});else for(J=0;J<Math.ceil(x.params.slidesPerView);J+=1){const Te=x.activeIndex+J;if(Te>x.slides.length&&!P)break;S.push(ye(Te))}else S.push(ye(x.activeIndex));for(J=0;J<S.length;J+=1)if(void 0!==S[J]){const Te=S[J].offsetHeight;z=Te>z?Te:z}(z||0===z)&&x.$wrapperEl.css("height",`${z}px`)},updateSlidesOffset:function Ds(){const l=this,x=l.slides;for(let S=0;S<x.length;S+=1)x[S].swiperSlideOffset=l.isHorizontal()?x[S].offsetLeft:x[S].offsetTop},updateSlidesProgress:function ps(l=this&&this.translate||0){const x=this,S=x.params,{slides:P,rtlTranslate:z,snapGrid:J}=x;if(0===P.length)return;void 0===P[0].swiperSlideOffset&&x.updateSlidesOffset();let ye=-l;z&&(ye=l),P.removeClass(S.slideVisibleClass),x.visibleSlidesIndexes=[],x.visibleSlides=[];for(let Te=0;Te<P.length;Te+=1){const ae=P[Te];let _e=ae.swiperSlideOffset;S.cssMode&&S.centeredSlides&&(_e-=P[0].swiperSlideOffset);const ce=(ye+(S.centeredSlides?x.minTranslate():0)-_e)/(ae.swiperSlideSize+S.spaceBetween),ue=(ye-J[0]+(S.centeredSlides?x.minTranslate():0)-_e)/(ae.swiperSlideSize+S.spaceBetween),we=-(ye-_e),He=we+x.slidesSizesGrid[Te];(we>=0&&we<x.size-1||He>1&&He<=x.size||we<=0&&He>=x.size)&&(x.visibleSlides.push(ae),x.visibleSlidesIndexes.push(Te),P.eq(Te).addClass(S.slideVisibleClass)),ae.progress=z?-ce:ce,ae.originalProgress=z?-ue:ue}x.visibleSlides=_n(x.visibleSlides)},updateProgress:function Di(l){const x=this;if(void 0===l){const _e=x.rtlTranslate?-1:1;l=x&&x.translate&&x.translate*_e||0}const S=x.params,P=x.maxTranslate()-x.minTranslate();let{progress:z,isBeginning:J,isEnd:ye}=x;const Te=J,ae=ye;0===P?(z=0,J=!0,ye=!0):(z=(l-x.minTranslate())/P,J=z<=0,ye=z>=1),Object.assign(x,{progress:z,isBeginning:J,isEnd:ye}),(S.watchSlidesProgress||S.centeredSlides&&S.autoHeight)&&x.updateSlidesProgress(l),J&&!Te&&x.emit("reachBeginning toEdge"),ye&&!ae&&x.emit("reachEnd toEdge"),(Te&&!J||ae&&!ye)&&x.emit("fromEdge"),x.emit("progress",z)},updateSlidesClasses:function ko(){const l=this,{slides:x,params:S,$wrapperEl:P,activeIndex:z,realIndex:J}=l,ye=l.virtual&&S.virtual.enabled;let Te;x.removeClass(`${S.slideActiveClass} ${S.slideNextClass} ${S.slidePrevClass} ${S.slideDuplicateActiveClass} ${S.slideDuplicateNextClass} ${S.slideDuplicatePrevClass}`),Te=ye?l.$wrapperEl.find(`.${S.slideClass}[data-swiper-slide-index="${z}"]`):x.eq(z),Te.addClass(S.slideActiveClass),S.loop&&(Te.hasClass(S.slideDuplicateClass)?P.children(`.${S.slideClass}:not(.${S.slideDuplicateClass})[data-swiper-slide-index="${J}"]`).addClass(S.slideDuplicateActiveClass):P.children(`.${S.slideClass}.${S.slideDuplicateClass}[data-swiper-slide-index="${J}"]`).addClass(S.slideDuplicateActiveClass));let ae=Te.nextAll(`.${S.slideClass}`).eq(0).addClass(S.slideNextClass);S.loop&&0===ae.length&&(ae=x.eq(0),ae.addClass(S.slideNextClass));let _e=Te.prevAll(`.${S.slideClass}`).eq(0).addClass(S.slidePrevClass);S.loop&&0===_e.length&&(_e=x.eq(-1),_e.addClass(S.slidePrevClass)),S.loop&&(ae.hasClass(S.slideDuplicateClass)?P.children(`.${S.slideClass}:not(.${S.slideDuplicateClass})[data-swiper-slide-index="${ae.attr("data-swiper-slide-index")}"]`).addClass(S.slideDuplicateNextClass):P.children(`.${S.slideClass}.${S.slideDuplicateClass}[data-swiper-slide-index="${ae.attr("data-swiper-slide-index")}"]`).addClass(S.slideDuplicateNextClass),_e.hasClass(S.slideDuplicateClass)?P.children(`.${S.slideClass}:not(.${S.slideDuplicateClass})[data-swiper-slide-index="${_e.attr("data-swiper-slide-index")}"]`).addClass(S.slideDuplicatePrevClass):P.children(`.${S.slideClass}.${S.slideDuplicateClass}[data-swiper-slide-index="${_e.attr("data-swiper-slide-index")}"]`).addClass(S.slideDuplicatePrevClass)),l.emitSlidesClasses()},updateActiveIndex:function to(l){const x=this,S=x.rtlTranslate?x.translate:-x.translate,{slidesGrid:P,snapGrid:z,params:J,activeIndex:ye,realIndex:Te,snapIndex:ae}=x;let ce,_e=l;if(void 0===_e){for(let we=0;we<P.length;we+=1)void 0!==P[we+1]?S>=P[we]&&S<P[we+1]-(P[we+1]-P[we])/2?_e=we:S>=P[we]&&S<P[we+1]&&(_e=we+1):S>=P[we]&&(_e=we);J.normalizeSlideIndex&&(_e<0||void 0===_e)&&(_e=0)}if(z.indexOf(S)>=0)ce=z.indexOf(S);else{const we=Math.min(J.slidesPerGroupSkip,_e);ce=we+Math.floor((_e-we)/J.slidesPerGroup)}if(ce>=z.length&&(ce=z.length-1),_e===ye)return void(ce!==ae&&(x.snapIndex=ce,x.emit("snapIndexChange")));const ue=parseInt(x.slides.eq(_e).attr("data-swiper-slide-index")||_e,10);Object.assign(x,{snapIndex:ce,realIndex:ue,previousIndex:ye,activeIndex:_e}),x.emit("activeIndexChange"),x.emit("snapIndexChange"),Te!==ue&&x.emit("realIndexChange"),(x.initialized||x.params.runCallbacksOnInit)&&x.emit("slideChange")},updateClickedSlide:function vs(l){const x=this,S=x.params,P=_n(l).closest(`.${S.slideClass}`)[0];let J,z=!1;if(P)for(let ye=0;ye<x.slides.length;ye+=1)if(x.slides[ye]===P){z=!0,J=ye;break}if(!P||!z)return x.clickedSlide=void 0,void(x.clickedIndex=void 0);x.clickedSlide=P,x.clickedIndex=x.virtual&&x.params.virtual.enabled?parseInt(_n(P).attr("data-swiper-slide-index"),10):J,S.slideToClickedSlide&&void 0!==x.clickedIndex&&x.clickedIndex!==x.activeIndex&&x.slideToClickedSlide()}},translate:{getTranslate:function Ct(l=(this.isHorizontal()?"x":"y")){const{params:S,rtlTranslate:P,translate:z,$wrapperEl:J}=this;if(S.virtualTranslate)return P?-z:z;if(S.cssMode)return z;let ye=function Wi(l,x="x"){const S=Xe();let P,z,J;const ye=function _s(l){const x=Xe();let S;return x.getComputedStyle&&(S=x.getComputedStyle(l,null)),!S&&l.currentStyle&&(S=l.currentStyle),S||(S=l.style),S}(l);return S.WebKitCSSMatrix?(z=ye.transform||ye.webkitTransform,z.split(",").length>6&&(z=z.split(", ").map(Te=>Te.replace(",",".")).join(", ")),J=new S.WebKitCSSMatrix("none"===z?"":z)):(J=ye.MozTransform||ye.OTransform||ye.MsTransform||ye.msTransform||ye.transform||ye.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),P=J.toString().split(",")),"x"===x&&(z=S.WebKitCSSMatrix?J.m41:16===P.length?parseFloat(P[12]):parseFloat(P[4])),"y"===x&&(z=S.WebKitCSSMatrix?J.m42:16===P.length?parseFloat(P[13]):parseFloat(P[5])),z||0}(J[0],l);return P&&(ye=-ye),ye||0},setTranslate:function dt(l,x){const S=this,{rtlTranslate:P,params:z,$wrapperEl:J,wrapperEl:ye,progress:Te}=S;let ue,ae=0,_e=0;S.isHorizontal()?ae=P?-l:l:_e=l,z.roundLengths&&(ae=Math.floor(ae),_e=Math.floor(_e)),z.cssMode?ye[S.isHorizontal()?"scrollLeft":"scrollTop"]=S.isHorizontal()?-ae:-_e:z.virtualTranslate||J.transform(`translate3d(${ae}px, ${_e}px, 0px)`),S.previousTranslate=S.translate,S.translate=S.isHorizontal()?ae:_e;const we=S.maxTranslate()-S.minTranslate();ue=0===we?0:(l-S.minTranslate())/we,ue!==Te&&S.updateProgress(l),S.emit("setTranslate",S.translate,x)},minTranslate:function St(){return-this.snapGrid[0]},maxTranslate:function gn(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function $n(l=0,x=this.params.speed,S=!0,P=!0,z){const J=this,{params:ye,wrapperEl:Te}=J;if(J.animating&&ye.preventInteractionOnTransition)return!1;const ae=J.minTranslate(),_e=J.maxTranslate();let ce;if(ce=P&&l>ae?ae:P&&l<_e?_e:l,J.updateProgress(ce),ye.cssMode){const ue=J.isHorizontal();if(0===x)Te[ue?"scrollLeft":"scrollTop"]=-ce;else{if(!J.support.smoothScroll)return Ur({swiper:J,targetPosition:-ce,side:ue?"left":"top"}),!0;Te.scrollTo({[ue?"left":"top"]:-ce,behavior:"smooth"})}return!0}return 0===x?(J.setTransition(0),J.setTranslate(ce),S&&(J.emit("beforeTransitionStart",x,z),J.emit("transitionEnd"))):(J.setTransition(x),J.setTranslate(ce),S&&(J.emit("beforeTransitionStart",x,z),J.emit("transitionStart")),J.animating||(J.animating=!0,J.onTranslateToWrapperTransitionEnd||(J.onTranslateToWrapperTransitionEnd=function(we){!J||J.destroyed||we.target===this&&(J.$wrapperEl[0].removeEventListener("transitionend",J.onTranslateToWrapperTransitionEnd),J.$wrapperEl[0].removeEventListener("webkitTransitionEnd",J.onTranslateToWrapperTransitionEnd),J.onTranslateToWrapperTransitionEnd=null,delete J.onTranslateToWrapperTransitionEnd,S&&J.emit("transitionEnd"))}),J.$wrapperEl[0].addEventListener("transitionend",J.onTranslateToWrapperTransitionEnd),J.$wrapperEl[0].addEventListener("webkitTransitionEnd",J.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function Qr(l,x){const S=this;S.params.cssMode||S.$wrapperEl.transition(l),S.emit("setTransition",l,x)},transitionStart:function pi(l=!0,x){const S=this,{params:P}=S;P.cssMode||(P.autoHeight&&S.updateAutoHeight(),Zi({swiper:S,runCallbacks:l,direction:x,step:"Start"}))},transitionEnd:function ds(l=!0,x){const S=this,{params:P}=S;S.animating=!1,!P.cssMode&&(S.setTransition(0),Zi({swiper:S,runCallbacks:l,direction:x,step:"End"}))}},slide:{slideTo:function as(l=0,x=this.params.speed,S=!0,P,z){if("number"!=typeof l&&"string"!=typeof l)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof l}] given.`);if("string"==typeof l){const yt=parseInt(l,10);if(!isFinite(yt))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${l}] given.`);l=yt}const J=this;let ye=l;ye<0&&(ye=0);const{params:Te,snapGrid:ae,slidesGrid:_e,previousIndex:ce,activeIndex:ue,rtlTranslate:we,wrapperEl:He,enabled:nt}=J;if(J.animating&&Te.preventInteractionOnTransition||!nt&&!P&&!z)return!1;const Ae=Math.min(J.params.slidesPerGroupSkip,ye);let Le=Ae+Math.floor((ye-Ae)/J.params.slidesPerGroup);Le>=ae.length&&(Le=ae.length-1);const _t=-ae[Le];if(Te.normalizeSlideIndex)for(let yt=0;yt<_e.length;yt+=1){const mn=-Math.floor(100*_t),Tn=Math.floor(100*_e[yt]),hn=Math.floor(100*_e[yt+1]);void 0!==_e[yt+1]?mn>=Tn&&mn<hn-(hn-Tn)/2?ye=yt:mn>=Tn&&mn<hn&&(ye=yt+1):mn>=Tn&&(ye=yt)}if(J.initialized&&ye!==ue&&(!J.allowSlideNext&&_t<J.translate&&_t<J.minTranslate()||!J.allowSlidePrev&&_t>J.translate&&_t>J.maxTranslate()&&(ue||0)!==ye))return!1;let Je;if(ye!==(ce||0)&&S&&J.emit("beforeSlideChangeStart"),J.updateProgress(_t),Je=ye>ue?"next":ye<ue?"prev":"reset",we&&-_t===J.translate||!we&&_t===J.translate)return J.updateActiveIndex(ye),Te.autoHeight&&J.updateAutoHeight(),J.updateSlidesClasses(),"slide"!==Te.effect&&J.setTranslate(_t),"reset"!==Je&&(J.transitionStart(S,Je),J.transitionEnd(S,Je)),!1;if(Te.cssMode){const yt=J.isHorizontal(),mn=we?_t:-_t;if(0===x){const Tn=J.virtual&&J.params.virtual.enabled;Tn&&(J.wrapperEl.style.scrollSnapType="none",J._immediateVirtual=!0),He[yt?"scrollLeft":"scrollTop"]=mn,Tn&&requestAnimationFrame(()=>{J.wrapperEl.style.scrollSnapType="",J._swiperImmediateVirtual=!1})}else{if(!J.support.smoothScroll)return Ur({swiper:J,targetPosition:mn,side:yt?"left":"top"}),!0;He.scrollTo({[yt?"left":"top"]:mn,behavior:"smooth"})}return!0}return J.setTransition(x),J.setTranslate(_t),J.updateActiveIndex(ye),J.updateSlidesClasses(),J.emit("beforeTransitionStart",x,P),J.transitionStart(S,Je),0===x?J.transitionEnd(S,Je):J.animating||(J.animating=!0,J.onSlideToWrapperTransitionEnd||(J.onSlideToWrapperTransitionEnd=function(mn){!J||J.destroyed||mn.target===this&&(J.$wrapperEl[0].removeEventListener("transitionend",J.onSlideToWrapperTransitionEnd),J.$wrapperEl[0].removeEventListener("webkitTransitionEnd",J.onSlideToWrapperTransitionEnd),J.onSlideToWrapperTransitionEnd=null,delete J.onSlideToWrapperTransitionEnd,J.transitionEnd(S,Je))}),J.$wrapperEl[0].addEventListener("transitionend",J.onSlideToWrapperTransitionEnd),J.$wrapperEl[0].addEventListener("webkitTransitionEnd",J.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function Es(l=0,x=this.params.speed,S=!0,P){if("string"==typeof l){const ye=parseInt(l,10);if(!isFinite(ye))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${l}] given.`);l=ye}const z=this;let J=l;return z.params.loop&&(J+=z.loopedSlides),z.slideTo(J,x,S,P)},slideNext:function Ko(l=this.params.speed,x=!0,S){const P=this,{animating:z,enabled:J,params:ye}=P;if(!J)return P;let Te=ye.slidesPerGroup;"auto"===ye.slidesPerView&&1===ye.slidesPerGroup&&ye.slidesPerGroupAuto&&(Te=Math.max(P.slidesPerViewDynamic("current",!0),1));const ae=P.activeIndex<ye.slidesPerGroupSkip?1:Te;if(ye.loop){if(z&&ye.loopPreventsSlide)return!1;P.loopFix(),P._clientLeft=P.$wrapperEl[0].clientLeft}return P.slideTo(ye.rewind&&P.isEnd?0:P.activeIndex+ae,l,x,S)},slidePrev:function gs(l=this.params.speed,x=!0,S){const P=this,{params:z,animating:J,snapGrid:ye,slidesGrid:Te,rtlTranslate:ae,enabled:_e}=P;if(!_e)return P;if(z.loop){if(J&&z.loopPreventsSlide)return!1;P.loopFix(),P._clientLeft=P.$wrapperEl[0].clientLeft}function ue(Le){return Le<0?-Math.floor(Math.abs(Le)):Math.floor(Le)}const we=ue(ae?P.translate:-P.translate),He=ye.map(Le=>ue(Le));let nt=ye[He.indexOf(we)-1];if(void 0===nt&&z.cssMode){let Le;ye.forEach((_t,Je)=>{we>=_t&&(Le=Je)}),void 0!==Le&&(nt=ye[Le>0?Le-1:Le])}let Ae=0;return void 0!==nt&&(Ae=Te.indexOf(nt),Ae<0&&(Ae=P.activeIndex-1),"auto"===z.slidesPerView&&1===z.slidesPerGroup&&z.slidesPerGroupAuto&&(Ae=Ae-P.slidesPerViewDynamic("previous",!0)+1,Ae=Math.max(Ae,0))),P.slideTo(z.rewind&&P.isBeginning?P.params.virtual&&P.params.virtual.enabled&&P.virtual?P.virtual.slides.length-1:P.slides.length-1:Ae,l,x,S)},slideReset:function co(l=this.params.speed,x=!0,S){return this.slideTo(this.activeIndex,l,x,S)},slideToClosest:function Cs(l=this.params.speed,x=!0,S,P=.5){const z=this;let J=z.activeIndex;const ye=Math.min(z.params.slidesPerGroupSkip,J),Te=ye+Math.floor((J-ye)/z.params.slidesPerGroup),ae=z.rtlTranslate?z.translate:-z.translate;if(ae>=z.snapGrid[Te]){const _e=z.snapGrid[Te];ae-_e>(z.snapGrid[Te+1]-_e)*P&&(J+=z.params.slidesPerGroup)}else{const _e=z.snapGrid[Te-1];ae-_e<=(z.snapGrid[Te]-_e)*P&&(J-=z.params.slidesPerGroup)}return J=Math.max(J,0),J=Math.min(J,z.slidesGrid.length-1),z.slideTo(J,l,x,S)},slideToClickedSlide:function Io(){const l=this,{params:x,$wrapperEl:S}=l,P="auto"===x.slidesPerView?l.slidesPerViewDynamic():x.slidesPerView;let J,z=l.clickedIndex;if(x.loop){if(l.animating)return;J=parseInt(_n(l.clickedSlide).attr("data-swiper-slide-index"),10),x.centeredSlides?z<l.loopedSlides-P/2||z>l.slides.length-l.loopedSlides+P/2?(l.loopFix(),z=S.children(`.${x.slideClass}[data-swiper-slide-index="${J}"]:not(.${x.slideDuplicateClass})`).eq(0).index(),oi(()=>{l.slideTo(z)})):l.slideTo(z):z>l.slides.length-P?(l.loopFix(),z=S.children(`.${x.slideClass}[data-swiper-slide-index="${J}"]:not(.${x.slideDuplicateClass})`).eq(0).index(),oi(()=>{l.slideTo(z)})):l.slideTo(z)}else l.slideTo(z)}},loop:{loopCreate:function no(){const l=this,x=le(),{params:S,$wrapperEl:P}=l,z=P.children().length>0?_n(P.children()[0].parentNode):P;z.children(`.${S.slideClass}.${S.slideDuplicateClass}`).remove();let J=z.children(`.${S.slideClass}`);if(S.loopFillGroupWithBlank){const ae=S.slidesPerGroup-J.length%S.slidesPerGroup;if(ae!==S.slidesPerGroup){for(let _e=0;_e<ae;_e+=1){const ce=_n(x.createElement("div")).addClass(`${S.slideClass} ${S.slideBlankClass}`);z.append(ce)}J=z.children(`.${S.slideClass}`)}}"auto"===S.slidesPerView&&!S.loopedSlides&&(S.loopedSlides=J.length),l.loopedSlides=Math.ceil(parseFloat(S.loopedSlides||S.slidesPerView,10)),l.loopedSlides+=S.loopAdditionalSlides,l.loopedSlides>J.length&&l.params.loopedSlidesLimit&&(l.loopedSlides=J.length);const ye=[],Te=[];J.each((ae,_e)=>{_n(ae).attr("data-swiper-slide-index",_e)});for(let ae=0;ae<l.loopedSlides;ae+=1){const _e=ae-Math.floor(ae/J.length)*J.length;Te.push(J.eq(_e)[0]),ye.unshift(J.eq(J.length-_e-1)[0])}for(let ae=0;ae<Te.length;ae+=1)z.append(_n(Te[ae].cloneNode(!0)).addClass(S.slideDuplicateClass));for(let ae=ye.length-1;ae>=0;ae-=1)z.prepend(_n(ye[ae].cloneNode(!0)).addClass(S.slideDuplicateClass))},loopFix:function Ms(){const l=this;l.emit("beforeLoopFix");const{activeIndex:x,slides:S,loopedSlides:P,allowSlidePrev:z,allowSlideNext:J,snapGrid:ye,rtlTranslate:Te}=l;let ae;l.allowSlidePrev=!0,l.allowSlideNext=!0;const ce=-ye[x]-l.getTranslate();x<P?(ae=S.length-3*P+x,ae+=P,l.slideTo(ae,0,!1,!0)&&0!==ce&&l.setTranslate((Te?-l.translate:l.translate)-ce)):x>=S.length-P&&(ae=-S.length+x+P,ae+=P,l.slideTo(ae,0,!1,!0)&&0!==ce&&l.setTranslate((Te?-l.translate:l.translate)-ce)),l.allowSlidePrev=z,l.allowSlideNext=J,l.emit("loopFix")},loopDestroy:function Us(){const{$wrapperEl:x,params:S,slides:P}=this;x.children(`.${S.slideClass}.${S.slideDuplicateClass},.${S.slideClass}.${S.slideBlankClass}`).remove(),P.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function Ro(l){const x=this;if(x.support.touch||!x.params.simulateTouch||x.params.watchOverflow&&x.isLocked||x.params.cssMode)return;const S="container"===x.params.touchEventsTarget?x.el:x.wrapperEl;S.style.cursor="move",S.style.cursor=l?"grabbing":"grab"},unsetGrabCursor:function qs(){const l=this;l.support.touch||l.params.watchOverflow&&l.isLocked||l.params.cssMode||(l["container"===l.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:{attachEvents:function Ps(){const l=this,x=le(),{params:S,support:P}=l;l.onTouchStart=$s.bind(l),l.onTouchMove=Zo.bind(l),l.onTouchEnd=ms.bind(l),S.cssMode&&(l.onScroll=Ai.bind(l)),l.onClick=Rs.bind(l),P.touch&&!Ks&&(x.addEventListener("touchstart",ao),Ks=!0),js(l,"on")},detachEvents:function Os(){js(this,"off")}},breakpoints:{setBreakpoint:function U(){const l=this,{activeIndex:x,initialized:S,loopedSlides:P=0,params:z,$el:J}=l,ye=z.breakpoints;if(!ye||ye&&0===Object.keys(ye).length)return;const Te=l.getBreakpoint(ye,l.params.breakpointsBase,l.el);if(!Te||l.currentBreakpoint===Te)return;const _e=(Te in ye?ye[Te]:void 0)||l.originalParams,ce=_i(l,z),ue=_i(l,_e),we=z.enabled;ce&&!ue?(J.removeClass(`${z.containerModifierClass}grid ${z.containerModifierClass}grid-column`),l.emitContainerClasses()):!ce&&ue&&(J.addClass(`${z.containerModifierClass}grid`),(_e.grid.fill&&"column"===_e.grid.fill||!_e.grid.fill&&"column"===z.grid.fill)&&J.addClass(`${z.containerModifierClass}grid-column`),l.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(Le=>{const _t=z[Le]&&z[Le].enabled,Je=_e[Le]&&_e[Le].enabled;_t&&!Je&&l[Le].disable(),!_t&&Je&&l[Le].enable()});const He=_e.direction&&_e.direction!==z.direction,nt=z.loop&&(_e.slidesPerView!==z.slidesPerView||He);He&&S&&l.changeDirection(),Vi(l.params,_e);const Ae=l.params.enabled;Object.assign(l,{allowTouchMove:l.params.allowTouchMove,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev}),we&&!Ae?l.disable():!we&&Ae&&l.enable(),l.currentBreakpoint=Te,l.emit("_beforeBreakpoint",_e),nt&&S&&(l.loopDestroy(),l.loopCreate(),l.updateSlides(),l.slideTo(x-P+l.loopedSlides,0,!1)),l.emit("breakpoint",_e)},getBreakpoint:function pe(l,x="window",S){if(!l||"container"===x&&!S)return;let P=!1;const z=Xe(),J="window"===x?z.innerHeight:S.clientHeight,ye=Object.keys(l).map(Te=>{if("string"==typeof Te&&0===Te.indexOf("@")){const ae=parseFloat(Te.substr(1));return{value:J*ae,point:Te}}return{value:Te,point:Te}});ye.sort((Te,ae)=>parseInt(Te.value,10)-parseInt(ae.value,10));for(let Te=0;Te<ye.length;Te+=1){const{point:ae,value:_e}=ye[Te];"window"===x?z.matchMedia(`(min-width: ${_e}px)`).matches&&(P=ae):_e<=S.clientWidth&&(P=ae)}return P||"max"}},checkOverflow:{checkOverflow:function ni(){const l=this,{isLocked:x,params:S}=l,{slidesOffsetBefore:P}=S;if(P){const z=l.slides.length-1;l.isLocked=l.size>l.slidesGrid[z]+l.slidesSizesGrid[z]+2*P}else l.isLocked=1===l.snapGrid.length;!0===S.allowSlideNext&&(l.allowSlideNext=!l.isLocked),!0===S.allowSlidePrev&&(l.allowSlidePrev=!l.isLocked),x&&x!==l.isLocked&&(l.isEnd=!1),x!==l.isLocked&&l.emit(l.isLocked?"lock":"unlock")}},classes:{addClasses:function ze(){const l=this,{classNames:x,params:S,rtl:P,$el:z,device:J,support:ye}=l,Te=function ve(l,x){const S=[];return l.forEach(P=>{"object"==typeof P?Object.keys(P).forEach(z=>{P[z]&&S.push(x+z)}):"string"==typeof P&&S.push(x+P)}),S}(["initialized",S.direction,{"pointer-events":!ye.touch},{"free-mode":l.params.freeMode&&S.freeMode.enabled},{autoheight:S.autoHeight},{rtl:P},{grid:S.grid&&S.grid.rows>1},{"grid-column":S.grid&&S.grid.rows>1&&"column"===S.grid.fill},{android:J.android},{ios:J.ios},{"css-mode":S.cssMode},{centered:S.cssMode&&S.centeredSlides},{"watch-progress":S.watchSlidesProgress}],S.containerModifierClass);x.push(...Te),z.addClass([...x].join(" ")),l.emitContainerClasses()},removeClasses:function en(){const{$el:x,classNames:S}=this;x.removeClass(S.join(" ")),this.emitContainerClasses()}},images:{loadImage:function or(l,x,S,P,z,J){const ye=Xe();let Te;function ae(){J&&J()}_n(l).parent("picture")[0]||l.complete&&z||!x?ae():(Te=new ye.Image,Te.onload=ae,Te.onerror=ae,P&&(Te.sizes=P),S&&(Te.srcset=S),x&&(Te.src=x))},preloadImages:function Br(){const l=this;function x(){null==l||!l||l.destroyed||(void 0!==l.imagesLoaded&&(l.imagesLoaded+=1),l.imagesLoaded===l.imagesToLoad.length&&(l.params.updateOnImagesReady&&l.update(),l.emit("imagesReady")))}l.imagesToLoad=l.$el.find("img");for(let S=0;S<l.imagesToLoad.length;S+=1){const P=l.imagesToLoad[S];l.loadImage(P,P.currentSrc||P.getAttribute("src"),P.srcset||P.getAttribute("srcset"),P.sizes||P.getAttribute("sizes"),!0,x)}}}},ro={};class ts{constructor(...x){let S,P;if(1===x.length&&x[0].constructor&&"Object"===Object.prototype.toString.call(x[0]).slice(8,-1)?P=x[0]:[S,P]=x,P||(P={}),P=Vi({},P),S&&!P.el&&(P.el=S),P.el&&_n(P.el).length>1){const Te=[];return _n(P.el).each(ae=>{const _e=Vi({},P,{el:ae});Te.push(new ts(_e))}),Te}const z=this;z.__swiper__=!0,z.support=Vs(),z.device=function yr(l={}){return Cr||(Cr=function mr({userAgent:l}={}){const x=Vs(),S=Xe(),P=S.navigator.platform,z=l||S.navigator.userAgent,J={ios:!1,android:!1},ye=S.screen.width,Te=S.screen.height,ae=z.match(/(Android);?[\s\/]+([\d.]+)?/);let _e=z.match(/(iPad).*OS\s([\d_]+)/);const ce=z.match(/(iPod)(.*OS\s([\d_]+))?/),ue=!_e&&z.match(/(iPhone\sOS|iOS)\s([\d_]+)/),we="Win32"===P;let He="MacIntel"===P;return!_e&&He&&x.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${ye}x${Te}`)>=0&&(_e=z.match(/(Version)\/([\d.]+)/),_e||(_e=[0,1,"13_0_0"]),He=!1),ae&&!we&&(J.os="android",J.android=!0),(_e||ue||ce)&&(J.os="ios",J.ios=!0),J}(l)),Cr}({userAgent:P.userAgent}),z.browser=function Si(){return Qi||(Qi=function zr(){const l=Xe();return{isSafari:function x(){const S=l.navigator.userAgent.toLowerCase();return S.indexOf("safari")>=0&&S.indexOf("chrome")<0&&S.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(l.navigator.userAgent)}}()),Qi}(),z.eventsListeners={},z.eventsAnyListeners=[],z.modules=[...z.__modules__],P.modules&&Array.isArray(P.modules)&&z.modules.push(...P.modules);const J={};z.modules.forEach(Te=>{Te({swiper:z,extendParams:vi(P,J),on:z.on.bind(z),once:z.once.bind(z),off:z.off.bind(z),emit:z.emit.bind(z)})});const ye=Vi({},Yi,J);return z.params=Vi({},ye,ro,P),z.originalParams=Vi({},z.params),z.passedParams=Vi({},P),z.params&&z.params.on&&Object.keys(z.params.on).forEach(Te=>{z.on(Te,z.params.on[Te])}),z.params&&z.params.onAny&&z.onAny(z.params.onAny),z.$=_n,Object.assign(z,{enabled:z.params.enabled,el:S,classNames:[],slides:_n(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===z.params.direction,isVertical:()=>"vertical"===z.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:z.params.allowSlideNext,allowSlidePrev:z.params.allowSlidePrev,touchEvents:function(){const ae=["touchstart","touchmove","touchend","touchcancel"],_e=["pointerdown","pointermove","pointerup"];return z.touchEventsTouch={start:ae[0],move:ae[1],end:ae[2],cancel:ae[3]},z.touchEventsDesktop={start:_e[0],move:_e[1],end:_e[2]},z.support.touch||!z.params.simulateTouch?z.touchEventsTouch:z.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:z.params.focusableElements,lastClickTime:bi(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:z.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),z.emit("_swiper"),z.params.init&&z.init(),z}enable(){const x=this;x.enabled||(x.enabled=!0,x.params.grabCursor&&x.setGrabCursor(),x.emit("enable"))}disable(){const x=this;!x.enabled||(x.enabled=!1,x.params.grabCursor&&x.unsetGrabCursor(),x.emit("disable"))}setProgress(x,S){const P=this;x=Math.min(Math.max(x,0),1);const z=P.minTranslate(),ye=(P.maxTranslate()-z)*x+z;P.translateTo(ye,void 0===S?0:S),P.updateActiveIndex(),P.updateSlidesClasses()}emitContainerClasses(){const x=this;if(!x.params._emitClasses||!x.el)return;const S=x.el.className.split(" ").filter(P=>0===P.indexOf("swiper")||0===P.indexOf(x.params.containerModifierClass));x.emit("_containerClasses",S.join(" "))}getSlideClasses(x){const S=this;return S.destroyed?"":x.className.split(" ").filter(P=>0===P.indexOf("swiper-slide")||0===P.indexOf(S.params.slideClass)).join(" ")}emitSlidesClasses(){const x=this;if(!x.params._emitClasses||!x.el)return;const S=[];x.slides.each(P=>{const z=x.getSlideClasses(P);S.push({slideEl:P,classNames:z}),x.emit("_slideClass",P,z)}),x.emit("_slideClasses",S)}slidesPerViewDynamic(x="current",S=!1){const{params:z,slides:J,slidesGrid:ye,slidesSizesGrid:Te,size:ae,activeIndex:_e}=this;let ce=1;if(z.centeredSlides){let we,ue=J[_e].swiperSlideSize;for(let He=_e+1;He<J.length;He+=1)J[He]&&!we&&(ue+=J[He].swiperSlideSize,ce+=1,ue>ae&&(we=!0));for(let He=_e-1;He>=0;He-=1)J[He]&&!we&&(ue+=J[He].swiperSlideSize,ce+=1,ue>ae&&(we=!0))}else if("current"===x)for(let ue=_e+1;ue<J.length;ue+=1)(S?ye[ue]+Te[ue]-ye[_e]<ae:ye[ue]-ye[_e]<ae)&&(ce+=1);else for(let ue=_e-1;ue>=0;ue-=1)ye[_e]-ye[ue]<ae&&(ce+=1);return ce}update(){const x=this;if(!x||x.destroyed)return;const{snapGrid:S,params:P}=x;function z(){const Te=Math.min(Math.max(x.rtlTranslate?-1*x.translate:x.translate,x.maxTranslate()),x.minTranslate());x.setTranslate(Te),x.updateActiveIndex(),x.updateSlidesClasses()}let J;P.breakpoints&&x.setBreakpoint(),x.updateSize(),x.updateSlides(),x.updateProgress(),x.updateSlidesClasses(),x.params.freeMode&&x.params.freeMode.enabled?(z(),x.params.autoHeight&&x.updateAutoHeight()):(J=x.slideTo(("auto"===x.params.slidesPerView||x.params.slidesPerView>1)&&x.isEnd&&!x.params.centeredSlides?x.slides.length-1:x.activeIndex,0,!1,!0),J||z()),P.watchOverflow&&S!==x.snapGrid&&x.checkOverflow(),x.emit("update")}changeDirection(x,S=!0){const P=this,z=P.params.direction;return x||(x="horizontal"===z?"vertical":"horizontal"),x===z||"horizontal"!==x&&"vertical"!==x||(P.$el.removeClass(`${P.params.containerModifierClass}${z}`).addClass(`${P.params.containerModifierClass}${x}`),P.emitContainerClasses(),P.params.direction=x,P.slides.each(J=>{"vertical"===x?J.style.width="":J.style.height=""}),P.emit("changeDirection"),S&&P.update()),P}changeLanguageDirection(x){const S=this;S.rtl&&"rtl"===x||!S.rtl&&"ltr"===x||(S.rtl="rtl"===x,S.rtlTranslate="horizontal"===S.params.direction&&S.rtl,S.rtl?(S.$el.addClass(`${S.params.containerModifierClass}rtl`),S.el.dir="rtl"):(S.$el.removeClass(`${S.params.containerModifierClass}rtl`),S.el.dir="ltr"),S.update())}mount(x){const S=this;if(S.mounted)return!0;const P=_n(x||S.params.el);if(!(x=P[0]))return!1;x.swiper=S;const z=()=>`.${(S.params.wrapperClass||"").trim().split(" ").join(".")}`;let ye=(()=>{if(x&&x.shadowRoot&&x.shadowRoot.querySelector){const Te=_n(x.shadowRoot.querySelector(z()));return Te.children=ae=>P.children(ae),Te}return P.children?P.children(z()):_n(P).children(z())})();if(0===ye.length&&S.params.createElements){const ae=le().createElement("div");ye=_n(ae),ae.className=S.params.wrapperClass,P.append(ae),P.children(`.${S.params.slideClass}`).each(_e=>{ye.append(_e)})}return Object.assign(S,{$el:P,el:x,$wrapperEl:ye,wrapperEl:ye[0],mounted:!0,rtl:"rtl"===x.dir.toLowerCase()||"rtl"===P.css("direction"),rtlTranslate:"horizontal"===S.params.direction&&("rtl"===x.dir.toLowerCase()||"rtl"===P.css("direction")),wrongRTL:"-webkit-box"===ye.css("display")}),!0}init(x){const S=this;return S.initialized||!1===S.mount(x)||(S.emit("beforeInit"),S.params.breakpoints&&S.setBreakpoint(),S.addClasses(),S.params.loop&&S.loopCreate(),S.updateSize(),S.updateSlides(),S.params.watchOverflow&&S.checkOverflow(),S.params.grabCursor&&S.enabled&&S.setGrabCursor(),S.params.preloadImages&&S.preloadImages(),S.slideTo(S.params.loop?S.params.initialSlide+S.loopedSlides:S.params.initialSlide,0,S.params.runCallbacksOnInit,!1,!0),S.attachEvents(),S.initialized=!0,S.emit("init"),S.emit("afterInit")),S}destroy(x=!0,S=!0){const P=this,{params:z,$el:J,$wrapperEl:ye,slides:Te}=P;return void 0===P.params||P.destroyed||(P.emit("beforeDestroy"),P.initialized=!1,P.detachEvents(),z.loop&&P.loopDestroy(),S&&(P.removeClasses(),J.removeAttr("style"),ye.removeAttr("style"),Te&&Te.length&&Te.removeClass([z.slideVisibleClass,z.slideActiveClass,z.slideNextClass,z.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),P.emit("destroy"),Object.keys(P.eventsListeners).forEach(ae=>{P.off(ae)}),!1!==x&&(P.$el[0].swiper=null,function ir(l){const x=l;Object.keys(x).forEach(S=>{try{x[S]=null}catch(P){}try{delete x[S]}catch(P){}})}(P)),P.destroyed=!0),null}static extendDefaults(x){Vi(ro,x)}static get extendedDefaults(){return ro}static get defaults(){return Yi}static installModule(x){ts.prototype.__modules__||(ts.prototype.__modules__=[]);const S=ts.prototype.__modules__;"function"==typeof x&&S.indexOf(x)<0&&S.push(x)}static use(x){return Array.isArray(x)?(x.forEach(S=>ts.installModule(S)),ts):(ts.installModule(x),ts)}}Object.keys(Ti).forEach(l=>{Object.keys(Ti[l]).forEach(x=>{ts.prototype[x]=Ti[l][x]})}),ts.use([function zs({swiper:l,on:x,emit:S}){const P=Xe();let z=null,J=null;const ye=()=>{!l||l.destroyed||!l.initialized||(S("beforeResize"),S("resize"))},_e=()=>{!l||l.destroyed||!l.initialized||S("orientationchange")};x("init",()=>{l.params.resizeObserver&&void 0!==P.ResizeObserver?!l||l.destroyed||!l.initialized||(z=new ResizeObserver(ce=>{J=P.requestAnimationFrame(()=>{const{width:ue,height:we}=l;let He=ue,nt=we;ce.forEach(({contentBoxSize:Ae,contentRect:Le,target:_t})=>{_t&&_t!==l.el||(He=Le?Le.width:(Ae[0]||Ae).inlineSize,nt=Le?Le.height:(Ae[0]||Ae).blockSize)}),(He!==ue||nt!==we)&&ye()})}),z.observe(l.el)):(P.addEventListener("resize",ye),P.addEventListener("orientationchange",_e))}),x("destroy",()=>{J&&P.cancelAnimationFrame(J),z&&z.unobserve&&l.el&&(z.unobserve(l.el),z=null),P.removeEventListener("resize",ye),P.removeEventListener("orientationchange",_e)})},function Ki({swiper:l,extendParams:x,on:S,emit:P}){const z=[],J=Xe(),ye=(_e,ce={})=>{const we=new(J.MutationObserver||J.WebkitMutationObserver)(He=>{if(1===He.length)return void P("observerUpdate",He[0]);const nt=function(){P("observerUpdate",He[0])};J.requestAnimationFrame?J.requestAnimationFrame(nt):J.setTimeout(nt,0)});we.observe(_e,{attributes:void 0===ce.attributes||ce.attributes,childList:void 0===ce.childList||ce.childList,characterData:void 0===ce.characterData||ce.characterData}),z.push(we)};x({observer:!1,observeParents:!1,observeSlideChildren:!1}),S("init",()=>{if(l.params.observer){if(l.params.observeParents){const _e=l.$el.parents();for(let ce=0;ce<_e.length;ce+=1)ye(_e[ce])}ye(l.$el[0],{childList:l.params.observeSlideChildren}),ye(l.$wrapperEl[0],{attributes:!1})}}),S("destroy",()=>{z.forEach(_e=>{_e.disconnect()}),z.splice(0,z.length)})}]);const kr=ts;function vo(l,x,S,P){const z=le();return l.params.createElements&&Object.keys(P).forEach(J=>{if(!S[J]&&!0===S.auto){let ye=l.$el.children(`.${P[J]}`)[0];ye||(ye=z.createElement("div"),ye.className=P[J],l.$el.append(ye)),S[J]=ye,x[J]=ye}}),S}function Q({swiper:l,extendParams:x,on:S,emit:P}){function z(He){let nt;return He&&(nt=_n(He),l.params.uniqueNavElements&&"string"==typeof He&&nt.length>1&&1===l.$el.find(He).length&&(nt=l.$el.find(He))),nt}function J(He,nt){const Ae=l.params.navigation;He&&He.length>0&&(He[nt?"addClass":"removeClass"](Ae.disabledClass),He[0]&&"BUTTON"===He[0].tagName&&(He[0].disabled=nt),l.params.watchOverflow&&l.enabled&&He[l.isLocked?"addClass":"removeClass"](Ae.lockClass))}function ye(){if(l.params.loop)return;const{$nextEl:He,$prevEl:nt}=l.navigation;J(nt,l.isBeginning&&!l.params.rewind),J(He,l.isEnd&&!l.params.rewind)}function Te(He){He.preventDefault(),(!l.isBeginning||l.params.loop||l.params.rewind)&&(l.slidePrev(),P("navigationPrev"))}function ae(He){He.preventDefault(),(!l.isEnd||l.params.loop||l.params.rewind)&&(l.slideNext(),P("navigationNext"))}function _e(){const He=l.params.navigation;if(l.params.navigation=vo(l,l.originalParams.navigation,l.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!He.nextEl&&!He.prevEl)return;const nt=z(He.nextEl),Ae=z(He.prevEl);nt&&nt.length>0&&nt.on("click",ae),Ae&&Ae.length>0&&Ae.on("click",Te),Object.assign(l.navigation,{$nextEl:nt,nextEl:nt&&nt[0],$prevEl:Ae,prevEl:Ae&&Ae[0]}),l.enabled||(nt&&nt.addClass(He.lockClass),Ae&&Ae.addClass(He.lockClass))}function ce(){const{$nextEl:He,$prevEl:nt}=l.navigation;He&&He.length&&(He.off("click",ae),He.removeClass(l.params.navigation.disabledClass)),nt&&nt.length&&(nt.off("click",Te),nt.removeClass(l.params.navigation.disabledClass))}x({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),l.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},S("init",()=>{!1===l.params.navigation.enabled?we():(_e(),ye())}),S("toEdge fromEdge lock unlock",()=>{ye()}),S("destroy",()=>{ce()}),S("enable disable",()=>{const{$nextEl:He,$prevEl:nt}=l.navigation;He&&He[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass),nt&&nt[l.enabled?"removeClass":"addClass"](l.params.navigation.lockClass)}),S("click",(He,nt)=>{const{$nextEl:Ae,$prevEl:Le}=l.navigation,_t=nt.target;if(l.params.navigation.hideOnClick&&!_n(_t).is(Le)&&!_n(_t).is(Ae)){if(l.pagination&&l.params.pagination&&l.params.pagination.clickable&&(l.pagination.el===_t||l.pagination.el.contains(_t)))return;let Je;Ae?Je=Ae.hasClass(l.params.navigation.hiddenClass):Le&&(Je=Le.hasClass(l.params.navigation.hiddenClass)),P(!0===Je?"navigationShow":"navigationHide"),Ae&&Ae.toggleClass(l.params.navigation.hiddenClass),Le&&Le.toggleClass(l.params.navigation.hiddenClass)}});const we=()=>{l.$el.addClass(l.params.navigation.navigationDisabledClass),ce()};Object.assign(l.navigation,{enable:()=>{l.$el.removeClass(l.params.navigation.navigationDisabledClass),_e(),ye()},disable:we,update:ye,init:_e,destroy:ce})}function G(l=""){return`.${l.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function L({swiper:l,extendParams:x,on:S,emit:P}){const z="swiper-pagination";x({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:Ae=>Ae,formatFractionTotal:Ae=>Ae,bulletClass:`${z}-bullet`,bulletActiveClass:`${z}-bullet-active`,modifierClass:`${z}-`,currentClass:`${z}-current`,totalClass:`${z}-total`,hiddenClass:`${z}-hidden`,progressbarFillClass:`${z}-progressbar-fill`,progressbarOppositeClass:`${z}-progressbar-opposite`,clickableClass:`${z}-clickable`,lockClass:`${z}-lock`,horizontalClass:`${z}-horizontal`,verticalClass:`${z}-vertical`,paginationDisabledClass:`${z}-disabled`}}),l.pagination={el:null,$el:null,bullets:[]};let J,ye=0;function Te(){return!l.params.pagination.el||!l.pagination.el||!l.pagination.$el||0===l.pagination.$el.length}function ae(Ae,Le){const{bulletActiveClass:_t}=l.params.pagination;Ae[Le]().addClass(`${_t}-${Le}`)[Le]().addClass(`${_t}-${Le}-${Le}`)}function _e(){const Ae=l.rtl,Le=l.params.pagination;if(Te())return;const _t=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,Je=l.pagination.$el;let yt;const mn=l.params.loop?Math.ceil((_t-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;if(l.params.loop?(yt=Math.ceil((l.activeIndex-l.loopedSlides)/l.params.slidesPerGroup),yt>_t-1-2*l.loopedSlides&&(yt-=_t-2*l.loopedSlides),yt>mn-1&&(yt-=mn),yt<0&&"bullets"!==l.params.paginationType&&(yt=mn+yt)):yt=void 0!==l.snapIndex?l.snapIndex:l.activeIndex||0,"bullets"===Le.type&&l.pagination.bullets&&l.pagination.bullets.length>0){const Tn=l.pagination.bullets;let hn,xn,Zn;if(Le.dynamicBullets&&(J=Tn.eq(0)[l.isHorizontal()?"outerWidth":"outerHeight"](!0),Je.css(l.isHorizontal()?"width":"height",J*(Le.dynamicMainBullets+4)+"px"),Le.dynamicMainBullets>1&&void 0!==l.previousIndex&&(ye+=yt-(l.previousIndex-l.loopedSlides||0),ye>Le.dynamicMainBullets-1?ye=Le.dynamicMainBullets-1:ye<0&&(ye=0)),hn=Math.max(yt-ye,0),xn=hn+(Math.min(Tn.length,Le.dynamicMainBullets)-1),Zn=(xn+hn)/2),Tn.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(cr=>`${Le.bulletActiveClass}${cr}`).join(" ")),Je.length>1)Tn.each(cr=>{const Nn=_n(cr),Qt=Nn.index();Qt===yt&&Nn.addClass(Le.bulletActiveClass),Le.dynamicBullets&&(Qt>=hn&&Qt<=xn&&Nn.addClass(`${Le.bulletActiveClass}-main`),Qt===hn&&ae(Nn,"prev"),Qt===xn&&ae(Nn,"next"))});else{const cr=Tn.eq(yt),Nn=cr.index();if(cr.addClass(Le.bulletActiveClass),Le.dynamicBullets){const Qt=Tn.eq(hn),Rt=Tn.eq(xn);for(let ln=hn;ln<=xn;ln+=1)Tn.eq(ln).addClass(`${Le.bulletActiveClass}-main`);if(l.params.loop)if(Nn>=Tn.length){for(let ln=Le.dynamicMainBullets;ln>=0;ln-=1)Tn.eq(Tn.length-ln).addClass(`${Le.bulletActiveClass}-main`);Tn.eq(Tn.length-Le.dynamicMainBullets-1).addClass(`${Le.bulletActiveClass}-prev`)}else ae(Qt,"prev"),ae(Rt,"next");else ae(Qt,"prev"),ae(Rt,"next")}}if(Le.dynamicBullets){const cr=Math.min(Tn.length,Le.dynamicMainBullets+4),Nn=(J*cr-J)/2-Zn*J,Qt=Ae?"right":"left";Tn.css(l.isHorizontal()?Qt:"top",`${Nn}px`)}}if("fraction"===Le.type&&(Je.find(G(Le.currentClass)).text(Le.formatFractionCurrent(yt+1)),Je.find(G(Le.totalClass)).text(Le.formatFractionTotal(mn))),"progressbar"===Le.type){let Tn;Tn=Le.progressbarOpposite?l.isHorizontal()?"vertical":"horizontal":l.isHorizontal()?"horizontal":"vertical";const hn=(yt+1)/mn;let xn=1,Zn=1;"horizontal"===Tn?xn=hn:Zn=hn,Je.find(G(Le.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${xn}) scaleY(${Zn})`).transition(l.params.speed)}"custom"===Le.type&&Le.renderCustom?(Je.html(Le.renderCustom(l,yt+1,mn)),P("paginationRender",Je[0])):P("paginationUpdate",Je[0]),l.params.watchOverflow&&l.enabled&&Je[l.isLocked?"addClass":"removeClass"](Le.lockClass)}function ce(){const Ae=l.params.pagination;if(Te())return;const Le=l.virtual&&l.params.virtual.enabled?l.virtual.slides.length:l.slides.length,_t=l.pagination.$el;let Je="";if("bullets"===Ae.type){let yt=l.params.loop?Math.ceil((Le-2*l.loopedSlides)/l.params.slidesPerGroup):l.snapGrid.length;l.params.freeMode&&l.params.freeMode.enabled&&!l.params.loop&&yt>Le&&(yt=Le);for(let mn=0;mn<yt;mn+=1)Je+=Ae.renderBullet?Ae.renderBullet.call(l,mn,Ae.bulletClass):`<${Ae.bulletElement} class="${Ae.bulletClass}"></${Ae.bulletElement}>`;_t.html(Je),l.pagination.bullets=_t.find(G(Ae.bulletClass))}"fraction"===Ae.type&&(Je=Ae.renderFraction?Ae.renderFraction.call(l,Ae.currentClass,Ae.totalClass):`<span class="${Ae.currentClass}"></span> / <span class="${Ae.totalClass}"></span>`,_t.html(Je)),"progressbar"===Ae.type&&(Je=Ae.renderProgressbar?Ae.renderProgressbar.call(l,Ae.progressbarFillClass):`<span class="${Ae.progressbarFillClass}"></span>`,_t.html(Je)),"custom"!==Ae.type&&P("paginationRender",l.pagination.$el[0])}function ue(){l.params.pagination=vo(l,l.originalParams.pagination,l.params.pagination,{el:"swiper-pagination"});const Ae=l.params.pagination;if(!Ae.el)return;let Le=_n(Ae.el);0!==Le.length&&(l.params.uniqueNavElements&&"string"==typeof Ae.el&&Le.length>1&&(Le=l.$el.find(Ae.el),Le.length>1&&(Le=Le.filter(_t=>_n(_t).parents(".swiper")[0]===l.el))),"bullets"===Ae.type&&Ae.clickable&&Le.addClass(Ae.clickableClass),Le.addClass(Ae.modifierClass+Ae.type),Le.addClass(l.isHorizontal()?Ae.horizontalClass:Ae.verticalClass),"bullets"===Ae.type&&Ae.dynamicBullets&&(Le.addClass(`${Ae.modifierClass}${Ae.type}-dynamic`),ye=0,Ae.dynamicMainBullets<1&&(Ae.dynamicMainBullets=1)),"progressbar"===Ae.type&&Ae.progressbarOpposite&&Le.addClass(Ae.progressbarOppositeClass),Ae.clickable&&Le.on("click",G(Ae.bulletClass),function(Je){Je.preventDefault();let yt=_n(this).index()*l.params.slidesPerGroup;l.params.loop&&(yt+=l.loopedSlides),l.slideTo(yt)}),Object.assign(l.pagination,{$el:Le,el:Le[0]}),l.enabled||Le.addClass(Ae.lockClass))}function we(){const Ae=l.params.pagination;if(Te())return;const Le=l.pagination.$el;Le.removeClass(Ae.hiddenClass),Le.removeClass(Ae.modifierClass+Ae.type),Le.removeClass(l.isHorizontal()?Ae.horizontalClass:Ae.verticalClass),l.pagination.bullets&&l.pagination.bullets.removeClass&&l.pagination.bullets.removeClass(Ae.bulletActiveClass),Ae.clickable&&Le.off("click",G(Ae.bulletClass))}S("init",()=>{!1===l.params.pagination.enabled?nt():(ue(),ce(),_e())}),S("activeIndexChange",()=>{(l.params.loop||void 0===l.snapIndex)&&_e()}),S("snapIndexChange",()=>{l.params.loop||_e()}),S("slidesLengthChange",()=>{l.params.loop&&(ce(),_e())}),S("snapGridLengthChange",()=>{l.params.loop||(ce(),_e())}),S("destroy",()=>{we()}),S("enable disable",()=>{const{$el:Ae}=l.pagination;Ae&&Ae[l.enabled?"removeClass":"addClass"](l.params.pagination.lockClass)}),S("lock unlock",()=>{_e()}),S("click",(Ae,Le)=>{const _t=Le.target,{$el:Je}=l.pagination;if(l.params.pagination.el&&l.params.pagination.hideOnClick&&Je&&Je.length>0&&!_n(_t).hasClass(l.params.pagination.bulletClass)){if(l.navigation&&(l.navigation.nextEl&&_t===l.navigation.nextEl||l.navigation.prevEl&&_t===l.navigation.prevEl))return;const yt=Je.hasClass(l.params.pagination.hiddenClass);P(!0===yt?"paginationShow":"paginationHide"),Je.toggleClass(l.params.pagination.hiddenClass)}});const nt=()=>{l.$el.addClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.addClass(l.params.pagination.paginationDisabledClass),we()};Object.assign(l.pagination,{enable:()=>{l.$el.removeClass(l.params.pagination.paginationDisabledClass),l.pagination.$el&&l.pagination.$el.removeClass(l.params.pagination.paginationDisabledClass),ue(),ce(),_e()},disable:nt,render:ce,update:_e,init:ue,destroy:we})}},5861:(jn,Dt,H)=>{function g(ge,le,Ye,Xe,gt,Qe,ft){try{var Pe=ge[Qe](ft),Me=Pe.value}catch(Et){return void Ye(Et)}Pe.done?le(Me):Promise.resolve(Me).then(Xe,gt)}function Z(ge){return function(){var le=this,Ye=arguments;return new Promise(function(Xe,gt){var Qe=ge.apply(le,Ye);function ft(Me){g(Qe,Xe,gt,ft,Pe,"next",Me)}function Pe(Me){g(Qe,Xe,gt,ft,Pe,"throw",Me)}ft(void 0)})}}H.d(Dt,{Z:()=>Z})}},jn=>{jn(jn.s=6456)}]);